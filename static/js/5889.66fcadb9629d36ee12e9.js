var iI=Object.defineProperty,oI=Object.defineProperties;var sI=Object.getOwnPropertyDescriptors;var a_=Object.getOwnPropertySymbols;var US=Object.prototype.hasOwnProperty,NS=Object.prototype.propertyIsEnumerable;var s1=Math.pow,GS=(u,n,A)=>n in u?iI(u,n,{enumerable:!0,configurable:!0,writable:!0,value:A}):u[n]=A,jn=(u,n)=>{for(var A in n||(n={}))US.call(n,A)&&GS(u,A,n[A]);if(a_)for(var A of a_(n))NS.call(n,A)&&GS(u,A,n[A]);return u},Xo=(u,n)=>oI(u,sI(n));var An=(u,n)=>{var A={};for(var w in u)US.call(u,w)&&n.indexOf(w)<0&&(A[w]=u[w]);if(u!=null&&a_)for(var w of a_(u))n.indexOf(w)<0&&NS.call(u,w)&&(A[w]=u[w]);return A};var es=(u,n,A)=>new Promise((w,d)=>{var m=j=>{try{E(A.next(j))}catch(ee){d(ee)}},o=j=>{try{E(A.throw(j))}catch(ee){d(ee)}},E=j=>j.done?w(j.value):Promise.resolve(j.value).then(m,o);E((A=A.apply(u,n)).next())});(self.webpackChunkpro_react_admin=self.webpackChunkpro_react_admin||[]).push([[5889],{97342:function(u,n,A){"use strict";A.r(n),A.d(n,{AccumulativeShadows:function(){return bC},AdaptiveDpr:function(){return SR},AdaptiveEvents:function(){return wR},ArcballControls:function(){return I},AsciiRenderer:function(){return _A},BBAnchor:function(){return Ww},Backdrop:function(){return _B},BakeShadows:function(){return xR},Billboard:function(){return Uy},Bounds:function(){return mC},Box:function(){return TT},Bvh:function(){return Pw},CameraControls:function(){return Dl},CameraShake:function(){return eB},Capsule:function(){return WT},CatmullRomLine:function(){return u3},Caustics:function(){return xB},Center:function(){return fb},Circle:function(){return BT},Clone:function(){return v0},Cloud:function(){return jB},ComputedAttribute:function(){return vh},Cone:function(){return RT},ContactShadows:function(){return EC},CubeCamera:function(){return uE},CubicBezierLine:function(){return p3},CurveModifier:function(){return iT},CycleRaycast:function(){return ft},Cylinder:function(){return IT},Decal:function(){return Pv},Detailed:function(){return bR},DeviceOrientationControls:function(){return hE},Dodecahedron:function(){return NT},Edges:function(){return iA},Effects:function(){return Ev},Environment:function(){return _C},EnvironmentCube:function(){return Eb},EnvironmentMap:function(){return j2},EnvironmentPortal:function(){return vC},Example:function(){return Yw},Extrude:function(){return HT},FaceControls:function(){return hi},FaceLandmarker:function(){return sn},FaceLandmarkerDefaults:function(){return zt},Facemesh:function(){return cm},FacemeshDatas:function(){return O0},FacemeshEye:function(){return TA},FacemeshEyeDefaults:function(){return Ch},FirstPersonControls:function(){return xn},Float:function(){return tB},FlyControls:function(){return gE},GizmoHelper:function(){return Pl},GizmoViewcube:function(){return VS},GizmoViewport:function(){return QS},Gltf:function(){return lE},GradientTexture:function(){return bv},GradientType:function(){return m0},Grid:function(){return KS},Html:function(){return pt},Hud:function(){return Fs},Icosahedron:function(){return GT},Image:function(){return Sv},Instance:function(){return tS},Instances:function(){return nS},IsObject:function(){return Sf},KeyboardControls:function(){return t3},Lathe:function(){return jT},Lightformer:function(){return PB},Line:function(){return Gp},Loader:function(){return nr},MapControls:function(){return Rs},MarchingCube:function(){return Fv},MarchingCubes:function(){return yd},MarchingPlane:function(){return cA},Mask:function(){return IR},Merged:function(){return vR},MeshDiscardMaterial:function(){return xT},MeshDistortMaterial:function(){return aT},MeshPortalMaterial:function(){return DR},MeshReflectorMaterial:function(){return uT},MeshRefractionMaterial:function(){return ET},MeshTransmissionMaterial:function(){return MT},MeshWobbleMaterial:function(){return cT},Octahedron:function(){return UT},OrbitControls:function(){return AE},OrthographicCamera:function(){return EA},PerformanceMonitor:function(){return TR},PerspectiveCamera:function(){return qv},PivotControls:function(){return tI},Plane:function(){return fC},Point:function(){return fR},PointMaterial:function(){return CT},PointMaterialImpl:function(){return dC},PointerLockControls:function(){return Nt},Points:function(){return gR},PointsBuffer:function(){return WC},Polyhedron:function(){return zT},PositionPoint:function(){return UC},PositionalAudio:function(){return Yy},Preload:function(){return MR},PresentationControls:function(){return Q_},QuadraticBezierLine:function(){return c3},RandomizedLight:function(){return MC},Reflector:function(){return SB},RenderTexture:function(){return cS},Resize:function(){return JT},Ring:function(){return kT},RoundedBox:function(){return XT},Sampler:function(){return Bf},ScreenQuad:function(){return YT},ScreenSpace:function(){return o3},Scroll:function(){return _m},ScrollControls:function(){return iu},Segment:function(){return ER},SegmentObject:function(){return iS},Segments:function(){return _R},Select:function(){return i3},Shadow:function(){return EB},Shape:function(){return VT},Sky:function(){return zB},SoftShadows:function(){return wT},Sparkles:function(){return QB},Sphere:function(){return FT},SpotLight:function(){return DB},SpotLightShadow:function(){return OB},SpriteAnimator:function(){return Jw},Stage:function(){return yB},Stars:function(){return NB},Stats:function(){return K4},StatsGl:function(){return J4},Svg:function(){return W3},Tetrahedron:function(){return LT},Text:function(){return Z1},Text3D:function(){return Jg},Torus:function(){return DT},TorusKnot:function(){return PT},TrackballControls:function(){return r2},Trail:function(){return Rv},TransformControls:function(){return ne},Tube:function(){return OT},View:function(){return NR},Wireframe:function(){return uR},accumulativeContext:function(){return bb},calcPosFromAngles:function(){return RC},calculateScaleFactor:function(){return AS},isWebGL2Available:function(){return g0},meshBounds:function(){return CR},shaderMaterial:function(){return Lc},useAnimations:function(){return kw},useAspect:function(){return Z4},useBVH:function(){return Dw},useBounds:function(){return AC},useBoxProjectedEnv:function(){return jw},useCamera:function(){return $4},useContextBridge:function(){return Lw},useCubeCamera:function(){return lm},useCubeTexture:function(){return CM},useCursor:function(){return kt},useDepthBuffer:function(){return q4},useDetectGPU:function(){return ow},useEnvironment:function(){return vb},useFBO:function(){return ec},useFBX:function(){return GE},useFaceControls:function(){return li},useFaceLandmarker:function(){return It},useFont:function(){return Tu},useGLTF:function(){return w0},useGizmoContext:function(){return Nc},useHelper:function(){return Dx},useIntersect:function(){return iC},useKTX2:function(){return qE},useKeyboardControls:function(){return n3},useMask:function(){return FR},useMatcapTexture:function(){return JB},useNormalTexture:function(){return $B},usePerformanceMonitor:function(){return BR},useProgress:function(){return Lt},useScroll:function(){return Mc},useSelect:function(){return C1},useSurfaceSampler:function(){return aA},useTexture:function(){return Bu},useTrail:function(){return A0},useTrailTexture:function(){return Kw},useVideoTexture:function(){return SA}});var w=A(87462),d=A(67294),m=A(20745),o=A(99477),E=A(24121);const j=new o.Vector3,ee=new o.Vector3,le=new o.Vector3;function q(i,t,r){const s=j.setFromMatrixPosition(i.matrixWorld);s.project(t);const c=r.width/2,p=r.height/2;return[s.x*c+c,-(s.y*p)+p]}function pe(i,t){const r=j.setFromMatrixPosition(i.matrixWorld),s=ee.setFromMatrixPosition(t.matrixWorld),c=r.sub(s),p=t.getWorldDirection(le);return c.angleTo(p)>Math.PI/2}function ue(i,t,r,s){const c=j.setFromMatrixPosition(i.matrixWorld),p=c.clone();p.project(t),r.setFromCamera(p,t);const h=r.intersectObjects(s,!0);if(h.length){const g=h[0].distance;return c.distanceTo(r.ray.origin)<g}return!0}function xt(i,t){if(t instanceof o.OrthographicCamera)return t.zoom;if(t instanceof o.PerspectiveCamera){const r=j.setFromMatrixPosition(i.matrixWorld),s=ee.setFromMatrixPosition(t.matrixWorld),c=t.fov*Math.PI/180,p=r.distanceTo(s);return 1/(2*Math.tan(c/2)*p)}else return 1}function rt(i,t,r){if(t instanceof o.PerspectiveCamera||t instanceof o.OrthographicCamera){const s=j.setFromMatrixPosition(i.matrixWorld),c=ee.setFromMatrixPosition(t.matrixWorld),p=s.distanceTo(c),h=(r[1]-r[0])/(t.far-t.near),g=r[1]-h*t.far;return Math.round(h*p+g)}}const We=i=>Math.abs(i)<1e-10?0:i;function st(i,t,r=""){let s="matrix3d(";for(let c=0;c!==16;c++)s+=We(t[c]*i.elements[c])+(c!==15?",":")");return r+s}const yt=(i=>t=>st(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),St=(i=>(t,r)=>st(t,i(r),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function _t(i){return i&&typeof i=="object"&&"current"in i}const pt=d.forwardRef((K,Y)=>{var ie=K,{children:i,eps:t=.001,style:r,className:s,prepend:c,center:p,fullscreen:h,portal:g,distanceFactor:y,sprite:_=!1,transform:b=!1,occlude:T,onOcclude:R,castShadow:F,receiveShadow:G,material:L,geometry:O,zIndexRange:P=[16777271,0],calculatePosition:D=q,as:z="div",wrapperClass:H,pointerEvents:Q="auto"}=ie,W=An(ie,["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"]);const{gl:ce,camera:ge,scene:ae,size:xe,raycaster:ve,events:Be,viewport:Ue}=(0,E.z)(),[Ie]=d.useState(()=>document.createElement(z)),Ne=d.useRef(),Le=d.useRef(null),Ye=d.useRef(0),Ce=d.useRef([0,0]),Ee=d.useRef(null),_e=d.useRef(null),oe=(g==null?void 0:g.current)||Be.connected||ce.domElement.parentNode,me=d.useRef(null),Te=d.useRef(!1),ye=d.useMemo(()=>T&&T!=="blending"||Array.isArray(T)&&T.length&&_t(T[0]),[T]);d.useLayoutEffect(()=>{const ot=ce.domElement;T&&T==="blending"?(ot.style.zIndex=`${Math.floor(P[0]/2)}`,ot.style.position="absolute",ot.style.pointerEvents="none"):(ot.style.zIndex=null,ot.style.position=null,ot.style.pointerEvents=null)},[T]),d.useLayoutEffect(()=>{if(Le.current){const ot=Ne.current=m.createRoot(Ie);if(ae.updateMatrixWorld(),b)Ie.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Qt=D(Le.current,ge,xe);Ie.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Qt[0]}px,${Qt[1]}px,0);transform-origin:0 0;`}return oe&&(c?oe.prepend(Ie):oe.appendChild(Ie)),()=>{oe&&oe.removeChild(Ie),ot.unmount()}}},[oe,b]),d.useLayoutEffect(()=>{H&&(Ie.className=H)},[H]);const ze=d.useMemo(()=>b?{position:"absolute",top:0,left:0,width:xe.width,height:xe.height,transformStyle:"preserve-3d",pointerEvents:"none"}:jn(jn({position:"absolute",transform:p?"translate3d(-50%,-50%,0)":"none"},h&&{top:-xe.height/2,left:-xe.width/2,width:xe.width,height:xe.height}),r),[r,p,h,xe,b]),Mt=d.useMemo(()=>({position:"absolute",pointerEvents:Q}),[Q]);d.useLayoutEffect(()=>{if(Te.current=!1,b){var ot;(ot=Ne.current)==null||ot.render(d.createElement("div",{ref:Ee,style:ze},d.createElement("div",{ref:_e,style:Mt},d.createElement("div",{ref:Y,className:s,style:r,children:i}))))}else{var Qt;(Qt=Ne.current)==null||Qt.render(d.createElement("div",{ref:Y,style:ze,className:s,children:i}))}});const At=d.useRef(!0);(0,E.A)(ot=>{if(Le.current){ge.updateMatrixWorld(),Le.current.updateWorldMatrix(!0,!1);const Qt=b?Ce.current:D(Le.current,ge,xe);if(b||Math.abs(Ye.current-ge.zoom)>t||Math.abs(Ce.current[0]-Qt[0])>t||Math.abs(Ce.current[1]-Qt[1])>t){const Gt=pe(Le.current,ge);let Bt=!1;ye&&(T!=="blending"?Bt=[ae]:Array.isArray(T)&&(Bt=T.map(gn=>gn.current)));const qe=At.current;if(Bt){const gn=ue(Le.current,ge,ve,Bt);At.current=gn&&!Gt}else At.current=!Gt;qe!==At.current&&(R?R(!At.current):Ie.style.display=At.current?"block":"none");const Ge=Math.floor(P[0]/2),Ot=T?ye?[P[0],Ge]:[Ge-1,0]:P;if(Ie.style.zIndex=`${rt(Le.current,ge,Ot)}`,b){const[gn,Mn]=[xe.width/2,xe.height/2],Ut=ge.projectionMatrix.elements[5]*Mn,{isOrthographicCamera:Nn,top:ar,left:Cr,bottom:dr,right:bi}=ge,fi=yt(ge.matrixWorldInverse),Sr=Nn?`scale(${Ut})translate(${We(-(bi+Cr)/2)}px,${We((ar+dr)/2)}px)`:`translateZ(${Ut}px)`;let Dr=Le.current.matrixWorld;_&&(Dr=ge.matrixWorldInverse.clone().transpose().copyPosition(Dr).scale(Le.current.scale),Dr.elements[3]=Dr.elements[7]=Dr.elements[11]=0,Dr.elements[15]=1),Ie.style.width=xe.width+"px",Ie.style.height=xe.height+"px",Ie.style.perspective=Nn?"":`${Ut}px`,Ee.current&&_e.current&&(Ee.current.style.transform=`${Sr}${fi}translate(${gn}px,${Mn}px)`,_e.current.style.transform=St(Dr,1/((y||10)/400)))}else{const gn=y===void 0?1:xt(Le.current,ge)*y;Ie.style.transform=`translate3d(${Qt[0]}px,${Qt[1]}px,0) scale(${gn})`}Ce.current=Qt,Ye.current=ge.zoom}}if(!ye&&me.current&&!Te.current)if(b){if(Ee.current){const Qt=Ee.current.children[0];if(Qt!=null&&Qt.clientWidth&&Qt!=null&&Qt.clientHeight){const{isOrthographicCamera:Gt}=ge;if(Gt||O)W.scale&&(Array.isArray(W.scale)?W.scale instanceof o.Vector3?me.current.scale.copy(W.scale.clone().divideScalar(1)):me.current.scale.set(1/W.scale[0],1/W.scale[1],1/W.scale[2]):me.current.scale.setScalar(1/W.scale));else{const Bt=(y||10)/400,qe=Qt.clientWidth*Bt,Ge=Qt.clientHeight*Bt;me.current.scale.set(qe,Ge,1)}Te.current=!0}}}else{const Qt=Ie.children[0];if(Qt!=null&&Qt.clientWidth&&Qt!=null&&Qt.clientHeight){const Gt=1/Ue.factor,Bt=Qt.clientWidth*Gt,qe=Qt.clientHeight*Gt;me.current.scale.set(Bt,qe,1),Te.current=!0}me.current.lookAt(ot.camera.position)}});const gt=d.useMemo(()=>({vertexShader:b?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[b]);return d.createElement("group",(0,w.Z)({},W,{ref:Le}),T&&!ye&&d.createElement("mesh",{castShadow:F,receiveShadow:G,ref:me},O||d.createElement("planeGeometry",null),L||d.createElement("shaderMaterial",{side:o.DoubleSide,vertexShader:gt.vertexShader,fragmentShader:gt.fragmentShader})))});function ft({onChanged:i,portal:t,preventDefault:r=!0,scroll:s=!0,keyCode:c=9}){const p=d.useRef(0),h=(0,E.z)(_=>_.setEvents),g=(0,E.z)(_=>_.get),y=(0,E.z)(_=>_.gl);return d.useEffect(()=>{var _;let b=[],T;const R=g().events.filter,F=(_=t==null?void 0:t.current)!==null&&_!==void 0?_:y.domElement.parentNode,G=()=>F&&i&&i(b,Math.round(p.current)%b.length);h({filter:(z,H)=>{let Q=[...z];(Q.length!==b.length||!b.every(W=>Q.map(Y=>Y.object.uuid).includes(W.object.uuid)))&&(p.current=0,b=Q,G()),R&&(Q=R(Q,H));for(let W=0;W<Math.round(p.current)%Q.length;W++){const Y=Q.shift();Q=[...Q,Y]}return Q}});const L=z=>{var H,Q;p.current=z(p.current),(H=g().events.handlers)==null||H.onPointerCancel(void 0),(Q=g().events.handlers)==null||Q.onPointerMove(T),G()},O=z=>{(z.keyCode||z.which===c)&&(r&&z.preventDefault(),b.length>1&&L(H=>H+1))},P=z=>{r&&z.preventDefault();let H=0;z||(z=window.event),z.wheelDelta?H=z.wheelDelta/120:z.detail&&(H=-z.detail/3),b.length>1&&L(Q=>Math.abs(Q-H))},D=z=>T=z;return document.addEventListener("pointermove",D,{passive:!0}),s&&document.addEventListener("wheel",P),c!==void 0&&document.addEventListener("keydown",O),()=>{h({filter:R}),c!==void 0&&document.removeEventListener("keydown",O),s&&document.removeEventListener("wheel",P),document.removeEventListener("pointermove",D)}},[y,g,h,r,s,c]),null}function kt(i,t="pointer",r="auto"){d.useEffect(()=>{if(i)return document.body.style.cursor=t,()=>void(document.body.style.cursor=r)},[i])}var Rt=A(14671);let Jt=0;const Lt=(0,Rt.Z)(i=>(o.DefaultLoadingManager.onStart=(t,r,s)=>{i({active:!0,item:t,loaded:r,total:s,progress:(r-Jt)/(s-Jt)*100})},o.DefaultLoadingManager.onLoad=()=>{i({active:!1})},o.DefaultLoadingManager.onError=t=>i(r=>({errors:[...r.errors,t]})),o.DefaultLoadingManager.onProgress=(t,r,s)=>{r===s&&(Jt=s),i({active:!0,item:t,loaded:r,total:s,progress:(r-Jt)/(s-Jt)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),vn=i=>`Loading ${i.toFixed(2)}%`;function nr({containerStyles:i,innerStyles:t,barStyles:r,dataStyles:s,dataInterpolation:c=vn,initialState:p=h=>h}){const{active:h,progress:g}=Lt(),y=d.useRef(0),_=d.useRef(0),b=d.useRef(null),[T,R]=d.useState(p(h));d.useEffect(()=>{let G;return h!==T&&(G=setTimeout(()=>R(h),300)),()=>clearTimeout(G)},[T,h]);const F=d.useCallback(()=>{b.current&&(y.current+=(g-y.current)/2,(y.current>.95*g||g===100)&&(y.current=g),b.current.innerText=c(y.current),y.current<g&&(_.current=requestAnimationFrame(F)))},[c,g]);return d.useEffect(()=>(F(),()=>cancelAnimationFrame(_.current)),[F]),T?d.createElement("div",{style:jn(Xo(jn({},br.container),{opacity:h?1:0}),i)},d.createElement("div",null,d.createElement("div",{style:jn(jn({},br.inner),t)},d.createElement("div",{style:jn(Xo(jn({},br.bar),{transform:`scaleX(${g/100})`}),r)}),d.createElement("span",{ref:b,style:jn(jn({},br.data),s)})))):null}const br={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Rr(i){return function(t){i.forEach(function(r){typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Dn=Rr;function Di(i,t,r){return t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function Wi(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),r.push.apply(r,s)}return r}function ti(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wi(Object(r),!0).forEach(function(s){Di(i,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Wi(Object(r)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(r,s))})}return i}function vi(i,t){return vi=Object.setPrototypeOf||function(s,c){return s.__proto__=c,s},vi(i,t)}function cs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Wn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];var s=t[0],c=t[1],p=t[2],h=t[3];return s*h-c*p}function nn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];var s=t[0],c=t[1],p=t[2],h=t[3],g=t[4],y=t[5],_=t[6],b=t[7],T=t[8];return s*g*T+c*y*_+p*h*b-p*g*_-c*h*T-s*y*b}function Bn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]}function hr(i,t,r){for(var s=i.clone().transpose(),c=[],p=s.elements.length,h=Math.sqrt(p),g=0;g<p;g++){var y=s.elements[g],_=Math.floor(g/h),b=g%h;_!==t-1&&b!==r-1&&c.push(y)}return nn.apply(void 0,c)}function Ir(i,t){for(var r=[],s=i.toArray(),c=t.toArray(),p=0;p<s.length;p++)r[p]=s[p]+c[p];return new o.Matrix3().fromArray(r)}var Pi=Object.freeze({__proto__:null,determinant2:Wn,determinant3:nn,determinant4:Bn,getMinor:hr,matrixSum3:Ir});function Tn(i){if(Array.isArray(i))return i}function Sn(i,t){var r=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var s=[],c=!0,p=!1,h,g;try{for(r=r.call(i);!(c=(h=r.next()).done)&&(s.push(h.value),!(t&&s.length===t));c=!0);}catch(y){p=!0,g=y}finally{try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}return s}}function Ln(i,t){(t==null||t>i.length)&&(t=i.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=i[r];return s}function gr(i,t){if(i){if(typeof i=="string")return Ln(i,t);var r=Object.prototype.toString.call(i).slice(8,-1);if(r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set")return Array.from(i);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ln(i,t)}}function ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yr(i,t){return Tn(i)||Sn(i,t)||gr(i,t)||ni()}function Li(i){if(Array.isArray(i))return Ln(i)}function Ro(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Kr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ao(i){return Li(i)||Ro(i)||gr(i)||Kr()}function lo(i,t,r){return cs()?lo=Reflect.construct:lo=function(c,p,h){var g=[null];g.push.apply(g,p);var y=Function.bind.apply(c,g),_=new y;return h&&vi(_,h.prototype),_},lo.apply(null,arguments)}function sa(i,t){var r=yr(t[0],2),s=r[0],c=r[1],p=yr(t[1],2),h=p[0],g=p[1],y=yr(t[2],2),_=y[0],b=y[1],T=yr(i,2),R=T[0],F=T[1],G=new o.Matrix4;return G.set(s,c,s*s+c*c,1,h,g,h*h+g*g,1,_,b,_*_+b*b,1,R,F,R*R+F*F,1),G.determinant()<=0}function Ss(i){var t=yr(i[0],2),r=t[0],s=t[1],c=yr(i[1],2),p=c[0],h=c[1],g=yr(i[2],2),y=g[0],_=g[1];return nn(r,s,1,p,h,1,y,_,1)}function aa(i){return Ss(i)===0}function Vs(i){return Ss(i)<0}function va(i){var t=yr(i[0],2),r=t[0],s=t[1],c=yr(i[1],2),p=c[0],h=c[1],g=yr(i[2],2),y=g[0],_=g[1];if(aa(i))return null;var b=new o.Matrix4;b.set(1,1,1,1,r*r+s*s,r,s,1,p*p+h*h,p,h,1,y*y+_*_,y,_,1);var T=hr(b,1,1),R=hr(b,1,3),F=hr(b,1,2),G=hr(b,1,4),L=.5*(F/T),O=.5*(R/T),P=L*L+O*O+G/T;return{x:Math.abs(L)===0?0:L,y:Math.abs(O)===0?0:-O,r:Math.sqrt(P)}}function Ls(i,t){var r=Array.isArray(t[0])?t[0]:t[0].toArray(),s=yr(r,2),c=s[0],p=s[1],h=Array.isArray(t[1])?t[1]:t[1].toArray(),g=yr(h,2),y=g[0],_=g[1],b=Array.isArray(t[2])?t[2]:t[2].toArray(),T=yr(b,2),R=T[0],F=T[1],G=yr(i,2),L=G[0],O=G[1];if(aa(t))throw new Error("Collinear points don't form a triangle");var P=c-L,D=p-O,z=y-L,H=_-O,Q=R-L,W=F-O,Y=nn(P,D,P*P+D*D,z,H,z*z+H*H,Q,W,Q*Q+W*W);return Y===0?!0:Vs(t)?Y<0:Y>0}var ts=new o.Vector2,Ui=new o.Vector2;function Yi(i){var t=i.map(function(_){return Array.isArray(_)?lo(o.Vector2,ao(_)):_}),r=yr(t,3),s=r[0],c=r[1],p=r[2];if(aa(i))return!1;var h=ts.subVectors(c,s),g=Ui.subVectors(p,s),y=g.cross(h);return y>0}var Qs=Object.freeze({__proto__:null,isPointInTriangle:sa,triangleDeterminant:Ss,arePointsCollinear:aa,isTriangleClockwise:Vs,getCircumcircle:va,isPointInCircumcircle:Ls,doThreePointsMakeARight:Yi});function Ko(i,t,r){return Math.max(t,Math.min(r,i))}function Br(i,t){return Ko(i-Math.floor(i/t)*t,0,t)}function Ni(i,t){var r=Br(t-i,Math.PI*2);return r>Math.PI&&(r-=Math.PI*2),r}function ki(i){return i/180*Math.PI}function la(i){return i*180/Math.PI}function ka(i,t){for(var r=t.radius,s=r===void 0?1:r,c=i.length/3,p=2/c,h=Math.PI*(3-2.2360679775),g=0;g<i.length;g+=3){var y=g*p-1+p/2,_=Math.sqrt(1-Math.pow(y,2)),b=g%c*h,T=Math.cos(b)*_,R=Math.sin(b)*_;i[g]=T*s,i[g+1]=y*s,i[g+2]=R*s}}function ps(i,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(i.x-t.x)<r&&Math.abs(i.y-t.y)<r&&Math.abs(i.z-t.z)<r}function Io(i,t){return i.x===t.x?typeof i.z!="undefined"&&i.y===t.y?i.z-t.z:i.y-t.y:i.x-t.x}function co(i){for(var t=i.sort(Io),r=[t[0],t[1]],s=2;s<t.length;s++)for(r.push(t[s]);r.length>2&&Yi(ao(r.slice(-3)));)r.splice(r.length-2,1);for(var c=[t[t.length-1],t[t.length-2]],p=t.length-3;p>=0;p--)for(c.push(t[p]);c.length>2&&Yi(ao(c.slice(-3)));)c.splice(c.length-2,1);c.splice(0,1),c.splice(c.length-1,1);var h=[].concat(r,c);return h}function za(i,t,r){var s=yr(t,2),c=s[0],p=s[1],h=yr(r,2),g=h[0],y=h[1];return g+(i-c)*(y-g)/(p-c)}function us(i){return i*i*i*(i*(i*6-15)+10)}function ho(i,t,r){return i*(1-r)+t*r}function al(i,t,r){return(r-i)/(t-i)}function Fo(i,t,r){var s=Math.sqrt(i*i+t*t+r*r);return[i/s,t/s,r/s]}function ks(i,t,r){var s=i*i,c=t*t,p=r*r,h=i*Math.sqrt(1-(c+p)/2+c*p/3),g=t*Math.sqrt(1-(p+s)/2+p*s/3),y=r*Math.sqrt(1-(s+c)/2+s*c/3);return[h,g,y]}function ca(i,t){var r=new o.Vector3().crossVectors(i,t),s=i.dot(t),c=new o.Matrix3().identity(),p=new o.Matrix3().set(0,-r.z,r.y,r.z,0,-r.x,-r.y,r.x,0),h=new o.Matrix3().multiplyMatrices(p,p).multiplyScalar(1/(1+s)),g=Ir(Ir(c,p),h);return g}function Xs(i,t,r){var s=Math.asin(t),c=Math.atan2(i,-r);return[s,c]}function Oo(i,t){var r=Math.sin(i),s=Math.cos(i),c=Math.sin(t)*s,p=-Math.cos(t)*s;return[c,r,p]}function ds(i,t){var r=yr(t,2),s=r[0],c=r[1],p=ca(i.normal,new o.Vector3(0,1,0)),h=al(s.clone().applyMatrix3(p).y,c.clone().applyMatrix3(p).y,0);return new o.Vector3().lerpVectors(s,c,h)}function No(i,t){var r=t.normal.dot(i);return r}function _a(i,t){var r=yr(i,3),s=r[0],c=r[1],p=r[2],h=yr(t,2),g=h[0],y=h[1];return p*g*y+c*g+s}function ll(i,t){var r=yr(t,2),s=r[0],c=r[1],p=s*c,h=i/p,g=i-p*h,y=g/s,_=g%s;return[_,y,h]}function gc(i,t){return i[0]+t[0]*i[1]}function Ea(i,t){var r=i%t,s=Math.floor(i/t);return[r,s]}var fp=Object.freeze({__proto__:null,clamp:Ko,deltaAngle:Ni,degToRad:ki,radToDeg:la,fibonacciOnSphere:ka,vectorEquals:ps,lexicographic:Io,convexHull:co,remap:za,fade:us,lerp:ho,inverseLerp:al,normalize:Fo,pointOnCubeToPointOnSphere:ks,rotateVectorOnVector:ca,pointToCoordinate:Xs,coordinateToPoint:Oo,planeSegmentIntersection:ds,pointToPlaneDistance:No,getIndexFrom3D:_a,get3DFromIndex:ll,getIndexFrom2D:gc,get2DFromIndex:Ea});function $e(){return[0,0]}function wt(){return[1,1]}function cn(i,t){return[i[0]+t[0],i[1]+t[1]]}function Fn(i,t){return[i[0]+t,i[1]+t]}function On(i,t){return[i[0]-t[0],i[1]-t[1]]}function lr(i,t){return[i[0]-t,i[1]-t]}function He(i,t){return[i[0]*t,i[1]*t]}function ke(i,t){return i[0]*t[0]+i[1]*t[1]}function Fe(i){return i[0]*i[0]+i[1]*i[1]}function at(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function De(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1]))}var et=Object.freeze({__proto__:null,zero:$e,one:wt,add:cn,addValue:Fn,sub:On,subValue:lr,scale:He,dot:ke,lengthSqr:Fe,length:at,distance:De});function dt(){return[0,0,0]}function bt(){return[1,1,1]}function Tt(i,t){return[i[0]+t[0],i[1]+t[1],i[2]+t[2]]}function pn(i,t){return[i[0]+t,i[1]+t,i[2]+t]}function ln(i,t){return[i[0]-t[0],i[1]-t[1],i[2]-t[2]]}function Me(i,t){return[i[0]-t,i[1]-t,i[2]-t]}function je(i,t){return[i[0]*t,i[1]*t,i[2]*t]}function lt(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]}function qt(i,t){var r=i[1]*t[2]-i[2]*t[1],s=i[2]*t[0]-i[0]*t[2],c=i[0]*t[1]-i[1]*t[0];return[r,s,c]}function Cn(i){return i[0]*i[0]+i[1]*i[1]+i[2]*i[2]}function kn(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2])}function mr(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])+(i[2]-t[2])*(i[2]-t[2]))}var Hr=Object.freeze({__proto__:null,zero:dt,one:bt,add:Tt,addValue:pn,sub:ln,subValue:Me,scale:je,dot:lt,cross:qt,lengthSqr:Cn,length:kn,distance:mr});function pi(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"xyz",s={x:0,y:0,z:0},c=0;c<i.length;c+=t){s.x=i[c],s.y=i[c+1],s.z=i[c+2];var p=r.split(""),h=yr(p,3),g=h[0],y=h[1],_=h[2];i[c]=s[g],i[c+1]=s[y],t===3&&(i[c+2]=s[_])}return i}function gi(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return Math.random()},s=t+1,c=new Float32Array(i.length/t*s),p=0;p<i.length;p+=t){var h=p/t*s;c[h]=i[p],c[h+1]=i[p+1],t===2&&(c[h+2]=r(h)),t===3&&(c[h+2]=i[p+2],c[h+3]=r(h))}return c}function Qn(i,t,r,s){for(var c=0;c<i.length;c++)r[c]=ho(i[c],t[c],s)}function qr(i,t){for(var r=t.length,s=0;s<i.length;s+=r)i[s]+=t[0],i[s+1]+=t[1],i[s+2]+=t[2];return i}function Hi(i,t){for(var r={center:[0,0,0],q:new o.Quaternion().identity()},s=new o.Vector3,c=ti(ti({},r),t),p=c.q,h=c.center,g=0;g<i.length;g+=3)s.set(i[g]-h[0],i[g+1]-h[1],i[g+2]-h[2]),s.applyQuaternion(p),i[g]=s.x+h[0],i[g+1]=s.y+h[1],i[g+2]=s.z+h[1];return i}function Vi(i,t,r){for(var s=0,c=0;s<i.length;s+=t,c++)if(t===3){var p=r([i[s],i[s+1],i[s+2]],c);i.set(p,s)}else i.set(r([i[s],i[s+1]],c),s);return i}function zi(i,t,r,s){for(var c=0,p=0;c<i.length;c+=t,p++)t===2?s=r(s,[i[c],i[c+1]],p):s=r(s,[i[c],i[c+1],i[c+2]],p);return s}function pa(i,t,r){for(var s={center:[0,0,0]},c=ti(ti({},s),r),p=c.center,h=c.distance,g=0;g<i.length;g+=t)i[g]=(i[g]-p[0])*(1+h)+p[0],i[g+1]=(i[g+1]-p[1])*(1+h)+p[1],t===3&&(i[g+2]=(i[g+2]-p[1])*(1+h)+p[2]);return i}function mo(i,t){return zi(i,t,function(r,s){return t===3?r=Tt(r,s):r=cn(r,s),r},$e())}function hs(i,t,r){var s=Int16Array.from({length:i.length/t},function(g,y){return y});s.sort(function(g,y){var _=i.slice(g*t,g*t+t),b=i.slice(y*t,y*t+t);return r(_,b)});for(var c=i.slice(0),p=0;p<s.length;p++){var h=s[p];i.set(c.slice(h*t,h*t+t),p*3)}return i}var cl=Object.freeze({__proto__:null,swizzle:pi,addAxis:gi,lerp:Qn,translate:qr,rotate:Hi,map:Vi,reduce:zi,expand:pa,center:mo,sort:hs});function ws(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var ro=function i(t,r,s){var c=this;ws(this,i),Di(this,"dot2",function(p,h){return c.x*p+c.y*h}),Di(this,"dot3",function(p,h,g){return c.x*p+c.y*h+c.z*g}),this.x=t,this.y=r,this.z=s},ns=[new ro(1,1,0),new ro(-1,1,0),new ro(1,-1,0),new ro(-1,-1,0),new ro(1,0,1),new ro(-1,0,1),new ro(1,0,-1),new ro(-1,0,-1),new ro(0,1,1),new ro(0,-1,1),new ro(0,1,-1),new ro(0,-1,-1)],zs=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],mi=new Array(512),ii=new Array(512),Ul=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var r=0;r<256;r++){var s;r&1?s=zs[r]^t&255:s=zs[r]^t>>8&255,mi[r]=mi[r+256]=s,ii[r]=ii[r+256]=ns[s%12]}};Ul(0);var Ho=.5*(Math.sqrt(3)-1),Ga=(3-Math.sqrt(3))/6,Ih=1/3,ba=1/6,mc=function(t,r){var s,c,p,h=(t+r)*Ho,g=Math.floor(t+h),y=Math.floor(r+h),_=(g+y)*Ga,b=t-g+_,T=r-y+_,R,F;b>T?(R=1,F=0):(R=0,F=1);var G=b-R+Ga,L=T-F+Ga,O=b-1+2*Ga,P=T-1+2*Ga;g&=255,y&=255;var D=ii[g+mi[y]],z=ii[g+R+mi[y+F]],H=ii[g+1+mi[y+1]],Q=.5-b*b-T*T;Q<0?s=0:(Q*=Q,s=Q*Q*D.dot2(b,T));var W=.5-G*G-L*L;W<0?c=0:(W*=W,c=W*W*z.dot2(G,L));var Y=.5-O*O-P*P;return Y<0?p=0:(Y*=Y,p=Y*Y*H.dot2(O,P)),70*(s+c+p)},gp=function(t,r,s){var c,p,h,g,y=(t+r+s)*Ih,_=Math.floor(t+y),b=Math.floor(r+y),T=Math.floor(s+y),R=(_+b+T)*ba,F=t-_+R,G=r-b+R,L=s-T+R,O,P,D,z,H,Q;F>=G?G>=L?(O=1,P=0,D=0,z=1,H=1,Q=0):F>=L?(O=1,P=0,D=0,z=1,H=0,Q=1):(O=0,P=0,D=1,z=1,H=0,Q=1):G<L?(O=0,P=0,D=1,z=0,H=1,Q=1):F<L?(O=0,P=1,D=0,z=0,H=1,Q=1):(O=0,P=1,D=0,z=1,H=1,Q=0);var W=F-O+ba,Y=G-P+ba,K=L-D+ba,ie=F-z+2*ba,ce=G-H+2*ba,ge=L-Q+2*ba,ae=F-1+3*ba,xe=G-1+3*ba,ve=L-1+3*ba;_&=255,b&=255,T&=255;var Be=ii[_+mi[b+mi[T]]],Ue=ii[_+O+mi[b+P+mi[T+D]]],Ie=ii[_+z+mi[b+H+mi[T+Q]]],Ne=ii[_+1+mi[b+1+mi[T+1]]],Le=.6-F*F-G*G-L*L;Le<0?c=0:(Le*=Le,c=Le*Le*Be.dot3(F,G,L));var Ye=.6-W*W-Y*Y-K*K;Ye<0?p=0:(Ye*=Ye,p=Ye*Ye*Ue.dot3(W,Y,K));var Ce=.6-ie*ie-ce*ce-ge*ge;Ce<0?h=0:(Ce*=Ce,h=Ce*Ce*Ie.dot3(ie,ce,ge));var Ee=.6-ae*ae-xe*xe-ve*ve;return Ee<0?g=0:(Ee*=Ee,g=Ee*Ee*Ne.dot3(ae,xe,ve)),32*(c+p+h+g)},mp=function(t,r){var s=Math.floor(t),c=Math.floor(r);t=t-s,r=r-c,s=s&255,c=c&255;var p=ii[s+mi[c]].dot2(t,r),h=ii[s+mi[c+1]].dot2(t,r-1),g=ii[s+1+mi[c]].dot2(t-1,r),y=ii[s+1+mi[c+1]].dot2(t-1,r-1),_=us(t);return ho(ho(p,g,_),ho(h,y,_),us(r))},ku=function(t,r,s){var c=Math.floor(t),p=Math.floor(r),h=Math.floor(s);t=t-c,r=r-p,s=s-h,c=c&255,p=p&255,h=h&255;var g=ii[c+mi[p+mi[h]]].dot3(t,r,s),y=ii[c+mi[p+mi[h+1]]].dot3(t,r,s-1),_=ii[c+mi[p+1+mi[h]]].dot3(t,r-1,s),b=ii[c+mi[p+1+mi[h+1]]].dot3(t,r-1,s-1),T=ii[c+1+mi[p+mi[h]]].dot3(t-1,r,s),R=ii[c+1+mi[p+mi[h+1]]].dot3(t-1,r,s-1),F=ii[c+1+mi[p+1+mi[h]]].dot3(t-1,r-1,s),G=ii[c+1+mi[p+1+mi[h+1]]].dot3(t-1,r-1,s-1),L=us(t),O=us(r),P=us(s);return ho(ho(ho(g,T,L),ho(y,R,L),P),ho(ho(_,F,L),ho(b,G,L),P),O)},a1=Object.freeze({__proto__:null,seed:Ul,simplex2:mc,simplex3:gp,perlin2:mp,perlin3:ku}),Xf=Math.PI*2;function Kf(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var r=0;r<t.length;r++)i=(i+(r+1)*(t.charCodeAt(r)%96))%2147483647}return i===0&&(i=311),i}function zu(i){var t=Kf(i);return function(){var r=t*48271%2147483647;return t=r,r/2147483647}}var El=function i(t){var r=this;ws(this,i),Di(this,"seed",0),Di(this,"init",function(s){r.seed=s,r.value=zu(s)}),Di(this,"value",zu(this.seed)),this.init(t)},Ap=new El(Math.random()),Od={radius:1,center:[0,0,0]};function wi(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},Od),t),c=s.radius,p=s.center,h=0;h<i.length;h+=3){var g=r.value(),y=r.value(),_=Math.acos(2*y-1),b=Xf*g;i[h]=Math.sin(_)*Math.cos(b)*c+p[0],i[h+1]=Math.sin(_)*Math.sin(b)*c+p[1],i[h+2]=Math.cos(_)*c+p[2]}return i}function Yf(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},Od),t),c=s.radius,p=s.center,h=0;h<i.length;h+=3){var g=Math.pow(r.value(),.3333333333333333),y=r.value()*2-1,_=r.value()*2-1,b=r.value()*2-1,T=Math.sqrt(y*y+_*_+b*b);y=g*y/T,_=g*_/T,b=g*b/T,i[h]=y*c+p[0],i[h+1]=_*c+p[1],i[h+2]=b*c+p[2]}return i}var ic={radius:1,center:[0,0]};function ui(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},ic),t),c=s.radius,p=s.center,h=0;h<i.length;h+=2){var g=c*Math.sqrt(r.value()),y=r.value()*Xf;i[h]=Math.sin(y)*g+p[0],i[h+1]=Math.cos(y)*g+p[1]}return i}function oc(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},ic),t),c=s.radius,p=s.center,h=0;h<i.length;h+=2){var g=r.value()*Xf;i[h]=Math.sin(g)*c+p[0],i[h+1]=Math.cos(g)*c+p[1]}return i}var Jf={sides:1,center:[0,0]};function Ks(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},Jf),t),c=s.sides,p=s.center,h=typeof c=="number"?c:c[0],g=typeof c=="number"?c:c[1],y=0;y<i.length;y+=2)i[y]=(r.value()-.5)*h+p[0],i[y+1]=(r.value()-.5)*g+p[1];return i}function Gu(i,t){return i}function l1(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},Fh),t),c=s.sides,p=s.center,h=typeof c=="number"?c:c[0],g=typeof c=="number"?c:c[1],y=typeof c=="number"?c:c[2],_=0;_<i.length;_+=3)i[_]=(r.value()-.5)*h+p[0],i[_+1]=(r.value()-.5)*g+p[1],i[_+2]=(r.value()-.5)*y+p[2];return i}var Fh={sides:1,center:[0,0,0]};function c1(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ap,s=ti(ti({},Fh),t),c=s.sides,p=s.center,h=typeof c=="number"?c:c[0],g=typeof c=="number"?c:c[1],y=typeof c=="number"?c:c[2],_=0;_<i.length;_+=3)i[_]=(r.value()-.5)*h+p[0],i[_+1]=(r.value()-.5)*g+p[1],i[_+2]=(r.value()-.5)*y+p[2];return i}var qf=Object.freeze({__proto__:null,Generator:El,onSphere:wi,inSphere:Yf,inCircle:ui,onCircle:oc,inRect:Ks,onRect:Gu,inBox:l1,onBox:c1,noise:a1}),Ac=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return s/Math.atan(1/r)*Math.atan(Math.sin(2*Math.PI*t*c)/r)},Am=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)};function Gs(i,t,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Am,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,y="velocity_"+t;if(i.__damp===void 0&&(i.__damp={}),i.__damp[y]===void 0&&(i.__damp[y]=0),Math.abs(i[t]-r)<=g)return i[t]=r,!1;s=Math.max(1e-4,s);var _=2/s,b=h(_*c),T=i[t]-r,R=r,F=p*s;T=Math.min(Math.max(T,-F),F),r=i[t]-T;var G=(i.__damp[y]+_*T)*c;i.__damp[y]=(i.__damp[y]-_*G)*b;var L=r+(T+G)*b;return R-i[t]>0==L>R&&(L=R,i.__damp[y]=(L-R)/c),i[t]=L,!0}function Ua(i,t,r,s,c,p,h,g){return Gs(i,t,i[t]+Ni(i[t],r),s,c,p,h,g)}var bl=new o.Vector2,Dd,Oh;function ym(i,t,r,s,c,p,h){return typeof t=="number"?bl.setScalar(t):Array.isArray(t)?bl.set(t[0],t[1]):bl.copy(t),Dd=Gs(i,"x",bl.x,r,s,c,p,h),Oh=Gs(i,"y",bl.y,r,s,c,p,h),Dd||Oh}var Uu=new o.Vector3,Nl,Zf,Nu;function Dh(i,t,r,s,c,p,h){return typeof t=="number"?Uu.setScalar(t):Array.isArray(t)?Uu.set(t[0],t[1],t[2]):Uu.copy(t),Nl=Gs(i,"x",Uu.x,r,s,c,p,h),Zf=Gs(i,"y",Uu.y,r,s,c,p,h),Nu=Gs(i,"z",Uu.z,r,s,c,p,h),Nl||Zf||Nu}var Ys=new o.Vector4,Hu,ju,yp,Pd;function Zp(i,t,r,s,c,p,h){return typeof t=="number"?Ys.setScalar(t):Array.isArray(t)?Ys.set(t[0],t[1],t[2],t[3]):Ys.copy(t),Hu=Gs(i,"x",Ys.x,r,s,c,p,h),ju=Gs(i,"y",Ys.y,r,s,c,p,h),yp=Gs(i,"z",Ys.z,r,s,c,p,h),Pd=Gs(i,"w",Ys.w,r,s,c,p,h),Hu||ju||yp||Pd}var Wu=new o.Euler,Ph,Lh,$p;function Hl(i,t,r,s,c,p,h){return Array.isArray(t)?Wu.set(t[0],t[1],t[2],t[3]):Wu.copy(t),Ph=Ua(i,"x",Wu.x,r,s,c,p,h),Lh=Ua(i,"y",Wu.y,r,s,c,p,h),$p=Ua(i,"z",Wu.z,r,s,c,p,h),Ph||Lh||$p}var Na=new o.Color,Qc,kh,$f;function sc(i,t,r,s,c,p,h){return t instanceof o.Color?Na.copy(t):Array.isArray(t)?Na.setRGB(t[0],t[1],t[2]):Na.set(t),Qc=Gs(i,"r",Na.r,r,s,c,p,h),kh=Gs(i,"g",Na.g,r,s,c,p,h),$f=Gs(i,"b",Na.b,r,s,c,p,h),Qc||kh||$f}var fs=new o.Quaternion,gs=new o.Vector4,eu=new o.Vector4,Ma=new o.Vector4,Js,zh,yc,vc;function Ha(i,t,r,s,c,p,h){var g=i;Array.isArray(t)?fs.set(t[0],t[1],t[2],t[3]):fs.copy(t);var y=i.dot(fs)>0?1:-1;return fs.x*=y,fs.y*=y,fs.z*=y,fs.w*=y,Js=Gs(i,"x",fs.x,r,s,c,p,h),zh=Gs(i,"y",fs.y,r,s,c,p,h),yc=Gs(i,"z",fs.z,r,s,c,p,h),vc=Gs(i,"w",fs.w,r,s,c,p,h),gs.set(i.x,i.y,i.z,i.w).normalize(),eu.set(g.__damp.velocity_x,g.__damp.velocity_y,g.__damp.velocity_z,g.__damp.velocity_w),Ma.copy(gs).multiplyScalar(eu.dot(gs)/gs.dot(gs)),g.__damp.velocity_x-=Ma.x,g.__damp.velocity_y-=Ma.y,g.__damp.velocity_z-=Ma.z,g.__damp.velocity_w-=Ma.w,i.set(gs.x,gs.y,gs.z,gs.w),Js||zh||yc||vc}var _o=new o.Spherical,Ld,Gh,tu;function _c(i,t,r,s,c,p,h){return Array.isArray(t)?_o.set(t[0],t[1],t[2]):_o.copy(t),Ld=Gs(i,"radius",_o.radius,r,s,c,p,h),Gh=Ua(i,"phi",_o.phi,r,s,c,p,h),tu=Ua(i,"theta",_o.theta,r,s,c,p,h),Ld||Gh||tu}var nu=new o.Matrix4,kd=new o.Vector3,Ml=new o.Quaternion,xl=new o.Vector3,vp,Ec,bc;function ru(i,t,r,s,c,p,h){var g=i;return g.__damp===void 0&&(g.__damp={position:new o.Vector3,rotation:new o.Quaternion,scale:new o.Vector3},i.decompose(g.__damp.position,g.__damp.rotation,g.__damp.scale)),Array.isArray(t)?nu.set.apply(nu,ao(t)):nu.copy(t),nu.decompose(kd,Ml,xl),vp=Dh(g.__damp.position,kd,r,s,c,p,h),Ec=Ha(g.__damp.rotation,Ml,r,s,c,p,h),bc=Dh(g.__damp.scale,xl,r,s,c,p,h),i.compose(g.__damp.position,g.__damp.rotation,g.__damp.scale),vp||Ec||bc}var zd=Object.freeze({__proto__:null,rsqw:Ac,exp:Am,damp:Gs,dampAngle:Ua,damp2:ym,damp3:Dh,damp4:Zp,dampE:Hl,dampC:sc,dampQ:Ha,dampS:_c,dampM:ru});function eg(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&vi(i,t)}function _p(i){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(i)}function pl(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function xa(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pl(i)}function jo(i){var t=cs();return function(){var s=_p(i),c;if(t){var p=_p(this).constructor;c=Reflect.construct(s,arguments,p)}else c=s.apply(this,arguments);return xa(this,c)}}var ua=function(i){eg(r,i);var t=jo(r);function r(){var s,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.2,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:16;ws(this,r),s=t.call(this);for(var y=c/2-h,_=p/2-h,b=h/c,T=(c-h)/c,R=h/p,F=(p-h)/p,G=[y,_,0,-y,_,0,-y,-_,0,y,-_,0],L=[T,F,b,F,b,R,T,R],O=[3*(g+1)+3,3*(g+1)+4,g+4,g+5,2*(g+1)+4,2,1,2*(g+1)+3,3,4*(g+1)+3,4,0],P=[O[0],O[1],O[2],O[0],O[2],O[3],O[4],O[5],O[6],O[4],O[6],O[7],O[8],O[9],O[10],O[8],O[10],O[11]],D,z,H,Q,W,Y,K,ie,ce=0;ce<4;ce++){Q=ce<1||ce>2?y:-y,W=ce<2?_:-_,Y=ce<1||ce>2?T:b,K=ce<2?F:R;for(var ge=0;ge<=g;ge++)D=Math.PI/2*(ce+ge/g),z=Math.cos(D),H=Math.sin(D),G.push(Q+h*z,W+h*H,0),L.push(Y+b*z,K+R*H),ge<g&&(ie=(g+1)*ce+ge+4,P.push(ce,ie,ie+1))}return s.setIndex(new o.BufferAttribute(new Uint32Array(P),1)),s.setAttribute("position",new o.BufferAttribute(new Float32Array(G),3)),s.setAttribute("uv",new o.BufferAttribute(new Float32Array(L),2)),s}return r}(o.BufferGeometry);function Yr(i){for(var t=[],r=[],s=0;s<i.attributes.position.array.length/3;s++){var c=i.attributes.position.array[s*3+0],p=i.attributes.position.array[s*3+1],h=i.attributes.position.array[s*3+2];r.push(new o.Vector3(c,p,h))}for(var g=r.map(tg),y=0;y<g.length/3;y++)for(var _=new o.Triangle(r[y*3+0],r[y*3+1],r[y*3+2]),b=_.getNormal(new o.Vector3),T=0;T<3;T++){var R=g[y*3+T];if(R.theta===0&&(R.phi===0||R.phi===Math.PI)){var F=R.phi===0?y*3+1:y*3+0;R={r:R.r,phi:R.phi,theta:g[F].theta}}R.theta===Math.PI&&tg(b).theta<Math.PI/2&&(R.theta=-Math.PI);var G=fn(R);t.push(1-G.x,1-G.y)}return i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new o.Float32BufferAttribute(t,2)),i.attributes.uv.needsUpdate=!0,i}function tg(i){var t=Math.sqrt(i.x*i.x+i.z*i.z+i.y*i.y);return{r:t,phi:Math.acos(i.y/t),theta:Math.atan2(i.z,i.x)}}function fn(i){return{y:i.phi/Math.PI,x:(i.theta+Math.PI)/(2*Math.PI)}}function Ai(i){i.computeBoundingBox();var t=i.boundingBox.getSize(new o.Vector3),r=Math.min(t.x,t.y,t.z),s=new o.BoxGeometry(r,r,r),c=new o.Mesh(s);c.rotation.set(0,0,0),c.updateWorldMatrix(!0,!1);var p=c.matrix.clone().invert(),h=new o.Box3(new o.Vector3(-r/2,-r/2,-r/2),new o.Vector3(r/2,r/2,r/2));return Gd(i,p,h,r),i.attributes.uv.needsUpdate=!0,i}function Gd(i,t,r,s){var c=[];c.length=2*i.attributes.position.array.length/3;var p=function(me,Te,ye){me.applyMatrix4(t),Te.applyMatrix4(t),ye.applyMatrix4(t);var ze=new o.Vector3;ze.crossVectors(Te.clone().sub(me),Te.clone().sub(ye)).normalize(),ze.x=Math.abs(ze.x),ze.y=Math.abs(ze.y),ze.z=Math.abs(ze.z);var Mt=new o.Vector2,At=new o.Vector2,gt=new o.Vector2;return ze.y>ze.x&&ze.y>ze.z?(Mt.x=(me.x-r.min.x)/s,Mt.y=(r.max.z-me.z)/s,At.x=(Te.x-r.min.x)/s,At.y=(r.max.z-Te.z)/s,gt.x=(ye.x-r.min.x)/s,gt.y=(r.max.z-ye.z)/s):ze.x>ze.y&&ze.x>ze.z?(Mt.x=(me.z-r.min.z)/s,Mt.y=(me.y-r.min.y)/s,At.x=(Te.z-r.min.z)/s,At.y=(Te.y-r.min.y)/s,gt.x=(ye.z-r.min.z)/s,gt.y=(ye.y-r.min.y)/s):ze.z>ze.y&&ze.z>ze.x&&(Mt.x=(me.x-r.min.x)/s,Mt.y=(me.y-r.min.y)/s,At.x=(Te.x-r.min.x)/s,At.y=(Te.y-r.min.y)/s,gt.x=(ye.x-r.min.x)/s,gt.y=(ye.y-r.min.y)/s),{uv0:Mt,uv1:At,uv2:gt}};if(i.index)for(var h=0;h<i.index.array.length;h+=3){var g=i.index.array[h],y=i.index.array[h+1],_=i.index.array[h+2],b=i.attributes.position.array[3*g],T=i.attributes.position.array[3*g+1],R=i.attributes.position.array[3*g+2],F=i.attributes.position.array[3*y],G=i.attributes.position.array[3*y+1],L=i.attributes.position.array[3*y+2],O=i.attributes.position.array[3*_],P=i.attributes.position.array[3*_+1],D=i.attributes.position.array[3*_+2],z=new o.Vector3(b,T,R),H=new o.Vector3(F,G,L),Q=new o.Vector3(O,P,D),W=p(z,H,Q);c[2*g]=W.uv0.x,c[2*g+1]=W.uv0.y,c[2*y]=W.uv1.x,c[2*y+1]=W.uv1.y,c[2*_]=W.uv2.x,c[2*_+1]=W.uv2.y}else for(var Y=0;Y<i.attributes.position.array.length;Y+=9){var K=i.attributes.position.array[Y],ie=i.attributes.position.array[Y+1],ce=i.attributes.position.array[Y+2],ge=i.attributes.position.array[Y+3],ae=i.attributes.position.array[Y+4],xe=i.attributes.position.array[Y+5],ve=i.attributes.position.array[Y+6],Be=i.attributes.position.array[Y+7],Ue=i.attributes.position.array[Y+8],Ie=new o.Vector3(K,ie,ce),Ne=new o.Vector3(ge,ae,xe),Le=new o.Vector3(ve,Be,Ue),Ye=p(Ie,Ne,Le),Ce=Y/3,Ee=Ce+1,_e=Ce+2;c[2*Ce]=Ye.uv0.x,c[2*Ce+1]=Ye.uv0.y,c[2*Ee]=Ye.uv1.x,c[2*Ee+1]=Ye.uv1.y,c[2*_e]=Ye.uv2.x,c[2*_e+1]=Ye.uv2.y}i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new o.Float32BufferAttribute(c,2))}var vm=Object.freeze({__proto__:null,RoundedPlaneGeometry:ua,applySphereUV:Yr,applyBoxUV:Ai});function Ud(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=[],s=0,c=0;s<i.length;s+=t,c++)t===3?r[c]=new o.Vector3(i[s],i[s+1],i[s+2]):r[c]=new o.Vector2(i[s],i[s+1]);return r}function ac(i){for(var t=i.length,r=i[0].hasOwnProperty("z")?3:2,s=new Float32Array(t*r),c=0;c<t;c++){var p=c*r;s[p]=i[c].x,s[p+1]=i[c].y,r===3&&(s[p+2]=i[c].z)}return s}var Vu=Object.freeze({__proto__:null,bufferToVectors:Ud,vectorsToBuffer:ac});const Ep=d.createContext(null);function Mc(){return d.useContext(Ep)}function iu({eps:i=1e-5,enabled:t=!0,infinite:r,horizontal:s,pages:c=1,distance:p=1,damping:h=.25,maxSpeed:g=1/0,style:y={},children:_}){const{get:b,setEvents:T,gl:R,size:F,invalidate:G,events:L}=(0,E.z)(),[O]=d.useState(()=>document.createElement("div")),[P]=d.useState(()=>document.createElement("div")),[D]=d.useState(()=>document.createElement("div")),z=R.domElement.parentNode,H=d.useRef(0),Q=d.useMemo(()=>({el:O,eps:i,fill:P,fixed:D,horizontal:s,damping:h,offset:0,delta:0,scroll:H,pages:c,range(K,ie,ce=0){const ge=K-ce,ae=ge+ie+ce*2;return this.offset<ge?0:this.offset>ae?1:(this.offset-ge)/(ae-ge)},curve(K,ie,ce=0){return Math.sin(this.range(K,ie,ce)*Math.PI)},visible(K,ie,ce=0){const ge=K-ce,ae=ge+ie+ce*2;return this.offset>=ge&&this.offset<=ae}}),[i,h,s,c]);d.useEffect(()=>{O.style.position="absolute",O.style.width="100%",O.style.height="100%",O.style[s?"overflowX":"overflowY"]="auto",O.style[s?"overflowY":"overflowX"]="hidden",O.style.top="0px",O.style.left="0px";for(const ie in y)O.style[ie]=y[ie];D.style.position="sticky",D.style.top="0px",D.style.left="0px",D.style.width="100%",D.style.height="100%",D.style.overflow="hidden",O.appendChild(D),P.style.height=s?"100%":`${c*p*100}%`,P.style.width=s?`${c*p*100}%`:"100%",P.style.pointerEvents="none",O.appendChild(P),z.appendChild(O),O[s?"scrollLeft":"scrollTop"]=1;const Y=L.connected||R.domElement;requestAnimationFrame(()=>L.connect==null?void 0:L.connect(O));const K=b().events.compute;return T({compute(ie,ce){const{left:ge,top:ae}=z.getBoundingClientRect(),xe=ie.clientX-ge,ve=ie.clientY-ae;ce.pointer.set(xe/ce.size.width*2-1,-(ve/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),()=>{z.removeChild(O),T({compute:K}),L.connect==null||L.connect(Y)}},[c,p,s,O,P,D,z]),d.useEffect(()=>{if(L.connected===O){const Y=F[s?"width":"height"],K=O[s?"scrollWidth":"scrollHeight"],ie=K-Y;let ce=0,ge=!0,ae=!0;const xe=()=>{if(!(!t||ae)&&(G(),ce=O[s?"scrollLeft":"scrollTop"],H.current=ce/ie,r)){if(!ge){if(ce>=ie){const Be=1-Q.offset;O[s?"scrollLeft":"scrollTop"]=1,H.current=Q.offset=-Be,ge=!0}else if(ce<=0){const Be=1+Q.offset;O[s?"scrollLeft":"scrollTop"]=K,H.current=Q.offset=Be,ge=!0}}ge&&setTimeout(()=>ge=!1,40)}};O.addEventListener("scroll",xe,{passive:!0}),requestAnimationFrame(()=>ae=!1);const ve=Be=>O.scrollLeft+=Be.deltaY/2;return s&&O.addEventListener("wheel",ve,{passive:!0}),()=>{O.removeEventListener("scroll",xe),s&&O.removeEventListener("wheel",ve)}}},[O,L,F,r,Q,G,s,t]);let W=0;return(0,E.A)((Y,K)=>{W=Q.offset,zd.damp(Q,"offset",H.current,h,K,g,void 0,i),zd.damp(Q,"delta",Math.abs(W-Q.offset),h,K,g,void 0,i),Q.delta>i&&G()}),d.createElement(Ep.Provider,{value:Q},_)}const Uh=d.forwardRef(({children:i},t)=>{const r=d.useRef(null),s=Mc(),{width:c,height:p}=(0,E.z)(h=>h.viewport);return(0,E.A)(()=>{r.current.position.x=s.horizontal?-c*(s.pages-1)*s.offset:0,r.current.position.y=s.horizontal?0:p*(s.pages-1)*s.offset}),d.createElement("group",{ref:Dn([t,r])},i)}),Qu=d.forwardRef((c,s)=>{var p=c,{children:i,style:t}=p,r=An(p,["children","style"]);const h=Mc(),g=d.useRef(null),{width:y,height:_}=(0,E.z)(R=>R.size),b=d.useContext(E.f),T=d.useMemo(()=>m.createRoot(h.fixed),[h.fixed]);return(0,E.A)(()=>{h.delta>h.eps&&(g.current.style.transform=`translate3d(${h.horizontal?-y*(h.pages-1)*h.offset:0}px,${h.horizontal?0:_*(h.pages-1)*-h.offset}px,0)`)}),T.render(d.createElement("div",(0,w.Z)({ref:Dn([s,g]),style:Xo(jn({},t),{position:"absolute",top:0,left:0,willChange:"transform"})},r),d.createElement(Ep.Provider,{value:h},d.createElement(E.f.Provider,{value:b},i)))),null}),_m=d.forwardRef((s,r)=>{var c=s,{html:i}=c,t=An(c,["html"]);const p=i?Qu:Uh;return d.createElement(p,(0,w.Z)({ref:r},t))});var Xu=A(25108);let ja=bo();const ei=i=>qs(i,ja);let Xc=bo();ei.write=i=>qs(i,Xc);let Do=bo();ei.onStart=i=>qs(i,Do);let lc=bo();ei.onFrame=i=>qs(i,lc);let cc=bo();ei.onFinish=i=>qs(i,cc);let bp=[];ei.setTimeout=(i,t)=>{let r=ei.now()+t,s=()=>{let p=bp.findIndex(h=>h.cancel==s);~p&&bp.splice(p,1),io-=~p?1:0},c={time:r,handler:i,cancel:s};return bp.splice(xc(r),0,c),io+=1,Ca(),c};let xc=i=>~(~bp.findIndex(t=>t.time>i)||~bp.length);ei.cancel=i=>{Do.delete(i),lc.delete(i),cc.delete(i),ja.delete(i),Xc.delete(i)},ei.sync=i=>{Ji=!0,ei.batchedUpdates(i),Ji=!1},ei.throttle=i=>{let t;function r(){try{i(...t)}finally{t=null}}function s(...c){t=c,ei.onStart(r)}return s.handler=i,s.cancel=()=>{Do.delete(r),t=null},s};let Eo=typeof window!="undefined"?window.requestAnimationFrame:()=>{};ei.use=i=>Eo=i,ei.now=typeof performance!="undefined"?()=>performance.now():Date.now,ei.batchedUpdates=i=>i(),ei.catch=Xu.error,ei.frameLoop="always",ei.advance=()=>{ei.frameLoop!=="demand"?Xu.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):da()};let Cl=-1,io=0,Ji=!1;function qs(i,t){Ji?(t.delete(i),i(0)):(t.add(i),Ca())}function Ca(){Cl<0&&(Cl=0,ei.frameLoop!=="demand"&&Eo(Po))}function Ku(){Cl=-1}function Po(){~Cl&&(Eo(Po),ei.batchedUpdates(da))}function da(){let i=Cl;Cl=ei.now();let t=xc(Cl);if(t&&(Zs(bp.splice(0,t),r=>r.handler()),io-=t),!io){Ku();return}Do.flush(),ja.flush(i?Math.min(64,Cl-i):16.667),lc.flush(),Xc.flush(),cc.flush()}function bo(){let i=new Set,t=i;return{add(r){io+=t==i&&!i.has(r)?1:0,i.add(r)},delete(r){return io-=t==i&&i.has(r)?1:0,i.delete(r)},flush(r){t.size&&(i=new Set,io-=t.size,Zs(t,s=>s(r)&&i.add(s)),io+=i.size,t=i)}}}function Zs(i,t){i.forEach(r=>{try{t(r)}catch(s){ei.catch(s)}})}const Xe={count(){return io},isRunning(){return Cl>=0},clear(){Cl=-1,bp=[],Do=bo(),ja=bo(),lc=bo(),Xc=bo(),cc=bo(),io=0}};var Mp=A(25108);function Nh(){}const Lo=(i,t,r)=>Object.defineProperty(i,t,{value:r,writable:!0,configurable:!0}),In={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function Us(i,t){if(In.arr(i)){if(!In.arr(t)||i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}return i===t}const Oi=(i,t)=>i.forEach(t);function rs(i,t,r){if(In.arr(i)){for(let s=0;s<i.length;s++)t.call(r,i[s],`${s}`);return}for(const s in i)i.hasOwnProperty(s)&&t.call(r,i[s],s)}const So=i=>In.und(i)?[]:In.arr(i)?i:[i];function Sa(i,t){if(i.size){const r=Array.from(i);i.clear(),Oi(r,t)}}const Wa=(i,...t)=>Sa(i,r=>r(...t)),Sl=()=>typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let Cc,ou,jl=null,Yu=!1,Sc=Nh;const Nd=i=>{i.to&&(ou=i.to),i.now&&(ei.now=i.now),i.colors!==void 0&&(jl=i.colors),i.skipAnimation!=null&&(Yu=i.skipAnimation),i.createStringInterpolator&&(Cc=i.createStringInterpolator),i.requestAnimationFrame&&ei.use(i.requestAnimationFrame),i.batchedUpdates&&(ei.batchedUpdates=i.batchedUpdates),i.willAdvance&&(Sc=i.willAdvance),i.frameLoop&&(ei.frameLoop=i.frameLoop)};var Wl=Object.freeze({__proto__:null,get createStringInterpolator(){return Cc},get to(){return ou},get colors(){return jl},get skipAnimation(){return Yu},get willAdvance(){return Sc},assign:Nd});const wl=new Set;let Va=[],wa=[],Qa=0;const Kc={get idle(){return!wl.size&&!Va.length},start(i){Qa>i.priority?(wl.add(i),ei.onStart(xp)):(wc(i),ei(su))},advance:su,sort(i){if(Qa)ei.onFrame(()=>Kc.sort(i));else{const t=Va.indexOf(i);~t&&(Va.splice(t,1),Hd(i))}},clear(){Va=[],wl.clear()}};function xp(){wl.forEach(wc),wl.clear(),ei(su)}function wc(i){Va.includes(i)||Hd(i)}function Hd(i){Va.splice(Hh(Va,t=>t.priority>i.priority),0,i)}function su(i){const t=wa;for(let r=0;r<Va.length;r++){const s=Va[r];Qa=s.priority,s.idle||(Sc(s),s.advance(i),s.idle||t.push(s))}return Qa=0,wa=Va,wa.length=0,Va=t,Va.length>0}function Hh(i,t){const r=i.findIndex(t);return r<0?i.length:r}const Cp=(i,t,r)=>Math.min(Math.max(r,i),t),si={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ha="[-+]?\\d*\\.?\\d+",ul=ha+"%";function jd(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}const p1=new RegExp("rgb"+jd(ha,ha,ha)),Sp=new RegExp("rgba"+jd(ha,ha,ha,ha)),Wd=new RegExp("hsl"+jd(ha,ul,ul)),dl=new RegExp("hsla"+jd(ha,ul,ul,ha)),ng=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,rg=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wp=/^#([0-9a-fA-F]{6})$/,jh=/^#([0-9a-fA-F]{8})$/;function u1(i){let t;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(t=wp.exec(i))?parseInt(t[1]+"ff",16)>>>0:jl&&jl[i]!==void 0?jl[i]:(t=p1.exec(i))?(Ta(t[1])<<24|Ta(t[2])<<16|Ta(t[3])<<8|255)>>>0:(t=Sp.exec(i))?(Ta(t[1])<<24|Ta(t[2])<<16|Ta(t[3])<<8|au(t[4]))>>>0:(t=ng.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=jh.exec(i))?parseInt(t[1],16)>>>0:(t=rg.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Wd.exec(i))?(Yc(Vd(t[1]),Qd(t[2]),Qd(t[3]))|255)>>>0:(t=dl.exec(i))?(Yc(Vd(t[1]),Qd(t[2]),Qd(t[3]))|au(t[4]))>>>0:null}function Wh(i,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?i+(t-i)*6*r:r<1/2?t:r<2/3?i+(t-i)*(2/3-r)*6:i}function Yc(i,t,r){const s=r<.5?r*(1+t):r+t-r*t,c=2*r-s,p=Wh(c,s,i+1/3),h=Wh(c,s,i),g=Wh(c,s,i-1/3);return Math.round(p*255)<<24|Math.round(h*255)<<16|Math.round(g*255)<<8}function Ta(i){const t=parseInt(i,10);return t<0?0:t>255?255:t}function Vd(i){return(parseFloat(i)%360+360)%360/360}function au(i){const t=parseFloat(i);return t<0?0:t>1?255:Math.round(t*255)}function Qd(i){const t=parseFloat(i);return t<0?0:t>100?1:t/100}function ig(i){let t=u1(i);if(t===null)return i;t=t||0;let r=(t&4278190080)>>>24,s=(t&16711680)>>>16,c=(t&65280)>>>8,p=(t&255)/255;return`rgba(${r}, ${s}, ${c}, ${p})`}const lu=(i,t,r)=>{if(In.fun(i))return i;if(In.arr(i))return lu({range:i,output:t,extrapolate:r});if(In.str(i.output[0]))return Cc(i);const s=i,c=s.output,p=s.range||[0,1],h=s.extrapolateLeft||s.extrapolate||"extend",g=s.extrapolateRight||s.extrapolate||"extend",y=s.easing||(_=>_);return _=>{const b=pc(_,p);return og(_,p[b],p[b+1],c[b],c[b+1],y,h,g,s.map)}};function og(i,t,r,s,c,p,h,g,y){let _=y?y(i):i;if(_<t){if(h==="identity")return _;h==="clamp"&&(_=t)}if(_>r){if(g==="identity")return _;g==="clamp"&&(_=r)}return s===c?s:t===r?i<=t?s:c:(t===-1/0?_=-_:r===1/0?_=_-t:_=(_-t)/(r-t),_=p(_),s===-1/0?_=-_:c===1/0?_=_+s:_=_*(c-s)+s,_)}function pc(i,t){for(var r=1;r<t.length-1&&!(t[r]>=i);++r);return r-1}const Em=(i,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const s=r*i,c=t==="end"?Math.floor(s):Math.ceil(s);return Cp(0,1,c/i)},Jc=1.70158,Ti=Jc*1.525,Xa=Jc+1,Tl=2*Math.PI/3,Xd=2*Math.PI/4.5,Ba=i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,ms={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>1-(1-i)*(1-i),easeInOutQuad:i=>i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,easeInCubic:i=>i*i*i,easeOutCubic:i=>1-Math.pow(1-i,3),easeInOutCubic:i=>i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,easeInQuart:i=>i*i*i*i,easeOutQuart:i=>1-Math.pow(1-i,4),easeInOutQuart:i=>i<.5?8*i*i*i*i:1-Math.pow(-2*i+2,4)/2,easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>1-Math.pow(1-i,5),easeInOutQuint:i=>i<.5?16*i*i*i*i*i:1-Math.pow(-2*i+2,5)/2,easeInSine:i=>1-Math.cos(i*Math.PI/2),easeOutSine:i=>Math.sin(i*Math.PI/2),easeInOutSine:i=>-(Math.cos(Math.PI*i)-1)/2,easeInExpo:i=>i===0?0:Math.pow(2,10*i-10),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,easeInCirc:i=>1-Math.sqrt(1-Math.pow(i,2)),easeOutCirc:i=>Math.sqrt(1-Math.pow(i-1,2)),easeInOutCirc:i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,easeInBack:i=>Xa*i*i*i-Jc*i*i,easeOutBack:i=>1+Xa*Math.pow(i-1,3)+Jc*Math.pow(i-1,2),easeInOutBack:i=>i<.5?Math.pow(2*i,2)*((Ti+1)*2*i-Ti)/2:(Math.pow(2*i-2,2)*((Ti+1)*(i*2-2)+Ti)+2)/2,easeInElastic:i=>i===0?0:i===1?1:-Math.pow(2,10*i-10)*Math.sin((i*10-10.75)*Tl),easeOutElastic:i=>i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i*10-.75)*Tl)+1,easeInOutElastic:i=>i===0?0:i===1?1:i<.5?-(Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*Xd))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*Xd)/2+1,easeInBounce:i=>1-Ba(1-i),easeOutBounce:Ba,easeInOutBounce:i=>i<.5?(1-Ba(1-2*i))/2:(1+Ba(2*i-1))/2,steps:Em};function Tp(){return Tp=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},Tp.apply(this,arguments)}const cu=Symbol.for("FluidValue.get"),As=Symbol.for("FluidValue.observers"),wo=i=>!!(i&&i[cu]),Ka=i=>i&&i[cu]?i[cu]():i,Ju=i=>i[As]||null;function Ya(i,t){i.eventObserved?i.eventObserved(t):i(t)}function Kd(i,t){let r=i[As];r&&r.forEach(s=>{Ya(s,t)})}class fa{constructor(t){if(this[cu]=void 0,this[As]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");Vh(this,t)}}const Vh=(i,t)=>Yd(i,cu,t);function Ra(i,t){if(i[cu]){let r=i[As];r||Yd(i,As,r=new Set),r.has(t)||(r.add(t),i.observerAdded&&i.observerAdded(r.size,t))}return t}function qc(i,t){let r=i[As];if(r&&r.has(t)){const s=r.size-1;s?r.delete(t):i[As]=null,i.observerRemoved&&i.observerRemoved(s,t)}}const Yd=(i,t,r)=>Object.defineProperty(i,t,{value:r,writable:!0,configurable:!0}),pr=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ns=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Vl=new RegExp(`(${pr.source})(%|[a-z]+)`,"i"),Tc=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,qu=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ia=i=>{const[t,r]=Zu(i);if(!t||Sl())return i;const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(s)return s.trim();if(r&&r.startsWith("--")){const c=window.getComputedStyle(document.documentElement).getPropertyValue(r);return c||i}else{if(r&&qu.test(r))return Ia(r);if(r)return r}return i},Zu=i=>{const t=qu.exec(i);if(!t)return[,];const[,r,s]=t;return[r,s]};let $u;const ys=(i,t,r,s,c)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(s)}, ${c})`,pu=i=>{$u||($u=jl?new RegExp(`(${Object.keys(jl).join("|")})(?!\\w)`,"g"):/^\b$/);const t=i.output.map(p=>Ka(p).replace(qu,Ia).replace(Ns,ig).replace($u,ig)),r=t.map(p=>p.match(pr).map(Number)),c=r[0].map((p,h)=>r.map(g=>{if(!(h in g))throw Error('The arity of each "output" value must be equal');return g[h]})).map(p=>lu(Tp({},i,{output:p})));return p=>{var h;const g=!Vl.test(t[0])&&((h=t.find(_=>Vl.test(_)))==null?void 0:h.replace(pr,""));let y=0;return t[0].replace(pr,()=>`${c[y++](p)}${g||""}`).replace(Tc,ys)}},uo="react-spring: ",Bc=i=>{const t=i;let r=!1;if(typeof t!="function")throw new TypeError(`${uo}once requires a function parameter`);return(...s)=>{r||(t(...s),r=!0)}},d1=Bc(Mp.warn);function h1(){d1(`${uo}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Qh=Bc(Mp.warn);function Zc(){Qh(`${uo}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Xh(i){return In.str(i)&&(i[0]=="#"||/\d/.test(i)||!Sl()&&qu.test(i)||i in(jl||{}))}let Jn;const uu=new WeakMap,wr=i=>i.forEach(({target:t,contentRect:r})=>{var s;return(s=uu.get(t))==null?void 0:s.forEach(c=>c(r))});function bm(i,t){Jn||typeof ResizeObserver!="undefined"&&(Jn=new ResizeObserver(wr));let r=uu.get(t);return r||(r=new Set,uu.set(t,r)),r.add(i),Jn&&Jn.observe(t),()=>{const s=uu.get(t);s&&(s.delete(i),!s.size&&Jn&&Jn.unobserve(t))}}const Kh=new Set;let os;const du=()=>{const i=()=>{Kh.forEach(t=>t({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},Bp=i=>(Kh.add(i),os||(os=du()),()=>{Kh.delete(i),!Kh.size&&os&&(os(),os=void 0)}),hl=(i,{container:t=document.documentElement}={})=>t===document.documentElement?Bp(i):bm(i,t),ed=(i,t,r)=>t-i===0?1:(r-i)/(t-i),Hs={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class xi{constructor(t,r){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=s=>{const c=this.info[s],{length:p,position:h}=Hs[s];c.current=this.container[`scroll${h}`],c.scrollLength=this.container["scroll"+p]-this.container["client"+p],c.progress=ed(0,c.scrollLength,c.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=r,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const hu=new WeakMap,$c=new WeakMap,Rp=new WeakMap,Jd=i=>i===document.documentElement?window:i,td=(i,{container:t=document.documentElement}={})=>{let r=Rp.get(t);r||(r=new Set,Rp.set(t,r));const s=new xi(i,t);if(r.add(s),!hu.has(t)){const p=()=>{var g;return(g=r)==null||g.forEach(y=>y.advance()),!0};hu.set(t,p);const h=Jd(t);window.addEventListener("resize",p,{passive:!0}),t!==document.documentElement&&$c.set(t,hl(p,{container:t})),h.addEventListener("scroll",p,{passive:!0})}const c=hu.get(t);return raf(c),()=>{raf.cancel(c);const p=Rp.get(t);if(!p||(p.delete(s),p.size))return;const h=hu.get(t);if(hu.delete(t),h){var g;Jd(t).removeEventListener("scroll",h),window.removeEventListener("resize",h),(g=$c.get(t))==null||g()}}};function fu(i){const t=useRef(null);return t.current===null&&(t.current=i()),t.current}const Ql=Sl()?d.useEffect:d.useLayoutEffect,sg=()=>{const i=(0,d.useRef)(!1);return Ql(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function qd(){const i=(0,d.useState)()[1],t=sg();return()=>{t.current&&i(Math.random())}}function Zd(i,t){const[r]=(0,d.useState)(()=>({inputs:t,result:i()})),s=(0,d.useRef)(),c=s.current;let p=c;return p?t&&p.inputs&&$d(t,p.inputs)||(p={inputs:t,result:i()}):p=r,(0,d.useEffect)(()=>{s.current=p,c==r&&(r.inputs=r.result=void 0)},[p]),p.result}function $d(i,t){if(i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}const nd=i=>(0,d.useEffect)(i,ag),ag=[];function rd(i){const t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=i}),t.current}const Yh=()=>{const[i,t]=useState(null);return Ql(()=>{const r=window.matchMedia("(prefers-reduced-motion)"),s=c=>{t(c.matches),Nd({skipAnimation:c.matches})};return s(r),r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[]),i},uc=Symbol.for("Animated:node"),gu=i=>!!i&&i[uc]===i,fo=i=>i&&i[uc],mu=(i,t)=>Lo(i,uc,t),ep=i=>i&&i[uc]&&i[uc].getPayload();class Rc{constructor(){this.payload=void 0,mu(this,this)}getPayload(){return this.payload||[]}}class Bl extends Rc{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,In.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Bl(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,r){return In.num(t)&&(this.lastPosition=t,r&&(t=Math.round(t/r)*r,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,In.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class vs extends Bl{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=lu({output:[t,t]})}static create(t){return new vs(t)}getValue(){let t=this._string;return t==null?this._string=this._toString(this._value):t}setValue(t){if(In.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=lu({output:[this.getValue(),t]})),this._value=0,super.reset()}}const id={dependencies:null};class Jh extends Rc{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const r={};return rs(this.source,(s,c)=>{gu(s)?r[c]=s.getValue(t):wo(s)?r[c]=Ka(s):t||(r[c]=s)}),r}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Oi(this.payload,t=>t.reset())}_makePayload(t){if(t){const r=new Set;return rs(t,this._addToPayload,r),Array.from(r)}}_addToPayload(t){id.dependencies&&wo(t)&&id.dependencies.add(t);const r=ep(t);r&&Oi(r,s=>this.add(s))}}class Au extends Jh{constructor(t){super(t)}static create(t){return new Au(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const r=this.getPayload();return t.length==r.length?r.map((s,c)=>s.setValue(t[c])).some(Boolean):(super.setValue(t.map(lg)),!0)}}function lg(i){return(Xh(i)?vs:Bl).create(i)}function Yo(i){const t=fo(i);return t?t.constructor:In.arr(i)?Au:Xh(i)?vs:Bl}function Wr(){return Wr=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},Wr.apply(this,arguments)}const Wo=(i,t)=>{const r=!In.fun(i)||i.prototype&&i.prototype.isReactComponent;return(0,d.forwardRef)((s,c)=>{const p=(0,d.useRef)(null),h=r&&(0,d.useCallback)(G=>{p.current=$s(c,G)},[c]),[g,y]=ss(s,t),_=qd(),b=()=>{const G=p.current;if(r&&!G)return;(G?t.applyAnimatedValues(G,g.getValue(!0)):!1)===!1&&_()},T=new Gi(b,y),R=(0,d.useRef)();Ql(()=>(R.current=T,Oi(y,G=>Ra(G,T)),()=>{R.current&&(Oi(R.current.deps,G=>qc(G,R.current)),ei.cancel(R.current.update))})),(0,d.useEffect)(b,[]),nd(()=>()=>{const G=R.current;Oi(G.deps,L=>qc(L,G))});const F=t.getComponentProps(g.getValue());return d.createElement(i,Wr({},F,{ref:h}))})};class Gi{constructor(t,r){this.update=t,this.deps=r}eventObserved(t){t.type=="change"&&ei.write(this.update)}}function ss(i,t){const r=new Set;return id.dependencies=r,i.style&&(i=Wr({},i,{style:t.createAnimatedStyle(i.style)})),i=new Jh(i),id.dependencies=null,[i,r]}function $s(i,t){return i&&(In.fun(i)?i(t):i.current=t),t}const Ip=Symbol.for("AnimatedComponent"),Jo=(i,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=c=>new Jh(c),getComponentProps:s=c=>c}={})=>{const c={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:s},p=h=>{const g=yu(h)||"Anonymous";return In.str(h)?h=p[h]||(p[h]=Wo(h,c)):h=h[Ip]||(h[Ip]=Wo(h,c)),h.displayName=`Animated(${g})`,h};return rs(i,(h,g)=>{In.arr(i)&&(g=yu(h)),p[g]=p(h)}),{animated:p}},yu=i=>In.str(i)?i:i&&In.str(i.displayName)?i.displayName:In.fun(i)&&i.name||null;var Fp=A(25108);function go(){return go=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},go.apply(this,arguments)}function ga(i,...t){return In.fun(i)?i(...t):i}const Fa=(i,t)=>i===!0||!!(t&&i&&(In.fun(i)?i(t):So(i).includes(t))),_s=(i,t)=>In.obj(i)?t&&i[t]:i,vu=(i,t)=>i.default===!0?i[t]:i.default?i.default[t]:void 0,od=i=>i,Ic=(i,t=od)=>{let r=qh;i.default&&i.default!==!0&&(i=i.default,r=Object.keys(i));const s={};for(const c of r){const p=t(i[c],c);In.und(p)||(s[c]=p)}return s},qh=["config","onProps","onStart","onChange","onPause","onResume","onRest"],_u={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Op(i){const t={};let r=0;if(rs(i,(s,c)=>{_u[c]||(t[c]=s,r++)}),r)return t}function sd(i){const t=Op(i);if(t){const r={to:t};return rs(i,(s,c)=>c in t||(r[c]=s)),r}return go({},i)}function Xl(i){return i=Ka(i),In.arr(i)?i.map(Xl):Xh(i)?Wl.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function eh(i){for(const t in i)return!0;return!1}function Eu(i){return In.fun(i)||In.arr(i)&&In.obj(i[0])}function th(i,t){var r;(r=i.ref)==null||r.delete(i),t==null||t.delete(i)}function ad(i,t){if(t&&i.ref!==t){var r;(r=i.ref)==null||r.delete(i),t.add(i),i.ref=t}}function cg(i,t,r=1e3){useIsomorphicLayoutEffect(()=>{if(t){let s=0;each(i,(c,p)=>{const h=c.current;if(h.length){let g=r*t[p];isNaN(g)?g=s:s=g,each(h,y=>{each(y.queue,_=>{const b=_.delay;_.delay=T=>g+ga(b||0,T)})}),c.start()}})}else{let s=Promise.resolve();each(i,c=>{const p=c.current;if(p.length){const h=p.map(g=>{const y=g.queue;return g.queue=[],y});s=s.then(()=>(each(p,(g,y)=>each(h[y]||[],_=>g.queue.push(_))),Promise.all(c.start())))}})}})}const Fc=go({},{default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}}.default,{mass:1,damping:1,easing:ms.linear,clamp:!1});class Kl{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,Fc)}}function Zh(i,t,r){r&&(r=go({},r),Ja(r,t),t=go({},r,t)),Ja(i,t),Object.assign(i,t);for(const h in Fc)i[h]==null&&(i[h]=Fc[h]);let{mass:s,frequency:c,damping:p}=i;return In.und(c)||(c<.01&&(c=.01),p<0&&(p=0),i.tension=Math.pow(2*Math.PI/c,2)*s,i.friction=4*Math.PI*p*s/c),i}function Ja(i,t){if(!In.und(t.decay))i.duration=void 0;else{const r=!In.und(t.tension)||!In.und(t.friction);(r||!In.und(t.frequency)||!In.und(t.damping)||!In.und(t.mass))&&(i.duration=void 0,i.decay=void 0),r&&(i.frequency=void 0)}}const pg=[];class ug{constructor(){this.changed=!1,this.values=pg,this.toValues=null,this.fromValues=pg,this.to=void 0,this.from=void 0,this.config=new Kl,this.immediate=!1}}function $h(i,{key:t,props:r,defaultProps:s,state:c,actions:p}){return new Promise((h,g)=>{var y;let _,b,T=Fa((y=r.cancel)!=null?y:s==null?void 0:s.cancel,t);if(T)G();else{In.und(r.pause)||(c.paused=Fa(r.pause,t));let L=s==null?void 0:s.pause;L!==!0&&(L=c.paused||Fa(L,t)),_=ga(r.delay||0,t),L?(c.resumeQueue.add(F),p.pause()):(p.resume(),F())}function R(){c.resumeQueue.add(F),c.timeouts.delete(b),b.cancel(),_=b.time-ei.now()}function F(){_>0&&!Wl.skipAnimation?(c.delayed=!0,b=ei.setTimeout(G,_),c.pauseQueue.add(R),c.timeouts.add(b)):G()}function G(){c.delayed&&(c.delayed=!1),c.pauseQueue.delete(R),c.timeouts.delete(b),i<=(c.cancelId||0)&&(T=!0);try{p.start(go({},r,{callId:i,cancel:T}),h)}catch(L){g(L)}}})}const dg=(i,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?bu(i.get()):t.every(r=>r.noop)?tp(i.get()):Yl(i.get(),t.every(r=>r.finished)),tp=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),Yl=(i,t,r=!1)=>({value:i,finished:t,cancelled:r}),bu=i=>({value:i,cancelled:!0,finished:!1});function ef(i,t,r,s){const{callId:c,parentId:p,onRest:h}=t,{asyncTo:g,promise:y}=r;return!p&&i===g&&!t.reset?y:r.promise=(()=>es(this,null,function*(){r.asyncId=c,r.asyncTo=i;const _=Ic(t,(O,P)=>P==="onRest"?void 0:O);let b,T;const R=new Promise((O,P)=>(b=O,T=P)),F=O=>{const P=c<=(r.cancelId||0)&&bu(s)||c!==r.asyncId&&Yl(s,!1);if(P)throw O.result=P,T(O),O},G=(O,P)=>{const D=new hg,z=new fg;return(()=>es(this,null,function*(){if(Wl.skipAnimation)throw dc(r),z.result=Yl(s,!1),T(z),z;F(D);const H=In.obj(O)?go({},O):go({},P,{to:O});H.parentId=c,rs(_,(W,Y)=>{In.und(H[Y])&&(H[Y]=W)});const Q=yield s.start(H);return F(D),r.paused&&(yield new Promise(W=>{r.resumeQueue.add(W)})),Q}))()};let L;if(Wl.skipAnimation)return dc(r),Yl(s,!1);try{let O;In.arr(i)?O=(P=>es(this,null,function*(){for(const D of P)yield G(D)}))(i):O=Promise.resolve(i(G,s.stop.bind(s))),yield Promise.all([O.then(b),R]),L=Yl(s.get(),!0,!1)}catch(O){if(O instanceof hg)L=O.result;else if(O instanceof fg)L=O.result;else throw O}finally{c==r.asyncId&&(r.asyncId=p,r.asyncTo=p?g:void 0,r.promise=p?y:void 0)}return In.fun(h)&&ei.batchedUpdates(()=>{h(L,s,s.item)}),L}))()}function dc(i,t){Sa(i.timeouts,r=>r.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,t&&(i.cancelId=t)}class hg extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class fg extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const nh=i=>i instanceof gg;let tf=1;class gg extends fa{constructor(...t){super(...t),this.id=tf++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=fo(this);return t&&t.getValue()}to(...t){return Wl.to(this,t)}interpolate(...t){return h1(),Wl.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,r=!1){Kd(this,{type:"change",parent:this,value:t,idle:r})}_onPriorityChange(t){this.idle||Kc.sort(this),Kd(this,{type:"priority",parent:this,priority:t})}}const Mu=Symbol.for("SpringPhase"),mg=1,nf=2,np=4,Ag=i=>(i[Mu]&mg)>0,gl=i=>(i[Mu]&nf)>0,ld=i=>(i[Mu]&np)>0,qa=(i,t)=>t?i[Mu]|=nf|mg:i[Mu]&=~nf,Mm=(i,t)=>t?i[Mu]|=np:i[Mu]&=~np;class yg extends gg{constructor(t,r){if(super(),this.key=void 0,this.animation=new ug,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!In.und(t)||!In.und(r)){const s=In.obj(t)?go({},t):go({},r,{from:t});In.und(s.default)&&(s.default=!0),this.start(s)}}get idle(){return!(gl(this)||this._state.asyncTo)||ld(this)}get goal(){return Ka(this.animation.to)}get velocity(){const t=fo(this);return t instanceof Bl?t.lastVelocity||0:t.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return Ag(this)}get isAnimating(){return gl(this)}get isPaused(){return ld(this)}get isDelayed(){return this._state.delayed}advance(t){let r=!0,s=!1;const c=this.animation;let{config:p,toValues:h}=c;const g=ep(c.to);!g&&wo(c.to)&&(h=So(Ka(c.to))),c.values.forEach((b,T)=>{if(b.done)return;const R=b.constructor==vs?1:g?g[T].lastPosition:h[T];let F=c.immediate,G=R;if(!F){if(G=b.lastPosition,p.tension<=0){b.done=!0;return}let L=b.elapsedTime+=t;const O=c.fromValues[T],P=b.v0!=null?b.v0:b.v0=In.arr(p.velocity)?p.velocity[T]:p.velocity;let D;const z=p.precision||(O==R?.005:Math.min(1,Math.abs(R-O)*.001));if(In.und(p.duration))if(p.decay){const H=p.decay===!0?.998:p.decay,Q=Math.exp(-(1-H)*L);G=O+P/(1-H)*(1-Q),F=Math.abs(b.lastPosition-G)<=z,D=P*Q}else{D=b.lastVelocity==null?P:b.lastVelocity;const H=p.restVelocity||z/10,Q=p.clamp?0:p.bounce,W=!In.und(Q),Y=O==R?b.v0>0:O<R;let K,ie=!1;const ce=1,ge=Math.ceil(t/ce);for(let ae=0;ae<ge&&(K=Math.abs(D)>H,!(!K&&(F=Math.abs(R-G)<=z,F)));++ae){W&&(ie=G==R||G>R==Y,ie&&(D=-D*Q,G=R));const xe=-p.tension*1e-6*(G-R),ve=-p.friction*.001*D,Be=(xe+ve)/p.mass;D=D+Be*ce,G=G+D*ce}}else{let H=1;p.duration>0&&(this._memoizedDuration!==p.duration&&(this._memoizedDuration=p.duration,b.durationProgress>0&&(b.elapsedTime=p.duration*b.durationProgress,L=b.elapsedTime+=t)),H=(p.progress||0)+L/this._memoizedDuration,H=H>1?1:H<0?0:H,b.durationProgress=H),G=O+p.easing(H)*(R-O),D=(G-b.lastPosition)/t,F=H==1}b.lastVelocity=D,Number.isNaN(G)&&(Fp.warn("Got NaN while animating:",this),F=!0)}g&&!g[T].done&&(F=!1),F?b.done=!0:r=!1,b.setValue(G,p.round)&&(s=!0)});const y=fo(this),_=y.getValue();if(r){const b=Ka(c.to);(_!==b||s)&&!p.decay?(y.setValue(b),this._onChange(b)):s&&p.decay&&this._onChange(_),this._stop()}else s&&this._onChange(_)}set(t){return ei.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(gl(this)){const{to:t,config:r}=this.animation;ei.batchedUpdates(()=>{this._onStart(),r.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,r){let s;return In.und(t)?(s=this.queue||[],this.queue=[]):s=[In.obj(t)?t:go({},r,{to:t})],Promise.all(s.map(c=>this._update(c))).then(c=>dg(this,c))}stop(t){const{to:r}=this.animation;return this._focus(this.get()),dc(this._state,t&&this._lastCallId),ei.batchedUpdates(()=>this._stop(r,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const r=this.key||"";let{to:s,from:c}=t;s=In.obj(s)?s[r]:s,(s==null||Eu(s))&&(s=void 0),c=In.obj(c)?c[r]:c,c==null&&(c=void 0);const p={to:s,from:c};return Ag(this)||(t.reverse&&([s,c]=[c,s]),c=Ka(c),In.und(c)?fo(this)||this._set(s):this._set(c)),p}_update(t,r){let s=go({},t);const{key:c,defaultProps:p}=this;s.default&&Object.assign(p,Ic(s,(y,_)=>/^on/.test(_)?_s(y,c):y)),rf(this,s,"onProps"),ih(this,"onProps",s,this);const h=this._prepareNode(s);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const g=this._state;return $h(++this._lastCallId,{key:c,props:s,defaultProps:p,state:g,actions:{pause:()=>{ld(this)||(Mm(this,!0),Wa(g.pauseQueue),ih(this,"onPause",Yl(this,rh(this,this.animation.to)),this))},resume:()=>{ld(this)&&(Mm(this,!1),gl(this)&&this._resume(),Wa(g.resumeQueue),ih(this,"onResume",Yl(this,rh(this,this.animation.to)),this))},start:this._merge.bind(this,h)}}).then(y=>{if(s.loop&&y.finished&&!(r&&y.noop)){const _=xm(s);if(_)return this._update(_,!0)}return y})}_merge(t,r,s){if(r.cancel)return this.stop(!0),s(bu(this));const c=!In.und(t.to),p=!In.und(t.from);if(c||p)if(r.callId>this._lastToId)this._lastToId=r.callId;else return s(bu(this));const{key:h,defaultProps:g,animation:y}=this,{to:_,from:b}=y;let{to:T=_,from:R=b}=t;p&&!c&&(!r.default||In.und(T))&&(T=R),r.reverse&&([T,R]=[R,T]);const F=!Us(R,b);F&&(y.from=R),R=Ka(R);const G=!Us(T,_);G&&this._focus(T);const L=Eu(r.to),{config:O}=y,{decay:P,velocity:D}=O;(c||p)&&(O.velocity=0),r.config&&!L&&Zh(O,ga(r.config,h),r.config!==g.config?ga(g.config,h):void 0);let z=fo(this);if(!z||In.und(T))return s(Yl(this,!0));const H=In.und(r.reset)?p&&!r.default:!In.und(R)&&Fa(r.reset,h),Q=H?R:this.get(),W=Xl(T),Y=In.num(W)||In.arr(W)||Xh(W),K=!L&&(!Y||Fa(g.immediate||r.immediate,h));if(G){const ae=Yo(T);if(ae!==z.constructor)if(K)z=this._set(W);else throw Error(`Cannot animate between ${z.constructor.name} and ${ae.name}, as the "to" prop suggests`)}const ie=z.constructor;let ce=wo(T),ge=!1;if(!ce){const ae=H||!Ag(this)&&F;(G||ae)&&(ge=Us(Xl(Q),W),ce=!ge),(!Us(y.immediate,K)&&!K||!Us(O.decay,P)||!Us(O.velocity,D))&&(ce=!0)}if(ge&&gl(this)&&(y.changed&&!H?ce=!0:ce||this._stop(_)),!L&&((ce||wo(_))&&(y.values=z.getPayload(),y.toValues=wo(T)?null:ie==vs?[1]:So(W)),y.immediate!=K&&(y.immediate=K,!K&&!H&&this._set(_)),ce)){const{onRest:ae}=y;Oi(Jl,ve=>rf(this,r,ve));const xe=Yl(this,rh(this,_));Wa(this._pendingCalls,xe),this._pendingCalls.add(s),y.changed&&ei.batchedUpdates(()=>{y.changed=!H,ae==null||ae(xe,this),H?ga(g.onRest,xe):y.onStart==null||y.onStart(xe,this)})}H&&this._set(Q),L?s(ef(r.to,r,this._state,this)):ce?this._start():gl(this)&&!G?this._pendingCalls.add(s):s(tp(Q))}_focus(t){const r=this.animation;t!==r.to&&(Ju(this)&&this._detach(),r.to=t,Ju(this)&&this._attach())}_attach(){let t=0;const{to:r}=this.animation;wo(r)&&(Ra(r,this),nh(r)&&(t=r.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;wo(t)&&qc(t,this)}_set(t,r=!0){const s=Ka(t);if(!In.und(s)){const c=fo(this);if(!c||!Us(s,c.getValue())){const p=Yo(s);!c||c.constructor!=p?mu(this,p.create(s)):c.setValue(s),c&&ei.batchedUpdates(()=>{this._onChange(s,r)})}}return fo(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ih(this,"onStart",Yl(this,rh(this,t.to)),this))}_onChange(t,r){r||(this._onStart(),ga(this.animation.onChange,t,this)),ga(this.defaultProps.onChange,t,this),super._onChange(t,r)}_start(){const t=this.animation;fo(this).reset(Ka(t.to)),t.immediate||(t.fromValues=t.values.map(r=>r.lastPosition)),gl(this)||(qa(this,!0),ld(this)||this._resume())}_resume(){Wl.skipAnimation?this.finish():Kc.start(this)}_stop(t,r){if(gl(this)){qa(this,!1);const s=this.animation;Oi(s.values,p=>{p.done=!0}),s.toValues&&(s.onChange=s.onPause=s.onResume=void 0),Kd(this,{type:"idle",parent:this});const c=r?bu(this.get()):Yl(this.get(),rh(this,t!=null?t:s.to));Wa(this._pendingCalls,c),s.changed&&(s.changed=!1,ih(this,"onRest",c,this))}}}function rh(i,t){const r=Xl(t),s=Xl(i.get());return Us(s,r)}function xm(i,t=i.loop,r=i.to){let s=ga(t);if(s){const c=s!==!0&&sd(s),p=(c||i).reverse,h=!c||c.reset;return cd(go({},i,{loop:t,default:!1,pause:void 0,to:!p||Eu(r)?r:void 0,from:h?i.from:void 0,reset:h},c))}}function cd(i){const{to:t,from:r}=i=sd(i),s=new Set;return In.obj(t)&&Sm(t,s),In.obj(r)&&Sm(r,s),i.keys=s.size?Array.from(s):null,i}function Cm(i){const t=cd(i);return In.und(t.default)&&(t.default=Ic(t)),t}function Sm(i,t){rs(i,(r,s)=>r!=null&&t.add(s))}const Jl=["onStart","onRest","onChange","onPause","onResume"];function rf(i,t,r){i.animation[r]=t[r]!==vu(t,r)?_s(t[r],i.key):void 0}function ih(i,t,...r){var s,c,p,h;(s=(c=i.animation)[t])==null||s.call(c,...r),(p=(h=i.defaultProps)[t])==null||p.call(h,...r)}const Dp=["onStart","onChange","onRest"];let of=1;class Pp{constructor(t,r){this.id=of++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),r&&(this._flush=r),t&&this.start(go({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((r,s)=>t[s]=r.get()),t}set(t){for(const r in t){const s=t[r];In.und(s)||this.springs[r].set(s)}}update(t){return t&&this.queue.push(cd(t)),this}start(t){let{queue:r}=this;return t?r=So(t).map(cd):this.queue=[],this._flush?this._flush(this,r):(Eg(this,r),pd(this,r))}stop(t,r){if(t!==!!t&&(r=t),r){const s=this.springs;Oi(So(r),c=>s[c].stop(!!t))}else dc(this._state,this._lastAsyncId),this.each(s=>s.stop(!!t));return this}pause(t){if(In.und(t))this.start({pause:!0});else{const r=this.springs;Oi(So(t),s=>r[s].pause())}return this}resume(t){if(In.und(t))this.start({pause:!1});else{const r=this.springs;Oi(So(t),s=>r[s].resume())}return this}each(t){rs(this.springs,t)}_onFrame(){const{onStart:t,onChange:r,onRest:s}=this._events,c=this._active.size>0,p=this._changed.size>0;(c&&!this._started||p&&!this._started)&&(this._started=!0,Sa(t,([y,_])=>{_.value=this.get(),y(_,this,this._item)}));const h=!c&&this._started,g=p||h&&s.size?this.get():null;p&&r.size&&Sa(r,([y,_])=>{_.value=g,y(_,this,this._item)}),h&&(this._started=!1,Sa(s,([y,_])=>{_.value=g,y(_,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;ei.onFrame(this._onFrame)}}function pd(i,t){return Promise.all(t.map(r=>sf(i,r))).then(r=>dg(i,r))}function sf(i,t,r){return es(this,null,function*(){const{keys:s,to:c,from:p,loop:h,onRest:g,onResolve:y}=t,_=In.obj(t.default)&&t.default;h&&(t.loop=!1),c===!1&&(t.to=null),p===!1&&(t.from=null);const b=In.arr(c)||In.fun(c)?c:void 0;b?(t.to=void 0,t.onRest=void 0,_&&(_.onRest=void 0)):Oi(Dp,L=>{const O=t[L];if(In.fun(O)){const P=i._events[L];t[L]=({finished:D,cancelled:z})=>{const H=P.get(O);H?(D||(H.finished=!1),z&&(H.cancelled=!0)):P.set(O,{value:null,finished:D||!1,cancelled:z||!1})},_&&(_[L]=t[L])}});const T=i._state;t.pause===!T.paused?(T.paused=t.pause,Wa(t.pause?T.pauseQueue:T.resumeQueue)):T.paused&&(t.pause=!0);const R=(s||Object.keys(i.springs)).map(L=>i.springs[L].start(t)),F=t.cancel===!0||vu(t,"cancel")===!0;(b||F&&T.asyncId)&&R.push($h(++i._lastAsyncId,{props:t,state:T,actions:{pause:Nh,resume:Nh,start(L,O){F?(dc(T,i._lastAsyncId),O(bu(i))):(L.onRest=g,O(ef(b,L,T,i)))}}})),T.paused&&(yield new Promise(L=>{T.resumeQueue.add(L)}));const G=dg(i,yield Promise.all(R));if(h&&G.finished&&!(r&&G.noop)){const L=xm(t,h,c);if(L)return Eg(i,[L]),sf(i,L,!0)}return y&&ei.batchedUpdates(()=>y(G,i,i.item)),G})}function oh(i,t){const r=go({},i.springs);return t&&Oi(So(t),s=>{In.und(s.keys)&&(s=cd(s)),In.obj(s.to)||(s=go({},s,{to:void 0})),_g(r,s,c=>vg(c))}),wm(i,r),r}function wm(i,t){rs(t,(r,s)=>{i.springs[s]||(i.springs[s]=r,Ra(r,i))})}function vg(i,t){const r=new yg;return r.key=i,t&&Ra(r,t),r}function _g(i,t,r){t.keys&&Oi(t.keys,s=>{(i[s]||(i[s]=r(s)))._prepareNode(t)})}function Eg(i,t){Oi(t,r=>{_g(i.springs,r,s=>vg(s,i))})}function rp(i,t){if(i==null)return{};var r={},s=Object.keys(i),c,p;for(p=0;p<s.length;p++)c=s[p],!(t.indexOf(c)>=0)&&(r[c]=i[c]);return r}const bg=["children"],sh=i=>{let{children:t}=i,r=rp(i,bg);const s=(0,d.useContext)(af),c=r.pause||!!s.pause,p=r.immediate||!!s.immediate;r=Zd(()=>({pause:c,immediate:p}),[c,p]);const{Provider:h}=af;return d.createElement(h,{value:r},t)},af=x(sh,{});sh.Provider=af.Provider,sh.Consumer=af.Consumer;function x(i,t){return Object.assign(i,d.createContext(t)),i.Provider._context=i,i.Consumer._context=i,i}const S=()=>{const i=[],t=function(c){Zc();const p=[];return Oi(i,(h,g)=>{if(In.und(c))p.push(h.start());else{const y=r(c,h,g);y&&p.push(h.start(y))}}),p};t.current=i,t.add=function(s){i.includes(s)||i.push(s)},t.delete=function(s){const c=i.indexOf(s);~c&&i.splice(c,1)},t.pause=function(){return Oi(i,s=>s.pause(...arguments)),this},t.resume=function(){return Oi(i,s=>s.resume(...arguments)),this},t.set=function(s){Oi(i,c=>c.set(s))},t.start=function(s){const c=[];return Oi(i,(p,h)=>{if(In.und(s))c.push(p.start());else{const g=this._getProps(s,p,h);g&&c.push(p.start(g))}}),c},t.stop=function(){return Oi(i,s=>s.stop(...arguments)),this},t.update=function(s){return Oi(i,(c,p)=>c.update(this._getProps(s,c,p))),this};const r=function(c,p,h){return In.fun(c)?c(h,p):c};return t._getProps=r,t};function U(i,t,r){const s=In.fun(t)&&t;s&&!r&&(r=[]);const c=(0,d.useMemo)(()=>s||arguments.length==3?S():void 0,[]),p=(0,d.useRef)(0),h=qd(),g=(0,d.useMemo)(()=>({ctrls:[],queue:[],flush(P,D){const z=oh(P,D);return p.current>0&&!g.queue.length&&!Object.keys(z).some(Q=>!P.springs[Q])?pd(P,D):new Promise(Q=>{wm(P,z),g.queue.push(()=>{Q(pd(P,D))}),h()})}}),[]),y=(0,d.useRef)([...g.ctrls]),_=[],b=rd(i)||0;(0,d.useMemo)(()=>{Oi(y.current.slice(i,b),P=>{th(P,c),P.stop(!0)}),y.current.length=i,T(b,i)},[i]),(0,d.useMemo)(()=>{T(0,Math.min(b,i))},r);function T(P,D){for(let z=P;z<D;z++){const H=y.current[z]||(y.current[z]=new Pp(null,g.flush)),Q=s?s(z,H):t[z];Q&&(_[z]=Cm(Q))}}const R=y.current.map((P,D)=>oh(P,_[D])),F=(0,d.useContext)(sh),G=rd(F),L=F!==G&&eh(F);Ql(()=>{p.current++,g.ctrls=y.current;const{queue:P}=g;P.length&&(g.queue=[],Oi(P,D=>D())),Oi(y.current,(D,z)=>{c==null||c.add(D),L&&D.start({default:F});const H=_[z];H&&(ad(D,H.ref),D.ref?D.queue.push(H):D.start(H))})}),nd(()=>()=>{Oi(g.ctrls,P=>P.stop(!0))});const O=R.map(P=>go({},P));return c?[O,c]:O}function V(i,t){const r=In.fun(i),[[s],c]=U(1,r?i:[i],r?t||[]:t);return r||arguments.length==2?[s,c]:s}const te=()=>S(),de=()=>useState(te)[0],Je=(i,t)=>{const r=useConstant(()=>new yg(i,t));return useOnce(()=>()=>{r.stop()}),r};function Et(i,t,r){const s=is.fun(t)&&t;s&&!r&&(r=[]);let c=!0,p;const h=U(i,(y,_)=>{const b=s?s(y,_):t;return p=b.ref,c=c&&b.reverse,b},r||[{}]);if(useIsomorphicLayoutEffect(()=>{each(h[1].current,(y,_)=>{const b=h[1].current[_+(c?1:-1)];if(ad(y,p),y.ref){b&&y.update({to:b.springs});return}b?y.start({to:b.springs}):y.start()})},r),s||arguments.length==3){var g;const y=(g=p)!=null?g:h[1];return y._getProps=(_,b,T)=>{const R=is.fun(_)?_(T,b):_;if(R){const F=y.current[T+(R.reverse?1:-1)];return F&&(R.to=F.springs),R}},h}return h[0]}let Wt;(function(i){i.MOUNT="mount",i.ENTER="enter",i.UPDATE="update",i.LEAVE="leave"})(Wt||(Wt={}));function Pn(i,t,r){const s=is.fun(t)&&t,{reset:c,sort:p,trail:h=0,expires:g=!0,exitBeforeEnter:y=!1,onDestroyed:_,ref:b,config:T}=s?s():t,R=useMemo(()=>s||arguments.length==3?S():void 0,[]),F=toArray(i),G=[],L=useRef(null),O=c?null:L.current;useIsomorphicLayoutEffect(()=>{L.current=G}),useOnce(()=>(each(G,ve=>{R==null||R.add(ve.ctrl),ve.ctrl.ref=R}),()=>{each(L.current,ve=>{ve.expired&&clearTimeout(ve.expirationId),th(ve.ctrl,R),ve.ctrl.stop(!0)})}));const P=di(F,s?s():t,O),D=c&&L.current||[];useIsomorphicLayoutEffect(()=>each(D,({ctrl:ve,item:Be,key:Ue})=>{th(ve,R),ga(_,Be,Ue)}));const z=[];if(O&&each(O,(ve,Be)=>{ve.expired?(clearTimeout(ve.expirationId),D.push(ve)):(Be=z[Be]=P.indexOf(ve.key),~Be&&(G[Be]=ve))}),each(F,(ve,Be)=>{G[Be]||(G[Be]={key:P[Be],item:ve,phase:Wt.MOUNT,ctrl:new Pp},G[Be].ctrl.item=ve)}),z.length){let ve=-1;const{leave:Be}=s?s():t;each(z,(Ue,Ie)=>{const Ne=O[Ie];~Ue?(ve=G.indexOf(Ne),G[ve]=go({},Ne,{item:F[Ue]})):Be&&G.splice(++ve,0,Ne)})}is.fun(p)&&G.sort((ve,Be)=>p(ve.item,Be.item));let H=-h;const Q=useForceUpdate(),W=Ic(t),Y=new Map,K=useRef(new Map),ie=useRef(!1);each(G,(ve,Be)=>{const Ue=ve.key,Ie=ve.phase,Ne=s?s():t;let Le,Ye,Ce=ga(Ne.delay||0,Ue);if(Ie==Wt.MOUNT)Le=Ne.enter,Ye=Wt.ENTER;else{const me=P.indexOf(Ue)<0;if(Ie!=Wt.LEAVE)if(me)Le=Ne.leave,Ye=Wt.LEAVE;else if(Le=Ne.update)Ye=Wt.UPDATE;else return;else if(!me)Le=Ne.enter,Ye=Wt.ENTER;else return}if(Le=ga(Le,ve.item,Be),Le=is.obj(Le)?sd(Le):{to:Le},!Le.config){const me=T||W.config;Le.config=ga(me,ve.item,Be,Ye)}H+=h;const Ee=go({},W,{delay:Ce+H,ref:b,immediate:Ne.immediate,reset:!1},Le);if(Ye==Wt.ENTER&&is.und(Ee.from)){const me=s?s():t,Te=is.und(me.initial)||O?me.from:me.initial;Ee.from=ga(Te,ve.item,Be)}const{onResolve:_e}=Ee;Ee.onResolve=me=>{ga(_e,me);const Te=L.current,ye=Te.find(ze=>ze.key===Ue);if(ye&&!(me.cancelled&&ye.phase!=Wt.UPDATE)&&ye.ctrl.idle){const ze=Te.every(Mt=>Mt.ctrl.idle);if(ye.phase==Wt.LEAVE){const Mt=ga(g,ye.item);if(Mt!==!1){const At=Mt===!0?0:Mt;if(ye.expired=!0,!ze&&At>0){At<=2147483647&&(ye.expirationId=setTimeout(Q,At));return}}}ze&&Te.some(Mt=>Mt.expired)&&(K.current.delete(ye),y&&(ie.current=!0),Q())}};const oe=oh(ve.ctrl,Ee);Ye===Wt.LEAVE&&y?K.current.set(ve,{phase:Ye,springs:oe,payload:Ee}):Y.set(ve,{phase:Ye,springs:oe,payload:Ee})});const ce=useContext(sh),ge=usePrev(ce),ae=ce!==ge&&eh(ce);useIsomorphicLayoutEffect(()=>{ae&&each(G,ve=>{ve.ctrl.start({default:ce})})},[ce]),each(Y,(ve,Be)=>{if(K.current.size){const Ue=G.findIndex(Ie=>Ie.key===Be.key);G.splice(Ue,1)}}),useIsomorphicLayoutEffect(()=>{each(K.current.size?K.current:Y,({phase:ve,payload:Be},Ue)=>{const{ctrl:Ie}=Ue;Ue.phase=ve,R==null||R.add(Ie),ae&&ve==Wt.ENTER&&Ie.start({default:ce}),Be&&(ad(Ie,Be.ref),(Ie.ref||R)&&!ie.current?Ie.update(Be):(Ie.start(Be),ie.current&&(ie.current=!1)))})},c?void 0:r);const xe=ve=>React.createElement(React.Fragment,null,G.map((Be,Ue)=>{const{springs:Ie}=Y.get(Be)||Be.ctrl,Ne=ve(go({},Ie),Be.item,Be,Ue);return Ne&&Ne.type?React.createElement(Ne.type,go({},Ne.props,{key:is.str(Be.key)||is.num(Be.key)?Be.key:Be.ctrl.id,ref:Ne.ref})):Ne}));return R?[xe,R]:xe}let Mr=1;function di(i,{key:t,keys:r=t},s){if(r===null){const c=new Set;return i.map(p=>{const h=s&&s.find(g=>g.item===p&&g.phase!==Wt.LEAVE&&!c.has(g));return h?(c.add(h),h.key):Mr++})}return is.und(r)?i:is.fun(r)?i.map(r):toArray(r)}const jr=null,To=(i={})=>{let{container:t}=i,r=rp(i,jr);const[s,c]=V(()=>go({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onScroll(({x:h,y:g})=>{c.start({scrollX:h.current,scrollXProgress:h.progress,scrollY:g.current,scrollYProgress:g.progress})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(s),h=>h.stop()),p()}},[]),s},Fr=null,Za=i=>{let{container:t}=i,r=rp(i,Fr);const[s,c]=V(()=>go({width:0,height:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onResize(({width:h,height:g})=>{c.start({width:h,height:g,immediate:s.width.get()===0||s.height.get()===0})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(s),h=>h.stop()),p()}},[]),s},ql=null,Dt=null,Ct={any:0,all:1};function Xt(i,t){const[r,s]=useState(!1),c=useRef(),p=is.fun(i)&&i,h=p?p():{},{to:g={},from:y={}}=h,_=rp(h,ql),b=p?t:i,[T,R]=V(()=>go({from:y},_),[]);return useIsomorphicLayoutEffect(()=>{const F=c.current,G=b!=null?b:{},{root:L,once:O,amount:P="any"}=G,D=rp(G,Dt);if(!F||O&&r||typeof IntersectionObserver=="undefined")return;const z=new WeakMap,H=()=>(g&&R.start(g),s(!0),O?void 0:()=>{y&&R.start(y),s(!1)}),Q=Y=>{Y.forEach(K=>{const ie=z.get(K.target);if(K.isIntersecting!==!!ie)if(K.isIntersecting){const ce=H();is.fun(ce)?z.set(K.target,ce):W.unobserve(K.target)}else ie&&(ie(),z.delete(K.target))})},W=new IntersectionObserver(Q,go({root:L&&L.current||void 0,threshold:typeof P=="number"||Array.isArray(P)?P:Ct[P]},D));return W.observe(F),()=>W.unobserve(F)},[b]),p?[c,T]:[c,r]}const ur=null;function Or(i){let{children:t}=i,r=rp(i,ur);return t(V(r))}const Ci=null;function yi(i){let{items:t,children:r}=i,s=rp(i,Ci);const c=Et(t.length,s);return t.map((p,h)=>{const g=r(p,h);return is.fun(g)?g(c[h]):g})}const oo=null;function ma(i){let{items:t,children:r}=i,s=rp(i,oo);return Pn(t,s)(r)}class Qi extends gg{constructor(t,r){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=lu(...r);const s=this._get(),c=Yo(s);mu(this,c.create(s))}advance(t){const r=this._get(),s=this.get();Us(r,s)||(fo(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&Tm(this._active)&&f1(this)}_get(){const t=In.arr(this.source)?this.source.map(Ka):So(Ka(this.source));return this.calc(...t)}_start(){this.idle&&!Tm(this._active)&&(this.idle=!1,Oi(ep(this),t=>{t.done=!1}),Wl.skipAnimation?(ei.batchedUpdates(()=>this.advance()),f1(this)):Kc.start(this))}_attach(){let t=1;Oi(So(this.source),r=>{wo(r)&&Ra(r,this),nh(r)&&(r.idle||this._active.add(r),t=Math.max(t,r.priority+1))}),this.priority=t,this._start()}_detach(){Oi(So(this.source),t=>{wo(t)&&qc(t,this)}),this._active.clear(),f1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=So(this.source).reduce((r,s)=>Math.max(r,(nh(s)?s.priority:0)+1),0))}}function Lp(i){return i.idle!==!1}function Tm(i){return!i.size||Array.from(i).every(Lp)}function f1(i){i.idle||(i.idle=!0,Oi(ep(i),t=>{t.done=!0}),Kd(i,{type:"idle",parent:i}))}const Vb=(i,...t)=>new Qi(i,t),Qb=(i,...t)=>(deprecateInterpolate(),new Qi(i,t));Wl.assign({createStringInterpolator:pu,to:(i,t)=>new Qi(i,t)});const Xb=Kc.advance,l_=["primitive"].concat(Object.keys(o).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));Wl.assign({createStringInterpolator:pu,colors:si,frameLoop:"demand"}),(0,E.n)(()=>{ei.advance()});const c_=Jo(l_,{applyAnimatedValues:E.j}).animated;function p_(i,t,r){return Math.max(t,Math.min(i,r))}const qo={toVector(i,t){return i===void 0&&(i=t),Array.isArray(i)?i:[i,i]},add(i,t){return[i[0]+t[0],i[1]+t[1]]},sub(i,t){return[i[0]-t[0],i[1]-t[1]]},addTo(i,t){i[0]+=t[0],i[1]+=t[1]},subTo(i,t){i[0]-=t[0],i[1]-=t[1]}};function dy(i,t,r){return t===0||Math.abs(t)===1/0?Math.pow(i,r*5):i*t*r/(t+r*i)}function hy(i,t,r,s=.15){return s===0?p_(i,t,r):i<t?-dy(t-i,r-t,s)+t:i>r?+dy(i-r,r-t,s)+r:i}function u_(i,[t,r],[s,c]){const[[p,h],[g,y]]=i;return[hy(t,p,h,s),hy(r,g,y,c)]}function d_(i,t){if(typeof i!="object"||i===null)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var s=r.call(i,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function h_(i){var t=d_(i,"string");return typeof t=="symbol"?t:String(t)}function ea(i,t,r){return t=h_(t),t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function fy(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),r.push.apply(r,s)}return r}function Es(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fy(Object(r),!0).forEach(function(s){ea(i,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):fy(Object(r)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(r,s))})}return i}const f_={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function g_(i){return i?i[0].toUpperCase()+i.slice(1):""}const Yb=["enter","leave"];function Jb(i=!1,t){return i&&!Yb.includes(t)}function qb(i,t="",r=!1){const s=f_[i],c=s&&s[t]||t;return"on"+g_(i)+g_(c)+(Jb(r,c)?"Capture":"")}const Zb=["gotpointercapture","lostpointercapture"];function $b(i){let t=i.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const s=Zb.includes(t)?"capturecapture":"capture",c=!!~t.indexOf(s);return c&&(t=t.replace("capture","")),{device:t,capture:c,passive:r}}function eM(i,t=""){const r=f_[i],s=r&&r[t]||t;return i+s}function g1(i){return"touches"in i}function m_(i){return g1(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function tM(i){return Array.from(i.touches).filter(t=>{var r,s;return t.target===i.currentTarget||((r=i.currentTarget)===null||r===void 0||(s=r.contains)===null||s===void 0?void 0:s.call(r,t.target))})}function nM(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function A_(i){return g1(i)?nM(i)[0]:i}function gy(i,t){try{const r=t.clientX-i.clientX,s=t.clientY-i.clientY,c=(t.clientX+i.clientX)/2,p=(t.clientY+i.clientY)/2,h=Math.hypot(r,s);return{angle:-(Math.atan2(r,s)*180)/Math.PI,distance:h,origin:[c,p]}}catch(r){}return null}function rM(i){return tM(i).map(t=>t.identifier)}function y_(i,t){const[r,s]=Array.from(i.touches).filter(c=>t.includes(c.identifier));return gy(r,s)}function my(i){const t=A_(i);return g1(i)?t.identifier:t.pointerId}function Mg(i){const t=A_(i);return[t.clientX,t.clientY]}const v_=40,__=800;function E_(i){let{deltaX:t,deltaY:r,deltaMode:s}=i;return s===1?(t*=v_,r*=v_):s===2&&(t*=__,r*=__),[t,r]}function iM(i){var t,r;const{scrollX:s,scrollY:c,scrollLeft:p,scrollTop:h}=i.currentTarget;return[(t=s!=null?s:p)!==null&&t!==void 0?t:0,(r=c!=null?c:h)!==null&&r!==void 0?r:0]}function oM(i){const t={};if("buttons"in i&&(t.buttons=i.buttons),"shiftKey"in i){const{shiftKey:r,altKey:s,metaKey:c,ctrlKey:p}=i;Object.assign(t,{shiftKey:r,altKey:s,metaKey:c,ctrlKey:p})}return t}function m1(i,...t){return typeof i=="function"?i(...t):i}function sM(){}function aM(...i){return i.length===0?sM:i.length===1?i[0]:function(){let t;for(const r of i)t=r.apply(this,arguments)||t;return t}}function b_(i,t){return Object.assign({},t,i||{})}const lM=32;class M_{constructor(t,r,s){this.ctrl=t,this.args=r,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:s,args:c}=this;r[s]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=c,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,s=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=s.from?m1(s.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:s,shared:c}=this;r.args=this.args;let p=0;if(t&&(r.event=t,s.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,c.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,c.locked=!!document.pointerLockElement,Object.assign(c,oM(t)),c.down=c.pressed=c.buttons%2===1||c.touches>0,p=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const W=r._delta.map(Math.abs);qo.addTo(r._distance,W)}this.axisIntent&&this.axisIntent(t);const[h,g]=r._movement,[y,_]=s.threshold,{_step:b,values:T}=r;if(s.hasCustomTransform?(b[0]===!1&&(b[0]=Math.abs(h)>=y&&T[0]),b[1]===!1&&(b[1]=Math.abs(g)>=_&&T[1])):(b[0]===!1&&(b[0]=Math.abs(h)>=y&&Math.sign(h)*y),b[1]===!1&&(b[1]=Math.abs(g)>=_&&Math.sign(g)*_)),r.intentional=b[0]!==!1||b[1]!==!1,!r.intentional)return;const R=[0,0];if(s.hasCustomTransform){const[W,Y]=T;R[0]=b[0]!==!1?W-b[0]:0,R[1]=b[1]!==!1?Y-b[1]:0}else R[0]=b[0]!==!1?h-b[0]:0,R[1]=b[1]!==!1?g-b[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(R);const F=r.offset,G=r._active&&!r._blocked||r.active;G&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=c[this.ingKey]=r._active,t&&(r.first&&("bounds"in s&&(r._bounds=m1(s.bounds,r)),this.setup&&this.setup()),r.movement=R,this.computeOffset()));const[L,O]=r.offset,[[P,D],[z,H]]=r._bounds;r.overflow=[L<P?-1:L>D?1:0,O<z?-1:O>H?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const Q=r._active?s.rubberband||[0,0]:[0,0];if(r.offset=u_(r._bounds,r.offset,Q),r.delta=qo.sub(r.offset,F),this.computeMovement(),G&&(!r.last||p>lM)){r.delta=qo.sub(r.offset,F);const W=r.delta.map(Math.abs);qo.addTo(r.distance,W),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&p>0&&(r.velocity=[W[0]/p,W[1]/p],r.timeDelta=p)}}emit(){const t=this.state,r=this.shared,s=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!s.triggerAllEvents)return;const c=this.handler(Es(Es(Es({},r),t),{},{[this.aliasKey]:t.values}));c!==void 0&&(t.memo=c)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function cM([i,t],r){const s=Math.abs(i),c=Math.abs(t);if(s>c&&s>r)return"x";if(c>s&&c>r)return"y"}class Bm extends M_{constructor(...t){super(...t),ea(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=qo.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=qo.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,s=this.config;if(!r.axis&&t){const c=typeof s.axisThreshold=="object"?s.axisThreshold[m_(t)]:s.axisThreshold;r.axis=cM(r._movement,c)}r._blocked=(s.lockDirection||!!s.axis)&&!r.axis||!!s.axis&&s.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const pM=i=>i,x_=.15,C_={enabled(i=!0){return i},eventOptions(i,t,r){return Es(Es({},r.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[x_,x_];case!1:return[0,0];default:return qo.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return qo.toVector(i)},transform(i,t,r){const s=i||r.shared.transform;return this.hasCustomTransform=!!s,s||pM},threshold(i){return qo.toVector(i,0)}},Bi=0,Xn=Es(Es({},C_),{},{axis(i,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(i=Bi){return i},bounds(i={}){if(typeof i=="function")return p=>Xn.bounds(i(p));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:t=-1/0,right:r=1/0,top:s=-1/0,bottom:c=1/0}=i;return[[t,r],[s,c]]}}),Oc={ArrowRight:(i,t=1)=>[i*t,0],ArrowLeft:(i,t=1)=>[-1*i*t,0],ArrowUp:(i,t=1)=>[0,-1*i*t],ArrowDown:(i,t=1)=>[0,i*t]};class Rm extends Bm{constructor(...t){super(...t),ea(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const r=t._bounds.getBoundingClientRect(),s=t.currentTarget.getBoundingClientRect(),c={left:r.left-s.left+t.offset[0],right:r.right-s.right+t.offset[0],top:r.top-s.top+t.offset[1],bottom:r.bottom-s.bottom+t.offset[1]};t._bounds=Xn.bounds(c)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const r=this.config,s=this.state;if(t.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):r.pointerButtons!==-1&&r.pointerButtons!==t.buttons))return;const c=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(c&&c.size>1&&s._pointerActive)&&(this.start(t),this.setupPointer(t),s._pointerId=my(t),s._pointerActive=!0,this.computeValues(Mg(t)),this.computeInitial(),r.preventScrollAxis&&m_(t)!=="mouse"?(s._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const r=this.state,s=this.config;if(!r._pointerActive)return;const c=my(t);if(r._pointerId!==void 0&&c!==r._pointerId)return;const p=Mg(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=qo.sub(p,r._values),this.computeValues(p)),qo.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(s.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(g){}const r=this.state,s=this.config;if(!r._active||!r._pointerActive)return;const c=my(t);if(r._pointerId!==void 0&&c!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[p,h]=r._distance;if(r.tap=p<=s.tapsThreshold&&h<=s.tapsThreshold,r.tap&&s.filterTaps)r._force=!0;else{const[g,y]=r._delta,[_,b]=r._movement,[T,R]=s.swipe.velocity,[F,G]=s.swipe.distance,L=s.swipe.duration;if(r.elapsedTime<L){const O=Math.abs(g/r.timeDelta),P=Math.abs(y/r.timeDelta);O>T&&Math.abs(_)>F&&(r.swipe[0]=Math.sign(g)),P>R&&Math.abs(b)>G&&(r.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const r=this.config,s=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,S_(t);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const r=Oc[t.key];if(r){const s=this.state,c=t.shiftKey?10:t.altKey?.1:1;this.start(t),s._delta=r(this.config.keyboardDisplacement,c),s._keyboardActive=!0,qo.addTo(s._movement,s._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Oc&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function S_(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const xg=typeof window!="undefined"&&window.document&&window.document.createElement;function w_(){return xg&&"ontouchstart"in window}function Ay(){return w_()||xg&&window.navigator.maxTouchPoints>1}function T_(){return xg&&"onpointerdown"in window}function B_(){return xg&&"exitPointerLock"in window.document}function Im(){try{return"constructor"in GestureEvent}catch(i){return!1}}const $a={isBrowser:xg,gesture:Im(),touch:Ay(),touchscreen:Ay(),pointer:T_(),pointerLock:B_()},yy=250,ah=180,A1=.5,vy=50,y1=250,lh=10,ch={mouse:0,touch:0,pen:8},_y=Es(Es({},Xn),{},{device(i,t,{pointer:{touch:r=!1,lock:s=!1,mouse:c=!1}={}}){return this.pointerLock=s&&$a.pointerLock,$a.touch&&r?"touch":this.pointerLock?"mouse":$a.pointer&&!c?"pointer":$a.touch?"touch":"mouse"},preventScrollAxis(i,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&i?yy:void 0,!(!$a.touchscreen||r===!1))return i||(r!==void 0?"y":void 0)},pointerCapture(i,t,{pointer:{capture:r=!0,buttons:s=1,keys:c=!0}={}}){return this.pointerButtons=s,this.keys=c,!this.pointerLock&&this.device==="pointer"&&r},threshold(i,t,{filterTaps:r=!1,tapsThreshold:s=3,axis:c=void 0}){const p=qo.toVector(i,r?s:c?1:0);return this.filterTaps=r,this.tapsThreshold=s,p},swipe({velocity:i=A1,distance:t=vy,duration:r=y1}={}){return{velocity:this.transform(qo.toVector(i)),distance:this.transform(qo.toVector(t)),duration:r}},delay(i=0){switch(i){case!0:return ah;case!1:return 0;default:return i}},axisThreshold(i){return i?Es(Es({},ch),i):ch},keyboardDisplacement(i=lh){return i}});function Fm(i){const[t,r]=i.overflow,[s,c]=i._delta,[p,h]=i._direction;(t<0&&s>0&&p<0||t>0&&s<0&&p>0)&&(i._movement[0]=i._movementBound[0]),(r<0&&c>0&&h<0||r>0&&c<0&&h>0)&&(i._movement[1]=i._movementBound[1])}const R_=30,Ey=100;class Om extends M_{constructor(...t){super(...t),ea(this,"ingKey","pinching"),ea(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:s}=this.state;t==="wheel"?this.state.offset=qo.add(r,s):this.state.offset=[(1+r[0])*s[0],r[1]+s[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,s]=t._movement;if(!t.axis){const c=Math.abs(r)*R_-Math.abs(s);c<0?t.axis="angle":c>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,s=this.ctrl.touchIds;if(r._active&&r._touchIds.every(p=>s.has(p))||s.size<2)return;this.start(t),r._touchIds=Array.from(s).slice(0,2);const c=y_(t,r._touchIds);c&&this.pinchStart(t,c)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,s=r._pointerEvents,c=this.ctrl.pointerIds;if(r._active&&Array.from(s.keys()).every(h=>c.has(h))||(s.size<2&&s.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const p=gy(...Array.from(s.values()));p&&this.pinchStart(t,p)}pinchStart(t,r){const s=this.state;s.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=y_(t,this.state._touchIds);r&&this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const s=gy(...Array.from(r.values()));s&&this.pinchMove(t,s)}pinchMove(t,r){const s=this.state,c=s._values[1],p=r.angle-c;let h=0;Math.abs(p)>270&&(h+=Math.sign(p)),this.computeValues([r.distance,r.angle-360*h]),s.origin=r.origin,s.turns=h,s._movement=[s._values[0]/s._initial[0]-1,s._values[1]-s._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(s){}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const s=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=qo.sub(r._movement,s),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&!t[r]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const s=this.state;s._delta=[-E_(t)[1]/Ey*s.offset[0],0],qo.addTo(s._movement,s._delta),Fm(s),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this)),t("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const I_=Es(Es({},C_),{},{device(i,t,{shared:r,pointer:{touch:s=!1}={}}){if(r.target&&!$a.touch&&$a.gesture)return"gesture";if($a.touch&&s)return"touch";if($a.touchscreen){if($a.pointer)return"pointer";if($a.touch)return"touch"}},bounds(i,t,{scaleBounds:r={},angleBounds:s={}}){const c=h=>{const g=b_(m1(r,h),{min:-1/0,max:1/0});return[g.min,g.max]},p=h=>{const g=b_(m1(s,h),{min:-1/0,max:1/0});return[g.min,g.max]};return typeof r!="function"&&typeof s!="function"?[c(),p()]:h=>[c(h),p(h)]},threshold(i,t,r){return this.lockDirection=r.axis==="lock",qo.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});class by extends Bm{constructor(...t){super(...t),ea(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(Mg(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const r=Mg(t),s=this.state;s._delta=qo.sub(r,s._values),qo.addTo(s._movement,s._delta),this.computeValues(r),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const My=Es(Es({},Xn),{},{mouseOnly:(i=!0)=>i});class v1 extends Bm{constructor(...t){super(...t),ea(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const r=this.state,s=iM(t);r._delta=qo.sub(s,r._values),qo.addTo(r._movement,r._delta),this.computeValues(s),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const F_=Xn;class O_ extends Bm{constructor(...t){super(...t),ea(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=E_(t),qo.addTo(r._movement,r._delta),Fm(r),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const D_=Xn;class P_ extends Bm{constructor(...t){super(...t),ea(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(Mg(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const s=Mg(t);r._movement=r._delta=qo.sub(s,r._values),this.computeValues(s),this.compute(t),r.delta=r.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const L_=Es(Es({},Xn),{},{mouseOnly:(i=!0)=>i}),_1=new Map,E1=new Map;function k_(i){_1.set(i.key,i.engine),E1.set(i.key,i.resolver)}const z_={key:"drag",engine:Rm,resolver:_y},xy={key:"hover",engine:P_,resolver:L_},Cy={key:"move",engine:by,resolver:My},Sy={key:"pinch",engine:Om,resolver:I_},wy={key:"scroll",engine:v1,resolver:F_},Ty={key:"wheel",engine:O_,resolver:D_};function By(i,t){if(i==null)return{};var r={},s=Object.keys(i),c,p;for(p=0;p<s.length;p++)c=s[p],!(t.indexOf(c)>=0)&&(r[c]=i[c]);return r}function Ry(i,t){if(i==null)return{};var r=By(i,t),s,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);for(c=0;c<p.length;c++)s=p[c],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(r[s]=i[s])}return r}const Iy={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=$a.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:t=!1}={}){return{passive:i,capture:t}},transform(i){return i}},Fy=["target","eventOptions","window","enabled","transform"];function xu(i={},t){const r={};for(const[s,c]of Object.entries(t))switch(typeof c){case"function":r[s]=c.call(r,i[s],s,i);break;case"object":r[s]=xu(i[s],c);break;case"boolean":c&&(r[s]=i[s]);break}return r}function Aa(i,t,r={}){const s=i,{target:c,eventOptions:p,window:h,enabled:g,transform:y}=s,_=Ry(s,Fy);if(r.shared=xu({target:c,eventOptions:p,window:h,enabled:g,transform:y},Iy),t){const b=E1.get(t);r[t]=xu(Es({shared:r.shared},_),b)}else for(const b in _){const T=E1.get(b);T&&(r[b]=xu(Es({shared:r.shared},_[b]),T))}return r}class ta{constructor(t,r){ea(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,s,c,p){const h=this._listeners,g=eM(r,s),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},_=Es(Es({},y),p);t.addEventListener(g,c,_);const b=()=>{t.removeEventListener(g,c,_),h.delete(b)};return h.add(b),b}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class Dm{constructor(){ea(this,"_timeouts",new Map)}add(t,r,s=140,...c){this.remove(t),this._timeouts.set(t,window.setTimeout(r,s,...c))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class G_{constructor(t){ea(this,"gestures",new Set),ea(this,"_targetEventStore",new ta(this)),ea(this,"gestureEventStores",{}),ea(this,"gestureTimeoutStores",{}),ea(this,"handlers",{}),ea(this,"config",{}),ea(this,"pointerIds",new Set),ea(this,"touchIds",new Set),ea(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),U_(this,t)}setEventIds(t){if(g1(t))return this.touchIds=new Set(rM(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=Aa(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,s={};let c;if(!(r.target&&(c=r.target(),!c))){if(r.enabled){for(const h of this.gestures){const g=this.config[h],y=Oy(s,g.eventOptions,!!c);if(g.enabled){const _=_1.get(h);new _(this,t,h).bind(y)}}const p=Oy(s,r.eventOptions,!!c);for(const h in this.nativeHandlers)p(h,"",g=>this.nativeHandlers[h](Es(Es({},this.state.shared),{},{event:g,args:t})),void 0,!0)}for(const p in s)s[p]=aM(...s[p]);if(!c)return s;for(const p in s){const{device:h,capture:g,passive:y}=$b(p);this._targetEventStore.add(c,h,"",s[p],{capture:g,passive:y})}}}}function lf(i,t){i.gestures.add(t),i.gestureEventStores[t]=new ta(i,t),i.gestureTimeoutStores[t]=new Dm}function U_(i,t){t.drag&&lf(i,"drag"),t.wheel&&lf(i,"wheel"),t.scroll&&lf(i,"scroll"),t.move&&lf(i,"move"),t.pinch&&lf(i,"pinch"),t.hover&&lf(i,"hover")}const Oy=(i,t,r)=>(s,c,p,h={},g=!1)=>{var y,_;const b=(y=h.capture)!==null&&y!==void 0?y:t.capture,T=(_=h.passive)!==null&&_!==void 0?_:t.passive;let R=g?s:qb(s,c,b);r&&T&&(R+="Passive"),i[R]=i[R]||[],i[R].push(p)},N_=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function H_(i){const t={},r={},s=new Set;for(let c in i)N_.test(c)?(s.add(RegExp.lastMatch),r[c]=i[c]):t[c]=i[c];return[r,t,s]}function cf(i,t,r,s,c,p){if(!i.has(r)||!_1.has(s))return;const h=r+"Start",g=r+"End",y=_=>{let b;return _.first&&h in t&&t[h](_),r in t&&(b=t[r](_)),_.last&&g in t&&t[g](_),b};c[s]=y,p[s]=p[s]||{}}function j_(i,t){const[r,s,c]=H_(i),p={};return cf(c,r,"onDrag","drag",p,t),cf(c,r,"onWheel","wheel",p,t),cf(c,r,"onScroll","scroll",p,t),cf(c,r,"onPinch","pinch",p,t),cf(c,r,"onMove","move",p,t),cf(c,r,"onHover","hover",p,t),{handlers:p,config:t,nativeHandlers:s}}function ph(i,t={},r,s){const c=d.useMemo(()=>new G_(i),[]);if(c.applyHandlers(i,s),c.applyConfig(t,r),d.useEffect(c.effect.bind(c)),d.useEffect(()=>c.clean.bind(c),[]),t.target===void 0)return c.bind.bind(c)}function uM(i,t){return registerAction(dragAction),ph({drag:i},t||{},"drag")}function dM(i,t){return registerAction(pinchAction),ph({pinch:i},t||{},"pinch")}function hM(i,t){return registerAction(wheelAction),ph({wheel:i},t||{},"wheel")}function fM(i,t){return registerAction(scrollAction),ph({scroll:i},t||{},"scroll")}function gM(i,t){return registerAction(moveAction),ph({move:i},t||{},"move")}function mM(i,t){return registerAction(hoverAction),ph({hover:i},t||{},"hover")}function W_(i){return i.forEach(k_),function(r,s){const{handlers:c,nativeHandlers:p,config:h}=j_(r,s||{});return ph(c,h,void 0,p)}}function V_(i,t){return W_([z_,Sy,wy,Ty,Cy,xy])(i,t||{})}function Q_({enabled:i=!0,snap:t,global:r,domElement:s,cursor:c=!0,children:p,speed:h=1,rotation:g=[0,0,0],zoom:y=1,polar:_=[0,Math.PI/2],azimuth:b=[-1/0,1/0],config:T={mass:1,tension:170,friction:26}}){const R=(0,E.z)(W=>W.events),F=(0,E.z)(W=>W.gl),G=s||R.connected||F.domElement,{size:L}=(0,E.z)(),O=d.useMemo(()=>[g[0]+_[0],g[0]+_[1]],[g[0],_[0],_[1]]),P=d.useMemo(()=>[g[1]+b[0],g[1]+b[1]],[g[1],b[0],b[1]]),D=d.useMemo(()=>[o.MathUtils.clamp(g[0],...O),o.MathUtils.clamp(g[1],...P),g[2]],[g[0],g[1],g[2],O,P]),[z,H]=V(()=>({scale:1,rotation:D,config:T}));d.useEffect(()=>void H.start({scale:1,rotation:D,config:T}),[D]),d.useEffect(()=>{if(r&&c&&i)return G.style.cursor="grab",F.domElement.style.cursor="",()=>{G.style.cursor="default",F.domElement.style.cursor="default"}},[r,c,G,i]);const Q=V_({onHover:({last:W})=>{c&&!r&&i&&(G.style.cursor=W?"auto":"grab")},onDrag:({down:W,delta:[Y,K],memo:[ie,ce]=z.rotation.animation.to||D})=>{if(!i)return[K,Y];c&&(G.style.cursor=W?"grabbing":"grab"),Y=o.MathUtils.clamp(ce+Y/L.width*Math.PI*h,...P),K=o.MathUtils.clamp(ie+K/L.height*Math.PI*h,...O);const ge=t&&!W&&typeof t!="boolean"?t:T;return H.start({scale:W&&K>O[1]/2?y:1,rotation:t&&!W?D:[K,Y,0],config:ae=>ae==="scale"?Xo(jn({},ge),{friction:ge.friction*3}):ge}),[K,Y]}},{target:r?G:void 0});return d.createElement(c_.group,(0,w.Z)({},Q==null?void 0:Q(),z),p)}var Zl=A(25108),X_=Object.defineProperty,Dy=Object.getOwnPropertySymbols,K_=Object.prototype.hasOwnProperty,Y_=Object.prototype.propertyIsEnumerable,Py=(i,t,r)=>t in i?X_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,J_=(i,t)=>{for(var r in t||(t={}))K_.call(t,r)&&Py(i,r,t[r]);if(Dy)for(var r of Dy(t))Y_.call(t,r)&&Py(i,r,t[r]);return i};const AM=(i,t)=>(r,s,c)=>(c.dispatch=p=>(r(h=>i(h,p),!1,p),p),c.dispatchFromDevtools=!0,J_({dispatch:(...p)=>c.dispatch(...p)},t));function yM(i,t){return(r,s,c)=>{var p;let h=!1;typeof t=="string"&&!h&&(Zl.warn("[zustand devtools middleware]: passing `name` as directly will be not allowed in next majorpass the `name` in an object `{ name: ... }` instead"),h=!0);const g=t===void 0?{name:void 0,anonymousActionType:void 0}:typeof t=="string"?{name:t}:t;typeof((p=g==null?void 0:g.serialize)==null?void 0:p.options)!="undefined"&&Zl.warn("[zustand devtools middleware]: `serialize.options` is deprecated, just use `serialize`");let y;try{y=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(L){}if(!y)return typeof window!="undefined"&&Zl.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),i(r,s,c);let _=Object.create(y.connect(g)),b=!1;Object.defineProperty(c,"devtools",{get:()=>(b||(Zl.warn("[zustand devtools middleware] `devtools` property on the store is deprecated it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),b=!0),_),set:L=>{b||(Zl.warn("[zustand devtools middleware] `api.devtools` is deprecated, it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),b=!0),_=L}});let T=!1;Object.defineProperty(_,"prefix",{get:()=>(T||(Zl.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+g.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0),""),set:()=>{T||(Zl.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+g.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0)}});let R=!0;c.setState=(L,O,P)=>{r(L,O),R&&_.send(P===void 0?{type:g.anonymousActionType||"anonymous"}:typeof P=="string"?{type:P}:P,s())};const F=(...L)=>{const O=R;R=!1,r(...L),R=O},G=i(c.setState,s,c);if(_.init(G),c.dispatchFromDevtools&&typeof c.dispatch=="function"){let L=!1;const O=c.dispatch;c.dispatch=(...P)=>{P[0].type==="__setState"&&!L&&(Zl.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),L=!0),O(...P)}}return _.subscribe(L=>{var O;switch(L.type){case"ACTION":if(typeof L.payload!="string"){Zl.error("[zustand devtools middleware] Unsupported action format");return}return b1(L.payload,P=>{if(P.type==="__setState"){F(P.state);return}c.dispatchFromDevtools&&typeof c.dispatch=="function"&&c.dispatch(P)});case"DISPATCH":switch(L.payload.type){case"RESET":return F(G),_.init(c.getState());case"COMMIT":return _.init(c.getState());case"ROLLBACK":return b1(L.state,P=>{F(P),_.init(c.getState())});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return b1(L.state,P=>{F(P)});case"IMPORT_STATE":{const{nextLiftedState:P}=L.payload,D=(O=P.computedStates.slice(-1)[0])==null?void 0:O.state;if(!D)return;F(D),_.send(null,P);return}case"PAUSE_RECORDING":return R=!R}return}}),G}}const b1=(i,t)=>{let r;try{r=JSON.parse(i)}catch(s){Zl.error("[zustand devtools middleware] Could not parse the received json",s)}r!==void 0&&t(r)},q_=i=>(t,r,s)=>{const c=s.subscribe;return s.subscribe=(h,g,y)=>{let _=h;if(g){const b=(y==null?void 0:y.equalityFn)||Object.is;let T=h(s.getState());_=R=>{const F=h(R);if(!b(T,F)){const G=T;g(T=F,G)}},y!=null&&y.fireImmediately&&g(T,T)}return c(_)},i(t,r,s)},vM=(i,t)=>(r,s,c)=>Object.assign({},i,t(r,s,c));var Z_=Object.defineProperty,Ly=Object.getOwnPropertySymbols,$_=Object.prototype.hasOwnProperty,e3=Object.prototype.propertyIsEnumerable,ky=(i,t,r)=>t in i?Z_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,pf=(i,t)=>{for(var r in t||(t={}))$_.call(t,r)&&ky(i,r,t[r]);if(Ly)for(var r of Ly(t))e3.call(t,r)&&ky(i,r,t[r]);return i};const Pm=i=>t=>{try{const r=i(t);return r instanceof Promise?r:{then(s){return Pm(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return Pm(s)(r)}}}},_M=(i,t)=>(r,s,c)=>{let p=pf({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:O=>O,version:0,merge:(O,P)=>pf(pf({},P),O)},t);(p.blacklist||p.whitelist)&&Zl.warn(`The ${p.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let h=!1;const g=new Set,y=new Set;let _;try{_=p.getStorage()}catch(O){}if(_)_.removeItem||Zl.warn(`[zustand persist middleware] The given storage for item '${p.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return i((...O)=>{Zl.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),r(...O)},s,c);const b=Pm(p.serialize),T=()=>{const O=p.partialize(pf({},s()));p.whitelist&&Object.keys(O).forEach(z=>{var H;!((H=p.whitelist)!=null&&H.includes(z))&&delete O[z]}),p.blacklist&&p.blacklist.forEach(z=>delete O[z]);let P;const D=b({state:O,version:p.version}).then(z=>_.setItem(p.name,z)).catch(z=>{P=z});if(P)throw P;return D},R=c.setState;c.setState=(O,P)=>{R(O,P),T()};const F=i((...O)=>{r(...O),T()},s,c);let G;const L=()=>{var O;if(!_)return;h=!1,g.forEach(D=>D(s()));const P=((O=p.onRehydrateStorage)==null?void 0:O.call(p,s()))||void 0;return Pm(_.getItem.bind(_))(p.name).then(D=>{if(D)return p.deserialize(D)}).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==p.version){if(p.migrate)return p.migrate(D.state,D.version);Zl.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return D.state}).then(D=>{var z;return G=p.merge(D,(z=s())!=null?z:F),r(G,!0),T()}).then(()=>{P==null||P(G,void 0),h=!0,y.forEach(D=>D(G))}).catch(D=>{P==null||P(void 0,D)})};return c.persist={setOptions:O=>{p=pf(pf({},p),O),O.getStorage&&(_=O.getStorage())},clearStorage:()=>{var O;(O=_==null?void 0:_.removeItem)==null||O.call(_,p.name)},rehydrate:()=>L(),hasHydrated:()=>h,onHydrate:O=>(g.add(O),()=>{g.delete(O)}),onFinishHydration:O=>(y.add(O),()=>{y.delete(O)})},L(),G||F},zy=d.createContext(null);function t3({map:i,children:t,onChange:r,domElement:s}){const c=i.map(y=>y.name+y.keys).join("-"),p=d.useMemo(()=>(0,Rt.Z)(q_(()=>i.reduce((y,_)=>Xo(jn({},y),{[_.name]:!1}),{}))),[c]),h=d.useMemo(()=>[p.subscribe,p.getState,p],[c]),g=p.setState;return d.useEffect(()=>{const _=i.map(({name:F,keys:G,up:L})=>({keys:G,up:L,fn:O=>{g({[F]:O}),r&&r(F,O,h[1]())}})).reduce((F,{keys:G,fn:L,up:O=!0})=>(G.forEach(P=>F[P]={fn:L,pressed:!1,up:O}),F),{}),b=({key:F,code:G})=>{const L=_[F]||_[G];if(!L)return;const{fn:O,pressed:P,up:D}=L;L.pressed=!0,(D||!P)&&O(!0)},T=({key:F,code:G})=>{const L=_[F]||_[G];if(!L)return;const{fn:O,up:P}=L;L.pressed=!1,P&&O(!1)},R=s||window;return R.addEventListener("keydown",b,{passive:!0}),R.addEventListener("keyup",T,{passive:!0}),()=>{R.removeEventListener("keydown",b),R.removeEventListener("keyup",T)}},[s,c]),d.createElement(zy.Provider,{value:h,children:t})}function n3(i){const[t,r,s]=d.useContext(zy);return i?s(i):[t,r]}var r3=A(25108);const M1=new o.Frustum,Cg=new o.Vector3,uh=new o.Vector3,ip=new o.Vector3,Dc=new o.Vector3,op=new o.Vector3,Cu=new o.Vector3,Su=new o.Vector3,Sg=new o.Vector3,uf=new o.Vector3,wg=new o.Vector3,Lm=new o.Vector3,Tg=new o.Vector3,Bg=new o.Vector3,Rg=new o.Vector3;class Ig{constructor(t,r,s){this.camera=t,this.scene=r,this.startPoint=new o.Vector3,this.endPoint=new o.Vector3,this.collection=[],this.deep=s||Number.MAX_VALUE}select(t,r){return this.startPoint=t||this.startPoint,this.endPoint=r||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(M1,this.scene),this.collection}updateFrustum(t,r){if(t=t||this.startPoint,r=r||this.endPoint,t.x===r.x&&(r.x+=Number.EPSILON),t.y===r.y&&(r.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){uh.copy(t),uh.x=Math.min(t.x,r.x),uh.y=Math.max(t.y,r.y),r.x=Math.max(t.x,r.x),r.y=Math.min(t.y,r.y),ip.setFromMatrixPosition(this.camera.matrixWorld),Dc.copy(uh),op.set(r.x,uh.y,0),Cu.copy(r),Su.set(uh.x,r.y,0),Dc.unproject(this.camera),op.unproject(this.camera),Cu.unproject(this.camera),Su.unproject(this.camera),Tg.copy(Dc).sub(ip),Bg.copy(op).sub(ip),Rg.copy(Cu).sub(ip),Tg.normalize(),Bg.normalize(),Rg.normalize(),Tg.multiplyScalar(this.deep),Bg.multiplyScalar(this.deep),Rg.multiplyScalar(this.deep),Tg.add(ip),Bg.add(ip),Rg.add(ip);var s=M1.planes;s[0].setFromCoplanarPoints(ip,Dc,op),s[1].setFromCoplanarPoints(ip,op,Cu),s[2].setFromCoplanarPoints(Cu,Su,ip),s[3].setFromCoplanarPoints(Su,Dc,ip),s[4].setFromCoplanarPoints(op,Cu,Su),s[5].setFromCoplanarPoints(Rg,Bg,Tg),s[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const c=Math.min(t.x,r.x),p=Math.max(t.y,r.y),h=Math.max(t.x,r.x),g=Math.min(t.y,r.y);Dc.set(c,p,-1),op.set(h,p,-1),Cu.set(h,g,-1),Su.set(c,g,-1),Sg.set(c,p,1),uf.set(h,p,1),wg.set(h,g,1),Lm.set(c,g,1),Dc.unproject(this.camera),op.unproject(this.camera),Cu.unproject(this.camera),Su.unproject(this.camera),Sg.unproject(this.camera),uf.unproject(this.camera),wg.unproject(this.camera),Lm.unproject(this.camera);var s=M1.planes;s[0].setFromCoplanarPoints(Dc,Sg,uf),s[1].setFromCoplanarPoints(op,uf,wg),s[2].setFromCoplanarPoints(wg,Lm,Su),s[3].setFromCoplanarPoints(Lm,Sg,Dc),s[4].setFromCoplanarPoints(op,Cu,Su),s[5].setFromCoplanarPoints(wg,uf,Sg),s[5].normal.multiplyScalar(-1)}else r3.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(t,r){if((r.isMesh||r.isLine||r.isPoints)&&r.material!==void 0&&(r.geometry.boundingSphere===null&&r.geometry.computeBoundingSphere(),Cg.copy(r.geometry.boundingSphere.center),Cg.applyMatrix4(r.matrixWorld),t.containsPoint(Cg)&&this.collection.push(r)),r.children.length>0)for(let s=0;s<r.children.length;s++)this.searchChildInFrustum(t,r.children[s])}}function Gy(i,t){if(Object.is(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;const r=Object.keys(i);if(r.length!==Object.keys(t).length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Object.is(i[r[s]],t[r[s]]))return!1;return!0}const x1=d.createContext([]);function i3(_){var b=_,{box:i,multiple:t,children:r,onChange:s,onChangePointerUp:c,border:p="1px solid #55aaff",backgroundColor:h="rgba(75, 160, 255, 0.1)",filter:g=T=>T}=b,y=An(b,["box","multiple","children","onChange","onChangePointerUp","border","backgroundColor","filter"]);const[T,R]=d.useState(!1),{setEvents:F,camera:G,raycaster:L,gl:O,controls:P,size:D,get:z}=(0,E.z)(),[H,Q]=d.useState(!1),[W,Y]=d.useReducer((ge,{object:ae,shift:xe})=>ae===void 0?[]:Array.isArray(ae)?ae:xe?ge.includes(ae)?ge.filter(ve=>ve!==ae):[ae,...ge]:ge[0]===ae?[]:[ae],[]);d.useEffect(()=>{T?s==null||s(W):c==null||c(W)},[W,T]);const K=d.useCallback(ge=>{ge.stopPropagation(),Y({object:g([ge.object])[0],shift:t&&ge.shiftKey})},[]),ie=d.useCallback(ge=>!H&&Y({}),[H]),ce=d.useRef(null);return d.useEffect(()=>{if(!i||!t)return;const ge=new Ig(G,ce.current),ae=document.createElement("div");ae.style.pointerEvents="none",ae.style.border=p,ae.style.backgroundColor=h,ae.style.position="fixed";const xe=new o.Vector2,ve=new o.Vector2,Be=new o.Vector2,Ue=z().events.enabled,Ie=P==null?void 0:P.enabled;let Ne=!1;function Le(ye,ze){const{offsetX:Mt,offsetY:At}=ye,{width:gt,height:ot}=D;ze.set(Mt/gt*2-1,-(At/ot)*2+1)}function Ye(ye){var ze;P&&(P.enabled=!1),F({enabled:!1}),R(Ne=!0),(ze=O.domElement.parentElement)==null||ze.appendChild(ae),ae.style.left=`${ye.clientX}px`,ae.style.top=`${ye.clientY}px`,ae.style.width="0px",ae.style.height="0px",xe.x=ye.clientX,xe.y=ye.clientY}function Ce(ye){Be.x=Math.max(xe.x,ye.clientX),Be.y=Math.max(xe.y,ye.clientY),ve.x=Math.min(xe.x,ye.clientX),ve.y=Math.min(xe.y,ye.clientY),ae.style.left=`${ve.x}px`,ae.style.top=`${ve.y}px`,ae.style.width=`${Be.x-ve.x}px`,ae.style.height=`${Be.y-ve.y}px`}function Ee(){if(Ne){var ye;P&&(P.enabled=Ie),F({enabled:Ue}),R(Ne=!1),(ye=ae.parentElement)==null||ye.removeChild(ae)}}function _e(ye){ye.shiftKey&&(Ye(ye),Le(ye,ge.startPoint))}let oe=[];function me(ye){if(Ne){Ce(ye),Le(ye,ge.endPoint);const ze=ge.select().sort(Mt=>Mt.uuid).filter(Mt=>Mt.isMesh);Gy(ze,oe)||(oe=ze,Y({object:g(ze)}))}}function Te(ye){Ne&&Ee()}return document.addEventListener("pointerdown",_e,{passive:!0}),document.addEventListener("pointermove",me,{passive:!0,capture:!0}),document.addEventListener("pointerup",Te,{passive:!0}),()=>{document.removeEventListener("pointerdown",_e),document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",Te)}},[D.width,D.height,L,G,P,O]),d.createElement("group",(0,w.Z)({ref:ce,onClick:K,onPointerOver:()=>Q(!0),onPointerOut:()=>Q(!1),onPointerMissed:ie},y),d.createElement(x1.Provider,{value:W},r))}function C1(){return d.useContext(x1)}const Uy=d.forwardRef(function(g,h){var y=g,{follow:t=!0,lockX:r=!1,lockY:s=!1,lockZ:c=!1}=y,p=An(y,["follow","lockX","lockY","lockZ"]);const _=d.useRef();return(0,E.A)(({camera:b})=>{if(!t||!_.current)return;const T=_.current.rotation.clone();b.getWorldQuaternion(_.current.quaternion),r&&(_.current.rotation.x=T.x),s&&(_.current.rotation.y=T.y),c&&(_.current.rotation.z=T.z)}),d.createElement("group",(0,w.Z)({ref:Dn([_,h])},p))}),o3=d.forwardRef((c,s)=>{var p=c,{children:i,depth:t=-1}=p,r=An(p,["children","depth"]);const h=d.useRef(null);return(0,E.A)(({camera:g})=>{h.current.quaternion.copy(g.quaternion),h.current.position.copy(g.position)}),d.createElement("group",(0,w.Z)({ref:Dn([s,h])},r),d.createElement("group",{"position-z":-t},i))});var Ny=A(25108);const S1=new o.Box3,km=new o.Vector3;class Fg extends o.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],r=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],s=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(s),this.setAttribute("position",new o.Float32BufferAttribute(t,3)),this.setAttribute("uv",new o.Float32BufferAttribute(r,2))}applyMatrix4(t){const r=this.attributes.instanceStart,s=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(t),s.applyMatrix4(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const s=new o.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceStart",new o.InterleavedBufferAttribute(s,3,0)),this.setAttribute("instanceEnd",new o.InterleavedBufferAttribute(s,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const s=new o.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceColorStart",new o.InterleavedBufferAttribute(s,3,0)),this.setAttribute("instanceColorEnd",new o.InterleavedBufferAttribute(s,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new o.WireframeGeometry(t.geometry)),this}fromLineSegments(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new o.Box3);const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;t!==void 0&&r!==void 0&&(this.boundingBox.setFromBufferAttribute(t),S1.setFromBufferAttribute(r),this.boundingBox.union(S1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new o.Sphere),this.boundingBox===null&&this.computeBoundingBox();const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(t!==void 0&&r!==void 0){const s=this.boundingSphere.center;this.boundingBox.getCenter(s);let c=0;for(let p=0,h=t.count;p<h;p++)km.fromBufferAttribute(t,p),c=Math.max(c,s.distanceToSquared(km)),km.fromBufferAttribute(r,p),c=Math.max(c,s.distanceToSquared(km));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&Ny.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return Ny.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}class zm extends o.ShaderMaterial{constructor(t){super({type:"LineMaterial",uniforms:o.UniformsUtils.clone(o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new o.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <encodings_fragment>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(r){this.uniforms.diffuse.value=r}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(r){r===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(r){this.uniforms.linewidth.value=r}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(r){!!r!="USE_DASH"in this.defines&&(this.needsUpdate=!0),r===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(r){this.uniforms.dashScale.value=r}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(r){this.uniforms.dashSize.value=r}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(r){this.uniforms.dashOffset.value=r}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(r){this.uniforms.gapSize.value=r}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(r){this.uniforms.resolution.value.copy(r)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(r){!!r!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),r===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}var s3=A(25108);const Hy=new o.Vector3,jy=new o.Vector3,el=new o.Vector4,tl=new o.Vector4,kp=new o.Vector4,w1=new o.Vector3,T1=new o.Matrix4,ml=new o.Line3,Wy=new o.Vector3,Gm=new o.Box3,Og=new o.Sphere,sp=new o.Vector4;let zp,B1,Vy,dh;function Qy(i,t,r){return sp.set(0,0,-t,1).applyMatrix4(i.projectionMatrix),sp.multiplyScalar(1/sp.w),sp.x=dh/r.width,sp.y=dh/r.height,sp.applyMatrix4(i.projectionMatrixInverse),sp.multiplyScalar(1/sp.w),Math.abs(Math.max(sp.x,sp.y))}function a3(i,t){for(let r=0,s=B1.count;r<s;r++){ml.start.fromBufferAttribute(B1,r),ml.end.fromBufferAttribute(Vy,r);const c=new o.Vector3,p=new o.Vector3;zp.distanceSqToSegment(ml.start,ml.end,p,c),p.distanceTo(c)<dh*.5&&t.push({point:p,pointOnLine:c,distance:zp.origin.distanceTo(p),object:i,face:null,faceIndex:r,uv:null,uv2:null})}}function Xy(i,t,r){const s=t.projectionMatrix,p=i.material.resolution,h=i.matrixWorld,g=i.geometry,y=g.attributes.instanceStart,_=g.attributes.instanceEnd,b=-t.near;zp.at(1,kp),kp.w=1,kp.applyMatrix4(t.matrixWorldInverse),kp.applyMatrix4(s),kp.multiplyScalar(1/kp.w),kp.x*=p.x/2,kp.y*=p.y/2,kp.z=0,w1.copy(kp),T1.multiplyMatrices(t.matrixWorldInverse,h);for(let T=0,R=y.count;T<R;T++){if(el.fromBufferAttribute(y,T),tl.fromBufferAttribute(_,T),el.w=1,tl.w=1,el.applyMatrix4(T1),tl.applyMatrix4(T1),el.z>b&&tl.z>b)continue;if(el.z>b){const D=el.z-tl.z,z=(el.z-b)/D;el.lerp(tl,z)}else if(tl.z>b){const D=tl.z-el.z,z=(tl.z-b)/D;tl.lerp(el,z)}el.applyMatrix4(s),tl.applyMatrix4(s),el.multiplyScalar(1/el.w),tl.multiplyScalar(1/tl.w),el.x*=p.x/2,el.y*=p.y/2,tl.x*=p.x/2,tl.y*=p.y/2,ml.start.copy(el),ml.start.z=0,ml.end.copy(tl),ml.end.z=0;const G=ml.closestPointToPointParameter(w1,!0);ml.at(G,Wy);const L=o.MathUtils.lerp(el.z,tl.z,G),O=L>=-1&&L<=1,P=w1.distanceTo(Wy)<dh*.5;if(O&&P){ml.start.fromBufferAttribute(y,T),ml.end.fromBufferAttribute(_,T),ml.start.applyMatrix4(h),ml.end.applyMatrix4(h);const D=new o.Vector3,z=new o.Vector3;zp.distanceSqToSegment(ml.start,ml.end,z,D),r.push({point:z,pointOnLine:D,distance:zp.origin.distanceTo(z),object:i,face:null,faceIndex:T,uv:null,uv2:null})}}}class Ky extends o.Mesh{constructor(t=new Fg,r=new zm({color:Math.random()*16777215})){super(t,r),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,r=t.attributes.instanceStart,s=t.attributes.instanceEnd,c=new Float32Array(2*r.count);for(let h=0,g=0,y=r.count;h<y;h++,g+=2)Hy.fromBufferAttribute(r,h),jy.fromBufferAttribute(s,h),c[g]=g===0?0:c[g-1],c[g+1]=c[g]+Hy.distanceTo(jy);const p=new o.InstancedInterleavedBuffer(c,2,1);return t.setAttribute("instanceDistanceStart",new o.InterleavedBufferAttribute(p,1,0)),t.setAttribute("instanceDistanceEnd",new o.InterleavedBufferAttribute(p,1,1)),this}raycast(t,r){const s=this.material.worldUnits,c=t.camera;c===null&&!s&&s3.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const p=t.params.Line2!==void 0&&t.params.Line2.threshold||0;zp=t.ray;const h=this.matrixWorld,g=this.geometry,y=this.material;dh=y.linewidth+p,B1=g.attributes.instanceStart,Vy=g.attributes.instanceEnd,g.boundingSphere===null&&g.computeBoundingSphere(),Og.copy(g.boundingSphere).applyMatrix4(h);let _;if(s)_=dh*.5;else{const T=Math.max(c.near,Og.distanceToPoint(zp.origin));_=Qy(c,T,y.resolution)}if(Og.radius+=_,zp.intersectsSphere(Og)===!1)return;g.boundingBox===null&&g.computeBoundingBox(),Gm.copy(g.boundingBox).applyMatrix4(h);let b;if(s)b=dh*.5;else{const T=Math.max(c.near,Gm.distanceToPoint(zp.origin));b=Qy(c,T,y.resolution)}Gm.expandByScalar(b),zp.intersectsBox(Gm)!==!1&&(s?a3(this,r):Xy(this,c,r))}}class Um extends Fg{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const r=t.length-3,s=new Float32Array(2*r);for(let c=0;c<r;c+=3)s[2*c]=t[c],s[2*c+1]=t[c+1],s[2*c+2]=t[c+2],s[2*c+3]=t[c+3],s[2*c+4]=t[c+4],s[2*c+5]=t[c+5];return super.setPositions(s),this}setColors(t){const r=t.length-3,s=new Float32Array(2*r);for(let c=0;c<r;c+=3)s[2*c]=t[c],s[2*c+1]=t[c+1],s[2*c+2]=t[c+2],s[2*c+3]=t[c+3],s[2*c+4]=t[c+4],s[2*c+5]=t[c+5];return super.setColors(s),this}fromLine(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}}class Nm extends Ky{constructor(t=new Um,r=new zm({color:Math.random()*16777215})){super(t,r),this.isLine2=!0,this.type="Line2"}}const Gp=d.forwardRef(function(b,_){var T=b,{points:t,color:r="black",vertexColors:s,linewidth:c,lineWidth:p,segments:h,dashed:g}=T,y=An(T,["points","color","vertexColors","linewidth","lineWidth","segments","dashed"]);const R=(0,E.z)(O=>O.size),F=d.useMemo(()=>h?new Ky:new Nm,[h]),[G]=d.useState(()=>new zm),L=d.useMemo(()=>{const O=h?new Fg:new Um,P=t.map(D=>{const z=Array.isArray(D);return D instanceof o.Vector3?[D.x,D.y,D.z]:D instanceof o.Vector2?[D.x,D.y,0]:z&&D.length===3?[D[0],D[1],D[2]]:z&&D.length===2?[D[0],D[1],0]:D});if(O.setPositions(P.flat()),s){const D=s.map(z=>z instanceof o.Color?z.toArray():z);O.setColors(D.flat())}return O},[t,h,s]);return d.useLayoutEffect(()=>{F.computeLineDistances()},[t,F]),d.useLayoutEffect(()=>{g?G.defines.USE_DASH="":delete G.defines.USE_DASH,G.needsUpdate=!0},[g,G]),d.useEffect(()=>()=>L.dispose(),[L]),d.createElement("primitive",(0,w.Z)({object:F,ref:_},y),d.createElement("primitive",{object:L,attach:"geometry"}),d.createElement("primitive",(0,w.Z)({object:G,attach:"material",color:r,vertexColors:!!s,resolution:[R.width,R.height],linewidth:c!=null?c:p,dashed:g},y)))}),l3=new o.Vector3,c3=d.forwardRef(function(g,h){var y=g,{start:t=[0,0,0],end:r=[0,0,0],mid:s,segments:c=20}=y,p=An(y,["start","end","mid","segments"]);const _=d.useRef(null),[b]=d.useState(()=>new o.QuadraticBezierCurve3(void 0,void 0,void 0)),T=d.useCallback((F,G,L,O=20)=>(F instanceof o.Vector3?b.v0.copy(F):b.v0.set(...F),G instanceof o.Vector3?b.v2.copy(G):b.v2.set(...G),L instanceof o.Vector3?b.v1.copy(L):Array.isArray(L)?b.v1.set(...L):b.v1.copy(b.v0.clone().add(b.v2.clone().sub(b.v0)).add(l3.set(0,b.v0.y-b.v2.y,0))),b.getPoints(O)),[]);d.useLayoutEffect(()=>{_.current.setPoints=(F,G,L)=>{const O=T(F,G,L);_.current.geometry&&_.current.geometry.setPositions(O.map(P=>P.toArray()).flat())}},[]);const R=d.useMemo(()=>T(t,r,s,c),[t,r,s,c]);return d.createElement(Gp,(0,w.Z)({ref:Dn([_,h]),points:R},p))}),p3=d.forwardRef(function(y,g){var _=y,{start:t,end:r,midA:s,midB:c,segments:p=20}=_,h=An(_,["start","end","midA","midB","segments"]);const b=d.useMemo(()=>{const T=t instanceof o.Vector3?t:new o.Vector3(...t),R=r instanceof o.Vector3?r:new o.Vector3(...r),F=s instanceof o.Vector3?s:new o.Vector3(...s),G=c instanceof o.Vector3?c:new o.Vector3(...c);return new o.CubicBezierCurve3(T,F,G,R).getPoints(p)},[t,r,s,c,p]);return d.createElement(Gp,(0,w.Z)({ref:g,points:b},h))}),u3=d.forwardRef(function(_,y){var b=_,{points:t,closed:r=!1,curveType:s="centripetal",tension:c=.5,segments:p=20,vertexColors:h}=b,g=An(b,["points","closed","curveType","tension","segments","vertexColors"]);const T=d.useMemo(()=>{const G=t.map(L=>L instanceof o.Vector3?L:new o.Vector3(...L));return new o.CatmullRomCurve3(G,r,s,c)},[t,r,s,c]),R=d.useMemo(()=>T.getPoints(p),[T,p]),F=d.useMemo(()=>{if(!h||h.length<2)return;if(h.length===p+1)return h;const G=h.map(P=>P instanceof o.Color?P:new o.Color(...P));r&&G.push(G[0].clone());const L=[G[0]],O=p/(G.length-1);for(let P=1;P<p;P++){const D=P%O/O,z=Math.floor(P/O);L.push(G[z].clone().lerp(G[z+1],D))}return L.push(G[G.length-1]),L},[h,p]);return d.createElement(Gp,(0,w.Z)({ref:y,points:R,vertexColors:F},g))}),Yy=d.forwardRef((h,p)=>{var g=h,{url:i,distance:t=1,loop:r=!0,autoplay:s}=g,c=An(g,["url","distance","loop","autoplay"]);const y=d.useRef(),_=(0,E.z)(({camera:R})=>R),[b]=d.useState(()=>new o.AudioListener),T=(0,E.D)(o.AudioLoader,i);return d.useEffect(()=>{const R=y.current;R&&(R.setBuffer(T),R.setRefDistance(t),R.setLoop(r),s&&!R.isPlaying&&R.play())},[T,_,t,r]),d.useEffect(()=>{const R=y.current;return _.add(b),()=>{_.remove(b),R&&(R.isPlaying&&R.stop(),R.source&&R.source._connected&&R.disconnect())}},[]),d.createElement("positionalAudio",(0,w.Z)({ref:Dn([y,p]),args:[b]},c))});var df=A(25108),hf=A(34155);function d3(){var i=Object.create(null);function t(c,p){var h=c.id,g=c.name,y=c.dependencies;y===void 0&&(y=[]);var _=c.init;_===void 0&&(_=function(){});var b=c.getTransferables;if(b===void 0&&(b=null),!i[h])try{y=y.map(function(R){return R&&R.isWorkerModule&&(t(R,function(F){if(F instanceof Error)throw F}),R=i[R.id].value),R}),_=s("<"+g+">.init",_),b&&(b=s("<"+g+">.getTransferables",b));var T=null;typeof _=="function"?T=_.apply(void 0,y):df.error("worker module init function failed to rehydrate"),i[h]={id:h,value:T,getTransferables:b},p(T)}catch(R){R&&R.noLog||df.error(R),p(R)}}function r(c,p){var h,g=c.id,y=c.args;(!i[g]||typeof i[g].value!="function")&&p(new Error("Worker module "+g+": not found or its 'init' did not return a function"));try{var _=(h=i[g]).value.apply(h,y);_&&typeof _.then=="function"?_.then(b,function(T){return p(T instanceof Error?T:new Error(""+T))}):b(_)}catch(T){p(T)}function b(T){try{var R=i[g].getTransferables&&i[g].getTransferables(T);(!R||!Array.isArray(R)||!R.length)&&(R=void 0),p(T,R)}catch(F){df.error(F),p(F)}}}function s(c,p){var h=void 0;self.troikaDefine=function(y){return h=y};var g=URL.createObjectURL(new Blob(["/** "+c.replace(/\*/g,"")+` **/

troikaDefine(
`+p+`
)`],{type:"application/javascript"}));try{importScripts(g)}catch(y){df.error(y)}return URL.revokeObjectURL(g),delete self.troikaDefine,h}self.addEventListener("message",function(c){var p=c.data,h=p.messageId,g=p.action,y=p.data;try{g==="registerModule"&&t(y,function(_){_ instanceof Error?postMessage({messageId:h,success:!1,error:_.message}):postMessage({messageId:h,success:!0,result:{isCallable:typeof _=="function"}})}),g==="callModule"&&r(y,function(_,b){_ instanceof Error?postMessage({messageId:h,success:!1,error:_.message}):postMessage({messageId:h,success:!0,result:_},b||void 0)})}catch(_){postMessage({messageId:h,success:!1,error:_.stack})}})}function R1(i){var t=function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return t._getInitResult().then(function(c){if(typeof c=="function")return c.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var r=i.dependencies,s=i.init;r=Array.isArray(r)?r.map(function(p){return p&&p._getInitResult?p._getInitResult():p}):[];var c=Promise.all(r).then(function(p){return s.apply(null,p)});return t._getInitResult=function(){return c},c},t}var I1=function(){var i=!1;if(typeof window!="undefined"&&typeof window.document!="undefined")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(r){df.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return I1=function(){return i},i},h3=0,f3=0,F1=!1,Dg=Object.create(null),ff=Object.create(null),Hm=Object.create(null);function ud(i){if((!i||typeof i.init!="function")&&!F1)throw new Error("requires `options.init` function");var t=i.dependencies,r=i.init,s=i.getTransferables,c=i.workerId;if(!I1())return R1(i);c==null&&(c="#default");var p="workerModule"+ ++h3,h=i.name||p,g=null;t=t&&t.map(function(_){return typeof _=="function"&&!_.workerModuleData&&(F1=!0,_=ud({workerId:c,name:"<"+h+"> function dependency: "+_.name,init:`function(){return (
`+Pg(_)+`
)}`}),F1=!1),_&&_.workerModuleData&&(_=_.workerModuleData),_});function y(){for(var _=[],b=arguments.length;b--;)_[b]=arguments[b];if(!g){g=Al(c,"registerModule",y.workerModuleData);var T=function(){g=null,ff[c].delete(T)};(ff[c]||(ff[c]=new Set)).add(T)}return g.then(function(R){var F=R.isCallable;if(F)return Al(c,"callModule",{id:p,args:_});throw new Error("Worker module function was called but `init` did not return a callable function")})}return y.workerModuleData={isWorkerModule:!0,id:p,name:h,dependencies:t,init:Pg(r),getTransferables:s&&Pg(s)},y}function jm(i){ff[i]&&ff[i].forEach(function(t){t()}),Dg[i]&&(Dg[i].terminate(),delete Dg[i])}function Pg(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Wm(i){var t=Dg[i];if(!t){var r=Pg(d3);t=Dg[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+r+")()"],{type:"application/javascript"}))),t.onmessage=function(s){var c=s.data,p=c.messageId,h=Hm[p];if(!h)throw new Error("WorkerModule response with empty or unknown messageId");delete Hm[p],h(c)}}return t}function Al(i,t,r){return new Promise(function(s,c){var p=++f3;Hm[p]=function(h){h.success?s(h.result):c(new Error("Error in worker "+t+" call: "+h.error))},Wm(i).postMessage({messageId:p,action:t,data:r})})}var Up=A(25108);function Vm(){var i=function(t){function r(Le,Ye,Ce,Ee,_e,oe,me,Te){var ye=1-me;Te.x=ye*ye*Le+2*ye*me*Ce+me*me*_e,Te.y=ye*ye*Ye+2*ye*me*Ee+me*me*oe}function s(Le,Ye,Ce,Ee,_e,oe,me,Te,ye,ze){var Mt=1-ye;ze.x=Mt*Mt*Mt*Le+3*Mt*Mt*ye*Ce+3*Mt*ye*ye*_e+ye*ye*ye*me,ze.y=Mt*Mt*Mt*Ye+3*Mt*Mt*ye*Ee+3*Mt*ye*ye*oe+ye*ye*ye*Te}function c(Le,Ye){for(var Ce=/([MLQCZ])([^MLQCZ]*)/g,Ee,_e,oe,me,Te;Ee=Ce.exec(Le);){var ye=Ee[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ze){return parseFloat(ze)});switch(Ee[1]){case"M":me=_e=ye[0],Te=oe=ye[1];break;case"L":(ye[0]!==me||ye[1]!==Te)&&Ye("L",me,Te,me=ye[0],Te=ye[1]);break;case"Q":{Ye("Q",me,Te,me=ye[2],Te=ye[3],ye[0],ye[1]);break}case"C":{Ye("C",me,Te,me=ye[4],Te=ye[5],ye[0],ye[1],ye[2],ye[3]);break}case"Z":(me!==_e||Te!==oe)&&Ye("L",me,Te,_e,oe);break}}}function p(Le,Ye,Ce){Ce===void 0&&(Ce=16);var Ee={x:0,y:0};c(Le,function(_e,oe,me,Te,ye,ze,Mt,At,gt){switch(_e){case"L":Ye(oe,me,Te,ye);break;case"Q":{for(var ot=oe,Qt=me,Gt=1;Gt<Ce;Gt++)r(oe,me,ze,Mt,Te,ye,Gt/(Ce-1),Ee),Ye(ot,Qt,Ee.x,Ee.y),ot=Ee.x,Qt=Ee.y;break}case"C":{for(var Bt=oe,qe=me,Ge=1;Ge<Ce;Ge++)s(oe,me,ze,Mt,At,gt,Te,ye,Ge/(Ce-1),Ee),Ye(Bt,qe,Ee.x,Ee.y),Bt=Ee.x,qe=Ee.y;break}}})}var h="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",g="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",y=new WeakMap,_={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function b(Le,Ye){var Ce=Le.getContext?Le.getContext("webgl",_):Le,Ee=y.get(Ce);if(!Ee){let Mt=function(Bt){var qe=oe[Bt];if(!qe&&(qe=oe[Bt]=Ce.getExtension(Bt),!qe))throw new Error(Bt+" not supported");return qe},At=function(Bt,qe){var Ge=Ce.createShader(qe);return Ce.shaderSource(Ge,Bt),Ce.compileShader(Ge),Ge},gt=function(Bt,qe,Ge,Ot){if(!me[Bt]){var gn={},Mn={},Ut=Ce.createProgram();Ce.attachShader(Ut,At(qe,Ce.VERTEX_SHADER)),Ce.attachShader(Ut,At(Ge,Ce.FRAGMENT_SHADER)),Ce.linkProgram(Ut),me[Bt]={program:Ut,transaction:function(ar){Ce.useProgram(Ut),ar({setUniform:function(dr,bi){for(var fi=[],Sr=arguments.length-2;Sr-- >0;)fi[Sr]=arguments[Sr+2];var Dr=Mn[bi]||(Mn[bi]=Ce.getUniformLocation(Ut,bi));Ce["uniform"+dr].apply(Ce,[Dr].concat(fi))},setAttribute:function(dr,bi,fi,Sr,Dr){var Ii=gn[dr];Ii||(Ii=gn[dr]={buf:Ce.createBuffer(),loc:Ce.getAttribLocation(Ut,dr),data:null}),Ce.bindBuffer(Ce.ARRAY_BUFFER,Ii.buf),Ce.vertexAttribPointer(Ii.loc,bi,Ce.FLOAT,!1,0,0),Ce.enableVertexAttribArray(Ii.loc),_e?Ce.vertexAttribDivisor(Ii.loc,Sr):Mt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ii.loc,Sr),Dr!==Ii.data&&(Ce.bufferData(Ce.ARRAY_BUFFER,Dr,fi),Ii.data=Dr)}})}}}me[Bt].transaction(Ot)},ot=function(Bt,qe){ye++;try{Ce.activeTexture(Ce.TEXTURE0+ye);var Ge=Te[Bt];Ge||(Ge=Te[Bt]=Ce.createTexture(),Ce.bindTexture(Ce.TEXTURE_2D,Ge),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.NEAREST),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.NEAREST)),Ce.bindTexture(Ce.TEXTURE_2D,Ge),qe(Ge,ye)}finally{ye--}},Qt=function(Bt,qe,Ge){var Ot=Ce.createFramebuffer();ze.push(Ot),Ce.bindFramebuffer(Ce.FRAMEBUFFER,Ot),Ce.activeTexture(Ce.TEXTURE0+qe),Ce.bindTexture(Ce.TEXTURE_2D,Bt),Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_2D,Bt,0);try{Ge(Ot)}finally{Ce.deleteFramebuffer(Ot),Ce.bindFramebuffer(Ce.FRAMEBUFFER,ze[--ze.length-1]||null)}},Gt=function(){oe={},me={},Te={},ye=-1,ze.length=0};var _e=typeof WebGL2RenderingContext!="undefined"&&Ce instanceof WebGL2RenderingContext,oe={},me={},Te={},ye=-1,ze=[];Ce.canvas.addEventListener("webglcontextlost",function(Bt){Gt(),Bt.preventDefault()},!1),y.set(Ce,Ee={gl:Ce,isWebGL2:_e,getExtension:Mt,withProgram:gt,withTexture:ot,withTextureFramebuffer:Qt,handleContextLoss:Gt})}Ye(Ee)}function T(Le,Ye,Ce,Ee,_e,oe,me,Te){me===void 0&&(me=15),Te===void 0&&(Te=null),b(Le,function(ye){var ze=ye.gl,Mt=ye.withProgram,At=ye.withTexture;At("copy",function(gt,ot){ze.texImage2D(ze.TEXTURE_2D,0,ze.RGBA,_e,oe,0,ze.RGBA,ze.UNSIGNED_BYTE,Ye),Mt("copy",h,g,function(Qt){var Gt=Qt.setUniform,Bt=Qt.setAttribute;Bt("aUV",2,ze.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Gt("1i","image",ot),ze.bindFramebuffer(ze.FRAMEBUFFER,Te||null),ze.disable(ze.BLEND),ze.colorMask(me&8,me&4,me&2,me&1),ze.viewport(Ce,Ee,_e,oe),ze.scissor(Ce,Ee,_e,oe),ze.drawArrays(ze.TRIANGLES,0,3)})})})}function R(Le,Ye,Ce){var Ee=Le.width,_e=Le.height;b(Le,function(oe){var me=oe.gl,Te=new Uint8Array(Ee*_e*4);me.readPixels(0,0,Ee,_e,me.RGBA,me.UNSIGNED_BYTE,Te),Le.width=Ye,Le.height=Ce,T(me,Te,0,0,Ee,_e)})}var F=Object.freeze({__proto__:null,withWebGLContext:b,renderImageData:T,resizeWebGLCanvasWithoutClearing:R});function G(Le,Ye,Ce,Ee,_e,oe){oe===void 0&&(oe=1);var me=new Uint8Array(Le*Ye),Te=Ee[2]-Ee[0],ye=Ee[3]-Ee[1],ze=[];p(Ce,function(Bt,qe,Ge,Ot){ze.push({x1:Bt,y1:qe,x2:Ge,y2:Ot,minX:Math.min(Bt,Ge),minY:Math.min(qe,Ot),maxX:Math.max(Bt,Ge),maxY:Math.max(qe,Ot)})}),ze.sort(function(Bt,qe){return Bt.maxX-qe.maxX});for(var Mt=0;Mt<Le;Mt++)for(var At=0;At<Ye;At++){var gt=Qt(Ee[0]+Te*(Mt+.5)/Le,Ee[1]+ye*(At+.5)/Ye),ot=Math.pow(1-Math.abs(gt)/_e,oe)/2;gt<0&&(ot=1-ot),ot=Math.max(0,Math.min(255,Math.round(ot*255))),me[At*Le+Mt]=ot}return me;function Qt(Bt,qe){for(var Ge=1/0,Ot=1/0,gn=ze.length;gn--;){var Mn=ze[gn];if(Mn.maxX+Ot<=Bt)break;if(Bt+Ot>Mn.minX&&qe-Ot<Mn.maxY&&qe+Ot>Mn.minY){var Ut=P(Bt,qe,Mn.x1,Mn.y1,Mn.x2,Mn.y2);Ut<Ge&&(Ge=Ut,Ot=Math.sqrt(Ge))}}return Gt(Bt,qe)&&(Ot=-Ot),Ot}function Gt(Bt,qe){for(var Ge=0,Ot=ze.length;Ot--;){var gn=ze[Ot];if(gn.maxX<=Bt)break;var Mn=gn.y1>qe!=gn.y2>qe&&Bt<(gn.x2-gn.x1)*(qe-gn.y1)/(gn.y2-gn.y1)+gn.x1;Mn&&(Ge+=gn.y1<gn.y2?1:-1)}return Ge!==0}}function L(Le,Ye,Ce,Ee,_e,oe,me,Te,ye,ze){oe===void 0&&(oe=1),Te===void 0&&(Te=0),ye===void 0&&(ye=0),ze===void 0&&(ze=0),O(Le,Ye,Ce,Ee,_e,oe,me,null,Te,ye,ze)}function O(Le,Ye,Ce,Ee,_e,oe,me,Te,ye,ze,Mt){oe===void 0&&(oe=1),ye===void 0&&(ye=0),ze===void 0&&(ze=0),Mt===void 0&&(Mt=0);for(var At=G(Le,Ye,Ce,Ee,_e,oe),gt=new Uint8Array(At.length*4),ot=0;ot<At.length;ot++)gt[ot*4+Mt]=At[ot];T(me,gt,ye,ze,Le,Ye,1<<3-Mt,Te)}function P(Le,Ye,Ce,Ee,_e,oe){var me=_e-Ce,Te=oe-Ee,ye=me*me+Te*Te,ze=ye?Math.max(0,Math.min(1,((Le-Ce)*me+(Ye-Ee)*Te)/ye)):0,Mt=Le-(Ce+ze*me),At=Ye-(Ee+ze*Te);return Mt*Mt+At*At}var D=Object.freeze({__proto__:null,generate:G,generateIntoCanvas:L,generateIntoFramebuffer:O}),z="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",H="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",Q="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",W=new Float32Array([0,0,2,0,0,2]),Y=null,K=!1,ie={},ce=new WeakMap;function ge(Le){if(!K&&!Be(Le))throw new Error("WebGL generation not supported")}function ae(Le,Ye,Ce,Ee,_e,oe,me){if(oe===void 0&&(oe=1),me===void 0&&(me=null),!me&&(me=Y,!me)){var Te=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document!="undefined"?document.createElement("canvas"):null;if(!Te)throw new Error("OffscreenCanvas or DOM canvas not supported");me=Y=Te.getContext("webgl",{depth:!1})}ge(me);var ye=new Uint8Array(Le*Ye*4);b(me,function(gt){var ot=gt.gl,Qt=gt.withTexture,Gt=gt.withTextureFramebuffer;Qt("readable",function(Bt,qe){ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,Le,Ye,0,ot.RGBA,ot.UNSIGNED_BYTE,null),Gt(Bt,qe,function(Ge){ve(Le,Ye,Ce,Ee,_e,oe,ot,Ge,0,0,0),ot.readPixels(0,0,Le,Ye,ot.RGBA,ot.UNSIGNED_BYTE,ye)})})});for(var ze=new Uint8Array(Le*Ye),Mt=0,At=0;Mt<ye.length;Mt+=4)ze[At++]=ye[Mt];return ze}function xe(Le,Ye,Ce,Ee,_e,oe,me,Te,ye,ze){oe===void 0&&(oe=1),Te===void 0&&(Te=0),ye===void 0&&(ye=0),ze===void 0&&(ze=0),ve(Le,Ye,Ce,Ee,_e,oe,me,null,Te,ye,ze)}function ve(Le,Ye,Ce,Ee,_e,oe,me,Te,ye,ze,Mt){oe===void 0&&(oe=1),ye===void 0&&(ye=0),ze===void 0&&(ze=0),Mt===void 0&&(Mt=0),ge(me);var At=[];p(Ce,function(gt,ot,Qt,Gt){At.push(gt,ot,Qt,Gt)}),At=new Float32Array(At),b(me,function(gt){var ot=gt.gl,Qt=gt.isWebGL2,Gt=gt.getExtension,Bt=gt.withProgram,qe=gt.withTexture,Ge=gt.withTextureFramebuffer,Ot=gt.handleContextLoss;if(qe("rawDistances",function(gn,Mn){(Le!==gn._lastWidth||Ye!==gn._lastHeight)&&ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,gn._lastWidth=Le,gn._lastHeight=Ye,0,ot.RGBA,ot.UNSIGNED_BYTE,null),Bt("main",z,H,function(Ut){var Nn=Ut.setAttribute,ar=Ut.setUniform,Cr=!Qt&&Gt("ANGLE_instanced_arrays"),dr=!Qt&&Gt("EXT_blend_minmax");Nn("aUV",2,ot.STATIC_DRAW,0,W),Nn("aLineSegment",4,ot.DYNAMIC_DRAW,1,At),ar.apply(void 0,["4f","uGlyphBounds"].concat(Ee)),ar("1f","uMaxDistance",_e),ar("1f","uExponent",oe),Ge(gn,Mn,function(bi){ot.enable(ot.BLEND),ot.colorMask(!0,!0,!0,!0),ot.viewport(0,0,Le,Ye),ot.scissor(0,0,Le,Ye),ot.blendFunc(ot.ONE,ot.ONE),ot.blendEquationSeparate(ot.FUNC_ADD,Qt?ot.MAX:dr.MAX_EXT),ot.clear(ot.COLOR_BUFFER_BIT),Qt?ot.drawArraysInstanced(ot.TRIANGLES,0,3,At.length/4):Cr.drawArraysInstancedANGLE(ot.TRIANGLES,0,3,At.length/4)})}),Bt("post",h,Q,function(Ut){Ut.setAttribute("aUV",2,ot.STATIC_DRAW,0,W),Ut.setUniform("1i","tex",Mn),ot.bindFramebuffer(ot.FRAMEBUFFER,Te),ot.disable(ot.BLEND),ot.colorMask(Mt===0,Mt===1,Mt===2,Mt===3),ot.viewport(ye,ze,Le,Ye),ot.scissor(ye,ze,Le,Ye),ot.drawArrays(ot.TRIANGLES,0,3)})}),ot.isContextLost())throw Ot(),new Error("webgl context lost")})}function Be(Le){var Ye=!Le||Le===Y?ie:Le.canvas||Le,Ce=ce.get(Ye);if(Ce===void 0){K=!0;var Ee=null;try{var _e=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=ae(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Le);Ce=oe&&_e.length===oe.length&&oe.every(function(me,Te){return me===_e[Te]}),Ce||(Ee="bad trial run results",Up.info(_e,oe))}catch(me){Ce=!1,Ee=me.message}Ee&&Up.warn("WebGL SDF generation not supported:",Ee),K=!1,ce.set(Ye,Ce)}return Ce}var Ue=Object.freeze({__proto__:null,generate:ae,generateIntoCanvas:xe,generateIntoFramebuffer:ve,isSupported:Be});function Ie(Le,Ye,Ce,Ee,_e,oe){_e===void 0&&(_e=Math.max(Ee[2]-Ee[0],Ee[3]-Ee[1])/2),oe===void 0&&(oe=1);try{return ae.apply(Ue,arguments)}catch(me){return Up.info("WebGL SDF generation failed, falling back to JS",me),G.apply(D,arguments)}}function Ne(Le,Ye,Ce,Ee,_e,oe,me,Te,ye,ze){_e===void 0&&(_e=Math.max(Ee[2]-Ee[0],Ee[3]-Ee[1])/2),oe===void 0&&(oe=1),Te===void 0&&(Te=0),ye===void 0&&(ye=0),ze===void 0&&(ze=0);try{return xe.apply(Ue,arguments)}catch(Mt){return Up.info("WebGL SDF generation failed, falling back to JS",Mt),L.apply(D,arguments)}}return t.forEachPathCommand=c,t.generate=Ie,t.generateIntoCanvas=Ne,t.javascript=D,t.pathToLineSegments=p,t.webgl=Ue,t.webglUtils=F,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}function gf(){var i=function(t){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},s={},c={};s.L=1,c[1]="L",Object.keys(r).forEach(function(Ot,gn){s[Ot]=1<<gn+1,c[s[Ot]]=Ot}),Object.freeze(s);var p=s.LRI|s.RLI|s.FSI,h=s.L|s.R|s.AL,g=s.B|s.S|s.WS|s.ON|s.FSI|s.LRI|s.RLI|s.PDI,y=s.BN|s.RLE|s.LRE|s.RLO|s.LRO|s.PDF,_=s.S|s.WS|s.B|p|s.PDI|y,b=null;function T(){if(!b){b=new Map;var Ot=function(Mn){if(r.hasOwnProperty(Mn)){var Ut=0;r[Mn].split(",").forEach(function(Nn){var ar=Nn.split("+"),Cr=ar[0],dr=ar[1];Cr=parseInt(Cr,36),dr=dr?parseInt(dr,36):0,b.set(Ut+=Cr,s[Mn]);for(var bi=0;bi<dr;bi++)b.set(++Ut,s[Mn])})}};for(var gn in r)Ot(gn)}}function R(Ot){return T(),b.get(Ot.codePointAt(0))||s.L}function F(Ot){return c[R(Ot)]}var G={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function L(Ot,gn){var Mn=36,Ut=0,Nn=new Map,ar=gn&&new Map,Cr;return Ot.split(",").forEach(function dr(bi){if(bi.indexOf("+")!==-1)for(var fi=+bi;fi--;)dr(Cr);else{Cr=bi;var Sr=bi.split(">"),Dr=Sr[0],Ii=Sr[1];Dr=String.fromCodePoint(Ut+=parseInt(Dr,Mn)),Ii=String.fromCodePoint(Ut+=parseInt(Ii,Mn)),Nn.set(Dr,Ii),gn&&ar.set(Ii,Dr)}}),{map:Nn,reverseMap:ar}}var O,P,D;function z(){if(!O){var Ot=L(G.pairs,!0),gn=Ot.map,Mn=Ot.reverseMap;O=gn,P=Mn,D=L(G.canonical,!1).map}}function H(Ot){return z(),O.get(Ot)||null}function Q(Ot){return z(),P.get(Ot)||null}function W(Ot){return z(),D.get(Ot)||null}var Y=s.L,K=s.R,ie=s.EN,ce=s.ES,ge=s.ET,ae=s.AN,xe=s.CS,ve=s.B,Be=s.S,Ue=s.ON,Ie=s.BN,Ne=s.NSM,Le=s.AL,Ye=s.LRO,Ce=s.RLO,Ee=s.LRE,_e=s.RLE,oe=s.PDF,me=s.LRI,Te=s.RLI,ye=s.FSI,ze=s.PDI;function Mt(Ot,gn){for(var Mn=125,Ut=new Uint32Array(Ot.length),Nn=0;Nn<Ot.length;Nn++)Ut[Nn]=R(Ot[Nn]);var ar=new Map;function Cr(rc,Lu){var Vc=Ut[rc];Ut[rc]=Lu,ar.set(Vc,ar.get(Vc)-1),Vc&g&&ar.set(g,ar.get(g)-1),ar.set(Lu,(ar.get(Lu)||0)+1),Lu&g&&ar.set(g,(ar.get(g)||0)+1)}for(var dr=new Uint8Array(Ot.length),bi=new Map,fi=[],Sr=null,Dr=0;Dr<Ot.length;Dr++)Sr||fi.push(Sr={start:Dr,end:Ot.length-1,level:gn==="rtl"?1:gn==="ltr"?0:kS(Dr,!1)}),Ut[Dr]&ve&&(Sr.end=Dr,Sr=null);for(var Ii=_e|Ee|Ce|Ye|p|ze|oe|ve,Ao=function(rc){return rc+(rc&1?1:2)},ut=function(rc){return rc+(rc&1?2:1)},yn=0;yn<fi.length;yn++){Sr=fi[yn];var Rn=[{_level:Sr.level,_override:0,_isolate:0}],rr=void 0,Xr=0,ri=0,ci=0;ar.clear();for(var oi=Sr.start;oi<=Sr.end;oi++){var En=Ut[oi];if(rr=Rn[Rn.length-1],ar.set(En,(ar.get(En)||0)+1),En&g&&ar.set(g,(ar.get(g)||0)+1),En&Ii)if(En&(_e|Ee)){dr[oi]=rr._level;var no=(En===_e?ut:Ao)(rr._level);no<=Mn&&!Xr&&!ri?Rn.push({_level:no,_override:0,_isolate:0}):Xr||ri++}else if(En&(Ce|Ye)){dr[oi]=rr._level;var zl=(En===Ce?ut:Ao)(rr._level);zl<=Mn&&!Xr&&!ri?Rn.push({_level:zl,_override:En&Ce?K:Y,_isolate:0}):Xr||ri++}else if(En&p){En&ye&&(En=kS(oi+1,!0)===1?Te:me),dr[oi]=rr._level,rr._override&&Cr(oi,rr._override);var Rh=(En===Te?ut:Ao)(rr._level);Rh<=Mn&&Xr===0&&ri===0?(ci++,Rn.push({_level:Rh,_override:0,_isolate:1,_isolInitIndex:oi})):Xr++}else if(En&ze){if(Xr>0)Xr--;else if(ci>0){for(ri=0;!Rn[Rn.length-1]._isolate;)Rn.pop();var Id=Rn[Rn.length-1]._isolInitIndex;Id!=null&&(bi.set(Id,oi),bi.set(oi,Id)),Rn.pop(),ci--}rr=Rn[Rn.length-1],dr[oi]=rr._level,rr._override&&Cr(oi,rr._override)}else En&oe?(Xr===0&&(ri>0?ri--:!rr._isolate&&Rn.length>1&&(Rn.pop(),rr=Rn[Rn.length-1])),dr[oi]=rr._level):En&ve&&(dr[oi]=Sr.level);else dr[oi]=rr._level,rr._override&&En!==Ie&&Cr(oi,rr._override)}for(var jc=[],hc=null,Os=Sr.start;Os<=Sr.end;Os++){var mm=Ut[Os];if(!(mm&y)){var Ws=dr[Os],Ds=mm&p,up=mm===ze;hc&&Ws===hc._level?(hc._end=Os,hc._endsWithIsolInit=Ds):jc.push(hc={_start:Os,_end:Os,_level:Ws,_startsWithPDI:up,_endsWithIsolInit:Ds})}}for(var fc=[],yo=0;yo<jc.length;yo++){var ol=jc[yo];if(!ol._startsWithPDI||ol._startsWithPDI&&!bi.has(ol._start)){for(var vl=[hc=ol],ia=void 0;hc&&hc._endsWithIsolInit&&(ia=bi.get(hc._end))!=null;)for(var Jr=yo+1;Jr<jc.length;Jr++)if(jc[Jr]._start===ia){vl.push(hc=jc[Jr]);break}for(var _l=[],Fd=0;Fd<vl.length;Fd++)for(var Ae=vl[Fd],Re=Ae._start;Re<=Ae._end;Re++)_l.push(Re);for(var ct=dr[_l[0]],jt=Sr.level,tn=_l[0]-1;tn>=0;tn--)if(!(Ut[tn]&y)){jt=dr[tn];break}var rn=_l[_l.length-1],Hn=dr[rn],wn=Sr.level;if(!(Ut[rn]&p)){for(var Yn=rn+1;Yn<=Sr.end;Yn++)if(!(Ut[Yn]&y)){wn=dr[Yn];break}}fc.push({_seqIndices:_l,_sosType:Math.max(jt,ct)%2?K:Y,_eosType:Math.max(wn,Hn)%2?K:Y})}}for(var qn=0;qn<fc.length;qn++){var tr=fc[qn],Yt=tr._seqIndices,Go=tr._sosType,kr=tr._eosType;if(ar.get(Ne))for(var zr=0;zr<Yt.length;zr++){var Mi=Yt[zr];if(Ut[Mi]&Ne){for(var Fi=Go,vo=zr-1;vo>=0;vo--)if(!(Ut[Yt[vo]]&y)){Fi=Ut[Yt[vo]];break}Cr(Mi,Fi&(p|ze)?Ue:Fi)}}if(ar.get(ie))for(var Mo=0;Mo<Yt.length;Mo++){var oa=Yt[Mo];if(Ut[oa]&ie)for(var Pa=Mo-1;Pa>=-1;Pa--){var Uo=Pa===-1?Go:Ut[Yt[Pa]];if(Uo&h){Uo===Le&&Cr(oa,ae);break}}}if(ar.get(Le))for(var Wc=0;Wc<Yt.length;Wc++){var Qo=Yt[Wc];Ut[Qo]&Le&&Cr(Qo,K)}if(ar.get(ce)||ar.get(xe))for(var Ps=1;Ps<Yt.length-1;Ps++){var dp=Yt[Ps];if(Ut[dp]&(ce|xe)){for(var Jp=0,nc=0,xo=Ps-1;xo>=0&&(Jp=Ut[Yt[xo]],!!(Jp&y));xo--);for(var La=Ps+1;La<Yt.length&&(nc=Ut[Yt[La]],!!(nc&y));La++);Jp===nc&&(Ut[dp]===ce?Jp===ie:Jp&(ie|ae))&&Cr(dp,Jp)}}if(ar.get(ie))for(var Bo=0;Bo<Yt.length;Bo++){var Co=Yt[Bo];if(Ut[Co]&ie){for(var Gl=Bo-1;Gl>=0&&Ut[Yt[Gl]]&(ge|y);Gl--)Cr(Yt[Gl],ie);for(var qp=Bo+1;qp<Yt.length&&Ut[Yt[qp]]&(ge|y);qp++)Cr(Yt[qp],ie)}}if(ar.get(ge)||ar.get(ce)||ar.get(xe))for(var sl=0;sl<Yt.length;sl++){var Du=Yt[sl];if(Ut[Du]&(ge|ce|xe)){Cr(Du,Ue);for(var $2=sl-1;$2>=0&&Ut[Yt[$2]]&y;$2--)Cr(Yt[$2],Ue);for(var e_=sl+1;e_<Yt.length&&Ut[Yt[e_]]&y;e_++)Cr(Yt[e_],Ue)}}if(ar.get(ie))for(var Lb=0,wS=Go;Lb<Yt.length;Lb++){var TS=Yt[Lb],kb=Ut[TS];kb&ie?wS===Y&&Cr(TS,Y):kb&h&&(wS=kb)}if(ar.get(g)){var iy=K|ie|ae,BS=iy|Y,t_=[];{for(var r1=[],i1=0;i1<Yt.length;i1++)if(Ut[Yt[i1]]&g){var oy=Ot[Yt[i1]],RS=void 0;if(H(oy)!==null)if(r1.length<63)r1.push({char:oy,seqIndex:i1});else break;else if((RS=Q(oy))!==null)for(var sy=r1.length-1;sy>=0;sy--){var zb=r1[sy].char;if(zb===RS||zb===Q(W(oy))||H(W(zb))===oy){t_.push([r1[sy].seqIndex,i1]),r1.length=sy;break}}}t_.sort(function(rc,Lu){return rc[0]-Lu[0]})}for(var Gb=0;Gb<t_.length;Gb++){for(var IS=t_[Gb],ay=IS[0],n_=IS[1],FS=!1,Pu=0,Ub=ay+1;Ub<n_;Ub++){var Nb=Yt[Ub];if(Ut[Nb]&BS){FS=!0;var OS=Ut[Nb]&iy?K:Y;if(OS===o1(Nb)){Pu=OS;break}}}if(FS&&!Pu){Pu=Go;for(var Hb=ay-1;Hb>=0;Hb--){var r_=Yt[Hb];if(Ut[r_]&BS){var DS=Ut[r_]&iy?K:Y;DS!==o1(r_)?Pu=DS:Pu=o1(r_);break}}}if(Pu){if(Ut[Yt[ay]]=Ut[Yt[n_]]=Pu,Pu!==o1(Yt[ay])){for(var ly=ay+1;ly<Yt.length;ly++)if(!(Ut[Yt[ly]]&y)){R(Ot[Yt[ly]])&Ne&&(Ut[Yt[ly]]=Pu);break}}if(Pu!==o1(Yt[n_])){for(var cy=n_+1;cy<Yt.length;cy++)if(!(Ut[Yt[cy]]&y)){R(Ot[Yt[cy]])&Ne&&(Ut[Yt[cy]]=Pu);break}}}}for(var Vf=0;Vf<Yt.length;Vf++)if(Ut[Yt[Vf]]&g){for(var PS=Vf,jb=Vf,Wb=Go,py=Vf-1;py>=0;py--)if(Ut[Yt[py]]&y)PS=py;else{Wb=Ut[Yt[py]]&iy?K:Y;break}for(var LS=kr,uy=Vf+1;uy<Yt.length;uy++)if(Ut[Yt[uy]]&(g|y))jb=uy;else{LS=Ut[Yt[uy]]&iy?K:Y;break}for(var i_=PS;i_<=jb;i_++)Ut[Yt[i_]]=Wb===LS?Wb:o1(Yt[i_]);Vf=jb}}}for(var hp=Sr.start;hp<=Sr.end;hp++){var nI=dr[hp],o_=Ut[hp];if(nI&1?o_&(Y|ie|ae)&&dr[hp]++:o_&K?dr[hp]++:o_&(ae|ie)&&(dr[hp]+=2),o_&y&&(dr[hp]=hp===0?Sr.level:dr[hp-1]),hp===Sr.end||R(Ot[hp])&(Be|ve))for(var s_=hp;s_>=0&&R(Ot[s_])&_;s_--)dr[s_]=Sr.level}}return{levels:dr,paragraphs:fi};function kS(rc,Lu){for(var Vc=rc;Vc<Ot.length;Vc++){var Qf=Ut[Vc];if(Qf&(K|Le))return 1;if(Qf&(ve|Y)||Lu&&Qf===ze)return 0;if(Qf&p){var zS=rI(Vc);Vc=zS===-1?Ot.length:zS}}return 0}function rI(rc){for(var Lu=1,Vc=rc+1;Vc<Ot.length;Vc++){var Qf=Ut[Vc];if(Qf&ve)break;if(Qf&ze){if(--Lu===0)return Vc}else Qf&p&&Lu++}return-1}function o1(rc){return dr[rc]&1?K:Y}}var At="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",gt;function ot(){if(!gt){var Ot=L(At,!0),gn=Ot.map,Mn=Ot.reverseMap;Mn.forEach(function(Ut,Nn){gn.set(Nn,Ut)}),gt=gn}}function Qt(Ot){return ot(),gt.get(Ot)||null}function Gt(Ot,gn,Mn,Ut){var Nn=Ot.length;Mn=Math.max(0,Mn==null?0:+Mn),Ut=Math.min(Nn-1,Ut==null?Nn-1:+Ut);for(var ar=new Map,Cr=Mn;Cr<=Ut;Cr++)if(gn[Cr]&1){var dr=Qt(Ot[Cr]);dr!==null&&ar.set(Cr,dr)}return ar}function Bt(Ot,gn,Mn,Ut){var Nn=Ot.length;Mn=Math.max(0,Mn==null?0:+Mn),Ut=Math.min(Nn-1,Ut==null?Nn-1:+Ut);var ar=[];return gn.paragraphs.forEach(function(Cr){var dr=Math.max(Mn,Cr.start),bi=Math.min(Ut,Cr.end);if(dr<bi){for(var fi=gn.levels.slice(dr,bi+1),Sr=bi;Sr>=dr&&R(Ot[Sr])&_;Sr--)fi[Sr]=Cr.level;for(var Dr=Cr.level,Ii=1/0,Ao=0;Ao<fi.length;Ao++){var ut=fi[Ao];ut>Dr&&(Dr=ut),ut<Ii&&(Ii=ut|1)}for(var yn=Dr;yn>=Ii;yn--)for(var Rn=0;Rn<fi.length;Rn++)if(fi[Rn]>=yn){for(var rr=Rn;Rn+1<fi.length&&fi[Rn+1]>=yn;)Rn++;Rn>rr&&ar.push([rr+Mn,Rn+Mn])}}}),ar}function qe(Ot,gn,Mn,Ut){var Nn=Ge(Ot,gn,Mn,Ut),ar=[].concat(Ot);return Nn.forEach(function(Cr,dr){ar[dr]=(gn.levels[Cr]&1?Qt(Ot[Cr]):null)||Ot[Cr]}),ar.join("")}function Ge(Ot,gn,Mn,Ut){for(var Nn=Bt(Ot,gn,Mn,Ut),ar=[],Cr=0;Cr<Ot.length;Cr++)ar[Cr]=Cr;return Nn.forEach(function(dr){for(var bi=dr[0],fi=dr[1],Sr=ar.slice(bi,fi+1),Dr=Sr.length;Dr--;)ar[fi-Dr]=Sr[Dr]}),ar}return t.closingToOpeningBracket=Q,t.getBidiCharType=R,t.getBidiCharTypeName=F,t.getCanonicalBracket=W,t.getEmbeddingLevels=Mt,t.getMirroredCharacter=Qt,t.getMirroredCharactersMap=Gt,t.getReorderSegments=Bt,t.getReorderedIndices=Ge,t.getReorderedString=qe,t.openingToClosingBracket=H,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}var Lg=gf;const hh=/\bvoid\s+main\s*\(\s*\)\s*{/g;function dd(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function r(s,c){let p=o.ShaderChunk[c];return p?dd(p):s}return i.replace(t,r)}const Ts=[];for(let i=0;i<256;i++)Ts[i]=(i<16?"0":"")+i.toString(16);function kg(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(Ts[i&255]+Ts[i>>8&255]+Ts[i>>16&255]+Ts[i>>24&255]+"-"+Ts[t&255]+Ts[t>>8&255]+"-"+Ts[t>>16&15|64]+Ts[t>>24&255]+"-"+Ts[r&63|128]+Ts[r>>8&255]+"-"+Ts[r>>16&255]+Ts[r>>24&255]+Ts[s&255]+Ts[s>>8&255]+Ts[s>>16&255]+Ts[s>>24&255]).toUpperCase()}const hd=Object.assign||function(){let i=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let s=arguments[t];if(s)for(let c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])}return i},Qm=Date.now(),mf=new WeakMap,zg=new Map;let Jy=1e10;function Af(i,t){const r=Zy(t);let s=mf.get(i);if(s||mf.set(i,s=Object.create(null)),s[r])return new s[r];const c=`_onBeforeCompile${r}`,p=function(_,b){i.onBeforeCompile.call(this,_,b);const T=this.customProgramCacheKey()+"|"+_.vertexShader+"|"+_.fragmentShader;let R=zg[T];if(!R){const F=qy(this,_,t,r);R=zg[T]=F}_.vertexShader=R.vertexShader,_.fragmentShader=R.fragmentShader,hd(_.uniforms,this.uniforms),t.timeUniform&&(_.uniforms[t.timeUniform]={get value(){return Date.now()-Qm}}),this[c]&&this[c](_)},h=function(){return g(t.chained?i:i.clone())},g=function(_){const b=Object.create(_,y);return Object.defineProperty(b,"baseMaterial",{value:i}),Object.defineProperty(b,"id",{value:Jy++}),b.uuid=kg(),b.uniforms=hd({},_.uniforms,t.uniforms),b.defines=hd({},_.defines,t.defines),b.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",b.extensions=hd({},_.extensions,t.extensions),b._listeners=void 0,b},y={constructor:{value:h},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get(){return p},set(_){this[c]=_}},copy:{writable:!0,configurable:!0,value:function(_){return i.copy.call(this,_),!i.isShaderMaterial&&!i.isDerivedMaterial&&(hd(this.extensions,_.extensions),hd(this.defines,_.defines),hd(this.uniforms,o.UniformsUtils.clone(_.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const _=new i.constructor;return g(_).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let _=this._depthMaterial;return _||(_=this._depthMaterial=Af(i.isDerivedMaterial?i.getDepthMaterial():new o.MeshDepthMaterial({depthPacking:o.RGBADepthPacking}),t),_.defines.IS_DEPTH_MATERIAL="",_.uniforms=this.uniforms),_}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let _=this._distanceMaterial;return _||(_=this._distanceMaterial=Af(i.isDerivedMaterial?i.getDistanceMaterial():new o.MeshDistanceMaterial,t),_.defines.IS_DISTANCE_MATERIAL="",_.uniforms=this.uniforms),_}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:_,_distanceMaterial:b}=this;_&&_.dispose(),b&&b.dispose(),i.dispose.call(this)}}};return s[r]=h,new h}function qy(i,{vertexShader:t,fragmentShader:r},s,c){let{vertexDefs:p,vertexMainIntro:h,vertexMainOutro:g,vertexTransform:y,fragmentDefs:_,fragmentMainIntro:b,fragmentMainOutro:T,fragmentColorTransform:R,customRewriter:F,timeUniform:G}=s;if(p=p||"",h=h||"",g=g||"",_=_||"",b=b||"",T=T||"",(y||F)&&(t=dd(t)),(R||F)&&(r=r.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),r=dd(r)),F){let L=F({vertexShader:t,fragmentShader:r});t=L.vertexShader,r=L.fragmentShader}if(R){let L=[];r=r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,O=>(L.push(O),"")),T=`${R}
${L.join(`
`)}
${T}`}if(G){const L=`
uniform float ${G};
`;p=L+p,_=L+_}return y&&(t=`vec3 troika_position_${c};
vec3 troika_normal_${c};
vec2 troika_uv_${c};
${t}
`,p=`${p}
void troikaVertexTransform${c}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${y}
}
`,h=`
troika_position_${c} = vec3(position);
troika_normal_${c} = vec3(normal);
troika_uv_${c} = vec2(uv);
troikaVertexTransform${c}(troika_position_${c}, troika_normal_${c}, troika_uv_${c});
${h}
`,t=t.replace(/\b(position|normal|uv)\b/g,(L,O,P,D)=>/\battribute\s+vec[23]\s+$/.test(D.substr(0,P))?O:`troika_${O}_${c}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${c}`))),t=O1(t,c,p,h,g),r=O1(r,c,_,b,T),{vertexShader:t,fragmentShader:r}}function O1(i,t,r,s,c){return(s||c||r)&&(i=i.replace(hh,`
${r}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${s}
  troikaOrigMain${t}();
  ${c}
}`),i}function Xm(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let Km=0;const D1=new Map;function Zy(i){const t=JSON.stringify(i,Xm);let r=D1.get(t);return r==null&&D1.set(t,r=++Km),r}const $y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g3(i){let t=$y[i.type];return t?ShaderLib[t]:i}function m3(i){let t=/\buniform\s+(int|float|vec[234]|mat[34])\s+([A-Za-z_][\w]*)/g,r=Object.create(null),s;for(;(s=t.exec(i))!==null;)r[s[2]]=s[1];return r}function EM(i,t=new Matrix4){return typeof t.invert=="function"?t.copy(i).invert():t.getInverse(i),t}const ev=null,yf=null,P1=null,tv=null;function L1(i){return Af(i,{chained:!0,uniforms:{pointA:{value:new Vector3},controlA:{value:new Vector3},controlB:{value:new Vector3},pointB:{value:new Vector3},radius:{value:.01},dashing:{value:new Vector3}},vertexDefs:ev,vertexTransform:yf,fragmentDefs:P1,fragmentMainIntro:tv})}let k1=null;const Ym=new o.MeshStandardMaterial({color:16777215,side:o.DoubleSide});class fh extends null{static getGeometry(){return k1||(k1=new CylinderGeometry(1,1,1,6,64).translate(0,.5,0))}constructor(){super(fh.getGeometry(),Ym),this.pointA=new Vector3,this.controlA=new Vector3,this.controlB=new Vector3,this.pointB=new Vector3,this.radius=.01,this.dashArray=new Vector2,this.dashOffset=0,this.frustumCulled=!1}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Ym.clone());return(!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=L1(r),r.addEventListener("dispose",function s(){r.removeEventListener("dispose",s),t.dispose()})),t}set material(t){this._baseMaterial=t}get customDepthMaterial(){return this.material.getDepthMaterial()}get customDistanceMaterial(){return this.material.getDistanceMaterial()}onBeforeRender(){const{uniforms:t}=this.material,{pointA:r,controlA:s,controlB:c,pointB:p,radius:h,dashArray:g,dashOffset:y}=this;t.pointA.value.copy(r),t.controlA.value.copy(s),t.controlB.value.copy(c),t.pointB.value.copy(p),t.radius.value=h,t.dashing.value.set(g.x,g.y,y||0)}raycast(){}}var nl=A(25108);function A3(i,t,r){const{defaultFontURL:s}=r,c=Object.create(null),p=1/0,h=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,g="[^\\S\\u00A0]",y=new RegExp(`${g}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function _(D,z){function H(){const Q=W=>{nl.error(`Failure loading font ${D}${D===s?"":"; trying fallback"}`,W),D!==s&&(D=s,H())};try{const W=new XMLHttpRequest;W.open("get",D,!0),W.responseType="arraybuffer",W.onload=function(){if(W.status>=400)Q(new Error(W.statusText));else if(W.status>0)try{const Y=i(W.response);z(Y)}catch(Y){Q(Y)}},W.onerror=Q,W.send()}catch(W){Q(W)}}H()}function b(D,z){D||(D=s);let H=c[D];H?H.pending?H.pending.push(z):z(H):(c[D]={pending:[z]},_(D,Q=>{let W=c[D].pending;c[D]=Q,W.forEach(Y=>Y(Q))}))}function T({text:D="",font:z=s,sdfGlyphSize:H=64,fontSize:Q=1,letterSpacing:W=0,lineHeight:Y="normal",maxWidth:K=p,direction:ie,textAlign:ce="left",textIndent:ge=0,whiteSpace:ae="normal",overflowWrap:xe="normal",anchorX:ve=0,anchorY:Be=0,includeCaretPositions:Ue=!1,chunkedBoundsSize:Ie=8192,colorRanges:Ne=null},Le,Ye=!1){const Ce=L(),Ee={fontLoad:0,typesetting:0};D.indexOf("\r")>-1&&(nl.info("Typesetter: got text with \\r chars; normalizing to \\n"),D=D.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),Q=+Q,W=+W,K=+K,Y=Y||"normal",ge=+ge,b(z,_e=>{const oe=isFinite(K);let me=null,Te=null,ye=null,ze=null,Mt=null,At=null,gt=null,ot=0,Qt=0,Gt=ae!=="nowrap";const{ascender:Bt,descender:qe,unitsPerEm:Ge,lineGap:Ot,capHeight:gn,xHeight:Mn}=_e;Ee.fontLoad=L()-Ce;const Ut=L(),Nn=Q/Ge;Y==="normal"&&(Y=(Bt-qe+Ot)/Ge),Y=Y*Q;const ar=(Y-(Bt-qe)*Nn)/2,Cr=-(Bt*Nn+ar),dr=Math.min(Y,(Bt-qe)*Nn),bi=(Bt+qe)/2*Nn-dr/2;let fi=ge,Sr=new O;const Dr=[Sr];_e.forEachGlyph(D,Q,W,(ut,yn,Rn)=>{const rr=D.charAt(Rn),Xr=ut.advanceWidth*Nn,ri=Sr.count;let ci;if("isEmpty"in ut||(ut.isWhitespace=!!rr&&new RegExp(g).test(rr),ut.canBreakAfter=!!rr&&y.test(rr),ut.isEmpty=ut.xMin===ut.xMax||ut.yMin===ut.yMax||h.test(rr)),!ut.isWhitespace&&!ut.isEmpty&&Qt++,Gt&&oe&&!ut.isWhitespace&&yn+Xr+fi>K&&ri){if(Sr.glyphAt(ri-1).glyphObj.canBreakAfter)ci=new O,fi=-yn;else for(let En=ri;En--;)if(En===0&&xe==="break-word"){ci=new O,fi=-yn;break}else if(Sr.glyphAt(En).glyphObj.canBreakAfter){ci=Sr.splitAt(En+1);const no=ci.glyphAt(0).x;fi-=no;for(let zl=ci.count;zl--;)ci.glyphAt(zl).x-=no;break}ci&&(Sr.isSoftWrapped=!0,Sr=ci,Dr.push(Sr),ot=K)}let oi=Sr.glyphAt(Sr.count);oi.glyphObj=ut,oi.x=yn+fi,oi.width=Xr,oi.charIndex=Rn,rr===`
`&&(Sr=new O,Dr.push(Sr),fi=-(yn+Xr+W*Q)+ge)}),Dr.forEach(ut=>{for(let yn=ut.count;yn--;){let{glyphObj:Rn,x:rr,width:Xr}=ut.glyphAt(yn);if(!Rn.isWhitespace){ut.width=rr+Xr,ut.width>ot&&(ot=ut.width);return}}});let Ii=0,Ao=0;if(ve&&(typeof ve=="number"?Ii=-ve:typeof ve=="string"&&(Ii=-ot*(ve==="left"?0:ve==="center"?.5:ve==="right"?1:F(ve)))),Be){if(typeof Be=="number")Ao=-Be;else if(typeof Be=="string"){let ut=Dr.length*Y;Ao=Be==="top"?0:Be==="top-baseline"?-Cr:Be==="top-cap"?-Cr-gn*Nn:Be==="top-ex"?-Cr-Mn*Nn:Be==="middle"?ut/2:Be==="bottom"?ut:Be==="bottom-baseline"?ut-ar+qe*Nn:F(Be)*ut}}if(!Ye){const ut=t.getEmbeddingLevels(D,ie);me=new Uint16Array(Qt),Te=new Float32Array(Qt*2),ye={},At=[p,p,-p,-p],gt=[];let yn=Cr;Ue&&(Mt=new Float32Array(D.length*3)),Ne&&(ze=new Uint8Array(Qt*3));let Rn=0,rr=-1,Xr=-1,ri,ci;if(Dr.forEach((oi,En)=>{let{count:no,width:zl}=oi;if(no>0){let Rh=0;for(let Ws=no;Ws--&&oi.glyphAt(Ws).glyphObj.isWhitespace;)Rh++;let Id=0,jc=0;if(ce==="center")Id=(ot-zl)/2;else if(ce==="right")Id=ot-zl;else if(ce==="justify"&&oi.isSoftWrapped){let Ws=0;for(let Ds=no-Rh;Ds--;)oi.glyphAt(Ds).glyphObj.isWhitespace&&Ws++;jc=(ot-zl)/Ws}if(jc||Id){let Ws=0;for(let Ds=0;Ds<no;Ds++){let up=oi.glyphAt(Ds);const fc=up.glyphObj;up.x+=Id+Ws,jc!==0&&fc.isWhitespace&&Ds<no-Rh&&(Ws+=jc,up.width+=jc)}}const hc=t.getReorderSegments(D,ut,oi.glyphAt(0).charIndex,oi.glyphAt(oi.count-1).charIndex);for(let Ws=0;Ws<hc.length;Ws++){const[Ds,up]=hc[Ws];let fc=1/0,yo=-1/0;for(let ol=0;ol<no;ol++)if(oi.glyphAt(ol).charIndex>=Ds){let vl=ol,ia=ol;for(;ia<no;ia++){let Jr=oi.glyphAt(ia);if(Jr.charIndex>up)break;ia<no-Rh&&(fc=Math.min(fc,Jr.x),yo=Math.max(yo,Jr.x+Jr.width))}for(let Jr=vl;Jr<ia;Jr++){const _l=oi.glyphAt(Jr);_l.x=yo-(_l.x+_l.width-fc)}break}}let Os;const mm=Ws=>Os=Ws;for(let Ws=0;Ws<no;Ws++){let Ds=oi.glyphAt(Ws);Os=Ds.glyphObj;const up=Os.index,fc=ut.levels[Ds.charIndex]&1;if(fc){const yo=t.getMirroredCharacter(D[Ds.charIndex]);yo&&_e.forEachGlyph(yo,0,0,mm)}if(Ue){const{charIndex:yo}=Ds,ol=Ds.x+Ii,vl=Ds.x+Ds.width+Ii;Mt[yo*3]=fc?vl:ol,Mt[yo*3+1]=fc?ol:vl,Mt[yo*3+2]=yn+bi+Ao;const ia=yo-rr;ia>1&&G(Mt,rr,ia),rr=yo}if(Ne){const{charIndex:yo}=Ds;for(;yo>Xr;)Xr++,Ne.hasOwnProperty(Xr)&&(ci=Ne[Xr])}if(!Os.isWhitespace&&!Os.isEmpty){const yo=Rn++;ye[up]||(ye[up]={path:Os.path,pathBounds:[Os.xMin,Os.yMin,Os.xMax,Os.yMax]});const ol=Ds.x+Ii,vl=yn+Ao;Te[yo*2]=ol,Te[yo*2+1]=vl;const ia=ol+Os.xMin*Nn,Jr=vl+Os.yMin*Nn,_l=ol+Os.xMax*Nn,Fd=vl+Os.yMax*Nn;ia<At[0]&&(At[0]=ia),Jr<At[1]&&(At[1]=Jr),_l>At[2]&&(At[2]=_l),Fd>At[3]&&(At[3]=Fd),yo%Ie===0&&(ri={start:yo,end:yo,rect:[p,p,-p,-p]},gt.push(ri)),ri.end++;const Ae=ri.rect;if(ia<Ae[0]&&(Ae[0]=ia),Jr<Ae[1]&&(Ae[1]=Jr),_l>Ae[2]&&(Ae[2]=_l),Fd>Ae[3]&&(Ae[3]=Fd),me[yo]=up,Ne){const Re=yo*3;ze[Re]=ci>>16&255,ze[Re+1]=ci>>8&255,ze[Re+2]=ci&255}}}}yn-=Y}),Mt){const oi=D.length-rr;oi>1&&G(Mt,rr,oi)}}Ee.typesetting=L()-Ut,Le({glyphIds:me,glyphPositions:Te,glyphData:ye,caretPositions:Mt,caretHeight:dr,glyphColors:ze,chunkedBounds:gt,fontSize:Q,unitsPerEm:Ge,ascender:Bt*Nn,descender:qe*Nn,capHeight:gn*Nn,xHeight:Mn*Nn,lineHeight:Y,topBaseline:Cr,blockBounds:[Ii,Ao-Dr.length*Y,Ii+ot,Ao],visibleBounds:At,timings:Ee})})}function R(D,z){T(D,H=>{const[Q,W,Y,K]=H.blockBounds;z({width:Y-Q,height:K-W})},{metricsOnly:!0})}function F(D){let z=D.match(/^([\d.]+)%$/),H=z?parseFloat(z[1]):NaN;return isNaN(H)?0:H/100}function G(D,z,H){const Q=D[z*3],W=D[z*3+1],Y=D[z*3+2],K=(W-Q)/H;for(let ie=0;ie<H;ie++){const ce=(z+ie)*3;D[ce]=Q+K*ie,D[ce+1]=Q+K*(ie+1),D[ce+2]=Y}}function L(){return(self.performance||Date).now()}function O(){this.data=[]}const P=["glyphObj","x","width","charIndex"];return O.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/P.length)},glyphAt(D){let z=O.flyweight;return z.data=this.data,z.index=D,z},splitAt(D){let z=new O;return z.data=this.data.splice(D*P.length),z}},O.flyweight=P.reduce((D,z,H,Q)=>(Object.defineProperty(D,z,{get(){return this.data[this.index*P.length+H]},set(W){this.data[this.index*P.length+H]=W}}),D),{data:null,index:0}),{typeset:T,measure:R,loadFont:b}}const Np=()=>(self.performance||Date).now(),wu=Vm();let gh;function nv(i,t,r,s,c,p,h,g,y,_,b=!0){return b?Gg(i,t,r,s,c,p,h,g,y,_).then(null,T=>(gh||(nl.warn("WebGL SDF generation failed, falling back to JS",T),gh=!0),U1(i,t,r,s,c,p,h,g,y,_))):U1(i,t,r,s,c,p,h,g,y,_)}const mh=[],rv=5;let z1=0;function vf(){const i=Np();for(;mh.length&&Np()-i<rv;)mh.shift()();z1=mh.length?setTimeout(vf,0):0}const Gg=(...i)=>new Promise((t,r)=>{mh.push(()=>{const s=Np();try{wu.webgl.generateIntoCanvas(...i),t({timing:Np()-s})}catch(c){r(c)}}),z1||(z1=setTimeout(vf,0))}),iv=4,Rl=2e3,G1={};let ov=0;function U1(i,t,r,s,c,p,h,g,y,_){const b="TroikaTextSDFGenerator_JS_"+ov++%iv;let T=G1[b];return T||(T=G1[b]={workerModule:ud({name:b,workerId:b,dependencies:[Vm,Np],init(R,F){const G=R().javascript.generate;return function(...L){const O=F();return{textureData:G(...L),timing:F()-O}}},getTransferables(R){return[R.textureData.buffer]}}),requests:0,idleTimer:null}),T.requests++,clearTimeout(T.idleTimer),T.workerModule(i,t,r,s,c,p).then(({textureData:R,timing:F})=>{const G=Np(),L=new Uint8Array(R.length*4);for(let O=0;O<R.length;O++)L[O*4+_]=R[O];return wu.webglUtils.renderImageData(h,L,g,y,i,t,1<<3-_),F+=Np()-G,--T.requests===0&&(T.idleTimer=setTimeout(()=>{jm(b)},Rl)),{timing:F}})}function N1(i){i._warm||(wu.webgl.isSupported(i),i._warm=!0)}const Jm=wu.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function fd(){return typeof window=="undefined"&&(self.window=self),function(i){var t={parse:function(c){var p=t._bin,h=new Uint8Array(c);if(p.readASCII(h,0,4)=="ttcf"){var g=4;p.readUshort(h,g),g+=2,p.readUshort(h,g),g+=2;var y=p.readUint(h,g);g+=4;for(var _=[],b=0;b<y;b++){var T=p.readUint(h,g);g+=4,_.push(t._readFont(h,T))}return _}return[t._readFont(h,0)]},_readFont:function(c,p){var h=t._bin,g=p;h.readFixed(c,p),p+=4;var y=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2;for(var _=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],b={_data:c,_offset:g},T={},R=0;R<y;R++){var F=h.readASCII(c,p,4);p+=4,h.readUint(c,p),p+=4;var G=h.readUint(c,p);p+=4;var L=h.readUint(c,p);p+=4,T[F]={offset:G,length:L}}for(R=0;R<_.length;R++){var O=_[R];T[O]&&(b[O.trim()]=t[O.trim()].parse(c,T[O].offset,T[O].length,b))}return b},_tabOffset:function(c,p,h){for(var g=t._bin,y=g.readUshort(c,h+4),_=h+12,b=0;b<y;b++){var T=g.readASCII(c,_,4);_+=4,g.readUint(c,_),_+=4;var R=g.readUint(c,_);if(_+=4,g.readUint(c,_),_+=4,T==p)return R}return 0}};t._bin={readFixed:function(c,p){return(c[p]<<8|c[p+1])+(c[p+2]<<8|c[p+3])/65540},readF2dot14:function(c,p){return t._bin.readShort(c,p)/16384},readInt:function(c,p){return t._bin._view(c).getInt32(p)},readInt8:function(c,p){return t._bin._view(c).getInt8(p)},readShort:function(c,p){return t._bin._view(c).getInt16(p)},readUshort:function(c,p){return t._bin._view(c).getUint16(p)},readUshorts:function(c,p,h){for(var g=[],y=0;y<h;y++)g.push(t._bin.readUshort(c,p+2*y));return g},readUint:function(c,p){return t._bin._view(c).getUint32(p)},readUint64:function(c,p){return 4294967296*t._bin.readUint(c,p)+t._bin.readUint(c,p+4)},readASCII:function(c,p,h){for(var g="",y=0;y<h;y++)g+=String.fromCharCode(c[p+y]);return g},readUnicode:function(c,p,h){for(var g="",y=0;y<h;y++){var _=c[p++]<<8|c[p++];g+=String.fromCharCode(_)}return g},_tdec:typeof window!="undefined"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(c,p,h){var g=t._bin._tdec;return g&&p==0&&h==c.length?g.decode(c):t._bin.readASCII(c,p,h)},readBytes:function(c,p,h){for(var g=[],y=0;y<h;y++)g.push(c[p+y]);return g},readASCIIArray:function(c,p,h){for(var g=[],y=0;y<h;y++)g.push(String.fromCharCode(c[p+y]));return g},_view:function(c){return c._dataView||(c._dataView=c.buffer?new DataView(c.buffer,c.byteOffset,c.byteLength):new DataView(new Uint8Array(c).buffer))}},t._lctf={},t._lctf.parse=function(c,p,h,g,y){var _=t._bin,b={},T=p;_.readFixed(c,p),p+=4;var R=_.readUshort(c,p);p+=2;var F=_.readUshort(c,p);p+=2;var G=_.readUshort(c,p);return p+=2,b.scriptList=t._lctf.readScriptList(c,T+R),b.featureList=t._lctf.readFeatureList(c,T+F),b.lookupList=t._lctf.readLookupList(c,T+G,y),b},t._lctf.readLookupList=function(c,p,h){var g=t._bin,y=p,_=[],b=g.readUshort(c,p);p+=2;for(var T=0;T<b;T++){var R=g.readUshort(c,p);p+=2;var F=t._lctf.readLookupTable(c,y+R,h);_.push(F)}return _},t._lctf.readLookupTable=function(c,p,h){var g=t._bin,y=p,_={tabs:[]};_.ltype=g.readUshort(c,p),p+=2,_.flag=g.readUshort(c,p),p+=2;var b=g.readUshort(c,p);p+=2;for(var T=_.ltype,R=0;R<b;R++){var F=g.readUshort(c,p);p+=2;var G=h(c,T,y+F,_);_.tabs.push(G)}return _},t._lctf.numOfOnes=function(c){for(var p=0,h=0;h<32;h++)c>>>h&1&&p++;return p},t._lctf.readClassDef=function(c,p){var h=t._bin,g=[],y=h.readUshort(c,p);if(p+=2,y==1){var _=h.readUshort(c,p);p+=2;var b=h.readUshort(c,p);p+=2;for(var T=0;T<b;T++)g.push(_+T),g.push(_+T),g.push(h.readUshort(c,p)),p+=2}if(y==2){var R=h.readUshort(c,p);for(p+=2,T=0;T<R;T++)g.push(h.readUshort(c,p)),p+=2,g.push(h.readUshort(c,p)),p+=2,g.push(h.readUshort(c,p)),p+=2}return g},t._lctf.getInterval=function(c,p){for(var h=0;h<c.length;h+=3){var g=c[h],y=c[h+1];if(c[h+2],g<=p&&p<=y)return h}return-1},t._lctf.readCoverage=function(c,p){var h=t._bin,g={};g.fmt=h.readUshort(c,p),p+=2;var y=h.readUshort(c,p);return p+=2,g.fmt==1&&(g.tab=h.readUshorts(c,p,y)),g.fmt==2&&(g.tab=h.readUshorts(c,p,3*y)),g},t._lctf.coverageIndex=function(c,p){var h=c.tab;if(c.fmt==1)return h.indexOf(p);if(c.fmt==2){var g=t._lctf.getInterval(h,p);if(g!=-1)return h[g+2]+(p-h[g])}return-1},t._lctf.readFeatureList=function(c,p){var h=t._bin,g=p,y=[],_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readASCII(c,p,4);p+=4;var R=h.readUshort(c,p);p+=2;var F=t._lctf.readFeatureTable(c,g+R);F.tag=T.trim(),y.push(F)}return y},t._lctf.readFeatureTable=function(c,p){var h=t._bin,g=p,y={},_=h.readUshort(c,p);p+=2,_>0&&(y.featureParams=g+_);var b=h.readUshort(c,p);p+=2,y.tab=[];for(var T=0;T<b;T++)y.tab.push(h.readUshort(c,p+2*T));return y},t._lctf.readScriptList=function(c,p){var h=t._bin,g=p,y={},_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readASCII(c,p,4);p+=4;var R=h.readUshort(c,p);p+=2,y[T.trim()]=t._lctf.readScriptTable(c,g+R)}return y},t._lctf.readScriptTable=function(c,p){var h=t._bin,g=p,y={},_=h.readUshort(c,p);p+=2,y.default=t._lctf.readLangSysTable(c,g+_);var b=h.readUshort(c,p);p+=2;for(var T=0;T<b;T++){var R=h.readASCII(c,p,4);p+=4;var F=h.readUshort(c,p);p+=2,y[R.trim()]=t._lctf.readLangSysTable(c,g+F)}return y},t._lctf.readLangSysTable=function(c,p){var h=t._bin,g={};h.readUshort(c,p),p+=2,g.reqFeature=h.readUshort(c,p),p+=2;var y=h.readUshort(c,p);return p+=2,g.features=h.readUshorts(c,p,y),g},t.CFF={},t.CFF.parse=function(c,p,h){var g=t._bin;(c=new Uint8Array(c.buffer,p,h))[p=0],c[++p],c[++p],c[++p],p++;var y=[];p=t.CFF.readIndex(c,p,y);for(var _=[],b=0;b<y.length-1;b++)_.push(g.readASCII(c,p+y[b],y[b+1]-y[b]));p+=y[y.length-1];var T=[];p=t.CFF.readIndex(c,p,T);var R=[];for(b=0;b<T.length-1;b++)R.push(t.CFF.readDict(c,p+T[b],p+T[b+1]));p+=T[T.length-1];var F=R[0],G=[];p=t.CFF.readIndex(c,p,G);var L=[];for(b=0;b<G.length-1;b++)L.push(g.readASCII(c,p+G[b],G[b+1]-G[b]));if(p+=G[G.length-1],t.CFF.readSubrs(c,p,F),F.CharStrings){p=F.CharStrings,G=[],p=t.CFF.readIndex(c,p,G);var O=[];for(b=0;b<G.length-1;b++)O.push(g.readBytes(c,p+G[b],G[b+1]-G[b]));F.CharStrings=O}if(F.ROS){p=F.FDArray;var P=[];for(p=t.CFF.readIndex(c,p,P),F.FDArray=[],b=0;b<P.length-1;b++){var D=t.CFF.readDict(c,p+P[b],p+P[b+1]);t.CFF._readFDict(c,D,L),F.FDArray.push(D)}p+=P[P.length-1],p=F.FDSelect,F.FDSelect=[];var z=c[p];if(p++,z!=3)throw z;var H=g.readUshort(c,p);for(p+=2,b=0;b<H+1;b++)F.FDSelect.push(g.readUshort(c,p),c[p+2]),p+=3}return F.Encoding&&(F.Encoding=t.CFF.readEncoding(c,F.Encoding,F.CharStrings.length)),F.charset&&(F.charset=t.CFF.readCharset(c,F.charset,F.CharStrings.length)),t.CFF._readFDict(c,F,L),F},t.CFF._readFDict=function(c,p,h){var g;for(var y in p.Private&&(g=p.Private[1],p.Private=t.CFF.readDict(c,g,g+p.Private[0]),p.Private.Subrs&&t.CFF.readSubrs(c,g+p.Private.Subrs,p.Private)),p)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(y)!=-1&&(p[y]=h[p[y]-426+35])},t.CFF.readSubrs=function(c,p,h){var g=t._bin,y=[];p=t.CFF.readIndex(c,p,y);var _,b=y.length;_=b<1240?107:b<33900?1131:32768,h.Bias=_,h.Subrs=[];for(var T=0;T<y.length-1;T++)h.Subrs.push(g.readBytes(c,p+y[T],y[T+1]-y[T]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(c,p){for(var h=0;h<c.charset.length;h++)if(c.charset[h]==p)return h;return-1},t.CFF.glyphBySE=function(c,p){return p<0||p>255?-1:t.CFF.glyphByUnicode(c,t.CFF.tableSE[p])},t.CFF.readEncoding=function(c,p,h){t._bin;var g=[".notdef"],y=c[p];if(p++,y!=0)throw"error: unknown encoding format: "+y;var _=c[p];p++;for(var b=0;b<_;b++)g.push(c[p+b]);return g},t.CFF.readCharset=function(c,p,h){var g=t._bin,y=[".notdef"],_=c[p];if(p++,_==0)for(var b=0;b<h;b++){var T=g.readUshort(c,p);p+=2,y.push(T)}else{if(_!=1&&_!=2)throw"error: format: "+_;for(;y.length<h;){T=g.readUshort(c,p),p+=2;var R=0;for(_==1?(R=c[p],p++):(R=g.readUshort(c,p),p+=2),b=0;b<=R;b++)y.push(T),T++}}return y},t.CFF.readIndex=function(c,p,h){var g=t._bin,y=g.readUshort(c,p)+1,_=c[p+=2];if(p++,_==1)for(var b=0;b<y;b++)h.push(c[p+b]);else if(_==2)for(b=0;b<y;b++)h.push(g.readUshort(c,p+2*b));else if(_==3)for(b=0;b<y;b++)h.push(16777215&g.readUint(c,p+3*b-1));else if(y!=1)throw"unsupported offset size: "+_+", count: "+y;return(p+=y*_)-1},t.CFF.getCharString=function(c,p,h){var g=t._bin,y=c[p],_=c[p+1];c[p+2],c[p+3],c[p+4];var b=1,T=null,R=null;y<=20&&(T=y,b=1),y==12&&(T=100*y+_,b=2),21<=y&&y<=27&&(T=y,b=1),y==28&&(R=g.readShort(c,p+1),b=3),29<=y&&y<=31&&(T=y,b=1),32<=y&&y<=246&&(R=y-139,b=1),247<=y&&y<=250&&(R=256*(y-247)+_+108,b=2),251<=y&&y<=254&&(R=256*-(y-251)-_-108,b=2),y==255&&(R=g.readInt(c,p+1)/65535,b=5),h.val=R!=null?R:"o"+T,h.size=b},t.CFF.readCharString=function(c,p,h){for(var g=p+h,y=t._bin,_=[];p<g;){var b=c[p],T=c[p+1];c[p+2],c[p+3],c[p+4];var R=1,F=null,G=null;b<=20&&(F=b,R=1),b==12&&(F=100*b+T,R=2),b!=19&&b!=20||(F=b,R=2),21<=b&&b<=27&&(F=b,R=1),b==28&&(G=y.readShort(c,p+1),R=3),29<=b&&b<=31&&(F=b,R=1),32<=b&&b<=246&&(G=b-139,R=1),247<=b&&b<=250&&(G=256*(b-247)+T+108,R=2),251<=b&&b<=254&&(G=256*-(b-251)-T-108,R=2),b==255&&(G=y.readInt(c,p+1)/65535,R=5),_.push(G!=null?G:"o"+F),p+=R}return _},t.CFF.readDict=function(c,p,h){for(var g=t._bin,y={},_=[];p<h;){var b=c[p],T=c[p+1];c[p+2],c[p+3],c[p+4];var R=1,F=null,G=null;if(b==28&&(G=g.readShort(c,p+1),R=3),b==29&&(G=g.readInt(c,p+1),R=5),32<=b&&b<=246&&(G=b-139,R=1),247<=b&&b<=250&&(G=256*(b-247)+T+108,R=2),251<=b&&b<=254&&(G=256*-(b-251)-T-108,R=2),b==255)throw G=g.readInt(c,p+1)/65535,R=5,"unknown number";if(b==30){var L=[];for(R=1;;){var O=c[p+R];R++;var P=O>>4,D=15&O;if(P!=15&&L.push(P),D!=15&&L.push(D),D==15)break}for(var z="",H=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],Q=0;Q<L.length;Q++)z+=H[L[Q]];G=parseFloat(z)}b<=21&&(F=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][b],R=1,b==12&&(F=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][T],R=2)),F!=null?(y[F]=_.length==1?_[0]:_,_=[]):_.push(G),p+=R}return y},t.cmap={},t.cmap.parse=function(c,p,h){c=new Uint8Array(c.buffer,p,h),p=0;var g=t._bin,y={};g.readUshort(c,p),p+=2;var _=g.readUshort(c,p);p+=2;var b=[];y.tables=[];for(var T=0;T<_;T++){var R=g.readUshort(c,p);p+=2;var F=g.readUshort(c,p);p+=2;var G=g.readUint(c,p);p+=4;var L="p"+R+"e"+F,O=b.indexOf(G);if(O==-1){var P;O=y.tables.length,b.push(G);var D=g.readUshort(c,G);D==0?P=t.cmap.parse0(c,G):D==4?P=t.cmap.parse4(c,G):D==6?P=t.cmap.parse6(c,G):D==12?P=t.cmap.parse12(c,G):nl.debug("unknown format: "+D,R,F,G),y.tables.push(P)}if(y[L]!=null)throw"multiple tables for one platform+encoding";y[L]=O}return y},t.cmap.parse0=function(c,p){var h=t._bin,g={};g.format=h.readUshort(c,p),p+=2;var y=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2,g.map=[];for(var _=0;_<y-6;_++)g.map.push(c[p+_]);return g},t.cmap.parse4=function(c,p){var h=t._bin,g=p,y={};y.format=h.readUshort(c,p),p+=2;var _=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2;var b=h.readUshort(c,p);p+=2;var T=b/2;y.searchRange=h.readUshort(c,p),p+=2,y.entrySelector=h.readUshort(c,p),p+=2,y.rangeShift=h.readUshort(c,p),p+=2,y.endCount=h.readUshorts(c,p,T),p+=2*T,p+=2,y.startCount=h.readUshorts(c,p,T),p+=2*T,y.idDelta=[];for(var R=0;R<T;R++)y.idDelta.push(h.readShort(c,p)),p+=2;for(y.idRangeOffset=h.readUshorts(c,p,T),p+=2*T,y.glyphIdArray=[];p<g+_;)y.glyphIdArray.push(h.readUshort(c,p)),p+=2;return y},t.cmap.parse6=function(c,p){var h=t._bin,g={};g.format=h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,g.firstCode=h.readUshort(c,p),p+=2;var y=h.readUshort(c,p);p+=2,g.glyphIdArray=[];for(var _=0;_<y;_++)g.glyphIdArray.push(h.readUshort(c,p)),p+=2;return g},t.cmap.parse12=function(c,p){var h=t._bin,g={};g.format=h.readUshort(c,p),p+=2,p+=2,h.readUint(c,p),p+=4,h.readUint(c,p),p+=4;var y=h.readUint(c,p);p+=4,g.groups=[];for(var _=0;_<y;_++){var b=p+12*_,T=h.readUint(c,b+0),R=h.readUint(c,b+4),F=h.readUint(c,b+8);g.groups.push([T,R,F])}return g},t.glyf={},t.glyf.parse=function(c,p,h,g){for(var y=[],_=0;_<g.maxp.numGlyphs;_++)y.push(null);return y},t.glyf._parseGlyf=function(c,p){var h=t._bin,g=c._data,y=t._tabOffset(g,"glyf",c._offset)+c.loca[p];if(c.loca[p]==c.loca[p+1])return null;var _={};if(_.noc=h.readShort(g,y),y+=2,_.xMin=h.readShort(g,y),y+=2,_.yMin=h.readShort(g,y),y+=2,_.xMax=h.readShort(g,y),y+=2,_.yMax=h.readShort(g,y),y+=2,_.xMin>=_.xMax||_.yMin>=_.yMax)return null;if(_.noc>0){_.endPts=[];for(var b=0;b<_.noc;b++)_.endPts.push(h.readUshort(g,y)),y+=2;var T=h.readUshort(g,y);if(y+=2,g.length-y<T)return null;_.instructions=h.readBytes(g,y,T),y+=T;var R=_.endPts[_.noc-1]+1;for(_.flags=[],b=0;b<R;b++){var F=g[y];if(y++,_.flags.push(F),(8&F)!=0){var G=g[y];y++;for(var L=0;L<G;L++)_.flags.push(F),b++}}for(_.xs=[],b=0;b<R;b++){var O=(2&_.flags[b])!=0,P=(16&_.flags[b])!=0;O?(_.xs.push(P?g[y]:-g[y]),y++):P?_.xs.push(0):(_.xs.push(h.readShort(g,y)),y+=2)}for(_.ys=[],b=0;b<R;b++)O=(4&_.flags[b])!=0,P=(32&_.flags[b])!=0,O?(_.ys.push(P?g[y]:-g[y]),y++):P?_.ys.push(0):(_.ys.push(h.readShort(g,y)),y+=2);var D=0,z=0;for(b=0;b<R;b++)D+=_.xs[b],z+=_.ys[b],_.xs[b]=D,_.ys[b]=z}else{var H;_.parts=[];do{H=h.readUshort(g,y),y+=2;var Q={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(_.parts.push(Q),Q.glyphIndex=h.readUshort(g,y),y+=2,1&H){var W=h.readShort(g,y);y+=2;var Y=h.readShort(g,y);y+=2}else W=h.readInt8(g,y),y++,Y=h.readInt8(g,y),y++;2&H?(Q.m.tx=W,Q.m.ty=Y):(Q.p1=W,Q.p2=Y),8&H?(Q.m.a=Q.m.d=h.readF2dot14(g,y),y+=2):64&H?(Q.m.a=h.readF2dot14(g,y),y+=2,Q.m.d=h.readF2dot14(g,y),y+=2):128&H&&(Q.m.a=h.readF2dot14(g,y),y+=2,Q.m.b=h.readF2dot14(g,y),y+=2,Q.m.c=h.readF2dot14(g,y),y+=2,Q.m.d=h.readF2dot14(g,y),y+=2)}while(32&H);if(256&H){var K=h.readUshort(g,y);for(y+=2,_.instr=[],b=0;b<K;b++)_.instr.push(g[y]),y++}}return _},t.GPOS={},t.GPOS.parse=function(c,p,h,g){return t._lctf.parse(c,p,h,g,t.GPOS.subt)},t.GPOS.subt=function(c,p,h,g){var y=t._bin,_=h,b={};if(b.fmt=y.readUshort(c,h),h+=2,p==1||p==2||p==3||p==7||p==8&&b.fmt<=2){var T=y.readUshort(c,h);h+=2,b.coverage=t._lctf.readCoverage(c,T+_)}if(p==1&&b.fmt==1){var R=y.readUshort(c,h);h+=2;var F=t._lctf.numOfOnes(R);R!=0&&(b.pos=t.GPOS.readValueRecord(c,h,R))}else if(p==2&&b.fmt>=1&&b.fmt<=2){R=y.readUshort(c,h),h+=2;var G=y.readUshort(c,h);h+=2,F=t._lctf.numOfOnes(R);var L=t._lctf.numOfOnes(G);if(b.fmt==1){b.pairsets=[];var O=y.readUshort(c,h);h+=2;for(var P=0;P<O;P++){var D=_+y.readUshort(c,h);h+=2;var z=y.readUshort(c,D);D+=2;for(var H=[],Q=0;Q<z;Q++){var W=y.readUshort(c,D);D+=2,R!=0&&(ae=t.GPOS.readValueRecord(c,D,R),D+=2*F),G!=0&&(xe=t.GPOS.readValueRecord(c,D,G),D+=2*L),H.push({gid2:W,val1:ae,val2:xe})}b.pairsets.push(H)}}if(b.fmt==2){var Y=y.readUshort(c,h);h+=2;var K=y.readUshort(c,h);h+=2;var ie=y.readUshort(c,h);h+=2;var ce=y.readUshort(c,h);for(h+=2,b.classDef1=t._lctf.readClassDef(c,_+Y),b.classDef2=t._lctf.readClassDef(c,_+K),b.matrix=[],P=0;P<ie;P++){var ge=[];for(Q=0;Q<ce;Q++){var ae=null,xe=null;R!=0&&(ae=t.GPOS.readValueRecord(c,h,R),h+=2*F),G!=0&&(xe=t.GPOS.readValueRecord(c,h,G),h+=2*L),ge.push({val1:ae,val2:xe})}b.matrix.push(ge)}}}else{if(p==9&&b.fmt==1){var ve=y.readUshort(c,h);h+=2;var Be=y.readUint(c,h);if(h+=4,g.ltype==9)g.ltype=ve;else if(g.ltype!=ve)throw"invalid extension substitution";return t.GPOS.subt(c,g.ltype,_+Be)}nl.debug("unsupported GPOS table LookupType",p,"format",b.fmt)}return b},t.GPOS.readValueRecord=function(c,p,h){var g=t._bin,y=[];return y.push(1&h?g.readShort(c,p):0),p+=1&h?2:0,y.push(2&h?g.readShort(c,p):0),p+=2&h?2:0,y.push(4&h?g.readShort(c,p):0),p+=4&h?2:0,y.push(8&h?g.readShort(c,p):0),p+=8&h?2:0,y},t.GSUB={},t.GSUB.parse=function(c,p,h,g){return t._lctf.parse(c,p,h,g,t.GSUB.subt)},t.GSUB.subt=function(c,p,h,g){var y=t._bin,_=h,b={};if(b.fmt=y.readUshort(c,h),h+=2,p!=1&&p!=4&&p!=5&&p!=6)return null;if(p==1||p==4||p==5&&b.fmt<=2||p==6&&b.fmt<=2){var T=y.readUshort(c,h);h+=2,b.coverage=t._lctf.readCoverage(c,_+T)}if(p==1&&b.fmt>=1&&b.fmt<=2){if(b.fmt==1)b.delta=y.readShort(c,h),h+=2;else if(b.fmt==2){var R=y.readUshort(c,h);h+=2,b.newg=y.readUshorts(c,h,R),h+=2*b.newg.length}}else if(p==4){b.vals=[],R=y.readUshort(c,h),h+=2;for(var F=0;F<R;F++){var G=y.readUshort(c,h);h+=2,b.vals.push(t.GSUB.readLigatureSet(c,_+G))}}else if(p==5&&b.fmt==2){if(b.fmt==2){var L=y.readUshort(c,h);h+=2,b.cDef=t._lctf.readClassDef(c,_+L),b.scset=[];var O=y.readUshort(c,h);for(h+=2,F=0;F<O;F++){var P=y.readUshort(c,h);h+=2,b.scset.push(P==0?null:t.GSUB.readSubClassSet(c,_+P))}}}else if(p==6&&b.fmt==3){if(b.fmt==3){for(F=0;F<3;F++){R=y.readUshort(c,h),h+=2;for(var D=[],z=0;z<R;z++)D.push(t._lctf.readCoverage(c,_+y.readUshort(c,h+2*z)));h+=2*R,F==0&&(b.backCvg=D),F==1&&(b.inptCvg=D),F==2&&(b.ahedCvg=D)}R=y.readUshort(c,h),h+=2,b.lookupRec=t.GSUB.readSubstLookupRecords(c,h,R)}}else{if(p==7&&b.fmt==1){var H=y.readUshort(c,h);h+=2;var Q=y.readUint(c,h);if(h+=4,g.ltype==9)g.ltype=H;else if(g.ltype!=H)throw"invalid extension substitution";return t.GSUB.subt(c,g.ltype,_+Q)}nl.debug("unsupported GSUB table LookupType",p,"format",b.fmt)}return b},t.GSUB.readSubClassSet=function(c,p){var h=t._bin.readUshort,g=p,y=[],_=h(c,p);p+=2;for(var b=0;b<_;b++){var T=h(c,p);p+=2,y.push(t.GSUB.readSubClassRule(c,g+T))}return y},t.GSUB.readSubClassRule=function(c,p){var h=t._bin.readUshort,g={},y=h(c,p),_=h(c,p+=2);p+=2,g.input=[];for(var b=0;b<y-1;b++)g.input.push(h(c,p)),p+=2;return g.substLookupRecords=t.GSUB.readSubstLookupRecords(c,p,_),g},t.GSUB.readSubstLookupRecords=function(c,p,h){for(var g=t._bin.readUshort,y=[],_=0;_<h;_++)y.push(g(c,p),g(c,p+2)),p+=4;return y},t.GSUB.readChainSubClassSet=function(c,p){var h=t._bin,g=p,y=[],_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readUshort(c,p);p+=2,y.push(t.GSUB.readChainSubClassRule(c,g+T))}return y},t.GSUB.readChainSubClassRule=function(c,p){for(var h=t._bin,g={},y=["backtrack","input","lookahead"],_=0;_<y.length;_++){var b=h.readUshort(c,p);p+=2,_==1&&b--,g[y[_]]=h.readUshorts(c,p,b),p+=2*g[y[_]].length}return b=h.readUshort(c,p),p+=2,g.subst=h.readUshorts(c,p,2*b),p+=2*g.subst.length,g},t.GSUB.readLigatureSet=function(c,p){var h=t._bin,g=p,y=[],_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readUshort(c,p);p+=2,y.push(t.GSUB.readLigature(c,g+T))}return y},t.GSUB.readLigature=function(c,p){var h=t._bin,g={chain:[]};g.nglyph=h.readUshort(c,p),p+=2;var y=h.readUshort(c,p);p+=2;for(var _=0;_<y-1;_++)g.chain.push(h.readUshort(c,p)),p+=2;return g},t.head={},t.head.parse=function(c,p,h){var g=t._bin,y={};return g.readFixed(c,p),p+=4,y.fontRevision=g.readFixed(c,p),p+=4,g.readUint(c,p),p+=4,g.readUint(c,p),p+=4,y.flags=g.readUshort(c,p),p+=2,y.unitsPerEm=g.readUshort(c,p),p+=2,y.created=g.readUint64(c,p),p+=8,y.modified=g.readUint64(c,p),p+=8,y.xMin=g.readShort(c,p),p+=2,y.yMin=g.readShort(c,p),p+=2,y.xMax=g.readShort(c,p),p+=2,y.yMax=g.readShort(c,p),p+=2,y.macStyle=g.readUshort(c,p),p+=2,y.lowestRecPPEM=g.readUshort(c,p),p+=2,y.fontDirectionHint=g.readShort(c,p),p+=2,y.indexToLocFormat=g.readShort(c,p),p+=2,y.glyphDataFormat=g.readShort(c,p),p+=2,y},t.hhea={},t.hhea.parse=function(c,p,h){var g=t._bin,y={};return g.readFixed(c,p),p+=4,y.ascender=g.readShort(c,p),p+=2,y.descender=g.readShort(c,p),p+=2,y.lineGap=g.readShort(c,p),p+=2,y.advanceWidthMax=g.readUshort(c,p),p+=2,y.minLeftSideBearing=g.readShort(c,p),p+=2,y.minRightSideBearing=g.readShort(c,p),p+=2,y.xMaxExtent=g.readShort(c,p),p+=2,y.caretSlopeRise=g.readShort(c,p),p+=2,y.caretSlopeRun=g.readShort(c,p),p+=2,y.caretOffset=g.readShort(c,p),p+=2,p+=8,y.metricDataFormat=g.readShort(c,p),p+=2,y.numberOfHMetrics=g.readUshort(c,p),p+=2,y},t.hmtx={},t.hmtx.parse=function(c,p,h,g){for(var y=t._bin,_={aWidth:[],lsBearing:[]},b=0,T=0,R=0;R<g.maxp.numGlyphs;R++)R<g.hhea.numberOfHMetrics&&(b=y.readUshort(c,p),p+=2,T=y.readShort(c,p),p+=2),_.aWidth.push(b),_.lsBearing.push(T);return _},t.kern={},t.kern.parse=function(c,p,h,g){var y=t._bin,_=y.readUshort(c,p);if(p+=2,_==1)return t.kern.parseV1(c,p-2,h,g);var b=y.readUshort(c,p);p+=2;for(var T={glyph1:[],rval:[]},R=0;R<b;R++){p+=2,h=y.readUshort(c,p),p+=2;var F=y.readUshort(c,p);p+=2;var G=F>>>8;if((G&=15)!=0)throw"unknown kern table format: "+G;p=t.kern.readFormat0(c,p,T)}return T},t.kern.parseV1=function(c,p,h,g){var y=t._bin;y.readFixed(c,p),p+=4;var _=y.readUint(c,p);p+=4;for(var b={glyph1:[],rval:[]},T=0;T<_;T++){y.readUint(c,p),p+=4;var R=y.readUshort(c,p);p+=2,y.readUshort(c,p),p+=2;var F=R>>>8;if((F&=15)!=0)throw"unknown kern table format: "+F;p=t.kern.readFormat0(c,p,b)}return b},t.kern.readFormat0=function(c,p,h){var g=t._bin,y=-1,_=g.readUshort(c,p);p+=2,g.readUshort(c,p),p+=2,g.readUshort(c,p),p+=2,g.readUshort(c,p),p+=2;for(var b=0;b<_;b++){var T=g.readUshort(c,p);p+=2;var R=g.readUshort(c,p);p+=2;var F=g.readShort(c,p);p+=2,T!=y&&(h.glyph1.push(T),h.rval.push({glyph2:[],vals:[]}));var G=h.rval[h.rval.length-1];G.glyph2.push(R),G.vals.push(F),y=T}return p},t.loca={},t.loca.parse=function(c,p,h,g){var y=t._bin,_=[],b=g.head.indexToLocFormat,T=g.maxp.numGlyphs+1;if(b==0)for(var R=0;R<T;R++)_.push(y.readUshort(c,p+(R<<1))<<1);if(b==1)for(R=0;R<T;R++)_.push(y.readUint(c,p+(R<<2)));return _},t.maxp={},t.maxp.parse=function(c,p,h){var g=t._bin,y={},_=g.readUint(c,p);return p+=4,y.numGlyphs=g.readUshort(c,p),p+=2,_==65536&&(y.maxPoints=g.readUshort(c,p),p+=2,y.maxContours=g.readUshort(c,p),p+=2,y.maxCompositePoints=g.readUshort(c,p),p+=2,y.maxCompositeContours=g.readUshort(c,p),p+=2,y.maxZones=g.readUshort(c,p),p+=2,y.maxTwilightPoints=g.readUshort(c,p),p+=2,y.maxStorage=g.readUshort(c,p),p+=2,y.maxFunctionDefs=g.readUshort(c,p),p+=2,y.maxInstructionDefs=g.readUshort(c,p),p+=2,y.maxStackElements=g.readUshort(c,p),p+=2,y.maxSizeOfInstructions=g.readUshort(c,p),p+=2,y.maxComponentElements=g.readUshort(c,p),p+=2,y.maxComponentDepth=g.readUshort(c,p),p+=2),y},t.name={},t.name.parse=function(c,p,h){var g=t._bin,y={};g.readUshort(c,p),p+=2;var _=g.readUshort(c,p);p+=2,g.readUshort(c,p);for(var b,T=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],R=p+=2,F=0;F<_;F++){var G=g.readUshort(c,p);p+=2;var L=g.readUshort(c,p);p+=2;var O=g.readUshort(c,p);p+=2;var P=g.readUshort(c,p);p+=2;var D=g.readUshort(c,p);p+=2;var z=g.readUshort(c,p);p+=2;var H,Q=T[P],W=R+12*_+z;if(G==0)H=g.readUnicode(c,W,D/2);else if(G==3&&L==0)H=g.readUnicode(c,W,D/2);else if(L==0)H=g.readASCII(c,W,D);else if(L==1)H=g.readUnicode(c,W,D/2);else if(L==3)H=g.readUnicode(c,W,D/2);else{if(G!=1)throw"unknown encoding "+L+", platformID: "+G;H=g.readASCII(c,W,D),nl.debug("reading unknown MAC encoding "+L+" as ASCII")}var Y="p"+G+","+O.toString(16);y[Y]==null&&(y[Y]={}),y[Y][Q!==void 0?Q:P]=H,y[Y]._lang=O}for(var K in y)if(y[K].postScriptName!=null&&y[K]._lang==1033)return y[K];for(var K in y)if(y[K].postScriptName!=null&&y[K]._lang==0)return y[K];for(var K in y)if(y[K].postScriptName!=null&&y[K]._lang==3084)return y[K];for(var K in y)if(y[K].postScriptName!=null)return y[K];for(var K in y){b=K;break}return nl.debug("returning name table with languageID "+y[b]._lang),y[b]},t["OS/2"]={},t["OS/2"].parse=function(c,p,h){var g=t._bin.readUshort(c,p);p+=2;var y={};if(g==0)t["OS/2"].version0(c,p,y);else if(g==1)t["OS/2"].version1(c,p,y);else if(g==2||g==3||g==4)t["OS/2"].version2(c,p,y);else{if(g!=5)throw"unknown OS/2 table version: "+g;t["OS/2"].version5(c,p,y)}return y},t["OS/2"].version0=function(c,p,h){var g=t._bin;return h.xAvgCharWidth=g.readShort(c,p),p+=2,h.usWeightClass=g.readUshort(c,p),p+=2,h.usWidthClass=g.readUshort(c,p),p+=2,h.fsType=g.readUshort(c,p),p+=2,h.ySubscriptXSize=g.readShort(c,p),p+=2,h.ySubscriptYSize=g.readShort(c,p),p+=2,h.ySubscriptXOffset=g.readShort(c,p),p+=2,h.ySubscriptYOffset=g.readShort(c,p),p+=2,h.ySuperscriptXSize=g.readShort(c,p),p+=2,h.ySuperscriptYSize=g.readShort(c,p),p+=2,h.ySuperscriptXOffset=g.readShort(c,p),p+=2,h.ySuperscriptYOffset=g.readShort(c,p),p+=2,h.yStrikeoutSize=g.readShort(c,p),p+=2,h.yStrikeoutPosition=g.readShort(c,p),p+=2,h.sFamilyClass=g.readShort(c,p),p+=2,h.panose=g.readBytes(c,p,10),p+=10,h.ulUnicodeRange1=g.readUint(c,p),p+=4,h.ulUnicodeRange2=g.readUint(c,p),p+=4,h.ulUnicodeRange3=g.readUint(c,p),p+=4,h.ulUnicodeRange4=g.readUint(c,p),p+=4,h.achVendID=[g.readInt8(c,p),g.readInt8(c,p+1),g.readInt8(c,p+2),g.readInt8(c,p+3)],p+=4,h.fsSelection=g.readUshort(c,p),p+=2,h.usFirstCharIndex=g.readUshort(c,p),p+=2,h.usLastCharIndex=g.readUshort(c,p),p+=2,h.sTypoAscender=g.readShort(c,p),p+=2,h.sTypoDescender=g.readShort(c,p),p+=2,h.sTypoLineGap=g.readShort(c,p),p+=2,h.usWinAscent=g.readUshort(c,p),p+=2,h.usWinDescent=g.readUshort(c,p),p+=2},t["OS/2"].version1=function(c,p,h){var g=t._bin;return p=t["OS/2"].version0(c,p,h),h.ulCodePageRange1=g.readUint(c,p),p+=4,h.ulCodePageRange2=g.readUint(c,p),p+=4},t["OS/2"].version2=function(c,p,h){var g=t._bin;return p=t["OS/2"].version1(c,p,h),h.sxHeight=g.readShort(c,p),p+=2,h.sCapHeight=g.readShort(c,p),p+=2,h.usDefault=g.readUshort(c,p),p+=2,h.usBreak=g.readUshort(c,p),p+=2,h.usMaxContext=g.readUshort(c,p),p+=2},t["OS/2"].version5=function(c,p,h){var g=t._bin;return p=t["OS/2"].version2(c,p,h),h.usLowerOpticalPointSize=g.readUshort(c,p),p+=2,h.usUpperOpticalPointSize=g.readUshort(c,p),p+=2},t.post={},t.post.parse=function(c,p,h){var g=t._bin,y={};return y.version=g.readFixed(c,p),p+=4,y.italicAngle=g.readFixed(c,p),p+=4,y.underlinePosition=g.readShort(c,p),p+=2,y.underlineThickness=g.readShort(c,p),p+=2,y},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(c,p){var h=c.cmap,g=-1;if(h.p0e4!=null?g=h.p0e4:h.p3e1!=null?g=h.p3e1:h.p1e0!=null?g=h.p1e0:h.p0e3!=null&&(g=h.p0e3),g==-1)throw"no familiar platform and encoding!";var y=h.tables[g];if(y.format==0)return p>=y.map.length?0:y.map[p];if(y.format==4){for(var _=-1,b=0;b<y.endCount.length;b++)if(p<=y.endCount[b]){_=b;break}return _==-1||y.startCount[_]>p?0:65535&(y.idRangeOffset[_]!=0?y.glyphIdArray[p-y.startCount[_]+(y.idRangeOffset[_]>>1)-(y.idRangeOffset.length-_)]:p+y.idDelta[_])}if(y.format==12){if(p>y.groups[y.groups.length-1][1])return 0;for(b=0;b<y.groups.length;b++){var T=y.groups[b];if(T[0]<=p&&p<=T[1])return T[2]+(p-T[0])}return 0}throw"unknown cmap table format "+y.format},t.U.glyphToPath=function(c,p){var h={cmds:[],crds:[]};if(c.SVG&&c.SVG.entries[p]){var g=c.SVG.entries[p];return g==null?h:(typeof g=="string"&&(g=t.SVG.toPath(g),c.SVG.entries[p]=g),g)}if(c.CFF){var y={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:c.CFF.Private?c.CFF.Private.defaultWidthX:0,open:!1},_=c.CFF,b=c.CFF.Private;if(_.ROS){for(var T=0;_.FDSelect[T+2]<=p;)T+=2;b=_.FDArray[_.FDSelect[T+1]].Private}t.U._drawCFF(c.CFF.CharStrings[p],y,_,b,h)}else c.glyf&&t.U._drawGlyf(p,c,h);return h},t.U._drawGlyf=function(c,p,h){var g=p.glyf[c];g==null&&(g=p.glyf[c]=t.glyf._parseGlyf(p,c)),g!=null&&(g.noc>-1?t.U._simpleGlyph(g,h):t.U._compoGlyph(g,p,h))},t.U._simpleGlyph=function(c,p){for(var h=0;h<c.noc;h++){for(var g=h==0?0:c.endPts[h-1]+1,y=c.endPts[h],_=g;_<=y;_++){var b=_==g?y:_-1,T=_==y?g:_+1,R=1&c.flags[_],F=1&c.flags[b],G=1&c.flags[T],L=c.xs[_],O=c.ys[_];if(_==g)if(R){if(!F){t.U.P.moveTo(p,L,O);continue}t.U.P.moveTo(p,c.xs[b],c.ys[b])}else F?t.U.P.moveTo(p,c.xs[b],c.ys[b]):t.U.P.moveTo(p,(c.xs[b]+L)/2,(c.ys[b]+O)/2);R?F&&t.U.P.lineTo(p,L,O):G?t.U.P.qcurveTo(p,L,O,c.xs[T],c.ys[T]):t.U.P.qcurveTo(p,L,O,(L+c.xs[T])/2,(O+c.ys[T])/2)}t.U.P.closePath(p)}},t.U._compoGlyph=function(c,p,h){for(var g=0;g<c.parts.length;g++){var y={cmds:[],crds:[]},_=c.parts[g];t.U._drawGlyf(_.glyphIndex,p,y);for(var b=_.m,T=0;T<y.crds.length;T+=2){var R=y.crds[T],F=y.crds[T+1];h.crds.push(R*b.a+F*b.b+b.tx),h.crds.push(R*b.c+F*b.d+b.ty)}for(T=0;T<y.cmds.length;T++)h.cmds.push(y.cmds[T])}},t.U._getGlyphClass=function(c,p){var h=t._lctf.getInterval(p,c);return h==-1?0:p[h+2]},t.U.getPairAdjustment=function(c,p,h){var g=!1;if(c.GPOS)for(var y=c.GPOS,_=y.lookupList,b=y.featureList,T=[],R=0;R<b.length;R++){var F=b[R];if(F.tag=="kern"){g=!0;for(var G=0;G<F.tab.length;G++)if(!T[F.tab[G]]){T[F.tab[G]]=!0;for(var L=_[F.tab[G]],O=0;O<L.tabs.length;O++)if(L.tabs[O]!=null){var P,D=L.tabs[O];if((!D.coverage||(P=t._lctf.coverageIndex(D.coverage,p))!=-1)&&L.ltype!=1){if(L.ltype==2){var z=null;if(D.fmt==1){var H=D.pairsets[P];for(R=0;R<H.length;R++)H[R].gid2==h&&(z=H[R])}else if(D.fmt==2){var Q=t.U._getGlyphClass(p,D.classDef1),W=t.U._getGlyphClass(h,D.classDef2);z=D.matrix[Q][W]}if(z){var Y=0;return z.val1&&z.val1[2]&&(Y+=z.val1[2]),z.val2&&z.val2[0]&&(Y+=z.val2[0]),Y}}}}}}}if(c.kern&&!g){var K=c.kern.glyph1.indexOf(p);if(K!=-1){var ie=c.kern.rval[K].glyph2.indexOf(h);if(ie!=-1)return c.kern.rval[K].vals[ie]}}return 0},t.U._applySubs=function(c,p,h,g){for(var y=c.length-p-1,_=0;_<h.tabs.length;_++)if(h.tabs[_]!=null){var b,T=h.tabs[_];if(!T.coverage||(b=t._lctf.coverageIndex(T.coverage,c[p]))!=-1){if(h.ltype==1)c[p],T.fmt==1?c[p]=c[p]+T.delta:c[p]=T.newg[b];else if(h.ltype==4)for(var R=T.vals[b],F=0;F<R.length;F++){var G=R[F],L=G.chain.length;if(!(L>y)){for(var O=!0,P=0,D=0;D<L;D++){for(;c[p+P+(1+D)]==-1;)P++;G.chain[D]!=c[p+P+(1+D)]&&(O=!1)}if(O){for(c[p]=G.nglyph,D=0;D<L+P;D++)c[p+D+1]=-1;break}}}else if(h.ltype==5&&T.fmt==2)for(var z=t._lctf.getInterval(T.cDef,c[p]),H=T.cDef[z+2],Q=T.scset[H],W=0;W<Q.length;W++){var Y=Q[W],K=Y.input;if(!(K.length>y)){for(O=!0,D=0;D<K.length;D++){var ie=t._lctf.getInterval(T.cDef,c[p+1+D]);if(z==-1&&T.cDef[ie+2]!=K[D]){O=!1;break}}if(O){var ce=Y.substLookupRecords;for(F=0;F<ce.length;F+=2)ce[F],ce[F+1]}}}else if(h.ltype==6&&T.fmt==3){if(!t.U._glsCovered(c,T.backCvg,p-T.backCvg.length)||!t.U._glsCovered(c,T.inptCvg,p)||!t.U._glsCovered(c,T.ahedCvg,p+T.inptCvg.length))continue;var ge=T.lookupRec;for(W=0;W<ge.length;W+=2){z=ge[W];var ae=g[ge[W+1]];t.U._applySubs(c,p+z,ae,g)}}}}},t.U._glsCovered=function(c,p,h){for(var g=0;g<p.length;g++)if(t._lctf.coverageIndex(p[g],c[h+g])==-1)return!1;return!0},t.U.glyphsToPath=function(c,p,h){for(var g={cmds:[],crds:[]},y=0,_=0;_<p.length;_++){var b=p[_];if(b!=-1){for(var T=_<p.length-1&&p[_+1]!=-1?p[_+1]:0,R=t.U.glyphToPath(c,b),F=0;F<R.crds.length;F+=2)g.crds.push(R.crds[F]+y),g.crds.push(R.crds[F+1]);for(h&&g.cmds.push(h),F=0;F<R.cmds.length;F++)g.cmds.push(R.cmds[F]);h&&g.cmds.push("X"),y+=c.hmtx.aWidth[b],_<p.length-1&&(y+=t.U.getPairAdjustment(c,b,T))}}return g},t.U.P={},t.U.P.moveTo=function(c,p,h){c.cmds.push("M"),c.crds.push(p,h)},t.U.P.lineTo=function(c,p,h){c.cmds.push("L"),c.crds.push(p,h)},t.U.P.curveTo=function(c,p,h,g,y,_,b){c.cmds.push("C"),c.crds.push(p,h,g,y,_,b)},t.U.P.qcurveTo=function(c,p,h,g,y){c.cmds.push("Q"),c.crds.push(p,h,g,y)},t.U.P.closePath=function(c){c.cmds.push("Z")},t.U._drawCFF=function(c,p,h,g,y){for(var _=p.stack,b=p.nStems,T=p.haveWidth,R=p.width,F=p.open,G=0,L=p.x,O=p.y,P=0,D=0,z=0,H=0,Q=0,W=0,Y=0,K=0,ie=0,ce=0,ge={val:0,size:0};G<c.length;){t.CFF.getCharString(c,G,ge);var ae=ge.val;if(G+=ge.size,ae=="o1"||ae=="o18")_.length%2!=0&&!T&&(R=_.shift()+g.nominalWidthX),b+=_.length>>1,_.length=0,T=!0;else if(ae=="o3"||ae=="o23")_.length%2!=0&&!T&&(R=_.shift()+g.nominalWidthX),b+=_.length>>1,_.length=0,T=!0;else if(ae=="o4")_.length>1&&!T&&(R=_.shift()+g.nominalWidthX,T=!0),F&&t.U.P.closePath(y),O+=_.pop(),t.U.P.moveTo(y,L,O),F=!0;else if(ae=="o5")for(;_.length>0;)L+=_.shift(),O+=_.shift(),t.U.P.lineTo(y,L,O);else if(ae=="o6"||ae=="o7")for(var xe=_.length,ve=ae=="o6",Be=0;Be<xe;Be++){var Ue=_.shift();ve?L+=Ue:O+=Ue,ve=!ve,t.U.P.lineTo(y,L,O)}else if(ae=="o8"||ae=="o24"){xe=_.length;for(var Ie=0;Ie+6<=xe;)P=L+_.shift(),D=O+_.shift(),z=P+_.shift(),H=D+_.shift(),L=z+_.shift(),O=H+_.shift(),t.U.P.curveTo(y,P,D,z,H,L,O),Ie+=6;ae=="o24"&&(L+=_.shift(),O+=_.shift(),t.U.P.lineTo(y,L,O))}else{if(ae=="o11")break;if(ae=="o1234"||ae=="o1235"||ae=="o1236"||ae=="o1237")ae=="o1234"&&(D=O,z=(P=L+_.shift())+_.shift(),ce=H=D+_.shift(),W=H,K=O,L=(Y=(Q=(ie=z+_.shift())+_.shift())+_.shift())+_.shift(),t.U.P.curveTo(y,P,D,z,H,ie,ce),t.U.P.curveTo(y,Q,W,Y,K,L,O)),ae=="o1235"&&(P=L+_.shift(),D=O+_.shift(),z=P+_.shift(),H=D+_.shift(),ie=z+_.shift(),ce=H+_.shift(),Q=ie+_.shift(),W=ce+_.shift(),Y=Q+_.shift(),K=W+_.shift(),L=Y+_.shift(),O=K+_.shift(),_.shift(),t.U.P.curveTo(y,P,D,z,H,ie,ce),t.U.P.curveTo(y,Q,W,Y,K,L,O)),ae=="o1236"&&(P=L+_.shift(),D=O+_.shift(),z=P+_.shift(),ce=H=D+_.shift(),W=H,Y=(Q=(ie=z+_.shift())+_.shift())+_.shift(),K=W+_.shift(),L=Y+_.shift(),t.U.P.curveTo(y,P,D,z,H,ie,ce),t.U.P.curveTo(y,Q,W,Y,K,L,O)),ae=="o1237"&&(P=L+_.shift(),D=O+_.shift(),z=P+_.shift(),H=D+_.shift(),ie=z+_.shift(),ce=H+_.shift(),Q=ie+_.shift(),W=ce+_.shift(),Y=Q+_.shift(),K=W+_.shift(),Math.abs(Y-L)>Math.abs(K-O)?L=Y+_.shift():O=K+_.shift(),t.U.P.curveTo(y,P,D,z,H,ie,ce),t.U.P.curveTo(y,Q,W,Y,K,L,O));else if(ae=="o14"){if(_.length>0&&!T&&(R=_.shift()+h.nominalWidthX,T=!0),_.length==4){var Ne=_.shift(),Le=_.shift(),Ye=_.shift(),Ce=_.shift(),Ee=t.CFF.glyphBySE(h,Ye),_e=t.CFF.glyphBySE(h,Ce);t.U._drawCFF(h.CharStrings[Ee],p,h,g,y),p.x=Ne,p.y=Le,t.U._drawCFF(h.CharStrings[_e],p,h,g,y)}F&&(t.U.P.closePath(y),F=!1)}else if(ae=="o19"||ae=="o20")_.length%2!=0&&!T&&(R=_.shift()+g.nominalWidthX),b+=_.length>>1,_.length=0,T=!0,G+=b+7>>3;else if(ae=="o21")_.length>2&&!T&&(R=_.shift()+g.nominalWidthX,T=!0),O+=_.pop(),L+=_.pop(),F&&t.U.P.closePath(y),t.U.P.moveTo(y,L,O),F=!0;else if(ae=="o22")_.length>1&&!T&&(R=_.shift()+g.nominalWidthX,T=!0),L+=_.pop(),F&&t.U.P.closePath(y),t.U.P.moveTo(y,L,O),F=!0;else if(ae=="o25"){for(;_.length>6;)L+=_.shift(),O+=_.shift(),t.U.P.lineTo(y,L,O);P=L+_.shift(),D=O+_.shift(),z=P+_.shift(),H=D+_.shift(),L=z+_.shift(),O=H+_.shift(),t.U.P.curveTo(y,P,D,z,H,L,O)}else if(ae=="o26")for(_.length%2&&(L+=_.shift());_.length>0;)P=L,D=O+_.shift(),L=z=P+_.shift(),O=(H=D+_.shift())+_.shift(),t.U.P.curveTo(y,P,D,z,H,L,O);else if(ae=="o27")for(_.length%2&&(O+=_.shift());_.length>0;)D=O,z=(P=L+_.shift())+_.shift(),H=D+_.shift(),L=z+_.shift(),O=H,t.U.P.curveTo(y,P,D,z,H,L,O);else if(ae=="o10"||ae=="o29"){var oe=ae=="o10"?g:h;if(_.length==0)nl.debug("error: empty stack");else{var me=_.pop(),Te=oe.Subrs[me+oe.Bias];p.x=L,p.y=O,p.nStems=b,p.haveWidth=T,p.width=R,p.open=F,t.U._drawCFF(Te,p,h,g,y),L=p.x,O=p.y,b=p.nStems,T=p.haveWidth,R=p.width,F=p.open}}else if(ae=="o30"||ae=="o31"){var ye=_.length,ze=(Ie=0,ae=="o31");for(Ie+=ye-(xe=-3&ye);Ie<xe;)ze?(D=O,z=(P=L+_.shift())+_.shift(),O=(H=D+_.shift())+_.shift(),xe-Ie==5?(L=z+_.shift(),Ie++):L=z,ze=!1):(P=L,D=O+_.shift(),z=P+_.shift(),H=D+_.shift(),L=z+_.shift(),xe-Ie==5?(O=H+_.shift(),Ie++):O=H,ze=!0),t.U.P.curveTo(y,P,D,z,H,L,O),Ie+=4}else{if((ae+"").charAt(0)=="o")throw nl.debug("Unknown operation: "+ae,c),ae;_.push(ae)}}}p.x=L,p.y=O,p.nStems=b,p.haveWidth=T,p.width=R,p.open=F};var r=t,s={Typr:r};return i.Typr=r,i.default=s,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function sv(){return function(i){var t=Uint8Array,r=Uint16Array,s=Uint32Array,c=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=function(ae,xe){for(var ve=new r(31),Be=0;Be<31;++Be)ve[Be]=xe+=1<<ae[Be-1];var Ue=new s(ve[30]);for(Be=1;Be<30;++Be)for(var Ie=ve[Be];Ie<ve[Be+1];++Ie)Ue[Ie]=Ie-ve[Be]<<5|Be;return[ve,Ue]},y=g(c,2),_=y[0],b=y[1];_[28]=258,b[258]=28;for(var T=g(p,0)[0],R=new r(32768),F=0;F<32768;++F){var G=(43690&F)>>>1|(21845&F)<<1;G=(61680&(G=(52428&G)>>>2|(13107&G)<<2))>>>4|(3855&G)<<4,R[F]=((65280&G)>>>8|(255&G)<<8)>>>1}var L=function(ae,xe,ve){for(var Be=ae.length,Ue=0,Ie=new r(xe);Ue<Be;++Ue)++Ie[ae[Ue]-1];var Ne,Le=new r(xe);for(Ue=0;Ue<xe;++Ue)Le[Ue]=Le[Ue-1]+Ie[Ue-1]<<1;if(ve){Ne=new r(1<<xe);var Ye=15-xe;for(Ue=0;Ue<Be;++Ue)if(ae[Ue])for(var Ce=Ue<<4|ae[Ue],Ee=xe-ae[Ue],_e=Le[ae[Ue]-1]++<<Ee,oe=_e|(1<<Ee)-1;_e<=oe;++_e)Ne[R[_e]>>>Ye]=Ce}else for(Ne=new r(Be),Ue=0;Ue<Be;++Ue)ae[Ue]&&(Ne[Ue]=R[Le[ae[Ue]-1]++]>>>15-ae[Ue]);return Ne},O=new t(288);for(F=0;F<144;++F)O[F]=8;for(F=144;F<256;++F)O[F]=9;for(F=256;F<280;++F)O[F]=7;for(F=280;F<288;++F)O[F]=8;var P=new t(32);for(F=0;F<32;++F)P[F]=5;var D=L(O,9,1),z=L(P,5,1),H=function(ae){for(var xe=ae[0],ve=1;ve<ae.length;++ve)ae[ve]>xe&&(xe=ae[ve]);return xe},Q=function(ae,xe,ve){var Be=xe/8|0;return(ae[Be]|ae[Be+1]<<8)>>(7&xe)&ve},W=function(ae,xe){var ve=xe/8|0;return(ae[ve]|ae[ve+1]<<8|ae[ve+2]<<16)>>(7&xe)},Y=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],K=function(ae,xe,ve){var Be=new Error(xe||Y[ae]);if(Be.code=ae,Error.captureStackTrace&&Error.captureStackTrace(Be,K),!ve)throw Be;return Be},ie=function(ae,xe,ve){var Be=ae.length;if(!Be||ve&&!ve.l&&Be<5)return xe||new t(0);var Ue=!xe||ve,Ie=!ve||ve.i;ve||(ve={}),xe||(xe=new t(3*Be));var Ne,Le=function(rr){var Xr=xe.length;if(rr>Xr){var ri=new t(Math.max(2*Xr,rr));ri.set(xe),xe=ri}},Ye=ve.f||0,Ce=ve.p||0,Ee=ve.b||0,_e=ve.l,oe=ve.d,me=ve.m,Te=ve.n,ye=8*Be;do{if(!_e){ve.f=Ye=Q(ae,Ce,1);var ze=Q(ae,Ce+1,3);if(Ce+=3,!ze){var Mt=ae[(Mn=((Ne=Ce)/8|0)+(7&Ne&&1)+4)-4]|ae[Mn-3]<<8,At=Mn+Mt;if(At>Be){Ie&&K(0);break}Ue&&Le(Ee+Mt),xe.set(ae.subarray(Mn,At),Ee),ve.b=Ee+=Mt,ve.p=Ce=8*At;continue}if(ze==1)_e=D,oe=z,me=9,Te=5;else if(ze==2){var gt=Q(ae,Ce,31)+257,ot=Q(ae,Ce+10,15)+4,Qt=gt+Q(ae,Ce+5,31)+1;Ce+=14;for(var Gt=new t(Qt),Bt=new t(19),qe=0;qe<ot;++qe)Bt[h[qe]]=Q(ae,Ce+3*qe,7);Ce+=3*ot;var Ge=H(Bt),Ot=(1<<Ge)-1,gn=L(Bt,Ge,1);for(qe=0;qe<Qt;){var Mn,Ut=gn[Q(ae,Ce,Ot)];if(Ce+=15&Ut,(Mn=Ut>>>4)<16)Gt[qe++]=Mn;else{var Nn=0,ar=0;for(Mn==16?(ar=3+Q(ae,Ce,3),Ce+=2,Nn=Gt[qe-1]):Mn==17?(ar=3+Q(ae,Ce,7),Ce+=3):Mn==18&&(ar=11+Q(ae,Ce,127),Ce+=7);ar--;)Gt[qe++]=Nn}}var Cr=Gt.subarray(0,gt),dr=Gt.subarray(gt);me=H(Cr),Te=H(dr),_e=L(Cr,me,1),oe=L(dr,Te,1)}else K(1);if(Ce>ye){Ie&&K(0);break}}Ue&&Le(Ee+131072);for(var bi=(1<<me)-1,fi=(1<<Te)-1,Sr=Ce;;Sr=Ce){var Dr=(Nn=_e[W(ae,Ce)&bi])>>>4;if((Ce+=15&Nn)>ye){Ie&&K(0);break}if(Nn||K(2),Dr<256)xe[Ee++]=Dr;else{if(Dr==256){Sr=Ce,_e=null;break}var Ii=Dr-254;if(Dr>264){var Ao=c[qe=Dr-257];Ii=Q(ae,Ce,(1<<Ao)-1)+_[qe],Ce+=Ao}var ut=oe[W(ae,Ce)&fi],yn=ut>>>4;if(ut||K(3),Ce+=15&ut,dr=T[yn],yn>3&&(Ao=p[yn],dr+=W(ae,Ce)&(1<<Ao)-1,Ce+=Ao),Ce>ye){Ie&&K(0);break}Ue&&Le(Ee+131072);for(var Rn=Ee+Ii;Ee<Rn;Ee+=4)xe[Ee]=xe[Ee-dr],xe[Ee+1]=xe[Ee+1-dr],xe[Ee+2]=xe[Ee+2-dr],xe[Ee+3]=xe[Ee+3-dr];Ee=Rn}}ve.l=_e,ve.p=Sr,ve.b=Ee,_e&&(Ye=1,ve.m=me,ve.d=oe,ve.n=Te)}while(!Ye);return Ee==xe.length?xe:function(rr,Xr,ri){(Xr==null||Xr<0)&&(Xr=0),(ri==null||ri>rr.length)&&(ri=rr.length);var ci=new(rr instanceof r?r:rr instanceof s?s:t)(ri-Xr);return ci.set(rr.subarray(Xr,ri)),ci}(xe,0,Ee)},ce=new t(0),ge=typeof TextDecoder!="undefined"&&new TextDecoder;try{ge.decode(ce,{stream:!0})}catch(ae){}return i.convert_streams=function(ae){var xe=new DataView(ae),ve=0;function Be(){var gt=xe.getUint16(ve);return ve+=2,gt}function Ue(){var gt=xe.getUint32(ve);return ve+=4,gt}function Ie(gt){Mt.setUint16(At,gt),At+=2}function Ne(gt){Mt.setUint32(At,gt),At+=4}for(var Le={signature:Ue(),flavor:Ue(),length:Ue(),numTables:Be(),reserved:Be(),totalSfntSize:Ue(),majorVersion:Be(),minorVersion:Be(),metaOffset:Ue(),metaLength:Ue(),metaOrigLength:Ue(),privOffset:Ue(),privLength:Ue()},Ye=0;Math.pow(2,Ye)<=Le.numTables;)Ye++;Ye--;for(var Ce=16*Math.pow(2,Ye),Ee=16*Le.numTables-Ce,_e=12,oe=[],me=0;me<Le.numTables;me++)oe.push({tag:Ue(),offset:Ue(),compLength:Ue(),origLength:Ue(),origChecksum:Ue()}),_e+=16;var Te,ye=new Uint8Array(12+16*oe.length+oe.reduce(function(gt,ot){return gt+ot.origLength+4},0)),ze=ye.buffer,Mt=new DataView(ze),At=0;return Ne(Le.flavor),Ie(Le.numTables),Ie(Ce),Ie(Ye),Ie(Ee),oe.forEach(function(gt){Ne(gt.tag),Ne(gt.origChecksum),Ne(_e),Ne(gt.origLength),gt.outOffset=_e,(_e+=gt.origLength)%4!=0&&(_e+=4-_e%4)}),oe.forEach(function(gt){var ot,Qt=ae.slice(gt.offset,gt.offset+gt.compLength);if(gt.compLength!=gt.origLength){var Gt=new Uint8Array(gt.origLength);ot=new Uint8Array(Qt,2),ie(ot,Gt)}else Gt=new Uint8Array(Qt);ye.set(Gt,gt.outOffset);var Bt=0;(_e=gt.outOffset+gt.origLength)%4!=0&&(Bt=4-_e%4),ye.set(new Uint8Array(Bt).buffer,gt.outOffset+gt.origLength),Te=_e+Bt}),ze.slice(0,Te)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function av(i,t){const r={M:2,L:2,Q:4,C:6,Z:0},s={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},c=1,p=2,h=4,g=8,y=16,_=32;let b;function T(Q){if(!b){const W={R:p,L:c,D:h,C:y,U:_,T:g};b=new Map;for(let Y in s){let K=0;s[Y].split(",").forEach(ie=>{let[ce,ge]=ie.split("+");ce=parseInt(ce,36),ge=ge?parseInt(ge,36):0,b.set(K+=ce,W[Y]);for(let ae=ge;ae--;)b.set(++K,W[Y])})}}return b.get(Q)||_}const R=1,F=2,G=3,L=4,O=[null,"isol","init","fina","medi"];function P(Q){const W=new Uint8Array(Q.length);let Y=_,K=R,ie=-1;for(let ce=0;ce<Q.length;ce++){const ge=Q.codePointAt(ce);let ae=T(ge)|0,xe=R;ae&g||(Y&(c|h|y)?ae&(p|h|y)?(xe=G,(K===R||K===G)&&W[ie]++):ae&(c|_)&&(K===F||K===L)&&W[ie]--:Y&(p|_)&&(K===F||K===L)&&W[ie]--,K=W[ce]=xe,Y=ae,ie=ce,ge>65535&&ce++)}return W}function D(Q,W){const Y=[];for(let ie=0;ie<W.length;ie++){const ce=W.codePointAt(ie);ce>65535&&ie++,Y.push(i.U.codeToGlyph(Q,ce))}const K=Q.GSUB;if(K){const{lookupList:ie,featureList:ce}=K;let ge;const ae=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,xe=[];ce.forEach(ve=>{if(ae.test(ve.tag))for(let Be=0;Be<ve.tab.length;Be++){if(xe[ve.tab[Be]])continue;xe[ve.tab[Be]]=!0;const Ue=ie[ve.tab[Be]],Ie=/^(isol|init|fina|medi)$/.test(ve.tag);Ie&&!ge&&(ge=P(W));for(let Ne=0;Ne<Y.length;Ne++)(!ge||!Ie||O[ge[Ne]]===ve.tag)&&i.U._applySubs(Y,Ne,Ue,ie)}})}return Y}function z(...Q){for(let W=0;W<Q.length;W++)if(typeof Q[W]=="number")return Q[W]}function H(Q){const W=Object.create(null),Y=Q["OS/2"],K=Q.hhea,ie=Q.head.unitsPerEm,ce=z(Y&&Y.sTypoAscender,K&&K.ascender,ie),ge={unitsPerEm:ie,ascender:ce,descender:z(Y&&Y.sTypoDescender,K&&K.descender,0),capHeight:z(Y&&Y.sCapHeight,ce),xHeight:z(Y&&Y.sxHeight,ce),lineGap:z(Y&&Y.sTypoLineGap,K&&K.lineGap),forEachGlyph(ae,xe,ve,Be){let Ue=0;const Ie=1/ge.unitsPerEm*xe,Ne=D(Q,ae);let Le=0,Ye=-1;return Ne.forEach((Ce,Ee)=>{if(Ce!==-1){let _e=W[Ce];if(!_e){const{cmds:oe,crds:me}=i.U.glyphToPath(Q,Ce);let Te="",ye=0;for(let ot=0,Qt=oe.length;ot<Qt;ot++){const Gt=r[oe[ot]];Te+=oe[ot];for(let Bt=1;Bt<=Gt;Bt++)Te+=(Bt>1?",":"")+me[ye++]}let ze,Mt,At,gt;if(me.length){ze=Mt=1/0,At=gt=-1/0;for(let ot=0,Qt=me.length;ot<Qt;ot+=2){let Gt=me[ot],Bt=me[ot+1];Gt<ze&&(ze=Gt),Bt<Mt&&(Mt=Bt),Gt>At&&(At=Gt),Bt>gt&&(gt=Bt)}}else ze=At=Mt=gt=0;_e=W[Ce]={index:Ce,advanceWidth:Q.hmtx.aWidth[Ce],xMin:ze,yMin:Mt,xMax:At,yMax:gt,path:Te,pathCommandCount:oe.length}}Ye!==-1&&(Ue+=i.U.getPairAdjustment(Q,Ye,Ce)*Ie),Be.call(null,_e,Ue,Le),_e.advanceWidth&&(Ue+=_e.advanceWidth*Ie),ve&&(Ue+=ve*xe),Ye=Ce}Le+=ae.codePointAt(Le)>65535?2:1}),Ue}};return ge}return function(W){const Y=new Uint8Array(W,0,4),K=i._bin.readASCII(Y,0,4);if(K==="wOFF")W=t(W);else if(K==="wOF2")throw new Error("woff2 fonts not supported");return H(i.parse(W)[0])}}const Hp=ud({name:"Typr Font Parser",dependencies:[fd,sv,av],init(i,t,r){const s=i(),c=t();return r(s,c)}}),gd={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},H1=new o.Color;let j1=!1;function md(){return(self.performance||Date).now()}function W1(i){j1?nl.warn("configureTextBuilder called after first font request; will be ignored."):qm(gd,i)}const Ah=Object.create(null);function V1(i,t){j1=!0,i=qm({},i);const r=md();if(i.font=_3(i.font||gd.defaultFontURL),i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||gd.sdfGlyphSize,i.colorRanges!=null){let T={};for(let R in i.colorRanges)if(i.colorRanges.hasOwnProperty(R)){let F=i.colorRanges[R];typeof F!="number"&&(F=H1.set(F).getHex()),T[R]=F}i.colorRanges=T}Object.freeze(i);const{textureWidth:s,sdfExponent:c}=gd,{sdfGlyphSize:p}=i,h=s/p*4;let g=Ah[p];if(!g){const T=document.createElement("canvas");T.width=s,T.height=p*256/h,g=Ah[p]={glyphCount:0,sdfGlyphSize:p,sdfCanvas:T,sdfTexture:new o.Texture(T,void 0,void 0,void 0,o.LinearFilter,o.LinearFilter),contextLost:!1,glyphsByFont:new Map},g.sdfTexture.generateMipmaps=!1,y3(g)}const{sdfTexture:y,sdfCanvas:_}=g;let b=g.glyphsByFont.get(i.font);b||g.glyphsByFont.set(i.font,b=new Map),lv(i).then(T=>{const{glyphIds:R,glyphPositions:F,fontSize:G,unitsPerEm:L,timings:O}=T,P=[],D=new Float32Array(R.length*4),z=G/L;let H=0,Q=0;const W=md();R.forEach((ge,ae)=>{let xe=b.get(ge);if(!xe){const{path:Ie,pathBounds:Ne}=T.glyphData[ge],Le=Math.max(Ne[2]-Ne[0],Ne[3]-Ne[1])/p*(gd.sdfMargin*p+.5),Ye=g.glyphCount++,Ce=[Ne[0]-Le,Ne[1]-Le,Ne[2]+Le,Ne[3]+Le];b.set(ge,xe={path:Ie,atlasIndex:Ye,sdfViewBox:Ce}),P.push(xe)}const{sdfViewBox:ve}=xe,Be=F[Q++],Ue=F[Q++];D[H++]=Be+ve[0]*z,D[H++]=Ue+ve[1]*z,D[H++]=Be+ve[2]*z,D[H++]=Ue+ve[3]*z,R[ae]=xe.atlasIndex}),O.quads=(O.quads||0)+(md()-W);const Y=md();O.sdf={};const K=_.height,ie=Math.ceil(g.glyphCount/h),ce=Math.pow(2,Math.ceil(Math.log2(ie*p)));ce>K&&(nl.info(`Increasing SDF texture size ${K}->${ce}`),Jm(_,s,ce),y.dispose()),Promise.all(P.map(ge=>Q1(ge,g,i.gpuAccelerateSDF).then(({timing:ae})=>{O.sdf[ge.atlasIndex]=ae}))).then(()=>{P.length&&!g.contextLost&&(Pc(g),y.needsUpdate=!0),O.sdfTotal=md()-Y,O.total=md()-r,t(Object.freeze({parameters:i,sdfTexture:y,sdfGlyphSize:p,sdfExponent:c,glyphBounds:D,glyphAtlasIndices:R,glyphColors:T.glyphColors,caretPositions:T.caretPositions,caretHeight:T.caretHeight,chunkedBounds:T.chunkedBounds,ascender:T.ascender,descender:T.descender,lineHeight:T.lineHeight,capHeight:T.capHeight,xHeight:T.xHeight,topBaseline:T.topBaseline,blockBounds:T.blockBounds,visibleBounds:T.visibleBounds,timings:T.timings}))})}),Promise.resolve().then(()=>{g.contextLost||N1(_)})}function Q1({path:i,atlasIndex:t,sdfViewBox:r},{sdfGlyphSize:s,sdfCanvas:c,contextLost:p},h){if(p)return Promise.resolve({timing:-1});const{textureWidth:g,sdfExponent:y}=gd,_=Math.max(r[2]-r[0],r[3]-r[1]),b=Math.floor(t/4),T=b%(g/s)*s,R=Math.floor(b/(g/s))*s,F=t%4;return nv(s,s,i,r,_,y,c,T,R,F,h)}function y3(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",r=>{nl.log("Context Lost",r),r.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",r=>{nl.log("Context Restored",r),i.contextLost=!1;const s=[];i.glyphsByFont.forEach(c=>{c.forEach(p=>{s.push(Q1(p,i,!0))})}),Promise.all(s).then(()=>{Pc(i),i.sdfTexture.needsUpdate=!0})})}function v3({font:i,characters:t,sdfGlyphSize:r},s){let c=Array.isArray(t)?t.join(`
`):""+t;V1({font:i,sdfGlyphSize:r,text:c},s)}function qm(i,t){for(let r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i}let Zm;function _3(i){return Zm||(Zm=typeof document=="undefined"?{}:document.createElement("a")),Zm.href=i,Zm.href}function Pc(i){if(typeof createImageBitmap!="function"){nl.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:r}=i,{width:s,height:c}=t,p=i.sdfCanvas.getContext("webgl");let h=r.image.data;(!h||h.length!==s*c*4)&&(h=new Uint8Array(s*c*4),r.image={width:s,height:c,data:h},r.flipY=!1,r.isDataTexture=!0),p.readPixels(0,0,s,c,p.RGBA,p.UNSIGNED_BYTE,h)}}const lv=ud({name:"Typesetter",dependencies:[ud({name:"Typesetter",dependencies:[gd,Hp,A3,Lg],init(i,t,r,s){const{defaultFontURL:c}=i;return r(t,s(),{defaultFontURL:c})}})],init(i){return function(t){return new Promise(r=>{i.typeset(t,r)})}},getTransferables(i){const t=[i.glyphPositions.buffer,i.glyphIds.buffer];return i.caretPositions&&t.push(i.caretPositions.buffer),i.glyphColors&&t.push(i.glyphColors.buffer),t}});function cv(){Object.keys(Ah).forEach(i=>{const t=Ah[i].sdfCanvas,{width:r,height:s}=t;nl.log("%c.",`
      background: url(${t.toDataURL()});
      background-size: ${r}px ${s}px;
      color: transparent;
      font-size: 0;
      line-height: ${s}px;
      padding-left: ${r}px;
    `)})}const Ug={};function K1(i){let t=Ug[i];if(!t){const r=new o.PlaneGeometry(1,1,i,i),s=r.clone(),c=r.attributes,p=s.attributes,h=new o.BufferGeometry,g=c.uv.count;for(let y=0;y<g;y++)p.position.array[y*3]*=-1,p.normal.array[y*3+2]*=-1;["position","normal","uv"].forEach(y=>{h.setAttribute(y,new o.Float32BufferAttribute([...c[y].array,...p[y].array],c[y].itemSize))}),h.setIndex([...r.index.array,...s.index.array.map(y=>y+g)]),h.translate(.5,.5,0),t=Ug[i]=h}return t}const Y1="aTroikaGlyphBounds",$m="aTroikaGlyphIndex",pv="aTroikaGlyphColor";class uv extends o.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new o.Sphere,this.boundingBox=new o.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const r=this.getIndex().count;this.setDrawRange(t===o.BackSide?r/2:0,t===o.DoubleSide?r:r/2)}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let r=K1(t);["position","normal","uv"].forEach(s=>{this.attributes[s]=r.attributes[s].clone()}),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,r,s,c,p){J1(this,Y1,t,4),J1(this,$m,r,1),J1(this,pv,p,3),this._blockBounds=s,this._chunkedBounds=c,this.instanceCount=r.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:r,boundingBox:s}=this;if(r){const{PI:c,floor:p,min:h,max:g,sin:y,cos:_}=Math,b=c/2,T=c*2,R=Math.abs(r),F=t[0]/R,G=t[2]/R,L=p((F+b)/T)!==p((G+b)/T)?-R:h(y(F)*R,y(G)*R),O=p((F-b)/T)!==p((G-b)/T)?R:g(y(F)*R,y(G)*R),P=p((F+c)/T)!==p((G+c)/T)?R*2:g(R-_(F)*R,R-_(G)*R);s.min.set(L,t[1],r<0?-P:0),s.max.set(O,t[3],r<0?0:P)}else s.min.set(t[0],t[1],0),s.max.set(t[2],t[3],0);s.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let r=this.getAttribute($m).count,s=this._chunkedBounds;if(s)for(let c=s.length;c--;){r=s[c].end;let p=s[c].rect;if(p[1]<t.w&&p[3]>t.y&&p[0]<t.z&&p[2]>t.x)break}this.instanceCount=r}}function J1(i,t,r,s){const c=i.getAttribute(t);r?c&&c.array.length===r.length?(c.array.set(r),c.needsUpdate=!0):(i.setAttribute(t,new o.InstancedBufferAttribute(r,s)),delete i._maxInstanceCount,i.dispose()):c&&i.deleteAttribute(t)}const E3=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,b3=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Ng=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,M3=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function x3(i){const t=Af(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new o.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new o.Vector4(0,0,0,0)},uTroikaClipRect:{value:new o.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new o.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new o.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new o.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:E3,vertexTransform:b3,fragmentDefs:Ng,fragmentColorTransform:M3,customRewriter({vertexShader:r,fragmentShader:s}){let c=/\buniform\s+vec3\s+diffuse\b/;return c.test(s)&&(s=s.replace(c,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),c.test(r)||(r=r.replace(hh,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:r,fragmentShader:s}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const q1=new o.MeshBasicMaterial({color:16777215,side:o.DoubleSide,transparent:!0}),dv=8421504,_f=new o.Matrix4,Ef=new o.Vector3,e0=new o.Vector3,Ad=[],hv=new o.Vector3,Hg="+x+y";function t0(i){return Array.isArray(i)?i[0]:i}let n0=()=>{const i=new o.Mesh(new o.PlaneGeometry(1,1),q1);return n0=()=>i,i},r0=()=>{const i=new o.Mesh(new o.PlaneGeometry(1,1,32,1),q1);return r0=()=>i,i};const fv={type:"syncstart"},jg={type:"synccomplete"},bf=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],i0=bf.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Wg extends o.Mesh{constructor(){const t=new uv;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=dv,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Hg,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(fv),V1({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},r=>{this._isSyncing=!1,this._textRenderInfo=r,this.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.blockBounds,r.chunkedBounds,r.glyphColors);const s=this._queuedSyncs;s&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{s.forEach(c=>c&&c())})),this.dispatchEvent(jg),t&&t()})))}onBeforeRender(t,r,s,c,p,h){this.sync(),p.isTroikaTextMaterial&&this._prepareForRender(p),p._hadOwnSide=p.hasOwnProperty("side"),this.geometry.setSide(p._actualSide=p.side),p.side=o.FrontSide}onAfterRender(t,r,s,c,p,h){p._hadOwnSide?p.side=p._actualSide:delete p.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=q1.clone());if((!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=x3(r),r.addEventListener("dispose",function s(){r.removeEventListener("dispose",s),t.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let s=t._outlineMtl;return s||(s=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),s.isTextOutlineMaterial=!0,s.depthWrite=!1,s.map=null,t.addEventListener("dispose",function c(){t.removeEventListener("dispose",c),s.dispose()})),[s,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return t0(this.material).getDepthMaterial()}get customDistanceMaterial(){return t0(this.material).getDistanceMaterial()}_prepareForRender(t){const r=t.isTextOutlineMaterial,s=t.uniforms,c=this.textRenderInfo;if(c){const{sdfTexture:g,blockBounds:y}=c;s.uTroikaSDFTexture.value=g,s.uTroikaSDFTextureSize.value.set(g.image.width,g.image.height),s.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,s.uTroikaSDFExponent.value=c.sdfExponent,s.uTroikaTotalBounds.value.fromArray(y),s.uTroikaUseGlyphColors.value=!r&&!!c.glyphColors;let _=0,b=0,T=0,R,F,G,L=0,O=0;if(r){let{outlineWidth:D,outlineOffsetX:z,outlineOffsetY:H,outlineBlur:Q,outlineOpacity:W}=this;_=this._parsePercent(D)||0,b=Math.max(0,this._parsePercent(Q)||0),R=W,L=this._parsePercent(z)||0,O=this._parsePercent(H)||0}else T=Math.max(0,this._parsePercent(this.strokeWidth)||0),T&&(G=this.strokeColor,s.uTroikaStrokeColor.value.set(G==null?dv:G),F=this.strokeOpacity,F==null&&(F=1)),R=this.fillOpacity;s.uTroikaDistanceOffset.value=_,s.uTroikaPositionOffset.value.set(L,O),s.uTroikaBlurRadius.value=b,s.uTroikaStrokeWidth.value=T,s.uTroikaStrokeOpacity.value=F,s.uTroikaFillOpacity.value=R==null?1:R,s.uTroikaCurveRadius.value=this.curveRadius||0;let P=this.clipRect;if(P&&Array.isArray(P)&&P.length===4)s.uTroikaClipRect.value.fromArray(P);else{const D=(this.fontSize||.1)*100;s.uTroikaClipRect.value.set(y[0]-D,y[1]-D,y[2]+D,y[3]+D)}this.geometry.applyClipRect(s.uTroikaClipRect.value)}s.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const p=r?this.outlineColor||0:this.color;if(p==null)delete t.color;else{const g=t.hasOwnProperty("color")?t.color:t.color=new o.Color;(p!==g._input||typeof p=="object")&&g.set(g._input=p)}let h=this.orientation||Hg;if(h!==t._orientation){let g=s.uTroikaOrient.value;h=h.replace(/[^-+xyz]/g,"");let y=h!==Hg&&h.match(/^([-+])([xyz])([-+])([xyz])$/);if(y){let[,_,b,T,R]=y;Ef.set(0,0,0)[b]=_==="-"?1:-1,e0.set(0,0,0)[R]=T==="-"?-1:1,_f.lookAt(hv,Ef.cross(e0),e0),g.setFromMatrix4(_f)}else g.identity();t._orientation=h}}_parsePercent(t){if(typeof t=="string"){let r=t.match(/^(-?[\d.]+)%$/),s=r?parseFloat(r[1]):NaN;t=(isNaN(s)?0:s/100)*this.fontSize}return t}localPositionToTextCoords(t,r=new o.Vector2){r.copy(t);const s=this.curveRadius;return s&&(r.x=Math.atan2(t.x,Math.abs(s)-Math.abs(t.z))*Math.abs(s)),r}worldPositionToTextCoords(t,r=new o.Vector2){return Ef.copy(t),this.localPositionToTextCoords(this.worldToLocal(Ef),r)}raycast(t,r){const{textRenderInfo:s,curveRadius:c}=this;if(s){const p=s.blockBounds,h=c?r0():n0(),g=h.geometry,{position:y,uv:_}=g.attributes;for(let b=0;b<_.count;b++){let T=p[0]+_.getX(b)*(p[2]-p[0]);const R=p[1]+_.getY(b)*(p[3]-p[1]);let F=0;c&&(F=c-Math.cos(T/c)*c,T=Math.sin(T/c)*c),y.setXYZ(b,T,R,F)}g.boundingSphere=this.geometry.boundingSphere,g.boundingBox=this.geometry.boundingBox,h.matrixWorld=this.matrixWorld,h.material.side=this.material.side,Ad.length=0,h.raycast(t,Ad);for(let b=0;b<Ad.length;b++)Ad[b].object=this,r.push(Ad[b])}}copy(t){const r=this.geometry;return super.copy(t),this.geometry=r,i0.forEach(s=>{this[s]=t[s]}),this}clone(){return new this.constructor().copy(this)}}bf.forEach(i=>{const t="_private_"+i;Object.defineProperty(Wg.prototype,i,{get(){return this[t]},set(r){r!==this[t]&&(this[t]=r,this._needsSync=!0)}})});function Vg(i,t,r){let s=null;const{caretHeight:c}=i,p=o0(i);let h=1/0;return p.forEach((g,y)=>{Math.abs(r-(y+c/2))<Math.abs(r-(h+c/2))&&(h=y)}),p.get(h).forEach(g=>{(!s||Math.abs(t-g.x)<Math.abs(t-s.x))&&(s=g)}),s}const Qg=new WeakMap;function yh(i,t,r){let s;if(i){let c=Qg.get(i);if(c&&c.start===t&&c.end===r)return c.rects;const{caretPositions:p,caretHeight:h}=i;if(r<t){const y=t;t=r,r=y}t=Math.max(t,0),r=Math.min(r,p.length+1),s=[];let g=null;for(let y=t;y<r;y++){const _=p[y*3],b=p[y*3+1],T=Math.min(_,b),R=Math.max(_,b),F=p[y*3+2];(!g||F!==g.bottom||T>g.right||R<g.left)&&(g={left:1/0,right:-1/0,bottom:F,top:F+h},s.push(g)),g.left=Math.min(T,g.left),g.right=Math.max(R,g.right)}s.sort((y,_)=>_.bottom-y.bottom||y.left-_.left);for(let y=s.length-1;y-- >0;){const _=s[y],b=s[y+1];_.bottom===b.bottom&&_.left<=b.right&&_.right>=b.left&&(b.left=Math.min(b.left,_.left),b.right=Math.max(b.right,_.right),s.splice(y,1))}Qg.set(i,{start:t,end:r,rects:s})}return s}const Xg=new WeakMap;function o0(i){let t=Xg.get(i);if(!t){const{caretPositions:r,caretHeight:s}=i;t=new Map;for(let c=0;c<r.length;c+=3){const p=r[c+2];let h=t.get(p);h||t.set(p,h=[]),h.push({x:r[c],y:p,height:s,charIndex:c/3}),c+3>=r.length&&h.push({x:r[c+1],y:p,height:s,charIndex:c/3+1})}}return Xg.set(i,t),t}var Il=A(58139);const Z1=d.forwardRef((b,_)=>{var T=b,{sdfGlyphSize:i=64,anchorX:t="center",anchorY:r="middle",font:s,fontSize:c=1,children:p,characters:h,onSync:g}=T,y=An(T,["sdfGlyphSize","anchorX","anchorY","font","fontSize","children","characters","onSync"]);const R=(0,E.z)(({invalidate:O})=>O),[F]=d.useState(()=>new Wg),[G,L]=d.useMemo(()=>{const O=[];let P="";return d.Children.forEach(p,D=>{typeof D=="string"||typeof D=="number"?P+=D:O.push(D)}),[O,P]},[p]);return(0,Il.Rq)(()=>new Promise(O=>v3({font:s,characters:h},O)),["troika-text",s,h]),d.useLayoutEffect(()=>void F.sync(()=>{R(),g&&g(F)})),d.useEffect(()=>()=>F.dispose(),[F]),d.createElement("primitive",(0,w.Z)({object:F,ref:_,font:s,text:L,anchorX:t,anchorY:r,fontSize:c,sdfGlyphSize:i},y),G)});class s0 extends o.ExtrudeGeometry{constructor(t,r={}){const R=r,{bevelEnabled:s=!1,bevelSize:c=8,bevelThickness:p=10,font:h,height:g=50,size:y=100,lineHeight:_=1,letterSpacing:b=0}=R,T=An(R,["bevelEnabled","bevelSize","bevelThickness","font","height","size","lineHeight","letterSpacing"]);if(h===void 0)super();else{const F=h.generateShapes(t,y,{lineHeight:_,letterSpacing:b});super(F,Xo(jn({},T),{bevelEnabled:s,bevelSize:c,bevelThickness:p,depth:g}))}this.type="TextGeometry"}}var Oa=A(25108);const Mf=(i,t)=>{const r=i[0].index!==null,s=new Set(Object.keys(i[0].attributes)),c=new Set(Object.keys(i[0].morphAttributes)),p={},h={},g=i[0].morphTargetsRelative,y=new BufferGeometry;let _=0;if(i.forEach((b,T)=>{let R=0;if(r!==(b.index!==null))return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let F in b.attributes){if(!s.has(F))return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+'. All geometries must have compatible attributes; make sure "'+F+'" attribute exists among all geometries, or in none of them.'),null;p[F]===void 0&&(p[F]=[]),p[F].push(b.attributes[F]),R++}if(R!==s.size)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". Make sure all geometries have the same number of attributes."),null;if(g!==b.morphTargetsRelative)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let F in b.morphAttributes){if(!c.has(F))return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+".  .morphAttributes must be consistent throughout all geometries."),null;h[F]===void 0&&(h[F]=[]),h[F].push(b.morphAttributes[F])}if(y.userData.mergedUserData=y.userData.mergedUserData||[],y.userData.mergedUserData.push(b.userData),t){let F;if(b.index)F=b.index.count;else if(b.attributes.position!==void 0)F=b.attributes.position.count;else return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". The geometry must have either an index or a position attribute"),null;y.addGroup(_,F,T),_+=F}}),r){let b=0;const T=[];i.forEach(R=>{const F=R.index;for(let G=0;G<F.count;++G)T.push(F.getX(G)+b);b+=R.attributes.position.count}),y.setIndex(T)}for(let b in p){const T=gv(p[b]);if(!T)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" attribute."),null;y.setAttribute(b,T)}for(let b in h){const T=h[b][0].length;if(T===0)break;y.morphAttributes=y.morphAttributes||{},y.morphAttributes[b]=[];for(let R=0;R<T;++R){const F=[];for(let L=0;L<h[b].length;++L)F.push(h[b][L][R]);const G=gv(F);if(!G)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" morphAttribute."),null;y.morphAttributes[b].push(G)}}return y},gv=i=>{let t,r,s,c=0;if(i.forEach(p=>{if(t===void 0&&(t=p.array.constructor),t!==p.array.constructor)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=p.itemSize),r!==p.itemSize)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(s===void 0&&(s=p.normalized),s!==p.normalized)return Oa.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;c+=p.array.length}),t&&r){const p=new t(c);let h=0;return i.forEach(g=>{p.set(g.array,h),h+=g.array.length}),new BufferAttribute(p,r,s)}},C3=i=>{let t,r=0,s=0;for(let _=0,b=i.length;_<b;++_){const T=i[_];if(t===void 0&&(t=T.array.constructor),t!==T.array.constructor)return Oa.error("AttributeBuffers of different types cannot be interleaved"),null;r+=T.array.length,s+=T.itemSize}const c=new InterleavedBuffer(new t(r),s);let p=0;const h=[],g=["getX","getY","getZ","getW"],y=["setX","setY","setZ","setW"];for(let _=0,b=i.length;_<b;_++){const T=i[_],R=T.itemSize,F=T.count,G=new InterleavedBufferAttribute(c,R,p,T.normalized);h.push(G),p+=R;for(let L=0;L<F;L++)for(let O=0;O<R;O++){const P=getWithKey(G,y[O]),D=getWithKey(T,g[O]);P(L,D(L))}}return h};function xf(i){let t=0;for(let s in i.attributes){const c=i.getAttribute(s);t+=c.count*c.itemSize*c.array.BYTES_PER_ELEMENT}const r=i.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}function Kg(i,t=1e-4){t=Math.max(t,Number.EPSILON);const r={},s=i.getIndex(),c=i.getAttribute("position"),p=s?s.count:c.count;let h=0;const g=Object.keys(i.attributes),y={},_={},b=[],T=["getX","getY","getZ","getW"];for(let L=0,O=g.length;L<O;L++){const P=g[L];y[P]=[];const D=i.morphAttributes[P];D&&(_[P]=new Array(D.length).fill(0).map(()=>[]))}const R=Math.log10(1/t),F=Math.pow(10,R);for(let L=0;L<p;L++){const O=s?s.getX(L):L;let P="";for(let D=0,z=g.length;D<z;D++){const H=g[D],Q=i.getAttribute(H),W=Q.itemSize;for(let Y=0;Y<W;Y++)P+=`${~~(Q[T[Y]](O)*F)},`}if(P in r)b.push(r[P]);else{for(let D=0,z=g.length;D<z;D++){const H=g[D],Q=i.getAttribute(H),W=i.morphAttributes[H],Y=Q.itemSize,K=y[H],ie=_[H];for(let ce=0;ce<Y;ce++){const ge=T[ce];if(K.push(Q[ge](O)),W)for(let ae=0,xe=W.length;ae<xe;ae++)ie[ae].push(W[ae][ge](O))}}r[P]=h,b.push(h),h++}}const G=i.clone();for(let L=0,O=g.length;L<O;L++){const P=g[L],D=i.getAttribute(P),z=new D.array.constructor(y[P]),H=new o.BufferAttribute(z,D.itemSize,D.normalized);if(G.setAttribute(P,H),P in _)for(let Q=0;Q<_[P].length;Q++){const W=i.morphAttributes[P][Q],Y=new W.array.constructor(_[P][Q]),K=new o.BufferAttribute(Y,W.itemSize,W.normalized);G.morphAttributes[P][Q]=K}}return G.setIndex(b),G}function mv(i,t){if(t===o.TrianglesDrawMode)return Oa.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===o.TriangleFanDrawMode||t===o.TriangleStripDrawMode){let r=i.getIndex();if(r===null){const h=[],g=i.getAttribute("position");if(g!==void 0){for(let y=0;y<g.count;y++)h.push(y);i.setIndex(h),r=i.getIndex()}else return Oa.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const s=r.count-2,c=[];if(r)if(t===o.TriangleFanDrawMode)for(let h=1;h<=s;h++)c.push(r.getX(0)),c.push(r.getX(h)),c.push(r.getX(h+1));else for(let h=0;h<s;h++)h%2===0?(c.push(r.getX(h)),c.push(r.getX(h+1)),c.push(r.getX(h+2))):(c.push(r.getX(h+2)),c.push(r.getX(h+1)),c.push(r.getX(h)));c.length/3!==s&&Oa.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const p=i.clone();return p.setIndex(c),p.clearGroups(),p}else return Oa.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}function bM(i){if(i.geometry.isBufferGeometry!==!0)return Oa.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const t=new Vector3,r=new Vector3,s=new Vector3,c=new Vector3,p=new Vector3,h=new Vector3,g=new Vector3,y=new Vector3,_=new Vector3;function b(Ye,Ce,Ee,_e,oe,me,Te,ye,ze){t.fromBufferAttribute(Ee,me),r.fromBufferAttribute(Ee,Te),s.fromBufferAttribute(Ee,ye);const Mt=Ye.morphTargetInfluences;if(Ce.morphTargets&&_e&&Mt){g.set(0,0,0),y.set(0,0,0),_.set(0,0,0);for(let At=0,gt=_e.length;At<gt;At++){const ot=Mt[At],Qt=_e[At];ot!==0&&(c.fromBufferAttribute(Qt,me),p.fromBufferAttribute(Qt,Te),h.fromBufferAttribute(Qt,ye),oe?(g.addScaledVector(c,ot),y.addScaledVector(p,ot),_.addScaledVector(h,ot)):(g.addScaledVector(c.sub(t),ot),y.addScaledVector(p.sub(r),ot),_.addScaledVector(h.sub(s),ot)))}t.add(g),r.add(y),s.add(_)}Ye.isSkinnedMesh&&(Ye.boneTransform(me,t),Ye.boneTransform(Te,r),Ye.boneTransform(ye,s)),ze[me*3+0]=t.x,ze[me*3+1]=t.y,ze[me*3+2]=t.z,ze[Te*3+0]=r.x,ze[Te*3+1]=r.y,ze[Te*3+2]=r.z,ze[ye*3+0]=s.x,ze[ye*3+1]=s.y,ze[ye*3+2]=s.z}const T=i.geometry,R=i.material;let F,G,L;const O=T.index,P=T.attributes.position,D=T.morphAttributes.position,z=T.morphTargetsRelative,H=T.attributes.normal,Q=T.morphAttributes.position,W=T.groups,Y=T.drawRange;let K,ie,ce,ge,ae,xe,ve,Be;const Ue=new Float32Array(P.count*P.itemSize),Ie=new Float32Array(H.count*H.itemSize);if(O!==null)if(Array.isArray(R))for(K=0,ce=W.length;K<ce;K++)for(ae=W[K],xe=R[ae.materialIndex],ve=Math.max(ae.start,Y.start),Be=Math.min(ae.start+ae.count,Y.start+Y.count),ie=ve,ge=Be;ie<ge;ie+=3)F=O.getX(ie),G=O.getX(ie+1),L=O.getX(ie+2),b(i,xe,P,D,z,F,G,L,Ue),b(i,xe,H,Q,z,F,G,L,Ie);else for(ve=Math.max(0,Y.start),Be=Math.min(O.count,Y.start+Y.count),K=ve,ce=Be;K<ce;K+=3)F=O.getX(K),G=O.getX(K+1),L=O.getX(K+2),b(i,R,P,D,z,F,G,L,Ue),b(i,R,H,Q,z,F,G,L,Ie);else if(P!==void 0)if(Array.isArray(R))for(K=0,ce=W.length;K<ce;K++)for(ae=W[K],xe=R[ae.materialIndex],ve=Math.max(ae.start,Y.start),Be=Math.min(ae.start+ae.count,Y.start+Y.count),ie=ve,ge=Be;ie<ge;ie+=3)F=ie,G=ie+1,L=ie+2,b(i,xe,P,D,z,F,G,L,Ue),b(i,xe,H,Q,z,F,G,L,Ie);else for(ve=Math.max(0,Y.start),Be=Math.min(P.count,Y.start+Y.count),K=ve,ce=Be;K<ce;K+=3)F=K,G=K+1,L=K+2,b(i,R,P,D,z,F,G,L,Ue),b(i,R,H,Q,z,F,G,L,Ie);const Ne=new Float32BufferAttribute(Ue,3),Le=new Float32BufferAttribute(Ie,3);return{positionAttribute:P,normalAttribute:H,morphedPositionAttribute:Ne,morphedNormalAttribute:Le}}function S3(i,t=Math.PI/3){const r=Math.cos(t),s=(1+1e-10)*100,c=[new o.Vector3,new o.Vector3,new o.Vector3],p=new o.Vector3,h=new o.Vector3,g=new o.Vector3,y=new o.Vector3;function _(L){const O=~~(L.x*s),P=~~(L.y*s),D=~~(L.z*s);return`${O},${P},${D}`}const b=i.index?i.toNonIndexed():i,T=b.attributes.position,R={};for(let L=0,O=T.count/3;L<O;L++){const P=3*L,D=c[0].fromBufferAttribute(T,P+0),z=c[1].fromBufferAttribute(T,P+1),H=c[2].fromBufferAttribute(T,P+2);p.subVectors(H,z),h.subVectors(D,z);const Q=new o.Vector3().crossVectors(p,h).normalize();for(let W=0;W<3;W++){const Y=c[W],K=_(Y);K in R||(R[K]=[]),R[K].push(Q)}}const F=new Float32Array(T.count*3),G=new o.BufferAttribute(F,3,!1);for(let L=0,O=T.count/3;L<O;L++){const P=3*L,D=c[0].fromBufferAttribute(T,P+0),z=c[1].fromBufferAttribute(T,P+1),H=c[2].fromBufferAttribute(T,P+2);p.subVectors(H,z),h.subVectors(D,z),g.crossVectors(p,h).normalize();for(let Q=0;Q<3;Q++){const W=c[Q],Y=_(W),K=R[Y];y.set(0,0,0);for(let ie=0,ce=K.length;ie<ce;ie++){const ge=K[ie];g.dot(ge)>r&&y.add(ge)}y.normalize(),G.setXYZ(P+Q,y.x,y.y,y.z)}}return b.setAttribute("normal",G),b}var w3=A(25108),T3=Object.defineProperty,B3=(i,t,r)=>t in i?T3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$1=(i,t,r)=>(B3(i,typeof t!="symbol"?t+"":t,r),r);class R3 extends o.Loader{constructor(t){super(t)}load(t,r,s,c){const p=new o.FileLoader(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{if(typeof h!="string")throw new Error("unsupported data type");const g=JSON.parse(h),y=this.parse(g);r&&r(y)},s,c)}loadAsync(t,r){return super.loadAsync(t,r)}parse(t){return new eA(t)}}class eA{constructor(t){$1(this,"data"),this.data=t}generateShapes(t,r=100,s){const c=[],p=jn({letterSpacing:0,lineHeight:1},s),h=I3(t,r,this.data,p);for(let g=0,y=h.length;g<y;g++)Array.prototype.push.apply(c,h[g].toShapes(!1));return c}}$1(eA,"isFont"),$1(eA,"type");function I3(i,t,r,s){const c=Array.from(i),p=t/r.resolution,h=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*p,g=[];let y=0,_=0;for(let b=0;b<c.length;b++){const T=c[b];if(T===`
`)y=0,_-=h*s.lineHeight;else{const R=F3(T,p,y,_,r);R&&(y+=R.offsetX+s.letterSpacing,g.push(R.path))}}return g}function F3(i,t,r,s,c){const p=c.glyphs[i]||c.glyphs["?"];if(!p){w3.error('THREE.Font: character "'+i+'" does not exists in font family '+c.familyName+".");return}const h=new o.ShapePath;let g,y,_,b,T,R,F,G;if(p.o){const L=p._cachedOutline||(p._cachedOutline=p.o.split(" "));for(let O=0,P=L.length;O<P;)switch(L[O++]){case"m":g=parseInt(L[O++])*t+r,y=parseInt(L[O++])*t+s,h.moveTo(g,y);break;case"l":g=parseInt(L[O++])*t+r,y=parseInt(L[O++])*t+s,h.lineTo(g,y);break;case"q":_=parseInt(L[O++])*t+r,b=parseInt(L[O++])*t+s,T=parseInt(L[O++])*t+r,R=parseInt(L[O++])*t+s,h.quadraticCurveTo(T,R,_,b);break;case"b":_=parseInt(L[O++])*t+r,b=parseInt(L[O++])*t+s,T=parseInt(L[O++])*t+r,R=parseInt(L[O++])*t+s,F=parseInt(L[O++])*t+r,G=parseInt(L[O++])*t+s,h.bezierCurveTo(T,R,F,G,_,b);break}}return{offsetX:p.ha*t,path:h}}let Yg=null;function Av(i){return es(this,null,function*(){Yg||(Yg=new R3);let t=typeof i=="string"?yield(yield fetch(i)).json():i;return Yg.parse(t)})}function Tu(i){return(0,Il.Rq)(Av,[i])}Tu.preload=i=>(0,Il.MA)(Av,[i]),Tu.clear=i=>(0,Il.ZH)([i]);const O3=["string","number"],bs=i=>{let t="";const r=[];return d.Children.forEach(i,s=>{O3.includes(typeof s)?t+=s+"":r.push(s)}),[t,...r]},Jg=d.forwardRef((L,G)=>{var O=L,{font:i,letterSpacing:t=0,lineHeight:r=1,size:s=1,height:c=.2,bevelThickness:p=.1,bevelSize:h=.01,bevelEnabled:g=!1,bevelOffset:y=0,bevelSegments:_=4,curveSegments:b=8,smooth:T,children:R}=O,F=An(O,["font","letterSpacing","lineHeight","size","height","bevelThickness","bevelSize","bevelEnabled","bevelOffset","bevelSegments","curveSegments","smooth","children"]);d.useMemo(()=>(0,E.e)({RenamedTextGeometry:s0}),[]);const P=d.useRef(null),D=Tu(i),z=(0,d.useMemo)(()=>({font:D,size:s,height:c,bevelThickness:p,bevelSize:h,bevelEnabled:g,bevelSegments:_,bevelOffset:y,curveSegments:b,letterSpacing:t,lineHeight:r}),[D,s,c,p,h,g,_,y,b,t,r]),[H,...Q]=(0,d.useMemo)(()=>bs(R),[R]),W=d.useMemo(()=>[H,z],[H,z]);return d.useLayoutEffect(()=>{T&&(P.current.geometry=Kg(P.current.geometry,T),P.current.geometry.computeVertexNormals())},[W,T]),d.useImperativeHandle(G,()=>P.current,[]),d.createElement("mesh",(0,w.Z)({},F,{ref:P}),d.createElement("renamedTextGeometry",{args:W}),Q)}),tA={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var a0=A(25108),l0=Object.defineProperty,D3=(i,t,r)=>t in i?l0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ap=(i,t,r)=>(D3(i,typeof t!="symbol"?t+"":t,r),r);class c0{constructor(){ap(this,"enabled",!0),ap(this,"needsSwap",!0),ap(this,"clear",!1),ap(this,"renderToScreen",!1)}setSize(t,r){}render(t,r,s,c,p){a0.error("THREE.Pass: .render() must be implemented in derived pass.")}}class jp{constructor(t){ap(this,"camera",new o.OrthographicCamera(-1,1,1,-1,0,1)),ap(this,"geometry",new o.PlaneGeometry(2,2)),ap(this,"mesh"),this.mesh=new o.Mesh(this.geometry,t)}get material(){return this.mesh.material}set material(t){this.mesh.material=t}dispose(){this.mesh.geometry.dispose()}render(t){t.render(this.mesh,this.camera)}}var yv=Object.defineProperty,qg=(i,t,r)=>t in i?yv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Cf=(i,t,r)=>(qg(i,typeof t!="symbol"?t+"":t,r),r);class nA extends c0{constructor(t,r="tDiffuse"){super(),Cf(this,"textureID"),Cf(this,"uniforms"),Cf(this,"material"),Cf(this,"fsQuad"),this.textureID=r,t instanceof o.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):(this.uniforms=o.UniformsUtils.clone(t.uniforms),this.material=new o.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new jp(this.material)}render(t,r,s){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=s.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}var Wp=Object.defineProperty,vv=(i,t,r)=>t in i?Wp(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,p0=(i,t,r)=>(vv(i,typeof t!="symbol"?t+"":t,r),r);class Zg extends c0{constructor(t,r){super(),p0(this,"scene"),p0(this,"camera"),p0(this,"inverse"),this.scene=t,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,r,s){const c=t.getContext(),p=t.state;p.buffers.color.setMask(!1),p.buffers.depth.setMask(!1),p.buffers.color.setLocked(!0),p.buffers.depth.setLocked(!0);let h,g;this.inverse?(h=0,g=1):(h=1,g=0),p.buffers.stencil.setTest(!0),p.buffers.stencil.setOp(c.REPLACE,c.REPLACE,c.REPLACE),p.buffers.stencil.setFunc(c.ALWAYS,h,4294967295),p.buffers.stencil.setClear(g),p.buffers.stencil.setLocked(!0),t.setRenderTarget(s),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),p.buffers.color.setLocked(!1),p.buffers.depth.setLocked(!1),p.buffers.stencil.setLocked(!1),p.buffers.stencil.setFunc(c.EQUAL,1,4294967295),p.buffers.stencil.setOp(c.KEEP,c.KEEP,c.KEEP),p.buffers.stencil.setLocked(!0)}}class P3 extends c0{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}var _v=A(25108),u0=Object.defineProperty,$g=(i,t,r)=>t in i?u0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Fl=(i,t,r)=>($g(i,typeof t!="symbol"?t+"":t,r),r);class d0{constructor(t,r){if(Fl(this,"renderer"),Fl(this,"_pixelRatio"),Fl(this,"_width"),Fl(this,"_height"),Fl(this,"renderTarget1"),Fl(this,"renderTarget2"),Fl(this,"writeBuffer"),Fl(this,"readBuffer"),Fl(this,"renderToScreen"),Fl(this,"passes",[]),Fl(this,"copyPass"),Fl(this,"clock"),this.renderer=t,r===void 0){const s={minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat},c=t.getSize(new o.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=c.width,this._height=c.height,r=new o.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,s),r.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,tA===void 0&&_v.error("THREE.EffectComposer relies on CopyShader"),nA===void 0&&_v.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new nA(tA),this.clock=new o.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const r=this.passes.indexOf(t);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const r=this.renderer.getRenderTarget();let s=!1;const c=this.passes.length;for(let p=0;p<c;p++){const h=this.passes[p];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(p),h.render(this.renderer,this.writeBuffer,this.readBuffer,t,s),h.needsSwap){if(s){const g=this.renderer.getContext(),y=this.renderer.state.buffers.stencil;y.setFunc(g.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),y.setFunc(g.EQUAL,1,4294967295)}this.swapBuffers()}Zg!==void 0&&(h instanceof Zg?s=!0:h instanceof P3&&(s=!1))}}this.renderer.setRenderTarget(r)}reset(t){if(t===void 0){const r=this.renderer.getSize(new o.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,r){this._width=t,this._height=r;const s=this._width*this._pixelRatio,c=this._height*this._pixelRatio;this.renderTarget1.setSize(s,c),this.renderTarget2.setSize(s,c);for(let p=0;p<this.passes.length;p++)this.passes[p].setSize(s,c)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}var L3=Object.defineProperty,em=(i,t,r)=>t in i?L3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Vp=(i,t,r)=>(em(i,typeof t!="symbol"?t+"":t,r),r);class h0 extends c0{constructor(t,r,s,c,p=0){super(),Vp(this,"scene"),Vp(this,"camera"),Vp(this,"overrideMaterial"),Vp(this,"clearColor"),Vp(this,"clearAlpha"),Vp(this,"clearDepth",!1),Vp(this,"_oldClearColor",new o.Color),this.scene=t,this.camera=r,this.overrideMaterial=s,this.clearColor=c,this.clearAlpha=p,this.clear=!0,this.needsSwap=!1}render(t,r,s){let c=t.autoClear;t.autoClear=!1;let p,h=null;this.overrideMaterial!==void 0&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),p=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:s),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,p),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=h),t.autoClear=c}}const f0={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},g0=()=>{try{var i=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&i.getContext("webgl2"))}catch(t){return!1}},Ev=d.forwardRef((F,R)=>{var G=F,{children:i,multisamping:t=8,renderIndex:r=1,disableRender:s,disableGamma:c,disableRenderPass:p,depthBuffer:h=!0,stencilBuffer:g=!1,anisotropy:y=1,encoding:_,type:b}=G,T=An(G,["children","multisamping","renderIndex","disableRender","disableGamma","disableRenderPass","depthBuffer","stencilBuffer","anisotropy","encoding","type"]);d.useMemo(()=>(0,E.e)({EffectComposer:d0,RenderPass:h0,ShaderPass:nA}),[]);const L=d.useRef(),{scene:O,camera:P,gl:D,size:z,viewport:H}=(0,E.z)(),[Q]=d.useState(()=>{const Y=new o.WebGLRenderTarget(z.width,z.height,{type:b||o.HalfFloatType,format:o.RGBAFormat,depthBuffer:h,stencilBuffer:g,anisotropy:y});return b===o.UnsignedByteType&&_!=null&&("colorSpace"in Y?Y.texture.colorSpace=_:Y.texture.encoding=_),Y.samples=t,Y});d.useEffect(()=>{var Y,K;(Y=L.current)==null||Y.setSize(z.width,z.height),(K=L.current)==null||K.setPixelRatio(H.dpr)},[D,z,H.dpr]),(0,E.A)(()=>{var Y;s||(Y=L.current)==null||Y.render()},r);const W=[];return p||W.push(d.createElement("renderPass",{key:"renderpass",attach:`passes-${W.length}`,args:[O,P]})),c||W.push(d.createElement("shaderPass",{attach:`passes-${W.length}`,key:"gammapass",args:[f0]})),d.Children.forEach(i,Y=>{Y&&W.push(d.cloneElement(Y,{key:W.length,attach:`passes-${W.length}`}))}),d.createElement("effectComposer",(0,w.Z)({ref:Dn([R,L]),args:[D,Q]},T),W)});let m0=function(i){return i.Linear="linear",i.Radial="radial",i}({});function bv(y){var _=y,{stops:i,colors:t,size:r=1024,width:s=16,type:c=m0.Linear,innerCircleRadius:p=0,outerCircleRadius:h="auto"}=_,g=An(_,["stops","colors","size","width","type","innerCircleRadius","outerCircleRadius"]);const b=(0,E.z)(R=>R.gl),T=d.useMemo(()=>{const R=document.createElement("canvas"),F=R.getContext("2d");R.width=s,R.height=r;let G;if(c===m0.Linear)G=F.createLinearGradient(0,0,0,r);else{const O=R.width/2,P=R.height/2,D=h!=="auto"?Math.abs(Number(h)):Math.sqrt(s1(O,2)+s1(P,2));G=F.createRadialGradient(O,P,Math.abs(p),O,P,D)}let L=i.length;for(;L--;)G.addColorStop(i[L],t[L]);return F.save(),F.fillStyle=G,F.fillRect(0,0,s,r),F.restore(),R},[i]);return d.createElement("canvasTexture",(0,w.Z)({colorSpace:b.outputColorSpace,args:[T],attach:"map"},g))}function Lc(i,t,r,s){const c=class extends o.ShaderMaterial{constructor(h={}){const g=Object.entries(i);super({uniforms:g.reduce((y,[_,b])=>{const T=o.UniformsUtils.clone({[_]:{value:b}});return jn(jn({},y),T)},{}),vertexShader:t,fragmentShader:r}),this.key="",g.forEach(([y])=>Object.defineProperty(this,y,{get:()=>this.uniforms[y].value,set:_=>this.uniforms[y].value=_})),Object.assign(this,h),s&&s(this)}};return c.key=o.MathUtils.generateUUID(),c}const Sf=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function Bu(i,t){const r=(0,E.z)(c=>c.gl),s=(0,E.D)(o.TextureLoader,Sf(i)?Object.values(i):i);if((0,d.useLayoutEffect)(()=>{t==null||t(s)},[t]),(0,d.useEffect)(()=>{(Array.isArray(s)?s:[s]).forEach(r.initTexture)},[r,s]),Sf(i)){const c=Object.keys(i),p={};return c.forEach(h=>Object.assign(p,{[h]:s[c.indexOf(h)]})),p}else return s}Bu.preload=i=>E.D.preload(o.TextureLoader,i),Bu.clear=i=>E.D.clear(o.TextureLoader,i);const Mv=Lc({color:new o.Color("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),rA=d.forwardRef((R,T)=>{var F=R,{children:i,color:t,segments:r=1,scale:s=1,zoom:c=1,grayscale:p=0,opacity:h=1,texture:g,toneMapped:y,transparent:_}=F,b=An(F,["children","color","segments","scale","zoom","grayscale","opacity","texture","toneMapped","transparent"]);(0,E.e)({ImageMaterial:Mv});const G=Array.isArray(s)?[s[0],s[1]]:[s,s],L=[g.image.width,g.image.height];return d.createElement("mesh",(0,w.Z)({ref:T,scale:Array.isArray(s)?[...s,1]:s},b),d.createElement("planeGeometry",{args:[1,1,r,r]}),d.createElement("imageMaterial",{color:t,map:g,zoom:c,grayscale:p,opacity:h,scale:G,imageBounds:L,toneMapped:y,transparent:_}),i)}),xv=d.forwardRef((s,r)=>{var c=s,{url:i}=c,t=An(c,["url"]);const p=Bu(i);return d.createElement(rA,(0,w.Z)({},t,{texture:p,ref:r}))}),Cv=d.forwardRef((s,r)=>{var c=s,{url:i}=c,t=An(c,["url"]);return d.createElement(rA,(0,w.Z)({},t,{ref:r}))}),Sv=d.forwardRef((i,t)=>{if(i.url)return d.createElement(xv,(0,w.Z)({},i,{ref:t}));if(i.texture)return d.createElement(Cv,(0,w.Z)({},i,{ref:t}));throw new Error("<Image /> requires a url or texture")}),iA=d.forwardRef((g,h)=>{var y=g,{userData:i,children:t,geometry:r,threshold:s=15,color:c="black"}=y,p=An(y,["userData","children","geometry","threshold","color"]);const _=d.useRef(null);return d.useLayoutEffect(()=>{const b=_.current.parent;if(b){const T=r||b.geometry;(T!==_.current.userData.currentGeom||s!==_.current.userData.currentThreshold)&&(_.current.userData.currentGeom=T,_.current.userData.currentThreshold=s,_.current.geometry=new o.EdgesGeometry(T,s))}}),d.useImperativeHandle(h,()=>_.current),d.createElement("lineSegments",(0,w.Z)({ref:_,raycast:()=>null},p),t||d.createElement("lineBasicMaterial",{color:c}))});var wv=Object.defineProperty,kc=(i,t,r)=>t in i?wv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,qi=(i,t,r)=>(kc(i,typeof t!="symbol"?t+"":t,r),r);function tm(i,t,r,s,c){let p;if(i=i.subarray||i.slice?i:i.buffer,r=r.subarray||r.slice?r:r.buffer,i=t?i.subarray?i.subarray(t,c&&t+c):i.slice(t,c&&t+c):i,r.set)r.set(i,s);else for(p=0;p<i.length;p++)r[p+s]=i[p];return r}function Tv(i){return i instanceof Float32Array?i:i instanceof o.BufferGeometry?i.getAttribute("position").array:i.map(t=>{const r=Array.isArray(t);return t instanceof o.Vector3?[t.x,t.y,t.z]:t instanceof o.Vector2?[t.x,t.y,0]:r&&t.length===3?[t[0],t[1],t[2]]:r&&t.length===2?[t[0],t[1],0]:t}).flat()}class oA extends o.BufferGeometry{constructor(){super(),qi(this,"type","MeshLine"),qi(this,"isMeshLine",!0),qi(this,"positions",[]),qi(this,"previous",[]),qi(this,"next",[]),qi(this,"side",[]),qi(this,"width",[]),qi(this,"indices_array",[]),qi(this,"uvs",[]),qi(this,"counters",[]),qi(this,"widthCallback",null),qi(this,"_attributes"),qi(this,"_points",[]),qi(this,"points"),qi(this,"matrixWorld",new o.Matrix4),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(t){this.setPoints(t,this.widthCallback)}}})}setMatrixWorld(t){this.matrixWorld=t}setPoints(t,r){if(t=Tv(t),this._points=t,this.widthCallback=r!=null?r:null,this.positions=[],this.counters=[],t.length&&t[0]instanceof o.Vector3)for(let s=0;s<t.length;s++){const c=t[s],p=s/(t.length-1);this.positions.push(c.x,c.y,c.z),this.positions.push(c.x,c.y,c.z),this.counters.push(p),this.counters.push(p)}else for(let s=0;s<t.length;s+=3){const c=s/(t.length-1);this.positions.push(t[s],t[s+1],t[s+2]),this.positions.push(t[s],t[s+1],t[s+2]),this.counters.push(c),this.counters.push(c)}this.process()}compareV3(t,r){const s=t*6,c=r*6;return this.positions[s]===this.positions[c]&&this.positions[s+1]===this.positions[c+1]&&this.positions[s+2]===this.positions[c+2]}copyV3(t){const r=t*6;return[this.positions[r],this.positions[r+1],this.positions[r+2]]}process(){const t=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let r,s;this.compareV3(0,t-1)?s=this.copyV3(t-2):s=this.copyV3(0),this.previous.push(s[0],s[1],s[2]),this.previous.push(s[0],s[1],s[2]);for(let c=0;c<t;c++){if(this.side.push(1),this.side.push(-1),this.widthCallback?r=this.widthCallback(c/(t-1)):r=1,this.width.push(r),this.width.push(r),this.uvs.push(c/(t-1),0),this.uvs.push(c/(t-1),1),c<t-1){s=this.copyV3(c),this.previous.push(s[0],s[1],s[2]),this.previous.push(s[0],s[1],s[2]);const p=c*2;this.indices_array.push(p,p+1,p+2),this.indices_array.push(p+2,p+1,p+3)}c>0&&(s=this.copyV3(c),this.next.push(s[0],s[1],s[2]),this.next.push(s[0],s[1],s[2]))}this.compareV3(t-1,0)?s=this.copyV3(1):s=this.copyV3(t-1),this.next.push(s[0],s[1],s[2]),this.next.push(s[0],s[1],s[2]),!this._attributes||this._attributes.position.count!==this.positions.length?this._attributes={position:new o.BufferAttribute(new Float32Array(this.positions),3),previous:new o.BufferAttribute(new Float32Array(this.previous),3),next:new o.BufferAttribute(new Float32Array(this.next),3),side:new o.BufferAttribute(new Float32Array(this.side),1),width:new o.BufferAttribute(new Float32Array(this.width),1),uv:new o.BufferAttribute(new Float32Array(this.uvs),2),index:new o.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new o.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:t,y:r,z:s}){const c=this._attributes.position.array,p=this._attributes.previous.array,h=this._attributes.next.array,g=c.length;tm(c,0,p,0,g),tm(c,6,c,0,g-6),c[g-6]=t,c[g-5]=r,c[g-4]=s,c[g-3]=t,c[g-2]=r,c[g-1]=s,tm(c,6,h,0,g-6),h[g-6]=t,h[g-5]=r,h[g-4]=s,h[g-3]=t,h[g-2]=r,h[g-1]=s,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const sA=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
  	vCounters = counters;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0);
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <fog_vertex>
  }
`,k3=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 c = vColor;
    if (useMap == 1.) c *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) c.a *= texture2D(alphaMap, vUV * repeat).a;
    if (c.a < alphaTest) discard;
    if (useDash == 1.) {
      c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    }
    gl_FragColor = c;
    gl_FragColor.a *= step(vCounters, visibility);
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`;class z3 extends o.ShaderMaterial{constructor(t){super({uniforms:Xo(jn({},o.UniformsLib.fog),{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new o.Color(16777215)},opacity:{value:1},resolution:{value:new o.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new o.Vector2(1,1)}}),vertexShader:sA,fragmentShader:k3}),qi(this,"lineWidth"),qi(this,"map"),qi(this,"useMap"),qi(this,"alphaMap"),qi(this,"useAlphaMap"),qi(this,"color"),qi(this,"resolution"),qi(this,"sizeAttenuation"),qi(this,"dashArray"),qi(this,"dashOffset"),qi(this,"dashRatio"),qi(this,"useDash"),qi(this,"visibility"),qi(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(r){this.uniforms.lineWidth.value=r}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(r){this.uniforms.map.value=r}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(r){this.uniforms.useMap.value=r}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(r){this.uniforms.alphaMap.value=r}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(r){this.uniforms.useAlphaMap.value=r}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(r){this.uniforms.color.value=r}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(r){this.uniforms.resolution.value.copy(r)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(r){this.uniforms.sizeAttenuation.value=r}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(r){this.uniforms.dashArray.value=r,this.useDash=r!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(r){this.uniforms.dashOffset.value=r}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(r){this.uniforms.dashRatio.value=r}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(r){this.uniforms.useDash.value=r}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(r){this.uniforms.visibility.value=r}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(r){this.uniforms.alphaTest.value=r}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(r){this.uniforms.repeat.value.copy(r)}}}),this.setValues(t)}copy(t){return super.copy(t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray=t.dashArray,this.dashOffset=t.dashOffset,this.dashRatio=t.dashRatio,this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this}}function MM(i,t){const r=new THREE.Matrix4,s=new THREE.Ray,c=new THREE.Sphere,p=new THREE.Vector3,h=this.geometry;if(c.copy(h.boundingSphere),c.applyMatrix4(this.matrixWorld),!i.ray.intersectSphere(c,p))return;r.copy(this.matrixWorld).invert(),s.copy(i.ray).applyMatrix4(r);const g=new THREE.Vector3,y=new THREE.Vector3,_=new THREE.Vector3,b=this instanceof THREE.LineSegments?2:1,T=h.index,R=h.attributes;if(T!==null){const F=T.array,G=R.position.array,L=R.width.array;for(let O=0,P=F.length-1;O<P;O+=b){const D=F[O],z=F[O+1];g.fromArray(G,D*3),y.fromArray(G,z*3);const H=L[Math.floor(O/3)]!=null?L[Math.floor(O/3)]:1,Q=i.params.Line.threshold+this.material.lineWidth*H/2,W=Q*Q;if(s.distanceSqToSegment(g,y,p,_)>W)continue;p.applyMatrix4(this.matrixWorld);const K=i.ray.origin.distanceTo(p);K<i.near||K>i.far||(t.push({distance:K,point:_.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:void 0,object:this}),O=P)}}}const wf={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},Bv=(i,t=1)=>(i.set(i.subarray(t)),i.fill(-1/0,-t),i);function A0(i,t){const{length:r,local:s,decay:c,interval:p,stride:h}=jn(jn({},wf),t),g=d.useRef(),[y]=d.useState(()=>new o.Vector3);d.useLayoutEffect(()=>{i&&(g.current=Float32Array.from({length:r*10*3},(T,R)=>i.position.getComponent(R%3)))},[r,i]);const _=d.useRef(new o.Vector3),b=d.useRef(0);return(0,E.A)(()=>{if(i&&g.current){if(b.current===0){let T;s?T=i.position:(i.getWorldPosition(y),T=y);const R=1*c;for(let F=0;F<R;F++)T.distanceTo(_.current)<h||(Bv(g.current,3),g.current.set(T.toArray(),g.current.length-3));_.current.copy(T)}b.current++,b.current=b.current%p}}),g}const Rv=d.forwardRef((i,t)=>{const{children:r}=i,{width:s,length:c,decay:p,local:h,stride:g,interval:y}=jn(jn({},wf),i),{color:_="hotpink",attenuation:b,target:T}=i,R=(0,E.z)(H=>H.size),F=(0,E.z)(H=>H.scene),G=d.useRef(null),[L,O]=d.useState(null),P=A0(L,{length:c,decay:p,local:h,stride:g,interval:y});d.useEffect(()=>{const H=(T==null?void 0:T.current)||G.current.children.find(Q=>Q instanceof o.Object3D);H&&O(H)},[P,T]);const D=d.useMemo(()=>new oA,[]),z=d.useMemo(()=>{var H;const Q=new z3({lineWidth:.1*s,color:_,sizeAttenuation:1,resolution:new o.Vector2(R.width,R.height)});let W;if(r)if(Array.isArray(r))W=r.find(Y=>{const K=Y;return typeof K.type=="string"&&K.type==="meshLineMaterial"});else{const Y=r;typeof Y.type=="string"&&Y.type==="meshLineMaterial"&&(W=Y)}return typeof((H=W)==null?void 0:H.props)=="object"&&Q.setValues(W.props),Q},[s,_,R,r]);return d.useEffect(()=>{z.uniforms.resolution.value.set(R.width,R.height)},[R]),(0,E.A)(()=>{P.current&&D.setPoints(P.current,b)}),d.createElement("group",null,(0,E.g)(d.createElement("mesh",{ref:t,geometry:D,material:z}),F),d.createElement("group",{ref:G},r))});var lp=A(25108);const Ms=new o.Triangle,Tf=new o.Vector3;class nm{constructor(t){let r=t.geometry;r.index&&(lp.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.positionAttribute,r=this.weightAttribute,s=new Float32Array(t.count/3);for(let p=0;p<t.count;p+=3){let h=1;r&&(h=r.getX(p)+r.getX(p+1)+r.getX(p+2)),Ms.a.fromBufferAttribute(t,p),Ms.b.fromBufferAttribute(t,p+1),Ms.c.fromBufferAttribute(t,p+2),h*=Ms.getArea(),s[p/3]=h}this.distribution=new Float32Array(t.count/3);let c=0;for(let p=0;p<s.length;p++)c+=s[p],this.distribution[p]=c;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,r,s){const c=this.sampleFaceIndex();return this.sampleFace(c,t,r,s)}sampleFaceIndex(){const t=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*t)}binarySearch(t){const r=this.distribution;let s=0,c=r.length-1,p=-1;for(;s<=c;){const h=Math.ceil((s+c)/2);if(h===0||r[h-1]<=t&&r[h]>t){p=h;break}else t<r[h]?c=h-1:s=h+1}return p}sampleFace(t,r,s,c){let p=this.randomFunction(),h=this.randomFunction();return p+h>1&&(p=1-p,h=1-h),Ms.a.fromBufferAttribute(this.positionAttribute,t*3),Ms.b.fromBufferAttribute(this.positionAttribute,t*3+1),Ms.c.fromBufferAttribute(this.positionAttribute,t*3+2),r.set(0,0,0).addScaledVector(Ms.a,p).addScaledVector(Ms.b,h).addScaledVector(Ms.c,1-(p+h)),s!==void 0&&Ms.getNormal(s),c!==void 0&&this.colorAttribute!==void 0&&(Ms.a.fromBufferAttribute(this.colorAttribute,t*3),Ms.b.fromBufferAttribute(this.colorAttribute,t*3+1),Ms.c.fromBufferAttribute(this.colorAttribute,t*3+2),Tf.set(0,0,0).addScaledVector(Ms.a,p).addScaledVector(Ms.b,h).addScaledVector(Ms.c,1-(p+h)),c.r=Tf.x,c.g=Tf.y,c.b=Tf.z),this}}function aA(i,t=16,r,s,c){const[p,h]=d.useState(()=>{const g=Array.from({length:t},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new o.InstancedBufferAttribute(Float32Array.from(g),16)});return d.useLayoutEffect(()=>{if(typeof i.current=="undefined")return;const g=new nm(i.current);s&&g.setWeightAttribute(s),g.build();const y=new o.Vector3,_=new o.Vector3,b=new o.Color,T=new o.Object3D;i.current.updateMatrixWorld(!0);for(let R=0;R<t;R++)g.sample(y,_,b),typeof r=="function"?r({dummy:T,sampledMesh:i.current,position:y,normal:_,color:b},R):T.position.copy(y),T.updateMatrix(),c!=null&&c.current&&c.current.setMatrixAt(R,T.matrix),T.matrix.toArray(p.array,R*16);c!=null&&c.current&&(c.current.instanceMatrix.needsUpdate=!0),p.needsUpdate=!0,h(p.clone())},[i,c,s,t,r]),p}function Bf(g){var y=g,{children:i,weight:t,transform:r,instances:s,mesh:c,count:p=16}=y,h=An(y,["children","weight","transform","instances","mesh","count"]);const _=d.useRef(null),b=d.useRef(null),T=d.useRef(null);return d.useLayoutEffect(()=>{var R,F;b.current=(R=s==null?void 0:s.current)!==null&&R!==void 0?R:_.current.children.find(G=>G.hasOwnProperty("instanceMatrix")),T.current=(F=c==null?void 0:c.current)!==null&&F!==void 0?F:_.current.children.find(G=>G.type==="Mesh")},[i,c==null?void 0:c.current,s==null?void 0:s.current]),aA(T,p,r,t,b),d.createElement("group",(0,w.Z)({ref:_},h),i)}const vh=s=>{var c=s,{compute:i,name:t}=c,r=An(c,["compute","name"]);const[p]=d.useState(()=>new o.BufferAttribute(new Float32Array(0),1)),h=d.useRef(null);return d.useLayoutEffect(()=>{if(h.current){var g;const y=(g=h.current.parent)!==null&&g!==void 0?g:h.current.__r3f.parent,_=i(y);h.current.copy(_)}},[i]),d.createElement("primitive",(0,w.Z)({ref:h,object:p,attach:`attributes-${t}`},r))};var rm=A(25030),Rf=A.n(rm);function Iv(i,t,r={}){const s=new o.Vector3,c=new o.Quaternion,p=new o.Vector3,h=new o.Matrix4,g=new o.Matrix4,y=new o.Matrix4;r.preserveMatrix=r.preserveMatrix!==void 0?r.preserveMatrix:!0,r.preservePosition=r.preservePosition!==void 0?r.preservePosition:!0,r.preserveHipPosition=r.preserveHipPosition!==void 0?r.preserveHipPosition:!1,r.useTargetMatrix=r.useTargetMatrix!==void 0?r.useTargetMatrix:!1,r.hip=r.hip!==void 0?r.hip:"hip",r.names=r.names||{};const _=t.isObject3D?t.skeleton.bones:im(t),b=i.isObject3D?i.skeleton.bones:im(i);let T,R,F,G,L;if(i.isObject3D?i.skeleton.pose():(r.useTargetMatrix=!0,r.preserveMatrix=!1),r.preservePosition){L=[];for(let O=0;O<b.length;O++)L.push(b[O].position.clone())}if(r.preserveMatrix){i.updateMatrixWorld(),i.matrixWorld.identity();for(let O=0;O<i.children.length;++O)i.children[O].updateMatrixWorld(!0)}if(r.offsets){T=[];for(let O=0;O<b.length;++O)R=b[O],F=r.names[R.name]||R.name,r.offsets[F]&&(R.matrix.multiply(r.offsets[F]),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld()),T.push(R.matrixWorld.clone())}for(let O=0;O<b.length;++O){if(R=b[O],F=r.names[R.name]||R.name,G=y0(F,_),y.copy(R.matrixWorld),G){if(G.updateMatrixWorld(),r.useTargetMatrix?g.copy(G.matrixWorld):(g.copy(i.matrixWorld).invert(),g.multiply(G.matrixWorld)),p.setFromMatrixScale(g),g.scale(p.set(1/p.x,1/p.y,1/p.z)),y.makeRotationFromQuaternion(c.setFromRotationMatrix(g)),i.isObject3D){const P=b.indexOf(R),D=T?T[P]:h.copy(i.skeleton.boneInverses[P]).invert();y.multiply(D)}y.copyPosition(g)}R.parent&&R.parent.isBone?(R.matrix.copy(R.parent.matrixWorld).invert(),R.matrix.multiply(y)):R.matrix.copy(y),r.preserveHipPosition&&F===r.hip&&R.matrix.setPosition(s.set(0,R.position.y,0)),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld()}if(r.preservePosition)for(let O=0;O<b.length;++O)R=b[O],F=r.names[R.name]||R.name,F!==r.hip&&R.position.copy(L[O]);r.preserveMatrix&&i.updateMatrixWorld(!0)}function G3(i,t,r,s={}){s.useFirstFramePosition=s.useFirstFramePosition!==void 0?s.useFirstFramePosition:!1,s.fps=s.fps!==void 0?s.fps:30,s.names=s.names||[],t.isObject3D||(t=$l(t));const c=Math.round(r.duration*(s.fps/1e3)*1e3),p=1/s.fps,h=[],g=new o.AnimationMixer(t),y=im(i.skeleton),_=[];let b,T,R,F,G;g.clipAction(r).play(),g.update(0),t.updateMatrixWorld();for(let L=0;L<c;++L){const O=L*p;Iv(i,t,s);for(let P=0;P<y.length;++P)G=s.names[y[P].name]||y[P].name,R=y0(G,t.skeleton),R&&(T=y[P],F=_[P]=_[P]||{bone:T},s.hip===G&&(F.pos||(F.pos={times:new Float32Array(c),values:new Float32Array(c*3)}),s.useFirstFramePosition&&(L===0&&(b=T.position.clone()),T.position.sub(b)),F.pos.times[L]=O,T.position.toArray(F.pos.values,L*3)),F.quat||(F.quat={times:new Float32Array(c),values:new Float32Array(c*4)}),F.quat.times[L]=O,T.quaternion.toArray(F.quat.values,L*4));g.update(p),t.updateMatrixWorld()}for(let L=0;L<_.length;++L)F=_[L],F&&(F.pos&&h.push(new o.VectorKeyframeTrack(".bones["+F.bone.name+"].position",F.pos.times,F.pos.values)),h.push(new o.QuaternionKeyframeTrack(".bones["+F.bone.name+"].quaternion",F.quat.times,F.quat.values)));return g.uncacheAction(r),new o.AnimationClip(r.name,-1,h)}function _h(i){const t=new Map,r=new Map,s=i.clone();return Qp(i,s,function(c,p){t.set(p,c),r.set(c,p)}),s.traverse(function(c){if(!c.isSkinnedMesh)return;const p=c,h=t.get(c),g=h.skeleton.bones;p.skeleton=h.skeleton.clone(),p.bindMatrix.copy(h.bindMatrix),p.skeleton.bones=g.map(function(y){return r.get(y)}),p.bind(p.skeleton,p.bindMatrix)}),s}function y0(i,t){for(let r=0,s=im(t);r<s.length;r++)if(i===s[r].name)return s[r]}function im(i){return Array.isArray(i)?i:i.bones}function $l(i){const t=new o.SkeletonHelper(i.bones[0]);return t.skeleton=i,t}function Qp(i,t,r){r(i,t);for(let s=0;s<i.children.length;s++)Qp(i.children[s],t.children[s],r)}const U3={retarget:Iv,retargetClip:G3,clone:_h};function Ru(i,{keys:t=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:r,inject:s,castShadow:c,receiveShadow:p}){let h=Rf()(i,t);return r&&(h.geometry&&r!=="materialsOnly"&&(h.geometry=h.geometry.clone()),h.material&&r!=="geometriesOnly"&&(h.material=h.material.clone())),s&&(typeof s=="function"?h=Xo(jn({},h),{children:s(i)}):d.isValidElement(s)?h=Xo(jn({},h),{children:s}):h=jn(jn({},h),s)),i instanceof o.Mesh&&(c&&(h.castShadow=!0),p&&(h.receiveShadow=!0)),h}const v0=d.forwardRef((b,_)=>{var T=b,{isChild:i=!1,object:t,children:r,deep:s,castShadow:c,receiveShadow:p,inject:h,keys:g}=T,y=An(T,["isChild","object","children","deep","castShadow","receiveShadow","inject","keys"]);var R;const F={keys:g,deep:s,inject:h,castShadow:c,receiveShadow:p};if(t=d.useMemo(()=>{if(i===!1&&!Array.isArray(t)){let D=!1;if(t.traverse(z=>{z.isSkinnedMesh&&(D=!0)}),D)return U3.clone(t)}return t},[t,i]),Array.isArray(t))return d.createElement("group",(0,w.Z)({},y,{ref:_}),t.map(D=>d.createElement(v0,(0,w.Z)({key:D.uuid,object:D},F))),r);const P=Ru(t,F),{children:G}=P,L=An(P,["children"]),O=t.type[0].toLowerCase()+t.type.slice(1);return d.createElement(O,(0,w.Z)({},L,y,{ref:_}),((R=t)==null?void 0:R.children).map(D=>D.type==="Bone"?d.createElement("primitive",(0,w.Z)({key:D.uuid,object:D},F)):d.createElement(v0,(0,w.Z)({key:D.uuid,object:D},F,{isChild:!0}))),r,G)});var N3=A(25108);class om extends o.Mesh{constructor(t,r,s=!1,c=!1,p=1e4){const h=new o.BufferGeometry;super(h,r),this.isMarchingCubes=!0;const g=this,y=new Float32Array(12*3),_=new Float32Array(12*3),b=new Float32Array(12*3);this.enableUvs=s,this.enableColors=c,this.init=function(D){this.resolution=D,this.isolation=80,this.size=D,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const z=p*3;this.positionArray=new Float32Array(z*3);const H=new o.BufferAttribute(this.positionArray,3);H.setUsage(o.DynamicDrawUsage),h.setAttribute("position",H),this.normalArray=new Float32Array(z*3);const Q=new o.BufferAttribute(this.normalArray,3);if(Q.setUsage(o.DynamicDrawUsage),h.setAttribute("normal",Q),this.enableUvs){this.uvArray=new Float32Array(z*2);const W=new o.BufferAttribute(this.uvArray,2);W.setUsage(o.DynamicDrawUsage),h.setAttribute("uv",W)}if(this.enableColors){this.colorArray=new Float32Array(z*3);const W=new o.BufferAttribute(this.colorArray,3);W.setUsage(o.DynamicDrawUsage),h.setAttribute("color",W)}h.boundingSphere=new o.Sphere(new o.Vector3,1)};function T(D,z,H){return D+(z-D)*H}function R(D,z,H,Q,W,Y,K,ie,ce,ge){const ae=(H-K)/(ie-K),xe=g.normal_cache;y[z+0]=Q+ae*g.delta,y[z+1]=W,y[z+2]=Y,_[z+0]=T(xe[D+0],xe[D+3],ae),_[z+1]=T(xe[D+1],xe[D+4],ae),_[z+2]=T(xe[D+2],xe[D+5],ae),b[z+0]=T(g.palette[ce*3+0],g.palette[ge*3+0],ae),b[z+1]=T(g.palette[ce*3+1],g.palette[ge*3+1],ae),b[z+2]=T(g.palette[ce*3+2],g.palette[ge*3+2],ae)}function F(D,z,H,Q,W,Y,K,ie,ce,ge){const ae=(H-K)/(ie-K),xe=g.normal_cache;y[z+0]=Q,y[z+1]=W+ae*g.delta,y[z+2]=Y;const ve=D+g.yd*3;_[z+0]=T(xe[D+0],xe[ve+0],ae),_[z+1]=T(xe[D+1],xe[ve+1],ae),_[z+2]=T(xe[D+2],xe[ve+2],ae),b[z+0]=T(g.palette[ce*3+0],g.palette[ge*3+0],ae),b[z+1]=T(g.palette[ce*3+1],g.palette[ge*3+1],ae),b[z+2]=T(g.palette[ce*3+2],g.palette[ge*3+2],ae)}function G(D,z,H,Q,W,Y,K,ie,ce,ge){const ae=(H-K)/(ie-K),xe=g.normal_cache;y[z+0]=Q,y[z+1]=W,y[z+2]=Y+ae*g.delta;const ve=D+g.zd*3;_[z+0]=T(xe[D+0],xe[ve+0],ae),_[z+1]=T(xe[D+1],xe[ve+1],ae),_[z+2]=T(xe[D+2],xe[ve+2],ae),b[z+0]=T(g.palette[ce*3+0],g.palette[ge*3+0],ae),b[z+1]=T(g.palette[ce*3+1],g.palette[ge*3+1],ae),b[z+2]=T(g.palette[ce*3+2],g.palette[ge*3+2],ae)}function L(D){const z=D*3;g.normal_cache[z]===0&&(g.normal_cache[z+0]=g.field[D-1]-g.field[D+1],g.normal_cache[z+1]=g.field[D-g.yd]-g.field[D+g.yd],g.normal_cache[z+2]=g.field[D-g.zd]-g.field[D+g.zd])}function O(D,z,H,Q,W){const Y=Q+1,K=Q+g.yd,ie=Q+g.zd,ce=Y+g.yd,ge=Y+g.zd,ae=Q+g.yd+g.zd,xe=Y+g.yd+g.zd;let ve=0;const Be=g.field[Q],Ue=g.field[Y],Ie=g.field[K],Ne=g.field[ce],Le=g.field[ie],Ye=g.field[ge],Ce=g.field[ae],Ee=g.field[xe];Be<W&&(ve|=1),Ue<W&&(ve|=2),Ie<W&&(ve|=8),Ne<W&&(ve|=4),Le<W&&(ve|=16),Ye<W&&(ve|=32),Ce<W&&(ve|=128),Ee<W&&(ve|=64);const _e=H3[ve];if(_e===0)return 0;const oe=g.delta,me=D+oe,Te=z+oe,ye=H+oe;_e&1&&(L(Q),L(Y),R(Q*3,0,W,D,z,H,Be,Ue,Q,Y)),_e&2&&(L(Y),L(ce),F(Y*3,3,W,me,z,H,Ue,Ne,Y,ce)),_e&4&&(L(K),L(ce),R(K*3,6,W,D,Te,H,Ie,Ne,K,ce)),_e&8&&(L(Q),L(K),F(Q*3,9,W,D,z,H,Be,Ie,Q,K)),_e&16&&(L(ie),L(ge),R(ie*3,12,W,D,z,ye,Le,Ye,ie,ge)),_e&32&&(L(ge),L(xe),F(ge*3,15,W,me,z,ye,Ye,Ee,ge,xe)),_e&64&&(L(ae),L(xe),R(ae*3,18,W,D,Te,ye,Ce,Ee,ae,xe)),_e&128&&(L(ie),L(ae),F(ie*3,21,W,D,z,ye,Le,Ce,ie,ae)),_e&256&&(L(Q),L(ie),G(Q*3,24,W,D,z,H,Be,Le,Q,ie)),_e&512&&(L(Y),L(ge),G(Y*3,27,W,me,z,H,Ue,Ye,Y,ge)),_e&1024&&(L(ce),L(xe),G(ce*3,30,W,me,Te,H,Ne,Ee,ce,xe)),_e&2048&&(L(K),L(ae),G(K*3,33,W,D,Te,H,Ie,Ce,K,ae)),ve<<=4;let ze,Mt,At,gt=0,ot=0;for(;_0[ve+ot]!=-1;)ze=ve+ot,Mt=ze+1,At=ze+2,P(y,_,b,3*_0[ze],3*_0[Mt],3*_0[At]),ot+=3,gt++;return gt}function P(D,z,H,Q,W,Y){const K=g.count*3;if(g.positionArray[K+0]=D[Q],g.positionArray[K+1]=D[Q+1],g.positionArray[K+2]=D[Q+2],g.positionArray[K+3]=D[W],g.positionArray[K+4]=D[W+1],g.positionArray[K+5]=D[W+2],g.positionArray[K+6]=D[Y],g.positionArray[K+7]=D[Y+1],g.positionArray[K+8]=D[Y+2],g.material.flatShading===!0){const ie=(z[Q+0]+z[W+0]+z[Y+0])/3,ce=(z[Q+1]+z[W+1]+z[Y+1])/3,ge=(z[Q+2]+z[W+2]+z[Y+2])/3;g.normalArray[K+0]=ie,g.normalArray[K+1]=ce,g.normalArray[K+2]=ge,g.normalArray[K+3]=ie,g.normalArray[K+4]=ce,g.normalArray[K+5]=ge,g.normalArray[K+6]=ie,g.normalArray[K+7]=ce,g.normalArray[K+8]=ge}else g.normalArray[K+0]=z[Q+0],g.normalArray[K+1]=z[Q+1],g.normalArray[K+2]=z[Q+2],g.normalArray[K+3]=z[W+0],g.normalArray[K+4]=z[W+1],g.normalArray[K+5]=z[W+2],g.normalArray[K+6]=z[Y+0],g.normalArray[K+7]=z[Y+1],g.normalArray[K+8]=z[Y+2];if(g.enableUvs){const ie=g.count*2;g.uvArray[ie+0]=D[Q+0],g.uvArray[ie+1]=D[Q+2],g.uvArray[ie+2]=D[W+0],g.uvArray[ie+3]=D[W+2],g.uvArray[ie+4]=D[Y+0],g.uvArray[ie+5]=D[Y+2]}g.enableColors&&(g.colorArray[K+0]=H[Q+0],g.colorArray[K+1]=H[Q+1],g.colorArray[K+2]=H[Q+2],g.colorArray[K+3]=H[W+0],g.colorArray[K+4]=H[W+1],g.colorArray[K+5]=H[W+2],g.colorArray[K+6]=H[Y+0],g.colorArray[K+7]=H[Y+1],g.colorArray[K+8]=H[Y+2]),g.count+=3}this.addBall=function(D,z,H,Q,W,Y){const K=Math.sign(Q);Q=Math.abs(Q);const ie=Y!=null;let ce=new o.Color(D,z,H);if(ie)try{ce=Y instanceof o.Color?Y:Array.isArray(Y)?new o.Color(Math.min(Math.abs(Y[0]),1),Math.min(Math.abs(Y[1]),1),Math.min(Math.abs(Y[2]),1)):new o.Color(Y)}catch(ot){ce=new o.Color(D,z,H)}const ge=this.size*Math.sqrt(Q/W),ae=H*this.size,xe=z*this.size,ve=D*this.size;let Be=Math.floor(ae-ge);Be<1&&(Be=1);let Ue=Math.floor(ae+ge);Ue>this.size-1&&(Ue=this.size-1);let Ie=Math.floor(xe-ge);Ie<1&&(Ie=1);let Ne=Math.floor(xe+ge);Ne>this.size-1&&(Ne=this.size-1);let Le=Math.floor(ve-ge);Le<1&&(Le=1);let Ye=Math.floor(ve+ge);Ye>this.size-1&&(Ye=this.size-1);let Ce,Ee,_e,oe,me,Te,ye,ze,Mt,At,gt;for(_e=Be;_e<Ue;_e++)for(me=this.size2*_e,ze=_e/this.size-H,Mt=ze*ze,Ee=Ie;Ee<Ne;Ee++)for(oe=me+this.size*Ee,ye=Ee/this.size-z,At=ye*ye,Ce=Le;Ce<Ye;Ce++)if(Te=Ce/this.size-D,gt=Q/(1e-6+Te*Te+At+Mt)-W,gt>0){this.field[oe+Ce]+=gt*K;const ot=Math.sqrt((Ce-ve)*(Ce-ve)+(Ee-xe)*(Ee-xe)+(_e-ae)*(_e-ae))/ge,Qt=1-ot*ot*ot*(ot*(ot*6-15)+10);this.palette[(oe+Ce)*3+0]+=ce.r*Qt,this.palette[(oe+Ce)*3+1]+=ce.g*Qt,this.palette[(oe+Ce)*3+2]+=ce.b*Qt}},this.addPlaneX=function(D,z){const H=this.size,Q=this.yd,W=this.zd,Y=this.field;let K,ie,ce,ge,ae,xe,ve,Be=H*Math.sqrt(D/z);for(Be>H&&(Be=H),K=0;K<Be;K++)if(xe=K/H,ge=xe*xe,ae=D/(1e-4+ge)-z,ae>0)for(ie=0;ie<H;ie++)for(ve=K+ie*Q,ce=0;ce<H;ce++)Y[W*ce+ve]+=ae},this.addPlaneY=function(D,z){const H=this.size,Q=this.yd,W=this.zd,Y=this.field;let K,ie,ce,ge,ae,xe,ve,Be,Ue=H*Math.sqrt(D/z);for(Ue>H&&(Ue=H),ie=0;ie<Ue;ie++)if(xe=ie/H,ge=xe*xe,ae=D/(1e-4+ge)-z,ae>0)for(ve=ie*Q,K=0;K<H;K++)for(Be=ve+K,ce=0;ce<H;ce++)Y[W*ce+Be]+=ae},this.addPlaneZ=function(D,z){const H=this.size,Q=this.yd,W=this.zd,Y=this.field;let K,ie,ce,ge,ae,xe,ve,Be,Ue=H*Math.sqrt(D/z);for(Ue>H&&(Ue=H),ce=0;ce<Ue;ce++)if(xe=ce/H,ge=xe*xe,ae=D/(1e-4+ge)-z,ae>0)for(ve=W*ce,ie=0;ie<H;ie++)for(Be=ve+ie*Q,K=0;K<H;K++)Y[Be+K]+=ae},this.setCell=function(D,z,H,Q){const W=this.size2*H+this.size*z+D;this.field[W]=Q},this.getCell=function(D,z,H){const Q=this.size2*H+this.size*z+D;return this.field[Q]},this.blur=function(D=1){const z=this.field,H=z.slice(),Q=this.size,W=this.size2;for(let Y=0;Y<Q;Y++)for(let K=0;K<Q;K++)for(let ie=0;ie<Q;ie++){const ce=W*ie+Q*K+Y;let ge=H[ce],ae=1;for(let xe=-1;xe<=1;xe+=2){const ve=xe+Y;if(!(ve<0||ve>=Q))for(let Be=-1;Be<=1;Be+=2){const Ue=Be+K;if(!(Ue<0||Ue>=Q))for(let Ie=-1;Ie<=1;Ie+=2){const Ne=Ie+ie;if(Ne<0||Ne>=Q)continue;const Le=W*Ne+Q*Ue+ve,Ye=H[Le];ae++,ge+=D*(Ye-ge)/ae}}}z[ce]=ge}},this.reset=function(){for(let D=0;D<this.size3;D++)this.normal_cache[D*3]=0,this.field[D]=0,this.palette[D*3]=this.palette[D*3+1]=this.palette[D*3+2]=0},this.update=function(){this.count=0;const D=this.size-2;for(let z=1;z<D;z++){const H=this.size2*z,Q=(z-this.halfsize)/this.halfsize;for(let W=1;W<D;W++){const Y=H+this.size*W,K=(W-this.halfsize)/this.halfsize;for(let ie=1;ie<D;ie++){const ce=(ie-this.halfsize)/this.halfsize,ge=Y+ie;O(ce,K,Q,ge,this.isolation)}}}this.geometry.setDrawRange(0,this.count),h.getAttribute("position").needsUpdate=!0,h.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(h.getAttribute("uv").needsUpdate=!0),this.enableColors&&(h.getAttribute("color").needsUpdate=!0),this.count/3>p&&N3.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(t)}}const H3=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),_0=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),lA=d.createContext(null),yd=d.forwardRef((g,h)=>{var y=g,{resolution:i=28,maxPolyCount:t=1e4,enableUvs:r=!1,enableColors:s=!1,children:c}=y,p=An(y,["resolution","maxPolyCount","enableUvs","enableColors","children"]);const _=d.useRef(null),b=d.useMemo(()=>new om(i,null,r,s,t),[i,t,r,s]),T=d.useMemo(()=>({getParent:()=>_}),[]);return(0,E.A)(()=>{b.update(),b.reset()},-1),d.createElement(d.Fragment,null,d.createElement("primitive",(0,w.Z)({object:b,ref:Dn([_,h])},p),d.createElement(lA.Provider,{value:T},c)))}),Fv=d.forwardRef((p,c)=>{var h=p,{strength:i=.5,subtract:t=12,color:r}=h,s=An(h,["strength","subtract","color"]);const{getParent:g}=d.useContext(lA),y=d.useMemo(()=>g(),[g]),_=d.useRef(),b=new o.Vector3;return(0,E.A)(T=>{!y.current||!_.current||(_.current.getWorldPosition(b),y.current.addBall(.5+b.x*.5,.5+b.y*.5,.5+b.z*.5,i,t,r))}),d.createElement("group",(0,w.Z)({ref:Dn([c,_])},s))}),cA=d.forwardRef((p,c)=>{var h=p,{planeType:i="x",strength:t=.5,subtract:r=12}=h,s=An(h,["planeType","strength","subtract"]);const{getParent:g}=d.useContext(lA),y=d.useMemo(()=>g(),[g]),_=d.useRef(),b=d.useMemo(()=>i==="x"?"addPlaneX":i==="y"?"addPlaneY":"addPlaneZ",[i]);return(0,E.A)(()=>{!y.current||!_.current||y.current[b](t,r)}),d.createElement("group",(0,w.Z)({ref:Dn([c,_])},s))});var Ov=A(25108);class Dv extends o.BufferGeometry{constructor(t,r,s,c){super();const p=[],h=[],g=[],y=new o.Vector3,_=new o.Matrix4;_.makeRotationFromEuler(s),_.setPosition(r);const b=new o.Matrix4;b.copy(_).invert(),T(),this.setAttribute("position",new o.Float32BufferAttribute(p,3)),this.setAttribute("normal",new o.Float32BufferAttribute(h,3)),this.setAttribute("uv",new o.Float32BufferAttribute(g,2));function T(){let L,O=[];const P=new o.Vector3,D=new o.Vector3;if(t.geometry.isGeometry===!0){Ov.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const z=t.geometry,H=z.attributes.position,Q=z.attributes.normal;if(z.index!==null){const W=z.index;for(L=0;L<W.count;L++)P.fromBufferAttribute(H,W.getX(L)),D.fromBufferAttribute(Q,W.getX(L)),R(O,P,D)}else for(L=0;L<H.count;L++)P.fromBufferAttribute(H,L),D.fromBufferAttribute(Q,L),R(O,P,D);for(O=F(O,y.set(1,0,0)),O=F(O,y.set(-1,0,0)),O=F(O,y.set(0,1,0)),O=F(O,y.set(0,-1,0)),O=F(O,y.set(0,0,1)),O=F(O,y.set(0,0,-1)),L=0;L<O.length;L++){const W=O[L];g.push(.5+W.position.x/c.x,.5+W.position.y/c.y),W.position.applyMatrix4(_),p.push(W.position.x,W.position.y,W.position.z),h.push(W.normal.x,W.normal.y,W.normal.z)}}function R(L,O,P){O.applyMatrix4(t.matrixWorld),O.applyMatrix4(b),P.transformDirection(t.matrixWorld),L.push(new E0(O.clone(),P.clone()))}function F(L,O){const P=[],D=.5*Math.abs(c.dot(O));for(let z=0;z<L.length;z+=3){let H,Q,W,Y=0,K,ie,ce,ge;const ae=L[z+0].position.dot(O)-D,xe=L[z+1].position.dot(O)-D,ve=L[z+2].position.dot(O)-D;switch(H=ae>0,Q=xe>0,W=ve>0,Y=(H?1:0)+(Q?1:0)+(W?1:0),Y){case 0:{P.push(L[z]),P.push(L[z+1]),P.push(L[z+2]);break}case 1:{if(H&&(K=L[z+1],ie=L[z+2],ce=G(L[z],K,O,D),ge=G(L[z],ie,O,D)),Q){K=L[z],ie=L[z+2],ce=G(L[z+1],K,O,D),ge=G(L[z+1],ie,O,D),P.push(ce),P.push(ie.clone()),P.push(K.clone()),P.push(ie.clone()),P.push(ce.clone()),P.push(ge);break}W&&(K=L[z],ie=L[z+1],ce=G(L[z+2],K,O,D),ge=G(L[z+2],ie,O,D)),P.push(K.clone()),P.push(ie.clone()),P.push(ce),P.push(ge),P.push(ce.clone()),P.push(ie.clone());break}case 2:{H||(K=L[z].clone(),ie=G(K,L[z+1],O,D),ce=G(K,L[z+2],O,D),P.push(K),P.push(ie),P.push(ce)),Q||(K=L[z+1].clone(),ie=G(K,L[z+2],O,D),ce=G(K,L[z],O,D),P.push(K),P.push(ie),P.push(ce)),W||(K=L[z+2].clone(),ie=G(K,L[z],O,D),ce=G(K,L[z+1],O,D),P.push(K),P.push(ie),P.push(ce));break}case 3:break}}return P}function G(L,O,P,D){const z=L.position.dot(P)-D,H=O.position.dot(P)-D,Q=z/(z-H);return new E0(new o.Vector3(L.position.x+Q*(O.position.x-L.position.x),L.position.y+Q*(O.position.y-L.position.y),L.position.z+Q*(O.position.z-L.position.z)),new o.Vector3(L.normal.x+Q*(O.normal.x-L.normal.x),L.normal.y+Q*(O.normal.y-L.normal.y),L.normal.z+Q*(O.normal.z-L.normal.z)))}}}class E0{constructor(t,r){this.position=t,this.normal=r}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function j3(i){return Array.isArray(i)}function b0(i=[0,0,0]){return j3(i)?i:i instanceof o.Vector3||i instanceof o.Euler?[i.x,i.y,i.z]:[i,i,i]}const Pv=d.forwardRef(function(R,T){var F=R,{debug:t,depthTest:r=!1,polygonOffsetFactor:s=-10,map:c,mesh:p,children:h,position:g,rotation:y,scale:_}=F,b=An(F,["debug","depthTest","polygonOffsetFactor","map","mesh","children","position","rotation","scale"]);const G=d.useRef(null);d.useImperativeHandle(T,()=>G.current);const L=d.useRef(null);return d.useLayoutEffect(()=>{const O=(p==null?void 0:p.current)||G.current.parent,P=G.current;if(!(O instanceof o.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const D={position:new o.Vector3,rotation:new o.Euler,scale:new o.Vector3(1,1,1)};if(O){(0,E.j)(D,{position:g,scale:_});const z=O.matrixWorld.clone();if(O.matrixWorld.identity(),!y||typeof y=="number"){const H=new o.Object3D;H.position.copy(D.position),H.lookAt(O.position),typeof y=="number"&&H.rotateZ(y),(0,E.j)(D,{rotation:H.rotation})}else(0,E.j)(D,{rotation:y});return P.geometry=new Dv(O,D.position,D.rotation,D.scale),L.current&&((0,E.j)(L.current,D),L.current.traverse(H=>H.raycast=()=>null)),O.matrixWorld=z,()=>{P.geometry.dispose()}}},[p,...b0(g),...b0(_),...b0(y)]),d.createElement("mesh",(0,w.Z)({ref:G,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":s,"material-depthTest":r,"material-map":c},b),h,t&&d.createElement("mesh",{ref:L},d.createElement("boxGeometry",null),d.createElement("meshNormalMaterial",{wireframe:!0}),d.createElement("axesHelper",null)))});var Xp=A(25108);class Eh extends o.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,r,s,c){const p=this,h=new o.FileLoader(p.manager);h.setPath(p.path),h.setRequestHeader(p.requestHeader),h.setWithCredentials(p.withCredentials),h.load(t,function(g){try{r(p.parse(g))}catch(y){c?c(y):Xp.error(y),p.manager.itemError(t)}},s,c)}parse(t){const r=this;function s(Ee,_e){if(Ee.nodeType!==1)return;const oe=H(Ee);let me=!0,Te=null;switch(Ee.nodeName){case"svg":break;case"style":p(Ee);break;case"g":_e=G(Ee,_e);break;case"path":_e=G(Ee,_e),Ee.hasAttribute("d")&&(Te=c(Ee));break;case"rect":_e=G(Ee,_e),Te=y(Ee);break;case"polygon":_e=G(Ee,_e),Te=_(Ee);break;case"polyline":_e=G(Ee,_e),Te=b(Ee);break;case"circle":_e=G(Ee,_e),Te=T(Ee);break;case"ellipse":_e=G(Ee,_e),Te=R(Ee);break;case"line":_e=G(Ee,_e),Te=F(Ee);break;case"defs":me=!1;break;case"mask":me=!1;break;case"use":_e=G(Ee,_e);const ye=Ee.href.baseVal.substring(1),ze=Ee.viewportElement.getElementById(ye);ze?s(ze,_e):Xp.warn("SVGLoader: 'use node' references non-existent node id: "+ye);break;default:}if(Te&&(_e.fill!==void 0&&_e.fill!=="none"&&Te.color.setStyle(_e.fill),W(Te,Le),ce.push(Te),Te.userData={node:Ee,style:_e}),me){const ye=Ee.childNodes;for(let ze=0;ze<ye.length;ze++)s(ye[ze],_e)}oe&&(ae.pop(),ae.length>0?Le.copy(ae[ae.length-1]):Le.identity())}function c(Ee){const _e=new o.ShapePath,oe=new o.Vector2,me=new o.Vector2,Te=new o.Vector2;let ye=!0,ze=!1;const At=Ee.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let gt=0,ot=At.length;gt<ot;gt++){const Qt=At[gt],Gt=Qt.charAt(0),Bt=Qt.substr(1).trim();ye===!0&&(ze=!0,ye=!1);let qe;switch(Gt){case"M":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=2)oe.x=qe[Ge+0],oe.y=qe[Ge+1],me.x=oe.x,me.y=oe.y,Ge===0?_e.moveTo(oe.x,oe.y):_e.lineTo(oe.x,oe.y),Ge===0&&Te.copy(oe);break;case"H":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge++)oe.x=qe[Ge],me.x=oe.x,me.y=oe.y,_e.lineTo(oe.x,oe.y),Ge===0&&ze===!0&&Te.copy(oe);break;case"V":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge++)oe.y=qe[Ge],me.x=oe.x,me.y=oe.y,_e.lineTo(oe.x,oe.y),Ge===0&&ze===!0&&Te.copy(oe);break;case"L":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=2)oe.x=qe[Ge+0],oe.y=qe[Ge+1],me.x=oe.x,me.y=oe.y,_e.lineTo(oe.x,oe.y),Ge===0&&ze===!0&&Te.copy(oe);break;case"C":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=6)_e.bezierCurveTo(qe[Ge+0],qe[Ge+1],qe[Ge+2],qe[Ge+3],qe[Ge+4],qe[Ge+5]),me.x=qe[Ge+2],me.y=qe[Ge+3],oe.x=qe[Ge+4],oe.y=qe[Ge+5],Ge===0&&ze===!0&&Te.copy(oe);break;case"S":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=4)_e.bezierCurveTo(L(oe.x,me.x),L(oe.y,me.y),qe[Ge+0],qe[Ge+1],qe[Ge+2],qe[Ge+3]),me.x=qe[Ge+0],me.y=qe[Ge+1],oe.x=qe[Ge+2],oe.y=qe[Ge+3],Ge===0&&ze===!0&&Te.copy(oe);break;case"Q":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=4)_e.quadraticCurveTo(qe[Ge+0],qe[Ge+1],qe[Ge+2],qe[Ge+3]),me.x=qe[Ge+0],me.y=qe[Ge+1],oe.x=qe[Ge+2],oe.y=qe[Ge+3],Ge===0&&ze===!0&&Te.copy(oe);break;case"T":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=2){const gn=L(oe.x,me.x),Mn=L(oe.y,me.y);_e.quadraticCurveTo(gn,Mn,qe[Ge+0],qe[Ge+1]),me.x=gn,me.y=Mn,oe.x=qe[Ge+0],oe.y=qe[Ge+1],Ge===0&&ze===!0&&Te.copy(oe)}break;case"A":qe=O(Bt,[3,4],7);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=7){if(qe[Ge+5]==oe.x&&qe[Ge+6]==oe.y)continue;const gn=oe.clone();oe.x=qe[Ge+5],oe.y=qe[Ge+6],me.x=oe.x,me.y=oe.y,h(_e,qe[Ge],qe[Ge+1],qe[Ge+2],qe[Ge+3],qe[Ge+4],gn,oe),Ge===0&&ze===!0&&Te.copy(oe)}break;case"m":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=2)oe.x+=qe[Ge+0],oe.y+=qe[Ge+1],me.x=oe.x,me.y=oe.y,Ge===0?_e.moveTo(oe.x,oe.y):_e.lineTo(oe.x,oe.y),Ge===0&&Te.copy(oe);break;case"h":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge++)oe.x+=qe[Ge],me.x=oe.x,me.y=oe.y,_e.lineTo(oe.x,oe.y),Ge===0&&ze===!0&&Te.copy(oe);break;case"v":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge++)oe.y+=qe[Ge],me.x=oe.x,me.y=oe.y,_e.lineTo(oe.x,oe.y),Ge===0&&ze===!0&&Te.copy(oe);break;case"l":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=2)oe.x+=qe[Ge+0],oe.y+=qe[Ge+1],me.x=oe.x,me.y=oe.y,_e.lineTo(oe.x,oe.y),Ge===0&&ze===!0&&Te.copy(oe);break;case"c":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=6)_e.bezierCurveTo(oe.x+qe[Ge+0],oe.y+qe[Ge+1],oe.x+qe[Ge+2],oe.y+qe[Ge+3],oe.x+qe[Ge+4],oe.y+qe[Ge+5]),me.x=oe.x+qe[Ge+2],me.y=oe.y+qe[Ge+3],oe.x+=qe[Ge+4],oe.y+=qe[Ge+5],Ge===0&&ze===!0&&Te.copy(oe);break;case"s":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=4)_e.bezierCurveTo(L(oe.x,me.x),L(oe.y,me.y),oe.x+qe[Ge+0],oe.y+qe[Ge+1],oe.x+qe[Ge+2],oe.y+qe[Ge+3]),me.x=oe.x+qe[Ge+0],me.y=oe.y+qe[Ge+1],oe.x+=qe[Ge+2],oe.y+=qe[Ge+3],Ge===0&&ze===!0&&Te.copy(oe);break;case"q":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=4)_e.quadraticCurveTo(oe.x+qe[Ge+0],oe.y+qe[Ge+1],oe.x+qe[Ge+2],oe.y+qe[Ge+3]),me.x=oe.x+qe[Ge+0],me.y=oe.y+qe[Ge+1],oe.x+=qe[Ge+2],oe.y+=qe[Ge+3],Ge===0&&ze===!0&&Te.copy(oe);break;case"t":qe=O(Bt);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=2){const gn=L(oe.x,me.x),Mn=L(oe.y,me.y);_e.quadraticCurveTo(gn,Mn,oe.x+qe[Ge+0],oe.y+qe[Ge+1]),me.x=gn,me.y=Mn,oe.x=oe.x+qe[Ge+0],oe.y=oe.y+qe[Ge+1],Ge===0&&ze===!0&&Te.copy(oe)}break;case"a":qe=O(Bt,[3,4],7);for(let Ge=0,Ot=qe.length;Ge<Ot;Ge+=7){if(qe[Ge+5]==0&&qe[Ge+6]==0)continue;const gn=oe.clone();oe.x+=qe[Ge+5],oe.y+=qe[Ge+6],me.x=oe.x,me.y=oe.y,h(_e,qe[Ge],qe[Ge+1],qe[Ge+2],qe[Ge+3],qe[Ge+4],gn,oe),Ge===0&&ze===!0&&Te.copy(oe)}break;case"Z":case"z":_e.currentPath.autoClose=!0,_e.currentPath.curves.length>0&&(oe.copy(Te),_e.currentPath.currentPoint.copy(oe),ye=!0);break;default:Xp.warn(Qt)}ze=!1}return _e}function p(Ee){if(!(!Ee.sheet||!Ee.sheet.cssRules||!Ee.sheet.cssRules.length))for(let _e=0;_e<Ee.sheet.cssRules.length;_e++){const oe=Ee.sheet.cssRules[_e];if(oe.type!==1)continue;const me=oe.selectorText.split(/,/gm).filter(Boolean).map(Te=>Te.trim());for(let Te=0;Te<me.length;Te++)ge[me[Te]]=Object.assign(ge[me[Te]]||{},oe.style)}}function h(Ee,_e,oe,me,Te,ye,ze,Mt){if(_e==0||oe==0){Ee.lineTo(Mt.x,Mt.y);return}me=me*Math.PI/180,_e=Math.abs(_e),oe=Math.abs(oe);const At=(ze.x-Mt.x)/2,gt=(ze.y-Mt.y)/2,ot=Math.cos(me)*At+Math.sin(me)*gt,Qt=-Math.sin(me)*At+Math.cos(me)*gt;let Gt=_e*_e,Bt=oe*oe;const qe=ot*ot,Ge=Qt*Qt,Ot=qe/Gt+Ge/Bt;if(Ot>1){const Sr=Math.sqrt(Ot);_e=Sr*_e,oe=Sr*oe,Gt=_e*_e,Bt=oe*oe}const gn=Gt*Ge+Bt*qe,Mn=(Gt*Bt-gn)/gn;let Ut=Math.sqrt(Math.max(0,Mn));Te===ye&&(Ut=-Ut);const Nn=Ut*_e*Qt/oe,ar=-Ut*oe*ot/_e,Cr=Math.cos(me)*Nn-Math.sin(me)*ar+(ze.x+Mt.x)/2,dr=Math.sin(me)*Nn+Math.cos(me)*ar+(ze.y+Mt.y)/2,bi=g(1,0,(ot-Nn)/_e,(Qt-ar)/oe),fi=g((ot-Nn)/_e,(Qt-ar)/oe,(-ot-Nn)/_e,(-Qt-ar)/oe)%(Math.PI*2);Ee.currentPath.absellipse(Cr,dr,_e,oe,bi,bi+fi,ye===0,me)}function g(Ee,_e,oe,me){const Te=Ee*oe+_e*me,ye=Math.sqrt(Ee*Ee+_e*_e)*Math.sqrt(oe*oe+me*me);let ze=Math.acos(Math.max(-1,Math.min(1,Te/ye)));return Ee*me-_e*oe<0&&(ze=-ze),ze}function y(Ee){const _e=z(Ee.getAttribute("x")||0),oe=z(Ee.getAttribute("y")||0),me=z(Ee.getAttribute("rx")||Ee.getAttribute("ry")||0),Te=z(Ee.getAttribute("ry")||Ee.getAttribute("rx")||0),ye=z(Ee.getAttribute("width")),ze=z(Ee.getAttribute("height")),Mt=1-.551915024494,At=new o.ShapePath;return At.moveTo(_e+me,oe),At.lineTo(_e+ye-me,oe),(me!==0||Te!==0)&&At.bezierCurveTo(_e+ye-me*Mt,oe,_e+ye,oe+Te*Mt,_e+ye,oe+Te),At.lineTo(_e+ye,oe+ze-Te),(me!==0||Te!==0)&&At.bezierCurveTo(_e+ye,oe+ze-Te*Mt,_e+ye-me*Mt,oe+ze,_e+ye-me,oe+ze),At.lineTo(_e+me,oe+ze),(me!==0||Te!==0)&&At.bezierCurveTo(_e+me*Mt,oe+ze,_e,oe+ze-Te*Mt,_e,oe+ze-Te),At.lineTo(_e,oe+Te),(me!==0||Te!==0)&&At.bezierCurveTo(_e,oe+Te*Mt,_e+me*Mt,oe,_e+me,oe),At}function _(Ee){function _e(ye,ze,Mt){const At=z(ze),gt=z(Mt);Te===0?me.moveTo(At,gt):me.lineTo(At,gt),Te++}const oe=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,me=new o.ShapePath;let Te=0;return Ee.getAttribute("points").replace(oe,_e),me.currentPath.autoClose=!0,me}function b(Ee){function _e(ye,ze,Mt){const At=z(ze),gt=z(Mt);Te===0?me.moveTo(At,gt):me.lineTo(At,gt),Te++}const oe=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,me=new o.ShapePath;let Te=0;return Ee.getAttribute("points").replace(oe,_e),me.currentPath.autoClose=!1,me}function T(Ee){const _e=z(Ee.getAttribute("cx")||0),oe=z(Ee.getAttribute("cy")||0),me=z(Ee.getAttribute("r")||0),Te=new o.Path;Te.absarc(_e,oe,me,0,Math.PI*2);const ye=new o.ShapePath;return ye.subPaths.push(Te),ye}function R(Ee){const _e=z(Ee.getAttribute("cx")||0),oe=z(Ee.getAttribute("cy")||0),me=z(Ee.getAttribute("rx")||0),Te=z(Ee.getAttribute("ry")||0),ye=new o.Path;ye.absellipse(_e,oe,me,Te,0,Math.PI*2);const ze=new o.ShapePath;return ze.subPaths.push(ye),ze}function F(Ee){const _e=z(Ee.getAttribute("x1")||0),oe=z(Ee.getAttribute("y1")||0),me=z(Ee.getAttribute("x2")||0),Te=z(Ee.getAttribute("y2")||0),ye=new o.ShapePath;return ye.moveTo(_e,oe),ye.lineTo(me,Te),ye.currentPath.autoClose=!1,ye}function G(Ee,_e){_e=Object.assign({},_e);let oe={};if(Ee.hasAttribute("class")){const ze=Ee.getAttribute("class").split(/\s/).filter(Boolean).map(Mt=>Mt.trim());for(let Mt=0;Mt<ze.length;Mt++)oe=Object.assign(oe,ge["."+ze[Mt]])}Ee.hasAttribute("id")&&(oe=Object.assign(oe,ge["#"+Ee.getAttribute("id")]));function me(ze,Mt,At){At===void 0&&(At=function(ot){return ot.startsWith("url")&&Xp.warn("SVGLoader: url access in attributes is not implemented."),ot}),Ee.hasAttribute(ze)&&(_e[Mt]=At(Ee.getAttribute(ze))),oe[ze]&&(_e[Mt]=At(oe[ze])),Ee.style&&Ee.style[ze]!==""&&(_e[Mt]=At(Ee.style[ze]))}function Te(ze){return Math.max(0,Math.min(1,z(ze)))}function ye(ze){return Math.max(0,z(ze))}return me("fill","fill"),me("fill-opacity","fillOpacity",Te),me("fill-rule","fillRule"),me("opacity","opacity",Te),me("stroke","stroke"),me("stroke-opacity","strokeOpacity",Te),me("stroke-width","strokeWidth",ye),me("stroke-linejoin","strokeLineJoin"),me("stroke-linecap","strokeLineCap"),me("stroke-miterlimit","strokeMiterLimit",ye),me("visibility","visibility"),_e}function L(Ee,_e){return Ee-(_e-Ee)}function O(Ee,_e,oe){if(typeof Ee!="string")throw new TypeError("Invalid input: "+typeof Ee);const me={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Te=0,ye=1,ze=2,Mt=3;let At=Te,gt=!0,ot="",Qt="";const Gt=[];function Bt(gn,Mn,Ut){const Nn=new SyntaxError('Unexpected character "'+gn+'" at index '+Mn+".");throw Nn.partial=Ut,Nn}function qe(){ot!==""&&(Qt===""?Gt.push(Number(ot)):Gt.push(Number(ot)*Math.pow(10,Number(Qt)))),ot="",Qt=""}let Ge;const Ot=Ee.length;for(let gn=0;gn<Ot;gn++){if(Ge=Ee[gn],Array.isArray(_e)&&_e.includes(Gt.length%oe)&&me.FLAGS.test(Ge)){At=ye,ot=Ge,qe();continue}if(At===Te){if(me.WHITESPACE.test(Ge))continue;if(me.DIGIT.test(Ge)||me.SIGN.test(Ge)){At=ye,ot=Ge;continue}if(me.POINT.test(Ge)){At=ze,ot=Ge;continue}me.COMMA.test(Ge)&&(gt&&Bt(Ge,gn,Gt),gt=!0)}if(At===ye){if(me.DIGIT.test(Ge)){ot+=Ge;continue}if(me.POINT.test(Ge)){ot+=Ge,At=ze;continue}if(me.EXP.test(Ge)){At=Mt;continue}me.SIGN.test(Ge)&&ot.length===1&&me.SIGN.test(ot[0])&&Bt(Ge,gn,Gt)}if(At===ze){if(me.DIGIT.test(Ge)){ot+=Ge;continue}if(me.EXP.test(Ge)){At=Mt;continue}me.POINT.test(Ge)&&ot[ot.length-1]==="."&&Bt(Ge,gn,Gt)}if(At===Mt){if(me.DIGIT.test(Ge)){Qt+=Ge;continue}if(me.SIGN.test(Ge)){if(Qt===""){Qt+=Ge;continue}Qt.length===1&&me.SIGN.test(Qt)&&Bt(Ge,gn,Gt)}}me.WHITESPACE.test(Ge)?(qe(),At=Te,gt=!1):me.COMMA.test(Ge)?(qe(),At=Te,gt=!0):me.SIGN.test(Ge)?(qe(),At=ye,ot=Ge):me.POINT.test(Ge)?(qe(),At=ze,ot=Ge):Bt(Ge,gn,Gt)}return qe(),Gt}const P=["mm","cm","in","pt","pc","px"],D={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function z(Ee){let _e="px";if(typeof Ee=="string"||Ee instanceof String)for(let me=0,Te=P.length;me<Te;me++){const ye=P[me];if(Ee.endsWith(ye)){_e=ye,Ee=Ee.substring(0,Ee.length-ye.length);break}}let oe;return _e==="px"&&r.defaultUnit!=="px"?oe=D.in[r.defaultUnit]/r.defaultDPI:(oe=D[_e][r.defaultUnit],oe<0&&(oe=D[_e].in*r.defaultDPI)),oe*parseFloat(Ee)}function H(Ee){if(!(Ee.hasAttribute("transform")||Ee.nodeName==="use"&&(Ee.hasAttribute("x")||Ee.hasAttribute("y"))))return null;const _e=Q(Ee);return ae.length>0&&_e.premultiply(ae[ae.length-1]),Le.copy(_e),ae.push(_e),_e}function Q(Ee){const _e=new o.Matrix3,oe=xe;if(Ee.nodeName==="use"&&(Ee.hasAttribute("x")||Ee.hasAttribute("y"))){const me=z(Ee.getAttribute("x")),Te=z(Ee.getAttribute("y"));_e.translate(me,Te)}if(Ee.hasAttribute("transform")){const me=Ee.getAttribute("transform").split(")");for(let Te=me.length-1;Te>=0;Te--){const ye=me[Te].trim();if(ye==="")continue;const ze=ye.indexOf("("),Mt=ye.length;if(ze>0&&ze<Mt){const At=ye.substr(0,ze),gt=O(ye.substr(ze+1,Mt-ze-1));switch(oe.identity(),At){case"translate":if(gt.length>=1){const ot=gt[0];let Qt=ot;gt.length>=2&&(Qt=gt[1]),oe.translate(ot,Qt)}break;case"rotate":if(gt.length>=1){let ot=0,Qt=0,Gt=0;ot=-gt[0]*Math.PI/180,gt.length>=3&&(Qt=gt[1],Gt=gt[2]),ve.identity().translate(-Qt,-Gt),Be.identity().rotate(ot),Ue.multiplyMatrices(Be,ve),ve.identity().translate(Qt,Gt),oe.multiplyMatrices(ve,Ue)}break;case"scale":if(gt.length>=1){const ot=gt[0];let Qt=ot;gt.length>=2&&(Qt=gt[1]),oe.scale(ot,Qt)}break;case"skewX":gt.length===1&&oe.set(1,Math.tan(gt[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":gt.length===1&&oe.set(1,0,0,Math.tan(gt[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":gt.length===6&&oe.set(gt[0],gt[2],gt[4],gt[1],gt[3],gt[5],0,0,1);break}}_e.premultiply(oe)}}return _e}function W(Ee,_e){function oe(ye){Ne.set(ye.x,ye.y,1).applyMatrix3(_e),ye.set(Ne.x,Ne.y)}const me=Y(_e),Te=Ee.subPaths;for(let ye=0,ze=Te.length;ye<ze;ye++){const At=Te[ye].curves;for(let gt=0;gt<At.length;gt++){const ot=At[gt];ot.isLineCurve?(oe(ot.v1),oe(ot.v2)):ot.isCubicBezierCurve?(oe(ot.v0),oe(ot.v1),oe(ot.v2),oe(ot.v3)):ot.isQuadraticBezierCurve?(oe(ot.v0),oe(ot.v1),oe(ot.v2)):ot.isEllipseCurve&&(me&&Xp.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),Ie.set(ot.aX,ot.aY),oe(Ie),ot.aX=Ie.x,ot.aY=Ie.y,ot.xRadius*=K(_e),ot.yRadius*=ie(_e))}}}function Y(Ee){return Ee.elements[1]!==0||Ee.elements[3]!==0}function K(Ee){const _e=Ee.elements;return Math.sqrt(_e[0]*_e[0]+_e[1]*_e[1])}function ie(Ee){const _e=Ee.elements;return Math.sqrt(_e[3]*_e[3]+_e[4]*_e[4])}const ce=[],ge={},ae=[],xe=new o.Matrix3,ve=new o.Matrix3,Be=new o.Matrix3,Ue=new o.Matrix3,Ie=new o.Vector2,Ne=new o.Vector3,Le=new o.Matrix3,Ye=new DOMParser().parseFromString(t,"image/svg+xml");return s(Ye.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:ce,xml:Ye.documentElement}}static createShapes(t){const s={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},c={loc:s.ORIGIN,t:0};function p(O,P,D,z){const H=O.x,Q=P.x,W=D.x,Y=z.x,K=O.y,ie=P.y,ce=D.y,ge=z.y,ae=(Y-W)*(K-ce)-(ge-ce)*(H-W),xe=(Q-H)*(K-ce)-(ie-K)*(H-W),ve=(ge-ce)*(Q-H)-(Y-W)*(ie-K),Be=ae/ve,Ue=xe/ve;if(ve===0&&ae!==0||Be<=0||Be>=1||Ue<0||Ue>1)return null;if(ae===0&&ve===0){for(let Ie=0;Ie<2;Ie++)if(h(Ie===0?D:z,O,P),c.loc==s.ORIGIN){const Ne=Ie===0?D:z;return{x:Ne.x,y:Ne.y,t:c.t}}else if(c.loc==s.BETWEEN){const Ne=+(H+c.t*(Q-H)).toPrecision(10),Le=+(K+c.t*(ie-K)).toPrecision(10);return{x:Ne,y:Le,t:c.t}}return null}else{for(let Le=0;Le<2;Le++)if(h(Le===0?D:z,O,P),c.loc==s.ORIGIN){const Ye=Le===0?D:z;return{x:Ye.x,y:Ye.y,t:c.t}}const Ie=+(H+Be*(Q-H)).toPrecision(10),Ne=+(K+Be*(ie-K)).toPrecision(10);return{x:Ie,y:Ne,t:Be}}}function h(O,P,D){const z=D.x-P.x,H=D.y-P.y,Q=O.x-P.x,W=O.y-P.y,Y=z*W-Q*H;if(O.x===P.x&&O.y===P.y){c.loc=s.ORIGIN,c.t=0;return}if(O.x===D.x&&O.y===D.y){c.loc=s.DESTINATION,c.t=1;return}if(Y<-Number.EPSILON){c.loc=s.LEFT;return}if(Y>Number.EPSILON){c.loc=s.RIGHT;return}if(z*Q<0||H*W<0){c.loc=s.BEHIND;return}if(Math.sqrt(z*z+H*H)<Math.sqrt(Q*Q+W*W)){c.loc=s.BEYOND;return}let K;z!==0?K=Q/z:K=W/H,c.loc=s.BETWEEN,c.t=K}function g(O,P){const D=[],z=[];for(let H=1;H<O.length;H++){const Q=O[H-1],W=O[H];for(let Y=1;Y<P.length;Y++){const K=P[Y-1],ie=P[Y],ce=p(Q,W,K,ie);ce!==null&&D.find(ge=>ge.t<=ce.t+Number.EPSILON&&ge.t>=ce.t-Number.EPSILON)===void 0&&(D.push(ce),z.push(new o.Vector2(ce.x,ce.y)))}}return z}function y(O,P,D){const z=new o.Vector2;P.getCenter(z);const H=[];return D.forEach(Q=>{Q.boundingBox.containsPoint(z)&&g(O,Q.points).forEach(Y=>{H.push({identifier:Q.identifier,isCW:Q.isCW,point:Y})})}),H.sort((Q,W)=>Q.point.x-W.point.x),H}function _(O,P,D,z,H){(H==null||H==="")&&(H="nonzero");const Q=new o.Vector2;O.boundingBox.getCenter(Q);const W=[new o.Vector2(D,Q.y),new o.Vector2(z,Q.y)],Y=y(W,O.boundingBox,P);Y.sort((xe,ve)=>xe.point.x-ve.point.x);const K=[],ie=[];Y.forEach(xe=>{xe.identifier===O.identifier?K.push(xe):ie.push(xe)});const ce=K[0].point.x,ge=[];let ae=0;for(;ae<ie.length&&ie[ae].point.x<ce;)ge.length>0&&ge[ge.length-1]===ie[ae].identifier?ge.pop():ge.push(ie[ae].identifier),ae++;if(ge.push(O.identifier),H==="evenodd"){const xe=ge.length%2===0,ve=ge[ge.length-2];return{identifier:O.identifier,isHole:xe,for:ve}}else if(H==="nonzero"){let xe=!0,ve=null,Be=null;for(let Ue=0;Ue<ge.length;Ue++){const Ie=ge[Ue];xe?(Be=P[Ie].isCW,xe=!1,ve=Ie):Be!==P[Ie].isCW&&(Be=P[Ie].isCW,xe=!0)}return{identifier:O.identifier,isHole:xe,for:ve}}else Xp.warn('fill-rule: "'+H+'" is currently not implemented.')}let b=0,T=999999999,R=-999999999,F=t.subPaths.map(O=>{const P=O.getPoints();let D=-999999999,z=999999999,H=-999999999,Q=999999999;for(let W=0;W<P.length;W++){const Y=P[W];Y.y>D&&(D=Y.y),Y.y<z&&(z=Y.y),Y.x>H&&(H=Y.x),Y.x<Q&&(Q=Y.x)}return R<=H&&(R=H+1),T>=Q&&(T=Q-1),{curves:O.curves,points:P,isCW:o.ShapeUtils.isClockWise(P),identifier:b++,boundingBox:new o.Box2(new o.Vector2(Q,z),new o.Vector2(H,D))}});F=F.filter(O=>O.points.length>1);const G=F.map(O=>_(O,F,T,R,t.userData.style.fillRule)),L=[];return F.forEach(O=>{if(!G[O.identifier].isHole){const D=new o.Shape;D.curves=O.curves,G.filter(H=>H.isHole&&H.for===O.identifier).forEach(H=>{const Q=F[H.identifier],W=new o.Path;W.curves=Q.curves,D.holes.push(W)}),L.push(D)}}),L}static getStrokeStyle(t,r,s,c,p){return t=t!==void 0?t:1,r=r!==void 0?r:"#000",s=s!==void 0?s:"miter",c=c!==void 0?c:"butt",p=p!==void 0?p:4,{strokeColor:r,strokeWidth:t,strokeLineJoin:s,strokeLineCap:c,strokeMiterLimit:p}}static pointsToStroke(t,r,s,c){const p=[],h=[],g=[];if(Eh.pointsToStrokeWithBuffers(t,r,s,c,p,h,g)===0)return null;const y=new o.BufferGeometry;return y.setAttribute("position",new o.Float32BufferAttribute(p,3)),y.setAttribute("normal",new o.Float32BufferAttribute(h,3)),y.setAttribute("uv",new o.Float32BufferAttribute(g,2)),y}static pointsToStrokeWithBuffers(t,r,s,c,p,h,g,y){const _=new o.Vector2,b=new o.Vector2,T=new o.Vector2,R=new o.Vector2,F=new o.Vector2,G=new o.Vector2,L=new o.Vector2,O=new o.Vector2,P=new o.Vector2,D=new o.Vector2,z=new o.Vector2,H=new o.Vector2,Q=new o.Vector2,W=new o.Vector2,Y=new o.Vector2,K=new o.Vector2,ie=new o.Vector2;s=s!==void 0?s:12,c=c!==void 0?c:.001,y=y!==void 0?y:0,t=Qt(t);const ce=t.length;if(ce<2)return 0;const ge=t[0].equals(t[ce-1]);let ae,xe=t[0],ve;const Be=r.strokeWidth/2,Ue=1/(ce-1);let Ie=0,Ne,Le,Ye,Ce,Ee=!1,_e=0,oe=y*3,me=y*2;Te(t[0],t[1],_).multiplyScalar(Be),O.copy(t[0]).sub(_),P.copy(t[0]).add(_),D.copy(O),z.copy(P);for(let Gt=1;Gt<ce;Gt++){ae=t[Gt],Gt===ce-1?ge?ve=t[1]:ve=void 0:ve=t[Gt+1];const Bt=_;if(Te(xe,ae,Bt),T.copy(Bt).multiplyScalar(Be),H.copy(ae).sub(T),Q.copy(ae).add(T),Ne=Ie+Ue,Le=!1,ve!==void 0){Te(ae,ve,b),T.copy(b).multiplyScalar(Be),W.copy(ae).sub(T),Y.copy(ae).add(T),Ye=!0,T.subVectors(ve,xe),Bt.dot(T)<0&&(Ye=!1),Gt===1&&(Ee=Ye),T.subVectors(ve,ae),T.normalize();const qe=Math.abs(Bt.dot(T));if(qe!==0){const Ge=Be/qe;T.multiplyScalar(-Ge),R.subVectors(ae,xe),F.copy(R).setLength(Ge).add(T),K.copy(F).negate();const Ot=F.length(),gn=R.length();R.divideScalar(gn),G.subVectors(ve,ae);const Mn=G.length();switch(G.divideScalar(Mn),R.dot(K)<gn&&G.dot(K)<Mn&&(Le=!0),ie.copy(F).add(ae),K.add(ae),Ce=!1,Le?Ye?(Y.copy(K),Q.copy(K)):(W.copy(K),H.copy(K)):Mt(),r.strokeLineJoin){case"bevel":At(Ye,Le,Ne);break;case"round":gt(Ye,Le),Ye?ze(ae,H,W,Ne,0):ze(ae,Y,Q,Ne,1);break;case"miter":case"miter-clip":default:const Ut=Be*r.strokeMiterLimit/Ot;if(Ut<1)if(r.strokeLineJoin!=="miter-clip"){At(Ye,Le,Ne);break}else gt(Ye,Le),Ye?(G.subVectors(ie,H).multiplyScalar(Ut).add(H),L.subVectors(ie,W).multiplyScalar(Ut).add(W),ye(H,Ne,0),ye(G,Ne,0),ye(ae,Ne,.5),ye(ae,Ne,.5),ye(G,Ne,0),ye(L,Ne,0),ye(ae,Ne,.5),ye(L,Ne,0),ye(W,Ne,0)):(G.subVectors(ie,Q).multiplyScalar(Ut).add(Q),L.subVectors(ie,Y).multiplyScalar(Ut).add(Y),ye(Q,Ne,1),ye(G,Ne,1),ye(ae,Ne,.5),ye(ae,Ne,.5),ye(G,Ne,1),ye(L,Ne,1),ye(ae,Ne,.5),ye(L,Ne,1),ye(Y,Ne,1));else Le?(Ye?(ye(P,Ie,1),ye(O,Ie,0),ye(ie,Ne,0),ye(P,Ie,1),ye(ie,Ne,0),ye(K,Ne,1)):(ye(P,Ie,1),ye(O,Ie,0),ye(ie,Ne,1),ye(O,Ie,0),ye(K,Ne,0),ye(ie,Ne,1)),Ye?W.copy(ie):Y.copy(ie)):Ye?(ye(H,Ne,0),ye(ie,Ne,0),ye(ae,Ne,.5),ye(ae,Ne,.5),ye(ie,Ne,0),ye(W,Ne,0)):(ye(Q,Ne,1),ye(ie,Ne,1),ye(ae,Ne,.5),ye(ae,Ne,.5),ye(ie,Ne,1),ye(Y,Ne,1)),Ce=!0;break}}else Mt()}else Mt();!ge&&Gt===ce-1&&ot(t[0],D,z,Ye,!0,Ie),Ie=Ne,xe=ae,O.copy(W),P.copy(Y)}if(!ge)ot(ae,H,Q,Ye,!1,Ne);else if(Le&&p){let Gt=ie,Bt=K;Ee!==Ye&&(Gt=K,Bt=ie),Ye?(Ce||Ee)&&(Bt.toArray(p,0*3),Bt.toArray(p,3*3),Ce&&Gt.toArray(p,1*3)):(Ce||!Ee)&&(Bt.toArray(p,1*3),Bt.toArray(p,3*3),Ce&&Gt.toArray(p,0*3))}return _e;function Te(Gt,Bt,qe){return qe.subVectors(Bt,Gt),qe.set(-qe.y,qe.x).normalize()}function ye(Gt,Bt,qe){p&&(p[oe]=Gt.x,p[oe+1]=Gt.y,p[oe+2]=0,h&&(h[oe]=0,h[oe+1]=0,h[oe+2]=1),oe+=3,g&&(g[me]=Bt,g[me+1]=qe,me+=2)),_e+=3}function ze(Gt,Bt,qe,Ge,Ot){_.copy(Bt).sub(Gt).normalize(),b.copy(qe).sub(Gt).normalize();let gn=Math.PI;const Mn=_.dot(b);Math.abs(Mn)<1&&(gn=Math.abs(Math.acos(Mn))),gn/=s,T.copy(Bt);for(let Ut=0,Nn=s-1;Ut<Nn;Ut++)R.copy(T).rotateAround(Gt,gn),ye(T,Ge,Ot),ye(R,Ge,Ot),ye(Gt,Ge,.5),T.copy(R);ye(R,Ge,Ot),ye(qe,Ge,Ot),ye(Gt,Ge,.5)}function Mt(){ye(P,Ie,1),ye(O,Ie,0),ye(H,Ne,0),ye(P,Ie,1),ye(H,Ne,1),ye(Q,Ne,0)}function At(Gt,Bt,qe){Bt?Gt?(ye(P,Ie,1),ye(O,Ie,0),ye(H,Ne,0),ye(P,Ie,1),ye(H,Ne,0),ye(K,Ne,1),ye(H,qe,0),ye(W,qe,0),ye(K,qe,.5)):(ye(P,Ie,1),ye(O,Ie,0),ye(Q,Ne,1),ye(O,Ie,0),ye(K,Ne,0),ye(Q,Ne,1),ye(Q,qe,1),ye(Y,qe,0),ye(K,qe,.5)):Gt?(ye(H,qe,0),ye(W,qe,0),ye(ae,qe,.5)):(ye(Q,qe,1),ye(Y,qe,0),ye(ae,qe,.5))}function gt(Gt,Bt){Bt&&(Gt?(ye(P,Ie,1),ye(O,Ie,0),ye(H,Ne,0),ye(P,Ie,1),ye(H,Ne,0),ye(K,Ne,1),ye(H,Ie,0),ye(ae,Ne,.5),ye(K,Ne,1),ye(ae,Ne,.5),ye(W,Ie,0),ye(K,Ne,1)):(ye(P,Ie,1),ye(O,Ie,0),ye(Q,Ne,1),ye(O,Ie,0),ye(K,Ne,0),ye(Q,Ne,1),ye(Q,Ie,1),ye(K,Ne,0),ye(ae,Ne,.5),ye(ae,Ne,.5),ye(K,Ne,0),ye(Y,Ie,1)))}function ot(Gt,Bt,qe,Ge,Ot,gn){switch(r.strokeLineCap){case"round":Ot?ze(Gt,qe,Bt,gn,.5):ze(Gt,Bt,qe,gn,.5);break;case"square":if(Ot)_.subVectors(Bt,Gt),b.set(_.y,-_.x),T.addVectors(_,b).add(Gt),R.subVectors(b,_).add(Gt),Ge?(T.toArray(p,1*3),R.toArray(p,0*3),R.toArray(p,3*3)):(T.toArray(p,1*3),T.toArray(p,3*3),R.toArray(p,0*3));else{_.subVectors(qe,Gt),b.set(_.y,-_.x),T.addVectors(_,b).add(Gt),R.subVectors(b,_).add(Gt);const Mn=p.length;Ge?(T.toArray(p,Mn-1*3),R.toArray(p,Mn-2*3),R.toArray(p,Mn-4*3)):(T.toArray(p,Mn-2*3),R.toArray(p,Mn-1*3),R.toArray(p,Mn-4*3))}break;case"butt":default:break}}function Qt(Gt){let Bt=!1;for(let Ge=1,Ot=Gt.length-1;Ge<Ot;Ge++)if(Gt[Ge].distanceTo(Gt[Ge+1])<c){Bt=!0;break}if(!Bt)return Gt;const qe=[];qe.push(Gt[0]);for(let Ge=1,Ot=Gt.length-1;Ge<Ot;Ge++)Gt[Ge].distanceTo(Gt[Ge+1])>=c&&qe.push(Gt[Ge]);return qe.push(Gt[Gt.length-1]),qe}}}const W3=(0,d.forwardRef)(function(b,_){var T=b,{src:t,skipFill:r,skipStrokes:s,fillMaterial:c,strokeMaterial:p,fillMeshProps:h,strokeMeshProps:g}=T,y=An(T,["src","skipFill","skipStrokes","fillMaterial","strokeMaterial","fillMeshProps","strokeMeshProps"]);const R=(0,E.D)(Eh,t.startsWith("<svg")?`data:image/svg+xml;utf8,${t}`:t),F=(0,d.useMemo)(()=>s?[]:R.paths.map(G=>{var L;return((L=G.userData)==null?void 0:L.style.stroke)===void 0||G.userData.style.stroke==="none"?null:G.subPaths.map(O=>Eh.pointsToStroke(O.getPoints(),G.userData.style))}),[R,s]);return(0,d.useEffect)(()=>()=>F.forEach(G=>G&&G.map(L=>L.dispose())),[F]),d.createElement("object3D",(0,w.Z)({ref:_},y),d.createElement("object3D",{scale:[1,-1,1]},R.paths.map((G,L)=>{var O,P;return d.createElement(d.Fragment,{key:L},!r&&((O=G.userData)==null?void 0:O.style.fill)!==void 0&&G.userData.style.fill!=="none"&&Eh.createShapes(G).map((D,z)=>d.createElement("mesh",(0,w.Z)({key:z},h),d.createElement("shapeGeometry",{args:[D]}),d.createElement("meshBasicMaterial",(0,w.Z)({color:G.userData.style.fill,opacity:G.userData.style.fillOpacity,transparent:!0,side:o.DoubleSide,depthWrite:!1},c)))),!s&&((P=G.userData)==null?void 0:P.style.stroke)!==void 0&&G.userData.style.stroke!=="none"&&G.subPaths.map((D,z)=>d.createElement("mesh",(0,w.Z)({key:z,geometry:F[L][z]},g),d.createElement("meshBasicMaterial",(0,w.Z)({color:G.userData.style.stroke,opacity:G.userData.style.strokeOpacity,transparent:!0,side:o.DoubleSide,depthWrite:!1},p)))))})))});var M0=A(25108);const pA=new WeakMap;class Lv extends o.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,s,c){const p=new o.FileLoader(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{const g={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(h,g).then(r).catch(c)},s,c)}decodeDracoFile(t,r,s,c){const p={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:c||this.defaultAttributeTypes,useUniqueIDs:!!s};this.decodeGeometry(t,p).then(r)}decodeGeometry(t,r){for(const y in r.attributeTypes){const _=r.attributeTypes[y];_.BYTES_PER_ELEMENT!==void 0&&(r.attributeTypes[y]=_.name)}const s=JSON.stringify(r);if(pA.has(t)){const y=pA.get(t);if(y.key===s)return y.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let c;const p=this.workerNextTaskID++,h=t.byteLength,g=this._getWorker(p,h).then(y=>(c=y,new Promise((_,b)=>{c._callbacks[p]={resolve:_,reject:b},c.postMessage({type:"decode",id:p,taskConfig:r,buffer:t},[t])}))).then(y=>this._createGeometry(y.geometry));return g.catch(()=>!0).then(()=>{c&&p&&this._releaseTask(c,p)}),pA.set(t,{key:s,promise:g}),g}_createGeometry(t){const r=new o.BufferGeometry;t.index&&r.setIndex(new o.BufferAttribute(t.index.array,1));for(let s=0;s<t.attributes.length;s++){const c=t.attributes[s],p=c.name,h=c.array,g=c.itemSize;r.setAttribute(p,new o.BufferAttribute(h,g))}return r}_loadLibrary(t,r){const s=new o.FileLoader(this.manager);return s.setPath(this.decoderPath),s.setResponseType(r),s.setWithCredentials(this.withCredentials),new Promise((c,p)=>{s.load(t,c,void 0,p)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(s=>{const c=s[0];t||(this.decoderConfig.wasmBinary=s[1]);const p=kv.toString(),h=["/* draco decoder */",c,"","/* worker */",p.substring(p.indexOf("{")+1,p.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const c=new Worker(this.workerSourceURL);c._callbacks={},c._taskCosts={},c._taskLoad=0,c.postMessage({type:"init",decoderConfig:this.decoderConfig}),c.onmessage=function(p){const h=p.data;switch(h.type){case"decode":c._callbacks[h.id].resolve(h);break;case"error":c._callbacks[h.id].reject(h);break;default:M0.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(c)}else this.workerPool.sort(function(c,p){return c._taskLoad>p._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[t]=r,s._taskLoad+=r,s})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){M0.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function kv(){let i,t;onmessage=function(h){const g=h.data;switch(g.type){case"init":i=g.decoderConfig,t=new Promise(function(b){i.onModuleLoaded=function(T){b({draco:T})},DracoDecoderModule(i)});break;case"decode":const y=g.buffer,_=g.taskConfig;t.then(b=>{const T=b.draco,R=new T.Decoder,F=new T.DecoderBuffer;F.Init(new Int8Array(y),y.byteLength);try{const G=r(T,R,F,_),L=G.attributes.map(O=>O.array.buffer);G.index&&L.push(G.index.array.buffer),self.postMessage({type:"decode",id:g.id,geometry:G},L)}catch(G){M0.error(G),self.postMessage({type:"error",id:g.id,error:G.message})}finally{T.destroy(F),T.destroy(R)}});break}};function r(h,g,y,_){const b=_.attributeIDs,T=_.attributeTypes;let R,F;const G=g.GetEncodedGeometryType(y);if(G===h.TRIANGULAR_MESH)R=new h.Mesh,F=g.DecodeBufferToMesh(y,R);else if(G===h.POINT_CLOUD)R=new h.PointCloud,F=g.DecodeBufferToPointCloud(y,R);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!F.ok()||R.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+F.error_msg());const L={index:null,attributes:[]};for(const O in b){const P=self[T[O]];let D,z;if(_.useUniqueIDs)z=b[O],D=g.GetAttributeByUniqueId(R,z);else{if(z=g.GetAttributeId(R,h[b[O]]),z===-1)continue;D=g.GetAttribute(R,z)}L.attributes.push(c(h,g,R,O,P,D))}return G===h.TRIANGULAR_MESH&&(L.index=s(h,g,R)),h.destroy(R),L}function s(h,g,y){const b=y.num_faces()*3,T=b*4,R=h._malloc(T);g.GetTrianglesUInt32Array(y,T,R);const F=new Uint32Array(h.HEAPF32.buffer,R,b).slice();return h._free(R),{array:F,itemSize:1}}function c(h,g,y,_,b,T){const R=T.num_components(),G=y.num_points()*R,L=G*b.BYTES_PER_ELEMENT,O=p(h,b),P=h._malloc(L);g.GetAttributeDataArrayForAllPoints(y,T,O,L,P);const D=new b(h.HEAPF32.buffer,P,G).slice();return h._free(P),{name:_,array:D,itemSize:R}}function p(h,g){switch(g){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}let sm;const x0=()=>{if(sm)return sm;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),s=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let c=i;WebAssembly.validate(r)&&(c=t);let p;const h=WebAssembly.instantiate(g(c),{}).then(T=>{p=T.instance,p.exports.__wasm_call_ctors()});function g(T){const R=new Uint8Array(T.length);for(let G=0;G<T.length;++G){const L=T.charCodeAt(G);R[G]=L>96?L-71:L>64?L-65:L>47?L+4:L>46?63:62}let F=0;for(let G=0;G<T.length;++G)R[F++]=R[G]<60?s[R[G]]:(R[G]-60)*64+R[++G];return R.buffer.slice(0,F)}function y(T,R,F,G,L,O){const P=p.exports.sbrk,D=F+3&-4,z=P(D*G),H=P(L.length),Q=new Uint8Array(p.exports.memory.buffer);Q.set(L,H);const W=T(z,F,G,H,L.length);if(W===0&&O&&O(z,D,G),R.set(Q.subarray(z,z+F*G)),P(z-P(0)),W!==0)throw new Error(`Malformed buffer data: ${W}`)}const _={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},b={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return sm={ready:h,supported:!0,decodeVertexBuffer(T,R,F,G,L){y(p.exports.meshopt_decodeVertexBuffer,T,R,F,G,p.exports[_[L]])},decodeIndexBuffer(T,R,F,G){y(p.exports.meshopt_decodeIndexBuffer,T,R,F,G)},decodeIndexSequence(T,R,F,G){y(p.exports.meshopt_decodeIndexSequence,T,R,F,G)},decodeGltfBuffer(T,R,F,G,L,O){y(p.exports[b[L]],T,R,F,G,p.exports[_[O]])}},sm};var zc=A(25108);class If extends o.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Gv(r)}),this.register(function(r){return new Nv(r)}),this.register(function(r){return new Hv(r)}),this.register(function(r){return new bh(r)}),this.register(function(r){return new X3(r)}),this.register(function(r){return new C0(r)}),this.register(function(r){return new dA(r)}),this.register(function(r){return new K3(r)}),this.register(function(r){return new Q3(r)}),this.register(function(r){return new Y3(r)}),this.register(function(r){return new Uv(r)}),this.register(function(r){return new J3(r)}),this.register(function(r){return new zv(r)}),this.register(function(r){return new q3(r)}),this.register(function(r){return new jv(r)})}load(t,r,s,c){const p=this;let h;this.resourcePath!==""?h=this.resourcePath:this.path!==""?h=this.path:h=o.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);const g=function(_){c?c(_):zc.error(_),p.manager.itemError(t),p.manager.itemEnd(t)},y=new o.FileLoader(this.manager);y.setPath(this.path),y.setResponseType("arraybuffer"),y.setRequestHeader(this.requestHeader),y.setWithCredentials(this.withCredentials),y.load(t,function(_){try{p.parse(_,h,function(b){r(b),p.manager.itemEnd(t)},g)}catch(b){g(b)}},s,g)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,s,c){let p;const h={},g={};if(typeof t=="string")p=JSON.parse(t);else if(t instanceof ArrayBuffer)if(o.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4)))===hA){try{h[Xi.KHR_BINARY_GLTF]=new Z3(t)}catch(b){c&&c(b);return}p=JSON.parse(h[Xi.KHR_BINARY_GLTF].content)}else p=JSON.parse(o.LoaderUtils.decodeText(new Uint8Array(t)));else p=t;if(p.asset===void 0||p.asset.version[0]<2){c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const y=new aE(p,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});y.fileLoader.setRequestHeader(this.requestHeader);for(let _=0;_<this.pluginCallbacks.length;_++){const b=this.pluginCallbacks[_](y);g[b.name]=b,h[b.name]=!0}if(p.extensionsUsed)for(let _=0;_<p.extensionsUsed.length;++_){const b=p.extensionsUsed[_],T=p.extensionsRequired||[];switch(b){case Xi.KHR_MATERIALS_UNLIT:h[b]=new V3;break;case Xi.KHR_DRACO_MESH_COMPRESSION:h[b]=new Mh(p,this.dracoLoader);break;case Xi.KHR_TEXTURE_TRANSFORM:h[b]=new $3;break;case Xi.KHR_MESH_QUANTIZATION:h[b]=new Wv;break;default:T.indexOf(b)>=0&&g[b]===void 0&&zc.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}y.setExtensions(h),y.setPlugins(g),y.parse(s,c)}parseAsync(t,r){const s=this;return new Promise(function(c,p){s.parse(t,r,c,p)})}}function uA(){let i={};return{get:function(t){return i[t]},add:function(t,r){i[t]=r},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Xi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zv{constructor(t){this.parser=t,this.name=Xi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let s=0,c=r.length;s<c;s++){const p=r[s];p.extensions&&p.extensions[this.name]&&p.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,p.extensions[this.name].light)}}_loadLight(t){const r=this.parser,s="light:"+t;let c=r.cache.get(s);if(c)return c;const p=r.json,y=((p.extensions&&p.extensions[this.name]||{}).lights||[])[t];let _;const b=new o.Color(16777215);y.color!==void 0&&b.fromArray(y.color);const T=y.range!==void 0?y.range:0;switch(y.type){case"directional":_=new o.DirectionalLight(b),_.target.position.set(0,0,-1),_.add(_.target);break;case"point":_=new o.PointLight(b),_.distance=T;break;case"spot":_=new o.SpotLight(b),_.distance=T,y.spot=y.spot||{},y.spot.innerConeAngle=y.spot.innerConeAngle!==void 0?y.spot.innerConeAngle:0,y.spot.outerConeAngle=y.spot.outerConeAngle!==void 0?y.spot.outerConeAngle:Math.PI/4,_.angle=y.spot.outerConeAngle,_.penumbra=1-y.spot.innerConeAngle/y.spot.outerConeAngle,_.target.position.set(0,0,-1),_.add(_.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+y.type)}return _.position.set(0,0,0),_.decay=2,_d(_,y),y.intensity!==void 0&&(_.intensity=y.intensity),_.name=r.createUniqueName(y.name||"light_"+t),c=Promise.resolve(_),r.cache.add(s,c),c}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,s=this.parser,p=s.json.nodes[t],g=(p.extensions&&p.extensions[this.name]||{}).light;return g===void 0?null:this._loadLight(g).then(function(y){return s._getNodeRef(r.cache,g,y)})}}class V3{constructor(){this.name=Xi.KHR_MATERIALS_UNLIT}getMaterialType(){return o.MeshBasicMaterial}extendParams(t,r,s){const c=[];t.color=new o.Color(1,1,1),t.opacity=1;const p=r.pbrMetallicRoughness;if(p){if(Array.isArray(p.baseColorFactor)){const h=p.baseColorFactor;t.color.fromArray(h),t.opacity=h[3]}p.baseColorTexture!==void 0&&c.push(s.assignTexture(t,"map",p.baseColorTexture,3001))}return Promise.all(c)}}class Q3{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const c=this.parser.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=c.extensions[this.name].emissiveStrength;return p!==void 0&&(r.emissiveIntensity=p),Promise.resolve()}}class Gv{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];if(h.clearcoatFactor!==void 0&&(r.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&p.push(s.assignTexture(r,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&p.push(s.assignTexture(r,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(p.push(s.assignTexture(r,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const g=h.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new o.Vector2(g,g)}return Promise.all(p)}}class Uv{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.iridescenceFactor!==void 0&&(r.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&p.push(s.assignTexture(r,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(r.iridescenceIOR=h.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&p.push(s.assignTexture(r,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(p)}}class X3{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[];r.sheenColor=new o.Color(0,0,0),r.sheenRoughness=0,r.sheen=1;const h=c.extensions[this.name];return h.sheenColorFactor!==void 0&&r.sheenColor.fromArray(h.sheenColorFactor),h.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&p.push(s.assignTexture(r,"sheenColorMap",h.sheenColorTexture,3001)),h.sheenRoughnessTexture!==void 0&&p.push(s.assignTexture(r,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(p)}}class C0{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.transmissionFactor!==void 0&&(r.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&p.push(s.assignTexture(r,"transmissionMap",h.transmissionTexture)),Promise.all(p)}}class dA{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];r.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&p.push(s.assignTexture(r,"thicknessMap",h.thicknessTexture)),r.attenuationDistance=h.attenuationDistance||1/0;const g=h.attenuationColor||[1,1,1];return r.attenuationColor=new o.Color(g[0],g[1],g[2]),Promise.all(p)}}class K3{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const c=this.parser.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=c.extensions[this.name];return r.ior=p.ior!==void 0?p.ior:1.5,Promise.resolve()}}class Y3{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];r.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&p.push(s.assignTexture(r,"specularIntensityMap",h.specularTexture));const g=h.specularColorFactor||[1,1,1];return r.specularColor=new o.Color(g[0],g[1],g[2]),h.specularColorTexture!==void 0&&p.push(s.assignTexture(r,"specularColorMap",h.specularColorTexture,3001)),Promise.all(p)}}class J3{constructor(t){this.parser=t,this.name=Xi.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:o.MeshPhysicalMaterial}extendMaterialParams(t,r){const s=this.parser,c=s.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.anisotropyStrength!==void 0&&(r.anisotropy=h.anisotropyStrength),h.anisotropyRotation!==void 0&&(r.anisotropyRotation=h.anisotropyRotation),h.anisotropyTexture!==void 0&&p.push(s.assignTexture(r,"anisotropyMap",h.anisotropyTexture)),Promise.all(p)}}class Nv{constructor(t){this.parser=t,this.name=Xi.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,s=r.json,c=s.textures[t];if(!c.extensions||!c.extensions[this.name])return null;const p=c.extensions[this.name],h=r.options.ktx2Loader;if(!h){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,p.source,h)}}class Hv{constructor(t){this.parser=t,this.name=Xi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,c=s.json,p=c.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],g=c.images[h.source];let y=s.textureLoader;if(g.uri){const _=s.options.manager.getHandler(g.uri);_!==null&&(y=_)}return this.detectSupport().then(function(_){if(_)return s.loadTextureImage(t,h.source,y);if(c.extensionsRequired&&c.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class bh{constructor(t){this.parser=t,this.name=Xi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,s=this.parser,c=s.json,p=c.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],g=c.images[h.source];let y=s.textureLoader;if(g.uri){const _=s.options.manager.getHandler(g.uri);_!==null&&(y=_)}return this.detectSupport().then(function(_){if(_)return s.loadTextureImage(t,h.source,y);if(c.extensionsRequired&&c.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class q3{constructor(t){this.name=Xi.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,s=r.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const c=s.extensions[this.name],p=this.parser.getDependency("buffer",c.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return p.then(function(g){const y=c.byteOffset||0,_=c.byteLength||0,b=c.count,T=c.byteStride,R=new Uint8Array(g,y,_);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(b,T,R,c.mode,c.filter).then(function(F){return F.buffer}):h.ready.then(function(){const F=new ArrayBuffer(b*T);return h.decodeGltfBuffer(new Uint8Array(F),b,T,R,c.mode,c.filter),F})})}else return null}}class jv{constructor(t){this.name=Xi.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,s=r.nodes[t];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const c=r.meshes[s.mesh];for(const _ of c.primitives)if(_.mode!==Da.TRIANGLES&&_.mode!==Da.TRIANGLE_STRIP&&_.mode!==Da.TRIANGLE_FAN&&_.mode!==void 0)return null;const h=s.extensions[this.name].attributes,g=[],y={};for(const _ in h)g.push(this.parser.getDependency("accessor",h[_]).then(b=>(y[_]=b,y[_])));return g.length<1?null:(g.push(this.parser.createNodeMesh(t)),Promise.all(g).then(_=>{const b=_.pop(),T=b.isGroup?b.children:[b],R=_[0].count,F=[];for(const G of T){const L=new o.Matrix4,O=new o.Vector3,P=new o.Quaternion,D=new o.Vector3(1,1,1),z=new o.InstancedMesh(G.geometry,G.material,R);for(let H=0;H<R;H++)y.TRANSLATION&&O.fromBufferAttribute(y.TRANSLATION,H),y.ROTATION&&P.fromBufferAttribute(y.ROTATION,H),y.SCALE&&D.fromBufferAttribute(y.SCALE,H),z.setMatrixAt(H,L.compose(O,P,D));for(const H in y)H!=="TRANSLATION"&&H!=="ROTATION"&&H!=="SCALE"&&G.geometry.setAttribute(H,y[H]);o.Object3D.prototype.copy.call(z,G),this.parser.assignFinalMaterial(z),F.push(z)}return b.isGroup?(b.clear(),b.add(...F),b):F[0]}))}}const hA="glTF",cp=12,fA={JSON:1313821514,BIN:5130562};class Z3{constructor(t){this.name=Xi.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,cp);if(this.header={magic:o.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==hA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-cp,c=new DataView(t,cp);let p=0;for(;p<s;){const h=c.getUint32(p,!0);p+=4;const g=c.getUint32(p,!0);if(p+=4,g===fA.JSON){const y=new Uint8Array(t,cp+p,h);this.content=o.LoaderUtils.decodeText(y)}else if(g===fA.BIN){const y=cp+p;this.body=t.slice(y,y+h)}p+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Mh{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xi.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const s=this.json,c=this.dracoLoader,p=t.extensions[this.name].bufferView,h=t.extensions[this.name].attributes,g={},y={},_={};for(const b in h){const T=mA[b]||b.toLowerCase();g[T]=h[b]}for(const b in t.attributes){const T=mA[b]||b.toLowerCase();if(h[b]!==void 0){const R=s.accessors[t.attributes[b]],F=Ff[R.componentType];_[T]=F.name,y[T]=R.normalized===!0}}return r.getDependency("bufferView",p).then(function(b){return new Promise(function(T){c.decodeDracoFile(b,function(R){for(const F in R.attributes){const G=R.attributes[F],L=y[F];L!==void 0&&(G.normalized=L)}T(R)},g,_)})})}}class $3{constructor(){this.name=Xi.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(r.texCoord===void 0||r.texCoord===t.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.texCoord!==void 0&&(t.channel=r.texCoord),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class Wv{constructor(){this.name=Xi.KHR_MESH_QUANTIZATION}}class vd extends o.Interpolant{constructor(t,r,s,c){super(t,r,s,c)}copySampleValue_(t){const r=this.resultBuffer,s=this.sampleValues,c=this.valueSize,p=t*c*3+c;for(let h=0;h!==c;h++)r[h]=s[p+h];return r}interpolate_(t,r,s,c){const p=this.resultBuffer,h=this.sampleValues,g=this.valueSize,y=g*2,_=g*3,b=c-r,T=(s-r)/b,R=T*T,F=R*T,G=t*_,L=G-_,O=-2*F+3*R,P=F-R,D=1-O,z=P-R+T;for(let H=0;H!==g;H++){const Q=h[L+H+g],W=h[L+H+y]*b,Y=h[G+H+g],K=h[G+H]*b;p[H]=D*Q+z*W+O*Y+P*K}return p}}const Vv=new o.Quaternion;class eE extends vd{interpolate_(t,r,s,c){const p=super.interpolate_(t,r,s,c);return Vv.fromArray(p).normalize().toArray(p),p}}const Da={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ff={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Qv={9728:o.NearestFilter,9729:o.LinearFilter,9984:o.NearestMipmapNearestFilter,9985:o.LinearMipmapNearestFilter,9986:o.NearestMipmapLinearFilter,9987:o.LinearMipmapLinearFilter},gA={33071:o.ClampToEdgeWrapping,33648:o.MirroredRepeatWrapping,10497:o.RepeatWrapping},am={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mA=Xo(jn({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},o.REVISION.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),Kp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},tE={CUBICSPLINE:void 0,LINEAR:o.InterpolateLinear,STEP:o.InterpolateDiscrete},AA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function nE(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new o.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.FrontSide})),i.DefaultMaterial}function xh(i,t,r){for(const s in r.extensions)i[s]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=r.extensions[s])}function _d(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):zc.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function rE(i,t,r){let s=!1,c=!1,p=!1;for(let _=0,b=t.length;_<b;_++){const T=t[_];if(T.POSITION!==void 0&&(s=!0),T.NORMAL!==void 0&&(c=!0),T.COLOR_0!==void 0&&(p=!0),s&&c&&p)break}if(!s&&!c&&!p)return Promise.resolve(i);const h=[],g=[],y=[];for(let _=0,b=t.length;_<b;_++){const T=t[_];if(s){const R=T.POSITION!==void 0?r.getDependency("accessor",T.POSITION):i.attributes.position;h.push(R)}if(c){const R=T.NORMAL!==void 0?r.getDependency("accessor",T.NORMAL):i.attributes.normal;g.push(R)}if(p){const R=T.COLOR_0!==void 0?r.getDependency("accessor",T.COLOR_0):i.attributes.color;y.push(R)}}return Promise.all([Promise.all(h),Promise.all(g),Promise.all(y)]).then(function(_){const b=_[0],T=_[1],R=_[2];return s&&(i.morphAttributes.position=b),c&&(i.morphAttributes.normal=T),p&&(i.morphAttributes.color=R),i.morphTargetsRelative=!0,i})}function iE(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let r=0,s=t.weights.length;r<s;r++)i.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(i.morphTargetInfluences.length===r.length){i.morphTargetDictionary={};for(let s=0,c=r.length;s<c;s++)i.morphTargetDictionary[r[s]]=s}else zc.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function oE(i){let t;const r=i.extensions&&i.extensions[Xi.KHR_DRACO_MESH_COMPRESSION];if(r?t="draco:"+r.bufferView+":"+r.indices+":"+Zi(r.attributes):t=i.indices+":"+Zi(i.attributes)+":"+i.mode,i.targets!==void 0)for(let s=0,c=i.targets.length;s<c;s++)t+=":"+Zi(i.targets[s]);return t}function Zi(i){let t="";const r=Object.keys(i).sort();for(let s=0,c=r.length;s<c;s++)t+=r[s]+":"+i[r[s]]+";";return t}function yA(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Xv(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const sE=new o.Matrix4;class aE{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new uA,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,c=!1,p=-1;typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"&&(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,c=navigator.userAgent.indexOf("Firefox")>-1,p=c?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap=="undefined"||s||c&&p<98?this.textureLoader=new o.TextureLoader(this.options.manager):this.textureLoader=new o.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new o.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const s=this,c=this.json,p=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(h){const g={scene:h[0][c.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:c.asset,parser:s,userData:{}};xh(p,g,c),_d(g,c),Promise.all(s._invokeAll(function(y){return y.afterRoot&&y.afterRoot(g)})).then(function(){t(g)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],s=this.json.meshes||[];for(let c=0,p=r.length;c<p;c++){const h=r[c].joints;for(let g=0,y=h.length;g<y;g++)t[h[g]].isBone=!0}for(let c=0,p=t.length;c<p;c++){const h=t[c];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(s[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,s){if(t.refs[r]<=1)return s;const c=s.clone(),p=(h,g)=>{const y=this.associations.get(h);y!=null&&this.associations.set(g,y);for(const[_,b]of h.children.entries())p(b,g.children[_])};return p(s,c),c.name+="_instance_"+t.uses[r]++,c}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let s=0;s<r.length;s++){const c=t(r[s]);if(c)return c}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const s=[];for(let c=0;c<r.length;c++){const p=t(r[c]);p&&s.push(p)}return s}getDependency(t,r){const s=t+":"+r;let c=this.cache.get(s);if(!c){switch(t){case"scene":c=this.loadScene(r);break;case"node":c=this._invokeOne(function(p){return p.loadNode&&p.loadNode(r)});break;case"mesh":c=this._invokeOne(function(p){return p.loadMesh&&p.loadMesh(r)});break;case"accessor":c=this.loadAccessor(r);break;case"bufferView":c=this._invokeOne(function(p){return p.loadBufferView&&p.loadBufferView(r)});break;case"buffer":c=this.loadBuffer(r);break;case"material":c=this._invokeOne(function(p){return p.loadMaterial&&p.loadMaterial(r)});break;case"texture":c=this._invokeOne(function(p){return p.loadTexture&&p.loadTexture(r)});break;case"skin":c=this.loadSkin(r);break;case"animation":c=this._invokeOne(function(p){return p.loadAnimation&&p.loadAnimation(r)});break;case"camera":c=this.loadCamera(r);break;default:if(c=this._invokeOne(function(p){return p!=this&&p.getDependency&&p.getDependency(t,r)}),!c)throw new Error("Unknown type: "+t);break}this.cache.add(s,c)}return c}getDependencies(t){let r=this.cache.get(t);if(!r){const s=this,c=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(c.map(function(p,h){return s.getDependency(t,h)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],s=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[Xi.KHR_BINARY_GLTF].body);const c=this.options;return new Promise(function(p,h){s.load(o.LoaderUtils.resolveURL(r.uri,c.path),p,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(s){const c=r.byteLength||0,p=r.byteOffset||0;return s.slice(p,p+c)})}loadAccessor(t){const r=this,s=this.json,c=this.json.accessors[t];if(c.bufferView===void 0&&c.sparse===void 0){const h=am[c.type],g=Ff[c.componentType],y=c.normalized===!0,_=new g(c.count*h);return Promise.resolve(new o.BufferAttribute(_,h,y))}const p=[];return c.bufferView!==void 0?p.push(this.getDependency("bufferView",c.bufferView)):p.push(null),c.sparse!==void 0&&(p.push(this.getDependency("bufferView",c.sparse.indices.bufferView)),p.push(this.getDependency("bufferView",c.sparse.values.bufferView))),Promise.all(p).then(function(h){const g=h[0],y=am[c.type],_=Ff[c.componentType],b=_.BYTES_PER_ELEMENT,T=b*y,R=c.byteOffset||0,F=c.bufferView!==void 0?s.bufferViews[c.bufferView].byteStride:void 0,G=c.normalized===!0;let L,O;if(F&&F!==T){const P=Math.floor(R/F),D="InterleavedBuffer:"+c.bufferView+":"+c.componentType+":"+P+":"+c.count;let z=r.cache.get(D);z||(L=new _(g,P*F,c.count*F/b),z=new o.InterleavedBuffer(L,F/b),r.cache.add(D,z)),O=new o.InterleavedBufferAttribute(z,y,R%F/b,G)}else g===null?L=new _(c.count*y):L=new _(g,R,c.count*y),O=new o.BufferAttribute(L,y,G);if(c.sparse!==void 0){const P=am.SCALAR,D=Ff[c.sparse.indices.componentType],z=c.sparse.indices.byteOffset||0,H=c.sparse.values.byteOffset||0,Q=new D(h[1],z,c.sparse.count*P),W=new _(h[2],H,c.sparse.count*y);g!==null&&(O=new o.BufferAttribute(O.array.slice(),O.itemSize,O.normalized));for(let Y=0,K=Q.length;Y<K;Y++){const ie=Q[Y];if(O.setX(ie,W[Y*y]),y>=2&&O.setY(ie,W[Y*y+1]),y>=3&&O.setZ(ie,W[Y*y+2]),y>=4&&O.setW(ie,W[Y*y+3]),y>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return O})}loadTexture(t){const r=this.json,s=this.options,p=r.textures[t].source,h=r.images[p];let g=this.textureLoader;if(h.uri){const y=s.manager.getHandler(h.uri);y!==null&&(g=y)}return this.loadTextureImage(t,p,g)}loadTextureImage(t,r,s){const c=this,p=this.json,h=p.textures[t],g=p.images[r],y=(g.uri||g.bufferView)+":"+h.sampler;if(this.textureCache[y])return this.textureCache[y];const _=this.loadImageSource(r,s).then(function(b){b.flipY=!1,b.name=h.name||g.name||"",b.name===""&&typeof g.uri=="string"&&g.uri.startsWith("data:image/")===!1&&(b.name=g.uri);const R=(p.samplers||{})[h.sampler]||{};return b.magFilter=Qv[R.magFilter]||o.LinearFilter,b.minFilter=Qv[R.minFilter]||o.LinearMipmapLinearFilter,b.wrapS=gA[R.wrapS]||o.RepeatWrapping,b.wrapT=gA[R.wrapT]||o.RepeatWrapping,c.associations.set(b,{textures:t}),b}).catch(function(){return null});return this.textureCache[y]=_,_}loadImageSource(t,r){const s=this,c=this.json,p=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(T=>T.clone());const h=c.images[t],g=self.URL||self.webkitURL;let y=h.uri||"",_=!1;if(h.bufferView!==void 0)y=s.getDependency("bufferView",h.bufferView).then(function(T){_=!0;const R=new Blob([T],{type:h.mimeType});return y=g.createObjectURL(R),y});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const b=Promise.resolve(y).then(function(T){return new Promise(function(R,F){let G=R;r.isImageBitmapLoader===!0&&(G=function(L){const O=new o.Texture(L);O.needsUpdate=!0,R(O)}),r.load(o.LoaderUtils.resolveURL(T,p.path),G,void 0,F)})}).then(function(T){return _===!0&&g.revokeObjectURL(y),T.userData.mimeType=h.mimeType||Xv(h.uri),T}).catch(function(T){throw zc.error("THREE.GLTFLoader: Couldn't load texture",y),T});return this.sourceCache[t]=b,b}assignTexture(t,r,s,c){const p=this;return this.getDependency("texture",s.index).then(function(h){if(!h)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(h=h.clone(),h.channel=s.texCoord),p.extensions[Xi.KHR_TEXTURE_TRANSFORM]){const g=s.extensions!==void 0?s.extensions[Xi.KHR_TEXTURE_TRANSFORM]:void 0;if(g){const y=p.associations.get(h);h=p.extensions[Xi.KHR_TEXTURE_TRANSFORM].extendTexture(h,g),p.associations.set(h,y)}}return c!==void 0&&("colorSpace"in h?h.colorSpace=c===3001?"srgb":"srgb-linear":h.encoding=c),t[r]=h,h})}assignFinalMaterial(t){const r=t.geometry;let s=t.material;const c=r.attributes.tangent===void 0,p=r.attributes.color!==void 0,h=r.attributes.normal===void 0;if(t.isPoints){const g="PointsMaterial:"+s.uuid;let y=this.cache.get(g);y||(y=new o.PointsMaterial,o.Material.prototype.copy.call(y,s),y.color.copy(s.color),y.map=s.map,y.sizeAttenuation=!1,this.cache.add(g,y)),s=y}else if(t.isLine){const g="LineBasicMaterial:"+s.uuid;let y=this.cache.get(g);y||(y=new o.LineBasicMaterial,o.Material.prototype.copy.call(y,s),y.color.copy(s.color),y.map=s.map,this.cache.add(g,y)),s=y}if(c||p||h){let g="ClonedMaterial:"+s.uuid+":";c&&(g+="derivative-tangents:"),p&&(g+="vertex-colors:"),h&&(g+="flat-shading:");let y=this.cache.get(g);y||(y=s.clone(),p&&(y.vertexColors=!0),h&&(y.flatShading=!0),c&&(y.normalScale&&(y.normalScale.y*=-1),y.clearcoatNormalScale&&(y.clearcoatNormalScale.y*=-1)),this.cache.add(g,y),this.associations.set(y,this.associations.get(s))),s=y}t.material=s}getMaterialType(){return o.MeshStandardMaterial}loadMaterial(t){const r=this,s=this.json,c=this.extensions,p=s.materials[t];let h;const g={},y=p.extensions||{},_=[];if(y[Xi.KHR_MATERIALS_UNLIT]){const T=c[Xi.KHR_MATERIALS_UNLIT];h=T.getMaterialType(),_.push(T.extendParams(g,p,r))}else{const T=p.pbrMetallicRoughness||{};if(g.color=new o.Color(1,1,1),g.opacity=1,Array.isArray(T.baseColorFactor)){const R=T.baseColorFactor;g.color.fromArray(R),g.opacity=R[3]}T.baseColorTexture!==void 0&&_.push(r.assignTexture(g,"map",T.baseColorTexture,3001)),g.metalness=T.metallicFactor!==void 0?T.metallicFactor:1,g.roughness=T.roughnessFactor!==void 0?T.roughnessFactor:1,T.metallicRoughnessTexture!==void 0&&(_.push(r.assignTexture(g,"metalnessMap",T.metallicRoughnessTexture)),_.push(r.assignTexture(g,"roughnessMap",T.metallicRoughnessTexture))),h=this._invokeOne(function(R){return R.getMaterialType&&R.getMaterialType(t)}),_.push(Promise.all(this._invokeAll(function(R){return R.extendMaterialParams&&R.extendMaterialParams(t,g)})))}p.doubleSided===!0&&(g.side=o.DoubleSide);const b=p.alphaMode||AA.OPAQUE;if(b===AA.BLEND?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,b===AA.MASK&&(g.alphaTest=p.alphaCutoff!==void 0?p.alphaCutoff:.5)),p.normalTexture!==void 0&&h!==o.MeshBasicMaterial&&(_.push(r.assignTexture(g,"normalMap",p.normalTexture)),g.normalScale=new o.Vector2(1,1),p.normalTexture.scale!==void 0)){const T=p.normalTexture.scale;g.normalScale.set(T,T)}return p.occlusionTexture!==void 0&&h!==o.MeshBasicMaterial&&(_.push(r.assignTexture(g,"aoMap",p.occlusionTexture)),p.occlusionTexture.strength!==void 0&&(g.aoMapIntensity=p.occlusionTexture.strength)),p.emissiveFactor!==void 0&&h!==o.MeshBasicMaterial&&(g.emissive=new o.Color().fromArray(p.emissiveFactor)),p.emissiveTexture!==void 0&&h!==o.MeshBasicMaterial&&_.push(r.assignTexture(g,"emissiveMap",p.emissiveTexture,3001)),Promise.all(_).then(function(){const T=new h(g);return p.name&&(T.name=p.name),_d(T,p),r.associations.set(T,{materials:t}),p.extensions&&xh(c,T,p),T})}createUniqueName(t){const r=o.PropertyBinding.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,s=this.extensions,c=this.primitiveCache;function p(g){return s[Xi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,r).then(function(y){return Kv(y,g,r)})}const h=[];for(let g=0,y=t.length;g<y;g++){const _=t[g],b=oE(_),T=c[b];if(T)h.push(T.promise);else{let R;_.extensions&&_.extensions[Xi.KHR_DRACO_MESH_COMPRESSION]?R=p(_):R=Kv(new o.BufferGeometry,_,r),c[b]={primitive:_,promise:R},h.push(R)}}return Promise.all(h)}loadMesh(t){const r=this,s=this.json,c=this.extensions,p=s.meshes[t],h=p.primitives,g=[];for(let y=0,_=h.length;y<_;y++){const b=h[y].material===void 0?nE(this.cache):this.getDependency("material",h[y].material);g.push(b)}return g.push(r.loadGeometries(h)),Promise.all(g).then(function(y){const _=y.slice(0,y.length-1),b=y[y.length-1],T=[];for(let F=0,G=b.length;F<G;F++){const L=b[F],O=h[F];let P;const D=_[F];if(O.mode===Da.TRIANGLES||O.mode===Da.TRIANGLE_STRIP||O.mode===Da.TRIANGLE_FAN||O.mode===void 0)P=p.isSkinnedMesh===!0?new o.SkinnedMesh(L,D):new o.Mesh(L,D),P.isSkinnedMesh===!0&&P.normalizeSkinWeights(),O.mode===Da.TRIANGLE_STRIP?P.geometry=mv(P.geometry,o.TriangleStripDrawMode):O.mode===Da.TRIANGLE_FAN&&(P.geometry=mv(P.geometry,o.TriangleFanDrawMode));else if(O.mode===Da.LINES)P=new o.LineSegments(L,D);else if(O.mode===Da.LINE_STRIP)P=new o.Line(L,D);else if(O.mode===Da.LINE_LOOP)P=new o.LineLoop(L,D);else if(O.mode===Da.POINTS)P=new o.Points(L,D);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(P.geometry.morphAttributes).length>0&&iE(P,p),P.name=r.createUniqueName(p.name||"mesh_"+t),_d(P,p),O.extensions&&xh(c,P,O),r.assignFinalMaterial(P),T.push(P)}for(let F=0,G=T.length;F<G;F++)r.associations.set(T[F],{meshes:t,primitives:F});if(T.length===1)return p.extensions&&xh(c,T[0],p),T[0];const R=new o.Group;p.extensions&&xh(c,R,p),r.associations.set(R,{meshes:t});for(let F=0,G=T.length;F<G;F++)R.add(T[F]);return R})}loadCamera(t){let r;const s=this.json.cameras[t],c=s[s.type];if(!c){zc.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?r=new o.PerspectiveCamera(o.MathUtils.radToDeg(c.yfov),c.aspectRatio||1,c.znear||1,c.zfar||2e6):s.type==="orthographic"&&(r=new o.OrthographicCamera(-c.xmag,c.xmag,c.ymag,-c.ymag,c.znear,c.zfar)),s.name&&(r.name=this.createUniqueName(s.name)),_d(r,s),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],s=[];for(let c=0,p=r.joints.length;c<p;c++)s.push(this._loadNodeShallow(r.joints[c]));return r.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",r.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(c){const p=c.pop(),h=c,g=[],y=[];for(let _=0,b=h.length;_<b;_++){const T=h[_];if(T){g.push(T);const R=new o.Matrix4;p!==null&&R.fromArray(p.array,_*16),y.push(R)}else zc.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[_])}return new o.Skeleton(g,y)})}loadAnimation(t){const s=this.json.animations[t],c=s.name?s.name:"animation_"+t,p=[],h=[],g=[],y=[],_=[];for(let b=0,T=s.channels.length;b<T;b++){const R=s.channels[b],F=s.samplers[R.sampler],G=R.target,L=G.node,O=s.parameters!==void 0?s.parameters[F.input]:F.input,P=s.parameters!==void 0?s.parameters[F.output]:F.output;G.node!==void 0&&(p.push(this.getDependency("node",L)),h.push(this.getDependency("accessor",O)),g.push(this.getDependency("accessor",P)),y.push(F),_.push(G))}return Promise.all([Promise.all(p),Promise.all(h),Promise.all(g),Promise.all(y),Promise.all(_)]).then(function(b){const T=b[0],R=b[1],F=b[2],G=b[3],L=b[4],O=[];for(let P=0,D=T.length;P<D;P++){const z=T[P],H=R[P],Q=F[P],W=G[P],Y=L[P];if(z===void 0)continue;z.updateMatrix();let K;switch(Kp[Y.path]){case Kp.weights:K=o.NumberKeyframeTrack;break;case Kp.rotation:K=o.QuaternionKeyframeTrack;break;case Kp.position:case Kp.scale:default:K=o.VectorKeyframeTrack;break}const ie=z.name?z.name:z.uuid,ce=W.interpolation!==void 0?tE[W.interpolation]:o.InterpolateLinear,ge=[];Kp[Y.path]===Kp.weights?z.traverse(function(xe){xe.morphTargetInfluences&&ge.push(xe.name?xe.name:xe.uuid)}):ge.push(ie);let ae=Q.array;if(Q.normalized){const xe=yA(ae.constructor),ve=new Float32Array(ae.length);for(let Be=0,Ue=ae.length;Be<Ue;Be++)ve[Be]=ae[Be]*xe;ae=ve}for(let xe=0,ve=ge.length;xe<ve;xe++){const Be=new K(ge[xe]+"."+Kp[Y.path],H.array,ae,ce);W.interpolation==="CUBICSPLINE"&&(Be.createInterpolant=function(Ie){const Ne=this instanceof o.QuaternionKeyframeTrack?eE:vd;return new Ne(this.times,this.values,this.getValueSize()/3,Ie)},Be.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),O.push(Be)}}return new o.AnimationClip(c,void 0,O)})}createNodeMesh(t){const r=this.json,s=this,c=r.nodes[t];return c.mesh===void 0?null:s.getDependency("mesh",c.mesh).then(function(p){const h=s._getNodeRef(s.meshCache,c.mesh,p);return c.weights!==void 0&&h.traverse(function(g){if(g.isMesh)for(let y=0,_=c.weights.length;y<_;y++)g.morphTargetInfluences[y]=c.weights[y]}),h})}loadNode(t){const r=this.json,s=this,c=r.nodes[t],p=s._loadNodeShallow(t),h=[],g=c.children||[];for(let _=0,b=g.length;_<b;_++)h.push(s.getDependency("node",g[_]));const y=c.skin===void 0?Promise.resolve(null):s.getDependency("skin",c.skin);return Promise.all([p,Promise.all(h),y]).then(function(_){const b=_[0],T=_[1],R=_[2];R!==null&&b.traverse(function(F){F.isSkinnedMesh&&F.bind(R,sE)});for(let F=0,G=T.length;F<G;F++)b.add(T[F]);return b})}_loadNodeShallow(t){const r=this.json,s=this.extensions,c=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const p=r.nodes[t],h=p.name?c.createUniqueName(p.name):"",g=[],y=c._invokeOne(function(_){return _.createNodeMesh&&_.createNodeMesh(t)});return y&&g.push(y),p.camera!==void 0&&g.push(c.getDependency("camera",p.camera).then(function(_){return c._getNodeRef(c.cameraCache,p.camera,_)})),c._invokeAll(function(_){return _.createNodeAttachment&&_.createNodeAttachment(t)}).forEach(function(_){g.push(_)}),this.nodeCache[t]=Promise.all(g).then(function(_){let b;if(p.isBone===!0?b=new o.Bone:_.length>1?b=new o.Group:_.length===1?b=_[0]:b=new o.Object3D,b!==_[0])for(let T=0,R=_.length;T<R;T++)b.add(_[T]);if(p.name&&(b.userData.name=p.name,b.name=h),_d(b,p),p.extensions&&xh(s,b,p),p.matrix!==void 0){const T=new o.Matrix4;T.fromArray(p.matrix),b.applyMatrix4(T)}else p.translation!==void 0&&b.position.fromArray(p.translation),p.rotation!==void 0&&b.quaternion.fromArray(p.rotation),p.scale!==void 0&&b.scale.fromArray(p.scale);return c.associations.has(b)||c.associations.set(b,{}),c.associations.get(b).nodes=t,b}),this.nodeCache[t]}loadScene(t){const r=this.extensions,s=this.json.scenes[t],c=this,p=new o.Group;s.name&&(p.name=c.createUniqueName(s.name)),_d(p,s),s.extensions&&xh(r,p,s);const h=s.nodes||[],g=[];for(let y=0,_=h.length;y<_;y++)g.push(c.getDependency("node",h[y]));return Promise.all(g).then(function(y){for(let b=0,T=y.length;b<T;b++)p.add(y[b]);const _=b=>{const T=new Map;for(const[R,F]of c.associations)(R instanceof o.Material||R instanceof o.Texture)&&T.set(R,F);return b.traverse(R=>{const F=c.associations.get(R);F!=null&&T.set(R,F)}),T};return c.associations=_(p),p})}}function vA(i,t,r){const s=t.attributes,c=new o.Box3;if(s.POSITION!==void 0){const g=r.json.accessors[s.POSITION],y=g.min,_=g.max;if(y!==void 0&&_!==void 0){if(c.set(new o.Vector3(y[0],y[1],y[2]),new o.Vector3(_[0],_[1],_[2])),g.normalized){const b=yA(Ff[g.componentType]);c.min.multiplyScalar(b),c.max.multiplyScalar(b)}}else{zc.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const p=t.targets;if(p!==void 0){const g=new o.Vector3,y=new o.Vector3;for(let _=0,b=p.length;_<b;_++){const T=p[_];if(T.POSITION!==void 0){const R=r.json.accessors[T.POSITION],F=R.min,G=R.max;if(F!==void 0&&G!==void 0){if(y.setX(Math.max(Math.abs(F[0]),Math.abs(G[0]))),y.setY(Math.max(Math.abs(F[1]),Math.abs(G[1]))),y.setZ(Math.max(Math.abs(F[2]),Math.abs(G[2]))),R.normalized){const L=yA(Ff[R.componentType]);y.multiplyScalar(L)}g.max(y)}else zc.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}c.expandByVector(g)}i.boundingBox=c;const h=new o.Sphere;c.getCenter(h.center),h.radius=c.min.distanceTo(c.max)/2,i.boundingSphere=h}function Kv(i,t,r){const s=t.attributes,c=[];function p(h,g){return r.getDependency("accessor",h).then(function(y){i.setAttribute(g,y)})}for(const h in s){const g=mA[h]||h.toLowerCase();g in i.attributes||c.push(p(s[h],g))}if(t.indices!==void 0&&!i.index){const h=r.getDependency("accessor",t.indices).then(function(g){i.setIndex(g)});c.push(h)}return _d(i,t),vA(i,t,r),Promise.all(c).then(function(){return t.targets!==void 0?rE(i,t.targets,r):i})}let S0=null;function Yv(i,t,r){return s=>{r&&r(s),i&&(S0||(S0=new Lv),S0.setDecoderPath(typeof i=="string"?i:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),s.setDRACOLoader(S0)),t&&s.setMeshoptDecoder(typeof x0=="function"?x0():x0)}}function w0(i,t=!0,r=!0,s){return(0,E.D)(If,i,Yv(t,r,s))}w0.preload=(i,t=!0,r=!0,s)=>E.D.preload(If,i,Yv(t,r,s)),w0.clear=i=>E.D.clear(If,i);const lE=d.forwardRef((s,r)=>{var c=s,{src:i}=c,t=An(c,["src"]);const{scene:p}=w0(i);return d.createElement(v0,(0,w.Z)({ref:r},t,{object:p}))});class Jv{constructor(t,r=" .:-=+*#%@",s={}){const c=s.resolution||.15,p=s.scale||1,h=s.color||!1,g=s.alpha||!1,y=s.block||!1,_=s.invert||!1,b=s.strResolution||"low";let T,R;const F=document.createElement("div");F.style.cursor="default";const G=document.createElement("table");F.appendChild(G);let L,O,P;this.setSize=function(ve,Be){T=ve,R=Be,t.setSize(ve,Be),D()},this.render=function(ve,Be){t.render(ve,Be),xe(G)},this.domElement=F;function D(){L=Math.floor(T*c),O=Math.floor(R*c),Y.width=L,Y.height=O,P=t.domElement,P.style.backgroundColor&&(G.rows[0].cells[0].style.backgroundColor=P.style.backgroundColor,G.rows[0].cells[0].style.color=P.style.color),G.cellSpacing=0,G.cellPadding=0;const ve=G.style;ve.whiteSpace="pre",ve.margin="0px",ve.padding="0px",ve.letterSpacing=ae+"px",ve.fontFamily=Q,ve.fontSize=ce+"px",ve.lineHeight=ge+"px",ve.textAlign="left",ve.textDecoration="none"}const z=" .,:;i1tfLCG08@".split(""),H=" CGO08@".split(""),Q="courier new, monospace",W=t.domElement,Y=document.createElement("canvas");if(!Y.getContext)return;const K=Y.getContext("2d");if(!K.getImageData)return;let ie=h?H:z;r&&(ie=r);const ce=2/c*p,ge=2/c*p;let ae=0;if(b=="low")switch(p){case 1:ae=-1;break;case 2:case 3:ae=-2.1;break;case 4:ae=-3.1;break;case 5:ae=-4.15;break}if(b=="medium")switch(p){case 1:ae=0;break;case 2:ae=-1;break;case 3:ae=-1.04;break;case 4:case 5:ae=-2.1;break}if(b=="high")switch(p){case 1:case 2:ae=0;break;case 3:case 4:case 5:ae=-1;break}function xe(ve){K.clearRect(0,0,L,O),K.drawImage(W,0,0,L,O);const Be=K.getImageData(0,0,L,O).data;let Ue="";for(let Ie=0;Ie<O;Ie+=2){for(let Ne=0;Ne<L;Ne++){const Le=(Ie*L+Ne)*4,Ye=Be[Le],Ce=Be[Le+1],Ee=Be[Le+2],_e=Be[Le+3];let oe,me;me=(.3*Ye+.59*Ce+.11*Ee)/255,_e==0&&(me=1),oe=Math.floor((1-me)*(ie.length-1)),_&&(oe=ie.length-oe-1);let Te=ie[oe];(Te===void 0||Te==" ")&&(Te="&nbsp;"),h?Ue+="<span style='color:rgb("+Ye+","+Ce+","+Ee+");"+(y?"background-color:rgb("+Ye+","+Ce+","+Ee+");":"")+(g?"opacity:"+_e/255+";":"")+"'>"+Te+"</span>":Ue+=Te}Ue+="<br/>"}ve.innerHTML=`<tr><td style="display:block;width:${T}px;height:${R}px;overflow:hidden">${Ue}</td></tr>`}}}function _A({renderIndex:i=1,bgColor:t="black",fgColor:r="white",characters:s=" .:-+*=%@#",invert:c=!0,color:p=!1,resolution:h=.15}){const{size:g,gl:y,scene:_,camera:b}=(0,E.z)(),T=d.useMemo(()=>{const R=new Jv(y,s,{invert:c,color:p,resolution:h});return R.domElement.style.position="absolute",R.domElement.style.top="0px",R.domElement.style.left="0px",R.domElement.style.pointerEvents="none",R},[s,c,p,h]);return d.useLayoutEffect(()=>{T.domElement.style.color=r,T.domElement.style.backgroundColor=t},[r,t]),d.useEffect(()=>(y.domElement.style.opacity="0",y.domElement.parentNode.appendChild(T.domElement),()=>{y.domElement.style.opacity="1",y.domElement.parentNode.removeChild(T.domElement)}),[T]),d.useEffect(()=>{T.setSize(g.width,g.height)},[T,g]),(0,E.A)(R=>{T.render(_,b)},i),d.createElement(d.Fragment,null)}function ec(i,t,r){const s=(0,E.z)(F=>F.size),c=(0,E.z)(F=>F.viewport),p=typeof i=="number"?i:s.width*c.dpr,h=typeof t=="number"?t:s.height*c.dpr,R=(typeof i=="number"?r:i)||{},{samples:y=0,depth:_}=R,b=An(R,["samples","depth"]),T=d.useMemo(()=>{const F=new o.WebGLRenderTarget(p,h,jn({minFilter:o.LinearFilter,magFilter:o.LinearFilter,type:o.HalfFloatType},b));return _&&(F.depthTexture=new o.DepthTexture(p,h,o.FloatType)),F.samples=y,F},[]);return d.useLayoutEffect(()=>{T.setSize(p,h),y&&(T.samples=y)},[y,T,p,h]),d.useEffect(()=>()=>T.dispose(),[]),T}const cE=i=>typeof i=="function",EA=d.forwardRef((g,h)=>{var y=g,{envMap:i,resolution:t=256,frames:r=1/0,children:s,makeDefault:c}=y,p=An(y,["envMap","resolution","frames","children","makeDefault"]);const _=(0,E.z)(({set:D})=>D),b=(0,E.z)(({camera:D})=>D),T=(0,E.z)(({size:D})=>D),R=d.useRef(null),F=d.useRef(null),G=ec(t);d.useLayoutEffect(()=>{p.manual||R.current.updateProjectionMatrix()},[T,p]),d.useLayoutEffect(()=>{R.current.updateProjectionMatrix()}),d.useLayoutEffect(()=>{if(c){const D=b;return _(()=>({camera:R.current})),()=>_(()=>({camera:D}))}},[R,c,_]);let L=0,O=null;const P=cE(s);return(0,E.A)(D=>{P&&(r===1/0||L<r)&&(F.current.visible=!1,D.gl.setRenderTarget(G),O=D.scene.background,i&&(D.scene.background=i),D.gl.render(D.scene,R.current),D.scene.background=O,D.gl.setRenderTarget(null),F.current.visible=!0,L++)}),d.createElement(d.Fragment,null,d.createElement("orthographicCamera",(0,w.Z)({left:T.width/-2,right:T.width/2,top:T.height/2,bottom:T.height/-2,ref:Dn([R,h])},p),!P&&s),d.createElement("group",{ref:F},P&&s(G.texture)))}),pE=i=>typeof i=="function",qv=d.forwardRef((g,h)=>{var y=g,{envMap:i,resolution:t=256,frames:r=1/0,makeDefault:s,children:c}=y,p=An(y,["envMap","resolution","frames","makeDefault","children"]);const _=(0,E.z)(({set:D})=>D),b=(0,E.z)(({camera:D})=>D),T=(0,E.z)(({size:D})=>D),R=d.useRef(null),F=d.useRef(null),G=ec(t);d.useLayoutEffect(()=>{p.manual||(R.current.aspect=T.width/T.height)},[T,p]),d.useLayoutEffect(()=>{R.current.updateProjectionMatrix()});let L=0,O=null;const P=pE(c);return(0,E.A)(D=>{P&&(r===1/0||L<r)&&(F.current.visible=!1,D.gl.setRenderTarget(G),O=D.scene.background,i&&(D.scene.background=i),D.gl.render(D.scene,R.current),D.scene.background=O,D.gl.setRenderTarget(null),F.current.visible=!0,L++)}),d.useLayoutEffect(()=>{if(s){const D=b;return _(()=>({camera:R.current})),()=>_(()=>({camera:D}))}},[R,s,_]),d.createElement(d.Fragment,null,d.createElement("perspectiveCamera",(0,w.Z)({ref:Dn([R,h])},p),!P&&c),d.createElement("group",{ref:F},P&&c(G.texture)))});function lm({resolution:i=256,near:t=.1,far:r=1e3,envMap:s,fog:c}={}){const p=(0,E.z)(({gl:R})=>R),h=(0,E.z)(({scene:R})=>R),g=(0,d.useMemo)(()=>{const R=new o.WebGLCubeRenderTarget(i);return R.texture.type=o.HalfFloatType,R},[i]);(0,d.useEffect)(()=>()=>{g.dispose()},[g]);const y=(0,d.useMemo)(()=>new o.CubeCamera(t,r,g),[t,r,g]);let _,b;const T=d.useCallback(()=>{_=h.fog,b=h.background,h.background=s||b,h.fog=c||_,y.update(p,h),h.fog=_,h.background=b},[p,h,y]);return{fbo:g,camera:y,update:T}}function uE(y){var _=y,{children:i,frames:t=1/0,resolution:r,near:s,far:c,envMap:p,fog:h}=_,g=An(_,["children","frames","resolution","near","far","envMap","fog"]);const b=d.useRef(),{fbo:T,camera:R,update:F}=lm({resolution:r,near:s,far:c,envMap:p,fog:h});let G=0;return(0,E.A)(()=>{b.current&&(t===1/0||G<t)&&(b.current.visible=!1,F(),b.current.visible=!0,G++)}),d.createElement("group",g,d.createElement("primitive",{object:R}),d.createElement("group",{ref:b},i(T.texture)))}var Zv=A(25108),dE=Object.defineProperty,Ed=(i,t,r)=>t in i?dE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Bs=(i,t,r)=>(Ed(i,typeof t!="symbol"?t+"":t,r),r);class bA extends o.EventDispatcher{constructor(t){super(),Bs(this,"object"),Bs(this,"changeEvent",{type:"change"}),Bs(this,"EPS",1e-6),Bs(this,"enabled",!0),Bs(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),Bs(this,"screenOrientation",0),Bs(this,"alphaOffset",0),Bs(this,"onDeviceOrientationChangeEvent",r=>{this.deviceOrientation=r}),Bs(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),Bs(this,"zee",new o.Vector3(0,0,1)),Bs(this,"euler",new o.Euler),Bs(this,"q0",new o.Quaternion),Bs(this,"q1",new o.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5))),Bs(this,"setObjectQuaternion",(r,s,c,p,h)=>{this.euler.set(c,s,-p,"YXZ"),r.setFromEuler(this.euler),r.multiply(this.q1),r.multiply(this.q0.setFromAxisAngle(this.zee,-h))}),Bs(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(r=>{r=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(r=>{Zv.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",r)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),Bs(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),Bs(this,"lastQuaternion",new o.Quaternion),Bs(this,"update",()=>{if(this.enabled===!1)return;const r=this.deviceOrientation;if(r){const s=r.alpha?o.MathUtils.degToRad(r.alpha)+this.alphaOffset:0,c=r.beta?o.MathUtils.degToRad(r.beta):0,p=r.gamma?o.MathUtils.degToRad(r.gamma):0,h=this.screenOrientation?o.MathUtils.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,s,c,p,h),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),Bs(this,"dispose",()=>this.disconnect()),this.object=t,this.object.rotation.reorder("YXZ"),this.connect()}}const hE=d.forwardRef((i,t)=>{const R=i,{camera:r,onChange:s,makeDefault:c}=R,p=An(R,["camera","onChange","makeDefault"]),h=(0,E.z)(F=>F.camera),g=(0,E.z)(F=>F.invalidate),y=(0,E.z)(F=>F.get),_=(0,E.z)(F=>F.set),b=r||h,[T]=d.useState(()=>new bA(b));return d.useEffect(()=>{const F=G=>{g(),s&&s(G)};return T==null||T.addEventListener==null||T.addEventListener("change",F),()=>T==null||T.removeEventListener==null?void 0:T.removeEventListener("change",F)},[s,T,g]),(0,E.A)(()=>T==null?void 0:T.update(),-1),d.useEffect(()=>{const F=T;return F==null||F.connect(),()=>F==null?void 0:F.dispose()},[T]),d.useEffect(()=>{if(c){const F=y().controls;return _({controls:T}),()=>_({controls:F})}},[c,T]),T?d.createElement("primitive",(0,w.Z)({ref:t,object:T},p)):null});var $v=Object.defineProperty,fE=(i,t,r)=>t in i?$v(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ko=(i,t,r)=>(fE(i,typeof t!="symbol"?t+"":t,r),r);function MA(i){i.preventDefault()}class e2 extends o.EventDispatcher{constructor(t,r){super(),ko(this,"object"),ko(this,"domElement",null),ko(this,"movementSpeed",1),ko(this,"rollSpeed",.005),ko(this,"dragToLook",!1),ko(this,"autoForward",!1),ko(this,"changeEvent",{type:"change"}),ko(this,"EPS",1e-6),ko(this,"tmpQuaternion",new o.Quaternion),ko(this,"mouseStatus",0),ko(this,"movementSpeedMultiplier",1),ko(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),ko(this,"moveVector",new o.Vector3(0,0,0)),ko(this,"rotationVector",new o.Vector3(0,0,0)),ko(this,"keydown",s=>{if(!s.altKey){switch(s.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),ko(this,"keyup",s=>{switch(s.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),ko(this,"pointerdown",s=>{if(this.dragToLook)this.mouseStatus++;else{switch(s.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),ko(this,"pointermove",s=>{if(!this.dragToLook||this.mouseStatus>0){const c=this.getContainerDimensions(),p=c.size[0]/2,h=c.size[1]/2;this.moveState.yawLeft=-(s.pageX-c.offset[0]-p)/p,this.moveState.pitchDown=(s.pageY-c.offset[1]-h)/h,this.updateRotationVector()}}),ko(this,"pointerup",s=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(s.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),ko(this,"lastQuaternion",new o.Quaternion),ko(this,"lastPosition",new o.Vector3),ko(this,"update",s=>{const c=s*this.movementSpeed,p=s*this.rollSpeed;this.object.translateX(this.moveVector.x*c),this.object.translateY(this.moveVector.y*c),this.object.translateZ(this.moveVector.z*c),this.tmpQuaternion.set(this.rotationVector.x*p,this.rotationVector.y*p,this.rotationVector.z*p,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),ko(this,"updateMovementVector",()=>{const s=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-s+this.moveState.back}),ko(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),ko(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),ko(this,"connect",s=>{this.domElement=s,s&&!(s instanceof Document)&&s.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",MA),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),ko(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",MA),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=t,r!==void 0&&this.connect(r),this.updateMovementVector(),this.updateRotationVector()}}const gE=d.forwardRef((s,r)=>{var c=s,{domElement:i}=c,t=An(c,["domElement"]);const O=t,{onChange:p,makeDefault:h}=O,g=An(O,["onChange","makeDefault"]),y=(0,E.z)(P=>P.invalidate),_=(0,E.z)(P=>P.camera),b=(0,E.z)(P=>P.gl),T=(0,E.z)(P=>P.events),R=(0,E.z)(P=>P.get),F=(0,E.z)(P=>P.set),G=i||T.connected||b.domElement,L=d.useMemo(()=>new e2(_),[_]);return d.useEffect(()=>(L.connect(G),()=>void L.dispose()),[G,L,y]),d.useEffect(()=>{const P=D=>{y(),p&&p(D)};return L.addEventListener==null||L.addEventListener("change",P),()=>L.removeEventListener==null?void 0:L.removeEventListener("change",P)},[p,y]),d.useEffect(()=>{if(h){const P=R().controls;return F({controls:L}),()=>F({controls:P})}},[h,L]),(0,E.A)((P,D)=>L.update(D)),d.createElement("primitive",(0,w.Z)({ref:r,object:L,args:[_,G]},g))});var T0=A(25108),mE=Object.defineProperty,t2=(i,t,r)=>t in i?mE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ai=(i,t,r)=>(t2(i,typeof t!="symbol"?t+"":t,r),r);const xA=(i,t)=>(i%t+t)%t;class n2 extends o.EventDispatcher{constructor(t,r){super(),ai(this,"object"),ai(this,"domElement"),ai(this,"enabled",!0),ai(this,"target",new o.Vector3),ai(this,"minDistance",0),ai(this,"maxDistance",1/0),ai(this,"minZoom",0),ai(this,"maxZoom",1/0),ai(this,"minPolarAngle",0),ai(this,"maxPolarAngle",Math.PI),ai(this,"minAzimuthAngle",-1/0),ai(this,"maxAzimuthAngle",1/0),ai(this,"enableDamping",!1),ai(this,"dampingFactor",.05),ai(this,"enableZoom",!0),ai(this,"zoomSpeed",1),ai(this,"enableRotate",!0),ai(this,"rotateSpeed",1),ai(this,"enablePan",!0),ai(this,"panSpeed",1),ai(this,"screenSpacePanning",!0),ai(this,"keyPanSpeed",7),ai(this,"autoRotate",!1),ai(this,"autoRotateSpeed",2),ai(this,"reverseOrbit",!1),ai(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ai(this,"mouseButtons",{LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN}),ai(this,"touches",{ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN}),ai(this,"target0"),ai(this,"position0"),ai(this,"zoom0"),ai(this,"_domElementKeyEvents",null),ai(this,"getPolarAngle"),ai(this,"getAzimuthalAngle"),ai(this,"setPolarAngle"),ai(this,"setAzimuthalAngle"),ai(this,"getDistance"),ai(this,"listenToKeyEvents"),ai(this,"saveState"),ai(this,"reset"),ai(this,"update"),ai(this,"connect"),ai(this,"dispose"),this.object=t,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>b.phi,this.getAzimuthalAngle=()=>b.theta,this.setPolarAngle=ut=>{let yn=xA(ut,2*Math.PI),Rn=b.phi;Rn<0&&(Rn+=2*Math.PI),yn<0&&(yn+=2*Math.PI);let rr=Math.abs(yn-Rn);2*Math.PI-rr<rr&&(yn<Rn?yn+=2*Math.PI:Rn+=2*Math.PI),T.phi=yn-Rn,s.update()},this.setAzimuthalAngle=ut=>{let yn=xA(ut,2*Math.PI),Rn=b.theta;Rn<0&&(Rn+=2*Math.PI),yn<0&&(yn+=2*Math.PI);let rr=Math.abs(yn-Rn);2*Math.PI-rr<rr&&(yn<Rn?yn+=2*Math.PI:Rn+=2*Math.PI),T.theta=yn-Rn,s.update()},this.getDistance=()=>s.object.position.distanceTo(s.target),this.listenToKeyEvents=ut=>{ut.addEventListener("keydown",Cr),this._domElementKeyEvents=ut},this.saveState=()=>{s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=()=>{s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),y=g.NONE},this.update=(()=>{const ut=new o.Vector3,yn=new o.Quaternion().setFromUnitVectors(t.up,new o.Vector3(0,1,0)),Rn=yn.clone().invert(),rr=new o.Vector3,Xr=new o.Quaternion,ri=2*Math.PI;return function(){const oi=s.object.position;ut.copy(oi).sub(s.target),ut.applyQuaternion(yn),b.setFromVector3(ut),s.autoRotate&&y===g.NONE&&ae(ce()),s.enableDamping?(b.theta+=T.theta*s.dampingFactor,b.phi+=T.phi*s.dampingFactor):(b.theta+=T.theta,b.phi+=T.phi);let En=s.minAzimuthAngle,no=s.maxAzimuthAngle;return isFinite(En)&&isFinite(no)&&(En<-Math.PI?En+=ri:En>Math.PI&&(En-=ri),no<-Math.PI?no+=ri:no>Math.PI&&(no-=ri),En<=no?b.theta=Math.max(En,Math.min(no,b.theta)):b.theta=b.theta>(En+no)/2?Math.max(En,b.theta):Math.min(no,b.theta)),b.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=R,b.radius=Math.max(s.minDistance,Math.min(s.maxDistance,b.radius)),s.enableDamping===!0?s.target.addScaledVector(F,s.dampingFactor):s.target.add(F),ut.setFromSpherical(b),ut.applyQuaternion(Rn),oi.copy(s.target).add(ut),s.object.lookAt(s.target),s.enableDamping===!0?(T.theta*=1-s.dampingFactor,T.phi*=1-s.dampingFactor,F.multiplyScalar(1-s.dampingFactor)):(T.set(0,0,0),F.set(0,0,0)),R=1,G||rr.distanceToSquared(s.object.position)>_||8*(1-Xr.dot(s.object.quaternion))>_?(s.dispatchEvent(c),rr.copy(s.object.position),Xr.copy(s.object.quaternion),G=!1,!0):!1}})(),this.connect=ut=>{ut===document&&T0.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),s.domElement=ut,s.domElement.style.touchAction="none",s.domElement.addEventListener("contextmenu",fi),s.domElement.addEventListener("pointerdown",Ge),s.domElement.addEventListener("pointercancel",Mn),s.domElement.addEventListener("wheel",ar)},this.dispose=()=>{var ut,yn,Rn,rr,Xr,ri;(ut=s.domElement)==null||ut.removeEventListener("contextmenu",fi),(yn=s.domElement)==null||yn.removeEventListener("pointerdown",Ge),(Rn=s.domElement)==null||Rn.removeEventListener("pointercancel",Mn),(rr=s.domElement)==null||rr.removeEventListener("wheel",ar),(Xr=s.domElement)==null||Xr.ownerDocument.removeEventListener("pointermove",Ot),(ri=s.domElement)==null||ri.ownerDocument.removeEventListener("pointerup",gn),s._domElementKeyEvents!==null&&s._domElementKeyEvents.removeEventListener("keydown",Cr)};const s=this,c={type:"change"},p={type:"start"},h={type:"end"},g={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let y=g.NONE;const _=1e-6,b=new o.Spherical,T=new o.Spherical;let R=1;const F=new o.Vector3;let G=!1;const L=new o.Vector2,O=new o.Vector2,P=new o.Vector2,D=new o.Vector2,z=new o.Vector2,H=new o.Vector2,Q=new o.Vector2,W=new o.Vector2,Y=new o.Vector2,K=[],ie={};function ce(){return 2*Math.PI/60/60*s.autoRotateSpeed}function ge(){return Math.pow(.95,s.zoomSpeed)}function ae(ut){s.reverseOrbit?T.theta+=ut:T.theta-=ut}function xe(ut){s.reverseOrbit?T.phi+=ut:T.phi-=ut}const ve=(()=>{const ut=new o.Vector3;return function(Rn,rr){ut.setFromMatrixColumn(rr,0),ut.multiplyScalar(-Rn),F.add(ut)}})(),Be=(()=>{const ut=new o.Vector3;return function(Rn,rr){s.screenSpacePanning===!0?ut.setFromMatrixColumn(rr,1):(ut.setFromMatrixColumn(rr,0),ut.crossVectors(s.object.up,ut)),ut.multiplyScalar(Rn),F.add(ut)}})(),Ue=(()=>{const ut=new o.Vector3;return function(Rn,rr){const Xr=s.domElement;if(Xr&&s.object instanceof o.PerspectiveCamera&&s.object.isPerspectiveCamera){const ri=s.object.position;ut.copy(ri).sub(s.target);let ci=ut.length();ci*=Math.tan(s.object.fov/2*Math.PI/180),ve(2*Rn*ci/Xr.clientHeight,s.object.matrix),Be(2*rr*ci/Xr.clientHeight,s.object.matrix)}else Xr&&s.object instanceof o.OrthographicCamera&&s.object.isOrthographicCamera?(ve(Rn*(s.object.right-s.object.left)/s.object.zoom/Xr.clientWidth,s.object.matrix),Be(rr*(s.object.top-s.object.bottom)/s.object.zoom/Xr.clientHeight,s.object.matrix)):(T0.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}})();function Ie(ut){s.object instanceof o.PerspectiveCamera&&s.object.isPerspectiveCamera?R/=ut:s.object instanceof o.OrthographicCamera&&s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*ut)),s.object.updateProjectionMatrix(),G=!0):(T0.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function Ne(ut){s.object instanceof o.PerspectiveCamera&&s.object.isPerspectiveCamera?R*=ut:s.object instanceof o.OrthographicCamera&&s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/ut)),s.object.updateProjectionMatrix(),G=!0):(T0.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function Le(ut){L.set(ut.clientX,ut.clientY)}function Ye(ut){Q.set(ut.clientX,ut.clientY)}function Ce(ut){D.set(ut.clientX,ut.clientY)}function Ee(ut){O.set(ut.clientX,ut.clientY),P.subVectors(O,L).multiplyScalar(s.rotateSpeed);const yn=s.domElement;yn&&(ae(2*Math.PI*P.x/yn.clientHeight),xe(2*Math.PI*P.y/yn.clientHeight)),L.copy(O),s.update()}function _e(ut){W.set(ut.clientX,ut.clientY),Y.subVectors(W,Q),Y.y>0?Ie(ge()):Y.y<0&&Ne(ge()),Q.copy(W),s.update()}function oe(ut){z.set(ut.clientX,ut.clientY),H.subVectors(z,D).multiplyScalar(s.panSpeed),Ue(H.x,H.y),D.copy(z),s.update()}function me(ut){ut.deltaY<0?Ne(ge()):ut.deltaY>0&&Ie(ge()),s.update()}function Te(ut){let yn=!1;switch(ut.code){case s.keys.UP:Ue(0,s.keyPanSpeed),yn=!0;break;case s.keys.BOTTOM:Ue(0,-s.keyPanSpeed),yn=!0;break;case s.keys.LEFT:Ue(s.keyPanSpeed,0),yn=!0;break;case s.keys.RIGHT:Ue(-s.keyPanSpeed,0),yn=!0;break}yn&&(ut.preventDefault(),s.update())}function ye(){if(K.length==1)L.set(K[0].pageX,K[0].pageY);else{const ut=.5*(K[0].pageX+K[1].pageX),yn=.5*(K[0].pageY+K[1].pageY);L.set(ut,yn)}}function ze(){if(K.length==1)D.set(K[0].pageX,K[0].pageY);else{const ut=.5*(K[0].pageX+K[1].pageX),yn=.5*(K[0].pageY+K[1].pageY);D.set(ut,yn)}}function Mt(){const ut=K[0].pageX-K[1].pageX,yn=K[0].pageY-K[1].pageY,Rn=Math.sqrt(ut*ut+yn*yn);Q.set(0,Rn)}function At(){s.enableZoom&&Mt(),s.enablePan&&ze()}function gt(){s.enableZoom&&Mt(),s.enableRotate&&ye()}function ot(ut){if(K.length==1)O.set(ut.pageX,ut.pageY);else{const Rn=Ao(ut),rr=.5*(ut.pageX+Rn.x),Xr=.5*(ut.pageY+Rn.y);O.set(rr,Xr)}P.subVectors(O,L).multiplyScalar(s.rotateSpeed);const yn=s.domElement;yn&&(ae(2*Math.PI*P.x/yn.clientHeight),xe(2*Math.PI*P.y/yn.clientHeight)),L.copy(O)}function Qt(ut){if(K.length==1)z.set(ut.pageX,ut.pageY);else{const yn=Ao(ut),Rn=.5*(ut.pageX+yn.x),rr=.5*(ut.pageY+yn.y);z.set(Rn,rr)}H.subVectors(z,D).multiplyScalar(s.panSpeed),Ue(H.x,H.y),D.copy(z)}function Gt(ut){const yn=Ao(ut),Rn=ut.pageX-yn.x,rr=ut.pageY-yn.y,Xr=Math.sqrt(Rn*Rn+rr*rr);W.set(0,Xr),Y.set(0,Math.pow(W.y/Q.y,s.zoomSpeed)),Ie(Y.y),Q.copy(W)}function Bt(ut){s.enableZoom&&Gt(ut),s.enablePan&&Qt(ut)}function qe(ut){s.enableZoom&&Gt(ut),s.enableRotate&&ot(ut)}function Ge(ut){var yn,Rn;s.enabled!==!1&&(K.length===0&&((yn=s.domElement)==null||yn.ownerDocument.addEventListener("pointermove",Ot),(Rn=s.domElement)==null||Rn.ownerDocument.addEventListener("pointerup",gn)),Sr(ut),ut.pointerType==="touch"?dr(ut):Ut(ut))}function Ot(ut){s.enabled!==!1&&(ut.pointerType==="touch"?bi(ut):Nn(ut))}function gn(ut){var yn,Rn,rr;Dr(ut),K.length===0&&((yn=s.domElement)==null||yn.releasePointerCapture(ut.pointerId),(Rn=s.domElement)==null||Rn.ownerDocument.removeEventListener("pointermove",Ot),(rr=s.domElement)==null||rr.ownerDocument.removeEventListener("pointerup",gn)),s.dispatchEvent(h),y=g.NONE}function Mn(ut){Dr(ut)}function Ut(ut){let yn;switch(ut.button){case 0:yn=s.mouseButtons.LEFT;break;case 1:yn=s.mouseButtons.MIDDLE;break;case 2:yn=s.mouseButtons.RIGHT;break;default:yn=-1}switch(yn){case o.MOUSE.DOLLY:if(s.enableZoom===!1)return;Ye(ut),y=g.DOLLY;break;case o.MOUSE.ROTATE:if(ut.ctrlKey||ut.metaKey||ut.shiftKey){if(s.enablePan===!1)return;Ce(ut),y=g.PAN}else{if(s.enableRotate===!1)return;Le(ut),y=g.ROTATE}break;case o.MOUSE.PAN:if(ut.ctrlKey||ut.metaKey||ut.shiftKey){if(s.enableRotate===!1)return;Le(ut),y=g.ROTATE}else{if(s.enablePan===!1)return;Ce(ut),y=g.PAN}break;default:y=g.NONE}y!==g.NONE&&s.dispatchEvent(p)}function Nn(ut){if(s.enabled!==!1)switch(y){case g.ROTATE:if(s.enableRotate===!1)return;Ee(ut);break;case g.DOLLY:if(s.enableZoom===!1)return;_e(ut);break;case g.PAN:if(s.enablePan===!1)return;oe(ut);break}}function ar(ut){s.enabled===!1||s.enableZoom===!1||y!==g.NONE&&y!==g.ROTATE||(ut.preventDefault(),s.dispatchEvent(p),me(ut),s.dispatchEvent(h))}function Cr(ut){s.enabled===!1||s.enablePan===!1||Te(ut)}function dr(ut){switch(Ii(ut),K.length){case 1:switch(s.touches.ONE){case o.TOUCH.ROTATE:if(s.enableRotate===!1)return;ye(),y=g.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(s.enablePan===!1)return;ze(),y=g.TOUCH_PAN;break;default:y=g.NONE}break;case 2:switch(s.touches.TWO){case o.TOUCH.DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;At(),y=g.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;gt(),y=g.TOUCH_DOLLY_ROTATE;break;default:y=g.NONE}break;default:y=g.NONE}y!==g.NONE&&s.dispatchEvent(p)}function bi(ut){switch(Ii(ut),y){case g.TOUCH_ROTATE:if(s.enableRotate===!1)return;ot(ut),s.update();break;case g.TOUCH_PAN:if(s.enablePan===!1)return;Qt(ut),s.update();break;case g.TOUCH_DOLLY_PAN:if(s.enableZoom===!1&&s.enablePan===!1)return;Bt(ut),s.update();break;case g.TOUCH_DOLLY_ROTATE:if(s.enableZoom===!1&&s.enableRotate===!1)return;qe(ut),s.update();break;default:y=g.NONE}}function fi(ut){s.enabled!==!1&&ut.preventDefault()}function Sr(ut){K.push(ut)}function Dr(ut){delete ie[ut.pointerId];for(let yn=0;yn<K.length;yn++)if(K[yn].pointerId==ut.pointerId){K.splice(yn,1);return}}function Ii(ut){let yn=ie[ut.pointerId];yn===void 0&&(yn=new o.Vector2,ie[ut.pointerId]=yn),yn.set(ut.pageX,ut.pageY)}function Ao(ut){const yn=ut.pointerId===K[0].pointerId?K[1]:K[0];return ie[yn.pointerId]}r!==void 0&&this.connect(r),this.update()}}class B0 extends n2{constructor(t,r){super(t,r),this.screenSpacePanning=!1,this.mouseButtons.LEFT=o.MOUSE.PAN,this.mouseButtons.RIGHT=o.MOUSE.ROTATE,this.touches.ONE=o.TOUCH.PAN,this.touches.TWO=o.TOUCH.DOLLY_ROTATE}}const Rs=d.forwardRef((i={enableDamping:!0},t)=>{const D=i,{domElement:r,camera:s,makeDefault:c,onChange:p,onStart:h,onEnd:g}=D,y=An(D,["domElement","camera","makeDefault","onChange","onStart","onEnd"]),_=(0,E.z)(z=>z.invalidate),b=(0,E.z)(z=>z.camera),T=(0,E.z)(z=>z.gl),R=(0,E.z)(z=>z.events),F=(0,E.z)(z=>z.set),G=(0,E.z)(z=>z.get),L=r||R.connected||T.domElement,O=s||b,P=d.useMemo(()=>new B0(O),[O]);return d.useEffect(()=>{P.connect(L);const z=H=>{_(),p&&p(H)};return P.addEventListener("change",z),h&&P.addEventListener("start",h),g&&P.addEventListener("end",g),()=>{P.dispose(),P.removeEventListener("change",z),h&&P.removeEventListener("start",h),g&&P.removeEventListener("end",g)}},[p,h,g,P,_,L]),d.useEffect(()=>{if(c){const z=G().controls;return F({controls:P}),()=>F({controls:z})}},[c,P]),(0,E.A)(()=>P.update(),-1),d.createElement("primitive",(0,w.Z)({ref:t,object:P,enableDamping:!0},y))}),AE=d.forwardRef((T,b)=>{var R=T,{makeDefault:i,camera:t,regress:r,domElement:s,enableDamping:c=!0,keyEvents:p=!1,onChange:h,onStart:g,onEnd:y}=R,_=An(R,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);const F=(0,E.z)(K=>K.invalidate),G=(0,E.z)(K=>K.camera),L=(0,E.z)(K=>K.gl),O=(0,E.z)(K=>K.events),P=(0,E.z)(K=>K.setEvents),D=(0,E.z)(K=>K.set),z=(0,E.z)(K=>K.get),H=(0,E.z)(K=>K.performance),Q=t||G,W=s||O.connected||L.domElement,Y=d.useMemo(()=>new n2(Q),[Q]);return(0,E.A)(()=>{Y.enabled&&Y.update()},-1),d.useEffect(()=>(p&&Y.connect(p===!0?W:p),Y.connect(W),()=>void Y.dispose()),[p,W,r,Y,F]),d.useEffect(()=>{const K=ge=>{F(),r&&H.regress(),h&&h(ge)},ie=ge=>{g&&g(ge)},ce=ge=>{y&&y(ge)};return Y.addEventListener("change",K),Y.addEventListener("start",ie),Y.addEventListener("end",ce),()=>{Y.removeEventListener("start",ie),Y.removeEventListener("end",ce),Y.removeEventListener("change",K)}},[h,g,y,Y,F,P]),d.useEffect(()=>{if(i){const K=z().controls;return D({controls:Y}),()=>D({controls:K})}},[i,Y]),d.createElement("primitive",(0,w.Z)({ref:b,object:Y,enableDamping:c},_))});var as=A(25108),R0=Object.defineProperty,yE=(i,t,r)=>t in i?R0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$n=(i,t,r)=>(yE(i,typeof t!="symbol"?t+"":t,r),r);class vE extends o.EventDispatcher{constructor(t,r){super(),$n(this,"enabled",!0),$n(this,"screen",{left:0,top:0,width:0,height:0}),$n(this,"rotateSpeed",1),$n(this,"zoomSpeed",1.2),$n(this,"panSpeed",.3),$n(this,"noRotate",!1),$n(this,"noZoom",!1),$n(this,"noPan",!1),$n(this,"staticMoving",!1),$n(this,"dynamicDampingFactor",.2),$n(this,"minDistance",0),$n(this,"maxDistance",1/0),$n(this,"keys",["KeyA","KeyS","KeyD"]),$n(this,"mouseButtons",{LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN}),$n(this,"object"),$n(this,"domElement"),$n(this,"cursorZoom",!1),$n(this,"target",new o.Vector3),$n(this,"mousePosition",new o.Vector2),$n(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),$n(this,"EPS",1e-6),$n(this,"lastZoom",1),$n(this,"lastPosition",new o.Vector3),$n(this,"cursorVector",new o.Vector3),$n(this,"targetVector",new o.Vector3),$n(this,"_state",this.STATE.NONE),$n(this,"_keyState",this.STATE.NONE),$n(this,"_eye",new o.Vector3),$n(this,"_movePrev",new o.Vector2),$n(this,"_moveCurr",new o.Vector2),$n(this,"_lastAxis",new o.Vector3),$n(this,"_lastAngle",0),$n(this,"_zoomStart",new o.Vector2),$n(this,"_zoomEnd",new o.Vector2),$n(this,"_touchZoomDistanceStart",0),$n(this,"_touchZoomDistanceEnd",0),$n(this,"_panStart",new o.Vector2),$n(this,"_panEnd",new o.Vector2),$n(this,"target0"),$n(this,"position0"),$n(this,"up0"),$n(this,"zoom0"),$n(this,"changeEvent",{type:"change"}),$n(this,"startEvent",{type:"start"}),$n(this,"endEvent",{type:"end"}),$n(this,"onScreenVector",new o.Vector2),$n(this,"getMouseOnScreen",(s,c)=>(this.onScreenVector.set((s-this.screen.left)/this.screen.width,(c-this.screen.top)/this.screen.height),this.onScreenVector)),$n(this,"onCircleVector",new o.Vector2),$n(this,"getMouseOnCircle",(s,c)=>(this.onCircleVector.set((s-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-c))/this.screen.width),this.onCircleVector)),$n(this,"axis",new o.Vector3),$n(this,"quaternion",new o.Quaternion),$n(this,"eyeDirection",new o.Vector3),$n(this,"objectUpDirection",new o.Vector3),$n(this,"objectSidewaysDirection",new o.Vector3),$n(this,"moveDirection",new o.Vector3),$n(this,"angle",0),$n(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),$n(this,"zoomCamera",()=>{let s;if(this._state===this.STATE.TOUCH_ZOOM_PAN)s=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(s):this.object.isOrthographicCamera?(this.object.zoom/=s,this.object.updateProjectionMatrix()):as.warn("THREE.TrackballControls: Unsupported camera type");else{if(s=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(s-1)>this.EPS&&s>0&&(this.object.isPerspectiveCamera?(s>1&&this._eye.length()>=this.maxDistance-this.EPS&&(s=1),this._eye.multiplyScalar(s)):this.object.isOrthographicCamera?(s>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(s=1),this.object.zoom/=s):as.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let c=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(c,this.target,s)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),$n(this,"mouseChange",new o.Vector2),$n(this,"objectUp",new o.Vector3),$n(this,"pan",new o.Vector3),$n(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const s=this.object,c=(s.right-s.left)/this.object.zoom,p=(s.top-s.bottom)/this.object.zoom;this.mouseChange.x*=c,this.mouseChange.y*=p}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),$n(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),$n(this,"handleResize",()=>{if(!this.domElement)return;const s=this.domElement.getBoundingClientRect(),c=this.domElement.ownerDocument.documentElement;this.screen.left=s.left+window.pageXOffset-c.clientLeft,this.screen.top=s.top+window.pageYOffset-c.clientTop,this.screen.width=s.width,this.screen.height=s.height}),$n(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):as.warn("THREE.TrackballControls: Unsupported camera type")}),$n(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),$n(this,"keydown",s=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(s.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:s.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:s.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),$n(this,"onPointerDown",s=>{if(this.enabled!==!1)switch(s.pointerType){case"mouse":case"pen":this.onMouseDown(s);break}}),$n(this,"onPointerMove",s=>{if(this.enabled!==!1)switch(s.pointerType){case"mouse":case"pen":this.onMouseMove(s);break}}),$n(this,"onPointerUp",s=>{if(this.enabled!==!1)switch(s.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),$n(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),$n(this,"onMouseDown",s=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(s.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break;default:this._state=this.STATE.NONE}const c=this._keyState!==this.STATE.NONE?this._keyState:this._state;c===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(s.pageX,s.pageY)),this._movePrev.copy(this._moveCurr)):c===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(s.pageX,s.pageY)),this._zoomEnd.copy(this._zoomStart)):c===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(s.pageX,s.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),$n(this,"onMouseMove",s=>{if(this.enabled===!1)return;const c=this._keyState!==this.STATE.NONE?this._keyState:this._state;c===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(s.pageX,s.pageY))):c===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(s.pageX,s.pageY)):c===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(s.pageX,s.pageY))}),$n(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),$n(this,"mousewheel",s=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(s.preventDefault(),s.deltaMode){case 2:this._zoomStart.y-=s.deltaY*.025;break;case 1:this._zoomStart.y-=s.deltaY*.01;break;default:this._zoomStart.y-=s.deltaY*25e-5;break}this.mousePosition.x=s.offsetX/this.screen.width*2-1,this.mousePosition.y=-(s.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),$n(this,"touchstart",s=>{if(this.enabled!==!1){switch(s.preventDefault(),s.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(s.touches[0].pageX,s.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const c=s.touches[0].pageX-s.touches[1].pageX,p=s.touches[0].pageY-s.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(c*c+p*p);const h=(s.touches[0].pageX+s.touches[1].pageX)/2,g=(s.touches[0].pageY+s.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(h,g)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),$n(this,"touchmove",s=>{if(this.enabled!==!1)switch(s.preventDefault(),s.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(s.touches[0].pageX,s.touches[0].pageY));break;default:const c=s.touches[0].pageX-s.touches[1].pageX,p=s.touches[0].pageY-s.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(c*c+p*p);const h=(s.touches[0].pageX+s.touches[1].pageX)/2,g=(s.touches[0].pageY+s.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(h,g));break}}),$n(this,"touchend",s=>{if(this.enabled!==!1){switch(s.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(s.touches[0].pageX,s.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),$n(this,"contextmenu",s=>{this.enabled!==!1&&s.preventDefault()}),$n(this,"connect",s=>{s===document&&as.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=s,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),$n(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,r!==void 0&&this.connect(r),this.update()}}const r2=d.forwardRef((_,y)=>{var b=_,{makeDefault:i,camera:t,domElement:r,regress:s,onChange:c,onStart:p,onEnd:h}=b,g=An(b,["makeDefault","camera","domElement","regress","onChange","onStart","onEnd"]);const{invalidate:T,camera:R,gl:F,events:G,set:L,get:O,performance:P,viewport:D}=(0,E.z)(),z=t||R,H=r||G.connected||F.domElement,Q=d.useMemo(()=>new vE(z),[z]);return(0,E.A)(()=>{Q.enabled&&Q.update()},-1),d.useEffect(()=>(Q.connect(H),()=>void Q.dispose()),[H,s,Q,T]),d.useEffect(()=>{const W=Y=>{T(),s&&P.regress(),c&&c(Y)};return Q.addEventListener("change",W),p&&Q.addEventListener("start",p),h&&Q.addEventListener("end",h),()=>{p&&Q.removeEventListener("start",p),h&&Q.removeEventListener("end",h),Q.removeEventListener("change",W)}},[c,p,h,Q,T]),d.useEffect(()=>{Q.handleResize()},[D]),d.useEffect(()=>{if(i){const W=O().controls;return L({controls:Q}),()=>L({controls:W})}},[i,Q]),d.createElement("primitive",(0,w.Z)({ref:y,object:Q},g))});var I0=A(25108),CA=Object.defineProperty,_E=(i,t,r)=>t in i?CA(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Pt=(i,t,r)=>(_E(i,typeof t!="symbol"?t+"":t,r),r);const Gr={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},C={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},e={x:0,y:0},l={camera:new o.Matrix4,gizmos:new o.Matrix4},f={type:"change"},v={type:"start"},M={type:"end"};class B extends o.EventDispatcher{constructor(t,r=null,s=null){super(),Pt(this,"camera"),Pt(this,"domElement"),Pt(this,"scene"),Pt(this,"mouseActions"),Pt(this,"_mouseOp"),Pt(this,"_v2_1"),Pt(this,"_v3_1"),Pt(this,"_v3_2"),Pt(this,"_m4_1"),Pt(this,"_m4_2"),Pt(this,"_quat"),Pt(this,"_translationMatrix"),Pt(this,"_rotationMatrix"),Pt(this,"_scaleMatrix"),Pt(this,"_rotationAxis"),Pt(this,"_cameraMatrixState"),Pt(this,"_cameraProjectionState"),Pt(this,"_fovState"),Pt(this,"_upState"),Pt(this,"_zoomState"),Pt(this,"_nearPos"),Pt(this,"_farPos"),Pt(this,"_gizmoMatrixState"),Pt(this,"_up0"),Pt(this,"_zoom0"),Pt(this,"_fov0"),Pt(this,"_initialNear"),Pt(this,"_nearPos0"),Pt(this,"_initialFar"),Pt(this,"_farPos0"),Pt(this,"_cameraMatrixState0"),Pt(this,"_gizmoMatrixState0"),Pt(this,"_button"),Pt(this,"_touchStart"),Pt(this,"_touchCurrent"),Pt(this,"_input"),Pt(this,"_switchSensibility"),Pt(this,"_startFingerDistance"),Pt(this,"_currentFingerDistance"),Pt(this,"_startFingerRotation"),Pt(this,"_currentFingerRotation"),Pt(this,"_devPxRatio"),Pt(this,"_downValid"),Pt(this,"_nclicks"),Pt(this,"_downEvents"),Pt(this,"_clickStart"),Pt(this,"_maxDownTime"),Pt(this,"_maxInterval"),Pt(this,"_posThreshold"),Pt(this,"_movementThreshold"),Pt(this,"_currentCursorPosition"),Pt(this,"_startCursorPosition"),Pt(this,"_grid"),Pt(this,"_gridPosition"),Pt(this,"_gizmos"),Pt(this,"_curvePts"),Pt(this,"_timeStart"),Pt(this,"_animationId"),Pt(this,"focusAnimationTime"),Pt(this,"_timePrev"),Pt(this,"_timeCurrent"),Pt(this,"_anglePrev"),Pt(this,"_angleCurrent"),Pt(this,"_cursorPosPrev"),Pt(this,"_cursorPosCurr"),Pt(this,"_wPrev"),Pt(this,"_wCurr"),Pt(this,"adjustNearFar"),Pt(this,"scaleFactor"),Pt(this,"dampingFactor"),Pt(this,"wMax"),Pt(this,"enableAnimations"),Pt(this,"enableGrid"),Pt(this,"cursorZoom"),Pt(this,"minFov"),Pt(this,"maxFov"),Pt(this,"enabled"),Pt(this,"enablePan"),Pt(this,"enableRotate"),Pt(this,"enableZoom"),Pt(this,"minDistance"),Pt(this,"maxDistance"),Pt(this,"minZoom"),Pt(this,"maxZoom"),Pt(this,"target"),Pt(this,"_currentTarget"),Pt(this,"_tbRadius"),Pt(this,"_state"),Pt(this,"onWindowResize",()=>{const c=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const _=this.calculateTbRadius(this.camera);_!==void 0&&(this._tbRadius=_)}const p=this._tbRadius/c,g=new o.EllipseCurve(0,0,p,p).getPoints(this._curvePts),y=new o.BufferGeometry().setFromPoints(g);for(const _ in this._gizmos.children){const b=this._gizmos.children[_];b.geometry=y}this.dispatchEvent(f)}),Pt(this,"onContextMenu",c=>{if(this.enabled){for(let p=0;p<this.mouseActions.length;p++)if(this.mouseActions[p].mouse==2){c.preventDefault();break}}}),Pt(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=C.NONE}),Pt(this,"onPointerDown",c=>{if(c.button==0&&c.isPrimary?(this._downValid=!0,this._downEvents.push(c)):this._downValid=!1,c.pointerType=="touch"&&this._input!=C.CURSOR)switch(this._touchStart.push(c),this._touchCurrent.push(c),this._input){case C.NONE:this._input=C.ONE_FINGER,this.onSinglePanStart(c,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case C.ONE_FINGER:case C.ONE_FINGER_SWITCHED:this._input=C.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case C.TWO_FINGER:this._input=C.MULT_FINGER,this.onTriplePanStart();break}else if(c.pointerType!="touch"&&this._input==C.NONE){let p=null;c.ctrlKey||c.metaKey?p="CTRL":c.shiftKey&&(p="SHIFT"),this._mouseOp=this.getOpFromAction(c.button,p),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=C.CURSOR,this._button=c.button,this.onSinglePanStart(c,this._mouseOp))}}),Pt(this,"onPointerMove",c=>{if(c.pointerType=="touch"&&this._input!=C.CURSOR)switch(this._input){case C.ONE_FINGER:this.updateTouchEvent(c),this.onSinglePanMove(c,Gr.ROTATE);break;case C.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],c)*this._devPxRatio>=this._switchSensibility){this._input=C.ONE_FINGER,this.updateTouchEvent(c),this.onSinglePanStart(c,"ROTATE");break}break;case C.TWO_FINGER:this.updateTouchEvent(c),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case C.MULT_FINGER:this.updateTouchEvent(c),this.onTriplePanMove();break}else if(c.pointerType!="touch"&&this._input==C.CURSOR){let p=null;c.ctrlKey||c.metaKey?p="CTRL":c.shiftKey&&(p="SHIFT");const h=this.getOpStateFromAction(this._button,p);h&&this.onSinglePanMove(c,h)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],c)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),Pt(this,"onPointerUp",c=>{if(c.pointerType=="touch"&&this._input!=C.CURSOR){const p=this._touchCurrent.length;for(let h=0;h<p;h++)if(this._touchCurrent[h].pointerId==c.pointerId){this._touchCurrent.splice(h,1),this._touchStart.splice(h,1);break}switch(this._input){case C.ONE_FINGER:case C.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=C.NONE,this.onSinglePanEnd();break;case C.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=C.ONE_FINGER_SWITCHED;break;case C.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=C.NONE,this.onTriplePanEnd());break}}else c.pointerType!="touch"&&this._input==C.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=C.NONE,this.onSinglePanEnd(),this._button=-1);if(c.isPrimary)if(this._downValid)if(c.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const h=c.timeStamp-this._clickStart,g=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;h<=this._maxInterval&&g<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(c)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),Pt(this,"onWheel",c=>{var p,h;if(this.enabled&&this.enableZoom&&this.domElement){let g=null;c.ctrlKey||c.metaKey?g="CTRL":c.shiftKey&&(g="SHIFT");const y=this.getOpFromAction("WHEEL",g);if(y){c.preventDefault(),this.dispatchEvent(v);const _=125;let b=c.deltaY/_,T=1;switch(b>0?T=1/this.scaleFactor:b<0&&(T=this.scaleFactor),y){case"ZOOM":if(this.updateTbState(Gr.SCALE,!0),b>0?T=1/Math.pow(this.scaleFactor,b):b<0&&(T=Math.pow(this.scaleFactor,-b)),this.cursorZoom&&this.enablePan){let R;this.camera instanceof o.OrthographicCamera&&(R=(p=this.unprojectOnTbPlane(this.camera,c.clientX,c.clientY,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof o.PerspectiveCamera&&(R=(h=this.unprojectOnTbPlane(this.camera,c.clientX,c.clientY,this.domElement))==null?void 0:h.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),R!==void 0&&this.applyTransformMatrix(this.applyScale(T,R))}else this.applyTransformMatrix(this.applyScale(T,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(f),this.dispatchEvent(M);break;case"FOV":if(this.camera instanceof o.PerspectiveCamera){this.updateTbState(Gr.FOV,!0),c.deltaX!=0&&(b=c.deltaX/_,T=1,b>0?T=1/Math.pow(this.scaleFactor,b):b<0&&(T=Math.pow(this.scaleFactor,-b))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const R=this._v3_1.distanceTo(this._gizmos.position);let F=R/T;F=o.MathUtils.clamp(F,this.minDistance,this.maxDistance);const G=R*Math.tan(o.MathUtils.DEG2RAD*this.camera.fov*.5);let L=o.MathUtils.RAD2DEG*(Math.atan(G/F)*2);L>this.maxFov?L=this.maxFov:L<this.minFov&&(L=this.minFov);const O=G/Math.tan(o.MathUtils.DEG2RAD*(L/2));T=R/O,this.setFov(L),this.applyTransformMatrix(this.applyScale(T,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(f),this.dispatchEvent(M);break}}}}),Pt(this,"onSinglePanStart",(c,p)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(v),this.setCenter(c.clientX,c.clientY),p){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(f)),this.camera){this.updateTbState(Gr.PAN,!0);const h=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement);h!==void 0&&this._startCursorPosition.copy(h),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(f))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(Gr.ROTATE,!0);const h=this.unprojectOnTbSurface(this.camera,e.x,e.y,this.domElement,this._tbRadius);h!==void 0&&this._startCursorPosition.copy(h),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(f);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof o.PerspectiveCamera&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(f)),this.updateTbState(Gr.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(f)),this.updateTbState(Gr.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),Pt(this,"onSinglePanMove",(c,p)=>{if(this.enabled&&this.domElement){const h=p!=this._state;switch(this.setCenter(c.clientX,c.clientY),p){case Gr.PAN:if(this.enablePan&&this.camera)if(h){this.dispatchEvent(M),this.dispatchEvent(v),this.updateTbState(p,!0);const g=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement);g!==void 0&&this._startCursorPosition.copy(g),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const g=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement);g!==void 0&&this._currentCursorPosition.copy(g),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case Gr.ROTATE:if(this.enableRotate&&this.camera)if(h){this.dispatchEvent(M),this.dispatchEvent(v),this.updateTbState(p,!0);const g=this.unprojectOnTbSurface(this.camera,e.x,e.y,this.domElement,this._tbRadius);g!==void 0&&this._startCursorPosition.copy(g),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const g=this.unprojectOnTbSurface(this.camera,e.x,e.y,this.domElement,this._tbRadius);g!==void 0&&this._currentCursorPosition.copy(g);const y=this._startCursorPosition.distanceTo(this._currentCursorPosition),_=this._startCursorPosition.angleTo(this._currentCursorPosition),b=Math.max(y/this._tbRadius,_);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),b)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=b,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case Gr.SCALE:if(this.enableZoom)if(h)this.dispatchEvent(M),this.dispatchEvent(v),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5);const y=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;y<0?_=1/Math.pow(this.scaleFactor,-y*8):y>0&&(_=Math.pow(this.scaleFactor,y*8)),this.applyTransformMatrix(this.applyScale(_,this._gizmos.position))}break;case Gr.FOV:if(this.enableZoom&&this.camera instanceof o.PerspectiveCamera)if(h)this.dispatchEvent(M),this.dispatchEvent(v),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5);const y=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;y<0?_=1/Math.pow(this.scaleFactor,-y*8):y>0&&(_=Math.pow(this.scaleFactor,y*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const b=this._v3_1.distanceTo(this._gizmos.position);let T=b/_;T=o.MathUtils.clamp(T,this.minDistance,this.maxDistance);const R=b*Math.tan(o.MathUtils.DEG2RAD*this._fovState*.5);let F=o.MathUtils.RAD2DEG*(Math.atan(R/T)*2);F=o.MathUtils.clamp(F,this.minFov,this.maxFov);const G=R/Math.tan(o.MathUtils.DEG2RAD*(F/2));_=b/G,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(_,this._v3_2,!1));const L=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(G/b);this._m4_1.makeTranslation(L.x,L.y,L.z)}break}this.dispatchEvent(f)}}),Pt(this,"onSinglePanEnd",()=>{if(this._state==Gr.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const p=Math.abs((this._wPrev+this._wCurr)/2),h=this;this._animationId=window.requestAnimationFrame(function(g){h.updateTbState(Gr.ANIMATION_ROTATE,!0);const y=h.calculateRotationAxis(h._cursorPosPrev,h._cursorPosCurr);h.onRotationAnim(g,y,Math.min(p,h.wMax))})}else this.updateTbState(Gr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(f);else this.updateTbState(Gr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(f)}else(this._state==Gr.PAN||this._state==Gr.IDLE)&&(this.updateTbState(Gr.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(f));this.dispatchEvent(M)}),Pt(this,"onDoubleTap",c=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(v),this.setCenter(c.clientX,c.clientY);const p=this.unprojectOnObj(this.getCursorNDC(e.x,e.y,this.domElement),this.camera);if(p&&this.enableAnimations){const h=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(g){h.updateTbState(Gr.ANIMATION_FOCUS,!0),h.onFocusAnim(g,p,h._cameraMatrixState,h._gizmoMatrixState)})}else p&&!this.enableAnimations&&(this.updateTbState(Gr.FOCUS,!0),this.focus(p,this.scaleFactor),this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(f))}this.dispatchEvent(M)}),Pt(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(v),this.updateTbState(Gr.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const c=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement,!0);c!==void 0&&this._startCursorPosition.copy(c),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),Pt(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Gr.PAN&&(this.updateTbState(Gr.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const c=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement,!0);c!==void 0&&this._currentCursorPosition.copy(c),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(f)}}),Pt(this,"onDoublePanEnd",()=>{this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(M)}),Pt(this,"onRotateStart",()=>{var c;this.enabled&&this.enableRotate&&(this.dispatchEvent(v),this.updateTbState(Gr.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(c=this.camera)==null||c.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),Pt(this,"onRotateMove",()=>{var c;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let p;this._state!=Gr.ZROTATE&&(this.updateTbState(Gr.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),p=(c=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement))==null?void 0:c.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):p=new o.Vector3().setFromMatrixPosition(this._gizmoMatrixState);const h=o.MathUtils.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);p!==void 0&&this.applyTransformMatrix(this.zRotate(p,h)),this.dispatchEvent(f)}}),Pt(this,"onRotateEnd",()=>{this.updateTbState(Gr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(M)}),Pt(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(v),this.updateTbState(Gr.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),Pt(this,"onPinchMove",()=>{var c,p;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const h=12;this._state!=Gr.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(Gr.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),h*this._devPxRatio);const g=this._currentFingerDistance/this._startFingerDistance;let y;this.enablePan?this.camera instanceof o.OrthographicCamera?y=(c=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement))==null?void 0:c.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof o.PerspectiveCamera&&(y=(p=this.unprojectOnTbPlane(this.camera,e.x,e.y,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):y=this._gizmos.position,y!==void 0&&this.applyTransformMatrix(this.applyScale(g,y)),this.dispatchEvent(f)}}),Pt(this,"onPinchEnd",()=>{this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(M)}),Pt(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(v),this.updateTbState(Gr.SCALE,!0);let c=0,p=0;const h=this._touchCurrent.length;for(let g=0;g<h;g++)c+=this._touchCurrent[g].clientX,p+=this._touchCurrent[g].clientY;this.setCenter(c/h,p/h),this._startCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),Pt(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let c=0,p=0;const h=this._touchCurrent.length;for(let O=0;O<h;O++)c+=this._touchCurrent[O].clientX,p+=this._touchCurrent[O].clientY;this.setCenter(c/h,p/h);const g=8;this._currentCursorPosition.setY(this.getCursorNDC(e.x,e.y,this.domElement).y*.5);const y=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;y<0?_=1/Math.pow(this.scaleFactor,-y*g):y>0&&(_=Math.pow(this.scaleFactor,y*g)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const b=this._v3_1.distanceTo(this._gizmos.position);let T=b/_;T=o.MathUtils.clamp(T,this.minDistance,this.maxDistance);const R=b*Math.tan(o.MathUtils.DEG2RAD*this._fovState*.5);let F=o.MathUtils.RAD2DEG*(Math.atan(R/T)*2);F=o.MathUtils.clamp(F,this.minFov,this.maxFov);const G=R/Math.tan(o.MathUtils.DEG2RAD*(F/2));_=b/G,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(_,this._v3_2,!1));const L=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(G/b);this._m4_1.makeTranslation(L.x,L.y,L.z),this.dispatchEvent(f)}}),Pt(this,"onTriplePanEnd",()=>{this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(M)}),Pt(this,"setCenter",(c,p)=>{e.x=c,e.y=p}),Pt(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),Pt(this,"setMouseAction",(c,p,h=null)=>{const g=["PAN","ROTATE","ZOOM","FOV"],y=[0,1,2,"WHEEL"],_=["CTRL","SHIFT",null];let b;if(!g.includes(c)||!y.includes(p)||!_.includes(h)||p=="WHEEL"&&c!="ZOOM"&&c!="FOV")return!1;switch(c){case"PAN":b=Gr.PAN;break;case"ROTATE":b=Gr.ROTATE;break;case"ZOOM":b=Gr.SCALE;break;case"FOV":b=Gr.FOV;break}const T={operation:c,mouse:p,key:h,state:b};for(let R=0;R<this.mouseActions.length;R++)if(this.mouseActions[R].mouse==T.mouse&&this.mouseActions[R].key==T.key)return this.mouseActions.splice(R,1,T),!0;return this.mouseActions.push(T),!0}),Pt(this,"getOpFromAction",(c,p)=>{let h;for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==p)return h.operation;if(p){for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==null)return h.operation}return null}),Pt(this,"getOpStateFromAction",(c,p)=>{let h;for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==p)return h.state;if(p){for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==null)return h.state}return null}),Pt(this,"getAngle",(c,p)=>Math.atan2(p.clientY-c.clientY,p.clientX-c.clientX)*180/Math.PI),Pt(this,"updateTouchEvent",c=>{for(let p=0;p<this._touchCurrent.length;p++)if(this._touchCurrent[p].pointerId==c.pointerId){this._touchCurrent.splice(p,1,c);break}}),Pt(this,"calculateAngularSpeed",(c,p,h,g)=>{const y=p-c,_=(g-h)/1e3;return _==0?0:y/_}),Pt(this,"calculatePointersDistance",(c,p)=>Math.sqrt(Math.pow(p.clientX-c.clientX,2)+Math.pow(p.clientY-c.clientY,2))),Pt(this,"calculateRotationAxis",(c,p)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(c,p).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),Pt(this,"calculateTbRadius",c=>{const h=c.position.distanceTo(this._gizmos.position);if(c instanceof o.PerspectiveCamera){const g=o.MathUtils.DEG2RAD*c.fov*.5,y=Math.atan(c.aspect*Math.tan(g));return Math.tan(Math.min(g,y))*h*.67}else if(c instanceof o.OrthographicCamera)return Math.min(c.top,c.right)*.67}),Pt(this,"focus",(c,p,h=1)=>{if(this.camera){const g=c.clone();g.sub(this._gizmos.position).multiplyScalar(h),this._translationMatrix.makeTranslation(g.x,g.y,g.z);const y=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const _=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(p,this._gizmos.position)),this._gizmoMatrixState.copy(y),this._cameraMatrixState.copy(_)}}),Pt(this,"drawGrid",()=>{if(this.scene){let h,g,y,_;if(this.camera instanceof o.OrthographicCamera){const b=this.camera.right-this.camera.left,T=this.camera.bottom-this.camera.top;y=Math.max(b,T),_=y/20,h=y/this.camera.zoom*3,g=h/_*this.camera.zoom}else if(this.camera instanceof o.PerspectiveCamera){const b=this.camera.position.distanceTo(this._gizmos.position),T=o.MathUtils.DEG2RAD*this.camera.fov*.5,R=Math.atan(this.camera.aspect*Math.tan(T));y=Math.tan(Math.max(T,R))*b*2,_=y/20,h=y*3,g=h/_}this._grid==null&&this.camera&&(this._grid=new o.GridHelper(h,g,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),Pt(this,"connect",c=>{c===document&&I0.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),Pt(this,"dispose",()=>{var c,p,h,g,y;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointercancel",this.onPointerCancel),(h=this.domElement)==null||h.removeEventListener("wheel",this.onWheel),(g=this.domElement)==null||g.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(y=this.scene)==null||y.remove(this._gizmos),this.disposeGrid()}),Pt(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),Pt(this,"easeOutCubic",c=>1-Math.pow(1-c,3)),Pt(this,"activateGizmos",c=>{for(const p of this._gizmos.children)p.material.setValues({opacity:c?1:.6})}),Pt(this,"getCursorNDC",(c,p,h)=>{const g=h.getBoundingClientRect();return this._v2_1.setX((c-g.left)/g.width*2-1),this._v2_1.setY((g.bottom-p)/g.height*2-1),this._v2_1.clone()}),Pt(this,"getCursorPosition",(c,p,h)=>(this._v2_1.copy(this.getCursorNDC(c,p,h)),this.camera instanceof o.OrthographicCamera&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),Pt(this,"setCamera",c=>{if(c){c.lookAt(this.target),c.updateMatrix(),c instanceof o.PerspectiveCamera&&(this._fov0=c.fov,this._fovState=c.fov),this._cameraMatrixState0.copy(c.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(c.projectionMatrix),this._zoom0=c.zoom,this._zoomState=this._zoom0,this._initialNear=c.near,this._nearPos0=c.position.distanceTo(this.target)-c.near,this._nearPos=this._initialNear,this._initialFar=c.far,this._farPos0=c.position.distanceTo(this.target)-c.far,this._farPos=this._initialFar,this._up0.copy(c.up),this._upState.copy(c.up),this.camera=c,this.camera.updateProjectionMatrix();const p=this.calculateTbRadius(c);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius)}}),Pt(this,"makeGizmos",(c,p)=>{const g=new o.EllipseCurve(0,0,p,p).getPoints(this._curvePts),y=new o.BufferGeometry().setFromPoints(g),_=new o.LineBasicMaterial({color:16744576,fog:!1,transparent:!0,opacity:.6}),b=new o.LineBasicMaterial({color:8454016,fog:!1,transparent:!0,opacity:.6}),T=new o.LineBasicMaterial({color:8421631,fog:!1,transparent:!0,opacity:.6}),R=new o.Line(y,_),F=new o.Line(y,b),G=new o.Line(y,T),L=Math.PI*.5;if(R.rotation.x=L,F.rotation.y=L,this._gizmoMatrixState0.identity().setPosition(c),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const O=1/this.camera.zoom;this._scaleMatrix.makeScale(O,O,O),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(c.x,c.y,c.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(R),this._gizmos.add(F),this._gizmos.add(G)}),Pt(this,"onFocusAnim",(c,p,h,g)=>{if(this._timeStart==-1&&(this._timeStart=c),this._state==Gr.ANIMATION_FOCUS){const _=(c-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(g),_>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,this.scaleFactor),this._timeStart=-1,this.updateTbState(Gr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(f);else{const b=this.easeOutCubic(_),T=1-b+this.scaleFactor*b;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,T,b),this.dispatchEvent(f);const R=this;this._animationId=window.requestAnimationFrame(function(F){R.onFocusAnim(F,p,h,g.clone())})}}else this._animationId=-1,this._timeStart=-1}),Pt(this,"onRotationAnim",(c,p,h)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=c),this._state==Gr.ANIMATION_ROTATE){const g=(c-this._timeStart)/1e3;if(h+-this.dampingFactor*g>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(g,2)+h*g+0,this.applyTransformMatrix(this.rotate(p,this._angleCurrent)),this.dispatchEvent(f);const _=this;this._animationId=window.requestAnimationFrame(function(b){_.onRotationAnim(b,p,h)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(Gr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(f)}else this._animationId=-1,this._timeStart=-1,this._state!=Gr.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(f))}),Pt(this,"pan",(c,p,h=!1)=>{if(this.camera){const g=c.clone().sub(p);if(this.camera instanceof o.OrthographicCamera&&g.multiplyScalar(1/this.camera.zoom),this.camera instanceof o.PerspectiveCamera&&h){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const y=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);g.multiplyScalar(1/y)}this._v3_1.set(g.x,g.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return l}),Pt(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof o.PerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(f)}}),Pt(this,"rotate",(c,p)=>{const h=this._gizmos.position;return this._translationMatrix.makeTranslation(-h.x,-h.y,-h.z),this._rotationMatrix.makeRotationAxis(c,-p),this._m4_1.makeTranslation(h.x,h.y,h.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),l}),Pt(this,"copyState",()=>{if(this.camera){const c=JSON.stringify(this.camera instanceof o.OrthographicCamera?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(c)}}),Pt(this,"pasteState",()=>{const c=this;navigator.clipboard.readText().then(function(h){c.setStateFromJSON(h)})}),Pt(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof o.PerspectiveCamera&&(this._fov0=this.camera.fov))}),Pt(this,"applyScale",(c,p,h=!0)=>{if(!this.camera)return;const g=p.clone();let y=1/c;if(this.camera instanceof o.OrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=c,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,y=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,y=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(y,y,y),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),g.sub(this._v3_1);const _=g.clone().multiplyScalar(y);return g.sub(_),this._m4_1.makeTranslation(g.x,g.y,g.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),l}if(this.camera instanceof o.PerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let _=this._v3_1.distanceTo(g),b=_-_*y;const T=_-b;T<this.minDistance?(y=this.minDistance/_,b=_-_*y):T>this.maxDistance&&(y=this.maxDistance/_,b=_-_*y);let R=g.clone().sub(this._v3_1).normalize().multiplyScalar(b);if(this._m4_1.makeTranslation(R.x,R.y,R.z),h){const F=this._v3_2;_=F.distanceTo(g),b=_-_*y,R=g.clone().sub(this._v3_2).normalize().multiplyScalar(b),this._translationMatrix.makeTranslation(F.x,F.y,F.z),this._scaleMatrix.makeScale(y,y,y),this._m4_2.makeTranslation(R.x,R.y,R.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-F.x,-F.y,-F.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return l}}),Pt(this,"setFov",c=>{this.camera instanceof o.PerspectiveCamera&&(this.camera.fov=o.MathUtils.clamp(c,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),Pt(this,"setTarget",(c,p,h)=>{if(this.camera){this.target.set(c,p,h),this._gizmos.position.set(c,p,h);const g=this.calculateTbRadius(this.camera);g!==void 0&&(this._tbRadius=g),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),Pt(this,"zRotate",(c,p)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,p),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._m4_1.makeTranslation(c.x,c.y,c.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(c),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,p),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),l)),Pt(this,"unprojectOnObj",(c,p)=>{if(!this.scene)return null;const h=new o.Raycaster;h.near=p.near,h.far=p.far,h.setFromCamera(c,p);const g=h.intersectObjects(this.scene.children,!0);for(let y=0;y<g.length;y++)if(g[y].object.uuid!=this._gizmos.uuid&&g[y].face)return g[y].point.clone();return null}),Pt(this,"unprojectOnTbSurface",(c,p,h,g,y)=>{if(c instanceof o.OrthographicCamera){this._v2_1.copy(this.getCursorPosition(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const _=Math.pow(this._v2_1.x,2),b=Math.pow(this._v2_1.y,2),T=Math.pow(this._tbRadius,2);return _+b<=T*.5?this._v3_1.setZ(Math.sqrt(T-(_+b))):this._v3_1.setZ(T*.5/Math.sqrt(_+b)),this._v3_1}if(c instanceof o.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(c.projectionMatrixInverse);const _=this._v3_1.clone().normalize(),b=c.position.distanceTo(this._gizmos.position),T=Math.pow(y,2),R=this._v3_1.z,F=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(F==0)return _.set(this._v3_1.x,this._v3_1.y,y),_;const G=R/F,L=b;let O=Math.pow(G,2)+1,P=2*G*L,D=Math.pow(L,2)-T,z=Math.pow(P,2)-4*O*D;if(z>=0&&(this._v2_1.setX((-P-Math.sqrt(z))/(2*O)),this._v2_1.setY(G*this._v2_1.x+L),o.MathUtils.RAD2DEG*this._v2_1.angle()>=45)){const W=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(b-this._v2_1.y,2));return _.multiplyScalar(W),_.z+=b,_}O=G,P=L,D=-T*.5,z=Math.pow(P,2)-4*O*D,this._v2_1.setX((-P-Math.sqrt(z))/(2*O)),this._v2_1.setY(G*this._v2_1.x+L);const H=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(b-this._v2_1.y,2));return _.multiplyScalar(H),_.z+=b,_}}),Pt(this,"unprojectOnTbPlane",(c,p,h,g,y=!1)=>{if(c instanceof o.OrthographicCamera)return this._v2_1.copy(this.getCursorPosition(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(c instanceof o.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(c.projectionMatrixInverse);const _=this._v3_1.clone().normalize(),b=this._v3_1.z,T=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let R;if(y?R=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):R=c.position.distanceTo(this._gizmos.position),T==0)return _.set(0,0,0),_;const F=b/T,G=R,L=-G/F,O=Math.sqrt(Math.pow(G,2)+Math.pow(L,2));return _.multiplyScalar(O),_.z=0,_}}),Pt(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof o.OrthographicCamera&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof o.PerspectiveCamera&&(this._fovState=this.camera.fov))}),Pt(this,"updateTbState",(c,p)=>{this._state=c,p&&this.updateMatrixState()}),Pt(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const p=this.calculateTbRadius(this.camera);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof o.OrthographicCamera&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const p=o.MathUtils.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(p/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof o.PerspectiveCamera){const p=this.camera.position.distanceTo(this._gizmos.position);if(p>this.maxDistance+1e-6||p<this.minDistance-1e-6){const y=o.MathUtils.clamp(p,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(y/p,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=o.MathUtils.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const h=this._tbRadius,g=this.calculateTbRadius(this.camera);if(g!==void 0&&(this._tbRadius=g),h<this._tbRadius-1e-6||h>this._tbRadius+1e-6){const y=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,_=this._tbRadius/y,T=new o.EllipseCurve(0,0,_,_).getPoints(this._curvePts),R=new o.BufferGeometry().setFromPoints(T);for(const F in this._gizmos.children){const G=this._gizmos.children[F];G.geometry=R}}}this.camera.lookAt(this._gizmos.position)}}),Pt(this,"setStateFromJSON",c=>{const p=JSON.parse(c);if(p.arcballState&&this.camera){this._cameraMatrixState.fromArray(p.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(p.arcballState.cameraUp),this.camera.near=p.arcballState.cameraNear,this.camera.far=p.arcballState.cameraFar,this.camera.zoom=p.arcballState.cameraZoom,this.camera instanceof o.PerspectiveCamera&&(this.camera.fov=p.arcballState.cameraFov),this._gizmoMatrixState.fromArray(p.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const h=this.calculateTbRadius(this.camera);h!==void 0&&(this._tbRadius=h);const g=new o.Matrix4().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(g),this.camera.lookAt(this._gizmos.position),this.updateTbState(Gr.IDLE,!1),this.dispatchEvent(f)}}),this.camera=null,this.domElement=r,this.scene=s,this.mouseActions=[],this._mouseOp=null,this._v2_1=new o.Vector2,this._v3_1=new o.Vector3,this._v3_2=new o.Vector3,this._m4_1=new o.Matrix4,this._m4_2=new o.Matrix4,this._quat=new o.Quaternion,this._translationMatrix=new o.Matrix4,this._rotationMatrix=new o.Matrix4,this._scaleMatrix=new o.Matrix4,this._rotationAxis=new o.Vector3,this._cameraMatrixState=new o.Matrix4,this._cameraProjectionState=new o.Matrix4,this._fovState=1,this._upState=new o.Vector3,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new o.Matrix4,this._up0=new o.Vector3,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new o.Matrix4,this._gizmoMatrixState0=new o.Matrix4,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=C.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new o.Vector3,this._startCursorPosition=new o.Vector3,this._grid=null,this._gridPosition=new o.Vector3,this._gizmos=new o.Group,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new o.Vector3,this._cursorPosCurr=new o.Vector3,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new o.Vector3(0,0,0),this._currentTarget=new o.Vector3(0,0,0),this._tbRadius=1,this._state=Gr.IDLE,this.setCamera(t),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(t){if(t!=null&&t.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==Gr.ROTATE||this._state==Gr.ZROTATE||this._state==Gr.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),t!=null&&t.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==Gr.SCALE||this._state==Gr.FOCUS||this._state==Gr.ANIMATION_FOCUS)&&this.camera){const r=this.calculateTbRadius(this.camera);if(r!==void 0&&(this._tbRadius=r),this.adjustNearFar){const s=this.camera.position.distanceTo(this._gizmos.position),c=new o.Box3;c.setFromObject(this._gizmos);const p=new o.Sphere;c.getBoundingSphere(p);const h=Math.max(this._nearPos0,p.radius+p.center.length()),g=s-this._initialNear,y=Math.min(h,g);this.camera.near=s-y;const _=Math.min(this._farPos0,-p.radius+p.center.length()),b=s-this._initialFar,T=Math.min(_,b);this.camera.far=s-T,this.camera.updateProjectionMatrix()}else{let s=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,s=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,s=!0),s&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(f)}setTransformationMatrices(t=null,r=null){t?l.camera?l.camera.copy(t):l.camera=t.clone():l.camera=null,r?l.gizmos?l.gizmos.copy(r):l.gizmos=r.clone():l.gizmos=null}}const I=(0,d.forwardRef)((_,y)=>{var b=_,{camera:i,makeDefault:t,regress:r,domElement:s,onChange:c,onStart:p,onEnd:h}=b,g=An(b,["camera","makeDefault","regress","domElement","onChange","onStart","onEnd"]);const T=(0,E.z)(Q=>Q.invalidate),R=(0,E.z)(Q=>Q.camera),F=(0,E.z)(Q=>Q.gl),G=(0,E.z)(Q=>Q.events),L=(0,E.z)(Q=>Q.set),O=(0,E.z)(Q=>Q.get),P=(0,E.z)(Q=>Q.performance),D=i||R,z=s||G.connected||F.domElement,H=(0,d.useMemo)(()=>new B(D),[D]);return(0,E.A)(()=>{H.enabled&&H.update()},-1),(0,d.useEffect)(()=>(H.connect(z),()=>void H.dispose()),[z,r,H,T]),(0,d.useEffect)(()=>{const Q=W=>{T(),r&&P.regress(),c&&c(W)};return H.addEventListener("change",Q),p&&H.addEventListener("start",p),h&&H.addEventListener("end",h),()=>{H.removeEventListener("change",Q),p&&H.removeEventListener("start",p),h&&H.removeEventListener("end",h)}},[c,p,h]),(0,d.useEffect)(()=>{if(t){const Q=O().controls;return L({controls:H}),()=>L({controls:Q})}},[t,H]),d.createElement("primitive",(0,w.Z)({ref:y,object:H},g))});var k=A(76427),N=A.n(k),X=A(25108),Z=Object.defineProperty,$=(i,t,r)=>t in i?Z(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,J=(i,t,r)=>($(i,typeof t!="symbol"?t+"":t,r),r);class re extends o.Object3D{constructor(t,r){super(),J(this,"isTransformControls",!0),J(this,"visible",!1),J(this,"domElement"),J(this,"raycaster",new o.Raycaster),J(this,"gizmo"),J(this,"plane"),J(this,"tempVector",new o.Vector3),J(this,"tempVector2",new o.Vector3),J(this,"tempQuaternion",new o.Quaternion),J(this,"unit",{X:new o.Vector3(1,0,0),Y:new o.Vector3(0,1,0),Z:new o.Vector3(0,0,1)}),J(this,"pointStart",new o.Vector3),J(this,"pointEnd",new o.Vector3),J(this,"offset",new o.Vector3),J(this,"rotationAxis",new o.Vector3),J(this,"startNorm",new o.Vector3),J(this,"endNorm",new o.Vector3),J(this,"rotationAngle",0),J(this,"cameraPosition",new o.Vector3),J(this,"cameraQuaternion",new o.Quaternion),J(this,"cameraScale",new o.Vector3),J(this,"parentPosition",new o.Vector3),J(this,"parentQuaternion",new o.Quaternion),J(this,"parentQuaternionInv",new o.Quaternion),J(this,"parentScale",new o.Vector3),J(this,"worldPositionStart",new o.Vector3),J(this,"worldQuaternionStart",new o.Quaternion),J(this,"worldScaleStart",new o.Vector3),J(this,"worldPosition",new o.Vector3),J(this,"worldQuaternion",new o.Quaternion),J(this,"worldQuaternionInv",new o.Quaternion),J(this,"worldScale",new o.Vector3),J(this,"eye",new o.Vector3),J(this,"positionStart",new o.Vector3),J(this,"quaternionStart",new o.Quaternion),J(this,"scaleStart",new o.Vector3),J(this,"camera"),J(this,"object"),J(this,"enabled",!0),J(this,"axis",null),J(this,"mode","translate"),J(this,"translationSnap",null),J(this,"rotationSnap",null),J(this,"scaleSnap",null),J(this,"space","world"),J(this,"size",1),J(this,"dragging",!1),J(this,"showX",!0),J(this,"showY",!0),J(this,"showZ",!0),J(this,"changeEvent",{type:"change"}),J(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),J(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),J(this,"objectChangeEvent",{type:"objectChange"}),J(this,"intersectObjectWithRay",(c,p,h)=>{const g=p.intersectObject(c,!0);for(let y=0;y<g.length;y++)if(g[y].object.visible||h)return g[y];return!1}),J(this,"attach",c=>(this.object=c,this.visible=!0,this)),J(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),J(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),J(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?X.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),J(this,"pointerHover",c=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(c,this.camera);const p=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);p?this.axis=p.object.name:this.axis=null}),J(this,"pointerDown",c=>{if(!(this.object===void 0||this.dragging===!0||c.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(c,this.camera);const p=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(p){let h=this.space;if(this.mode==="scale"?h="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(h="world"),h==="local"&&this.mode==="rotate"){const g=this.rotationSnap;this.axis==="X"&&g&&(this.object.rotation.x=Math.round(this.object.rotation.x/g)*g),this.axis==="Y"&&g&&(this.object.rotation.y=Math.round(this.object.rotation.y/g)*g),this.axis==="Z"&&g&&(this.object.rotation.z=Math.round(this.object.rotation.z/g)*g)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(p.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),J(this,"pointerMove",c=>{const p=this.axis,h=this.mode,g=this.object;let y=this.space;if(h==="scale"?y="local":(p==="E"||p==="XYZE"||p==="XYZ")&&(y="world"),g===void 0||p===null||this.dragging===!1||c.button!==-1)return;this.raycaster.setFromCamera(c,this.camera);const _=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(_){if(this.pointEnd.copy(_.point).sub(this.worldPositionStart),h==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),y==="local"&&p!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),p.indexOf("X")===-1&&(this.offset.x=0),p.indexOf("Y")===-1&&(this.offset.y=0),p.indexOf("Z")===-1&&(this.offset.z=0),y==="local"&&p!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),g.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(y==="local"&&(g.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),p.search("X")!==-1&&(g.position.x=Math.round(g.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(g.position.y=Math.round(g.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(g.position.z=Math.round(g.position.z/this.translationSnap)*this.translationSnap),g.position.applyQuaternion(this.quaternionStart)),y==="world"&&(g.parent&&g.position.add(this.tempVector.setFromMatrixPosition(g.parent.matrixWorld)),p.search("X")!==-1&&(g.position.x=Math.round(g.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(g.position.y=Math.round(g.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(g.position.z=Math.round(g.position.z/this.translationSnap)*this.translationSnap),g.parent&&g.position.sub(this.tempVector.setFromMatrixPosition(g.parent.matrixWorld))));else if(h==="scale"){if(p.search("XYZ")!==-1){let b=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(b*=-1),this.tempVector2.set(b,b,b)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),p.search("X")===-1&&(this.tempVector2.x=1),p.search("Y")===-1&&(this.tempVector2.y=1),p.search("Z")===-1&&(this.tempVector2.z=1);g.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(p.search("X")!==-1&&(this.object.scale.x=Math.round(g.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Y")!==-1&&(g.scale.y=Math.round(g.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Z")!==-1&&(g.scale.z=Math.round(g.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(h==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const b=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));p==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):p==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*b):(p==="X"||p==="Y"||p==="Z")&&(this.rotationAxis.copy(this.unit[p]),this.tempVector.copy(this.unit[p]),y==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*b),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),y==="local"&&p!=="E"&&p!=="XYZE"?(g.quaternion.copy(this.quaternionStart),g.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),g.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),g.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),J(this,"pointerUp",c=>{c.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),J(this,"getPointer",c=>{var p,h;if(this.domElement&&((p=this.domElement.ownerDocument)!=null&&p.pointerLockElement))return{x:0,y:0,button:c.button};{const g=c.changedTouches?c.changedTouches[0]:c,y=(h=this.domElement)==null?void 0:h.getBoundingClientRect();return{x:(g.clientX-y.left)/y.width*2-1,y:-(g.clientY-y.top)/y.height*2+1,button:c.button}}}),J(this,"onPointerHover",c=>{if(this.enabled)switch(c.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(c));break}}),J(this,"onPointerDown",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(c)),this.pointerDown(this.getPointer(c)))}),J(this,"onPointerMove",c=>{this.enabled&&this.pointerMove(this.getPointer(c))}),J(this,"onPointerUp",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(c)))}),J(this,"getMode",()=>this.mode),J(this,"setMode",c=>{this.mode=c}),J(this,"setTranslationSnap",c=>{this.translationSnap=c}),J(this,"setRotationSnap",c=>{this.rotationSnap=c}),J(this,"setScaleSnap",c=>{this.scaleSnap=c}),J(this,"setSize",c=>{this.size=c}),J(this,"setSpace",c=>{this.space=c}),J(this,"update",()=>{X.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),J(this,"connect",c=>{c===document&&X.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),J(this,"dispose",()=>{var c,p,h,g,y,_;(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointermove",this.onPointerHover),(g=(h=this.domElement)==null?void 0:h.ownerDocument)==null||g.removeEventListener("pointermove",this.onPointerMove),(_=(y=this.domElement)==null?void 0:y.ownerDocument)==null||_.removeEventListener("pointerup",this.onPointerUp),this.traverse(b=>{const T=b;T.geometry&&T.geometry.dispose(),T.material&&T.material.dispose()})}),this.domElement=r,this.camera=t,this.gizmo=new fe,this.add(this.gizmo),this.plane=new se,this.add(this.plane);const s=(c,p)=>{let h=p;Object.defineProperty(this,c,{get:function(){return h!==void 0?h:p},set:function(g){h!==g&&(h=g,this.plane[c]=g,this.gizmo[c]=g,this.dispatchEvent({type:c+"-changed",value:g}),this.dispatchEvent(this.changeEvent))}}),this[c]=p,this.plane[c]=p,this.gizmo[c]=p};s("camera",this.camera),s("object",this.object),s("enabled",this.enabled),s("axis",this.axis),s("mode",this.mode),s("translationSnap",this.translationSnap),s("rotationSnap",this.rotationSnap),s("scaleSnap",this.scaleSnap),s("space",this.space),s("size",this.size),s("dragging",this.dragging),s("showX",this.showX),s("showY",this.showY),s("showZ",this.showZ),s("worldPosition",this.worldPosition),s("worldPositionStart",this.worldPositionStart),s("worldQuaternion",this.worldQuaternion),s("worldQuaternionStart",this.worldQuaternionStart),s("cameraPosition",this.cameraPosition),s("cameraQuaternion",this.cameraQuaternion),s("pointStart",this.pointStart),s("pointEnd",this.pointEnd),s("rotationAxis",this.rotationAxis),s("rotationAngle",this.rotationAngle),s("eye",this.eye),r!==void 0&&this.connect(r)}}class fe extends o.Object3D{constructor(){super(),J(this,"isTransformControlsGizmo",!0),J(this,"type","TransformControlsGizmo"),J(this,"tempVector",new o.Vector3(0,0,0)),J(this,"tempEuler",new o.Euler),J(this,"alignVector",new o.Vector3(0,1,0)),J(this,"zeroVector",new o.Vector3(0,0,0)),J(this,"lookAtMatrix",new o.Matrix4),J(this,"tempQuaternion",new o.Quaternion),J(this,"tempQuaternion2",new o.Quaternion),J(this,"identityQuaternion",new o.Quaternion),J(this,"unitX",new o.Vector3(1,0,0)),J(this,"unitY",new o.Vector3(0,1,0)),J(this,"unitZ",new o.Vector3(0,0,1)),J(this,"gizmo"),J(this,"picker"),J(this,"helper"),J(this,"rotationAxis",new o.Vector3),J(this,"cameraPosition",new o.Vector3),J(this,"worldPositionStart",new o.Vector3),J(this,"worldQuaternionStart",new o.Quaternion),J(this,"worldPosition",new o.Vector3),J(this,"worldQuaternion",new o.Quaternion),J(this,"eye",new o.Vector3),J(this,"camera",null),J(this,"enabled",!0),J(this,"axis",null),J(this,"mode","translate"),J(this,"space","world"),J(this,"size",1),J(this,"dragging",!1),J(this,"showX",!0),J(this,"showY",!0),J(this,"showZ",!0),J(this,"updateMatrixWorld",()=>{let Ye=this.space;this.mode==="scale"&&(Ye="local");const Ce=Ye==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let Ee=[];Ee=Ee.concat(this.picker[this.mode].children),Ee=Ee.concat(this.gizmo[this.mode].children),Ee=Ee.concat(this.helper[this.mode].children);for(let _e=0;_e<Ee.length;_e++){const oe=Ee[_e];oe.visible=!0,oe.rotation.set(0,0,0),oe.position.copy(this.worldPosition);let me;if(this.camera.isOrthographicCamera?me=(this.camera.top-this.camera.bottom)/this.camera.zoom:me=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),oe.scale.set(1,1,1).multiplyScalar(me*this.size/7),oe.tag==="helper"){oe.visible=!1,oe.name==="AXIS"?(oe.position.copy(this.worldPositionStart),oe.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),oe.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),oe.quaternion.multiply(this.tempQuaternion),oe.visible=this.dragging),this.axis==="E"&&(oe.visible=!1)):oe.name==="START"?(oe.position.copy(this.worldPositionStart),oe.visible=this.dragging):oe.name==="END"?(oe.position.copy(this.worldPosition),oe.visible=this.dragging):oe.name==="DELTA"?(oe.position.copy(this.worldPositionStart),oe.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),oe.scale.copy(this.tempVector),oe.visible=this.dragging):(oe.quaternion.copy(Ce),this.dragging?oe.position.copy(this.worldPositionStart):oe.position.copy(this.worldPosition),this.axis&&(oe.visible=this.axis.search(oe.name)!==-1));continue}oe.quaternion.copy(Ce),this.mode==="translate"||this.mode==="scale"?((oe.name==="X"||oe.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),(oe.name==="Y"||oe.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),(oe.name==="Z"||oe.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.x*=-1:oe.tag==="bwd"&&(oe.visible=!1)),oe.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.y*=-1:oe.tag==="bwd"&&(oe.visible=!1)),oe.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.z*=-1:oe.tag==="bwd"&&(oe.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(Ce),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(Ce).invert()),oe.name.search("E")!==-1&&oe.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),oe.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion)),oe.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion)),oe.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion))),oe.visible=oe.visible&&(oe.name.indexOf("X")===-1||this.showX),oe.visible=oe.visible&&(oe.name.indexOf("Y")===-1||this.showY),oe.visible=oe.visible&&(oe.name.indexOf("Z")===-1||this.showZ),oe.visible=oe.visible&&(oe.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),oe.material.tempOpacity=oe.material.tempOpacity||oe.material.opacity,oe.material.tempColor=oe.material.tempColor||oe.material.color.clone(),oe.material.color.copy(oe.material.tempColor),oe.material.opacity=oe.material.tempOpacity,this.enabled?this.axis&&(oe.name===this.axis?(oe.material.opacity=1,oe.material.color.lerp(new o.Color(1,1,1),.5)):this.axis.split("").some(function(Te){return oe.name===Te})?(oe.material.opacity=1,oe.material.color.lerp(new o.Color(1,1,1),.5)):(oe.material.opacity*=.25,oe.material.color.lerp(new o.Color(1,1,1),.5))):(oe.material.opacity*=.5,oe.material.color.lerp(new o.Color(1,1,1),.5))}super.updateMatrixWorld()});const t=new o.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:o.DoubleSide,fog:!1,toneMapped:!1}),r=new o.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),s=t.clone();s.opacity=.15;const c=t.clone();c.opacity=.33;const p=t.clone();p.color.set(16711680);const h=t.clone();h.color.set(65280);const g=t.clone();g.color.set(255);const y=t.clone();y.opacity=.25;const _=y.clone();_.color.set(16776960);const b=y.clone();b.color.set(65535);const T=y.clone();T.color.set(16711935),t.clone().color.set(16776960);const F=r.clone();F.color.set(16711680);const G=r.clone();G.color.set(65280);const L=r.clone();L.color.set(255);const O=r.clone();O.color.set(65535);const P=r.clone();P.color.set(16711935);const D=r.clone();D.color.set(16776960);const z=r.clone();z.color.set(7895160);const H=D.clone();H.opacity=.25;const Q=new o.CylinderGeometry(0,.05,.2,12,1,!1),W=new o.BoxGeometry(.125,.125,.125),Y=new o.BufferGeometry;Y.setAttribute("position",new o.Float32BufferAttribute([0,0,0,1,0,0],3));const K=(Ye,Ce)=>{const Ee=new o.BufferGeometry,_e=[];for(let oe=0;oe<=64*Ce;++oe)_e.push(0,Math.cos(oe/32*Math.PI)*Ye,Math.sin(oe/32*Math.PI)*Ye);return Ee.setAttribute("position",new o.Float32BufferAttribute(_e,3)),Ee},ie=()=>{const Ye=new o.BufferGeometry;return Ye.setAttribute("position",new o.Float32BufferAttribute([0,0,0,1,1,1],3)),Ye},ce={X:[[new o.Mesh(Q,p),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new o.Mesh(Q,p),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new o.Line(Y,F)]],Y:[[new o.Mesh(Q,h),[0,1,0],null,null,"fwd"],[new o.Mesh(Q,h),[0,1,0],[Math.PI,0,0],null,"bwd"],[new o.Line(Y,G),null,[0,0,Math.PI/2]]],Z:[[new o.Mesh(Q,g),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new o.Mesh(Q,g),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new o.Line(Y,L),null,[0,-Math.PI/2,0]]],XYZ:[[new o.Mesh(new o.OctahedronGeometry(.1,0),y.clone()),[0,0,0],[0,0,0]]],XY:[[new o.Mesh(new o.PlaneGeometry(.295,.295),_.clone()),[.15,.15,0]],[new o.Line(Y,D),[.18,.3,0],null,[.125,1,1]],[new o.Line(Y,D),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.Mesh(new o.PlaneGeometry(.295,.295),b.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new o.Line(Y,O),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new o.Line(Y,O),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.Mesh(new o.PlaneGeometry(.295,.295),T.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new o.Line(Y,P),[.18,0,.3],null,[.125,1,1]],[new o.Line(Y,P),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},ge={X:[[new o.Mesh(new o.CylinderGeometry(.2,0,1,4,1,!1),s),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new o.Mesh(new o.CylinderGeometry(.2,0,1,4,1,!1),s),[0,.6,0]]],Z:[[new o.Mesh(new o.CylinderGeometry(.2,0,1,4,1,!1),s),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new o.Mesh(new o.OctahedronGeometry(.2,0),s)]],XY:[[new o.Mesh(new o.PlaneGeometry(.4,.4),s),[.2,.2,0]]],YZ:[[new o.Mesh(new o.PlaneGeometry(.4,.4),s),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new o.Mesh(new o.PlaneGeometry(.4,.4),s),[.2,0,.2],[-Math.PI/2,0,0]]]},ae={START:[[new o.Mesh(new o.OctahedronGeometry(.01,2),c),null,null,null,"helper"]],END:[[new o.Mesh(new o.OctahedronGeometry(.01,2),c),null,null,null,"helper"]],DELTA:[[new o.Line(ie(),c),null,null,null,"helper"]],X:[[new o.Line(Y,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.Line(Y,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.Line(Y,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},xe={X:[[new o.Line(K(1,.5),F)],[new o.Mesh(new o.OctahedronGeometry(.04,0),p),[0,0,.99],null,[1,3,1]]],Y:[[new o.Line(K(1,.5),G),null,[0,0,-Math.PI/2]],[new o.Mesh(new o.OctahedronGeometry(.04,0),h),[0,0,.99],null,[3,1,1]]],Z:[[new o.Line(K(1,.5),L),null,[0,Math.PI/2,0]],[new o.Mesh(new o.OctahedronGeometry(.04,0),g),[.99,0,0],null,[1,3,1]]],E:[[new o.Line(K(1.25,1),H),null,[0,Math.PI/2,0]],[new o.Mesh(new o.CylinderGeometry(.03,0,.15,4,1,!1),H),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new o.Mesh(new o.CylinderGeometry(.03,0,.15,4,1,!1),H),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new o.Mesh(new o.CylinderGeometry(.03,0,.15,4,1,!1),H),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new o.Mesh(new o.CylinderGeometry(.03,0,.15,4,1,!1),H),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new o.Line(K(1,1),z),null,[0,Math.PI/2,0]]]},ve={AXIS:[[new o.Line(Y,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Be={X:[[new o.Mesh(new o.TorusGeometry(1,.1,4,24),s),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new o.Mesh(new o.TorusGeometry(1,.1,4,24),s),[0,0,0],[Math.PI/2,0,0]]],Z:[[new o.Mesh(new o.TorusGeometry(1,.1,4,24),s),[0,0,0],[0,0,-Math.PI/2]]],E:[[new o.Mesh(new o.TorusGeometry(1.25,.1,2,24),s)]],XYZE:[[new o.Mesh(new o.SphereGeometry(.7,10,8),s)]]},Ue={X:[[new o.Mesh(W,p),[.8,0,0],[0,0,-Math.PI/2]],[new o.Line(Y,F),null,null,[.8,1,1]]],Y:[[new o.Mesh(W,h),[0,.8,0]],[new o.Line(Y,G),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new o.Mesh(W,g),[0,0,.8],[Math.PI/2,0,0]],[new o.Line(Y,L),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new o.Mesh(W,_),[.85,.85,0],null,[2,2,.2]],[new o.Line(Y,D),[.855,.98,0],null,[.125,1,1]],[new o.Line(Y,D),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.Mesh(W,b),[0,.85,.85],null,[.2,2,2]],[new o.Line(Y,O),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new o.Line(Y,O),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.Mesh(W,T),[.85,0,.85],null,[2,.2,2]],[new o.Line(Y,P),[.855,0,.98],null,[.125,1,1]],[new o.Line(Y,P),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new o.Mesh(new o.BoxGeometry(.125,.125,.125),y.clone()),[1.1,0,0]]],XYZY:[[new o.Mesh(new o.BoxGeometry(.125,.125,.125),y.clone()),[0,1.1,0]]],XYZZ:[[new o.Mesh(new o.BoxGeometry(.125,.125,.125),y.clone()),[0,0,1.1]]]},Ie={X:[[new o.Mesh(new o.CylinderGeometry(.2,0,.8,4,1,!1),s),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new o.Mesh(new o.CylinderGeometry(.2,0,.8,4,1,!1),s),[0,.5,0]]],Z:[[new o.Mesh(new o.CylinderGeometry(.2,0,.8,4,1,!1),s),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new o.Mesh(W,s),[.85,.85,0],null,[3,3,.2]]],YZ:[[new o.Mesh(W,s),[0,.85,.85],null,[.2,3,3]]],XZ:[[new o.Mesh(W,s),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new o.Mesh(new o.BoxGeometry(.2,.2,.2),s),[1.1,0,0]]],XYZY:[[new o.Mesh(new o.BoxGeometry(.2,.2,.2),s),[0,1.1,0]]],XYZZ:[[new o.Mesh(new o.BoxGeometry(.2,.2,.2),s),[0,0,1.1]]]},Ne={X:[[new o.Line(Y,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.Line(Y,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.Line(Y,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Le=Ye=>{const Ce=new o.Object3D;for(let Ee in Ye)for(let _e=Ye[Ee].length;_e--;){const oe=Ye[Ee][_e][0].clone(),me=Ye[Ee][_e][1],Te=Ye[Ee][_e][2],ye=Ye[Ee][_e][3],ze=Ye[Ee][_e][4];oe.name=Ee,oe.tag=ze,me&&oe.position.set(me[0],me[1],me[2]),Te&&oe.rotation.set(Te[0],Te[1],Te[2]),ye&&oe.scale.set(ye[0],ye[1],ye[2]),oe.updateMatrix();const Mt=oe.geometry.clone();Mt.applyMatrix4(oe.matrix),oe.geometry=Mt,oe.renderOrder=1/0,oe.position.set(0,0,0),oe.rotation.set(0,0,0),oe.scale.set(1,1,1),Ce.add(oe)}return Ce};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Le(ce)),this.add(this.gizmo.rotate=Le(xe)),this.add(this.gizmo.scale=Le(Ue)),this.add(this.picker.translate=Le(ge)),this.add(this.picker.rotate=Le(Be)),this.add(this.picker.scale=Le(Ie)),this.add(this.helper.translate=Le(ae)),this.add(this.helper.rotate=Le(ve)),this.add(this.helper.scale=Le(Ne)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class se extends o.Mesh{constructor(){super(new o.PlaneGeometry(1e5,1e5,2,2),new o.MeshBasicMaterial({visible:!1,wireframe:!0,side:o.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),J(this,"isTransformControlsPlane",!0),J(this,"type","TransformControlsPlane"),J(this,"unitX",new o.Vector3(1,0,0)),J(this,"unitY",new o.Vector3(0,1,0)),J(this,"unitZ",new o.Vector3(0,0,1)),J(this,"tempVector",new o.Vector3),J(this,"dirVector",new o.Vector3),J(this,"alignVector",new o.Vector3),J(this,"tempMatrix",new o.Matrix4),J(this,"identityQuaternion",new o.Quaternion),J(this,"cameraQuaternion",new o.Quaternion),J(this,"worldPosition",new o.Vector3),J(this,"worldQuaternion",new o.Quaternion),J(this,"eye",new o.Vector3),J(this,"axis",null),J(this,"mode","translate"),J(this,"space","world"),J(this,"updateMatrixWorld",()=>{let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),this.unitX.set(1,0,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}const ne=d.forwardRef((b,_)=>{var T=b,{children:i,domElement:t,onChange:r,onMouseDown:s,onMouseUp:c,onObjectChange:p,object:h,makeDefault:g}=T,y=An(T,["children","domElement","onChange","onMouseDown","onMouseUp","onObjectChange","object","makeDefault"]);const R=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],Ue=y,{camera:F}=Ue,G=An(Ue,["camera"]),L=Rf()(G,R),O=N()(G,R),P=(0,E.z)(Ie=>Ie.controls),D=(0,E.z)(Ie=>Ie.gl),z=(0,E.z)(Ie=>Ie.events),H=(0,E.z)(Ie=>Ie.camera),Q=(0,E.z)(Ie=>Ie.invalidate),W=(0,E.z)(Ie=>Ie.get),Y=(0,E.z)(Ie=>Ie.set),K=F||H,ie=t||z.connected||D.domElement,ce=d.useMemo(()=>new re(K,ie),[K,ie]),ge=d.useRef();d.useLayoutEffect(()=>(h?ce.attach(h instanceof o.Object3D?h:h.current):ge.current instanceof o.Object3D&&ce.attach(ge.current),()=>void ce.detach()),[h,i,ce]),d.useEffect(()=>{if(P){const Ie=Ne=>P.enabled=!Ne.value;return ce.addEventListener("dragging-changed",Ie),()=>ce.removeEventListener("dragging-changed",Ie)}},[ce,P]);const ae=d.useRef(),xe=d.useRef(),ve=d.useRef(),Be=d.useRef();return d.useLayoutEffect(()=>void(ae.current=r),[r]),d.useLayoutEffect(()=>void(xe.current=s),[s]),d.useLayoutEffect(()=>void(ve.current=c),[c]),d.useLayoutEffect(()=>void(Be.current=p),[p]),d.useEffect(()=>{const Ie=Ce=>{Q(),ae.current==null||ae.current(Ce)},Ne=Ce=>xe.current==null?void 0:xe.current(Ce),Le=Ce=>ve.current==null?void 0:ve.current(Ce),Ye=Ce=>Be.current==null?void 0:Be.current(Ce);return ce.addEventListener("change",Ie),ce.addEventListener("mouseDown",Ne),ce.addEventListener("mouseUp",Le),ce.addEventListener("objectChange",Ye),()=>{ce.removeEventListener("change",Ie),ce.removeEventListener("mouseDown",Ne),ce.removeEventListener("mouseUp",Le),ce.removeEventListener("objectChange",Ye)}},[Q,ce]),d.useEffect(()=>{if(g){const Ie=W().controls;return Y({controls:ce}),()=>Y({controls:Ie})}},[g,ce]),ce?d.createElement(d.Fragment,null,d.createElement("primitive",(0,w.Z)({ref:_,object:ce},L)),d.createElement("group",(0,w.Z)({ref:ge},O),i)):null});var be=A(25108),he=Object.defineProperty,Se=(i,t,r)=>t in i?he(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Oe=(i,t,r)=>(Se(i,typeof t!="symbol"?t+"":t,r),r);const Qe=new o.Euler(0,0,0,"YXZ"),Ze=new o.Vector3,ht={type:"change"},we={type:"lock"},Ve={type:"unlock"},$t=Math.PI/2;class bn extends o.EventDispatcher{constructor(t,r){super(),Oe(this,"camera"),Oe(this,"domElement"),Oe(this,"isLocked"),Oe(this,"minPolarAngle"),Oe(this,"maxPolarAngle"),Oe(this,"pointerSpeed"),Oe(this,"onMouseMove",s=>{if(!this.domElement||this.isLocked===!1)return;const c=s.movementX||s.mozMovementX||s.webkitMovementX||0,p=s.movementY||s.mozMovementY||s.webkitMovementY||0;Qe.setFromQuaternion(this.camera.quaternion),Qe.y-=c*.002*this.pointerSpeed,Qe.x-=p*.002*this.pointerSpeed,Qe.x=Math.max($t-this.maxPolarAngle,Math.min($t-this.minPolarAngle,Qe.x)),this.camera.quaternion.setFromEuler(Qe),this.dispatchEvent(ht)}),Oe(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(we),this.isLocked=!0):(this.dispatchEvent(Ve),this.isLocked=!1))}),Oe(this,"onPointerlockError",()=>{be.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),Oe(this,"connect",s=>{this.domElement=s||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),Oe(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),Oe(this,"dispose",()=>{this.disconnect()}),Oe(this,"getObject",()=>this.camera),Oe(this,"direction",new o.Vector3(0,0,-1)),Oe(this,"getDirection",s=>s.copy(this.direction).applyQuaternion(this.camera.quaternion)),Oe(this,"moveForward",s=>{Ze.setFromMatrixColumn(this.camera.matrix,0),Ze.crossVectors(this.camera.up,Ze),this.camera.position.addScaledVector(Ze,s)}),Oe(this,"moveRight",s=>{Ze.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Ze,s)}),Oe(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),Oe(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=t,this.domElement=r,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,r&&this.connect(r)}}const Nt=d.forwardRef((_,y)=>{var b=_,{domElement:i,selector:t,onChange:r,onLock:s,onUnlock:c,enabled:p=!0,makeDefault:h}=b,g=An(b,["domElement","selector","onChange","onLock","onUnlock","enabled","makeDefault"]);const Y=g,{camera:T}=Y,R=An(Y,["camera"]),F=(0,E.z)(K=>K.setEvents),G=(0,E.z)(K=>K.gl),L=(0,E.z)(K=>K.camera),O=(0,E.z)(K=>K.invalidate),P=(0,E.z)(K=>K.events),D=(0,E.z)(K=>K.get),z=(0,E.z)(K=>K.set),H=T||L,Q=i||P.connected||G.domElement,[W]=d.useState(()=>new bn(H));return d.useEffect(()=>{if(p){W.connect(Q);const K=D().events.compute;return F({compute(ie,ce){const ge=ce.size.width/2,ae=ce.size.height/2;ce.pointer.set(ge/ce.size.width*2-1,-(ae/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),()=>{W.disconnect(),F({compute:K})}}},[p,W]),d.useEffect(()=>{const K=ge=>{O(),r&&r(ge)};W.addEventListener("change",K),s&&W.addEventListener("lock",s),c&&W.addEventListener("unlock",c);const ie=()=>W.lock(),ce=t?Array.from(document.querySelectorAll(t)):[document];return ce.forEach(ge=>ge&&ge.addEventListener("click",ie)),()=>{W.removeEventListener("change",K),s&&W.addEventListener("lock",s),c&&W.addEventListener("unlock",c),ce.forEach(ge=>ge?ge.removeEventListener("click",ie):void 0)}},[r,s,c,t,W,O]),d.useEffect(()=>{if(h){const K=D().controls;return z({controls:W}),()=>z({controls:K})}},[h,W]),d.createElement("primitive",(0,w.Z)({ref:y,object:W},R))});var Vt=Object.defineProperty,en=(i,t,r)=>t in i?Vt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ht=(i,t,r)=>(en(i,typeof t!="symbol"?t+"":t,r),r);const un=new o.Vector3;class hn extends o.EventDispatcher{constructor(t,r){super(),Ht(this,"object"),Ht(this,"domElement"),Ht(this,"enabled",!0),Ht(this,"movementSpeed",1),Ht(this,"lookSpeed",.005),Ht(this,"lookVertical",!0),Ht(this,"autoForward",!1),Ht(this,"activeLook",!0),Ht(this,"heightSpeed",!1),Ht(this,"heightCoef",1),Ht(this,"heightMin",0),Ht(this,"heightMax",1),Ht(this,"constrainVertical",!1),Ht(this,"verticalMin",0),Ht(this,"verticalMax",Math.PI),Ht(this,"mouseDragOn",!1),Ht(this,"autoSpeedFactor",0),Ht(this,"mouseX",0),Ht(this,"mouseY",0),Ht(this,"moveForward",!1),Ht(this,"moveBackward",!1),Ht(this,"moveLeft",!1),Ht(this,"moveRight",!1),Ht(this,"moveUp",!1),Ht(this,"moveDown",!1),Ht(this,"viewHalfX",0),Ht(this,"viewHalfY",0),Ht(this,"lat",0),Ht(this,"lon",0),Ht(this,"lookDirection",new o.Vector3),Ht(this,"spherical",new o.Spherical),Ht(this,"target",new o.Vector3),Ht(this,"connect",s=>{s.setAttribute("tabindex","-1"),s.style.touchAction="none",s.addEventListener("contextmenu",this.contextmenu),s.addEventListener("mousemove",this.onMouseMove),s.addEventListener("mousedown",this.onMouseDown),s.addEventListener("mouseup",this.onMouseUp),this.domElement=s,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),Ht(this,"dispose",()=>{var s,c,p,h;(s=this.domElement)==null||s.removeEventListener("contextmenu",this.contextmenu),(c=this.domElement)==null||c.removeEventListener("mousedown",this.onMouseDown),(p=this.domElement)==null||p.removeEventListener("mousemove",this.onMouseMove),(h=this.domElement)==null||h.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),Ht(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),Ht(this,"onMouseDown",s=>{var c;if((c=this.domElement)==null||c.focus(),this.activeLook)switch(s.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),Ht(this,"onMouseUp",s=>{if(this.activeLook)switch(s.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),Ht(this,"onMouseMove",s=>{this.domElement&&(this.mouseX=s.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=s.pageY-this.domElement.offsetTop-this.viewHalfY)}),Ht(this,"onKeyDown",s=>{switch(s.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),Ht(this,"onKeyUp",s=>{switch(s.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),Ht(this,"lookAt",(s,c,p)=>(s instanceof o.Vector3?this.target.copy(s):c&&p&&this.target.set(s,c,p),this.object.lookAt(this.target),this.setOrientation(),this)),Ht(this,"update",s=>{if(!this.enabled)return;if(this.heightSpeed){const T=o.MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=s*(T*this.heightCoef)}else this.autoSpeedFactor=0;const c=s*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(c+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(c),this.moveLeft&&this.object.translateX(-c),this.moveRight&&this.object.translateX(c),this.moveUp&&this.object.translateY(c),this.moveDown&&this.object.translateY(-c);let p=s*this.lookSpeed;this.activeLook||(p=0);let h=1;this.constrainVertical&&(h=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*p,this.lookVertical&&(this.lat-=this.mouseY*p*h),this.lat=Math.max(-85,Math.min(85,this.lat));let g=o.MathUtils.degToRad(90-this.lat);const y=o.MathUtils.degToRad(this.lon);this.constrainVertical&&(g=o.MathUtils.mapLinear(g,0,Math.PI,this.verticalMin,this.verticalMax));const _=this.object.position;un.setFromSphericalCoords(1,g,y).add(_),this.object.lookAt(un)}),Ht(this,"contextmenu",s=>s.preventDefault()),Ht(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-o.MathUtils.radToDeg(this.spherical.phi),this.lon=o.MathUtils.radToDeg(this.spherical.theta)}),this.object=t,this.domElement=r,this.setOrientation(),r&&this.connect(r)}}const xn=d.forwardRef((c,s)=>{var p=c,{domElement:i,makeDefault:t}=p,r=An(p,["domElement","makeDefault"]);const h=(0,E.z)(F=>F.camera),g=(0,E.z)(F=>F.gl),y=(0,E.z)(F=>F.events),_=(0,E.z)(F=>F.get),b=(0,E.z)(F=>F.set),T=i||y.connected||g.domElement,[R]=d.useState(()=>new hn(h,T));return d.useEffect(()=>{if(t){const F=_().controls;return b({controls:R}),()=>b({controls:F})}},[t,R]),(0,E.A)((F,G)=>{R.update(G)},-1),R?d.createElement("primitive",(0,w.Z)({ref:s,object:R},r)):null});var mn=A(25108);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const mt={LEFT:1,RIGHT:2,MIDDLE:4},it=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),ir={NONE:0,IN:1,OUT:-1};function or(i){return i.isPerspectiveCamera}function cr(i){return i.isOrthographicCamera}const Lr=Math.PI*2,Zr=Math.PI/2,Vr=1e-5,$i=Math.PI/180;function po(i,t,r){return Math.max(t,Math.min(r,i))}function Ar(i,t=Vr){return Math.abs(i)<t}function nt(i,t,r=Vr){return Ar(i-t,r)}function Zn(i,t){return Math.round(i/t)*t}function dn(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function zn(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function _n(i,t,r,s,c=1/0,p){s=Math.max(1e-4,s);const h=2/s,g=h*p,y=1/(1+g+.48*g*g+.235*g*g*g);let _=i-t;const b=t,T=c*s;_=po(_,-T,T),t=i-_;const R=(r.value+h*_)*p;r.value=(r.value-h*R)*y;let F=t+(_+R)*y;return b-i>0==F>b&&(F=b,r.value=(F-b)/p),F}function Ur(i,t,r,s,c=1/0,p,h){s=Math.max(1e-4,s);const g=2/s,y=g*p,_=1/(1+y+.48*y*y+.235*y*y*y);let b=t.x,T=t.y,R=t.z,F=i.x-b,G=i.y-T,L=i.z-R;const O=b,P=T,D=R,z=c*s,H=z*z,Q=F*F+G*G+L*L;if(Q>H){const Be=Math.sqrt(Q);F=F/Be*z,G=G/Be*z,L=L/Be*z}b=i.x-F,T=i.y-G,R=i.z-L;const W=(r.x+g*F)*p,Y=(r.y+g*G)*p,K=(r.z+g*L)*p;r.x=(r.x-g*W)*_,r.y=(r.y-g*Y)*_,r.z=(r.z-g*K)*_,h.x=b+(F+W)*_,h.y=T+(G+Y)*_,h.z=R+(L+K)*_;const ie=O-i.x,ce=P-i.y,ge=D-i.z,ae=h.x-O,xe=h.y-P,ve=h.z-D;return ie*ae+ce*xe+ge*ve>0&&(h.x=O,h.y=P,h.z=D,r.x=(h.x-O)/p,r.y=(h.y-P)/p,r.z=(h.z-D)/p),h}function xr(i,t){t.set(0,0),i.forEach(r=>{t.x+=r.clientX,t.y+=r.clientY}),t.x/=i.length,t.y/=i.length}function Tr(i,t){return cr(i)?(mn.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class _i{constructor(){this._listeners={}}addEventListener(t,r){const s=this._listeners;s[t]===void 0&&(s[t]=[]),s[t].indexOf(r)===-1&&s[t].push(r)}hasEventListener(t,r){const s=this._listeners;return s[t]!==void 0&&s[t].indexOf(r)!==-1}removeEventListener(t,r){const c=this._listeners[t];if(c!==void 0){const p=c.indexOf(r);p!==-1&&c.splice(p,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const s=this._listeners[t.type];if(s!==void 0){t.target=this;const c=s.slice(0);for(let p=0,h=c.length;p<h;p++)c[p].call(this,t)}}}const eo="2.7.0",Zo=1/8,tt=typeof window!="undefined",Pe=tt&&/Mac/.test(navigator.platform),on=!(tt&&"PointerEvent"in window);let Zt,Gn,sr,Pr,Un,Ft,er,Nr,Qr,vr,_r,Ei,zo,vt,Kn,Kt,Vn,fr,so,ls,na,Gc,$o;class Ol extends _i{static install(t){Zt=t.THREE,Gn=Object.freeze(new Zt.Vector3(0,0,0)),sr=Object.freeze(new Zt.Vector3(0,1,0)),Pr=Object.freeze(new Zt.Vector3(0,0,1)),Un=new Zt.Vector2,Ft=new Zt.Vector3,er=new Zt.Vector3,Nr=new Zt.Vector3,Qr=new Zt.Vector3,vr=new Zt.Vector3,_r=new Zt.Vector3,Ei=new Zt.Vector3,zo=new Zt.Vector3,vt=new Zt.Vector3,Kn=new Zt.Spherical,Kt=new Zt.Spherical,Vn=new Zt.Box3,fr=new Zt.Box3,so=new Zt.Sphere,ls=new Zt.Quaternion,na=new Zt.Quaternion,Gc=new Zt.Matrix4,$o=new Zt.Raycaster}static get ACTION(){return it}constructor(t,r){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=it.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=ir.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Zt.Vector3,this._focalOffsetVelocity=new Zt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(H,Q,W)=>{let Y,K;if(or(this._camera)){const ie=Ft.copy(this._camera.position).sub(this._target),ce=this._camera.getEffectiveFOV()*$i,ge=ie.length()*Math.tan(ce*.5);Y=this.truckSpeed*H*ge/this._elementRect.height,K=this.truckSpeed*Q*ge/this._elementRect.height}else if(cr(this._camera)){const ie=this._camera;Y=H*(ie.right-ie.left)/ie.zoom/this._elementRect.width,K=Q*(ie.top-ie.bottom)/ie.zoom/this._elementRect.height}else return;this.verticalDragToForward?(W?this.setFocalOffset(this._focalOffsetEnd.x+Y,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(Y,0,!0),this.forward(-K,!0)):W?this.setFocalOffset(this._focalOffsetEnd.x+Y,this._focalOffsetEnd.y+K,this._focalOffsetEnd.z,!0):this.truck(Y,K,!0)},this._rotateInternal=(H,Q)=>{const W=Lr*this.azimuthRotateSpeed*H/this._elementRect.height,Y=Lr*this.polarRotateSpeed*Q/this._elementRect.height;this.rotate(W,Y,!0)},this._dollyInternal=(H,Q,W)=>{const Y=Math.pow(.95,-H*this.dollySpeed),K=this._sphericalEnd.radius,ie=this._sphericalEnd.radius*Y,ce=Zt.MathUtils.clamp(ie,this.minDistance,this.maxDistance),ge=ce-ie;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(ie,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(ge,!0),this._dollyToNoClamp(ce,!0)):this._dollyToNoClamp(ce,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?ie:ce)-K,this._dollyControlCoord.set(Q,W)),this._lastDollyDirection=Math.sign(-H)},this._zoomInternal=(H,Q,W)=>{const Y=Math.pow(.95,H*this.dollySpeed),K=this._zoom,ie=this._zoom*Y;this.zoomTo(ie,!0),this.dollyToCursor&&(this._changedZoom+=ie-K,this._dollyControlCoord.set(Q,W))},typeof Zt=="undefined"&&mn.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new Zt.Quaternion().setFromUnitVectors(this._camera.up,sr),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=it.NONE,this._target=new Zt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Zt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Zt.Spherical().setFromVector3(Ft.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Zt.Vector3,new Zt.Vector3,new Zt.Vector3,new Zt.Vector3],this._updateNearPlaneCorners(),this._boundary=new Zt.Box3(new Zt.Vector3(-1/0,-1/0,-1/0),new Zt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Zt.Vector2,this.mouseButtons={left:it.ROTATE,middle:it.DOLLY,right:it.TRUCK,wheel:or(this._camera)?it.DOLLY:cr(this._camera)?it.ZOOM:it.NONE},this.touches={one:it.TOUCH_ROTATE,two:or(this._camera)?it.TOUCH_DOLLY_TRUCK:cr(this._camera)?it.TOUCH_ZOOM_TRUCK:it.NONE,three:it.TOUCH_TRUCK};const s=new Zt.Vector2,c=new Zt.Vector2,p=new Zt.Vector2,h=H=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const Y=this._domElement.getBoundingClientRect(),K=H.clientX/Y.width,ie=H.clientY/Y.height;if(K<this._interactiveArea.left||K>this._interactiveArea.right||ie<this._interactiveArea.top||ie>this._interactiveArea.bottom)return}const Q=H.pointerType!=="mouse"?null:(H.buttons&mt.LEFT)===mt.LEFT?mt.LEFT:(H.buttons&mt.MIDDLE)===mt.MIDDLE?mt.MIDDLE:(H.buttons&mt.RIGHT)===mt.RIGHT?mt.RIGHT:null;if(Q!==null){const Y=this._findPointerByMouseButton(Q);Y&&this._disposePointer(Y)}if((H.buttons&mt.LEFT)===mt.LEFT&&this._lockedPointer)return;const W={pointerId:H.pointerId,clientX:H.clientX,clientY:H.clientY,deltaX:0,deltaY:0,mouseButton:Q};this._activePointers.push(W),this._domElement.ownerDocument.removeEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.addEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",b),this._isDragging=!0,L(H)},g=H=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const Y=this._domElement.getBoundingClientRect(),K=H.clientX/Y.width,ie=H.clientY/Y.height;if(K<this._interactiveArea.left||K>this._interactiveArea.right||ie<this._interactiveArea.top||ie>this._interactiveArea.bottom)return}const Q=(H.buttons&mt.LEFT)===mt.LEFT?mt.LEFT:(H.buttons&mt.MIDDLE)===mt.MIDDLE?mt.MIDDLE:(H.buttons&mt.RIGHT)===mt.RIGHT?mt.RIGHT:null;if(Q!==null){const Y=this._findPointerByMouseButton(Q);Y&&this._disposePointer(Y)}const W={pointerId:1,clientX:H.clientX,clientY:H.clientY,deltaX:0,deltaY:0,mouseButton:(H.buttons&mt.LEFT)===mt.LEFT?mt.LEFT:(H.buttons&mt.MIDDLE)===mt.LEFT?mt.MIDDLE:(H.buttons&mt.RIGHT)===mt.LEFT?mt.RIGHT:null};this._activePointers.push(W),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.addEventListener("mousemove",_),this._domElement.ownerDocument.addEventListener("mouseup",T),this._isDragging=!0,L(H)},y=H=>{H.cancelable&&H.preventDefault();const Q=H.pointerId,W=this._lockedPointer||this._findPointerById(Q);if(W){if(W.clientX=H.clientX,W.clientY=H.clientY,W.deltaX=H.movementX,W.deltaY=H.movementY,this._state=0,H.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(H.buttons&mt.LEFT)===mt.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(H.buttons&mt.MIDDLE)===mt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(H.buttons&mt.RIGHT)===mt.RIGHT&&(this._state=this._state|this.mouseButtons.right);O()}},_=H=>{const Q=this._lockedPointer||this._findPointerById(1);Q&&(Q.clientX=H.clientX,Q.clientY=H.clientY,Q.deltaX=H.movementX,Q.deltaY=H.movementY,this._state=0,(this._lockedPointer||(H.buttons&mt.LEFT)===mt.LEFT)&&(this._state=this._state|this.mouseButtons.left),(H.buttons&mt.MIDDLE)===mt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(H.buttons&mt.RIGHT)===mt.RIGHT&&(this._state=this._state|this.mouseButtons.right),O())},b=H=>{const Q=this._findPointerById(H.pointerId);if(!(Q&&Q===this._lockedPointer)){if(Q&&this._disposePointer(Q),H.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=it.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=it.NONE;P()}},T=()=>{const H=this._findPointerById(1);H&&H===this._lockedPointer||(H&&this._disposePointer(H),this._state=it.NONE,P())};let R=-1;const F=H=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===it.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const ie=this._domElement.getBoundingClientRect(),ce=H.clientX/ie.width,ge=H.clientY/ie.height;if(ce<this._interactiveArea.left||ce>this._interactiveArea.right||ge<this._interactiveArea.top||ge>this._interactiveArea.bottom)return}if(H.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===it.ROTATE||this.mouseButtons.wheel===it.TRUCK){const ie=performance.now();R-ie<1e3&&this._getClientRect(this._elementRect),R=ie}const Q=Pe?-1:-3,W=H.deltaMode===1?H.deltaY/Q:H.deltaY/(Q*10),Y=this.dollyToCursor?(H.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,K=this.dollyToCursor?(H.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case it.ROTATE:{this._rotateInternal(H.deltaX,H.deltaY),this._isUserControllingRotate=!0;break}case it.TRUCK:{this._truckInternal(H.deltaX,H.deltaY,!1),this._isUserControllingTruck=!0;break}case it.OFFSET:{this._truckInternal(H.deltaX,H.deltaY,!0),this._isUserControllingOffset=!0;break}case it.DOLLY:{this._dollyInternal(-W,Y,K),this._isUserControllingDolly=!0;break}case it.ZOOM:{this._zoomInternal(-W,Y,K),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},G=H=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Ol.ACTION.NONE){const Q=H instanceof PointerEvent?H.pointerId:(H instanceof MouseEvent,0),W=this._findPointerById(Q);W&&this._disposePointer(W),this._domElement.ownerDocument.removeEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("mouseup",T);return}H.preventDefault()}},L=H=>{if(!this._enabled)return;if(xr(this._activePointers,Un),this._getClientRect(this._elementRect),s.copy(Un),c.copy(Un),this._activePointers.length>=2){const W=Un.x-this._activePointers[1].clientX,Y=Un.y-this._activePointers[1].clientY,K=Math.sqrt(W*W+Y*Y);p.set(0,K);const ie=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,ce=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;c.set(ie,ce)}if(this._state=0,!H)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in H&&H.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(H.buttons&mt.LEFT)===mt.LEFT&&(this._state=this._state|this.mouseButtons.left),(H.buttons&mt.MIDDLE)===mt.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(H.buttons&mt.RIGHT)===mt.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&it.ROTATE)===it.ROTATE||(this._state&it.TOUCH_ROTATE)===it.TOUCH_ROTATE||(this._state&it.TOUCH_DOLLY_ROTATE)===it.TOUCH_DOLLY_ROTATE||(this._state&it.TOUCH_ZOOM_ROTATE)===it.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&it.TRUCK)===it.TRUCK||(this._state&it.TOUCH_TRUCK)===it.TOUCH_TRUCK||(this._state&it.TOUCH_DOLLY_TRUCK)===it.TOUCH_DOLLY_TRUCK||(this._state&it.TOUCH_ZOOM_TRUCK)===it.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&it.DOLLY)===it.DOLLY||(this._state&it.TOUCH_DOLLY)===it.TOUCH_DOLLY||(this._state&it.TOUCH_DOLLY_TRUCK)===it.TOUCH_DOLLY_TRUCK||(this._state&it.TOUCH_DOLLY_OFFSET)===it.TOUCH_DOLLY_OFFSET||(this._state&it.TOUCH_DOLLY_ROTATE)===it.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&it.ZOOM)===it.ZOOM||(this._state&it.TOUCH_ZOOM)===it.TOUCH_ZOOM||(this._state&it.TOUCH_ZOOM_TRUCK)===it.TOUCH_ZOOM_TRUCK||(this._state&it.TOUCH_ZOOM_OFFSET)===it.TOUCH_ZOOM_OFFSET||(this._state&it.TOUCH_ZOOM_ROTATE)===it.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&it.OFFSET)===it.OFFSET||(this._state&it.TOUCH_OFFSET)===it.TOUCH_OFFSET||(this._state&it.TOUCH_DOLLY_OFFSET)===it.TOUCH_DOLLY_OFFSET||(this._state&it.TOUCH_ZOOM_OFFSET)===it.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},O=()=>{if(!this._enabled)return;xr(this._activePointers,Un);const Q=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,W=Q?-Q.deltaX:c.x-Un.x,Y=Q?-Q.deltaY:c.y-Un.y;if(c.copy(Un),((this._state&it.ROTATE)===it.ROTATE||(this._state&it.TOUCH_ROTATE)===it.TOUCH_ROTATE||(this._state&it.TOUCH_DOLLY_ROTATE)===it.TOUCH_DOLLY_ROTATE||(this._state&it.TOUCH_ZOOM_ROTATE)===it.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(W,Y),this._isUserControllingRotate=!0),(this._state&it.DOLLY)===it.DOLLY||(this._state&it.ZOOM)===it.ZOOM){const K=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,ie=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0,ce=this.dollyDragInverted?-1:1;(this._state&it.DOLLY)===it.DOLLY?(this._dollyInternal(ce*Y*Zo,K,ie),this._isUserControllingDolly=!0):(this._zoomInternal(ce*Y*Zo,K,ie),this._isUserControllingZoom=!0)}if((this._state&it.TOUCH_DOLLY)===it.TOUCH_DOLLY||(this._state&it.TOUCH_ZOOM)===it.TOUCH_ZOOM||(this._state&it.TOUCH_DOLLY_TRUCK)===it.TOUCH_DOLLY_TRUCK||(this._state&it.TOUCH_ZOOM_TRUCK)===it.TOUCH_ZOOM_TRUCK||(this._state&it.TOUCH_DOLLY_OFFSET)===it.TOUCH_DOLLY_OFFSET||(this._state&it.TOUCH_ZOOM_OFFSET)===it.TOUCH_ZOOM_OFFSET||(this._state&it.TOUCH_DOLLY_ROTATE)===it.TOUCH_DOLLY_ROTATE||(this._state&it.TOUCH_ZOOM_ROTATE)===it.TOUCH_ZOOM_ROTATE){const K=Un.x-this._activePointers[1].clientX,ie=Un.y-this._activePointers[1].clientY,ce=Math.sqrt(K*K+ie*ie),ge=p.y-ce;p.set(0,ce);const ae=this.dollyToCursor?(c.x-this._elementRect.x)/this._elementRect.width*2-1:0,xe=this.dollyToCursor?(c.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&it.TOUCH_DOLLY)===it.TOUCH_DOLLY||(this._state&it.TOUCH_DOLLY_ROTATE)===it.TOUCH_DOLLY_ROTATE||(this._state&it.TOUCH_DOLLY_TRUCK)===it.TOUCH_DOLLY_TRUCK||(this._state&it.TOUCH_DOLLY_OFFSET)===it.TOUCH_DOLLY_OFFSET?(this._dollyInternal(ge*Zo,ae,xe),this._isUserControllingDolly=!0):(this._zoomInternal(ge*Zo,ae,xe),this._isUserControllingZoom=!0)}((this._state&it.TRUCK)===it.TRUCK||(this._state&it.TOUCH_TRUCK)===it.TOUCH_TRUCK||(this._state&it.TOUCH_DOLLY_TRUCK)===it.TOUCH_DOLLY_TRUCK||(this._state&it.TOUCH_ZOOM_TRUCK)===it.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(W,Y,!1),this._isUserControllingTruck=!0),((this._state&it.OFFSET)===it.OFFSET||(this._state&it.TOUCH_OFFSET)===it.TOUCH_OFFSET||(this._state&it.TOUCH_DOLLY_OFFSET)===it.TOUCH_DOLLY_OFFSET||(this._state&it.TOUCH_ZOOM_OFFSET)===it.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(W,Y,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},P=()=>{xr(this._activePointers,Un),c.copy(Un),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mouseup",T),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",D),this._domElement.ownerDocument.addEventListener("pointerlockerror",z),this._domElement.ownerDocument.addEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",b),L())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",D),this._domElement.ownerDocument.removeEventListener("pointerlockerror",z))};const D=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},z=()=>{this.unlockPointer()};this._addAllEventListeners=H=>{this._domElement=H,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",h),on&&this._domElement.addEventListener("mousedown",g),this._domElement.addEventListener("pointercancel",b),this._domElement.addEventListener("wheel",F,{passive:!1}),this._domElement.addEventListener("contextmenu",G)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",h),this._domElement.removeEventListener("mousedown",g),this._domElement.removeEventListener("pointercancel",b),this._domElement.removeEventListener("wheel",F,{passive:!1}),this._domElement.removeEventListener("contextmenu",G),this._domElement.ownerDocument.removeEventListener("pointermove",y,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.removeEventListener("pointerlockchange",D),this._domElement.ownerDocument.removeEventListener("pointerlockerror",z))},this.cancel=()=>{this._state!==it.NONE&&(this._state=it.NONE,this._activePointers.length=0,P())},r&&this.connect(r),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=po(t.width,0,1),this._interactiveArea.height=po(t.height,0,1),this._interactiveArea.x=po(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=po(t.x,0,1-this._interactiveArea.height)}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}rotate(t,r,s=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,s)}rotateAzimuthTo(t,r=!1){return this.rotateTo(t,this._sphericalEnd.phi,r)}rotatePolarTo(t,r=!1){return this.rotateTo(this._sphericalEnd.theta,t,r)}rotateTo(t,r,s=!1){this._isUserControllingRotate=!1;const c=po(t,this.minAzimuthAngle,this.maxAzimuthAngle),p=po(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=c,this._sphericalEnd.phi=p,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,s||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const h=!s||nt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&nt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(h)}dolly(t,r=!1){return this.dollyTo(this._sphericalEnd.radius-t,r)}dollyTo(t,r=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=ir.NONE,this._changedDolly=0,this._dollyToNoClamp(po(t,this.minDistance,this.maxDistance),r)}_dollyToNoClamp(t,r=!1){const s=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const h=this._collisionTest(),g=nt(h,this._spherical.radius);if(!(s>t)&&g)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,h)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,r||(this._spherical.radius=this._sphericalEnd.radius);const p=!r||nt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}dollyInFixed(t,r=!1){this._targetEnd.add(this._getCameraDirection(Qr).multiplyScalar(t)),r||this._target.copy(this._targetEnd);const s=!r||nt(this._target.x,this._targetEnd.x,this.restThreshold)&&nt(this._target.y,this._targetEnd.y,this.restThreshold)&&nt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}zoom(t,r=!1){return this.zoomTo(this._zoomEnd+t,r)}zoomTo(t,r=!1){this._isUserControllingZoom=!1,this._zoomEnd=po(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,r||(this._zoom=this._zoomEnd);const s=!r||nt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(s)}pan(t,r,s=!1){return mn.warn("`pan` has been renamed to `truck`"),this.truck(t,r,s)}truck(t,r,s=!1){this._camera.updateMatrix(),vr.setFromMatrixColumn(this._camera.matrix,0),_r.setFromMatrixColumn(this._camera.matrix,1),vr.multiplyScalar(t),_r.multiplyScalar(-r);const c=Ft.copy(vr).add(_r),p=er.copy(this._targetEnd).add(c);return this.moveTo(p.x,p.y,p.z,s)}forward(t,r=!1){Ft.setFromMatrixColumn(this._camera.matrix,0),Ft.crossVectors(this._camera.up,Ft),Ft.multiplyScalar(t);const s=er.copy(this._targetEnd).add(Ft);return this.moveTo(s.x,s.y,s.z,r)}elevate(t,r=!1){return Ft.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+Ft.x,this._targetEnd.y+Ft.y,this._targetEnd.z+Ft.z,r)}moveTo(t,r,s,c=!1){this._isUserControllingTruck=!1;const p=Ft.set(t,r,s).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,p,this.boundaryFriction),this._needsUpdate=!0,c||this._target.copy(this._targetEnd);const h=!c||nt(this._target.x,this._targetEnd.x,this.restThreshold)&&nt(this._target.y,this._targetEnd.y,this.restThreshold)&&nt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(h)}lookInDirectionOf(t,r,s,c=!1){const g=Ft.set(t,r,s).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(g.x,g.y,g.z,c)}fitToBox(t,r,{cover:s=!1,paddingLeft:c=0,paddingRight:p=0,paddingBottom:h=0,paddingTop:g=0}={}){const y=[],_=t.isBox3?Vn.copy(t):Vn.setFromObject(t);_.isEmpty()&&(mn.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const b=Zn(this._sphericalEnd.theta,Zr),T=Zn(this._sphericalEnd.phi,Zr);y.push(this.rotateTo(b,T,r));const R=Ft.setFromSpherical(this._sphericalEnd).normalize(),F=ls.setFromUnitVectors(R,Pr),G=nt(Math.abs(R.y),1);G&&F.multiply(na.setFromAxisAngle(sr,b)),F.multiply(this._yAxisUpSpaceInverse);const L=fr.makeEmpty();er.copy(_.min).applyQuaternion(F),L.expandByPoint(er),er.copy(_.min).setX(_.max.x).applyQuaternion(F),L.expandByPoint(er),er.copy(_.min).setY(_.max.y).applyQuaternion(F),L.expandByPoint(er),er.copy(_.max).setZ(_.min.z).applyQuaternion(F),L.expandByPoint(er),er.copy(_.min).setZ(_.max.z).applyQuaternion(F),L.expandByPoint(er),er.copy(_.max).setY(_.min.y).applyQuaternion(F),L.expandByPoint(er),er.copy(_.max).setX(_.min.x).applyQuaternion(F),L.expandByPoint(er),er.copy(_.max).applyQuaternion(F),L.expandByPoint(er),L.min.x-=c,L.min.y-=h,L.max.x+=p,L.max.y+=g,F.setFromUnitVectors(Pr,R),G&&F.premultiply(na.invert()),F.premultiply(this._yAxisUpSpace);const O=L.getSize(Ft),P=L.getCenter(er).applyQuaternion(F);if(or(this._camera)){const D=this.getDistanceToFitBox(O.x,O.y,O.z,s);y.push(this.moveTo(P.x,P.y,P.z,r)),y.push(this.dollyTo(D,r)),y.push(this.setFocalOffset(0,0,0,r))}else if(cr(this._camera)){const D=this._camera,z=D.right-D.left,H=D.top-D.bottom,Q=s?Math.max(z/O.x,H/O.y):Math.min(z/O.x,H/O.y);y.push(this.moveTo(P.x,P.y,P.z,r)),y.push(this.zoomTo(Q,r)),y.push(this.setFocalOffset(0,0,0,r))}return Promise.all(y)}fitToSphere(t,r){const s=[],p=t instanceof Zt.Sphere?so.copy(t):Ol.createBoundingSphere(t,so);if(s.push(this.moveTo(p.center.x,p.center.y,p.center.z,r)),or(this._camera)){const h=this.getDistanceToFitSphere(p.radius);s.push(this.dollyTo(h,r))}else if(cr(this._camera)){const h=this._camera.right-this._camera.left,g=this._camera.top-this._camera.bottom,y=2*p.radius,_=Math.min(h/y,g/y);s.push(this.zoomTo(_,r))}return s.push(this.setFocalOffset(0,0,0,r)),Promise.all(s)}setLookAt(t,r,s,c,p,h,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ir.NONE,this._changedDolly=0;const y=er.set(c,p,h),_=Ft.set(t,r,s);this._targetEnd.copy(y),this._sphericalEnd.setFromVector3(_.sub(y).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const b=!g||nt(this._target.x,this._targetEnd.x,this.restThreshold)&&nt(this._target.y,this._targetEnd.y,this.restThreshold)&&nt(this._target.z,this._targetEnd.z,this.restThreshold)&&nt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&nt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&nt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}lerpLookAt(t,r,s,c,p,h,g,y,_,b,T,R,F,G=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=ir.NONE,this._changedDolly=0;const L=Ft.set(c,p,h),O=er.set(t,r,s);Kn.setFromVector3(O.sub(L).applyQuaternion(this._yAxisUpSpace));const P=Nr.set(b,T,R),D=er.set(g,y,_);Kt.setFromVector3(D.sub(P).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(L.lerp(P,F));const z=Kt.theta-Kn.theta,H=Kt.phi-Kn.phi,Q=Kt.radius-Kn.radius;this._sphericalEnd.set(Kn.radius+Q*F,Kn.phi+H*F,Kn.theta+z*F),this.normalizeRotations(),this._needsUpdate=!0,G||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const W=!G||nt(this._target.x,this._targetEnd.x,this.restThreshold)&&nt(this._target.y,this._targetEnd.y,this.restThreshold)&&nt(this._target.z,this._targetEnd.z,this.restThreshold)&&nt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&nt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&nt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(W)}setPosition(t,r,s,c=!1){return this.setLookAt(t,r,s,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,c)}setTarget(t,r,s,c=!1){const p=this.getPosition(Ft),h=this.setLookAt(p.x,p.y,p.z,t,r,s,c);return this._sphericalEnd.phi=po(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),h}setFocalOffset(t,r,s,c=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,r,s),this._needsUpdate=!0,c||this._focalOffset.copy(this._focalOffsetEnd);const p=!c||nt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&nt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&nt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(p)}setOrbitPoint(t,r,s){this._camera.updateMatrixWorld(),vr.setFromMatrixColumn(this._camera.matrixWorldInverse,0),_r.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Ei.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const c=Ft.set(t,r,s),p=c.distanceTo(this._camera.position),h=c.sub(this._camera.position);vr.multiplyScalar(h.x),_r.multiplyScalar(h.y),Ei.multiplyScalar(h.z),Ft.copy(vr).add(_r).add(Ei),Ft.z=Ft.z+p,this.dollyTo(p,!1),this.setFocalOffset(-Ft.x,Ft.y,-Ft.z,!1),this.moveTo(t,r,s,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,r,s,c){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Zt.Vector4,typeof t=="number"?this._viewport.set(t,r,s,c):this._viewport.copy(t)}getDistanceToFitBox(t,r,s,c=!1){if(Tr(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const p=t/r,h=this._camera.getEffectiveFOV()*$i,g=this._camera.aspect;return((c?p>g:p<g)?r:t/g)*.5/Math.tan(h*.5)+s*.5}getDistanceToFitSphere(t){if(Tr(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const r=this._camera.getEffectiveFOV()*$i,s=Math.atan(Math.tan(r*.5)*this._camera.aspect)*2,c=1<this._camera.aspect?r:s;return t/Math.sin(c*.5)}getTarget(t,r=!0){return(t&&t.isVector3?t:new Zt.Vector3).copy(r?this._targetEnd:this._target)}getPosition(t,r=!0){return(t&&t.isVector3?t:new Zt.Vector3).setFromSpherical(r?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r?this._targetEnd:this._target)}getSpherical(t,r=!0){return(t&&t instanceof Zt.Spherical?t:new Zt.Spherical).copy(r?this._sphericalEnd:this._spherical)}getFocalOffset(t,r=!0){return(t&&t.isVector3?t:new Zt.Vector3).copy(r?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Lr,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Lr),this._spherical.theta+=Lr*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Lr)}reset(t=!1){if(!nt(this._camera.up.x,this._cameraUp0.x)||!nt(this._camera.up.y,this._cameraUp0.y)||!nt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const s=this.getPosition(Ft);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}const r=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(r)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,sr),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=Ft.subVectors(this._target,this._camera.position).normalize(),r=er.crossVectors(t,this._camera.up);this._camera.up.crossVectors(r,t),this._camera.updateMatrixWorld();const s=this.getPosition(Ft);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}update(t){const r=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,c=this._sphericalEnd.radius-this._spherical.radius,p=zo.subVectors(this._targetEnd,this._target),h=vt.subVectors(this._focalOffsetEnd,this._focalOffset),g=this._zoomEnd-this._zoom;if(Ar(r))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=_n(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,T,1/0,t),this._needsUpdate=!0}if(Ar(s))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=_n(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,T,1/0,t),this._needsUpdate=!0}if(Ar(c))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const T=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=_n(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,T,this.maxSpeed,t),this._needsUpdate=!0}if(Ar(p.x)&&Ar(p.y)&&Ar(p.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const T=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Ur(this._target,this._targetEnd,this._targetVelocity,T,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(Ar(h.x)&&Ar(h.y)&&Ar(h.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const T=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Ur(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,T,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(Ar(g))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const T=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=_n(this._zoom,this._zoomEnd,this._zoomVelocity,T,1/0,t)}if(this.dollyToCursor){if(or(this._camera)&&this._changedDolly!==0){const T=this._spherical.radius-this._lastDistance,R=this._camera,F=this._getCameraDirection(Qr),G=Ft.copy(F).cross(R.up).normalize();G.lengthSq()===0&&(G.x=1);const L=er.crossVectors(G,F),O=this._sphericalEnd.radius*Math.tan(R.getEffectiveFOV()*$i*.5),D=(this._sphericalEnd.radius-T-this._sphericalEnd.radius)/this._sphericalEnd.radius,z=Nr.copy(this._targetEnd).add(G.multiplyScalar(this._dollyControlCoord.x*O*R.aspect)).add(L.multiplyScalar(this._dollyControlCoord.y*O)),H=Ft.copy(this._targetEnd).lerp(z,D),Q=this._lastDollyDirection===ir.IN&&this._spherical.radius<=this.minDistance,W=this._lastDollyDirection===ir.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(Q||W)){this._sphericalEnd.radius-=T,this._spherical.radius-=T;const K=er.copy(F).multiplyScalar(-T);H.add(K)}this._boundary.clampPoint(H,H);const Y=er.subVectors(H,this._targetEnd);this._targetEnd.copy(H),this._target.add(Y),this._changedDolly-=T,Ar(this._changedDolly)&&(this._changedDolly=0)}else if(cr(this._camera)&&this._changedZoom!==0){const T=this._zoom-this._lastZoom,R=this._camera,F=Ft.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(R.near+R.far)/(R.near-R.far)).unproject(R),G=er.set(0,0,-1).applyQuaternion(R.quaternion),L=Nr.copy(F).add(G.multiplyScalar(-F.dot(R.up))),P=-(this._zoom-T-this._zoom)/this._zoom,D=this._getCameraDirection(Qr),z=this._targetEnd.dot(D),H=Ft.copy(this._targetEnd).lerp(L,P),Q=H.dot(D),W=D.multiplyScalar(Q-z);H.sub(W),this._boundary.clampPoint(H,H);const Y=er.subVectors(H,this._targetEnd);this._targetEnd.copy(H),this._target.add(Y),this._changedZoom-=T,Ar(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const y=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,y),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Ar(this._focalOffset.x)||!Ar(this._focalOffset.y)||!Ar(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),vr.setFromMatrixColumn(this._camera.matrix,0),_r.setFromMatrixColumn(this._camera.matrix,1),Ei.setFromMatrixColumn(this._camera.matrix,2),vr.multiplyScalar(this._focalOffset.x),_r.multiplyScalar(-this._focalOffset.y),Ei.multiplyScalar(this._focalOffset.z),Ft.copy(vr).add(_r).add(Ei),this._camera.position.add(Ft)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Ft.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const b=this._needsUpdate;return b&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):b?(this.dispatchEvent({type:"update"}),Ar(r,this.restThreshold)&&Ar(s,this.restThreshold)&&Ar(c,this.restThreshold)&&Ar(p.x,this.restThreshold)&&Ar(p.y,this.restThreshold)&&Ar(p.z,this.restThreshold)&&Ar(h.x,this.restThreshold)&&Ar(h.y,this.restThreshold)&&Ar(h.z,this.restThreshold)&&Ar(g,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!b&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=b,this._needsUpdate=!1,b}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:dn(this.maxDistance),minZoom:this.minZoom,maxZoom:dn(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:dn(this.maxPolarAngle),minAzimuthAngle:dn(this.minAzimuthAngle),maxAzimuthAngle:dn(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Ft.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,r=!1){const s=JSON.parse(t);this.enabled=s.enabled,this.minDistance=s.minDistance,this.maxDistance=zn(s.maxDistance),this.minZoom=s.minZoom,this.maxZoom=zn(s.maxZoom),this.minPolarAngle=s.minPolarAngle,this.maxPolarAngle=zn(s.maxPolarAngle),this.minAzimuthAngle=zn(s.minAzimuthAngle),this.maxAzimuthAngle=zn(s.maxAzimuthAngle),this.smoothTime=s.smoothTime,this.draggingSmoothTime=s.draggingSmoothTime,this.dollySpeed=s.dollySpeed,this.truckSpeed=s.truckSpeed,this.dollyToCursor=s.dollyToCursor,this.verticalDragToForward=s.verticalDragToForward,this._target0.fromArray(s.target0),this._position0.fromArray(s.position0),this._zoom0=s.zoom0,this._focalOffset0.fromArray(s.focalOffset0),this.moveTo(s.target[0],s.target[1],s.target[2],r),Kn.setFromVector3(Ft.fromArray(s.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Kn.theta,Kn.phi,r),this.dollyTo(Kn.radius,r),this.zoomTo(s.zoom,r),this.setFocalOffset(s.focalOffset[0],s.focalOffset[1],s.focalOffset[2],r),this._needsUpdate=!0}connect(t){if(this._domElement){mn.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",eo),this._addAllEventListeners(t)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(r=>r.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(r=>r.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,r,s){const c=r.lengthSq();if(c===0)return t;const p=er.copy(r).add(t),g=this._boundary.clampPoint(p,Nr).sub(p),y=g.lengthSq();if(y===0)return t.add(r);if(y===c)return t;if(s===0)return t.add(r).add(g);{const _=1+s*y/r.dot(g);return t.add(er.copy(r).multiplyScalar(_)).add(g.multiplyScalar(1-s))}}_updateNearPlaneCorners(){if(or(this._camera)){const t=this._camera,r=t.near,s=t.getEffectiveFOV()*$i,c=Math.tan(s*.5)*r,p=c*t.aspect;this._nearPlaneCorners[0].set(-p,-c,0),this._nearPlaneCorners[1].set(p,-c,0),this._nearPlaneCorners[2].set(p,c,0),this._nearPlaneCorners[3].set(-p,c,0)}else if(cr(this._camera)){const t=this._camera,r=1/t.zoom,s=t.left*r,c=t.right*r,p=t.top*r,h=t.bottom*r;this._nearPlaneCorners[0].set(s,p,0),this._nearPlaneCorners[1].set(c,p,0),this._nearPlaneCorners[2].set(c,h,0),this._nearPlaneCorners[3].set(s,h,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||Tr(this._camera,"_collisionTest"))return t;const s=this._getTargetDirection(Qr);Gc.lookAt(Gn,s,this._camera.up);for(let c=0;c<4;c++){const p=er.copy(this._nearPlaneCorners[c]);p.applyMatrix4(Gc);const h=Nr.addVectors(this._target,p);$o.set(h,s),$o.far=this._spherical.radius+1;const g=$o.intersectObjects(this.colliderMeshes);g.length!==0&&g[0].distance<t&&(t=g[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=r.width,t.height=r.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(r=>{const s=()=>{this.removeEventListener("rest",s),r()};this.addEventListener("rest",s)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return mn.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){mn.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return mn.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){mn.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,r=new Zt.Sphere){const s=r,c=s.center;Vn.makeEmpty(),t.traverseVisible(h=>{h.isMesh&&Vn.expandByObject(h)}),Vn.getCenter(c);let p=0;return t.traverseVisible(h=>{if(!h.isMesh)return;const g=h,y=g.geometry.clone();y.applyMatrix4(g.matrixWorld);const b=y.attributes.position;for(let T=0,R=b.count;T<R;T++)Ft.fromBufferAttribute(b,T),p=Math.max(p,c.distanceToSquared(Ft))}),s.radius=Math.sqrt(p),s}}const Dl=(0,d.forwardRef)((i,t)=>{(0,d.useMemo)(()=>{const W={Box3:o.Box3,MathUtils:{clamp:o.MathUtils.clamp},Matrix4:o.Matrix4,Quaternion:o.Quaternion,Raycaster:o.Raycaster,Sphere:o.Sphere,Spherical:o.Spherical,Vector2:o.Vector2,Vector3:o.Vector3,Vector4:o.Vector4};Ol.install({THREE:W}),(0,E.e)({CameraControlsImpl:Ol})},[]);const Q=i,{camera:r,domElement:s,makeDefault:c,onStart:p,onEnd:h,onChange:g,regress:y}=Q,_=An(Q,["camera","domElement","makeDefault","onStart","onEnd","onChange","regress"]),b=(0,E.z)(W=>W.camera),T=(0,E.z)(W=>W.gl),R=(0,E.z)(W=>W.invalidate),F=(0,E.z)(W=>W.events),G=(0,E.z)(W=>W.setEvents),L=(0,E.z)(W=>W.set),O=(0,E.z)(W=>W.get),P=(0,E.z)(W=>W.performance),D=r||b,z=s||F.connected||T.domElement,H=(0,d.useMemo)(()=>new Ol(D),[D]);return(0,E.A)((W,Y)=>{H.enabled&&H.update(Y)},-1),(0,d.useEffect)(()=>(H.connect(z),()=>void H.disconnect()),[z,H]),(0,d.useEffect)(()=>{const W=ie=>{R(),y&&P.regress(),g&&g(ie)},Y=ie=>{p&&p(ie)},K=ie=>{h&&h(ie)};return H.addEventListener("update",W),H.addEventListener("controlstart",Y),H.addEventListener("controlend",K),H.addEventListener("control",W),H.addEventListener("transitionstart",W),H.addEventListener("wake",W),()=>{H.removeEventListener("update",W),H.removeEventListener("controlstart",Y),H.removeEventListener("controlend",K),H.removeEventListener("control",W),H.removeEventListener("transitionstart",W),H.removeEventListener("wake",W)}},[H,p,h,R,G,y,g]),(0,d.useEffect)(()=>{if(c){const W=O().controls;return L({controls:H}),()=>L({controls:W})}},[c,H]),d.createElement("primitive",(0,w.Z)({ref:t,object:H},_))});function SA(i,t){const b=jn({unsuspend:"loadedmetadata",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,playsInline:!0},t),{unsuspend:r,start:s,crossOrigin:c,muted:p,loop:h}=b,g=An(b,["unsuspend","start","crossOrigin","muted","loop"]),y=(0,E.z)(T=>T.gl),_=(0,Il.Rq)(()=>new Promise((T,R)=>{const F=Object.assign(document.createElement("video"),jn({src:typeof i=="string"&&i||void 0,srcObject:i instanceof MediaStream&&i||void 0,crossOrigin:c,loop:h,muted:p},g)),G=new o.VideoTexture(F);"colorSpace"in G?G.colorSpace=y.outputColorSpace:G.encoding=y.outputEncoding,F.addEventListener(r,()=>T(G))}),[i]);return(0,d.useEffect)(()=>void(s&&_.image.play()),[_,s]),_}var wA=A(25108);const EE=new o.Vector3(0,0,-1),F0=function(){const i=new o.Vector3,t=new o.Vector3,r=new o.Vector3,s=new o.Vector3,c=new o.Vector3;return function(p,h,g,y){return i.copy(p),t.copy(h),r.copy(g),s.copy(t).sub(i),c.copy(r).sub(i),y.crossVectors(c,s).normalize()}}();function i2(i,t){return i.clone().add(t).multiplyScalar(.5)}const cm=d.forwardRef((P,O)=>{var D=P,{points:i=O0.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:t,facialTransformationMatrix:r,faceBlendshapes:s,offset:c,offsetScalar:p=80,width:h,height:g,depth:y=1,verticalTri:_=[159,386,152],origin:b,eyes:T=!0,eyesAsOrigin:R=!1,debug:F=!1,children:G}=D,L=An(D,["points","face","facialTransformationMatrix","faceBlendshapes","offset","offsetScalar","width","height","depth","verticalTri","origin","eyes","eyesAsOrigin","debug","children"]);var z;t&&(i=t.keypoints,wA.warn("Facemesh `face` prop is deprecated: use `points` instead"));const H=d.useRef(null),Q=d.useRef(null),W=d.useRef(null),Y=d.useRef(null),K=d.useRef(null),ie=d.useRef(null),ce=d.useRef(null),[ge]=d.useState(()=>new o.Vector3),[ae]=d.useState(()=>new o.Object3D),[xe]=d.useState(()=>new o.Quaternion),[ve]=d.useState(()=>new o.Vector3),{invalidate:Be}=(0,E.z)();d.useEffect(()=>{var Ce;(Ce=K.current)==null||Ce.geometry.setIndex(O0.TRIANGULATION)},[]);const[Ue]=d.useState(()=>new o.Vector3);d.useEffect(()=>{var Ce,Ee;const _e=(Ce=K.current)==null?void 0:Ce.geometry;if(!_e)return;if(_e.setFromPoints(i),_e.setDrawRange(0,O0.TRIANGULATION.length),r)if(ae.matrix.fromArray(r.data),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.rotation.y*=-1,ae.rotation.z*=-1,xe.setFromEuler(ae.rotation),c){var oe;ae.position.y*=-1,ae.position.z*=-1,(oe=H.current)==null||oe.position.copy(ae.position.divideScalar(p))}else{var me;(me=H.current)==null||me.position.set(0,0,0)}else F0(i[_[0]],i[_[1]],i[_[2]],ge),xe.setFromUnitVectors(EE,ge);const Te=xe.clone().invert();if(_e.computeBoundingBox(),F&&Be(),_e.center(),_e.applyQuaternion(Te),(Ee=Y.current)==null||Ee.setRotationFromQuaternion(xe),T){if(!s)wA.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(ie.current&&ce.current&&W.current)if(R){const ye=ie.current._computeSphere(_e),ze=ce.current._computeSphere(_e);b=i2(ye.center,ze.center).negate(),ie.current._update(_e,s,ye),ce.current._update(_e,s,ze)}else ie.current._update(_e,s),ce.current._update(_e,s)}if(W.current){if(b!==void 0)if(typeof b=="number"){const ye=_e.getAttribute("position");ve.set(-ye.getX(b),-ye.getY(b),-ye.getZ(b))}else b.isVector3&&ve.copy(b);else ve.setScalar(0);W.current.position.copy(ve)}if(Q.current){let ye=1;(h||g||y)&&(_e.boundingBox.getSize(Ue),h&&(ye=h/Ue.x),g&&(ye=g/Ue.y),y&&(ye=y/Ue.z)),Q.current.scale.setScalar(ye!==1?ye:1)}_e.computeVertexNormals(),_e.attributes.position.needsUpdate=!0},[i,r,s,ae,c,p,h,g,y,_,b,T,F,Be,ge,xe,Ue,ve]);const Ie=d.useMemo(()=>({outerRef:Y,meshRef:K,eyeRightRef:ie,eyeLeftRef:ce}),[]);d.useImperativeHandle(O,()=>Ie,[Ie]);const[Ne]=d.useState(()=>new o.Vector3),Le=(z=K.current)==null?void 0:z.geometry.boundingBox,Ye=(Le==null?void 0:Le.getSize(Ne).z)||1;return d.createElement("group",L,d.createElement("group",{ref:H},d.createElement("group",{ref:Y},d.createElement("group",{ref:Q},F?d.createElement(d.Fragment,null,d.createElement("axesHelper",{args:[Ye]}),d.createElement(Gp,{points:[[0,0,0],[0,0,-Ye]],color:65535})):null,d.createElement("group",{ref:W},T&&s&&d.createElement("group",{name:"eyes"},d.createElement(TA,{side:"left",ref:ie,debug:F}),d.createElement(TA,{side:"right",ref:ce,debug:F})),d.createElement("mesh",{ref:K,name:"face"},G,F?d.createElement(d.Fragment,null,Le&&d.createElement("box3Helper",{args:[Le]})):null))))))}),Ch={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},TA=d.forwardRef(({side:i,debug:t=!0},r)=>{const s=d.useRef(null),c=d.useRef(null),[p]=d.useState(()=>new o.Sphere),h=d.useCallback(T=>{const R=T.getAttribute("position"),G=Ch.contourLandmarks[i].map(L=>new o.Vector3(R.getX(L),R.getY(L),R.getZ(L)));return p.center.set(0,0,0),G.forEach(L=>p.center.add(L)),p.center.divideScalar(G.length),p.radius=G[0].sub(G[1]).length()/2,p},[p,i]),[g]=d.useState(()=>new o.Euler),y=d.useCallback((T,R,F)=>{if(s.current){var G;(G=F)!==null&&G!==void 0||(F=h(T)),s.current.position.copy(F.center),s.current.scale.setScalar(F.radius)}if(R&&c.current){const L=Ch.blendshapes[i],O=R.categories[L[0]].score,P=R.categories[L[1]].score,D=R.categories[L[2]].score,z=R.categories[L[3]].score,H=Ch.fov.horizontal*o.MathUtils.DEG2RAD,Q=Ch.fov.vertical*o.MathUtils.DEG2RAD,W=H*.5*(z-D),Y=Q*.5*(O-P)*(i==="left"?1:-1);g.set(W,Y,0),c.current.setRotationFromEuler(g)}},[h,i,g]),_=d.useMemo(()=>({eyeMeshRef:s,irisDirRef:c,_computeSphere:h,_update:y}),[h,y]);d.useImperativeHandle(r,()=>_,[_]);const b=Ch.color[i];return d.createElement("group",null,d.createElement("group",{ref:s},t&&d.createElement("axesHelper",null),d.createElement("group",{ref:c},d.createElement(d.Fragment,null,t&&d.createElement(Gp,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:b})))))}),O0={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}};var o2=A(10203);const Ke=(0,d.createContext)({}),zt={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function sn({basePath:i=zt.basePath,options:t=zt.options,children:r}){const s=JSON.stringify(t),c=(0,Il.Rq)(()=>es(this,null,function*(){return yield o2.n.forVisionTasks(i).then(p=>o2.jr.createFromOptions(p,t))}),[i,s]);return(0,d.useEffect)(()=>()=>{c==null||c.close(),(0,Il.ZH)([i,s])},[c,i,s]),d.createElement(Ke.Provider,{value:c},r)}function It(){return(0,d.useContext)(Ke)}function an(i,t){return i.clone().add(t).multiplyScalar(.5)}function Er(i,t,r){const s=i.localToWorld(t);return r.worldToLocal(s)}const $r=(0,d.createContext)({}),hi=(0,d.forwardRef)(({camera:i,autostart:t=!0,webcam:r=!0,webcamVideoTextureSrc:s,manualUpdate:c=!1,manualDetect:p=!1,onVideoFrame:h,smoothTime:g=.25,offset:y=!0,offsetScalar:_=80,eyes:b=!1,eyesAsOrigin:T=!0,depth:R=.15,debug:F=!1,facemesh:G,makeDefault:L},O)=>{var P,D;const z=(0,E.z)(Te=>Te.scene),H=(0,E.z)(Te=>Te.camera),Q=(0,E.z)(Te=>Te.set),W=(0,E.z)(Te=>Te.get),Y=i||H,K=(0,d.useRef)(null),ie=(0,d.useRef)(null),[ce]=(0,d.useState)(()=>new o.Object3D),[ge]=(0,d.useState)(()=>new o.Vector3),[ae]=(0,d.useState)(()=>new o.Vector3),[xe]=(0,d.useState)(()=>new o.Vector3),[ve]=(0,d.useState)(()=>new o.Vector3),Be=(0,d.useCallback)(()=>{ce.parent=Y.parent;const Te=ie.current;if(Te){const{outerRef:ye,eyeRightRef:ze,eyeLeftRef:Mt}=Te;if(ze.current&&Mt.current){const{irisDirRef:At}=ze.current,{irisDirRef:gt}=Mt.current;At.current&&gt.current&&ye.current&&(ge.copy(Er(At.current,new o.Vector3(0,0,0),ye.current)),ae.copy(Er(gt.current,new o.Vector3(0,0,0),ye.current)),ce.position.copy(Er(ye.current,an(ge,ae),Y.parent||z)),xe.copy(Er(At.current,new o.Vector3(0,0,1),ye.current)),ve.copy(Er(gt.current,new o.Vector3(0,0,1),ye.current)),ce.lookAt(ye.current.localToWorld(an(xe,ve))))}else ye.current&&(ce.position.copy(Er(ye.current,new o.Vector3(0,0,0),Y.parent||z)),ce.lookAt(ye.current.localToWorld(new o.Vector3(0,0,1))))}return ce},[Y,ae,ve,ge,xe,z,ce]),[Ue]=(0,d.useState)(()=>new o.Object3D),Ie=(0,d.useCallback)(function(Te,ye){if(Y){var ze;(ze=ye)!==null&&ze!==void 0||(ye=Be()),g>0?(zd.damp3(Ue.position,ye.position,g,Te,void 0,void 0,1e-9),zd.dampE(Ue.rotation,ye.rotation,g,Te,void 0,void 0,1e-9)):(Ue.position.copy(ye.position),Ue.rotation.copy(ye.rotation)),Y.position.copy(Ue.position),Y.rotation.copy(Ue.rotation)}},[Y,Be,g,Ue.position,Ue.rotation]),[Ne,Le]=(0,d.useState)(),Ye=It(),Ce=(0,d.useCallback)((Te,ye)=>{const ze=Ye==null?void 0:Ye.detectForVideo(Te,ye);Le(ze)},[Ye]);(0,E.A)((Te,ye)=>{c||Ie(ye)});const Ee=(0,d.useMemo)(()=>Object.assign(Object.create(o.EventDispatcher.prototype),{detect:Ce,computeTarget:Be,update:Ie,facemeshApiRef:ie,webcamApiRef:K,play:()=>{var Te,ye;(Te=K.current)==null||(ye=Te.videoTextureApiRef.current)==null||ye.texture.source.data.play()},pause:()=>{var Te,ye;(Te=K.current)==null||(ye=Te.videoTextureApiRef.current)==null||ye.texture.source.data.pause()}}),[Ce,Be,Ie]);(0,d.useImperativeHandle)(O,()=>Ee,[Ee]),(0,d.useEffect)(()=>{const Te=ye=>{p||Ce(ye.texture.source.data,ye.time),h&&h(ye)};return Ee.addEventListener("videoFrame",Te),()=>{Ee.removeEventListener("videoFrame",Te)}},[Ee,Ce,Ye,p,h]),(0,d.useEffect)(()=>{if(L){const Te=W().controls;return Q({controls:Ee}),()=>Q({controls:Te})}},[L,Ee,W,Q]);const _e=Ne==null?void 0:Ne.faceLandmarks[0],oe=Ne==null||(P=Ne.facialTransformationMatrixes)==null?void 0:P[0],me=Ne==null||(D=Ne.faceBlendshapes)==null?void 0:D[0];return d.createElement($r.Provider,{value:Ee},r&&d.createElement(d.Suspense,{fallback:null},d.createElement(ji,{ref:K,autostart:t,videoTextureSrc:s})),d.createElement(cm,(0,w.Z)({ref:ie},G,{points:_e,depth:R,facialTransformationMatrix:oe,faceBlendshapes:me,eyes:b,eyesAsOrigin:T,offset:y,offsetScalar:_,debug:F,"rotation-z":Math.PI,visible:F}),d.createElement("meshBasicMaterial",{side:o.DoubleSide})))}),li=()=>(0,d.useContext)($r),ji=(0,d.forwardRef)(({videoTextureSrc:i,autostart:t=!0},r)=>{const s=(0,d.useRef)(null),c=li(),p=(0,Il.Rq)(()=>es(this,null,function*(){return i?Promise.resolve(null):yield navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})}),[i]);(0,d.useEffect)(()=>(c.dispatchEvent({type:"stream",stream:p}),()=>{p==null||p.getTracks().forEach(g=>g.stop()),(0,Il.ZH)([i])}),[p,c,i]);const h=(0,d.useMemo)(()=>({videoTextureApiRef:s}),[]);return(0,d.useImperativeHandle)(r,()=>h,[h]),d.createElement(d.Suspense,{fallback:null},d.createElement(Si,{ref:s,src:i||p,start:t}))}),Si=(0,d.forwardRef)(({src:i,start:t},r)=>{const s=SA(i,{start:t}),c=s.source.data,p=li(),h=(0,d.useCallback)(y=>{p.dispatchEvent({type:"videoFrame",texture:s,time:y})},[s,p]);Ri(c,h);const g=(0,d.useMemo)(()=>({texture:s}),[s]);return(0,d.useImperativeHandle)(r,()=>g,[g]),d.createElement(d.Fragment,null)}),Ri=(i,t)=>{(0,d.useEffect)(()=>{if(!i||!i.requestVideoFrameCallback)return;let r;function s(...c){t(...c),r=i.requestVideoFrameCallback(s)}return i.requestVideoFrameCallback(s),()=>i.cancelVideoFrameCallback(r)},[i,t])};function Is({defaultScene:i,defaultCamera:t,renderPriority:r=1}){const{gl:s,scene:c,camera:p}=(0,E.z)();let h;return(0,E.A)(()=>{h=s.autoClear,r===1&&(s.autoClear=!0,s.render(i,t)),s.autoClear=!1,s.clearDepth(),s.render(c,p),s.autoClear=h},r),d.createElement("group",{onPointerOver:()=>null})}function Fs({children:i,renderPriority:t=1}){const{scene:r,camera:s}=(0,E.z)(),[c]=d.useState(()=>new o.Scene);return d.createElement(d.Fragment,null,(0,E.g)(d.createElement(d.Fragment,null,i,d.createElement(Is,{defaultScene:r,defaultCamera:s,renderPriority:t})),c,{events:{priority:t+1}}))}const Uc=d.createContext({}),Nc=()=>d.useContext(Uc),ra=2*Math.PI,Ki=new o.Object3D,D0=new o.Matrix4,[xs,Iu]=[new o.Quaternion,new o.Quaternion],BA=new o.Vector3,Of=new o.Vector3,RA=i=>"minPolarAngle"in i,Pl=({alignment:i="bottom-right",margin:t=[80,80],renderPriority:r=1,onUpdate:s,onTarget:c,children:p})=>{const h=(0,E.z)(W=>W.size),g=(0,E.z)(W=>W.camera),y=(0,E.z)(W=>W.controls),_=(0,E.z)(W=>W.invalidate),b=d.useRef(),T=d.useRef(null),R=d.useRef(!1),F=d.useRef(0),G=d.useRef(new o.Vector3(0,0,0)),L=d.useRef(new o.Vector3(0,0,0));d.useEffect(()=>{L.current.copy(g.up)},[g]);const O=d.useCallback(W=>{R.current=!0,(y||c)&&(G.current=(y==null?void 0:y.target)||(c==null?void 0:c())),F.current=g.position.distanceTo(BA),xs.copy(g.quaternion),Of.copy(W).multiplyScalar(F.current).add(BA),Ki.lookAt(Of),Ki.up.copy(g.up),Iu.copy(Ki.quaternion),_()},[y,g,c,_]);(0,E.A)((W,Y)=>{if(T.current&&b.current){var K;if(R.current)if(xs.angleTo(Iu)<.01)R.current=!1,RA(y)&&g.up.copy(L.current);else{const ie=Y*ra;xs.rotateTowards(Iu,ie),g.position.set(0,0,1).applyQuaternion(xs).multiplyScalar(F.current).add(G.current),g.up.set(0,1,0).applyQuaternion(xs).normalize(),g.quaternion.copy(xs),s?s():y&&y.update(),_()}D0.copy(g.matrix).invert(),(K=b.current)==null||K.quaternion.setFromRotationMatrix(D0)}});const P=d.useMemo(()=>({tweenCamera:O}),[O]),[D,z]=t,H=i.endsWith("-center")?0:i.endsWith("-left")?-h.width/2+D:h.width/2-D,Q=i.startsWith("center-")?0:i.startsWith("top-")?h.height/2-z:-h.height/2+z;return d.createElement(Fs,{renderPriority:r},d.createElement(Uc.Provider,{value:P},d.createElement(EA,{makeDefault:!0,ref:T,position:[0,0,200]}),d.createElement("group",{ref:b,position:[H,Q,0]},p)))},pp={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},IA=["Right","Left","Top","Bottom","Front","Back"],tc=i=>new o.Vector3(...i).multiplyScalar(.38),FA=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(tc),bE=[.25,.25,.25],OA=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(tc),HS=OA.map(i=>i.toArray().map(t=>t==0?.5:.25)),jS=({hover:i,index:t,font:r="20px Inter var, Arial, sans-serif",faces:s=IA,color:c=pp.bg,hoverColor:p=pp.hover,textColor:h=pp.text,strokeColor:g=pp.stroke,opacity:y=1})=>{const _=(0,E.z)(T=>T.gl),b=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const R=T.getContext("2d");return R.fillStyle=c,R.fillRect(0,0,T.width,T.height),R.strokeStyle=g,R.strokeRect(0,0,T.width,T.height),R.font=r,R.textAlign="center",R.fillStyle=h,R.fillText(s[t].toUpperCase(),64,76),new o.CanvasTexture(T)},[t,s,r,c,h,g]);return d.createElement("meshBasicMaterial",{map:b,"map-anisotropy":_.capabilities.getMaxAnisotropy()||1,attach:`material-${t}`,color:i?p:"white",transparent:!0,opacity:y})},WS=i=>{const{tweenCamera:t}=Nc(),[r,s]=d.useState(null),c=g=>{g.stopPropagation(),s(null)},p=g=>{g.stopPropagation(),t(g.face.normal)},h=g=>{g.stopPropagation(),s(Math.floor(g.faceIndex/2))};return d.createElement("mesh",{onPointerOut:c,onPointerMove:h,onClick:i.onClick||p},[...Array(6)].map((g,y)=>d.createElement(jS,(0,w.Z)({key:y,index:y,hover:r===y},i))),d.createElement("boxGeometry",null))},xM=({onClick:i,dimensions:t,position:r,hoverColor:s=pp.hover})=>{const{tweenCamera:c}=Nc(),[p,h]=d.useState(!1),g=b=>{b.stopPropagation(),h(!1)},y=b=>{b.stopPropagation(),h(!0)},_=b=>{b.stopPropagation(),c(r)};return d.createElement("mesh",{scale:1.01,position:r,onPointerOver:y,onPointerOut:g,onClick:i||_},d.createElement("meshBasicMaterial",{color:p?s:"white",transparent:!0,opacity:.6,visible:p}),d.createElement("boxGeometry",{args:t}))},VS=i=>d.createElement("group",{scale:[60,60,60]},d.createElement(WS,i),OA.map((t,r)=>d.createElement(xM,(0,w.Z)({key:r,position:t,dimensions:HS[r]},i))),FA.map((t,r)=>d.createElement(xM,(0,w.Z)({key:r,position:t,dimensions:bE},i))));function ME({scale:i=[.8,.05,.05],color:t,rotation:r}){return d.createElement("group",{rotation:r},d.createElement("mesh",{position:[.4,0,0]},d.createElement("boxGeometry",{args:i}),d.createElement("meshBasicMaterial",{color:t,toneMapped:!1})))}function P0(y){var _=y,{onClick:i,font:t,disabled:r,arcStyle:s,label:c,labelColor:p,axisHeadScale:h=1}=_,g=An(_,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);const b=(0,E.z)(P=>P.gl),T=d.useMemo(()=>{const P=document.createElement("canvas");P.width=64,P.height=64;const D=P.getContext("2d");return D.beginPath(),D.arc(32,32,16,0,2*Math.PI),D.closePath(),D.fillStyle=s,D.fill(),c&&(D.font=t,D.textAlign="center",D.fillStyle=p,D.fillText(c,32,41)),new o.CanvasTexture(P)},[s,c,p,t]),[R,F]=d.useState(!1),G=(c?1:.75)*(R?1.2:1)*h,L=P=>{P.stopPropagation(),F(!0)},O=P=>{P.stopPropagation(),F(!1)};return d.createElement("sprite",(0,w.Z)({scale:G,onPointerOver:r?void 0:L,onPointerOut:r?void 0:i||O},g),d.createElement("spriteMaterial",{map:T,"map-anisotropy":b.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:c?1:.75,toneMapped:!1}))}const QS=T=>{var R=T,{hideNegativeAxes:i,hideAxisHeads:t,disabled:r,font:s="18px Inter var, Arial, sans-serif",axisColors:c=["#ff2060","#20df80","#2080ff"],axisHeadScale:p=1,axisScale:h,labels:g=["X","Y","Z"],labelColor:y="#000",onClick:_}=R,b=An(R,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);const[F,G,L]=c,{tweenCamera:O}=Nc(),P={font:s,disabled:r,labelColor:y,onClick:_,axisHeadScale:p,onPointerDown:r?void 0:D=>{O(D.object.position),D.stopPropagation()}};return d.createElement("group",(0,w.Z)({scale:40},b),d.createElement(ME,{color:F,rotation:[0,0,0],scale:h}),d.createElement(ME,{color:G,rotation:[0,0,Math.PI/2],scale:h}),d.createElement(ME,{color:L,rotation:[0,-Math.PI/2,0],scale:h}),!t&&d.createElement(d.Fragment,null,d.createElement(P0,(0,w.Z)({arcStyle:F,position:[1,0,0],label:g[0]},P)),d.createElement(P0,(0,w.Z)({arcStyle:G,position:[0,1,0],label:g[1]},P)),d.createElement(P0,(0,w.Z)({arcStyle:L,position:[0,0,1],label:g[2]},P)),!i&&d.createElement(d.Fragment,null,d.createElement(P0,(0,w.Z)({arcStyle:F,position:[-1,0,0]},P)),d.createElement(P0,(0,w.Z)({arcStyle:G,position:[0,-1,0]},P)),d.createElement(P0,(0,w.Z)({arcStyle:L,position:[0,0,-1]},P)))))},XS=Lc({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new o.Color,sectionColor:new o.Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new o.Vector3,worldPlanePosition:new o.Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      float dist = distance(worldCamProjPosition, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }
  `),KS=d.forwardRef((G,F)=>{var L=G,{args:i,cellColor:t="#000000",sectionColor:r="#2080ff",cellSize:s=.5,sectionSize:c=1,followCamera:p=!1,infiniteGrid:h=!1,fadeDistance:g=100,fadeStrength:y=1,cellThickness:_=.5,sectionThickness:b=1,side:T=o.BackSide}=L,R=An(L,["args","cellColor","sectionColor","cellSize","sectionSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","side"]);(0,E.e)({GridMaterial:XS});const O=d.useRef(null),P=new o.Plane,D=new o.Vector3(0,1,0),z=new o.Vector3(0,0,0);(0,E.A)(W=>{P.setFromNormalAndCoplanarPoint(D,z).applyMatrix4(O.current.matrixWorld);const Y=O.current.material,K=Y.uniforms.worldCamProjPosition,ie=Y.uniforms.worldPlanePosition;P.projectPoint(W.camera.position,K.value),ie.value.set(0,0,0).applyMatrix4(O.current.matrixWorld)});const H={cellSize:s,sectionSize:c,cellColor:t,sectionColor:r,cellThickness:_,sectionThickness:b},Q={fadeDistance:g,fadeStrength:y,infiniteGrid:h,followCamera:p};return d.createElement("mesh",(0,w.Z)({ref:Dn([O,F]),frustumCulled:!1},R),d.createElement("gridMaterial",(0,w.Z)({transparent:!0,"extensions-derivatives":!0,side:T},H,Q)),d.createElement("planeGeometry",{args:i}))});function CM(i,{path:t}){const[r]=(0,E.D)(o.CubeTextureLoader,[i],s=>s.setPath(t));return r}CM.preload=(i,{path:t})=>E.D.preload(o.CubeTextureLoader,[i],r=>r.setPath(t));var SM={},YS=function(i,t,r,s,c){var p=new Worker(SM[t]||(SM[t]=URL.createObjectURL(new Blob([i],{type:"text/javascript"}))));return p.onerror=function(h){return c(h.error,null)},p.onmessage=function(h){return c(null,h.data)},p.postMessage(r,s),p},Vo=Uint8Array,yl=Uint16Array,Df=Uint32Array,L0=new Vo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k0=new Vo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DA=new Vo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wM=function(i,t){for(var r=new yl(31),s=0;s<31;++s)r[s]=t+=1<<i[s-1];for(var c=new Df(r[30]),s=1;s<30;++s)for(var p=r[s];p<r[s+1];++p)c[p]=p-r[s]<<5|s;return[r,c]},TM=wM(L0,2),xE=TM[0],s2=TM[1];xE[28]=258,s2[258]=28;for(var BM=wM(k0,0),RM=BM[0],CE=BM[1],PA=new yl(32768),Cs=0;Cs<32768;++Cs){var Pf=(Cs&43690)>>>1|(Cs&21845)<<1;Pf=(Pf&52428)>>>2|(Pf&13107)<<2,Pf=(Pf&61680)>>>4|(Pf&3855)<<4,PA[Cs]=((Pf&65280)>>>8|(Pf&255)<<8)>>>1}for(var bd=function(i,t,r){for(var s=i.length,c=0,p=new yl(t);c<s;++c)++p[i[c]-1];var h=new yl(t);for(c=0;c<t;++c)h[c]=h[c-1]+p[c-1]<<1;var g;if(r){g=new yl(1<<t);var y=15-t;for(c=0;c<s;++c)if(i[c])for(var _=c<<4|i[c],b=t-i[c],T=h[i[c]-1]++<<b,R=T|(1<<b)-1;T<=R;++T)g[PA[T]>>>y]=_}else for(g=new yl(s),c=0;c<s;++c)i[c]&&(g[c]=PA[h[i[c]-1]++]>>>15-i[c]);return g},Lf=new Vo(288),Cs=0;Cs<144;++Cs)Lf[Cs]=8;for(var Cs=144;Cs<256;++Cs)Lf[Cs]=9;for(var Cs=256;Cs<280;++Cs)Lf[Cs]=7;for(var Cs=280;Cs<288;++Cs)Lf[Cs]=8;for(var LA=new Vo(32),Cs=0;Cs<32;++Cs)LA[Cs]=5;var IM=null,FM=bd(Lf,9,1),OM=null,DM=bd(LA,5,1),a2=function(i){for(var t=i[0],r=1;r<i.length;++r)i[r]>t&&(t=i[r]);return t},Yp=function(i,t,r){var s=t/8|0;return(i[s]|i[s+1]<<8)>>(t&7)&r},l2=function(i,t){var r=t/8|0;return(i[r]|i[r+1]<<8|i[r+2]<<16)>>(t&7)},kA=function(i){return(i/8|0)+(i&7&&1)},kf=function(i,t,r){(t==null||t<0)&&(t=0),(r==null||r>i.length)&&(r=i.length);var s=new(i instanceof yl?yl:i instanceof Df?Df:Vo)(r-t);return s.set(i.subarray(t,r)),s},c2=function(i,t,r){var s=i.length;if(!s||r&&!r.l&&s<5)return t||new Vo(0);var c=!t||r,p=!r||r.i;r||(r={}),t||(t=new Vo(s*3));var h=function(Te){var ye=t.length;if(Te>ye){var ze=new Vo(Math.max(ye*2,Te));ze.set(t),t=ze}},g=r.f||0,y=r.p||0,_=r.b||0,b=r.l,T=r.d,R=r.m,F=r.n,G=s*8;do{if(!b){r.f=g=Yp(i,y,1);var L=Yp(i,y+1,3);if(y+=3,L)if(L==1)b=FM,T=DM,R=9,F=5;else if(L==2){var z=Yp(i,y,31)+257,H=Yp(i,y+10,15)+4,Q=z+Yp(i,y+5,31)+1;y+=14;for(var W=new Vo(Q),Y=new Vo(19),K=0;K<H;++K)Y[DA[K]]=Yp(i,y+K*3,7);y+=H*3;for(var ie=a2(Y),ce=(1<<ie)-1,ge=bd(Y,ie,1),K=0;K<Q;){var ae=ge[Yp(i,y,ce)];y+=ae&15;var O=ae>>>4;if(O<16)W[K++]=O;else{var xe=0,ve=0;for(O==16?(ve=3+Yp(i,y,3),y+=2,xe=W[K-1]):O==17?(ve=3+Yp(i,y,7),y+=3):O==18&&(ve=11+Yp(i,y,127),y+=7);ve--;)W[K++]=xe}}var Be=W.subarray(0,z),Ue=W.subarray(z);R=a2(Be),F=a2(Ue),b=bd(Be,R,1),T=bd(Ue,F,1)}else throw"invalid block type";else{var O=kA(y)+4,P=i[O-4]|i[O-3]<<8,D=O+P;if(D>s){if(p)throw"unexpected EOF";break}c&&h(_+P),t.set(i.subarray(O,D),_),r.b=_+=P,r.p=y=D*8;continue}if(y>G){if(p)throw"unexpected EOF";break}}c&&h(_+131072);for(var Ie=(1<<R)-1,Ne=(1<<F)-1,Le=y;;Le=y){var xe=b[l2(i,y)&Ie],Ye=xe>>>4;if(y+=xe&15,y>G){if(p)throw"unexpected EOF";break}if(!xe)throw"invalid length/literal";if(Ye<256)t[_++]=Ye;else if(Ye==256){Le=y,b=null;break}else{var Ce=Ye-254;if(Ye>264){var K=Ye-257,Ee=L0[K];Ce=Yp(i,y,(1<<Ee)-1)+xE[K],y+=Ee}var _e=T[l2(i,y)&Ne],oe=_e>>>4;if(!_e)throw"invalid distance";y+=_e&15;var Ue=RM[oe];if(oe>3){var Ee=k0[oe];Ue+=l2(i,y)&(1<<Ee)-1,y+=Ee}if(y>G){if(p)throw"unexpected EOF";break}c&&h(_+131072);for(var me=_+Ce;_<me;_+=4)t[_]=t[_-Ue],t[_+1]=t[_+1-Ue],t[_+2]=t[_+2-Ue],t[_+3]=t[_+3-Ue];_=me}}r.l=b,r.p=Le,r.b=_,b&&(g=1,r.m=R,r.d=T,r.n=F)}while(!g);return _==t.length?t:kf(t,0,_)},Md=function(i,t,r){r<<=t&7;var s=t/8|0;i[s]|=r,i[s+1]|=r>>>8},z0=function(i,t,r){r<<=t&7;var s=t/8|0;i[s]|=r,i[s+1]|=r>>>8,i[s+2]|=r>>>16},p2=function(i,t){for(var r=[],s=0;s<i.length;++s)i[s]&&r.push({s,f:i[s]});var c=r.length,p=r.slice();if(!c)return[d2,0];if(c==1){var h=new Vo(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(Q,W){return Q.f-W.f}),r.push({s:-1,f:25001});var g=r[0],y=r[1],_=0,b=1,T=2;for(r[0]={s:-1,f:g.f+y.f,l:g,r:y};b!=c-1;)g=r[r[_].f<r[T].f?_++:T++],y=r[_!=b&&r[_].f<r[T].f?_++:T++],r[b++]={s:-1,f:g.f+y.f,l:g,r:y};for(var R=p[0].s,s=1;s<c;++s)p[s].s>R&&(R=p[s].s);var F=new yl(R+1),G=u2(r[b-1],F,0);if(G>t){var s=0,L=0,O=G-t,P=1<<O;for(p.sort(function(W,Y){return F[Y.s]-F[W.s]||W.f-Y.f});s<c;++s){var D=p[s].s;if(F[D]>t)L+=P-(1<<G-F[D]),F[D]=t;else break}for(L>>>=O;L>0;){var z=p[s].s;F[z]<t?L-=1<<t-F[z]++-1:++s}for(;s>=0&&L;--s){var H=p[s].s;F[H]==t&&(--F[H],++L)}G=t}return[new Vo(F),G]},u2=function(i,t,r){return i.s==-1?Math.max(u2(i.l,t,r+1),u2(i.r,t,r+1)):t[i.s]=r},SE=function(i){for(var t=i.length;t&&!i[--t];);for(var r=new yl(++t),s=0,c=i[0],p=1,h=function(y){r[s++]=y},g=1;g<=t;++g)if(i[g]==c&&g!=t)++p;else{if(!c&&p>2){for(;p>138;p-=138)h(32754);p>2&&(h(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(h(c),--p;p>6;p-=6)h(8304);p>2&&(h(p-3<<5|8208),p=0)}for(;p--;)h(c);p=1,c=i[g]}return[r.subarray(0,s),t]},G0=function(i,t){for(var r=0,s=0;s<t.length;++s)r+=i[s]*t[s];return r},zA=function(i,t,r){var s=r.length,c=kA(t+2);i[c]=s&255,i[c+1]=s>>>8,i[c+2]=i[c]^255,i[c+3]=i[c+1]^255;for(var p=0;p<s;++p)i[c+p+4]=r[p];return(c+4+s)*8},wE=function(i,t,r,s,c,p,h,g,y,_,b){Md(t,b++,r),++c[256];for(var T=p2(c,15),R=T[0],F=T[1],G=p2(p,15),L=G[0],O=G[1],P=SE(R),D=P[0],z=P[1],H=SE(L),Q=H[0],W=H[1],Y=new yl(19),K=0;K<D.length;++K)Y[D[K]&31]++;for(var K=0;K<Q.length;++K)Y[Q[K]&31]++;for(var ie=p2(Y,7),ce=ie[0],ge=ie[1],ae=19;ae>4&&!ce[DA[ae-1]];--ae);var xe=_+5<<3,ve=G0(c,Lf)+G0(p,LA)+h,Be=G0(c,R)+G0(p,L)+h+14+3*ae+G0(Y,ce)+(2*Y[16]+3*Y[17]+7*Y[18]);if(xe<=ve&&xe<=Be)return zA(t,b,i.subarray(y,y+_));var Ue,Ie,Ne,Le;if(Md(t,b,1+(Be<ve)),b+=2,Be<ve){Ue=bd(R,F,0),Ie=R,Ne=bd(L,O,0),Le=L;var Ye=bd(ce,ge,0);Md(t,b,z-257),Md(t,b+5,W-1),Md(t,b+10,ae-4),b+=14;for(var K=0;K<ae;++K)Md(t,b+3*K,ce[DA[K]]);b+=3*ae;for(var Ce=[D,Q],Ee=0;Ee<2;++Ee)for(var _e=Ce[Ee],K=0;K<_e.length;++K){var oe=_e[K]&31;Md(t,b,Ye[oe]),b+=ce[oe],oe>15&&(Md(t,b,_e[K]>>>5&127),b+=_e[K]>>>12)}}else Ue=IM,Ie=Lf,Ne=OM,Le=LA;for(var K=0;K<g;++K)if(s[K]>255){var oe=s[K]>>>18&31;z0(t,b,Ue[oe+257]),b+=Ie[oe+257],oe>7&&(Md(t,b,s[K]>>>23&31),b+=L0[oe]);var me=s[K]&31;z0(t,b,Ne[me]),b+=Le[me],me>3&&(z0(t,b,s[K]>>>5&8191),b+=k0[me])}else z0(t,b,Ue[s[K]]),b+=Ie[s[K]];return z0(t,b,Ue[256]),b+Ie[256]},PM=new Df([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),d2=new Vo(0),LM=function(i,t,r,s,c,p){var h=i.length,g=new Vo(s+h+5*(1+Math.ceil(h/7e3))+c),y=g.subarray(s,g.length-c),_=0;if(!t||h<8)for(var b=0;b<=h;b+=65535){var T=b+65535;T<h?_=zA(y,_,i.subarray(b,T)):(y[b]=p,_=zA(y,_,i.subarray(b,h)))}else{for(var R=PM[t-1],F=R>>>13,G=R&8191,L=(1<<r)-1,O=new yl(32768),P=new yl(L+1),D=Math.ceil(r/3),z=2*D,H=function(Gt){return(i[Gt]^i[Gt+1]<<D^i[Gt+2]<<z)&L},Q=new Df(25e3),W=new yl(288),Y=new yl(32),K=0,ie=0,b=0,ce=0,ge=0,ae=0;b<h;++b){var xe=H(b),ve=b&32767,Be=P[xe];if(O[ve]=Be,P[xe]=ve,ge<=b){var Ue=h-b;if((K>7e3||ce>24576)&&Ue>423){_=wE(i,y,0,Q,W,Y,ie,ce,ae,b-ae,_),ce=K=ie=0,ae=b;for(var Ie=0;Ie<286;++Ie)W[Ie]=0;for(var Ie=0;Ie<30;++Ie)Y[Ie]=0}var Ne=2,Le=0,Ye=G,Ce=ve-Be&32767;if(Ue>2&&xe==H(b-Ce))for(var Ee=Math.min(F,Ue)-1,_e=Math.min(32767,b),oe=Math.min(258,Ue);Ce<=_e&&--Ye&&ve!=Be;){if(i[b+Ne]==i[b+Ne-Ce]){for(var me=0;me<oe&&i[b+me]==i[b+me-Ce];++me);if(me>Ne){if(Ne=me,Le=Ce,me>Ee)break;for(var Te=Math.min(Ce,me-2),ye=0,Ie=0;Ie<Te;++Ie){var ze=b-Ce+Ie+32768&32767,Mt=O[ze],At=ze-Mt+32768&32767;At>ye&&(ye=At,Be=ze)}}}ve=Be,Be=O[ve],Ce+=ve-Be+32768&32767}if(Le){Q[ce++]=268435456|s2[Ne]<<18|CE[Le];var gt=s2[Ne]&31,ot=CE[Le]&31;ie+=L0[gt]+k0[ot],++W[257+gt],++Y[ot],ge=b+Ne,++K}else Q[ce++]=i[b],++W[i[b]]}}_=wE(i,y,p,Q,W,Y,ie,ce,ae,b-ae,_),!p&&_&7&&(_=zA(y,_+1,d2))}return kf(g,0,s+kA(_)+c)},kM=null,h2=function(){var i=-1;return{p:function(t){for(var r=i,s=0;s<t.length;++s)r=kM[r&255^t[s]]^r>>>8;i=r},d:function(){return~i}}},zM=function(){var i=1,t=0;return{p:function(r){for(var s=i,c=t,p=r.length,h=0;h!=p;){for(var g=Math.min(h+2655,p);h<g;++h)c+=s+=r[h];s=(s&65535)+15*(s>>16),c=(c&65535)+15*(c>>16)}i=s,t=c},d:function(){return i%=65521,t%=65521,(i&255)<<24|i>>>8<<16|(t&255)<<8|t>>>8}}},f2=function(i,t,r,s,c){return LM(i,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+t.mem,r,s,!c)},g2=function(i,t){var r={};for(var s in i)r[s]=i[s];for(var s in t)r[s]=t[s];return r},GM=function(i,t,r){for(var s=i(),c=i.toString(),p=c.slice(c.indexOf("[")+1,c.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<s.length;++h){var g=s[h],y=p[h];if(typeof g=="function"){t+=";"+y+"=";var _=g.toString();if(g.prototype)if(_.indexOf("[native code]")!=-1){var b=_.indexOf(" ",8)+1;t+=_.slice(b,_.indexOf("(",b))}else{t+=_;for(var T in g.prototype)t+=";"+y+".prototype."+T+"="+g.prototype[T].toString()}else t+=_}else r[y]=g}return[t,r]},m2=null,JS=function(i){var t=[];for(var r in i)(i[r]instanceof Vo||i[r]instanceof yl||i[r]instanceof Df)&&t.push((i[r]=new i[r].constructor(i[r])).buffer);return t},UM=function(i,t,r,s){var c;if(!m2[r]){for(var p="",h={},g=i.length-1,y=0;y<g;++y)c=GM(i[y],p,h),p=c[0],h=c[1];m2[r]=GM(i[g],p,h)}var _=g2({},m2[r][1]);return YS(m2[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,_,JS(_),s)},TE=function(){return[Vo,yl,Df,L0,k0,DA,xE,RM,FM,DM,PA,bd,a2,Yp,l2,kA,kf,c2,GA,zf,RE]},BE=function(){return[Vo,yl,Df,L0,k0,DA,s2,CE,IM,Lf,OM,LA,PA,PM,d2,bd,Md,z0,p2,u2,SE,G0,zA,wE,kA,kf,LM,f2,A2,zf]},qS=function(){return[NM,WM,js,h2,kM]},ZS=function(){return[HM,jM]},$S=function(){return[VM,js,zM]},e4=function(){return[QM]},zf=function(i){return postMessage(i,[i.buffer])},RE=function(i){return i&&i.size&&new Vo(i.size)},U0=function(i,t,r,s,c,p){var h=UM(r,s,c,function(g,y){h.terminate(),p(g,y)});return h.postMessage([i,t],t.consume?[i.buffer]:[]),function(){h.terminate()}},aI=function(i){return i.ondata=function(t,r){return postMessage([t,r],[t.buffer])},function(t){return i.push(t.data[0],t.data[1])}},lI=function(i,t,r,s,c){var p,h=UM(i,s,c,function(g,y){g?(h.terminate(),t.ondata.call(t,g)):(y[1]&&h.terminate(),t.ondata.call(t,g,y[0],y[1]))});h.postMessage(r),t.push=function(g,y){if(p)throw"stream finished";if(!t.ondata)throw"no stream handler";h.postMessage([g,p=y],[g.buffer])},t.terminate=function(){h.terminate()}},Fu=function(i,t){return i[t]|i[t+1]<<8},Ll=function(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16|i[t+3]<<24)>>>0},IE=function(i,t){return Ll(i,t)+Ll(i,t+4)*4294967296},js=function(i,t,r){for(;r;++t)i[t]=r,r>>>=8},NM=function(i,t){var r=t.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=t.level<2?4:t.level==9?2:0,i[9]=3,t.mtime!=0&&js(i,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){i[3]=8;for(var s=0;s<=r.length;++s)i[s+10]=r.charCodeAt(s)}},HM=function(i){if(i[0]!=31||i[1]!=139||i[2]!=8)throw"invalid gzip data";var t=i[3],r=10;t&4&&(r+=i[10]|(i[11]<<8)+2);for(var s=(t>>3&1)+(t>>4&1);s>0;s-=!i[r++]);return r+(t&2)},jM=function(i){var t=i.length;return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0},WM=function(i){return 10+(i.filename&&i.filename.length+1||0)},VM=function(i,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;i[0]=120,i[1]=s<<6|(s?32-2*s:1)},QM=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function cI(i,t){return!t&&typeof i=="function"&&(t=i,i={}),this.ondata=t,i}var pI=null,uI=null;function t4(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return U0(i,t,[BE],function(s){return zf(A2(s.data[0],s.data[1]))},0,r)}function A2(i,t){return f2(i,t||{},0,0)}var dI=null,hI=null;function XM(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return U0(i,t,[TE],function(s){return zf(GA(s.data[0],RE(s.data[1])))},1,r)}function GA(i,t){return c2(i,t)}var fI=null,gI=null;function mI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return U0(i,t,[BE,qS,function(){return[KM]}],function(s){return zf(KM(s.data[0],s.data[1]))},2,r)}function KM(i,t){t||(t={});var r=h2(),s=i.length;r.p(i);var c=f2(i,t,WM(t),8),p=c.length;return NM(c,t),js(c,p-8,r.d()),js(c,p-4,s),c}var AI=null,yI=null;function n4(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return U0(i,t,[TE,ZS,function(){return[FE]}],function(s){return zf(FE(s.data[0]))},3,r)}function FE(i,t){return c2(i.subarray(HM(i),-8),t||new Vo(jM(i)))}var vI=null,_I=null;function EI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return U0(i,t,[BE,$S,function(){return[YM]}],function(s){return zf(YM(s.data[0],s.data[1]))},4,r)}function YM(i,t){t||(t={});var r=zM();r.p(i);var s=f2(i,t,2,4);return VM(s,t),js(s,s.length-4,r.d()),s}var bI=null,MI=null;function r4(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return U0(i,t,[TE,e4,function(){return[Gf]}],function(s){return zf(Gf(s.data[0],RE(s.data[1])))},5,r)}function Gf(i,t){return c2((QM(i),i.subarray(2,-4)),t)}var xI=null,CI=null;function SI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return i[0]==31&&i[1]==139&&i[2]==8?n4(i,t,r):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?XM(i,t,r):r4(i,t,r)}function wI(i,t){return i[0]==31&&i[1]==139&&i[2]==8?FE(i,t):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?GA(i,t):Gf(i,t)}var OE=function(i,t,r,s){for(var c in i){var p=i[c],h=t+c;p instanceof Vo?r[h]=[p,s]:Array.isArray(p)?r[h]=[p[0],g2(s,p[1])]:OE(p,h+"/",r,s)}},JM=typeof TextEncoder!="undefined"&&new TextEncoder,DE=typeof TextDecoder!="undefined"&&new TextDecoder,i4=0;try{DE.decode(d2,{stream:!0}),i4=1}catch(i){}var o4=function(i){for(var t="",r=0;;){var s=i[r++],c=(s>127)+(s>223)+(s>239);if(r+c>i.length)return[t,kf(i,r-1)];c?c==3?(s=((s&15)<<18|(i[r++]&63)<<12|(i[r++]&63)<<6|i[r++]&63)-65536,t+=String.fromCharCode(55296|s>>10,56320|s&1023)):c&1?t+=String.fromCharCode((s&31)<<6|i[r++]&63):t+=String.fromCharCode((s&15)<<12|(i[r++]&63)<<6|i[r++]&63):t+=String.fromCharCode(s)}},TI=null,BI=null;function y2(i,t){if(t){for(var r=new Vo(i.length),s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}if(JM)return JM.encode(i);for(var c=i.length,p=new Vo(i.length+(i.length>>1)),h=0,g=function(b){p[h++]=b},s=0;s<c;++s){if(h+5>p.length){var y=new Vo(h+8+(c-s<<1));y.set(p),p=y}var _=i.charCodeAt(s);_<128||t?g(_):_<2048?(g(192|_>>6),g(128|_&63)):_>55295&&_<57344?(_=65536+(_&1047552)|i.charCodeAt(++s)&1023,g(240|_>>18),g(128|_>>12&63),g(128|_>>6&63),g(128|_&63)):(g(224|_>>12),g(128|_>>6&63),g(128|_&63))}return kf(p,0,h)}function s4(i,t){if(t){for(var r="",s=0;s<i.length;s+=16384)r+=String.fromCharCode.apply(null,i.subarray(s,s+16384));return r}else{if(DE)return DE.decode(i);var c=o4(i),p=c[0],h=c[1];if(h.length)throw"invalid utf-8 data";return p}}var RI=function(i){return i==1?3:i<6?2:i==9?1:0},qM=function(i,t){return t+30+Fu(i,t+26)+Fu(i,t+28)},ZM=function(i,t,r){var s=Fu(i,t+28),c=s4(i.subarray(t+46,t+46+s),!(Fu(i,t+8)&2048)),p=t+46+s,h=Ll(i,t+20),g=r&&h==4294967295?a4(i,p):[h,Ll(i,t+24),Ll(i,t+42)],y=g[0],_=g[1],b=g[2];return[Fu(i,t+10),y,_,c,p+Fu(i,t+30)+Fu(i,t+32),b]},a4=function(i,t){for(;Fu(i,t)!=1;t+=4+Fu(i,t+2));return[IE(i,t+12),IE(i,t+4),IE(i,t+20)]},UA=function(i){var t=0;if(i)for(var r in i){var s=i[r].length;if(s>65535)throw"extra field too long";t+=s+4}return t},v2=function(i,t,r,s,c,p,h,g){var y=s.length,_=r.extra,b=g&&g.length,T=UA(_);js(i,t,h!=null?33639248:67324752),t+=4,h!=null&&(i[t++]=20,i[t++]=r.os),i[t]=20,t+=2,i[t++]=r.flag<<1|(p==null&&8),i[t++]=c&&8,i[t++]=r.compression&255,i[t++]=r.compression>>8;var R=new Date(r.mtime==null?Date.now():r.mtime),F=R.getFullYear()-1980;if(F<0||F>119)throw"date not in range 1980-2099";if(js(i,t,F<<25|R.getMonth()+1<<21|R.getDate()<<16|R.getHours()<<11|R.getMinutes()<<5|R.getSeconds()>>>1),t+=4,p!=null&&(js(i,t,r.crc),js(i,t+4,p),js(i,t+8,r.size)),js(i,t+12,y),js(i,t+14,T),t+=16,h!=null&&(js(i,t,b),js(i,t+6,r.attrs),js(i,t+10,h),t+=14),i.set(s,t),t+=y,T)for(var G in _){var L=_[G],O=L.length;js(i,t,+G),js(i,t+2,O),i.set(L,t+4),t+=4+O}return b&&(i.set(g,t),t+=b),t},$M=function(i,t,r,s,c){js(i,t,101010256),js(i,t+8,r),js(i,t+10,r),js(i,t+12,s),js(i,t+16,c)},II=null,FI=null,OI=null,DI=null;function PI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";var s={};OE(i,"",s,t);var c=Object.keys(s),p=c.length,h=0,g=0,y=p,_=new Array(p),b=[],T=function(){for(var L=0;L<b.length;++L)b[L]()},R=function(){var L=new Vo(g+22),O=h,P=g-h;g=0;for(var D=0;D<y;++D){var z=_[D];try{var H=z.c.length;v2(L,g,z,z.f,z.u,H);var Q=30+z.f.length+UA(z.extra),W=g+Q;L.set(z.c,W),v2(L,h,z,z.f,z.u,H,g,z.m),h+=16+Q+(z.m?z.m.length:0),g=W+H}catch(Y){return r(Y,null)}}$M(L,h,_.length,P,O),r(null,L)};p||R();for(var F=function(L){var O=c[L],P=s[O],D=P[0],z=P[1],H=h2(),Q=D.length;H.p(D);var W=y2(O),Y=W.length,K=z.comment,ie=K&&y2(K),ce=ie&&ie.length,ge=UA(z.extra),ae=z.level==0?0:8,xe=function(ve,Be){if(ve)T(),r(ve,null);else{var Ue=Be.length;_[L]=g2(z,{size:Q,crc:H.d(),c:Be,f:W,m:ie,u:Y!=O.length||ie&&K.length!=ce,compression:ae}),h+=30+Y+ge+Ue,g+=76+2*(Y+ge)+(ce||0)+Ue,--p||R()}};if(Y>65535&&xe("filename too long",null),!ae)xe(null,D);else if(Q<16e4)try{xe(null,A2(D,z))}catch(ve){xe(ve,null)}else b.push(t4(D,z,xe))},G=0;G<y;++G)F(G);return T}function LI(i,t){t||(t={});var r={},s=[];OE(i,"",r,t);var c=0,p=0;for(var h in r){var g=r[h],y=g[0],_=g[1],b=_.level==0?0:8,T=y2(h),R=T.length,F=_.comment,G=F&&y2(F),L=G&&G.length,O=UA(_.extra);if(R>65535)throw"filename too long";var P=b?A2(y,_):y,D=P.length,z=h2();z.p(y),s.push(g2(_,{size:y.length,crc:z.d(),c:P,f:T,m:G,u:R!=h.length||G&&F.length!=L,o:c,compression:b})),c+=30+R+O+D,p+=76+2*(R+O)+(L||0)+D}for(var H=new Vo(p+22),Q=c,W=p-c,Y=0;Y<s.length;++Y){var T=s[Y];v2(H,T.o,T,T.f,T.u,T.c.length);var K=30+T.f.length+UA(T.extra);H.set(T.c,T.o+K),v2(H,c,T,T.f,T.u,T.c.length,T.o,T.m),c+=16+K+(T.m?T.m.length:0)}return $M(H,c,s.length,W,Q),H}var kI=null,zI=null,GI=null,UI=null;function NI(i,t){if(typeof t!="function")throw"no callback";for(var r=[],s=function(){for(var R=0;R<r.length;++R)r[R]()},c={},p=i.length-22;Ll(i,p)!=101010256;--p)if(!p||i.length-p>65558){t("invalid zip file",null);return}var h=Fu(i,p+8);h||t(null,{});var g=h,y=Ll(i,p+16),_=y==4294967295;if(_){if(p=Ll(i,p-12),Ll(i,p)!=101075792){t("invalid zip file",null);return}g=h=Ll(i,p+32),y=Ll(i,p+48)}for(var b=function(R){var F=ZM(i,y,_),G=F[0],L=F[1],O=F[2],P=F[3],D=F[4],z=F[5],H=qM(i,z);y=D;var Q=function(Y,K){Y?(s(),t(Y,null)):(c[P]=K,--h||t(null,c))};if(!G)Q(null,kf(i,H,H+L));else if(G==8){var W=i.subarray(H,H+L);if(L<32e4)try{Q(null,GA(W,new Vo(O)))}catch(Y){Q(Y,null)}else r.push(XM(W,{size:O},Q))}else Q("unknown compression type "+G,null)},T=0;T<g;++T)b(T);return s}function HI(i){for(var t={},r=i.length-22;Ll(i,r)!=101010256;--r)if(!r||i.length-r>65558)throw"invalid zip file";var s=Fu(i,r+8);if(!s)return{};var c=Ll(i,r+16),p=c==4294967295;if(p){if(r=Ll(i,r-12),Ll(i,r)!=101075792)throw"invalid zip file";s=Ll(i,r+32),c=Ll(i,r+48)}for(var h=0;h<s;++h){var g=ZM(i,c,p),y=g[0],_=g[1],b=g[2],T=g[3],R=g[4],F=g[5],G=qM(i,F);if(c=R,!y)t[T]=kf(i,G,G+_);else if(y==8)t[T]=GA(i.subarray(G,G+_),new Vo(b));else throw"unknown compression type "+y}return t}function _2(i,t,r){const s=r.length-i-1;if(t>=r[s])return s-1;if(t<=r[i])return i;let c=i,p=s,h=Math.floor((c+p)/2);for(;t<r[h]||t>=r[h+1];)t<r[h]?p=h:c=h,h=Math.floor((c+p)/2);return h}function PE(i,t,r,s){const c=[],p=[],h=[];c[0]=1;for(let g=1;g<=r;++g){p[g]=t-s[i+1-g],h[g]=s[i+g]-t;let y=0;for(let _=0;_<g;++_){const b=h[_+1],T=p[g-_],R=c[_]/(b+T);c[_]=y+b*R,y=T*R}c[g]=y}return c}function l4(i,t,r,s){const c=_2(i,s,t),p=PE(c,s,i,t),h=new o.Vector4(0,0,0,0);for(let g=0;g<=i;++g){const y=r[c-i+g],_=p[g],b=y.w*_;h.x+=y.x*b,h.y+=y.y*b,h.z+=y.z*b,h.w+=y.w*_}return h}function c4(i,t,r,s,c){const p=[];for(let T=0;T<=r;++T)p[T]=0;const h=[];for(let T=0;T<=s;++T)h[T]=p.slice(0);const g=[];for(let T=0;T<=r;++T)g[T]=p.slice(0);g[0][0]=1;const y=p.slice(0),_=p.slice(0);for(let T=1;T<=r;++T){y[T]=t-c[i+1-T],_[T]=c[i+T]-t;let R=0;for(let F=0;F<T;++F){const G=_[F+1],L=y[T-F];g[T][F]=G+L;const O=g[F][T-1]/g[T][F];g[F][T]=R+G*O,R=L*O}g[T][T]=R}for(let T=0;T<=r;++T)h[0][T]=g[T][r];for(let T=0;T<=r;++T){let R=0,F=1;const G=[];for(let L=0;L<=r;++L)G[L]=p.slice(0);G[0][0]=1;for(let L=1;L<=s;++L){let O=0;const P=T-L,D=r-L;T>=L&&(G[F][0]=G[R][0]/g[D+1][P],O=G[F][0]*g[P][D]);const z=P>=-1?1:-P,H=T-1<=D?L-1:r-T;for(let W=z;W<=H;++W)G[F][W]=(G[R][W]-G[R][W-1])/g[D+1][P+W],O+=G[F][W]*g[P+W][D];T<=D&&(G[F][L]=-G[R][L-1]/g[D+1][T],O+=G[F][L]*g[T][D]),h[L][T]=O;const Q=R;R=F,F=Q}}let b=r;for(let T=1;T<=s;++T){for(let R=0;R<=r;++R)h[T][R]*=b;b*=r-T}return h}function p4(i,t,r,s,c){const p=c<i?c:i,h=[],g=_2(i,s,t),y=c4(g,s,i,p,t),_=[];for(let b=0;b<r.length;++b){const T=r[b].clone(),R=T.w;T.x*=R,T.y*=R,T.z*=R,_[b]=T}for(let b=0;b<=p;++b){const T=_[g-i].clone().multiplyScalar(y[b][0]);for(let R=1;R<=i;++R)T.add(_[g-i+R].clone().multiplyScalar(y[b][R]));h[b]=T}for(let b=p+1;b<=c+1;++b)h[b]=new o.Vector4(0,0,0);return h}function u4(i,t){let r=1;for(let c=2;c<=i;++c)r*=c;let s=1;for(let c=2;c<=t;++c)s*=c;for(let c=2;c<=i-t;++c)s*=c;return r/s}function d4(i){const t=i.length,r=[],s=[];for(let p=0;p<t;++p){const h=i[p];r[p]=new o.Vector3(h.x,h.y,h.z),s[p]=h.w}const c=[];for(let p=0;p<t;++p){const h=r[p].clone();for(let g=1;g<=p;++g)h.sub(c[p-g].clone().multiplyScalar(u4(p,g)*s[g]));c[p]=h.divideScalar(s[0])}return c}function h4(i,t,r,s,c){const p=p4(i,t,r,s,c);return d4(p)}function jI(i,t,r,s,c,p,h,g){const y=_2(i,p,r),_=_2(t,h,s),b=PE(y,p,i,r),T=PE(_,h,t,s),R=[];for(let G=0;G<=t;++G){R[G]=new Vector4(0,0,0,0);for(let L=0;L<=i;++L){const O=c[y-i+L][_-t+G].clone(),P=O.w;O.x*=P,O.y*=P,O.z*=P,R[G].add(O.multiplyScalar(b[L]))}}const F=new Vector4(0,0,0,0);for(let G=0;G<=t;++G)F.add(R[G].multiplyScalar(T[G]));F.divideScalar(F.w),g.set(F.x,F.y,F.z)}class ex extends o.Curve{constructor(t,r,s,c,p){super(),this.degree=t,this.knots=r,this.controlPoints=[],this.startKnot=c||0,this.endKnot=p||this.knots.length-1;for(let h=0;h<s.length;++h){const g=s[h];this.controlPoints[h]=new o.Vector4(g.x,g.y,g.z,g.w)}}getPoint(t,r){const s=r||new o.Vector3,c=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),p=l4(this.degree,this.knots,this.controlPoints,c);return p.w!=1&&p.divideScalar(p.w),s.set(p.x,p.y,p.z)}getTangent(t,r){const s=r||new o.Vector3,c=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),p=h4(this.degree,this.knots,this.controlPoints,c,1);return s.copy(p[1]).normalize(),s}}var rl=A(25108);let to,ya,Hc;class LE extends o.Loader{constructor(t){super(t)}load(t,r,s,c){const p=this,h=p.path===""?o.LoaderUtils.extractUrlBase(t):p.path,g=new o.FileLoader(this.manager);g.setPath(p.path),g.setResponseType("arraybuffer"),g.setRequestHeader(p.requestHeader),g.setWithCredentials(p.withCredentials),g.load(t,function(y){try{r(p.parse(y,h))}catch(_){c?c(_):rl.error(_),p.manager.itemError(t)}},s,c)}parse(t,r){if(v4(t))to=new y4().parse(t);else{const c=sx(t);if(!_4(c))throw new Error("THREE.FBXLoader: Unknown format.");if(rx(c)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+rx(c));to=new A4().parse(c)}const s=new o.TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin);return new f4(s,this.manager).parse(to)}}class f4{constructor(t,r){this.textureLoader=t,this.manager=r}parse(){ya=this.parseConnections();const t=this.parseImages(),r=this.parseTextures(t),s=this.parseMaterials(r),c=this.parseDeformers(),p=new g4().parse(c);return this.parseScene(c,p,s),Hc}parseConnections(){const t=new Map;return"Connections"in to&&to.Connections.connections.forEach(function(s){const c=s[0],p=s[1],h=s[2];t.has(c)||t.set(c,{parents:[],children:[]});const g={ID:p,relationship:h};t.get(c).parents.push(g),t.has(p)||t.set(p,{parents:[],children:[]});const y={ID:c,relationship:h};t.get(p).children.push(y)}),t}parseImages(){const t={},r={};if("Video"in to.Objects){const s=to.Objects.Video;for(const c in s){const p=s[c],h=parseInt(c);if(t[h]=p.RelativeFilename||p.Filename,"Content"in p){const g=p.Content instanceof ArrayBuffer&&p.Content.byteLength>0,y=typeof p.Content=="string"&&p.Content!=="";if(g||y){const _=this.parseImage(s[c]);r[p.RelativeFilename||p.Filename]=_}}}}for(const s in t){const c=t[s];r[c]!==void 0?t[s]=r[c]:t[s]=t[s].split("\\").pop()}return t}parseImage(t){const r=t.Content,s=t.RelativeFilename||t.Filename,c=s.slice(s.lastIndexOf(".")+1).toLowerCase();let p;switch(c){case"bmp":p="image/bmp";break;case"jpg":case"jpeg":p="image/jpeg";break;case"png":p="image/png";break;case"tif":p="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&rl.warn("FBXLoader: TGA loader not found, skipping ",s),p="image/tga";break;default:rl.warn('FBXLoader: Image type "'+c+'" is not supported.');return}if(typeof r=="string")return"data:"+p+";base64,"+r;{const h=new Uint8Array(r);return window.URL.createObjectURL(new Blob([h],{type:p}))}}parseTextures(t){const r=new Map;if("Texture"in to.Objects){const s=to.Objects.Texture;for(const c in s){const p=this.parseTexture(s[c],t);r.set(parseInt(c),p)}}return r}parseTexture(t,r){const s=this.loadTexture(t,r);s.ID=t.id,s.name=t.attrName;const c=t.WrapModeU,p=t.WrapModeV,h=c!==void 0?c.value:0,g=p!==void 0?p.value:0;if(s.wrapS=h===0?o.RepeatWrapping:o.ClampToEdgeWrapping,s.wrapT=g===0?o.RepeatWrapping:o.ClampToEdgeWrapping,"Scaling"in t){const y=t.Scaling.value;s.repeat.x=y[0],s.repeat.y=y[1]}return s}loadTexture(t,r){let s;const c=this.textureLoader.path,p=ya.get(t.id).children;p!==void 0&&p.length>0&&r[p[0].ID]!==void 0&&(s=r[p[0].ID],(s.indexOf("blob:")===0||s.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let h;const g=t.FileName.slice(-3).toLowerCase();if(g==="tga"){const y=this.manager.getHandler(".tga");y===null?(rl.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),h=new o.Texture):(y.setPath(this.textureLoader.path),h=y.load(s))}else g==="psd"?(rl.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),h=new o.Texture):h=this.textureLoader.load(s);return this.textureLoader.setPath(c),h}parseMaterials(t){const r=new Map;if("Material"in to.Objects){const s=to.Objects.Material;for(const c in s){const p=this.parseMaterial(s[c],t);p!==null&&r.set(parseInt(c),p)}}return r}parseMaterial(t,r){const s=t.id,c=t.attrName;let p=t.ShadingModel;if(typeof p=="object"&&(p=p.value),!ya.has(s))return null;const h=this.parseParameters(t,r,s);let g;switch(p.toLowerCase()){case"phong":g=new o.MeshPhongMaterial;break;case"lambert":g=new o.MeshLambertMaterial;break;default:rl.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',p),g=new o.MeshPhongMaterial;break}return g.setValues(h),g.name=c,g}parseParameters(t,r,s){const c={};t.BumpFactor&&(c.bumpScale=t.BumpFactor.value),t.Diffuse?c.color=new o.Color().fromArray(t.Diffuse.value):t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(c.color=new o.Color().fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(c.displacementScale=t.DisplacementFactor.value),t.Emissive?c.emissive=new o.Color().fromArray(t.Emissive.value):t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(c.emissive=new o.Color().fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(c.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(c.opacity=parseFloat(t.Opacity.value)),c.opacity<1&&(c.transparent=!0),t.ReflectionFactor&&(c.reflectivity=t.ReflectionFactor.value),t.Shininess&&(c.shininess=t.Shininess.value),t.Specular?c.specular=new o.Color().fromArray(t.Specular.value):t.SpecularColor&&t.SpecularColor.type==="Color"&&(c.specular=new o.Color().fromArray(t.SpecularColor.value));const p=this;return ya.get(s).children.forEach(function(h){const g=h.relationship;switch(g){case"Bump":c.bumpMap=p.getTexture(r,h.ID);break;case"Maya|TEX_ao_map":c.aoMap=p.getTexture(r,h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":c.map=p.getTexture(r,h.ID),c.map!==void 0&&("colorSpace"in c.map?c.map.colorSpace="srgb":c.map.encoding=3001);break;case"DisplacementColor":c.displacementMap=p.getTexture(r,h.ID);break;case"EmissiveColor":c.emissiveMap=p.getTexture(r,h.ID),c.emissiveMap!==void 0&&("colorSpace"in c.emissiveMap?c.emissiveMap.colorSpace="srgb":c.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":c.normalMap=p.getTexture(r,h.ID);break;case"ReflectionColor":c.envMap=p.getTexture(r,h.ID),c.envMap!==void 0&&(c.envMap.mapping=o.EquirectangularReflectionMapping,"colorSpace"in c.envMap?c.envMap.colorSpace="srgb":c.envMap.encoding=3001);break;case"SpecularColor":c.specularMap=p.getTexture(r,h.ID),c.specularMap!==void 0&&("colorSpace"in c.specularMap?c.specularMap.colorSpace="srgb":c.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":c.alphaMap=p.getTexture(r,h.ID),c.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:rl.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",g);break}}),c}getTexture(t,r){return"LayeredTexture"in to.Objects&&r in to.Objects.LayeredTexture&&(rl.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=ya.get(r).children[0].ID),t.get(r)}parseDeformers(){const t={},r={};if("Deformer"in to.Objects){const s=to.Objects.Deformer;for(const c in s){const p=s[c],h=ya.get(parseInt(c));if(p.attrType==="Skin"){const g=this.parseSkeleton(h,s);g.ID=c,h.parents.length>1&&rl.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),g.geometryID=h.parents[0].ID,t[c]=g}else if(p.attrType==="BlendShape"){const g={id:c};g.rawTargets=this.parseMorphTargets(h,s),g.id=c,h.parents.length>1&&rl.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[c]=g}}}return{skeletons:t,morphTargets:r}}parseSkeleton(t,r){const s=[];return t.children.forEach(function(c){const p=r[c.ID];if(p.attrType!=="Cluster")return;const h={ID:c.ID,indices:[],weights:[],transformLink:new o.Matrix4().fromArray(p.TransformLink.a)};"Indexes"in p&&(h.indices=p.Indexes.a,h.weights=p.Weights.a),s.push(h)}),{rawBones:s,bones:[]}}parseMorphTargets(t,r){const s=[];for(let c=0;c<t.children.length;c++){const p=t.children[c],h=r[p.ID],g={name:h.attrName,initialWeight:h.DeformPercent,id:h.id,fullWeights:h.FullWeights.a};if(h.attrType!=="BlendShapeChannel")return;g.geoID=ya.get(parseInt(p.ID)).children.filter(function(y){return y.relationship===void 0})[0].ID,s.push(g)}return s}parseScene(t,r,s){Hc=new o.Group;const c=this.parseModels(t.skeletons,r,s),p=to.Objects.Model,h=this;c.forEach(function(y){const _=p[y.ID];h.setLookAtProperties(y,_),ya.get(y.ID).parents.forEach(function(T){const R=c.get(T.ID);R!==void 0&&R.add(y)}),y.parent===null&&Hc.add(y)}),this.bindSkeleton(t.skeletons,r,c),this.createAmbientLight(),Hc.traverse(function(y){if(y.userData.transformData){y.parent&&(y.userData.transformData.parentMatrix=y.parent.matrix,y.userData.transformData.parentMatrixWorld=y.parent.matrixWorld);const _=ix(y.userData.transformData);y.applyMatrix4(_),y.updateWorldMatrix()}});const g=new m4().parse();Hc.children.length===1&&Hc.children[0].isGroup&&(Hc.children[0].animations=g,Hc=Hc.children[0]),Hc.animations=g}parseModels(t,r,s){const c=new Map,p=to.Objects.Model;for(const h in p){const g=parseInt(h),y=p[h],_=ya.get(g);let b=this.buildSkeleton(_,t,g,y.attrName);if(!b){switch(y.attrType){case"Camera":b=this.createCamera(_);break;case"Light":b=this.createLight(_);break;case"Mesh":b=this.createMesh(_,r,s);break;case"NurbsCurve":b=this.createCurve(_,r);break;case"LimbNode":case"Root":b=new o.Bone;break;case"Null":default:b=new o.Group;break}b.name=y.attrName?o.PropertyBinding.sanitizeNodeName(y.attrName):"",b.ID=g}this.getTransformData(b,y),c.set(g,b)}return c}buildSkeleton(t,r,s,c){let p=null;return t.parents.forEach(function(h){for(const g in r){const y=r[g];y.rawBones.forEach(function(_,b){if(_.ID===h.ID){const T=p;p=new o.Bone,p.matrixWorld.copy(_.transformLink),p.name=c?o.PropertyBinding.sanitizeNodeName(c):"",p.ID=s,y.bones[b]=p,T!==null&&p.add(T)}})}}),p}createCamera(t){let r,s;if(t.children.forEach(function(c){const p=to.Objects.NodeAttribute[c.ID];p!==void 0&&(s=p)}),s===void 0)r=new o.Object3D;else{let c=0;s.CameraProjectionType!==void 0&&s.CameraProjectionType.value===1&&(c=1);let p=1;s.NearPlane!==void 0&&(p=s.NearPlane.value/1e3);let h=1e3;s.FarPlane!==void 0&&(h=s.FarPlane.value/1e3);let g=window.innerWidth,y=window.innerHeight;s.AspectWidth!==void 0&&s.AspectHeight!==void 0&&(g=s.AspectWidth.value,y=s.AspectHeight.value);const _=g/y;let b=45;s.FieldOfView!==void 0&&(b=s.FieldOfView.value);const T=s.FocalLength?s.FocalLength.value:null;switch(c){case 0:r=new o.PerspectiveCamera(b,_,p,h),T!==null&&r.setFocalLength(T);break;case 1:r=new o.OrthographicCamera(-g/2,g/2,y/2,-y/2,p,h);break;default:rl.warn("THREE.FBXLoader: Unknown camera type "+c+"."),r=new o.Object3D;break}}return r}createLight(t){let r,s;if(t.children.forEach(function(c){const p=to.Objects.NodeAttribute[c.ID];p!==void 0&&(s=p)}),s===void 0)r=new o.Object3D;else{let c;s.LightType===void 0?c=0:c=s.LightType.value;let p=16777215;s.Color!==void 0&&(p=new o.Color().fromArray(s.Color.value));let h=s.Intensity===void 0?1:s.Intensity.value/100;s.CastLightOnObject!==void 0&&s.CastLightOnObject.value===0&&(h=0);let g=0;s.FarAttenuationEnd!==void 0&&(s.EnableFarAttenuation!==void 0&&s.EnableFarAttenuation.value===0?g=0:g=s.FarAttenuationEnd.value);const y=1;switch(c){case 0:r=new o.PointLight(p,h,g,y);break;case 1:r=new o.DirectionalLight(p,h);break;case 2:let _=Math.PI/3;s.InnerAngle!==void 0&&(_=o.MathUtils.degToRad(s.InnerAngle.value));let b=0;s.OuterAngle!==void 0&&(b=o.MathUtils.degToRad(s.OuterAngle.value),b=Math.max(b,1)),r=new o.SpotLight(p,h,g,_,b,y);break;default:rl.warn("THREE.FBXLoader: Unknown light type "+s.LightType.value+", defaulting to a PointLight."),r=new o.PointLight(p,h);break}s.CastShadows!==void 0&&s.CastShadows.value===1&&(r.castShadow=!0)}return r}createMesh(t,r,s){let c,p=null,h=null;const g=[];return t.children.forEach(function(y){r.has(y.ID)&&(p=r.get(y.ID)),s.has(y.ID)&&g.push(s.get(y.ID))}),g.length>1?h=g:g.length>0?h=g[0]:(h=new o.MeshPhongMaterial({color:13421772}),g.push(h)),"color"in p.attributes&&g.forEach(function(y){y.vertexColors=!0}),p.FBX_Deformer?(c=new o.SkinnedMesh(p,h),c.normalizeSkinWeights()):c=new o.Mesh(p,h),c}createCurve(t,r){const s=t.children.reduce(function(p,h){return r.has(h.ID)&&(p=r.get(h.ID)),p},null),c=new o.LineBasicMaterial({color:3342591,linewidth:1});return new o.Line(s,c)}getTransformData(t,r){const s={};"InheritType"in r&&(s.inheritType=parseInt(r.InheritType.value)),"RotationOrder"in r?s.eulerOrder=ox(r.RotationOrder.value):s.eulerOrder="ZYX","Lcl_Translation"in r&&(s.translation=r.Lcl_Translation.value),"PreRotation"in r&&(s.preRotation=r.PreRotation.value),"Lcl_Rotation"in r&&(s.rotation=r.Lcl_Rotation.value),"PostRotation"in r&&(s.postRotation=r.PostRotation.value),"Lcl_Scaling"in r&&(s.scale=r.Lcl_Scaling.value),"ScalingOffset"in r&&(s.scalingOffset=r.ScalingOffset.value),"ScalingPivot"in r&&(s.scalingPivot=r.ScalingPivot.value),"RotationOffset"in r&&(s.rotationOffset=r.RotationOffset.value),"RotationPivot"in r&&(s.rotationPivot=r.RotationPivot.value),t.userData.transformData=s}setLookAtProperties(t,r){"LookAtProperty"in r&&ya.get(t.ID).children.forEach(function(c){if(c.relationship==="LookAtProperty"){const p=to.Objects.Model[c.ID];if("Lcl_Translation"in p){const h=p.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(h),Hc.add(t.target)):t.lookAt(new o.Vector3().fromArray(h))}}})}bindSkeleton(t,r,s){const c=this.parsePoseNodes();for(const p in t){const h=t[p];ya.get(parseInt(h.ID)).parents.forEach(function(y){if(r.has(y.ID)){const _=y.ID;ya.get(_).parents.forEach(function(T){s.has(T.ID)&&s.get(T.ID).bind(new o.Skeleton(h.bones),c[T.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in to.Objects){const r=to.Objects.Pose;for(const s in r)if(r[s].attrType==="BindPose"&&r[s].NbPoseNodes>0){const c=r[s].PoseNode;Array.isArray(c)?c.forEach(function(p){t[p.Node]=new o.Matrix4().fromArray(p.Matrix.a)}):t[c.Node]=new o.Matrix4().fromArray(c.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in to&&"AmbientColor"in to.GlobalSettings){const t=to.GlobalSettings.AmbientColor.value,r=t[0],s=t[1],c=t[2];if(r!==0||s!==0||c!==0){const p=new o.Color(r,s,c);Hc.add(new o.AmbientLight(p,1))}}}}class g4{parse(t){const r=new Map;if("Geometry"in to.Objects){const s=to.Objects.Geometry;for(const c in s){const p=ya.get(parseInt(c)),h=this.parseGeometry(p,s[c],t);r.set(parseInt(c),h)}}return r}parseGeometry(t,r,s){switch(r.attrType){case"Mesh":return this.parseMeshGeometry(t,r,s);case"NurbsCurve":return this.parseNurbsGeometry(r)}}parseMeshGeometry(t,r,s){const c=s.skeletons,p=[],h=t.parents.map(function(T){return to.Objects.Model[T.ID]});if(h.length===0)return;const g=t.children.reduce(function(T,R){return c[R.ID]!==void 0&&(T=c[R.ID]),T},null);t.children.forEach(function(T){s.morphTargets[T.ID]!==void 0&&p.push(s.morphTargets[T.ID])});const y=h[0],_={};"RotationOrder"in y&&(_.eulerOrder=ox(y.RotationOrder.value)),"InheritType"in y&&(_.inheritType=parseInt(y.InheritType.value)),"GeometricTranslation"in y&&(_.translation=y.GeometricTranslation.value),"GeometricRotation"in y&&(_.rotation=y.GeometricRotation.value),"GeometricScaling"in y&&(_.scale=y.GeometricScaling.value);const b=ix(_);return this.genGeometry(r,g,p,b)}genGeometry(t,r,s,c){const p=new o.BufferGeometry;t.attrName&&(p.name=t.attrName);const h=this.parseGeoNode(t,r),g=this.genBuffers(h),y=new o.Float32BufferAttribute(g.vertex,3);if(y.applyMatrix4(c),p.setAttribute("position",y),g.colors.length>0&&p.setAttribute("color",new o.Float32BufferAttribute(g.colors,3)),r&&(p.setAttribute("skinIndex",new o.Uint16BufferAttribute(g.weightsIndices,4)),p.setAttribute("skinWeight",new o.Float32BufferAttribute(g.vertexWeights,4)),p.FBX_Deformer=r),g.normal.length>0){const _=new o.Matrix3().getNormalMatrix(c),b=new o.Float32BufferAttribute(g.normal,3);b.applyNormalMatrix(_),p.setAttribute("normal",b)}if(g.uvs.forEach(function(_,b){let T="uv"+(b+1).toString();b===0&&(T="uv"),p.setAttribute(T,new o.Float32BufferAttribute(g.uvs[b],2))}),h.material&&h.material.mappingType!=="AllSame"){let _=g.materialIndex[0],b=0;if(g.materialIndex.forEach(function(T,R){T!==_&&(p.addGroup(b,R-b,_),_=T,b=R)}),p.groups.length>0){const T=p.groups[p.groups.length-1],R=T.start+T.count;R!==g.materialIndex.length&&p.addGroup(R,g.materialIndex.length-R,_)}p.groups.length===0&&p.addGroup(0,g.materialIndex.length,g.materialIndex[0])}return this.addMorphTargets(p,t,s,c),p}parseGeoNode(t,r){const s={};if(s.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],s.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(s.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(s.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(s.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){s.uv=[];let c=0;for(;t.LayerElementUV[c];)t.LayerElementUV[c].UV&&s.uv.push(this.parseUVs(t.LayerElementUV[c])),c++}return s.weightTable={},r!==null&&(s.skeleton=r,r.rawBones.forEach(function(c,p){c.indices.forEach(function(h,g){s.weightTable[h]===void 0&&(s.weightTable[h]=[]),s.weightTable[h].push({id:p,weight:c.weights[g]})})})),s}genBuffers(t){const r={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let s=0,c=0,p=!1,h=[],g=[],y=[],_=[],b=[],T=[];const R=this;return t.vertexIndices.forEach(function(F,G){let L,O=!1;F<0&&(F=F^-1,O=!0);let P=[],D=[];if(h.push(F*3,F*3+1,F*3+2),t.color){const z=E2(G,s,F,t.color);y.push(z[0],z[1],z[2])}if(t.skeleton){if(t.weightTable[F]!==void 0&&t.weightTable[F].forEach(function(z){D.push(z.weight),P.push(z.id)}),D.length>4){p||(rl.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),p=!0);const z=[0,0,0,0],H=[0,0,0,0];D.forEach(function(Q,W){let Y=Q,K=P[W];H.forEach(function(ie,ce,ge){if(Y>ie){ge[ce]=Y,Y=ie;const ae=z[ce];z[ce]=K,K=ae}})}),P=z,D=H}for(;D.length<4;)D.push(0),P.push(0);for(let z=0;z<4;++z)b.push(D[z]),T.push(P[z])}if(t.normal){const z=E2(G,s,F,t.normal);g.push(z[0],z[1],z[2])}t.material&&t.material.mappingType!=="AllSame"&&(L=E2(G,s,F,t.material)[0]),t.uv&&t.uv.forEach(function(z,H){const Q=E2(G,s,F,z);_[H]===void 0&&(_[H]=[]),_[H].push(Q[0]),_[H].push(Q[1])}),c++,O&&(R.genFace(r,t,h,L,g,y,_,b,T,c),s++,c=0,h=[],g=[],y=[],_=[],b=[],T=[])}),r}genFace(t,r,s,c,p,h,g,y,_,b){for(let T=2;T<b;T++)t.vertex.push(r.vertexPositions[s[0]]),t.vertex.push(r.vertexPositions[s[1]]),t.vertex.push(r.vertexPositions[s[2]]),t.vertex.push(r.vertexPositions[s[(T-1)*3]]),t.vertex.push(r.vertexPositions[s[(T-1)*3+1]]),t.vertex.push(r.vertexPositions[s[(T-1)*3+2]]),t.vertex.push(r.vertexPositions[s[T*3]]),t.vertex.push(r.vertexPositions[s[T*3+1]]),t.vertex.push(r.vertexPositions[s[T*3+2]]),r.skeleton&&(t.vertexWeights.push(y[0]),t.vertexWeights.push(y[1]),t.vertexWeights.push(y[2]),t.vertexWeights.push(y[3]),t.vertexWeights.push(y[(T-1)*4]),t.vertexWeights.push(y[(T-1)*4+1]),t.vertexWeights.push(y[(T-1)*4+2]),t.vertexWeights.push(y[(T-1)*4+3]),t.vertexWeights.push(y[T*4]),t.vertexWeights.push(y[T*4+1]),t.vertexWeights.push(y[T*4+2]),t.vertexWeights.push(y[T*4+3]),t.weightsIndices.push(_[0]),t.weightsIndices.push(_[1]),t.weightsIndices.push(_[2]),t.weightsIndices.push(_[3]),t.weightsIndices.push(_[(T-1)*4]),t.weightsIndices.push(_[(T-1)*4+1]),t.weightsIndices.push(_[(T-1)*4+2]),t.weightsIndices.push(_[(T-1)*4+3]),t.weightsIndices.push(_[T*4]),t.weightsIndices.push(_[T*4+1]),t.weightsIndices.push(_[T*4+2]),t.weightsIndices.push(_[T*4+3])),r.color&&(t.colors.push(h[0]),t.colors.push(h[1]),t.colors.push(h[2]),t.colors.push(h[(T-1)*3]),t.colors.push(h[(T-1)*3+1]),t.colors.push(h[(T-1)*3+2]),t.colors.push(h[T*3]),t.colors.push(h[T*3+1]),t.colors.push(h[T*3+2])),r.material&&r.material.mappingType!=="AllSame"&&(t.materialIndex.push(c),t.materialIndex.push(c),t.materialIndex.push(c)),r.normal&&(t.normal.push(p[0]),t.normal.push(p[1]),t.normal.push(p[2]),t.normal.push(p[(T-1)*3]),t.normal.push(p[(T-1)*3+1]),t.normal.push(p[(T-1)*3+2]),t.normal.push(p[T*3]),t.normal.push(p[T*3+1]),t.normal.push(p[T*3+2])),r.uv&&r.uv.forEach(function(R,F){t.uvs[F]===void 0&&(t.uvs[F]=[]),t.uvs[F].push(g[F][0]),t.uvs[F].push(g[F][1]),t.uvs[F].push(g[F][(T-1)*2]),t.uvs[F].push(g[F][(T-1)*2+1]),t.uvs[F].push(g[F][T*2]),t.uvs[F].push(g[F][T*2+1])})}addMorphTargets(t,r,s,c){if(s.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const p=this;s.forEach(function(h){h.rawTargets.forEach(function(g){const y=to.Objects.Geometry[g.geoID];y!==void 0&&p.genMorphGeometry(t,r,y,c,g.name)})})}genMorphGeometry(t,r,s,c,p){const h=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],g=s.Vertices!==void 0?s.Vertices.a:[],y=s.Indexes!==void 0?s.Indexes.a:[],_=t.attributes.position.count*3,b=new Float32Array(_);for(let G=0;G<y.length;G++){const L=y[G]*3;b[L]=g[G*3],b[L+1]=g[G*3+1],b[L+2]=g[G*3+2]}const T={vertexIndices:h,vertexPositions:b},R=this.genBuffers(T),F=new o.Float32BufferAttribute(R.vertex,3);F.name=p||s.attrName,F.applyMatrix4(c),t.morphAttributes.position.push(F)}parseNormals(t){const r=t.MappingInformationType,s=t.ReferenceInformationType,c=t.Normals.a;let p=[];return s==="IndexToDirect"&&("NormalIndex"in t?p=t.NormalIndex.a:"NormalsIndex"in t&&(p=t.NormalsIndex.a)),{dataSize:3,buffer:c,indices:p,mappingType:r,referenceType:s}}parseUVs(t){const r=t.MappingInformationType,s=t.ReferenceInformationType,c=t.UV.a;let p=[];return s==="IndexToDirect"&&(p=t.UVIndex.a),{dataSize:2,buffer:c,indices:p,mappingType:r,referenceType:s}}parseVertexColors(t){const r=t.MappingInformationType,s=t.ReferenceInformationType,c=t.Colors.a;let p=[];return s==="IndexToDirect"&&(p=t.ColorIndex.a),{dataSize:4,buffer:c,indices:p,mappingType:r,referenceType:s}}parseMaterialIndices(t){const r=t.MappingInformationType,s=t.ReferenceInformationType;if(r==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:s};const c=t.Materials.a,p=[];for(let h=0;h<c.length;++h)p.push(h);return{dataSize:1,buffer:c,indices:p,mappingType:r,referenceType:s}}parseNurbsGeometry(t){if(ex===void 0)return rl.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new o.BufferGeometry;const r=parseInt(t.Order);if(isNaN(r))return rl.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new o.BufferGeometry;const s=r-1,c=t.KnotVector.a,p=[],h=t.Points.a;for(let T=0,R=h.length;T<R;T+=4)p.push(new o.Vector4().fromArray(h,T));let g,y;if(t.Form==="Closed")p.push(p[0]);else if(t.Form==="Periodic"){g=s,y=c.length-1-g;for(let T=0;T<s;++T)p.push(p[T])}const b=new ex(s,c,p,g,y).getPoints(p.length*12);return new o.BufferGeometry().setFromPoints(b)}}class m4{parse(){const t=[],r=this.parseClips();if(r!==void 0)for(const s in r){const c=r[s],p=this.addClip(c);t.push(p)}return t}parseClips(){if(to.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const r=this.parseAnimationLayers(t);return this.parseAnimStacks(r)}parseAnimationCurveNodes(){const t=to.Objects.AnimationCurveNode,r=new Map;for(const s in t){const c=t[s];if(c.attrName.match(/S|R|T|DeformPercent/)!==null){const p={id:c.id,attr:c.attrName,curves:{}};r.set(p.id,p)}}return r}parseAnimationCurves(t){const r=to.Objects.AnimationCurve;for(const s in r){const c={id:r[s].id,times:r[s].KeyTime.a.map(E4),values:r[s].KeyValueFloat.a},p=ya.get(c.id);if(p!==void 0){const h=p.parents[0].ID,g=p.parents[0].relationship;g.match(/X/)?t.get(h).curves.x=c:g.match(/Y/)?t.get(h).curves.y=c:g.match(/Z/)?t.get(h).curves.z=c:g.match(/d|DeformPercent/)&&t.has(h)&&(t.get(h).curves.morph=c)}}}parseAnimationLayers(t){const r=to.Objects.AnimationLayer,s=new Map;for(const c in r){const p=[],h=ya.get(parseInt(c));h!==void 0&&(h.children.forEach(function(y,_){if(t.has(y.ID)){const b=t.get(y.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(p[_]===void 0){const T=ya.get(y.ID).parents.filter(function(R){return R.relationship!==void 0})[0].ID;if(T!==void 0){const R=to.Objects.Model[T.toString()];if(R===void 0){rl.warn("THREE.FBXLoader: Encountered a unused curve.",y);return}const F={modelName:R.attrName?o.PropertyBinding.sanitizeNodeName(R.attrName):"",ID:R.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Hc.traverse(function(G){G.ID===R.id&&(F.transform=G.matrix,G.userData.transformData&&(F.eulerOrder=G.userData.transformData.eulerOrder))}),F.transform||(F.transform=new o.Matrix4),"PreRotation"in R&&(F.preRotation=R.PreRotation.value),"PostRotation"in R&&(F.postRotation=R.PostRotation.value),p[_]=F}}p[_]&&(p[_][b.attr]=b)}else if(b.curves.morph!==void 0){if(p[_]===void 0){const T=ya.get(y.ID).parents.filter(function(P){return P.relationship!==void 0})[0].ID,R=ya.get(T).parents[0].ID,F=ya.get(R).parents[0].ID,G=ya.get(F).parents[0].ID,L=to.Objects.Model[G],O={modelName:L.attrName?o.PropertyBinding.sanitizeNodeName(L.attrName):"",morphName:to.Objects.Deformer[T].attrName};p[_]=O}p[_][b.attr]=b}}}),s.set(parseInt(c),p))}return s}parseAnimStacks(t){const r=to.Objects.AnimationStack,s={};for(const c in r){const p=ya.get(parseInt(c)).children;p.length>1&&rl.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const h=t.get(p[0].ID);s[c]={name:r[c].attrName,layer:h}}return s}addClip(t){let r=[];const s=this;return t.layer.forEach(function(c){r=r.concat(s.generateTracks(c))}),new o.AnimationClip(t.name,-1,r)}generateTracks(t){const r=[];let s=new o.Vector3,c=new o.Quaternion,p=new o.Vector3;if(t.transform&&t.transform.decompose(s,c,p),s=s.toArray(),c=new o.Euler().setFromQuaternion(c,t.eulerOrder).toArray(),p=p.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.T.curves,s,"position");h!==void 0&&r.push(h)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const h=this.generateRotationTrack(t.modelName,t.R.curves,c,t.preRotation,t.postRotation,t.eulerOrder);h!==void 0&&r.push(h)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.S.curves,p,"scale");h!==void 0&&r.push(h)}if(t.DeformPercent!==void 0){const h=this.generateMorphTrack(t);h!==void 0&&r.push(h)}return r}generateVectorTrack(t,r,s,c){const p=this.getTimesForAllAxes(r),h=this.getKeyframeTrackValues(p,r,s);return new o.VectorKeyframeTrack(t+"."+c,p,h)}generateRotationTrack(t,r,s,c,p,h){r.x!==void 0&&(this.interpolateRotations(r.x),r.x.values=r.x.values.map(o.MathUtils.degToRad)),r.y!==void 0&&(this.interpolateRotations(r.y),r.y.values=r.y.values.map(o.MathUtils.degToRad)),r.z!==void 0&&(this.interpolateRotations(r.z),r.z.values=r.z.values.map(o.MathUtils.degToRad));const g=this.getTimesForAllAxes(r),y=this.getKeyframeTrackValues(g,r,s);c!==void 0&&(c=c.map(o.MathUtils.degToRad),c.push(h),c=new o.Euler().fromArray(c),c=new o.Quaternion().setFromEuler(c)),p!==void 0&&(p=p.map(o.MathUtils.degToRad),p.push(h),p=new o.Euler().fromArray(p),p=new o.Quaternion().setFromEuler(p).invert());const _=new o.Quaternion,b=new o.Euler,T=[];for(let R=0;R<y.length;R+=3)b.set(y[R],y[R+1],y[R+2],h),_.setFromEuler(b),c!==void 0&&_.premultiply(c),p!==void 0&&_.multiply(p),_.toArray(T,R/3*4);return new o.QuaternionKeyframeTrack(t+".quaternion",g,T)}generateMorphTrack(t){const r=t.DeformPercent.curves.morph,s=r.values.map(function(p){return p/100}),c=Hc.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new o.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+c+"]",r.times,s)}getTimesForAllAxes(t){let r=[];if(t.x!==void 0&&(r=r.concat(t.x.times)),t.y!==void 0&&(r=r.concat(t.y.times)),t.z!==void 0&&(r=r.concat(t.z.times)),r=r.sort(function(s,c){return s-c}),r.length>1){let s=1,c=r[0];for(let p=1;p<r.length;p++){const h=r[p];h!==c&&(r[s]=h,c=h,s++)}r=r.slice(0,s)}return r}getKeyframeTrackValues(t,r,s){const c=s,p=[];let h=-1,g=-1,y=-1;return t.forEach(function(_){if(r.x&&(h=r.x.times.indexOf(_)),r.y&&(g=r.y.times.indexOf(_)),r.z&&(y=r.z.times.indexOf(_)),h!==-1){const b=r.x.values[h];p.push(b),c[0]=b}else p.push(c[0]);if(g!==-1){const b=r.y.values[g];p.push(b),c[1]=b}else p.push(c[1]);if(y!==-1){const b=r.z.values[y];p.push(b),c[2]=b}else p.push(c[2])}),p}interpolateRotations(t){for(let r=1;r<t.values.length;r++){const s=t.values[r-1],c=t.values[r]-s,p=Math.abs(c);if(p>=180){const h=p/180,g=c/h;let y=s+g;const _=t.times[r-1],T=(t.times[r]-_)/h;let R=_+T;const F=[],G=[];for(;R<t.times[r];)F.push(R),R+=T,G.push(y),y+=g;t.times=ax(t.times,r,F),t.values=ax(t.values,r,G)}}}}class A4{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,r){this.currentProp=t,this.currentPropName=r}parse(t){this.currentIndent=0,this.allNodes=new nx,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const r=this,s=t.split(/[\r\n]+/);return s.forEach(function(c,p){const h=c.match(/^[\s\t]*;/),g=c.match(/^[\s\t]*$/);if(h||g)return;const y=c.match("^\\t{"+r.currentIndent+"}(\\w+):(.*){",""),_=c.match("^\\t{"+r.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=c.match("^\\t{"+(r.currentIndent-1)+"}}");y?r.parseNodeBegin(c,y):_?r.parseNodeProperty(c,_,s[++p]):b?r.popStack():c.match(/^[^\s\t}]/)&&r.parseNodePropertyContinued(c)}),this.allNodes}parseNodeBegin(t,r){const s=r[1].trim().replace(/^"/,"").replace(/"$/,""),c=r[2].split(",").map(function(y){return y.trim().replace(/^"/,"").replace(/"$/,"")}),p={name:s},h=this.parseNodeAttr(c),g=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(s,p):s in g?(s==="PoseNode"?g.PoseNode.push(p):g[s].id!==void 0&&(g[s]={},g[s][g[s].id]=g[s]),h.id!==""&&(g[s][h.id]=p)):typeof h.id=="number"?(g[s]={},g[s][h.id]=p):s!=="Properties70"&&(s==="PoseNode"?g[s]=[p]:g[s]=p),typeof h.id=="number"&&(p.id=h.id),h.name!==""&&(p.attrName=h.name),h.type!==""&&(p.attrType=h.type),this.pushStack(p)}parseNodeAttr(t){let r=t[0];t[0]!==""&&(r=parseInt(t[0]),isNaN(r)&&(r=t[0]));let s="",c="";return t.length>1&&(s=t[1].replace(/^(\w+)::/,""),c=t[2]),{id:r,name:s,type:c}}parseNodeProperty(t,r,s){let c=r[1].replace(/^"/,"").replace(/"$/,"").trim(),p=r[2].replace(/^"/,"").replace(/"$/,"").trim();c==="Content"&&p===","&&(p=s.replace(/"/g,"").replace(/,$/,"").trim());const h=this.getCurrentNode();if(h.name==="Properties70"){this.parseNodeSpecialProperty(t,c,p);return}if(c==="C"){const y=p.split(",").slice(1),_=parseInt(y[0]),b=parseInt(y[1]);let T=p.split(",").slice(3);T=T.map(function(R){return R.trim().replace(/^"/,"")}),c="connections",p=[_,b],M4(p,T),h[c]===void 0&&(h[c]=[])}c==="Node"&&(h.id=p),c in h&&Array.isArray(h[c])?h[c].push(p):c!=="a"?h[c]=p:h.a=p,this.setCurrentProp(h,c),c==="a"&&p.slice(-1)!==","&&(h.a=zE(p))}parseNodePropertyContinued(t){const r=this.getCurrentNode();r.a+=t,t.slice(-1)!==","&&(r.a=zE(r.a))}parseNodeSpecialProperty(t,r,s){const c=s.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),p=c[0],h=c[1],g=c[2],y=c[3];let _=c[4];switch(h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":_=parseFloat(_);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":_=zE(_);break}this.getPrevNode()[p]={type:h,type2:g,flag:y,value:_},this.setCurrentProp(this.getPrevNode(),p)}}class y4{parse(t){const r=new tx(t);r.skip(23);const s=r.getUint32();if(s<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+s);const c=new nx;for(;!this.endOfContent(r);){const p=this.parseNode(r,s);p!==null&&c.add(p.name,p)}return c}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,r){const s={},c=r>=7500?t.getUint64():t.getUint32(),p=r>=7500?t.getUint64():t.getUint32();r>=7500?t.getUint64():t.getUint32();const h=t.getUint8(),g=t.getString(h);if(c===0)return null;const y=[];for(let R=0;R<p;R++)y.push(this.parseProperty(t));const _=y.length>0?y[0]:"",b=y.length>1?y[1]:"",T=y.length>2?y[2]:"";for(s.singleProperty=p===1&&t.getOffset()===c;c>t.getOffset();){const R=this.parseNode(t,r);R!==null&&this.parseSubNode(g,s,R)}return s.propertyList=y,typeof _=="number"&&(s.id=_),b!==""&&(s.attrName=b),T!==""&&(s.attrType=T),g!==""&&(s.name=g),s}parseSubNode(t,r,s){if(s.singleProperty===!0){const c=s.propertyList[0];Array.isArray(c)?(r[s.name]=s,s.a=c):r[s.name]=c}else if(t==="Connections"&&s.name==="C"){const c=[];s.propertyList.forEach(function(p,h){h!==0&&c.push(p)}),r.connections===void 0&&(r.connections=[]),r.connections.push(c)}else if(s.name==="Properties70")Object.keys(s).forEach(function(p){r[p]=s[p]});else if(t==="Properties70"&&s.name==="P"){let c=s.propertyList[0],p=s.propertyList[1];const h=s.propertyList[2],g=s.propertyList[3];let y;c.indexOf("Lcl ")===0&&(c=c.replace("Lcl ","Lcl_")),p.indexOf("Lcl ")===0&&(p=p.replace("Lcl ","Lcl_")),p==="Color"||p==="ColorRGB"||p==="Vector"||p==="Vector3D"||p.indexOf("Lcl_")===0?y=[s.propertyList[4],s.propertyList[5],s.propertyList[6]]:y=s.propertyList[4],r[c]={type:p,type2:h,flag:g,value:y}}else r[s.name]===void 0?typeof s.id=="number"?(r[s.name]={},r[s.name][s.id]=s):r[s.name]=s:s.name==="PoseNode"?(Array.isArray(r[s.name])||(r[s.name]=[r[s.name]]),r[s.name].push(s)):r[s.name][s.id]===void 0&&(r[s.name][s.id]=s)}parseProperty(t){const r=t.getString(1);let s;switch(r){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return s=t.getUint32(),t.getArrayBuffer(s);case"S":return s=t.getUint32(),t.getString(s);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const c=t.getUint32(),p=t.getUint32(),h=t.getUint32();if(p===0)switch(r){case"b":case"c":return t.getBooleanArray(c);case"d":return t.getFloat64Array(c);case"f":return t.getFloat32Array(c);case"i":return t.getInt32Array(c);case"l":return t.getInt64Array(c)}const g=Gf(new Uint8Array(t.getArrayBuffer(h))),y=new tx(g.buffer);switch(r){case"b":case"c":return y.getBooleanArray(c);case"d":return y.getFloat64Array(c);case"f":return y.getFloat32Array(c);case"i":return y.getInt32Array(c);case"l":return y.getInt64Array(c)}default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}}class tx{constructor(t,r){this.dv=new DataView(t),this.offset=0,this.littleEndian=r!==void 0?r:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const r=[];for(let s=0;s<t;s++)r.push(this.getBoolean());return r}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const r=[];for(let s=0;s<t;s++)r.push(this.getInt32());return r}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r&2147483648?(r=~r&4294967295,t=~t&4294967295,t===4294967295&&(r=r+1&4294967295),t=t+1&4294967295,-(r*4294967296+t)):r*4294967296+t}getInt64Array(t){const r=[];for(let s=0;s<t;s++)r.push(this.getInt64());return r}getUint64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const r=[];for(let s=0;s<t;s++)r.push(this.getFloat32());return r}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const r=[];for(let s=0;s<t;s++)r.push(this.getFloat64());return r}getArrayBuffer(t){const r=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}getString(t){let r=[];for(let c=0;c<t;c++)r[c]=this.getUint8();const s=r.indexOf(0);return s>=0&&(r=r.slice(0,s)),o.LoaderUtils.decodeText(new Uint8Array(r))}}class nx{add(t,r){this[t]=r}}function v4(i){const t="Kaydara FBX Binary  \0";return i.byteLength>=t.length&&t===sx(i,0,t.length)}function _4(i){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function s(c){const p=i[c-1];return i=i.slice(r+c),r++,p}for(let c=0;c<t.length;++c)if(s(1)===t[c])return!1;return!0}function rx(i){const t=/FBXVersion: (\d+)/,r=i.match(t);if(r)return parseInt(r[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function E4(i){return i/46186158e3}const b4=[];function E2(i,t,r,s){let c;switch(s.mappingType){case"ByPolygonVertex":c=i;break;case"ByPolygon":c=t;break;case"ByVertice":c=r;break;case"AllSame":c=s.indices[0];break;default:rl.warn("THREE.FBXLoader: unknown attribute mapping type "+s.mappingType)}s.referenceType==="IndexToDirect"&&(c=s.indices[c]);const p=c*s.dataSize,h=p+s.dataSize;return x4(b4,s.buffer,p,h)}const kE=new o.Euler,N0=new o.Vector3;function ix(i){const t=new o.Matrix4,r=new o.Matrix4,s=new o.Matrix4,c=new o.Matrix4,p=new o.Matrix4,h=new o.Matrix4,g=new o.Matrix4,y=new o.Matrix4,_=new o.Matrix4,b=new o.Matrix4,T=new o.Matrix4,R=new o.Matrix4,F=i.inheritType?i.inheritType:0;if(i.translation&&t.setPosition(N0.fromArray(i.translation)),i.preRotation){const ce=i.preRotation.map(o.MathUtils.degToRad);ce.push(i.eulerOrder),r.makeRotationFromEuler(kE.fromArray(ce))}if(i.rotation){const ce=i.rotation.map(o.MathUtils.degToRad);ce.push(i.eulerOrder),s.makeRotationFromEuler(kE.fromArray(ce))}if(i.postRotation){const ce=i.postRotation.map(o.MathUtils.degToRad);ce.push(i.eulerOrder),c.makeRotationFromEuler(kE.fromArray(ce)),c.invert()}i.scale&&p.scale(N0.fromArray(i.scale)),i.scalingOffset&&g.setPosition(N0.fromArray(i.scalingOffset)),i.scalingPivot&&h.setPosition(N0.fromArray(i.scalingPivot)),i.rotationOffset&&y.setPosition(N0.fromArray(i.rotationOffset)),i.rotationPivot&&_.setPosition(N0.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(T.copy(i.parentMatrix),b.copy(i.parentMatrixWorld));const G=r.clone().multiply(s).multiply(c),L=new o.Matrix4;L.extractRotation(b);const O=new o.Matrix4;O.copyPosition(b);const P=O.clone().invert().multiply(b),D=L.clone().invert().multiply(P),z=p,H=new o.Matrix4;if(F===0)H.copy(L).multiply(G).multiply(D).multiply(z);else if(F===1)H.copy(L).multiply(D).multiply(G).multiply(z);else{const ge=new o.Matrix4().scale(new o.Vector3().setFromMatrixScale(T)).clone().invert(),ae=D.clone().multiply(ge);H.copy(L).multiply(G).multiply(ae).multiply(z)}const Q=_.clone().invert(),W=h.clone().invert();let Y=t.clone().multiply(y).multiply(_).multiply(r).multiply(s).multiply(c).multiply(Q).multiply(g).multiply(h).multiply(p).multiply(W);const K=new o.Matrix4().copyPosition(Y),ie=b.clone().multiply(K);return R.copyPosition(ie),Y=R.clone().multiply(H),Y.premultiply(b.invert()),Y}function ox(i){i=i||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(rl.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[i]}function zE(i){return i.split(",").map(function(r){return parseFloat(r)})}function sx(i,t,r){return t===void 0&&(t=0),r===void 0&&(r=i.byteLength),o.LoaderUtils.decodeText(new Uint8Array(i,t,r))}function M4(i,t){for(let r=0,s=i.length,c=t.length;r<c;r++,s++)i[s]=t[r]}function x4(i,t,r,s){for(let c=r,p=0;c<s;c++,p++)i[p]=t[c];return i}function ax(i,t,r){return i.slice(0,t).concat(r).concat(i.slice(t))}function GE(i){return(0,E.D)(LE,i)}GE.preload=i=>E.D.preload(LE,i),GE.clear=i=>E.D.clear(LE,i);class C4{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const r=this.workerCreator();r.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=r}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,r){const s=this.workersResolve[t];if(s&&s(r),this.queue.length){const{resolve:c,msg:p,transfer:h}=this.queue.shift();this.workersResolve[t]=c,this.workers[t].postMessage(p,h)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,r){return new Promise(s=>{const c=this._getIdleWorker();c!==-1?(this._initWorker(c),this.workerStatus|=1<<c,this.workersResolve[c]=s,this.workers[c].postMessage(t,r)):this.queue.push({resolve:s,msg:t,transfer:r})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var lx=A(48764).lW;const cx=0,WI=1,S4=2,VI=3,px=0,w4=0,T4=2,B4=0,QI=1,XI=160,KI=161,YI=162,JI=163,qI=166,R4=0,I4=1,ZI=0,$I=1,UE=2,e6=3,t6=4,n6=5,r6=6,i6=7,o6=8,s6=9,a6=10,l6=11,c6=12,p6=13,u6=14,d6=15,h6=16,f6=17,g6=18,m6=0,F4=1,A6=2,y6=3,v6=4,_6=5,E6=6,b6=7,M6=8,x6=9,C6=10,S6=11,w6=0,T6=1,B6=2,R6=13,I6=14,F6=15,O6=128,ux=64,D6=32,P6=16,dx=0,L6=1,k6=2,z6=3,G6=4,U6=5,N6=6,H6=7,j6=8,hx=9,W6=10,V6=13,Q6=14,NE=15,fx=16,X6=17,K6=20,Y6=21,HE=22,J6=23,q6=24,Z6=27,$6=28,eF=29,tF=30,nF=31,rF=34,iF=35,oF=36,gx=37,sF=38,aF=41,lF=42,jE=43,cF=44,pF=45,uF=48,dF=49,hF=50,fF=58,gF=59,mF=62,AF=63,yF=64,vF=65,_F=68,EF=69,bF=70,MF=71,xF=74,CF=75,mx=76,SF=77,wF=78,TF=81,BF=82,Ax=83,RF=84,IF=85,FF=88,OF=89,DF=90,PF=91,LF=92,kF=95,zF=96,yx=97,GF=98,UF=99,vx=100,NF=101,HF=102,_x=103,jF=104,WF=105,VF=106,QF=107,XF=108,Ex=109,KF=110,YF=111,JF=112,qF=113,ZF=114,$F=115,eO=116,tO=117,nO=118,rO=119,iO=120,oO=121,sO=122,aO=123,lO=124,cO=125,pO=126,uO=127,dO=128,hO=129,fO=130,gO=131,mO=132,AO=133,yO=134,vO=135,_O=136,EO=137,bO=138,MO=139,xO=140,CO=141,SO=142,wO=143,TO=144,BO=145,RO=146,IO=147,FO=148,OO=149,DO=150,PO=151,LO=152,kO=153,zO=154,GO=155,UO=156,NO=157,HO=158,jO=159,WO=160,VO=161,QO=162,XO=163,KO=164,YO=165,JO=166,qO=167,ZO=168,$O=169,e5=170,t5=171,n5=172,r5=173,i5=174,o5=175,s5=176,a5=177,l5=178,c5=179,p5=180,u5=181,d5=182,h5=183,f5=184,g5=1000156007,m5=1000156008,A5=1000156009,y5=1000156010,v5=1000156011,_5=1000156017,E5=1000156018,b5=1000156019,M5=1000156020,x5=1000156021,C5=1000054e3,S5=1000054001,w5=1000054002,T5=1000054003,B5=1000054004,R5=1000054005,I5=1000054006,F5=1000054007,O5=1000066e3,D5=1000066001,P5=1000066002,L5=1000066003,k5=1000066004,z5=1000066005,G5=1000066006,U5=1000066007,N5=1000066008,H5=1000066009,j5=1000066010,W5=1000066011,V5=1000066012,Q5=1000066013,X5=100034e4,K5=1000340001;class O4{constructor(){this.vkFormat=dx,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=cx,this.levels=[],this.dataFormatDescriptor=[{vendorId:w4,descriptorType:px,descriptorBlockSize:0,versionNumber:T4,colorModel:B4,colorPrimaries:F4,transferFunction:UE,flags:R4,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class NA{constructor(t,r,s,c){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+r,s),this._littleEndian=c,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),s=t+s1(2,32)*r;return this._offset+=8,s}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,r=0){const s=this._offset;let c=0;for(;this._dataView.getUint8(this._offset)!==r&&c<t;)c++,this._offset++;return c<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+s,c)}}const D4=null,bx=new Uint8Array([0]),kl=[171,75,84,88,32,50,48,187,13,10,26,10],Mx=68;function xx(i){return typeof TextEncoder!="undefined"?new TextEncoder().encode(i):lx.from(i)}function Cx(i){return typeof TextDecoder!="undefined"?new TextDecoder().decode(i):lx.from(i).toString("utf8")}function b2(i){let t=0;for(const c of i)t+=c.byteLength;const r=new Uint8Array(t);let s=0;for(const c of i)r.set(new Uint8Array(c),s),s+=c.byteLength;return r}function P4(i){const t=new Uint8Array(i.buffer,i.byteOffset,kl.length);if(t[0]!==kl[0]||t[1]!==kl[1]||t[2]!==kl[2]||t[3]!==kl[3]||t[4]!==kl[4]||t[5]!==kl[5]||t[6]!==kl[6]||t[7]!==kl[7]||t[8]!==kl[8]||t[9]!==kl[9]||t[10]!==kl[10]||t[11]!==kl[11])throw new Error("Missing KTX 2.0 identifier.");const r=new O4,s=17*Uint32Array.BYTES_PER_ELEMENT,c=new NA(i,kl.length,s,!0);r.vkFormat=c._nextUint32(),r.typeSize=c._nextUint32(),r.pixelWidth=c._nextUint32(),r.pixelHeight=c._nextUint32(),r.pixelDepth=c._nextUint32(),r.layerCount=c._nextUint32(),r.faceCount=c._nextUint32();const p=c._nextUint32();r.supercompressionScheme=c._nextUint32();const h=c._nextUint32(),g=c._nextUint32(),y=c._nextUint32(),_=c._nextUint32(),b=c._nextUint64(),T=c._nextUint64(),R=p*3*8,F=new NA(i,kl.length+s,R,!0);for(let Ye=0;Ye<p;Ye++)r.levels.push({levelData:new Uint8Array(i.buffer,i.byteOffset+F._nextUint64(),F._nextUint64()),uncompressedByteLength:F._nextUint64()});const G=new NA(i,h,g,!0),L={vendorId:G._skip(4)._nextUint16(),descriptorType:G._nextUint16(),versionNumber:G._nextUint16(),descriptorBlockSize:G._nextUint16(),colorModel:G._nextUint8(),colorPrimaries:G._nextUint8(),transferFunction:G._nextUint8(),flags:G._nextUint8(),texelBlockDimension:[G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8()],bytesPlane:[G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8()],samples:[]},O=6,P=4,D=(L.descriptorBlockSize/4-O)/P;for(let Ye=0;Ye<D;Ye++){const Ce={bitOffset:G._nextUint16(),bitLength:G._nextUint8(),channelType:G._nextUint8(),samplePosition:[G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Ce.channelType&ux?(Ce.sampleLower=G._nextInt32(),Ce.sampleUpper=G._nextInt32()):(Ce.sampleLower=G._nextUint32(),Ce.sampleUpper=G._nextUint32()),L.samples[Ye]=Ce}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(L);const z=new NA(i,y,_,!0);for(;z._offset<_;){const Ye=z._nextUint32(),Ce=z._scan(Ye),Ee=Cx(Ce),_e=z._scan(Ye-Ce.byteLength);r.keyValue[Ee]=Ee.match(/^ktx/i)?Cx(_e):_e,z._offset%4&&z._skip(4-z._offset%4)}if(T<=0)return r;const H=new NA(i,b,T,!0),Q=H._nextUint16(),W=H._nextUint16(),Y=H._nextUint32(),K=H._nextUint32(),ie=H._nextUint32(),ce=H._nextUint32(),ge=[];for(let Ye=0;Ye<p;Ye++)ge.push({imageFlags:H._nextUint32(),rgbSliceByteOffset:H._nextUint32(),rgbSliceByteLength:H._nextUint32(),alphaSliceByteOffset:H._nextUint32(),alphaSliceByteLength:H._nextUint32()});const ae=b+H._offset,xe=ae+Y,ve=xe+K,Be=ve+ie,Ue=new Uint8Array(i.buffer,i.byteOffset+ae,Y),Ie=new Uint8Array(i.buffer,i.byteOffset+xe,K),Ne=new Uint8Array(i.buffer,i.byteOffset+ve,ie),Le=new Uint8Array(i.buffer,i.byteOffset+Be,ce);return r.globalData={endpointCount:Q,selectorCount:W,imageDescs:ge,endpointsData:Ue,selectorsData:Ie,tablesData:Ne,extendedData:Le},r}function M2(){return M2=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},M2.apply(this,arguments)}const L4={keepWriter:!1};function Y5(i,t={}){t=M2({},L4,t);let r=new ArrayBuffer(0);if(i.globalData){const D=new ArrayBuffer(20+i.globalData.imageDescs.length*5*4),z=new DataView(D);z.setUint16(0,i.globalData.endpointCount,!0),z.setUint16(2,i.globalData.selectorCount,!0),z.setUint32(4,i.globalData.endpointsData.byteLength,!0),z.setUint32(8,i.globalData.selectorsData.byteLength,!0),z.setUint32(12,i.globalData.tablesData.byteLength,!0),z.setUint32(16,i.globalData.extendedData.byteLength,!0);for(let H=0;H<i.globalData.imageDescs.length;H++){const Q=i.globalData.imageDescs[H];z.setUint32(20+H*5*4+0,Q.imageFlags,!0),z.setUint32(20+H*5*4+4,Q.rgbSliceByteOffset,!0),z.setUint32(20+H*5*4+8,Q.rgbSliceByteLength,!0),z.setUint32(20+H*5*4+12,Q.alphaSliceByteOffset,!0),z.setUint32(20+H*5*4+16,Q.alphaSliceByteLength,!0)}r=b2([D,i.globalData.endpointsData,i.globalData.selectorsData,i.globalData.tablesData,i.globalData.extendedData])}const s=[];let c=i.keyValue;t.keepWriter||(c=M2({},i.keyValue,{KTXwriter:D4}));for(const D in c){const z=c[D],H=xx(D),Q=typeof z=="string"?xx(z):z,W=H.byteLength+1+Q.byteLength+1,Y=W%4?4-W%4:0;s.push(b2([new Uint32Array([W]),H,bx,Q,bx,new Uint8Array(Y).fill(0)]))}const p=b2(s);if(i.dataFormatDescriptor.length!==1||i.dataFormatDescriptor[0].descriptorType!==px)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const h=i.dataFormatDescriptor[0],g=new ArrayBuffer(28+h.samples.length*16),y=new DataView(g),_=24+h.samples.length*16;if(y.setUint32(0,g.byteLength,!0),y.setUint16(4,h.vendorId,!0),y.setUint16(6,h.descriptorType,!0),y.setUint16(8,h.versionNumber,!0),y.setUint16(10,_,!0),y.setUint8(12,h.colorModel),y.setUint8(13,h.colorPrimaries),y.setUint8(14,h.transferFunction),y.setUint8(15,h.flags),!Array.isArray(h.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");y.setUint8(16,h.texelBlockDimension[0]),y.setUint8(17,h.texelBlockDimension[1]),y.setUint8(18,h.texelBlockDimension[2]),y.setUint8(19,h.texelBlockDimension[3]);for(let D=0;D<8;D++)y.setUint8(20+D,h.bytesPlane[D]);for(let D=0;D<h.samples.length;D++){const z=h.samples[D],H=28+D*16;if(z.channelID)throw new Error("channelID has been renamed to channelType.");y.setUint16(H+0,z.bitOffset,!0),y.setUint8(H+2,z.bitLength),y.setUint8(H+3,z.channelType),y.setUint8(H+4,z.samplePosition[0]),y.setUint8(H+5,z.samplePosition[1]),y.setUint8(H+6,z.samplePosition[2]),y.setUint8(H+7,z.samplePosition[3]),z.channelType&ux?(y.setInt32(H+8,z.sampleLower,!0),y.setInt32(H+12,z.sampleUpper,!0)):(y.setUint32(H+8,z.sampleLower,!0),y.setUint32(H+12,z.sampleUpper,!0))}const b=kl.length+Mx+i.levels.length*3*8,T=b+g.byteLength;let R=r.byteLength>0?T+p.byteLength:0;R%8&&(R+=8-R%8);const F=[],G=new DataView(new ArrayBuffer(i.levels.length*3*8));let L=(R||T+p.byteLength)+r.byteLength;for(let D=0;D<i.levels.length;D++){const z=i.levels[D];F.push(z.levelData),G.setBigUint64(D*24+0,BigInt(L),!0),G.setBigUint64(D*24+8,BigInt(z.levelData.byteLength),!0),G.setBigUint64(D*24+16,BigInt(z.uncompressedByteLength),!0),L+=z.levelData.byteLength}const O=new ArrayBuffer(Mx),P=new DataView(O);return P.setUint32(0,i.vkFormat,!0),P.setUint32(4,i.typeSize,!0),P.setUint32(8,i.pixelWidth,!0),P.setUint32(12,i.pixelHeight,!0),P.setUint32(16,i.pixelDepth,!0),P.setUint32(20,i.layerCount,!0),P.setUint32(24,i.faceCount,!0),P.setUint32(28,i.levels.length,!0),P.setUint32(32,i.supercompressionScheme,!0),P.setUint32(36,b,!0),P.setUint32(40,g.byteLength,!0),P.setUint32(44,T,!0),P.setUint32(48,p.byteLength,!0),P.setBigUint64(52,BigInt(r.byteLength>0?R:0),!0),P.setBigUint64(60,BigInt(r.byteLength),!0),new Uint8Array(b2([new Uint8Array(kl).buffer,O,G.buffer,g,p,R>0?new ArrayBuffer(R-(T+p.byteLength)):new ArrayBuffer(0),r,...F]))}var k4=A(48764).lW;let WE,Sh,VE;const QE={env:{emscripten_notify_memory_growth:function(i){VE=new Uint8Array(Sh.exports.memory.buffer)}}};class z4{init(){return WE||(WE=typeof fetch!="undefined"?fetch("data:application/wasm;base64,"+Sx).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,QE)).then(this._init):WebAssembly.instantiate(k4.from(Sx,"base64"),QE).then(this._init),WE)}_init(t){Sh=t.instance,QE.env.emscripten_notify_memory_growth(0)}decode(t,r=0){if(!Sh)throw new Error("ZSTDDecoder: Await .init() before decoding.");const s=t.byteLength,c=Sh.exports.malloc(s);VE.set(t,c),r=r||Number(Sh.exports.ZSTD_findDecompressedSize(c,s));const p=Sh.exports.malloc(r),h=Sh.exports.ZSTD_decompress(p,r,c,s),g=VE.slice(p,p+h);return Sh.exports.free(c),Sh.exports.free(p),g}}const Sx="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class G4 extends o.CompressedTexture{constructor(t,r,s,c,p,h){super(t,r,s,p,h),this.isCompressedArrayTexture=!0,this.image.depth=c,this.wrapR=o.ClampToEdgeWrapping}}class U4 extends o.Texture{constructor(t=null,r=1,s=1,c=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:s,depth:c},this.magFilter=o.NearestFilter,this.minFilter=o.NearestFilter,this.wrapR=o.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var HA=A(25108),N4=Object.defineProperty,H4=(i,t,r)=>t in i?N4(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,x2=(i,t,r)=>(H4(i,typeof t!="symbol"?t+"":t,r),r);const XE=new WeakMap;let KE=0,YE;const jA=class extends o.Loader{constructor(i){super(i),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new C4,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!="undefined"&&HA.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(i){return this.transcoderPath=i,this}setWorkerLimit(i){return this.workerPool.setWorkerLimit(i),this}detectSupport(i){return this.workerConfig={astcSupported:i.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:i.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:i.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:i.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:i.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:i.extensions.has("WEBGL_compressed_texture_pvrtc")||i.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},i.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const i=new o.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setWithCredentials(this.withCredentials);const t=i.loadAsync("basis_transcoder.js"),r=new o.FileLoader(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const s=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(([c,p])=>{const h=jA.BasisWorker.toString(),g=["/* constants */","let _EngineFormat = "+JSON.stringify(jA.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(jA.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(jA.BasisFormat),"/* basis_transcoder.js */",c,"/* worker */",h.substring(h.indexOf("{")+1,h.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([g])),this.transcoderBinary=p,this.workerPool.setWorkerCreator(()=>{const y=new Worker(this.workerSourceURL),_=this.transcoderBinary.slice(0);return y.postMessage({type:"init",config:this.workerConfig,transcoderBinary:_},[_]),y})}),KE>0&&HA.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),KE++}return this.transcoderPending}load(i,t,r,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const c=new o.FileLoader(this.manager);c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials),c.load(i,p=>{if(XE.has(p))return XE.get(p).promise.then(t).catch(s);this._createTexture(p).then(h=>t?t(h):null).catch(s)},r,s)}_createTextureFrom(i,t){const{mipmaps:r,width:s,height:c,format:p,type:h,error:g,dfdTransferFn:y,dfdFlags:_}=i;if(h==="error")return Promise.reject(g);const b=t.layerCount>1?new G4(r,s,c,t.layerCount,p,o.UnsignedByteType):new o.CompressedTexture(r,s,c,p,o.UnsignedByteType);return b.minFilter=r.length===1?o.LinearFilter:o.LinearMipmapLinearFilter,b.magFilter=o.LinearFilter,b.generateMipmaps=!1,b.needsUpdate=!0,"colorSpace"in b?b.colorSpace=y===UE?"srgb":"srgb-linear":b.encoding=y===UE?3001:3e3,b.premultiplyAlpha=!!(_&I4),b}_createTexture(r){return es(this,arguments,function*(i,t={}){const s=P4(new Uint8Array(i));if(s.vkFormat!==dx)return W4(s);const c=t,p=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:i,taskConfig:c},[i])).then(h=>this._createTextureFrom(h.data,s));return XE.set(i,{promise:p}),p})}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),KE--,this}};let pm=jA;x2(pm,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),x2(pm,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),x2(pm,"EngineFormat",{RGBAFormat:o.RGBAFormat,RGBA_ASTC_4x4_Format:o.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:o.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:o.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:o.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:o.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:o.RGB_ETC1_Format,RGB_ETC2_Format:o.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:o.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:o.RGB_S3TC_DXT1_Format}),x2(pm,"BasisWorker",function(){let i,t,r;const s=_EngineFormat,c=_TranscoderFormat,p=_BasisFormat;self.addEventListener("message",function(G){const L=G.data;switch(L.type){case"init":i=L.config,h(L.transcoderBinary);break;case"transcode":t.then(()=>{try{const{width:O,height:P,hasAlpha:D,mipmaps:z,format:H,dfdTransferFn:Q,dfdFlags:W}=g(L.buffer),Y=[];for(let K=0;K<z.length;++K)Y.push(z[K].data.buffer);self.postMessage({type:"transcode",id:L.id,width:O,height:P,hasAlpha:D,mipmaps:z,format:H,dfdTransferFn:Q,dfdFlags:W},Y)}catch(O){HA.error(O),self.postMessage({type:"error",id:L.id,error:O.message})}});break}});function h(G){t=new Promise(L=>{r={wasmBinary:G,onRuntimeInitialized:L},BASIS(r)}).then(()=>{r.initializeBasis(),r.KTX2File===void 0&&HA.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function g(G){const L=new r.KTX2File(new Uint8Array(G));function O(){L.close(),L.delete()}if(!L.isValid())throw O(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const P=L.isUASTC()?p.UASTC_4x4:p.ETC1S,D=L.getWidth(),z=L.getHeight(),H=L.getLayers()||1,Q=L.getLevels(),W=L.getHasAlpha(),Y=L.getDFDTransferFunc(),K=L.getDFDFlags(),{transcoderFormat:ie,engineFormat:ce}=T(P,D,z,W);if(!D||!z||!Q)throw O(),new Error("THREE.KTX2Loader:	Invalid texture");if(!L.startTranscoding())throw O(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ge=[];for(let ae=0;ae<Q;ae++){const xe=[];let ve,Be;for(let Ue=0;Ue<H;Ue++){const Ie=L.getImageLevelInfo(ae,Ue,0);ve=Ie.origWidth<4?Ie.origWidth:Ie.width,Be=Ie.origHeight<4?Ie.origHeight:Ie.height;const Ne=new Uint8Array(L.getImageTranscodedSizeInBytes(ae,Ue,0,ie));if(!L.transcodeImage(Ne,ae,Ue,0,ie,0,-1,-1))throw O(),new Error("THREE.KTX2Loader: .transcodeImage failed.");xe.push(Ne)}ge.push({data:F(xe),width:ve,height:Be})}return O(),{width:D,height:z,hasAlpha:W,mipmaps:ge,format:ce,dfdTransferFn:Y,dfdFlags:K}}const y=[{if:"astcSupported",basisFormat:[p.UASTC_4x4],transcoderFormat:[c.ASTC_4x4,c.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.BC7_M5,c.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.BC1,c.BC3],engineFormat:[s.RGB_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.ETC1,c.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.PVRTC1_4_RGB,c.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],_=y.sort(function(G,L){return G.priorityETC1S-L.priorityETC1S}),b=y.sort(function(G,L){return G.priorityUASTC-L.priorityUASTC});function T(G,L,O,P){let D,z;const H=G===p.ETC1S?_:b;for(let Q=0;Q<H.length;Q++){const W=H[Q];if(i[W.if]&&W.basisFormat.includes(G)&&!(P&&W.transcoderFormat.length<2)&&!(W.needsPowerOfTwo&&!(R(L)&&R(O))))return D=W.transcoderFormat[P?1:0],z=W.engineFormat[P?1:0],{transcoderFormat:D,engineFormat:z}}return HA.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),D=c.RGBA32,z=s.RGBAFormat,{transcoderFormat:D,engineFormat:z}}function R(G){return G<=2?!0:(G&G-1)===0&&G!==0}function F(G){let L=0;for(let D=0;D<G.length;D++){const z=G[D];L+=z.byteLength}const O=new Uint8Array(L);let P=0;for(let D=0;D<G.length;D++){const z=G[D];O.set(z,P),P+=z.byteLength}return O}});const wx={[Ex]:o.RGBAFormat,[yx]:o.RGBAFormat,[gx]:o.RGBAFormat,[jE]:o.RGBAFormat,[_x]:o.RGFormat,[Ax]:o.RGFormat,[fx]:o.RGFormat,[HE]:o.RGFormat,[vx]:o.RedFormat,[mx]:o.RedFormat,[NE]:o.RedFormat,[hx]:o.RedFormat},JE={[Ex]:o.FloatType,[yx]:o.HalfFloatType,[gx]:o.UnsignedByteType,[jE]:o.UnsignedByteType,[_x]:o.FloatType,[Ax]:o.HalfFloatType,[fx]:o.UnsignedByteType,[HE]:o.UnsignedByteType,[vx]:o.FloatType,[mx]:o.HalfFloatType,[NE]:o.UnsignedByteType,[hx]:o.UnsignedByteType},j4={[jE]:3001,[HE]:3001,[NE]:3001};function W4(i){return es(this,null,function*(){const{vkFormat:t,pixelWidth:r,pixelHeight:s,pixelDepth:c}=i;if(wx[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const p=i.levels[0];let h,g;if(i.supercompressionScheme===cx)h=p.levelData;else if(i.supercompressionScheme===S4)YE||(YE=new Promise(_=>es(this,null,function*(){const b=new z4;yield b.init(),_(b)}))),h=(yield YE).decode(p.levelData,p.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");JE[t]===o.FloatType?g=new Float32Array(h.buffer,h.byteOffset,h.byteLength/Float32Array.BYTES_PER_ELEMENT):JE[t]===o.HalfFloatType?g=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/Uint16Array.BYTES_PER_ELEMENT):g=h;const y=c===0?new o.DataTexture(g,r,s):new U4(g,r,s,c);return y.type=JE[t],y.format=wx[t],y.encoding=j4[t]||3e3,y.needsUpdate=!0,Promise.resolve(y)})}const Tx="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function qE(i,t=`${Tx}/basis/`){const r=(0,E.z)(c=>c.gl),s=(0,E.D)(pm,Sf(i)?Object.values(i):i,c=>{c.detectSupport(r),c.setTranscoderPath(t)});if((0,d.useEffect)(()=>{(Array.isArray(s)?s:[s]).forEach(r.initTexture)},[r,s]),Sf(i)){const c=Object.keys(i),p={};return c.forEach(h=>Object.assign(p,{[h]:s[c.indexOf(h)]})),p}else return s}qE.preload=(i,t=`${Tx}/basis/`)=>E.D.preload(pm,i,r=>{r.setTranscoderPath(t)}),qE.clear=i=>E.D.clear(pm,i);var V4=A(73466),Q4=A.n(V4);function Bx(i,t){typeof i=="function"?i(t):i!=null&&(i.current=t)}function X4(i,t=[],r){const[s,c]=d.useState();return d.useLayoutEffect(()=>{const p=i();return c(p),Bx(r,p),()=>Bx(r,null)},t),s}function K4({showPanel:i=0,className:t,parent:r}){const s=X4(()=>new(Q4()),[]);return d.useEffect(()=>{if(s){const c=r&&r.current||document.body;s.showPanel(i),c==null||c.appendChild(s.dom),t&&s.dom.classList.add(...t.split(" ").filter(g=>g));const p=(0,E.n)(()=>s.begin()),h=(0,E.o)(()=>s.end());return()=>{c==null||c.removeChild(s.dom),p(),h()}}},[r,s,t,i]),null}class Y4{constructor(t,r,s){this.name=t,this.fg=r,this.bg=s,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(t,r,s,c,p=0){let h=1/0,g=0;this.context&&(h=Math.min(h,t),g=Math.max(s,t),c=Math.max(c,r),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(t.toFixed(p)+" "+this.name+" ("+h.toFixed(p)+"-"+parseFloat(g.toFixed(p))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-r/c)*this.GRAPH_HEIGHT))}}class H0{constructor({logsPerSecond:t=20,samplesLog:r=100,samplesGraph:s=10,precision:c=2,minimal:p=!1,horizontal:h=!0,mode:g=0}={}){this.mode=g,this.horizontal=h,this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",p&&(this.container.style.cssText+="cursor:pointer"),this.canvasGpu=null,this.gl=null,this.query=null,this.minimal=p,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new H0.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new H0.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=r,this.samplesGraph=s,this.precision=c,this.logsPerSecond=t,this.minimal?(this.container.addEventListener("click",y=>{y.preventDefault(),this.showPanel(++this.mode%this.container.children.length)},!1),this.mode=g,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}resizePanel(t,r){t.canvas.style.position="absolute",this.minimal?t.canvas.style.display="none":(t.canvas.style.display="block",this.horizontal?(t.canvas.style.top="0px",t.canvas.style.left=r*t.WIDTH/t.PR+"px"):(t.canvas.style.left="0px",t.canvas.style.top=r*t.HEIGHT/t.PR+"px"))}addPanel(t,r){return t.canvas&&(this.container.appendChild(t.canvas),this.resizePanel(t,r)),t}showPanel(t){for(let r=0;r<this.container.children.length;r++){const s=this.container.children[r];s.style.display=r===t?"block":"none"}this.mode=t}init(t){this.canvasGpu=t,this.canvasGpu&&(this.gl=this.canvasGpu.getContext("webgl2"),this.ext=this.gl?this.gl.getExtension("EXT_disjoint_timer_query_webgl2"):null,this.ext&&(this.gpuPanel=this.addPanel(new H0.Panel("GPU","#ff0","#220"),2)))}begin(){if(this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)){if(this.query){const t=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT_AVAILABLE);if(this.disjoint=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT),t&&!this.disjoint){this.ns=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT);const r=this.ns*1e-6;(t||this.disjoint)&&(this.gl.deleteQuery(this.query),this.query=null),t&&this.addToAverage(r,this.averageGpu)}}this.query||(this.queryCreated=!0,this.query=this.gl.createQuery(),this.query&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.query))}}end(){this.beginTime=this.endInternal(),this.endProfiling("cpu-started","cpu-finished","cpu-duration",this.averageCpu),!(!this.gl||!this.ext)&&this.queryCreated&&this.gl.getQuery(this.ext.TIME_ELAPSED_EXT,this.gl.CURRENT_QUERY)&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT)}endInternal(){this.frames++;const t=(performance||Date).now();if(t>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=t),t>=this.prevTime+1e3){const r=this.frames*1e3/(t-this.prevTime);this.fpsPanel.update(r,r,100,100,0),this.prevTime=t,this.frames=0}return t}addToAverage(t,r){r.logs.push(t),r.logs.length>this.samplesLog&&r.logs.shift(),r.graph.push(t),r.graph.length>this.samplesGraph&&r.graph.shift()}beginProfiling(t){window.performance&&window.performance.mark(t)}endProfiling(t,r,s,c){if(window.performance&&r){window.performance.mark(r);const p=performance.measure(s,t,r);this.addToAverage(p.duration,c)}}updatePanel(t,r){if(r.logs.length>0){let s=0,c=.01;for(let g=0;g<r.logs.length;g++)s+=r.logs[g],r.logs[g]>c&&(c=r.logs[g]);let p=0,h=.01;for(let g=0;g<r.graph.length;g++)p+=r.graph[g],r.graph[g]>h&&(h=r.graph[g]);t&&t.update(s/Math.min(r.logs.length,this.samplesLog),p/Math.min(r.graph.length,this.samplesGraph),c,h,this.precision)}}}H0.Panel=Y4;function J4(s){var c=s,{className:i,parent:t}=c,r=An(c,["className","parent"]);const p=(0,E.z)(g=>g.gl),h=d.useMemo(()=>{const g=new H0(jn({},r));return g.init(p.domElement),g},[p]);return d.useEffect(()=>{if(h){const g=t&&t.current||document.body;g==null||g.appendChild(h.container),i&&h.container.classList.add(...i.split(" ").filter(b=>b));const y=(0,E.n)(()=>h.begin()),_=(0,E.o)(()=>h.end());return()=>{g==null||g.removeChild(h.container),y(),_()}}},[t,h,i]),null}function q4({size:i=256,frames:t=1/0}={}){const r=(0,E.z)(b=>b.viewport.dpr),{width:s,height:c}=(0,E.z)(b=>b.size),p=i||s*r,h=i||c*r,g=d.useMemo(()=>{const b=new o.DepthTexture(p,h);return b.format=o.DepthFormat,b.type=o.UnsignedShortType,{depthTexture:b}},[p,h]);let y=0;const _=ec(p,h,g);return(0,E.A)(b=>{(t===1/0||y<t)&&(b.gl.setRenderTarget(_),b.gl.render(b.scene,b.camera),b.gl.setRenderTarget(null),y++)}),_.depthTexture}function Z4(i,t,r=1){const s=(0,E.z)(h=>h.viewport),c=t*(s.aspect>i/t?s.width/i:s.height/t);return[i*(s.aspect>i/t?s.width/i:s.height/t)*r,c*r,1]}function $4(i,t){const r=(0,E.z)(c=>c.pointer),[s]=d.useState(()=>{const c=new o.Raycaster;return t&&(0,E.j)(c,t,{}),function(p,h){c.setFromCamera(r,i instanceof o.Camera?i:i.current);const g=this.constructor.prototype.raycast.bind(this);g&&g(c,h)}});return s}function ZE(i,t,r,s){return new(r||(r=Promise))(function(c,p){function h(_){try{y(s.next(_))}catch(b){p(b)}}function g(_){try{y(s.throw(_))}catch(b){p(b)}}function y(_){var b;_.done?c(_.value):(b=_.value,b instanceof r?b:new r(function(T){T(b)})).then(h,g)}y((s=s.apply(i,t||[])).next())})}const ew=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function Rx(i){return i=i.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const Ix=typeof window=="undefined",Uf=(()=>{if(Ix)return;const{userAgent:i,platform:t,maxTouchPoints:r}=window.navigator,s=/(iphone|ipod|ipad)/i.test(i),c=t==="iPad"||t==="MacIntel"&&r>0&&!window.MSStream;return{isIpad:c,isMobile:/android/i.test(i)||s||c,isSafari12:/Version\/12.+Safari/.test(i)}})();function tw(i,t,r){if(!r)return[t];const s=function(_){const b=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,T=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,R=_.createShader(35633),F=_.createShader(35632),G=_.createProgram();if(!(F&&R&&G))return;_.shaderSource(R,b),_.shaderSource(F,T),_.compileShader(R),_.compileShader(F),_.attachShader(G,R),_.attachShader(G,F),_.linkProgram(G),_.detachShader(G,R),_.detachShader(G,F),_.deleteShader(R),_.deleteShader(F),_.useProgram(G);const L=_.createBuffer();_.bindBuffer(34962,L),_.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const O=_.getAttribLocation(G,"aPosition");_.vertexAttribPointer(O,3,5126,!1,0,0),_.enableVertexAttribArray(O),_.clearColor(1,1,1,1),_.clear(16384),_.viewport(0,0,1,1),_.drawArrays(4,0,3);const P=new Uint8Array(4);return _.readPixels(0,0,1,1,6408,5121,P),_.deleteProgram(G),_.deleteBuffer(L),P.join("")}(i),c="801621810",p="8016218135",h="80162181161",g=Uf!=null&&Uf.isIpad?[["a7",h,12],["a8",p,15],["a8x",p,15],["a9",p,15],["a9x",p,15],["a10",p,15],["a10x",p,15],["a12",c,15],["a12x",c,15],["a12z",c,15],["a14",c,15],["m1",c,15]]:[["a7",h,12],["a8",p,12],["a9",p,15],["a10",p,15],["a11",c,15],["a12",c,15],["a13",c,15],["a14",c,15]];let y;return s==="80162181255"?y=g.filter(([,,_])=>_>=14):(y=g.filter(([,_])=>_===s),y.length||(y=g)),y.map(([_])=>`apple ${_} gpu`)}class Fx extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const $E=[],Ox=[];function nw(i,t){if(i===t)return 0;const r=i;i.length>t.length&&(i=t,t=r);let s=i.length,c=t.length;for(;s>0&&i.charCodeAt(~-s)===t.charCodeAt(~-c);)s--,c--;let p,h=0;for(;h<s&&i.charCodeAt(h)===t.charCodeAt(h);)h++;if(s-=h,c-=h,s===0)return c;let g,y,_=0,b=0,T=0;for(;b<s;)Ox[b]=i.charCodeAt(h+b),$E[b]=++b;for(;T<c;)for(p=t.charCodeAt(h+T),g=T++,_=T,b=0;b<s;b++)y=p===Ox[b]?g:g+1,g=$E[b],_=$E[b]=g>_?y>_?_+1:y:y>g?g+1:y;return _}function rw(i){return i!=null}const iw=({mobileTiers:i=[0,15,30,60],desktopTiers:t=[0,15,30,60],override:r={},glContext:s,failIfMajorPerformanceCaveat:c=!1,benchmarksURL:p="https://unpkg.com/detect-gpu@5.0.33/dist/benchmarks"}={})=>ZE(void 0,void 0,void 0,function*(){const h={};if(Ix)return{tier:0,type:"SSR"};const{isIpad:g=!!(Uf!=null&&Uf.isIpad),isMobile:y=!!(Uf!=null&&Uf.isMobile),screenSize:_=window.screen,loadBenchmarks:b=Q=>ZE(void 0,void 0,void 0,function*(){const W=yield fetch(`${p}/${Q}`).then(Y=>Y.json());if(parseInt(W.shift().split(".")[0],10)<4)throw new Fx("Detect GPU benchmark data is out of date. Please update to version 4x");return W})}=r;let{renderer:T}=r;const R=(Q,W,Y,K,ie)=>({device:ie,fps:K,gpu:Y,isMobile:y,tier:Q,type:W});let F,G="";if(T)T=Rx(T),F=[T];else{const Q=s||function(Y,K=!1){const ie={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:K,powerPreference:"high-performance",stencil:!1};Y&&delete ie.powerPreference;const ce=window.document.createElement("canvas"),ge=ce.getContext("webgl",ie)||ce.getContext("experimental-webgl",ie);return ge!=null?ge:void 0}(Uf==null?void 0:Uf.isSafari12,c);if(!Q)return R(0,"WEBGL_UNSUPPORTED");const W=Q.getExtension("WEBGL_debug_renderer_info");if(W&&(T=Q.getParameter(W.UNMASKED_RENDERER_WEBGL)),!T)return R(1,"FALLBACK");G=T,T=Rx(T),F=function(Y,K,ie){return K==="apple gpu"?tw(Y,K,ie):[K]}(Q,T,y)}const L=(yield Promise.all(F.map(function(Q){var W;return ZE(this,void 0,void 0,function*(){const Y=(_e=>{const oe=y?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const me of oe)if(_e.includes(me))return me})(Q);if(!Y)return;const K=`${y?"m":"d"}-${Y}${g?"-ipad":""}.json`,ie=h[K]=(W=h[K])!==null&&W!==void 0?W:b(K);let ce;try{ce=yield ie}catch(_e){if(_e instanceof Fx)throw _e;return}const ge=function(_e){var oe;const me=(_e=_e.replace(/\([^)]+\)/,"")).match(/\d+/)||_e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(oe=me==null?void 0:me.join("").replace(/\W|amd/g,""))!==null&&oe!==void 0?oe:""}(Q);let ae=ce.filter(([,_e])=>_e===ge);ae.length||(ae=ce.filter(([_e])=>_e.includes(Q)));const xe=ae.length;if(xe===0)return;const ve=Q.split(/[.,()\[\]/\s]/g).sort().filter((_e,oe,me)=>oe===0||_e!==me[oe-1]).join(" ");let Be,[Ue,,,,Ie]=xe>1?ae.map(_e=>[_e,nw(ve,_e[2])]).sort(([,_e],[,oe])=>_e-oe)[0][0]:ae[0],Ne=Number.MAX_VALUE;const{devicePixelRatio:Le}=window,Ye=_.width*Le*_.height*Le;for(const _e of Ie){const[oe,me]=_e,Te=oe*me,ye=Math.abs(Ye-Te);ye<Ne&&(Ne=ye,Be=_e)}if(!Be)return;const[,,Ce,Ee]=Be;return[Ne,Ce,Ue,Ee]})}))).filter(rw).sort(([Q=Number.MAX_VALUE,W],[Y=Number.MAX_VALUE,K])=>Q===Y?W-K:Q-Y);if(!L.length){const Q=ew.find(W=>T.includes(W));return Q?R(0,"BLOCKLISTED",Q):R(1,"FALLBACK",`${T} (${G})`)}const[,O,P,D]=L[0];if(O===-1)return R(0,"BLOCKLISTED",P,O,D);const z=y?i:t;let H=0;for(let Q=0;Q<z.length;Q++)O>=z[Q]&&(H=Q);return R(H,"BENCHMARK",P,O,D)}),ow=i=>(0,Il.Rq)(()=>iw(i),["useDetectGPU"]);function Dx(i,t,...r){const s=d.useRef(),c=(0,E.z)(p=>p.scene);return d.useLayoutEffect(()=>{let p;if(i&&i!=null&&i.current&&t&&(s.current=p=new t(i.current,...r)),p)return p.traverse(h=>h.raycast=()=>null),c.add(p),()=>{s.current=void 0,c.remove(p),p.dispose==null||p.dispose()}},[c,t,i,...r]),(0,E.A)(()=>{var p;return void((p=s.current)==null||p.update==null?void 0:p.update())}),s}const Px=0,sw=1,C2=2,J5=0,q5=1,Lx=2,eb=1.25,kx=1,um=6*4+4+4,tb=65535,aw=Math.pow(2,-24),j0=new o.Vector3,W0=new o.Vector3,V0=new o.Vector3,S2=new o.Vector2,w2=new o.Vector2,T2=new o.Vector2,zx=new o.Vector3,Gx=new o.Vector3,Ux=new o.Vector3,B2=new o.Vector3;function lw(i,t,r,s,c,p){let h;return p===o.BackSide?h=i.intersectTriangle(s,r,t,!0,c):h=i.intersectTriangle(t,r,s,p!==o.DoubleSide,c),h===null?null:{distance:i.origin.distanceTo(c),point:c.clone()}}function cw(i,t,r,s,c,p,h,g,y){j0.fromBufferAttribute(t,p),W0.fromBufferAttribute(t,h),V0.fromBufferAttribute(t,g);const _=lw(i,j0,W0,V0,B2,y);if(_){s&&(S2.fromBufferAttribute(s,p),w2.fromBufferAttribute(s,h),T2.fromBufferAttribute(s,g),_.uv=o.Triangle.getInterpolation(B2,j0,W0,V0,S2,w2,T2,new o.Vector2)),c&&(S2.fromBufferAttribute(c,p),w2.fromBufferAttribute(c,h),T2.fromBufferAttribute(c,g),_.uv1=o.Triangle.getInterpolation(B2,j0,W0,V0,S2,w2,T2,new o.Vector2)),r&&(zx.fromBufferAttribute(r,p),Gx.fromBufferAttribute(r,h),Ux.fromBufferAttribute(r,g),_.normal=o.Triangle.getInterpolation(B2,j0,W0,V0,zx,Gx,Ux,new o.Vector3),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const b={a:p,b:h,c:g,normal:new o.Vector3,materialIndex:0};o.Triangle.getNormal(j0,W0,V0,b.normal),_.face=b,_.faceIndex=p}return _}function Nx(i,t,r,s,c){const p=s*3,h=i.index.getX(p),g=i.index.getX(p+1),y=i.index.getX(p+2),{position:_,normal:b,uv:T,uv1:R}=i.attributes,F=cw(r,_,b,T,R,h,g,y,t);return F?(F.faceIndex=s,c&&c.push(F),F):null}function pw(i,t,r,s,c,p){for(let h=s,g=s+c;h<g;h++)Nx(i,t,r,h,p)}function uw(i,t,r,s,c){let p=1/0,h=null;for(let g=s,y=s+c;g<y;g++){const _=Nx(i,t,r,g);_&&_.distance<p&&(h=_,p=_.distance)}return h}function Hx(i,t,r){return i===null||(i.point.applyMatrix4(t.matrixWorld),i.distance=i.point.distanceTo(r.ray.origin),i.object=t,i.distance<r.near||i.distance>r.far)?null:i}class R2{constructor(){}}function xd(i,t,r){return r.min.x=t[i],r.min.y=t[i+1],r.min.z=t[i+2],r.max.x=t[i+3],r.max.y=t[i+4],r.max.z=t[i+5],r}function dw(i){i[0]=i[1]=i[2]=1/0,i[3]=i[4]=i[5]=-1/0}function jx(i){let t=-1,r=-1/0;for(let s=0;s<3;s++){const c=i[s+3]-i[s];c>r&&(r=c,t=s)}return t}function Wx(i,t){t.set(i)}function Vx(i,t,r){let s,c;for(let p=0;p<3;p++){const h=p+3;s=i[p],c=t[p],r[p]=s<c?s:c,s=i[h],c=t[h],r[h]=s>c?s:c}}function I2(i,t,r){for(let s=0;s<3;s++){const c=t[i+2*s],p=t[i+2*s+1],h=c-p,g=c+p;h<r[s]&&(r[s]=h),g>r[s+3]&&(r[s+3]=g)}}function WA(i){const t=i[3]-i[0],r=i[4]-i[1],s=i[5]-i[2];return 2*(t*r+r*s+s*t)}var nb=A(25108);function hw(i,t){if(!i.index){const r=i.attributes.position.count,s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let c;r>65535?c=new Uint32Array(new s(4*r)):c=new Uint16Array(new s(2*r)),i.setIndex(new o.BufferAttribute(c,1));for(let p=0;p<r;p++)c[p]=p}}function fw(i){if(!i.groups||!i.groups.length)return[{offset:0,count:i.index.count/3}];const t=[],r=new Set;for(const c of i.groups)r.add(c.start),r.add(c.start+c.count);const s=Array.from(r.values()).sort((c,p)=>c-p);for(let c=0;c<s.length-1;c++){const p=s[c],h=s[c+1];t.push({offset:p/3,count:(h-p)/3})}return t}function rb(i,t,r,s,c=null){let p=1/0,h=1/0,g=1/0,y=-1/0,_=-1/0,b=-1/0,T=1/0,R=1/0,F=1/0,G=-1/0,L=-1/0,O=-1/0;const P=c!==null;for(let D=t*6,z=(t+r)*6;D<z;D+=6){const H=i[D+0],Q=i[D+1],W=H-Q,Y=H+Q;W<p&&(p=W),Y>y&&(y=Y),P&&H<T&&(T=H),P&&H>G&&(G=H);const K=i[D+2],ie=i[D+3],ce=K-ie,ge=K+ie;ce<h&&(h=ce),ge>_&&(_=ge),P&&K<R&&(R=K),P&&K>L&&(L=K);const ae=i[D+4],xe=i[D+5],ve=ae-xe,Be=ae+xe;ve<g&&(g=ve),Be>b&&(b=Be),P&&ae<F&&(F=ae),P&&ae>O&&(O=ae)}s[0]=p,s[1]=h,s[2]=g,s[3]=y,s[4]=_,s[5]=b,P&&(c[0]=T,c[1]=R,c[2]=F,c[3]=G,c[4]=L,c[5]=O)}function gw(i,t,r,s){let c=1/0,p=1/0,h=1/0,g=-1/0,y=-1/0,_=-1/0;for(let b=t*6,T=(t+r)*6;b<T;b+=6){const R=i[b+0];R<c&&(c=R),R>g&&(g=R);const F=i[b+2];F<p&&(p=F),F>y&&(y=F);const G=i[b+4];G<h&&(h=G),G>_&&(_=G)}s[0]=c,s[1]=p,s[2]=h,s[3]=g,s[4]=y,s[5]=_}function mw(i,t,r,s,c){let p=r,h=r+s-1;const g=c.pos,y=c.axis*2;for(;;){for(;p<=h&&t[p*6+y]<g;)p++;for(;p<=h&&t[h*6+y]>=g;)h--;if(p<h){for(let _=0;_<3;_++){let b=i[p*3+_];i[p*3+_]=i[h*3+_],i[h*3+_]=b;let T=t[p*6+_*2+0];t[p*6+_*2+0]=t[h*6+_*2+0],t[h*6+_*2+0]=T;let R=t[p*6+_*2+1];t[p*6+_*2+1]=t[h*6+_*2+1],t[h*6+_*2+1]=R}p++,h--}else return p}}const wh=32,Aw=(i,t)=>i.candidate-t.candidate,Nf=new Array(wh).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),F2=new Float32Array(6);function yw(i,t,r,s,c,p){let h=-1,g=0;if(p===Px)h=jx(t),h!==-1&&(g=(t[h]+t[h+3])/2);else if(p===sw)h=jx(i),h!==-1&&(g=vw(r,s,c,h));else if(p===C2){const y=WA(i);let _=eb*c;const b=s*6,T=(s+c)*6;for(let R=0;R<3;R++){const F=t[R],O=(t[R+3]-F)/wh;if(c<wh/4){const P=[...Nf];P.length=c;let D=0;for(let H=b;H<T;H+=6,D++){const Q=P[D];Q.candidate=r[H+2*R],Q.count=0;const{bounds:W,leftCacheBounds:Y,rightCacheBounds:K}=Q;for(let ie=0;ie<3;ie++)K[ie]=1/0,K[ie+3]=-1/0,Y[ie]=1/0,Y[ie+3]=-1/0,W[ie]=1/0,W[ie+3]=-1/0;I2(H,r,W)}P.sort(Aw);let z=c;for(let H=0;H<z;H++){const Q=P[H];for(;H+1<z&&P[H+1].candidate===Q.candidate;)P.splice(H+1,1),z--}for(let H=b;H<T;H+=6){const Q=r[H+2*R];for(let W=0;W<z;W++){const Y=P[W];Q>=Y.candidate?I2(H,r,Y.rightCacheBounds):(I2(H,r,Y.leftCacheBounds),Y.count++)}}for(let H=0;H<z;H++){const Q=P[H],W=Q.count,Y=c-Q.count,K=Q.leftCacheBounds,ie=Q.rightCacheBounds;let ce=0;W!==0&&(ce=WA(K)/y);let ge=0;Y!==0&&(ge=WA(ie)/y);const ae=kx+eb*(ce*W+ge*Y);ae<_&&(h=R,_=ae,g=Q.candidate)}}else{for(let z=0;z<wh;z++){const H=Nf[z];H.count=0,H.candidate=F+O+z*O;const Q=H.bounds;for(let W=0;W<3;W++)Q[W]=1/0,Q[W+3]=-1/0}for(let z=b;z<T;z+=6){let W=~~((r[z+2*R]-F)/O);W>=wh&&(W=wh-1);const Y=Nf[W];Y.count++,I2(z,r,Y.bounds)}const P=Nf[wh-1];Wx(P.bounds,P.rightCacheBounds);for(let z=wh-2;z>=0;z--){const H=Nf[z],Q=Nf[z+1];Vx(H.bounds,Q.rightCacheBounds,H.rightCacheBounds)}let D=0;for(let z=0;z<wh-1;z++){const H=Nf[z],Q=H.count,W=H.bounds,K=Nf[z+1].rightCacheBounds;Q!==0&&(D===0?Wx(W,F2):Vx(W,F2,F2)),D+=Q;let ie=0,ce=0;D!==0&&(ie=WA(F2)/y);const ge=c-D;ge!==0&&(ce=WA(K)/y);const ae=kx+eb*(ie*D+ce*ge);ae<_&&(h=R,_=ae,g=H.candidate)}}}}else nb.warn(`MeshBVH: Invalid build strategy value ${p} used.`);return{axis:h,pos:g}}function vw(i,t,r,s){let c=0;for(let p=t,h=t+r;p<h;p++)c+=i[p*6+s*2];return c/r}function _w(i,t){dw(t);const r=i.attributes.position,s=i.index.array,c=s.length/3,p=new Float32Array(c*6),h=r.normalized,g=r.array,y=r.offset||0;let _=3;r.isInterleavedBufferAttribute&&(_=r.data.stride);const b=["getX","getY","getZ"];for(let T=0;T<c;T++){const R=T*3,F=T*6;let G,L,O;h?(G=s[R+0],L=s[R+1],O=s[R+2]):(G=s[R+0]*_+y,L=s[R+1]*_+y,O=s[R+2]*_+y);for(let P=0;P<3;P++){let D,z,H;h?(D=r[b[P]](G),z=r[b[P]](L),H=r[b[P]](O)):(D=g[G+P],z=g[L+P],H=g[O+P]);let Q=D;z<Q&&(Q=z),H<Q&&(Q=H);let W=D;z>W&&(W=z),H>W&&(W=H);const Y=(W-Q)/2,K=P*2;p[F+K+0]=Q+Y,p[F+K+1]=Y+(Math.abs(Q)+Y)*aw,Q<t[P]&&(t[P]=Q),W>t[P+3]&&(t[P+3]=W)}}return p}function Ew(i,t){function r(P){R&&R(P/F)}function s(P,D,z,H=null,Q=0){if(!G&&Q>=y&&(G=!0,_&&(nb.warn(`MeshBVH: Max depth of ${y} reached when generating BVH. Consider increasing maxDepth.`),nb.warn(i))),z<=b||Q>=y)return r(D+z),P.offset=D,P.count=z,P;const W=yw(P.boundingData,H,h,D,z,T);if(W.axis===-1)return r(D+z),P.offset=D,P.count=z,P;const Y=mw(g,h,D,z,W);if(Y===D||Y===D+z)r(D+z),P.offset=D,P.count=z;else{P.splitAxis=W.axis;const K=new R2,ie=D,ce=Y-D;P.left=K,K.boundingData=new Float32Array(6),rb(h,ie,ce,K.boundingData,p),s(K,ie,ce,p,Q+1);const ge=new R2,ae=Y,xe=z-ce;P.right=ge,ge.boundingData=new Float32Array(6),rb(h,ae,xe,ge.boundingData,p),s(ge,ae,xe,p,Q+1)}return P}hw(i,t);const c=new Float32Array(6),p=new Float32Array(6),h=_w(i,c),g=i.index.array,y=t.maxDepth,_=t.verbose,b=t.maxLeafTris,T=t.strategy,R=t.onProgress,F=i.index.count/3;let G=!1;const L=[],O=fw(i);if(O.length===1){const P=O[0],D=new R2;D.boundingData=c,gw(h,P.offset,P.count,p),s(D,P.offset,P.count,p),L.push(D)}else for(let P of O){const D=new R2;D.boundingData=new Float32Array(6),rb(h,P.offset,P.count,D.boundingData,p),s(D,P.offset,P.count,p),L.push(D)}return L}function bw(i,t){const r=Ew(i,t);let s,c,p;const h=[],g=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let b=0;b<r.length;b++){const T=r[b];let R=y(T);const F=new g(um*R);s=new Float32Array(F),c=new Uint32Array(F),p=new Uint16Array(F),_(0,T),h.push(F)}return h;function y(b){return b.count?1:1+y(b.left)+y(b.right)}function _(b,T){const R=b/4,F=b/2,G=!!T.count,L=T.boundingData;for(let O=0;O<6;O++)s[R+O]=L[O];if(G){const O=T.offset,P=T.count;return c[R+6]=O,p[F+14]=P,p[F+15]=tb,b+um}else{const O=T.left,P=T.right,D=T.splitAxis;let z;if(z=_(b+um,O),z/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return c[R+6]=z/4,z=_(z,P),c[R+7]=D,z}}}class Cd{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,r){let s=1/0,c=-1/0;for(let p=0,h=t.length;p<h;p++){const y=t[p][r];s=y<s?y:s,c=y>c?y:c}this.min=s,this.max=c}setFromPoints(t,r){let s=1/0,c=-1/0;for(let p=0,h=r.length;p<h;p++){const g=r[p],y=t.dot(g);s=y<s?y:s,c=y>c?y:c}this.min=s,this.max=c}isSeparated(t){return this.min>t.max||t.min>this.max}}Cd.prototype.setFromBox=function(){const i=new o.Vector3;return function(r,s){const c=s.min,p=s.max;let h=1/0,g=-1/0;for(let y=0;y<=1;y++)for(let _=0;_<=1;_++)for(let b=0;b<=1;b++){i.x=c.x*y+p.x*(1-y),i.y=c.y*_+p.y*(1-_),i.z=c.z*b+p.z*(1-b);const T=r.dot(i);h=Math.min(T,h),g=Math.max(T,g)}this.min=h,this.max=g}}();const Z5=function(){const i=new Cd;return function(r,s){const c=r.points,p=r.satAxes,h=r.satBounds,g=s.points,y=s.satAxes,_=s.satBounds;for(let b=0;b<3;b++){const T=h[b],R=p[b];if(i.setFromPoints(R,g),T.isSeparated(i))return!1}for(let b=0;b<3;b++){const T=_[b],R=y[b];if(i.setFromPoints(R,c),T.isSeparated(i))return!1}}}(),Mw=function(){const i=new o.Vector3,t=new o.Vector3,r=new o.Vector3;return function(c,p,h){const g=c.start,y=i,_=p.start,b=t;r.subVectors(g,_),i.subVectors(c.end,c.start),t.subVectors(p.end,p.start);const T=r.dot(b),R=b.dot(y),F=b.dot(b),G=r.dot(y),O=y.dot(y)*F-R*R;let P,D;O!==0?P=(T*R-G*F)/O:P=0,D=(T+P*R)/F,h.x=P,h.y=D}}(),ib=function(){const i=new o.Vector2,t=new o.Vector3,r=new o.Vector3;return function(c,p,h,g){Mw(c,p,i);let y=i.x,_=i.y;if(y>=0&&y<=1&&_>=0&&_<=1){c.at(y,h),p.at(_,g);return}else if(y>=0&&y<=1){_<0?p.at(0,g):p.at(1,g),c.closestPointToPoint(g,!0,h);return}else if(_>=0&&_<=1){y<0?c.at(0,h):c.at(1,h),p.closestPointToPoint(h,!0,g);return}else{let b;y<0?b=c.start:b=c.end;let T;_<0?T=p.start:T=p.end;const R=t,F=r;if(c.closestPointToPoint(T,!0,t),p.closestPointToPoint(b,!0,r),R.distanceToSquared(T)<=F.distanceToSquared(b)){h.copy(R),g.copy(T);return}else{h.copy(b),g.copy(F);return}}}}(),xw=function(){const i=new o.Vector3,t=new o.Vector3,r=new o.Plane,s=new o.Line3;return function(p,h){const{radius:g,center:y}=p,{a:_,b,c:T}=h;if(s.start=_,s.end=b,s.closestPointToPoint(y,!0,i).distanceTo(y)<=g||(s.start=_,s.end=T,s.closestPointToPoint(y,!0,i).distanceTo(y)<=g)||(s.start=b,s.end=T,s.closestPointToPoint(y,!0,i).distanceTo(y)<=g))return!0;const L=h.getPlane(r);if(Math.abs(L.distanceToPoint(y))<=g){const P=L.projectPoint(y,t);if(h.containsPoint(P))return!0}return!1}}();var Cw=A(25108);const Sw=1e-15;function ob(i){return Math.abs(i)<Sw}class Th extends o.Triangle{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new o.Vector3),this.satBounds=new Array(4).fill().map(()=>new Cd),this.points=[this.a,this.b,this.c],this.sphere=new o.Sphere,this.plane=new o.Plane,this.needsUpdate=!0}intersectsSphere(t){return xw(t,this)}update(){const t=this.a,r=this.b,s=this.c,c=this.points,p=this.satAxes,h=this.satBounds,g=p[0],y=h[0];this.getNormal(g),y.setFromPoints(g,c);const _=p[1],b=h[1];_.subVectors(t,r),b.setFromPoints(_,c);const T=p[2],R=h[2];T.subVectors(r,s),R.setFromPoints(T,c);const F=p[3],G=h[3];F.subVectors(s,t),G.setFromPoints(F,c),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(g,t),this.needsUpdate=!1}}Th.prototype.closestPointToSegment=function(){const i=new o.Vector3,t=new o.Vector3,r=new o.Line3;return function(c,p=null,h=null){const{start:g,end:y}=c,_=this.points;let b,T=1/0;for(let R=0;R<3;R++){const F=(R+1)%3;r.start.copy(_[R]),r.end.copy(_[F]),ib(r,c,i,t),b=i.distanceToSquared(t),b<T&&(T=b,p&&p.copy(i),h&&h.copy(t))}return this.closestPointToPoint(g,i),b=g.distanceToSquared(i),b<T&&(T=b,p&&p.copy(i),h&&h.copy(g)),this.closestPointToPoint(y,i),b=y.distanceToSquared(i),b<T&&(T=b,p&&p.copy(i),h&&h.copy(y)),Math.sqrt(T)}}(),Th.prototype.intersectsTriangle=function(){const i=new Th,t=new Array(3),r=new Array(3),s=new Cd,c=new Cd,p=new o.Vector3,h=new o.Vector3,g=new o.Vector3,y=new o.Vector3,_=new o.Vector3,b=new o.Line3,T=new o.Line3,R=new o.Line3,F=new o.Vector3;function G(L,O,P){const D=L.points;let z=0,H=-1;for(let Q=0;Q<3;Q++){const{start:W,end:Y}=b;W.copy(D[Q]),Y.copy(D[(Q+1)%3]),b.delta(h);const K=ob(O.distanceToPoint(W));if(ob(O.normal.dot(h))&&K){P.copy(b),z=2;break}const ie=O.intersectLine(b,F);if(!ie&&K&&F.copy(W),(ie||K)&&!ob(F.distanceTo(Y))){if(z<=1)(z===1?P.start:P.end).copy(F),K&&(H=z);else if(z>=2){(H===1?P.start:P.end).copy(F),z=2;break}if(z++,z===2&&H===-1)break}}return z}return function(O,P=null,D=!1){this.needsUpdate&&this.update(),O.isExtendedTriangle?O.needsUpdate&&O.update():(i.copy(O),i.update(),O=i);const z=this.plane,H=O.plane;if(Math.abs(z.normal.dot(H.normal))>1-1e-10){const Q=this.satBounds,W=this.satAxes;r[0]=O.a,r[1]=O.b,r[2]=O.c;for(let ie=0;ie<4;ie++){const ce=Q[ie],ge=W[ie];if(s.setFromPoints(ge,r),ce.isSeparated(s))return!1}const Y=O.satBounds,K=O.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let ie=0;ie<4;ie++){const ce=Y[ie],ge=K[ie];if(s.setFromPoints(ge,t),ce.isSeparated(s))return!1}for(let ie=0;ie<4;ie++){const ce=W[ie];for(let ge=0;ge<4;ge++){const ae=K[ge];if(p.crossVectors(ce,ae),s.setFromPoints(p,t),c.setFromPoints(p,r),s.isSeparated(c))return!1}}return P&&(D||Cw.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),P.start.set(0,0,0),P.end.set(0,0,0)),!0}else{const Q=G(this,H,T);if(Q===1&&O.containsPoint(T.end))return P&&(P.start.copy(T.end),P.end.copy(T.end)),!0;if(Q!==2)return!1;const W=G(O,z,R);if(W===1&&this.containsPoint(R.end))return P&&(P.start.copy(R.end),P.end.copy(R.end)),!0;if(W!==2)return!1;if(T.delta(g),R.delta(y),g.dot(y)<0){let xe=R.start;R.start=R.end,R.end=xe}const Y=T.start.dot(g),K=T.end.dot(g),ie=R.start.dot(g),ce=R.end.dot(g),ge=K<ie,ae=Y<ce;return Y!==ce&&ie!==K&&ge===ae?!1:(P&&(_.subVectors(T.start,R.start),_.dot(g)>0?P.start.copy(T.start):P.start.copy(R.start),_.subVectors(T.end,R.end),_.dot(g)<0?P.end.copy(T.end):P.end.copy(R.end)),!0)}}}(),Th.prototype.distanceToPoint=function(){const i=new o.Vector3;return function(r){return this.closestPointToPoint(r,i),r.distanceTo(i)}}(),Th.prototype.distanceToTriangle=function(){const i=new o.Vector3,t=new o.Vector3,r=["a","b","c"],s=new o.Line3,c=new o.Line3;return function(h,g=null,y=null){const _=g||y?s:null;if(this.intersectsTriangle(h,_))return(g||y)&&(g&&_.getCenter(g),y&&_.getCenter(y)),0;let b=1/0;for(let T=0;T<3;T++){let R;const F=r[T],G=h[F];this.closestPointToPoint(G,i),R=G.distanceToSquared(i),R<b&&(b=R,g&&g.copy(i),y&&y.copy(G));const L=this[F];h.closestPointToPoint(L,i),R=L.distanceToSquared(i),R<b&&(b=R,g&&g.copy(L),y&&y.copy(i))}for(let T=0;T<3;T++){const R=r[T],F=r[(T+1)%3];s.set(this[R],this[F]);for(let G=0;G<3;G++){const L=r[G],O=r[(G+1)%3];c.set(h[L],h[O]),ib(s,c,i,t);const P=i.distanceToSquared(t);P<b&&(b=P,g&&g.copy(i),y&&y.copy(t))}}return Math.sqrt(b)}}();class Sd{constructor(t,r,s){this.isOrientedBox=!0,this.min=new o.Vector3,this.max=new o.Vector3,this.matrix=new o.Matrix4,this.invMatrix=new o.Matrix4,this.points=new Array(8).fill().map(()=>new o.Vector3),this.satAxes=new Array(3).fill().map(()=>new o.Vector3),this.satBounds=new Array(3).fill().map(()=>new Cd),this.alignedSatBounds=new Array(3).fill().map(()=>new Cd),this.needsUpdate=!1,t&&this.min.copy(t),r&&this.max.copy(r),s&&this.matrix.copy(s)}set(t,r,s){this.min.copy(t),this.max.copy(r),this.matrix.copy(s),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}}Sd.prototype.update=function(){return function(){const t=this.matrix,r=this.min,s=this.max,c=this.points;for(let _=0;_<=1;_++)for(let b=0;b<=1;b++)for(let T=0;T<=1;T++){const R=1*_|2*b|4*T,F=c[R];F.x=_?s.x:r.x,F.y=b?s.y:r.y,F.z=T?s.z:r.z,F.applyMatrix4(t)}const p=this.satBounds,h=this.satAxes,g=c[0];for(let _=0;_<3;_++){const b=h[_],T=p[_],R=1<<_,F=c[R];b.subVectors(g,F),T.setFromPoints(b,c)}const y=this.alignedSatBounds;y[0].setFromPointsField(c,"x"),y[1].setFromPointsField(c,"y"),y[2].setFromPointsField(c,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}(),Sd.prototype.intersectsBox=function(){const i=new Cd;return function(r){this.needsUpdate&&this.update();const s=r.min,c=r.max,p=this.satBounds,h=this.satAxes,g=this.alignedSatBounds;if(i.min=s.x,i.max=c.x,g[0].isSeparated(i)||(i.min=s.y,i.max=c.y,g[1].isSeparated(i))||(i.min=s.z,i.max=c.z,g[2].isSeparated(i)))return!1;for(let y=0;y<3;y++){const _=h[y],b=p[y];if(i.setFromBox(_,r),b.isSeparated(i))return!1}return!0}}(),Sd.prototype.intersectsTriangle=function(){const i=new Th,t=new Array(3),r=new Cd,s=new Cd,c=new o.Vector3;return function(h){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(i.copy(h),i.update(),h=i);const g=this.satBounds,y=this.satAxes;t[0]=h.a,t[1]=h.b,t[2]=h.c;for(let R=0;R<3;R++){const F=g[R],G=y[R];if(r.setFromPoints(G,t),F.isSeparated(r))return!1}const _=h.satBounds,b=h.satAxes,T=this.points;for(let R=0;R<3;R++){const F=_[R],G=b[R];if(r.setFromPoints(G,T),F.isSeparated(r))return!1}for(let R=0;R<3;R++){const F=y[R];for(let G=0;G<4;G++){const L=b[G];if(c.crossVectors(F,L),r.setFromPoints(c,t),s.setFromPoints(c,T),r.isSeparated(s))return!1}}return!0}}(),Sd.prototype.closestPointToPoint=function(){return function(t,r){return this.needsUpdate&&this.update(),r.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),r}}(),Sd.prototype.distanceToPoint=function(){const i=new o.Vector3;return function(r){return this.closestPointToPoint(r,i),r.distanceTo(i)}}(),Sd.prototype.distanceToBox=function(){const i=["x","y","z"],t=new Array(12).fill().map(()=>new o.Line3),r=new Array(12).fill().map(()=>new o.Line3),s=new o.Vector3,c=new o.Vector3;return function(h,g=0,y=null,_=null){if(this.needsUpdate&&this.update(),this.intersectsBox(h))return(y||_)&&(h.getCenter(c),this.closestPointToPoint(c,s),h.closestPointToPoint(s,c),y&&y.copy(s),_&&_.copy(c)),0;const b=g*g,T=h.min,R=h.max,F=this.points;let G=1/0;for(let O=0;O<8;O++){const P=F[O];c.copy(P).clamp(T,R);const D=P.distanceToSquared(c);if(D<G&&(G=D,y&&y.copy(P),_&&_.copy(c),D<b))return Math.sqrt(D)}let L=0;for(let O=0;O<3;O++)for(let P=0;P<=1;P++)for(let D=0;D<=1;D++){const z=(O+1)%3,H=(O+2)%3,Q=P<<z|D<<H,W=1<<O|P<<z|D<<H,Y=F[Q],K=F[W];t[L].set(Y,K);const ce=i[O],ge=i[z],ae=i[H],xe=r[L],ve=xe.start,Be=xe.end;ve[ce]=T[ce],ve[ge]=P?T[ge]:R[ge],ve[ae]=D?T[ae]:R[ge],Be[ce]=R[ce],Be[ge]=P?T[ge]:R[ge],Be[ae]=D?T[ae]:R[ge],L++}for(let O=0;O<=1;O++)for(let P=0;P<=1;P++)for(let D=0;D<=1;D++){c.x=O?R.x:T.x,c.y=P?R.y:T.y,c.z=D?R.z:T.z,this.closestPointToPoint(c,s);const z=c.distanceToSquared(s);if(z<G&&(G=z,y&&y.copy(s),_&&_.copy(c),z<b))return Math.sqrt(z)}for(let O=0;O<12;O++){const P=t[O];for(let D=0;D<12;D++){const z=r[D];ib(P,z,s,c);const H=s.distanceToSquared(c);if(H<G&&(G=H,y&&y.copy(s),_&&_.copy(c),H<b))return Math.sqrt(H)}}return Math.sqrt(G)}}();function wd(i,t,r,s){const c=i.a,p=i.b,h=i.c;let g=t,y=t+1,_=t+2;r&&(g=r.getX(t),y=r.getX(t+1),_=r.getX(t+2)),c.x=s.getX(g),c.y=s.getY(g),c.z=s.getZ(g),p.x=s.getX(y),p.y=s.getY(y),p.z=s.getZ(y),h.x=s.getX(_),h.y=s.getY(_),h.z=s.getZ(_)}function Qx(i,t,r,s,c,p,h){const g=r.index,y=r.attributes.position;for(let _=i,b=t+i;_<b;_++)if(wd(h,_*3,g,y),h.needsUpdate=!0,s(h,_,c,p))return!0;return!1}const O2=new o.Vector3,D2=new o.Vector3,P2=new o.Vector3,Xx=new o.Vector2,Kx=new o.Vector2,Yx=new o.Vector2;function $5(i,t,r,s){const c=t.getIndex().array,p=t.getAttribute("position"),h=t.getAttribute("uv"),g=c[r*3],y=c[r*3+1],_=c[r*3+2];O2.fromBufferAttribute(p,g),D2.fromBufferAttribute(p,y),P2.fromBufferAttribute(p,_);let b=0;const T=t.groups,R=r*3;for(let G=0,L=T.length;G<L;G++){const O=T[G],{start:P,count:D}=O;if(R>=P&&R<P+D){b=O.materialIndex;break}}let F=null;return h&&(Xx.fromBufferAttribute(h,g),Kx.fromBufferAttribute(h,y),Yx.fromBufferAttribute(h,_),s&&s.uv?F=s.uv:F=new Vector2,Triangle.getInterpolation(i,O2,D2,P2,Xx,Kx,Yx,F)),s?(s.face||(s.face={}),s.face.a=g,s.face.b=y,s.face.c=_,s.face.materialIndex=b,s.face.normal||(s.face.normal=new Vector3),Triangle.getNormal(O2,D2,P2,s.face.normal),F&&(s.uv=F),s):{face:{a:g,b:y,c:_,materialIndex:b,normal:Triangle.getNormal(O2,D2,P2,new Vector3)},uv:F}}class Jx{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}function Bh(i,t){return t[i+15]===65535}function dm(i,t){return t[i+6]}function Q0(i,t){return t[i+14]}function VA(i){return i+8}function X0(i,t){return t[i+6]}function qx(i,t){return t[i+7]}function e8(i){return i}const K0=new o.Box3,L2=new o.Vector3,ww=["x","y","z"];function sb(i,t,r,s,c){let p=i*2,h=Y0,g=Hf,y=jf;if(Bh(p,g)){const b=dm(i,y),T=Q0(p,g);pw(t,r,s,b,T,c)}else{const b=VA(i);k2(b,h,s,L2)&&sb(b,t,r,s,c);const T=X0(i,y);k2(T,h,s,L2)&&sb(T,t,r,s,c)}}function ab(i,t,r,s){let c=i*2,p=Y0,h=Hf,g=jf;if(Bh(c,h)){const _=dm(i,g),b=Q0(c,h);return uw(t,r,s,_,b)}else{const _=qx(i,g),b=ww[_],R=s.direction[b]>=0;let F,G;R?(F=VA(i),G=X0(i,g)):(F=X0(i,g),G=VA(i));const O=k2(F,p,s,L2)?ab(F,t,r,s):null;if(O){const z=O.point[b];if(R?z<=p[G+_]:z>=p[G+_+3])return O}const D=k2(G,p,s,L2)?ab(G,t,r,s):null;return O&&D?O.distance<=D.distance?O:D:O||D||null}}const Tw=function(){let i,t;const r=[],s=new Jx(()=>new o.Box3);return function(...h){i=s.getPrimitive(),t=s.getPrimitive(),r.push(i,t);const g=c(...h);s.releasePrimitive(i),s.releasePrimitive(t),r.pop(),r.pop();const y=r.length;return y>0&&(t=r[y-1],i=r[y-2]),g};function c(p,h,g,y,_=null,b=0,T=0){function R(z){let H=z*2,Q=Hf,W=jf;for(;!Bh(H,Q);)z=VA(z),H=z*2;return dm(z,W)}function F(z){let H=z*2,Q=Hf,W=jf;for(;!Bh(H,Q);)z=X0(z,W),H=z*2;return dm(z,W)+Q0(H,Q)}let G=p*2,L=Y0,O=Hf,P=jf;if(Bh(G,O)){const z=dm(p,P),H=Q0(G,O);return xd(p,L,i),y(z,H,!1,T,b+p,i)}else{const z=VA(p),H=X0(p,P);let Q=z,W=H,Y,K,ie,ce;if(_&&(ie=i,ce=t,xd(Q,L,ie),xd(W,L,ce),Y=_(ie),K=_(ce),K<Y)){Q=H,W=z;const Ie=Y;Y=K,K=Ie,ie=ce}ie||(ie=i,xd(Q,L,ie));const ge=Bh(Q*2,O),ae=g(ie,ge,Y,T+1,b+Q);let xe;if(ae===Lx){const Ie=R(Q),Le=F(Q)-Ie;xe=y(Ie,Le,!0,T+1,b+Q,ie)}else xe=ae&&c(Q,h,g,y,_,b,T+1);if(xe)return!0;ce=t,xd(W,L,ce);const ve=Bh(W*2,O),Be=g(ce,ve,K,T+1,b+W);let Ue;if(Be===Lx){const Ie=R(W),Le=F(W)-Ie;Ue=y(Ie,Le,!0,T+1,b+W,ce)}else Ue=Be&&c(W,h,g,y,_,b,T+1);return!!Ue}}}(),Bw=function(){const i=new Th,t=new Th,r=new o.Matrix4,s=new Sd,c=new Sd;return function p(h,g,y,_,b=null){let T=h*2,R=Y0,F=Hf,G=jf;if(b===null&&(y.boundingBox||y.computeBoundingBox(),s.set(y.boundingBox.min,y.boundingBox.max,_),b=s),Bh(T,F)){const O=g,P=O.index,D=O.attributes.position,z=y.index,H=y.attributes.position,Q=dm(h,G),W=Q0(T,F);if(r.copy(_).invert(),y.boundsTree)return xd(h,R,c),c.matrix.copy(r),c.needsUpdate=!0,y.boundsTree.shapecast({intersectsBounds:K=>c.intersectsBox(K),intersectsTriangle:K=>{K.a.applyMatrix4(_),K.b.applyMatrix4(_),K.c.applyMatrix4(_),K.needsUpdate=!0;for(let ie=Q*3,ce=(W+Q)*3;ie<ce;ie+=3)if(wd(t,ie,P,D),t.needsUpdate=!0,K.intersectsTriangle(t))return!0;return!1}});for(let Y=Q*3,K=W+Q*3;Y<K;Y+=3){wd(i,Y,P,D),i.a.applyMatrix4(r),i.b.applyMatrix4(r),i.c.applyMatrix4(r),i.needsUpdate=!0;for(let ie=0,ce=z.count;ie<ce;ie+=3)if(wd(t,ie,z,H),t.needsUpdate=!0,i.intersectsTriangle(t))return!0}}else{const O=h+8,P=G[h+6];return xd(O,R,K0),!!(b.intersectsBox(K0)&&p(O,g,y,_,b)||(xd(P,R,K0),b.intersectsBox(K0)&&p(P,g,y,_,b)))}}}();function k2(i,t,r,s){return xd(i,t,K0),r.intersectBox(K0,s)}const lb=[];let z2,Y0,Hf,jf;function QA(i){z2&&lb.push(z2),z2=i,Y0=new Float32Array(i),Hf=new Uint16Array(i),jf=new Uint32Array(i)}function G2(){z2=null,Y0=null,Hf=null,jf=null,lb.length&&QA(lb.pop())}var cb=A(25108);const pb=Symbol("skip tree generation"),ub=new o.Box3,db=new o.Box3,J0=new o.Matrix4,hm=new Sd,XA=new Sd,KA=new o.Vector3,U2=new o.Vector3,Rw=new o.Vector3,Iw=new o.Vector3,Fw=new o.Vector3,Zx=new o.Box3,Td=new Jx(()=>new Th);class q0{static serialize(t,r={}){if(r.isBufferGeometry)return cb.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),q0.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});r=jn({cloneBuffers:!0},r);const s=t.geometry,c=t._roots,p=s.getIndex();let h;return r.cloneBuffers?h={roots:c.map(g=>g.slice()),index:p.array.slice()}:h={roots:c,index:p.array},h}static deserialize(t,r,s={}){if(typeof s=="boolean")return cb.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),q0.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});s=jn({setIndex:!0},s);const{index:c,roots:p}=t,h=new q0(r,Xo(jn({},s),{[pb]:!0}));if(h._roots=p,s.setIndex){const g=r.getIndex();if(g===null){const y=new o.BufferAttribute(t.index,1,!1);r.setIndex(y)}else g.array!==c&&(g.array.set(c),g.needsUpdate=!0)}return h}constructor(t,r={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(r=Object.assign({strategy:Px,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[pb]:!1},r),r.useSharedArrayBuffer&&typeof SharedArrayBuffer=="undefined")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,r[pb]||(this._roots=bw(t,r),!t.boundingBox&&r.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new o.Box3))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));const r=this.geometry,s=r.index.array,c=r.attributes.position;let p,h,g,y,_=0;const b=this._roots;for(let R=0,F=b.length;R<F;R++)p=b[R],h=new Uint32Array(p),g=new Uint16Array(p),y=new Float32Array(p),T(0,_),_+=p.byteLength;function T(R,F,G=!1){const L=R*2;if(g[L+15]===tb){const P=h[R+6],D=g[L+14];let z=1/0,H=1/0,Q=1/0,W=-1/0,Y=-1/0,K=-1/0;for(let ie=3*P,ce=3*(P+D);ie<ce;ie++){const ge=s[ie],ae=c.getX(ge),xe=c.getY(ge),ve=c.getZ(ge);ae<z&&(z=ae),ae>W&&(W=ae),xe<H&&(H=xe),xe>Y&&(Y=xe),ve<Q&&(Q=ve),ve>K&&(K=ve)}return y[R+0]!==z||y[R+1]!==H||y[R+2]!==Q||y[R+3]!==W||y[R+4]!==Y||y[R+5]!==K?(y[R+0]=z,y[R+1]=H,y[R+2]=Q,y[R+3]=W,y[R+4]=Y,y[R+5]=K,!0):!1}else{const P=R+8,D=h[R+6],z=P+F,H=D+F;let Q=G,W=!1,Y=!1;t?Q||(W=t.has(z),Y=t.has(H),Q=!W&&!Y):(W=!0,Y=!0);const K=Q||W,ie=Q||Y;let ce=!1;K&&(ce=T(P,F,Q));let ge=!1;ie&&(ge=T(D,F,Q));const ae=ce||ge;if(ae)for(let xe=0;xe<3;xe++){const ve=P+xe,Be=D+xe,Ue=y[ve],Ie=y[ve+3],Ne=y[Be],Le=y[Be+3];y[R+xe]=Ue<Ne?Ue:Ne,y[R+xe+3]=Ie>Le?Ie:Le}return ae}}}traverse(t,r=0){const s=this._roots[r],c=new Uint32Array(s),p=new Uint16Array(s);h(0);function h(g,y=0){const _=g*2,b=p[_+15]===tb;if(b){const T=c[g+6],R=p[_+14];t(y,b,new Float32Array(s,g*4,6),T,R)}else{const T=g+um/4,R=c[g+6],F=c[g+7];t(y,b,new Float32Array(s,g*4,6),F)||(h(T,y+1),h(R,y+1))}}}raycast(t,r=o.FrontSide){const s=this._roots,c=this.geometry,p=[],h=r.isMaterial,g=Array.isArray(r),y=c.groups,_=h?r.side:r;for(let b=0,T=s.length;b<T;b++){const R=g?r[y[b].materialIndex].side:_,F=p.length;if(QA(s[b]),sb(0,c,R,t,p),G2(),g){const G=y[b].materialIndex;for(let L=F,O=p.length;L<O;L++)p[L].face.materialIndex=G}}return p}raycastFirst(t,r=o.FrontSide){const s=this._roots,c=this.geometry,p=r.isMaterial,h=Array.isArray(r);let g=null;const y=c.groups,_=p?r.side:r;for(let b=0,T=s.length;b<T;b++){const R=h?r[y[b].materialIndex].side:_;QA(s[b]);const F=ab(0,c,R,t);G2(),F!=null&&(g==null||F.distance<g.distance)&&(g=F,h&&(F.face.materialIndex=y[b].materialIndex))}return g}intersectsGeometry(t,r){const s=this.geometry;let c=!1;for(const p of this._roots)if(QA(p),c=Bw(0,s,t,r),G2(),c)break;return c}shapecast(t,r,s){const c=this.geometry;if(t instanceof Function){if(r){const R=r;r=(F,G,L,O)=>{const P=G*3;return R(F,P,P+1,P+2,L,O)}}t={boundsTraverseOrder:s,intersectsBounds:t,intersectsTriangle:r,intersectsRange:null},cb.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const p=Td.getPrimitive();let{boundsTraverseOrder:h,intersectsBounds:g,intersectsRange:y,intersectsTriangle:_}=t;if(y&&_){const R=y;y=(F,G,L,O,P)=>R(F,G,L,O,P)?!0:Qx(F,G,c,_,L,O,p)}else y||(_?y=(R,F,G,L)=>Qx(R,F,c,_,G,L,p):y=(R,F,G)=>G);let b=!1,T=0;for(const R of this._roots){if(QA(R),b=Tw(0,c,g,y,h,T),G2(),b)break;T+=R.byteLength}return Td.releasePrimitive(p),b}bvhcast(t,r,s){let{intersectsRanges:c,intersectsTriangles:p}=s;const h=this.geometry.index,g=this.geometry.attributes.position,y=t.geometry.index,_=t.geometry.attributes.position;J0.copy(r).invert();const b=Td.getPrimitive(),T=Td.getPrimitive();if(p){let F=function(G,L,O,P,D,z,H,Q){for(let W=O,Y=O+P;W<Y;W++){wd(T,W*3,y,_),T.a.applyMatrix4(r),T.b.applyMatrix4(r),T.c.applyMatrix4(r),T.needsUpdate=!0;for(let K=G,ie=G+L;K<ie;K++)if(wd(b,K*3,h,g),b.needsUpdate=!0,p(b,T,K,W,D,z,H,Q))return!0}return!1};if(c){const G=c;c=function(L,O,P,D,z,H,Q,W){return G(L,O,P,D,z,H,Q,W)?!0:F(L,O,P,D,z,H,Q,W)}}else c=F}t.getBoundingBox(db),db.applyMatrix4(r);const R=this.shapecast({intersectsBounds:F=>db.intersectsBox(F),intersectsRange:(F,G,L,O,P,D)=>(ub.copy(D),ub.applyMatrix4(J0),t.shapecast({intersectsBounds:z=>ub.intersectsBox(z),intersectsRange:(z,H,Q,W,Y)=>c(F,G,z,H,O,P,W,Y)}))});return Td.releasePrimitive(b),Td.releasePrimitive(T),R}intersectsBox(t,r){return hm.set(t.min,t.max,r),hm.needsUpdate=!0,this.shapecast({intersectsBounds:s=>hm.intersectsBox(s),intersectsTriangle:s=>hm.intersectsTriangle(s)})}intersectsSphere(t){return this.shapecast({intersectsBounds:r=>t.intersectsBox(r),intersectsTriangle:r=>r.intersectsSphere(t)})}closestPointToGeometry(t,r,s={},c={},p=0,h=1/0){t.boundingBox||t.computeBoundingBox(),hm.set(t.boundingBox.min,t.boundingBox.max,r),hm.needsUpdate=!0;const g=this.geometry,y=g.attributes.position,_=g.index,b=t.attributes.position,T=t.index,R=Td.getPrimitive(),F=Td.getPrimitive();let G=U2,L=Rw,O=null,P=null;c&&(O=Iw,P=Fw);let D=1/0,z=null,H=null;return J0.copy(r).invert(),XA.matrix.copy(J0),this.shapecast({boundsTraverseOrder:Q=>hm.distanceToBox(Q),intersectsBounds:(Q,W,Y)=>Y<D&&Y<h?(W&&(XA.min.copy(Q.min),XA.max.copy(Q.max),XA.needsUpdate=!0),!0):!1,intersectsRange:(Q,W)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:Y=>XA.distanceToBox(Y),intersectsBounds:(Y,K,ie)=>ie<D&&ie<h,intersectsRange:(Y,K)=>{for(let ie=Y*3,ce=(Y+K)*3;ie<ce;ie+=3){wd(F,ie,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ge=Q*3,ae=(Q+W)*3;ge<ae;ge+=3){wd(R,ge,_,y),R.needsUpdate=!0;const xe=R.distanceToTriangle(F,G,O);if(xe<D&&(L.copy(G),P&&P.copy(O),D=xe,z=ge/3,H=ie/3),xe<p)return!0}}}});{const Y=T?T.count:b.count;for(let K=0,ie=Y;K<ie;K+=3){wd(F,K,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ce=Q*3,ge=(Q+W)*3;ce<ge;ce+=3){wd(R,ce,_,y),R.needsUpdate=!0;const ae=R.distanceToTriangle(F,G,O);if(ae<D&&(L.copy(G),P&&P.copy(O),D=ae,z=ce/3,H=K/3),ae<p)return!0}}}}}),Td.releasePrimitive(R),Td.releasePrimitive(F),D===1/0?null:(s.point?s.point.copy(L):s.point=L.clone(),s.distance=D,s.faceIndex=z,c&&(c.point?c.point.copy(P):c.point=P.clone(),c.point.applyMatrix4(J0),L.applyMatrix4(J0),c.distance=L.sub(c.point).length(),c.faceIndex=H),s)}closestPointToPoint(t,r={},s=0,c=1/0){const p=s*s,h=c*c;let g=1/0,y=null;if(this.shapecast({boundsTraverseOrder:b=>(KA.copy(t).clamp(b.min,b.max),KA.distanceToSquared(t)),intersectsBounds:(b,T,R)=>R<g&&R<h,intersectsTriangle:(b,T)=>{b.closestPointToPoint(t,KA);const R=t.distanceToSquared(KA);return R<g&&(U2.copy(KA),g=R,y=T),R<p}}),g===1/0)return null;const _=Math.sqrt(g);return r.point?r.point.copy(U2):r.point=U2.clone(),r.distance=_,r.faceIndex=y,r}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(s=>{xd(0,new Float32Array(s),Zx),t.union(Zx)}),t}}const hb=new o.Ray,$x=new o.Matrix4,Ow=o.Mesh.prototype.raycast;function eC(i,t){if(this.geometry.boundsTree){if(this.material===void 0)return;$x.copy(this.matrixWorld).invert(),hb.copy(i.ray).applyMatrix4($x);const r=this.geometry.boundsTree;if(i.firstHitOnly===!0){const s=Hx(r.raycastFirst(hb,this.material),this,i);s&&t.push(s)}else{const s=r.raycast(hb,this.material);for(let c=0,p=s.length;c<p;c++){const h=Hx(s[c],this,i);h&&t.push(h)}}}else Ow.call(this,i,t)}function tC(i){return this.boundsTree=new q0(this,i),this.boundsTree}function nC(){this.boundsTree=null}const rC=i=>i.isMesh;function Dw(i,t){t=jn({strategy:C2,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10},t),d.useEffect(()=>{if(i.current){i.current.raycast=eC;const r=i.current.geometry;return r.computeBoundsTree=tC,r.disposeBoundsTree=nC,r.computeBoundsTree(t),()=>{r.boundsTree&&r.disposeBoundsTree()}}},[i,JSON.stringify(t)])}const Pw=d.forwardRef((b,_)=>{var T=b,{enabled:i=!0,firstHitOnly:t=!1,children:r,strategy:s=C2,verbose:c=!1,setBoundingBox:p=!0,maxDepth:h=40,maxLeafTris:g=10}=T,y=An(T,["enabled","firstHitOnly","children","strategy","verbose","setBoundingBox","maxDepth","maxLeafTris"]);const R=d.useRef(null),F=(0,E.z)(G=>G.raycaster);return d.useImperativeHandle(_,()=>R.current,[]),d.useEffect(()=>{if(i){const G={strategy:s,verbose:c,setBoundingBox:p,maxDepth:h,maxLeafTris:g},L=R.current;return F.firstHitOnly=t,L.traverse(O=>{rC(O)&&!O.geometry.boundsTree&&O.raycast===o.Mesh.prototype.raycast&&(O.raycast=eC,O.geometry.computeBoundsTree=tC,O.geometry.disposeBoundsTree=nC,O.geometry.computeBoundsTree(G))}),()=>{delete F.firstHitOnly,L.traverse(O=>{rC(O)&&O.geometry.boundsTree&&(O.geometry.disposeBoundsTree(),O.raycast=o.Mesh.prototype.raycast)})}}}),d.createElement("group",(0,w.Z)({ref:R},y),r)});function Lw(...i){const t=d.useRef([]);return t.current=i.map(r=>d.useContext(r)),d.useMemo(()=>({children:r})=>i.reduceRight((s,c,p)=>d.createElement(c.Provider,{value:t.current[p],children:s}),r),[])}function kw(i,t){const r=d.useRef(),[s]=d.useState(()=>t?t instanceof o.Object3D?{current:t}:t:r),[c]=d.useState(()=>new o.AnimationMixer(void 0));d.useLayoutEffect(()=>void(c._root=s.current),[c,t]);const p=d.useRef({}),[h]=d.useState(()=>{const g={};return i.forEach(y=>Object.defineProperty(g,y.name,{enumerable:!0,get(){if(s.current)return p.current[y.name]||(p.current[y.name]=c.clipAction(y,s.current))},configurable:!0})),{ref:s,clips:i,actions:g,names:i.map(y=>y.name),mixer:c}});return(0,E.A)((g,y)=>c.update(y)),d.useEffect(()=>{const g=s.current;return()=>{p.current={},Object.values(h.actions).forEach(y=>{g&&c.uncacheAction(y,g)})}},[i]),d.useEffect(()=>()=>{c.stopAllAction()},[c]),h}function iC(i){const t=d.useRef(null),r=d.useRef(!1),s=d.useRef(!1),c=d.useRef(i);return d.useLayoutEffect(()=>void(c.current=i),[i]),d.useEffect(()=>{const p=t.current;if(p){const h=(0,E.n)(()=>(r.current=!1,!0)),g=p.onBeforeRender;p.onBeforeRender=()=>r.current=!0;const y=(0,E.o)(()=>(r.current!==s.current&&(c.current==null||c.current(s.current=r.current)),!0));return()=>{p.onBeforeRender=g,h(),y()}}},[]),t}const zw=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,Gw=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,Uw=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,Nw=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function Hw(i,t,r){i.defines.BOX_PROJECTED_ENV_MAP=!0,i.uniforms.envMapPosition={value:t},i.uniforms.envMapSize={value:r},i.vertexShader=`
  varying vec3 vWorldPosition;
  ${i.vertexShader.replace("#include <worldpos_vertex>",zw)}`,i.fragmentShader=`
    ${Gw}
    ${i.fragmentShader.replace("#include <envmap_physical_pars_fragment>",o.ShaderChunk.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${Uw}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${Nw}
        `)}`}function jw(i=new o.Vector3,t=new o.Vector3){const[r]=d.useState(()=>({position:new o.Vector3,size:new o.Vector3}));(0,E.j)(r,{position:i,size:t});const s=d.useRef(null),c=d.useMemo(()=>({ref:s,onBeforeCompile:p=>Hw(p,r.position,r.size),customProgramCacheKey:()=>JSON.stringify(r.position.toArray())+JSON.stringify(r.size.toArray())}),[...r.position.toArray(),...r.size.toArray()]);return d.useLayoutEffect(()=>void(s.current.needsUpdate=!0),[r]),c}const oC=new o.Box3,N2=new o.Vector3,Ww=r=>{var s=r,{anchor:i}=s,t=An(s,["anchor"]);const c=d.useRef(null),p=d.useRef(null);return d.useEffect(()=>{var h,g;(h=c.current)!=null&&(g=h.parent)!=null&&g.parent&&(p.current=c.current.parent,c.current.parent.parent.add(c.current))},[]),(0,E.A)(()=>{p.current&&(oC.setFromObject(p.current),oC.getSize(N2),c.current.position.set(p.current.position.x+N2.x*i[0]/2,p.current.position.y+N2.y*i[1]/2,p.current.position.z+N2.z*i[2]/2))}),d.createElement("group",(0,w.Z)({ref:c},t))};function Vw(i,t,r=.9){return t*r+i*(1-r)}const Qw=i=>Math.sqrt(1-Math.pow(i-1,2));class Xw{constructor({size:t=256,maxAge:r=750,radius:s=.3,intensity:c=.2,interpolate:p=0,smoothing:h=0,minForce:g=.3,blend:y="screen",ease:_=Qw}={}){this.size=t,this.maxAge=r,this.radius=s,this.intensity=c,this.ease=_,this.interpolate=p,this.smoothing=h,this.minForce=g,this.blend=y,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new o.Texture(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(t){this.clear(),this.trail.forEach((r,s)=>{r.age+=t*1e3,r.age>this.maxAge&&this.trail.splice(s,1)}),this.trail.length||(this.force=0),this.trail.forEach(r=>{this.drawTouch(r)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(t){const r=this.trail[this.trail.length-1];if(r){const s=r.x-t.x,c=r.y-t.y,p=s*s+c*c,h=Math.max(this.minForce,Math.min(p*1e4,1));if(this.force=Vw(h,this.force,this.smoothing),this.interpolate){const g=Math.ceil(p/Math.pow(this.radius*.5/this.interpolate,2));if(g>1)for(let y=1;y<g;y++)this.trail.push({x:r.x-s/g*y,y:r.y-c/g*y,age:0,force:h})}}this.trail.push({x:t.x,y:t.y,age:0,force:this.force})}drawTouch(t){const r={x:t.x*this.size,y:(1-t.y)*this.size};let s=1;t.age<this.maxAge*.3?s=this.ease(t.age/(this.maxAge*.3)):s=this.ease(1-(t.age-this.maxAge*.3)/(this.maxAge*.7)),s*=t.force,this.ctx.globalCompositeOperation=this.blend;const c=this.size*this.radius*s,p=this.ctx.createRadialGradient(r.x,r.y,Math.max(0,c*.25),r.x,r.y,Math.max(0,c));p.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),p.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=p,this.ctx.arc(r.x,r.y,Math.max(0,c),0,Math.PI*2),this.ctx.fill()}}function Kw(i={}){const{size:t,maxAge:r,radius:s,intensity:c,interpolate:p,smoothing:h,minForce:g,blend:y,ease:_}=i,b=(0,d.useMemo)(()=>new Xw(i),[t,r,s,c,p,h,g,y,_]);(0,E.A)((R,F)=>void b.update(F));const T=(0,d.useCallback)(R=>b.addTouch(R.uv),[b]);return[b.texture,T]}const fb=d.forwardRef(function(P,O){var D=P,{children:t,disable:r,disableX:s,disableY:c,disableZ:p,left:h,right:g,top:y,bottom:_,front:b,back:T,onCentered:R,precise:F=!0,cacheKey:G=0}=D,L=An(D,["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"]);const z=d.useRef(null),H=d.useRef(null),Q=d.useRef(null);return d.useLayoutEffect(()=>{H.current.matrixWorld.identity();const W=new o.Box3().setFromObject(Q.current,F),Y=new o.Vector3,K=new o.Sphere,ie=W.max.x-W.min.x,ce=W.max.y-W.min.y,ge=W.max.z-W.min.z;W.getCenter(Y),W.getBoundingSphere(K);const ae=y?ce/2:_?-ce/2:0,xe=h?-ie/2:g?ie/2:0,ve=b?ge/2:T?-ge/2:0;H.current.position.set(r||s?0:-Y.x+xe,r||c?0:-Y.y+ae,r||p?0:-Y.z+ve),typeof R!="undefined"&&R({parent:z.current.parent,container:z.current,width:ie,height:ce,depth:ge,boundingBox:W,boundingSphere:K,center:Y,verticalAlignment:ae,horizontalAlignment:xe,depthAlignment:ve})},[G,R,y,h,b,r,s,c,p,F,g,_,T]),d.useImperativeHandle(O,()=>z.current,[]),d.createElement("group",(0,w.Z)({ref:z},L),d.createElement("group",{ref:H},d.createElement("group",{ref:Q},t)))}),Yw=d.forwardRef((g,h)=>{var y=g,{font:i,color:t="#cbcbcb",bevelSize:r=.04,debug:s=!1,children:c}=y,p=An(y,["font","color","bevelSize","debug","children"]);const[_,b]=d.useState(0),T=d.useCallback((G=1)=>b(_+G),[_]),R=d.useCallback((G=1)=>b(_-G),[_]),F=d.useMemo(()=>({incr:T,decr:R}),[T,R]);return d.useImperativeHandle(h,()=>F,[F]),d.createElement("group",p,d.createElement(d.Suspense,{fallback:null},d.createElement(fb,{top:!0,cacheKey:JSON.stringify({counter:_,font:i})},d.createElement(Jg,{bevelEnabled:!0,bevelSize:r,font:i},s?d.createElement("meshNormalMaterial",{wireframe:!0}):d.createElement("meshStandardMaterial",{color:t}),_))),c)}),Jw=(Q,H)=>{var W=Q,{startFrame:i,endFrame:t,fps:r,frameName:s,textureDataURL:c,textureImageURL:p,loop:h,numberOfFrames:g,autoPlay:y,animationNames:_,onStart:b,onEnd:T,onLoopEnd:R,onFrame:F,play:G,pause:L,flipX:O,alphaTest:P,children:D}=W,z=An(W,["startFrame","endFrame","fps","frameName","textureDataURL","textureImageURL","loop","numberOfFrames","autoPlay","animationNames","onStart","onEnd","onLoopEnd","onFrame","play","pause","flipX","alphaTest","children"]);(0,E.z)(At=>At.viewport);const Y=d.useRef(null),[K,ie]=d.useState(!1),ce=d.useRef(),ge=d.useRef(),ae=d.useRef(window.performance.now()),xe=d.useRef(),ve=d.useRef(i||0),Be=d.useRef(s||""),Ue=1e3/(r||30),[Ie,Ne]=d.useState(new o.Texture),Le=d.useRef(0),[Ye,Ce]=d.useState([1,1,1]),Ee=O?-1:1;function _e(At,gt,ot){const Qt=new o.TextureLoader,Gt=fetch(At).then(qe=>qe.json()),Bt=new Promise(qe=>{Qt.load(gt,qe)});Promise.all([Gt,Bt]).then(qe=>{ot(qe[0],qe[1])})}const oe=(At,gt)=>{const ot=gt/At;return ge.current.scale.set(1,ot,1),[1,ot,1]};d.useEffect(()=>{if(c&&p)_e(c,p,me);else if(p){const At=new o.TextureLoader;new Promise(gt=>{At.load(p,gt)}).then(gt=>{me(null,gt)})}},[]),d.useLayoutEffect(()=>{ye()},[Ie,O]),d.useEffect(()=>{},[L]),d.useEffect(()=>{Be.current!==s&&s&&(ve.current=0,Be.current=s)},[s]);const me=(At,gt)=>{if(At===null){if(gt&&g){const ot=gt.image.width,Qt=gt.image.height,Gt=ot/g,Bt=Qt;if(xe.current=gt,Le.current=g,Y.current={frames:[],meta:{version:"1.0",size:{w:ot,h:Qt},scale:"1"}},parseInt(Gt.toString(),10)===Gt)for(let qe=0;qe<g;qe++)Y.current.frames.push({frame:{x:qe*Gt,y:0,w:Gt,h:Bt},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:Gt,h:Bt},sourceSize:{w:Gt,h:Qt}})}}else if(gt){Y.current=At,Y.current.frames=Array.isArray(At.frames)?At.frames:Te(),Le.current=Array.isArray(At.frames)?At.frames.length:Object.keys(At.frames).length,xe.current=gt;const{w:ot,h:Qt}=Mt(At.frames).sourceSize,Gt=oe(ot,Qt);Ce(Gt),ce.current&&(ce.current.map=gt)}gt.premultiplyAlpha=!1,Ne(gt)},Te=()=>{const At={},gt=Y.current,ot=_;if(ot)for(let Qt=0;Qt<ot.length;Qt++){At[ot[Qt]]=[];for(let Gt in gt.frames){const Bt=gt.frames[Gt],qe=Bt.frame,Ge=qe.x,Ot=qe.y,gn=qe.w,Mn=qe.h,Ut=Bt.sourceSize.w,Nn=Bt.sourceSize.h;typeof Gt=="string"&&Gt.toLowerCase().indexOf(ot[Qt].toLowerCase())!==-1&&At[ot[Qt]].push({x:Ge,y:Ot,w:gn,h:Mn,frame:qe,sourceSize:{w:Ut,h:Nn}})}}return At},ye=()=>{if(!Y.current)return;const{meta:{size:At},frames:gt}=Y.current,{w:ot,h:Qt}=Array.isArray(gt)?gt[0].sourceSize:s?gt[s]?gt[s][0].sourceSize:{w:0,h:0}:{w:0,h:0};ce.current.map.wrapS=ce.current.map.wrapT=o.RepeatWrapping,ce.current.map.center.set(0,0),ce.current.map.repeat.set(1*Ee/(At.w/ot),1/(At.h/Qt));const Bt=1/((At.h-1)/Qt);ce.current.map.offset.x=0,ce.current.map.offset.y=1-Bt,ie(!0),b&&b({currentFrameName:s,currentFrame:ve.current})},ze=()=>{const At=window.performance.now(),gt=At-ae.current,{meta:{size:ot},frames:Qt}=Y.current,{w:Gt,h:Bt}=Mt(Qt).sourceSize,qe=Array.isArray(Qt)?Qt:s?Qt[s]:[];let Ge=0,Ot=0;const gn=t||qe.length-1;if(ve.current>gn&&(ve.current=h&&i!=null?i:0,h?R==null||R({currentFrameName:s,currentFrame:ve.current}):T==null||T({currentFrameName:s,currentFrame:ve.current}),!h)||gt<=Ue)return;ae.current=At-gt%Ue,oe(Gt,Bt);const Mn=(ot.w-1)/Gt,Ut=(ot.h-1)/Bt,{frame:{x:Nn,y:ar},sourceSize:{w:Cr,h:dr}}=qe[ve.current],bi=1/Mn,fi=1/Ut;Ge=Ee>0?bi*(Nn/Cr):bi*(Nn/Cr)-ce.current.map.repeat.x,Ot=Math.abs(1-fi)-fi*(ar/dr),ce.current.map.offset.x=Ge,ce.current.map.offset.y=Ot,ve.current+=1};(0,E.A)((At,gt)=>{var ot,Qt;!((ot=Y.current)!=null&&ot.frames)||!((Qt=ce.current)!=null&&Qt.map)||L||(y||G)&&(ze(),F&&F({currentFrameName:Be.current,currentFrame:ve.current}))});const Mt=At=>{if(Array.isArray(At))return At[0];if(typeof At=="object"&&At!==null){const gt=Object.keys(At);return At[gt[0]][0]}else return{w:0,h:0}};return d.createElement("group",z,d.createElement(d.Suspense,{fallback:null},d.createElement("sprite",{ref:ge,scale:Ye},d.createElement("spriteMaterial",{toneMapped:!1,ref:ce,map:Ie,transparent:!0,alphaTest:P!=null?P:0}))),D)};var qw=Object.defineProperty,Zw=(i,t,r)=>t in i?qw(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,fm=(i,t,r)=>(Zw(i,typeof t!="symbol"?t+"":t,r),r);const Z0=4,$0=1024,Bd=4,$w=(i=1)=>{const t=new Float32Array($0*Bd*i*Z0),r=new o.DataTexture(t,$0,Bd*i,o.RGBAFormat,o.FloatType);return r.wrapS=o.RepeatWrapping,r.wrapT=o.RepeatWrapping,r.magFilter=o.NearestFilter,r.needsUpdate=!0,r},eT=(i,t,r=0)=>{const s=Math.floor($0*(Bd/4));t.arcLengthDivisions=s/2,t.updateArcLengths();const c=t.getSpacedPoints(s),p=t.computeFrenetFrames(s,!0);for(let h=0;h<s;h++){const g=Math.floor(h/$0),y=h%$0;let _=c[h];H2(i,y,_.x,_.y,_.z,0+g+Bd*r),_=p.tangents[h],H2(i,y,_.x,_.y,_.z,1+g+Bd*r),_=p.normals[h],H2(i,y,_.x,_.y,_.z,2+g+Bd*r),_=p.binormals[h],H2(i,y,_.x,_.y,_.z,3+g+Bd*r)}i.needsUpdate=!0},H2=(i,t,r,s,c,p)=>{const h=i.image,{data:g}=h,y=Z0*$0*p;g[t*Z0+y+0]=r,g[t*Z0+y+1]=s,g[t*Z0+y+2]=c,g[t*Z0+y+3]=1},tT=i=>({spineTexture:{value:i},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function nT(i,t,r=1){i.__ok||(i.__ok=!0,i.onBeforeCompile=s=>{if(s.__modified)return;s.__modified=!0,Object.assign(s.uniforms,t);const c=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Bd*r}.;
		float textureStacks = ${Bd/4}.;

		${s.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Bd}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);s.vertexShader=c})}class rT{constructor(t,r=1){fm(this,"curveArray"),fm(this,"curveLengthArray"),fm(this,"object3D"),fm(this,"splineTexure"),fm(this,"uniforms");const s=t.clone(),c=$w(r),p=tT(c);s.traverse(h=>{(h instanceof o.Mesh||h instanceof o.InstancedMesh)&&(h.material=h.material.clone(),nT(h.material,p,r))}),this.curveArray=new Array(r),this.curveLengthArray=new Array(r),this.object3D=s,this.splineTexure=c,this.uniforms=p}updateCurve(t,r){if(t>=this.curveArray.length)throw Error("Index out of range for Flow");const s=r.getLength();this.uniforms.spineLength.value=s,this.curveLengthArray[t]=s,this.curveArray[t]=r,eT(this.splineTexure,r,t)}moveAlongCurve(t){this.uniforms.pathOffset.value+=t}}const sC=new o.Matrix4;class t8 extends null{constructor(t,r,s,c){const p=new InstancedMesh(s,c,t);p.instanceMatrix.setUsage(DynamicDrawUsage),p.frustumCulled=!1,super(p,r),fm(this,"offsets"),fm(this,"whichCurve"),this.offsets=new Array(t).fill(0),this.whichCurve=new Array(t).fill(0)}writeChanges(t){sC.makeTranslation(this.curveLengthArray[this.whichCurve[t]],this.whichCurve[t],this.offsets[t]),this.object3D.setMatrixAt(t,sC),this.object3D.instanceMatrix.needsUpdate=!0}moveIndividualAlongCurve(t,r){this.offsets[t]+=r,this.writeChanges(t)}setCurve(t,r){if(isNaN(r))throw Error("curve index being set is Not a Number (NaN)");this.whichCurve[t]=r,this.writeChanges(t)}}const iT=d.forwardRef(({children:i,curve:t},r)=>{const[s]=d.useState(()=>new o.Scene),[c,p]=d.useState(),h=d.useRef();return d.useEffect(()=>{h.current=new rT(s.children[0]),p(h.current.object3D)},[i]),d.useEffect(()=>{var g;t&&((g=h.current)==null||g.updateCurve(0,t))},[t]),d.useImperativeHandle(r,()=>({moveAlongCurve:g=>{var y;(y=h.current)==null||y.moveAlongCurve(g)}})),d.createElement(d.Fragment,null,(0,E.g)(i,s),c&&d.createElement("primitive",{object:c}))});var oT=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class sT extends o.MeshPhysicalMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${oT}
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}const aT=d.forwardRef((s,r)=>{var c=s,{speed:i=1}=c,t=An(c,["speed"]);const[p]=d.useState(()=>new sT);return(0,E.A)(h=>p&&(p.time=h.clock.getElapsedTime()*i)),d.createElement("primitive",(0,w.Z)({object:p,ref:r,attach:"material"},t))});class lT extends o.MeshStandardMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._factor={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.factor=this._factor,t.vertexShader=`
      uniform float time;
      uniform float factor;
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(t){this._time.value=t}get factor(){return this._factor.value}set factor(t){this._factor.value=t}}const cT=d.forwardRef((s,r)=>{var c=s,{speed:i=1}=c,t=An(c,["speed"]);const[p]=d.useState(()=>new lT);return(0,E.A)(h=>p&&(p.time=h.clock.getElapsedTime()*i)),d.createElement("primitive",(0,w.Z)({object:p,ref:r,attach:"material"},t))});class pT extends o.ShaderMaterial{constructor(t=new o.Vector2){super({uniforms:{inputBuffer:new o.Uniform(null),depthBuffer:new o.Uniform(null),resolution:new o.Uniform(new o.Vector2),texelSize:new o.Uniform(new o.Vector2),halfTexelSize:new o.Uniform(new o.Vector2),kernel:new o.Uniform(0),scale:new o.Uniform(1),cameraNear:new o.Uniform(0),cameraFar:new o.Uniform(1),minDepthThreshold:new o.Uniform(0),maxDepthThreshold:new o.Uniform(1),depthScale:new o.Uniform(0),depthToBlurRatioBias:new o.Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <encodings_fragment>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:o.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(t,r){this.uniforms.texelSize.value.set(t,r),this.uniforms.halfTexelSize.value.set(t,r).multiplyScalar(.5)}setResolution(t){this.uniforms.resolution.value.copy(t)}}class aC{constructor({gl:t,resolution:r,width:s=500,height:c=500,minDepthThreshold:p=0,maxDepthThreshold:h=1,depthScale:g=0,depthToBlurRatioBias:y=.25}){this.renderToScreen=!1,this.renderTargetA=new o.WebGLRenderTarget(r,r,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,stencilBuffer:!1,depthBuffer:!1,type:o.HalfFloatType}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new pT,this.convolutionMaterial.setTexelSize(1/s,1/c),this.convolutionMaterial.setResolution(new o.Vector2(s,c)),this.scene=new o.Scene,this.camera=new o.Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=p,this.convolutionMaterial.uniforms.maxDepthThreshold.value=h,this.convolutionMaterial.uniforms.depthScale.value=g,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=y,this.convolutionMaterial.defines.USE_DEPTH=g>0;const _=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),b=new Float32Array([0,0,2,0,0,2]),T=new o.BufferGeometry;T.setAttribute("position",new o.BufferAttribute(_,3)),T.setAttribute("uv",new o.BufferAttribute(b,2)),this.screen=new o.Mesh(T,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(t,r,s){const c=this.scene,p=this.camera,h=this.renderTargetA,g=this.renderTargetB;let y=this.convolutionMaterial,_=y.uniforms;_.depthBuffer.value=r.depthTexture;const b=y.kernel;let T=r,R,F,G;for(F=0,G=b.length-1;F<G;++F)R=F&1?g:h,_.kernel.value=b[F],_.inputBuffer.value=T.texture,t.setRenderTarget(R),t.render(c,p),T=R;_.kernel.value=b[F],_.inputBuffer.value=T.texture,t.setRenderTarget(this.renderToScreen?null:s),t.render(c,p)}}class lC extends o.MeshStandardMaterial{constructor(t={}){super(t),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(t)}onBeforeCompile(t){var r;(r=t.defines)!=null&&r.USE_UV||(t.defines.USE_UV=""),t.uniforms.hasBlur=this._hasBlur,t.uniforms.tDiffuse=this._tDiffuse,t.uniforms.tDepth=this._tDepth,t.uniforms.distortionMap=this._distortionMap,t.uniforms.tDiffuseBlur=this._tDiffuseBlur,t.uniforms.textureMatrix=this._textureMatrix,t.uniforms.mirror=this._mirror,t.uniforms.mixBlur=this._mixBlur,t.uniforms.mixStrength=this._blurStrength,t.uniforms.minDepthThreshold=this._minDepthThreshold,t.uniforms.maxDepthThreshold=this._maxDepthThreshold,t.uniforms.depthScale=this._depthScale,t.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,t.uniforms.distortion=this._distortion,t.uniforms.mixContrast=this._mixContrast,t.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${t.vertexShader}`,t.vertexShader=t.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),t.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${t.fragmentShader}`,t.fragmentShader=t.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(t){this._tDiffuse.value=t}get tDepth(){return this._tDepth.value}set tDepth(t){this._tDepth.value=t}get distortionMap(){return this._distortionMap.value}set distortionMap(t){this._distortionMap.value=t}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(t){this._tDiffuseBlur.value=t}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(t){this._textureMatrix.value=t}get hasBlur(){return this._hasBlur.value}set hasBlur(t){this._hasBlur.value=t}get mirror(){return this._mirror.value}set mirror(t){this._mirror.value=t}get mixBlur(){return this._mixBlur.value}set mixBlur(t){this._mixBlur.value=t}get mixStrength(){return this._blurStrength.value}set mixStrength(t){this._blurStrength.value=t}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(t){this._minDepthThreshold.value=t}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(t){this._maxDepthThreshold.value=t}get depthScale(){return this._depthScale.value}set depthScale(t){this._depthScale.value=t}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(t){this._depthToBlurRatioBias.value=t}get distortion(){return this._distortion.value}set distortion(t){this._distortion.value=t}get mixContrast(){return this._mixContrast.value}set mixContrast(t){this._mixContrast.value=t}}(0,E.e)({MeshReflectorMaterialImpl:lC});const uT=d.forwardRef((L,G)=>{var O=L,{mixBlur:i=0,mixStrength:t=1,resolution:r=256,blur:s=[0,0],minDepthThreshold:c=.9,maxDepthThreshold:p=1,depthScale:h=0,depthToBlurRatioBias:g=.25,mirror:y=0,distortion:_=1,mixContrast:b=1,distortionMap:T,reflectorOffset:R=0}=O,F=An(O,["mixBlur","mixStrength","resolution","blur","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","distortion","mixContrast","distortionMap","reflectorOffset"]);const P=(0,E.z)(({gl:_e})=>_e),D=(0,E.z)(({camera:_e})=>_e),z=(0,E.z)(({scene:_e})=>_e);s=Array.isArray(s)?s:[s,s];const H=s[0]+s[1]>0,Q=d.useRef(null),[W]=d.useState(()=>new o.Plane),[Y]=d.useState(()=>new o.Vector3),[K]=d.useState(()=>new o.Vector3),[ie]=d.useState(()=>new o.Vector3),[ce]=d.useState(()=>new o.Matrix4),[ge]=d.useState(()=>new o.Vector3(0,0,-1)),[ae]=d.useState(()=>new o.Vector4),[xe]=d.useState(()=>new o.Vector3),[ve]=d.useState(()=>new o.Vector3),[Be]=d.useState(()=>new o.Vector4),[Ue]=d.useState(()=>new o.Matrix4),[Ie]=d.useState(()=>new o.PerspectiveCamera),Ne=d.useCallback(()=>{var _e;const oe=Q.current.parent||((_e=Q.current)==null?void 0:_e.__r3f.parent);if(!oe||(K.setFromMatrixPosition(oe.matrixWorld),ie.setFromMatrixPosition(D.matrixWorld),ce.extractRotation(oe.matrixWorld),Y.set(0,0,1),Y.applyMatrix4(ce),K.addScaledVector(Y,R),xe.subVectors(K,ie),xe.dot(Y)>0))return;xe.reflect(Y).negate(),xe.add(K),ce.extractRotation(D.matrixWorld),ge.set(0,0,-1),ge.applyMatrix4(ce),ge.add(ie),ve.subVectors(K,ge),ve.reflect(Y).negate(),ve.add(K),Ie.position.copy(xe),Ie.up.set(0,1,0),Ie.up.applyMatrix4(ce),Ie.up.reflect(Y),Ie.lookAt(ve),Ie.far=D.far,Ie.updateMatrixWorld(),Ie.projectionMatrix.copy(D.projectionMatrix),Ue.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ue.multiply(Ie.projectionMatrix),Ue.multiply(Ie.matrixWorldInverse),Ue.multiply(oe.matrixWorld),W.setFromNormalAndCoplanarPoint(Y,K),W.applyMatrix4(Ie.matrixWorldInverse),ae.set(W.normal.x,W.normal.y,W.normal.z,W.constant);const me=Ie.projectionMatrix;Be.x=(Math.sign(ae.x)+me.elements[8])/me.elements[0],Be.y=(Math.sign(ae.y)+me.elements[9])/me.elements[5],Be.z=-1,Be.w=(1+me.elements[10])/me.elements[14],ae.multiplyScalar(2/ae.dot(Be)),me.elements[2]=ae.x,me.elements[6]=ae.y,me.elements[10]=ae.z+1,me.elements[14]=ae.w},[D,R]),[Le,Ye,Ce,Ee]=d.useMemo(()=>{const _e={minFilter:o.LinearFilter,magFilter:o.LinearFilter,type:o.HalfFloatType},oe=new o.WebGLRenderTarget(r,r,_e);oe.depthBuffer=!0,oe.depthTexture=new o.DepthTexture(r,r),oe.depthTexture.format=o.DepthFormat,oe.depthTexture.type=o.UnsignedShortType;const me=new o.WebGLRenderTarget(r,r,_e),Te=new aC({gl:P,resolution:r,width:s[0],height:s[1],minDepthThreshold:c,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:g}),ye={mirror:y,textureMatrix:Ue,mixBlur:i,tDiffuse:oe.texture,tDepth:oe.depthTexture,tDiffuseBlur:me.texture,hasBlur:H,mixStrength:t,minDepthThreshold:c,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:g,distortion:_,distortionMap:T,mixContrast:b,"defines-USE_BLUR":H?"":void 0,"defines-USE_DEPTH":h>0?"":void 0,"defines-USE_DISTORTION":T?"":void 0};return[oe,me,Te,ye]},[P,s,Ue,r,y,H,i,t,c,p,h,g,_,T,b]);return(0,E.A)(()=>{var _e;const oe=Q.current.parent||((_e=Q.current)==null?void 0:_e.__r3f.parent);if(!oe)return;oe.visible=!1;const me=P.xr.enabled,Te=P.shadowMap.autoUpdate;Ne(),P.xr.enabled=!1,P.shadowMap.autoUpdate=!1,P.setRenderTarget(Le),P.state.buffers.depth.setMask(!0),P.autoClear||P.clear(),P.render(z,Ie),H&&Ce.render(P,Le,Ye),P.xr.enabled=me,P.shadowMap.autoUpdate=Te,oe.visible=!0,P.setRenderTarget(null)}),d.createElement("meshReflectorMaterialImpl",(0,w.Z)({attach:"material",key:"key"+Ee["defines-USE_BLUR"]+Ee["defines-USE_DEPTH"]+Ee["defines-USE_DISTORTION"],ref:Dn([Q,G])},Ee,F))});function dT(i){switch(i){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function hT(i){switch(i){case 1:return o.RedFormat;case 2:return o.RGFormat;case 3:return o.RGBAFormat;case 4:return o.RGBAFormat}}function cC(i){switch(i){case 1:return o.RedIntegerFormat;case 2:return o.RGIntegerFormat;case 3:return o.RGBAIntegerFormat;case 4:return o.RGBAIntegerFormat}}class pC extends o.DataTexture{constructor(){super(),this.minFilter=o.NearestFilter,this.magFilter=o.NearestFilter,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(t){const r=this.overrideItemSize,s=t.itemSize,c=t.count;if(r!==null){if(s*c%r!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");t.itemSize=r,t.count=c*s/r}const p=t.itemSize,h=t.count,g=t.normalized,y=t.array.constructor,_=y.BYTES_PER_ELEMENT;let b=this._forcedType,T=p;if(b===null)switch(y){case Float32Array:b=o.FloatType;break;case Uint8Array:case Uint16Array:case Uint32Array:b=o.UnsignedIntType;break;case Int8Array:case Int16Array:case Int32Array:b=o.IntType;break}let R,F,G,L,O=dT(p);switch(b){case o.FloatType:G=1,F=hT(p),g&&_===1?(L=y,O+="8",y===Uint8Array?R=o.UnsignedByteType:(R=o.ByteType,O+="_SNORM")):(L=Float32Array,O+="32F",R=o.FloatType);break;case o.IntType:O+=_*8+"I",G=g?Math.pow(2,y.BYTES_PER_ELEMENT*8-1):1,F=cC(p),_===1?(L=Int8Array,R=o.ByteType):_===2?(L=Int16Array,R=o.ShortType):(L=Int32Array,R=o.IntType);break;case o.UnsignedIntType:O+=_*8+"UI",G=g?Math.pow(2,y.BYTES_PER_ELEMENT*8-1):1,F=cC(p),_===1?(L=Uint8Array,R=o.UnsignedByteType):_===2?(L=Uint16Array,R=o.UnsignedShortType):(L=Uint32Array,R=o.UnsignedIntType);break}T===3&&(F===o.RGBAFormat||F===o.RGBAIntegerFormat)&&(T=4);const P=Math.ceil(Math.sqrt(h)),D=T*P*P,z=new L(D),H=t.normalized;t.normalized=!1;for(let Q=0;Q<h;Q++){const W=T*Q;z[W]=t.getX(Q)/G,p>=2&&(z[W+1]=t.getY(Q)/G),p>=3&&(z[W+2]=t.getZ(Q)/G,T===4&&(z[W+3]=1)),p>=4&&(z[W+3]=t.getW(Q)/G)}t.normalized=H,this.internalFormat=O,this.format=F,this.type=R,this.image.width=P,this.image.height=P,this.image.data=z,this.needsUpdate=!0,this.dispose(),t.itemSize=s,t.count=c}}class fT extends pC{constructor(){super(),this._forcedType=o.UnsignedIntType}}class n8 extends null{constructor(){super(),this._forcedType=IntType}}class gT extends pC{constructor(){super(),this._forcedType=o.FloatType}}function mT(i,t,r){const s=i._roots;if(s.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const c=s[0],p=new Uint16Array(c),h=new Uint32Array(c),g=new Float32Array(c),y=c.byteLength/um,_=2*Math.ceil(Math.sqrt(y/2)),b=new Float32Array(4*_*_),T=Math.ceil(Math.sqrt(y)),R=new Uint32Array(2*T*T);for(let F=0;F<y;F++){const G=F*um/4,L=G*2,O=G;for(let P=0;P<3;P++)b[8*F+0+P]=g[O+0+P],b[8*F+4+P]=g[O+3+P];if(Bh(L,p)){const P=Q0(L,p),D=dm(G,h),z=4294901760|P;R[F*2+0]=z,R[F*2+1]=D}else{const P=4*X0(G,h)/um,D=qx(G,h);R[F*2+0]=D,R[F*2+1]=P}}t.image.data=b,t.image.width=_,t.image.height=_,t.format=o.RGBAFormat,t.type=o.FloatType,t.internalFormat="RGBA32F",t.minFilter=o.NearestFilter,t.magFilter=o.NearestFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose(),r.image.data=R,r.image.width=T,r.image.height=T,r.format=o.RGIntegerFormat,r.type=o.UnsignedIntType,r.internalFormat="RG32UI",r.minFilter=o.NearestFilter,r.magFilter=o.NearestFilter,r.generateMipmaps=!1,r.needsUpdate=!0,r.dispose()}class uC{constructor(){this.autoDispose=!0,this.index=new fT,this.position=new gT,this.bvhBounds=new o.DataTexture,this.bvhContents=new o.DataTexture,this.index.overrideItemSize=3}updateFrom(t){const{geometry:r}=t;mT(t,this.bvhBounds,this.bvhContents),this.index.updateFrom(r.index),this.position.updateFrom(r.attributes.position)}dispose(){const{index:t,position:r,bvhBounds:s,bvhContents:c}=this;t&&t.dispose(),r&&r.dispose(),s&&s.dispose(),c&&c.dispose()}}const AT=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,yT=`

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

// Raycasting
float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,r8=null,vT=Lc({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new uC,color:new o.Color("white"),resolution:new o.Vector2,viewMatrixInverse:new o.Matrix4,projectionMatrixInverse:new o.Matrix4},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${AT}
  ${yT}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }`),_T=i=>i&&i.isCubeTexture;function ET(c){var p=c,{aberrationStrength:i=0,fastChroma:t=!0,envMap:r}=p,s=An(p,["aberrationStrength","fastChroma","envMap"]);(0,E.e)({MeshRefractionMaterial:vT});const h=(0,d.useRef)(),{size:g}=(0,E.z)(),y=(0,d.useMemo)(()=>{var _,b;const T={},R=_T(r),G=((_=R?(b=r.image[0])==null?void 0:b.width:r.image.width)!==null&&_!==void 0?_:1024)/4,L=Math.floor(Math.log2(G)),O=Math.pow(2,L),P=3*Math.max(O,16*7),D=4*O;return R&&(T.ENVMAP_TYPE_CUBEM=""),T.CUBEUV_TEXEL_WIDTH=`${1/P}`,T.CUBEUV_TEXEL_HEIGHT=`${1/D}`,T.CUBEUV_MAX_MIP=`${L}.0`,i>0&&(T.CHROMATIC_ABERRATIONS=""),t&&(T.FAST_CHROMA=""),T},[i,t]);return(0,d.useLayoutEffect)(()=>{var _,b,T;const R=(_=h.current)==null||(b=_.__r3f)==null||(T=b.parent)==null?void 0:T.geometry;R&&(h.current.bvh=new uC,h.current.bvh.updateFrom(new q0(R.clone().toNonIndexed(),{lazyGeneration:!1,strategy:C2})))},[]),(0,E.A)(({camera:_})=>{h.current.viewMatrixInverse=_.matrixWorld,h.current.projectionMatrixInverse=_.projectionMatrixInverse}),d.createElement("meshRefractionMaterial",(0,w.Z)({key:JSON.stringify(y),defines:y,ref:h,resolution:[g.width,g.height],aberrationStrength:i,envMap:r},s))}const gb=Lc({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class bT extends o.MeshPhysicalMaterial{constructor(t=6,r=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new o.Color("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=s=>{s.uniforms=jn(jn({},s.uniforms),this.uniforms),r?s.defines.USE_SAMPLER="":s.defines.USE_TRANSMISSION="",s.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      float seed = 0.0;
      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }

      float rand() {
        float result = random(vec3(gl_FragCoord.xy, seed));
        seed += 1.0;
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+s.fragmentShader,s.fragmentShader=s.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +\u221E, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),s.fragmentShader=s.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand();
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${t}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${t})) , material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${t})), material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${t}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(s=>Object.defineProperty(this,s,{get:()=>this.uniforms[s].value,set:c=>this.uniforms[s].value=c}))}}const MT=d.forwardRef((L,G)=>{var O=L,{buffer:i,transmissionSampler:t=!1,backside:r=!1,side:s=o.FrontSide,transmission:c=1,thickness:p=0,backsideThickness:h=0,samples:g=10,resolution:y,backsideResolution:_,background:b,anisotropy:T,anisotropicBlur:R}=O,F=An(O,["buffer","transmissionSampler","backside","side","transmission","thickness","backsideThickness","samples","resolution","backsideResolution","background","anisotropy","anisotropicBlur"]);(0,E.e)({MeshTransmissionMaterial:bT});const P=d.useRef(null),[D]=d.useState(()=>new gb),z=ec(_||y),H=ec(y);let Q,W,Y;return(0,E.A)(K=>{P.current.time=K.clock.getElapsedTime(),P.current.buffer===H.texture&&!t&&(Y=P.current.__r3f.parent,Y&&(W=K.gl.toneMapping,Q=K.scene.background,K.gl.toneMapping=o.NoToneMapping,b&&(K.scene.background=b),Y.material=D,r&&(K.gl.setRenderTarget(z),K.gl.render(K.scene,K.camera),Y.material=P.current,Y.material.buffer=z.texture,Y.material.thickness=h,Y.material.side=o.BackSide),K.gl.setRenderTarget(H),K.gl.render(K.scene,K.camera),Y.material.thickness=p,Y.material.side=s,Y.material.buffer=H.texture,K.scene.background=Q,K.gl.setRenderTarget(null),Y.material=P.current,K.gl.toneMapping=W))}),d.useImperativeHandle(G,()=>P.current,[]),d.createElement("meshTransmissionMaterial",(0,w.Z)({args:[g,t],ref:P},F,{buffer:i||H.texture,_transmission:c,anisotropicBlur:R!=null?R:T,transmission:t?c:0,thickness:p,side:s}))}),xT=d.forwardRef((i,t)=>((0,E.e)({DiscardMaterialImpl:gb}),d.createElement("discardMaterialImpl",(0,w.Z)({ref:t},i))));class dC extends o.PointsMaterial{constructor(t){super(t),this.onBeforeCompile=(r,s)=>{const{isWebGL2:c}=s.capabilities;r.fragmentShader=r.fragmentShader.replace("#include <output_fragment>",`
        ${c?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const CT=d.forwardRef((i,t)=>{const[r]=d.useState(()=>new dC(null));return d.createElement("primitive",(0,w.Z)({},i,{object:r,ref:t,attach:"material"}))}),ST=({focus:i=0,size:t=25,samples:r=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${t})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${i});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${r}; i ++) {
    offset = (vogelDiskSample(j, ${r}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${r}; i++) {
    vogelSample = vogelDiskSample(j, ${r}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${t}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${r}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function hC(i,t,r){t.traverse(s=>{s.material&&(i.properties.remove(s.material),s.material.dispose==null||s.material.dispose())}),i.info.programs.length=0,i.compile(t,r)}function wT({focus:i=0,samples:t=10,size:r=25}){const s=(0,E.z)(h=>h.gl),c=(0,E.z)(h=>h.scene),p=(0,E.z)(h=>h.camera);return d.useEffect(()=>{const h=o.ShaderChunk.shadowmap_pars_fragment;return o.ShaderChunk.shadowmap_pars_fragment=o.ShaderChunk.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+ST({size:r,samples:t,focus:i})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),hC(s,c,p),()=>{o.ShaderChunk.shadowmap_pars_fragment=h,hC(s,c,p)}},[i,r,t]),null}function il(i,t){const r=i+"Geometry";return d.forwardRef((g,h)=>{var y=g,{args:s,children:c}=y,p=An(y,["args","children"]);const _=d.useRef(null);return d.useImperativeHandle(h,()=>_.current),d.useLayoutEffect(()=>void(t==null?void 0:t(_.current))),d.createElement("mesh",(0,w.Z)({ref:_},p),d.createElement(r,{attach:"geometry",args:s}),c)})}const TT=il("box"),BT=il("circle"),RT=il("cone"),IT=il("cylinder"),FT=il("sphere"),fC=il("plane"),OT=il("tube"),DT=il("torus"),PT=il("torusKnot"),LT=il("tetrahedron"),kT=il("ring"),zT=il("polyhedron"),GT=il("icosahedron"),UT=il("octahedron"),NT=il("dodecahedron"),HT=il("extrude"),jT=il("lathe"),WT=il("capsule"),VT=il("shape",({geometry:i})=>{const t=i.attributes.position,r=new o.Box3().setFromBufferAttribute(t),s=new o.Vector3;r.getSize(s);const c=[];let p=0,h=0,g=0,y=0;for(let _=0;_<t.count;_++)p=t.getX(_),h=t.getY(_),g=(p-r.min.x)/s.x,y=(h-r.min.y)/s.y,c.push(g,y);i.setAttribute("uv",new o.Float32BufferAttribute(c,2))}),Rd=1e-5;function QT(i,t,r){const s=new o.Shape,c=r-Rd;return s.absarc(Rd,Rd,Rd,-Math.PI/2,-Math.PI,!0),s.absarc(Rd,t-c*2,Rd,Math.PI,Math.PI/2,!0),s.absarc(i-c*2,t-c*2,Rd,Math.PI/2,0,!0),s.absarc(i-c*2,Rd,Rd,0,-Math.PI/2,!0),s}const XT=d.forwardRef(function(T,b){var R=T,{args:[t=1,r=1,s=1]=[],radius:c=.05,steps:p=1,smoothness:h=4,creaseAngle:g=.4,children:y}=R,_=An(R,["args","radius","steps","smoothness","creaseAngle","children"]);const F=d.useMemo(()=>QT(t,r,c),[t,r,c]),G=d.useMemo(()=>({depth:s-c*2,bevelEnabled:!0,bevelSegments:h*2,steps:p,bevelSize:c-Rd,bevelThickness:c,curveSegments:h}),[s,c,h]),L=d.useRef();return d.useLayoutEffect(()=>{L.current&&(L.current.center(),S3(L.current,g))},[F,G]),d.createElement("mesh",(0,w.Z)({ref:b},_),d.createElement("extrudeGeometry",{ref:L,args:[F,G]}),y)});function KT(){const i=new o.BufferGeometry,t=new Float32Array([-1,-1,3,-1,-1,3]);return i.setAttribute("position",new o.BufferAttribute(t,2)),i}const YT=d.forwardRef(function(c,s){var p=c,{children:t}=p,r=An(p,["children"]);const h=d.useMemo(KT,[]);return d.createElement("mesh",(0,w.Z)({ref:s,geometry:h,frustumCulled:!1},r),t)}),JT=d.forwardRef((y,g)=>{var _=y,{children:i,width:t,height:r,depth:s,box3:c,precise:p=!0}=_,h=An(_,["children","width","height","depth","box3","precise"]);const b=d.useRef(null),T=d.useRef(null),R=d.useRef(null);return d.useLayoutEffect(()=>{T.current.matrixWorld.identity();let F=c||new o.Box3().setFromObject(R.current,p);const G=F.max.x-F.min.x,L=F.max.y-F.min.y,O=F.max.z-F.min.z;let P=Math.max(G,L,O);t&&(P=G),r&&(P=L),s&&(P=O),T.current.scale.setScalar(1/P)},[t,r,s,c,p]),d.useImperativeHandle(g,()=>b.current,[]),d.createElement("group",(0,w.Z)({ref:b},h),d.createElement("group",{ref:T},d.createElement("group",{ref:R},i)))}),e1=i=>i&&i.isOrthographicCamera,qT=i=>i&&i.isBox3,gC=d.createContext(null);function mC({children:i,damping:t=6,fit:r,clip:s,observe:c,margin:p=1.2,eps:h=.01,onFit:g}){const y=d.useRef(null),{camera:_,invalidate:b,size:T,controls:R}=(0,E.z)(),F=R,G=d.useRef(g);G.current=g;function L(W,Y){return Math.abs(W.x-Y.x)<h&&Math.abs(W.y-Y.y)<h&&Math.abs(W.z-Y.z)<h}function O(W,Y,K,ie){W.x=o.MathUtils.damp(W.x,Y.x,K,ie),W.y=o.MathUtils.damp(W.y,Y.y,K,ie),W.z=o.MathUtils.damp(W.z,Y.z,K,ie)}const[P]=d.useState(()=>({animating:!1,focus:new o.Vector3,camera:new o.Vector3,zoom:1})),[D]=d.useState(()=>({focus:new o.Vector3,camera:new o.Vector3,zoom:1})),[z]=d.useState(()=>new o.Box3),H=d.useMemo(()=>{function W(){const Y=z.getSize(new o.Vector3),K=z.getCenter(new o.Vector3),ie=Math.max(Y.x,Y.y,Y.z),ce=e1(_)?ie*4:ie/(2*Math.atan(Math.PI*_.fov/360)),ge=e1(_)?ie*4:ce/_.aspect,ae=p*Math.max(ce,ge);return{box:z,size:Y,center:K,distance:ae}}return{getSize:W,refresh(Y){if(qT(Y))z.copy(Y);else{const K=Y||y.current;K.updateWorldMatrix(!0,!0),z.setFromObject(K)}if(z.isEmpty()){const K=_.position.length()||10;z.setFromCenterAndSize(new o.Vector3,new o.Vector3(K,K,K))}if((F==null?void 0:F.constructor.name)==="OrthographicTrackballControls"){const{distance:K}=W(),ie=_.position.clone().sub(F.target).normalize().multiplyScalar(K),ce=F.target.clone().add(ie);_.position.copy(ce)}return this},clip(){const{distance:Y}=W();return F&&(F.maxDistance=Y*10),_.near=Y/100,_.far=Y*100,_.updateProjectionMatrix(),F&&F.update(),b(),this},to({position:Y,target:K}){P.camera.copy(_.position);const{center:ie}=W();return D.camera.set(...Y),K?D.focus.set(...K):D.focus.copy(ie),t?P.animating=!0:_.position.set(...Y),this},fit(){P.camera.copy(_.position),F&&P.focus.copy(F.target);const{center:Y,distance:K}=W(),ie=Y.clone().sub(_.position).normalize().multiplyScalar(K);if(D.camera.copy(Y).sub(ie),D.focus.copy(Y),e1(_)){P.zoom=_.zoom;let ce=0,ge=0;const ae=[new o.Vector3(z.min.x,z.min.y,z.min.z),new o.Vector3(z.min.x,z.max.y,z.min.z),new o.Vector3(z.min.x,z.min.y,z.max.z),new o.Vector3(z.min.x,z.max.y,z.max.z),new o.Vector3(z.max.x,z.max.y,z.max.z),new o.Vector3(z.max.x,z.max.y,z.min.z),new o.Vector3(z.max.x,z.min.y,z.max.z),new o.Vector3(z.max.x,z.min.y,z.min.z)];Y.applyMatrix4(_.matrixWorldInverse);for(const Be of ae)Be.applyMatrix4(_.matrixWorldInverse),ce=Math.max(ce,Math.abs(Be.y-Y.y)),ge=Math.max(ge,Math.abs(Be.x-Y.x));ce*=2,ge*=2;const xe=(_.top-_.bottom)/ce,ve=(_.right-_.left)/ge;D.zoom=Math.min(xe,ve)/p,t||(_.zoom=D.zoom,_.updateProjectionMatrix())}return t?P.animating=!0:(_.position.copy(D.camera),_.lookAt(D.focus),F&&(F.target.copy(D.focus),F.update())),G.current&&G.current(this.getSize()),b(),this}}},[z,_,F,p,t,b]);d.useLayoutEffect(()=>{if(F){const W=()=>P.animating=!1;return F.addEventListener("start",W),()=>F.removeEventListener("start",W)}},[F]);const Q=d.useRef(0);return d.useLayoutEffect(()=>{(c||Q.current++===0)&&(H.refresh(),r&&H.fit(),s&&H.clip())},[T,s,r,c,_,F]),(0,E.A)((W,Y)=>{if(P.animating){if(O(P.focus,D.focus,t,Y),O(P.camera,D.camera,t,Y),P.zoom=o.MathUtils.damp(P.zoom,D.zoom,t,Y),_.position.copy(P.camera),e1(_)&&(_.zoom=P.zoom,_.updateProjectionMatrix()),F?(F.target.copy(P.focus),F.update()):_.lookAt(P.focus),b(),e1(_)&&!(Math.abs(P.zoom-D.zoom)<h)||!e1(_)&&!L(P.camera,D.camera)||F&&!L(P.focus,D.focus))return;P.animating=!1}}),d.createElement("group",{ref:y},d.createElement(gC.Provider,{value:H},i))}function AC(){return d.useContext(gC)}var ZT=Object.defineProperty,$T=(i,t,r)=>t in i?ZT(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ou=(i,t,r)=>($T(i,typeof t!="symbol"?t+"":t,r),r);class mb{constructor(t=Math){Ou(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Ou(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Ou(this,"p",[]),Ou(this,"perm",[]),Ou(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Ou(this,"dot",(r,s,c)=>r[0]*s+r[1]*c),Ou(this,"dot3",(r,s,c,p)=>r[0]*s+r[1]*c+r[2]*p),Ou(this,"dot4",(r,s,c,p,h)=>r[0]*s+r[1]*c+r[2]*p+r[3]*h),Ou(this,"noise",(r,s)=>{let c,p,h;const g=.5*(Math.sqrt(3)-1),y=(r+s)*g,_=Math.floor(r+y),b=Math.floor(s+y),T=(3-Math.sqrt(3))/6,R=(_+b)*T,F=_-R,G=b-R,L=r-F,O=s-G;let P=0,D=1;L>O&&(P=1,D=0);const z=L-P+T,H=O-D+T,Q=L-1+2*T,W=O-1+2*T,Y=_&255,K=b&255,ie=this.perm[Y+this.perm[K]]%12,ce=this.perm[Y+P+this.perm[K+D]]%12,ge=this.perm[Y+1+this.perm[K+1]]%12;let ae=.5-L*L-O*O;ae<0?c=0:(ae*=ae,c=ae*ae*this.dot(this.grad3[ie],L,O));let xe=.5-z*z-H*H;xe<0?p=0:(xe*=xe,p=xe*xe*this.dot(this.grad3[ce],z,H));let ve=.5-Q*Q-W*W;return ve<0?h=0:(ve*=ve,h=ve*ve*this.dot(this.grad3[ge],Q,W)),70*(c+p+h)}),Ou(this,"noise3d",(r,s,c)=>{let p,h,g,y;const _=.3333333333333333,b=(r+s+c)*_,T=Math.floor(r+b),R=Math.floor(s+b),F=Math.floor(c+b),G=1/6,L=(T+R+F)*G,O=T-L,P=R-L,D=F-L,z=r-O,H=s-P,Q=c-D;let W,Y,K,ie,ce,ge;z>=H?H>=Q?(W=1,Y=0,K=0,ie=1,ce=1,ge=0):z>=Q?(W=1,Y=0,K=0,ie=1,ce=0,ge=1):(W=0,Y=0,K=1,ie=1,ce=0,ge=1):H<Q?(W=0,Y=0,K=1,ie=0,ce=1,ge=1):z<Q?(W=0,Y=1,K=0,ie=0,ce=1,ge=1):(W=0,Y=1,K=0,ie=1,ce=1,ge=0);const ae=z-W+G,xe=H-Y+G,ve=Q-K+G,Be=z-ie+2*G,Ue=H-ce+2*G,Ie=Q-ge+2*G,Ne=z-1+3*G,Le=H-1+3*G,Ye=Q-1+3*G,Ce=T&255,Ee=R&255,_e=F&255,oe=this.perm[Ce+this.perm[Ee+this.perm[_e]]]%12,me=this.perm[Ce+W+this.perm[Ee+Y+this.perm[_e+K]]]%12,Te=this.perm[Ce+ie+this.perm[Ee+ce+this.perm[_e+ge]]]%12,ye=this.perm[Ce+1+this.perm[Ee+1+this.perm[_e+1]]]%12;let ze=.6-z*z-H*H-Q*Q;ze<0?p=0:(ze*=ze,p=ze*ze*this.dot3(this.grad3[oe],z,H,Q));let Mt=.6-ae*ae-xe*xe-ve*ve;Mt<0?h=0:(Mt*=Mt,h=Mt*Mt*this.dot3(this.grad3[me],ae,xe,ve));let At=.6-Be*Be-Ue*Ue-Ie*Ie;At<0?g=0:(At*=At,g=At*At*this.dot3(this.grad3[Te],Be,Ue,Ie));let gt=.6-Ne*Ne-Le*Le-Ye*Ye;return gt<0?y=0:(gt*=gt,y=gt*gt*this.dot3(this.grad3[ye],Ne,Le,Ye)),32*(p+h+g+y)}),Ou(this,"noise4d",(r,s,c,p)=>{const h=this.grad4,g=this.simplex,y=this.perm,_=(Math.sqrt(5)-1)/4,b=(5-Math.sqrt(5))/20;let T,R,F,G,L;const O=(r+s+c+p)*_,P=Math.floor(r+O),D=Math.floor(s+O),z=Math.floor(c+O),H=Math.floor(p+O),Q=(P+D+z+H)*b,W=P-Q,Y=D-Q,K=z-Q,ie=H-Q,ce=r-W,ge=s-Y,ae=c-K,xe=p-ie,ve=ce>ge?32:0,Be=ce>ae?16:0,Ue=ge>ae?8:0,Ie=ce>xe?4:0,Ne=ge>xe?2:0,Le=ae>xe?1:0,Ye=ve+Be+Ue+Ie+Ne+Le;let Ce,Ee,_e,oe,me,Te,ye,ze,Mt,At,gt,ot;Ce=g[Ye][0]>=3?1:0,Ee=g[Ye][1]>=3?1:0,_e=g[Ye][2]>=3?1:0,oe=g[Ye][3]>=3?1:0,me=g[Ye][0]>=2?1:0,Te=g[Ye][1]>=2?1:0,ye=g[Ye][2]>=2?1:0,ze=g[Ye][3]>=2?1:0,Mt=g[Ye][0]>=1?1:0,At=g[Ye][1]>=1?1:0,gt=g[Ye][2]>=1?1:0,ot=g[Ye][3]>=1?1:0;const Qt=ce-Ce+b,Gt=ge-Ee+b,Bt=ae-_e+b,qe=xe-oe+b,Ge=ce-me+2*b,Ot=ge-Te+2*b,gn=ae-ye+2*b,Mn=xe-ze+2*b,Ut=ce-Mt+3*b,Nn=ge-At+3*b,ar=ae-gt+3*b,Cr=xe-ot+3*b,dr=ce-1+4*b,bi=ge-1+4*b,fi=ae-1+4*b,Sr=xe-1+4*b,Dr=P&255,Ii=D&255,Ao=z&255,ut=H&255,yn=y[Dr+y[Ii+y[Ao+y[ut]]]]%32,Rn=y[Dr+Ce+y[Ii+Ee+y[Ao+_e+y[ut+oe]]]]%32,rr=y[Dr+me+y[Ii+Te+y[Ao+ye+y[ut+ze]]]]%32,Xr=y[Dr+Mt+y[Ii+At+y[Ao+gt+y[ut+ot]]]]%32,ri=y[Dr+1+y[Ii+1+y[Ao+1+y[ut+1]]]]%32;let ci=.6-ce*ce-ge*ge-ae*ae-xe*xe;ci<0?T=0:(ci*=ci,T=ci*ci*this.dot4(h[yn],ce,ge,ae,xe));let oi=.6-Qt*Qt-Gt*Gt-Bt*Bt-qe*qe;oi<0?R=0:(oi*=oi,R=oi*oi*this.dot4(h[Rn],Qt,Gt,Bt,qe));let En=.6-Ge*Ge-Ot*Ot-gn*gn-Mn*Mn;En<0?F=0:(En*=En,F=En*En*this.dot4(h[rr],Ge,Ot,gn,Mn));let no=.6-Ut*Ut-Nn*Nn-ar*ar-Cr*Cr;no<0?G=0:(no*=no,G=no*no*this.dot4(h[Xr],Ut,Nn,ar,Cr));let zl=.6-dr*dr-bi*bi-fi*fi-Sr*Sr;return zl<0?L=0:(zl*=zl,L=zl*zl*this.dot4(h[ri],dr,bi,fi,Sr)),27*(T+R+F+G+L)});for(let r=0;r<256;r++)this.p[r]=Math.floor(t.random()*256);for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}}const eB=d.forwardRef(({intensity:i=1,decay:t,decayRate:r=.65,maxYaw:s=.1,maxPitch:c=.1,maxRoll:p=.1,yawFrequency:h=.1,pitchFrequency:g=.1,rollFrequency:y=.1},_)=>{const b=(0,E.z)(D=>D.camera),T=(0,E.z)(D=>D.controls),R=d.useRef(i),F=d.useRef(b.rotation.clone()),[G]=d.useState(()=>new mb),[L]=d.useState(()=>new mb),[O]=d.useState(()=>new mb),P=()=>{(R.current<0||R.current>1)&&(R.current=R.current<0?0:1)};return d.useImperativeHandle(_,()=>({getIntensity:()=>R.current,setIntensity:D=>{R.current=D,P()}}),[]),d.useEffect(()=>{if(T){const D=()=>void(F.current=b.rotation.clone());return T.addEventListener("change",D),D(),()=>void T.removeEventListener("change",D)}},[b,T]),(0,E.A)((D,z)=>{const H=Math.pow(R.current,2),Q=s*H*G.noise(D.clock.elapsedTime*h,1),W=c*H*L.noise(D.clock.elapsedTime*g,1),Y=p*H*O.noise(D.clock.elapsedTime*y,1);b.rotation.set(F.current.x+W,F.current.y+Q,F.current.z+Y),t&&R.current>0&&(R.current-=r*z,P())}),null}),tB=d.forwardRef((y,g)=>{var _=y,{children:i,enabled:t=!0,speed:r=1,rotationIntensity:s=1,floatIntensity:c=1,floatingRange:p=[-.1,.1]}=_,h=An(_,["children","enabled","speed","rotationIntensity","floatIntensity","floatingRange"]);const b=d.useRef(null),T=d.useRef(Math.random()*1e4);return(0,E.A)(R=>{var F,G;if(!t||r===0)return;const L=T.current+R.clock.getElapsedTime();b.current.rotation.x=Math.cos(L/4*r)/8*s,b.current.rotation.y=Math.sin(L/4*r)/8*s,b.current.rotation.z=Math.sin(L/4*r)/20*s;let O=Math.sin(L/4*r)/10;O=o.MathUtils.mapLinear(O,-.1,.1,(F=p==null?void 0:p[0])!==null&&F!==void 0?F:-.1,(G=p==null?void 0:p[1])!==null&&G!==void 0?G:.1),b.current.position.y=O*c,b.current.updateMatrix()}),d.createElement("group",h,d.createElement("group",{ref:Dn([b,g]),matrixAutoUpdate:!1},i))}),nB=i=>i&&i.isCubeTexture;class rB extends o.Mesh{constructor(t,r){var s,c;const p=nB(t),g=((c=p?(s=t.image[0])==null?void 0:s.width:t.image.width)!=null?c:1024)/4,y=Math.floor(Math.log2(g)),_=Math.pow(2,y),b=3*Math.max(_,16*7),T=4*_,R=[p?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/b}`,`#define CUBEUV_TEXEL_HEIGHT ${1/T}`,`#define CUBEUV_MAX_MIP ${y}.0`],F=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,G=R.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,L={map:{value:t},height:{value:(r==null?void 0:r.height)||15},radius:{value:(r==null?void 0:r.radius)||100}},O=new o.IcosahedronGeometry(1,16),P=new o.ShaderMaterial({uniforms:L,fragmentShader:G,vertexShader:F,side:o.DoubleSide});super(O,P)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var YA=A(25108);class iB extends o.DataTextureLoader{constructor(t){super(t),this.type=o.HalfFloatType}parse(t){const g=function(z,H){switch(z){case 1:YA.error("THREE.RGBELoader Read Error: "+(H||""));break;case 2:YA.error("THREE.RGBELoader Write Error: "+(H||""));break;case 3:YA.error("THREE.RGBELoader Bad File Format: "+(H||""));break;default:case 4:YA.error("THREE.RGBELoader: Error: "+(H||""))}return-1},T=`
`,R=function(z,H,Q){H=H||1024;let Y=z.pos,K=-1,ie=0,ce="",ge=String.fromCharCode.apply(null,new Uint16Array(z.subarray(Y,Y+128)));for(;0>(K=ge.indexOf(T))&&ie<H&&Y<z.byteLength;)ce+=ge,ie+=ge.length,Y+=128,ge+=String.fromCharCode.apply(null,new Uint16Array(z.subarray(Y,Y+128)));return-1<K?(Q!==!1&&(z.pos+=ie+K+1),ce+ge.slice(0,K)):!1},F=function(z){const H=/^#\?(\S+)/,Q=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*FORMAT=(\S+)\s*$/,K=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ie={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ce,ge;if(z.pos>=z.byteLength||!(ce=R(z)))return g(1,"no header found");if(!(ge=ce.match(H)))return g(3,"bad initial token");for(ie.valid|=1,ie.programtype=ge[1],ie.string+=ce+`
`;ce=R(z),ce!==!1;){if(ie.string+=ce+`
`,ce.charAt(0)==="#"){ie.comments+=ce+`
`;continue}if((ge=ce.match(Q))&&(ie.gamma=parseFloat(ge[1])),(ge=ce.match(W))&&(ie.exposure=parseFloat(ge[1])),(ge=ce.match(Y))&&(ie.valid|=2,ie.format=ge[1]),(ge=ce.match(K))&&(ie.valid|=4,ie.height=parseInt(ge[1],10),ie.width=parseInt(ge[2],10)),ie.valid&2&&ie.valid&4)break}return ie.valid&2?ie.valid&4?ie:g(3,"missing image size specifier"):g(3,"missing format specifier")},G=function(z,H,Q){const W=H;if(W<8||W>32767||z[0]!==2||z[1]!==2||z[2]&128)return new Uint8Array(z);if(W!==(z[2]<<8|z[3]))return g(3,"wrong scanline width");const Y=new Uint8Array(4*H*Q);if(!Y.length)return g(4,"unable to allocate buffer space");let K=0,ie=0;const ce=4*W,ge=new Uint8Array(4),ae=new Uint8Array(ce);let xe=Q;for(;xe>0&&ie<z.byteLength;){if(ie+4>z.byteLength)return g(1);if(ge[0]=z[ie++],ge[1]=z[ie++],ge[2]=z[ie++],ge[3]=z[ie++],ge[0]!=2||ge[1]!=2||(ge[2]<<8|ge[3])!=W)return g(3,"bad rgbe scanline format");let ve=0,Be;for(;ve<ce&&ie<z.byteLength;){Be=z[ie++];const Ie=Be>128;if(Ie&&(Be-=128),Be===0||ve+Be>ce)return g(3,"bad scanline data");if(Ie){const Ne=z[ie++];for(let Le=0;Le<Be;Le++)ae[ve++]=Ne}else ae.set(z.subarray(ie,ie+Be),ve),ve+=Be,ie+=Be}const Ue=W;for(let Ie=0;Ie<Ue;Ie++){let Ne=0;Y[K]=ae[Ie+Ne],Ne+=W,Y[K+1]=ae[Ie+Ne],Ne+=W,Y[K+2]=ae[Ie+Ne],Ne+=W,Y[K+3]=ae[Ie+Ne],K+=4}xe--}return Y},L=function(z,H,Q,W){const Y=z[H+3],K=Math.pow(2,Y-128)/255;Q[W+0]=z[H+0]*K,Q[W+1]=z[H+1]*K,Q[W+2]=z[H+2]*K,Q[W+3]=1},O=function(z,H,Q,W){const Y=z[H+3],K=Math.pow(2,Y-128)/255;Q[W+0]=o.DataUtils.toHalfFloat(Math.min(z[H+0]*K,65504)),Q[W+1]=o.DataUtils.toHalfFloat(Math.min(z[H+1]*K,65504)),Q[W+2]=o.DataUtils.toHalfFloat(Math.min(z[H+2]*K,65504)),Q[W+3]=o.DataUtils.toHalfFloat(1)},P=new Uint8Array(t);P.pos=0;const D=F(P);if(D!==-1){const z=D.width,H=D.height,Q=G(P.subarray(P.pos),z,H);if(Q!==-1){let W,Y,K;switch(this.type){case o.FloatType:K=Q.length/4;const ie=new Float32Array(K*4);for(let ge=0;ge<K;ge++)L(Q,ge*4,ie,ge*4);W=ie,Y=o.FloatType;break;case o.HalfFloatType:K=Q.length/4;const ce=new Uint16Array(K*4);for(let ge=0;ge<K;ge++)O(Q,ge*4,ce,ge*4);W=ce,Y=o.HalfFloatType;break;default:YA.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:z,height:H,data:W,header:D.string,gamma:D.gamma,exposure:D.exposure,type:Y}}}return null}setDataType(t){return this.type=t,this}load(t,r,s,c){function p(h,g){switch(h.type){case o.FloatType:case o.HalfFloatType:"colorSpace"in h?h.colorSpace="srgb-linear":h.encoding=3e3,h.minFilter=o.LinearFilter,h.magFilter=o.LinearFilter,h.generateMipmaps=!1,h.flipY=!0;break}r&&r(h,g)}return super.load(t,p,s,c)}}var Ab=A(25108);const JA="colorSpace"in new o.Texture;class oB extends o.DataTextureLoader{constructor(t){super(t),this.type=o.HalfFloatType}parse(t){const ie=Math.pow(2.7182818,2.2);function ce(Ae,Re){for(var ct=0,jt=0;jt<65536;++jt)(jt==0||Ae[jt>>3]&1<<(jt&7))&&(Re[ct++]=jt);for(var tn=ct-1;ct<65536;)Re[ct++]=0;return tn}function ge(Ae){for(var Re=0;Re<16384;Re++)Ae[Re]={},Ae[Re].len=0,Ae[Re].lit=0,Ae[Re].p=null}const ae={l:0,c:0,lc:0};function xe(Ae,Re,ct,jt,tn){for(;ct<Ae;)Re=Re<<8|rr(jt,tn),ct+=8;ct-=Ae,ae.l=Re>>ct&(1<<Ae)-1,ae.c=Re,ae.lc=ct}const ve=new Array(59);function Be(Ae){for(var Re=0;Re<=58;++Re)ve[Re]=0;for(var Re=0;Re<65537;++Re)ve[Ae[Re]]+=1;for(var ct=0,Re=58;Re>0;--Re){var jt=ct+ve[Re]>>1;ve[Re]=ct,ct=jt}for(var Re=0;Re<65537;++Re){var tn=Ae[Re];tn>0&&(Ae[Re]=tn|ve[tn]++<<6)}}function Ue(Ae,Re,ct,jt,tn,rn,Hn){for(var wn=ct,Yn=0,qn=0;tn<=rn;tn++){if(wn.value-ct.value>jt)return!1;xe(6,Yn,qn,Ae,wn);var tr=ae.l;if(Yn=ae.c,qn=ae.lc,Hn[tn]=tr,tr==63){if(wn.value-ct.value>jt)throw"Something wrong with hufUnpackEncTable";xe(8,Yn,qn,Ae,wn);var Yt=ae.l+6;if(Yn=ae.c,qn=ae.lc,tn+Yt>rn+1)throw"Something wrong with hufUnpackEncTable";for(;Yt--;)Hn[tn++]=0;tn--}else if(tr>=59){var Yt=tr-59+2;if(tn+Yt>rn+1)throw"Something wrong with hufUnpackEncTable";for(;Yt--;)Hn[tn++]=0;tn--}}Be(Hn)}function Ie(Ae){return Ae&63}function Ne(Ae){return Ae>>6}function Le(Ae,Re,ct,jt){for(;Re<=ct;Re++){var tn=Ne(Ae[Re]),rn=Ie(Ae[Re]);if(tn>>rn)throw"Invalid table entry";if(rn>14){var Hn=jt[tn>>rn-14];if(Hn.len)throw"Invalid table entry";if(Hn.lit++,Hn.p){var wn=Hn.p;Hn.p=new Array(Hn.lit);for(var Yn=0;Yn<Hn.lit-1;++Yn)Hn.p[Yn]=wn[Yn]}else Hn.p=new Array(1);Hn.p[Hn.lit-1]=Re}else if(rn)for(var qn=0,Yn=1<<14-rn;Yn>0;Yn--){var Hn=jt[(tn<<14-rn)+qn];if(Hn.len||Hn.p)throw"Invalid table entry";Hn.len=rn,Hn.lit=Re,qn++}}return!0}const Ye={c:0,lc:0};function Ce(Ae,Re,ct,jt){Ae=Ae<<8|rr(ct,jt),Re+=8,Ye.c=Ae,Ye.lc=Re}const Ee={c:0,lc:0};function _e(Ae,Re,ct,jt,tn,rn,Hn,wn,Yn,qn){if(Ae==Re){jt<8&&(Ce(ct,jt,tn,Hn),ct=Ye.c,jt=Ye.lc),jt-=8;var tr=ct>>jt,tr=new Uint8Array([tr])[0];if(Yn.value+tr>qn)return!1;for(var Yt=wn[Yn.value-1];tr-- >0;)wn[Yn.value++]=Yt}else if(Yn.value<qn)wn[Yn.value++]=Ae;else return!1;Ee.c=ct,Ee.lc=jt}function oe(Ae){return Ae&65535}function me(Ae){var Re=oe(Ae);return Re>32767?Re-65536:Re}const Te={a:0,b:0};function ye(Ae,Re){var ct=me(Ae),jt=me(Re),tn=jt,rn=ct+(tn&1)+(tn>>1),Hn=rn,wn=rn-tn;Te.a=Hn,Te.b=wn}function ze(Ae,Re){var ct=oe(Ae),jt=oe(Re),tn=ct-(jt>>1)&65535,rn=jt+tn-32768&65535;Te.a=rn,Te.b=tn}function Mt(Ae,Re,ct,jt,tn,rn,Hn){for(var wn=Hn<16384,Yn=ct>tn?tn:ct,qn=1,tr;qn<=Yn;)qn<<=1;for(qn>>=1,tr=qn,qn>>=1;qn>=1;){for(var Yt=0,Go=Yt+rn*(tn-tr),kr=rn*qn,zr=rn*tr,Mi=jt*qn,Fi=jt*tr,vo,Mo,oa,Pa;Yt<=Go;Yt+=zr){for(var Uo=Yt,Wc=Yt+jt*(ct-tr);Uo<=Wc;Uo+=Fi){var Qo=Uo+Mi,Ps=Uo+kr,dp=Ps+Mi;wn?(ye(Ae[Uo+Re],Ae[Ps+Re]),vo=Te.a,oa=Te.b,ye(Ae[Qo+Re],Ae[dp+Re]),Mo=Te.a,Pa=Te.b,ye(vo,Mo),Ae[Uo+Re]=Te.a,Ae[Qo+Re]=Te.b,ye(oa,Pa),Ae[Ps+Re]=Te.a,Ae[dp+Re]=Te.b):(ze(Ae[Uo+Re],Ae[Ps+Re]),vo=Te.a,oa=Te.b,ze(Ae[Qo+Re],Ae[dp+Re]),Mo=Te.a,Pa=Te.b,ze(vo,Mo),Ae[Uo+Re]=Te.a,Ae[Qo+Re]=Te.b,ze(oa,Pa),Ae[Ps+Re]=Te.a,Ae[dp+Re]=Te.b)}if(ct&qn){var Ps=Uo+kr;wn?ye(Ae[Uo+Re],Ae[Ps+Re]):ze(Ae[Uo+Re],Ae[Ps+Re]),vo=Te.a,Ae[Ps+Re]=Te.b,Ae[Uo+Re]=vo}}if(tn&qn)for(var Uo=Yt,Wc=Yt+jt*(ct-tr);Uo<=Wc;Uo+=Fi){var Qo=Uo+Mi;wn?ye(Ae[Uo+Re],Ae[Qo+Re]):ze(Ae[Uo+Re],Ae[Qo+Re]),vo=Te.a,Ae[Qo+Re]=Te.b,Ae[Uo+Re]=vo}tr=qn,qn>>=1}return Yt}function At(Ae,Re,ct,jt,tn,rn,Hn,wn,Yn,qn){for(var tr=0,Yt=0,Go=wn,kr=Math.trunc(tn.value+(rn+7)/8);tn.value<kr;)for(Ce(tr,Yt,ct,tn),tr=Ye.c,Yt=Ye.lc;Yt>=14;){var zr=tr>>Yt-14&16383,Mi=Re[zr];if(Mi.len)Yt-=Mi.len,_e(Mi.lit,Hn,tr,Yt,ct,jt,tn,Yn,qn,Go),tr=Ee.c,Yt=Ee.lc;else{if(!Mi.p)throw"hufDecode issues";var Fi;for(Fi=0;Fi<Mi.lit;Fi++){for(var vo=Ie(Ae[Mi.p[Fi]]);Yt<vo&&tn.value<kr;)Ce(tr,Yt,ct,tn),tr=Ye.c,Yt=Ye.lc;if(Yt>=vo&&Ne(Ae[Mi.p[Fi]])==(tr>>Yt-vo&(1<<vo)-1)){Yt-=vo,_e(Mi.p[Fi],Hn,tr,Yt,ct,jt,tn,Yn,qn,Go),tr=Ee.c,Yt=Ee.lc;break}}if(Fi==Mi.lit)throw"hufDecode issues"}}var Mo=8-rn&7;for(tr>>=Mo,Yt-=Mo;Yt>0;){var Mi=Re[tr<<14-Yt&16383];if(Mi.len)Yt-=Mi.len,_e(Mi.lit,Hn,tr,Yt,ct,jt,tn,Yn,qn,Go),tr=Ee.c,Yt=Ee.lc;else throw"hufDecode issues"}return!0}function gt(Ae,Re,ct,jt,tn,rn){var Hn={value:0},wn=ct.value,Yn=Rn(Re,ct),qn=Rn(Re,ct);ct.value+=4;var tr=Rn(Re,ct);if(ct.value+=4,Yn<0||Yn>=65537||qn<0||qn>=65537)throw"Something wrong with HUF_ENCSIZE";var Yt=new Array(65537),Go=new Array(16384);ge(Go);var kr=jt-(ct.value-wn);if(Ue(Ae,Re,ct,kr,Yn,qn,Yt),tr>8*(jt-(ct.value-wn)))throw"Something wrong with hufUncompress";Le(Yt,Yn,qn,Go),At(Yt,Go,Ae,Re,ct,tr,qn,rn,tn,Hn)}function ot(Ae,Re,ct){for(var jt=0;jt<ct;++jt)Re[jt]=Ae[Re[jt]]}function Qt(Ae){for(var Re=1;Re<Ae.length;Re++){var ct=Ae[Re-1]+Ae[Re]-128;Ae[Re]=ct}}function Gt(Ae,Re){for(var ct=0,jt=Math.floor((Ae.length+1)/2),tn=0,rn=Ae.length-1;!(tn>rn||(Re[tn++]=Ae[ct++],tn>rn));)Re[tn++]=Ae[jt++]}function Bt(Ae){for(var Re=Ae.byteLength,ct=new Array,jt=0,tn=new DataView(Ae);Re>0;){var rn=tn.getInt8(jt++);if(rn<0){var Hn=-rn;Re-=Hn+1;for(var wn=0;wn<Hn;wn++)ct.push(tn.getUint8(jt++))}else{var Hn=rn;Re-=2;for(var Yn=tn.getUint8(jt++),wn=0;wn<Hn+1;wn++)ct.push(Yn)}}return ct}function qe(Ae,Re,ct,jt,tn,rn){var Qo=new DataView(rn.buffer),Hn=ct[Ae.idx[0]].width,wn=ct[Ae.idx[0]].height,Yn=3,qn=Math.floor(Hn/8),tr=Math.ceil(Hn/8),Yt=Math.ceil(wn/8),Go=Hn-(tr-1)*8,kr=wn-(Yt-1)*8,zr={value:0},Mi=new Array(Yn),Fi=new Array(Yn),vo=new Array(Yn),Mo=new Array(Yn),oa=new Array(Yn);for(let xo=0;xo<Yn;++xo)oa[xo]=Re[Ae.idx[xo]],Mi[xo]=xo<1?0:Mi[xo-1]+tr*Yt,Fi[xo]=new Float32Array(64),vo[xo]=new Uint16Array(64),Mo[xo]=new Uint16Array(tr*64);for(let xo=0;xo<Yt;++xo){var Pa=8;xo==Yt-1&&(Pa=kr);var Uo=8;for(let Bo=0;Bo<tr;++Bo){Bo==tr-1&&(Uo=Go);for(let Co=0;Co<Yn;++Co)vo[Co].fill(0),vo[Co][0]=tn[Mi[Co]++],Ge(zr,jt,vo[Co]),Ot(vo[Co],Fi[Co]),gn(Fi[Co]);Yn==3&&Mn(Fi);for(let Co=0;Co<Yn;++Co)Ut(Fi[Co],Mo[Co],Bo*64)}let La=0;for(let Bo=0;Bo<Yn;++Bo){const Co=ct[Ae.idx[Bo]].type;for(let Gl=8*xo;Gl<8*xo+Pa;++Gl){La=oa[Bo][Gl];for(let qp=0;qp<qn;++qp){const sl=qp*64+(Gl&7)*8;Qo.setUint16(La+0*2*Co,Mo[Bo][sl+0],!0),Qo.setUint16(La+1*2*Co,Mo[Bo][sl+1],!0),Qo.setUint16(La+2*2*Co,Mo[Bo][sl+2],!0),Qo.setUint16(La+3*2*Co,Mo[Bo][sl+3],!0),Qo.setUint16(La+4*2*Co,Mo[Bo][sl+4],!0),Qo.setUint16(La+5*2*Co,Mo[Bo][sl+5],!0),Qo.setUint16(La+6*2*Co,Mo[Bo][sl+6],!0),Qo.setUint16(La+7*2*Co,Mo[Bo][sl+7],!0),La+=8*2*Co}}if(qn!=tr)for(let Gl=8*xo;Gl<8*xo+Pa;++Gl){const qp=oa[Bo][Gl]+8*qn*2*Co,sl=qn*64+(Gl&7)*8;for(let Du=0;Du<Uo;++Du)Qo.setUint16(qp+Du*2*Co,Mo[Bo][sl+Du],!0)}}}for(var Wc=new Uint16Array(Hn),Qo=new DataView(rn.buffer),Ps=0;Ps<Yn;++Ps){ct[Ae.idx[Ps]].decoded=!0;var dp=ct[Ae.idx[Ps]].type;if(ct[Ps].type==2)for(var Jp=0;Jp<wn;++Jp){const xo=oa[Ps][Jp];for(var nc=0;nc<Hn;++nc)Wc[nc]=Qo.getUint16(xo+nc*2*dp,!0);for(var nc=0;nc<Hn;++nc)Qo.setFloat32(xo+nc*2*dp,En(Wc[nc]),!0)}}}function Ge(Ae,Re,ct){for(var jt,tn=1;tn<64;)jt=Re[Ae.value],jt==65280?tn=64:jt>>8==255?tn+=jt&255:(ct[tn]=jt,tn++),Ae.value++}function Ot(Ae,Re){Re[0]=En(Ae[0]),Re[1]=En(Ae[1]),Re[2]=En(Ae[5]),Re[3]=En(Ae[6]),Re[4]=En(Ae[14]),Re[5]=En(Ae[15]),Re[6]=En(Ae[27]),Re[7]=En(Ae[28]),Re[8]=En(Ae[2]),Re[9]=En(Ae[4]),Re[10]=En(Ae[7]),Re[11]=En(Ae[13]),Re[12]=En(Ae[16]),Re[13]=En(Ae[26]),Re[14]=En(Ae[29]),Re[15]=En(Ae[42]),Re[16]=En(Ae[3]),Re[17]=En(Ae[8]),Re[18]=En(Ae[12]),Re[19]=En(Ae[17]),Re[20]=En(Ae[25]),Re[21]=En(Ae[30]),Re[22]=En(Ae[41]),Re[23]=En(Ae[43]),Re[24]=En(Ae[9]),Re[25]=En(Ae[11]),Re[26]=En(Ae[18]),Re[27]=En(Ae[24]),Re[28]=En(Ae[31]),Re[29]=En(Ae[40]),Re[30]=En(Ae[44]),Re[31]=En(Ae[53]),Re[32]=En(Ae[10]),Re[33]=En(Ae[19]),Re[34]=En(Ae[23]),Re[35]=En(Ae[32]),Re[36]=En(Ae[39]),Re[37]=En(Ae[45]),Re[38]=En(Ae[52]),Re[39]=En(Ae[54]),Re[40]=En(Ae[20]),Re[41]=En(Ae[22]),Re[42]=En(Ae[33]),Re[43]=En(Ae[38]),Re[44]=En(Ae[46]),Re[45]=En(Ae[51]),Re[46]=En(Ae[55]),Re[47]=En(Ae[60]),Re[48]=En(Ae[21]),Re[49]=En(Ae[34]),Re[50]=En(Ae[37]),Re[51]=En(Ae[47]),Re[52]=En(Ae[50]),Re[53]=En(Ae[56]),Re[54]=En(Ae[59]),Re[55]=En(Ae[61]),Re[56]=En(Ae[35]),Re[57]=En(Ae[36]),Re[58]=En(Ae[48]),Re[59]=En(Ae[49]),Re[60]=En(Ae[57]),Re[61]=En(Ae[58]),Re[62]=En(Ae[62]),Re[63]=En(Ae[63])}function gn(Ae){const Re=.5*Math.cos(.7853975),ct=.5*Math.cos(3.14159/16),jt=.5*Math.cos(3.14159/8),tn=.5*Math.cos(3*3.14159/16),rn=.5*Math.cos(5*3.14159/16),Hn=.5*Math.cos(3*3.14159/8),wn=.5*Math.cos(7*3.14159/16);for(var Yn=new Array(4),qn=new Array(4),tr=new Array(4),Yt=new Array(4),Go=0;Go<8;++Go){var kr=Go*8;Yn[0]=jt*Ae[kr+2],Yn[1]=Hn*Ae[kr+2],Yn[2]=jt*Ae[kr+6],Yn[3]=Hn*Ae[kr+6],qn[0]=ct*Ae[kr+1]+tn*Ae[kr+3]+rn*Ae[kr+5]+wn*Ae[kr+7],qn[1]=tn*Ae[kr+1]-wn*Ae[kr+3]-ct*Ae[kr+5]-rn*Ae[kr+7],qn[2]=rn*Ae[kr+1]-ct*Ae[kr+3]+wn*Ae[kr+5]+tn*Ae[kr+7],qn[3]=wn*Ae[kr+1]-rn*Ae[kr+3]+tn*Ae[kr+5]-ct*Ae[kr+7],tr[0]=Re*(Ae[kr+0]+Ae[kr+4]),tr[3]=Re*(Ae[kr+0]-Ae[kr+4]),tr[1]=Yn[0]+Yn[3],tr[2]=Yn[1]-Yn[2],Yt[0]=tr[0]+tr[1],Yt[1]=tr[3]+tr[2],Yt[2]=tr[3]-tr[2],Yt[3]=tr[0]-tr[1],Ae[kr+0]=Yt[0]+qn[0],Ae[kr+1]=Yt[1]+qn[1],Ae[kr+2]=Yt[2]+qn[2],Ae[kr+3]=Yt[3]+qn[3],Ae[kr+4]=Yt[3]-qn[3],Ae[kr+5]=Yt[2]-qn[2],Ae[kr+6]=Yt[1]-qn[1],Ae[kr+7]=Yt[0]-qn[0]}for(var zr=0;zr<8;++zr)Yn[0]=jt*Ae[16+zr],Yn[1]=Hn*Ae[16+zr],Yn[2]=jt*Ae[48+zr],Yn[3]=Hn*Ae[48+zr],qn[0]=ct*Ae[8+zr]+tn*Ae[24+zr]+rn*Ae[40+zr]+wn*Ae[56+zr],qn[1]=tn*Ae[8+zr]-wn*Ae[24+zr]-ct*Ae[40+zr]-rn*Ae[56+zr],qn[2]=rn*Ae[8+zr]-ct*Ae[24+zr]+wn*Ae[40+zr]+tn*Ae[56+zr],qn[3]=wn*Ae[8+zr]-rn*Ae[24+zr]+tn*Ae[40+zr]-ct*Ae[56+zr],tr[0]=Re*(Ae[zr]+Ae[32+zr]),tr[3]=Re*(Ae[zr]-Ae[32+zr]),tr[1]=Yn[0]+Yn[3],tr[2]=Yn[1]-Yn[2],Yt[0]=tr[0]+tr[1],Yt[1]=tr[3]+tr[2],Yt[2]=tr[3]-tr[2],Yt[3]=tr[0]-tr[1],Ae[0+zr]=Yt[0]+qn[0],Ae[8+zr]=Yt[1]+qn[1],Ae[16+zr]=Yt[2]+qn[2],Ae[24+zr]=Yt[3]+qn[3],Ae[32+zr]=Yt[3]-qn[3],Ae[40+zr]=Yt[2]-qn[2],Ae[48+zr]=Yt[1]-qn[1],Ae[56+zr]=Yt[0]-qn[0]}function Mn(Ae){for(var Re=0;Re<64;++Re){var ct=Ae[0][Re],jt=Ae[1][Re],tn=Ae[2][Re];Ae[0][Re]=ct+1.5747*tn,Ae[1][Re]=ct-.1873*jt-.4682*tn,Ae[2][Re]=ct+1.8556*jt}}function Ut(Ae,Re,ct){for(var jt=0;jt<64;++jt)Re[ct+jt]=o.DataUtils.toHalfFloat(Nn(Ae[jt]))}function Nn(Ae){return Ae<=1?Math.sign(Ae)*Math.pow(Math.abs(Ae),2.2):Math.sign(Ae)*Math.pow(ie,Math.abs(Ae)-1)}function ar(Ae){return new DataView(Ae.array.buffer,Ae.offset.value,Ae.size)}function Cr(Ae){var Re=Ae.viewer.buffer.slice(Ae.offset.value,Ae.offset.value+Ae.size),ct=new Uint8Array(Bt(Re)),jt=new Uint8Array(ct.length);return Qt(ct),Gt(ct,jt),new DataView(jt.buffer)}function dr(Ae){var Re=Ae.array.slice(Ae.offset.value,Ae.offset.value+Ae.size),ct=Gf(Re),jt=new Uint8Array(ct.length);return Qt(ct),Gt(ct,jt),new DataView(jt.buffer)}function bi(Ae){for(var Re=Ae.viewer,ct={value:Ae.offset.value},jt=new Uint16Array(Ae.width*Ae.scanlineBlockSize*(Ae.channels*Ae.type)),tn=new Uint8Array(8192),rn=0,Hn=new Array(Ae.channels),wn=0;wn<Ae.channels;wn++)Hn[wn]={},Hn[wn].start=rn,Hn[wn].end=Hn[wn].start,Hn[wn].nx=Ae.width,Hn[wn].ny=Ae.lines,Hn[wn].size=Ae.type,rn+=Hn[wn].nx*Hn[wn].ny*Hn[wn].size;var Yn=no(Re,ct),qn=no(Re,ct);if(qn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Yn<=qn)for(var wn=0;wn<qn-Yn+1;wn++)tn[wn+Yn]=Xr(Re,ct);var tr=new Uint16Array(65536),Yt=ce(tn,tr),Go=Rn(Re,ct);gt(Ae.array,Re,ct,Go,jt,rn);for(var wn=0;wn<Ae.channels;++wn)for(var kr=Hn[wn],zr=0;zr<Hn[wn].size;++zr)Mt(jt,kr.start+zr,kr.nx,kr.size,kr.ny,kr.nx*kr.size,Yt);ot(tr,jt,rn);for(var Mi=0,Fi=new Uint8Array(jt.buffer.byteLength),vo=0;vo<Ae.lines;vo++)for(var Mo=0;Mo<Ae.channels;Mo++){var kr=Hn[Mo],oa=kr.nx*kr.size,Pa=new Uint8Array(jt.buffer,kr.end*2,oa*2);Fi.set(Pa,Mi),Mi+=oa*2,kr.end+=oa}return new DataView(Fi.buffer)}function fi(Ae){var Re=Ae.array.slice(Ae.offset.value,Ae.offset.value+Ae.size),ct=Gf(Re);const jt=Ae.lines*Ae.channels*Ae.width,tn=Ae.type==1?new Uint16Array(jt):new Uint32Array(jt);let rn=0,Hn=0;const wn=new Array(4);for(let Yn=0;Yn<Ae.lines;Yn++)for(let qn=0;qn<Ae.channels;qn++){let tr=0;switch(Ae.type){case 1:wn[0]=rn,wn[1]=wn[0]+Ae.width,rn=wn[1]+Ae.width;for(let Yt=0;Yt<Ae.width;++Yt){const Go=ct[wn[0]++]<<8|ct[wn[1]++];tr+=Go,tn[Hn]=tr,Hn++}break;case 2:wn[0]=rn,wn[1]=wn[0]+Ae.width,wn[2]=wn[1]+Ae.width,rn=wn[2]+Ae.width;for(let Yt=0;Yt<Ae.width;++Yt){const Go=ct[wn[0]++]<<24|ct[wn[1]++]<<16|ct[wn[2]++]<<8;tr+=Go,tn[Hn]=tr,Hn++}break}}return new DataView(tn.buffer)}function Sr(Ae){var Re=Ae.viewer,ct={value:Ae.offset.value},jt=new Uint8Array(Ae.width*Ae.lines*(Ae.channels*Ae.type*2)),tn={version:ri(Re,ct),unknownUncompressedSize:ri(Re,ct),unknownCompressedSize:ri(Re,ct),acCompressedSize:ri(Re,ct),dcCompressedSize:ri(Re,ct),rleCompressedSize:ri(Re,ct),rleUncompressedSize:ri(Re,ct),rleRawSize:ri(Re,ct),totalAcUncompressedCount:ri(Re,ct),totalDcUncompressedCount:ri(Re,ct),acCompression:ri(Re,ct)};if(tn.version<2)throw"EXRLoader.parse: "+ia.compression+" version "+tn.version+" is unsupported";for(var rn=new Array,Hn=no(Re,ct)-2;Hn>0;){var wn=Dr(Re.buffer,ct),Yn=Xr(Re,ct),qn=Yn>>2&3,tr=(Yn>>4)-1,Yt=new Int8Array([tr])[0],Go=Xr(Re,ct);rn.push({name:wn,index:Yt,type:Go,compression:qn}),Hn-=wn.length+3}for(var kr=ia.channels,zr=new Array(Ae.channels),Mi=0;Mi<Ae.channels;++Mi){var Fi=zr[Mi]={},vo=kr[Mi];Fi.name=vo.name,Fi.compression=0,Fi.decoded=!1,Fi.type=vo.pixelType,Fi.pLinear=vo.pLinear,Fi.width=Ae.width,Fi.height=Ae.lines}for(var Mo={idx:new Array(3)},oa=0;oa<Ae.channels;++oa)for(var Fi=zr[oa],Mi=0;Mi<rn.length;++Mi){var Pa=rn[Mi];Fi.name==Pa.name&&(Fi.compression=Pa.compression,Pa.index>=0&&(Mo.idx[Pa.index]=oa),Fi.offset=oa)}if(tn.acCompressedSize>0)switch(tn.acCompression){case 0:var Qo=new Uint16Array(tn.totalAcUncompressedCount);gt(Ae.array,Re,ct,tn.acCompressedSize,Qo,tn.totalAcUncompressedCount);break;case 1:var Uo=Ae.array.slice(ct.value,ct.value+tn.totalAcUncompressedCount),Wc=Gf(Uo),Qo=new Uint16Array(Wc.buffer);ct.value+=tn.totalAcUncompressedCount;break}if(tn.dcCompressedSize>0){var Ps={array:Ae.array,offset:ct,size:tn.dcCompressedSize},dp=new Uint16Array(dr(Ps).buffer);ct.value+=tn.dcCompressedSize}if(tn.rleRawSize>0){var Uo=Ae.array.slice(ct.value,ct.value+tn.rleCompressedSize),Wc=Gf(Uo),Jp=Bt(Wc.buffer);ct.value+=tn.rleCompressedSize}for(var nc=0,xo=new Array(zr.length),Mi=0;Mi<xo.length;++Mi)xo[Mi]=new Array;for(var La=0;La<Ae.lines;++La)for(var Bo=0;Bo<zr.length;++Bo)xo[Bo].push(nc),nc+=zr[Bo].width*Ae.type*2;qe(Mo,xo,zr,Qo,dp,jt);for(var Mi=0;Mi<zr.length;++Mi){var Fi=zr[Mi];if(!Fi.decoded)switch(Fi.compression){case 2:for(var Co=0,Gl=0,La=0;La<Ae.lines;++La){for(var qp=xo[Mi][Co],sl=0;sl<Fi.width;++sl){for(var Du=0;Du<2*Fi.type;++Du)jt[qp++]=Jp[Gl+Du*Fi.width*Fi.height];Gl++}Co++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(jt.buffer)}function Dr(Ae,Re){for(var ct=new Uint8Array(Ae),jt=0;ct[Re.value+jt]!=0;)jt+=1;var tn=new TextDecoder().decode(ct.slice(Re.value,Re.value+jt));return Re.value=Re.value+jt+1,tn}function Ii(Ae,Re,ct){var jt=new TextDecoder().decode(new Uint8Array(Ae).slice(Re.value,Re.value+ct));return Re.value=Re.value+ct,jt}function Ao(Ae,Re){var ct=yn(Ae,Re),jt=Rn(Ae,Re);return[ct,jt]}function ut(Ae,Re){var ct=Rn(Ae,Re),jt=Rn(Ae,Re);return[ct,jt]}function yn(Ae,Re){var ct=Ae.getInt32(Re.value,!0);return Re.value=Re.value+4,ct}function Rn(Ae,Re){var ct=Ae.getUint32(Re.value,!0);return Re.value=Re.value+4,ct}function rr(Ae,Re){var ct=Ae[Re.value];return Re.value=Re.value+1,ct}function Xr(Ae,Re){var ct=Ae.getUint8(Re.value);return Re.value=Re.value+1,ct}const ri=function(Ae,Re){let ct;return"getBigInt64"in DataView.prototype?ct=Number(Ae.getBigInt64(Re.value,!0)):ct=Ae.getUint32(Re.value+4,!0)+Number(Ae.getUint32(Re.value,!0)<<32),Re.value+=8,ct};function ci(Ae,Re){var ct=Ae.getFloat32(Re.value,!0);return Re.value+=4,ct}function oi(Ae,Re){return o.DataUtils.toHalfFloat(ci(Ae,Re))}function En(Ae){var Re=(Ae&31744)>>10,ct=Ae&1023;return(Ae>>15?-1:1)*(Re?Re===31?ct?NaN:1/0:Math.pow(2,Re-15)*(1+ct/1024):6103515625e-14*(ct/1024))}function no(Ae,Re){var ct=Ae.getUint16(Re.value,!0);return Re.value+=2,ct}function zl(Ae,Re){return En(no(Ae,Re))}function Rh(Ae,Re,ct,jt){for(var tn=ct.value,rn=[];ct.value<tn+jt-1;){var Hn=Dr(Re,ct),wn=yn(Ae,ct),Yn=Xr(Ae,ct);ct.value+=3;var qn=yn(Ae,ct),tr=yn(Ae,ct);rn.push({name:Hn,pixelType:wn,pLinear:Yn,xSampling:qn,ySampling:tr})}return ct.value+=1,rn}function Id(Ae,Re){var ct=ci(Ae,Re),jt=ci(Ae,Re),tn=ci(Ae,Re),rn=ci(Ae,Re),Hn=ci(Ae,Re),wn=ci(Ae,Re),Yn=ci(Ae,Re),qn=ci(Ae,Re);return{redX:ct,redY:jt,greenX:tn,greenY:rn,blueX:Hn,blueY:wn,whiteX:Yn,whiteY:qn}}function jc(Ae,Re){var ct=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],jt=Xr(Ae,Re);return ct[jt]}function hc(Ae,Re){var ct=Rn(Ae,Re),jt=Rn(Ae,Re),tn=Rn(Ae,Re),rn=Rn(Ae,Re);return{xMin:ct,yMin:jt,xMax:tn,yMax:rn}}function Os(Ae,Re){var ct=["INCREASING_Y"],jt=Xr(Ae,Re);return ct[jt]}function mm(Ae,Re){var ct=ci(Ae,Re),jt=ci(Ae,Re);return[ct,jt]}function Ws(Ae,Re){var ct=ci(Ae,Re),jt=ci(Ae,Re),tn=ci(Ae,Re);return[ct,jt,tn]}function Ds(Ae,Re,ct,jt,tn){if(jt==="string"||jt==="stringvector"||jt==="iccProfile")return Ii(Re,ct,tn);if(jt==="chlist")return Rh(Ae,Re,ct,tn);if(jt==="chromaticities")return Id(Ae,ct);if(jt==="compression")return jc(Ae,ct);if(jt==="box2i")return hc(Ae,ct);if(jt==="lineOrder")return Os(Ae,ct);if(jt==="float")return ci(Ae,ct);if(jt==="v2f")return mm(Ae,ct);if(jt==="v3f")return Ws(Ae,ct);if(jt==="int")return yn(Ae,ct);if(jt==="rational")return Ao(Ae,ct);if(jt==="timecode")return ut(Ae,ct);if(jt==="preview")return ct.value+=tn,"skipped";ct.value+=tn}function up(Ae,Re,ct){const jt={};if(Ae.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";jt.version=Ae.getUint8(4);const tn=Ae.getUint8(5);jt.spec={singleTile:!!(tn&2),longName:!!(tn&4),deepFormat:!!(tn&8),multiPart:!!(tn&16)},ct.value=8;for(var rn=!0;rn;){var Hn=Dr(Re,ct);if(Hn==0)rn=!1;else{var wn=Dr(Re,ct),Yn=Rn(Ae,ct),qn=Ds(Ae,Re,ct,wn,Yn);qn===void 0?Ab.warn(`EXRLoader.parse: skipped unknown header attribute type '${wn}'.`):jt[Hn]=qn}}if(tn!=0)throw Ab.error("EXRHeader:",jt),"THREE.EXRLoader: provided file is currently unsupported.";return jt}function fc(Ae,Re,ct,jt,tn){const rn={size:0,viewer:Re,array:ct,offset:jt,width:Ae.dataWindow.xMax-Ae.dataWindow.xMin+1,height:Ae.dataWindow.yMax-Ae.dataWindow.yMin+1,channels:Ae.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Ae.channels[0].pixelType,uncompress:null,getter:null,format:null,[JA?"colorSpace":"encoding"]:null};switch(Ae.compression){case"NO_COMPRESSION":rn.lines=1,rn.uncompress=ar;break;case"RLE_COMPRESSION":rn.lines=1,rn.uncompress=Cr;break;case"ZIPS_COMPRESSION":rn.lines=1,rn.uncompress=dr;break;case"ZIP_COMPRESSION":rn.lines=16,rn.uncompress=dr;break;case"PIZ_COMPRESSION":rn.lines=32,rn.uncompress=bi;break;case"PXR24_COMPRESSION":rn.lines=16,rn.uncompress=fi;break;case"DWAA_COMPRESSION":rn.lines=32,rn.uncompress=Sr;break;case"DWAB_COMPRESSION":rn.lines=256,rn.uncompress=Sr;break;default:throw"EXRLoader.parse: "+Ae.compression+" is unsupported"}if(rn.scanlineBlockSize=rn.lines,rn.type==1)switch(tn){case o.FloatType:rn.getter=zl,rn.inputSize=2;break;case o.HalfFloatType:rn.getter=no,rn.inputSize=2;break}else if(rn.type==2)switch(tn){case o.FloatType:rn.getter=ci,rn.inputSize=4;break;case o.HalfFloatType:rn.getter=oi,rn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+rn.type+" for "+Ae.compression+".";rn.blockCount=(Ae.dataWindow.yMax+1)/rn.scanlineBlockSize;for(var Hn=0;Hn<rn.blockCount;Hn++)ri(Re,jt);rn.outputChannels=rn.channels==3?4:rn.channels;const wn=rn.width*rn.height*rn.outputChannels;switch(tn){case o.FloatType:rn.byteArray=new Float32Array(wn),rn.channels<rn.outputChannels&&rn.byteArray.fill(1,0,wn);break;case o.HalfFloatType:rn.byteArray=new Uint16Array(wn),rn.channels<rn.outputChannels&&rn.byteArray.fill(15360,0,wn);break;default:Ab.error("THREE.EXRLoader: unsupported type: ",tn);break}return rn.bytesPerLine=rn.width*rn.inputSize*rn.channels,rn.outputChannels==4?rn.format=o.RGBAFormat:rn.format=o.RedFormat,JA?rn.colorSpace="srgb-linear":rn.encoding=3e3,rn}const yo=new DataView(t),ol=new Uint8Array(t),vl={value:0},ia=up(yo,t,vl),Jr=fc(ia,yo,ol,vl,this.type),_l={value:0},Fd={R:0,G:1,B:2,A:3,Y:0};for(let Ae=0;Ae<Jr.height/Jr.scanlineBlockSize;Ae++){const Re=Rn(yo,vl);Jr.size=Rn(yo,vl),Jr.lines=Re+Jr.scanlineBlockSize>Jr.height?Jr.height-Re:Jr.scanlineBlockSize;const jt=Jr.size<Jr.lines*Jr.bytesPerLine?Jr.uncompress(Jr):ar(Jr);vl.value+=Jr.size;for(let tn=0;tn<Jr.scanlineBlockSize;tn++){const rn=tn+Ae*Jr.scanlineBlockSize;if(rn>=Jr.height)break;for(let Hn=0;Hn<Jr.channels;Hn++){const wn=Fd[ia.channels[Hn].name];for(let Yn=0;Yn<Jr.width;Yn++){_l.value=(tn*(Jr.channels*Jr.width)+Hn*Jr.width+Yn)*Jr.inputSize;const qn=(Jr.height-1-rn)*(Jr.width*Jr.outputChannels)+Yn*Jr.outputChannels+wn;Jr.byteArray[qn]=Jr.getter(jt,_l)}}}}return{header:ia,width:Jr.width,height:Jr.height,data:Jr.byteArray,format:Jr.format,[JA?"colorSpace":"encoding"]:Jr[JA?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,r,s,c){function p(h,g){JA?h.colorSpace=g.colorSpace:h.encoding=g.encoding,h.minFilter=o.LinearFilter,h.magFilter=o.LinearFilter,h.generateMipmaps=!1,h.flipY=!1,r&&r(h,g)}return super.load(t,p,s,c)}}const yb={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},sB="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",yC=i=>Array.isArray(i);function vb({files:i=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r=void 0,encoding:s=void 0,extensions:c}={}){var p;let h=null,g=!1,y;if(r){if(!(r in yb))throw new Error("Preset must be one of: "+Object.keys(yb).join(", "));i=yb[r],t=sB}if(g=yC(i),y=yC(i)?"cube":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":(p=i.split(".").pop())==null?void 0:p.toLowerCase(),h=g?o.CubeTextureLoader:y==="hdr"?iB:y==="exr"?oB:null,!h)throw new Error("useEnvironment: Unrecognized file extension: "+i);const _=(0,E.D)(h,g?[i]:i,F=>{F.setPath==null||F.setPath(t),c&&c(F)}),b=g?_[0]:_;b.mapping=g?o.CubeReflectionMapping:o.EquirectangularReflectionMapping;const T=3001,R=3e3;return"colorSpace"in b?b.colorSpace=(s!=null?s:g)?"srgb":"srgb-linear":b.encoding=(s!=null?s:g)?T:R,b}const aB=i=>i.current&&i.current.isScene,lB=i=>aB(i)?i.current:i;function _b(i,t,r,s,c=0){const p=lB(t||r),h=p.background,g=p.environment,y=p.backgroundBlurriness||0;return i!=="only"&&(p.environment=s),i&&(p.background=s),i&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=c),()=>{i!=="only"&&(p.environment=g),i&&(p.background=h),i&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=y)}}function j2({scene:i,background:t=!1,blur:r,map:s}){const c=(0,E.z)(p=>p.scene);return d.useLayoutEffect(()=>{if(s)return _b(t,i,c,s,r)},[c,i,s,t,r]),null}function Eb(c){var p=c,{background:i=!1,scene:t,blur:r}=p,s=An(p,["background","scene","blur"]);const h=vb(s),g=(0,E.z)(y=>y.scene);return d.useLayoutEffect(()=>_b(i,t,g,h,r),[h,i,t,g,r]),null}function vC({children:i,near:t=1,far:r=1e3,resolution:s=256,frames:c=1,map:p,background:h=!1,blur:g,scene:y,files:_,path:b,preset:T=void 0,extensions:R}){const F=(0,E.z)(z=>z.gl),G=(0,E.z)(z=>z.scene),L=d.useRef(null),[O]=d.useState(()=>new o.Scene),P=d.useMemo(()=>{const z=new o.WebGLCubeRenderTarget(s);return z.texture.type=o.HalfFloatType,z},[s]);d.useLayoutEffect(()=>(c===1&&L.current.update(F,O),_b(h,y,G,P.texture,g)),[i,O,P.texture,y,G,h,c,F]);let D=1;return(0,E.A)(()=>{(c===1/0||D<c)&&(L.current.update(F,O),D++)}),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(d.Fragment,null,i,d.createElement("cubeCamera",{ref:L,args:[t,r,P]}),_||T?d.createElement(Eb,{background:!0,files:_,preset:T,path:b,extensions:R}):p?d.createElement(j2,{background:!0,map:p,extensions:R}):null),O))}function cB(i){var t,r,s,c;const p=vb(i),h=i.map||p;d.useMemo(()=>(0,E.e)({GroundProjectedEnvImpl:rB}),[]);const g=d.useMemo(()=>[h],[h]),y=(t=i.ground)==null?void 0:t.height,_=(r=i.ground)==null?void 0:r.radius,b=(s=(c=i.ground)==null?void 0:c.scale)!==null&&s!==void 0?s:1e3;return d.createElement(d.Fragment,null,d.createElement(j2,(0,w.Z)({},i,{map:h})),d.createElement("groundProjectedEnvImpl",{args:g,scale:b,height:y,radius:_}))}function _C(i){return i.ground?d.createElement(cB,i):i.map?d.createElement(j2,i):i.children?d.createElement(vC,i):d.createElement(Eb,i)}const pB={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},uB={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},EC=d.forwardRef((L,G)=>{var O=L,{scale:i=10,frames:t=1/0,opacity:r=1,width:s=1,height:c=1,blur:p=1,near:h=0,far:g=10,resolution:y=512,smooth:_=!0,color:b="#000000",depthWrite:T=!1,renderOrder:R}=O,F=An(O,["scale","frames","opacity","width","height","blur","near","far","resolution","smooth","color","depthWrite","renderOrder"]);const P=d.useRef(null),D=(0,E.z)(Ue=>Ue.scene),z=(0,E.z)(Ue=>Ue.gl),H=d.useRef(null);s=s*(Array.isArray(i)?i[0]:i||1),c=c*(Array.isArray(i)?i[1]:i||1);const[Q,W,Y,K,ie,ce,ge]=d.useMemo(()=>{const Ue=new o.WebGLRenderTarget(y,y),Ie=new o.WebGLRenderTarget(y,y);Ie.texture.generateMipmaps=Ue.texture.generateMipmaps=!1;const Ne=new o.PlaneGeometry(s,c).rotateX(Math.PI/2),Le=new o.Mesh(Ne),Ye=new o.MeshDepthMaterial;Ye.depthTest=Ye.depthWrite=!1,Ye.onBeforeCompile=_e=>{_e.uniforms=Xo(jn({},_e.uniforms),{ucolor:{value:new o.Color(b)}}),_e.fragmentShader=_e.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),_e.fragmentShader=_e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Ce=new o.ShaderMaterial(pB),Ee=new o.ShaderMaterial(uB);return Ee.depthTest=Ce.depthTest=!1,[Ue,Ne,Ye,Le,Ce,Ee,Ie]},[y,s,c,i,b]),ae=Ue=>{K.visible=!0,K.material=ie,ie.uniforms.tDiffuse.value=Q.texture,ie.uniforms.h.value=Ue*1/256,z.setRenderTarget(ge),z.render(K,H.current),K.material=ce,ce.uniforms.tDiffuse.value=ge.texture,ce.uniforms.v.value=Ue*1/256,z.setRenderTarget(Q),z.render(K,H.current),K.visible=!1};let xe=0,ve,Be;return(0,E.A)(()=>{H.current&&(t===1/0||xe<t)&&(xe++,ve=D.background,Be=D.overrideMaterial,P.current.visible=!1,D.background=null,D.overrideMaterial=Y,z.setRenderTarget(Q),z.render(D,H.current),ae(p),_&&ae(p*.4),z.setRenderTarget(null),P.current.visible=!0,D.overrideMaterial=Be,D.background=ve)}),d.useImperativeHandle(G,()=>P.current,[]),d.createElement("group",(0,w.Z)({"rotation-x":Math.PI/2},F,{ref:P}),d.createElement("mesh",{renderOrder:R,geometry:W,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},d.createElement("meshBasicMaterial",{transparent:!0,map:Q.texture,opacity:r,depthWrite:T})),d.createElement("orthographicCamera",{ref:H,args:[-s/2,s/2,c/2,-c/2,h,g]}))});function dB(i){return i.isLight}function hB(i){return!!i.geometry}const bb=d.createContext(null),fB=Lc({color:new o.Color,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),bC=d.forwardRef((G,F)=>{var L=G,{children:i,temporal:t,frames:r=40,limit:s=1/0,blend:c=20,scale:p=10,opacity:h=1,alphaTest:g=.75,color:y="black",colorBlend:_=2,resolution:b=1024,toneMapped:T=!0}=L,R=An(L,["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"]);(0,E.e)({SoftShadowMaterial:fB});const O=(0,E.z)(K=>K.gl),P=(0,E.z)(K=>K.scene),D=(0,E.z)(K=>K.camera),z=(0,E.z)(K=>K.invalidate),H=d.useRef(null),Q=d.useRef(null),[W]=d.useState(()=>new gB(O,P,b));d.useLayoutEffect(()=>{W.configure(H.current)},[]);const Y=d.useMemo(()=>({lights:new Map,temporal:!!t,frames:Math.max(2,r),blend:Math.max(2,r===1/0?c:r),count:0,getMesh:()=>H.current,reset:()=>{W.clear();const K=H.current.material;K.opacity=0,K.alphaTest=0,Y.count=0},update:(K=1)=>{const ie=H.current.material;Y.temporal?(ie.opacity=Math.min(h,ie.opacity+h/Y.blend),ie.alphaTest=Math.min(g,ie.alphaTest+g/Y.blend)):(ie.opacity=h,ie.alphaTest=g),Q.current.visible=!0,W.prepare();for(let ce=0;ce<K;ce++)Y.lights.forEach(ge=>ge.update()),W.update(D,Y.blend);Q.current.visible=!1,W.finish()}}),[W,D,P,t,r,c,h,g]);return d.useLayoutEffect(()=>{Y.reset(),!Y.temporal&&Y.frames!==1/0&&Y.update(Y.blend)}),d.useImperativeHandle(F,()=>Y,[Y]),(0,E.A)(()=>{(Y.temporal||Y.frames===1/0)&&Y.count<Y.frames&&Y.count<s&&(z(),Y.update(),Y.count++)}),d.createElement("group",R,d.createElement("group",{traverse:()=>null,ref:Q},d.createElement(bb.Provider,{value:Y},i)),d.createElement("mesh",{receiveShadow:!0,ref:H,scale:p,rotation:[-Math.PI/2,0,0]},d.createElement("planeGeometry",null),d.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:T,color:y,blend:_,map:W.progressiveLightMap2.texture})))}),MC=d.forwardRef((G,F)=>{var L=G,{castShadow:i=!0,bias:t=.001,mapSize:r=512,size:s=5,near:c=.5,far:p=500,frames:h=1,position:g=[0,0,0],radius:y=1,amount:_=8,intensity:b=1,ambient:T=.5}=L,R=An(L,["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"]);const O=d.useRef(null),P=new o.Vector3(...g).length(),D=d.useContext(bb),z=d.useCallback(()=>{let Q;if(O.current)for(let W=0;W<O.current.children.length;W++)if(Q=O.current.children[W],Math.random()>T)Q.position.set(g[0]+o.MathUtils.randFloatSpread(y),g[1]+o.MathUtils.randFloatSpread(y),g[2]+o.MathUtils.randFloatSpread(y));else{let Y=Math.acos(2*Math.random()-1)-Math.PI/2,K=2*Math.PI*Math.random();Q.position.set(Math.cos(Y)*Math.cos(K)*P,Math.abs(Math.cos(Y)*Math.sin(K)*P),Math.sin(Y)*P)}},[y,T,P,...g]),H=d.useMemo(()=>({update:z}),[z]);return d.useImperativeHandle(F,()=>H,[H]),d.useLayoutEffect(()=>{const Q=O.current;return D&&D.lights.set(Q.uuid,H),()=>void D.lights.delete(Q.uuid)},[D,H]),d.createElement("group",(0,w.Z)({ref:O},R),Array.from({length:_},(Q,W)=>d.createElement("directionalLight",{key:W,castShadow:i,"shadow-bias":t,"shadow-mapSize":[r,r],intensity:b/_},d.createElement("orthographicCamera",{attach:"shadow-camera",args:[-s,s,s,-s,c,p]}))))});class gB{constructor(t,r,s=1024){this.renderer=t,this.res=s,this.scene=r,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new o.Color,this.clearAlpha=0;const c=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?o.HalfFloatType:o.FloatType;this.progressiveLightMap1=new o.WebGLRenderTarget(this.res,this.res,{type:c}),this.progressiveLightMap2=new o.WebGLRenderTarget(this.res,this.res,{type:c}),this.discardMat=new gb,this.targetMat=new o.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=p=>{p.vertexShader=`varying vec2 vUv;
`+p.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const h=p.fragmentShader.indexOf("void main() {");p.fragmentShader=`varying vec2 vUv;
`+p.fragmentShader.slice(0,h)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+p.fragmentShader.slice(h-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,p.uniforms.previousShadowMap=this.previousShadowMap,p.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(t=>{hB(t)?this.meshes.push({object:t,material:t.material}):dB(t)&&this.lights.push({object:t,intensity:t.intensity})})}prepare(){this.lights.forEach(t=>t.object.intensity=0),this.meshes.forEach(t=>t.object.material=this.discardMat)}finish(){this.lights.forEach(t=>t.object.intensity=t.intensity),this.meshes.forEach(t=>t.object.material=t.material)}configure(t){this.object=t}update(t,r=100){if(!this.object)return;this.averagingWindow.value=r,this.object.material=this.targetMat;const s=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,c=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,p=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(s),this.previousShadowMap.value=c.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.scene.background=p}}const mB={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function AB({radius:i,adjustCamera:t}){const r=AC();return d.useEffect(()=>{t&&r.refresh().clip().fit()},[i,t]),null}function yB(y){var _=y,{children:i,center:t,adjustCamera:r=!0,intensity:s=.5,shadows:c="contact",environment:p="city",preset:h="rembrandt"}=_,g=An(_,["children","center","adjustCamera","intensity","shadows","environment","preset"]);var b,T,R,F,G,L,O,P;const D=typeof h=="string"?mB[h]:h,[{radius:z,height:H},Q]=d.useState({radius:0,width:0,height:0,depth:0}),W=(b=c==null?void 0:c.bias)!==null&&b!==void 0?b:-1e-4,Y=(T=c==null?void 0:c.normalBias)!==null&&T!==void 0?T:0,K=(R=c==null?void 0:c.size)!==null&&R!==void 0?R:1024,ie=(F=c==null?void 0:c.offset)!==null&&F!==void 0?F:0,ce=c==="contact"||(c==null?void 0:c.type)==="contact",ge=c==="accumulative"||(c==null?void 0:c.type)==="accumulative",ae=jn({},typeof c=="object"?c:{}),xe=p?typeof p=="string"?{preset:p}:p:null,ve=d.useCallback(Be=>{const{width:Ue,height:Ie,depth:Ne,boundingSphere:Le}=Be;Q({radius:Le.radius,width:Ue,height:Ie,depth:Ne}),t!=null&&t.onCentered&&t.onCentered(Be)},[]);return d.createElement(d.Fragment,null,d.createElement("ambientLight",{intensity:s/3}),d.createElement("spotLight",{penumbra:1,position:[D.main[0]*z,D.main[1]*z,D.main[2]*z],intensity:s*2,castShadow:!!c,"shadow-bias":W,"shadow-normalBias":Y,"shadow-mapSize":K}),d.createElement("pointLight",{position:[D.fill[0]*z,D.fill[1]*z,D.fill[2]*z],intensity:s}),d.createElement(mC,(0,w.Z)({fit:!!r,clip:!!r,margin:Number(r),observe:!0},g),d.createElement(AB,{radius:z,adjustCamera:r}),d.createElement(fb,(0,w.Z)({},t,{position:[0,ie/2,0],onCentered:ve}),i)),d.createElement("group",{position:[0,-H/2-ie/2,0]},ce&&d.createElement(EC,(0,w.Z)({scale:z*4,far:z,blur:2},ae)),ge&&d.createElement(bC,(0,w.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:z*4},ae),d.createElement(MC,{amount:(G=ae.amount)!==null&&G!==void 0?G:8,radius:(L=ae.radius)!==null&&L!==void 0?L:z,ambient:(O=ae.ambient)!==null&&O!==void 0?O:.5,intensity:(P=ae.intensity)!==null&&P!==void 0?P:1,position:[D.main[0]*z,D.main[1]*z,D.main[2]*z],size:z*4,bias:-W,mapSize:K}))),p&&d.createElement(_C,xe))}const vB=i=>i===0?0:Math.pow(2,10*i-10);function _B(p){var h=p,{children:i,floor:t=.25,segments:r=20,receiveShadow:s}=h,c=An(h,["children","floor","segments","receiveShadow"]);const g=d.useRef(null);return d.useLayoutEffect(()=>{let y=0;const _=r/r/2,b=g.current.attributes.position;for(let T=0;T<r+1;T++)for(let R=0;R<r+1;R++)b.setXYZ(y++,T/r-_+(T===0?-t:0),R/r-_,vB(T/r));b.needsUpdate=!0,g.current.computeVertexNormals()},[r,t]),d.createElement("group",c,d.createElement("mesh",{receiveShadow:s,rotation:[-Math.PI/2,0,Math.PI/2]},d.createElement("planeGeometry",{ref:g,args:[1,1,r,r]}),i))}const EB=d.forwardRef((y,g)=>{var _=y,{fog:i=!1,renderOrder:t,depthWrite:r=!1,colorStop:s=0,color:c="black",opacity:p=.5}=_,h=An(_,["fog","renderOrder","depthWrite","colorStop","color","opacity"]);const b=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const R=T.getContext("2d"),F=R.createRadialGradient(T.width/2,T.height/2,0,T.width/2,T.height/2,T.width/2);return F.addColorStop(s,new o.Color(c).getStyle()),F.addColorStop(1,"rgba(0,0,0,0)"),R.fillStyle=F,R.fillRect(0,0,T.width,T.height),T},[c,s]);return d.createElement("mesh",(0,w.Z)({renderOrder:t,ref:g,"rotation-x":-Math.PI/2},h),d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,opacity:p,fog:i,depthWrite:r,side:o.DoubleSide},d.createElement("canvasTexture",{attach:"map",args:[b]})))});function xC(i=o.FrontSide){const t={value:new o.Matrix4};return Object.assign(new o.MeshNormalMaterial({side:i}),{viewMatrix:t,onBeforeCompile:r=>{r.uniforms.viewMatrix=t,r.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+r.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const bB=Lc({causticsTexture:null,causticsTextureB:null,color:new o.Color,lightProjMatrix:new o.Matrix4,lightViewMatrix:new o.Matrix4},`varying vec3 vWorldPosition;   
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture; 
  uniform sampler2D causticsTextureB; 
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics  
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5; 
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <encodings_fragment>
   }`),MB=Lc({cameraMatrixWorld:new o.Matrix4,cameraProjectionMatrixInv:new o.Matrix4,normalTexture:null,depthTexture:null,lightDir:new o.Vector3(0,1,0),lightPlaneNormal:new o.Vector3(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new o.Matrix4,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`  
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }                  
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),CC={depth:!0,minFilter:o.LinearFilter,magFilter:o.LinearFilter,type:o.UnsignedByteType},SC={minFilter:o.LinearMipmapLinearFilter,magFilter:o.LinearFilter,type:o.FloatType,generateMipmaps:!0},xB=d.forwardRef((G,F)=>{var L=G,{debug:i,children:t,frames:r=1,ior:s=1.1,color:c="white",causticsOnly:p=!1,backside:h=!1,backsideIOR:g=1.1,worldRadius:y=.3125,intensity:_=.05,resolution:b=2024,lightSource:T=[5,5,5]}=L,R=An(L,["debug","children","frames","ior","color","causticsOnly","backside","backsideIOR","worldRadius","intensity","resolution","lightSource"]);(0,E.e)({CausticsProjectionMaterial:bB});const O=d.useRef(null),P=d.useRef(null),D=d.useRef(null),z=d.useRef(null),H=(0,E.z)(ze=>ze.gl),Q=Dx(i&&P,o.CameraHelper),W=ec(b,b,CC),Y=ec(b,b,CC),K=ec(b,b,SC),ie=ec(b,b,SC),[ce]=d.useState(()=>xC()),[ge]=d.useState(()=>xC(o.BackSide)),[ae]=d.useState(()=>new MB),[xe]=d.useState(()=>new jp(ae));d.useLayoutEffect(()=>{O.current.updateWorldMatrix(!1,!0)});let ve=0;const Be=new o.Vector3,Ue=new o.Frustum,Ie=new o.Matrix4,Ne=new o.Plane,Le=new o.Vector3,Ye=new o.Vector3,Ce=new o.Box3,Ee=new o.Vector3,_e=[],oe=[],me=[],Te=[],ye=new o.Vector3;for(let ze=0;ze<8;ze++)_e.push(new o.Vector3),oe.push(new o.Vector3),me.push(new o.Vector3),Te.push(new o.Vector3);return(0,E.A)(()=>{if(r===1/0||ve++<r){var ze,Mt;Array.isArray(T)?Le.fromArray(T).normalize():Le.copy(O.current.worldToLocal(T.current.getWorldPosition(Be)).normalize()),Ye.copy(Le).multiplyScalar(-1),(ze=D.current.parent)==null||ze.matrixWorld.identity(),Ce.setFromObject(D.current,!0),_e[0].set(Ce.min.x,Ce.min.y,Ce.min.z),_e[1].set(Ce.min.x,Ce.min.y,Ce.max.z),_e[2].set(Ce.min.x,Ce.max.y,Ce.min.z),_e[3].set(Ce.min.x,Ce.max.y,Ce.max.z),_e[4].set(Ce.max.x,Ce.min.y,Ce.min.z),_e[5].set(Ce.max.x,Ce.min.y,Ce.max.z),_e[6].set(Ce.max.x,Ce.max.y,Ce.min.z),_e[7].set(Ce.max.x,Ce.max.y,Ce.max.z);for(let Ut=0;Ut<8;Ut++)oe[Ut].copy(_e[Ut]);Ce.getCenter(Ee),_e.map(Ut=>Ut.sub(Ee));const At=Ne.set(Ye,0);_e.map((Ut,Nn)=>At.projectPoint(Ut,me[Nn]));const gt=me.reduce((Ut,Nn)=>Ut.add(Nn),Be.set(0,0,0)).divideScalar(me.length),ot=me.map(Ut=>Ut.distanceTo(gt)).reduce((Ut,Nn)=>Math.max(Ut,Nn)),Qt=_e.map(Ut=>Ut.dot(Le)).reduce((Ut,Nn)=>Math.max(Ut,Nn));P.current.position.copy(ye.copy(Le).multiplyScalar(Qt).add(Ee)),P.current.lookAt(D.current.localToWorld(Ee));const Gt=Ie.lookAt(P.current.position,Ee,Be.set(0,1,0));P.current.left=-ot,P.current.right=ot,P.current.top=ot,P.current.bottom=-ot;const Bt=Be.set(0,ot,0).applyMatrix4(Gt),qe=(P.current.position.y+Bt.y)/Le.y;P.current.near=.1,P.current.far=qe,P.current.updateProjectionMatrix(),P.current.updateMatrixWorld();const Ge=oe.map((Ut,Nn)=>Ut.add(Te[Nn].copy(Le).multiplyScalar(-Ut.y/Le.y))),Ot=Ge.reduce((Ut,Nn)=>Ut.add(Nn),Be.set(0,0,0)).divideScalar(Ge.length),gn=2*Ge.map(Ut=>Math.hypot(Ut.x-Ot.x,Ut.z-Ot.z)).reduce((Ut,Nn)=>Math.max(Ut,Nn));z.current.scale.setScalar(gn),z.current.position.copy(Ot),i&&((Mt=Q.current)==null||Mt.update()),ge.viewMatrix.value=ce.viewMatrix.value=P.current.matrixWorldInverse;const Mn=Ue.setFromProjectionMatrix(Ie.multiplyMatrices(P.current.projectionMatrix,P.current.matrixWorldInverse)).planes[4];ae.cameraMatrixWorld=P.current.matrixWorld,ae.cameraProjectionMatrixInv=P.current.projectionMatrixInverse,ae.lightDir=Ye,ae.lightPlaneNormal=Mn.normal,ae.lightPlaneConstant=Mn.constant,ae.near=P.current.near,ae.far=P.current.far,ae.resolution=b,ae.size=ot,ae.intensity=_,ae.worldRadius=y,D.current.visible=!0,H.setRenderTarget(W),H.clear(),D.current.overrideMaterial=ce,H.render(D.current,P.current),H.setRenderTarget(Y),H.clear(),h&&(D.current.overrideMaterial=ge,H.render(D.current,P.current)),D.current.overrideMaterial=null,ae.ior=s,z.current.material.lightProjMatrix=P.current.projectionMatrix,z.current.material.lightViewMatrix=P.current.matrixWorldInverse,ae.normalTexture=W.texture,ae.depthTexture=W.depthTexture,H.setRenderTarget(K),H.clear(),xe.render(H),ae.ior=g,ae.normalTexture=Y.texture,ae.depthTexture=Y.depthTexture,H.setRenderTarget(ie),H.clear(),h&&xe.render(H),H.setRenderTarget(null),p&&(D.current.visible=!1)}}),d.useImperativeHandle(F,()=>O.current,[]),d.createElement("group",(0,w.Z)({ref:O},R),d.createElement("scene",{ref:D},d.createElement("orthographicCamera",{ref:P,up:[0,1,0]}),t),d.createElement("mesh",{renderOrder:2,ref:z,"rotation-x":-Math.PI/2},d.createElement("planeGeometry",null),d.createElement("causticsProjectionMaterial",{transparent:!0,color:c,causticsTexture:K.texture,causticsTextureB:ie.texture,blending:o.CustomBlending,blendSrc:o.OneFactor,blendDst:o.SrcAlphaFactor,depthWrite:!1}),i&&d.createElement(iA,null,d.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))});var CB=A(25108);(0,E.e)({MeshReflectorMaterial:lC});const SB=d.forwardRef((P,O)=>{var D=P,{mixBlur:i=0,mixStrength:t=.5,resolution:r=256,blur:s=[0,0],args:c=[1,1],minDepthThreshold:p=.9,maxDepthThreshold:h=1,depthScale:g=0,depthToBlurRatioBias:y=.25,mirror:_=0,children:b,debug:T=0,distortion:R=1,mixContrast:F=1,distortionMap:G}=D,L=An(D,["mixBlur","mixStrength","resolution","blur","args","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","children","debug","distortion","mixContrast","distortionMap"]);d.useEffect(()=>{CB.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const z=(0,E.z)(({gl:me})=>me),H=(0,E.z)(({camera:me})=>me),Q=(0,E.z)(({scene:me})=>me);s=Array.isArray(s)?s:[s,s];const W=s[0]+s[1]>0,Y=d.useRef(null),[K]=d.useState(()=>new o.Plane),[ie]=d.useState(()=>new o.Vector3),[ce]=d.useState(()=>new o.Vector3),[ge]=d.useState(()=>new o.Vector3),[ae]=d.useState(()=>new o.Matrix4),[xe]=d.useState(()=>new o.Vector3(0,0,-1)),[ve]=d.useState(()=>new o.Vector4),[Be]=d.useState(()=>new o.Vector3),[Ue]=d.useState(()=>new o.Vector3),[Ie]=d.useState(()=>new o.Vector4),[Ne]=d.useState(()=>new o.Matrix4),[Le]=d.useState(()=>new o.PerspectiveCamera),Ye=d.useCallback(()=>{if(ce.setFromMatrixPosition(Y.current.matrixWorld),ge.setFromMatrixPosition(H.matrixWorld),ae.extractRotation(Y.current.matrixWorld),ie.set(0,0,1),ie.applyMatrix4(ae),Be.subVectors(ce,ge),Be.dot(ie)>0)return;Be.reflect(ie).negate(),Be.add(ce),ae.extractRotation(H.matrixWorld),xe.set(0,0,-1),xe.applyMatrix4(ae),xe.add(ge),Ue.subVectors(ce,xe),Ue.reflect(ie).negate(),Ue.add(ce),Le.position.copy(Be),Le.up.set(0,1,0),Le.up.applyMatrix4(ae),Le.up.reflect(ie),Le.lookAt(Ue),Le.far=H.far,Le.updateMatrixWorld(),Le.projectionMatrix.copy(H.projectionMatrix),Ne.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ne.multiply(Le.projectionMatrix),Ne.multiply(Le.matrixWorldInverse),Ne.multiply(Y.current.matrixWorld),K.setFromNormalAndCoplanarPoint(ie,ce),K.applyMatrix4(Le.matrixWorldInverse),ve.set(K.normal.x,K.normal.y,K.normal.z,K.constant);const me=Le.projectionMatrix;Ie.x=(Math.sign(ve.x)+me.elements[8])/me.elements[0],Ie.y=(Math.sign(ve.y)+me.elements[9])/me.elements[5],Ie.z=-1,Ie.w=(1+me.elements[10])/me.elements[14],ve.multiplyScalar(2/ve.dot(Ie)),me.elements[2]=ve.x,me.elements[6]=ve.y,me.elements[10]=ve.z+1,me.elements[14]=ve.w},[]),[Ce,Ee,_e,oe]=d.useMemo(()=>{const me={type:o.HalfFloatType,minFilter:o.LinearFilter,magFilter:o.LinearFilter},Te=new o.WebGLRenderTarget(r,r,me);Te.depthBuffer=!0,Te.depthTexture=new o.DepthTexture(r,r),Te.depthTexture.format=o.DepthFormat,Te.depthTexture.type=o.UnsignedShortType;const ye=new o.WebGLRenderTarget(r,r,me),ze=new aC({gl:z,resolution:r,width:s[0],height:s[1],minDepthThreshold:p,maxDepthThreshold:h,depthScale:g,depthToBlurRatioBias:y}),Mt={mirror:_,textureMatrix:Ne,mixBlur:i,tDiffuse:Te.texture,tDepth:Te.depthTexture,tDiffuseBlur:ye.texture,hasBlur:W,mixStrength:t,minDepthThreshold:p,maxDepthThreshold:h,depthScale:g,depthToBlurRatioBias:y,transparent:!0,debug:T,distortion:R,distortionMap:G,mixContrast:F,"defines-USE_BLUR":W?"":void 0,"defines-USE_DEPTH":g>0?"":void 0,"defines-USE_DISTORTION":G?"":void 0};return[Te,ye,ze,Mt]},[z,s,Ne,r,_,W,i,t,p,h,g,y,T,R,G,F]);return(0,E.A)(()=>{if(!(Y!=null&&Y.current))return;Y.current.visible=!1;const me=z.xr.enabled,Te=z.shadowMap.autoUpdate;Ye(),z.xr.enabled=!1,z.shadowMap.autoUpdate=!1,z.setRenderTarget(Ce),z.state.buffers.depth.setMask(!0),z.autoClear||z.clear(),z.render(Q,Le),W&&_e.render(z,Ce,Ee),z.xr.enabled=me,z.shadowMap.autoUpdate=Te,Y.current.visible=!0,z.setRenderTarget(null)}),d.createElement("mesh",(0,w.Z)({ref:Dn([Y,O])},L),d.createElement("planeGeometry",{args:c}),b?b("meshReflectorMaterial",oe):d.createElement("meshReflectorMaterial",oe))});class wB extends o.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new o.Vector3(0,0,0)},lightColor:{value:new o.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new o.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}var TB=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const BB=i=>i==null?void 0:i.isSpotLight;function RB({opacity:i=1,radiusTop:t,radiusBottom:r,depthBuffer:s,color:c="white",distance:p=5,angle:h=.15,attenuation:g=5,anglePower:y=5}){const _=d.useRef(null),b=(0,E.z)(O=>O.size),T=(0,E.z)(O=>O.camera),R=(0,E.z)(O=>O.viewport.dpr),[F]=d.useState(()=>new wB),[G]=d.useState(()=>new o.Vector3);t=t===void 0?.1:t,r=r===void 0?h*7:r,(0,E.A)(()=>{F.uniforms.spotPosition.value.copy(_.current.getWorldPosition(G)),_.current.lookAt(_.current.parent.target.getWorldPosition(G))});const L=d.useMemo(()=>{const O=new o.CylinderGeometry(t,r,p,128,64,!0);return O.applyMatrix4(new o.Matrix4().makeTranslation(0,-p/2,0)),O.applyMatrix4(new o.Matrix4().makeRotationX(-Math.PI/2)),O},[p,t,r]);return d.createElement(d.Fragment,null,d.createElement("mesh",{ref:_,geometry:L,raycast:()=>null},d.createElement("primitive",{object:F,attach:"material","uniforms-opacity-value":i,"uniforms-lightColor-value":c,"uniforms-attenuation-value":g,"uniforms-anglePower-value":y,"uniforms-depth-value":s,"uniforms-cameraNear-value":T.near,"uniforms-cameraFar-value":T.far,"uniforms-resolution-value":s?[b.width*R,b.height*R]:[0,0]})))}function wC(i,t,r,s,c){const[[p,h]]=d.useState(()=>[new o.Vector3,new o.Vector3]);d.useLayoutEffect(()=>{if(BB(i.current))i.current.shadow.mapSize.set(r,s),i.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[i,r,s]),(0,E.A)(()=>{if(!i.current)return;const g=i.current.position,y=i.current.target.position;h.copy(y).sub(g);var _=h.length();h.normalize().multiplyScalar(_*c),p.copy(g).add(h),t.current.position.copy(p),t.current.lookAt(i.current.target.position)})}function IB(_){var b=_,{distance:i=.4,alphaTest:t=.5,map:r,shader:s=TB,width:c=512,height:p=512,scale:h=1,children:g}=b,y=An(b,["distance","alphaTest","map","shader","width","height","scale","children"]);const T=d.useRef(null),R=y.spotlightRef,F=y.debug;wC(R,T,c,p,i);const G=d.useMemo(()=>new o.WebGLRenderTarget(c,p,{format:o.RGBAFormat,encoding:o.LinearEncoding,stencilBuffer:!1}),[c,p]),L=d.useRef({uShadowMap:{value:r},uTime:{value:0}});d.useEffect(()=>void(L.current.uShadowMap.value=r),[r]);const O=d.useMemo(()=>new jp(new o.ShaderMaterial({uniforms:L.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:s})),[s]);return d.useEffect(()=>()=>{O.material.dispose(),O.dispose()},[O]),d.useEffect(()=>()=>G.dispose(),[G]),(0,E.A)(({gl:P},D)=>{L.current.uTime.value+=D,P.setRenderTarget(G),O.render(P),P.setRenderTarget(null)}),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:T,scale:h,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:o.DoubleSide,alphaTest:t,alphaMap:G.texture,"alphaMap-wrapS":o.RepeatWrapping,"alphaMap-wrapT":o.RepeatWrapping,opacity:F?1:0},g)))}function FB(y){var _=y,{distance:i=.4,alphaTest:t=.5,map:r,width:s=512,height:c=512,scale:p,children:h}=_,g=An(_,["distance","alphaTest","map","width","height","scale","children"]);const b=d.useRef(null),T=g.spotlightRef,R=g.debug;return wC(T,b,s,c,i),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:b,scale:p,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:o.DoubleSide,alphaTest:t,alphaMap:r,"alphaMap-wrapS":o.RepeatWrapping,"alphaMap-wrapT":o.RepeatWrapping,opacity:R?1:0},h)))}function OB(i){return i.shader?d.createElement(IB,i):d.createElement(FB,i)}const DB=d.forwardRef((G,F)=>{var L=G,{opacity:i=1,radiusTop:t,radiusBottom:r,depthBuffer:s,color:c="white",distance:p=5,angle:h=.15,attenuation:g=5,anglePower:y=5,volumetric:_=!0,debug:b=!1,children:T}=L,R=An(L,["opacity","radiusTop","radiusBottom","depthBuffer","color","distance","angle","attenuation","anglePower","volumetric","debug","children"]);const O=d.useRef(null);return d.createElement("group",null,b&&O.current&&d.createElement("spotLightHelper",{args:[O.current]}),d.createElement("spotLight",(0,w.Z)({ref:Dn([F,O]),angle:h,color:c,distance:p,castShadow:!0},R),_&&d.createElement(RB,{debug:b,opacity:i,radiusTop:t,radiusBottom:r,depthBuffer:s,color:c,distance:p,angle:h,attenuation:g,anglePower:y})),T&&d.cloneElement(T,{spotlightRef:O,debug:b}))}),PB=d.forwardRef((T,b)=>{var R=T,{args:i,map:t,toneMapped:r=!1,color:s="white",form:c="rect",intensity:p=1,scale:h=1,target:g,children:y}=R,_=An(R,["args","map","toneMapped","color","form","intensity","scale","target","children"]);const F=d.useRef(null);return d.useLayoutEffect(()=>{!y&&!_.material&&((0,E.j)(F.current.material,{color:s}),F.current.material.color.multiplyScalar(p))},[s,p,y,_.material]),d.useLayoutEffect(()=>{g&&F.current.lookAt(Array.isArray(g)?new o.Vector3(...g):g)},[g]),h=Array.isArray(h)&&h.length===2?[h[0],h[1],1]:h,d.createElement("mesh",(0,w.Z)({ref:Dn([F,b]),scale:h},_),c==="circle"?d.createElement("ringGeometry",{args:[0,1,64]}):c==="ring"?d.createElement("ringGeometry",{args:[.5,1,64]}):c==="rect"?d.createElement("planeGeometry",null):d.createElement(c,{args:i}),y||(_.material?null:d.createElement("meshBasicMaterial",{toneMapped:r,map:t,side:o.DoubleSide})))});var LB=Object.defineProperty,kB=(i,t,r)=>t in i?LB(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,TC=(i,t,r)=>(kB(i,typeof t!="symbol"?t+"":t,r),r);const W2={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new o.Vector3},up:{value:new o.Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <encodings_fragment>

      }
    `},BC=new o.ShaderMaterial({name:"SkyShader",fragmentShader:W2.fragmentShader,vertexShader:W2.vertexShader,uniforms:o.UniformsUtils.clone(W2.uniforms),side:o.BackSide,depthWrite:!1});class Mb extends o.Mesh{constructor(){super(new o.BoxGeometry(1,1,1),BC)}}TC(Mb,"SkyShader",W2),TC(Mb,"material",BC);function RC(i,t,r=new o.Vector3){const s=Math.PI*(i-.5),c=2*Math.PI*(t-.5);return r.x=Math.cos(c),r.y=Math.sin(s),r.z=Math.sin(c),r}const zB=d.forwardRef((b,_)=>{var T=b,{inclination:i=.6,azimuth:t=.1,distance:r=1e3,mieCoefficient:s=.005,mieDirectionalG:c=.8,rayleigh:p=.5,turbidity:h=10,sunPosition:g=RC(i,t)}=T,y=An(T,["inclination","azimuth","distance","mieCoefficient","mieDirectionalG","rayleigh","turbidity","sunPosition"]);const R=d.useMemo(()=>new o.Vector3().setScalar(r),[r]),[F]=d.useState(()=>new Mb);return d.createElement("primitive",(0,w.Z)({object:F,ref:_,"material-uniforms-mieCoefficient-value":s,"material-uniforms-mieDirectionalG-value":c,"material-uniforms-rayleigh-value":p,"material-uniforms-sunPosition-value":g,"material-uniforms-turbidity-value":h,scale:R},y))});class GB extends o.ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const UB=i=>new o.Vector3().setFromSpherical(new o.Spherical(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),NB=d.forwardRef(({radius:i=100,depth:t=50,count:r=5e3,saturation:s=0,factor:c=4,fade:p=!1,speed:h=1},g)=>{const y=d.useRef(),[_,b,T]=d.useMemo(()=>{const F=[],G=[],L=Array.from({length:r},()=>(.5+.5*Math.random())*c),O=new o.Color;let P=i+t;const D=t/r;for(let z=0;z<r;z++)P-=D*Math.random(),F.push(...UB(P).toArray()),O.setHSL(z/r,s,.9),G.push(O.r,O.g,O.b);return[new Float32Array(F),new Float32Array(G),new Float32Array(L)]},[r,t,c,i,s]);(0,E.A)(F=>y.current&&(y.current.uniforms.time.value=F.clock.getElapsedTime()*h));const[R]=d.useState(()=>new GB);return d.createElement("points",{ref:g},d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[_,3]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[b,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[T,1]})),d.createElement("primitive",{ref:y,object:R,attach:"material",blending:o.AdditiveBlending,"uniforms-fade-value":p,depthWrite:!1,transparent:!0,vertexColors:!0}))}),HB="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png";function jB(_){var b=_,{opacity:i=.5,speed:t=.4,width:r=10,depth:s=1.5,segments:c=20,texture:p=HB,color:h="#ffffff",depthTest:g=!0}=b,y=An(b,["opacity","speed","width","depth","segments","texture","color","depthTest"]);const T=d.useRef(),R=Bu(p),F=d.useMemo(()=>[...new Array(c)].map((G,L)=>({x:r/2-Math.random()*r,y:r/2-Math.random()*r,scale:.4+Math.sin((L+1)/c*Math.PI)*((.2+Math.random())*10),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*t})),[r,c,t]);return(0,E.A)(G=>{var L;return(L=T.current)==null?void 0:L.children.forEach((O,P)=>{O.children[0].rotation.z+=F[P].rotation,O.children[0].scale.setScalar(F[P].scale+(1+Math.sin(G.clock.getElapsedTime()/10))/2*P/10)})}),d.createElement("group",y,d.createElement("group",{position:[0,0,c/2*s],ref:T},F.map(({x:G,y:L,scale:O,density:P},D)=>d.createElement(Uy,{key:D,position:[G,L,-D*s]},d.createElement(fC,{scale:O,rotation:[0,0,0]},d.createElement("meshStandardMaterial",{map:R,transparent:!0,opacity:O/6*P*i,depthTest:g,color:h}))))))}const WB=Lc({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }`),IC=i=>i&&i.constructor===Float32Array,VB=i=>[i.r,i.g,i.b],FC=i=>i instanceof o.Vector2||i instanceof o.Vector3||i instanceof o.Vector4,OC=i=>Array.isArray(i)?i:FC(i)?i.toArray():[i,i,i];function qA(i,t,r){return d.useMemo(()=>{if(t!==void 0){if(IC(t))return t;if(t instanceof o.Color){const s=Array.from({length:i*3},()=>VB(t)).flat();return Float32Array.from(s)}else if(FC(t)||Array.isArray(t)){const s=Array.from({length:i*3},()=>OC(t)).flat();return Float32Array.from(s)}return Float32Array.from({length:i},()=>t)}return Float32Array.from({length:i},r)},[t])}const QB=d.forwardRef((b,_)=>{var T=b,{noise:i=1,count:t=100,speed:r=1,opacity:s=1,scale:c=1,size:p,color:h,children:g}=T,y=An(T,["noise","count","speed","opacity","scale","size","color","children"]);d.useMemo(()=>(0,E.e)({SparklesImplMaterial:WB}),[]);const R=d.useRef(null),F=(0,E.z)(Q=>Q.viewport.dpr),G=OC(c),L=d.useMemo(()=>Float32Array.from(Array.from({length:t},()=>G.map(o.MathUtils.randFloatSpread)).flat()),[t,...G]),O=qA(t,p,Math.random),P=qA(t,s),D=qA(t,r),z=qA(t*3,i),H=qA(h===void 0?t*3:t,IC(h)?h:new o.Color(h),()=>1);return(0,E.A)(Q=>{R.current&&R.current.material&&(R.current.material.time=Q.clock.elapsedTime)}),d.useImperativeHandle(_,()=>R.current,[]),d.createElement("points",(0,w.Z)({key:`particle-${t}-${JSON.stringify(c)}`},y,{ref:R}),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[L,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[O,1]}),d.createElement("bufferAttribute",{attach:"attributes-opacity",args:[P,1]}),d.createElement("bufferAttribute",{attach:"attributes-speed",args:[D,1]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[H,3]}),d.createElement("bufferAttribute",{attach:"attributes-noise",args:[z,3]})),g||d.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:F,depthWrite:!1}))});function XB(i){switch(i){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const KB="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",YB="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function JB(i=0,t=1024,r){const s=(0,Il.Rq)(()=>fetch(KB).then(b=>b.json()),["matcapList"]),c=s[0],p=d.useMemo(()=>Object.keys(s).length,[]),g=`${d.useMemo(()=>typeof i=="string"?i:typeof i=="number"?s[i]:null,[i])||c}${XB(t)}.png`,y=`${YB}/${t}/${g}`;return[Bu(y,r),y,p]}const qB="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",ZB="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function $B(i=0,t={},r){const{repeat:s=[1,1],anisotropy:c=1,offset:p=[0,0]}=t,h=(0,Il.Rq)(()=>fetch(ZB).then(R=>R.json()),["normalsList"]),g=d.useMemo(()=>Object.keys(h).length,[]),y=h[0],_=h[i]||y,b=`${qB}/normals/${_}`,T=Bu(b,r);return d.useLayoutEffect(()=>{T&&(T.wrapS=T.wrapT=o.RepeatWrapping,T.repeat=new o.Vector2(s[0],s[1]),T.offset=new o.Vector2(p[0],p[1]),T.anisotropy=c)},[T,c,s,p]),[T,b,g]}const Wf={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new o.Color("#ff0000"),backfaceStroke:new o.Color("#0000ff"),fill:new o.Color("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},eR=Lc(Wf.uniforms,Wf.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Wf.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function tR(i,t){i.onBeforeCompile=r=>{r.uniforms=jn(jn({},r.uniforms),t),r.vertexShader=r.vertexShader.replace("void main() {",`
		  ${Wf.vertex}
		  void main() {
			initWireframe();
		`),r.fragmentShader=r.fragmentShader.replace("void main() {",`
		  ${Wf.fragment}
		  void main() {
		`),r.fragmentShader=r.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},i.side=o.DoubleSide,i.transparent=!0}function nR(i,t){d.useEffect(()=>{var r;return void(i.fillOpacity.value=(r=t.fillOpacity)!==null&&r!==void 0?r:i.fillOpacity.value)},[t.fillOpacity]),d.useEffect(()=>{var r;return void(i.fillMix.value=(r=t.fillMix)!==null&&r!==void 0?r:i.fillMix.value)},[t.fillMix]),d.useEffect(()=>{var r;return void(i.strokeOpacity.value=(r=t.strokeOpacity)!==null&&r!==void 0?r:i.strokeOpacity.value)},[t.strokeOpacity]),d.useEffect(()=>{var r;return void(i.thickness.value=(r=t.thickness)!==null&&r!==void 0?r:i.thickness.value)},[t.thickness]),d.useEffect(()=>void(i.colorBackfaces.value=!!t.colorBackfaces),[t.colorBackfaces]),d.useEffect(()=>void(i.dash.value=!!t.dash),[t.dash]),d.useEffect(()=>void(i.dashInvert.value=!!t.dashInvert),[t.dashInvert]),d.useEffect(()=>{var r;return void(i.dashRepeats.value=(r=t.dashRepeats)!==null&&r!==void 0?r:i.dashRepeats.value)},[t.dashRepeats]),d.useEffect(()=>{var r;return void(i.dashLength.value=(r=t.dashLength)!==null&&r!==void 0?r:i.dashLength.value)},[t.dashLength]),d.useEffect(()=>void(i.squeeze.value=!!t.squeeze),[t.squeeze]),d.useEffect(()=>{var r;return void(i.squeezeMin.value=(r=t.squeezeMin)!==null&&r!==void 0?r:i.squeezeMin.value)},[t.squeezeMin]),d.useEffect(()=>{var r;return void(i.squeezeMax.value=(r=t.squeezeMax)!==null&&r!==void 0?r:i.squeezeMax.value)},[t.squeezeMax]),d.useEffect(()=>void(i.stroke.value=t.stroke?new o.Color(t.stroke):i.stroke.value),[t.stroke]),d.useEffect(()=>void(i.fill.value=t.fill?new o.Color(t.fill):i.fill.value),[t.fill]),d.useEffect(()=>void(i.backfaceStroke.value=t.backfaceStroke?new o.Color(t.backfaceStroke):i.backfaceStroke.value),[t.backfaceStroke])}var rR=A(25108);E.e({MeshWireframeMaterial:eR});function iR(i){return!!(i!=null&&i.geometry)}function oR(i){return!!(i!=null&&i.isBufferGeometry)}function sR(i){return!!(i!=null&&i.current)}function DC(i){return(i==null?void 0:i.current)!==void 0}function PC(i){return i.type==="WireframeGeometry"}function aR(){const i={};for(const t in Wf.uniforms)i[t]={value:Wf.uniforms[t]};return i}function lR(i,t){const s=i.getAttribute("position").count,c=[];for(let p=0;p<s;p++){const h=p%2===0,g=t?1:0;h?c.push(0,0,1,0,1,0,1,0,g):c.push(0,1,0,0,0,1,1,0,g)}return new o.BufferAttribute(Float32Array.from(c),3)}function LC(i){const t=sR(i)?i.current:i;if(oR(t))return t;{if(PC(t))throw new Error("Wireframe: WireframeGeometry is not supported.");const r=t.parent;if(iR(r)){if(PC(r.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return r.geometry}}}function kC(i,t){if(i.index){rR.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const s=i.toNonIndexed();i.copy(s),i.setIndex(null)}const r=lR(i,t);i.setAttribute("barycentric",r)}function cR(s){var c=s,{geometry:i,simplify:t=!1}=c,r=An(c,["geometry","simplify"]);const[p,h]=d.useState(null);d.useLayoutEffect(()=>{const y=LC(i);if(!y)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");kC(y,t),DC(i)&&h(y)},[t,i]);const g=DC(i)?p:i;return d.createElement(d.Fragment,null,g&&d.createElement("mesh",{geometry:g},d.createElement("meshWireframeMaterial",(0,w.Z)({attach:"material",transparent:!0,side:o.DoubleSide,polygonOffset:!0,polygonOffsetFactor:-4},r,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function pR(r){var s=r,{simplify:i=!1}=s,t=An(s,["simplify"]);const c=d.useRef(null),p=d.useMemo(()=>aR(),[Wf.uniforms]);return nR(p,t),d.useLayoutEffect(()=>{const h=LC(c);if(!h)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const g=h.clone();return kC(h,i),()=>{h.copy(g),g.dispose()}},[i]),d.useLayoutEffect(()=>{const h=c.current.parent,g=h.material.clone();return tR(h.material,p),()=>{h.material.dispose(),h.material=g}},[]),d.createElement("object3D",{ref:c})}function uR(r){var s=r,{geometry:i}=s,t=An(s,["geometry"]);return i?d.createElement(cR,(0,w.Z)({geometry:i},t)):d.createElement(pR,t)}const zC=new o.Matrix4,xb=new o.Ray,GC=new o.Sphere,dR=new o.Vector3;class UC extends o.Group{constructor(){super(),this.size=0,this.color=new o.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){var s,c;const p=this.instance.current;if(!p||!p.geometry)return;const h=p.userData.instances.indexOf(this.instanceKey);if(h===-1||h>p.geometry.drawRange.count)return;const g=(s=(c=t.params.Points)==null?void 0:c.threshold)!==null&&s!==void 0?s:1;if(GC.set(this.getWorldPosition(dR),g),t.ray.intersectsSphere(GC)===!1)return;zC.copy(p.matrixWorld).invert(),xb.copy(t.ray).applyMatrix4(zC);const y=g/((this.scale.x+this.scale.y+this.scale.z)/3),_=y*y,b=xb.distanceSqToPoint(this.position);if(b<_){const T=new o.Vector3;xb.closestPointToPoint(this.position,T),T.applyMatrix4(this.matrixWorld);const R=t.ray.origin.distanceTo(T);if(R<t.near||R>t.far)return;r.push({distance:R,distanceToRay:Math.sqrt(b),point:T,index:h,face:null,object:this})}}}let gm,ZA;const NC=d.createContext(null),HC=new o.Matrix4,jC=new o.Vector3,hR=d.forwardRef((p,c)=>{var h=p,{children:i,range:t,limit:r=1e3}=h,s=An(h,["children","range","limit"]);const g=d.useRef(null),[y,_]=d.useState([]),[[b,T,R]]=d.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);d.useEffect(()=>{g.current.geometry.attributes.position.needsUpdate=!0}),(0,E.A)(()=>{for(g.current.updateMatrix(),g.current.updateMatrixWorld(),HC.copy(g.current.matrixWorld).invert(),g.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,y.length),gm=0;gm<y.length;gm++)ZA=y[gm].current,ZA.getWorldPosition(jC).applyMatrix4(HC),jC.toArray(b,gm*3),g.current.geometry.attributes.position.needsUpdate=!0,ZA.matrixWorldNeedsUpdate=!0,ZA.color.toArray(T,gm*3),g.current.geometry.attributes.color.needsUpdate=!0,R.set([ZA.size],gm),g.current.geometry.attributes.size.needsUpdate=!0});const F=d.useMemo(()=>({getParent:()=>g,subscribe:G=>(_(L=>[...L,G]),()=>_(L=>L.filter(O=>O.current!==G.current)))}),[]);return d.createElement("points",(0,w.Z)({userData:{instances:y},matrixAutoUpdate:!1,ref:Dn([c,g]),raycast:()=>null},s),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:b.length/3,array:b,itemSize:3,usage:o.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-color",count:T.length/3,array:T,itemSize:3,usage:o.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-size",count:R.length,array:R,itemSize:1,usage:o.DynamicDrawUsage})),d.createElement(NC.Provider,{value:F},i))}),fR=d.forwardRef((s,r)=>{var c=s,{children:i}=c,t=An(c,["children"]);d.useMemo(()=>(0,E.e)({PositionPoint:UC}),[]);const p=d.useRef(),{subscribe:h,getParent:g}=d.useContext(NC);return d.useLayoutEffect(()=>h(p),[]),d.createElement("positionPoint",(0,w.Z)({instance:g(),instanceKey:p,ref:Dn([r,p])},t),i)}),WC=d.forwardRef((g,h)=>{var y=g,{children:i,positions:t,colors:r,sizes:s,stride:c=3}=y,p=An(y,["children","positions","colors","sizes","stride"]);const _=d.useRef(null);return(0,E.A)(()=>{const b=_.current.geometry.attributes;b.position.needsUpdate=!0,r&&(b.color.needsUpdate=!0),s&&(b.size.needsUpdate=!0)}),d.createElement("points",(0,w.Z)({ref:Dn([h,_])},p),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:t.length/c,array:t,itemSize:c,usage:o.DynamicDrawUsage}),r&&d.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/c,array:r,itemSize:3,usage:o.DynamicDrawUsage}),s&&d.createElement("bufferAttribute",{attach:"attributes-size",count:s.length/c,array:s,itemSize:1,usage:o.DynamicDrawUsage})),i)}),gR=d.forwardRef((i,t)=>i.positions instanceof Float32Array?d.createElement(WC,(0,w.Z)({},i,{ref:t})):d.createElement(hR,(0,w.Z)({},i,{ref:t})));var mR=A(45697),$A=A.n(mR);function VC(i){return QC(i.children,i.components)}VC.propTypes={children:$A().func.isRequired,components:$A().arrayOf($A().oneOfType([$A().element,$A().func])).isRequired};function QC(i,t,r){if(r=r||[],!t[0])return i(r);function s(c){return QC(i,t.slice(1),r.concat([c]))}return typeof t[0]=="function"?t[0]({results:r,render:s}):(0,d.cloneElement)(t[0],{children:s})}const XC=new o.Matrix4,KC=new o.Matrix4,V2=[],ey=new o.Mesh;class AR extends o.Group{constructor(){super(),this.color=new o.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){const s=this.instance.current;if(!s||!s.geometry||!s.material)return;ey.geometry=s.geometry;const c=s.matrixWorld,p=s.userData.instances.indexOf(this.instanceKey);if(!(p===-1||p>s.count)){s.getMatrixAt(p,XC),KC.multiplyMatrices(c,XC),ey.matrixWorld=KC,s.material instanceof o.Material?ey.material.side=s.material.side:ey.material.side=s.material[0].side,ey.raycast(t,V2);for(let h=0,g=V2.length;h<g;h++){const y=V2[h];y.instanceId=p,y.object=this,r.push(y)}V2.length=0}}}const YC=d.createContext(null),JC=new o.Matrix4,qC=new o.Matrix4,yR=new o.Matrix4,ZC=new o.Vector3,$C=new o.Quaternion,eS=new o.Vector3,tS=d.forwardRef((c,s)=>{var p=c,{context:i,children:t}=p,r=An(p,["context","children"]);d.useMemo(()=>(0,E.e)({PositionMesh:AR}),[]);const h=d.useRef(),{subscribe:g,getParent:y}=d.useContext(i||YC);return d.useLayoutEffect(()=>g(h),[]),d.createElement("positionMesh",(0,w.Z)({instance:y(),instanceKey:h,ref:Dn([s,h])},r),t)}),nS=d.forwardRef((h,p)=>{var g=h,{children:i,range:t,limit:r=1e3,frames:s=1/0}=g,c=An(g,["children","range","limit","frames"]);const[{context:y,instance:_}]=d.useState(()=>{const D=d.createContext(null);return{context:D,instance:d.forwardRef((z,H)=>d.createElement(tS,(0,w.Z)({context:D},z,{ref:H})))}}),b=d.useRef(null),[T,R]=d.useState([]),[[F,G]]=d.useState(()=>{const D=new Float32Array(r*16);for(let z=0;z<r;z++)yR.identity().toArray(D,z*16);return[D,new Float32Array([...new Array(r*3)].map(()=>1))]});d.useEffect(()=>{b.current.instanceMatrix.needsUpdate=!0});let L=0,O=0;(0,E.A)(()=>{if(s===1/0||L<s){b.current.updateMatrix(),b.current.updateMatrixWorld(),JC.copy(b.current.matrixWorld).invert(),O=Math.min(r,t!==void 0?t:r,T.length),b.current.count=O,b.current.instanceMatrix.updateRange.count=O*16,b.current.instanceColor.updateRange.count=O*3;for(let D=0;D<T.length;D++){const z=T[D].current;z.matrixWorld.decompose(ZC,$C,eS),qC.compose(ZC,$C,eS).premultiply(JC),qC.toArray(F,D*16),b.current.instanceMatrix.needsUpdate=!0,z.color.toArray(G,D*3),b.current.instanceColor.needsUpdate=!0}L++}});const P=d.useMemo(()=>({getParent:()=>b,subscribe:D=>(R(z=>[...z,D]),()=>R(z=>z.filter(H=>H.current!==D.current)))}),[]);return d.createElement("instancedMesh",(0,w.Z)({userData:{instances:T},matrixAutoUpdate:!1,ref:Dn([p,b]),args:[null,null,0],raycast:()=>null},c),d.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:F.length/16,array:F,itemSize:16,usage:o.DynamicDrawUsage}),d.createElement("instancedBufferAttribute",{attach:"instanceColor",count:G.length/3,array:G,itemSize:3,usage:o.DynamicDrawUsage}),typeof i=="function"?d.createElement(y.Provider,{value:P},i(_)):d.createElement(YC.Provider,{value:P},i))}),vR=d.forwardRef(function(p,c){var h=p,{meshes:t,children:r}=h,s=An(h,["meshes","children"]);const g=Array.isArray(t);if(!g)for(const y of Object.keys(t))t[y].isMesh||delete t[y];return d.createElement("group",{ref:c},d.createElement(VC,{components:(g?t:Object.values(t)).map(({geometry:y,material:_})=>d.createElement(nS,(0,w.Z)({key:y.uuid,geometry:y,material:_},s)))},y=>g?r(...y):r(Object.keys(t).filter(_=>t[_].isMesh).reduce((_,b,T)=>Xo(jn({},_),{[b]:y[T]}),{}))))}),rS=d.createContext(null),_R=d.forwardRef((i,t)=>{d.useMemo(()=>(0,E.e)({SegmentObject:iS}),[]);const L=i,{limit:r=1e3,lineWidth:s=1,children:c}=L,p=An(L,["limit","lineWidth","children"]),[h,g]=d.useState([]),[y]=d.useState(()=>new Nm),[_]=d.useState(()=>new zm),[b]=d.useState(()=>new Fg),[T]=d.useState(()=>new o.Vector2(512,512)),[R]=d.useState(()=>Array(r*6).fill(0)),[F]=d.useState(()=>Array(r*6).fill(0)),G=d.useMemo(()=>({subscribe:O=>(g(P=>[...P,O]),()=>g(P=>P.filter(D=>D.current!==O.current)))}),[]);return(0,E.A)(()=>{for(let P=0;P<r;P++){var O;const D=(O=h[P])==null?void 0:O.current;D&&(R[P*6+0]=D.start.x,R[P*6+1]=D.start.y,R[P*6+2]=D.start.z,R[P*6+3]=D.end.x,R[P*6+4]=D.end.y,R[P*6+5]=D.end.z,F[P*6+0]=D.color.r,F[P*6+1]=D.color.g,F[P*6+2]=D.color.b,F[P*6+3]=D.color.r,F[P*6+4]=D.color.g,F[P*6+5]=D.color.b)}b.setColors(F),b.setPositions(R),y.computeLineDistances()}),d.createElement("primitive",{object:y,ref:t},d.createElement("primitive",{object:b,attach:"geometry"}),d.createElement("primitive",(0,w.Z)({object:_,attach:"material",vertexColors:!0,resolution:T,linewidth:s},p)),d.createElement(rS.Provider,{value:G},c))});class iS{constructor(){this.color=new o.Color("white"),this.start=new o.Vector3(0,0,0),this.end=new o.Vector3(0,0,0)}}const oS=i=>i instanceof o.Vector3?i:new o.Vector3(...typeof i=="number"?[i,i,i]:i),ER=d.forwardRef(({color:i,start:t,end:r},s)=>{const c=d.useContext(rS);if(!c)throw"Segment must used inside Segments component.";const p=d.useRef(null);return d.useLayoutEffect(()=>c.subscribe(p),[]),d.createElement("segmentObject",{ref:Dn([p,s]),color:i,start:oS(t),end:oS(r)})}),bR=d.forwardRef((p,c)=>{var h=p,{children:i,hysteresis:t=0,distances:r}=h,s=An(h,["children","hysteresis","distances"]);const g=d.useRef(null);return d.useLayoutEffect(()=>{const{current:y}=g;y.levels.length=0,y.children.forEach((_,b)=>y.levels.push({object:_,hysteresis:t,distance:r[b]}))}),(0,E.A)(y=>{var _;return(_=g.current)==null?void 0:_.update(y.camera)}),d.createElement("lOD",(0,w.Z)({ref:Dn([g,c])},s),i)});function MR({all:i,scene:t,camera:r}){const s=(0,E.z)(({gl:h})=>h),c=(0,E.z)(({camera:h})=>h),p=(0,E.z)(({scene:h})=>h);return d.useLayoutEffect(()=>{const h=[];i&&(t||p).traverse(_=>{_.visible===!1&&(h.push(_),_.visible=!0)}),s.compile(t||p,r||c);const g=new o.WebGLCubeRenderTarget(128);new o.CubeCamera(.01,1e5,g).update(s,t||p),g.dispose(),h.forEach(_=>_.visible=!1)},[]),null}function xR(){const i=(0,E.z)(t=>t.gl);return(0,d.useEffect)(()=>(i.shadowMap.autoUpdate=!1,i.shadowMap.needsUpdate=!0,()=>{i.shadowMap.autoUpdate=i.shadowMap.needsUpdate=!0}),[i.shadowMap]),null}const sS=new o.Matrix4,aS=new o.Ray,Cb=new o.Sphere,Sb=new o.Vector3;function CR(i,t){const r=this.geometry,s=this.material,c=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Cb.copy(r.boundingSphere),Cb.applyMatrix4(c),i.ray.intersectsSphere(Cb)!==!1&&(sS.copy(c).invert(),aS.copy(i.ray).applyMatrix4(sS),!(r.boundingBox!==null&&aS.intersectBox(r.boundingBox,Sb)===null)&&t.push({distance:Sb.distanceTo(i.ray.origin),point:Sb.clone(),object:this})))}function SR({pixelated:i}){const t=(0,E.z)(h=>h.gl),r=(0,E.z)(h=>h.internal.active),s=(0,E.z)(h=>h.performance.current),c=(0,E.z)(h=>h.viewport.initialDpr),p=(0,E.z)(h=>h.setDpr);return d.useEffect(()=>{const h=t.domElement;return()=>{r&&p(c),i&&h&&(h.style.imageRendering="auto")}},[]),d.useEffect(()=>{p(s*c),i&&t.domElement&&(t.domElement.style.imageRendering=s===1?"auto":"pixelated")},[s]),null}function wR(){const i=(0,E.z)(s=>s.get),t=(0,E.z)(s=>s.setEvents),r=(0,E.z)(s=>s.performance.current);return d.useEffect(()=>{const s=i().events.enabled;return()=>t({enabled:s})},[]),d.useEffect(()=>t({enabled:r===1}),[r]),null}const lS=(0,d.createContext)(null);function TR({iterations:i=10,ms:t=250,threshold:r=.75,step:s=.1,factor:c=.5,flipflops:p=1/0,bounds:h=R=>R>100?[60,100]:[40,60],onIncline:g,onDecline:y,onChange:_,onFallback:b,children:T}){const R=Math.pow(10,0),[F,G]=(0,d.useState)(()=>({fps:0,index:0,factor:c,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:O=>{const P=Symbol();return F.subscriptions.set(P,O.current),()=>void F.subscriptions.delete(P)}}));let L=0;return(0,E.A)(()=>{const{frames:O,averages:P}=F;if(!F.fallback&&P.length<i){O.push(performance.now());const D=O[O.length-1]-O[0];if(D>=t){if(F.fps=Math.round(O.length/D*1e3*R)/R,F.refreshrate=Math.max(F.refreshrate,F.fps),P[F.index++%i]=F.fps,P.length===i){const[z,H]=h(F.refreshrate),Q=P.filter(Y=>Y>=H),W=P.filter(Y=>Y<z);Q.length>i*r&&(F.factor=Math.min(1,F.factor+s),F.flipped++,g&&g(F),F.subscriptions.forEach(Y=>Y.onIncline&&Y.onIncline(F))),W.length>i*r&&(F.factor=Math.max(0,F.factor-s),F.flipped++,y&&y(F),F.subscriptions.forEach(Y=>Y.onDecline&&Y.onDecline(F))),L!==F.factor&&(L=F.factor,_&&_(F),F.subscriptions.forEach(Y=>Y.onChange&&Y.onChange(F))),F.flipped>p&&!F.fallback&&(F.fallback=!0,b&&b(F),F.subscriptions.forEach(Y=>Y.onFallback&&Y.onFallback(F))),F.averages=[]}F.frames=[]}}}),d.createElement(lS.Provider,{value:F},T)}function BR({onIncline:i,onDecline:t,onChange:r,onFallback:s}){const c=(0,d.useContext)(lS),p=(0,d.useRef)({onIncline:i,onDecline:t,onChange:r,onFallback:s});(0,d.useLayoutEffect)(()=>{p.current.onIncline=i,p.current.onDecline=t,p.current.onChange=r,p.current.onFallback=s},[i,t,r,s]),(0,d.useLayoutEffect)(()=>c.subscribe(p),[c])}const cS=d.forwardRef((F,R)=>{var G=F,{children:i,compute:t,width:r,height:s,samples:c=8,renderPriority:p=0,eventPriority:h=0,frames:g=1/0,stencilBuffer:y=!1,depthBuffer:_=!0,generateMipmaps:b=!1}=G,T=An(G,["children","compute","width","height","samples","renderPriority","eventPriority","frames","stencilBuffer","depthBuffer","generateMipmaps"]);const{size:L,viewport:O}=(0,E.z)(),P=ec((r||L.width)*O.dpr,(s||L.height)*O.dpr,{samples:c,stencilBuffer:y,depthBuffer:_,generateMipmaps:b}),[D]=d.useState(()=>new o.Scene),z=d.useCallback((H,Q,W)=>{var Y,K;let ie=(Y=P.texture)==null?void 0:Y.__r3f.parent;for(;ie&&!(ie instanceof o.Object3D);)ie=ie.__r3f.parent;if(!ie)return!1;W.raycaster.camera||W.events.compute(H,W,(K=W.previousRoot)==null?void 0:K.getState());const[ce]=W.raycaster.intersectObject(ie);if(!ce)return!1;const ge=ce.uv;if(!ge)return!1;Q.raycaster.setFromCamera(Q.pointer.set(ge.x*2-1,ge.y*2-1),Q.camera)},[]);return d.useImperativeHandle(R,()=>P.texture,[P]),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(RR,{renderPriority:p,frames:g,fbo:P},i,d.createElement("group",{onPointerOver:()=>null})),D,{events:{compute:t||z,priority:h}}),d.createElement("primitive",(0,w.Z)({object:P.texture},T)))});function RR({frames:i,renderPriority:t,children:r,fbo:s}){let c=0,p;return(0,E.A)(h=>{(i===1/0||c<i)&&(p=h.gl.autoClear,h.gl.autoClear=!0,h.gl.setRenderTarget(s),h.gl.render(h.scene,h.camera),h.gl.setRenderTarget(null),h.gl.autoClear=p,c++)},t),d.createElement(d.Fragment,null,r)}const IR=d.forwardRef((p,c)=>{var h=p,{id:i=1,colorWrite:t=!1,depthWrite:r=!1}=h,s=An(h,["id","colorWrite","depthWrite"]);const g=d.useRef(null),y=d.useMemo(()=>({colorWrite:t,depthWrite:r,stencilWrite:!0,stencilRef:i,stencilFunc:o.AlwaysStencilFunc,stencilFail:o.ReplaceStencilOp,stencilZFail:o.ReplaceStencilOp,stencilZPass:o.ReplaceStencilOp}),[i,t,r]);return d.useLayoutEffect(()=>{Object.assign(g.current.material,y)}),d.useImperativeHandle(c,()=>g.current,[]),d.createElement("mesh",(0,w.Z)({ref:g,renderOrder:-i},s))});function FR(i,t=!1){return{stencilWrite:!0,stencilRef:i,stencilFunc:t?o.NotEqualStencilFunc:o.EqualStencilFunc,stencilFail:o.KeepStencilOp,stencilZFail:o.KeepStencilOp,stencilZPass:o.KeepStencilOp}}const OR=Lc({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new o.Vector2},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),DR=d.forwardRef((_,y)=>{var b=_,{children:i,events:t=void 0,blur:r=0,eventPriority:s=0,renderPriority:c=0,worldUnits:p=!1,resolution:h=512}=b,g=An(b,["children","events","blur","eventPriority","renderPriority","worldUnits","resolution"]);(0,E.e)({PortalMaterialImpl:OR});const T=d.useRef(null),{scene:R,gl:F,size:G,viewport:L,setEvents:O}=(0,E.z)(),P=ec(h,h),[D,z]=d.useState(0);(0,E.A)(()=>{const K=T.current.blend>0?Math.max(1,c):0;D!==K&&z(K)}),d.useEffect(()=>{t!==void 0&&O({enabled:!t})},[t]);const[H,Q]=d.useState(!0),W=iC(Q);d.useLayoutEffect(()=>{var K;W.current=(K=T.current)==null?void 0:K.__r3f.parent},[]),d.useLayoutEffect(()=>{if(W.current&&r&&T.current.sdf===null){const K=new o.Mesh(W.current.geometry,new o.MeshBasicMaterial),ie=new o.Box3().setFromBufferAttribute(K.geometry.attributes.position),ce=new o.OrthographicCamera(ie.min.x*(1+2/h),ie.max.x*(1+2/h),ie.max.y*(1+2/h),ie.min.y*(1+2/h),.1,1e3);ce.position.set(0,0,1),ce.lookAt(0,0,0),F.setRenderTarget(P),F.render(K,ce);const ae=LR(h,h,F)(P.texture),xe=new Float32Array(h*h);F.readRenderTargetPixels(ae,0,0,h,h,xe);let ve=1/0;for(let Be=0;Be<xe.length;Be++)xe[Be]<ve&&(ve=xe[Be]);ve=-ve,T.current.size=ve,T.current.sdf=ae.texture,F.setRenderTarget(null)}},[h,r]),d.useImperativeHandle(y,()=>T.current);const Y=d.useCallback((K,ie,ce)=>{var ge;if(!W.current)return!1;if(ie.pointer.set(K.offsetX/ie.size.width*2-1,-(K.offsetY/ie.size.height)*2+1),ie.raycaster.setFromCamera(ie.pointer,ie.camera),((ge=T.current)==null?void 0:ge.blend)===0){const[ae]=ie.raycaster.intersectObject(W.current);if(!ae)return ie.raycaster.camera=void 0,!1}},[]);return d.createElement("portalMaterialImpl",(0,w.Z)({ref:T,blur:r,blend:0,resolution:[G.width*L.dpr,G.height*L.dpr],toneMapped:!1,attach:"material"},g),d.createElement(cS,{attach:"map",frames:H?1/0:0,eventPriority:s,renderPriority:c,compute:Y},i,d.createElement(PR,{events:t,rootScene:R,priority:D,material:T,worldUnits:p})))});function PR({events:i=void 0,rootScene:t,material:r,priority:s,worldUnits:c}){const p=(0,E.z)(T=>T.scene),h=(0,E.z)(T=>T.setEvents),g=ec(),y=ec();d.useLayoutEffect(()=>{p.matrixAutoUpdate=!1},[]),d.useEffect(()=>{i!==void 0&&h({enabled:i})},[i]);const[_,b]=d.useMemo(()=>{const T={value:0};return[new jp(new o.ShaderMaterial({uniforms:{a:{value:g.texture},b:{value:y.texture},blend:T},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <encodings_fragment>
          }`})),T]},[]);return(0,E.A)(T=>{var R;let F=r==null||(R=r.current)==null?void 0:R.__r3f.parent;if(F){if(c)p.matrixWorld.identity();else{var G;s&&((G=r.current)==null?void 0:G.blend)===1&&F.updateWorldMatrix(!0,!1),p.matrixWorld.copy(F.matrixWorld)}if(s){var L,O,P;((L=r.current)==null?void 0:L.blend)>0&&((O=r.current)==null?void 0:O.blend)<1?(b.value=r.current.blend,T.gl.setRenderTarget(g),T.gl.render(p,T.camera),T.gl.setRenderTarget(y),T.gl.render(t,T.camera),T.gl.setRenderTarget(null),_.render(T.gl)):((P=r.current)==null?void 0:P.blend)===1&&T.gl.render(p,T.camera)}}},s),d.createElement(d.Fragment,null)}const LR=(i,t,r)=>{let s=new o.WebGLRenderTarget(i,t,{minFilter:o.LinearMipmapLinearFilter,magFilter:o.LinearFilter,type:o.FloatType,format:o.RedFormat,generateMipmaps:!0}),c=new o.WebGLRenderTarget(i,t,{minFilter:o.NearestFilter,magFilter:o.NearestFilter}),p=new o.WebGLRenderTarget(i,t,{minFilter:o.NearestFilter,magFilter:o.NearestFilter}),h=new o.WebGLRenderTarget(i,t,{minFilter:o.NearestFilter,magFilter:o.NearestFilter}),g=new o.WebGLRenderTarget(i,t,{minFilter:o.NearestFilter,magFilter:o.NearestFilter}),y=new o.WebGLRenderTarget(i,t,{minFilter:o.NearestFilter,magFilter:o.NearestFilter,type:o.FloatType,format:o.RedFormat}),_=new o.WebGLRenderTarget(i,t,{minFilter:o.NearestFilter,magFilter:o.NearestFilter,type:o.FloatType,format:o.RedFormat});const b=new jp(new o.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),T=new jp(new o.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),R=new jp(new o.ShaderMaterial({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/i}, ${1/t}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),F=new jp(new o.ShaderMaterial({uniforms:{tex:{value:null},size:{value:new o.Vector2(i,t)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),G=new jp(new o.ShaderMaterial({uniforms:{inside:{value:_.texture},outside:{value:y.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return L=>{let O=s;L.minFilter=o.NearestFilter,L.magFilter=o.NearestFilter,b.material.uniforms.tex.value=L,r.setRenderTarget(c),b.render(r);const P=Math.ceil(Math.log(Math.max(i,t))/Math.log(2));let D=c,z=null;for(let H=0;H<P;H++){const Q=Math.pow(2,P-H-1);z=D===c?h:c,R.material.uniforms.level.value=H,R.material.uniforms.maxSteps.value=P,R.material.uniforms.offset.value=Q,R.material.uniforms.tex.value=D.texture,r.setRenderTarget(z),R.render(r),D=z}r.setRenderTarget(y),F.material.uniforms.tex.value=z.texture,F.render(r),T.material.uniforms.tex.value=L,r.setRenderTarget(p),T.render(r),D=p;for(let H=0;H<P;H++){const Q=Math.pow(2,P-H-1);z=D===p?g:p,R.material.uniforms.level.value=H,R.material.uniforms.maxSteps.value=P,R.material.uniforms.offset.value=Q,R.material.uniforms.tex.value=D.texture,r.setRenderTarget(z),R.render(r),D=z}return r.setRenderTarget(_),F.material.uniforms.tex.value=z.texture,F.render(r),r.setRenderTarget(O),G.material.uniforms.tex.value=L,G.render(r),r.setRenderTarget(null),O}};var kR=A(25108);const zR=i=>i&&i.isOrthographicCamera,pS=new o.Color;function uS(i){return"top"in i}function GR(i,t){const{right:r,top:s,left:c,bottom:p,width:h,height:g}=t,y=t.bottom<0||s>i.height||r<0||t.left>i.width;if(uS(i)){const T=i.top+i.height-p,R=c-i.left;return{position:{width:h,height:g,left:R,top:s,bottom:T,right:r},isOffscreen:y}}const _=i.height-p;return{position:{width:h,height:g,top:s,left:c,bottom:_,right:r},isOffscreen:y}}function UR({canvasSize:i,scene:t,index:r,children:s,frames:c,rect:p,track:h}){const g=(0,E.z)(R=>R.get),y=(0,E.z)(R=>R.camera),_=(0,E.z)(R=>R.scene),b=(0,E.z)(R=>R.setEvents);let T=0;return(0,E.A)(R=>{if(c===1/0||T<=c){var F;p.current=(F=h.current)==null?void 0:F.getBoundingClientRect(),T++}if(p.current){const{position:{left:G,bottom:L,width:O,height:P},isOffscreen:D}=GR(i,p.current),z=O/P;zR(y)?(y.left!==O/-2||y.right!==O/2||y.top!==P/2||y.bottom!==P/-2)&&(Object.assign(y,{left:O/-2,right:O/2,top:P/2,bottom:P/-2}),y.updateProjectionMatrix()):y.aspect!==z&&(y.aspect=z,y.updateProjectionMatrix()),R.gl.setViewport(G,L,O,P),R.gl.setScissor(G,L,O,P),R.gl.setScissorTest(!0),D?(R.gl.getClearColor(pS),R.gl.setClearColor(pS,R.gl.getClearAlpha()),R.gl.clear(!0,!0)):R.gl.render(s?_:t,y),R.gl.setScissorTest(!0)}},r),d.useEffect(()=>{const R=g().events.connected;return b({connected:h.current}),()=>b({connected:R})},[]),d.useEffect(()=>{uS(i)||kR.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),d.createElement(d.Fragment,null,s)}const NR=({track:i,index:t=1,frames:r=1/0,children:s})=>{var c,p;const h=d.useRef(null),{size:g,scene:y}=(0,E.z)(),[_]=d.useState(()=>new o.Scene),b=d.useCallback((F,G)=>{if(h.current&&i.current&&F.target===i.current){const{width:L,height:O,left:P,top:D}=h.current,z=F.clientX-P,H=F.clientY-D;G.pointer.set(z/L*2-1,-(H/O)*2+1),G.raycaster.setFromCamera(G.pointer,G.camera)}},[h,i]),[T,R]=d.useReducer(()=>!0,!1);return d.useEffect(()=>{var F;h.current=(F=i.current)==null?void 0:F.getBoundingClientRect(),R()},[i]),d.createElement(d.Fragment,null,T&&(0,E.g)(d.createElement(UR,{canvasSize:g,frames:r,scene:y,track:i,rect:h,index:t},s,d.createElement("group",{onPointerOver:()=>null})),_,{events:{compute:b,priority:t},size:{width:(c=h.current)==null?void 0:c.width,height:(p=h.current)==null?void 0:p.height}}))},Q2=d.createContext(null),X2=new o.Vector3,dS=new o.Vector3,HR=(i,t,r,s)=>{const c=t.dot(t),p=t.dot(i)-t.dot(r),h=t.dot(s);return h===0?-p/c:(X2.copy(s).multiplyScalar(c/h).sub(t),dS.copy(s).multiplyScalar(p/h).add(r).sub(i),-X2.dot(dS)/X2.dot(X2))},jR=new o.Vector3(0,1,0),hS=new o.Matrix4,wb=({direction:i,axis:t})=>{const{translation:r,translationLimits:s,annotations:c,annotationsClass:p,depthTest:h,scale:g,lineWidth:y,fixed:_,axisColors:b,hoveredColor:T,opacity:R,onDragStart:F,onDrag:G,onDragEnd:L,userData:O}=d.useContext(Q2),P=(0,E.z)(Ie=>Ie.controls),D=d.useRef(null),z=d.useRef(null),H=d.useRef(null),Q=d.useRef(0),[W,Y]=d.useState(!1),K=d.useCallback(Ie=>{c&&(D.current.innerText=`${r.current[t].toFixed(2)}`,D.current.style.display="block"),Ie.stopPropagation();const Ne=new o.Matrix4().extractRotation(z.current.matrixWorld),Le=Ie.point.clone(),Ye=new o.Vector3().setFromMatrixPosition(z.current.matrixWorld),Ce=i.clone().applyMatrix4(Ne).normalize();H.current={clickPoint:Le,dir:Ce},Q.current=r.current[t],F({component:"Arrow",axis:t,origin:Ye,directions:[Ce]}),P&&(P.enabled=!1),Ie.target.setPointerCapture(Ie.pointerId)},[c,i,P,F,r,t]),ie=d.useCallback(Ie=>{if(Ie.stopPropagation(),W||Y(!0),H.current){const{clickPoint:Ne,dir:Le}=H.current,[Ye,Ce]=(s==null?void 0:s[t])||[void 0,void 0];let Ee=HR(Ne,Le,Ie.ray.origin,Ie.ray.direction);Ye!==void 0&&(Ee=Math.max(Ee,Ye-Q.current)),Ce!==void 0&&(Ee=Math.min(Ee,Ce-Q.current)),r.current[t]=Q.current+Ee,c&&(D.current.innerText=`${r.current[t].toFixed(2)}`),hS.makeTranslation(Le.x*Ee,Le.y*Ee,Le.z*Ee),G(hS)}},[c,G,W,r,s,t]),ce=d.useCallback(Ie=>{c&&(D.current.style.display="none"),Ie.stopPropagation(),H.current=null,L(),P&&(P.enabled=!0),Ie.target.releasePointerCapture(Ie.pointerId)},[c,P,L]),ge=d.useCallback(Ie=>{Ie.stopPropagation(),Y(!1)},[]),{cylinderLength:ae,coneWidth:xe,coneLength:ve,matrixL:Be}=d.useMemo(()=>{const Ie=_?y/g*1.6:g/20,Ne=_?.2:g/5,Le=_?1-Ne:g-Ne,Ye=new o.Quaternion().setFromUnitVectors(jR,i.clone().normalize()),Ce=new o.Matrix4().makeRotationFromQuaternion(Ye);return{cylinderLength:Le,coneWidth:Ie,coneLength:Ne,matrixL:Ce}},[i,g,y,_]),Ue=W?T:b[t];return d.createElement("group",{ref:z},d.createElement("group",{matrix:Be,matrixAutoUpdate:!1,onPointerDown:K,onPointerMove:ie,onPointerUp:ce,onPointerOut:ge},c&&d.createElement(pt,{position:[0,-ve,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:D})),d.createElement("mesh",{visible:!1,position:[0,(ae+ve)/2,0],userData:O},d.createElement("cylinderGeometry",{args:[xe*1.4,xe*1.4,ae+ve,8,1]})),d.createElement(Gp,{transparent:!0,raycast:()=>null,depthTest:h,points:[0,0,0,0,ae,0],lineWidth:y,color:Ue,opacity:R,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),d.createElement("mesh",{raycast:()=>null,position:[0,ae+ve/2,0],renderOrder:500},d.createElement("coneGeometry",{args:[xe,ve,24,1]}),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:h,color:Ue,opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},WR=(i,t,r)=>{const s=Math.abs(i.x)>=Math.abs(i.y)&&Math.abs(i.x)>=Math.abs(i.z)?0:Math.abs(i.y)>=Math.abs(i.x)&&Math.abs(i.y)>=Math.abs(i.z)?1:2,c=[0,1,2].sort((G,L)=>Math.abs(t.getComponent(L))-Math.abs(t.getComponent(G))),p=s===c[0]?c[1]:c[0],h=i.getComponent(s),g=i.getComponent(p),y=t.getComponent(s),_=t.getComponent(p),b=r.getComponent(s),R=(r.getComponent(p)-b*(g/h))/(_-y*(g/h));return[(b-R*y)/h,R]},K2=new o.Ray,Y2=new o.Vector3,fS=new o.Matrix4,Tb=({dir1:i,dir2:t,axis:r})=>{const{translation:s,translationLimits:c,annotations:p,annotationsClass:h,depthTest:g,scale:y,lineWidth:_,fixed:b,axisColors:T,hoveredColor:R,opacity:F,onDragStart:G,onDrag:L,onDragEnd:O,userData:P}=d.useContext(Q2),D=(0,E.z)(Le=>Le.controls),z=d.useRef(null),H=d.useRef(null),Q=d.useRef(null),W=d.useRef(0),Y=d.useRef(0),[K,ie]=d.useState(!1),ce=d.useCallback(Le=>{p&&(z.current.innerText=`${s.current[(r+1)%3].toFixed(2)}, ${s.current[(r+2)%3].toFixed(2)}`,z.current.style.display="block"),Le.stopPropagation();const Ye=Le.point.clone(),Ce=new o.Vector3().setFromMatrixPosition(H.current.matrixWorld),Ee=new o.Vector3().setFromMatrixColumn(H.current.matrixWorld,0).normalize(),_e=new o.Vector3().setFromMatrixColumn(H.current.matrixWorld,1).normalize(),oe=new o.Vector3().setFromMatrixColumn(H.current.matrixWorld,2).normalize(),me=new o.Plane().setFromNormalAndCoplanarPoint(oe,Ce);Q.current={clickPoint:Ye,e1:Ee,e2:_e,plane:me},W.current=s.current[(r+1)%3],Y.current=s.current[(r+2)%3],G({component:"Slider",axis:r,origin:Ce,directions:[Ee,_e,oe]}),D&&(D.enabled=!1),Le.target.setPointerCapture(Le.pointerId)},[p,D,G,r]),ge=d.useCallback(Le=>{if(Le.stopPropagation(),K||ie(!0),Q.current){const{clickPoint:Ye,e1:Ce,e2:Ee,plane:_e}=Q.current,[oe,me]=(c==null?void 0:c[(r+1)%3])||[void 0,void 0],[Te,ye]=(c==null?void 0:c[(r+2)%3])||[void 0,void 0];K2.copy(Le.ray),K2.intersectPlane(_e,Y2),K2.direction.negate(),K2.intersectPlane(_e,Y2),Y2.sub(Ye);let[ze,Mt]=WR(Ce,Ee,Y2);oe!==void 0&&(ze=Math.max(ze,oe-W.current)),me!==void 0&&(ze=Math.min(ze,me-W.current)),Te!==void 0&&(Mt=Math.max(Mt,Te-Y.current)),ye!==void 0&&(Mt=Math.min(Mt,ye-Y.current)),s.current[(r+1)%3]=W.current+ze,s.current[(r+2)%3]=Y.current+Mt,p&&(z.current.innerText=`${s.current[(r+1)%3].toFixed(2)}, ${s.current[(r+2)%3].toFixed(2)}`),fS.makeTranslation(ze*Ce.x+Mt*Ee.x,ze*Ce.y+Mt*Ee.y,ze*Ce.z+Mt*Ee.z),L(fS)}},[p,L,K,s,c,r]),ae=d.useCallback(Le=>{p&&(z.current.style.display="none"),Le.stopPropagation(),Q.current=null,O(),D&&(D.enabled=!0),Le.target.releasePointerCapture(Le.pointerId)},[p,D,O]),xe=d.useCallback(Le=>{Le.stopPropagation(),ie(!1)},[]),ve=d.useMemo(()=>{const Le=i.clone().normalize(),Ye=t.clone().normalize();return new o.Matrix4().makeBasis(Le,Ye,Le.clone().cross(Ye))},[i,t]),Be=b?1/7:y/7,Ue=b?.225:y*.225,Ie=K?R:T[r],Ne=d.useMemo(()=>[new o.Vector3(0,0,0),new o.Vector3(0,Ue,0),new o.Vector3(Ue,Ue,0),new o.Vector3(Ue,0,0),new o.Vector3(0,0,0)],[Ue]);return d.createElement("group",{ref:H,matrix:ve,matrixAutoUpdate:!1},p&&d.createElement(pt,{position:[0,0,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:h,ref:z})),d.createElement("group",{position:[Be*1.7,Be*1.7,0]},d.createElement("mesh",{visible:!0,onPointerDown:ce,onPointerMove:ge,onPointerUp:ae,onPointerOut:xe,scale:Ue,userData:P},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:g,color:Ie,polygonOffset:!0,polygonOffsetFactor:-10,side:o.DoubleSide,fog:!1})),d.createElement(Gp,{position:[-Ue/2,-Ue/2,0],transparent:!0,depthTest:g,points:Ne,lineWidth:_,color:Ie,opacity:F,polygonOffset:!0,polygonOffsetFactor:-10,userData:P,fog:!1})))};var VR=A(7378),QR=A.n(VR);const Bb=new o.Vector3,Rb=new o.Vector3,Ib=i=>i*180/Math.PI,XR=i=>i*Math.PI/180,KR=(i,t,r,s,c)=>{Bb.copy(i).sub(r),Rb.copy(t).sub(r);const p=s.dot(s),h=c.dot(c),g=Bb.dot(s)/p,y=Bb.dot(c)/h,_=Rb.dot(s)/p,b=Rb.dot(c)/h,T=Math.atan2(y,g);return Math.atan2(b,_)-T},YR=(i,t)=>{let r=Math.floor(i/t);return r=r<0?r+1:r,i-r*t},gS=i=>{let t=YR(i,2*Math.PI);return Math.abs(t)<1e-6?0:(t<0&&(t+=2*Math.PI),t)},J2=new o.Matrix4,mS=new o.Vector3,q2=new o.Ray,Fb=new o.Vector3,Ob=({dir1:i,dir2:t,axis:r})=>{const{rotationLimits:s,annotations:c,annotationsClass:p,depthTest:h,scale:g,lineWidth:y,fixed:_,axisColors:b,hoveredColor:T,opacity:R,onDragStart:F,onDrag:G,onDragEnd:L,userData:O}=d.useContext(Q2),P=(0,E.z)(Ue=>Ue.controls),D=d.useRef(null),z=d.useRef(null),H=d.useRef(0),Q=d.useRef(0),W=d.useRef(null),[Y,K]=d.useState(!1),ie=d.useCallback(Ue=>{c&&(D.current.innerText=`${Ib(Q.current).toFixed(0)}\xBA`,D.current.style.display="block"),Ue.stopPropagation();const Ie=Ue.point.clone(),Ne=new o.Vector3().setFromMatrixPosition(z.current.matrixWorld),Le=new o.Vector3().setFromMatrixColumn(z.current.matrixWorld,0).normalize(),Ye=new o.Vector3().setFromMatrixColumn(z.current.matrixWorld,1).normalize(),Ce=new o.Vector3().setFromMatrixColumn(z.current.matrixWorld,2).normalize(),Ee=new o.Plane().setFromNormalAndCoplanarPoint(Ce,Ne);W.current={clickPoint:Ie,origin:Ne,e1:Le,e2:Ye,normal:Ce,plane:Ee},F({component:"Rotator",axis:r,origin:Ne,directions:[Le,Ye,Ce]}),P&&(P.enabled=!1),Ue.target.setPointerCapture(Ue.pointerId)},[c,P,F,r]),ce=d.useCallback(Ue=>{if(Ue.stopPropagation(),Y||K(!0),W.current){const{clickPoint:Ie,origin:Ne,e1:Le,e2:Ye,normal:Ce,plane:Ee}=W.current,[_e,oe]=(s==null?void 0:s[r])||[void 0,void 0];q2.copy(Ue.ray),q2.intersectPlane(Ee,Fb),q2.direction.negate(),q2.intersectPlane(Ee,Fb);let me=KR(Ie,Fb,Ne,Le,Ye),Te=Ib(me);Ue.shiftKey&&(Te=Math.round(Te/10)*10,me=XR(Te)),_e!==void 0&&oe!==void 0&&oe-_e<2*Math.PI?(me=gS(me),me=me>Math.PI?me-2*Math.PI:me,me=QR()(me,_e-H.current,oe-H.current),Q.current=H.current+me):(Q.current=gS(H.current+me),Q.current=Q.current>Math.PI?Q.current-2*Math.PI:Q.current),c&&(Te=Ib(Q.current),D.current.innerText=`${Te.toFixed(0)}\xBA`),J2.makeRotationAxis(Ce,me),mS.copy(Ne).applyMatrix4(J2).sub(Ne).negate(),J2.setPosition(mS),G(J2)}},[c,G,Y,s,r]),ge=d.useCallback(Ue=>{c&&(D.current.style.display="none"),Ue.stopPropagation(),H.current=Q.current,W.current=null,L(),P&&(P.enabled=!0),Ue.target.releasePointerCapture(Ue.pointerId)},[c,P,L]),ae=d.useCallback(Ue=>{Ue.stopPropagation(),K(!1)},[]),xe=d.useMemo(()=>{const Ue=i.clone().normalize(),Ie=t.clone().normalize();return new o.Matrix4().makeBasis(Ue,Ie,Ue.clone().cross(Ie))},[i,t]),ve=_?.65:g*.65,Be=d.useMemo(()=>{const Ie=[];for(let Ne=0;Ne<=32;Ne++){const Le=Ne*(Math.PI/2)/32;Ie.push(new o.Vector3(Math.cos(Le)*ve,Math.sin(Le)*ve,0))}return Ie},[ve]);return d.createElement("group",{ref:z,onPointerDown:ie,onPointerMove:ce,onPointerUp:ge,onPointerOut:ae,matrix:xe,matrixAutoUpdate:!1},c&&d.createElement(pt,{position:[ve,ve,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:D})),d.createElement(Gp,{points:Be,lineWidth:y*4,visible:!1,userData:O}),d.createElement(Gp,{transparent:!0,raycast:()=>null,depthTest:h,points:Be,lineWidth:y,color:Y?T:b[r],opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},JR=new o.Vector3,qR=new o.Vector3,ZR=new o.Vector3,$R=(i,t,r)=>{const s=r.width/2,c=r.height/2;t.updateMatrixWorld(!1);const p=i.project(t);return p.x=p.x*s+s,p.y=-(p.y*c)+c,p},eI=(i,t,r,s=1)=>{const c=JR.set(i.x/r.width*2-1,-(i.y/r.height)*2+1,s);return c.unproject(t),c},AS=(i,t,r,s)=>{const c=$R(ZR.copy(i),r,s);let p=0;for(let h=0;h<2;++h){const g=qR.copy(c).setComponent(h,c.getComponent(h)+t),y=eI(g,r,s,g.z);p=Math.max(p,i.distanceTo(y))}return p},yS=new o.Matrix4,vS=new o.Matrix4,_S=new o.Matrix4,Z2=new o.Matrix4,Db=new o.Matrix4,t1=new o.Matrix4,ES=new o.Matrix4,bS=new o.Matrix4,n1=new o.Box3,Pb=new o.Box3,MS=new o.Vector3,xS=new o.Vector3,CS=new o.Vector3,SS=new o.Vector3,ty=new o.Vector3(1,0,0),ny=new o.Vector3(0,1,0),ry=new o.Vector3(0,0,1),tI=d.forwardRef((ae,ge)=>{var xe=ae,{matrix:i,onDragStart:t,onDrag:r,onDragEnd:s,autoTransform:c=!0,anchor:p,disableAxes:h=!1,disableSliders:g=!1,disableRotations:y=!1,activeAxes:_=[!0,!0,!0],offset:b=[0,0,0],rotation:T=[0,0,0],scale:R=1,lineWidth:F=4,fixed:G=!1,translationLimits:L,rotationLimits:O,depthTest:P=!0,axisColors:D=["#ff2060","#20df80","#2080ff"],hoveredColor:z="#ffff40",annotations:H=!1,annotationsClass:Q,opacity:W=1,visible:Y=!0,userData:K,children:ie}=xe,ce=An(xe,["matrix","onDragStart","onDrag","onDragEnd","autoTransform","anchor","disableAxes","disableSliders","disableRotations","activeAxes","offset","rotation","scale","lineWidth","fixed","translationLimits","rotationLimits","depthTest","axisColors","hoveredColor","annotations","annotationsClass","opacity","visible","userData","children"]);const ve=(0,E.z)(Ee=>Ee.invalidate),Be=d.useRef(null),Ue=d.useRef(null),Ie=d.useRef(null),Ne=d.useRef(null),Le=d.useRef([0,0,0]);d.useLayoutEffect(()=>{p&&(Ne.current.updateWorldMatrix(!0,!0),Z2.copy(Ne.current.matrixWorld).invert(),n1.makeEmpty(),Ne.current.traverse(Ee=>{Ee.geometry&&(Ee.geometry.boundingBox||Ee.geometry.computeBoundingBox(),t1.copy(Ee.matrixWorld).premultiply(Z2),Pb.copy(Ee.geometry.boundingBox),Pb.applyMatrix4(t1),n1.union(Pb))}),MS.copy(n1.max).add(n1.min).multiplyScalar(.5),xS.copy(n1.max).sub(n1.min).multiplyScalar(.5),CS.copy(xS).multiply(new o.Vector3(...p)).add(MS),SS.set(...b).add(CS),Ie.current.position.copy(SS),ve())});const Ye=d.useMemo(()=>({onDragStart:Ee=>{yS.copy(Ue.current.matrix),vS.copy(Ue.current.matrixWorld),t&&t(Ee),ve()},onDrag:Ee=>{_S.copy(Be.current.matrixWorld),Z2.copy(_S).invert(),Db.copy(vS).premultiply(Ee),t1.copy(Db).premultiply(Z2),ES.copy(yS).invert(),bS.copy(t1).multiply(ES),c&&Ue.current.matrix.copy(t1),r&&r(t1,bS,Db,Ee),ve()},onDragEnd:()=>{s&&s(),ve()},translation:Le,translationLimits:L,rotationLimits:O,axisColors:D,hoveredColor:z,opacity:W,scale:R,lineWidth:F,fixed:G,depthTest:P,userData:K,annotations:H,annotationsClass:Q}),[t,r,s,Le,L,O,P,R,F,G,...D,z,W,K,c,H,Q]),Ce=new o.Vector3;return(0,E.A)(Ee=>{if(G){const Te=AS(Ie.current.getWorldPosition(Ce),R,Ee.camera,Ee.size);if(Ie.current){var _e,oe,me;(((_e=Ie.current)==null?void 0:_e.scale.x)!==Te||((oe=Ie.current)==null?void 0:oe.scale.y)!==Te||((me=Ie.current)==null?void 0:me.scale.z)!==Te)&&(Ie.current.scale.setScalar(Te),Ee.invalidate())}}}),d.useImperativeHandle(ge,()=>Ue.current,[]),d.useLayoutEffect(()=>{i&&i instanceof o.Matrix4&&(Ue.current.matrix=i)},[i]),d.createElement(Q2.Provider,{value:Ye},d.createElement("group",{ref:Be},d.createElement("group",(0,w.Z)({ref:Ue,matrix:i,matrixAutoUpdate:!1},ce),d.createElement("group",{visible:Y,ref:Ie,position:b,rotation:T},!h&&_[0]&&d.createElement(wb,{axis:0,direction:ty}),!h&&_[1]&&d.createElement(wb,{axis:1,direction:ny}),!h&&_[2]&&d.createElement(wb,{axis:2,direction:ry}),!g&&_[0]&&_[1]&&d.createElement(Tb,{axis:2,dir1:ty,dir2:ny}),!g&&_[0]&&_[2]&&d.createElement(Tb,{axis:1,dir1:ry,dir2:ty}),!g&&_[2]&&_[1]&&d.createElement(Tb,{axis:0,dir1:ny,dir2:ry}),!y&&_[0]&&_[1]&&d.createElement(Ob,{axis:2,dir1:ty,dir2:ny}),!y&&_[0]&&_[2]&&d.createElement(Ob,{axis:1,dir1:ry,dir2:ty}),!y&&_[2]&&_[1]&&d.createElement(Ob,{axis:0,dir1:ny,dir2:ry})),d.createElement("group",{ref:Ne},ie))))})},24121:function(u,n,A){"use strict";A.d(n,{A:function(){return ps},B:function(){return Rt},C:function(){return Io},D:function(){return za},E:function(){return Jt},a:function(){return ft},b:function(){return ds},c:function(){return yr},d:function(){return ll},e:function(){return xt},f:function(){return Kr},g:function(){return gc},h:function(){return Fo},i:function(){return pt},j:function(){return ks},k:function(){return Wi},l:function(){return ho},m:function(){return al},n:function(){return va},o:function(){return Ls},p:function(){return ts},q:function(){return Yi},r:function(){return No},s:function(){return Rr},t:function(){return pe},u:function(){return kt},v:function(){return fp},w:function(){return us},x:function(){return ki},y:function(){return la},z:function(){return ka}});var w=A(99477),d=A(67294),m=A(32576),o=A(14671),E=A(76525),j=A.n(E),ee=A(63840),le=A(58139),q=A(25108),pe=Object.freeze({__proto__:null});const ue={},xt=$e=>void Object.assign(ue,$e);function rt($e,wt){function cn(De,pn,Tt){var ln=pn,{args:et=[],attach:dt}=ln,bt=An(ln,["args","attach"]);let Me=`${De[0].toUpperCase()}${De.slice(1)}`,je;if(De==="primitive"){if(bt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const lt=bt.object;je=ti(lt,{type:De,root:Tt,attach:dt,primitive:!0})}else{const lt=ue[Me];if(!lt)throw new Error(`R3F: ${Me} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(et))throw new Error("R3F: The args prop must be an array!");je=ti(new lt(...et),{type:De,root:Tt,attach:dt,memoizedProps:{args:et}})}return je.__r3f.attach===void 0&&(je instanceof w.BufferGeometry?je.__r3f.attach="geometry":je instanceof w.Material&&(je.__r3f.attach="material")),Me!=="inject"&&hr(je,bt),je}function Fn(De,et){let dt=!1;if(et){var bt,Tt;(bt=et.__r3f)!=null&&bt.attach?Wn(De,et,et.__r3f.attach):et.isObject3D&&De.isObject3D&&(De.add(et),dt=!0),dt||(Tt=De.__r3f)==null||Tt.objects.push(et),et.__r3f||ti(et,{}),et.__r3f.parent=De,Pi(et),Ir(et)}}function On(De,et,dt){let bt=!1;if(et){var Tt,pn;if((Tt=et.__r3f)!=null&&Tt.attach)Wn(De,et,et.__r3f.attach);else if(et.isObject3D&&De.isObject3D){et.parent=De,et.dispatchEvent({type:"added"});const ln=De.children.filter(je=>je!==et),Me=ln.indexOf(dt);De.children=[...ln.slice(0,Me),et,...ln.slice(Me)],bt=!0}bt||(pn=De.__r3f)==null||pn.objects.push(et),et.__r3f||ti(et,{}),et.__r3f.parent=De,Pi(et),Ir(et)}}function lr(De,et,dt=!1){De&&[...De].forEach(bt=>He(et,bt,dt))}function He(De,et,dt){if(et){var bt,Tt,pn;if(et.__r3f&&(et.__r3f.parent=null),(bt=De.__r3f)!=null&&bt.objects&&(De.__r3f.objects=De.__r3f.objects.filter(qt=>qt!==et)),(Tt=et.__r3f)!=null&&Tt.attach)nn(De,et,et.__r3f.attach);else if(et.isObject3D&&De.isObject3D){var ln;De.remove(et),(ln=et.__r3f)!=null&&ln.root&&ni(et.__r3f.root,et)}const je=(pn=et.__r3f)==null?void 0:pn.primitive,lt=dt===void 0?et.dispose!==null&&!je:dt;if(!je){var Me;lr((Me=et.__r3f)==null?void 0:Me.objects,et,lt),lr(et.children,et,lt)}delete et.__r3f,lt&&et.dispose&&et.type!=="Scene"&&(0,ee.unstable_scheduleCallback)(ee.unstable_IdlePriority,()=>{try{et.dispose()}catch(qt){}}),Ir(De)}}function ke(De,et,dt,bt){var Tt;const pn=(Tt=De.__r3f)==null?void 0:Tt.parent;if(!pn)return;const ln=cn(et,dt,De.__r3f.root);if(De.children){for(const Me of De.children)Me.__r3f&&Fn(ln,Me);De.children=De.children.filter(Me=>!Me.__r3f)}De.__r3f.objects.forEach(Me=>Fn(ln,Me)),De.__r3f.objects=[],De.__r3f.autoRemovedBeforeAppend||He(pn,De),ln.parent&&(ln.__r3f.autoRemovedBeforeAppend=!0),Fn(pn,ln),ln.raycast&&ln.__r3f.eventCount&&ln.__r3f.root.getState().internal.interaction.push(ln),[bt,bt.alternate].forEach(Me=>{Me!==null&&(Me.stateNode=ln,Me.ref&&(typeof Me.ref=="function"?Me.ref(ln):Me.ref.current=ln))})}const Fe=()=>q.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:j()({createInstance:cn,removeChild:He,appendChild:Fn,appendInitialChild:Fn,insertBefore:On,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(De,et)=>{if(!et)return;const dt=De.getState().scene;dt.__r3f&&(dt.__r3f.root=De,Fn(dt,et))},removeChildFromContainer:(De,et)=>{et&&He(De.getState().scene,et)},insertInContainerBefore:(De,et,dt)=>{if(!et||!dt)return;const bt=De.getState().scene;bt.__r3f&&On(bt,et,dt)},getRootHostContext:()=>null,getChildHostContext:De=>De,finalizeInitialChildren(De){var et;return!!((et=De==null?void 0:De.__r3f)!=null?et:{}).handlers},prepareUpdate(De,et,dt,bt){var Tt;if(((Tt=De==null?void 0:De.__r3f)!=null?Tt:{}).primitive&&bt.object&&bt.object!==De)return[!0];{const ln=bt,{args:je=[],children:lt}=ln,qt=An(ln,["args","children"]),Me=dt,{args:Cn=[],children:kn}=Me,mr=An(Me,["args","children"]);if(!Array.isArray(je))throw new Error("R3F: the args prop must be an array!");if(je.some((pi,gi)=>pi!==Cn[gi]))return[!0];const Hr=Bn(De,qt,mr,!0);return Hr.changes.length?[!1,Hr]:null}},commitUpdate(De,[et,dt],bt,Tt,pn,ln){et?ke(De,bt,pn,ln):hr(De,dt)},commitMount(De,et,dt,bt){var Tt;const pn=(Tt=De.__r3f)!=null?Tt:{};De.raycast&&pn.handlers&&pn.eventCount&&De.__r3f.root.getState().internal.interaction.push(De)},getPublicInstance:De=>De,prepareForCommit:()=>null,preparePortalMount:De=>ti(De.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(De){var et;const{attach:dt,parent:bt}=(et=De.__r3f)!=null?et:{};dt&&bt&&nn(bt,De,dt),De.isObject3D&&(De.visible=!1),Ir(De)},unhideInstance(De,et){var dt;const{attach:bt,parent:Tt}=(dt=De.__r3f)!=null?dt:{};bt&&Tt&&Wn(Tt,De,bt),(De.isObject3D&&et.visible==null||et.visible)&&(De.visible=!0),Ir(De)},createTextInstance:Fe,hideTextInstance:Fe,unhideTextInstance:Fe,getCurrentEventPriority:()=>wt?wt():m.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&Dn.fun(performance.now)?performance.now:Dn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Dn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Dn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:hr}}var We,st;const yt=$e=>"colorSpace"in $e||"outputColorSpace"in $e,St=()=>{var $e;return($e=ue.ColorManagement)!=null?$e:null},_t=$e=>$e&&$e.isOrthographicCamera,pt=$e=>$e&&$e.hasOwnProperty("current"),ft=typeof window!="undefined"&&((We=window.document)!=null&&We.createElement||((st=window.navigator)==null?void 0:st.product)==="ReactNative")?d.useLayoutEffect:d.useEffect;function kt($e){const wt=d.useRef($e);return ft(()=>void(wt.current=$e),[$e]),wt}function Rt({set:$e}){return ft(()=>($e(new Promise(()=>null)),()=>$e(!1)),[$e]),null}class Jt extends d.Component{constructor(...wt){super(...wt),this.state={error:!1}}componentDidCatch(wt){this.props.set(wt)}render(){return this.state.error?null:this.props.children}}Jt.getDerivedStateFromError=()=>({error:!0});const Lt="__default",vn=new Map,nr=$e=>$e&&!!$e.memoized&&!!$e.changes;function br($e){var wt;const cn=typeof window!="undefined"?(wt=window.devicePixelRatio)!=null?wt:2:1;return Array.isArray($e)?Math.min(Math.max($e[0],cn),$e[1]):$e}const Rr=$e=>{var wt;return(wt=$e.__r3f)==null?void 0:wt.root.getState()},Dn={obj:$e=>$e===Object($e)&&!Dn.arr($e)&&typeof $e!="function",fun:$e=>typeof $e=="function",str:$e=>typeof $e=="string",num:$e=>typeof $e=="number",boo:$e=>typeof $e=="boolean",und:$e=>$e===void 0,arr:$e=>Array.isArray($e),equ($e,wt,{arrays:cn="shallow",objects:Fn="reference",strict:On=!0}={}){if(typeof $e!=typeof wt||!!$e!=!!wt)return!1;if(Dn.str($e)||Dn.num($e))return $e===wt;const lr=Dn.obj($e);if(lr&&Fn==="reference")return $e===wt;const He=Dn.arr($e);if(He&&cn==="reference")return $e===wt;if((He||lr)&&$e===wt)return!0;let ke;for(ke in $e)if(!(ke in wt))return!1;if(lr&&cn==="shallow"&&Fn==="shallow"){for(ke in On?wt:$e)if(!Dn.equ($e[ke],wt[ke],{strict:On,objects:"reference"}))return!1}else for(ke in On?wt:$e)if($e[ke]!==wt[ke])return!1;if(Dn.und(ke)){if(He&&$e.length===0&&wt.length===0||lr&&Object.keys($e).length===0&&Object.keys(wt).length===0)return!0;if($e!==wt)return!1}return!0}};function Di($e){const wt={nodes:{},materials:{}};return $e&&$e.traverse(cn=>{cn.name&&(wt.nodes[cn.name]=cn),cn.material&&!wt.materials[cn.material.name]&&(wt.materials[cn.material.name]=cn.material)}),wt}function Wi($e){$e.dispose&&$e.type!=="Scene"&&$e.dispose();for(const wt in $e)wt.dispose==null||wt.dispose(),delete $e[wt]}function ti($e,wt){const cn=$e;return cn.__r3f=jn({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},wt),$e}function vi($e,wt){let cn=$e;if(wt.includes("-")){const Fn=wt.split("-"),On=Fn.pop();return cn=Fn.reduce((lr,He)=>lr[He],$e),{target:cn,key:On}}else return{target:cn,key:wt}}const cs=/-\d+$/;function Wn($e,wt,cn){if(Dn.str(cn)){if(cs.test(cn)){const lr=cn.replace(cs,""),{target:He,key:ke}=vi($e,lr);Array.isArray(He[ke])||(He[ke]=[])}const{target:Fn,key:On}=vi($e,cn);wt.__r3f.previousAttach=Fn[On],Fn[On]=wt}else wt.__r3f.previousAttach=cn($e,wt)}function nn($e,wt,cn){var Fn,On;if(Dn.str(cn)){const{target:lr,key:He}=vi($e,cn),ke=wt.__r3f.previousAttach;ke===void 0?delete lr[He]:lr[He]=ke}else(Fn=wt.__r3f)==null||Fn.previousAttach==null||Fn.previousAttach($e,wt);(On=wt.__r3f)==null||delete On.previousAttach}function Bn($e,De,dt={},at=!1){var et=De,{children:wt,key:cn,ref:Fn}=et,On=An(et,["children","key","ref"]);var bt=dt,{children:lr,key:He,ref:ke}=bt,Fe=An(bt,["children","key","ref"]);var Tt;const pn=(Tt=$e==null?void 0:$e.__r3f)!=null?Tt:{},ln=Object.entries(On),Me=[];if(at){const lt=Object.keys(Fe);for(let qt=0;qt<lt.length;qt++)On.hasOwnProperty(lt[qt])||ln.unshift([lt[qt],Lt+"remove"])}ln.forEach(([lt,qt])=>{var Cn;if((Cn=$e.__r3f)!=null&&Cn.primitive&&lt==="object"||Dn.equ(qt,Fe[lt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(lt))return Me.push([lt,qt,!0,[]]);let kn=[];lt.includes("-")&&(kn=lt.split("-")),Me.push([lt,qt,!1,kn]);for(const mr in On){const Hr=On[mr];mr.startsWith(`${lt}-`)&&Me.push([mr,Hr,!1,mr.split("-")])}});const je=jn({},On);return pn.memoizedProps&&pn.memoizedProps.args&&(je.args=pn.memoizedProps.args),pn.memoizedProps&&pn.memoizedProps.attach&&(je.attach=pn.memoizedProps.attach),{memoized:je,changes:Me}}function hr($e,wt){var cn,Fn,On;const lr=(cn=$e.__r3f)!=null?cn:{},He=lr.root,ke=(Fn=He==null||He.getState==null?void 0:He.getState())!=null?Fn:{},{memoized:Fe,changes:at}=nr(wt)?wt:Bn($e,wt),De=lr.eventCount;$e.__r3f&&($e.__r3f.memoizedProps=Fe);for(let dt=0;dt<at.length;dt++){let[bt,Tt,pn,ln]=at[dt];if(yt($e)){const qt="srgb",Cn="srgb-linear";bt==="encoding"?(bt="colorSpace",Tt=Tt===3001?qt:Cn):bt==="outputEncoding"&&(bt="outputColorSpace",Tt=Tt===3001?qt:Cn)}let Me=$e,je=Me[bt];if(ln.length&&(je=ln.reduce((lt,qt)=>lt[qt],$e),!(je&&je.set))){const[lt,...qt]=ln.reverse();Me=qt.reverse().reduce((Cn,kn)=>Cn[kn],$e),bt=lt}if(Tt===Lt+"remove")if(Me.constructor){let lt=vn.get(Me.constructor);lt||(lt=new Me.constructor,vn.set(Me.constructor,lt)),Tt=lt[bt]}else Tt=0;if(pn)Tt?lr.handlers[bt]=Tt:delete lr.handlers[bt],lr.eventCount=Object.keys(lr.handlers).length;else if(je&&je.set&&(je.copy||je instanceof w.Layers)){if(Array.isArray(Tt))je.fromArray?je.fromArray(Tt):je.set(...Tt);else if(je.copy&&Tt&&Tt.constructor&&je.constructor===Tt.constructor)je.copy(Tt);else if(Tt!==void 0){const lt=je instanceof w.Color;!lt&&je.setScalar?je.setScalar(Tt):je instanceof w.Layers&&Tt instanceof w.Layers?je.mask=Tt.mask:je.set(Tt),!St()&&!ke.linear&&lt&&je.convertSRGBToLinear()}}else if(Me[bt]=Tt,Me[bt]instanceof w.Texture&&Me[bt].format===w.RGBAFormat&&Me[bt].type===w.UnsignedByteType){const lt=Me[bt];yt(lt)&&yt(ke.gl)?lt.colorSpace=ke.gl.outputColorSpace:lt.encoding=ke.gl.outputEncoding}Ir($e)}if(lr.parent&&ke.internal&&$e.raycast&&De!==lr.eventCount){const dt=ke.internal.interaction.indexOf($e);dt>-1&&ke.internal.interaction.splice(dt,1),lr.eventCount&&ke.internal.interaction.push($e)}return!(at.length===1&&at[0][0]==="onUpdate")&&at.length&&(On=$e.__r3f)!=null&&On.parent&&Pi($e),$e}function Ir($e){var wt,cn;const Fn=(wt=$e.__r3f)==null||(cn=wt.root)==null||cn.getState==null?void 0:cn.getState();Fn&&Fn.internal.frames===0&&Fn.invalidate()}function Pi($e){$e.onUpdate==null||$e.onUpdate($e)}function Tn($e,wt){$e.manual||(_t($e)?($e.left=wt.width/-2,$e.right=wt.width/2,$e.top=wt.height/2,$e.bottom=wt.height/-2):$e.aspect=wt.width/wt.height,$e.updateProjectionMatrix(),$e.updateMatrixWorld())}function Sn($e){return($e.eventObject||$e.object).uuid+"/"+$e.index+$e.instanceId}function Ln(){var $e;const wt=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!wt)return m.DefaultEventPriority;switch(($e=wt.event)==null?void 0:$e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return m.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return m.ContinuousEventPriority;default:return m.DefaultEventPriority}}function gr($e,wt,cn,Fn){const On=cn.get(wt);On&&(cn.delete(wt),cn.size===0&&($e.delete(Fn),On.target.releasePointerCapture(Fn)))}function ni($e,wt){const{internal:cn}=$e.getState();cn.interaction=cn.interaction.filter(Fn=>Fn!==wt),cn.initialHits=cn.initialHits.filter(Fn=>Fn!==wt),cn.hovered.forEach((Fn,On)=>{(Fn.eventObject===wt||Fn.object===wt)&&cn.hovered.delete(On)}),cn.capturedMap.forEach((Fn,On)=>{gr(cn.capturedMap,wt,Fn,On)})}function yr($e){function wt(Fe){const{internal:at}=$e.getState(),De=Fe.offsetX-at.initialClick[0],et=Fe.offsetY-at.initialClick[1];return Math.round(Math.sqrt(De*De+et*et))}function cn(Fe){return Fe.filter(at=>["Move","Over","Enter","Out","Leave"].some(De=>{var et;return(et=at.__r3f)==null?void 0:et.handlers["onPointer"+De]}))}function Fn(Fe,at){const De=$e.getState(),et=new Set,dt=[],bt=at?at(De.internal.interaction):De.internal.interaction;for(let Me=0;Me<bt.length;Me++){const je=Rr(bt[Me]);je&&(je.raycaster.camera=void 0)}De.previousRoot||De.events.compute==null||De.events.compute(Fe,De);function Tt(Me){const je=Rr(Me);if(!je||!je.events.enabled||je.raycaster.camera===null)return[];if(je.raycaster.camera===void 0){var lt;je.events.compute==null||je.events.compute(Fe,je,(lt=je.previousRoot)==null?void 0:lt.getState()),je.raycaster.camera===void 0&&(je.raycaster.camera=null)}return je.raycaster.camera?je.raycaster.intersectObject(Me,!0):[]}let pn=bt.flatMap(Tt).sort((Me,je)=>{const lt=Rr(Me.object),qt=Rr(je.object);return!lt||!qt?Me.distance-je.distance:qt.events.priority-lt.events.priority||Me.distance-je.distance}).filter(Me=>{const je=Sn(Me);return et.has(je)?!1:(et.add(je),!0)});De.events.filter&&(pn=De.events.filter(pn,De));for(const Me of pn){let je=Me.object;for(;je;){var ln;(ln=je.__r3f)!=null&&ln.eventCount&&dt.push(Xo(jn({},Me),{eventObject:je})),je=je.parent}}if("pointerId"in Fe&&De.internal.capturedMap.has(Fe.pointerId))for(let Me of De.internal.capturedMap.get(Fe.pointerId).values())et.has(Sn(Me.intersection))||dt.push(Me.intersection);return dt}function On(Fe,at,De,et){const dt=$e.getState();if(Fe.length){const bt={stopped:!1};for(const Tt of Fe){const pn=Rr(Tt.object)||dt,{raycaster:ln,pointer:Me,camera:je,internal:lt}=pn,qt=new w.Vector3(Me.x,Me.y,0).unproject(je),Cn=gi=>{var Qn,qr;return(Qn=(qr=lt.capturedMap.get(gi))==null?void 0:qr.has(Tt.eventObject))!=null?Qn:!1},kn=gi=>{const Qn={intersection:Tt,target:at.target};lt.capturedMap.has(gi)?lt.capturedMap.get(gi).set(Tt.eventObject,Qn):lt.capturedMap.set(gi,new Map([[Tt.eventObject,Qn]])),at.target.setPointerCapture(gi)},mr=gi=>{const Qn=lt.capturedMap.get(gi);Qn&&gr(lt.capturedMap,Tt.eventObject,Qn,gi)};let Hr={};for(let gi in at){let Qn=at[gi];typeof Qn!="function"&&(Hr[gi]=Qn)}let pi=Xo(jn(jn({},Tt),Hr),{pointer:Me,intersections:Fe,stopped:bt.stopped,delta:De,unprojectedPoint:qt,ray:ln.ray,camera:je,stopPropagation(){const gi="pointerId"in at&&lt.capturedMap.get(at.pointerId);if((!gi||gi.has(Tt.eventObject))&&(pi.stopped=bt.stopped=!0,lt.hovered.size&&Array.from(lt.hovered.values()).find(Qn=>Qn.eventObject===Tt.eventObject))){const Qn=Fe.slice(0,Fe.indexOf(Tt));lr([...Qn,Tt])}},target:{hasPointerCapture:Cn,setPointerCapture:kn,releasePointerCapture:mr},currentTarget:{hasPointerCapture:Cn,setPointerCapture:kn,releasePointerCapture:mr},nativeEvent:at});if(et(pi),bt.stopped===!0)break}}return Fe}function lr(Fe){const{internal:at}=$e.getState();for(const De of at.hovered.values())if(!Fe.length||!Fe.find(et=>et.object===De.object&&et.index===De.index&&et.instanceId===De.instanceId)){const dt=De.eventObject.__r3f,bt=dt==null?void 0:dt.handlers;if(at.hovered.delete(Sn(De)),dt!=null&&dt.eventCount){const Tt=Xo(jn({},De),{intersections:Fe});bt.onPointerOut==null||bt.onPointerOut(Tt),bt.onPointerLeave==null||bt.onPointerLeave(Tt)}}}function He(Fe,at){for(let De=0;De<at.length;De++){const et=at[De].__r3f;et==null||et.handlers.onPointerMissed==null||et.handlers.onPointerMissed(Fe)}}function ke(Fe){switch(Fe){case"onPointerLeave":case"onPointerCancel":return()=>lr([]);case"onLostPointerCapture":return at=>{const{internal:De}=$e.getState();"pointerId"in at&&De.capturedMap.has(at.pointerId)&&requestAnimationFrame(()=>{De.capturedMap.has(at.pointerId)&&(De.capturedMap.delete(at.pointerId),lr([]))})}}return function(De){const{onPointerMissed:et,internal:dt}=$e.getState();dt.lastEvent.current=De;const bt=Fe==="onPointerMove",Tt=Fe==="onClick"||Fe==="onContextMenu"||Fe==="onDoubleClick",ln=Fn(De,bt?cn:void 0),Me=Tt?wt(De):0;Fe==="onPointerDown"&&(dt.initialClick=[De.offsetX,De.offsetY],dt.initialHits=ln.map(lt=>lt.eventObject)),Tt&&!ln.length&&Me<=2&&(He(De,dt.interaction),et&&et(De)),bt&&lr(ln);function je(lt){const qt=lt.eventObject,Cn=qt.__r3f,kn=Cn==null?void 0:Cn.handlers;if(Cn!=null&&Cn.eventCount)if(bt){if(kn.onPointerOver||kn.onPointerEnter||kn.onPointerOut||kn.onPointerLeave){const mr=Sn(lt),Hr=dt.hovered.get(mr);Hr?Hr.stopped&&lt.stopPropagation():(dt.hovered.set(mr,lt),kn.onPointerOver==null||kn.onPointerOver(lt),kn.onPointerEnter==null||kn.onPointerEnter(lt))}kn.onPointerMove==null||kn.onPointerMove(lt)}else{const mr=kn[Fe];mr?(!Tt||dt.initialHits.includes(qt))&&(He(De,dt.interaction.filter(Hr=>!dt.initialHits.includes(Hr))),mr(lt)):Tt&&dt.initialHits.includes(qt)&&He(De,dt.interaction.filter(Hr=>!dt.initialHits.includes(Hr)))}}On(ln,De,Me,je)}}return{handlePointer:ke}}const Li=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Ro=$e=>!!($e!=null&&$e.render),Kr=d.createContext(null),ao=($e,wt)=>{const cn=(0,o.Z)((ke,Fe)=>{const at=new w.Vector3,De=new w.Vector3,et=new w.Vector3;function dt(Me=Fe().camera,je=De,lt=Fe().size){const{width:qt,height:Cn,top:kn,left:mr}=lt,Hr=qt/Cn;je instanceof w.Vector3?et.copy(je):et.set(...je);const pi=Me.getWorldPosition(at).distanceTo(et);if(_t(Me))return{width:qt/Me.zoom,height:Cn/Me.zoom,top:kn,left:mr,factor:1,distance:pi,aspect:Hr};{const gi=Me.fov*Math.PI/180,Qn=2*Math.tan(gi/2)*pi,qr=Qn*(qt/Cn);return{width:qr,height:Qn,top:kn,left:mr,factor:qt/qr,distance:pi,aspect:Hr}}}let bt;const Tt=Me=>ke(je=>({performance:Xo(jn({},je.performance),{current:Me})})),pn=new w.Vector2;return{set:ke,get:Fe,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(Me=1)=>$e(Fe(),Me),advance:(Me,je)=>wt(Me,je,Fe()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new w.Clock,pointer:pn,mouse:pn,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Me=Fe();bt&&clearTimeout(bt),Me.performance.current!==Me.performance.min&&Tt(Me.performance.min),bt=setTimeout(()=>Tt(Fe().performance.max),Me.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:dt},setEvents:Me=>ke(je=>Xo(jn({},je),{events:jn(jn({},je.events),Me)})),setSize:(Me,je,lt,qt,Cn)=>{const kn=Fe().camera,mr={width:Me,height:je,top:qt||0,left:Cn||0,updateStyle:lt};ke(Hr=>({size:mr,viewport:jn(jn({},Hr.viewport),dt(kn,De,mr))}))},setDpr:Me=>ke(je=>{const lt=br(Me);return{viewport:Xo(jn({},je.viewport),{dpr:lt,initialDpr:je.viewport.initialDpr||lt})}}),setFrameloop:(Me="always")=>{const je=Fe().clock;je.stop(),je.elapsedTime=0,Me!=="never"&&(je.start(),je.elapsedTime=0),ke(()=>({frameloop:Me}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:d.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Me,je,lt)=>{const qt=Fe().internal;return qt.priority=qt.priority+(je>0?1:0),qt.subscribers.push({ref:Me,priority:je,store:lt}),qt.subscribers=qt.subscribers.sort((Cn,kn)=>Cn.priority-kn.priority),()=>{const Cn=Fe().internal;Cn!=null&&Cn.subscribers&&(Cn.priority=Cn.priority-(je>0?1:0),Cn.subscribers=Cn.subscribers.filter(kn=>kn.ref!==Me))}}}}}),Fn=cn.getState();let On=Fn.size,lr=Fn.viewport.dpr,He=Fn.camera;return cn.subscribe(()=>{const{camera:ke,size:Fe,viewport:at,gl:De,set:et}=cn.getState();if(Fe!==On||at.dpr!==lr){var dt;On=Fe,lr=at.dpr,Tn(ke,Fe),De.setPixelRatio(at.dpr);const bt=(dt=Fe.updateStyle)!=null?dt:typeof HTMLCanvasElement!="undefined"&&De.domElement instanceof HTMLCanvasElement;De.setSize(Fe.width,Fe.height,bt)}ke!==He&&(He=ke,et(bt=>({viewport:jn(jn({},bt.viewport),bt.viewport.getCurrentViewport(ke))})))}),cn.subscribe(ke=>$e(ke)),cn};function lo($e,wt){const cn={callback:$e};return wt.add(cn),()=>void wt.delete(cn)}let sa,Ss=new Set,aa=new Set,Vs=new Set;const va=$e=>lo($e,Ss),Ls=$e=>lo($e,aa),ts=$e=>lo($e,Vs);function Ui($e,wt){if($e.size)for(const{callback:cn}of $e.values())cn(wt)}function Yi($e,wt){switch($e){case"before":return Ui(Ss,wt);case"after":return Ui(aa,wt);case"tail":return Ui(Vs,wt)}}let Qs,Ko;function Br($e,wt,cn){let Fn=wt.clock.getDelta();for(wt.frameloop==="never"&&typeof $e=="number"&&(Fn=$e-wt.clock.elapsedTime,wt.clock.oldTime=wt.clock.elapsedTime,wt.clock.elapsedTime=$e),Qs=wt.internal.subscribers,sa=0;sa<Qs.length;sa++)Ko=Qs[sa],Ko.ref.current(Ko.store.getState(),Fn,cn);return!wt.internal.priority&&wt.gl.render&&wt.gl.render(wt.scene,wt.camera),wt.internal.frames=Math.max(0,wt.internal.frames-1),wt.frameloop==="always"?1:wt.internal.frames}function Ni($e){let wt=!1,cn,Fn,On;function lr(Fe){Fn=requestAnimationFrame(lr),wt=!0,cn=0,Yi("before",Fe);for(const De of $e.values()){var at;On=De.store.getState(),On.internal.active&&(On.frameloop==="always"||On.internal.frames>0)&&!((at=On.gl.xr)!=null&&at.isPresenting)&&(cn+=Br(Fe,On))}if(Yi("after",Fe),cn===0)return Yi("tail",Fe),wt=!1,cancelAnimationFrame(Fn)}function He(Fe,at=1){var De;if(!Fe)return $e.forEach(et=>He(et.store.getState()),at);(De=Fe.gl.xr)!=null&&De.isPresenting||!Fe.internal.active||Fe.frameloop==="never"||(Fe.internal.frames=Math.min(60,Fe.internal.frames+at),wt||(wt=!0,requestAnimationFrame(lr)))}function ke(Fe,at=!0,De,et){if(at&&Yi("before",Fe),De)Br(Fe,De,et);else for(const dt of $e.values())Br(Fe,dt.store.getState());at&&Yi("after",Fe)}return{loop:lr,invalidate:He,advance:ke}}function ki($e){const wt=d.useRef(null);return ft(()=>void(wt.current=$e.current.__r3f),[$e]),wt}function la(){const $e=d.useContext(Kr);if(!$e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return $e}function ka($e=cn=>cn,wt){return la()($e,wt)}function ps($e,wt=0){const cn=la(),Fn=cn.getState().internal.subscribe,On=kt($e);return ft(()=>Fn(On,wt,cn),[wt,Fn,cn]),null}function Io($e){return d.useMemo(()=>Di($e),[$e])}function co($e,wt){return function(cn,...Fn){const On=new cn;return $e&&$e(On),Promise.all(Fn.map(lr=>new Promise((He,ke)=>On.load(lr,Fe=>{Fe.scene&&Object.assign(Fe,Di(Fe.scene)),He(Fe)},wt,Fe=>ke(new Error(`Could not load ${lr}: ${Fe.message})`))))))}}function za($e,wt,cn,Fn){const On=Array.isArray(wt)?wt:[wt],lr=(0,le.Rq)(co(cn,Fn),[$e,...On],{equal:Dn.equ});return Array.isArray(wt)?lr:lr[0]}za.preload=function($e,wt,cn){const Fn=Array.isArray(wt)?wt:[wt];return(0,le.MA)(co(cn),[$e,...Fn])},za.clear=function($e,wt){const cn=Array.isArray(wt)?wt:[wt];return(0,le.ZH)([$e,...cn])};const us=new Map,{invalidate:ho,advance:al}=Ni(us),{reconciler:Fo,applyProps:ks}=rt(us,Ln),ca={objects:"shallow",strict:!1},Xs=($e,wt)=>{const cn=typeof $e=="function"?$e(wt):$e;return Ro(cn)?cn:new w.WebGLRenderer(jn({powerPreference:"high-performance",canvas:wt,antialias:!0,alpha:!0},$e))};function Oo($e,wt){if(wt)return wt;if(typeof HTMLCanvasElement!="undefined"&&$e instanceof HTMLCanvasElement&&$e.parentElement){const{width:cn,height:Fn,top:On,left:lr}=$e.parentElement.getBoundingClientRect();return{width:cn,height:Fn,top:On,left:lr}}else if(typeof OffscreenCanvas!="undefined"&&$e instanceof OffscreenCanvas)return{width:$e.width,height:$e.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function ds($e){const wt=us.get($e),cn=wt==null?void 0:wt.fiber,Fn=wt==null?void 0:wt.store;wt&&q.warn("R3F.createRoot should only be called once!");const On=typeof reportError=="function"?reportError:q.error,lr=Fn||ao(ho,al),He=cn||Fo.createContainer(lr,m.ConcurrentRoot,null,!1,null,"",On,null);wt||us.set($e,{fiber:He,store:lr});let ke,Fe=!1,at;return{configure(De={}){let{gl:et,size:dt,scene:bt,events:Tt,onCreated:pn,shadows:ln=!1,linear:Me=!1,flat:je=!1,legacy:lt=!1,orthographic:qt=!1,frameloop:Cn="always",dpr:kn=[1,2],performance:mr,raycaster:Hr,camera:pi,onPointerMissed:gi}=De,Qn=lr.getState(),qr=Qn.gl;Qn.gl||Qn.set({gl:qr=Xs(et,$e)});let Hi=Qn.raycaster;Hi||Qn.set({raycaster:Hi=new w.Raycaster});const ro=Hr||{},{params:Vi}=ro,zi=An(ro,["params"]);if(Dn.equ(zi,Hi,ca)||ks(Hi,jn({},zi)),Dn.equ(Vi,Hi.params,ca)||ks(Hi,{params:jn(jn({},Hi.params),Vi)}),!Qn.camera||Qn.camera===at&&!Dn.equ(at,pi,ca)){at=pi;const ns=pi instanceof w.Camera,zs=ns?pi:qt?new w.OrthographicCamera(0,0,0,0,.1,1e3):new w.PerspectiveCamera(75,0,.1,1e3);ns||(zs.position.z=5,pi&&ks(zs,pi),!Qn.camera&&!(pi!=null&&pi.rotation)&&zs.lookAt(0,0,0)),Qn.set({camera:zs})}if(!Qn.scene){let ns;bt instanceof w.Scene?ns=bt:(ns=new w.Scene,bt&&ks(ns,bt)),Qn.set({scene:ti(ns)})}if(!Qn.xr){const ns=(ii,Ul)=>{const Ho=lr.getState();Ho.frameloop!=="never"&&al(ii,!0,Ho,Ul)},zs=()=>{const ii=lr.getState();ii.gl.xr.enabled=ii.gl.xr.isPresenting,ii.gl.xr.setAnimationLoop(ii.gl.xr.isPresenting?ns:null),ii.gl.xr.isPresenting||ho(ii)},mi={connect(){const ii=lr.getState().gl;ii.xr.addEventListener("sessionstart",zs),ii.xr.addEventListener("sessionend",zs)},disconnect(){const ii=lr.getState().gl;ii.xr.removeEventListener("sessionstart",zs),ii.xr.removeEventListener("sessionend",zs)}};qr.xr&&mi.connect(),Qn.set({xr:mi})}if(qr.shadowMap){const ns=qr.shadowMap.enabled,zs=qr.shadowMap.type;if(qr.shadowMap.enabled=!!ln,Dn.boo(ln))qr.shadowMap.type=w.PCFSoftShadowMap;else if(Dn.str(ln)){var pa;const mi={basic:w.BasicShadowMap,percentage:w.PCFShadowMap,soft:w.PCFSoftShadowMap,variance:w.VSMShadowMap};qr.shadowMap.type=(pa=mi[ln])!=null?pa:w.PCFSoftShadowMap}else Dn.obj(ln)&&Object.assign(qr.shadowMap,ln);(ns!==qr.shadowMap.enabled||zs!==qr.shadowMap.type)&&(qr.shadowMap.needsUpdate=!0)}const mo=St();mo&&("enabled"in mo?mo.enabled=!lt:"legacyMode"in mo&&(mo.legacyMode=lt)),ks(qr,{outputEncoding:Me?3e3:3001,toneMapping:je?w.NoToneMapping:w.ACESFilmicToneMapping}),Qn.legacy!==lt&&Qn.set(()=>({legacy:lt})),Qn.linear!==Me&&Qn.set(()=>({linear:Me})),Qn.flat!==je&&Qn.set(()=>({flat:je})),et&&!Dn.fun(et)&&!Ro(et)&&!Dn.equ(et,qr,ca)&&ks(qr,et),Tt&&!Qn.events.handlers&&Qn.set({events:Tt(lr)});const ws=Oo($e,dt);return Dn.equ(ws,Qn.size,ca)||Qn.setSize(ws.width,ws.height,ws.updateStyle,ws.top,ws.left),kn&&Qn.viewport.dpr!==br(kn)&&Qn.setDpr(kn),Qn.frameloop!==Cn&&Qn.setFrameloop(Cn),Qn.onPointerMissed||Qn.set({onPointerMissed:gi}),mr&&!Dn.equ(mr,Qn.performance,ca)&&Qn.set(ns=>({performance:jn(jn({},ns.performance),mr)})),ke=pn,Fe=!0,this},render(De){return Fe||this.configure(),Fo.updateContainer(d.createElement(_a,{store:lr,children:De,onCreated:ke,rootElement:$e}),He,null,()=>{}),lr},unmount(){ll($e)}}}function No($e,wt,cn){q.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const Fn=ds(wt);return Fn.configure(cn),Fn.render($e)}function _a({store:$e,children:wt,onCreated:cn,rootElement:Fn}){return ft(()=>{const On=$e.getState();On.set(lr=>({internal:Xo(jn({},lr.internal),{active:!0})})),cn&&cn(On),$e.getState().events.connected||On.events.connect==null||On.events.connect(Fn)},[]),d.createElement(Kr.Provider,{value:$e},wt)}function ll($e,wt){const cn=us.get($e),Fn=cn==null?void 0:cn.fiber;if(Fn){const On=cn==null?void 0:cn.store.getState();On&&(On.internal.active=!1),Fo.updateContainer(null,Fn,null,()=>{On&&setTimeout(()=>{try{var lr,He,ke,Fe;On.events.disconnect==null||On.events.disconnect(),(lr=On.gl)==null||(He=lr.renderLists)==null||He.dispose==null||He.dispose(),(ke=On.gl)==null||ke.forceContextLoss==null||ke.forceContextLoss(),(Fe=On.gl)!=null&&Fe.xr&&On.xr.disconnect(),Wi(On),us.delete($e),wt&&wt($e)}catch(at){}},500)})}}function gc($e,wt,cn){return d.createElement(Ea,{key:wt.uuid,children:$e,container:wt,state:cn})}function Ea({state:$e={},children:wt,container:cn}){const et=$e,{events:Fn,size:On}=et,lr=An(et,["events","size"]),He=la(),[ke]=d.useState(()=>new w.Raycaster),[Fe]=d.useState(()=>new w.Vector2),at=d.useCallback((dt,bt)=>{const Tt=jn({},dt);Object.keys(dt).forEach(ln=>{(Li.includes(ln)||dt[ln]!==bt[ln]&&bt[ln])&&delete Tt[ln]});let pn;if(bt&&On){const ln=bt.camera;pn=dt.viewport.getCurrentViewport(ln,new w.Vector3,On),ln!==dt.camera&&Tn(ln,On)}return jn(Xo(jn({},Tt),{scene:cn,raycaster:ke,pointer:Fe,mouse:Fe,previousRoot:He,events:jn(jn(jn({},dt.events),bt==null?void 0:bt.events),Fn),size:jn(jn({},dt.size),On),viewport:jn(jn({},dt.viewport),pn)}),lr)},[$e]),[De]=d.useState(()=>{const dt=He.getState();return(0,o.Z)((Tt,pn)=>Xo(jn(Xo(jn({},dt),{scene:cn,raycaster:ke,pointer:Fe,mouse:Fe,previousRoot:He,events:jn(jn({},dt.events),Fn),size:jn(jn({},dt.size),On)}),lr),{set:Tt,get:pn,setEvents:ln=>Tt(Me=>Xo(jn({},Me),{events:jn(jn({},Me.events),ln)}))}))});return d.useEffect(()=>{const dt=He.subscribe(bt=>De.setState(Tt=>at(bt,Tt)));return()=>{dt(),De.destroy()}},[]),d.useEffect(()=>{De.setState(dt=>at(He.getState(),dt))},[at]),d.createElement(d.Fragment,null,Fo.createPortal(d.createElement(Kr.Provider,{value:De},wt),De,null))}Fo.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:d.version});const fp=d.unstable_act},45953:function(u,n,A){"use strict";A.r(n),A.d(n,{Canvas:function(){return Pi},ReactThreeFiber:function(){return w.t},_roots:function(){return w.w},act:function(){return w.v},addAfterEffect:function(){return w.o},addEffect:function(){return w.n},addTail:function(){return w.p},advance:function(){return w.m},applyProps:function(){return w.j},context:function(){return w.f},createEvents:function(){return w.c},createPortal:function(){return w.g},createRoot:function(){return w.b},dispose:function(){return w.k},events:function(){return hr},extend:function(){return w.e},flushGlobalEffects:function(){return w.q},getRootState:function(){return w.s},invalidate:function(){return w.l},reconciler:function(){return w.h},render:function(){return w.r},unmountComponentAtNode:function(){return w.d},useFrame:function(){return w.A},useGraph:function(){return w.C},useInstanceHandle:function(){return w.x},useLoader:function(){return w.D},useStore:function(){return w.y},useThree:function(){return w.z}});var w=A(24121),d=A(87462),m=A(67294),o=A(99477),E=A(20296),j=A.n(E);function ee(Tn){let{debounce:Sn,scroll:Ln,polyfill:gr,offsetSize:ni}=Tn===void 0?{debounce:0,scroll:!1,offsetSize:!1}:Tn;const yr=gr||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!yr)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Li,Ro]=(0,m.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Kr=(0,m.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Li}),ao=Sn?typeof Sn=="number"?Sn:Sn.scroll:null,lo=Sn?typeof Sn=="number"?Sn:Sn.resize:null,sa=(0,m.useRef)(!1);(0,m.useEffect)(()=>(sa.current=!0,()=>void(sa.current=!1)));const[Ss,aa,Vs]=(0,m.useMemo)(()=>{const Ui=()=>{if(!Kr.current.element)return;const{left:Yi,top:Qs,width:Ko,height:Br,bottom:Ni,right:ki,x:la,y:ka}=Kr.current.element.getBoundingClientRect(),ps={left:Yi,top:Qs,width:Ko,height:Br,bottom:Ni,right:ki,x:la,y:ka};Kr.current.element instanceof HTMLElement&&ni&&(ps.height=Kr.current.element.offsetHeight,ps.width=Kr.current.element.offsetWidth),Object.freeze(ps),sa.current&&!xt(Kr.current.lastBounds,ps)&&Ro(Kr.current.lastBounds=ps)};return[Ui,lo?j()(Ui,lo):Ui,ao?j()(Ui,ao):Ui]},[Ro,ni,ao,lo]);function va(){Kr.current.scrollContainers&&(Kr.current.scrollContainers.forEach(Ui=>Ui.removeEventListener("scroll",Vs,!0)),Kr.current.scrollContainers=null),Kr.current.resizeObserver&&(Kr.current.resizeObserver.disconnect(),Kr.current.resizeObserver=null)}function Ls(){Kr.current.element&&(Kr.current.resizeObserver=new yr(Vs),Kr.current.resizeObserver.observe(Kr.current.element),Ln&&Kr.current.scrollContainers&&Kr.current.scrollContainers.forEach(Ui=>Ui.addEventListener("scroll",Vs,{capture:!0,passive:!0})))}const ts=Ui=>{!Ui||Ui===Kr.current.element||(va(),Kr.current.element=Ui,Kr.current.scrollContainers=pe(Ui),Ls())};return q(Vs,!!Ln),le(aa),(0,m.useEffect)(()=>{va(),Ls()},[Ln,Vs,aa]),(0,m.useEffect)(()=>va,[]),[ts,Li,Ss]}function le(Tn){(0,m.useEffect)(()=>{const Sn=Tn;return window.addEventListener("resize",Sn),()=>void window.removeEventListener("resize",Sn)},[Tn])}function q(Tn,Sn){(0,m.useEffect)(()=>{if(Sn){const Ln=Tn;return window.addEventListener("scroll",Ln,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",Ln,!0)}},[Tn,Sn])}function pe(Tn){const Sn=[];if(!Tn||Tn===document.body)return Sn;const{overflow:Ln,overflowX:gr,overflowY:ni}=window.getComputedStyle(Tn);return[Ln,gr,ni].some(yr=>yr==="auto"||yr==="scroll")&&Sn.push(Tn),[...Sn,...pe(Tn.parentElement)]}const ue=["x","y","top","bottom","left","right","width","height"],xt=(Tn,Sn)=>ue.every(Ln=>Tn[Ln]===Sn[Ln]);var rt=Object.defineProperty,We=Object.defineProperties,st=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,pt=(Tn,Sn,Ln)=>Sn in Tn?rt(Tn,Sn,{enumerable:!0,configurable:!0,writable:!0,value:Ln}):Tn[Sn]=Ln,ft=(Tn,Sn)=>{for(var Ln in Sn||(Sn={}))St.call(Sn,Ln)&&pt(Tn,Ln,Sn[Ln]);if(yt)for(var Ln of yt(Sn))_t.call(Sn,Ln)&&pt(Tn,Ln,Sn[Ln]);return Tn},kt=(Tn,Sn)=>We(Tn,st(Sn));function Rt(Tn,Sn,Ln){if(!Tn)return;if(Ln(Tn)===!0)return Tn;let gr=Sn?Tn.return:Tn.child;for(;gr;){const ni=Rt(gr,Sn,Ln);if(ni)return ni;gr=Sn?null:gr.sibling}}function Jt(Tn){try{return Object.defineProperties(Tn,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(Sn){return Tn}}const Lt=Jt(m.createContext(null));class vn extends m.Component{render(){return m.createElement(Lt.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:nr,ReactCurrentDispatcher:br}=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Rr(){const Tn=m.useContext(Lt);if(Tn===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const Sn=m.useId();return m.useMemo(()=>{for(const gr of[nr==null?void 0:nr.current,Tn,Tn==null?void 0:Tn.alternate]){if(!gr)continue;const ni=Rt(gr,!1,yr=>{let Li=yr.memoizedState;for(;Li;){if(Li.memoizedState===Sn)return!0;Li=Li.next}});if(ni)return ni}},[Tn,Sn])}function Dn(){const Tn=Rr(),Sn=React.useMemo(()=>Rt(Tn,!0,Ln=>{var gr;return((gr=Ln.stateNode)==null?void 0:gr.containerInfo)!=null}),[Tn]);return Sn==null?void 0:Sn.stateNode.containerInfo}function Di(Tn){const Sn=Rr(),Ln=React.useRef();return React.useLayoutEffect(()=>{var gr;Ln.current=(gr=Rt(Sn,!1,ni=>typeof ni.type=="string"&&(Tn===void 0||ni.type===Tn)))==null?void 0:gr.stateNode},[Sn]),Ln}function Wi(Tn){const Sn=Rr(),Ln=React.useRef();return React.useLayoutEffect(()=>{var gr;Ln.current=(gr=Rt(Sn,!0,ni=>typeof ni.type=="string"&&(Tn===void 0||ni.type===Tn)))==null?void 0:gr.stateNode},[Sn]),Ln}function ti(){var Tn,Sn;const Ln=Rr(),[gr]=m.useState(()=>new Map);gr.clear();let ni=Ln;for(;ni;){const yr=(Tn=ni.type)==null?void 0:Tn._context;yr&&yr!==Lt&&!gr.has(yr)&&gr.set(yr,(Sn=br==null?void 0:br.current)==null?void 0:Sn.readContext(Jt(yr))),ni=ni.return}return gr}function vi(){const Tn=ti();return m.useMemo(()=>Array.from(Tn.keys()).reduce((Sn,Ln)=>gr=>m.createElement(Sn,null,m.createElement(Ln.Provider,kt(ft({},gr),{value:Tn.get(Ln)}))),Sn=>m.createElement(vn,ft({},Sn))),[Tn])}var cs=A(32576),Wn=A(76525),nn=A(63840);const Bn={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function hr(Tn){const{handlePointer:Sn}=(0,w.c)(Tn);return{priority:1,enabled:!0,compute(Ln,gr,ni){gr.pointer.set(Ln.offsetX/gr.size.width*2-1,-(Ln.offsetY/gr.size.height)*2+1),gr.raycaster.setFromCamera(gr.pointer,gr.camera)},connected:void 0,handlers:Object.keys(Bn).reduce((Ln,gr)=>Xo(jn({},Ln),{[gr]:Sn(gr)}),{}),update:()=>{var Ln;const{events:gr,internal:ni}=Tn.getState();(Ln=ni.lastEvent)!=null&&Ln.current&&gr.handlers&&gr.handlers.onPointerMove(ni.lastEvent.current)},connect:Ln=>{var gr;const{set:ni,events:yr}=Tn.getState();yr.disconnect==null||yr.disconnect(),ni(Li=>({events:Xo(jn({},Li.events),{connected:Ln})})),Object.entries((gr=yr.handlers)!=null?gr:[]).forEach(([Li,Ro])=>{const[Kr,ao]=Bn[Li];Ln.addEventListener(Kr,Ro,{passive:ao})})},disconnect:()=>{const{set:Ln,events:gr}=Tn.getState();if(gr.connected){var ni;Object.entries((ni=gr.handlers)!=null?ni:[]).forEach(([yr,Li])=>{if(gr&&gr.connected instanceof HTMLElement){const[Ro]=Bn[yr];gr.connected.removeEventListener(Ro,Li)}}),Ln(yr=>({events:Xo(jn({},yr.events),{connected:void 0})}))}}}}const Ir=m.forwardRef(function(Ni,Br){var ki=Ni,{children:Sn,fallback:Ln,resize:gr,style:ni,gl:yr,events:Li=hr,eventSource:Ro,eventPrefix:Kr,shadows:ao,linear:lo,flat:sa,legacy:Ss,orthographic:aa,frameloop:Vs,dpr:va,performance:Ls,raycaster:ts,camera:Ui,onPointerMissed:Yi,onCreated:Qs}=ki,Ko=An(ki,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"]);m.useMemo(()=>(0,w.e)(o),[]);const la=vi(),[ka,ps]=ee(jn({scroll:!0,debounce:{scroll:50,resize:0}},gr)),Io=m.useRef(null),co=m.useRef(null);m.useImperativeHandle(Br,()=>Io.current);const za=(0,w.u)(Yi),[us,ho]=m.useState(!1),[al,Fo]=m.useState(!1);if(us)throw us;if(al)throw al;const ks=m.useRef(null);(0,w.a)(()=>{const Xs=Io.current;ps.width>0&&ps.height>0&&Xs&&(ks.current||(ks.current=(0,w.b)(Xs)),ks.current.configure({gl:yr,events:Li,shadows:ao,linear:lo,flat:sa,legacy:Ss,orthographic:aa,frameloop:Vs,dpr:va,performance:Ls,raycaster:ts,camera:Ui,size:ps,onPointerMissed:(...Oo)=>za.current==null?void 0:za.current(...Oo),onCreated:Oo=>{Oo.events.connect==null||Oo.events.connect(Ro?(0,w.i)(Ro)?Ro.current:Ro:co.current),Kr&&Oo.setEvents({compute:(ds,No)=>{const _a=ds[Kr+"X"],ll=ds[Kr+"Y"];No.pointer.set(_a/No.size.width*2-1,-(ll/No.size.height)*2+1),No.raycaster.setFromCamera(No.pointer,No.camera)}}),Qs==null||Qs(Oo)}}),ks.current.render(m.createElement(la,null,m.createElement(w.E,{set:Fo},m.createElement(m.Suspense,{fallback:m.createElement(w.B,{set:ho})},Sn)))))}),m.useEffect(()=>{const Xs=Io.current;if(Xs)return()=>(0,w.d)(Xs)},[]);const ca=Ro?"none":"auto";return m.createElement("div",(0,d.Z)({ref:co,style:jn({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ca},ni)},Ko),m.createElement("div",{ref:ka,style:{width:"100%",height:"100%"}},m.createElement("canvas",{ref:Io,style:{display:"block"}},Ln)))}),Pi=m.forwardRef(function(Sn,Ln){return m.createElement(vn,null,m.createElement(Ir,(0,d.Z)({},Sn,{ref:Ln})))})},88208:function(u,n,A){"use strict";var w=A(87537),d=A.n(w),m=A(23645),o=A.n(m),E=o()(d());E.push([u.id,`/* stylelint-disable property-no-vendor-prefix */
.liner--GyAEo {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
}
`,"",{version:3,sources:["webpack://./src/pages/three/index.module.less"],names:[],mappings:"AAAA,gDAAgD;AAChD;EACE,oDAAoD;EACpD,6BAA6B;EAC7B,oCAAoC;EACpC,eAAe;EACf,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,wCAAgC;UAAhC,gCAAgC;AAClC",sourcesContent:[`/* stylelint-disable property-no-vendor-prefix */
.liner {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
`],sourceRoot:""}]),E.locals={liner:"liner--GyAEo"},n.Z=E},20296:function(u){function n(A,w,d){var m,o,E,j,ee;w==null&&(w=100);function le(){var pe=Date.now()-j;pe<w&&pe>=0?m=setTimeout(le,w-pe):(m=null,d||(ee=A.apply(E,o),E=o=null))}var q=function(){E=this,o=arguments,j=Date.now();var pe=d&&!m;return m||(m=setTimeout(le,w)),pe&&(ee=A.apply(E,o),E=o=null),ee};return q.clear=function(){m&&(clearTimeout(m),m=null)},q.flush=function(){m&&(ee=A.apply(E,o),E=o=null,clearTimeout(m),m=null)},q}n.debounce=n,u.exports=n},75889:function(u,n,A){"use strict";var w=A(64836),d=A(18698);Object.defineProperty(n,"__esModule",{value:!0}),n.default=xt;var m=w(A(10434)),o=w(A(27424)),E=ue(A(67294)),j=A(45953),ee=A(97342),le=ue(A(22967)),q=w(A(90209));function pe(We){if(typeof WeakMap!="function")return null;var st=new WeakMap,yt=new WeakMap;return(pe=function(_t){return _t?yt:st})(We)}function ue(We,st){if(!st&&We&&We.__esModule)return We;if(We===null||d(We)!=="object"&&typeof We!="function")return{default:We};var yt=pe(st);if(yt&&yt.has(We))return yt.get(We);var St={},_t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pt in We)if(pt!=="default"&&Object.prototype.hasOwnProperty.call(We,pt)){var ft=_t?Object.getOwnPropertyDescriptor(We,pt):null;ft&&(ft.get||ft.set)?Object.defineProperty(St,pt,ft):St[pt]=We[pt]}return St.default=We,yt&&yt.set(We,St),St}function xt(){return E.default.createElement("div",{style:{width:"100%",height:"calc(100vh - 232px)",background:"#12071f"}},E.default.createElement("h2",{className:q.default.liner},"React Three Fiber"),E.default.createElement(j.Canvas,{camera:{position:[0,0,1]}},E.default.createElement(rt,null)))}function rt(We){var st=(0,E.useRef)(),yt=(0,E.useState)(function(){return le.inSphere(new Float32Array(5e3),{radius:1.5})}),St=(0,o.default)(yt,1),_t=St[0];return(0,j.useFrame)(function(pt,ft){st.current.rotation.x-=ft/10,st.current.rotation.y-=ft/15}),E.default.createElement("group",null,E.default.createElement(ee.Points,(0,m.default)({ref:st,positions:_t,stride:3,frustumCulled:!1},We),E.default.createElement(ee.PointMaterial,{transparent:!0,color:"#ffa0e0",size:.005,sizeAttenuation:!0,depthWrite:!1})))}},7378:function(u){var n=NaN,A="[object Symbol]",w=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,o=/^0o[0-7]+$/i,E=parseInt,j=Object.prototype,ee=j.toString;function le(We,st,yt){return We===We&&(yt!==void 0&&(We=We<=yt?We:yt),st!==void 0&&(We=We>=st?We:st)),We}function q(We){var st=typeof We;return!!We&&(st=="object"||st=="function")}function pe(We){return!!We&&typeof We=="object"}function ue(We){return typeof We=="symbol"||pe(We)&&ee.call(We)==A}function xt(We){if(typeof We=="number")return We;if(ue(We))return n;if(q(We)){var st=typeof We.valueOf=="function"?We.valueOf():We;We=q(st)?st+"":st}if(typeof We!="string")return We===0?We:+We;We=We.replace(w,"");var yt=m.test(We);return yt||o.test(We)?E(We.slice(2),yt?2:8):d.test(We)?n:+We}function rt(We,st,yt){return yt===void 0&&(yt=st,st=void 0),yt!==void 0&&(yt=xt(yt),yt=yt===yt?yt:0),st!==void 0&&(st=xt(st),st=st===st?st:0),le(xt(We),st,yt)}u.exports=rt},76427:function(u,n,A){var w=200,d="__lodash_hash_undefined__",m=1/0,o=9007199254740991,E="[object Arguments]",j="[object Function]",ee="[object GeneratorFunction]",le="[object Symbol]",q=/[\\^$.*+?()[\]{}|]/g,pe=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,xt=typeof A.g=="object"&&A.g&&A.g.Object===Object&&A.g,rt=typeof self=="object"&&self&&self.Object===Object&&self,We=xt||rt||Function("return this")();function st(Me,je,lt){switch(lt.length){case 0:return Me.call(je);case 1:return Me.call(je,lt[0]);case 2:return Me.call(je,lt[0],lt[1]);case 3:return Me.call(je,lt[0],lt[1],lt[2])}return Me.apply(je,lt)}function yt(Me,je){var lt=Me?Me.length:0;return!!lt&&kt(Me,je,0)>-1}function St(Me,je,lt){for(var qt=-1,Cn=Me?Me.length:0;++qt<Cn;)if(lt(je,Me[qt]))return!0;return!1}function _t(Me,je){for(var lt=-1,qt=Me?Me.length:0,Cn=Array(qt);++lt<qt;)Cn[lt]=je(Me[lt],lt,Me);return Cn}function pt(Me,je){for(var lt=-1,qt=je.length,Cn=Me.length;++lt<qt;)Me[Cn+lt]=je[lt];return Me}function ft(Me,je,lt,qt){for(var Cn=Me.length,kn=lt+(qt?1:-1);qt?kn--:++kn<Cn;)if(je(Me[kn],kn,Me))return kn;return-1}function kt(Me,je,lt){if(je!==je)return ft(Me,Rt,lt);for(var qt=lt-1,Cn=Me.length;++qt<Cn;)if(Me[qt]===je)return qt;return-1}function Rt(Me){return Me!==Me}function Jt(Me,je){for(var lt=-1,qt=Array(Me);++lt<Me;)qt[lt]=je(lt);return qt}function Lt(Me){return function(je){return Me(je)}}function vn(Me,je){return Me.has(je)}function nr(Me,je){return Me==null?void 0:Me[je]}function br(Me){var je=!1;if(Me!=null&&typeof Me.toString!="function")try{je=!!(Me+"")}catch(lt){}return je}function Rr(Me,je){return function(lt){return Me(je(lt))}}var Dn=Array.prototype,Di=Function.prototype,Wi=Object.prototype,ti=We["__core-js_shared__"],vi=function(){var Me=/[^.]+$/.exec(ti&&ti.keys&&ti.keys.IE_PROTO||"");return Me?"Symbol(src)_1."+Me:""}(),cs=Di.toString,Wn=Wi.hasOwnProperty,nn=Wi.toString,Bn=RegExp("^"+cs.call(Wn).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hr=We.Symbol,Ir=Rr(Object.getPrototypeOf,Object),Pi=Wi.propertyIsEnumerable,Tn=Dn.splice,Sn=hr?hr.isConcatSpreadable:void 0,Ln=Object.getOwnPropertySymbols,gr=Math.max,ni=ds(We,"Map"),yr=ds(Object,"create");function Li(Me){var je=-1,lt=Me?Me.length:0;for(this.clear();++je<lt;){var qt=Me[je];this.set(qt[0],qt[1])}}function Ro(){this.__data__=yr?yr(null):{}}function Kr(Me){return this.has(Me)&&delete this.__data__[Me]}function ao(Me){var je=this.__data__;if(yr){var lt=je[Me];return lt===d?void 0:lt}return Wn.call(je,Me)?je[Me]:void 0}function lo(Me){var je=this.__data__;return yr?je[Me]!==void 0:Wn.call(je,Me)}function sa(Me,je){var lt=this.__data__;return lt[Me]=yr&&je===void 0?d:je,this}Li.prototype.clear=Ro,Li.prototype.delete=Kr,Li.prototype.get=ao,Li.prototype.has=lo,Li.prototype.set=sa;function Ss(Me){var je=-1,lt=Me?Me.length:0;for(this.clear();++je<lt;){var qt=Me[je];this.set(qt[0],qt[1])}}function aa(){this.__data__=[]}function Vs(Me){var je=this.__data__,lt=Io(je,Me);if(lt<0)return!1;var qt=je.length-1;return lt==qt?je.pop():Tn.call(je,lt,1),!0}function va(Me){var je=this.__data__,lt=Io(je,Me);return lt<0?void 0:je[lt][1]}function Ls(Me){return Io(this.__data__,Me)>-1}function ts(Me,je){var lt=this.__data__,qt=Io(lt,Me);return qt<0?lt.push([Me,je]):lt[qt][1]=je,this}Ss.prototype.clear=aa,Ss.prototype.delete=Vs,Ss.prototype.get=va,Ss.prototype.has=Ls,Ss.prototype.set=ts;function Ui(Me){var je=-1,lt=Me?Me.length:0;for(this.clear();++je<lt;){var qt=Me[je];this.set(qt[0],qt[1])}}function Yi(){this.__data__={hash:new Li,map:new(ni||Ss),string:new Li}}function Qs(Me){return Oo(this,Me).delete(Me)}function Ko(Me){return Oo(this,Me).get(Me)}function Br(Me){return Oo(this,Me).has(Me)}function Ni(Me,je){return Oo(this,Me).set(Me,je),this}Ui.prototype.clear=Yi,Ui.prototype.delete=Qs,Ui.prototype.get=Ko,Ui.prototype.has=Br,Ui.prototype.set=Ni;function ki(Me){var je=-1,lt=Me?Me.length:0;for(this.__data__=new Ui;++je<lt;)this.add(Me[je])}function la(Me){return this.__data__.set(Me,d),this}function ka(Me){return this.__data__.has(Me)}ki.prototype.add=ki.prototype.push=la,ki.prototype.has=ka;function ps(Me,je){var lt=He(Me)||lr(Me)?Jt(Me.length,String):[],qt=lt.length,Cn=!!qt;for(var kn in Me)(je||Wn.call(Me,kn))&&!(Cn&&(kn=="length"||gc(kn,qt)))&&lt.push(kn);return lt}function Io(Me,je){for(var lt=Me.length;lt--;)if(On(Me[lt][0],je))return lt;return-1}function co(Me,je,lt,qt){var Cn=-1,kn=yt,mr=!0,Hr=Me.length,pi=[],gi=je.length;if(!Hr)return pi;lt&&(je=_t(je,Lt(lt))),qt?(kn=St,mr=!1):je.length>=w&&(kn=vn,mr=!1,je=new ki(je));e:for(;++Cn<Hr;){var Qn=Me[Cn],qr=lt?lt(Qn):Qn;if(Qn=qt||Qn!==0?Qn:0,mr&&qr===qr){for(var Hi=gi;Hi--;)if(je[Hi]===qr)continue e;pi.push(Qn)}else kn(je,qr,qt)||pi.push(Qn)}return pi}function za(Me,je,lt,qt,Cn){var kn=-1,mr=Me.length;for(lt||(lt=ll),Cn||(Cn=[]);++kn<mr;){var Hr=Me[kn];je>0&&lt(Hr)?je>1?za(Hr,je-1,lt,qt,Cn):pt(Cn,Hr):qt||(Cn[Cn.length]=Hr)}return Cn}function us(Me,je,lt){var qt=je(Me);return He(Me)?qt:pt(qt,lt(Me))}function ho(Me){if(!et(Me)||fp(Me))return!1;var je=at(Me)||br(Me)?Bn:pe;return je.test(Fn(Me))}function al(Me){if(!et(Me))return wt(Me);var je=$e(Me),lt=[];for(var qt in Me)qt=="constructor"&&(je||!Wn.call(Me,qt))||lt.push(qt);return lt}function Fo(Me,je){return Me=Object(Me),ks(Me,je,function(lt,qt){return qt in Me})}function ks(Me,je,lt){for(var qt=-1,Cn=je.length,kn={};++qt<Cn;){var mr=je[qt],Hr=Me[mr];lt(Hr,mr)&&(kn[mr]=Hr)}return kn}function ca(Me,je){return je=gr(je===void 0?Me.length-1:je,0),function(){for(var lt=arguments,qt=-1,Cn=gr(lt.length-je,0),kn=Array(Cn);++qt<Cn;)kn[qt]=lt[je+qt];qt=-1;for(var mr=Array(je+1);++qt<je;)mr[qt]=lt[qt];return mr[je]=kn,st(Me,this,mr)}}function Xs(Me){return us(Me,Tt,_a)}function Oo(Me,je){var lt=Me.__data__;return Ea(je)?lt[typeof je=="string"?"string":"hash"]:lt.map}function ds(Me,je){var lt=nr(Me,je);return ho(lt)?lt:void 0}var No=Ln?Rr(Ln,Object):ln,_a=Ln?function(Me){for(var je=[];Me;)pt(je,No(Me)),Me=Ir(Me);return je}:ln;function ll(Me){return He(Me)||lr(Me)||!!(Sn&&Me&&Me[Sn])}function gc(Me,je){return je=je==null?o:je,!!je&&(typeof Me=="number"||ue.test(Me))&&Me>-1&&Me%1==0&&Me<je}function Ea(Me){var je=typeof Me;return je=="string"||je=="number"||je=="symbol"||je=="boolean"?Me!=="__proto__":Me===null}function fp(Me){return!!vi&&vi in Me}function $e(Me){var je=Me&&Me.constructor,lt=typeof je=="function"&&je.prototype||Wi;return Me===lt}function wt(Me){var je=[];if(Me!=null)for(var lt in Object(Me))je.push(lt);return je}function cn(Me){if(typeof Me=="string"||bt(Me))return Me;var je=Me+"";return je=="0"&&1/Me==-m?"-0":je}function Fn(Me){if(Me!=null){try{return cs.call(Me)}catch(je){}try{return Me+""}catch(je){}}return""}function On(Me,je){return Me===je||Me!==Me&&je!==je}function lr(Me){return Fe(Me)&&Wn.call(Me,"callee")&&(!Pi.call(Me,"callee")||nn.call(Me)==E)}var He=Array.isArray;function ke(Me){return Me!=null&&De(Me.length)&&!at(Me)}function Fe(Me){return dt(Me)&&ke(Me)}function at(Me){var je=et(Me)?nn.call(Me):"";return je==j||je==ee}function De(Me){return typeof Me=="number"&&Me>-1&&Me%1==0&&Me<=o}function et(Me){var je=typeof Me;return!!Me&&(je=="object"||je=="function")}function dt(Me){return!!Me&&typeof Me=="object"}function bt(Me){return typeof Me=="symbol"||dt(Me)&&nn.call(Me)==le}function Tt(Me){return ke(Me)?ps(Me,!0):al(Me)}var pn=ca(function(Me,je){return Me==null?{}:(je=_t(za(je,1),cn),Fo(Me,co(Xs(Me),je)))});function ln(){return[]}u.exports=pn},25030:function(u,n,A){var w=1/0,d=9007199254740991,m="[object Arguments]",o="[object Function]",E="[object GeneratorFunction]",j="[object Symbol]",ee=typeof A.g=="object"&&A.g&&A.g.Object===Object&&A.g,le=typeof self=="object"&&self&&self.Object===Object&&self,q=ee||le||Function("return this")();function pe(nn,Bn,hr){switch(hr.length){case 0:return nn.call(Bn);case 1:return nn.call(Bn,hr[0]);case 2:return nn.call(Bn,hr[0],hr[1]);case 3:return nn.call(Bn,hr[0],hr[1],hr[2])}return nn.apply(Bn,hr)}function ue(nn,Bn){for(var hr=-1,Ir=nn?nn.length:0,Pi=Array(Ir);++hr<Ir;)Pi[hr]=Bn(nn[hr],hr,nn);return Pi}function xt(nn,Bn){for(var hr=-1,Ir=Bn.length,Pi=nn.length;++hr<Ir;)nn[Pi+hr]=Bn[hr];return nn}var rt=Object.prototype,We=rt.hasOwnProperty,st=rt.toString,yt=q.Symbol,St=rt.propertyIsEnumerable,_t=yt?yt.isConcatSpreadable:void 0,pt=Math.max;function ft(nn,Bn,hr,Ir,Pi){var Tn=-1,Sn=nn.length;for(hr||(hr=Lt),Pi||(Pi=[]);++Tn<Sn;){var Ln=nn[Tn];Bn>0&&hr(Ln)?Bn>1?ft(Ln,Bn-1,hr,Ir,Pi):xt(Pi,Ln):Ir||(Pi[Pi.length]=Ln)}return Pi}function kt(nn,Bn){return nn=Object(nn),Rt(nn,Bn,function(hr,Ir){return Ir in nn})}function Rt(nn,Bn,hr){for(var Ir=-1,Pi=Bn.length,Tn={};++Ir<Pi;){var Sn=Bn[Ir],Ln=nn[Sn];hr(Ln,Sn)&&(Tn[Sn]=Ln)}return Tn}function Jt(nn,Bn){return Bn=pt(Bn===void 0?nn.length-1:Bn,0),function(){for(var hr=arguments,Ir=-1,Pi=pt(hr.length-Bn,0),Tn=Array(Pi);++Ir<Pi;)Tn[Ir]=hr[Bn+Ir];Ir=-1;for(var Sn=Array(Bn+1);++Ir<Bn;)Sn[Ir]=hr[Ir];return Sn[Bn]=Tn,pe(nn,this,Sn)}}function Lt(nn){return br(nn)||nr(nn)||!!(_t&&nn&&nn[_t])}function vn(nn){if(typeof nn=="string"||cs(nn))return nn;var Bn=nn+"";return Bn=="0"&&1/nn==-w?"-0":Bn}function nr(nn){return Dn(nn)&&We.call(nn,"callee")&&(!St.call(nn,"callee")||st.call(nn)==m)}var br=Array.isArray;function Rr(nn){return nn!=null&&Wi(nn.length)&&!Di(nn)}function Dn(nn){return vi(nn)&&Rr(nn)}function Di(nn){var Bn=ti(nn)?st.call(nn):"";return Bn==o||Bn==E}function Wi(nn){return typeof nn=="number"&&nn>-1&&nn%1==0&&nn<=d}function ti(nn){var Bn=typeof nn;return!!nn&&(Bn=="object"||Bn=="function")}function vi(nn){return!!nn&&typeof nn=="object"}function cs(nn){return typeof nn=="symbol"||vi(nn)&&st.call(nn)==j}var Wn=Jt(function(nn,Bn){return nn==null?{}:kt(nn,ue(ft(Bn,1),vn))});u.exports=Wn},22967:function(u,n,A){"use strict";A.r(n),A.d(n,{Generator:function(){return Xs},inBox:function(){return cn},inCircle:function(){return gc},inRect:function(){return $e},inSphere:function(){return _a},noise:function(){return al},onBox:function(){return On},onCircle:function(){return Ea},onRect:function(){return wt},onSphere:function(){return No}});function w(He,ke,Fe){return ke in He?Object.defineProperty(He,ke,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):He[ke]=Fe,He}function d(He,ke){var Fe=Object.keys(He);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(He);ke&&(at=at.filter(function(De){return Object.getOwnPropertyDescriptor(He,De).enumerable})),Fe.push.apply(Fe,at)}return Fe}function m(He){for(var ke=1;ke<arguments.length;ke++){var Fe=arguments[ke]!=null?arguments[ke]:{};ke%2?d(Object(Fe),!0).forEach(function(at){w(He,at,Fe[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(He,Object.getOwnPropertyDescriptors(Fe)):d(Object(Fe)).forEach(function(at){Object.defineProperty(He,at,Object.getOwnPropertyDescriptor(Fe,at))})}return He}function o(He,ke){if(!(He instanceof ke))throw new TypeError("Cannot call a class as a function")}function E(He,ke){return E=Object.setPrototypeOf||function(at,De){return at.__proto__=De,at},E(He,ke)}function j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(He){return!1}}var ee=A(99477);function le(){for(var He=arguments.length,ke=new Array(He),Fe=0;Fe<He;Fe++)ke[Fe]=arguments[Fe];var at=ke[0],De=ke[1],et=ke[2],dt=ke[3];return at*dt-De*et}function q(){for(var He=arguments.length,ke=new Array(He),Fe=0;Fe<He;Fe++)ke[Fe]=arguments[Fe];var at=ke[0],De=ke[1],et=ke[2],dt=ke[3],bt=ke[4],Tt=ke[5],pn=ke[6],ln=ke[7],Me=ke[8];return at*bt*Me+De*Tt*pn+et*dt*ln-et*bt*pn-De*dt*Me-at*Tt*ln}function pe(){for(var He=arguments.length,ke=new Array(He),Fe=0;Fe<He;Fe++)ke[Fe]=arguments[Fe];ke[0],ke[1],ke[2],ke[3],ke[4],ke[5],ke[6],ke[7],ke[8],ke[9],ke[10],ke[11],ke[12],ke[13],ke[14]}function ue(He,ke,Fe){for(var at=He.clone().transpose(),De=[],et=at.elements.length,dt=Math.sqrt(et),bt=0;bt<et;bt++){var Tt=at.elements[bt],pn=Math.floor(bt/dt),ln=bt%dt;pn!==ke-1&&ln!==Fe-1&&De.push(Tt)}return q.apply(void 0,De)}function xt(He,ke){for(var Fe=[],at=He.toArray(),De=ke.toArray(),et=0;et<at.length;et++)Fe[et]=at[et]+De[et];return new ee.Matrix3().fromArray(Fe)}var rt=Object.freeze({__proto__:null,determinant2:le,determinant3:q,determinant4:pe,getMinor:ue,matrixSum3:xt});function We(He){if(Array.isArray(He))return He}function st(He,ke){var Fe=He==null?null:typeof Symbol!="undefined"&&He[Symbol.iterator]||He["@@iterator"];if(Fe!=null){var at=[],De=!0,et=!1,dt,bt;try{for(Fe=Fe.call(He);!(De=(dt=Fe.next()).done)&&(at.push(dt.value),!(ke&&at.length===ke));De=!0);}catch(Tt){et=!0,bt=Tt}finally{try{!De&&Fe.return!=null&&Fe.return()}finally{if(et)throw bt}}return at}}function yt(He,ke){(ke==null||ke>He.length)&&(ke=He.length);for(var Fe=0,at=new Array(ke);Fe<ke;Fe++)at[Fe]=He[Fe];return at}function St(He,ke){if(He){if(typeof He=="string")return yt(He,ke);var Fe=Object.prototype.toString.call(He).slice(8,-1);if(Fe==="Object"&&He.constructor&&(Fe=He.constructor.name),Fe==="Map"||Fe==="Set")return Array.from(He);if(Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe))return yt(He,ke)}}function _t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(He,ke){return We(He)||st(He,ke)||St(He,ke)||_t()}function ft(He){if(Array.isArray(He))return yt(He)}function kt(He){if(typeof Symbol!="undefined"&&He[Symbol.iterator]!=null||He["@@iterator"]!=null)return Array.from(He)}function Rt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jt(He){return ft(He)||kt(He)||St(He)||Rt()}function Lt(He,ke,Fe){return j()?Lt=Reflect.construct:Lt=function(De,et,dt){var bt=[null];bt.push.apply(bt,et);var Tt=Function.bind.apply(De,bt),pn=new Tt;return dt&&E(pn,dt.prototype),pn},Lt.apply(null,arguments)}function vn(He,ke){var Fe=pt(ke[0],2),at=Fe[0],De=Fe[1],et=pt(ke[1],2),dt=et[0],bt=et[1],Tt=pt(ke[2],2),pn=Tt[0],ln=Tt[1],Me=pt(He,2),je=Me[0],lt=Me[1],qt=new ee.Matrix4;return qt.set(at,De,at*at+De*De,1,dt,bt,dt*dt+bt*bt,1,pn,ln,pn*pn+ln*ln,1,je,lt,je*je+lt*lt,1),qt.determinant()<=0}function nr(He){var ke=pt(He[0],2),Fe=ke[0],at=ke[1],De=pt(He[1],2),et=De[0],dt=De[1],bt=pt(He[2],2),Tt=bt[0],pn=bt[1];return q(Fe,at,1,et,dt,1,Tt,pn,1)}function br(He){return nr(He)===0}function Rr(He){return nr(He)<0}function Dn(He){var ke=pt(He[0],2),Fe=ke[0],at=ke[1],De=pt(He[1],2),et=De[0],dt=De[1],bt=pt(He[2],2),Tt=bt[0],pn=bt[1];if(br(He))return null;var ln=new ee.Matrix4;ln.set(1,1,1,1,Fe*Fe+at*at,Fe,at,1,et*et+dt*dt,et,dt,1,Tt*Tt+pn*pn,Tt,pn,1);var Me=ue(ln,1,1),je=ue(ln,1,3),lt=ue(ln,1,2),qt=ue(ln,1,4),Cn=.5*(lt/Me),kn=.5*(je/Me),mr=Cn*Cn+kn*kn+qt/Me;return{x:Math.abs(Cn)===0?0:Cn,y:Math.abs(kn)===0?0:-kn,r:Math.sqrt(mr)}}function Di(He,ke){var Fe=Array.isArray(ke[0])?ke[0]:ke[0].toArray(),at=pt(Fe,2),De=at[0],et=at[1],dt=Array.isArray(ke[1])?ke[1]:ke[1].toArray(),bt=pt(dt,2),Tt=bt[0],pn=bt[1],ln=Array.isArray(ke[2])?ke[2]:ke[2].toArray(),Me=pt(ln,2),je=Me[0],lt=Me[1],qt=pt(He,2),Cn=qt[0],kn=qt[1];if(br(ke))throw new Error("Collinear points don't form a triangle");var mr=De-Cn,Hr=et-kn,pi=Tt-Cn,gi=pn-kn,Qn=je-Cn,qr=lt-kn,Hi=q(mr,Hr,mr*mr+Hr*Hr,pi,gi,pi*pi+gi*gi,Qn,qr,Qn*Qn+qr*qr);return Hi===0?!0:Rr(ke)?Hi<0:Hi>0}var Wi=new ee.Vector2,ti=new ee.Vector2;function vi(He){var ke=He.map(function(pn){return Array.isArray(pn)?Lt(ee.Vector2,Jt(pn)):pn}),Fe=pt(ke,3),at=Fe[0],De=Fe[1],et=Fe[2];if(br(He))return!1;var dt=Wi.subVectors(De,at),bt=ti.subVectors(et,at),Tt=bt.cross(dt);return Tt>0}var cs=Object.freeze({__proto__:null,isPointInTriangle:vn,triangleDeterminant:nr,arePointsCollinear:br,isTriangleClockwise:Rr,getCircumcircle:Dn,isPointInCircumcircle:Di,doThreePointsMakeARight:vi});function Wn(He,ke,Fe){return Math.max(ke,Math.min(Fe,He))}function nn(He,ke){return Wn(He-Math.floor(He/ke)*ke,0,ke)}function Bn(He,ke){var Fe=nn(ke-He,Math.PI*2);return Fe>Math.PI&&(Fe-=Math.PI*2),Fe}function hr(He){return He/180*Math.PI}function Ir(He){return He*180/Math.PI}function Pi(He,ke){for(var Fe=ke.radius,at=Fe===void 0?1:Fe,De=He.length/3,et=2/De,dt=Math.PI*(3-2.2360679775),bt=0;bt<He.length;bt+=3){var Tt=bt*et-1+et/2,pn=Math.sqrt(1-Math.pow(Tt,2)),ln=bt%De*dt,Me=Math.cos(ln)*pn,je=Math.sin(ln)*pn;He[bt]=Me*at,He[bt+1]=Tt*at,He[bt+2]=je*at}}function Tn(He,ke){var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(He.x-ke.x)<Fe&&Math.abs(He.y-ke.y)<Fe&&Math.abs(He.z-ke.z)<Fe}function Sn(He,ke){return He.x===ke.x?typeof He.z!="undefined"&&He.y===ke.y?He.z-ke.z:He.y-ke.y:He.x-ke.x}function Ln(He){for(var ke=He.sort(Sn),Fe=[ke[0],ke[1]],at=2;at<ke.length;at++)for(Fe.push(ke[at]);Fe.length>2&&vi(Jt(Fe.slice(-3)));)Fe.splice(Fe.length-2,1);for(var De=[ke[ke.length-1],ke[ke.length-2]],et=ke.length-3;et>=0;et--)for(De.push(ke[et]);De.length>2&&vi(Jt(De.slice(-3)));)De.splice(De.length-2,1);De.splice(0,1),De.splice(De.length-1,1);var dt=[].concat(Fe,De);return dt}function gr(He,ke,Fe){var at=pt(ke,2),De=at[0],et=at[1],dt=pt(Fe,2),bt=dt[0],Tt=dt[1];return bt+(He-De)*(Tt-bt)/(et-De)}function ni(He){return He*He*He*(He*(He*6-15)+10)}function yr(He,ke,Fe){return He*(1-Fe)+ke*Fe}function Li(He,ke,Fe){return(Fe-He)/(ke-He)}function Ro(He,ke,Fe){var at=Math.sqrt(He*He+ke*ke+Fe*Fe);return[He/at,ke/at,Fe/at]}function Kr(He,ke,Fe){var at=He*He,De=ke*ke,et=Fe*Fe,dt=He*Math.sqrt(1-(De+et)/2+De*et/3),bt=ke*Math.sqrt(1-(et+at)/2+et*at/3),Tt=Fe*Math.sqrt(1-(at+De)/2+at*De/3);return[dt,bt,Tt]}function ao(He,ke){var Fe=new ee.Vector3().crossVectors(He,ke),at=He.dot(ke),De=new ee.Matrix3().identity(),et=new ee.Matrix3().set(0,-Fe.z,Fe.y,Fe.z,0,-Fe.x,-Fe.y,Fe.x,0),dt=new ee.Matrix3().multiplyMatrices(et,et).multiplyScalar(1/(1+at)),bt=xt(xt(De,et),dt);return bt}function lo(He,ke,Fe){var at=Math.asin(ke),De=Math.atan2(He,-Fe);return[at,De]}function sa(He,ke){var Fe=Math.sin(He),at=Math.cos(He),De=Math.sin(ke)*at,et=-Math.cos(ke)*at;return[De,Fe,et]}function Ss(He,ke){var Fe=pt(ke,2),at=Fe[0],De=Fe[1],et=ao(He.normal,new ee.Vector3(0,1,0)),dt=Li(at.clone().applyMatrix3(et).y,De.clone().applyMatrix3(et).y,0);return new ee.Vector3().lerpVectors(at,De,dt)}function aa(He,ke){var Fe=ke.normal.dot(He);return Fe}function Vs(He,ke){var Fe=pt(He,3),at=Fe[0],De=Fe[1],et=Fe[2],dt=pt(ke,2),bt=dt[0],Tt=dt[1];return et*bt*Tt+De*bt+at}function va(He,ke){var Fe=pt(ke,2),at=Fe[0],De=Fe[1],et=at*De,dt=He/et,bt=He-et*dt,Tt=bt/at,pn=bt%at;return[pn,Tt,dt]}function Ls(He,ke){return He[0]+ke[0]*He[1]}function ts(He,ke){var Fe=He%ke,at=Math.floor(He/ke);return[Fe,at]}var Ui=Object.freeze({__proto__:null,clamp:Wn,deltaAngle:Bn,degToRad:hr,radToDeg:Ir,fibonacciOnSphere:Pi,vectorEquals:Tn,lexicographic:Sn,convexHull:Ln,remap:gr,fade:ni,lerp:yr,inverseLerp:Li,normalize:Ro,pointOnCubeToPointOnSphere:Kr,rotateVectorOnVector:ao,pointToCoordinate:lo,coordinateToPoint:sa,planeSegmentIntersection:Ss,pointToPlaneDistance:aa,getIndexFrom3D:Vs,get3DFromIndex:va,getIndexFrom2D:Ls,get2DFromIndex:ts}),Yi=function He(ke,Fe,at){var De=this;o(this,He),w(this,"dot2",function(et,dt){return De.x*et+De.y*dt}),w(this,"dot3",function(et,dt,bt){return De.x*et+De.y*dt+De.z*bt}),this.x=ke,this.y=Fe,this.z=at},Qs=[new Yi(1,1,0),new Yi(-1,1,0),new Yi(1,-1,0),new Yi(-1,-1,0),new Yi(1,0,1),new Yi(-1,0,1),new Yi(1,0,-1),new Yi(-1,0,-1),new Yi(0,1,1),new Yi(0,-1,1),new Yi(0,1,-1),new Yi(0,-1,-1)],Ko=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Br=new Array(512),Ni=new Array(512),ki=function(ke){ke>0&&ke<1&&(ke*=65536),ke=Math.floor(ke),ke<256&&(ke|=ke<<8);for(var Fe=0;Fe<256;Fe++){var at;Fe&1?at=Ko[Fe]^ke&255:at=Ko[Fe]^ke>>8&255,Br[Fe]=Br[Fe+256]=at,Ni[Fe]=Ni[Fe+256]=Qs[at%12]}};ki(0);var la=.5*(Math.sqrt(3)-1),ka=(3-Math.sqrt(3))/6,ps=1/3,Io=1/6,co=function(ke,Fe){var at,De,et,dt=(ke+Fe)*la,bt=Math.floor(ke+dt),Tt=Math.floor(Fe+dt),pn=(bt+Tt)*ka,ln=ke-bt+pn,Me=Fe-Tt+pn,je,lt;ln>Me?(je=1,lt=0):(je=0,lt=1);var qt=ln-je+ka,Cn=Me-lt+ka,kn=ln-1+2*ka,mr=Me-1+2*ka;bt&=255,Tt&=255;var Hr=Ni[bt+Br[Tt]],pi=Ni[bt+je+Br[Tt+lt]],gi=Ni[bt+1+Br[Tt+1]],Qn=.5-ln*ln-Me*Me;Qn<0?at=0:(Qn*=Qn,at=Qn*Qn*Hr.dot2(ln,Me));var qr=.5-qt*qt-Cn*Cn;qr<0?De=0:(qr*=qr,De=qr*qr*pi.dot2(qt,Cn));var Hi=.5-kn*kn-mr*mr;return Hi<0?et=0:(Hi*=Hi,et=Hi*Hi*gi.dot2(kn,mr)),70*(at+De+et)},za=function(ke,Fe,at){var De,et,dt,bt,Tt=(ke+Fe+at)*ps,pn=Math.floor(ke+Tt),ln=Math.floor(Fe+Tt),Me=Math.floor(at+Tt),je=(pn+ln+Me)*Io,lt=ke-pn+je,qt=Fe-ln+je,Cn=at-Me+je,kn,mr,Hr,pi,gi,Qn;lt>=qt?qt>=Cn?(kn=1,mr=0,Hr=0,pi=1,gi=1,Qn=0):lt>=Cn?(kn=1,mr=0,Hr=0,pi=1,gi=0,Qn=1):(kn=0,mr=0,Hr=1,pi=1,gi=0,Qn=1):qt<Cn?(kn=0,mr=0,Hr=1,pi=0,gi=1,Qn=1):lt<Cn?(kn=0,mr=1,Hr=0,pi=0,gi=1,Qn=1):(kn=0,mr=1,Hr=0,pi=1,gi=1,Qn=0);var qr=lt-kn+Io,Hi=qt-mr+Io,Vi=Cn-Hr+Io,zi=lt-pi+2*Io,pa=qt-gi+2*Io,mo=Cn-Qn+2*Io,hs=lt-1+3*Io,cl=qt-1+3*Io,ws=Cn-1+3*Io;pn&=255,ln&=255,Me&=255;var ro=Ni[pn+Br[ln+Br[Me]]],ns=Ni[pn+kn+Br[ln+mr+Br[Me+Hr]]],zs=Ni[pn+pi+Br[ln+gi+Br[Me+Qn]]],mi=Ni[pn+1+Br[ln+1+Br[Me+1]]],ii=.6-lt*lt-qt*qt-Cn*Cn;ii<0?De=0:(ii*=ii,De=ii*ii*ro.dot3(lt,qt,Cn));var Ul=.6-qr*qr-Hi*Hi-Vi*Vi;Ul<0?et=0:(Ul*=Ul,et=Ul*Ul*ns.dot3(qr,Hi,Vi));var Ho=.6-zi*zi-pa*pa-mo*mo;Ho<0?dt=0:(Ho*=Ho,dt=Ho*Ho*zs.dot3(zi,pa,mo));var Ga=.6-hs*hs-cl*cl-ws*ws;return Ga<0?bt=0:(Ga*=Ga,bt=Ga*Ga*mi.dot3(hs,cl,ws)),32*(De+et+dt+bt)},us=function(ke,Fe){var at=Math.floor(ke),De=Math.floor(Fe);ke=ke-at,Fe=Fe-De,at=at&255,De=De&255;var et=Ni[at+Br[De]].dot2(ke,Fe),dt=Ni[at+Br[De+1]].dot2(ke,Fe-1),bt=Ni[at+1+Br[De]].dot2(ke-1,Fe),Tt=Ni[at+1+Br[De+1]].dot2(ke-1,Fe-1),pn=ni(ke);return yr(yr(et,bt,pn),yr(dt,Tt,pn),ni(Fe))},ho=function(ke,Fe,at){var De=Math.floor(ke),et=Math.floor(Fe),dt=Math.floor(at);ke=ke-De,Fe=Fe-et,at=at-dt,De=De&255,et=et&255,dt=dt&255;var bt=Ni[De+Br[et+Br[dt]]].dot3(ke,Fe,at),Tt=Ni[De+Br[et+Br[dt+1]]].dot3(ke,Fe,at-1),pn=Ni[De+Br[et+1+Br[dt]]].dot3(ke,Fe-1,at),ln=Ni[De+Br[et+1+Br[dt+1]]].dot3(ke,Fe-1,at-1),Me=Ni[De+1+Br[et+Br[dt]]].dot3(ke-1,Fe,at),je=Ni[De+1+Br[et+Br[dt+1]]].dot3(ke-1,Fe,at-1),lt=Ni[De+1+Br[et+1+Br[dt]]].dot3(ke-1,Fe-1,at),qt=Ni[De+1+Br[et+1+Br[dt+1]]].dot3(ke-1,Fe-1,at-1),Cn=ni(ke),kn=ni(Fe),mr=ni(at);return yr(yr(yr(bt,Me,Cn),yr(Tt,je,Cn),mr),yr(yr(pn,lt,Cn),yr(ln,qt,Cn),mr),kn)},al=Object.freeze({__proto__:null,seed:ki,simplex2:co,simplex3:za,perlin2:us,perlin3:ho}),Fo=Math.PI*2;function ks(He){if(typeof He=="number")He=Math.abs(He);else if(typeof He=="string"){var ke=He;He=0;for(var Fe=0;Fe<ke.length;Fe++)He=(He+(Fe+1)*(ke.charCodeAt(Fe)%96))%2147483647}return He===0&&(He=311),He}function ca(He){var ke=ks(He);return function(){var Fe=ke*48271%2147483647;return ke=Fe,Fe/2147483647}}var Xs=function He(ke){var Fe=this;o(this,He),w(this,"seed",0),w(this,"init",function(at){Fe.seed=at,Fe.value=ca(at)}),w(this,"value",ca(this.seed)),this.init(ke)},Oo=new Xs(Math.random()),ds={radius:1,center:[0,0,0]};function No(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},ds),ke),De=at.radius,et=at.center,dt=0;dt<He.length;dt+=3){var bt=Fe.value(),Tt=Fe.value(),pn=Math.acos(2*Tt-1),ln=Fo*bt;He[dt]=Math.sin(pn)*Math.cos(ln)*De+et[0],He[dt+1]=Math.sin(pn)*Math.sin(ln)*De+et[1],He[dt+2]=Math.cos(pn)*De+et[2]}return He}function _a(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},ds),ke),De=at.radius,et=at.center,dt=0;dt<He.length;dt+=3){var bt=Math.pow(Fe.value(),.3333333333333333),Tt=Fe.value()*2-1,pn=Fe.value()*2-1,ln=Fe.value()*2-1,Me=Math.sqrt(Tt*Tt+pn*pn+ln*ln);Tt=bt*Tt/Me,pn=bt*pn/Me,ln=bt*ln/Me,He[dt]=Tt*De+et[0],He[dt+1]=pn*De+et[1],He[dt+2]=ln*De+et[2]}return He}var ll={radius:1,center:[0,0]};function gc(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},ll),ke),De=at.radius,et=at.center,dt=0;dt<He.length;dt+=2){var bt=De*Math.sqrt(Fe.value()),Tt=Fe.value()*Fo;He[dt]=Math.sin(Tt)*bt+et[0],He[dt+1]=Math.cos(Tt)*bt+et[1]}return He}function Ea(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},ll),ke),De=at.radius,et=at.center,dt=0;dt<He.length;dt+=2){var bt=Fe.value()*Fo;He[dt]=Math.sin(bt)*De+et[0],He[dt+1]=Math.cos(bt)*De+et[1]}return He}var fp={sides:1,center:[0,0]};function $e(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},fp),ke),De=at.sides,et=at.center,dt=typeof De=="number"?De:De[0],bt=typeof De=="number"?De:De[1],Tt=0;Tt<He.length;Tt+=2)He[Tt]=(Fe.value()-.5)*dt+et[0],He[Tt+1]=(Fe.value()-.5)*bt+et[1];return He}function wt(He,ke){return He}function cn(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},Fn),ke),De=at.sides,et=at.center,dt=typeof De=="number"?De:De[0],bt=typeof De=="number"?De:De[1],Tt=typeof De=="number"?De:De[2],pn=0;pn<He.length;pn+=3)He[pn]=(Fe.value()-.5)*dt+et[0],He[pn+1]=(Fe.value()-.5)*bt+et[1],He[pn+2]=(Fe.value()-.5)*Tt+et[2];return He}var Fn={sides:1,center:[0,0,0]};function On(He,ke){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oo,at=m(m({},Fn),ke),De=at.sides,et=at.center,dt=typeof De=="number"?De:De[0],bt=typeof De=="number"?De:De[1],Tt=typeof De=="number"?De:De[2],pn=0;pn<He.length;pn+=3)He[pn]=(Fe.value()-.5)*dt+et[0],He[pn+1]=(Fe.value()-.5)*bt+et[1],He[pn+2]=(Fe.value()-.5)*Tt+et[2];return He}var lr=Object.freeze({__proto__:null,Generator:Xs,onSphere:No,inSphere:_a,inCircle:gc,onCircle:Ea,inRect:$e,onRect:wt,inBox:cn,onBox:On,noise:al})},92703:function(u,n,A){"use strict";var w=A(50414);function d(){}function m(){}m.resetWarningCache=d,u.exports=function(){function o(ee,le,q,pe,ue,xt){if(xt!==w){var rt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw rt.name="Invariant Violation",rt}}o.isRequired=o;function E(){return o}var j={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:E,element:o,elementType:o,instanceOf:E,node:o,objectOf:E,oneOf:E,oneOfType:E,shape:E,exact:E,checkPropTypes:m,resetWarningCache:d};return j.PropTypes=j,j}},45697:function(u,n,A){if(!1)var w,d;else u.exports=A(92703)()},50414:function(u){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";u.exports=n},46511:function(u,n){"use strict";var A;/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */n.ConcurrentRoot=1,n.ContinuousEventPriority=4,n.DefaultEventPriority=16,n.DiscreteEventPriority=1,A=536870912,A=0},67287:function(u,n,A){var w=A(25108);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */u.exports=function(m){var o={},E=A(67294),j=A(63840),ee=Object.assign;function le(x){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+x,U=1;U<arguments.length;U++)S+="&args[]="+encodeURIComponent(arguments[U]);return"Minified React error #"+x+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),ue=Symbol.for("react.portal"),xt=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),We=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),yt=Symbol.for("react.context"),St=Symbol.for("react.forward_ref"),_t=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),kt=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Rt=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Jt=Symbol.iterator;function Lt(x){return x===null||typeof x!="object"?null:(x=Jt&&x[Jt]||x["@@iterator"],typeof x=="function"?x:null)}function vn(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case xt:return"Fragment";case ue:return"Portal";case We:return"Profiler";case rt:return"StrictMode";case _t:return"Suspense";case pt:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case yt:return(x.displayName||"Context")+".Consumer";case st:return(x._context.displayName||"Context")+".Provider";case St:var S=x.render;return x=x.displayName,x||(x=S.displayName||S.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case ft:return S=x.displayName||null,S!==null?S:vn(x.type)||"Memo";case kt:S=x._payload,x=x._init;try{return vn(x(S))}catch(U){}}return null}function nr(x){var S=x.type;switch(x.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=S.render,x=x.displayName||x.name||"",S.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vn(S);case 8:return S===rt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function br(x){var S=x,U=x;if(x.alternate)for(;S.return;)S=S.return;else{x=S;do S=x,S.flags&4098&&(U=S.return),x=S.return;while(x)}return S.tag===3?U:null}function Rr(x){if(br(x)!==x)throw Error(le(188))}function Dn(x){var S=x.alternate;if(!S){if(S=br(x),S===null)throw Error(le(188));return S!==x?null:x}for(var U=x,V=S;;){var te=U.return;if(te===null)break;var de=te.alternate;if(de===null){if(V=te.return,V!==null){U=V;continue}break}if(te.child===de.child){for(de=te.child;de;){if(de===U)return Rr(te),x;if(de===V)return Rr(te),S;de=de.sibling}throw Error(le(188))}if(U.return!==V.return)U=te,V=de;else{for(var Je=!1,Et=te.child;Et;){if(Et===U){Je=!0,U=te,V=de;break}if(Et===V){Je=!0,V=te,U=de;break}Et=Et.sibling}if(!Je){for(Et=de.child;Et;){if(Et===U){Je=!0,U=de,V=te;break}if(Et===V){Je=!0,V=de,U=te;break}Et=Et.sibling}if(!Je)throw Error(le(189))}}if(U.alternate!==V)throw Error(le(190))}if(U.tag!==3)throw Error(le(188));return U.stateNode.current===U?x:S}function Di(x){return x=Dn(x),x!==null?Wi(x):null}function Wi(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var S=Wi(x);if(S!==null)return S;x=x.sibling}return null}function ti(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var S=ti(x);if(S!==null)return S}x=x.sibling}return null}var vi=Array.isArray,cs=m.getPublicInstance,Wn=m.getRootHostContext,nn=m.getChildHostContext,Bn=m.prepareForCommit,hr=m.resetAfterCommit,Ir=m.createInstance,Pi=m.appendInitialChild,Tn=m.finalizeInitialChildren,Sn=m.prepareUpdate,Ln=m.shouldSetTextContent,gr=m.createTextInstance,ni=m.scheduleTimeout,yr=m.cancelTimeout,Li=m.noTimeout,Ro=m.isPrimaryRenderer,Kr=m.supportsMutation,ao=m.supportsPersistence,lo=m.supportsHydration,sa=m.getInstanceFromNode,Ss=m.preparePortalMount,aa=m.getCurrentEventPriority,Vs=m.detachDeletedInstance,va=m.supportsMicrotasks,Ls=m.scheduleMicrotask,ts=m.supportsTestSelectors,Ui=m.findFiberRoot,Yi=m.getBoundingRect,Qs=m.getTextContent,Ko=m.isHiddenSubtree,Br=m.matchAccessibilityRole,Ni=m.setFocusIfFocusable,ki=m.setupIntersectionObserver,la=m.appendChild,ka=m.appendChildToContainer,ps=m.commitTextUpdate,Io=m.commitMount,co=m.commitUpdate,za=m.insertBefore,us=m.insertInContainerBefore,ho=m.removeChild,al=m.removeChildFromContainer,Fo=m.resetTextContent,ks=m.hideInstance,ca=m.hideTextInstance,Xs=m.unhideInstance,Oo=m.unhideTextInstance,ds=m.clearContainer,No=m.cloneInstance,_a=m.createContainerChildSet,ll=m.appendChildToContainerChildSet,gc=m.finalizeContainerChildren,Ea=m.replaceContainerChildren,fp=m.cloneHiddenInstance,$e=m.cloneHiddenTextInstance,wt=m.canHydrateInstance,cn=m.canHydrateTextInstance,Fn=m.canHydrateSuspenseInstance,On=m.isSuspenseInstancePending,lr=m.isSuspenseInstanceFallback,He=m.registerSuspenseInstanceRetry,ke=m.getNextHydratableSibling,Fe=m.getFirstHydratableChild,at=m.getFirstHydratableChildWithinContainer,De=m.getFirstHydratableChildWithinSuspenseInstance,et=m.hydrateInstance,dt=m.hydrateTextInstance,bt=m.hydrateSuspenseInstance,Tt=m.getNextHydratableInstanceAfterSuspenseInstance,pn=m.commitHydratedContainer,ln=m.commitHydratedSuspenseInstance,Me=m.clearSuspenseBoundary,je=m.clearSuspenseBoundaryFromContainer,lt=m.shouldDeleteUnhydratedTailInstances,qt=m.didNotMatchHydratedContainerTextInstance,Cn=m.didNotMatchHydratedTextInstance,kn;function mr(x){if(kn===void 0)try{throw Error()}catch(U){var S=U.stack.trim().match(/\n( *(at )?)/);kn=S&&S[1]||""}return`
`+kn+x}var Hr=!1;function pi(x,S){if(!x||Hr)return"";Hr=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(Pn){var V=Pn}Reflect.construct(x,[],S)}else{try{S.call()}catch(Pn){V=Pn}x.call(S.prototype)}else{try{throw Error()}catch(Pn){V=Pn}x()}}catch(Pn){if(Pn&&V&&typeof Pn.stack=="string"){for(var te=Pn.stack.split(`
`),de=V.stack.split(`
`),Je=te.length-1,Et=de.length-1;1<=Je&&0<=Et&&te[Je]!==de[Et];)Et--;for(;1<=Je&&0<=Et;Je--,Et--)if(te[Je]!==de[Et]){if(Je!==1||Et!==1)do if(Je--,Et--,0>Et||te[Je]!==de[Et]){var Wt=`
`+te[Je].replace(" at new "," at ");return x.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",x.displayName)),Wt}while(1<=Je&&0<=Et);break}}}finally{Hr=!1,Error.prepareStackTrace=U}return(x=x?x.displayName||x.name:"")?mr(x):""}var gi=Object.prototype.hasOwnProperty,Qn=[],qr=-1;function Hi(x){return{current:x}}function Vi(x){0>qr||(x.current=Qn[qr],Qn[qr]=null,qr--)}function zi(x,S){qr++,Qn[qr]=x.current,x.current=S}var pa={},mo=Hi(pa),hs=Hi(!1),cl=pa;function ws(x,S){var U=x.type.contextTypes;if(!U)return pa;var V=x.stateNode;if(V&&V.__reactInternalMemoizedUnmaskedChildContext===S)return V.__reactInternalMemoizedMaskedChildContext;var te={},de;for(de in U)te[de]=S[de];return V&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=S,x.__reactInternalMemoizedMaskedChildContext=te),te}function ro(x){return x=x.childContextTypes,x!=null}function ns(){Vi(hs),Vi(mo)}function zs(x,S,U){if(mo.current!==pa)throw Error(le(168));zi(mo,S),zi(hs,U)}function mi(x,S,U){var V=x.stateNode;if(S=S.childContextTypes,typeof V.getChildContext!="function")return U;V=V.getChildContext();for(var te in V)if(!(te in S))throw Error(le(108,nr(x)||"Unknown",te));return ee({},U,V)}function ii(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||pa,cl=mo.current,zi(mo,x),zi(hs,hs.current),!0}function Ul(x,S,U){var V=x.stateNode;if(!V)throw Error(le(169));U?(x=mi(x,S,cl),V.__reactInternalMemoizedMergedChildContext=x,Vi(hs),Vi(mo),zi(mo,x)):Vi(hs),zi(hs,U)}var Ho=Math.clz32?Math.clz32:ba,Ga=Math.log,Ih=Math.LN2;function ba(x){return x>>>=0,x===0?32:31-(Ga(x)/Ih|0)|0}var mc=64,gp=4194304;function mp(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function ku(x,S){var U=x.pendingLanes;if(U===0)return 0;var V=0,te=x.suspendedLanes,de=x.pingedLanes,Je=U&268435455;if(Je!==0){var Et=Je&~te;Et!==0?V=mp(Et):(de&=Je,de!==0&&(V=mp(de)))}else Je=U&~te,Je!==0?V=mp(Je):de!==0&&(V=mp(de));if(V===0)return 0;if(S!==0&&S!==V&&!(S&te)&&(te=V&-V,de=S&-S,te>=de||te===16&&(de&4194240)!==0))return S;if(V&4&&(V|=U&16),S=x.entangledLanes,S!==0)for(x=x.entanglements,S&=V;0<S;)U=31-Ho(S),te=1<<U,V|=x[U],S&=~te;return V}function a1(x,S){switch(x){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xf(x,S){for(var U=x.suspendedLanes,V=x.pingedLanes,te=x.expirationTimes,de=x.pendingLanes;0<de;){var Je=31-Ho(de),Et=1<<Je,Wt=te[Je];Wt===-1?(!(Et&U)||Et&V)&&(te[Je]=a1(Et,S)):Wt<=S&&(x.expiredLanes|=Et),de&=~Et}}function Kf(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function zu(x){for(var S=[],U=0;31>U;U++)S.push(x);return S}function El(x,S,U){x.pendingLanes|=S,S!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,S=31-Ho(S),x[S]=U}function Ap(x,S){var U=x.pendingLanes&~S;x.pendingLanes=S,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=S,x.mutableReadLanes&=S,x.entangledLanes&=S,S=x.entanglements;var V=x.eventTimes;for(x=x.expirationTimes;0<U;){var te=31-Ho(U),de=1<<te;S[te]=0,V[te]=-1,x[te]=-1,U&=~de}}function Od(x,S){var U=x.entangledLanes|=S;for(x=x.entanglements;U;){var V=31-Ho(U),te=1<<V;te&S|x[V]&S&&(x[V]|=S),U&=~te}}var wi=0;function Yf(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var ic=j.unstable_scheduleCallback,ui=j.unstable_cancelCallback,oc=j.unstable_shouldYield,Jf=j.unstable_requestPaint,Ks=j.unstable_now,Gu=j.unstable_ImmediatePriority,l1=j.unstable_UserBlockingPriority,Fh=j.unstable_NormalPriority,c1=j.unstable_IdlePriority,qf=null,Ac=null;function Am(x){if(Ac&&typeof Ac.onCommitFiberRoot=="function")try{Ac.onCommitFiberRoot(qf,x,void 0,(x.current.flags&128)===128)}catch(S){}}function Gs(x,S){return x===S&&(x!==0||1/x===1/S)||x!==x&&S!==S}var Ua=typeof Object.is=="function"?Object.is:Gs,bl=null,Dd=!1,Oh=!1;function ym(x){bl===null?bl=[x]:bl.push(x)}function Uu(x){Dd=!0,ym(x)}function Nl(){if(!Oh&&bl!==null){Oh=!0;var x=0,S=wi;try{var U=bl;for(wi=1;x<U.length;x++){var V=U[x];do V=V(!0);while(V!==null)}bl=null,Dd=!1}catch(te){throw bl!==null&&(bl=bl.slice(x+1)),ic(Gu,Nl),te}finally{wi=S,Oh=!1}}return null}var Zf=q.ReactCurrentBatchConfig;function Nu(x,S){if(Ua(x,S))return!0;if(typeof x!="object"||x===null||typeof S!="object"||S===null)return!1;var U=Object.keys(x),V=Object.keys(S);if(U.length!==V.length)return!1;for(V=0;V<U.length;V++){var te=U[V];if(!gi.call(S,te)||!Ua(x[te],S[te]))return!1}return!0}function Dh(x){switch(x.tag){case 5:return mr(x.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 2:case 15:return x=pi(x.type,!1),x;case 11:return x=pi(x.type.render,!1),x;case 1:return x=pi(x.type,!0),x;default:return""}}function Ys(x,S){if(x&&x.defaultProps){S=ee({},S),x=x.defaultProps;for(var U in x)S[U]===void 0&&(S[U]=x[U]);return S}return S}var Hu=Hi(null),ju=null,yp=null,Pd=null;function Zp(){Pd=yp=ju=null}function Wu(x,S,U){Ro?(zi(Hu,S._currentValue),S._currentValue=U):(zi(Hu,S._currentValue2),S._currentValue2=U)}function Ph(x){var S=Hu.current;Vi(Hu),Ro?x._currentValue=S:x._currentValue2=S}function Lh(x,S,U){for(;x!==null;){var V=x.alternate;if((x.childLanes&S)!==S?(x.childLanes|=S,V!==null&&(V.childLanes|=S)):V!==null&&(V.childLanes&S)!==S&&(V.childLanes|=S),x===U)break;x=x.return}}function $p(x,S){ju=x,Pd=yp=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&S&&(As=!0),x.firstContext=null)}function Hl(x){var S=Ro?x._currentValue:x._currentValue2;if(Pd!==x)if(x={context:x,memoizedValue:S,next:null},yp===null){if(ju===null)throw Error(le(308));yp=x,ju.dependencies={lanes:0,firstContext:x}}else yp=yp.next=x;return S}var Na=null,Qc=!1;function kh(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $f(x,S){x=x.updateQueue,S.updateQueue===x&&(S.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function sc(x,S){return{eventTime:x,lane:S,tag:0,payload:null,callback:null,next:null}}function fs(x,S){var U=x.updateQueue;U!==null&&(U=U.shared,Wo!==null&&x.mode&1&&!(Wr&2)?(x=U.interleaved,x===null?(S.next=S,Na===null?Na=[U]:Na.push(U)):(S.next=x.next,x.next=S),U.interleaved=S):(x=U.pending,x===null?S.next=S:(S.next=x.next,x.next=S),U.pending=S))}function gs(x,S,U){if(S=S.updateQueue,S!==null&&(S=S.shared,(U&4194240)!==0)){var V=S.lanes;V&=x.pendingLanes,U|=V,S.lanes=U,Od(x,U)}}function eu(x,S){var U=x.updateQueue,V=x.alternate;if(V!==null&&(V=V.updateQueue,U===V)){var te=null,de=null;if(U=U.firstBaseUpdate,U!==null){do{var Je={eventTime:U.eventTime,lane:U.lane,tag:U.tag,payload:U.payload,callback:U.callback,next:null};de===null?te=de=Je:de=de.next=Je,U=U.next}while(U!==null);de===null?te=de=S:de=de.next=S}else te=de=S;U={baseState:V.baseState,firstBaseUpdate:te,lastBaseUpdate:de,shared:V.shared,effects:V.effects},x.updateQueue=U;return}x=U.lastBaseUpdate,x===null?U.firstBaseUpdate=S:x.next=S,U.lastBaseUpdate=S}function Ma(x,S,U,V){var te=x.updateQueue;Qc=!1;var de=te.firstBaseUpdate,Je=te.lastBaseUpdate,Et=te.shared.pending;if(Et!==null){te.shared.pending=null;var Wt=Et,Pn=Wt.next;Wt.next=null,Je===null?de=Pn:Je.next=Pn,Je=Wt;var Mr=x.alternate;Mr!==null&&(Mr=Mr.updateQueue,Et=Mr.lastBaseUpdate,Et!==Je&&(Et===null?Mr.firstBaseUpdate=Pn:Et.next=Pn,Mr.lastBaseUpdate=Wt))}if(de!==null){var di=te.baseState;Je=0,Mr=Pn=Wt=null,Et=de;do{var jr=Et.lane,To=Et.eventTime;if((V&jr)===jr){Mr!==null&&(Mr=Mr.next={eventTime:To,lane:0,tag:Et.tag,payload:Et.payload,callback:Et.callback,next:null});e:{var Fr=x,Za=Et;switch(jr=S,To=U,Za.tag){case 1:if(Fr=Za.payload,typeof Fr=="function"){di=Fr.call(To,di,jr);break e}di=Fr;break e;case 3:Fr.flags=Fr.flags&-65537|128;case 0:if(Fr=Za.payload,jr=typeof Fr=="function"?Fr.call(To,di,jr):Fr,jr==null)break e;di=ee({},di,jr);break e;case 2:Qc=!0}}Et.callback!==null&&Et.lane!==0&&(x.flags|=64,jr=te.effects,jr===null?te.effects=[Et]:jr.push(Et))}else To={eventTime:To,lane:jr,tag:Et.tag,payload:Et.payload,callback:Et.callback,next:null},Mr===null?(Pn=Mr=To,Wt=di):Mr=Mr.next=To,Je|=jr;if(Et=Et.next,Et===null){if(Et=te.shared.pending,Et===null)break;jr=Et,Et=jr.next,jr.next=null,te.lastBaseUpdate=jr,te.shared.pending=null}}while(1);if(Mr===null&&(Wt=di),te.baseState=Wt,te.firstBaseUpdate=Pn,te.lastBaseUpdate=Mr,S=te.shared.interleaved,S!==null){te=S;do Je|=te.lane,te=te.next;while(te!==S)}else de===null&&(te.shared.lanes=0);Fp|=Je,x.lanes=Je,x.memoizedState=di}}function Js(x,S,U){if(x=S.effects,S.effects=null,x!==null)for(S=0;S<x.length;S++){var V=x[S],te=V.callback;if(te!==null){if(V.callback=null,V=U,typeof te!="function")throw Error(le(191,te));te.call(V)}}}var zh=new E.Component().refs;function yc(x,S,U,V){S=x.memoizedState,U=U(V,S),U=U==null?S:ee({},S,U),x.memoizedState=U,x.lanes===0&&(x.updateQueue.baseState=U)}var vc={isMounted:function(x){return(x=x._reactInternals)?br(x)===x:!1},enqueueSetState:function(x,S,U){x=x._reactInternals;var V=fl(),te=Fc(x),de=sc(V,te);de.payload=S,U!=null&&(de.callback=U),fs(x,de),S=Kl(x,te,V),S!==null&&gs(S,x,te)},enqueueReplaceState:function(x,S,U){x=x._reactInternals;var V=fl(),te=Fc(x),de=sc(V,te);de.tag=1,de.payload=S,U!=null&&(de.callback=U),fs(x,de),S=Kl(x,te,V),S!==null&&gs(S,x,te)},enqueueForceUpdate:function(x,S){x=x._reactInternals;var U=fl(),V=Fc(x),te=sc(U,V);te.tag=2,S!=null&&(te.callback=S),fs(x,te),S=Kl(x,V,U),S!==null&&gs(S,x,V)}};function Ha(x,S,U,V,te,de,Je){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(V,de,Je):S.prototype&&S.prototype.isPureReactComponent?!Nu(U,V)||!Nu(te,de):!0}function _o(x,S,U){var V=!1,te=pa,de=S.contextType;return typeof de=="object"&&de!==null?de=Hl(de):(te=ro(S)?cl:mo.current,V=S.contextTypes,de=(V=V!=null)?ws(x,te):pa),S=new S(U,de),x.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=vc,x.stateNode=S,S._reactInternals=x,V&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=te,x.__reactInternalMemoizedMaskedChildContext=de),S}function Ld(x,S,U,V){x=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(U,V),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(U,V),S.state!==x&&vc.enqueueReplaceState(S,S.state,null)}function Gh(x,S,U,V){var te=x.stateNode;te.props=U,te.state=x.memoizedState,te.refs=zh,kh(x);var de=S.contextType;typeof de=="object"&&de!==null?te.context=Hl(de):(de=ro(S)?cl:mo.current,te.context=ws(x,de)),te.state=x.memoizedState,de=S.getDerivedStateFromProps,typeof de=="function"&&(yc(x,S,de,U),te.state=x.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(S=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),S!==te.state&&vc.enqueueReplaceState(te,te.state,null),Ma(x,U,te,V),te.state=x.memoizedState),typeof te.componentDidMount=="function"&&(x.flags|=4194308)}var tu=[],_c=0,nu=null,kd=0,Ml=[],xl=0,vp=null,Ec=1,bc="";function ru(x,S){tu[_c++]=kd,tu[_c++]=nu,nu=x,kd=S}function zd(x,S,U){Ml[xl++]=Ec,Ml[xl++]=bc,Ml[xl++]=vp,vp=x;var V=Ec;x=bc;var te=32-Ho(V)-1;V&=~(1<<te),U+=1;var de=32-Ho(S)+te;if(30<de){var Je=te-te%5;de=(V&(1<<Je)-1).toString(32),V>>=Je,te-=Je,Ec=1<<32-Ho(S)+te|U<<te|V,bc=de+x}else Ec=1<<de|U<<te|V,bc=x}function eg(x){x.return!==null&&(ru(x,1),zd(x,1,0))}function _p(x){for(;x===nu;)nu=tu[--_c],tu[_c]=null,kd=tu[--_c],tu[_c]=null;for(;x===vp;)vp=Ml[--xl],Ml[xl]=null,bc=Ml[--xl],Ml[xl]=null,Ec=Ml[--xl],Ml[xl]=null}var pl=null,xa=null,jo=!1,ua=!1,Yr=null;function tg(x,S){var U=Jl(5,null,null,0);U.elementType="DELETED",U.stateNode=S,U.return=x,S=x.deletions,S===null?(x.deletions=[U],x.flags|=16):S.push(U)}function fn(x,S){switch(x.tag){case 5:return S=wt(S,x.type,x.pendingProps),S!==null?(x.stateNode=S,pl=x,xa=Fe(S),!0):!1;case 6:return S=cn(S,x.pendingProps),S!==null?(x.stateNode=S,pl=x,xa=null,!0):!1;case 13:if(S=Fn(S),S!==null){var U=vp!==null?{id:Ec,overflow:bc}:null;return x.memoizedState={dehydrated:S,treeContext:U,retryLane:1073741824},U=Jl(18,null,null,0),U.stateNode=S,U.return=x,x.child=U,pl=x,xa=null,!0}return!1;default:return!1}}function Ai(x){return(x.mode&1)!==0&&(x.flags&128)===0}function Gd(x){if(jo){var S=xa;if(S){var U=S;if(!fn(x,S)){if(Ai(x))throw Error(le(418));S=ke(U);var V=pl;S&&fn(x,S)?tg(V,U):(x.flags=x.flags&-4097|2,jo=!1,pl=x)}}else{if(Ai(x))throw Error(le(418));x.flags=x.flags&-4097|2,jo=!1,pl=x}}}function vm(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;pl=x}function Ud(x){if(!lo||x!==pl)return!1;if(!jo)return vm(x),jo=!0,!1;if(x.tag!==3&&(x.tag!==5||lt(x.type)&&!Ln(x.type,x.memoizedProps))){var S=xa;if(S){if(Ai(x)){for(x=xa;x;)x=ke(x);throw Error(le(418))}for(;S;)tg(x,S),S=ke(S)}}if(vm(x),x.tag===13){if(!lo)throw Error(le(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(le(317));xa=Tt(x)}else xa=pl?ke(x.stateNode):null;return!0}function ac(){lo&&(xa=pl=null,ua=jo=!1)}function Vu(x){Yr===null?Yr=[x]:Yr.push(x)}function Ep(x,S,U){if(x=U.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(U._owner){if(U=U._owner,U){if(U.tag!==1)throw Error(le(309));var V=U.stateNode}if(!V)throw Error(le(147,x));var te=V,de=""+x;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===de?S.ref:(S=function(Je){var Et=te.refs;Et===zh&&(Et=te.refs={}),Je===null?delete Et[de]:Et[de]=Je},S._stringRef=de,S)}if(typeof x!="string")throw Error(le(284));if(!U._owner)throw Error(le(290,x))}return x}function Mc(x,S){throw x=Object.prototype.toString.call(S),Error(le(31,x==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":x))}function iu(x){var S=x._init;return S(x._payload)}function Uh(x){function S(Dt,Ct){if(x){var Xt=Dt.deletions;Xt===null?(Dt.deletions=[Ct],Dt.flags|=16):Xt.push(Ct)}}function U(Dt,Ct){if(!x)return null;for(;Ct!==null;)S(Dt,Ct),Ct=Ct.sibling;return null}function V(Dt,Ct){for(Dt=new Map;Ct!==null;)Ct.key!==null?Dt.set(Ct.key,Ct):Dt.set(Ct.index,Ct),Ct=Ct.sibling;return Dt}function te(Dt,Ct){return Dt=Dp(Dt,Ct),Dt.index=0,Dt.sibling=null,Dt}function de(Dt,Ct,Xt){return Dt.index=Xt,x?(Xt=Dt.alternate,Xt!==null?(Xt=Xt.index,Xt<Ct?(Dt.flags|=2,Ct):Xt):(Dt.flags|=2,Ct)):(Dt.flags|=1048576,Ct)}function Je(Dt){return x&&Dt.alternate===null&&(Dt.flags|=2),Dt}function Et(Dt,Ct,Xt,ur){return Ct===null||Ct.tag!==6?(Ct=sf(Xt,Dt.mode,ur),Ct.return=Dt,Ct):(Ct=te(Ct,Xt),Ct.return=Dt,Ct)}function Wt(Dt,Ct,Xt,ur){var Or=Xt.type;return Or===xt?Mr(Dt,Ct,Xt.props.children,ur,Xt.key):Ct!==null&&(Ct.elementType===Or||typeof Or=="object"&&Or!==null&&Or.$$typeof===kt&&iu(Or)===Ct.type)?(ur=te(Ct,Xt.props),ur.ref=Ep(Dt,Ct,Xt),ur.return=Dt,ur):(ur=of(Xt.type,Xt.key,Xt.props,null,Dt.mode,ur),ur.ref=Ep(Dt,Ct,Xt),ur.return=Dt,ur)}function Pn(Dt,Ct,Xt,ur){return Ct===null||Ct.tag!==4||Ct.stateNode.containerInfo!==Xt.containerInfo||Ct.stateNode.implementation!==Xt.implementation?(Ct=oh(Xt,Dt.mode,ur),Ct.return=Dt,Ct):(Ct=te(Ct,Xt.children||[]),Ct.return=Dt,Ct)}function Mr(Dt,Ct,Xt,ur,Or){return Ct===null||Ct.tag!==7?(Ct=Pp(Xt,Dt.mode,ur,Or),Ct.return=Dt,Ct):(Ct=te(Ct,Xt),Ct.return=Dt,Ct)}function di(Dt,Ct,Xt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Ct=sf(""+Ct,Dt.mode,Xt),Ct.return=Dt,Ct;if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case pe:return Xt=of(Ct.type,Ct.key,Ct.props,null,Dt.mode,Xt),Xt.ref=Ep(Dt,null,Ct),Xt.return=Dt,Xt;case ue:return Ct=oh(Ct,Dt.mode,Xt),Ct.return=Dt,Ct;case kt:var ur=Ct._init;return di(Dt,ur(Ct._payload),Xt)}if(vi(Ct)||Lt(Ct))return Ct=Pp(Ct,Dt.mode,Xt,null),Ct.return=Dt,Ct;Mc(Dt,Ct)}return null}function jr(Dt,Ct,Xt,ur){var Or=Ct!==null?Ct.key:null;if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Or!==null?null:Et(Dt,Ct,""+Xt,ur);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case pe:return Xt.key===Or?Wt(Dt,Ct,Xt,ur):null;case ue:return Xt.key===Or?Pn(Dt,Ct,Xt,ur):null;case kt:return Or=Xt._init,jr(Dt,Ct,Or(Xt._payload),ur)}if(vi(Xt)||Lt(Xt))return Or!==null?null:Mr(Dt,Ct,Xt,ur,null);Mc(Dt,Xt)}return null}function To(Dt,Ct,Xt,ur,Or){if(typeof ur=="string"&&ur!==""||typeof ur=="number")return Dt=Dt.get(Xt)||null,Et(Ct,Dt,""+ur,Or);if(typeof ur=="object"&&ur!==null){switch(ur.$$typeof){case pe:return Dt=Dt.get(ur.key===null?Xt:ur.key)||null,Wt(Ct,Dt,ur,Or);case ue:return Dt=Dt.get(ur.key===null?Xt:ur.key)||null,Pn(Ct,Dt,ur,Or);case kt:var Ci=ur._init;return To(Dt,Ct,Xt,Ci(ur._payload),Or)}if(vi(ur)||Lt(ur))return Dt=Dt.get(Xt)||null,Mr(Ct,Dt,ur,Or,null);Mc(Ct,ur)}return null}function Fr(Dt,Ct,Xt,ur){for(var Or=null,Ci=null,yi=Ct,oo=Ct=0,ma=null;yi!==null&&oo<Xt.length;oo++){yi.index>oo?(ma=yi,yi=null):ma=yi.sibling;var Qi=jr(Dt,yi,Xt[oo],ur);if(Qi===null){yi===null&&(yi=ma);break}x&&yi&&Qi.alternate===null&&S(Dt,yi),Ct=de(Qi,Ct,oo),Ci===null?Or=Qi:Ci.sibling=Qi,Ci=Qi,yi=ma}if(oo===Xt.length)return U(Dt,yi),jo&&ru(Dt,oo),Or;if(yi===null){for(;oo<Xt.length;oo++)yi=di(Dt,Xt[oo],ur),yi!==null&&(Ct=de(yi,Ct,oo),Ci===null?Or=yi:Ci.sibling=yi,Ci=yi);return jo&&ru(Dt,oo),Or}for(yi=V(Dt,yi);oo<Xt.length;oo++)ma=To(yi,Dt,oo,Xt[oo],ur),ma!==null&&(x&&ma.alternate!==null&&yi.delete(ma.key===null?oo:ma.key),Ct=de(ma,Ct,oo),Ci===null?Or=ma:Ci.sibling=ma,Ci=ma);return x&&yi.forEach(function(Lp){return S(Dt,Lp)}),jo&&ru(Dt,oo),Or}function Za(Dt,Ct,Xt,ur){var Or=Lt(Xt);if(typeof Or!="function")throw Error(le(150));if(Xt=Or.call(Xt),Xt==null)throw Error(le(151));for(var Ci=Or=null,yi=Ct,oo=Ct=0,ma=null,Qi=Xt.next();yi!==null&&!Qi.done;oo++,Qi=Xt.next()){yi.index>oo?(ma=yi,yi=null):ma=yi.sibling;var Lp=jr(Dt,yi,Qi.value,ur);if(Lp===null){yi===null&&(yi=ma);break}x&&yi&&Lp.alternate===null&&S(Dt,yi),Ct=de(Lp,Ct,oo),Ci===null?Or=Lp:Ci.sibling=Lp,Ci=Lp,yi=ma}if(Qi.done)return U(Dt,yi),jo&&ru(Dt,oo),Or;if(yi===null){for(;!Qi.done;oo++,Qi=Xt.next())Qi=di(Dt,Qi.value,ur),Qi!==null&&(Ct=de(Qi,Ct,oo),Ci===null?Or=Qi:Ci.sibling=Qi,Ci=Qi);return jo&&ru(Dt,oo),Or}for(yi=V(Dt,yi);!Qi.done;oo++,Qi=Xt.next())Qi=To(yi,Dt,oo,Qi.value,ur),Qi!==null&&(x&&Qi.alternate!==null&&yi.delete(Qi.key===null?oo:Qi.key),Ct=de(Qi,Ct,oo),Ci===null?Or=Qi:Ci.sibling=Qi,Ci=Qi);return x&&yi.forEach(function(Tm){return S(Dt,Tm)}),jo&&ru(Dt,oo),Or}function ql(Dt,Ct,Xt,ur){if(typeof Xt=="object"&&Xt!==null&&Xt.type===xt&&Xt.key===null&&(Xt=Xt.props.children),typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case pe:e:{for(var Or=Xt.key,Ci=Ct;Ci!==null;){if(Ci.key===Or){if(Or=Xt.type,Or===xt){if(Ci.tag===7){U(Dt,Ci.sibling),Ct=te(Ci,Xt.props.children),Ct.return=Dt,Dt=Ct;break e}}else if(Ci.elementType===Or||typeof Or=="object"&&Or!==null&&Or.$$typeof===kt&&iu(Or)===Ci.type){U(Dt,Ci.sibling),Ct=te(Ci,Xt.props),Ct.ref=Ep(Dt,Ci,Xt),Ct.return=Dt,Dt=Ct;break e}U(Dt,Ci);break}else S(Dt,Ci);Ci=Ci.sibling}Xt.type===xt?(Ct=Pp(Xt.props.children,Dt.mode,ur,Xt.key),Ct.return=Dt,Dt=Ct):(ur=of(Xt.type,Xt.key,Xt.props,null,Dt.mode,ur),ur.ref=Ep(Dt,Ct,Xt),ur.return=Dt,Dt=ur)}return Je(Dt);case ue:e:{for(Ci=Xt.key;Ct!==null;){if(Ct.key===Ci)if(Ct.tag===4&&Ct.stateNode.containerInfo===Xt.containerInfo&&Ct.stateNode.implementation===Xt.implementation){U(Dt,Ct.sibling),Ct=te(Ct,Xt.children||[]),Ct.return=Dt,Dt=Ct;break e}else{U(Dt,Ct);break}else S(Dt,Ct);Ct=Ct.sibling}Ct=oh(Xt,Dt.mode,ur),Ct.return=Dt,Dt=Ct}return Je(Dt);case kt:return Ci=Xt._init,ql(Dt,Ct,Ci(Xt._payload),ur)}if(vi(Xt))return Fr(Dt,Ct,Xt,ur);if(Lt(Xt))return Za(Dt,Ct,Xt,ur);Mc(Dt,Xt)}return typeof Xt=="string"&&Xt!==""||typeof Xt=="number"?(Xt=""+Xt,Ct!==null&&Ct.tag===6?(U(Dt,Ct.sibling),Ct=te(Ct,Xt),Ct.return=Dt,Dt=Ct):(U(Dt,Ct),Ct=sf(Xt,Dt.mode,ur),Ct.return=Dt,Dt=Ct),Je(Dt)):U(Dt,Ct)}return ql}var Qu=Uh(!0),_m=Uh(!1),Xu={},ja=Hi(Xu),ei=Hi(Xu),Xc=Hi(Xu);function Do(x){if(x===Xu)throw Error(le(174));return x}function lc(x,S){zi(Xc,S),zi(ei,x),zi(ja,Xu),x=Wn(S),Vi(ja),zi(ja,x)}function cc(){Vi(ja),Vi(ei),Vi(Xc)}function bp(x){var S=Do(Xc.current),U=Do(ja.current);S=nn(U,x.type,S),U!==S&&(zi(ei,x),zi(ja,S))}function xc(x){ei.current===x&&(Vi(ja),Vi(ei))}var Eo=Hi(0);function Cl(x){for(var S=x;S!==null;){if(S.tag===13){var U=S.memoizedState;if(U!==null&&(U=U.dehydrated,U===null||On(U)||lr(U)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if(S.flags&128)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===x)break;for(;S.sibling===null;){if(S.return===null||S.return===x)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var io=[];function Ji(){for(var x=0;x<io.length;x++){var S=io[x];Ro?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}io.length=0}var qs=q.ReactCurrentDispatcher,Ca=q.ReactCurrentBatchConfig,Ku=0,Po=null,da=null,bo=null,Zs=!1,Xe=!1,Mp=0,Nh=0;function Lo(){throw Error(le(321))}function In(x,S){if(S===null)return!1;for(var U=0;U<S.length&&U<x.length;U++)if(!Ua(x[U],S[U]))return!1;return!0}function Us(x,S,U,V,te,de){if(Ku=de,Po=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,qs.current=x===null||x.memoizedState===null?jh:u1,x=U(V,te),Xe){de=0;do{if(Xe=!1,Mp=0,25<=de)throw Error(le(301));de+=1,bo=da=null,S.updateQueue=null,qs.current=Wh,x=U(V,te)}while(Xe)}if(qs.current=wp,S=da!==null&&da.next!==null,Ku=0,bo=da=Po=null,Zs=!1,S)throw Error(le(300));return x}function Oi(){var x=Mp!==0;return Mp=0,x}function rs(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bo===null?Po.memoizedState=bo=x:bo=bo.next=x,bo}function So(){if(da===null){var x=Po.alternate;x=x!==null?x.memoizedState:null}else x=da.next;var S=bo===null?Po.memoizedState:bo.next;if(S!==null)bo=S,da=x;else{if(x===null)throw Error(le(310));da=x,x={memoizedState:da.memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},bo===null?Po.memoizedState=bo=x:bo=bo.next=x}return bo}function Sa(x,S){return typeof S=="function"?S(x):S}function Wa(x){var S=So(),U=S.queue;if(U===null)throw Error(le(311));U.lastRenderedReducer=x;var V=da,te=V.baseQueue,de=U.pending;if(de!==null){if(te!==null){var Je=te.next;te.next=de.next,de.next=Je}V.baseQueue=te=de,U.pending=null}if(te!==null){de=te.next,V=V.baseState;var Et=Je=null,Wt=null,Pn=de;do{var Mr=Pn.lane;if((Ku&Mr)===Mr)Wt!==null&&(Wt=Wt.next={lane:0,action:Pn.action,hasEagerState:Pn.hasEagerState,eagerState:Pn.eagerState,next:null}),V=Pn.hasEagerState?Pn.eagerState:x(V,Pn.action);else{var di={lane:Mr,action:Pn.action,hasEagerState:Pn.hasEagerState,eagerState:Pn.eagerState,next:null};Wt===null?(Et=Wt=di,Je=V):Wt=Wt.next=di,Po.lanes|=Mr,Fp|=Mr}Pn=Pn.next}while(Pn!==null&&Pn!==de);Wt===null?Je=V:Wt.next=Et,Ua(V,S.memoizedState)||(As=!0),S.memoizedState=V,S.baseState=Je,S.baseQueue=Wt,U.lastRenderedState=V}if(x=U.interleaved,x!==null){te=x;do de=te.lane,Po.lanes|=de,Fp|=de,te=te.next;while(te!==x)}else te===null&&(U.lanes=0);return[S.memoizedState,U.dispatch]}function Sl(x){var S=So(),U=S.queue;if(U===null)throw Error(le(311));U.lastRenderedReducer=x;var V=U.dispatch,te=U.pending,de=S.memoizedState;if(te!==null){U.pending=null;var Je=te=te.next;do de=x(de,Je.action),Je=Je.next;while(Je!==te);Ua(de,S.memoizedState)||(As=!0),S.memoizedState=de,S.baseQueue===null&&(S.baseState=de),U.lastRenderedState=de}return[de,V]}function Cc(){}function ou(x,S){var U=Po,V=So(),te=S(),de=!Ua(V.memoizedState,te);if(de&&(V.memoizedState=te,As=!0),V=V.queue,xp(Sc.bind(null,U,V,x),[x]),V.getSnapshot!==S||de||bo!==null&&bo.memoizedState.tag&1){if(U.flags|=2048,wl(9,Yu.bind(null,U,V,te,S),void 0,null),Wo===null)throw Error(le(349));Ku&30||jl(U,S,te)}return te}function jl(x,S,U){x.flags|=16384,x={getSnapshot:S,value:U},S=Po.updateQueue,S===null?(S={lastEffect:null,stores:null},Po.updateQueue=S,S.stores=[x]):(U=S.stores,U===null?S.stores=[x]:U.push(x))}function Yu(x,S,U,V){S.value=U,S.getSnapshot=V,Nd(S)&&Kl(x,1,-1)}function Sc(x,S,U){return U(function(){Nd(S)&&Kl(x,1,-1)})}function Nd(x){var S=x.getSnapshot;x=x.value;try{var U=S();return!Ua(x,U)}catch(V){return!0}}function Wl(x){var S=rs();return typeof x=="function"&&(x=x()),S.memoizedState=S.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:x},S.queue=x,x=x.dispatch=Sp.bind(null,Po,x),[S.memoizedState,x]}function wl(x,S,U,V){return x={tag:x,create:S,destroy:U,deps:V,next:null},S=Po.updateQueue,S===null?(S={lastEffect:null,stores:null},Po.updateQueue=S,S.lastEffect=x.next=x):(U=S.lastEffect,U===null?S.lastEffect=x.next=x:(V=U.next,U.next=x,x.next=V,S.lastEffect=x)),x}function Va(){return So().memoizedState}function wa(x,S,U,V){var te=rs();Po.flags|=x,te.memoizedState=wl(1|S,U,void 0,V===void 0?null:V)}function Qa(x,S,U,V){var te=So();V=V===void 0?null:V;var de=void 0;if(da!==null){var Je=da.memoizedState;if(de=Je.destroy,V!==null&&In(V,Je.deps)){te.memoizedState=wl(S,U,de,V);return}}Po.flags|=x,te.memoizedState=wl(1|S,U,de,V)}function Kc(x,S){return wa(8390656,8,x,S)}function xp(x,S){return Qa(2048,8,x,S)}function wc(x,S){return Qa(4,2,x,S)}function Hd(x,S){return Qa(4,4,x,S)}function su(x,S){if(typeof S=="function")return x=x(),S(x),function(){S(null)};if(S!=null)return x=x(),S.current=x,function(){S.current=null}}function Hh(x,S,U){return U=U!=null?U.concat([x]):null,Qa(4,4,su.bind(null,S,x),U)}function Cp(){}function si(x,S){var U=So();S=S===void 0?null:S;var V=U.memoizedState;return V!==null&&S!==null&&In(S,V[1])?V[0]:(U.memoizedState=[x,S],x)}function ha(x,S){var U=So();S=S===void 0?null:S;var V=U.memoizedState;return V!==null&&S!==null&&In(S,V[1])?V[0]:(x=x(),U.memoizedState=[x,S],x)}function ul(x,S){var U=wi;wi=U!==0&&4>U?U:4,x(!0);var V=Ca.transition;Ca.transition={};try{x(!1),S()}finally{wi=U,Ca.transition=V}}function jd(){return So().memoizedState}function p1(x,S,U){var V=Fc(x);U={lane:V,action:U,hasEagerState:!1,eagerState:null,next:null},Wd(x)?dl(S,U):(ng(x,S,U),U=fl(),x=Kl(x,V,U),x!==null&&rg(x,S,V))}function Sp(x,S,U){var V=Fc(x),te={lane:V,action:U,hasEagerState:!1,eagerState:null,next:null};if(Wd(x))dl(S,te);else{ng(x,S,te);var de=x.alternate;if(x.lanes===0&&(de===null||de.lanes===0)&&(de=S.lastRenderedReducer,de!==null))try{var Je=S.lastRenderedState,Et=de(Je,U);if(te.hasEagerState=!0,te.eagerState=Et,Ua(Et,Je))return}catch(Wt){}finally{}U=fl(),x=Kl(x,V,U),x!==null&&rg(x,S,V)}}function Wd(x){var S=x.alternate;return x===Po||S!==null&&S===Po}function dl(x,S){Xe=Zs=!0;var U=x.pending;U===null?S.next=S:(S.next=U.next,U.next=S),x.pending=S}function ng(x,S,U){Wo!==null&&x.mode&1&&!(Wr&2)?(x=S.interleaved,x===null?(U.next=U,Na===null?Na=[S]:Na.push(S)):(U.next=x.next,x.next=U),S.interleaved=U):(x=S.pending,x===null?U.next=U:(U.next=x.next,x.next=U),S.pending=U)}function rg(x,S,U){if(U&4194240){var V=S.lanes;V&=x.pendingLanes,U|=V,S.lanes=U,Od(x,U)}}var wp={readContext:Hl,useCallback:Lo,useContext:Lo,useEffect:Lo,useImperativeHandle:Lo,useInsertionEffect:Lo,useLayoutEffect:Lo,useMemo:Lo,useReducer:Lo,useRef:Lo,useState:Lo,useDebugValue:Lo,useDeferredValue:Lo,useTransition:Lo,useMutableSource:Lo,useSyncExternalStore:Lo,useId:Lo,unstable_isNewReconciler:!1},jh={readContext:Hl,useCallback:function(x,S){return rs().memoizedState=[x,S===void 0?null:S],x},useContext:Hl,useEffect:Kc,useImperativeHandle:function(x,S,U){return U=U!=null?U.concat([x]):null,wa(4194308,4,su.bind(null,S,x),U)},useLayoutEffect:function(x,S){return wa(4194308,4,x,S)},useInsertionEffect:function(x,S){return wa(4,2,x,S)},useMemo:function(x,S){var U=rs();return S=S===void 0?null:S,x=x(),U.memoizedState=[x,S],x},useReducer:function(x,S,U){var V=rs();return S=U!==void 0?U(S):S,V.memoizedState=V.baseState=S,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:S},V.queue=x,x=x.dispatch=p1.bind(null,Po,x),[V.memoizedState,x]},useRef:function(x){var S=rs();return x={current:x},S.memoizedState=x},useState:Wl,useDebugValue:Cp,useDeferredValue:function(x){var S=Wl(x),U=S[0],V=S[1];return Kc(function(){var te=Ca.transition;Ca.transition={};try{V(x)}finally{Ca.transition=te}},[x]),U},useTransition:function(){var x=Wl(!1),S=x[0];return x=ul.bind(null,x[1]),rs().memoizedState=x,[S,x]},useMutableSource:function(){},useSyncExternalStore:function(x,S,U){var V=Po,te=rs();if(jo){if(U===void 0)throw Error(le(407));U=U()}else{if(U=S(),Wo===null)throw Error(le(349));Ku&30||jl(V,S,U)}te.memoizedState=U;var de={value:U,getSnapshot:S};return te.queue=de,Kc(Sc.bind(null,V,de,x),[x]),V.flags|=2048,wl(9,Yu.bind(null,V,de,U,S),void 0,null),U},useId:function(){var x=rs(),S=Wo.identifierPrefix;if(jo){var U=bc,V=Ec;U=(V&~(1<<32-Ho(V)-1)).toString(32)+U,S=":"+S+"R"+U,U=Mp++,0<U&&(S+="H"+U.toString(32)),S+=":"}else U=Nh++,S=":"+S+"r"+U.toString(32)+":";return x.memoizedState=S},unstable_isNewReconciler:!1},u1={readContext:Hl,useCallback:si,useContext:Hl,useEffect:xp,useImperativeHandle:Hh,useInsertionEffect:wc,useLayoutEffect:Hd,useMemo:ha,useReducer:Wa,useRef:Va,useState:function(){return Wa(Sa)},useDebugValue:Cp,useDeferredValue:function(x){var S=Wa(Sa),U=S[0],V=S[1];return xp(function(){var te=Ca.transition;Ca.transition={};try{V(x)}finally{Ca.transition=te}},[x]),U},useTransition:function(){var x=Wa(Sa)[0],S=So().memoizedState;return[x,S]},useMutableSource:Cc,useSyncExternalStore:ou,useId:jd,unstable_isNewReconciler:!1},Wh={readContext:Hl,useCallback:si,useContext:Hl,useEffect:xp,useImperativeHandle:Hh,useInsertionEffect:wc,useLayoutEffect:Hd,useMemo:ha,useReducer:Sl,useRef:Va,useState:function(){return Sl(Sa)},useDebugValue:Cp,useDeferredValue:function(x){var S=Sl(Sa),U=S[0],V=S[1];return xp(function(){var te=Ca.transition;Ca.transition={};try{V(x)}finally{Ca.transition=te}},[x]),U},useTransition:function(){var x=Sl(Sa)[0],S=So().memoizedState;return[x,S]},useMutableSource:Cc,useSyncExternalStore:ou,useId:jd,unstable_isNewReconciler:!1};function Yc(x,S){try{var U="",V=S;do U+=Dh(V),V=V.return;while(V);var te=U}catch(de){te=`
Error generating stack: `+de.message+`
`+de.stack}return{value:x,source:S,stack:te}}function Ta(x,S){try{w.error(S.value)}catch(U){setTimeout(function(){throw U})}}var Vd=typeof WeakMap=="function"?WeakMap:Map;function au(x,S,U){U=sc(-1,U),U.tag=3,U.payload={element:null};var V=S.value;return U.callback=function(){qh||(qh=!0,_u=V),Ta(x,S)},U}function Qd(x,S,U){U=sc(-1,U),U.tag=3;var V=x.type.getDerivedStateFromError;if(typeof V=="function"){var te=S.value;U.payload=function(){return V(te)},U.callback=function(){Ta(x,S)}}var de=x.stateNode;return de!==null&&typeof de.componentDidCatch=="function"&&(U.callback=function(){Ta(x,S),typeof V!="function"&&(Op===null?Op=new Set([this]):Op.add(this));var Je=S.stack;this.componentDidCatch(S.value,{componentStack:Je!==null?Je:""})}),U}function ig(x,S,U){var V=x.pingCache;if(V===null){V=x.pingCache=new Vd;var te=new Set;V.set(S,te)}else te=V.get(S),te===void 0&&(te=new Set,V.set(S,te));te.has(U)||(te.add(U),x=Mm.bind(null,x,S,U),S.then(x,x))}function lu(x){do{var S;if((S=x.tag===13)&&(S=x.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return x;x=x.return}while(x!==null);return null}function og(x,S,U,V,te){return x.mode&1?(x.flags|=65536,x.lanes=te,x):(x===S?x.flags|=65536:(x.flags|=128,U.flags|=131072,U.flags&=-52805,U.tag===1&&(U.alternate===null?U.tag=17:(S=sc(-1,1),S.tag=2,fs(U,S))),U.lanes|=1),x)}function pc(x){x.flags|=4}function Em(x,S){if(x!==null&&x.child===S.child)return!0;if(S.flags&16)return!1;for(x=S.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var Jc,Ti,Xa,Tl;if(Kr)Jc=function(x,S){for(var U=S.child;U!==null;){if(U.tag===5||U.tag===6)Pi(x,U.stateNode);else if(U.tag!==4&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===S)break;for(;U.sibling===null;){if(U.return===null||U.return===S)return;U=U.return}U.sibling.return=U.return,U=U.sibling}},Ti=function(){},Xa=function(x,S,U,V,te){if(x=x.memoizedProps,x!==V){var de=S.stateNode,Je=Do(ja.current);U=Sn(de,U,x,V,te,Je),(S.updateQueue=U)&&pc(S)}},Tl=function(x,S,U,V){U!==V&&pc(S)};else if(ao){Jc=function(x,S,U,V){for(var te=S.child;te!==null;){if(te.tag===5){var de=te.stateNode;U&&V&&(de=fp(de,te.type,te.memoizedProps,te)),Pi(x,de)}else if(te.tag===6)de=te.stateNode,U&&V&&(de=$e(de,te.memoizedProps,te)),Pi(x,de);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)de=te.child,de!==null&&(de.return=te),Jc(x,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===S)break;for(;te.sibling===null;){if(te.return===null||te.return===S)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};var Xd=function(x,S,U,V){for(var te=S.child;te!==null;){if(te.tag===5){var de=te.stateNode;U&&V&&(de=fp(de,te.type,te.memoizedProps,te)),ll(x,de)}else if(te.tag===6)de=te.stateNode,U&&V&&(de=$e(de,te.memoizedProps,te)),ll(x,de);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)de=te.child,de!==null&&(de.return=te),Xd(x,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===S)break;for(;te.sibling===null;){if(te.return===null||te.return===S)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};Ti=function(x,S){var U=S.stateNode;if(!Em(x,S)){x=U.containerInfo;var V=_a(x);Xd(V,S,!1,!1),U.pendingChildren=V,pc(S),gc(x,V)}},Xa=function(x,S,U,V,te){var de=x.stateNode,Je=x.memoizedProps;if((x=Em(x,S))&&Je===V)S.stateNode=de;else{var Et=S.stateNode,Wt=Do(ja.current),Pn=null;Je!==V&&(Pn=Sn(Et,U,Je,V,te,Wt)),x&&Pn===null?S.stateNode=de:(de=No(de,Pn,U,Je,V,S,x,Et),Tn(de,U,V,te,Wt)&&pc(S),S.stateNode=de,x?pc(S):Jc(de,S,!1,!1))}},Tl=function(x,S,U,V){U!==V?(x=Do(Xc.current),U=Do(ja.current),S.stateNode=gr(V,x,U,S),pc(S)):S.stateNode=x.stateNode}}else Ti=function(){},Xa=function(){},Tl=function(){};function Ba(x,S){if(!jo)switch(x.tailMode){case"hidden":S=x.tail;for(var U=null;S!==null;)S.alternate!==null&&(U=S),S=S.sibling;U===null?x.tail=null:U.sibling=null;break;case"collapsed":U=x.tail;for(var V=null;U!==null;)U.alternate!==null&&(V=U),U=U.sibling;V===null?S||x.tail===null?x.tail=null:x.tail.sibling=null:V.sibling=null}}function ms(x){var S=x.alternate!==null&&x.alternate.child===x.child,U=0,V=0;if(S)for(var te=x.child;te!==null;)U|=te.lanes|te.childLanes,V|=te.subtreeFlags&14680064,V|=te.flags&14680064,te.return=x,te=te.sibling;else for(te=x.child;te!==null;)U|=te.lanes|te.childLanes,V|=te.subtreeFlags,V|=te.flags,te.return=x,te=te.sibling;return x.subtreeFlags|=V,x.childLanes=U,S}function Tp(x,S,U){var V=S.pendingProps;switch(_p(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(S),null;case 1:return ro(S.type)&&ns(),ms(S),null;case 3:return V=S.stateNode,cc(),Vi(hs),Vi(mo),Ji(),V.pendingContext&&(V.context=V.pendingContext,V.pendingContext=null),(x===null||x.child===null)&&(Ud(S)?pc(S):x===null||x.memoizedState.isDehydrated&&!(S.flags&256)||(S.flags|=1024,Yr!==null&&($h(Yr),Yr=null))),Ti(x,S),ms(S),null;case 5:xc(S),U=Do(Xc.current);var te=S.type;if(x!==null&&S.stateNode!=null)Xa(x,S,te,V,U),x.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!V){if(S.stateNode===null)throw Error(le(166));return ms(S),null}if(x=Do(ja.current),Ud(S)){if(!lo)throw Error(le(175));x=et(S.stateNode,S.type,S.memoizedProps,U,x,S,!ua),S.updateQueue=x,x!==null&&pc(S)}else{var de=Ir(te,V,U,x,S);Jc(de,S,!1,!1),S.stateNode=de,Tn(de,te,V,U,x)&&pc(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return ms(S),null;case 6:if(x&&S.stateNode!=null)Tl(x,S,x.memoizedProps,V);else{if(typeof V!="string"&&S.stateNode===null)throw Error(le(166));if(x=Do(Xc.current),U=Do(ja.current),Ud(S)){if(!lo)throw Error(le(176));if(x=S.stateNode,V=S.memoizedProps,(U=dt(x,V,S,!ua))&&(te=pl,te!==null))switch(de=(te.mode&1)!==0,te.tag){case 3:qt(te.stateNode.containerInfo,x,V,de);break;case 5:Cn(te.type,te.memoizedProps,te.stateNode,x,V,de)}U&&pc(S)}else S.stateNode=gr(V,x,U,S)}return ms(S),null;case 13:if(Vi(Eo),V=S.memoizedState,jo&&xa!==null&&S.mode&1&&!(S.flags&128)){for(x=xa;x;)x=ke(x);return ac(),S.flags|=98560,S}if(V!==null&&V.dehydrated!==null){if(V=Ud(S),x===null){if(!V)throw Error(le(318));if(!lo)throw Error(le(344));if(x=S.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(le(317));bt(x,S)}else ac(),!(S.flags&128)&&(S.memoizedState=null),S.flags|=4;return ms(S),null}return Yr!==null&&($h(Yr),Yr=null),S.flags&128?(S.lanes=U,S):(V=V!==null,U=!1,x===null?Ud(S):U=x.memoizedState!==null,V&&!U&&(S.child.flags|=8192,S.mode&1&&(x===null||Eo.current&1?Jo===0&&(Jo=3):nh())),S.updateQueue!==null&&(S.flags|=4),ms(S),null);case 4:return cc(),Ti(x,S),x===null&&Ss(S.stateNode.containerInfo),ms(S),null;case 10:return Ph(S.type._context),ms(S),null;case 17:return ro(S.type)&&ns(),ms(S),null;case 19:if(Vi(Eo),te=S.memoizedState,te===null)return ms(S),null;if(V=(S.flags&128)!==0,de=te.rendering,de===null)if(V)Ba(te,!1);else{if(Jo!==0||x!==null&&x.flags&128)for(x=S.child;x!==null;){if(de=Cl(x),de!==null){for(S.flags|=128,Ba(te,!1),x=de.updateQueue,x!==null&&(S.updateQueue=x,S.flags|=4),S.subtreeFlags=0,x=U,V=S.child;V!==null;)U=V,te=x,U.flags&=14680066,de=U.alternate,de===null?(U.childLanes=0,U.lanes=te,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=de.childLanes,U.lanes=de.lanes,U.child=de.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=de.memoizedProps,U.memoizedState=de.memoizedState,U.updateQueue=de.updateQueue,U.type=de.type,te=de.dependencies,U.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext}),V=V.sibling;return zi(Eo,Eo.current&1|2),S.child}x=x.sibling}te.tail!==null&&Ks()>od&&(S.flags|=128,V=!0,Ba(te,!1),S.lanes=4194304)}else{if(!V)if(x=Cl(de),x!==null){if(S.flags|=128,V=!0,x=x.updateQueue,x!==null&&(S.updateQueue=x,S.flags|=4),Ba(te,!0),te.tail===null&&te.tailMode==="hidden"&&!de.alternate&&!jo)return ms(S),null}else 2*Ks()-te.renderingStartTime>od&&U!==1073741824&&(S.flags|=128,V=!0,Ba(te,!1),S.lanes=4194304);te.isBackwards?(de.sibling=S.child,S.child=de):(x=te.last,x!==null?x.sibling=de:S.child=de,te.last=de)}return te.tail!==null?(S=te.tail,te.rendering=S,te.tail=S.sibling,te.renderingStartTime=Ks(),S.sibling=null,x=Eo.current,zi(Eo,V?x&1|2:x&1),S):(ms(S),null);case 22:case 23:return ef(),V=S.memoizedState!==null,x!==null&&x.memoizedState!==null!==V&&(S.flags|=8192),V&&S.mode&1?$s&1073741824&&(ms(S),Kr&&S.subtreeFlags&6&&(S.flags|=8192)):ms(S),null;case 24:return null;case 25:return null}throw Error(le(156,S.tag))}var cu=q.ReactCurrentOwner,As=!1;function wo(x,S,U,V){S.child=x===null?_m(S,null,U,V):Qu(S,x.child,U,V)}function Ka(x,S,U,V,te){U=U.render;var de=S.ref;return $p(S,te),V=Us(x,S,U,V,de,te),U=Oi(),x!==null&&!As?(S.updateQueue=x.updateQueue,S.flags&=-2053,x.lanes&=~te,Bc(x,S,te)):(jo&&U&&eg(S),S.flags|=1,wo(x,S,V,te),S.child)}function Ju(x,S,U,V,te){if(x===null){var de=U.type;return typeof de=="function"&&!rf(de)&&de.defaultProps===void 0&&U.compare===null&&U.defaultProps===void 0?(S.tag=15,S.type=de,Ya(x,S,de,V,te)):(x=of(U.type,null,V,S,S.mode,te),x.ref=S.ref,x.return=S,S.child=x)}if(de=x.child,!(x.lanes&te)){var Je=de.memoizedProps;if(U=U.compare,U=U!==null?U:Nu,U(Je,V)&&x.ref===S.ref)return Bc(x,S,te)}return S.flags|=1,x=Dp(de,V),x.ref=S.ref,x.return=S,S.child=x}function Ya(x,S,U,V,te){if(x!==null&&Nu(x.memoizedProps,V)&&x.ref===S.ref)if(As=!1,(x.lanes&te)!==0)x.flags&131072&&(As=!0);else return S.lanes=x.lanes,Bc(x,S,te);return Vh(x,S,U,V,te)}function Kd(x,S,U){var V=S.pendingProps,te=V.children,de=x!==null?x.memoizedState:null;if(V.mode==="hidden")if(!(S.mode&1))S.memoizedState={baseLanes:0,cachePool:null},zi(Ip,$s),$s|=U;else if(U&1073741824)S.memoizedState={baseLanes:0,cachePool:null},V=de!==null?de.baseLanes:U,zi(Ip,$s),$s|=V;else return x=de!==null?de.baseLanes|U:U,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:x,cachePool:null},S.updateQueue=null,zi(Ip,$s),$s|=x,null;else de!==null?(V=de.baseLanes|U,S.memoizedState=null):V=U,zi(Ip,$s),$s|=V;return wo(x,S,te,U),S.child}function fa(x,S){var U=S.ref;(x===null&&U!==null||x!==null&&x.ref!==U)&&(S.flags|=512,S.flags|=2097152)}function Vh(x,S,U,V,te){var de=ro(U)?cl:mo.current;return de=ws(S,de),$p(S,te),U=Us(x,S,U,V,de,te),V=Oi(),x!==null&&!As?(S.updateQueue=x.updateQueue,S.flags&=-2053,x.lanes&=~te,Bc(x,S,te)):(jo&&V&&eg(S),S.flags|=1,wo(x,S,U,te),S.child)}function Ra(x,S,U,V,te){if(ro(U)){var de=!0;ii(S)}else de=!1;if($p(S,te),S.stateNode===null)x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),_o(S,U,V),Gh(S,U,V,te),V=!0;else if(x===null){var Je=S.stateNode,Et=S.memoizedProps;Je.props=Et;var Wt=Je.context,Pn=U.contextType;typeof Pn=="object"&&Pn!==null?Pn=Hl(Pn):(Pn=ro(U)?cl:mo.current,Pn=ws(S,Pn));var Mr=U.getDerivedStateFromProps,di=typeof Mr=="function"||typeof Je.getSnapshotBeforeUpdate=="function";di||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(Et!==V||Wt!==Pn)&&Ld(S,Je,V,Pn),Qc=!1;var jr=S.memoizedState;Je.state=jr,Ma(S,V,Je,te),Wt=S.memoizedState,Et!==V||jr!==Wt||hs.current||Qc?(typeof Mr=="function"&&(yc(S,U,Mr,V),Wt=S.memoizedState),(Et=Qc||Ha(S,U,Et,V,jr,Wt,Pn))?(di||typeof Je.UNSAFE_componentWillMount!="function"&&typeof Je.componentWillMount!="function"||(typeof Je.componentWillMount=="function"&&Je.componentWillMount(),typeof Je.UNSAFE_componentWillMount=="function"&&Je.UNSAFE_componentWillMount()),typeof Je.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Je.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=V,S.memoizedState=Wt),Je.props=V,Je.state=Wt,Je.context=Pn,V=Et):(typeof Je.componentDidMount=="function"&&(S.flags|=4194308),V=!1)}else{Je=S.stateNode,$f(x,S),Et=S.memoizedProps,Pn=S.type===S.elementType?Et:Ys(S.type,Et),Je.props=Pn,di=S.pendingProps,jr=Je.context,Wt=U.contextType,typeof Wt=="object"&&Wt!==null?Wt=Hl(Wt):(Wt=ro(U)?cl:mo.current,Wt=ws(S,Wt));var To=U.getDerivedStateFromProps;(Mr=typeof To=="function"||typeof Je.getSnapshotBeforeUpdate=="function")||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(Et!==di||jr!==Wt)&&Ld(S,Je,V,Wt),Qc=!1,jr=S.memoizedState,Je.state=jr,Ma(S,V,Je,te);var Fr=S.memoizedState;Et!==di||jr!==Fr||hs.current||Qc?(typeof To=="function"&&(yc(S,U,To,V),Fr=S.memoizedState),(Pn=Qc||Ha(S,U,Pn,V,jr,Fr,Wt)||!1)?(Mr||typeof Je.UNSAFE_componentWillUpdate!="function"&&typeof Je.componentWillUpdate!="function"||(typeof Je.componentWillUpdate=="function"&&Je.componentWillUpdate(V,Fr,Wt),typeof Je.UNSAFE_componentWillUpdate=="function"&&Je.UNSAFE_componentWillUpdate(V,Fr,Wt)),typeof Je.componentDidUpdate=="function"&&(S.flags|=4),typeof Je.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Je.componentDidUpdate!="function"||Et===x.memoizedProps&&jr===x.memoizedState||(S.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||Et===x.memoizedProps&&jr===x.memoizedState||(S.flags|=1024),S.memoizedProps=V,S.memoizedState=Fr),Je.props=V,Je.state=Fr,Je.context=Wt,V=Pn):(typeof Je.componentDidUpdate!="function"||Et===x.memoizedProps&&jr===x.memoizedState||(S.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||Et===x.memoizedProps&&jr===x.memoizedState||(S.flags|=1024),V=!1)}return qc(x,S,U,V,de,te)}function qc(x,S,U,V,te,de){fa(x,S);var Je=(S.flags&128)!==0;if(!V&&!Je)return te&&Ul(S,U,!1),Bc(x,S,de);V=S.stateNode,cu.current=S;var Et=Je&&typeof U.getDerivedStateFromError!="function"?null:V.render();return S.flags|=1,x!==null&&Je?(S.child=Qu(S,x.child,null,de),S.child=Qu(S,null,Et,de)):wo(x,S,Et,de),S.memoizedState=V.state,te&&Ul(S,U,!0),S.child}function Yd(x){var S=x.stateNode;S.pendingContext?zs(x,S.pendingContext,S.pendingContext!==S.context):S.context&&zs(x,S.context,!1),lc(x,S.containerInfo)}function pr(x,S,U,V,te){return ac(),Vu(te),S.flags|=256,wo(x,S,U,V),S.child}var Ns={dehydrated:null,treeContext:null,retryLane:0};function Vl(x){return{baseLanes:x,cachePool:null}}function Tc(x,S,U){var V=S.pendingProps,te=Eo.current,de=!1,Je=(S.flags&128)!==0,Et;if((Et=Je)||(Et=x!==null&&x.memoizedState===null?!1:(te&2)!==0),Et?(de=!0,S.flags&=-129):(x===null||x.memoizedState!==null)&&(te|=1),zi(Eo,te&1),x===null)return Gd(S),x=S.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(S.mode&1?lr(x)?S.lanes=8:S.lanes=1073741824:S.lanes=1,null):(te=V.children,x=V.fallback,de?(V=S.mode,de=S.child,te={mode:"hidden",children:te},!(V&1)&&de!==null?(de.childLanes=0,de.pendingProps=te):de=pd(te,V,0,null),x=Pp(x,V,U,null),de.return=S,x.return=S,de.sibling=x,S.child=de,S.child.memoizedState=Vl(U),S.memoizedState=Ns,x):qu(S,te));if(te=x.memoizedState,te!==null){if(Et=te.dehydrated,Et!==null){if(Je)return S.flags&256?(S.flags&=-257,$u(x,S,U,Error(le(422)))):S.memoizedState!==null?(S.child=x.child,S.flags|=128,null):(de=V.fallback,te=S.mode,V=pd({mode:"visible",children:V.children},te,0,null),de=Pp(de,te,U,null),de.flags|=2,V.return=S,de.return=S,V.sibling=de,S.child=V,S.mode&1&&Qu(S,x.child,null,U),S.child.memoizedState=Vl(U),S.memoizedState=Ns,de);if(!(S.mode&1))S=$u(x,S,U,null);else if(lr(Et))S=$u(x,S,U,Error(le(419)));else if(V=(U&x.childLanes)!==0,As||V){if(V=Wo,V!==null){switch(U&-U){case 4:de=2;break;case 16:de=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:de=32;break;case 536870912:de=268435456;break;default:de=0}V=de&(V.suspendedLanes|U)?0:de,V!==0&&V!==te.retryLane&&(te.retryLane=V,Kl(x,V,-1))}nh(),S=$u(x,S,U,Error(le(421)))}else On(Et)?(S.flags|=128,S.child=x.child,S=rh.bind(null,x),He(Et,S),S=null):(U=te.treeContext,lo&&(xa=De(Et),pl=S,jo=!0,Yr=null,ua=!1,U!==null&&(Ml[xl++]=Ec,Ml[xl++]=bc,Ml[xl++]=vp,Ec=U.id,bc=U.overflow,vp=S)),S=qu(S,S.pendingProps.children),S.flags|=4096);return S}return de?(V=Zu(x,S,V.children,V.fallback,U),de=S.child,te=x.child.memoizedState,de.memoizedState=te===null?Vl(U):{baseLanes:te.baseLanes|U,cachePool:null},de.childLanes=x.childLanes&~U,S.memoizedState=Ns,V):(U=Ia(x,S,V.children,U),S.memoizedState=null,U)}return de?(V=Zu(x,S,V.children,V.fallback,U),de=S.child,te=x.child.memoizedState,de.memoizedState=te===null?Vl(U):{baseLanes:te.baseLanes|U,cachePool:null},de.childLanes=x.childLanes&~U,S.memoizedState=Ns,V):(U=Ia(x,S,V.children,U),S.memoizedState=null,U)}function qu(x,S){return S=pd({mode:"visible",children:S},x.mode,0,null),S.return=x,x.child=S}function Ia(x,S,U,V){var te=x.child;return x=te.sibling,U=Dp(te,{mode:"visible",children:U}),!(S.mode&1)&&(U.lanes=V),U.return=S,U.sibling=null,x!==null&&(V=S.deletions,V===null?(S.deletions=[x],S.flags|=16):V.push(x)),S.child=U}function Zu(x,S,U,V,te){var de=S.mode;x=x.child;var Je=x.sibling,Et={mode:"hidden",children:U};return!(de&1)&&S.child!==x?(U=S.child,U.childLanes=0,U.pendingProps=Et,S.deletions=null):(U=Dp(x,Et),U.subtreeFlags=x.subtreeFlags&14680064),Je!==null?V=Dp(Je,V):(V=Pp(V,de,te,null),V.flags|=2),V.return=S,U.return=S,U.sibling=V,S.child=U,V}function $u(x,S,U,V){return V!==null&&Vu(V),Qu(S,x.child,null,U),x=qu(S,S.pendingProps.children),x.flags|=2,S.memoizedState=null,x}function ys(x,S,U){x.lanes|=S;var V=x.alternate;V!==null&&(V.lanes|=S),Lh(x.return,S,U)}function pu(x,S,U,V,te){var de=x.memoizedState;de===null?x.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:V,tail:U,tailMode:te}:(de.isBackwards=S,de.rendering=null,de.renderingStartTime=0,de.last=V,de.tail=U,de.tailMode=te)}function uo(x,S,U){var V=S.pendingProps,te=V.revealOrder,de=V.tail;if(wo(x,S,V.children,U),V=Eo.current,V&2)V=V&1|2,S.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=S.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&ys(x,U,S);else if(x.tag===19)ys(x,U,S);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===S)break e;for(;x.sibling===null;){if(x.return===null||x.return===S)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}V&=1}if(zi(Eo,V),!(S.mode&1))S.memoizedState=null;else switch(te){case"forwards":for(U=S.child,te=null;U!==null;)x=U.alternate,x!==null&&Cl(x)===null&&(te=U),U=U.sibling;U=te,U===null?(te=S.child,S.child=null):(te=U.sibling,U.sibling=null),pu(S,!1,te,U,de);break;case"backwards":for(U=null,te=S.child,S.child=null;te!==null;){if(x=te.alternate,x!==null&&Cl(x)===null){S.child=te;break}x=te.sibling,te.sibling=U,U=te,te=x}pu(S,!0,U,null,de);break;case"together":pu(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function Bc(x,S,U){if(x!==null&&(S.dependencies=x.dependencies),Fp|=S.lanes,!(U&S.childLanes))return null;if(x!==null&&S.child!==x.child)throw Error(le(153));if(S.child!==null){for(x=S.child,U=Dp(x,x.pendingProps),S.child=U,U.return=S;x.sibling!==null;)x=x.sibling,U=U.sibling=Dp(x,x.pendingProps),U.return=S;U.sibling=null}return S.child}function d1(x,S,U){switch(S.tag){case 3:Yd(S),ac();break;case 5:bp(S);break;case 1:ro(S.type)&&ii(S);break;case 4:lc(S,S.stateNode.containerInfo);break;case 10:Wu(S,S.type._context,S.memoizedProps.value);break;case 13:var V=S.memoizedState;if(V!==null)return V.dehydrated!==null?(zi(Eo,Eo.current&1),S.flags|=128,null):U&S.child.childLanes?Tc(x,S,U):(zi(Eo,Eo.current&1),x=Bc(x,S,U),x!==null?x.sibling:null);zi(Eo,Eo.current&1);break;case 19:if(V=(U&S.childLanes)!==0,x.flags&128){if(V)return uo(x,S,U);S.flags|=128}var te=S.memoizedState;if(te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),zi(Eo,Eo.current),V)break;return null;case 22:case 23:return S.lanes=0,Kd(x,S,U)}return Bc(x,S,U)}function h1(x,S){switch(_p(S),S.tag){case 1:return ro(S.type)&&ns(),x=S.flags,x&65536?(S.flags=x&-65537|128,S):null;case 3:return cc(),Vi(hs),Vi(mo),Ji(),x=S.flags,x&65536&&!(x&128)?(S.flags=x&-65537|128,S):null;case 5:return xc(S),null;case 13:if(Vi(Eo),x=S.memoizedState,x!==null&&x.dehydrated!==null){if(S.alternate===null)throw Error(le(340));ac()}return x=S.flags,x&65536?(S.flags=x&-65537|128,S):null;case 19:return Vi(Eo),null;case 4:return cc(),null;case 10:return Ph(S.type._context),null;case 22:case 23:return ef(),null;case 24:return null;default:return null}}var Qh=!1,Zc=!1,Xh=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function uu(x,S){var U=x.ref;if(U!==null)if(typeof U=="function")try{U(null)}catch(V){qa(x,S,V)}else U.current=null}function wr(x,S,U){try{U()}catch(V){qa(x,S,V)}}var bm=!1;function Kh(x,S){for(Bn(x.containerInfo),Jn=S;Jn!==null;)if(x=Jn,S=x.child,(x.subtreeFlags&1028)!==0&&S!==null)S.return=x,Jn=S;else for(;Jn!==null;){x=Jn;try{var U=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var V=U.memoizedProps,te=U.memoizedState,de=x.stateNode,Je=de.getSnapshotBeforeUpdate(x.elementType===x.type?V:Ys(x.type,V),te);de.__reactInternalSnapshotBeforeUpdate=Je}break;case 3:Kr&&ds(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(Et){qa(x,x.return,Et)}if(S=x.sibling,S!==null){S.return=x.return,Jn=S;break}Jn=x.return}return U=bm,bm=!1,U}function os(x,S,U){var V=S.updateQueue;if(V=V!==null?V.lastEffect:null,V!==null){var te=V=V.next;do{if((te.tag&x)===x){var de=te.destroy;te.destroy=void 0,de!==void 0&&wr(S,U,de)}te=te.next}while(te!==V)}}function du(x,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var U=S=S.next;do{if((U.tag&x)===x){var V=U.create;U.destroy=V()}U=U.next}while(U!==S)}}function Bp(x){var S=x.ref;if(S!==null){var U=x.stateNode;switch(x.tag){case 5:x=cs(U);break;default:x=U}typeof S=="function"?S(x):S.current=x}}function hl(x,S,U){if(Ac&&typeof Ac.onCommitFiberUnmount=="function")try{Ac.onCommitFiberUnmount(qf,S)}catch(Je){}switch(S.tag){case 0:case 11:case 14:case 15:if(x=S.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var V=x=x.next;do{var te=V,de=te.destroy;te=te.tag,de!==void 0&&(te&2||te&4)&&wr(S,U,de),V=V.next}while(V!==x)}break;case 1:if(uu(S,U),x=S.stateNode,typeof x.componentWillUnmount=="function")try{x.props=S.memoizedProps,x.state=S.memoizedState,x.componentWillUnmount()}catch(Je){qa(S,U,Je)}break;case 5:uu(S,U);break;case 4:Kr?td(x,S,U):ao&&ao&&(S=S.stateNode.containerInfo,U=_a(S),Ea(S,U))}}function ed(x,S,U){for(var V=S;;)if(hl(x,V,U),V.child===null||Kr&&V.tag===4){if(V===S)break;for(;V.sibling===null;){if(V.return===null||V.return===S)return;V=V.return}V.sibling.return=V.return,V=V.sibling}else V.child.return=V,V=V.child}function Hs(x){var S=x.alternate;S!==null&&(x.alternate=null,Hs(S)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(S=x.stateNode,S!==null&&Vs(S)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function xi(x){return x.tag===5||x.tag===3||x.tag===4}function hu(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||xi(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function $c(x){if(Kr){e:{for(var S=x.return;S!==null;){if(xi(S))break e;S=S.return}throw Error(le(160))}var U=S;switch(U.tag){case 5:S=U.stateNode,U.flags&32&&(Fo(S),U.flags&=-33),U=hu(x),Jd(x,U,S);break;case 3:case 4:S=U.stateNode.containerInfo,U=hu(x),Rp(x,U,S);break;default:throw Error(le(161))}}}function Rp(x,S,U){var V=x.tag;if(V===5||V===6)x=x.stateNode,S?us(U,x,S):ka(U,x);else if(V!==4&&(x=x.child,x!==null))for(Rp(x,S,U),x=x.sibling;x!==null;)Rp(x,S,U),x=x.sibling}function Jd(x,S,U){var V=x.tag;if(V===5||V===6)x=x.stateNode,S?za(U,x,S):la(U,x);else if(V!==4&&(x=x.child,x!==null))for(Jd(x,S,U),x=x.sibling;x!==null;)Jd(x,S,U),x=x.sibling}function td(x,S,U){for(var V=S,te=!1,de,Je;;){if(!te){te=V.return;e:for(;;){if(te===null)throw Error(le(160));switch(de=te.stateNode,te.tag){case 5:Je=!1;break e;case 3:de=de.containerInfo,Je=!0;break e;case 4:de=de.containerInfo,Je=!0;break e}te=te.return}te=!0}if(V.tag===5||V.tag===6)ed(x,V,U),Je?al(de,V.stateNode):ho(de,V.stateNode);else if(V.tag===18)Je?je(de,V.stateNode):Me(de,V.stateNode);else if(V.tag===4){if(V.child!==null){de=V.stateNode.containerInfo,Je=!0,V.child.return=V,V=V.child;continue}}else if(hl(x,V,U),V.child!==null){V.child.return=V,V=V.child;continue}if(V===S)break;for(;V.sibling===null;){if(V.return===null||V.return===S)return;V=V.return,V.tag===4&&(te=!1)}V.sibling.return=V.return,V=V.sibling}}function fu(x,S){if(Kr){switch(S.tag){case 0:case 11:case 14:case 15:os(3,S,S.return),du(3,S),os(5,S,S.return);return;case 1:return;case 5:var U=S.stateNode;if(U!=null){var V=S.memoizedProps;x=x!==null?x.memoizedProps:V;var te=S.type,de=S.updateQueue;S.updateQueue=null,de!==null&&co(U,de,te,x,V,S)}return;case 6:if(S.stateNode===null)throw Error(le(162));U=S.memoizedProps,ps(S.stateNode,x!==null?x.memoizedProps:U,U);return;case 3:lo&&x!==null&&x.memoizedState.isDehydrated&&pn(S.stateNode.containerInfo);return;case 12:return;case 13:Ql(S);return;case 19:Ql(S);return;case 17:return}throw Error(le(163))}switch(S.tag){case 0:case 11:case 14:case 15:os(3,S,S.return),du(3,S),os(5,S,S.return);return;case 12:return;case 13:Ql(S);return;case 19:Ql(S);return;case 3:lo&&x!==null&&x.memoizedState.isDehydrated&&pn(S.stateNode.containerInfo);break;case 22:case 23:return}e:if(ao){switch(S.tag){case 1:case 5:case 6:break e;case 3:case 4:S=S.stateNode,Ea(S.containerInfo,S.pendingChildren);break e}throw Error(le(163))}}function Ql(x){var S=x.updateQueue;if(S!==null){x.updateQueue=null;var U=x.stateNode;U===null&&(U=x.stateNode=new Xh),S.forEach(function(V){var te=xm.bind(null,x,V);U.has(V)||(U.add(V),V.then(te,te))})}}function sg(x,S){for(Jn=S;Jn!==null;){S=Jn;var U=S.deletions;if(U!==null)for(var V=0;V<U.length;V++){var te=U[V];try{var de=x;Kr?td(de,te,S):ed(de,te,S);var Je=te.alternate;Je!==null&&(Je.return=null),te.return=null}catch(Or){qa(te,S,Or)}}if(U=S.child,S.subtreeFlags&12854&&U!==null)U.return=S,Jn=U;else for(;Jn!==null;){S=Jn;try{var Et=S.flags;if(Et&32&&Kr&&Fo(S.stateNode),Et&512){var Wt=S.alternate;if(Wt!==null){var Pn=Wt.ref;Pn!==null&&(typeof Pn=="function"?Pn(null):Pn.current=null)}}if(Et&8192)switch(S.tag){case 13:if(S.memoizedState!==null){var Mr=S.alternate;(Mr===null||Mr.memoizedState===null)&&(vu=Ks())}break;case 22:var di=S.memoizedState!==null,jr=S.alternate,To=jr!==null&&jr.memoizedState!==null;if(U=S,Kr){e:if(V=U,te=di,de=null,Kr)for(var Fr=V;;){if(Fr.tag===5){if(de===null){de=Fr;var Za=Fr.stateNode;te?ks(Za):Xs(Fr.stateNode,Fr.memoizedProps)}}else if(Fr.tag===6){if(de===null){var ql=Fr.stateNode;te?ca(ql):Oo(ql,Fr.memoizedProps)}}else if((Fr.tag!==22&&Fr.tag!==23||Fr.memoizedState===null||Fr===V)&&Fr.child!==null){Fr.child.return=Fr,Fr=Fr.child;continue}if(Fr===V)break;for(;Fr.sibling===null;){if(Fr.return===null||Fr.return===V)break e;de===Fr&&(de=null),Fr=Fr.return}de===Fr&&(de=null),Fr.sibling.return=Fr.return,Fr=Fr.sibling}}if(di&&!To&&U.mode&1){Jn=U;for(var Dt=U.child;Dt!==null;){for(U=Jn=Dt;Jn!==null;){V=Jn;var Ct=V.child;switch(V.tag){case 0:case 11:case 14:case 15:os(4,V,V.return);break;case 1:uu(V,V.return);var Xt=V.stateNode;if(typeof Xt.componentWillUnmount=="function"){var ur=V.return;try{Xt.props=V.memoizedProps,Xt.state=V.memoizedState,Xt.componentWillUnmount()}catch(Or){qa(V,ur,Or)}}break;case 5:uu(V,V.return);break;case 22:if(V.memoizedState!==null){nd(U);continue}}Ct!==null?(Ct.return=V,Jn=Ct):nd(U)}Dt=Dt.sibling}}}switch(Et&4102){case 2:$c(S),S.flags&=-3;break;case 6:$c(S),S.flags&=-3,fu(S.alternate,S);break;case 4096:S.flags&=-4097;break;case 4100:S.flags&=-4097,fu(S.alternate,S);break;case 4:fu(S.alternate,S)}}catch(Or){qa(S,S.return,Or)}if(U=S.sibling,U!==null){U.return=S.return,Jn=U;break}Jn=S.return}}}function qd(x,S,U){Jn=x,Zd(x,S,U)}function Zd(x,S,U){for(var V=(x.mode&1)!==0;Jn!==null;){var te=Jn,de=te.child;if(te.tag===22&&V){var Je=te.memoizedState!==null||Qh;if(!Je){var Et=te.alternate,Wt=Et!==null&&Et.memoizedState!==null||Zc;Et=Qh;var Pn=Zc;if(Qh=Je,(Zc=Wt)&&!Pn)for(Jn=te;Jn!==null;)Je=Jn,Wt=Je.child,Je.tag===22&&Je.memoizedState!==null?ag(te):Wt!==null?(Wt.return=Je,Jn=Wt):ag(te);for(;de!==null;)Jn=de,Zd(de,S,U),de=de.sibling;Jn=te,Qh=Et,Zc=Pn}$d(x,S,U)}else te.subtreeFlags&8772&&de!==null?(de.return=te,Jn=de):$d(x,S,U)}}function $d(x){for(;Jn!==null;){var S=Jn;if(S.flags&8772){var U=S.alternate;try{if(S.flags&8772)switch(S.tag){case 0:case 11:case 15:Zc||du(5,S);break;case 1:var V=S.stateNode;if(S.flags&4&&!Zc)if(U===null)V.componentDidMount();else{var te=S.elementType===S.type?U.memoizedProps:Ys(S.type,U.memoizedProps);V.componentDidUpdate(te,U.memoizedState,V.__reactInternalSnapshotBeforeUpdate)}var de=S.updateQueue;de!==null&&Js(S,de,V);break;case 3:var Je=S.updateQueue;if(Je!==null){if(U=null,S.child!==null)switch(S.child.tag){case 5:U=cs(S.child.stateNode);break;case 1:U=S.child.stateNode}Js(S,Je,U)}break;case 5:var Et=S.stateNode;U===null&&S.flags&4&&Io(Et,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(lo&&S.memoizedState===null){var Wt=S.alternate;if(Wt!==null){var Pn=Wt.memoizedState;if(Pn!==null){var Mr=Pn.dehydrated;Mr!==null&&ln(Mr)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(le(163))}Zc||S.flags&512&&Bp(S)}catch(di){qa(S,S.return,di)}}if(S===x){Jn=null;break}if(U=S.sibling,U!==null){U.return=S.return,Jn=U;break}Jn=S.return}}function nd(x){for(;Jn!==null;){var S=Jn;if(S===x){Jn=null;break}var U=S.sibling;if(U!==null){U.return=S.return,Jn=U;break}Jn=S.return}}function ag(x){for(;Jn!==null;){var S=Jn;try{switch(S.tag){case 0:case 11:case 15:var U=S.return;try{du(4,S)}catch(Wt){qa(S,U,Wt)}break;case 1:var V=S.stateNode;if(typeof V.componentDidMount=="function"){var te=S.return;try{V.componentDidMount()}catch(Wt){qa(S,te,Wt)}}var de=S.return;try{Bp(S)}catch(Wt){qa(S,de,Wt)}break;case 5:var Je=S.return;try{Bp(S)}catch(Wt){qa(S,Je,Wt)}}}catch(Wt){qa(S,S.return,Wt)}if(S===x){Jn=null;break}var Et=S.sibling;if(Et!==null){Et.return=S.return,Jn=Et;break}Jn=S.return}}var rd=0,Yh=1,uc=2,gu=3,fo=4;if(typeof Symbol=="function"&&Symbol.for){var mu=Symbol.for;rd=mu("selector.component"),Yh=mu("selector.has_pseudo_class"),uc=mu("selector.role"),gu=mu("selector.test_id"),fo=mu("selector.text")}function ep(x){var S=sa(x);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(le(364));return S}if(x=Ui(x),x===null)throw Error(le(362));return x.stateNode.current}function Rc(x,S){switch(S.$$typeof){case rd:if(x.type===S.value)return!0;break;case Yh:e:{S=S.value,x=[x,0];for(var U=0;U<x.length;){var V=x[U++],te=x[U++],de=S[te];if(V.tag!==5||!Ko(V)){for(;de!=null&&Rc(V,de);)te++,de=S[te];if(te===S.length){S=!0;break e}else for(V=V.child;V!==null;)x.push(V,te),V=V.sibling}}S=!1}return S;case uc:if(x.tag===5&&Br(x.stateNode,S.value))return!0;break;case fo:if((x.tag===5||x.tag===6)&&(x=Qs(x),x!==null&&0<=x.indexOf(S.value)))return!0;break;case gu:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(le(365))}return!1}function Bl(x){switch(x.$$typeof){case rd:return"<"+(vn(x.value)||"Unknown")+">";case Yh:return":has("+(Bl(x)||"")+")";case uc:return'[role="'+x.value+'"]';case fo:return'"'+x.value+'"';case gu:return'[data-testname="'+x.value+'"]';default:throw Error(le(365))}}function vs(x,S){var U=[];x=[x,0];for(var V=0;V<x.length;){var te=x[V++],de=x[V++],Je=S[de];if(te.tag!==5||!Ko(te)){for(;Je!=null&&Rc(te,Je);)de++,Je=S[de];if(de===S.length)U.push(te);else for(te=te.child;te!==null;)x.push(te,de),te=te.sibling}}return U}function id(x,S){if(!ts)throw Error(le(363));x=ep(x),x=vs(x,S),S=[],x=Array.from(x);for(var U=0;U<x.length;){var V=x[U++];if(V.tag===5)Ko(V)||S.push(V.stateNode);else for(V=V.child;V!==null;)x.push(V),V=V.sibling}return S}var Jh=Math.ceil,Au=q.ReactCurrentDispatcher,lg=q.ReactCurrentOwner,Yo=q.ReactCurrentBatchConfig,Wr=0,Wo=null,Gi=null,ss=0,$s=0,Ip=Hi(0),Jo=0,yu=null,Fp=0,go=0,ga=0,Fa=null,_s=null,vu=0,od=1/0;function Ic(){od=Ks()+500}var qh=!1,_u=null,Op=null,sd=!1,Xl=null,eh=0,Eu=0,th=null,ad=-1,cg=0;function fl(){return Wr&6?Ks():ad!==-1?ad:ad=Ks()}function Fc(x){return x.mode&1?Wr&2&&ss!==0?ss&-ss:Zf.transition!==null?(cg===0&&(x=mc,mc<<=1,!(mc&4194240)&&(mc=64),cg=x),cg):(x=wi,x!==0?x:aa()):1}function Kl(x,S,U){if(50<Eu)throw Eu=0,th=null,Error(le(185));var V=Zh(x,S);return V===null?null:(El(V,S,U),(!(Wr&2)||V!==Wo)&&(V===Wo&&(!(Wr&2)&&(go|=S),Jo===4&&tp(V,ss)),Ja(V,U),S===1&&Wr===0&&!(x.mode&1)&&(Ic(),Dd&&Nl())),V)}function Zh(x,S){x.lanes|=S;var U=x.alternate;for(U!==null&&(U.lanes|=S),U=x,x=x.return;x!==null;)x.childLanes|=S,U=x.alternate,U!==null&&(U.childLanes|=S),U=x,x=x.return;return U.tag===3?U.stateNode:null}function Ja(x,S){var U=x.callbackNode;Xf(x,S);var V=ku(x,x===Wo?ss:0);if(V===0)U!==null&&ui(U),x.callbackNode=null,x.callbackPriority=0;else if(S=V&-V,x.callbackPriority!==S){if(U!=null&&ui(U),S===1)x.tag===0?Uu(Yl.bind(null,x)):ym(Yl.bind(null,x)),va?Ls(function(){Wr===0&&Nl()}):ic(Gu,Nl),U=null;else{switch(Yf(V)){case 1:U=Gu;break;case 4:U=l1;break;case 16:U=Fh;break;case 536870912:U=c1;break;default:U=Fh}U=Cm(U,pg.bind(null,x))}x.callbackPriority=S,x.callbackNode=U}}function pg(x,S){if(ad=-1,cg=0,Wr&6)throw Error(le(327));var U=x.callbackNode;if(gl()&&x.callbackNode!==U)return null;var V=ku(x,x===Wo?ss:0);if(V===0)return null;if(V&30||V&x.expiredLanes||S)S=tf(x,V);else{S=V;var te=Wr;Wr|=2;var de=fg();(Wo!==x||ss!==S)&&(Ic(),dc(x,S));do try{Mu();break}catch(Et){hg(x,Et)}while(1);Zp(),Au.current=de,Wr=te,Gi!==null?S=0:(Wo=null,ss=0,S=Jo)}if(S!==0){if(S===2&&(te=Kf(x),te!==0&&(V=te,S=ug(x,te))),S===1)throw U=yu,dc(x,0),tp(x,V),Ja(x,Ks()),U;if(S===6)tp(x,V);else{if(te=x.current.alternate,!(V&30)&&!dg(te)&&(S=tf(x,V),S===2&&(de=Kf(x),de!==0&&(V=de,S=ug(x,de))),S===1))throw U=yu,dc(x,0),tp(x,V),Ja(x,Ks()),U;switch(x.finishedWork=te,x.finishedLanes=V,S){case 0:case 1:throw Error(le(345));case 2:np(x,_s);break;case 3:if(tp(x,V),(V&130023424)===V&&(S=vu+500-Ks(),10<S)){if(ku(x,0)!==0)break;if(te=x.suspendedLanes,(te&V)!==V){fl(),x.pingedLanes|=x.suspendedLanes&te;break}x.timeoutHandle=ni(np.bind(null,x,_s),S);break}np(x,_s);break;case 4:if(tp(x,V),(V&4194240)===V)break;for(S=x.eventTimes,te=-1;0<V;){var Je=31-Ho(V);de=1<<Je,Je=S[Je],Je>te&&(te=Je),V&=~de}if(V=te,V=Ks()-V,V=(120>V?120:480>V?480:1080>V?1080:1920>V?1920:3e3>V?3e3:4320>V?4320:1960*Jh(V/1960))-V,10<V){x.timeoutHandle=ni(np.bind(null,x,_s),V);break}np(x,_s);break;case 5:np(x,_s);break;default:throw Error(le(329))}}}return Ja(x,Ks()),x.callbackNode===U?pg.bind(null,x):null}function ug(x,S){var U=Fa;return x.current.memoizedState.isDehydrated&&(dc(x,S).flags|=256),x=tf(x,S),x!==2&&(S=_s,_s=U,S!==null&&$h(S)),x}function $h(x){_s===null?_s=x:_s.push.apply(_s,x)}function dg(x){for(var S=x;;){if(S.flags&16384){var U=S.updateQueue;if(U!==null&&(U=U.stores,U!==null))for(var V=0;V<U.length;V++){var te=U[V],de=te.getSnapshot;te=te.value;try{if(!Ua(de(),te))return!1}catch(Je){return!1}}}if(U=S.child,S.subtreeFlags&16384&&U!==null)U.return=S,S=U;else{if(S===x)break;for(;S.sibling===null;){if(S.return===null||S.return===x)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function tp(x,S){for(S&=~ga,S&=~go,x.suspendedLanes|=S,x.pingedLanes&=~S,x=x.expirationTimes;0<S;){var U=31-Ho(S),V=1<<U;x[U]=-1,S&=~V}}function Yl(x){if(Wr&6)throw Error(le(327));gl();var S=ku(x,0);if(!(S&1))return Ja(x,Ks()),null;var U=tf(x,S);if(x.tag!==0&&U===2){var V=Kf(x);V!==0&&(S=V,U=ug(x,V))}if(U===1)throw U=yu,dc(x,0),tp(x,S),Ja(x,Ks()),U;if(U===6)throw Error(le(345));return x.finishedWork=x.current.alternate,x.finishedLanes=S,np(x,_s),Ja(x,Ks()),null}function bu(x){Xl!==null&&Xl.tag===0&&!(Wr&6)&&gl();var S=Wr;Wr|=1;var U=Yo.transition,V=wi;try{if(Yo.transition=null,wi=1,x)return x()}finally{wi=V,Yo.transition=U,Wr=S,!(Wr&6)&&Nl()}}function ef(){$s=Ip.current,Vi(Ip)}function dc(x,S){x.finishedWork=null,x.finishedLanes=0;var U=x.timeoutHandle;if(U!==Li&&(x.timeoutHandle=Li,yr(U)),Gi!==null)for(U=Gi.return;U!==null;){var V=U;switch(_p(V),V.tag){case 1:V=V.type.childContextTypes,V!=null&&ns();break;case 3:cc(),Vi(hs),Vi(mo),Ji();break;case 5:xc(V);break;case 4:cc();break;case 13:Vi(Eo);break;case 19:Vi(Eo);break;case 10:Ph(V.type._context);break;case 22:case 23:ef()}U=U.return}if(Wo=x,Gi=x=Dp(x.current,null),ss=$s=S,Jo=0,yu=null,ga=go=Fp=0,_s=Fa=null,Na!==null){for(S=0;S<Na.length;S++)if(U=Na[S],V=U.interleaved,V!==null){U.interleaved=null;var te=V.next,de=U.pending;if(de!==null){var Je=de.next;de.next=te,V.next=Je}U.pending=V}Na=null}return x}function hg(x,S){do{var U=Gi;try{if(Zp(),qs.current=wp,Zs){for(var V=Po.memoizedState;V!==null;){var te=V.queue;te!==null&&(te.pending=null),V=V.next}Zs=!1}if(Ku=0,bo=da=Po=null,Xe=!1,Mp=0,lg.current=null,U===null||U.return===null){Jo=1,yu=S,Gi=null;break}e:{var de=x,Je=U.return,Et=U,Wt=S;if(S=ss,Et.flags|=32768,Wt!==null&&typeof Wt=="object"&&typeof Wt.then=="function"){var Pn=Wt,Mr=Et,di=Mr.tag;if(!(Mr.mode&1)&&(di===0||di===11||di===15)){var jr=Mr.alternate;jr?(Mr.updateQueue=jr.updateQueue,Mr.memoizedState=jr.memoizedState,Mr.lanes=jr.lanes):(Mr.updateQueue=null,Mr.memoizedState=null)}var To=lu(Je);if(To!==null){To.flags&=-257,og(To,Je,Et,de,S),To.mode&1&&ig(de,Pn,S),S=To,Wt=Pn;var Fr=S.updateQueue;if(Fr===null){var Za=new Set;Za.add(Wt),S.updateQueue=Za}else Fr.add(Wt);break e}else{if(!(S&1)){ig(de,Pn,S),nh();break e}Wt=Error(le(426))}}else if(jo&&Et.mode&1){var ql=lu(Je);if(ql!==null){!(ql.flags&65536)&&(ql.flags|=256),og(ql,Je,Et,de,S),Vu(Wt);break e}}de=Wt,Jo!==4&&(Jo=2),Fa===null?Fa=[de]:Fa.push(de),Wt=Yc(Wt,Et),Et=Je;do{switch(Et.tag){case 3:Et.flags|=65536,S&=-S,Et.lanes|=S;var Dt=au(Et,Wt,S);eu(Et,Dt);break e;case 1:de=Wt;var Ct=Et.type,Xt=Et.stateNode;if(!(Et.flags&128)&&(typeof Ct.getDerivedStateFromError=="function"||Xt!==null&&typeof Xt.componentDidCatch=="function"&&(Op===null||!Op.has(Xt)))){Et.flags|=65536,S&=-S,Et.lanes|=S;var ur=Qd(Et,de,S);eu(Et,ur);break e}}Et=Et.return}while(Et!==null)}nf(U)}catch(Or){S=Or,Gi===U&&U!==null&&(Gi=U=U.return);continue}break}while(1)}function fg(){var x=Au.current;return Au.current=wp,x===null?wp:x}function nh(){(Jo===0||Jo===3||Jo===2)&&(Jo=4),Wo===null||!(Fp&268435455)&&!(go&268435455)||tp(Wo,ss)}function tf(x,S){var U=Wr;Wr|=2;var V=fg();Wo===x&&ss===S||dc(x,S);do try{gg();break}catch(te){hg(x,te)}while(1);if(Zp(),Wr=U,Au.current=V,Gi!==null)throw Error(le(261));return Wo=null,ss=0,Jo}function gg(){for(;Gi!==null;)mg(Gi)}function Mu(){for(;Gi!==null&&!oc();)mg(Gi)}function mg(x){var S=cd(x.alternate,x,$s);x.memoizedProps=x.pendingProps,S===null?nf(x):Gi=S,lg.current=null}function nf(x){var S=x;do{var U=S.alternate;if(x=S.return,S.flags&32768){if(U=h1(U,S),U!==null){U.flags&=32767,Gi=U;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{Jo=6,Gi=null;return}}else if(U=Tp(U,S,$s),U!==null){Gi=U;return}if(S=S.sibling,S!==null){Gi=S;return}Gi=S=x}while(S!==null);Jo===0&&(Jo=5)}function np(x,S){var U=wi,V=Yo.transition;try{Yo.transition=null,wi=1,Ag(x,S,U)}finally{Yo.transition=V,wi=U}return null}function Ag(x,S,U){do gl();while(Xl!==null);if(Wr&6)throw Error(le(327));var V=x.finishedWork,te=x.finishedLanes;if(V===null)return null;if(x.finishedWork=null,x.finishedLanes=0,V===x.current)throw Error(le(177));x.callbackNode=null,x.callbackPriority=0;var de=V.lanes|V.childLanes;if(Ap(x,de),x===Wo&&(Gi=Wo=null,ss=0),!(V.subtreeFlags&2064)&&!(V.flags&2064)||sd||(sd=!0,Cm(Fh,function(){return gl(),null})),de=(V.flags&15990)!==0,V.subtreeFlags&15990||de){de=Yo.transition,Yo.transition=null;var Je=wi;wi=1;var Et=Wr;Wr|=4,lg.current=null,Kh(x,V),sg(x,V,te),hr(x.containerInfo),x.current=V,qd(V,x,te),Jf(),Wr=Et,wi=Je,Yo.transition=de}else x.current=V;if(sd&&(sd=!1,Xl=x,eh=te),de=x.pendingLanes,de===0&&(Op=null),Am(V.stateNode,U),Ja(x,Ks()),S!==null)for(U=x.onRecoverableError,V=0;V<S.length;V++)U(S[V]);if(qh)throw qh=!1,x=_u,_u=null,x;return eh&1&&x.tag!==0&&gl(),de=x.pendingLanes,de&1?x===th?Eu++:(Eu=0,th=x):Eu=0,Nl(),null}function gl(){if(Xl!==null){var x=Yf(eh),S=Yo.transition,U=wi;try{if(Yo.transition=null,wi=16>x?16:x,Xl===null)var V=!1;else{if(x=Xl,Xl=null,eh=0,Wr&6)throw Error(le(331));var te=Wr;for(Wr|=4,Jn=x.current;Jn!==null;){var de=Jn,Je=de.child;if(Jn.flags&16){var Et=de.deletions;if(Et!==null){for(var Wt=0;Wt<Et.length;Wt++){var Pn=Et[Wt];for(Jn=Pn;Jn!==null;){var Mr=Jn;switch(Mr.tag){case 0:case 11:case 15:os(8,Mr,de)}var di=Mr.child;if(di!==null)di.return=Mr,Jn=di;else for(;Jn!==null;){Mr=Jn;var jr=Mr.sibling,To=Mr.return;if(Hs(Mr),Mr===Pn){Jn=null;break}if(jr!==null){jr.return=To,Jn=jr;break}Jn=To}}}var Fr=de.alternate;if(Fr!==null){var Za=Fr.child;if(Za!==null){Fr.child=null;do{var ql=Za.sibling;Za.sibling=null,Za=ql}while(Za!==null)}}Jn=de}}if(de.subtreeFlags&2064&&Je!==null)Je.return=de,Jn=Je;else e:for(;Jn!==null;){if(de=Jn,de.flags&2048)switch(de.tag){case 0:case 11:case 15:os(9,de,de.return)}var Dt=de.sibling;if(Dt!==null){Dt.return=de.return,Jn=Dt;break e}Jn=de.return}}var Ct=x.current;for(Jn=Ct;Jn!==null;){Je=Jn;var Xt=Je.child;if(Je.subtreeFlags&2064&&Xt!==null)Xt.return=Je,Jn=Xt;else e:for(Je=Ct;Jn!==null;){if(Et=Jn,Et.flags&2048)try{switch(Et.tag){case 0:case 11:case 15:du(9,Et)}}catch(Or){qa(Et,Et.return,Or)}if(Et===Je){Jn=null;break e}var ur=Et.sibling;if(ur!==null){ur.return=Et.return,Jn=ur;break e}Jn=Et.return}}if(Wr=te,Nl(),Ac&&typeof Ac.onPostCommitFiberRoot=="function")try{Ac.onPostCommitFiberRoot(qf,x)}catch(Or){}V=!0}return V}finally{wi=U,Yo.transition=S}}return!1}function ld(x,S,U){S=Yc(U,S),S=au(x,S,1),fs(x,S),S=fl(),x=Zh(x,1),x!==null&&(El(x,1,S),Ja(x,S))}function qa(x,S,U){if(x.tag===3)ld(x,x,U);else for(;S!==null;){if(S.tag===3){ld(S,x,U);break}else if(S.tag===1){var V=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof V.componentDidCatch=="function"&&(Op===null||!Op.has(V))){x=Yc(U,x),x=Qd(S,x,1),fs(S,x),x=fl(),S=Zh(S,1),S!==null&&(El(S,1,x),Ja(S,x));break}}S=S.return}}function Mm(x,S,U){var V=x.pingCache;V!==null&&V.delete(S),S=fl(),x.pingedLanes|=x.suspendedLanes&U,Wo===x&&(ss&U)===U&&(Jo===4||Jo===3&&(ss&130023424)===ss&&500>Ks()-vu?dc(x,0):ga|=U),Ja(x,S)}function yg(x,S){S===0&&(x.mode&1?(S=gp,gp<<=1,!(gp&130023424)&&(gp=4194304)):S=1);var U=fl();x=Zh(x,S),x!==null&&(El(x,S,U),Ja(x,U))}function rh(x){var S=x.memoizedState,U=0;S!==null&&(U=S.retryLane),yg(x,U)}function xm(x,S){var U=0;switch(x.tag){case 13:var V=x.stateNode,te=x.memoizedState;te!==null&&(U=te.retryLane);break;case 19:V=x.stateNode;break;default:throw Error(le(314))}V!==null&&V.delete(S),yg(x,U)}var cd;cd=function(x,S,U){if(x!==null)if(x.memoizedProps!==S.pendingProps||hs.current)As=!0;else{if(!(x.lanes&U)&&!(S.flags&128))return As=!1,d1(x,S,U);As=!!(x.flags&131072)}else As=!1,jo&&S.flags&1048576&&zd(S,kd,S.index);switch(S.lanes=0,S.tag){case 2:var V=S.type;x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),x=S.pendingProps;var te=ws(S,mo.current);$p(S,U),te=Us(null,S,V,x,te,U);var de=Oi();return S.flags|=1,typeof te=="object"&&te!==null&&typeof te.render=="function"&&te.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,ro(V)?(de=!0,ii(S)):de=!1,S.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,kh(S),te.updater=vc,S.stateNode=te,te._reactInternals=S,Gh(S,V,x,U),S=qc(null,S,V,!0,de,U)):(S.tag=0,jo&&de&&eg(S),wo(null,S,te,U),S=S.child),S;case 16:V=S.elementType;e:{switch(x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),x=S.pendingProps,te=V._init,V=te(V._payload),S.type=V,te=S.tag=ih(V),x=Ys(V,x),te){case 0:S=Vh(null,S,V,x,U);break e;case 1:S=Ra(null,S,V,x,U);break e;case 11:S=Ka(null,S,V,x,U);break e;case 14:S=Ju(null,S,V,Ys(V.type,x),U);break e}throw Error(le(306,V,""))}return S;case 0:return V=S.type,te=S.pendingProps,te=S.elementType===V?te:Ys(V,te),Vh(x,S,V,te,U);case 1:return V=S.type,te=S.pendingProps,te=S.elementType===V?te:Ys(V,te),Ra(x,S,V,te,U);case 3:e:{if(Yd(S),x===null)throw Error(le(387));V=S.pendingProps,de=S.memoizedState,te=de.element,$f(x,S),Ma(S,V,null,U);var Je=S.memoizedState;if(V=Je.element,lo&&de.isDehydrated)if(de={element:V,isDehydrated:!1,cache:Je.cache,transitions:Je.transitions},S.updateQueue.baseState=de,S.memoizedState=de,S.flags&256){te=Error(le(423)),S=pr(x,S,V,U,te);break e}else if(V!==te){te=Error(le(424)),S=pr(x,S,V,U,te);break e}else for(lo&&(xa=at(S.stateNode.containerInfo),pl=S,jo=!0,Yr=null,ua=!1),U=_m(S,null,V,U),S.child=U;U;)U.flags=U.flags&-3|4096,U=U.sibling;else{if(ac(),V===te){S=Bc(x,S,U);break e}wo(x,S,V,U)}S=S.child}return S;case 5:return bp(S),x===null&&Gd(S),V=S.type,te=S.pendingProps,de=x!==null?x.memoizedProps:null,Je=te.children,Ln(V,te)?Je=null:de!==null&&Ln(V,de)&&(S.flags|=32),fa(x,S),wo(x,S,Je,U),S.child;case 6:return x===null&&Gd(S),null;case 13:return Tc(x,S,U);case 4:return lc(S,S.stateNode.containerInfo),V=S.pendingProps,x===null?S.child=Qu(S,null,V,U):wo(x,S,V,U),S.child;case 11:return V=S.type,te=S.pendingProps,te=S.elementType===V?te:Ys(V,te),Ka(x,S,V,te,U);case 7:return wo(x,S,S.pendingProps,U),S.child;case 8:return wo(x,S,S.pendingProps.children,U),S.child;case 12:return wo(x,S,S.pendingProps.children,U),S.child;case 10:e:{if(V=S.type._context,te=S.pendingProps,de=S.memoizedProps,Je=te.value,Wu(S,V,Je),de!==null)if(Ua(de.value,Je)){if(de.children===te.children&&!hs.current){S=Bc(x,S,U);break e}}else for(de=S.child,de!==null&&(de.return=S);de!==null;){var Et=de.dependencies;if(Et!==null){Je=de.child;for(var Wt=Et.firstContext;Wt!==null;){if(Wt.context===V){if(de.tag===1){Wt=sc(-1,U&-U),Wt.tag=2;var Pn=de.updateQueue;if(Pn!==null){Pn=Pn.shared;var Mr=Pn.pending;Mr===null?Wt.next=Wt:(Wt.next=Mr.next,Mr.next=Wt),Pn.pending=Wt}}de.lanes|=U,Wt=de.alternate,Wt!==null&&(Wt.lanes|=U),Lh(de.return,U,S),Et.lanes|=U;break}Wt=Wt.next}}else if(de.tag===10)Je=de.type===S.type?null:de.child;else if(de.tag===18){if(Je=de.return,Je===null)throw Error(le(341));Je.lanes|=U,Et=Je.alternate,Et!==null&&(Et.lanes|=U),Lh(Je,U,S),Je=de.sibling}else Je=de.child;if(Je!==null)Je.return=de;else for(Je=de;Je!==null;){if(Je===S){Je=null;break}if(de=Je.sibling,de!==null){de.return=Je.return,Je=de;break}Je=Je.return}de=Je}wo(x,S,te.children,U),S=S.child}return S;case 9:return te=S.type,V=S.pendingProps.children,$p(S,U),te=Hl(te),V=V(te),S.flags|=1,wo(x,S,V,U),S.child;case 14:return V=S.type,te=Ys(V,S.pendingProps),te=Ys(V.type,te),Ju(x,S,V,te,U);case 15:return Ya(x,S,S.type,S.pendingProps,U);case 17:return V=S.type,te=S.pendingProps,te=S.elementType===V?te:Ys(V,te),x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),S.tag=1,ro(V)?(x=!0,ii(S)):x=!1,$p(S,U),_o(S,V,te),Gh(S,V,te,U),qc(null,S,V,!0,x,U);case 19:return uo(x,S,U);case 22:return Kd(x,S,U)}throw Error(le(156,S.tag))};function Cm(x,S){return ic(x,S)}function Sm(x,S,U,V){this.tag=x,this.key=U,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=V,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jl(x,S,U,V){return new Sm(x,S,U,V)}function rf(x){return x=x.prototype,!(!x||!x.isReactComponent)}function ih(x){if(typeof x=="function")return rf(x)?1:0;if(x!=null){if(x=x.$$typeof,x===St)return 11;if(x===ft)return 14}return 2}function Dp(x,S){var U=x.alternate;return U===null?(U=Jl(x.tag,S,x.key,x.mode),U.elementType=x.elementType,U.type=x.type,U.stateNode=x.stateNode,U.alternate=x,x.alternate=U):(U.pendingProps=S,U.type=x.type,U.flags=0,U.subtreeFlags=0,U.deletions=null),U.flags=x.flags&14680064,U.childLanes=x.childLanes,U.lanes=x.lanes,U.child=x.child,U.memoizedProps=x.memoizedProps,U.memoizedState=x.memoizedState,U.updateQueue=x.updateQueue,S=x.dependencies,U.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},U.sibling=x.sibling,U.index=x.index,U.ref=x.ref,U}function of(x,S,U,V,te,de){var Je=2;if(V=x,typeof x=="function")rf(x)&&(Je=1);else if(typeof x=="string")Je=5;else e:switch(x){case xt:return Pp(U.children,te,de,S);case rt:Je=8,te|=8;break;case We:return x=Jl(12,U,S,te|2),x.elementType=We,x.lanes=de,x;case _t:return x=Jl(13,U,S,te),x.elementType=_t,x.lanes=de,x;case pt:return x=Jl(19,U,S,te),x.elementType=pt,x.lanes=de,x;case Rt:return pd(U,te,de,S);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case st:Je=10;break e;case yt:Je=9;break e;case St:Je=11;break e;case ft:Je=14;break e;case kt:Je=16,V=null;break e}throw Error(le(130,x==null?x:typeof x,""))}return S=Jl(Je,U,S,te),S.elementType=x,S.type=V,S.lanes=de,S}function Pp(x,S,U,V){return x=Jl(7,x,V,S),x.lanes=U,x}function pd(x,S,U,V){return x=Jl(22,x,V,S),x.elementType=Rt,x.lanes=U,x.stateNode={},x}function sf(x,S,U){return x=Jl(6,x,null,S),x.lanes=U,x}function oh(x,S,U){return S=Jl(4,x.children!==null?x.children:[],x.key,S),S.lanes=U,S.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},S}function wm(x,S,U,V,te){this.tag=S,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Li,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zu(0),this.expirationTimes=zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.identifierPrefix=V,this.onRecoverableError=te,lo&&(this.mutableSourceEagerHydrationData=null)}function vg(x,S,U,V,te,de,Je,Et,Wt){return x=new wm(x,S,U,Et,Wt),S===1?(S=1,de===!0&&(S|=8)):S=0,de=Jl(3,null,null,S),x.current=de,de.stateNode=x,de.memoizedState={element:V,isDehydrated:U,cache:null,transitions:null},kh(de),x}function _g(x){if(!x)return pa;x=x._reactInternals;e:{if(br(x)!==x||x.tag!==1)throw Error(le(170));var S=x;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(ro(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(le(171))}if(x.tag===1){var U=x.type;if(ro(U))return mi(x,U,S)}return S}function Eg(x){var S=x._reactInternals;if(S===void 0)throw typeof x.render=="function"?Error(le(188)):(x=Object.keys(x).join(","),Error(le(268,x)));return x=Di(S),x===null?null:x.stateNode}function rp(x,S){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var U=x.retryLane;x.retryLane=U!==0&&U<S?U:S}}function bg(x,S){rp(x,S),(x=x.alternate)&&rp(x,S)}function sh(x){return x=Di(x),x===null?null:x.stateNode}function af(){return null}return o.attemptContinuousHydration=function(x){if(x.tag===13){var S=fl();Kl(x,134217728,S),bg(x,134217728)}},o.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var S=fl(),U=Fc(x);Kl(x,U,S),bg(x,U)}},o.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var S=x.stateNode;if(S.current.memoizedState.isDehydrated){var U=mp(S.pendingLanes);U!==0&&(Od(S,U|1),Ja(S,Ks()),!(Wr&6)&&(Ic(),Nl()))}break;case 13:var V=fl();bu(function(){return Kl(x,1,V)}),bg(x,1)}},o.batchedUpdates=function(x,S){var U=Wr;Wr|=1;try{return x(S)}finally{Wr=U,Wr===0&&(Ic(),Dd&&Nl())}},o.createComponentSelector=function(x){return{$$typeof:rd,value:x}},o.createContainer=function(x,S,U,V,te,de,Je){return vg(x,S,!1,null,U,V,te,de,Je)},o.createHasPseudoClassSelector=function(x){return{$$typeof:Yh,value:x}},o.createHydrationContainer=function(x,S,U,V,te,de,Je,Et,Wt){return x=vg(U,V,!0,x,te,de,Je,Et,Wt),x.context=_g(null),U=x.current,V=fl(),te=Fc(U),de=sc(V,te),de.callback=S!=null?S:null,fs(U,de),x.current.lanes=te,El(x,te,V),Ja(x,V),x},o.createPortal=function(x,S,U){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:V==null?null:""+V,children:x,containerInfo:S,implementation:U}},o.createRoleSelector=function(x){return{$$typeof:uc,value:x}},o.createTestNameSelector=function(x){return{$$typeof:gu,value:x}},o.createTextSelector=function(x){return{$$typeof:fo,value:x}},o.deferredUpdates=function(x){var S=wi,U=Yo.transition;try{return Yo.transition=null,wi=16,x()}finally{wi=S,Yo.transition=U}},o.discreteUpdates=function(x,S,U,V,te){var de=wi,Je=Yo.transition;try{return Yo.transition=null,wi=1,x(S,U,V,te)}finally{wi=de,Yo.transition=Je,Wr===0&&Ic()}},o.findAllNodes=id,o.findBoundingRects=function(x,S){if(!ts)throw Error(le(363));S=id(x,S),x=[];for(var U=0;U<S.length;U++)x.push(Yi(S[U]));for(S=x.length-1;0<S;S--){U=x[S];for(var V=U.x,te=V+U.width,de=U.y,Je=de+U.height,Et=S-1;0<=Et;Et--)if(S!==Et){var Wt=x[Et],Pn=Wt.x,Mr=Pn+Wt.width,di=Wt.y,jr=di+Wt.height;if(V>=Pn&&de>=di&&te<=Mr&&Je<=jr){x.splice(S,1);break}else if(V!==Pn||U.width!==Wt.width||jr<de||di>Je){if(!(de!==di||U.height!==Wt.height||Mr<V||Pn>te)){Pn>V&&(Wt.width+=Pn-V,Wt.x=V),Mr<te&&(Wt.width=te-Pn),x.splice(S,1);break}}else{di>de&&(Wt.height+=di-de,Wt.y=de),jr<Je&&(Wt.height=Je-di),x.splice(S,1);break}}}return x},o.findHostInstance=Eg,o.findHostInstanceWithNoPortals=function(x){return x=Dn(x),x=x!==null?ti(x):null,x===null?null:x.stateNode},o.findHostInstanceWithWarning=function(x){return Eg(x)},o.flushControlled=function(x){var S=Wr;Wr|=1;var U=Yo.transition,V=wi;try{Yo.transition=null,wi=1,x()}finally{wi=V,Yo.transition=U,Wr=S,Wr===0&&(Ic(),Nl())}},o.flushPassiveEffects=gl,o.flushSync=bu,o.focusWithin=function(x,S){if(!ts)throw Error(le(363));for(x=ep(x),S=vs(x,S),S=Array.from(S),x=0;x<S.length;){var U=S[x++];if(!Ko(U)){if(U.tag===5&&Ni(U.stateNode))return!0;for(U=U.child;U!==null;)S.push(U),U=U.sibling}}return!1},o.getCurrentUpdatePriority=function(){return wi},o.getFindAllNodesFailureDescription=function(x,S){if(!ts)throw Error(le(363));var U=0,V=[];x=[ep(x),0];for(var te=0;te<x.length;){var de=x[te++],Je=x[te++],Et=S[Je];if((de.tag!==5||!Ko(de))&&(Rc(de,Et)&&(V.push(Bl(Et)),Je++,Je>U&&(U=Je)),Je<S.length))for(de=de.child;de!==null;)x.push(de,Je),de=de.sibling}if(U<S.length){for(x=[];U<S.length;U++)x.push(Bl(S[U]));return`findAllNodes was able to match part of the selector:
  `+(V.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},o.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return cs(x.child.stateNode);default:return x.child.stateNode}},o.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:sh,findFiberByHostInstance:x.findFiberByHostInstance||af,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")x=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)x=!0;else{try{qf=S.inject(x),Ac=S}catch(U){}x=!!S.checkDCE}}return x},o.isAlreadyRendering=function(){return!1},o.observeVisibleRects=function(x,S,U,V){if(!ts)throw Error(le(363));x=id(x,S);var te=ki(x,U,V).disconnect;return{disconnect:function(){te()}}},o.registerMutableSourceForHydration=function(x,S){var U=S._getVersion;U=U(S._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[S,U]:x.mutableSourceEagerHydrationData.push(S,U)},o.runWithPriority=function(x,S){var U=wi;try{return wi=x,S()}finally{wi=U}},o.shouldError=function(){return null},o.shouldSuspend=function(){return!1},o.updateContainer=function(x,S,U,V){var te=S.current,de=fl(),Je=Fc(te);return U=_g(U),S.context===null?S.context=U:S.pendingContext=U,S=sc(de,Je),S.payload={element:x},V=V===void 0?null:V,V!==null&&(S.callback=V),fs(te,S),x=Kl(te,Je,de),x!==null&&gs(x,te,Je),Je},o}},32576:function(u,n,A){"use strict";u.exports=A(46511)},76525:function(u,n,A){"use strict";u.exports=A(67287)},60053:function(u,n,A){"use strict";var w=A(25108);/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function d(Wn,nn){var Bn=Wn.length;Wn.push(nn);e:for(;0<Bn;){var hr=Bn-1>>>1,Ir=Wn[hr];if(0<E(Ir,nn))Wn[hr]=nn,Wn[Bn]=Ir,Bn=hr;else break e}}function m(Wn){return Wn.length===0?null:Wn[0]}function o(Wn){if(Wn.length===0)return null;var nn=Wn[0],Bn=Wn.pop();if(Bn!==nn){Wn[0]=Bn;e:for(var hr=0,Ir=Wn.length,Pi=Ir>>>1;hr<Pi;){var Tn=2*(hr+1)-1,Sn=Wn[Tn],Ln=Tn+1,gr=Wn[Ln];if(0>E(Sn,Bn))Ln<Ir&&0>E(gr,Sn)?(Wn[hr]=gr,Wn[Ln]=Bn,hr=Ln):(Wn[hr]=Sn,Wn[Tn]=Bn,hr=Tn);else if(Ln<Ir&&0>E(gr,Bn))Wn[hr]=gr,Wn[Ln]=Bn,hr=Ln;else break e}}return nn}function E(Wn,nn){var Bn=Wn.sortIndex-nn.sortIndex;return Bn!==0?Bn:Wn.id-nn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;n.unstable_now=function(){return j.now()}}else{var ee=Date,le=ee.now();n.unstable_now=function(){return ee.now()-le}}var q=[],pe=[],ue=1,xt=null,rt=3,We=!1,st=!1,yt=!1,St=typeof setTimeout=="function"?setTimeout:null,_t=typeof clearTimeout=="function"?clearTimeout:null,pt=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(Wn){for(var nn=m(pe);nn!==null;){if(nn.callback===null)o(pe);else if(nn.startTime<=Wn)o(pe),nn.sortIndex=nn.expirationTime,d(q,nn);else break;nn=m(pe)}}function kt(Wn){if(yt=!1,ft(Wn),!st)if(m(q)!==null)st=!0,vi(Rt);else{var nn=m(pe);nn!==null&&cs(kt,nn.startTime-Wn)}}function Rt(Wn,nn){st=!1,yt&&(yt=!1,_t(vn),vn=-1),We=!0;var Bn=rt;try{for(ft(nn),xt=m(q);xt!==null&&(!(xt.expirationTime>nn)||Wn&&!Rr());){var hr=xt.callback;if(typeof hr=="function"){xt.callback=null,rt=xt.priorityLevel;var Ir=hr(xt.expirationTime<=nn);nn=n.unstable_now(),typeof Ir=="function"?xt.callback=Ir:xt===m(q)&&o(q),ft(nn)}else o(q);xt=m(q)}if(xt!==null)var Pi=!0;else{var Tn=m(pe);Tn!==null&&cs(kt,Tn.startTime-nn),Pi=!1}return Pi}finally{xt=null,rt=Bn,We=!1}}var Jt=!1,Lt=null,vn=-1,nr=5,br=-1;function Rr(){return!(n.unstable_now()-br<nr)}function Dn(){if(Lt!==null){var Wn=n.unstable_now();br=Wn;var nn=!0;try{nn=Lt(!0,Wn)}finally{nn?Di():(Jt=!1,Lt=null)}}else Jt=!1}var Di;if(typeof pt=="function")Di=function(){pt(Dn)};else if(typeof MessageChannel!="undefined"){var Wi=new MessageChannel,ti=Wi.port2;Wi.port1.onmessage=Dn,Di=function(){ti.postMessage(null)}}else Di=function(){St(Dn,0)};function vi(Wn){Lt=Wn,Jt||(Jt=!0,Di())}function cs(Wn,nn){vn=St(function(){Wn(n.unstable_now())},nn)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Wn){Wn.callback=null},n.unstable_continueExecution=function(){st||We||(st=!0,vi(Rt))},n.unstable_forceFrameRate=function(Wn){0>Wn||125<Wn?w.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nr=0<Wn?Math.floor(1e3/Wn):5},n.unstable_getCurrentPriorityLevel=function(){return rt},n.unstable_getFirstCallbackNode=function(){return m(q)},n.unstable_next=function(Wn){switch(rt){case 1:case 2:case 3:var nn=3;break;default:nn=rt}var Bn=rt;rt=nn;try{return Wn()}finally{rt=Bn}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Wn,nn){switch(Wn){case 1:case 2:case 3:case 4:case 5:break;default:Wn=3}var Bn=rt;rt=Wn;try{return nn()}finally{rt=Bn}},n.unstable_scheduleCallback=function(Wn,nn,Bn){var hr=n.unstable_now();switch(typeof Bn=="object"&&Bn!==null?(Bn=Bn.delay,Bn=typeof Bn=="number"&&0<Bn?hr+Bn:hr):Bn=hr,Wn){case 1:var Ir=-1;break;case 2:Ir=250;break;case 5:Ir=1073741823;break;case 4:Ir=1e4;break;default:Ir=5e3}return Ir=Bn+Ir,Wn={id:ue++,callback:nn,priorityLevel:Wn,startTime:Bn,expirationTime:Ir,sortIndex:-1},Bn>hr?(Wn.sortIndex=Bn,d(pe,Wn),m(q)===null&&Wn===m(pe)&&(yt?(_t(vn),vn=-1):yt=!0,cs(kt,Bn-hr))):(Wn.sortIndex=Ir,d(q,Wn),st||We||(st=!0,vi(Rt))),Wn},n.unstable_shouldYield=Rr,n.unstable_wrapCallback=function(Wn){var nn=rt;return function(){var Bn=rt;rt=nn;try{return Wn.apply(this,arguments)}finally{rt=Bn}}}},63840:function(u,n,A){"use strict";u.exports=A(60053)},73466:function(u){(function(n,A){u.exports=A()})(this,function(){var n=function(){function A(pe){return m.appendChild(pe.dom),pe}function w(pe){for(var ue=0;ue<m.children.length;ue++)m.children[ue].style.display=ue===pe?"block":"none";d=pe}var d=0,m=document.createElement("div");m.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",m.addEventListener("click",function(pe){pe.preventDefault(),w(++d%m.children.length)},!1);var o=(performance||Date).now(),E=o,j=0,ee=A(new n.Panel("FPS","#0ff","#002")),le=A(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var q=A(new n.Panel("MB","#f08","#201"));return w(0),{REVISION:16,dom:m,addPanel:A,showPanel:w,begin:function(){o=(performance||Date).now()},end:function(){j++;var pe=(performance||Date).now();if(le.update(pe-o,200),pe>E+1e3&&(ee.update(1e3*j/(pe-E),100),E=pe,j=0,q)){var ue=performance.memory;q.update(ue.usedJSHeapSize/1048576,ue.jsHeapSizeLimit/1048576)}return pe},update:function(){o=this.end()},domElement:m,setMode:w}};return n.Panel=function(A,w,d){var m=1/0,o=0,E=Math.round,j=E(window.devicePixelRatio||1),ee=80*j,le=48*j,q=3*j,pe=2*j,ue=3*j,xt=15*j,rt=74*j,We=30*j,st=document.createElement("canvas");st.width=ee,st.height=le,st.style.cssText="width:80px;height:48px";var yt=st.getContext("2d");return yt.font="bold "+9*j+"px Helvetica,Arial,sans-serif",yt.textBaseline="top",yt.fillStyle=d,yt.fillRect(0,0,ee,le),yt.fillStyle=w,yt.fillText(A,q,pe),yt.fillRect(ue,xt,rt,We),yt.fillStyle=d,yt.globalAlpha=.9,yt.fillRect(ue,xt,rt,We),{dom:st,update:function(St,_t){m=Math.min(m,St),o=Math.max(o,St),yt.fillStyle=d,yt.globalAlpha=1,yt.fillRect(0,0,ee,xt),yt.fillStyle=w,yt.fillText(E(St)+" "+A+" ("+E(m)+"-"+E(o)+")",q,pe),yt.drawImage(st,ue+j,xt,rt-j,We,ue,xt,rt-j,We),yt.fillRect(ue+rt-j,xt,j,We),yt.fillStyle=d,yt.globalAlpha=.9,yt.fillRect(ue+rt-j,xt,j,E((1-St/_t)*We))}}},n})},90209:function(u,n,A){"use strict";A.r(n);var w=A(93379),d=A.n(w),m=A(7795),o=A.n(m),E=A(90569),j=A.n(E),ee=A(3565),le=A.n(ee),q=A(19216),pe=A.n(q),ue=A(44589),xt=A.n(ue),rt=A(88208),We={};We.styleTagTransform=xt(),We.setAttributes=le(),We.insert=j().bind(null,"head"),We.domAPI=o(),We.insertStyleElement=pe();var st=d()(rt.Z,We);n.default=rt.Z&&rt.Z.locals?rt.Z.locals:void 0},58139:function(u,n,A){"use strict";A.d(n,{MA:function(){return j},Rq:function(){return E},ZH:function(){return le}});const w=q=>typeof q=="object"&&typeof q.then=="function",d=[];function m(q,pe,ue=(xt,rt)=>xt===rt){if(q===pe)return!0;if(!q||!pe)return!1;const xt=q.length;if(pe.length!==xt)return!1;for(let rt=0;rt<xt;rt++)if(!ue(q[rt],pe[rt]))return!1;return!0}function o(q,pe=null,ue=!1,xt={}){pe===null&&(pe=[q]);for(const We of d)if(m(pe,We.keys,We.equal)){if(ue)return;if(Object.prototype.hasOwnProperty.call(We,"error"))throw We.error;if(Object.prototype.hasOwnProperty.call(We,"response"))return xt.lifespan&&xt.lifespan>0&&(We.timeout&&clearTimeout(We.timeout),We.timeout=setTimeout(We.remove,xt.lifespan)),We.response;if(!ue)throw We.promise}const rt={keys:pe,equal:xt.equal,remove:()=>{const We=d.indexOf(rt);We!==-1&&d.splice(We,1)},promise:(w(q)?q:q(...pe)).then(We=>{rt.response=We,xt.lifespan&&xt.lifespan>0&&(rt.timeout=setTimeout(rt.remove,xt.lifespan))}).catch(We=>rt.error=We)};if(d.push(rt),!ue)throw rt.promise}const E=(q,pe,ue)=>o(q,pe,!1,ue),j=(q,pe,ue)=>void o(q,pe,!0,ue),ee=q=>{var pe;return(pe=d.find(ue=>m(q,ue.keys,ue.equal)))==null?void 0:pe.response},le=q=>{if(q===void 0||q.length===0)d.splice(0,d.length);else{const pe=d.find(ue=>m(q,ue.keys,ue.equal));pe&&pe.remove()}}},14671:function(u,n,A){"use strict";A.d(n,{Z:function(){return j}});var w=A(67294),d=A(25108);function m(ee){let le;const q=new Set,pe=(yt,St)=>{const _t=typeof yt=="function"?yt(le):yt;if(_t!==le){const pt=le;le=St?_t:Object.assign({},le,_t),q.forEach(ft=>ft(le,pt))}},ue=()=>le,xt=(yt,St=ue,_t=Object.is)=>{d.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let pt=St(le);function ft(){const kt=St(le);if(!_t(pt,kt)){const Rt=pt;yt(pt=kt,Rt)}}return q.add(ft),()=>q.delete(ft)},st={setState:pe,getState:ue,subscribe:(yt,St,_t)=>St||_t?xt(yt,St,_t):(q.add(yt),()=>q.delete(yt)),destroy:()=>q.clear()};return le=ee(pe,ue,st),st}const E=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?w.useEffect:w.useLayoutEffect;function j(ee){const le=typeof ee=="function"?m(ee):ee,q=(pe=le.getState,ue=Object.is)=>{const[,xt]=(0,w.useReducer)(Jt=>Jt+1,0),rt=le.getState(),We=(0,w.useRef)(rt),st=(0,w.useRef)(pe),yt=(0,w.useRef)(ue),St=(0,w.useRef)(!1),_t=(0,w.useRef)();_t.current===void 0&&(_t.current=pe(rt));let pt,ft=!1;(We.current!==rt||st.current!==pe||yt.current!==ue||St.current)&&(pt=pe(rt),ft=!ue(_t.current,pt)),E(()=>{ft&&(_t.current=pt),We.current=rt,st.current=pe,yt.current=ue,St.current=!1});const kt=(0,w.useRef)(rt);E(()=>{const Jt=()=>{try{const vn=le.getState(),nr=st.current(vn);yt.current(_t.current,nr)||(We.current=vn,_t.current=nr,xt())}catch(vn){St.current=!0,xt()}},Lt=le.subscribe(Jt);return le.getState()!==kt.current&&Jt(),Lt},[]);const Rt=ft?pt:_t.current;return(0,w.useDebugValue)(Rt),Rt};return Object.assign(q,le),q[Symbol.iterator]=function(){d.warn("[useStore, api] = create() is deprecated and will be removed in v4");const pe=[q,le];return{next(){const ue=pe.length<=0;return{value:pe.shift(),done:ue}}}},q}},10434:function(u){function n(){return u.exports=n=Object.assign?Object.assign.bind():function(A){for(var w=1;w<arguments.length;w++){var d=arguments[w];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(A[m]=d[m])}return A},u.exports.__esModule=!0,u.exports.default=u.exports,n.apply(this,arguments)}u.exports=n,u.exports.__esModule=!0,u.exports.default=u.exports},10203:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jr:function(){return FaceLandmarker_1},n:function(){return FilesetResolver_1}});var console=__webpack_require__(25108),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vision={},fileset_resolver={};let supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;const WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function isSimdSupported(){return es(this,null,function*(){if(supportsSimd===void 0)try{yield WebAssembly.instantiate(WASM_SIMD_CHECK),supportsSimd=!0}catch(u){supportsSimd=!1}return supportsSimd})}function createFileset(u,n=""){return es(this,null,function*(){const A=(yield isSimdSupported())?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${n}/${u}_${A}.js`,wasmBinaryPath:`${n}/${u}_${A}.wasm`}})}class FilesetResolver$1{static isSimdSupported(){return isSimdSupported()}static forAudioTasks(n){return createFileset("audio",n)}static forTextTasks(n){return createFileset("text",n)}static forVisionTasks(n){return createFileset("vision",n)}}fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;const DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(u){return u=u||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:u.color}),u)}function resolve(u,n){return u instanceof Function?u(n):u}class DrawingUtils$1{constructor(n){this.ctx=n}static clamp(n,A,w){const d=Math.min(A,w),m=Math.max(A,w);return Math.max(d,Math.min(m,n))}static lerp(n,A,w,d,m){const o=d*(1-(n-A)/(w-A))+m*(1-(w-n)/(w-A));return DrawingUtils$1.clamp(o,d,m)}drawLandmarks(n,A){if(!n)return;const w=this.ctx,d=addDefaultOptions(A);w.save();const m=w.canvas;let o=0;for(const E of n){w.fillStyle=resolve(d.fillColor,{index:o,from:E}),w.strokeStyle=resolve(d.color,{index:o,from:E}),w.lineWidth=resolve(d.lineWidth,{index:o,from:E});const j=new Path2D;j.arc(E.x*m.width,E.y*m.height,resolve(d.radius,{index:o,from:E}),0,2*Math.PI),w.fill(j),w.stroke(j),++o}w.restore()}drawConnectors(n,A,w){if(!n||!A)return;const d=this.ctx,m=addDefaultOptions(w);d.save();const o=d.canvas;let E=0;for(const j of A){d.beginPath();const ee=n[j.start],le=n[j.end];ee&&le&&(d.strokeStyle=resolve(m.color,{index:E,from:ee,to:le}),d.lineWidth=resolve(m.lineWidth,{index:E,from:ee,to:le}),d.moveTo(ee.x*o.width,ee.y*o.height),d.lineTo(le.x*o.width,le.y*o.height)),++E,d.stroke()}d.restore()}drawBoundingBox(n,A){const w=this.ctx,d=addDefaultOptions(A);w.save(),w.beginPath(),w.lineWidth=resolve(d.lineWidth,{}),w.strokeStyle=resolve(d.color,{}),w.fillStyle=resolve(d.fillColor,{}),w.moveTo(n.originX,n.originY),w.lineTo(n.originX+n.width,n.originY),w.lineTo(n.originX+n.width,n.originY+n.height),w.lineTo(n.originX,n.originY+n.height),w.lineTo(n.originX,n.originY),w.stroke(),w.fill(),w.restore()}}drawing_utils.DrawingUtils=DrawingUtils$1;var image={},image_shader_context={};Object.defineProperty(image_shader_context,"__esModule",{value:!0}),image_shader_context.MPImageShaderContext=image_shader_context.assertNotNull=void 0;const VERTEX_SHADER=`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,FRAGMENT_SHADER=`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
   void main() {
     gl_FragColor = texture2D(inputTexture, vTex);
   }
 `;function assertNotNull(u,n){if(u===null)throw new Error(`Unable to obtain required WebGL resource: ${n}`);return u}image_shader_context.assertNotNull=assertNotNull;class MPImageShaderBuffers{constructor(n,A,w,d){this.gl=n,this.vertexArrayObject=A,this.vertexBuffer=w,this.textureBuffer=d}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}}class MPImageShaderContext{compileShader(n,A){const w=this.gl,d=assertNotNull(w.createShader(A),"Failed to create WebGL shader");if(w.shaderSource(d,n),w.compileShader(d),!w.getShaderParameter(d,w.COMPILE_STATUS)){const m=w.getShaderInfoLog(d);throw new Error(`Could not compile WebGL shader: ${m}`)}return w.attachShader(this.program,d),d}setupShaders(){const n=this.gl;if(this.program=assertNotNull(n.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(VERTEX_SHADER,n.VERTEX_SHADER),this.fragmentShader=this.compileShader(FRAGMENT_SHADER,n.FRAGMENT_SHADER),n.linkProgram(this.program),!n.getProgramParameter(this.program,n.LINK_STATUS)){const A=n.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${A}`)}this.aVertex=n.getAttribLocation(this.program,"aVertex"),this.aTex=n.getAttribLocation(this.program,"aTex")}createBuffers(n){const A=this.gl,w=assertNotNull(A.createVertexArray(),"Failed to create vertex array");A.bindVertexArray(w);const d=assertNotNull(A.createBuffer(),"Failed to create buffer");A.bindBuffer(A.ARRAY_BUFFER,d),A.enableVertexAttribArray(this.aVertex),A.vertexAttribPointer(this.aVertex,2,A.FLOAT,!1,0,0),A.bufferData(A.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),A.STATIC_DRAW);const m=assertNotNull(A.createBuffer(),"Failed to create buffer");A.bindBuffer(A.ARRAY_BUFFER,m),A.enableVertexAttribArray(this.aTex),A.vertexAttribPointer(this.aTex,2,A.FLOAT,!1,0,0);const o=n?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return A.bufferData(A.ARRAY_BUFFER,new Float32Array(o),A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,null),A.bindVertexArray(null),new MPImageShaderBuffers(A,w,d,m)}getShaderBuffers(n){return n?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(n){if(this.gl){if(n!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=n}run(n,A,w){this.maybeInitGL(n),this.program||this.setupShaders();const d=this.getShaderBuffers(A);n.useProgram(this.program),d.bind();const m=w();return d.unbind(),m}bindFramebuffer(n,A){this.maybeInitGL(n),this.framebuffer||(this.framebuffer=assertNotNull(n.createFramebuffer(),"Failed to create framebuffe.")),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0)}unbindFramebuffer(){var n;(n=this.gl)===null||n===void 0||n.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){const n=this.gl;n.deleteProgram(this.program),n.deleteShader(this.vertexShader),n.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}}image_shader_context.MPImageShaderContext=MPImageShaderContext,Object.defineProperty(image,"__esModule",{value:!0}),image.MPImage=void 0;const image_shader_context_1$2=image_shader_context,INSTANCE_COUNT_WARNING_THRESHOLD$1=250;var MPImageType;(function(u){u[u.IMAGE_DATA=0]="IMAGE_DATA",u[u.IMAGE_BITMAP=1]="IMAGE_BITMAP",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPImageType||(MPImageType={}));class MPImage$1{constructor(n,A,w,d,m,o,E){this.containers=n,this.ownsImageBitmap=A,this.ownsWebGLTexture=w,this.canvas=d,this.shaderContext=m,this.width=o,this.height=E,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--MPImage$1.instancesBeforeWarning,MPImage$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(MPImageType.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(MPImageType.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(MPImageType.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(n){switch(n){case MPImageType.IMAGE_DATA:return this.containers.find(A=>A instanceof ImageData);case MPImageType.IMAGE_BITMAP:return this.containers.find(A=>typeof ImageBitmap!="undefined"&&A instanceof ImageBitmap);case MPImageType.WEBGL_TEXTURE:return this.containers.find(A=>typeof WebGLTexture!="undefined"&&A instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const A of this.containers){let w;if(A instanceof ImageData)w=new ImageData(A.data,this.width,this.height);else if(A instanceof WebGLTexture){const d=this.getGL(),m=this.getShaderContext();d.activeTexture(d.TEXTURE1),w=(0,image_shader_context_1$2.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,w),this.configureTextureParams(),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,this.width,this.height,0,d.RGBA,d.UNSIGNED_BYTE,null),d.bindTexture(d.TEXTURE_2D,null),m.bindFramebuffer(d,w),m.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),m.unbindFramebuffer(),this.unbindTexture()}else{if(!(A instanceof ImageBitmap))throw new Error(`Type is not supported: ${A}`);this.convertToWebGLTexture(),this.bindTexture(),w=this.copyTextureToBitmap(),this.unbindTexture()}n.push(w)}return new MPImage$1(n,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$2.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$2.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let n=this.getContainer(MPImageType.IMAGE_BITMAP);return n||(this.convertToWebGLTexture(),n=this.convertWebGLTextureToImageBitmap(),this.containers.push(n),this.ownsImageBitmap=!0),n}convertToImageData(){let n=this.getContainer(MPImageType.IMAGE_DATA);if(!n){const A=this.getGL(),w=this.getShaderContext(),d=new Uint8Array(this.width*this.height*4),m=this.convertToWebGLTexture();w.bindFramebuffer(A,m),A.readPixels(0,0,this.width,this.height,A.RGBA,A.UNSIGNED_BYTE,d),w.unbindFramebuffer(),n=new ImageData(new Uint8ClampedArray(d.buffer),this.width,this.height),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPImageType.WEBGL_TEXTURE);if(!n){const A=this.getGL();n=this.bindTexture();const w=this.getContainer(MPImageType.IMAGE_BITMAP)||this.convertToImageData();A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,w),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let A=this.getContainer(MPImageType.WEBGL_TEXTURE);return A?n.bindTexture(n.TEXTURE_2D,A):(A=(0,image_shader_context_1$2.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(A),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,A),this.configureTextureParams()),A}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){const n=this.getGL();return this.getShaderContext().run(n,!0,()=>this.runWithResizedCanvas(()=>(n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))}convertWebGLTextureToImageBitmap(){this.bindTexture();const n=this.copyTextureToBitmap();return this.unbindTexture(),n}runWithResizedCanvas(n){const A=this.canvas;if(A.width===this.width&&A.height===this.height)return n();const w=A.width,d=A.height;A.width=this.width,A.height=this.height;const m=n();return A.width=w,A.height=d,m}close(){this.ownsImageBitmap&&this.getContainer(MPImageType.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPImageType.WEBGL_TEXTURE)),MPImage$1.instancesBeforeWarning=-1}}image.MPImage=MPImage$1,MPImage$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD$1;var mask={},platform_utils={};function isWebKit(u=navigator){const n=u.userAgent;return n.includes("Safari")&&!n.includes("Chrome")}function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isIOS=platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,platform_utils.isIOS=isIOS,Object.defineProperty(mask,"__esModule",{value:!0}),mask.MPMask=void 0;const image_shader_context_1$1=image_shader_context,platform_utils_1$1=platform_utils,INSTANCE_COUNT_WARNING_THRESHOLD=250;var MPMaskType;(function(u){u[u.UINT8_ARRAY=0]="UINT8_ARRAY",u[u.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPMaskType||(MPMaskType={}));class MPMask$1{constructor(n,A,w,d,m,o){this.containers=n,this.ownsWebGLTexture=A,this.canvas=w,this.shaderContext=d,this.width=m,this.height=o,this.ownsWebGLTexture&&(--MPMask$1.instancesBeforeWarning,MPMask$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(MPMaskType.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(MPMaskType.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(MPMaskType.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){const n=this.getGL();if(!MPMask$1.texImage2DFormat)if(n.getExtension("EXT_color_buffer_float")&&n.getExtension("OES_texture_float_linear")&&n.getExtension("EXT_float_blend"))MPMask$1.texImage2DFormat=n.R32F;else{if(!n.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");MPMask$1.texImage2DFormat=n.R16F}return MPMask$1.texImage2DFormat}getContainer(n){switch(n){case MPMaskType.UINT8_ARRAY:return this.containers.find(A=>A instanceof Uint8Array);case MPMaskType.FLOAT32_ARRAY:return this.containers.find(A=>A instanceof Float32Array);case MPMaskType.WEBGL_TEXTURE:return this.containers.find(A=>typeof WebGLTexture!="undefined"&&A instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const A of this.containers){let w;if(A instanceof Uint8Array)w=new Uint8Array(A);else if(A instanceof Float32Array)w=new Float32Array(A);else{if(!(A instanceof WebGLTexture))throw new Error(`Type is not supported: ${A}`);{const d=this.getGL(),m=this.getShaderContext();d.activeTexture(d.TEXTURE1),w=(0,image_shader_context_1$1.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,w),this.configureTextureParams();const o=this.getTexImage2DFormat();d.texImage2D(d.TEXTURE_2D,0,o,this.width,this.height,0,d.RED,d.FLOAT,null),d.bindTexture(d.TEXTURE_2D,null),m.bindFramebuffer(d,w),m.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),m.unbindFramebuffer(),this.unbindTexture()}}n.push(w)}return new MPMask$1(n,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$1.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$1.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let n=this.getContainer(MPMaskType.FLOAT32_ARRAY);if(!n){const A=this.getContainer(MPMaskType.UINT8_ARRAY);if(A)n=new Float32Array(A).map(w=>w/255);else{n=new Float32Array(this.width*this.height);const w=this.getGL(),d=this.getShaderContext(),m=this.convertToWebGLTexture();if(d.bindFramebuffer(w,m),(0,platform_utils_1$1.isIOS)()){const o=new Float32Array(this.width*this.height*4);w.readPixels(0,0,this.width,this.height,w.RGBA,w.FLOAT,o);for(let E=0,j=0;E<n.length;++E,j+=4)n[E]=o[j]}else w.readPixels(0,0,this.width,this.height,w.RED,w.FLOAT,n)}this.containers.push(n)}return n}convertToUint8Array(){let n=this.getContainer(MPMaskType.UINT8_ARRAY);if(!n){const A=this.convertToFloat32Array();n=new Uint8Array(A.map(w=>255*w)),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPMaskType.WEBGL_TEXTURE);if(!n){const A=this.getGL();n=this.bindTexture();const w=this.convertToFloat32Array(),d=this.getTexImage2DFormat();A.texImage2D(A.TEXTURE_2D,0,d,this.width,this.height,0,A.RED,A.FLOAT,w),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let A=this.getContainer(MPMaskType.WEBGL_TEXTURE);return A?n.bindTexture(n.TEXTURE_2D,A):(A=(0,image_shader_context_1$1.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(A),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,A),this.configureTextureParams()),A}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPMaskType.WEBGL_TEXTURE)),MPMask$1.instancesBeforeWarning=-1}}mask.MPMask=MPMask$1,MPMask$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(u,n,A){u instanceof String&&(u=String(u));for(var w=u.length,d=0;d<w;d++){var m=u[d];if(n.call(A,m,d,u))return{i:d,v:m}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(u,n,A){u!=Array.prototype&&u!=Object.prototype&&(u[n]=A.value)},$jscomp.getGlobal=function(u){return typeof window!="undefined"&&window===u?u:commonjsGlobal!==void 0&&commonjsGlobal!=null?commonjsGlobal:u},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(u,n,A,w){if(n){for(A=$jscomp.global,u=u.split("."),w=0;w<u.length-1;w++){var d=u[w];d in A||(A[d]={}),A=A[d]}(n=n(w=A[u=u[u.length-1]]))!=w&&n!=null&&$jscomp.defineProperty(A,u,{configurable:!0,writable:!0,value:n})}},$jscomp.polyfill("Array.prototype.findIndex",function(u){return u||function(n,A){return $jscomp.findInternal(this,n,A).i}},"es6","es3"),$jscomp.checkStringArgs=function(u,n,A){if(u==null)throw new TypeError("The 'this' value for String.prototype."+A+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+A+" must not be a regular expression");return u+""},$jscomp.polyfill("String.prototype.endsWith",function(u){return u||function(n,A){var w=$jscomp.checkStringArgs(this,n,"endsWith");n+="",A===void 0&&(A=w.length),A=Math.max(0,Math.min(0|A,w.length));for(var d=n.length;0<d&&0<A;)if(w[--A]!=n[--d])return!1;return 0>=d}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(u){return u||function(n,A){return $jscomp.findInternal(this,n,A).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(u){return u||function(n,A){var w=$jscomp.checkStringArgs(this,n,"startsWith");n+="";var d=w.length,m=n.length;A=Math.max(0,Math.min(0|A,w.length));for(var o=0;o<m&&A<d;)if(w[A++]!=n[o++])return!1;return o>=m}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(u){return u||function(n){var A=$jscomp.checkStringArgs(this,null,"repeat");if(0>n||1342177279<n)throw new RangeError("Invalid count value");n|=0;for(var w="";n;)1&n&&(w+=A),(n>>>=1)&&(A+=A);return w}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(u,n,A){u=u.split("."),A=A||goog.global,u[0]in A||A.execScript===void 0||A.execScript("var "+u[0]);for(var w;u.length&&(w=u.shift());)u.length||n===void 0?A=A[w]&&A[w]!==Object.prototype[w]?A[w]:A[w]={}:A[w]=n},goog.define=function(u,n){return n},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(u){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(u)},goog.constructNamespace_=function(u,n){goog.exportPath_(u,n)},goog.getScriptNonce=function(u){return u&&u!=goog.global?goog.getScriptNonce_(u.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(u){return(u=u.querySelector&&u.querySelector("script[nonce]"))&&(u=u.nonce||u.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(u)?u:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(u){if(typeof u!="string"||!u||u.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+u+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=u},goog.module.get=function(u){return goog.module.getInternal_(u)},goog.module.getInternal_=function(u){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var u=goog.global.$jscomp;return!!u&&typeof u.getCurrentModulePath=="function"&&!!u.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(u){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=u;else{var n=goog.global.$jscomp;if(!n||typeof n.getCurrentModulePath!="function")throw Error('Module with namespace "'+u+'" has been loaded incorrectly.');n=n.require(n.getCurrentModulePath()),goog.loadedModules_[u]={exports:n,type:goog.ModuleType.ES6,moduleId:u}}},goog.setTestOnly=function(u){if(goog.DISALLOW_TEST_ONLY_CODE)throw u=u||"",Error("Importing test-only code into non-debug environment"+(u?": "+u:"."))},goog.forwardDeclare=function(u){},goog.getObjectByName=function(u,n){u=u.split("."),n=n||goog.global;for(var A=0;A<u.length;A++)if((n=n[u[A]])==null)return null;return n},goog.globalize=function(u,n){for(var A in n=n||goog.global,u)n[A]=u[A]},goog.addDependency=function(u,n,A,w){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(u){goog.global.console&&goog.global.console.error(u)},goog.require=function(u){},goog.requireType=function(u){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(u){u.instance_=void 0,u.getInstance=function(){return u.instance_?u.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=u),u.instance_=new u)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(u){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(u){return"(function(){"+u+`
;})();
`},goog.loadModule=function(u){var n=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(u))var A=u.call(void 0,{});else{if(typeof u!="string")throw Error("Invalid module definition");goog.useSafari10Workaround()&&(u=goog.workaroundSafari10EvalBug(u)),A=goog.loadModuleFromSource_.call(void 0,u)}var w=goog.moduleLoaderState_.moduleName;if(typeof w!="string"||!w)throw Error('Invalid module name "'+w+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(w,A):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof A=="object"&&A!=null&&Object.seal(A),goog.loadedModules_[w]={exports:A,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=n}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(u){u=u.split("/");for(var n=0;n<u.length;)u[n]=="."?u.splice(n,1):n&&u[n]==".."&&u[n-1]&&u[n-1]!=".."?u.splice(--n,2):n++;return u.join("/")},goog.loadFileSync_=function(u){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(u);try{var n=new goog.global.XMLHttpRequest;return n.open("get",u,!1),n.send(),n.status==0||n.status==200?n.responseText:null}catch(A){return null}},goog.transpile_=function(u,n,A){var w=goog.global.$jscomp;w||(goog.global.$jscomp=w={});var d=w.transpile;if(!d){var m=goog.basePath+goog.TRANSPILER,o=goog.loadFileSync_(m);if(o){if(function(){(0,eval)(o+`
//# sourceURL=`+m)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=(w=goog.global.$jscomp).transpile}}return d||(d=w.transpile=function(E,j){return goog.logToConsole_(j+" requires transpilation but no transpiler was found."),E}),d(u,n,A)},goog.typeOf=function(u){var n=typeof u;if(n=="object"){if(!u)return"null";if(u instanceof Array)return"array";if(u instanceof Object)return n;var A=Object.prototype.toString.call(u);if(A=="[object Window]")return"object";if(A=="[object Array]"||typeof u.length=="number"&&u.splice!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("splice"))return"array";if(A=="[object Function]"||u.call!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("call"))return"function"}else if(n=="function"&&u.call===void 0)return"object";return n},goog.isArray=function(u){return goog.typeOf(u)=="array"},goog.isArrayLike=function(u){var n=goog.typeOf(u);return n=="array"||n=="object"&&typeof u.length=="number"},goog.isDateLike=function(u){return goog.isObject(u)&&typeof u.getFullYear=="function"},goog.isFunction=function(u){return goog.typeOf(u)=="function"},goog.isObject=function(u){var n=typeof u;return n=="object"&&u!=null||n=="function"},goog.getUid=function(u){return Object.prototype.hasOwnProperty.call(u,goog.UID_PROPERTY_)&&u[goog.UID_PROPERTY_]||(u[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(u){return!!u[goog.UID_PROPERTY_]},goog.removeUid=function(u){u!==null&&"removeAttribute"in u&&u.removeAttribute(goog.UID_PROPERTY_);try{delete u[goog.UID_PROPERTY_]}catch(n){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(typeof u.clone=="function")return u.clone();for(var A in n=n=="array"?[]:{},u)n[A]=goog.cloneObject(u[A]);return n}return u},goog.bindNative_=function(u,n,A){return u.call.apply(u.bind,arguments)},goog.bindJs_=function(u,n,A){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,w),u.apply(n,d)}}return function(){return u.apply(n,arguments)}},goog.bind=function(u,n,A){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(u,n){var A=Array.prototype.slice.call(arguments,1);return function(){var w=A.slice();return w.push.apply(w,arguments),u.apply(this,w)}},goog.mixin=function(u,n){for(var A in n)u[A]=n[A]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(u){if(goog.global.execScript)goog.global.execScript(u,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch(w){}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch(w){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(u);else{var n=goog.global.document,A=n.createElement("script");A.type="text/javascript",A.defer=!1,A.appendChild(n.createTextNode(u)),n.head.appendChild(A),n.head.removeChild(A)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(u,n){if(String(u).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+u);var A=function(d){return goog.cssNameMapping_[d]||d},w=function(d){d=d.split("-");for(var m=[],o=0;o<d.length;o++)m.push(A(d[o]));return m.join("-")};return w=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?A:w:function(d){return d},u=n?u+"-"+w(n):w(u),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(u):u},goog.setCssNameMapping=function(u,n){goog.cssNameMapping_=u,goog.cssNameMappingStyle_=n},goog.getMsg=function(u,n,A){return A&&A.html&&(u=u.replace(/</g,"&lt;")),n&&(u=u.replace(/\{\$([^}]+)}/g,function(w,d){return n!=null&&d in n?n[d]:w})),u},goog.getMsgWithFallback=function(u,n){return u},goog.exportSymbol=function(u,n,A){goog.exportPath_(u,n,A)},goog.exportProperty=function(u,n,A){u[n]=A},goog.inherits=function(u,n){function A(){}A.prototype=n.prototype,u.superClass_=n.prototype,u.prototype=new A,u.prototype.constructor=u,u.base=function(w,d,m){for(var o=Array(arguments.length-2),E=2;E<arguments.length;E++)o[E-2]=arguments[E];return n.prototype[d].apply(w,o)}},goog.scope=function(u){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");u.call(goog.global)},goog.defineClass=function(u,n){var A=n.constructor,w=n.statics;return A&&A!=Object.prototype.constructor||(A=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),A=goog.defineClass.createSealingConstructor_(A,u),u&&goog.inherits(A,u),delete n.constructor,delete n.statics,goog.defineClass.applyProperties_(A.prototype,n),w!=null&&(w instanceof Function?w(A):goog.defineClass.applyProperties_(A,w)),A},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(u,n){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return u;var A=!goog.defineClass.isUnsealable_(n),w=function(){var d=u.apply(this,arguments)||this;return d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_],this.constructor===w&&A&&Object.seal instanceof Function&&Object.seal(d),d};return w},goog.defineClass.isUnsealable_=function(u){return u&&u.prototype&&u.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(u,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(u[A]=n[A]);for(var w=0;w<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;w++)A=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[w],Object.prototype.hasOwnProperty.call(n,A)&&(u[A]=n[A])},goog.tagUnsealableClass=function(u){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(u){return u},goog.createTrustedTypesPolicy=function(u){var n=null,A=goog.global.trustedTypes||goog.global.TrustedTypes;if(!A||!A.createPolicy)return n;try{n=A.createPolicy(u,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(w){goog.logToConsole_(w.message)}return n},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(u,n){return u===n?u!==0||1/u==1/n:u!=u&&n!=n},goog.object.forEach=function(u,n,A){for(var w in u)n.call(A,u[w],w,u)},goog.object.filter=function(u,n,A){var w,d={};for(w in u)n.call(A,u[w],w,u)&&(d[w]=u[w]);return d},goog.object.map=function(u,n,A){var w,d={};for(w in u)d[w]=n.call(A,u[w],w,u);return d},goog.object.some=function(u,n,A){for(var w in u)if(n.call(A,u[w],w,u))return!0;return!1},goog.object.every=function(u,n,A){for(var w in u)if(!n.call(A,u[w],w,u))return!1;return!0},goog.object.getCount=function(u){var n,A=0;for(n in u)A++;return A},goog.object.getAnyKey=function(u){for(var n in u)return n},goog.object.getAnyValue=function(u){for(var n in u)return u[n]},goog.object.contains=function(u,n){return goog.object.containsValue(u,n)},goog.object.getValues=function(u){var n,A=[],w=0;for(n in u)A[w++]=u[n];return A},goog.object.getKeys=function(u){var n,A=[],w=0;for(n in u)A[w++]=n;return A},goog.object.getValueByKeys=function(u,n){var A=goog.isArrayLike(n),w=A?n:arguments;for(A=A?0:1;A<w.length;A++){if(u==null)return;u=u[w[A]]}return u},goog.object.containsKey=function(u,n){return u!==null&&n in u},goog.object.containsValue=function(u,n){for(var A in u)if(u[A]==n)return!0;return!1},goog.object.findKey=function(u,n,A){for(var w in u)if(n.call(A,u[w],w,u))return w},goog.object.findValue=function(u,n,A){return(n=goog.object.findKey(u,n,A))&&u[n]},goog.object.isEmpty=function(u){for(var n in u)return!1;return!0},goog.object.clear=function(u){for(var n in u)delete u[n]},goog.object.remove=function(u,n){var A;return(A=n in u)&&delete u[n],A},goog.object.add=function(u,n,A){if(u!==null&&n in u)throw Error('The object already contains the key "'+n+'"');goog.object.set(u,n,A)},goog.object.get=function(u,n,A){return u!==null&&n in u?u[n]:A},goog.object.set=function(u,n,A){u[n]=A},goog.object.setIfUndefined=function(u,n,A){return n in u?u[n]:u[n]=A},goog.object.setWithReturnValueIfNotSet=function(u,n,A){return n in u?u[n]:(A=A(),u[n]=A)},goog.object.equals=function(u,n){for(var A in u)if(!(A in n)||u[A]!==n[A])return!1;for(var w in n)if(!(w in u))return!1;return!0},goog.object.clone=function(u){var n,A={};for(n in u)A[n]=u[n];return A},goog.object.unsafeClone=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(goog.isFunction(u.clone))return u.clone();for(var A in n=n=="array"?[]:{},u)n[A]=goog.object.unsafeClone(u[A]);return n}return u},goog.object.transpose=function(u){var n,A={};for(n in u)A[u[n]]=n;return A},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(u,n){for(var A,w,d=1;d<arguments.length;d++){for(A in w=arguments[d])u[A]=w[A];for(var m=0;m<goog.object.PROTOTYPE_FIELDS_.length;m++)A=goog.object.PROTOTYPE_FIELDS_[m],Object.prototype.hasOwnProperty.call(w,A)&&(u[A]=w[A])}},goog.object.create=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(n%2)throw Error("Uneven number of arguments");for(var A={},w=0;w<n;w+=2)A[arguments[w]]=arguments[w+1];return A},goog.object.createSet=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var A={},w=0;w<n;w++)A[arguments[w]]=!0;return A},goog.object.createImmutableView=function(u){var n=u;return Object.isFrozen&&!Object.isFrozen(u)&&(n=Object.create(u),Object.freeze(n)),n},goog.object.isImmutableView=function(u){return!!Object.isFrozen&&Object.isFrozen(u)},goog.object.getAllPropertyNames=function(u,n,A){if(!u)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(u);for(var w={};u&&(u!==Object.prototype||n)&&(u!==Function.prototype||A);){for(var d=Object.getOwnPropertyNames(u),m=0;m<d.length;m++)w[d[m]]=!0;u=Object.getPrototypeOf(u)}return goog.object.getKeys(w)},goog.object.getSuperClass=function(u){return(u=Object.getPrototypeOf(u.prototype))&&u.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(u,n,A,w){var d="Assertion failed";if(A){d+=": "+A;var m=w}else u&&(d+=": "+u,m=n);throw Error(""+d,m||[])},jspb.asserts.assert=function(u,n,A){for(var w=[],d=2;d<arguments.length;++d)w[d-2]=arguments[d];return u||jspb.asserts.doAssertFailure("",null,n,w),u},jspb.asserts.assertString=function(u,n,A){for(var w=[],d=2;d<arguments.length;++d)w[d-2]=arguments[d];return typeof u!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(u),u],n,w),u},jspb.asserts.assertArray=function(u,n,A){for(var w=[],d=2;d<arguments.length;++d)w[d-2]=arguments[d];return Array.isArray(u)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(u),u],n,w),u},jspb.asserts.fail=function(u,n){for(var A=[],w=1;w<arguments.length;++w)A[w-1]=arguments[w];throw Error("Failure"+(u?": "+u:""),A)},jspb.asserts.assertInstanceof=function(u,n,A,w){for(var d=[],m=3;m<arguments.length;++m)d[m-3]=arguments[m];return u instanceof n||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(n),jspb.asserts.getType(u)],A,d),u},jspb.asserts.getType=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(u){var n=jspb.BinaryConstants.FieldType,A=jspb.BinaryConstants.WireType;switch(u){case n.INT32:case n.INT64:case n.UINT32:case n.UINT64:case n.SINT32:case n.SINT64:case n.BOOL:case n.ENUM:case n.VHASH64:return A.VARINT;case n.DOUBLE:case n.FIXED64:case n.SFIXED64:case n.FHASH64:return A.FIXED64;case n.STRING:case n.MESSAGE:case n.BYTES:return A.DELIMITED;case n.FLOAT:case n.FIXED32:case n.SFIXED32:return A.FIXED32;default:return A.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(u){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var n=Error().stack;n&&(this.stack=n)}u&&(this.message=String(u)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(u,n){goog.debug.Error.call(this,goog.asserts.subs_(u,n)),this.messagePattern=u},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(u){throw u},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(u,n){for(var A="",w=(u=u.split("%s")).length-1,d=0;d<w;d++)A+=u[d]+(d<n.length?n[d]:"%s");return A+u[w]},goog.asserts.doAssertFailure_=function(u,n,A,w){var d="Assertion failed";if(A){d+=": "+A;var m=w}else u&&(d+=": "+u,m=n);u=new goog.asserts.AssertionError(""+d,m||[]),goog.asserts.errorHandler_(u)},goog.asserts.setErrorHandler=function(u){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=u)},goog.asserts.assert=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!u&&goog.asserts.doAssertFailure_("",null,n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertExists=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&u==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.fail=function(u,n){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(u?": "+u:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertString=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertFunction=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(u)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObject=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(u)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertArray=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(u)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertBoolean=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertElement=function(u,n,A){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(u)&&u.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertInstanceof=function(u,n,A,w){return!goog.asserts.ENABLE_ASSERTS||u instanceof n||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(n),goog.asserts.getType_(u)],A,Array.prototype.slice.call(arguments,3)),u},goog.asserts.assertFinite=function(u,n,A){return!goog.asserts.ENABLE_ASSERTS||typeof u=="number"&&isFinite(u)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var u in Object.prototype)goog.asserts.fail(u+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(u){return u[u.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.indexOf.call(u,n,A)}:function(u,n,A){if(A=A==null?0:0>A?Math.max(0,u.length+A):A,typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.indexOf(n,A);for(;A<u.length;A++)if(A in u&&u[A]===n)return A;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.lastIndexOf.call(u,n,A==null?u.length-1:A)}:function(u,n,A){if(0>(A=A==null?u.length-1:A)&&(A=Math.max(0,u.length+A)),typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.lastIndexOf(n,A);for(;0<=A;A--)if(A in u&&u[A]===n)return A;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(u,n,A){goog.asserts.assert(u.length!=null),Array.prototype.forEach.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)m in d&&n.call(A,d[m],m,u)},goog.array.forEachRight=function(u,n,A){var w=u.length,d=typeof u=="string"?u.split(""):u;for(--w;0<=w;--w)w in d&&n.call(A,d[w],w,u)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.filter.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=[],m=0,o=typeof u=="string"?u.split(""):u,E=0;E<w;E++)if(E in o){var j=o[E];n.call(A,j,E,u)&&(d[m++]=j)}return d},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.map.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=Array(w),m=typeof u=="string"?u.split(""):u,o=0;o<w;o++)o in m&&(d[o]=n.call(A,m[o],o,u));return d},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(u,n,A,w){return goog.asserts.assert(u.length!=null),w&&(n=goog.bind(n,w)),Array.prototype.reduce.call(u,n,A)}:function(u,n,A,w){var d=A;return goog.array.forEach(u,function(m,o){d=n.call(w,d,m,o,u)}),d},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(u,n,A,w){return goog.asserts.assert(u.length!=null),goog.asserts.assert(n!=null),w&&(n=goog.bind(n,w)),Array.prototype.reduceRight.call(u,n,A)}:function(u,n,A,w){var d=A;return goog.array.forEachRight(u,function(m,o){d=n.call(w,d,m,o,u)}),d},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.some.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)if(m in d&&n.call(A,d[m],m,u))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.every.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)if(m in d&&!n.call(A,d[m],m,u))return!1;return!0},goog.array.count=function(u,n,A){var w=0;return goog.array.forEach(u,function(d,m,o){n.call(A,d,m,o)&&++w},A),w},goog.array.find=function(u,n,A){return 0>(n=goog.array.findIndex(u,n,A))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndex=function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)if(m in d&&n.call(A,d[m],m,u))return m;return-1},goog.array.findRight=function(u,n,A){return 0>(n=goog.array.findIndexRight(u,n,A))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndexRight=function(u,n,A){var w=u.length,d=typeof u=="string"?u.split(""):u;for(--w;0<=w;w--)if(w in d&&n.call(A,d[w],w,u))return w;return-1},goog.array.contains=function(u,n){return 0<=goog.array.indexOf(u,n)},goog.array.isEmpty=function(u){return u.length==0},goog.array.clear=function(u){if(!Array.isArray(u))for(var n=u.length-1;0<=n;n--)delete u[n];u.length=0},goog.array.insert=function(u,n){goog.array.contains(u,n)||u.push(n)},goog.array.insertAt=function(u,n,A){goog.array.splice(u,A,0,n)},goog.array.insertArrayAt=function(u,n,A){goog.partial(goog.array.splice,u,A,0).apply(null,n)},goog.array.insertBefore=function(u,n,A){var w;arguments.length==2||0>(w=goog.array.indexOf(u,A))?u.push(n):goog.array.insertAt(u,n,w)},goog.array.remove=function(u,n){var A;return(A=0<=(n=goog.array.indexOf(u,n)))&&goog.array.removeAt(u,n),A},goog.array.removeLast=function(u,n){return 0<=(n=goog.array.lastIndexOf(u,n))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAt=function(u,n){return goog.asserts.assert(u.length!=null),Array.prototype.splice.call(u,n,1).length==1},goog.array.removeIf=function(u,n,A){return 0<=(n=goog.array.findIndex(u,n,A))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAllIf=function(u,n,A){var w=0;return goog.array.forEachRight(u,function(d,m){n.call(A,d,m,u)&&goog.array.removeAt(u,m)&&w++}),w},goog.array.concat=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(u){var n=u.length;if(0<n){for(var A=Array(n),w=0;w<n;w++)A[w]=u[w];return A}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(u,n){for(var A=1;A<arguments.length;A++){var w=arguments[A];if(goog.isArrayLike(w)){var d=u.length||0,m=w.length||0;u.length=d+m;for(var o=0;o<m;o++)u[d+o]=w[o]}else u.push(w)}},goog.array.splice=function(u,n,A,w){return goog.asserts.assert(u.length!=null),Array.prototype.splice.apply(u,goog.array.slice(arguments,1))},goog.array.slice=function(u,n,A){return goog.asserts.assert(u.length!=null),2>=arguments.length?Array.prototype.slice.call(u,n):Array.prototype.slice.call(u,n,A)},goog.array.removeDuplicates=function(u,n,A){n=n||u;var w=function(j){return goog.isObject(j)?"o"+goog.getUid(j):(typeof j).charAt(0)+j};A=A||w,w={};for(var d=0,m=0;m<u.length;){var o=u[m++],E=A(o);Object.prototype.hasOwnProperty.call(w,E)||(w[E]=!0,n[d++]=o)}n.length=d},goog.array.binarySearch=function(u,n,A){return goog.array.binarySearch_(u,A||goog.array.defaultCompare,!1,n)},goog.array.binarySelect=function(u,n,A){return goog.array.binarySearch_(u,n,!0,void 0,A)},goog.array.binarySearch_=function(u,n,A,w,d){for(var m,o=0,E=u.length;o<E;){var j=o+(E-o>>>1),ee=A?n.call(d,u[j],j,u):n(w,u[j]);0<ee?o=j+1:(E=j,m=!ee)}return m?o:-o-1},goog.array.sort=function(u,n){u.sort(n||goog.array.defaultCompare)},goog.array.stableSort=function(u,n){for(var A=Array(u.length),w=0;w<u.length;w++)A[w]={index:w,value:u[w]};var d=n||goog.array.defaultCompare;for(goog.array.sort(A,function(m,o){return d(m.value,o.value)||m.index-o.index}),w=0;w<u.length;w++)u[w]=A[w].value},goog.array.sortByKey=function(u,n,A){var w=A||goog.array.defaultCompare;goog.array.sort(u,function(d,m){return w(n(d),n(m))})},goog.array.sortObjectsByKey=function(u,n,A){goog.array.sortByKey(u,function(w){return w[n]},A)},goog.array.isSorted=function(u,n,A){n=n||goog.array.defaultCompare;for(var w=1;w<u.length;w++){var d=n(u[w-1],u[w]);if(0<d||d==0&&A)return!1}return!0},goog.array.equals=function(u,n,A){if(!goog.isArrayLike(u)||!goog.isArrayLike(n)||u.length!=n.length)return!1;var w=u.length;A=A||goog.array.defaultCompareEquality;for(var d=0;d<w;d++)if(!A(u[d],n[d]))return!1;return!0},goog.array.compare3=function(u,n,A){A=A||goog.array.defaultCompare;for(var w=Math.min(u.length,n.length),d=0;d<w;d++){var m=A(u[d],n[d]);if(m!=0)return m}return goog.array.defaultCompare(u.length,n.length)},goog.array.defaultCompare=function(u,n){return u>n?1:u<n?-1:0},goog.array.inverseDefaultCompare=function(u,n){return-goog.array.defaultCompare(u,n)},goog.array.defaultCompareEquality=function(u,n){return u===n},goog.array.binaryInsert=function(u,n,A){return 0>(A=goog.array.binarySearch(u,n,A))&&(goog.array.insertAt(u,n,-(A+1)),!0)},goog.array.binaryRemove=function(u,n,A){return 0<=(n=goog.array.binarySearch(u,n,A))&&goog.array.removeAt(u,n)},goog.array.bucket=function(u,n,A){for(var w={},d=0;d<u.length;d++){var m=u[d],o=n.call(A,m,d,u);o!==void 0&&(w[o]||(w[o]=[])).push(m)}return w},goog.array.toObject=function(u,n,A){var w={};return goog.array.forEach(u,function(d,m){w[n.call(A,d,m,u)]=d}),w},goog.array.range=function(u,n,A){var w=[],d=0,m=u;if(n!==void 0&&(d=u,m=n),0>(A=A||1)*(m-d))return[];if(0<A)for(u=d;u<m;u+=A)w.push(u);else for(u=d;u>m;u+=A)w.push(u);return w},goog.array.repeat=function(u,n){for(var A=[],w=0;w<n;w++)A[w]=u;return A},goog.array.flatten=function(u){for(var n=[],A=0;A<arguments.length;A++){var w=arguments[A];if(Array.isArray(w))for(var d=0;d<w.length;d+=8192){var m=goog.array.slice(w,d,d+8192);m=goog.array.flatten.apply(null,m);for(var o=0;o<m.length;o++)n.push(m[o])}else n.push(w)}return n},goog.array.rotate=function(u,n){return goog.asserts.assert(u.length!=null),u.length&&(0<(n%=u.length)?Array.prototype.unshift.apply(u,u.splice(-n,n)):0>n&&Array.prototype.push.apply(u,u.splice(0,-n))),u},goog.array.moveItem=function(u,n,A){goog.asserts.assert(0<=n&&n<u.length),goog.asserts.assert(0<=A&&A<u.length),n=Array.prototype.splice.call(u,n,1),Array.prototype.splice.call(u,A,0,n[0])},goog.array.zip=function(u){if(!arguments.length)return[];for(var n=[],A=arguments[0].length,w=1;w<arguments.length;w++)arguments[w].length<A&&(A=arguments[w].length);for(w=0;w<A;w++){for(var d=[],m=0;m<arguments.length;m++)d.push(arguments[m][w]);n.push(d)}return n},goog.array.shuffle=function(u,n){n=n||Math.random;for(var A=u.length-1;0<A;A--){var w=Math.floor(n()*(A+1)),d=u[A];u[A]=u[w],u[w]=d}},goog.array.copyByIndex=function(u,n){var A=[];return goog.array.forEach(n,function(w){A.push(u[w])}),A},goog.array.concatMap=function(u,n,A){return goog.array.concat.apply([],goog.array.map(u,n,A))},goog.crypt={},goog.crypt.stringToByteArray=function(u){for(var n=[],A=0,w=0;w<u.length;w++){var d=u.charCodeAt(w);255<d&&(n[A++]=255&d,d>>=8),n[A++]=d}return n},goog.crypt.byteArrayToString=function(u){if(8192>=u.length)return String.fromCharCode.apply(null,u);for(var n="",A=0;A<u.length;A+=8192){var w=goog.array.slice(u,A,A+8192);n+=String.fromCharCode.apply(null,w)}return n},goog.crypt.byteArrayToHex=function(u,n){return goog.array.map(u,function(A){return 1<(A=A.toString(16)).length?A:"0"+A}).join(n||"")},goog.crypt.hexToByteArray=function(u){goog.asserts.assert(u.length%2==0,"Key string length must be multiple of 2");for(var n=[],A=0;A<u.length;A+=2)n.push(parseInt(u.substring(A,A+2),16));return n},goog.crypt.stringToUtf8ByteArray=function(u){for(var n=[],A=0,w=0;w<u.length;w++){var d=u.charCodeAt(w);128>d?n[A++]=d:(2048>d?n[A++]=d>>6|192:((64512&d)==55296&&w+1<u.length&&(64512&u.charCodeAt(w+1))==56320?(d=65536+((1023&d)<<10)+(1023&u.charCodeAt(++w)),n[A++]=d>>18|240,n[A++]=d>>12&63|128):n[A++]=d>>12|224,n[A++]=d>>6&63|128),n[A++]=63&d|128)}return n},goog.crypt.utf8ByteArrayToString=function(u){for(var n=[],A=0,w=0;A<u.length;){var d=u[A++];if(128>d)n[w++]=String.fromCharCode(d);else if(191<d&&224>d){var m=u[A++];n[w++]=String.fromCharCode((31&d)<<6|63&m)}else if(239<d&&365>d){m=u[A++];var o=u[A++];d=((7&d)<<18|(63&m)<<12|(63&o)<<6|63&u[A++])-65536,n[w++]=String.fromCharCode(55296+(d>>10)),n[w++]=String.fromCharCode(56320+(1023&d))}else m=u[A++],o=u[A++],n[w++]=String.fromCharCode((15&d)<<12|(63&m)<<6|63&o)}return n.join("")},goog.crypt.xorByteArray=function(u,n){goog.asserts.assert(u.length==n.length,"XOR array lengths must match");for(var A=[],w=0;w<u.length;w++)A.push(u[w]^n[w]);return A},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(u){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(u);n&&(!u||!(u instanceof n.Location)&&u instanceof n.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(u))}return u},goog.dom.asserts.assertIsElementType_=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var A=goog.dom.asserts.getWindow_(u);A&&A[n]!==void 0&&(u&&(u instanceof A[n]||!(u instanceof A.Location||u instanceof A.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",n,goog.dom.asserts.debugStringForType_(u)))}return u},goog.dom.asserts.assertIsHTMLAnchorElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(u){if(!goog.isObject(u))return u===void 0?"undefined":u===null?"null":typeof u;try{return u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u)}catch(n){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(u){try{var n=u&&u.ownerDocument,A=n&&(n.defaultView||n.parentWindow);if((A=A||goog.global).Element&&A.Location)return A}catch(w){}return null},goog.functions={},goog.functions.constant=function(u){return function(){return u}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(u,n){return u},goog.functions.error=function(u){return function(){throw Error(u)}},goog.functions.fail=function(u){return function(){throw u}},goog.functions.lock=function(u,n){return n=n||0,function(){return u.apply(this,Array.prototype.slice.call(arguments,0,n))}},goog.functions.nth=function(u){return function(){return arguments[u]}},goog.functions.partialRight=function(u,n){var A=Array.prototype.slice.call(arguments,1);return function(){var w=Array.prototype.slice.call(arguments);return w.push.apply(w,A),u.apply(this,w)}},goog.functions.withReturnValue=function(u,n){return goog.functions.sequence(u,goog.functions.constant(n))},goog.functions.equalTo=function(u,n){return function(A){return n?u==A:u===A}},goog.functions.compose=function(u,n){var A=arguments,w=A.length;return function(){var d;w&&(d=A[w-1].apply(this,arguments));for(var m=w-2;0<=m;m--)d=A[m].call(this,d);return d}},goog.functions.sequence=function(u){var n=arguments,A=n.length;return function(){for(var w,d=0;d<A;d++)w=n[d].apply(this,arguments);return w}},goog.functions.and=function(u){var n=arguments,A=n.length;return function(){for(var w=0;w<A;w++)if(!n[w].apply(this,arguments))return!1;return!0}},goog.functions.or=function(u){var n=arguments,A=n.length;return function(){for(var w=0;w<A;w++)if(n[w].apply(this,arguments))return!0;return!1}},goog.functions.not=function(u){return function(){return!u.apply(this,arguments)}},goog.functions.create=function(u,n){var A=function(){};return A.prototype=u.prototype,A=new A,u.apply(A,Array.prototype.slice.call(arguments,1)),A},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(u){var n,A=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(A||(n=u(),A=!0),n):u()}},goog.functions.once=function(u){var n=u;return function(){if(n){var A=n;n=null,A()}}},goog.functions.debounce=function(u,n,A){var w=0;return function(d){goog.global.clearTimeout(w);var m=arguments;w=goog.global.setTimeout(function(){u.apply(A,m)},n)}},goog.functions.throttle=function(u,n,A){var w=0,d=!1,m=[],o=function(){w=0,d&&(d=!1,E())},E=function(){w=goog.global.setTimeout(o,n),u.apply(A,m)};return function(j){m=arguments,w?d=!0:E()}},goog.functions.rateLimit=function(u,n,A){var w=0,d=function(){w=0};return function(m){w||(w=goog.global.setTimeout(d,n),u.apply(A,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(u){this.tagName_=u},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(u){return goog.dom.tags.VOID_TAGS_[u]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(u,n){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=u===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(u){return u instanceof goog.string.Const&&u.constructor===goog.string.Const&&u.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?u.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+u+"'"),"type_error:Const")},goog.string.Const.from=function(u){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeScript.fromConstantAndArgs=function(u,n){for(var A=[],w=1;w<arguments.length;w++)A.push(goog.html.SafeScript.stringify_(arguments[w]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(u)+")("+A.join(", ")+");")},goog.html.SafeScript.fromJson=function(u){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(u))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(u){return goog.html.SafeScript.unwrapTrustedScript(u).toString()},goog.html.SafeScript.unwrapTrustedScript=function(u){return u instanceof goog.html.SafeScript&&u.constructor===goog.html.SafeScript&&u.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(u){return JSON.stringify(u).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(u):u,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(u){return goog.fs.url.getUrlObject_().createObjectURL(u)},goog.fs.url.revokeObjectUrl=function(u){goog.fs.url.getUrlObject_().revokeObjectURL(u)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(u){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(u){},goog.fs.url.getUrlObject_=function(){var u=goog.fs.url.findUrlObject_();if(u!=null)return u;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(u){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(n!==void 0){n=new n;for(var A=0;A<arguments.length;A++)n.append(arguments[A]);return n.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(u,n,A){var w=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(w!==void 0){w=new w;for(var d=0;d<u.length;d++)w.append(u[d],A);return w.getBlob(n)}if(goog.global.Blob!==void 0)return w={},n&&(w.type=n),A&&(w.endings=A),new Blob(u,w);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(u,n){return typeof u=="number"?0<u?goog.i18n.bidi.Dir.LTR:0>u?goog.i18n.bidi.Dir.RTL:n?null:goog.i18n.bidi.Dir.NEUTRAL:u==null?null:u?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0900-\u1FFF\u200E\u2C00-\uD801\uD804-\uD839\uD83C-\uDBFF\uF900-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",goog.i18n.bidi.rtlChars_="\u0591-\u06EF\u06FA-\u08FF\u200F\uD802-\uD803\uD83A-\uD83B\uFB1D-\uFDFF\uFE70-\uFEFC",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(u,n){return n?u.replace(goog.i18n.bidi.htmlSkipReg_,""):u},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(u,n){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(u,n){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(u){return goog.i18n.bidi.rtlRe_.test(u)},goog.i18n.bidi.isLtrChar=function(u){return goog.i18n.bidi.ltrRe_.test(u)},goog.i18n.bidi.isNeutralChar=function(u){return!goog.i18n.bidi.isLtrChar(u)&&!goog.i18n.bidi.isRtlChar(u)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(u,n){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(u,n){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(u,n){return u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n),goog.i18n.bidi.isRequiredLtrRe_.test(u)||!goog.i18n.bidi.hasAnyLtr(u)&&!goog.i18n.bidi.hasAnyRtl(u)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(u,n){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(u,n){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(u){return goog.i18n.bidi.rtlLocalesRe_.test(u)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(u,n){return n=(n===void 0?goog.i18n.bidi.hasAnyRtl(u):n)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,u.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+u+"</span>"},goog.i18n.bidi.enforceRtlInText=function(u){return goog.i18n.bidi.Format.RLE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+u+"</span>"},goog.i18n.bidi.enforceLtrInText=function(u){return goog.i18n.bidi.Format.LRE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(u){return u.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(u){return u.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05F4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05F3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(u,n){var A=0,w=0,d=!1;for(u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n).split(goog.i18n.bidi.wordSeparatorRe_),n=0;n<u.length;n++){var m=u[n];goog.i18n.bidi.startsWithRtl(m)?(A++,w++):goog.i18n.bidi.isRequiredLtrRe_.test(m)?d=!0:goog.i18n.bidi.hasAnyLtr(m)?w++:goog.i18n.bidi.hasNumeralsRe_.test(m)&&(d=!0)}return w==0?d?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:A/w>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(u,n){return goog.i18n.bidi.estimateDirection(u,n)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(u,n){u&&(n=goog.i18n.bidi.toDir(n))&&(u.style.textAlign=n==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,u.dir=n==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(u,n){switch(goog.i18n.bidi.estimateDirection(n)){case goog.i18n.bidi.Dir.LTR:u.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:u.dir="rtl";break;default:u.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(u,n){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=u===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(u,n){var A=goog.html.TrustedResourceUrl.unwrap(this),w=(A=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(A))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(A[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",A[2]||"",u)+goog.html.TrustedResourceUrl.stringifyParams_("#",w,n))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(u){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(u).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(u){return u instanceof goog.html.TrustedResourceUrl&&u.constructor===goog.html.TrustedResourceUrl&&u.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(u,n){var A=goog.string.Const.unwrap(u);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(A))throw Error("Invalid TrustedResourceUrl format: "+A);return u=A.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(w,d){if(!Object.prototype.hasOwnProperty.call(n,d))throw Error('Found marker, "'+d+'", in format string, "'+A+'", but no valid label mapping found in args: '+JSON.stringify(n));return(w=n[d])instanceof goog.string.Const?goog.string.Const.unwrap(w):encodeURIComponent(String(w))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(u,n,A,w){return goog.html.TrustedResourceUrl.format(u,n).cloneWithParams(A,w)},goog.html.TrustedResourceUrl.fromConstant=function(u){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.TrustedResourceUrl.fromConstants=function(u){for(var n="",A=0;A<u.length;A++)n+=goog.string.Const.unwrap(u[A]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.TrustedResourceUrl.fromSafeScript=function(u){return u=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(u)],"text/javascript"),u=goog.fs.url.createObjectUrl(u),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(u){return u=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(u):u,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.TrustedResourceUrl.stringifyParams_=function(u,n,A){if(A==null)return n;if(typeof A=="string")return A?u+encodeURIComponent(A):"";for(var w in A){var d=A[w];d=Array.isArray(d)?d:[d];for(var m=0;m<d.length;m++){var o=d[m];o!=null&&(n||(n=u),n+=(n.length>u.length?"&":"")+encodeURIComponent(w)+"="+encodeURIComponent(String(o)))}}return n},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(u,n){return u.lastIndexOf(n,0)==0},goog.string.internal.endsWith=function(u,n){var A=u.length-n.length;return 0<=A&&u.indexOf(n,A)==A},goog.string.internal.caseInsensitiveStartsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(0,n.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(u.length-n.length,n.length))==0},goog.string.internal.caseInsensitiveEquals=function(u,n){return u.toLowerCase()==n.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(u){return/^[\s\xa0]*$/.test(u)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(u){return u.trim()}:function(u){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(u)[1]},goog.string.internal.caseInsensitiveCompare=function(u,n){return(u=String(u).toLowerCase())<(n=String(n).toLowerCase())?-1:u==n?0:1},goog.string.internal.newLineToBr=function(u,n){return u.replace(/(\r\n|\r|\n)/g,n?"<br />":"<br>")},goog.string.internal.htmlEscape=function(u,n){if(n)u=u.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(u))return u;u.indexOf("&")!=-1&&(u=u.replace(goog.string.internal.AMP_RE_,"&amp;")),u.indexOf("<")!=-1&&(u=u.replace(goog.string.internal.LT_RE_,"&lt;")),u.indexOf(">")!=-1&&(u=u.replace(goog.string.internal.GT_RE_,"&gt;")),u.indexOf('"')!=-1&&(u=u.replace(goog.string.internal.QUOT_RE_,"&quot;")),u.indexOf("'")!=-1&&(u=u.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),u.indexOf("\0")!=-1&&(u=u.replace(goog.string.internal.NULL_RE_,"&#0;"))}return u},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(u,n){return goog.string.internal.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.internal.contains=function(u,n){return u.indexOf(n)!=-1},goog.string.internal.caseInsensitiveContains=function(u,n){return goog.string.internal.contains(u.toLowerCase(),n.toLowerCase())},goog.string.internal.compareVersions=function(u,n){var A=0;u=goog.string.internal.trim(String(u)).split("."),n=goog.string.internal.trim(String(n)).split(".");for(var w=Math.max(u.length,n.length),d=0;A==0&&d<w;d++){var m=u[d]||"",o=n[d]||"";do{if(m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],m[0].length==0&&o[0].length==0)break;A=m[1].length==0?0:parseInt(m[1],10);var E=o[1].length==0?0:parseInt(o[1],10);A=goog.string.internal.compareElements_(A,E)||goog.string.internal.compareElements_(m[2].length==0,o[2].length==0)||goog.string.internal.compareElements_(m[2],o[2]),m=m[3],o=o[3]}while(A==0)}return A},goog.string.internal.compareElements_=function(u,n){return u<n?-1:u>n?1:0},goog.html.SafeUrl=function(u,n){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=u===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(u){return u instanceof goog.html.SafeUrl&&u.constructor===goog.html.SafeUrl&&u.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(u){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(u)},goog.html.SafeUrl.fromBlob=function(u){return u=goog.html.SafeUrl.isSafeMimeType(u.type)?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromMediaSource=function(u){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),u=u instanceof MediaSource?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(u){var n=(u=u.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return n=n&&goog.html.SafeUrl.isSafeMimeType(n[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n?u:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"tel:")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(u){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(u))||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"fb-messenger://share")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromWhatsAppUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"whatsapp://send")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromSmsUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(u){var n=u.indexOf("#");if(0<n&&(u=u.substring(0,n)),!(n=u.match(/[?&]body=/gi)))return!0;if(1<n.length)return!1;if(!(u=u.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(u)}catch(A){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(u)},goog.html.SafeUrl.fromSshUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"ssh://")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(u,n,A){return(u=u.exec(n))?(u=u[1],(A instanceof goog.string.Const?[goog.string.Const.unwrap(A)]:A.map(function(w){return goog.string.Const.unwrap(w)})).indexOf(u)==-1&&(n=goog.html.SafeUrl.INNOCUOUS_STRING)):n=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeUrl.fromTrustedResourceUrl=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(u))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(u){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SAFE_URL_PATTERN_.test(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(u,n){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),n&&/^data:/i.test(u)&&(n=goog.html.SafeUrl.fromDataUrl(u)).getTypedStringValue()==u?n:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(u),"%s does not match the safe URL pattern",u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(u,";"),"Last character of style string is not ';': "+u),goog.asserts.assert(goog.string.internal.contains(u,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+u),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(u){return u instanceof goog.html.SafeStyle&&u.constructor===goog.html.SafeStyle&&u.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=u,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(u){var n,A="";for(n in u){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);var w=u[n];w!=null&&(A+=n+":"+(w=Array.isArray(w)?goog.array.map(w,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(w))+";")}return A?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(A):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(u){if(u instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(u).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(u=u instanceof goog.string.Const?goog.string.Const.unwrap(u):goog.html.SafeStyle.sanitizePropertyValueString_(String(u)),/[{;}]/.test(u))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[u]);return u},goog.html.SafeStyle.sanitizePropertyValueString_=function(u){var n=u.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(n)?goog.html.SafeStyle.COMMENT_RE_.test(u)?(goog.asserts.fail("String value disallows comments, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(u)?goog.html.SafeStyle.hasBalancedSquareBrackets_(u)?goog.html.SafeStyle.sanitizeUrl_(u):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(u){for(var n=!0,A=!0,w=0;w<u.length;w++){var d=u.charAt(w);d=="'"&&A?n=!n:d=='"'&&n&&(A=!A)}return n&&A},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(u){for(var n=!0,A=/^[-_a-zA-Z0-9]$/,w=0;w<u.length;w++){var d=u.charAt(w);if(d=="]"){if(n)return!1;n=!0}else if(d=="["){if(!n)return!1;n=!1}else if(!n&&!A.test(d))return!1}return n},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(u){return u.replace(goog.html.SafeStyle.URL_RE_,function(n,A,w,d){var m="";return w=w.replace(/^(['"])(.*)\1$/,function(o,E,j){return m=E,j}),n=goog.html.SafeUrl.sanitize(w).getTypedStringValue(),A+m+n+m+d})},goog.html.SafeStyle.concat=function(u){var n="",A=function(w){Array.isArray(w)?goog.array.forEach(w,A):n+=goog.html.SafeStyle.unwrap(w)};return goog.array.forEach(arguments,A),n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(u,n){if(goog.string.internal.contains(u,"<"))throw Error("Selector does not allow '<', got: "+u);var A=u.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(A))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+u);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(A))throw Error("() and [] in selector must be balanced, got: "+u);return n instanceof goog.html.SafeStyle||(n=goog.html.SafeStyle.create(n)),u=u+"{"+goog.html.SafeStyle.unwrap(n).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(u){for(var n={"(":")","[":"]"},A=[],w=0;w<u.length;w++){var d=u[w];if(n[d])A.push(n[d]);else if(goog.object.contains(n,d)&&A.pop()!=d)return!1}return A.length==0},goog.html.SafeStyleSheet.concat=function(u){var n="",A=function(w){Array.isArray(w)?goog.array.forEach(w,A):n+=goog.html.SafeStyleSheet.unwrap(w)};return goog.array.forEach(arguments,A),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeStyleSheet.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(u,"<"),"Forbidden '<' character in style sheet string: "+u),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(u){return u instanceof goog.html.SafeStyleSheet&&u.constructor===goog.html.SafeStyleSheet&&u.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=u,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var u=goog.labs.userAgent.util.getNavigator_();return u&&(u=u.userAgent)?u:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(u){goog.labs.userAgent.util.userAgent_=u||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(n,u)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(n,u)},goog.labs.userAgent.util.extractVersionTuples=function(u){for(var n,A=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,w=[];n=A.exec(u);)w.push([n[1],n[2],n[3]||void 0]);return w},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function u(d){return d=goog.array.find(d,w),A[d]||""}var n=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(n);n=goog.labs.userAgent.util.extractVersionTuples(n);var A={};goog.array.forEach(n,function(d){A[d[0]]=d[1]});var w=goog.partial(goog.object.containsKey,A);return goog.labs.userAgent.browser.isOpera()?u(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?u(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?u(["Edg"]):goog.labs.userAgent.browser.isChrome()?u(["Chrome","CriOS","HeadlessChrome"]):(n=n[2])&&n[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(u){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),u)},goog.labs.userAgent.browser.getIEVersion_=function(u){var n=/rv: *([\d\.]*)/.exec(u);if(n&&n[1])return n[1];n="";var A=/MSIE +([\d\.]+)/.exec(u);if(A&&A[1])if(u=/Trident\/(\d.\d)/.exec(u),A[1]=="7.0")if(u&&u[1])switch(u[1]){case"4.0":n="8.0";break;case"5.0":n="9.0";break;case"6.0":n="10.0";break;case"7.0":n="11.0"}else n="7.0";else n=A[1];return n},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(u){return goog.html.SafeHtml.unwrapTrustedHTML(u).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(u){return u instanceof goog.html.SafeHtml&&u.constructor===goog.html.SafeHtml&&u.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(u){if(u instanceof goog.html.SafeHtml)return u;var n=typeof u=="object",A=null;return n&&u.implementsGoogI18nBidiDirectionalString&&(A=u.getDirection()),u=n&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(u),A)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(u){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(u)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(u,n,A){return goog.html.SafeHtml.verifyTagName(String(u)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(u),n,A)},goog.html.SafeHtml.verifyTagName=function(u){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+u+">.":"");if(u.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+u+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(u,n,A,w){u&&goog.html.TrustedResourceUrl.unwrap(u);var d={};return d.src=u||null,d.srcdoc=n&&goog.html.SafeHtml.unwrap(n),u=goog.html.SafeHtml.combineAttributes(d,{sandbox:""},A),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,w)},goog.html.SafeHtml.createSandboxIframe=function(u,n,A,w){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var d={};return d.src=u?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)):null,d.srcdoc=n||null,d.sandbox="",u=goog.html.SafeHtml.combineAttributes(d,{},A),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,w)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(u,n){return goog.html.TrustedResourceUrl.unwrap(u),u=goog.html.SafeHtml.combineAttributes({src:u},{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",u)},goog.html.SafeHtml.createScript=function(u,n){for(var A in n){var w=A.toLowerCase();if(w=="language"||w=="src"||w=="text"||w=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+w+'" attribute':"")}for(A="",u=goog.array.concat(u),w=0;w<u.length;w++)A+=goog.html.SafeScript.unwrap(u[w]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(A,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",n,u)},goog.html.SafeHtml.createStyle=function(u,n){n=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},n);var A="";u=goog.array.concat(u);for(var w=0;w<u.length;w++)A+=goog.html.SafeStyleSheet.unwrap(u[w]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(A,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",n,u)},goog.html.SafeHtml.createMetaRefresh=function(u,n){return u=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(u,";")&&(u="'"+u.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(n||0)+"; url="+u})},goog.html.SafeHtml.getAttrNameAndValue_=function(u,n,A){if(A instanceof goog.string.Const)A=goog.string.Const.unwrap(A);else if(n.toLowerCase()=="style"){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");A=goog.html.SafeHtml.getStyleValue_(A)}else{if(/^on/i.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" requires goog.string.Const value, "'+A+'" given.':"");if(n.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(A instanceof goog.html.TrustedResourceUrl)A=goog.html.TrustedResourceUrl.unwrap(A);else if(A instanceof goog.html.SafeUrl)A=goog.html.SafeUrl.unwrap(A);else{if(typeof A!="string")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" on tag "'+u+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+A+'" given.':"");A=goog.html.SafeUrl.sanitize(A).getTypedStringValue()}}return A.implementsGoogStringTypedString&&(A=A.getTypedStringValue()),goog.asserts.assert(typeof A=="string"||typeof A=="number","String or number value expected, got "+typeof A+" with value: "+A),n+'="'+goog.string.internal.htmlEscape(String(A))+'"'},goog.html.SafeHtml.getStyleValue_=function(u){if(!goog.isObject(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof u+" given: "+u:"");return u instanceof goog.html.SafeStyle||(u=goog.html.SafeStyle.create(u)),goog.html.SafeStyle.unwrap(u)},goog.html.SafeHtml.createWithDir=function(u,n,A,w){return(n=goog.html.SafeHtml.create(n,A,w)).dir_=u,n},goog.html.SafeHtml.join=function(u,n){var A=(u=goog.html.SafeHtml.htmlEscape(u)).getDirection(),w=[],d=function(m){Array.isArray(m)?goog.array.forEach(m,d):(m=goog.html.SafeHtml.htmlEscape(m),w.push(goog.html.SafeHtml.unwrap(m)),m=m.getDirection(),A==goog.i18n.bidi.Dir.NEUTRAL?A=m:m!=goog.i18n.bidi.Dir.NEUTRAL&&A!=m&&(A=null))};return goog.array.forEach(n,d),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(w.join(goog.html.SafeHtml.unwrap(u)),A)},goog.html.SafeHtml.concat=function(u){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(u,n){var A=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return A.dir_=u,A},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(u,n){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(u,n)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u,n){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(u):u,this.dir_=n,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(u,n,A){var w=null,d="<"+u+goog.html.SafeHtml.stringifyAttributes(u,n);return A==null?A=[]:Array.isArray(A)||(A=[A]),goog.dom.tags.isVoidTag(u.toLowerCase())?(goog.asserts.assert(!A.length,"Void tag <"+u+"> does not allow content."),d+=">"):(w=goog.html.SafeHtml.concat(A),d+=">"+goog.html.SafeHtml.unwrap(w)+"</"+u+">",w=w.getDirection()),(u=n&&n.dir)&&(w=/^(ltr|rtl|auto)$/i.test(u)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d,w)},goog.html.SafeHtml.stringifyAttributes=function(u,n){var A="";if(n)for(var w in n){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(w))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+w+'".':"");var d=n[w];d!=null&&(A+=" "+goog.html.SafeHtml.getAttrNameAndValue_(u,w,d))}return A},goog.html.SafeHtml.combineAttributes=function(u,n,A){var w,d={};for(w in u)goog.asserts.assert(w.toLowerCase()==w,"Must be lower case"),d[w]=u[w];for(w in n)goog.asserts.assert(w.toLowerCase()==w,"Must be lower case"),d[w]=n[w];if(A)for(w in A){var m=w.toLowerCase();if(m in u)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+m+'" attribute, got "'+w+'" with value "'+A[w]+'"':"");m in n&&delete d[m],d[w]=A[w]}return d},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(u,n,A){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,A||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(u,n,A){u.insertAdjacentHTML(n,goog.html.SafeHtml.unwrapTrustedHTML(A))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document=="undefined")return!1;var u=document.createElement("div"),n=document.createElement("div");return n.appendChild(document.createElement("div")),u.appendChild(n),!(goog.DEBUG&&!u.firstChild)&&(n=u.firstChild.firstChild,u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!n.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(u,n){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;u.lastChild;)u.removeChild(u.lastChild);u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setInnerHtml=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var A=u.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[A])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+u.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(u,n)},goog.dom.safe.setOuterHtml=function(u,n){u.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setFormElementAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLFormElement(u).action=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setButtonFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLButtonElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setInputFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLInputElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setStyle=function(u,n){u.style.cssText=goog.html.SafeStyle.unwrap(n)},goog.dom.safe.documentWrite=function(u,n){u.write(goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.setAnchorHref=function(u,n){goog.dom.asserts.assertIsHTMLAnchorElement(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setImageSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLImageElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:image\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setAudioSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLAudioElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:audio\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setVideoSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLVideoElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:video\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setEmbedSrc=function(u,n){goog.dom.asserts.assertIsHTMLEmbedElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setFrameSrc=function(u,n){goog.dom.asserts.assertIsHTMLFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrcdoc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setLinkHrefAndRel=function(u,n,A){goog.dom.asserts.assertIsHTMLLinkElement(u),u.rel=A,goog.string.internal.caseInsensitiveContains(A,"stylesheet")?(goog.asserts.assert(n instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),u.href=goog.html.TrustedResourceUrl.unwrap(n)):u.href=n instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(n):n instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(n):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(n))},goog.dom.safe.setObjectData=function(u,n){goog.dom.asserts.assertIsHTMLObjectElement(u),u.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setScriptSrc=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setScriptContent=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.text=goog.html.SafeScript.unwrapTrustedScript(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setLocationHref=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.assignLocation=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.assign(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.replaceLocation=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.replace(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.openInWindow=function(u,n,A,w,d){return u=u instanceof goog.html.SafeUrl?u:goog.html.SafeUrl.sanitizeAssertUnchanged(u),n=n||goog.global,A=A instanceof goog.string.Const?goog.string.Const.unwrap(A):A||"",n.open(goog.html.SafeUrl.unwrap(u),A,w,d)},goog.dom.safe.parseFromStringHtml=function(u,n){return goog.dom.safe.parseFromString(u,n,"text/html")},goog.dom.safe.parseFromString=function(u,n,A){return u.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(n),A)},goog.dom.safe.createImageFromBlob=function(u){if(!/^image\/.*/g.test(u.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var n=goog.global.URL.createObjectURL(u);return(u=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(n)},goog.dom.safe.setImageSrc(u,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),n)),u},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:"\xA0"},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(u,n){for(var A=u.split("%s"),w="",d=Array.prototype.slice.call(arguments,1);d.length&&1<A.length;)w+=A.shift()+d.shift();return w+A.join("%s")},goog.string.collapseWhitespace=function(u){return u.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(u){return u.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(u){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(u))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(u){return!/[^\t\n\r ]/.test(u)},goog.string.isAlpha=function(u){return!/[^a-zA-Z]/.test(u)},goog.string.isNumeric=function(u){return!/[^0-9]/.test(u)},goog.string.isAlphaNumeric=function(u){return!/[^a-zA-Z0-9]/.test(u)},goog.string.isSpace=function(u){return u==" "},goog.string.isUnicodeChar=function(u){return u.length==1&&" "<=u&&"~">=u||"\x80"<=u&&"\uFFFD">=u},goog.string.stripNewlines=function(u){return u.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(u){return u.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(u){return u.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(u){return u.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(u){return u.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(u){return u.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(u){return u.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(u,n,A){if(u==n)return 0;if(!u)return-1;if(!n)return 1;for(var w=u.toLowerCase().match(A),d=n.toLowerCase().match(A),m=Math.min(w.length,d.length),o=0;o<m;o++){A=w[o];var E=d[o];if(A!=E)return u=parseInt(A,10),!isNaN(u)&&(n=parseInt(E,10),!isNaN(n)&&u-n)?u-n:A<E?-1:1}return w.length!=d.length?w.length-d.length:u<n?-1:1},goog.string.intAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\D+/g)},goog.string.floatAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(u){return encodeURIComponent(String(u))},goog.string.urlDecode=function(u){return decodeURIComponent(u.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(u,n){return u=goog.string.internal.htmlEscape(u,n),goog.string.DETECT_DOUBLE_ESCAPING&&(u=u.replace(goog.string.E_RE_,"&#101;")),u},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(u){return goog.string.contains(u,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(u):goog.string.unescapePureXmlEntities_(u):u},goog.string.unescapeEntitiesWithDocument=function(u,n){return goog.string.contains(u,"&")?goog.string.unescapeEntitiesUsingDom_(u,n):u},goog.string.unescapeEntitiesUsingDom_=function(u,n){var A={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},w=n?n.createElement("div"):goog.global.document.createElement("div");return u.replace(goog.string.HTML_ENTITY_PATTERN_,function(d,m){var o=A[d];return o||(m.charAt(0)=="#"&&(m=+("0"+m.substr(1)),isNaN(m)||(o=String.fromCharCode(m))),o||(goog.dom.safe.setInnerHtml(w,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),d+" ")),o=w.firstChild.nodeValue.slice(0,-1)),A[d]=o)})},goog.string.unescapePureXmlEntities_=function(u){return u.replace(/&([^;]+);/g,function(n,A){switch(A){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return A.charAt(0)!="#"||(A=+("0"+A.substr(1)),isNaN(A))?n:String.fromCharCode(A)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(u,n){return goog.string.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.preserveSpaces=function(u){return u.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(u,n){for(var A=n.length,w=0;w<A;w++){var d=A==1?n:n.charAt(w);if(u.charAt(0)==d&&u.charAt(u.length-1)==d)return u.substring(1,u.length-1)}return u},goog.string.truncate=function(u,n,A){return A&&(u=goog.string.unescapeEntities(u)),u.length>n&&(u=u.substring(0,n-3)+"..."),A&&(u=goog.string.htmlEscape(u)),u},goog.string.truncateMiddle=function(u,n,A,w){if(A&&(u=goog.string.unescapeEntities(u)),w&&u.length>n){w>n&&(w=n);var d=u.length-w;u=u.substring(0,n-w)+"..."+u.substring(d)}else u.length>n&&(w=Math.floor(n/2),d=u.length-w,u=u.substring(0,w+n%2)+"..."+u.substring(d));return A&&(u=goog.string.htmlEscape(u)),u},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(u){u=String(u);for(var n=['"'],A=0;A<u.length;A++){var w=u.charAt(A),d=w.charCodeAt(0);n[A+1]=goog.string.specialEscapeChars_[w]||(31<d&&127>d?w:goog.string.escapeChar(w))}return n.push('"'),n.join("")},goog.string.escapeString=function(u){for(var n=[],A=0;A<u.length;A++)n[A]=goog.string.escapeChar(u.charAt(A));return n.join("")},goog.string.escapeChar=function(u){if(u in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[u];if(u in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[u]=goog.string.specialEscapeChars_[u];var n=u.charCodeAt(0);if(31<n&&127>n)var A=u;else 256>n?(A="\\x",(16>n||256<n)&&(A+="0")):(A="\\u",4096>n&&(A+="0")),A+=n.toString(16).toUpperCase();return goog.string.jsEscapeCache_[u]=A},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(u,n){return u&&n?u.split(n).length-1:0},goog.string.removeAt=function(u,n,A){var w=u;return 0<=n&&n<u.length&&0<A&&(w=u.substr(0,n)+u.substr(n+A,u.length-n-A)),w},goog.string.remove=function(u,n){return u.replace(n,"")},goog.string.removeAll=function(u,n){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,"")},goog.string.replaceAll=function(u,n,A){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,A.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(u){return String(u).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(u,n){return u.repeat(n)}:function(u,n){return Array(n+1).join(u)},goog.string.padNumber=function(u,n,A){return(A=(u=A!==void 0?u.toFixed(A):String(u)).indexOf("."))==-1&&(A=u.length),goog.string.repeat("0",Math.max(0,n-A))+u},goog.string.makeSafe=function(u){return u==null?"":String(u)},goog.string.buildString=function(u){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(u){for(var n=0,A=0;A<u.length;++A)n=31*n+u.charCodeAt(A)>>>0;return n},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(u){var n=Number(u);return n==0&&goog.string.isEmptyOrWhitespace(u)?NaN:n},goog.string.isLowerCamelCase=function(u){return/^[a-z]+([A-Z][a-z]*)*$/.test(u)},goog.string.isUpperCamelCase=function(u){return/^([A-Z][a-z]*)+$/.test(u)},goog.string.toCamelCase=function(u){return String(u).replace(/\-([a-z])/g,function(n,A){return A.toUpperCase()})},goog.string.toSelectorCase=function(u){return String(u).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(u,n){return n=typeof n=="string"?goog.string.regExpEscape(n):"\\s",u.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(A,w,d){return w+d.toUpperCase()})},goog.string.capitalize=function(u){return String(u.charAt(0)).toUpperCase()+String(u.substr(1)).toLowerCase()},goog.string.parseInt=function(u){return isFinite(u)&&(u=String(u)),typeof u=="string"?/^\s*-?0x/i.test(u)?parseInt(u,16):parseInt(u,10):NaN},goog.string.splitLimit=function(u,n,A){u=u.split(n);for(var w=[];0<A&&u.length;)w.push(u.shift()),A--;return u.length&&w.push(u.join(n)),w},goog.string.lastComponent=function(u,n){if(!n)return u;typeof n=="string"&&(n=[n]);for(var A=-1,w=0;w<n.length;w++)if(n[w]!=""){var d=u.lastIndexOf(n[w]);d>A&&(A=d)}return A==-1?u:u.slice(A+1)},goog.string.editDistance=function(u,n){var A=[],w=[];if(u==n)return 0;if(!u.length||!n.length)return Math.max(u.length,n.length);for(var d=0;d<n.length+1;d++)A[d]=d;for(d=0;d<u.length;d++){w[0]=d+1;for(var m=0;m<n.length;m++)w[m+1]=Math.min(w[m]+1,A[m+1]+1,A[m]+ +(u[d]!=n[m]));for(m=0;m<A.length;m++)A[m]=w[m]}return w[n.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent();if(u){u=goog.labs.userAgent.util.extractVersionTuples(u);var n,A=goog.labs.userAgent.engine.getEngineTuple_(u);if(A)return A[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(u,"Firefox"):A[1];if((u=u[0])&&(n=u[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(u){if(!goog.labs.userAgent.engine.isEdge())return u[1];for(var n=0;n<u.length;n++){var A=u[n];if(A[0]=="Edge")return A}},goog.labs.userAgent.engine.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),u)},goog.labs.userAgent.engine.getVersionForKey_=function(u,n){return(u=goog.array.find(u,function(A){return n==A[0]}))&&u[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent(),n="";return goog.labs.userAgent.platform.isWindows()?n=(u=(n=/Windows (?:NT|Phone) ([0-9.]+)/).exec(u))?u[1]:"0.0":goog.labs.userAgent.platform.isIos()?n=(u=(n=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(u))&&u[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?n=(u=(n=/Mac OS X ([0-9_.]+)/).exec(u))?u[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?n=(u=(n=/(?:KaiOS)\/(\S+)/i).exec(u))&&u[1]:goog.labs.userAgent.platform.isAndroid()?n=(u=(n=/Android\s+([^\);]+)(\)|;)/).exec(u))&&u[1]:goog.labs.userAgent.platform.isChromeOS()&&(n=(u=(n=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(u))&&u[1]),n||""},goog.labs.userAgent.platform.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),u)},goog.reflect={},goog.reflect.object=function(u,n){return n},goog.reflect.objectProperty=function(u,n){return u},goog.reflect.sinkValue=function(u){return goog.reflect.sinkValue[" "](u),u},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(u,n){try{return goog.reflect.sinkValue(u[n]),!0}catch(A){}return!1},goog.reflect.cache=function(u,n,A,w){return w=w?w(n):n,Object.prototype.hasOwnProperty.call(u,w)?u[w]:u[w]=A(n)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var u=goog.userAgent.getNavigatorTyped();return u&&u.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var u=goog.userAgent.getNavigatorTyped();return!!u&&goog.string.contains(u.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var u="",n=goog.userAgent.getVersionRegexResult_();return n&&(u=n?n[1]:""),goog.userAgent.IE&&(n=goog.userAgent.getDocumentMode_())!=null&&n>parseFloat(u)?String(n):u},goog.userAgent.getVersionRegexResult_=function(){var u=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(u):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(u):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(u):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(u):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(u):void 0},goog.userAgent.getDocumentMode_=function(){var u=goog.global.document;return u?u.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(u,n){return goog.string.compareVersions(u,n)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(u){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,u,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,u)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(u){return Number(goog.userAgent.DOCUMENT_MODE)>=u},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var u=goog.userAgent.getDocumentMode_();return u||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(u){return goog.string.contains(goog.crypt.base64.paddingChars_,u)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(u,n){goog.asserts.assert(goog.isArrayLike(u),"encodeByteArray takes an array as a parameter"),n===void 0&&(n=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),n=goog.crypt.base64.byteToCharMaps_[n];for(var A=[],w=0;w<u.length;w+=3){var d=u[w],m=w+1<u.length,o=m?u[w+1]:0,E=w+2<u.length,j=E?u[w+2]:0,ee=d>>2;d=(3&d)<<4|o>>4,o=(15&o)<<2|j>>6,j&=63,E||(j=64,m||(o=64)),A.push(n[ee],n[d],n[o]||"",n[j]||"")}return A.join("")},goog.crypt.base64.encodeString=function(u,n){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!n?goog.global.btoa(u):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(u),n)},goog.crypt.base64.decodeString=function(u,n){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!n)return goog.global.atob(u);var A="";return goog.crypt.base64.decodeStringInternal_(u,function(w){A+=String.fromCharCode(w)}),A},goog.crypt.base64.decodeStringToByteArray=function(u,n){var A=[];return goog.crypt.base64.decodeStringInternal_(u,function(w){A.push(w)}),A},goog.crypt.base64.decodeStringToUint8Array=function(u){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var n=u.length,A=3*n/4;A%3?A=Math.floor(A):goog.crypt.base64.isPadding_(u[n-1])&&(A=goog.crypt.base64.isPadding_(u[n-2])?A-2:A-1);var w=new Uint8Array(A),d=0;return goog.crypt.base64.decodeStringInternal_(u,function(m){w[d++]=m}),w.subarray(0,d)},goog.crypt.base64.decodeStringInternal_=function(u,n){function A(j){for(;w<u.length;){var ee=u.charAt(w++),le=goog.crypt.base64.charToByteMap_[ee];if(le!=null)return le;if(!goog.string.isEmptyOrWhitespace(ee))throw Error("Unknown base64 encoding at char: "+ee)}return j}goog.crypt.base64.init_();for(var w=0;;){var d=A(-1),m=A(0),o=A(64),E=A(64);if(E===64&&d===-1)break;n(d<<2|m>>4),o!=64&&(n(m<<4&240|o>>2),E!=64&&n(o<<6&192|E))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var u=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),n=["+/=","+/","-_=","-_.","-_"],A=0;5>A;A++){var w=u.concat(n[A].split(""));goog.crypt.base64.byteToCharMaps_[A]=w;for(var d=0;d<w.length;d++){var m=w[d],o=goog.crypt.base64.charToByteMap_[m];o===void 0?goog.crypt.base64.charToByteMap_[m]=d:goog.asserts.assert(o===d)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(u){var n=u>>>0;u=Math.floor((u-n)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=n,jspb.utils.split64High=u},jspb.utils.splitInt64=function(u){var n=0>u,A=(u=Math.abs(u))>>>0;u=Math.floor((u-A)/jspb.BinaryConstants.TWO_TO_32),u>>>=0,n&&(u=~u>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++u&&(u=0))),jspb.utils.split64Low=A,jspb.utils.split64High=u},jspb.utils.splitZigzag64=function(u){var n=0>u;u=2*Math.abs(u),jspb.utils.splitUint64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;n&&(u==0?A==0?A=u=4294967295:(A--,u=4294967295):u--),jspb.utils.split64Low=u,jspb.utils.split64High=A},jspb.utils.splitFloat32=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)0<1/u?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(u))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(u>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|2139095040)>>>0;else if(u<jspb.BinaryConstants.FLOAT32_MIN)u=Math.round(u/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|u)>>>0;else{var A=Math.floor(Math.log(u)/Math.LN2);u*=Math.pow(2,-A),16777216<=(u=Math.round(u*jspb.BinaryConstants.TWO_TO_23))&&++A,jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|A+127<<23|8388607&u)>>>0}},jspb.utils.splitFloat64=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)jspb.utils.split64High=0<1/u?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(u))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(u>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(n<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(u<jspb.BinaryConstants.FLOAT64_MIN){var A=u/Math.pow(2,-1074);u=A/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(n<<31|u)>>>0,jspb.utils.split64Low=A>>>0}else{var w=0;if(2<=(A=u))for(;2<=A&&1023>w;)w++,A/=2;else for(;1>A&&-1022<w;)A*=2,w--;u=(A=u*Math.pow(2,-w))*jspb.BinaryConstants.TWO_TO_20&1048575,A=A*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(n<<31|w+1023<<20|u)>>>0,jspb.utils.split64Low=A}},jspb.utils.splitHash64=function(u){var n=u.charCodeAt(0),A=u.charCodeAt(1),w=u.charCodeAt(2),d=u.charCodeAt(3),m=u.charCodeAt(4),o=u.charCodeAt(5),E=u.charCodeAt(6);u=u.charCodeAt(7),jspb.utils.split64Low=n+(A<<8)+(w<<16)+(d<<24)>>>0,jspb.utils.split64High=m+(o<<8)+(E<<16)+(u<<24)>>>0},jspb.utils.joinUint64=function(u,n){return n*jspb.BinaryConstants.TWO_TO_32+(u>>>0)},jspb.utils.joinInt64=function(u,n){var A=2147483648&n;return A&&(n=~n>>>0,(u=1+~u>>>0)==0&&(n=n+1>>>0)),u=jspb.utils.joinUint64(u,n),A?-u:u},jspb.utils.toZigzag64=function(u,n,A){var w=n>>31;return A(u<<1^w,(n<<1|u>>>31)^w)},jspb.utils.joinZigzag64=function(u,n){return jspb.utils.fromZigzag64(u,n,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(u,n,A){var w=-(1&u);return A((u>>>1|n<<31)^w,n>>>1^w)},jspb.utils.joinFloat32=function(u,n){n=2*(u>>31)+1;var A=u>>>23&255;return u&=8388607,A==255?u?NaN:1/0*n:A==0?n*Math.pow(2,-149)*u:n*Math.pow(2,A-150)*(u+Math.pow(2,23))},jspb.utils.joinFloat64=function(u,n){var A=2*(n>>31)+1,w=n>>>20&2047;return u=jspb.BinaryConstants.TWO_TO_32*(1048575&n)+u,w==2047?u?NaN:1/0*A:w==0?A*Math.pow(2,-1074)*u:A*Math.pow(2,w-1075)*(u+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(u,n){return String.fromCharCode(u>>>0&255,u>>>8&255,u>>>16&255,u>>>24&255,n>>>0&255,n>>>8&255,n>>>16&255,n>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(u,n){function A(d,m){return d=d?String(d):"",m?"0000000".slice(d.length)+d:d}if(2097151>=n)return""+jspb.utils.joinUint64(u,n);var w=(u>>>24|n<<8)>>>0&16777215;return u=(16777215&u)+6777216*w+6710656*(n=n>>16&65535),w+=8147497*n,n*=2,1e7<=u&&(w+=Math.floor(u/1e7),u%=1e7),1e7<=w&&(n+=Math.floor(w/1e7),w%=1e7),A(n,0)+A(w,n)+A(u,1)},jspb.utils.joinSignedDecimalString=function(u,n){var A=2147483648&n;return A&&(n=~n+((u=1+~u>>>0)==0?1:0)>>>0),u=jspb.utils.joinUnsignedDecimalString(u,n),A?"-"+u:u},jspb.utils.hash64ToDecimalString=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;return n?jspb.utils.joinSignedDecimalString(u,A):jspb.utils.joinUnsignedDecimalString(u,A)},jspb.utils.hash64ArrayToDecimalStrings=function(u,n){for(var A=Array(u.length),w=0;w<u.length;w++)A[w]=jspb.utils.hash64ToDecimalString(u[w],n);return A},jspb.utils.decimalStringToHash64=function(u){function n(m,o){for(var E=0;8>E&&(m!==1||0<o);E++)o=m*w[E]+o,w[E]=255&o,o>>>=8}jspb.asserts.assert(0<u.length);var A=!1;u[0]==="-"&&(A=!0,u=u.slice(1));for(var w=[0,0,0,0,0,0,0,0],d=0;d<u.length;d++)n(10,u.charCodeAt(d)-jspb.utils.ZERO_CHAR_CODE_);return A&&(function(){for(var m=0;8>m;m++)w[m]=255&~w[m]}(),n(1,1)),goog.crypt.byteArrayToString(w)},jspb.utils.splitDecimalString=function(u){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u))},jspb.utils.toHexDigit_=function(u){return String.fromCharCode(10>u?jspb.utils.ZERO_CHAR_CODE_+u:jspb.utils.A_CHAR_CODE_-10+u)},jspb.utils.fromHexCharCode_=function(u){return u>=jspb.utils.A_CHAR_CODE_?u-jspb.utils.A_CHAR_CODE_+10:u-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(u){var n=Array(18);n[0]="0",n[1]="x";for(var A=0;8>A;A++){var w=u.charCodeAt(7-A);n[2*A+2]=jspb.utils.toHexDigit_(w>>4),n[2*A+3]=jspb.utils.toHexDigit_(15&w)}return n.join("")},jspb.utils.hexStringToHash64=function(u){u=u.toLowerCase(),jspb.asserts.assert(u.length==18),jspb.asserts.assert(u[0]=="0"),jspb.asserts.assert(u[1]=="x");for(var n="",A=0;8>A;A++){var w=jspb.utils.fromHexCharCode_(u.charCodeAt(2*A+2)),d=jspb.utils.fromHexCharCode_(u.charCodeAt(2*A+3));n=String.fromCharCode(16*w+d)+n}return n},jspb.utils.hash64ToNumber=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;return n?jspb.utils.joinInt64(u,A):jspb.utils.joinUint64(u,A)},jspb.utils.numberToHash64=function(u){return jspb.utils.splitInt64(u),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(u,n,A){for(var w=0,d=n;d<A;d++)w+=u[d]>>7;return A-n-w},jspb.utils.countVarintFields=function(u,n,A,w){var d=0;if(128>(w=8*w+jspb.BinaryConstants.WireType.VARINT))for(;n<A&&u[n++]==w;)for(d++;;){var m=u[n++];if(!(128&m))break}else for(;n<A;){for(m=w;128<m;){if(u[n]!=(127&m|128))return d;n++,m>>=7}if(u[n++]!=m)break;for(d++;128&(m=u[n++]););}return d},jspb.utils.countFixedFields_=function(u,n,A,w,d){var m=0;if(128>w)for(;n<A&&u[n++]==w;)m++,n+=d;else for(;n<A;){for(var o=w;128<o;){if(u[n++]!=(127&o|128))return m;o>>=7}if(u[n++]!=o)break;m++,n+=d}return m},jspb.utils.countFixed32Fields=function(u,n,A,w){return jspb.utils.countFixedFields_(u,n,A,8*w+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(u,n,A,w){return jspb.utils.countFixedFields_(u,n,A,8*w+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(u,n,A,w){var d=0;for(w=8*w+jspb.BinaryConstants.WireType.DELIMITED;n<A;){for(var m=w;128<m;){if(u[n++]!=(127&m|128))return d;m>>=7}if(u[n++]!=m)break;d++;for(var o=0,E=1;o+=(127&(m=u[n++]))*E,E*=128,(128&m)!=0;);n+=o}return d},jspb.utils.debugBytesToTextFormat=function(u){var n='"';if(u){u=jspb.utils.byteSourceToUint8Array(u);for(var A=0;A<u.length;A++)n+="\\x",16>u[A]&&(n+="0"),n+=u[A].toString(16)}return n+'"'},jspb.utils.debugScalarToTextFormat=function(u){return typeof u=="string"?goog.string.quote(u):u.toString()},jspb.utils.stringToByteArray=function(u){for(var n=new Uint8Array(u.length),A=0;A<u.length;A++){var w=u.charCodeAt(A);if(255<w)throw Error("Conversion error: string contains codepoint outside of byte range");n[A]=w}return n},jspb.utils.byteSourceToUint8Array=function(u){return u.constructor===Uint8Array?u:u.constructor===ArrayBuffer||u.constructor===Array?new Uint8Array(u):u.constructor===String?goog.crypt.base64.decodeStringToUint8Array(u):u instanceof Uint8Array?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(u,n,A){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,u&&this.setBlock(u,n,A)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(u,n,A){if(jspb.BinaryDecoder.instanceCache_.length){var w=jspb.BinaryDecoder.instanceCache_.pop();return u&&w.setBlock(u,n,A),w}return new jspb.BinaryDecoder(u,n,A)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(u,n,A){this.bytes_=jspb.utils.byteSourceToUint8Array(u),this.start_=n!==void 0?n:0,this.end_=A!==void 0?this.start_+A:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(u){this.end_=u},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(u){this.cursor_=u},jspb.BinaryDecoder.prototype.advance=function(u){this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(u){for(var n=128,A=0,w=0,d=0;4>d&&128<=n;d++)A|=(127&(n=this.bytes_[this.cursor_++]))<<7*d;if(128<=n&&(A|=(127&(n=this.bytes_[this.cursor_++]))<<28,w|=(127&n)>>4),128<=n)for(d=0;5>d&&128<=n;d++)w|=(127&(n=this.bytes_[this.cursor_++]))<<7*d+3;if(128>n)return u(A>>>0,w>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(u){return this.readSplitVarint64(function(n,A){return jspb.utils.fromZigzag64(n,A,u)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(u){var n=this.bytes_,A=this.cursor_;this.cursor_+=8;for(var w=0,d=0,m=A+7;m>=A;m--)w=w<<8|n[m],d=d<<8|n[m+4];return u(w,d)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(u){for(;128<u;)this.cursor_--,u>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var u=this.bytes_,n=u[this.cursor_+0],A=127&n;return 128>n?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+1]))<<7,128>n?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+2]))<<14,128>n?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+3]))<<21,128>n?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(15&(n=u[this.cursor_+4]))<<28,128>n?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),A>>>0):(this.cursor_+=5,128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),A)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var u=this.readUnsignedVarint32();return u>>>1^-(1&u)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u},jspb.BinaryDecoder.prototype.readUint16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],A=this.bytes_[this.cursor_+2],w=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8|A<<16|w<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUint64(u,n)},jspb.BinaryDecoder.prototype.readUint64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUnsignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readInt8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],A=this.bytes_[this.cursor_+2],w=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8|A<<16|w<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinInt64(u,n)},jspb.BinaryDecoder.prototype.readInt64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinSignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readFloat=function(){var u=this.readUint32();return jspb.utils.joinFloat32(u,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinFloat64(u,n)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(u){var n=this.bytes_,A=this.cursor_;u=A+u;for(var w=[],d="";A<u;){var m=n[A++];if(128>m)w.push(m);else{if(192>m)continue;if(224>m){var o=n[A++];w.push((31&m)<<6|63&o)}else if(240>m){o=n[A++];var E=n[A++];w.push((15&m)<<12|(63&o)<<6|63&E)}else 248>m&&(m=(7&m)<<18|(63&(o=n[A++]))<<12|(63&(E=n[A++]))<<6|63&n[A++],m-=65536,w.push(55296+(m>>10&1023),56320+(1023&m)))}8192<=w.length&&(d+=String.fromCharCode.apply(null,w),w.length=0)}return d+=goog.crypt.byteArrayToString(w),this.cursor_=A,d},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var u=this.readUnsignedVarint32();return this.readString(u)},jspb.BinaryDecoder.prototype.readBytes=function(u){if(0>u||this.cursor_+u>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var n=this.bytes_.subarray(this.cursor_,this.cursor_+u);return this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_),n},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var u=this.bytes_,n=this.cursor_,A=u[n+0],w=u[n+1],d=u[n+2],m=u[n+3],o=u[n+4],E=u[n+5],j=u[n+6];return u=u[n+7],this.cursor_+=8,String.fromCharCode(A,w,d,m,o,E,j,u)},jspb.BinaryReader=function(u,n,A){this.decoder_=jspb.BinaryDecoder.alloc(u,n,A),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(u,n,A){if(jspb.BinaryReader.instanceCache_.length){var w=jspb.BinaryReader.instanceCache_.pop();return u&&w.decoder_.setBlock(u,n,A),w}return new jspb.BinaryReader(u,n,A)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(u,n,A){this.decoder_.setBlock(u,n,A),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(u){this.decoder_.advance(u)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var u=this.decoder_.readUnsignedVarint32(),n=u>>>3;return(u&=7)!=jspb.BinaryConstants.WireType.VARINT&&u!=jspb.BinaryConstants.WireType.FIXED32&&u!=jspb.BinaryConstants.WireType.FIXED64&&u!=jspb.BinaryConstants.WireType.DELIMITED&&u!=jspb.BinaryConstants.WireType.START_GROUP&&u!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",u,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=n,this.nextWireType_=u,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var u=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==u;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var u=this.decoder_.readUnsignedVarint32();this.decoder_.advance(u)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var u=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=u&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(u,n){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[u]),this.readCallbacks_[u]=n},jspb.BinaryReader.prototype.runReadCallback=function(u){return jspb.asserts.assert(this.readCallbacks_!==null),u=this.readCallbacks_[u],jspb.asserts.assert(u),u(this)},jspb.BinaryReader.prototype.readAny=function(u){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(u);var n=jspb.BinaryConstants.FieldType;switch(u){case n.DOUBLE:return this.readDouble();case n.FLOAT:return this.readFloat();case n.INT64:return this.readInt64();case n.UINT64:return this.readUint64();case n.INT32:return this.readInt32();case n.FIXED64:return this.readFixed64();case n.FIXED32:return this.readFixed32();case n.BOOL:return this.readBool();case n.STRING:return this.readString();case n.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case n.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case n.BYTES:return this.readBytes();case n.UINT32:return this.readUint32();case n.ENUM:return this.readEnum();case n.SFIXED32:return this.readSfixed32();case n.SFIXED64:return this.readSfixed64();case n.SINT32:return this.readSint32();case n.SINT64:return this.readSint64();case n.FHASH64:return this.readFixedHash64();case n.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(u,n){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var A=this.decoder_.getEnd(),w=this.decoder_.readUnsignedVarint32();w=this.decoder_.getCursor()+w,this.decoder_.setEnd(w),n(u,this),this.decoder_.setCursor(w),this.decoder_.setEnd(A)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(u,n,A){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==u),A(n,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32(),n=this.decoder_.getCursor(),A=n+u;return u=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),n,u),this.decoder_.setCursor(A),u},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(u)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(n,A){return jspb.utils.fromZigzag64(n,A,u)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(u)},jspb.BinaryReader.prototype.readPackedField_=function(u){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n;for(var A=[];this.decoder_.getCursor()<n;)A.push(u.call(this.decoder_));return A},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var u=this.buffer_;return this.buffer_=[],u},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(u,n){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32);0<n||127<u;)this.buffer_.push(127&u|128),u=(u>>>7|n<<25)>>>0,n>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(u,n){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(u),this.writeUint32(n)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(u){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32);127<u;)this.buffer_.push(127&u|128),u>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(u){if(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),0<=u)this.writeUnsignedVarint32(u);else{for(var n=0;9>n;n++)this.buffer_.push(127&u|128),u>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((u<<1^u>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(u){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(u))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(u){var n=this;jspb.utils.splitHash64(u),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(A,w){n.writeSplitVarint64(A>>>0,w>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&256>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&65536>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-128<=u&&128>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-32768<=u&&32768>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(+u>=-jspb.BinaryConstants.TWO_TO_63&&+u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT32_MAX&&u<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(u),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT64_MAX&&u<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(u){jspb.asserts.assert(typeof u=="boolean"||typeof u=="number"),this.buffer_.push(u?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(u)},jspb.BinaryEncoder.prototype.writeBytes=function(u){this.buffer_.push.apply(this.buffer_,u)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(u){jspb.utils.splitHash64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(u){jspb.utils.splitHash64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(u){var n=this.buffer_.length;jspb.asserts.assertString(u);for(var A=0;A<u.length;A++){var w=u.charCodeAt(A);if(128>w)this.buffer_.push(w);else if(2048>w)this.buffer_.push(w>>6|192),this.buffer_.push(63&w|128);else if(65536>w)if(55296<=w&&56319>=w&&A+1<u.length){var d=u.charCodeAt(A+1);56320<=d&&57343>=d&&(w=1024*(w-55296)+d-56320+65536,this.buffer_.push(w>>18|240),this.buffer_.push(w>>12&63|128),this.buffer_.push(w>>6&63|128),this.buffer_.push(63&w|128),A++)}else this.buffer_.push(w>>12|224),this.buffer_.push(w>>6&63|128),this.buffer_.push(63&w|128)}return this.buffer_.length-n},jspb.arith={},jspb.arith.UInt64=function(u,n){this.lo=u,this.hi=n},jspb.arith.UInt64.prototype.cmp=function(u){return this.hi<u.hi||this.hi==u.hi&&this.lo<u.lo?-1:this.hi==u.hi&&this.lo==u.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(u){return new jspb.arith.UInt64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(u){return new jspb.arith.UInt64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(u,n){var A=65535&u,w=65535&n,d=n>>>16;for(n=A*w+65536*(A*d&65535)+65536*((u>>>=16)*w&65535),A=u*d+(A*d>>>16)+(u*w>>>16);4294967296<=n;)n-=4294967296,A+=1;return new jspb.arith.UInt64(n>>>0,A>>>0)},jspb.arith.UInt64.prototype.mul=function(u){var n=jspb.arith.UInt64.mul32x32(this.lo,u);return(u=jspb.arith.UInt64.mul32x32(this.hi,u)).hi=u.lo,u.lo=0,n.add(u)},jspb.arith.UInt64.prototype.div=function(u){if(u==0)return[];var n=new jspb.arith.UInt64(0,0),A=new jspb.arith.UInt64(this.lo,this.hi);u=new jspb.arith.UInt64(u,0);for(var w=new jspb.arith.UInt64(1,0);!u.msb();)u=u.leftShift(),w=w.leftShift();for(;!w.zero();)0>=u.cmp(A)&&(n=n.add(w),A=A.sub(u)),u=u.rightShift(),w=w.rightShift();return[n,A]},jspb.arith.UInt64.prototype.toString=function(){for(var u="",n=this;!n.zero();){var A=(n=n.div(10))[0];u=n[1].lo+u,n=A}return u==""&&(u="0"),u},jspb.arith.UInt64.fromString=function(u){for(var n=new jspb.arith.UInt64(0,0),A=new jspb.arith.UInt64(0,0),w=0;w<u.length;w++){if("0">u[w]||"9"<u[w])return null;var d=parseInt(u[w],10);A.lo=d,n=n.mul(10).add(A)}return n},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(u,n){this.lo=u,this.hi=n},jspb.arith.Int64.prototype.add=function(u){return new jspb.arith.Int64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(u){return new jspb.arith.Int64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var u=(2147483648&this.hi)!=0,n=new jspb.arith.UInt64(this.lo,this.hi);return u&&(n=new jspb.arith.UInt64(0,0).sub(n)),(u?"-":"")+n.toString()},jspb.arith.Int64.fromString=function(u){var n=0<u.length&&u[0]=="-";return n&&(u=u.substring(1)),(u=jspb.arith.UInt64.fromString(u))===null?null:(n&&(u=new jspb.arith.UInt64(0,0).sub(u)),new jspb.arith.Int64(u.lo,u.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(u){var n=this.encoder_.end();this.blocks_.push(n),this.blocks_.push(u),this.totalLength_+=n.length+u.length},jspb.BinaryWriter.prototype.beginDelimited_=function(u){return this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),u=this.encoder_.end(),this.blocks_.push(u),this.totalLength_+=u.length,u.push(this.totalLength_),u},jspb.BinaryWriter.prototype.endDelimited_=function(u){var n=u.pop();for(n=this.totalLength_+this.encoder_.length()-n,jspb.asserts.assert(0<=n);127<n;)u.push(127&n|128),n>>>=7,this.totalLength_++;u.push(n),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(u,n,A){this.appendUint8Array_(u.subarray(n,A))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(u,n,A){u!=null&&n!=null&&A!=null&&this.writeSerializedMessage(u,n,A)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var u=new Uint8Array(this.totalLength_+this.encoder_.length()),n=this.blocks_,A=n.length,w=0,d=0;d<A;d++){var m=n[d];u.set(m,w),w+=m.length}return n=this.encoder_.end(),u.set(n,w),w+=n.length,jspb.asserts.assert(w==u.length),this.blocks_=[u],u},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(u){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),u)},jspb.BinaryWriter.prototype.beginSubMessage=function(u){this.bookmarks_.push(this.beginDelimited_(u))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(u,n){jspb.asserts.assert(1<=u&&u==Math.floor(u)),this.encoder_.writeUnsignedVarint32(8*u+n)},jspb.BinaryWriter.prototype.writeAny=function(u,n,A){var w=jspb.BinaryConstants.FieldType;switch(u){case w.DOUBLE:this.writeDouble(n,A);break;case w.FLOAT:this.writeFloat(n,A);break;case w.INT64:this.writeInt64(n,A);break;case w.UINT64:this.writeUint64(n,A);break;case w.INT32:this.writeInt32(n,A);break;case w.FIXED64:this.writeFixed64(n,A);break;case w.FIXED32:this.writeFixed32(n,A);break;case w.BOOL:this.writeBool(n,A);break;case w.STRING:this.writeString(n,A);break;case w.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case w.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case w.BYTES:this.writeBytes(n,A);break;case w.UINT32:this.writeUint32(n,A);break;case w.ENUM:this.writeEnum(n,A);break;case w.SFIXED32:this.writeSfixed32(n,A);break;case w.SFIXED64:this.writeSfixed64(n,A);break;case w.SINT32:this.writeSint32(n,A);break;case w.SINT64:this.writeSint64(n,A);break;case w.FHASH64:this.writeFixedHash64(n,A);break;case w.VHASH64:this.writeVarintHash64(n,A);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(n))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(n))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(n))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(n))},jspb.BinaryWriter.prototype.writeInt32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeInt64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeUint32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeUint64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSint32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(u,n){n!=null&&this.writeZigzagVarintHash64_(u,n)},jspb.BinaryWriter.prototype.writeSint64String=function(u,n){n!=null&&this.writeZigzagVarint64String_(u,n)},jspb.BinaryWriter.prototype.writeFixed32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeFloat=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(u,n){n!=null&&(jspb.asserts.assert(typeof n=="boolean"||typeof n=="number"),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(u,n){n!=null&&(u=this.beginDelimited_(u),this.encoder_.writeString(n),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(u,n){n!=null&&(n=jspb.utils.byteSourceToUint8Array(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),this.appendUint8Array_(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(u,n,A){n!=null&&(u=this.beginDelimited_(u),A(n,this),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(u,n,A){n!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(u),u=this.beginDelimited_(3),A(n,this),this.endDelimited_(u),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(u,n,A){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),A(n,this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(n))},jspb.BinaryWriter.prototype.writeVarintHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(n))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n,A)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n,A)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT);var w=this.encoder_;jspb.utils.toZigzag64(n,A,function(d,m){w.writeSplitVarint64(d>>>0,m>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSignedVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeInt32String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSignedVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(u,n,A,w){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitFixed64(u,A(n[d]),w(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(u,n,A,w){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitVarint64(u,A(n[d]),w(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(u,n,A,w){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitZigzagVarint64(u,A(n[d]),w(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeInt64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUnsignedVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUint32String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUnsignedVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUint64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint64String_(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarintHash64_(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed32(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed64(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed64String(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed32(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed64(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFloat(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeDouble(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeBool(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeEnum(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeString(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeBytes(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(u,n,A){if(n!=null)for(var w=0;w<n.length;w++){var d=this.beginDelimited_(u);A(n[w],this),this.endDelimited_(d)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(u,n,A){if(n!=null)for(var w=0;w<n.length;w++)this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),A(n[w],this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixedHash64(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeVarintHash64(u,n[A])},jspb.BinaryWriter.prototype.writePackedInt32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint32(parseInt(n[A],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(u,n,A,w){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitFixed64(A(n[d]),w(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(u,n,A,w){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitVarint64(A(n[d]),w(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(u,n,A,w){if(n!=null){u=this.beginDelimited_(u);for(var d=this.encoder_,m=0;m<n.length;m++)jspb.utils.toZigzag64(A(n[m]),w(n[m]),function(o,E){d.writeSplitVarint64(o>>>0,E>>>0)});this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++){var w=jspb.arith.Int64.fromString(n[A]);this.encoder_.writeSplitVarint64(w.lo,w.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint32(parseInt(n[A],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++){var w=jspb.arith.UInt64.fromString(n[A]);this.encoder_.writeSplitVarint64(w.lo,w.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(n[A]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarintHash64(n[A]);this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeUint32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeUint64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++){var A=jspb.arith.UInt64.fromString(n[u]);this.encoder_.writeSplitFixed64(A.lo,A.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeInt32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64String(n[u])},jspb.BinaryWriter.prototype.writePackedFloat=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeFloat(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeDouble(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),u=0;u<n.length;u++)this.encoder_.writeBool(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeEnum(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeFixedHash64(n[u])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeVarintHash64(n[A]);this.endDelimited_(u)}},jspb.Map=function(u,n){this.arr_=u,this.valueCtor_=n,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var u=0;u<this.arr_.length;u++){var n=this.arr_[u],A=n[0];this.map_[A.toString()]=new jspb.Map.Entry_(A,n[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var u,n=this.map_;for(u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var A=n[u].valueWrapper;A&&A.toArray()}}}else{for(this.arr_.length=0,(n=this.stringKeys_()).sort(),u=0;u<n.length;u++){var w=this.map_[n[u]];(A=w.valueWrapper)&&A.toArray(),this.arr_.push([w.key,w.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(u,n){for(var A=this.toArray(),w=[],d=0;d<A.length;d++){var m=this.map_[A[d][0].toString()];this.wrapEntry_(m);var o=m.valueWrapper;o?(jspb.asserts.assert(n),w.push([m.key,n(u,o)])):w.push([m.key,m.value])}return w},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(u,n,A){n=new jspb.Map([],n);for(var w=0;w<u.length;w++){var d=u[w][0],m=A(u[w][1]);n.set(d,m)}return n},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(u){this.idx_=0,this.arr_=u},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol!="undefined"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(u){u=u.toString();var n=this.map_.hasOwnProperty(u);return delete this.map_[u],this.arrClean=!1,n},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++){var w=this.map_[n[A]];u.push([w.key,w.value])}return u},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++){var w=this.map_[n[A]];u.push([w.key,this.wrapEntry_(w)])}return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++)u.push(this.map_[n[A]].key);return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++)u.push(this.wrapEntry_(this.map_[n[A]]));return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(u,n){var A=this.stringKeys_();A.sort();for(var w=0;w<A.length;w++){var d=this.map_[A[w]];u.call(n,this.wrapEntry_(d),d.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(u,n){var A=new jspb.Map.Entry_(u);return this.valueCtor_?(A.valueWrapper=n,A.value=n.toArray()):A.value=n,this.map_[u.toString()]=A,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(u){return this.valueCtor_?(u.valueWrapper||(u.valueWrapper=new this.valueCtor_(u.value)),u.valueWrapper):u.value},jspb.Map.prototype.get=function(u){if(u=this.map_[u.toString()])return this.wrapEntry_(u)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(u){return u.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(u,n,A,w,d){var m=this.stringKeys_();m.sort();for(var o=0;o<m.length;o++){var E=this.map_[m[o]];n.beginSubMessage(u),A.call(n,1,E.key),this.valueCtor_?w.call(n,2,this.wrapEntry_(E),d):w.call(n,2,E.value),n.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(u,n,A,w,d,m,o){for(;n.nextField()&&!n.isEndGroup();){var E=n.getFieldNumber();E==1?m=A.call(n):E==2&&(u.valueCtor_?(jspb.asserts.assert(d),o||(o=new u.valueCtor_),w.call(n,o,d)):o=w.call(n))}jspb.asserts.assert(m!=null),jspb.asserts.assert(o!=null),u.set(m,o)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var u,n=this.map_,A=[];for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&A.push(u);return A},jspb.Map.Entry_=function(u,n){this.key=u,this.value=n,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(u,n,A,w,d){this.fieldIndex=u,this.fieldName=n,this.ctor=A,this.toObjectFn=w,this.isRepeated=d},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(u,n,A,w,d,m){this.fieldInfo=u,this.binaryReaderFn=n,this.binaryWriterFn=A,this.binaryMessageSerializeFn=w,this.binaryMessageDeserializeFn=d,this.isPacked=m},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(u,n){return n+u.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(u,n){return n-u.arrayIndexOffset_},jspb.Message.initialize=function(u,n,A,w,d,m){if(u.wrappers_=null,n||(n=A?[A]:[]),u.messageId_=A?String(A):void 0,u.arrayIndexOffset_=A===0?-1:0,u.array=n,jspb.Message.initPivotAndExtensionObject_(u,w),u.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(u.repeatedFields=d),d)for(n=0;n<d.length;n++)(A=d[n])<u.pivot_?(A=jspb.Message.getIndex_(u,A),u.array[A]=u.array[A]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[A]=u.extensionObject_[A]||jspb.Message.EMPTY_LIST_SENTINEL_);if(m&&m.length)for(n=0;n<m.length;n++)jspb.Message.computeOneofCase(u,m[n])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(u){return jspb.Message.ASSUME_LOCAL_ARRAYS?u instanceof Array:Array.isArray(u)},jspb.Message.isExtensionObject_=function(u){return!(u===null||typeof u!="object"||jspb.Message.isArray_(u)||jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(u,n){var A=u.array.length,w=-1;if(A&&(w=A-1,A=u.array[w],jspb.Message.isExtensionObject_(A)))return u.pivot_=jspb.Message.getFieldNumber_(u,w),void(u.extensionObject_=A);-1<n?(u.pivot_=Math.max(n,jspb.Message.getFieldNumber_(u,w+1)),u.extensionObject_=null):u.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(u){var n=jspb.Message.getIndex_(u,u.pivot_);u.array[n]||(u.extensionObject_=u.array[n]={})},jspb.Message.toObjectList=function(u,n,A){for(var w=[],d=0;d<u.length;d++)w[d]=n.call(u[d],A,u[d]);return w},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(u,n,A,w,d){for(var m in A){var o=A[m],E=w.call(u,o);if(E!=null){for(var j in o.fieldName)if(o.fieldName.hasOwnProperty(j))break;n[j]=o.toObjectFn?o.isRepeated?jspb.Message.toObjectList(E,o.toObjectFn,d):o.toObjectFn(d,E):E}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(u,n,A,w){for(var d in A){var m=A[d],o=m.fieldInfo;if(!m.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var E=w.call(u,o);if(E!=null)if(o.isMessageType()){if(!m.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");m.binaryWriterFn.call(n,o.fieldIndex,E,m.binaryMessageSerializeFn)}else m.binaryWriterFn.call(n,o.fieldIndex,E)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(u,n,A,w,d){var m=A[n.getFieldNumber()];if(m){if(A=m.fieldInfo,!m.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(A.isMessageType()){var o=new A.ctor;m.binaryReaderFn.call(n,o,m.binaryMessageDeserializeFn)}else o=m.binaryReaderFn.call(n);A.isRepeated&&!m.isPacked?(n=w.call(u,A))?n.push(o):d.call(u,A,[o]):d.call(u,A,o)}else n.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(u,n){if(n<u.pivot_){n=jspb.Message.getIndex_(u,n);var A=u.array[n];return A===jspb.Message.EMPTY_LIST_SENTINEL_?u.array[n]=[]:A}if(u.extensionObject_)return(A=u.extensionObject_[n])===jspb.Message.EMPTY_LIST_SENTINEL_?u.extensionObject_[n]=[]:A},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(u,n){return jspb.Message.getField(u,n)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:+u},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:!!u},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(u,n){var A=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var w=0;w<A.length;w++)A[w]=+A[w];u.convertedPrimitiveFields_[n]=!0}return A},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(u,n){var A=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var w=0;w<A.length;w++)A[w]=!!A[w];u.convertedPrimitiveFields_[n]=!0}return A},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(u){return u==null||typeof u=="string"?u:jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array?goog.crypt.base64.encodeByteArray(u):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(u){return u==null||u instanceof Uint8Array?u:typeof u=="string"?goog.crypt.base64.decodeStringToUint8Array(u):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(u){return jspb.Message.assertConsistentTypes_(u),u.length&&typeof u[0]!="string"?goog.array.map(u,jspb.Message.bytesAsB64):u},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(u){return jspb.Message.assertConsistentTypes_(u),!u.length||u[0]instanceof Uint8Array?u:goog.array.map(u,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(u){if(goog.DEBUG&&u&&1<u.length){var n=goog.typeOf(u[0]);goog.array.forEach(u,function(A){goog.typeOf(A)!=n&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(A)+" expected "+n)})}},jspb.Message.getFieldWithDefault=function(u,n,A){return(u=jspb.Message.getField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(u,n,A){return(u=jspb.Message.getBooleanField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(u,n,A){return(u=jspb.Message.getOptionalFloatingPointField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(u,n,A,w){if(u.wrappers_||(u.wrappers_={}),n in u.wrappers_)return u.wrappers_[n];var d=jspb.Message.getField(u,n);if(!d){if(A)return;d=[],jspb.Message.setField(u,n,d)}return u.wrappers_[n]=new jspb.Map(d,w)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(u,n,A){return jspb.asserts.assertInstanceof(u,jspb.Message),n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=A:(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[n]=A),u},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(u,n,A,w){return jspb.asserts.assertInstanceof(u,jspb.Message),A!==w?jspb.Message.setField(u,n,A):n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(u),delete u.extensionObject_[n]),u},jspb.Message.addToRepeatedField=function(u,n,A,w){return jspb.asserts.assertInstanceof(u,jspb.Message),n=jspb.Message.getRepeatedField(u,n),w!=null?n.splice(w,0,A):n.push(A),u},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(u,n,A,w){return jspb.asserts.assertInstanceof(u,jspb.Message),(A=jspb.Message.computeOneofCase(u,A))&&A!==n&&w!==void 0&&(u.wrappers_&&A in u.wrappers_&&(u.wrappers_[A]=void 0),jspb.Message.setField(u,A,void 0)),jspb.Message.setField(u,n,w)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(u,n){for(var A,w,d=0;d<n.length;d++){var m=n[d],o=jspb.Message.getField(u,m);o!=null&&(A=m,w=o,jspb.Message.setField(u,m,void 0))}return A?(jspb.Message.setField(u,A,w),A):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(u,n,A,w){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[A]){var d=jspb.Message.getField(u,A);(w||d)&&(u.wrappers_[A]=new n(d))}return u.wrappers_[A]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(u,n,A){return jspb.Message.wrapRepeatedField_(u,n,A),(n=u.wrappers_[A])==jspb.Message.EMPTY_LIST_SENTINEL_&&(n=u.wrappers_[A]=[]),n},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(u,n,A){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[A]){for(var w=jspb.Message.getRepeatedField(u,A),d=[],m=0;m<w.length;m++)d[m]=new n(w[m]);u.wrappers_[A]=d}},jspb.Message.setWrapperField=function(u,n,A){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var w=A&&A.toArray();return u.wrappers_[n]=A,jspb.Message.setField(u,n,w)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(u,n,A,w){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var d=w&&w.toArray();return u.wrappers_[n]=w,jspb.Message.setOneofField(u,n,A,d)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(u,n,A){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={}),A=A||[];for(var w=[],d=0;d<A.length;d++)w[d]=A[d].toArray();return u.wrappers_[n]=A,jspb.Message.setField(u,n,w)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(u,n,A,w,d){jspb.Message.wrapRepeatedField_(u,w,n);var m=u.wrappers_[n];return m||(m=u.wrappers_[n]=[]),A=A||new w,u=jspb.Message.getRepeatedField(u,n),d!=null?(m.splice(d,0,A),u.splice(d,0,A.toArray())):(m.push(A),u.push(A.toArray())),A},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(u,n,A,w){for(var d={},m=0;m<u.length;m++)d[n.call(u[m])]=A?A.call(u[m],w,u[m]):u[m];return d},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var u in this.wrappers_){var n=this.wrappers_[u];if(Array.isArray(n))for(var A=0;A<n.length;A++)n[A]&&n[A].toArray();else n&&n.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(u){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var n=u.fieldIndex;if(u.isRepeated){if(u.isMessageType())return this.wrappers_[n]||(this.wrappers_[n]=goog.array.map(this.extensionObject_[n]||[],function(A){return new u.ctor(A)})),this.wrappers_[n]}else if(u.isMessageType())return!this.wrappers_[n]&&this.extensionObject_[n]&&(this.wrappers_[n]=new u.ctor(this.extensionObject_[n])),this.wrappers_[n];return this.extensionObject_[n]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(u,n){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var A=u.fieldIndex;return u.isRepeated?(n=n||[],u.isMessageType()?(this.wrappers_[A]=n,this.extensionObject_[A]=goog.array.map(n,function(w){return w.toArray()})):this.extensionObject_[A]=n):u.isMessageType()?(this.wrappers_[A]=n,this.extensionObject_[A]=n&&n.toArray()):this.extensionObject_[A]=n,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(u,n){if(!(u instanceof n.constructor))throw Error("Messages have different types.");var A=u.toArray();n=n.toArray();var w=[],d=0,m=A.length>n.length?A.length:n.length;for(u.getJsPbMessageId()&&(w[0]=u.getJsPbMessageId(),d=1);d<m;d++)jspb.Message.compareFields(A[d],n[d])||(w[d]=n[d]);return new u.constructor(w)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(u,n){return u==n||!(!u||!n)&&u instanceof n.constructor&&jspb.Message.compareFields(u.toArray(),n.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(u,n){u=u||{},n=n||{};var A,w={};for(A in u)w[A]=0;for(A in n)w[A]=0;for(A in w)if(!jspb.Message.compareFields(u[A],n[A]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(u,n){if(u==n)return!0;if(!goog.isObject(u)||!goog.isObject(n))return!!(typeof u=="number"&&isNaN(u)||typeof n=="number"&&isNaN(n))&&String(u)==String(n);if(u.constructor!=n.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u.constructor===Uint8Array){if(u.length!=n.length)return!1;for(var A=0;A<u.length;A++)if(u[A]!=n[A])return!1;return!0}if(u.constructor===Array){var w=void 0,d=void 0,m=Math.max(u.length,n.length);for(A=0;A<m;A++){var o=u[A],E=n[A];if(o&&o.constructor==Object&&(jspb.asserts.assert(w===void 0),jspb.asserts.assert(A===u.length-1),w=o,o=void 0),E&&E.constructor==Object&&(jspb.asserts.assert(d===void 0),jspb.asserts.assert(A===n.length-1),d=E,E=void 0),!jspb.Message.compareFields(o,E))return!1}return!w&&!d||(w=w||{},d=d||{},jspb.Message.compareExtensions(w,d))}if(u.constructor===Object)return jspb.Message.compareExtensions(u,n);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(u){return jspb.Message.cloneMessage(u)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(u){return new u.constructor(jspb.Message.clone_(u.toArray()))},jspb.Message.copyInto=function(u,n){jspb.asserts.assertInstanceof(u,jspb.Message),jspb.asserts.assertInstanceof(n,jspb.Message),jspb.asserts.assert(u.constructor==n.constructor,"Copy source and target message should have the same type."),u=jspb.Message.clone(u);for(var A=n.toArray(),w=u.toArray(),d=A.length=0;d<w.length;d++)A[d]=w[d];n.wrappers_=u.wrappers_,n.extensionObject_=u.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(u){if(Array.isArray(u)){for(var n=Array(u.length),A=0;A<u.length;A++){var w=u[A];w!=null&&(n[A]=typeof w=="object"?jspb.Message.clone_(jspb.asserts.assert(w)):w)}return n}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)return new Uint8Array(u);for(A in n={},u)(w=u[A])!=null&&(n[A]=typeof w=="object"?jspb.Message.clone_(jspb.asserts.assert(w)):w);return n},jspb.Message.registerMessageType=function(u,n){n.messageId=u},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.CalculatorOptions",null,w),proto.mediapipe.CalculatorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},A.inherits(proto.mediapipe.CalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(d){return proto.mediapipe.CalculatorOptions.toObject(d,this)},proto.mediapipe.CalculatorOptions.toObject=function(d,m){var o,E={mergeFields:(o=n.Message.getBooleanField(m,1))==null?void 0:o};return n.Message.toObjectExtension(m,E,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,d),d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=m.readBool();d.setMergeFields(o)}else n.Message.readBinaryExtension(d,m,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return d},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(d,m){var o;(o=n.Message.getField(d,1))!=null&&m.writeBool(1,o),n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},A.object.extend(u,proto.mediapipe)})(calculator_options_pb);var any_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.google.protobuf.Any",null,w),proto.google.protobuf.Any=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.google.protobuf.Any,n.Message),A.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),n.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(d){return proto.google.protobuf.Any.toObject(d,this)},proto.google.protobuf.Any.toObject=function(d,m){var o={typeUrl:n.Message.getFieldWithDefault(m,1,""),value:m.getValue_asB64()};return d&&(o.$jspbMessageInstance=m),o}),proto.google.protobuf.Any.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(o,m)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readString();d.setTypeUrl(o);break;case 2:o=m.readBytes(),d.setValue(o);break;default:m.skipField()}return d},proto.google.protobuf.Any.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(d,m){var o=void 0;(o=d.getTypeUrl()).length>0&&m.writeString(1,o),(o=d.getValue_asU8()).length>0&&m.writeBytes(2,o)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(d){return n.Message.setProto3StringField(this,1,d)},proto.google.protobuf.Any.prototype.getValue=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return n.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return n.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(d){return n.Message.setProto3BytesField(this,2,d)},A.object.extend(u,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(d,m,o){o||(o="type.googleapis.com/"),o.substr(-1)!="/"?this.setTypeUrl(o+"/"+m):this.setTypeUrl(o+m),this.setValue(d)},proto.google.protobuf.Any.prototype.unpack=function(d,m){return this.getTypeName()==m?d(this.getValue_asU8()):null}})(any_pb);var mediapipe_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.MediaPipeOptions",null,w),proto.mediapipe.MediaPipeOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},A.inherits(proto.mediapipe.MediaPipeOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(d){return proto.mediapipe.MediaPipeOptions.toObject(d,this)},proto.mediapipe.MediaPipeOptions.toObject=function(d,m){var o={};return n.Message.toObjectExtension(m,o,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,d),d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)m.getFieldNumber(),n.Message.readBinaryExtension(d,m,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return d},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(d,m){n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},A.object.extend(u,proto.mediapipe)})(mediapipe_options_pb);var packet_factory_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,w),A.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,w),A.exportSymbol("proto.mediapipe.PacketManagerConfig",null,w),proto.mediapipe.PacketFactoryOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},A.inherits(proto.mediapipe.PacketFactoryOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(d){n.Message.initialize(this,d,0,500,null,null)},A.inherits(proto.mediapipe.PacketFactoryConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.PacketManagerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryOptions.toObject(d,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(d,m){var o={};return n.Message.toObjectExtension(m,o,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,d),d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)m.getFieldNumber(),n.Message.readBinaryExtension(d,m,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return d},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(d,m){n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryConfig.toObject(d,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(d,m){var o,E={packetFactory:(o=n.Message.getField(m,1))==null?void 0:o,outputSidePacket:(o=n.Message.getField(m,2))==null?void 0:o,externalOutput:(o=n.Message.getField(m,1002))==null?void 0:o,options:(o=m.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(d,o)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(o,m)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readString();d.setPacketFactory(o);break;case 2:o=m.readString(),d.setOutputSidePacket(o);break;case 1002:o=m.readString(),d.setExternalOutput(o);break;case 3:o=new proto.mediapipe.PacketFactoryOptions,m.readMessage(o,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),d.setOptions(o);break;default:m.skipField()}return d},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeString(1,o),(o=n.Message.getField(d,2))!=null&&m.writeString(2,o),(o=n.Message.getField(d,1002))!=null&&m.writeString(1002,o),(o=d.getOptions())!=null&&m.writeMessage(3,o,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return n.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(d){return n.Message.setField(this,1002,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return n.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return n.Message.getField(this,1002)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(d){return proto.mediapipe.PacketManagerConfig.toObject(d,this)},proto.mediapipe.PacketManagerConfig.toObject=function(d,m){var o={packetList:n.Message.toObjectList(m.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(o,m)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.PacketFactoryConfig;m.readMessage(o,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),d.addPacket(o)}else m.skipField();return d},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(d,m){var o;(o=d.getPacketList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.PacketFactoryConfig,m)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},A.object.extend(u,proto.mediapipe)})(packet_factory_pb);var packet_generator_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,w),A.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,w),proto.mediapipe.PacketGeneratorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},A.inherits(proto.mediapipe.PacketGeneratorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(d){n.Message.initialize(this,d,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.PacketGeneratorConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorOptions.toObject(d,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(d,m){var o={mergeFields:n.Message.getBooleanFieldWithDefault(m,1,!0)};return n.Message.toObjectExtension(m,o,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,d),d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=m.readBool();d.setMergeFields(o)}else n.Message.readBinaryExtension(d,m,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return d},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(d,m){var o;(o=n.Message.getField(d,1))!=null&&m.writeBool(1,o),n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorConfig.toObject(d,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(d,m){var o,E={packetGenerator:(o=n.Message.getField(m,1))==null?void 0:o,inputSidePacketList:(o=n.Message.getRepeatedField(m,2))==null?void 0:o,externalInputList:(o=n.Message.getRepeatedField(m,1002))==null?void 0:o,outputSidePacketList:(o=n.Message.getRepeatedField(m,3))==null?void 0:o,externalOutputList:(o=n.Message.getRepeatedField(m,1003))==null?void 0:o,options:(o=m.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(d,o)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(o,m)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readString();d.setPacketGenerator(o);break;case 2:o=m.readString(),d.addInputSidePacket(o);break;case 1002:o=m.readString(),d.addExternalInput(o);break;case 3:o=m.readString(),d.addOutputSidePacket(o);break;case 1003:o=m.readString(),d.addExternalOutput(o);break;case 4:o=new proto.mediapipe.PacketGeneratorOptions,m.readMessage(o,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),d.setOptions(o);break;default:m.skipField()}return d},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeString(1,o),(o=d.getInputSidePacketList()).length>0&&m.writeRepeatedString(2,o),(o=d.getExternalInputList()).length>0&&m.writeRepeatedString(1002,o),(o=d.getOutputSidePacketList()).length>0&&m.writeRepeatedString(3,o),(o=d.getExternalOutputList()).length>0&&m.writeRepeatedString(1003,o),(o=d.getOptions())!=null&&m.writeMessage(4,o,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(d){return n.Message.setField(this,2,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(d,m){return n.Message.addToRepeatedField(this,2,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(d){return n.Message.setField(this,1002,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(d,m){return n.Message.addToRepeatedField(this,1002,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return n.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(d){return n.Message.setField(this,1003,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(d,m){return n.Message.addToRepeatedField(this,1003,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(packet_generator_pb);var status_handler_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,w),proto.mediapipe.StatusHandlerConfig=function(m){n.Message.initialize(this,m,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.StatusHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.StatusHandlerConfig.toObject(m,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(m,o){var E,j={statusHandler:(E=n.Message.getField(o,1))==null?void 0:E,inputSidePacketList:(E=n.Message.getRepeatedField(o,2))==null?void 0:E,externalInputList:(E=n.Message.getRepeatedField(o,1002))==null?void 0:E,options:(E=o.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(E,o)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readString();m.setStatusHandler(E);break;case 2:E=o.readString(),m.addInputSidePacket(E);break;case 1002:E=o.readString(),m.addExternalInput(E);break;case 3:E=new d.MediaPipeOptions,o.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:o.skipField()}return m},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeString(1,E),(E=m.getInputSidePacketList()).length>0&&o.writeRepeatedString(2,E),(E=m.getExternalInputList()).length>0&&o.writeRepeatedString(1002,E),(E=m.getOptions())!=null&&o.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(m,o){return n.Message.addToRepeatedField(this,2,m,o)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(m){return n.Message.setField(this,1002,m||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(m,o){return n.Message.addToRepeatedField(this,1002,m,o)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe)})(status_handler_pb);var stream_handler_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,w),A.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,w),proto.mediapipe.InputStreamHandlerConfig=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.InputStreamHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.OutputStreamHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.InputStreamHandlerConfig.toObject(m,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(m,o){var E,j={inputStreamHandler:n.Message.getFieldWithDefault(o,1,"DefaultInputStreamHandler"),options:(E=o.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(E,o)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readString();m.setInputStreamHandler(E);break;case 3:E=new d.MediaPipeOptions,o.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:o.skipField()}return m},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeString(1,E),(E=m.getOptions())!=null&&o.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.OutputStreamHandlerConfig.toObject(m,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(m,o){var E,j={outputStreamHandler:n.Message.getFieldWithDefault(o,1,"InOrderOutputStreamHandler"),inputSidePacketList:(E=n.Message.getRepeatedField(o,2))==null?void 0:E,options:(E=o.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(E,o)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readString();m.setOutputStreamHandler(E);break;case 2:E=o.readString(),m.addInputSidePacket(E);break;case 3:E=new d.MediaPipeOptions,o.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:o.skipField()}return m},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeString(1,E),(E=m.getInputSidePacketList()).length>0&&o.writeRepeatedString(2,E),(E=m.getOptions())!=null&&o.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(m,o){return n.Message.addToRepeatedField(this,2,m,o)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe)})(stream_handler_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=any_pb;A.object.extend(proto,m);var o=mediapipe_options_pb;A.object.extend(proto,o);var E=packet_factory_pb;A.object.extend(proto,E);var j=packet_generator_pb;A.object.extend(proto,j);var ee=status_handler_pb;A.object.extend(proto,ee);var le=stream_handler_pb;A.object.extend(proto,le),A.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,w),A.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,w),A.exportSymbol("proto.mediapipe.ExecutorConfig",null,w),A.exportSymbol("proto.mediapipe.InputCollection",null,w),A.exportSymbol("proto.mediapipe.InputCollection.InputType",null,w),A.exportSymbol("proto.mediapipe.InputCollectionSet",null,w),A.exportSymbol("proto.mediapipe.InputStreamInfo",null,w),A.exportSymbol("proto.mediapipe.ProfilerConfig",null,w),proto.mediapipe.ExecutorConfig=function(q){n.Message.initialize(this,q,0,-1,null,null)},A.inherits(proto.mediapipe.ExecutorConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(q){n.Message.initialize(this,q,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.InputCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(q){n.Message.initialize(this,q,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},A.inherits(proto.mediapipe.InputCollectionSet,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(q){n.Message.initialize(this,q,0,-1,null,null)},A.inherits(proto.mediapipe.InputStreamInfo,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(q){n.Message.initialize(this,q,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.ProfilerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(q){n.Message.initialize(this,q,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.CalculatorGraphConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(q){n.Message.initialize(this,q,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},A.inherits(proto.mediapipe.CalculatorGraphConfig.Node,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(q){return proto.mediapipe.ExecutorConfig.toObject(q,this)},proto.mediapipe.ExecutorConfig.toObject=function(q,pe){var ue,xt={name:n.Message.getFieldWithDefault(pe,1,""),type:n.Message.getFieldWithDefault(pe,2,""),options:(ue=pe.getOptions())&&o.MediaPipeOptions.toObject(q,ue)};return q&&(xt.$jspbMessageInstance=pe),xt}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();q.setName(ue);break;case 2:ue=pe.readString(),q.setType(ue);break;case 3:ue=new o.MediaPipeOptions,pe.readMessage(ue,o.MediaPipeOptions.deserializeBinaryFromReader),q.setOptions(ue);break;default:pe.skipField()}return q},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(q,pe){var ue=void 0;(ue=q.getName()).length>0&&pe.writeString(1,ue),(ue=q.getType()).length>0&&pe.writeString(2,ue),(ue=q.getOptions())!=null&&pe.writeMessage(3,ue,o.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(q){return n.Message.setProto3StringField(this,1,q)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(q){return n.Message.setProto3StringField(this,2,q)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,o.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(q){return n.Message.setWrapperField(this,3,q)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(q){return proto.mediapipe.InputCollection.toObject(q,this)},proto.mediapipe.InputCollection.toObject=function(q,pe){var ue,xt={name:n.Message.getFieldWithDefault(pe,1,""),sidePacketNameList:(ue=n.Message.getRepeatedField(pe,2))==null?void 0:ue,externalInputNameList:(ue=n.Message.getRepeatedField(pe,1002))==null?void 0:ue,inputType:n.Message.getFieldWithDefault(pe,3,0),fileName:n.Message.getFieldWithDefault(pe,4,"")};return q&&(xt.$jspbMessageInstance=pe),xt}),proto.mediapipe.InputCollection.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();q.setName(ue);break;case 2:ue=pe.readString(),q.addSidePacketName(ue);break;case 1002:ue=pe.readString(),q.addExternalInputName(ue);break;case 3:ue=pe.readEnum(),q.setInputType(ue);break;case 4:ue=pe.readString(),q.setFileName(ue);break;default:pe.skipField()}return q},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(q,pe){var ue=void 0;(ue=q.getName()).length>0&&pe.writeString(1,ue),(ue=q.getSidePacketNameList()).length>0&&pe.writeRepeatedString(2,ue),(ue=q.getExternalInputNameList()).length>0&&pe.writeRepeatedString(1002,ue),(ue=q.getInputType())!==0&&pe.writeEnum(3,ue),(ue=q.getFileName()).length>0&&pe.writeString(4,ue)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(q){return n.Message.setProto3StringField(this,1,q)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(q){return n.Message.setField(this,2,q||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(q,pe){return n.Message.addToRepeatedField(this,2,q,pe)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(q){return n.Message.setField(this,1002,q||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(q,pe){return n.Message.addToRepeatedField(this,1002,q,pe)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(q){return n.Message.setProto3EnumField(this,3,q)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(q){return n.Message.setProto3StringField(this,4,q)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(q){return proto.mediapipe.InputCollectionSet.toObject(q,this)},proto.mediapipe.InputCollectionSet.toObject=function(q,pe){var ue={inputCollectionList:n.Message.toObjectList(pe.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,q)};return q&&(ue.$jspbMessageInstance=pe),ue}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)if(pe.getFieldNumber()===1){var ue=new proto.mediapipe.InputCollection;pe.readMessage(ue,proto.mediapipe.InputCollection.deserializeBinaryFromReader),q.addInputCollection(ue)}else pe.skipField();return q},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(q,pe){var ue;(ue=q.getInputCollectionList()).length>0&&pe.writeRepeatedMessage(1,ue,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(q){return n.Message.setRepeatedWrapperField(this,1,q)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(q,pe){return n.Message.addToRepeatedWrapperField(this,1,q,proto.mediapipe.InputCollection,pe)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(q){return proto.mediapipe.InputStreamInfo.toObject(q,this)},proto.mediapipe.InputStreamInfo.toObject=function(q,pe){var ue={tagIndex:n.Message.getFieldWithDefault(pe,1,""),backEdge:n.Message.getBooleanFieldWithDefault(pe,2,!1)};return q&&(ue.$jspbMessageInstance=pe),ue}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();q.setTagIndex(ue);break;case 2:ue=pe.readBool(),q.setBackEdge(ue);break;default:pe.skipField()}return q},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(q,pe){var ue=void 0;(ue=q.getTagIndex()).length>0&&pe.writeString(1,ue),(ue=q.getBackEdge())&&pe.writeBool(2,ue)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(q){return n.Message.setProto3StringField(this,1,q)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(q){return n.Message.setProto3BooleanField(this,2,q)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(q){return proto.mediapipe.ProfilerConfig.toObject(q,this)},proto.mediapipe.ProfilerConfig.toObject=function(q,pe){var ue,xt={histogramIntervalSizeUsec:n.Message.getFieldWithDefault(pe,1,0),numHistogramIntervals:n.Message.getFieldWithDefault(pe,2,0),enableInputOutputLatency:n.Message.getBooleanFieldWithDefault(pe,3,!1),enableProfiler:n.Message.getBooleanFieldWithDefault(pe,4,!1),enableStreamLatency:n.Message.getBooleanFieldWithDefault(pe,5,!1),usePacketTimestampForAddedPacket:n.Message.getBooleanFieldWithDefault(pe,6,!1),traceLogCapacity:n.Message.getFieldWithDefault(pe,7,0),traceEventTypesDisabledList:(ue=n.Message.getRepeatedField(pe,8))==null?void 0:ue,traceLogPath:n.Message.getFieldWithDefault(pe,9,""),traceLogCount:n.Message.getFieldWithDefault(pe,10,0),traceLogIntervalUsec:n.Message.getFieldWithDefault(pe,11,0),traceLogMarginUsec:n.Message.getFieldWithDefault(pe,12,0),traceLogDurationEvents:n.Message.getBooleanFieldWithDefault(pe,13,!1),traceLogIntervalCount:n.Message.getFieldWithDefault(pe,14,0),traceLogDisabled:n.Message.getBooleanFieldWithDefault(pe,15,!1),traceEnabled:n.Message.getBooleanFieldWithDefault(pe,16,!1),traceLogInstantEvents:n.Message.getBooleanFieldWithDefault(pe,17,!1),calculatorFilter:n.Message.getFieldWithDefault(pe,18,"")};return q&&(xt.$jspbMessageInstance=pe),xt}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readInt64();q.setHistogramIntervalSizeUsec(ue);break;case 2:ue=pe.readInt64(),q.setNumHistogramIntervals(ue);break;case 3:ue=pe.readBool(),q.setEnableInputOutputLatency(ue);break;case 4:ue=pe.readBool(),q.setEnableProfiler(ue);break;case 5:ue=pe.readBool(),q.setEnableStreamLatency(ue);break;case 6:ue=pe.readBool(),q.setUsePacketTimestampForAddedPacket(ue);break;case 7:ue=pe.readInt64(),q.setTraceLogCapacity(ue);break;case 8:for(var xt=pe.isDelimited()?pe.readPackedInt32():[pe.readInt32()],rt=0;rt<xt.length;rt++)q.addTraceEventTypesDisabled(xt[rt]);break;case 9:ue=pe.readString(),q.setTraceLogPath(ue);break;case 10:ue=pe.readInt32(),q.setTraceLogCount(ue);break;case 11:ue=pe.readInt64(),q.setTraceLogIntervalUsec(ue);break;case 12:ue=pe.readInt64(),q.setTraceLogMarginUsec(ue);break;case 13:ue=pe.readBool(),q.setTraceLogDurationEvents(ue);break;case 14:ue=pe.readInt32(),q.setTraceLogIntervalCount(ue);break;case 15:ue=pe.readBool(),q.setTraceLogDisabled(ue);break;case 16:ue=pe.readBool(),q.setTraceEnabled(ue);break;case 17:ue=pe.readBool(),q.setTraceLogInstantEvents(ue);break;case 18:ue=pe.readString(),q.setCalculatorFilter(ue);break;default:pe.skipField()}return q},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(q,pe){var ue=void 0;(ue=q.getHistogramIntervalSizeUsec())!==0&&pe.writeInt64(1,ue),(ue=q.getNumHistogramIntervals())!==0&&pe.writeInt64(2,ue),(ue=q.getEnableInputOutputLatency())&&pe.writeBool(3,ue),(ue=q.getEnableProfiler())&&pe.writeBool(4,ue),(ue=q.getEnableStreamLatency())&&pe.writeBool(5,ue),(ue=q.getUsePacketTimestampForAddedPacket())&&pe.writeBool(6,ue),(ue=q.getTraceLogCapacity())!==0&&pe.writeInt64(7,ue),(ue=q.getTraceEventTypesDisabledList()).length>0&&pe.writePackedInt32(8,ue),(ue=q.getTraceLogPath()).length>0&&pe.writeString(9,ue),(ue=q.getTraceLogCount())!==0&&pe.writeInt32(10,ue),(ue=q.getTraceLogIntervalUsec())!==0&&pe.writeInt64(11,ue),(ue=q.getTraceLogMarginUsec())!==0&&pe.writeInt64(12,ue),(ue=q.getTraceLogDurationEvents())&&pe.writeBool(13,ue),(ue=q.getTraceLogIntervalCount())!==0&&pe.writeInt32(14,ue),(ue=q.getTraceLogDisabled())&&pe.writeBool(15,ue),(ue=q.getTraceEnabled())&&pe.writeBool(16,ue),(ue=q.getTraceLogInstantEvents())&&pe.writeBool(17,ue),(ue=q.getCalculatorFilter()).length>0&&pe.writeString(18,ue)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(q){return n.Message.setProto3IntField(this,1,q)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(q){return n.Message.setProto3IntField(this,2,q)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(q){return n.Message.setProto3BooleanField(this,3,q)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(q){return n.Message.setProto3BooleanField(this,4,q)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(q){return n.Message.setProto3BooleanField(this,5,q)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return n.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(q){return n.Message.setProto3BooleanField(this,6,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(q){return n.Message.setProto3IntField(this,7,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return n.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(q){return n.Message.setField(this,8,q||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(q,pe){return n.Message.addToRepeatedField(this,8,q,pe)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return n.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(q){return n.Message.setProto3StringField(this,9,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(q){return n.Message.setProto3IntField(this,10,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(q){return n.Message.setProto3IntField(this,11,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return n.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(q){return n.Message.setProto3IntField(this,12,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return n.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(q){return n.Message.setProto3BooleanField(this,13,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return n.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(q){return n.Message.setProto3IntField(this,14,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return n.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(q){return n.Message.setProto3BooleanField(this,15,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return n.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(q){return n.Message.setProto3BooleanField(this,16,q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return n.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(q){return n.Message.setProto3BooleanField(this,17,q)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return n.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(q){return n.Message.setProto3StringField(this,18,q)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(q){return proto.mediapipe.CalculatorGraphConfig.toObject(q,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(q,pe){var ue,xt={nodeList:n.Message.toObjectList(pe.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,q),packetFactoryList:n.Message.toObjectList(pe.getPacketFactoryList(),E.PacketFactoryConfig.toObject,q),packetGeneratorList:n.Message.toObjectList(pe.getPacketGeneratorList(),j.PacketGeneratorConfig.toObject,q),numThreads:n.Message.getFieldWithDefault(pe,8,0),statusHandlerList:n.Message.toObjectList(pe.getStatusHandlerList(),ee.StatusHandlerConfig.toObject,q),inputStreamList:(ue=n.Message.getRepeatedField(pe,10))==null?void 0:ue,outputStreamList:(ue=n.Message.getRepeatedField(pe,15))==null?void 0:ue,inputSidePacketList:(ue=n.Message.getRepeatedField(pe,16))==null?void 0:ue,outputSidePacketList:(ue=n.Message.getRepeatedField(pe,17))==null?void 0:ue,maxQueueSize:n.Message.getFieldWithDefault(pe,11,0),reportDeadlock:n.Message.getBooleanFieldWithDefault(pe,21,!1),inputStreamHandler:(ue=pe.getInputStreamHandler())&&le.InputStreamHandlerConfig.toObject(q,ue),outputStreamHandler:(ue=pe.getOutputStreamHandler())&&le.OutputStreamHandlerConfig.toObject(q,ue),executorList:n.Message.toObjectList(pe.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,q),profilerConfig:(ue=pe.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(q,ue),pb_package:n.Message.getFieldWithDefault(pe,19,""),type:n.Message.getFieldWithDefault(pe,20,""),options:(ue=pe.getOptions())&&o.MediaPipeOptions.toObject(q,ue),graphOptionsList:n.Message.toObjectList(pe.getGraphOptionsList(),m.Any.toObject,q)};return q&&(xt.$jspbMessageInstance=pe),xt}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=new proto.mediapipe.CalculatorGraphConfig.Node;pe.readMessage(ue,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),q.addNode(ue);break;case 6:ue=new E.PacketFactoryConfig,pe.readMessage(ue,E.PacketFactoryConfig.deserializeBinaryFromReader),q.addPacketFactory(ue);break;case 7:ue=new j.PacketGeneratorConfig,pe.readMessage(ue,j.PacketGeneratorConfig.deserializeBinaryFromReader),q.addPacketGenerator(ue);break;case 8:ue=pe.readInt32(),q.setNumThreads(ue);break;case 9:ue=new ee.StatusHandlerConfig,pe.readMessage(ue,ee.StatusHandlerConfig.deserializeBinaryFromReader),q.addStatusHandler(ue);break;case 10:ue=pe.readString(),q.addInputStream(ue);break;case 15:ue=pe.readString(),q.addOutputStream(ue);break;case 16:ue=pe.readString(),q.addInputSidePacket(ue);break;case 17:ue=pe.readString(),q.addOutputSidePacket(ue);break;case 11:ue=pe.readInt32(),q.setMaxQueueSize(ue);break;case 21:ue=pe.readBool(),q.setReportDeadlock(ue);break;case 12:ue=new le.InputStreamHandlerConfig,pe.readMessage(ue,le.InputStreamHandlerConfig.deserializeBinaryFromReader),q.setInputStreamHandler(ue);break;case 13:ue=new le.OutputStreamHandlerConfig,pe.readMessage(ue,le.OutputStreamHandlerConfig.deserializeBinaryFromReader),q.setOutputStreamHandler(ue);break;case 14:ue=new proto.mediapipe.ExecutorConfig,pe.readMessage(ue,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),q.addExecutor(ue);break;case 18:ue=new proto.mediapipe.ProfilerConfig,pe.readMessage(ue,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),q.setProfilerConfig(ue);break;case 19:ue=pe.readString(),q.setPackage(ue);break;case 20:ue=pe.readString(),q.setType(ue);break;case 1001:ue=new o.MediaPipeOptions,pe.readMessage(ue,o.MediaPipeOptions.deserializeBinaryFromReader),q.setOptions(ue);break;case 1002:ue=new m.Any,pe.readMessage(ue,m.Any.deserializeBinaryFromReader),q.addGraphOptions(ue);break;default:pe.skipField()}return q},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(q,pe){var ue=void 0;(ue=q.getNodeList()).length>0&&pe.writeRepeatedMessage(1,ue,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(ue=q.getPacketFactoryList()).length>0&&pe.writeRepeatedMessage(6,ue,E.PacketFactoryConfig.serializeBinaryToWriter),(ue=q.getPacketGeneratorList()).length>0&&pe.writeRepeatedMessage(7,ue,j.PacketGeneratorConfig.serializeBinaryToWriter),(ue=q.getNumThreads())!==0&&pe.writeInt32(8,ue),(ue=q.getStatusHandlerList()).length>0&&pe.writeRepeatedMessage(9,ue,ee.StatusHandlerConfig.serializeBinaryToWriter),(ue=q.getInputStreamList()).length>0&&pe.writeRepeatedString(10,ue),(ue=q.getOutputStreamList()).length>0&&pe.writeRepeatedString(15,ue),(ue=q.getInputSidePacketList()).length>0&&pe.writeRepeatedString(16,ue),(ue=q.getOutputSidePacketList()).length>0&&pe.writeRepeatedString(17,ue),(ue=q.getMaxQueueSize())!==0&&pe.writeInt32(11,ue),(ue=q.getReportDeadlock())&&pe.writeBool(21,ue),(ue=q.getInputStreamHandler())!=null&&pe.writeMessage(12,ue,le.InputStreamHandlerConfig.serializeBinaryToWriter),(ue=q.getOutputStreamHandler())!=null&&pe.writeMessage(13,ue,le.OutputStreamHandlerConfig.serializeBinaryToWriter),(ue=q.getExecutorList()).length>0&&pe.writeRepeatedMessage(14,ue,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),(ue=q.getProfilerConfig())!=null&&pe.writeMessage(18,ue,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(ue=q.getPackage()).length>0&&pe.writeString(19,ue),(ue=q.getType()).length>0&&pe.writeString(20,ue),(ue=q.getOptions())!=null&&pe.writeMessage(1001,ue,o.MediaPipeOptions.serializeBinaryToWriter),(ue=q.getGraphOptionsList()).length>0&&pe.writeRepeatedMessage(1002,ue,m.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(q){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(q,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(q,pe){var ue,xt={name:n.Message.getFieldWithDefault(pe,1,""),calculator:n.Message.getFieldWithDefault(pe,2,""),inputStreamList:(ue=n.Message.getRepeatedField(pe,3))==null?void 0:ue,outputStreamList:(ue=n.Message.getRepeatedField(pe,4))==null?void 0:ue,inputSidePacketList:(ue=n.Message.getRepeatedField(pe,5))==null?void 0:ue,outputSidePacketList:(ue=n.Message.getRepeatedField(pe,6))==null?void 0:ue,options:(ue=pe.getOptions())&&d.CalculatorOptions.toObject(q,ue),nodeOptionsList:n.Message.toObjectList(pe.getNodeOptionsList(),m.Any.toObject,q),sourceLayer:n.Message.getFieldWithDefault(pe,9,0),bufferSizeHint:n.Message.getFieldWithDefault(pe,10,0),inputStreamHandler:(ue=pe.getInputStreamHandler())&&le.InputStreamHandlerConfig.toObject(q,ue),outputStreamHandler:(ue=pe.getOutputStreamHandler())&&le.OutputStreamHandlerConfig.toObject(q,ue),inputStreamInfoList:n.Message.toObjectList(pe.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,q),executor:n.Message.getFieldWithDefault(pe,14,""),profilerConfig:(ue=pe.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(q,ue),maxInFlight:n.Message.getFieldWithDefault(pe,16,0),optionValueList:(ue=n.Message.getRepeatedField(pe,17))==null?void 0:ue,externalInputList:(ue=n.Message.getRepeatedField(pe,1005))==null?void 0:ue};return q&&(xt.$jspbMessageInstance=pe),xt}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(q){var pe=new n.BinaryReader(q),ue=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(q,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();q.setName(ue);break;case 2:ue=pe.readString(),q.setCalculator(ue);break;case 3:ue=pe.readString(),q.addInputStream(ue);break;case 4:ue=pe.readString(),q.addOutputStream(ue);break;case 5:ue=pe.readString(),q.addInputSidePacket(ue);break;case 6:ue=pe.readString(),q.addOutputSidePacket(ue);break;case 7:ue=new d.CalculatorOptions,pe.readMessage(ue,d.CalculatorOptions.deserializeBinaryFromReader),q.setOptions(ue);break;case 8:ue=new m.Any,pe.readMessage(ue,m.Any.deserializeBinaryFromReader),q.addNodeOptions(ue);break;case 9:ue=pe.readInt32(),q.setSourceLayer(ue);break;case 10:ue=pe.readInt32(),q.setBufferSizeHint(ue);break;case 11:ue=new le.InputStreamHandlerConfig,pe.readMessage(ue,le.InputStreamHandlerConfig.deserializeBinaryFromReader),q.setInputStreamHandler(ue);break;case 12:ue=new le.OutputStreamHandlerConfig,pe.readMessage(ue,le.OutputStreamHandlerConfig.deserializeBinaryFromReader),q.setOutputStreamHandler(ue);break;case 13:ue=new proto.mediapipe.InputStreamInfo,pe.readMessage(ue,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),q.addInputStreamInfo(ue);break;case 14:ue=pe.readString(),q.setExecutor(ue);break;case 15:ue=new proto.mediapipe.ProfilerConfig,pe.readMessage(ue,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),q.setProfilerConfig(ue);break;case 16:ue=pe.readInt32(),q.setMaxInFlight(ue);break;case 17:ue=pe.readString(),q.addOptionValue(ue);break;case 1005:ue=pe.readString(),q.addExternalInput(ue);break;default:pe.skipField()}return q},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var q=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,q),q.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(q,pe){var ue=void 0;(ue=q.getName()).length>0&&pe.writeString(1,ue),(ue=q.getCalculator()).length>0&&pe.writeString(2,ue),(ue=q.getInputStreamList()).length>0&&pe.writeRepeatedString(3,ue),(ue=q.getOutputStreamList()).length>0&&pe.writeRepeatedString(4,ue),(ue=q.getInputSidePacketList()).length>0&&pe.writeRepeatedString(5,ue),(ue=q.getOutputSidePacketList()).length>0&&pe.writeRepeatedString(6,ue),(ue=q.getOptions())!=null&&pe.writeMessage(7,ue,d.CalculatorOptions.serializeBinaryToWriter),(ue=q.getNodeOptionsList()).length>0&&pe.writeRepeatedMessage(8,ue,m.Any.serializeBinaryToWriter),(ue=q.getSourceLayer())!==0&&pe.writeInt32(9,ue),(ue=q.getBufferSizeHint())!==0&&pe.writeInt32(10,ue),(ue=q.getInputStreamHandler())!=null&&pe.writeMessage(11,ue,le.InputStreamHandlerConfig.serializeBinaryToWriter),(ue=q.getOutputStreamHandler())!=null&&pe.writeMessage(12,ue,le.OutputStreamHandlerConfig.serializeBinaryToWriter),(ue=q.getInputStreamInfoList()).length>0&&pe.writeRepeatedMessage(13,ue,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(ue=q.getExecutor()).length>0&&pe.writeString(14,ue),(ue=q.getProfilerConfig())!=null&&pe.writeMessage(15,ue,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(ue=q.getMaxInFlight())!==0&&pe.writeInt32(16,ue),(ue=q.getOptionValueList()).length>0&&pe.writeRepeatedString(17,ue),(ue=q.getExternalInputList()).length>0&&pe.writeRepeatedString(1005,ue)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(q){return n.Message.setProto3StringField(this,1,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(q){return n.Message.setProto3StringField(this,2,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(q){return n.Message.setField(this,3,q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(q,pe){return n.Message.addToRepeatedField(this,3,q,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(q){return n.Message.setField(this,4,q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(q,pe){return n.Message.addToRepeatedField(this,4,q,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(q){return n.Message.setField(this,5,q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(q,pe){return n.Message.addToRepeatedField(this,5,q,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(q){return n.Message.setField(this,6,q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(q,pe){return n.Message.addToRepeatedField(this,6,q,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(q){return n.Message.setWrapperField(this,7,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return n.Message.getRepeatedWrapperField(this,m.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(q){return n.Message.setRepeatedWrapperField(this,8,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(q,pe){return n.Message.addToRepeatedWrapperField(this,8,q,proto.google.protobuf.Any,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return n.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(q){return n.Message.setProto3IntField(this,9,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(q){return n.Message.setProto3IntField(this,10,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,le.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(q){return n.Message.setWrapperField(this,11,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,le.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(q){return n.Message.setWrapperField(this,12,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(q){return n.Message.setRepeatedWrapperField(this,13,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(q,pe){return n.Message.addToRepeatedWrapperField(this,13,q,proto.mediapipe.InputStreamInfo,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return n.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(q){return n.Message.setProto3StringField(this,14,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(q){return n.Message.setWrapperField(this,15,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return n.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(q){return n.Message.setProto3IntField(this,16,q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(q){return n.Message.setField(this,17,q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(q,pe){return n.Message.addToRepeatedField(this,17,q,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(q){return n.Message.setField(this,1005,q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(q,pe){return n.Message.addToRepeatedField(this,1005,q,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(q){return n.Message.setRepeatedWrapperField(this,1,q)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(q,pe){return n.Message.addToRepeatedWrapperField(this,1,q,proto.mediapipe.CalculatorGraphConfig.Node,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return n.Message.getRepeatedWrapperField(this,E.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(q){return n.Message.setRepeatedWrapperField(this,6,q)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(q,pe){return n.Message.addToRepeatedWrapperField(this,6,q,proto.mediapipe.PacketFactoryConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return n.Message.getRepeatedWrapperField(this,j.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(q){return n.Message.setRepeatedWrapperField(this,7,q)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(q,pe){return n.Message.addToRepeatedWrapperField(this,7,q,proto.mediapipe.PacketGeneratorConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(q){return n.Message.setProto3IntField(this,8,q)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return n.Message.getRepeatedWrapperField(this,ee.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(q){return n.Message.setRepeatedWrapperField(this,9,q)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(q,pe){return n.Message.addToRepeatedWrapperField(this,9,q,proto.mediapipe.StatusHandlerConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(q){return n.Message.setField(this,10,q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(q,pe){return n.Message.addToRepeatedField(this,10,q,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(q){return n.Message.setField(this,15,q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(q,pe){return n.Message.addToRepeatedField(this,15,q,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(q){return n.Message.setField(this,16,q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(q,pe){return n.Message.addToRepeatedField(this,16,q,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(q){return n.Message.setField(this,17,q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(q,pe){return n.Message.addToRepeatedField(this,17,q,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(q){return n.Message.setProto3IntField(this,11,q)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return n.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(q){return n.Message.setProto3BooleanField(this,21,q)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,le.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(q){return n.Message.setWrapperField(this,12,q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,le.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(q){return n.Message.setWrapperField(this,13,q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,13)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(q){return n.Message.setRepeatedWrapperField(this,14,q)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(q,pe){return n.Message.addToRepeatedWrapperField(this,14,q,proto.mediapipe.ExecutorConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(q){return n.Message.setWrapperField(this,18,q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return n.Message.getField(this,18)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return n.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(q){return n.Message.setProto3StringField(this,19,q)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(q){return n.Message.setProto3StringField(this,20,q)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,o.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(q){return n.Message.setWrapperField(this,1001,q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return n.Message.getField(this,1001)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return n.Message.getRepeatedWrapperField(this,m.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(q){return n.Message.setRepeatedWrapperField(this,1002,q)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(q,pe){return n.Message.addToRepeatedWrapperField(this,1002,q,proto.google.protobuf.Any,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},A.object.extend(u,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Rasterization",null,w),A.exportSymbol("proto.mediapipe.Rasterization.Interval",null,w),proto.mediapipe.Rasterization=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},A.inherits(proto.mediapipe.Rasterization,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Rasterization.Interval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(d){return proto.mediapipe.Rasterization.toObject(d,this)},proto.mediapipe.Rasterization.toObject=function(d,m){var o={intervalList:n.Message.toObjectList(m.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.Rasterization.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(o,m)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.Rasterization.Interval;m.readMessage(o,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),d.addInterval(o)}else m.skipField();return d},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(d,m){var o;(o=d.getIntervalList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(d){return proto.mediapipe.Rasterization.Interval.toObject(d,this)},proto.mediapipe.Rasterization.Interval.toObject=function(d,m){var o,E={y:(o=n.Message.getField(m,1))==null?void 0:o,leftX:(o=n.Message.getField(m,2))==null?void 0:o,rightX:(o=n.Message.getField(m,3))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(o,m)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readInt32();d.setY(o);break;case 2:o=m.readInt32(),d.setLeftX(o);break;case 3:o=m.readInt32(),d.setRightX(o);break;default:m.skipField()}return d},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeInt32(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt32(2,o),(o=n.Message.getField(d,3))!=null&&m.writeInt32(3,o)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.Rasterization.prototype.addInterval=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Rasterization.Interval,m)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},A.object.extend(u,proto.mediapipe)})(rasterization_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=rasterization_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.LocationData",null,w),A.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,w),A.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,w),A.exportSymbol("proto.mediapipe.LocationData.Format",null,w),A.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,w),A.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,w),proto.mediapipe.LocationData=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},A.inherits(proto.mediapipe.LocationData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.BoundingBox,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.BinaryMask,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.RelativeKeypoint,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(m){return proto.mediapipe.LocationData.toObject(m,this)},proto.mediapipe.LocationData.toObject=function(m,o){var E,j={format:(E=n.Message.getField(o,1))==null?void 0:E,boundingBox:(E=o.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(m,E),relativeBoundingBox:(E=o.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(m,E),mask:(E=o.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(m,E),relativeKeypointsList:n.Message.toObjectList(o.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,m)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.LocationData.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(E,o)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readEnum();m.setFormat(E);break;case 2:E=new proto.mediapipe.LocationData.BoundingBox,o.readMessage(E,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),m.setBoundingBox(E);break;case 3:E=new proto.mediapipe.LocationData.RelativeBoundingBox,o.readMessage(E,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),m.setRelativeBoundingBox(E);break;case 4:E=new proto.mediapipe.LocationData.BinaryMask,o.readMessage(E,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),m.setMask(E);break;case 5:E=new proto.mediapipe.LocationData.RelativeKeypoint,o.readMessage(E,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),m.addRelativeKeypoints(E);break;default:o.skipField()}return m},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeEnum(1,E),(E=m.getBoundingBox())!=null&&o.writeMessage(2,E,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),(E=m.getRelativeBoundingBox())!=null&&o.writeMessage(3,E,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),(E=m.getMask())!=null&&o.writeMessage(4,E,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(E=m.getRelativeKeypointsList()).length>0&&o.writeRepeatedMessage(5,E,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(m){return proto.mediapipe.LocationData.BoundingBox.toObject(m,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(m,o){var E,j={xmin:(E=n.Message.getField(o,1))==null?void 0:E,ymin:(E=n.Message.getField(o,2))==null?void 0:E,width:(E=n.Message.getField(o,3))==null?void 0:E,height:(E=n.Message.getField(o,4))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(E,o)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readInt32();m.setXmin(E);break;case 2:E=o.readInt32(),m.setYmin(E);break;case 3:E=o.readInt32(),m.setWidth(E);break;case 4:E=o.readInt32(),m.setHeight(E);break;default:o.skipField()}return m},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&o.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&o.writeInt32(3,E),(E=n.Message.getField(m,4))!=null&&o.writeInt32(4,E)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(m){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(m,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(m,o){var E,j={xmin:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,ymin:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,width:(E=n.Message.getOptionalFloatingPointField(o,3))==null?void 0:E,height:(E=n.Message.getOptionalFloatingPointField(o,4))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(E,o)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readFloat();m.setXmin(E);break;case 2:E=o.readFloat(),m.setYmin(E);break;case 3:E=o.readFloat(),m.setWidth(E);break;case 4:E=o.readFloat(),m.setHeight(E);break;default:o.skipField()}return m},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeFloat(1,E),(E=n.Message.getField(m,2))!=null&&o.writeFloat(2,E),(E=n.Message.getField(m,3))!=null&&o.writeFloat(3,E),(E=n.Message.getField(m,4))!=null&&o.writeFloat(4,E)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(m){return proto.mediapipe.LocationData.BinaryMask.toObject(m,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(m,o){var E,j={width:(E=n.Message.getField(o,1))==null?void 0:E,height:(E=n.Message.getField(o,2))==null?void 0:E,rasterization:(E=o.getRasterization())&&d.Rasterization.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(E,o)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readInt32();m.setWidth(E);break;case 2:E=o.readInt32(),m.setHeight(E);break;case 3:E=new d.Rasterization,o.readMessage(E,d.Rasterization.deserializeBinaryFromReader),m.setRasterization(E);break;default:o.skipField()}return m},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&o.writeInt32(2,E),(E=m.getRasterization())!=null&&o.writeMessage(3,E,d.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return n.Message.getWrapperField(this,d.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(m){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(m,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(m,o){var E,j={x:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,y:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,keypointLabel:(E=n.Message.getField(o,3))==null?void 0:E,score:(E=n.Message.getOptionalFloatingPointField(o,4))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(E,o)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readFloat();m.setX(E);break;case 2:E=o.readFloat(),m.setY(E);break;case 3:E=o.readString(),m.setKeypointLabel(E);break;case 4:E=o.readFloat(),m.setScore(E);break;default:o.skipField()}return m},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeFloat(1,E),(E=n.Message.getField(m,2))!=null&&o.writeFloat(2,E),(E=n.Message.getField(m,3))!=null&&o.writeString(3,E),(E=n.Message.getField(m,4))!=null&&o.writeFloat(4,E)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getFormat=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.prototype.getMask=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(m){return n.Message.setRepeatedWrapperField(this,5,m)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(m,o){return n.Message.addToRepeatedWrapperField(this,5,m,proto.mediapipe.LocationData.RelativeKeypoint,o)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},A.object.extend(u,proto.mediapipe)}(location_data_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=location_data_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.Detection",null,w),A.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,w),A.exportSymbol("proto.mediapipe.DetectionList",null,w),proto.mediapipe.Detection=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},A.inherits(proto.mediapipe.Detection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.Detection.AssociatedDetection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},A.inherits(proto.mediapipe.DetectionList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(m){return proto.mediapipe.Detection.toObject(m,this)},proto.mediapipe.Detection.toObject=function(m,o){var E,j={labelList:(E=n.Message.getRepeatedField(o,1))==null?void 0:E,labelIdList:(E=n.Message.getRepeatedField(o,2))==null?void 0:E,scoreList:(E=n.Message.getRepeatedFloatingPointField(o,3))==null?void 0:E,locationData:(E=o.getLocationData())&&d.LocationData.toObject(m,E),featureTag:(E=n.Message.getField(o,5))==null?void 0:E,trackId:(E=n.Message.getField(o,6))==null?void 0:E,detectionId:(E=n.Message.getField(o,7))==null?void 0:E,associatedDetectionsList:n.Message.toObjectList(o.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,m),displayNameList:(E=n.Message.getRepeatedField(o,9))==null?void 0:E,timestampUsec:(E=n.Message.getField(o,10))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.Detection.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(E,o)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readString();m.addLabel(E);break;case 2:for(var j=o.isDelimited()?o.readPackedInt32():[o.readInt32()],ee=0;ee<j.length;ee++)m.addLabelId(j[ee]);break;case 3:for(j=o.isDelimited()?o.readPackedFloat():[o.readFloat()],ee=0;ee<j.length;ee++)m.addScore(j[ee]);break;case 4:E=new d.LocationData,o.readMessage(E,d.LocationData.deserializeBinaryFromReader),m.setLocationData(E);break;case 5:E=o.readString(),m.setFeatureTag(E);break;case 6:E=o.readString(),m.setTrackId(E);break;case 7:E=o.readInt64(),m.setDetectionId(E);break;case 8:E=new proto.mediapipe.Detection.AssociatedDetection,o.readMessage(E,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),m.addAssociatedDetections(E);break;case 9:E=o.readString(),m.addDisplayName(E);break;case 10:E=o.readInt64(),m.setTimestampUsec(E);break;default:o.skipField()}return m},proto.mediapipe.Detection.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getLabelList()).length>0&&o.writeRepeatedString(1,E),(E=m.getLabelIdList()).length>0&&o.writePackedInt32(2,E),(E=m.getScoreList()).length>0&&o.writePackedFloat(3,E),(E=m.getLocationData())!=null&&o.writeMessage(4,E,d.LocationData.serializeBinaryToWriter),(E=n.Message.getField(m,5))!=null&&o.writeString(5,E),(E=n.Message.getField(m,6))!=null&&o.writeString(6,E),(E=n.Message.getField(m,7))!=null&&o.writeInt64(7,E),(E=m.getAssociatedDetectionsList()).length>0&&o.writeRepeatedMessage(8,E,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(E=m.getDisplayNameList()).length>0&&o.writeRepeatedString(9,E),(E=n.Message.getField(m,10))!=null&&o.writeInt64(10,E)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(m){return proto.mediapipe.Detection.AssociatedDetection.toObject(m,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(m,o){var E,j={id:(E=n.Message.getField(o,1))==null?void 0:E,confidence:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(E,o)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readInt32();m.setId(E);break;case 2:E=o.readFloat(),m.setConfidence(E);break;default:o.skipField()}return m},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&o.writeFloat(2,E)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Detection.prototype.getLabelList=function(){return n.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(m){return n.Message.setField(this,1,m||[])},proto.mediapipe.Detection.prototype.addLabel=function(m,o){return n.Message.addToRepeatedField(this,1,m,o)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.Detection.prototype.addLabelId=function(m,o){return n.Message.addToRepeatedField(this,2,m,o)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(m){return n.Message.setField(this,3,m||[])},proto.mediapipe.Detection.prototype.addScore=function(m,o){return n.Message.addToRepeatedField(this,3,m,o)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return n.Message.getWrapperField(this,d.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Detection.prototype.getTrackId=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.Detection.prototype.getDetectionId=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(m){return n.Message.setRepeatedWrapperField(this,8,m)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(m,o){return n.Message.addToRepeatedWrapperField(this,8,m,proto.mediapipe.Detection.AssociatedDetection,o)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return n.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(m){return n.Message.setField(this,9,m||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(m,o){return n.Message.addToRepeatedField(this,9,m,o)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(m){return n.Message.setField(this,10,m)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return n.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.DetectionList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(m){return proto.mediapipe.DetectionList.toObject(m,this)},proto.mediapipe.DetectionList.toObject=function(m,o){var E={detectionList:n.Message.toObjectList(o.getDetectionList(),proto.mediapipe.Detection.toObject,m)};return m&&(E.$jspbMessageInstance=o),E}),proto.mediapipe.DetectionList.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(E,o)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var E=new proto.mediapipe.Detection;o.readMessage(E,proto.mediapipe.Detection.deserializeBinaryFromReader),m.addDetection(E)}else o.skipField();return m},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(m,o){var E;(E=m.getDetectionList()).length>0&&o.writeRepeatedMessage(1,E,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.DetectionList.prototype.addDetection=function(m,o){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.Detection,o)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},A.object.extend(u,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,w),proto.mediapipe.InferenceCalculatorOptions=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(o){n.Message.initialize(this,o,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(o,E){var j,ee={modelPath:(j=n.Message.getField(E,1))==null?void 0:j,useGpu:n.Message.getBooleanFieldWithDefault(E,2,!1),useNnapi:n.Message.getBooleanFieldWithDefault(E,3,!1),cpuNumThread:n.Message.getFieldWithDefault(E,4,-1),delegate:(j=E.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(o,j)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(j,E)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var j=E.readString();o.setModelPath(j);break;case 2:j=E.readBool(),o.setUseGpu(j);break;case 3:j=E.readBool(),o.setUseNnapi(j);break;case 4:j=E.readInt32(),o.setCpuNumThread(j);break;case 5:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate,E.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),o.setDelegate(j);break;default:E.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(o,E){var j=void 0;(j=n.Message.getField(o,1))!=null&&E.writeString(1,j),(j=n.Message.getField(o,2))!=null&&E.writeBool(2,j),(j=n.Message.getField(o,3))!=null&&E.writeBool(3,j),(j=n.Message.getField(o,4))!=null&&E.writeInt32(4,j),(j=o.getDelegate())!=null&&E.writeMessage(5,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(o,E){var j,ee={tflite:(j=E.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(o,j),gpu:(j=E.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(o,j),nnapi:(j=E.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(o,j),xnnpack:(j=E.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(o,j)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(j,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;E.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),o.setTflite(j);break;case 2:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,E.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),o.setGpu(j);break;case 3:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,E.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),o.setNnapi(j);break;case 4:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,E.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),o.setXnnpack(j);break;default:E.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(o,E){var j=void 0;(j=o.getTflite())!=null&&E.writeMessage(1,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(j=o.getGpu())!=null&&E.writeMessage(2,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(j=o.getNnapi())!=null&&E.writeMessage(3,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),(j=o.getXnnpack())!=null&&E.writeMessage(4,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(o,E){var j={};return o&&(j.$jspbMessageInstance=E),j}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(j,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)E.getFieldNumber(),E.skipField();return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(o,E){},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(o,E){var j,ee={useAdvancedGpuApi:n.Message.getBooleanFieldWithDefault(E,1,!1),api:n.Message.getFieldWithDefault(E,4,0),allowPrecisionLoss:n.Message.getBooleanFieldWithDefault(E,3,!0),cachedKernelPath:(j=n.Message.getField(E,2))==null?void 0:j,serializedModelDir:(j=n.Message.getField(E,7))==null?void 0:j,modelToken:(j=n.Message.getField(E,8))==null?void 0:j,usage:n.Message.getFieldWithDefault(E,5,2)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(j,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var j=E.readBool();o.setUseAdvancedGpuApi(j);break;case 4:j=E.readEnum(),o.setApi(j);break;case 3:j=E.readBool(),o.setAllowPrecisionLoss(j);break;case 2:j=E.readString(),o.setCachedKernelPath(j);break;case 7:j=E.readString(),o.setSerializedModelDir(j);break;case 8:j=E.readString(),o.setModelToken(j);break;case 5:j=E.readEnum(),o.setUsage(j);break;default:E.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(o,E){var j=void 0;(j=n.Message.getField(o,1))!=null&&E.writeBool(1,j),(j=n.Message.getField(o,4))!=null&&E.writeEnum(4,j),(j=n.Message.getField(o,3))!=null&&E.writeBool(3,j),(j=n.Message.getField(o,2))!=null&&E.writeString(2,j),(j=n.Message.getField(o,7))!=null&&E.writeString(7,j),(j=n.Message.getField(o,8))!=null&&E.writeString(8,j),(j=n.Message.getField(o,5))!=null&&E.writeEnum(5,j)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(o){return n.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(o){return n.Message.setField(this,4,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return n.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(o){return n.Message.setField(this,3,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(o){return n.Message.setField(this,2,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return n.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(o){return n.Message.setField(this,7,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(o){return n.Message.setField(this,8,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return n.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(o){return n.Message.setField(this,5,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(o,E){var j,ee={cacheDir:(j=n.Message.getField(E,1))==null?void 0:j,modelToken:(j=n.Message.getField(E,2))==null?void 0:j,acceleratorName:(j=n.Message.getField(E,3))==null?void 0:j};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(j,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var j=E.readString();o.setCacheDir(j);break;case 2:j=E.readString(),o.setModelToken(j);break;case 3:j=E.readString(),o.setAcceleratorName(j);break;default:E.skipField()}return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(o,E){var j=void 0;(j=n.Message.getField(o,1))!=null&&E.writeString(1,j),(j=n.Message.getField(o,2))!=null&&E.writeString(2,j),(j=n.Message.getField(o,3))!=null&&E.writeString(3,j)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(o){return n.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(o){return n.Message.setField(this,2,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(o){return n.Message.setField(this,3,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(o){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(o,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(o,E){var j={numThreads:n.Message.getFieldWithDefault(E,1,-1)};return o&&(j.$jspbMessageInstance=E),j}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(j,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var j=E.readInt32();o.setNumThreads(j)}else E.skipField();return o},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(o,E){var j;(j=n.Message.getField(o,1))!=null&&E.writeInt32(1,j)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(o){return n.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(o){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(o){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(o){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(o){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],o)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(o){return n.Message.setField(this,1,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(o){return n.Message.setField(this,2,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(o){return n.Message.setField(this,3,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return n.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(o){return n.Message.setField(this,4,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(o){return n.Message.setWrapperField(this,5,o)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,A.object.extend(u,proto.mediapipe)})(inference_calculator_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=inference_calculator_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,w),A.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,w),proto.mediapipe.tasks.core.proto.Acceleration=function(m){n.Message.initialize(this,m,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},A.inherits(proto.mediapipe.tasks.core.proto.Acceleration,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(m){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(m,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(m,o){var E,j={xnnpack:(E=o.getXnnpack())&&d.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(m,E),gpu:(E=o.getGpu())&&d.InferenceCalculatorOptions.Delegate.Gpu.toObject(m,E),tflite:(E=o.getTflite())&&d.InferenceCalculatorOptions.Delegate.TfLite.toObject(m,E),nnapi:(E=o.getNnapi())&&d.InferenceCalculatorOptions.Delegate.Nnapi.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(E,o)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new d.InferenceCalculatorOptions.Delegate.Xnnpack;o.readMessage(E,d.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),m.setXnnpack(E);break;case 2:E=new d.InferenceCalculatorOptions.Delegate.Gpu,o.readMessage(E,d.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),m.setGpu(E);break;case 4:E=new d.InferenceCalculatorOptions.Delegate.TfLite,o.readMessage(E,d.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),m.setTflite(E);break;case 5:E=new d.InferenceCalculatorOptions.Delegate.Nnapi,o.readMessage(E,d.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),m.setNnapi(E);break;default:o.skipField()}return m},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getXnnpack())!=null&&o.writeMessage(1,E,d.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),(E=m.getGpu())!=null&&o.writeMessage(2,E,d.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(E=m.getTflite())!=null&&o.writeMessage(4,E,d.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(E=m.getNnapi())!=null&&o.writeMessage(5,E,d.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(m){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(m){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(m){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(m){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return n.Message.getField(this,5)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,w),A.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,w),A.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,w),proto.mediapipe.tasks.core.proto.ExternalFile=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(d,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(d,m){var o,E={fileContent:m.getFileContent_asB64(),fileName:(o=n.Message.getField(m,2))==null?void 0:o,fileDescriptorMeta:(o=m.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,o),filePointerMeta:(o=m.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,o)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readBytes();d.setFileContent(o);break;case 2:o=m.readString(),d.setFileName(o);break;case 3:o=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,m.readMessage(o,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),d.setFileDescriptorMeta(o);break;case 4:o=new proto.mediapipe.tasks.core.proto.FilePointerMeta,m.readMessage(o,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),d.setFilePointerMeta(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeBytes(1,o),(o=n.Message.getField(d,2))!=null&&m.writeString(2,o),(o=d.getFileDescriptorMeta())!=null&&m.writeMessage(3,o,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),(o=d.getFilePointerMeta())!=null&&m.writeMessage(4,o,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return n.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return n.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(d,m){var o,E={fd:(o=n.Message.getField(m,1))==null?void 0:o,length:(o=n.Message.getField(m,2))==null?void 0:o,offset:(o=n.Message.getField(m,3))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readInt32();d.setFd(o);break;case 2:o=m.readInt64(),d.setLength(o);break;case 3:o=m.readInt64(),d.setOffset(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeInt32(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt64(2,o),(o=n.Message.getField(d,3))!=null&&m.writeInt64(3,o)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(d,m){var o,E={pointer:(o=n.Message.getField(m,1))==null?void 0:o,length:(o=n.Message.getField(m,2))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readUint64();d.setPointer(o);break;case 2:o=m.readInt64(),d.setLength(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeUint64(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt64(2,o)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)})(external_file_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=acceleration_pb;A.object.extend(proto,d);var m=external_file_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,w),proto.mediapipe.tasks.core.proto.BaseOptions=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(o){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(o,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(o,E){var j,ee={modelAsset:(j=E.getModelAsset())&&m.ExternalFile.toObject(o,j),useStreamMode:n.Message.getBooleanFieldWithDefault(E,2,!1),acceleration:(j=E.getAcceleration())&&d.Acceleration.toObject(o,j)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(j,E)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var j=new m.ExternalFile;E.readMessage(j,m.ExternalFile.deserializeBinaryFromReader),o.setModelAsset(j);break;case 2:j=E.readBool(),o.setUseStreamMode(j);break;case 3:j=new d.Acceleration,E.readMessage(j,d.Acceleration.deserializeBinaryFromReader),o.setAcceleration(j);break;default:E.skipField()}return o},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(o,E){var j=void 0;(j=o.getModelAsset())!=null&&E.writeMessage(1,j,m.ExternalFile.serializeBinaryToWriter),(j=n.Message.getField(o,2))!=null&&E.writeBool(2,j),(j=o.getAcceleration())!=null&&E.writeMessage(3,j,d.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return n.Message.getWrapperField(this,m.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(o){return n.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(o){return n.Message.setField(this,2,o)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return n.Message.getWrapperField(this,d.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(o){return n.Message.setWrapperField(this,3,o)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(j,3,.5),numFaces:(ee=n.Message.getField(j,4))==null?void 0:ee};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=j.readFloat(),E.setMinDetectionConfidence(ee);break;case 3:ee=j.readFloat(),E.setMinSuppressionThreshold(ee);break;case 4:ee=j.readInt32(),E.setNumFaces(ee);break;default:j.skipField()}return E},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&j.writeFloat(2,ee),(ee=n.Message.getField(E,3))!=null&&j.writeFloat(3,ee),(ee=n.Message.getField(E,4))!=null&&j.writeInt32(4,ee)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_detector.proto)})(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;const DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(u){var n,A,w,d,m,o,E,j,ee,le,q,pe,ue;const xt=u.getScoreList(),rt=u.getLabelIdList(),We=u.getLabelList(),st=u.getDisplayNameList(),yt={categories:[],keypoints:[]};for(let _t=0;_t<xt.length;_t++)yt.categories.push({score:xt[_t],index:(n=rt[_t])!==null&&n!==void 0?n:DEFAULT_CATEGORY_INDEX,categoryName:(A=We[_t])!==null&&A!==void 0?A:"",displayName:(w=st[_t])!==null&&w!==void 0?w:""});const St=(d=u.getLocationData())===null||d===void 0?void 0:d.getBoundingBox();if(St&&(yt.boundingBox={originX:(m=St.getXmin())!==null&&m!==void 0?m:0,originY:(o=St.getYmin())!==null&&o!==void 0?o:0,width:(E=St.getWidth())!==null&&E!==void 0?E:0,height:(j=St.getHeight())!==null&&j!==void 0?j:0}),(ee=u.getLocationData())===null||ee===void 0?void 0:ee.getRelativeKeypointsList().length)for(const _t of u.getLocationData().getRelativeKeypointsList())yt.keypoints.push({x:(le=_t.getX())!==null&&le!==void 0?le:0,y:(q=_t.getY())!==null&&q!==void 0?q:0,score:(pe=_t.getScore())!==null&&pe!==void 0?pe:0,label:(ue=_t.getKeypointLabel())!==null&&ue!==void 0?ue:""});return yt}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.NormalizedRect",null,w),A.exportSymbol("proto.mediapipe.Rect",null,w),proto.mediapipe.Rect=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Rect,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.NormalizedRect,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(d){return proto.mediapipe.Rect.toObject(d,this)},proto.mediapipe.Rect.toObject=function(d,m){var o,E={xCenter:(o=n.Message.getField(m,1))==null?void 0:o,yCenter:(o=n.Message.getField(m,2))==null?void 0:o,height:(o=n.Message.getField(m,3))==null?void 0:o,width:(o=n.Message.getField(m,4))==null?void 0:o,rotation:n.Message.getFloatingPointFieldWithDefault(m,5,0),rectId:(o=n.Message.getField(m,6))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Rect.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(o,m)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readInt32();d.setXCenter(o);break;case 2:o=m.readInt32(),d.setYCenter(o);break;case 3:o=m.readInt32(),d.setHeight(o);break;case 4:o=m.readInt32(),d.setWidth(o);break;case 5:o=m.readFloat(),d.setRotation(o);break;case 6:o=m.readInt64(),d.setRectId(o);break;default:m.skipField()}return d},proto.mediapipe.Rect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeInt32(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt32(2,o),(o=n.Message.getField(d,3))!=null&&m.writeInt32(3,o),(o=n.Message.getField(d,4))!=null&&m.writeInt32(4,o),(o=n.Message.getField(d,5))!=null&&m.writeFloat(5,o),(o=n.Message.getField(d,6))!=null&&m.writeInt64(6,o)},proto.mediapipe.Rect.prototype.getXCenter=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rect.prototype.getYCenter=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rect.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rect.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Rect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Rect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Rect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Rect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.Rect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(d){return proto.mediapipe.NormalizedRect.toObject(d,this)},proto.mediapipe.NormalizedRect.toObject=function(d,m){var o,E={xCenter:(o=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:o,yCenter:(o=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:o,height:(o=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:o,width:(o=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:o,rotation:n.Message.getFloatingPointFieldWithDefault(m,5,0),rectId:(o=n.Message.getField(m,6))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.NormalizedRect.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(o,m)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readFloat();d.setXCenter(o);break;case 2:o=m.readFloat(),d.setYCenter(o);break;case 3:o=m.readFloat(),d.setHeight(o);break;case 4:o=m.readFloat(),d.setWidth(o);break;case 5:o=m.readFloat(),d.setRotation(o);break;case 6:o=m.readInt64(),d.setRectId(o);break;default:m.skipField()}return d},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeFloat(1,o),(o=n.Message.getField(d,2))!=null&&m.writeFloat(2,o),(o=n.Message.getField(d,3))!=null&&m.writeFloat(3,o),(o=n.Message.getField(d,4))!=null&&m.writeFloat(4,o),(o=n.Message.getField(d,5))!=null&&m.writeFloat(5,o),(o=n.Message.getField(d,6))!=null&&m.writeInt64(6,o)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},A.object.extend(u,proto.mediapipe)})(rect_pb);var task_runner={},graph_runner={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createGraphRunner=u.createMediaPipeLib=u.GraphRunner=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;const n=platform_utils;u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class A{constructor(o,E){this.autoResizeCanvas=!0,this.wasmModule=o,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport=typeof this.wasmModule._addIntToInputStream=="function",E!==void 0?this.wasmModule.canvas=E:typeof OffscreenCanvas=="undefined"||(0,n.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}initializeGraph(o){return es(this,null,function*(){const E=yield fetch(o),j=yield E.arrayBuffer(),ee=!(o.endsWith(".pbtxt")||o.endsWith(".textproto"));this.setGraph(new Uint8Array(j),ee)})}setGraphFromString(o){this.setGraph(new TextEncoder().encode(o),!1)}setGraph(o,E){const j=o.length,ee=this.wasmModule._malloc(j);this.wasmModule.HEAPU8.set(o,ee),E?this.wasmModule._changeBinaryGraph(j,ee):this.wasmModule._changeTextGraph(j,ee),this.wasmModule._free(ee)}configureAudio(o,E,j,ee,le){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),ee=ee||"input_audio",this.wrapStringPtr(ee,q=>{le=le||"audio_header",this.wrapStringPtr(le,pe=>{this.wasmModule._configureAudio(q,pe,o,E,j)})})}setAutoResizeCanvas(o){this.autoResizeCanvas=o}setAutoRenderToScreen(o){this.wasmModule._setAutoRenderToScreen(o)}bindTextureToStream(o,E){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");E?this.wasmModule._bindTextureToStream(E):console.assert(this.wasmModule._bindTextureToCanvas());const j=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!j)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let ee,le;return j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,o),o.videoWidth?(ee=o.videoWidth,le=o.videoHeight):o.naturalWidth?(ee=o.naturalWidth,le=o.naturalHeight):(ee=o.width,le=o.height),!this.autoResizeCanvas||ee===this.wasmModule.canvas.width&&le===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=ee,this.wasmModule.canvas.height=le),[ee,le]}processGl(o,E){const[j,ee]=this.bindTextureToStream(o),le=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[le/4]=j,this.wasmModule.HEAPU32[le/4+1]=ee,this.wasmModule.HEAPF64[le/8+1]=E,this.wasmModule._processGl(le),this.wasmModule._free(le)}wrapStringPtr(o,E){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const j=this.wasmModule.stringToNewUTF8(o);E(j),this.wasmModule._free(j)}wrapStringPtrPtr(o,E){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const j=new Uint32Array(o.length);for(let le=0;le<o.length;le++)j[le]=this.wasmModule.stringToNewUTF8(o[le]);const ee=this.wasmModule._malloc(4*j.length);this.wasmModule.HEAPU32.set(j,ee>>2),E(ee);for(const le of j)this.wasmModule._free(le);this.wasmModule._free(ee)}getCalculatorGraphConfig(o,E){const j=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(j,ee=>{o(ee)}),this.wrapStringPtr(j,ee=>{this.wasmModule._getGraphConfig(ee,E)}),delete this.wasmModule.simpleListeners[j]}setListener(o,E){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[o]=E}setVectorListener(o,E){let j=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[o]=(ee,le,q)=>{le?(E(j,q),j=[]):j.push(ee)}}attachErrorListener(o){this.wasmModule.errorListener=o}attachEmptyPacketListener(o,E){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[o]=E}addAudioToStream(o,E,j){this.addAudioToStreamWithShape(o,0,0,E,j)}addAudioToStreamWithShape(o,E,j,ee,le){const q=4*o.length;this.audioSize!==q&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(q),this.audioSize=q),this.wasmModule.HEAPF32.set(o,this.audioPtr/4),this.wrapStringPtr(ee,pe=>{this.wasmModule._addAudioToInputStream(this.audioPtr,E,j,pe,le)})}addGpuBufferToStream(o,E,j){this.wrapStringPtr(E,ee=>{const[le,q]=this.bindTextureToStream(o,ee);this.wasmModule._addBoundTextureToStream(ee,le,q,j)})}addBoolToStream(o,E,j){this.wrapStringPtr(E,ee=>{this.wasmModule._addBoolToInputStream(o,ee,j)})}addDoubleToStream(o,E,j){this.wrapStringPtr(E,ee=>{this.wasmModule._addDoubleToInputStream(o,ee,j)})}addFloatToStream(o,E,j){this.wrapStringPtr(E,ee=>{this.wasmModule._addFloatToInputStream(o,ee,j)})}addIntToStream(o,E,j){this.wrapStringPtr(E,ee=>{this.wasmModule._addIntToInputStream(o,ee,j)})}addStringToStream(o,E,j){this.wrapStringPtr(E,ee=>{this.wrapStringPtr(o,le=>{this.wasmModule._addStringToInputStream(le,ee,j)})})}addStringRecordToStream(o,E,j){this.wrapStringPtr(E,ee=>{this.wrapStringPtrPtr(Object.keys(o),le=>{this.wrapStringPtrPtr(Object.values(o),q=>{this.wasmModule._addFlatHashMapToInputStream(le,q,Object.keys(o).length,ee,j)})})})}addProtoToStream(o,E,j,ee){this.wrapStringPtr(j,le=>{this.wrapStringPtr(E,q=>{const pe=this.wasmModule._malloc(o.length);this.wasmModule.HEAPU8.set(o,pe),this.wasmModule._addProtoToInputStream(pe,o.length,q,le,ee),this.wasmModule._free(pe)})})}addEmptyPacketToStream(o,E){this.wrapStringPtr(o,j=>{this.wasmModule._addEmptyPacketToInputStream(j,E)})}addBoolToInputSidePacket(o,E){this.wrapStringPtr(E,j=>{this.wasmModule._addBoolToInputSidePacket(o,j)})}addDoubleToInputSidePacket(o,E){this.wrapStringPtr(E,j=>{this.wasmModule._addDoubleToInputSidePacket(o,j)})}addFloatToInputSidePacket(o,E){this.wrapStringPtr(E,j=>{this.wasmModule._addFloatToInputSidePacket(o,j)})}addIntToInputSidePacket(o,E){this.wrapStringPtr(E,j=>{this.wasmModule._addIntToInputSidePacket(o,j)})}addStringToInputSidePacket(o,E){this.wrapStringPtr(E,j=>{this.wrapStringPtr(o,ee=>{this.wasmModule._addStringToInputSidePacket(ee,j)})})}addProtoToInputSidePacket(o,E,j){this.wrapStringPtr(j,ee=>{this.wrapStringPtr(E,le=>{const q=this.wasmModule._malloc(o.length);this.wasmModule.HEAPU8.set(o,q),this.wasmModule._addProtoToInputSidePacket(q,o.length,le,ee),this.wasmModule._free(q)})})}attachBoolListener(o,E){this.setListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachBoolListener(j)})}attachBoolVectorListener(o,E){this.setVectorListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachBoolVectorListener(j)})}attachIntListener(o,E){this.setListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachIntListener(j)})}attachIntVectorListener(o,E){this.setVectorListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachIntVectorListener(j)})}attachDoubleListener(o,E){this.setListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachDoubleListener(j)})}attachDoubleVectorListener(o,E){this.setVectorListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachDoubleVectorListener(j)})}attachFloatListener(o,E){this.setListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachFloatListener(j)})}attachFloatVectorListener(o,E){this.setVectorListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachFloatVectorListener(j)})}attachStringListener(o,E){this.setListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachStringListener(j)})}attachStringVectorListener(o,E){this.setVectorListener(o,E),this.wrapStringPtr(o,j=>{this.wasmModule._attachStringVectorListener(j)})}attachProtoListener(o,E,j){this.setListener(o,E),this.wrapStringPtr(o,ee=>{this.wasmModule._attachProtoListener(ee,j||!1)})}attachProtoVectorListener(o,E,j){this.setVectorListener(o,E),this.wrapStringPtr(o,ee=>{this.wasmModule._attachProtoVectorListener(ee,j||!1)})}attachAudioListener(o,E,j){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(o,(ee,le)=>{const q=new Float32Array(ee.buffer,ee.byteOffset,ee.length/4);E(q,le)}),this.wrapStringPtr(o,ee=>{this.wasmModule._attachAudioListener(ee,j||!1)})}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}function w(m){return es(this,null,function*(){if(typeof importScripts!="function"){const o=document.createElement("script");return o.setAttribute("src",m),o.setAttribute("crossorigin","anonymous"),new Promise(E=>{o.addEventListener("load",()=>{E()},!1),o.addEventListener("error",()=>{E()},!1),document.body.appendChild(o)})}importScripts(m.toString())})}function d(m,o,E,j,ee){return es(this,null,function*(){const le=[];if(o&&le.push(o),E&&le.push(E),le.length&&(yield Promise.all(le.map(w))),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&ee){const pe=self.Module;pe.locateFile=ee.locateFile,ee.mainScriptUrlOrBlob&&(pe.mainScriptUrlOrBlob=ee.mainScriptUrlOrBlob)}const q=yield self.ModuleFactory(self.Module||ee);return self.ModuleFactory=self.Module=void 0,new m(q,j)})}u.GraphRunner=A,u.createMediaPipeLib=d,u.createGraphRunner=function(m,o,E,j){return es(this,null,function*(){return d(A,m,o,E,j)})}})(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(u){return class extends u{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;const inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,NO_ASSETS=void 0,FREE_MEMORY_STREAM="free_memory",UNUSED_STREAM_SUFFIX="_unused_out",CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner);class CachedGraphRunner extends CachedGraphRunnerType{}function createTaskRunner(u,n,A,w){return es(this,null,function*(){const d={locateFile:()=>A.wasmBinaryPath.toString()},m=yield(0,graph_runner_1$1.createMediaPipeLib)(u,A.wasmLoaderPath,NO_ASSETS,n,d);return yield m.setOptions(w),m})}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;class TaskRunner{static createInstance(n,A,w,d){return es(this,null,function*(){return createTaskRunner(n,A,w,d)})}constructor(n){this.graphRunner=n,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(n){var A,w,d,m,o,E;const j=n.baseOptions||{};if(!((A=n.baseOptions)===null||A===void 0)&&A.modelAssetBuffer&&(!((w=n.baseOptions)===null||w===void 0)&&w.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(!((d=this.baseOptions.getModelAsset())===null||d===void 0)&&d.hasFileContent()||!((m=this.baseOptions.getModelAsset())===null||m===void 0)&&m.hasFileName()||!((o=n.baseOptions)===null||o===void 0)&&o.modelAssetBuffer||!((E=n.baseOptions)===null||E===void 0)&&E.modelAssetPath))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(j),j.modelAssetPath?fetch(j.modelAssetPath.toString()).then(ee=>{if(ee.ok)return ee.arrayBuffer();throw new Error(`Failed to fetch model: ${j.modelAssetPath} (${ee.status})`)}).then(ee=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch(le){}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array(ee),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()}):(this.setExternalFile(j.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}onGraphRefreshed(){}getCalculatorGraphConfig(){let n;if(this.graphRunner.getCalculatorGraphConfig(A=>{n=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(A)}),!n)throw new Error("Failed to retrieve CalculatorGraphConfig");return n}setGraph(n,A){this.graphRunner.attachErrorListener((w,d)=>{this.processingErrors.push(new Error(d))}),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(n,A),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(n){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,n)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{const n=this.processingErrors.length;if(n===1)throw new Error(this.processingErrors[0].message);if(n>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map(A=>A.message).join(", "))}finally{this.processingErrors=[]}}setExternalFile(n){const A=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;typeof n=="string"?(A.setFileName(n),A.clearFileContent()):n instanceof Uint8Array&&(A.setFileContent(n),A.clearFileName()),this.baseOptions.setModelAsset(A)}setAcceleration(n){let A=this.baseOptions.getAcceleration();A||(A=new acceleration_pb_1.Acceleration,A.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in n&&(n.delegate==="GPU"?A.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):A.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(A)}addKeepaliveNode(n){this.keepaliveNode=new calculator_pb_1.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(FREE_MEMORY_STREAM),this.keepaliveNode.addOutputStream(FREE_MEMORY_STREAM+UNUSED_STREAM_SUFFIX),n.addInputStream(FREE_MEMORY_STREAM),n.addNode(this.keepaliveNode)}keepStreamAlive(n){this.keepaliveNode.addInputStream(n),this.keepaliveNode.addOutputStream(n+UNUSED_STREAM_SUFFIX)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,FREE_MEMORY_STREAM,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}}task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(u){return class extends u{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(n,A,w){this.wrapStringPtr(A,d=>{const[m,o]=this.bindTextureToStream(n,d);this.wasmImageModule._addBoundTextureAsImageToStream(d,m,o,w)})}attachImageListener(n,A){this.setListener(n,A),this.wrapStringPtr(n,w=>{this.wasmImageModule._attachImageListener(w)})}attachImageVectorListener(n,A){this.setVectorListener(n,A),this.wrapStringPtr(n,w=>{this.wasmImageModule._attachImageVectorListener(w)})}}}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;const rect_pb_1=rect_pb,task_runner_1=task_runner,image_1$1=image,image_shader_context_1=image_shader_context,mask_1$1=mask,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner));class VisionGraphRunner extends GraphRunnerVisionType{}function createCanvas(){return typeof OffscreenCanvas!="undefined"&&!(0,platform_utils_1.isWebKit)()?void 0:document.createElement("canvas")}vision_task_runner.VisionGraphRunner=VisionGraphRunner;class VisionTaskRunner extends task_runner_1.TaskRunner{static createVisionInstance(n,A,w){return es(this,null,function*(){var d;const m=(d=w.canvas)!==null&&d!==void 0?d:createCanvas();return task_runner_1.TaskRunner.createInstance(n,m,A,w)})}constructor(n,A,w,d){super(n),this.graphRunner=n,this.imageStreamName=A,this.normRectStreamName=w,this.roiAllowed=d,this.shaderContext=new image_shader_context_1.MPImageShaderContext}applyOptions(n){if("runningMode"in n){const A=!!n.runningMode&&n.runningMode!=="IMAGE";this.baseOptions.setUseStreamMode(A)}if(n.canvas!==void 0&&this.graphRunner.wasmModule.canvas!==n.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(n)}processImageData(n,A){var w;if(!((w=this.baseOptions)===null||w===void 0)&&w.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(n,A,this.getSynctheticTimestamp())}processVideoData(n,A,w){var d;if(!(!((d=this.baseOptions)===null||d===void 0)&&d.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(n,A,w)}getImageSourceSize(n){return n.videoWidth!==void 0?[n.videoWidth,n.videoHeight]:n.naturalWidth!==void 0?[n.naturalWidth,n.naturalHeight]:[n.width,n.height]}convertToNormalizedRect(n,A){const w=new rect_pb_1.NormalizedRect;if(A!=null&&A.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");const d=A.regionOfInterest;if(d.left>=d.right||d.top>=d.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(d.left<0||d.top<0||d.right>1||d.bottom>1)throw new Error("Expected RectF values to be in [0,1].");w.setXCenter((d.left+d.right)/2),w.setYCenter((d.top+d.bottom)/2),w.setWidth(d.right-d.left),w.setHeight(d.bottom-d.top)}else w.setXCenter(.5),w.setYCenter(.5),w.setWidth(1),w.setHeight(1);if(A!=null&&A.rotationDegrees){if((A==null?void 0:A.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90\xB0.");if(w.setRotation(-Math.PI*A.rotationDegrees/180),(A==null?void 0:A.rotationDegrees)%180!=0){const[d,m]=this.getImageSourceSize(n),o=w.getHeight()*m/d,E=w.getWidth()*d/m;w.setWidth(o),w.setHeight(E)}}return w}process(n,A,w){const d=this.convertToNormalizedRect(n,A);this.graphRunner.addProtoToStream(d.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,w),this.graphRunner.addGpuBufferAsImageToStream(n,this.imageStreamName,w!=null?w:performance.now()),this.finishProcessing()}convertToMPImage(n,A){const{data:w,width:d,height:m}=n,o=d*m;let E;if(w instanceof Uint8Array)if(w.length===3*o){const ee=new Uint8ClampedArray(4*o);for(let le=0;le<o;++le)ee[4*le]=w[3*le],ee[4*le+1]=w[3*le+1],ee[4*le+2]=w[3*le+2],ee[4*le+3]=255;E=new ImageData(ee,d,m)}else{if(w.length!==4*o)throw new Error("Unsupported channel count: "+w.length/o);E=new ImageData(new Uint8ClampedArray(w.buffer,w.byteOffset,w.length),d,m)}else{if(!(w instanceof WebGLTexture))throw new Error(`Unsupported format: ${w.constructor.name}`);E=w}const j=new image_1$1.MPImage([E],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,m);return A?j.clone():j}convertToMPMask(n,A){const{data:w,width:d,height:m}=n,o=d*m;let E;if(w instanceof Uint8Array||w instanceof Float32Array){if(w.length!==o)throw new Error("Unsupported channel count: "+w.length/o);E=w}else E=w;const j=new mask_1$1.MPMask([E],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,m);return A?j.clone():j}close(){this.shaderContext.close(),super.close()}}vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(xt,rt,We,st){st===void 0&&(st=We);var yt=Object.getOwnPropertyDescriptor(rt,We);yt&&!("get"in yt?!rt.__esModule:yt.writable||yt.configurable)||(yt={enumerable:!0,get:function(){return rt[We]}}),Object.defineProperty(xt,st,yt)}:function(xt,rt,We,st){st===void 0&&(st=We),xt[st]=rt[We]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(xt,rt){for(var We in xt)We==="default"||Object.prototype.hasOwnProperty.call(rt,We)||n(rt,xt,We)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceDetector=void 0;const w=calculator_pb,d=calculator_options_pb,m=detection_pb,o=base_options_pb,E=face_detector_graph_options_pb,j=detection_result,ee=vision_task_runner,le="image_in",q="norm_rect_in",pe="detections";A(face_detector_options,u),A(face_detector_result,u);class ue extends ee.VisionTaskRunner{static createFromOptions(rt,We){return ee.VisionTaskRunner.createVisionInstance(ue,rt,We)}static createFromModelBuffer(rt,We){return ee.VisionTaskRunner.createVisionInstance(ue,rt,{baseOptions:{modelAssetBuffer:We}})}static createFromModelPath(rt,We){return es(this,null,function*(){return ee.VisionTaskRunner.createVisionInstance(ue,rt,{baseOptions:{modelAssetPath:We}})})}constructor(rt,We){super(new ee.VisionGraphRunner(rt,We),le,q,!1),this.result={detections:[]},this.options=new E.FaceDetectorGraphOptions,this.options.setBaseOptions(new o.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(rt){this.options.setBaseOptions(rt)}setOptions(rt){var We,st;return"minDetectionConfidence"in rt&&this.options.setMinDetectionConfidence((We=rt.minDetectionConfidence)!==null&&We!==void 0?We:.5),"minSuppressionThreshold"in rt&&this.options.setMinSuppressionThreshold((st=rt.minSuppressionThreshold)!==null&&st!==void 0?st:.3),this.applyOptions(rt)}detect(rt,We){return this.result={detections:[]},this.processImageData(rt,We),this.result}detectForVideo(rt,We,st){return this.result={detections:[]},this.processVideoData(rt,st,We),this.result}addJsFaceDetections(rt){for(const We of rt){const st=m.Detection.deserializeBinary(We);this.result.detections.push((0,j.convertFromDetectionProto)(st))}}refreshGraph(){const rt=new w.CalculatorGraphConfig;rt.addInputStream(le),rt.addInputStream(q),rt.addOutputStream(pe);const We=new d.CalculatorOptions;We.setExtension(E.FaceDetectorGraphOptions.ext,this.options);const st=new w.CalculatorGraphConfig.Node;st.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),st.addInputStream("IMAGE:"+le),st.addInputStream("NORM_RECT:"+q),st.addOutputStream("DETECTIONS:"+pe),st.setOptions(We),rt.addNode(st),this.graphRunner.attachProtoVectorListener(pe,(St,_t)=>{this.addJsFaceDetections(St),this.setLatestOutputTimestamp(_t)}),this.graphRunner.attachEmptyPacketListener(pe,St=>{this.setLatestOutputTimestamp(St)});const yt=rt.serializeBinary();this.setGraph(new Uint8Array(yt),!0)}}u.FaceDetector=ue}(face_detector);var face_landmarker={},classification_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Classification",null,w),A.exportSymbol("proto.mediapipe.ClassificationList",null,w),A.exportSymbol("proto.mediapipe.ClassificationListCollection",null,w),proto.mediapipe.Classification=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Classification,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},A.inherits(proto.mediapipe.ClassificationList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.ClassificationListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(d){return proto.mediapipe.Classification.toObject(d,this)},proto.mediapipe.Classification.toObject=function(d,m){var o,E={index:(o=n.Message.getField(m,1))==null?void 0:o,score:(o=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:o,label:(o=n.Message.getField(m,3))==null?void 0:o,displayName:(o=n.Message.getField(m,4))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Classification.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(o,m)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readInt32();d.setIndex(o);break;case 2:o=m.readFloat(),d.setScore(o);break;case 3:o=m.readString(),d.setLabel(o);break;case 4:o=m.readString(),d.setDisplayName(o);break;default:m.skipField()}return d},proto.mediapipe.Classification.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeInt32(1,o),(o=n.Message.getField(d,2))!=null&&m.writeFloat(2,o),(o=n.Message.getField(d,3))!=null&&m.writeString(3,o),(o=n.Message.getField(d,4))!=null&&m.writeString(4,o)},proto.mediapipe.Classification.prototype.getIndex=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Classification.prototype.clearIndex=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Classification.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Classification.prototype.clearScore=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Classification.prototype.getLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Classification.prototype.clearLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Classification.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.ClassificationList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(d){return proto.mediapipe.ClassificationList.toObject(d,this)},proto.mediapipe.ClassificationList.toObject=function(d,m){var o={classificationList:n.Message.toObjectList(m.getClassificationList(),proto.mediapipe.Classification.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.ClassificationList.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(o,m)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.Classification;m.readMessage(o,proto.mediapipe.Classification.deserializeBinaryFromReader),d.addClassification(o)}else m.skipField();return d},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(d,m){var o;(o=d.getClassificationList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationList.prototype.addClassification=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Classification,m)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(d){return proto.mediapipe.ClassificationListCollection.toObject(d,this)},proto.mediapipe.ClassificationListCollection.toObject=function(d,m){var o={classificationListList:n.Message.toObjectList(m.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(o,m)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.ClassificationList;m.readMessage(o,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),d.addClassificationList(o)}else m.skipField();return d},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(d,m){var o;(o=d.getClassificationListList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.ClassificationList,m)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},A.object.extend(u,proto.mediapipe)})(classification_pb);var landmark_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Landmark",null,w),A.exportSymbol("proto.mediapipe.LandmarkList",null,w),A.exportSymbol("proto.mediapipe.LandmarkListCollection",null,w),A.exportSymbol("proto.mediapipe.NormalizedLandmark",null,w),A.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,w),A.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,w),proto.mediapipe.Landmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Landmark,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},A.inherits(proto.mediapipe.LandmarkList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.LandmarkListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.NormalizedLandmark,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},A.inherits(proto.mediapipe.NormalizedLandmarkList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.NormalizedLandmarkListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(d){return proto.mediapipe.Landmark.toObject(d,this)},proto.mediapipe.Landmark.toObject=function(d,m){var o,E={x:(o=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:o,y:(o=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:o,z:(o=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:o,visibility:(o=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:o,presence:(o=n.Message.getOptionalFloatingPointField(m,5))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Landmark.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(o,m)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readFloat();d.setX(o);break;case 2:o=m.readFloat(),d.setY(o);break;case 3:o=m.readFloat(),d.setZ(o);break;case 4:o=m.readFloat(),d.setVisibility(o);break;case 5:o=m.readFloat(),d.setPresence(o);break;default:m.skipField()}return d},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeFloat(1,o),(o=n.Message.getField(d,2))!=null&&m.writeFloat(2,o),(o=n.Message.getField(d,3))!=null&&m.writeFloat(3,o),(o=n.Message.getField(d,4))!=null&&m.writeFloat(4,o),(o=n.Message.getField(d,5))!=null&&m.writeFloat(5,o)},proto.mediapipe.Landmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Landmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Landmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Landmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Landmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Landmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Landmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Landmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.LandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(d){return proto.mediapipe.LandmarkList.toObject(d,this)},proto.mediapipe.LandmarkList.toObject=function(d,m){var o={landmarkList:n.Message.toObjectList(m.getLandmarkList(),proto.mediapipe.Landmark.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.LandmarkList.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(o,m)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.Landmark;m.readMessage(o,proto.mediapipe.Landmark.deserializeBinaryFromReader),d.addLandmark(o)}else m.skipField();return d},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(d,m){var o;(o=d.getLandmarkList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Landmark,m)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.LandmarkListCollection.toObject(d,this)},proto.mediapipe.LandmarkListCollection.toObject=function(d,m){var o={landmarkListList:n.Message.toObjectList(m.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(o,m)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.LandmarkList;m.readMessage(o,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),d.addLandmarkList(o)}else m.skipField();return d},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(d,m){var o;(o=d.getLandmarkListList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.LandmarkList,m)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmark.toObject(d,this)},proto.mediapipe.NormalizedLandmark.toObject=function(d,m){var o,E={x:(o=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:o,y:(o=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:o,z:(o=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:o,visibility:(o=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:o,presence:(o=n.Message.getOptionalFloatingPointField(m,5))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(o,m)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readFloat();d.setX(o);break;case 2:o=m.readFloat(),d.setY(o);break;case 3:o=m.readFloat(),d.setZ(o);break;case 4:o=m.readFloat(),d.setVisibility(o);break;case 5:o=m.readFloat(),d.setPresence(o);break;default:m.skipField()}return d},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeFloat(1,o),(o=n.Message.getField(d,2))!=null&&m.writeFloat(2,o),(o=n.Message.getField(d,3))!=null&&m.writeFloat(3,o),(o=n.Message.getField(d,4))!=null&&m.writeFloat(4,o),(o=n.Message.getField(d,5))!=null&&m.writeFloat(5,o)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkList.toObject(d,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(d,m){var o={landmarkList:n.Message.toObjectList(m.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(o,m)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.NormalizedLandmark;m.readMessage(o,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),d.addLandmark(o)}else m.skipField();return d},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(d,m){var o;(o=d.getLandmarkList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmark,m)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(d,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(d,m){var o={landmarkListList:n.Message.toObjectList(m.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,d)};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(o,m)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=new proto.mediapipe.NormalizedLandmarkList;m.readMessage(o,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),d.addLandmarkList(o)}else m.skipField();return d},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(d,m){var o;(o=d.getLandmarkListList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmarkList,m)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},A.object.extend(u,proto.mediapipe)})(landmark_pb);var face_geometry_pb={},matrix_data_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.MatrixData",null,w),A.exportSymbol("proto.mediapipe.MatrixData.Layout",null,w),proto.mediapipe.MatrixData=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},A.inherits(proto.mediapipe.MatrixData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(d){return proto.mediapipe.MatrixData.toObject(d,this)},proto.mediapipe.MatrixData.toObject=function(d,m){var o,E={rows:(o=n.Message.getField(m,1))==null?void 0:o,cols:(o=n.Message.getField(m,2))==null?void 0:o,packedDataList:(o=n.Message.getRepeatedFloatingPointField(m,3))==null?void 0:o,layout:n.Message.getFieldWithDefault(m,4,0)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.MatrixData.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(o,m)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readInt32();d.setRows(o);break;case 2:o=m.readInt32(),d.setCols(o);break;case 3:for(var E=m.isDelimited()?m.readPackedFloat():[m.readFloat()],j=0;j<E.length;j++)d.addPackedData(E[j]);break;case 4:o=m.readEnum(),d.setLayout(o);break;default:m.skipField()}return d},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeInt32(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt32(2,o),(o=d.getPackedDataList()).length>0&&m.writePackedFloat(3,o),(o=n.Message.getField(d,4))!=null&&m.writeEnum(4,o)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.MatrixData.prototype.getCols=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(matrix_data_pb);var mesh_3d_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,w),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(d,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(d,m){var o,E={vertexType:(o=n.Message.getField(m,1))==null?void 0:o,primitiveType:(o=n.Message.getField(m,2))==null?void 0:o,vertexBufferList:(o=n.Message.getRepeatedFloatingPointField(m,3))==null?void 0:o,indexBufferList:(o=n.Message.getRepeatedField(m,4))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readEnum();d.setVertexType(o);break;case 2:o=m.readEnum(),d.setPrimitiveType(o);break;case 3:for(var E=m.isDelimited()?m.readPackedFloat():[m.readFloat()],j=0;j<E.length;j++)d.addVertexBuffer(E[j]);break;case 4:for(E=m.isDelimited()?m.readPackedUint32():[m.readUint32()],j=0;j<E.length;j++)d.addIndexBuffer(E[j]);break;default:m.skipField()}return d},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeEnum(1,o),(o=n.Message.getField(d,2))!=null&&m.writeEnum(2,o),(o=d.getVertexBufferList()).length>0&&m.writeRepeatedFloat(3,o),(o=d.getIndexBufferList()).length>0&&m.writeRepeatedUint32(4,o)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(d,m){return n.Message.addToRepeatedField(this,4,d,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)})(mesh_3d_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=matrix_data_pb;A.object.extend(proto,d);var m=mesh_3d_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,w),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(o){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(o,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(o,E){var j,ee={mesh:(j=E.getMesh())&&m.Mesh3d.toObject(o,j),poseTransformMatrix:(j=E.getPoseTransformMatrix())&&d.MatrixData.toObject(o,j)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(j,E)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var j=new m.Mesh3d;E.readMessage(j,m.Mesh3d.deserializeBinaryFromReader),o.setMesh(j);break;case 2:j=new d.MatrixData,E.readMessage(j,d.MatrixData.deserializeBinaryFromReader),o.setPoseTransformMatrix(j);break;default:E.skipField()}return o},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(o,E){var j=void 0;(j=o.getMesh())!=null&&E.writeMessage(1,j,m.Mesh3d.serializeBinaryToWriter),(j=o.getPoseTransformMatrix())!=null&&E.writeMessage(2,j,d.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return n.Message.getWrapperField(this,m.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(o){return n.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return n.Message.getWrapperField(this,d.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(o){return n.Message.setWrapperField(this,2,o)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=external_file_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,w),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(o){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(o,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(o,E){var j,ee={metadataFile:(j=E.getMetadataFile())&&m.ExternalFile.toObject(o,j)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(j,E)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var j=new m.ExternalFile;E.readMessage(j,m.ExternalFile.deserializeBinaryFromReader),o.setMetadataFile(j)}else E.skipField();return o},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(o,E){var j;(j=o.getMetadataFile())!=null&&E.writeMessage(1,j,m.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return n.Message.getWrapperField(this,m.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(o){return n.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry)})(geometry_pipeline_calculator_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=geometry_pipeline_calculator_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,w),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(o){n.Message.initialize(this,o,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(o){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(o,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(o,E){var j,ee={geometryPipelineOptions:(j=E.getGeometryPipelineOptions())&&m.FaceGeometryPipelineCalculatorOptions.toObject(o,j)};return o&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(o){var E=new n.BinaryReader(o),j=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(j,E)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(o,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var j=new m.FaceGeometryPipelineCalculatorOptions;E.readMessage(j,m.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),o.setGeometryPipelineOptions(j)}else E.skipField();return o},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var o=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(o,E){var j;(j=o.getGeometryPipelineOptions())!=null&&E.writeMessage(1,j,m.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return n.Message.getWrapperField(this,m.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(o){return n.Message.setWrapperField(this,1,o)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,w),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee)};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)if(j.getFieldNumber()===1){var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee)}else j.skipField();return E},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(E,j){var ee;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)})(face_blendshapes_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=face_blendshapes_graph_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(j,ee){var le,q={baseOptions:(le=ee.getBaseOptions())&&o.BaseOptions.toObject(j,le),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(ee,2,.5),smoothLandmarks:(le=n.Message.getBooleanField(ee,4))==null?void 0:le,faceBlendshapesGraphOptions:(le=ee.getFaceBlendshapesGraphOptions())&&E.FaceBlendshapesGraphOptions.toObject(j,le)};return j&&(q.$jspbMessageInstance=ee),q}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(j){var ee=new n.BinaryReader(j),le=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(le,ee)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(j,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var le=new o.BaseOptions;ee.readMessage(le,o.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(le);break;case 2:le=ee.readFloat(),j.setMinDetectionConfidence(le);break;case 4:le=ee.readBool(),j.setSmoothLandmarks(le);break;case 3:le=new E.FaceBlendshapesGraphOptions,ee.readMessage(le,E.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),j.setFaceBlendshapesGraphOptions(le);break;default:ee.skipField()}return j},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(j,ee){var le=void 0;(le=j.getBaseOptions())!=null&&ee.writeMessage(1,le,o.BaseOptions.serializeBinaryToWriter),(le=n.Message.getField(j,2))!=null&&ee.writeFloat(2,le),(le=n.Message.getField(j,4))!=null&&ee.writeBool(4,le),(le=j.getFaceBlendshapesGraphOptions())!=null&&ee.writeMessage(3,le,E.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(j){return n.Message.setField(this,2,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(j){return n.Message.setField(this,4,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(j){return n.Message.setWrapperField(this,3,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=face_detector_graph_options_pb;A.object.extend(proto,E);var j=face_geometry_graph_options_pb;A.object.extend(proto,j);var ee=face_landmarks_detector_graph_options_pb;A.object.extend(proto,ee),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,w),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(le){n.Message.initialize(this,le,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(le){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(le,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(le,q){var pe,ue={baseOptions:(pe=q.getBaseOptions())&&o.BaseOptions.toObject(le,pe),faceDetectorGraphOptions:(pe=q.getFaceDetectorGraphOptions())&&E.FaceDetectorGraphOptions.toObject(le,pe),faceLandmarksDetectorGraphOptions:(pe=q.getFaceLandmarksDetectorGraphOptions())&&ee.FaceLandmarksDetectorGraphOptions.toObject(le,pe),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(q,4,.5),faceGeometryGraphOptions:(pe=q.getFaceGeometryGraphOptions())&&j.FaceGeometryGraphOptions.toObject(le,pe)};return le&&(ue.$jspbMessageInstance=q),ue}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(le){var q=new n.BinaryReader(le),pe=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(pe,q)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(le,q){for(;q.nextField()&&!q.isEndGroup();)switch(q.getFieldNumber()){case 1:var pe=new o.BaseOptions;q.readMessage(pe,o.BaseOptions.deserializeBinaryFromReader),le.setBaseOptions(pe);break;case 2:pe=new E.FaceDetectorGraphOptions,q.readMessage(pe,E.FaceDetectorGraphOptions.deserializeBinaryFromReader),le.setFaceDetectorGraphOptions(pe);break;case 3:pe=new ee.FaceLandmarksDetectorGraphOptions,q.readMessage(pe,ee.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),le.setFaceLandmarksDetectorGraphOptions(pe);break;case 4:pe=q.readFloat(),le.setMinTrackingConfidence(pe);break;case 5:pe=new j.FaceGeometryGraphOptions,q.readMessage(pe,j.FaceGeometryGraphOptions.deserializeBinaryFromReader),le.setFaceGeometryGraphOptions(pe);break;default:q.skipField()}return le},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var le=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,le),le.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(le,q){var pe=void 0;(pe=le.getBaseOptions())!=null&&q.writeMessage(1,pe,o.BaseOptions.serializeBinaryToWriter),(pe=le.getFaceDetectorGraphOptions())!=null&&q.writeMessage(2,pe,E.FaceDetectorGraphOptions.serializeBinaryToWriter),(pe=le.getFaceLandmarksDetectorGraphOptions())!=null&&q.writeMessage(3,pe,ee.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),(pe=n.Message.getField(le,4))!=null&&q.writeFloat(4,pe),(pe=le.getFaceGeometryGraphOptions())!=null&&q.writeMessage(5,pe,j.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(le){return n.Message.setWrapperField(this,1,le)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(le){return n.Message.setWrapperField(this,2,le)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,ee.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(le){return n.Message.setWrapperField(this,3,le)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(le){return n.Message.setField(this,4,le)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return n.Message.getWrapperField(this,j.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(le){return n.Message.setWrapperField(this,5,le)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;const DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(u,n=DEFAULT_INDEX$1,A=""){return{categories:u.map(w=>{var d,m,o,E;return{index:(d=w.getIndex())!==null&&d!==void 0?d:DEFAULT_INDEX$1,score:(m=w.getScore())!==null&&m!==void 0?m:DEFAULT_SCORE,categoryName:(o=w.getLabel())!==null&&o!==void 0?o:"",displayName:(E=w.getDisplayName())!==null&&E!==void 0?E:""}}),headIndex:n,headName:A}}function convertFromClassificationsProto(u){var n,A;return convertFromClassifications((A=(n=u.getClassificationList())===null||n===void 0?void 0:n.getClassificationList())!==null&&A!==void 0?A:[],u.getHeadIndex(),u.getHeadName())}function convertFromClassificationResultProto(u){const n={classifications:u.getClassificationsList().map(A=>convertFromClassificationsProto(A))};return u.hasTimestampMs()&&(n.timestampMs=u.getTimestampMs()),n}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var landmark_result={};function convertToLandmarks(u){var n,A,w;const d=[];for(const m of u.getLandmarkList())d.push({x:(n=m.getX())!==null&&n!==void 0?n:0,y:(A=m.getY())!==null&&A!==void 0?A:0,z:(w=m.getZ())!==null&&w!==void 0?w:0});return d}function convertToWorldLandmarks(u){var n,A,w;const d=[];for(const m of u.getLandmarkList())d.push({x:(n=m.getX())!==null&&n!==void 0?n:0,y:(A=m.getY())!==null&&A!==void 0?A:0,z:(w=m.getZ())!==null&&w!==void 0?w:0});return d}Object.defineProperty(landmark_result,"__esModule",{value:!0}),landmark_result.convertToWorldLandmarks=landmark_result.convertToLandmarks=void 0,landmark_result.convertToLandmarks=convertToLandmarks,landmark_result.convertToWorldLandmarks=convertToWorldLandmarks;var face_landmarks_connections={},exports;exports=face_landmarks_connections,Object.defineProperty(exports,"__esModule",{value:!0}),exports.FACE_LANDMARKS_TESSELATION=exports.FACE_LANDMARKS_CONTOURS=exports.FACE_LANDMARKS_FACE_OVAL=exports.FACE_LANDMARKS_RIGHT_IRIS=exports.FACE_LANDMARKS_RIGHT_EYEBROW=exports.FACE_LANDMARKS_RIGHT_EYE=exports.FACE_LANDMARKS_LEFT_IRIS=exports.FACE_LANDMARKS_LEFT_EYEBROW=exports.FACE_LANDMARKS_LEFT_EYE=exports.FACE_LANDMARKS_LIPS=void 0,exports.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],exports.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],exports.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],exports.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],exports.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],exports.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],exports.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],exports.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],exports.FACE_LANDMARKS_CONTOURS=[...exports.FACE_LANDMARKS_LIPS,...exports.FACE_LANDMARKS_LEFT_EYE,...exports.FACE_LANDMARKS_LEFT_EYEBROW,...exports.FACE_LANDMARKS_RIGHT_EYE,...exports.FACE_LANDMARKS_RIGHT_EYEBROW,...exports.FACE_LANDMARKS_FACE_OVAL],exports.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(kt,Rt,Jt,Lt){Lt===void 0&&(Lt=Jt);var vn=Object.getOwnPropertyDescriptor(Rt,Jt);vn&&!("get"in vn?!Rt.__esModule:vn.writable||vn.configurable)||(vn={enumerable:!0,get:function(){return Rt[Jt]}}),Object.defineProperty(kt,Lt,vn)}:function(kt,Rt,Jt,Lt){Lt===void 0&&(Lt=Jt),kt[Lt]=Rt[Jt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(kt,Rt){for(var Jt in kt)Jt==="default"||Object.prototype.hasOwnProperty.call(Rt,Jt)||n(Rt,kt,Jt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceLandmarker=void 0;const w=calculator_pb,d=calculator_options_pb,m=classification_pb,o=landmark_pb,E=base_options_pb,j=face_detector_graph_options_pb,ee=face_geometry_pb,le=face_landmarker_graph_options_pb,q=face_landmarks_detector_graph_options_pb,pe=classifier_result,ue=landmark_result,xt=vision_task_runner,rt=face_landmarks_connections;A(face_landmarker_options,u),A(face_landmarker_result,u);const We="image_in",st="norm_rect",yt="face_landmarks",St="blendshapes",_t="face_geometry",pt=.5;class ft extends xt.VisionTaskRunner{static createFromOptions(Rt,Jt){return xt.VisionTaskRunner.createVisionInstance(ft,Rt,Jt)}static createFromModelBuffer(Rt,Jt){return xt.VisionTaskRunner.createVisionInstance(ft,Rt,{baseOptions:{modelAssetBuffer:Jt}})}static createFromModelPath(Rt,Jt){return xt.VisionTaskRunner.createVisionInstance(ft,Rt,{baseOptions:{modelAssetPath:Jt}})}constructor(Rt,Jt){super(new xt.VisionGraphRunner(Rt,Jt),We,st,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new le.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.faceLandmarksDetectorGraphOptions=new q.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new j.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Rt){this.options.setBaseOptions(Rt)}setOptions(Rt){var Jt,Lt,vn,nr;return"numFaces"in Rt&&this.faceDetectorGraphOptions.setNumFaces((Jt=Rt.numFaces)!==null&&Jt!==void 0?Jt:1),"minFaceDetectionConfidence"in Rt&&this.faceDetectorGraphOptions.setMinDetectionConfidence((Lt=Rt.minFaceDetectionConfidence)!==null&&Lt!==void 0?Lt:pt),"minTrackingConfidence"in Rt&&this.options.setMinTrackingConfidence((vn=Rt.minTrackingConfidence)!==null&&vn!==void 0?vn:pt),"minFacePresenceConfidence"in Rt&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence((nr=Rt.minFacePresenceConfidence)!==null&&nr!==void 0?nr:pt),"outputFaceBlendshapes"in Rt&&(this.outputFaceBlendshapes=!!Rt.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in Rt&&(this.outputFacialTransformationMatrixes=!!Rt.outputFacialTransformationMatrixes),this.applyOptions(Rt)}detect(Rt,Jt){return this.resetResults(),this.processImageData(Rt,Jt),this.result}detectForVideo(Rt,Jt,Lt){return this.resetResults(),this.processVideoData(Rt,Lt,Jt),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(pt),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(pt),this.options.setMinTrackingConfidence(pt)}addJsLandmarks(Rt){for(const Jt of Rt){const Lt=o.NormalizedLandmarkList.deserializeBinary(Jt);this.result.faceLandmarks.push((0,ue.convertToLandmarks)(Lt))}}addBlenshape(Rt){var Jt;if(this.outputFaceBlendshapes)for(const Lt of Rt){const vn=m.ClassificationList.deserializeBinary(Lt);this.result.faceBlendshapes.push((0,pe.convertFromClassifications)((Jt=vn.getClassificationList())!==null&&Jt!==void 0?Jt:[]))}}addFacialTransformationMatrixes(Rt){var Jt,Lt,vn;if(this.outputFacialTransformationMatrixes)for(const nr of Rt){const br=ee.FaceGeometry.deserializeBinary(nr).getPoseTransformMatrix();br&&this.result.facialTransformationMatrixes.push({rows:(Jt=br.getRows())!==null&&Jt!==void 0?Jt:0,columns:(Lt=br.getCols())!==null&&Lt!==void 0?Lt:0,data:(vn=br.getPackedDataList())!==null&&vn!==void 0?vn:[]})}}refreshGraph(){const Rt=new w.CalculatorGraphConfig;Rt.addInputStream(We),Rt.addInputStream(st),Rt.addOutputStream(yt);const Jt=new d.CalculatorOptions;Jt.setExtension(le.FaceLandmarkerGraphOptions.ext,this.options);const Lt=new w.CalculatorGraphConfig.Node;Lt.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Lt.addInputStream("IMAGE:"+We),Lt.addInputStream("NORM_RECT:"+st),Lt.addOutputStream("NORM_LANDMARKS:"+yt),Lt.setOptions(Jt),Rt.addNode(Lt),this.graphRunner.attachProtoVectorListener(yt,(nr,br)=>{this.addJsLandmarks(nr),this.setLatestOutputTimestamp(br)}),this.graphRunner.attachEmptyPacketListener(yt,nr=>{this.setLatestOutputTimestamp(nr)}),this.outputFaceBlendshapes&&(Rt.addOutputStream(St),Lt.addOutputStream("BLENDSHAPES:"+St),this.graphRunner.attachProtoVectorListener(St,(nr,br)=>{this.addBlenshape(nr),this.setLatestOutputTimestamp(br)}),this.graphRunner.attachEmptyPacketListener(St,nr=>{this.setLatestOutputTimestamp(nr)})),this.outputFacialTransformationMatrixes&&(Rt.addOutputStream(_t),Lt.addOutputStream("FACE_GEOMETRY:"+_t),this.graphRunner.attachProtoVectorListener(_t,(nr,br)=>{this.addFacialTransformationMatrixes(nr),this.setLatestOutputTimestamp(br)}),this.graphRunner.attachEmptyPacketListener(_t,nr=>{this.setLatestOutputTimestamp(nr)}));const vn=Rt.serializeBinary();this.setGraph(new Uint8Array(vn),!0)}}u.FaceLandmarker=ft,ft.FACE_LANDMARKS_LIPS=rt.FACE_LANDMARKS_LIPS,ft.FACE_LANDMARKS_LEFT_EYE=rt.FACE_LANDMARKS_LEFT_EYE,ft.FACE_LANDMARKS_LEFT_EYEBROW=rt.FACE_LANDMARKS_LEFT_EYEBROW,ft.FACE_LANDMARKS_LEFT_IRIS=rt.FACE_LANDMARKS_LEFT_IRIS,ft.FACE_LANDMARKS_RIGHT_EYE=rt.FACE_LANDMARKS_RIGHT_EYE,ft.FACE_LANDMARKS_RIGHT_EYEBROW=rt.FACE_LANDMARKS_RIGHT_EYEBROW,ft.FACE_LANDMARKS_RIGHT_IRIS=rt.FACE_LANDMARKS_RIGHT_IRIS,ft.FACE_LANDMARKS_FACE_OVAL=rt.FACE_LANDMARKS_FACE_OVAL,ft.FACE_LANDMARKS_CONTOURS=rt.FACE_LANDMARKS_CONTOURS,ft.FACE_LANDMARKS_TESSELATION=rt.FACE_LANDMARKS_TESSELATION}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=face_landmarker_graph_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,w),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(j,ee){var le,q={baseOptions:(le=ee.getBaseOptions())&&o.BaseOptions.toObject(j,le),faceLandmarkerGraphOptions:(le=ee.getFaceLandmarkerGraphOptions())&&E.FaceLandmarkerGraphOptions.toObject(j,le),faceAlignmentSize:n.Message.getFieldWithDefault(ee,3,256)};return j&&(q.$jspbMessageInstance=ee),q}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(j){var ee=new n.BinaryReader(j),le=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(le,ee)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(j,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var le=new o.BaseOptions;ee.readMessage(le,o.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(le);break;case 2:le=new E.FaceLandmarkerGraphOptions,ee.readMessage(le,E.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),j.setFaceLandmarkerGraphOptions(le);break;case 3:le=ee.readInt32(),j.setFaceAlignmentSize(le);break;default:ee.skipField()}return j},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(j,ee){var le=void 0;(le=j.getBaseOptions())!=null&&ee.writeMessage(1,le,o.BaseOptions.serializeBinaryToWriter),(le=j.getFaceLandmarkerGraphOptions())!=null&&ee.writeMessage(2,le,E.FaceLandmarkerGraphOptions.serializeBinaryToWriter),(le=n.Message.getField(j,3))!=null&&ee.writeInt32(3,le)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return n.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(j){return n.Message.setField(this,3,j)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_stylizer.proto)})(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(pe,ue,xt,rt){rt===void 0&&(rt=xt);var We=Object.getOwnPropertyDescriptor(ue,xt);We&&!("get"in We?!ue.__esModule:We.writable||We.configurable)||(We={enumerable:!0,get:function(){return ue[xt]}}),Object.defineProperty(pe,rt,We)}:function(pe,ue,xt,rt){rt===void 0&&(rt=xt),pe[rt]=ue[xt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(pe,ue){for(var xt in pe)xt==="default"||Object.prototype.hasOwnProperty.call(ue,xt)||n(ue,pe,xt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceStylizer=void 0;const w=calculator_pb,d=calculator_options_pb,m=base_options_pb,o=face_stylizer_graph_options_pb,E=vision_task_runner;A(face_stylizer_options,u);const j="image_in",ee="norm_rect",le="stylized_image";class q extends E.VisionTaskRunner{static createFromOptions(ue,xt){return E.VisionTaskRunner.createVisionInstance(q,ue,xt)}static createFromModelBuffer(ue,xt){return E.VisionTaskRunner.createVisionInstance(q,ue,{baseOptions:{modelAssetBuffer:xt}})}static createFromModelPath(ue,xt){return E.VisionTaskRunner.createVisionInstance(q,ue,{baseOptions:{modelAssetPath:xt}})}constructor(ue,xt){super(new E.VisionGraphRunner(ue,xt),j,ee,!0),this.options=new o.FaceStylizerGraphOptions,this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ue){this.options.setBaseOptions(ue)}setOptions(ue){return super.applyOptions(ue)}stylize(ue,xt,rt){const We=typeof xt!="function"?xt:{};if(this.userCallback=typeof xt=="function"?xt:rt,this.processImageData(ue,We!=null?We:{}),!this.userCallback)return this.result}stylizeForVideo(ue,xt,rt,We){const st=typeof rt!="function"?rt:{};if(this.userCallback=typeof rt=="function"?rt:We,this.processVideoData(ue,st,xt),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){const ue=new w.CalculatorGraphConfig;ue.addInputStream(j),ue.addInputStream(ee),ue.addOutputStream(le);const xt=new d.CalculatorOptions;xt.setExtension(o.FaceStylizerGraphOptions.ext,this.options);const rt=new w.CalculatorGraphConfig.Node;rt.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),rt.addInputStream("IMAGE:"+j),rt.addInputStream("NORM_RECT:"+ee),rt.addOutputStream("STYLIZED_IMAGE:"+le),rt.setOptions(xt),ue.addNode(rt),this.graphRunner.attachImageListener(le,(st,yt)=>{const St=this.convertToMPImage(st,!this.userCallback);this.result=St,this.userCallback&&this.userCallback(St),this.setLatestOutputTimestamp(yt)}),this.graphRunner.attachEmptyPacketListener(le,st=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(st)});const We=ue.serializeBinary();this.setGraph(new Uint8Array(We),!0)}}u.FaceStylizer=q}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,w),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(d,m){var o,E={displayNamesLocale:n.Message.getFieldWithDefault(m,1,"en"),maxResults:n.Message.getFieldWithDefault(m,2,-1),scoreThreshold:(o=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:o,categoryAllowlistList:(o=n.Message.getRepeatedField(m,4))==null?void 0:o,categoryDenylistList:(o=n.Message.getRepeatedField(m,5))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readString();d.setDisplayNamesLocale(o);break;case 2:o=m.readInt32(),d.setMaxResults(o);break;case 3:o=m.readFloat(),d.setScoreThreshold(o);break;case 4:o=m.readString(),d.addCategoryAllowlist(o);break;case 5:o=m.readString(),d.addCategoryDenylist(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeString(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt32(2,o),(o=n.Message.getField(d,3))!=null&&m.writeFloat(3,o),(o=d.getCategoryAllowlistList()).length>0&&m.writeRepeatedString(4,o),(o=d.getCategoryDenylistList()).length>0&&m.writeRepeatedString(5,o)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(d,m){return n.Message.addToRepeatedField(this,4,d,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(d){return n.Message.setField(this,5,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(d,m){return n.Message.addToRepeatedField(this,5,d,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},A.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(classifier_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=classifier_options_pb;A.object.extend(proto,o);var E=base_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(j,ee){var le,q={baseOptions:(le=ee.getBaseOptions())&&E.BaseOptions.toObject(j,le),classifierOptions:(le=ee.getClassifierOptions())&&o.ClassifierOptions.toObject(j,le)};return j&&(q.$jspbMessageInstance=ee),q}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(j){var ee=new n.BinaryReader(j),le=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(le,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(j,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var le=new E.BaseOptions;ee.readMessage(le,E.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(le);break;case 2:le=new o.ClassifierOptions,ee.readMessage(le,o.ClassifierOptions.deserializeBinaryFromReader),j.setClassifierOptions(le);break;default:ee.skipField()}return j},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(j,ee){var le=void 0;(le=j.getBaseOptions())!=null&&ee.writeMessage(1,le,E.BaseOptions.serializeBinaryToWriter),(le=j.getClassifierOptions())!=null&&ee.writeMessage(2,le,o.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,o.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee)};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)if(j.getFieldNumber()===1){var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee)}else j.skipField();return E},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(E,j){var ee;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(gesture_embedder_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=gesture_classifier_graph_options_pb;A.object.extend(proto,E);var j=gesture_embedder_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(ee,le){var q,pe={baseOptions:(q=le.getBaseOptions())&&o.BaseOptions.toObject(ee,q),gestureEmbedderGraphOptions:(q=le.getGestureEmbedderGraphOptions())&&j.GestureEmbedderGraphOptions.toObject(ee,q),cannedGestureClassifierGraphOptions:(q=le.getCannedGestureClassifierGraphOptions())&&E.GestureClassifierGraphOptions.toObject(ee,q),customGestureClassifierGraphOptions:(q=le.getCustomGestureClassifierGraphOptions())&&E.GestureClassifierGraphOptions.toObject(ee,q)};return ee&&(pe.$jspbMessageInstance=le),pe}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(ee){var le=new n.BinaryReader(ee),q=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(q,le)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(ee,le){for(;le.nextField()&&!le.isEndGroup();)switch(le.getFieldNumber()){case 1:var q=new o.BaseOptions;le.readMessage(q,o.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(q);break;case 2:q=new j.GestureEmbedderGraphOptions,le.readMessage(q,j.GestureEmbedderGraphOptions.deserializeBinaryFromReader),ee.setGestureEmbedderGraphOptions(q);break;case 3:q=new E.GestureClassifierGraphOptions,le.readMessage(q,E.GestureClassifierGraphOptions.deserializeBinaryFromReader),ee.setCannedGestureClassifierGraphOptions(q);break;case 4:q=new E.GestureClassifierGraphOptions,le.readMessage(q,E.GestureClassifierGraphOptions.deserializeBinaryFromReader),ee.setCustomGestureClassifierGraphOptions(q);break;default:le.skipField()}return ee},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(ee,le){var q=void 0;(q=ee.getBaseOptions())!=null&&le.writeMessage(1,q,o.BaseOptions.serializeBinaryToWriter),(q=ee.getGestureEmbedderGraphOptions())!=null&&le.writeMessage(2,q,j.GestureEmbedderGraphOptions.serializeBinaryToWriter),(q=ee.getCannedGestureClassifierGraphOptions())!=null&&le.writeMessage(3,q,E.GestureClassifierGraphOptions.serializeBinaryToWriter),(q=ee.getCustomGestureClassifierGraphOptions())!=null&&le.writeMessage(4,q,E.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return n.Message.getWrapperField(this,j.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,E.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,E.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(ee){return n.Message.setWrapperField(this,4,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5),numHands:(ee=n.Message.getField(j,3))==null?void 0:ee};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=j.readFloat(),E.setMinDetectionConfidence(ee);break;case 3:ee=j.readInt32(),E.setNumHands(ee);break;default:j.skipField()}return E},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&j.writeFloat(2,ee),(ee=n.Message.getField(E,3))!=null&&j.writeInt32(3,ee)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_detector.proto)})(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5)};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=j.readFloat(),E.setMinDetectionConfidence(ee);break;default:j.skipField()}return E},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&j.writeFloat(2,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(hand_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=hand_detector_graph_options_pb;A.object.extend(proto,E);var j=hand_landmarks_detector_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,w),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(ee,le){var q,pe={baseOptions:(q=le.getBaseOptions())&&o.BaseOptions.toObject(ee,q),handDetectorGraphOptions:(q=le.getHandDetectorGraphOptions())&&E.HandDetectorGraphOptions.toObject(ee,q),handLandmarksDetectorGraphOptions:(q=le.getHandLandmarksDetectorGraphOptions())&&j.HandLandmarksDetectorGraphOptions.toObject(ee,q),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(le,4,.5)};return ee&&(pe.$jspbMessageInstance=le),pe}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(ee){var le=new n.BinaryReader(ee),q=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(q,le)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(ee,le){for(;le.nextField()&&!le.isEndGroup();)switch(le.getFieldNumber()){case 1:var q=new o.BaseOptions;le.readMessage(q,o.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(q);break;case 2:q=new E.HandDetectorGraphOptions,le.readMessage(q,E.HandDetectorGraphOptions.deserializeBinaryFromReader),ee.setHandDetectorGraphOptions(q);break;case 3:q=new j.HandLandmarksDetectorGraphOptions,le.readMessage(q,j.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),ee.setHandLandmarksDetectorGraphOptions(q);break;case 4:q=le.readFloat(),ee.setMinTrackingConfidence(q);break;default:le.skipField()}return ee},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(ee,le){var q=void 0;(q=ee.getBaseOptions())!=null&&le.writeMessage(1,q,o.BaseOptions.serializeBinaryToWriter),(q=ee.getHandDetectorGraphOptions())!=null&&le.writeMessage(2,q,E.HandDetectorGraphOptions.serializeBinaryToWriter),(q=ee.getHandLandmarksDetectorGraphOptions())!=null&&le.writeMessage(3,q,j.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),(q=n.Message.getField(ee,4))!=null&&le.writeFloat(4,q)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,j.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(ee){return n.Message.setField(this,4,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=hand_gesture_recognizer_graph_options_pb;A.object.extend(proto,E);var j=hand_landmarker_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(ee,le){var q,pe={baseOptions:(q=le.getBaseOptions())&&o.BaseOptions.toObject(ee,q),handLandmarkerGraphOptions:(q=le.getHandLandmarkerGraphOptions())&&j.HandLandmarkerGraphOptions.toObject(ee,q),handGestureRecognizerGraphOptions:(q=le.getHandGestureRecognizerGraphOptions())&&E.HandGestureRecognizerGraphOptions.toObject(ee,q)};return ee&&(pe.$jspbMessageInstance=le),pe}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(ee){var le=new n.BinaryReader(ee),q=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(q,le)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(ee,le){for(;le.nextField()&&!le.isEndGroup();)switch(le.getFieldNumber()){case 1:var q=new o.BaseOptions;le.readMessage(q,o.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(q);break;case 2:q=new j.HandLandmarkerGraphOptions,le.readMessage(q,j.HandLandmarkerGraphOptions.deserializeBinaryFromReader),ee.setHandLandmarkerGraphOptions(q);break;case 3:q=new E.HandGestureRecognizerGraphOptions,le.readMessage(q,E.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),ee.setHandGestureRecognizerGraphOptions(q);break;default:le.skipField()}return ee},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(ee,le){var q=void 0;(q=ee.getBaseOptions())!=null&&le.writeMessage(1,q,o.BaseOptions.serializeBinaryToWriter),(q=ee.getHandLandmarkerGraphOptions())!=null&&le.writeMessage(2,q,j.HandLandmarkerGraphOptions.serializeBinaryToWriter),(q=ee.getHandGestureRecognizerGraphOptions())!=null&&le.writeMessage(3,q,E.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,j.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return n.Message.getWrapperField(this,E.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;const classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(u,n){const A=n?n.clone():new classifier_options_pb_1.ClassifierOptions;return u.displayNamesLocale!==void 0?A.setDisplayNamesLocale(u.displayNamesLocale):u.displayNamesLocale===void 0&&A.clearDisplayNamesLocale(),u.maxResults!==void 0?A.setMaxResults(u.maxResults):"maxResults"in u&&A.clearMaxResults(),u.scoreThreshold!==void 0?A.setScoreThreshold(u.scoreThreshold):"scoreThreshold"in u&&A.clearScoreThreshold(),u.categoryAllowlist!==void 0?A.setCategoryAllowlistList(u.categoryAllowlist):"categoryAllowlist"in u&&A.clearCategoryAllowlistList(),u.categoryDenylist!==void 0?A.setCategoryDenylistList(u.categoryDenylist):"categoryDenylist"in u&&A.clearCategoryDenylistList(),A}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Jt,Lt,vn,nr){nr===void 0&&(nr=vn);var br=Object.getOwnPropertyDescriptor(Lt,vn);br&&!("get"in br?!Lt.__esModule:br.writable||br.configurable)||(br={enumerable:!0,get:function(){return Lt[vn]}}),Object.defineProperty(Jt,nr,br)}:function(Jt,Lt,vn,nr){nr===void 0&&(nr=vn),Jt[nr]=Lt[vn]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Jt,Lt){for(var vn in Jt)vn==="default"||Object.prototype.hasOwnProperty.call(Lt,vn)||n(Lt,Jt,vn)};Object.defineProperty(u,"__esModule",{value:!0}),u.GestureRecognizer=void 0;const w=calculator_pb,d=calculator_options_pb,m=classification_pb,o=landmark_pb,E=base_options_pb,j=gesture_classifier_graph_options_pb,ee=gesture_recognizer_graph_options_pb,le=hand_gesture_recognizer_graph_options_pb,q=hand_detector_graph_options_pb,pe=hand_landmarker_graph_options_pb,ue=hand_landmarks_detector_graph_options_pb,xt=classifier_options,rt=vision_task_runner,We=hand_landmarks_connections;A(gesture_recognizer_options,u),A(gesture_recognizer_result,u);const st="image_in",yt="norm_rect",St="hand_gestures",_t="hand_landmarks",pt="world_hand_landmarks",ft="handedness",kt=.5;class Rt extends rt.VisionTaskRunner{static createFromOptions(Lt,vn){return rt.VisionTaskRunner.createVisionInstance(Rt,Lt,vn)}static createFromModelBuffer(Lt,vn){return rt.VisionTaskRunner.createVisionInstance(Rt,Lt,{baseOptions:{modelAssetBuffer:vn}})}static createFromModelPath(Lt,vn){return rt.VisionTaskRunner.createVisionInstance(Rt,Lt,{baseOptions:{modelAssetPath:vn}})}constructor(Lt,vn){super(new rt.VisionGraphRunner(Lt,vn),st,yt,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new ee.GestureRecognizerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.handLandmarkerGraphOptions=new pe.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new ue.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new q.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new le.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(kt),this.handLandmarkerGraphOptions.setMinTrackingConfidence(kt),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(kt)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Lt){this.options.setBaseOptions(Lt)}setOptions(Lt){var vn,nr,br,Rr,Dn,Di,Wi,ti;if(this.handDetectorGraphOptions.setNumHands((vn=Lt.numHands)!==null&&vn!==void 0?vn:1),"minHandDetectionConfidence"in Lt&&this.handDetectorGraphOptions.setMinDetectionConfidence((nr=Lt.minHandDetectionConfidence)!==null&&nr!==void 0?nr:kt),"minTrackingConfidence"in Lt&&this.handLandmarkerGraphOptions.setMinTrackingConfidence((br=Lt.minTrackingConfidence)!==null&&br!==void 0?br:kt),"minHandPresenceConfidence"in Lt&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((Rr=Lt.minHandPresenceConfidence)!==null&&Rr!==void 0?Rr:kt),Lt.cannedGesturesClassifierOptions){const vi=new j.GestureClassifierGraphOptions;vi.setClassifierOptions((0,xt.convertClassifierOptionsToProto)(Lt.cannedGesturesClassifierOptions,(Dn=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||Dn===void 0?void 0:Dn.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(vi)}else Lt.cannedGesturesClassifierOptions===void 0&&((Di=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||Di===void 0||Di.clearClassifierOptions());if(Lt.customGesturesClassifierOptions){const vi=new j.GestureClassifierGraphOptions;vi.setClassifierOptions((0,xt.convertClassifierOptionsToProto)(Lt.customGesturesClassifierOptions,(Wi=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||Wi===void 0?void 0:Wi.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(vi)}else Lt.customGesturesClassifierOptions===void 0&&((ti=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||ti===void 0||ti.clearClassifierOptions());return this.applyOptions(Lt)}recognize(Lt,vn){return this.resetResults(),this.processImageData(Lt,vn),this.processResults()}recognizeForVideo(Lt,vn,nr){return this.resetResults(),this.processVideoData(Lt,nr,vn),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return this.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(Lt,vn=!0){var nr,br,Rr;const Dn=[];for(const Di of Lt){const Wi=m.ClassificationList.deserializeBinary(Di),ti=[];for(const vi of Wi.getClassificationList()){const cs=vn&&vi.hasIndex()?vi.getIndex():-1;ti.push({score:(nr=vi.getScore())!==null&&nr!==void 0?nr:0,index:cs,categoryName:(br=vi.getLabel())!==null&&br!==void 0?br:"",displayName:(Rr=vi.getDisplayName())!==null&&Rr!==void 0?Rr:""})}Dn.push(ti)}return Dn}addJsLandmarks(Lt){var vn,nr,br;for(const Rr of Lt){const Dn=o.NormalizedLandmarkList.deserializeBinary(Rr),Di=[];for(const Wi of Dn.getLandmarkList())Di.push({x:(vn=Wi.getX())!==null&&vn!==void 0?vn:0,y:(nr=Wi.getY())!==null&&nr!==void 0?nr:0,z:(br=Wi.getZ())!==null&&br!==void 0?br:0});this.landmarks.push(Di)}}adddJsWorldLandmarks(Lt){var vn,nr,br;for(const Rr of Lt){const Dn=o.LandmarkList.deserializeBinary(Rr),Di=[];for(const Wi of Dn.getLandmarkList())Di.push({x:(vn=Wi.getX())!==null&&vn!==void 0?vn:0,y:(nr=Wi.getY())!==null&&nr!==void 0?nr:0,z:(br=Wi.getZ())!==null&&br!==void 0?br:0});this.worldLandmarks.push(Di)}}refreshGraph(){const Lt=new w.CalculatorGraphConfig;Lt.addInputStream(st),Lt.addInputStream(yt),Lt.addOutputStream(St),Lt.addOutputStream(_t),Lt.addOutputStream(pt),Lt.addOutputStream(ft);const vn=new d.CalculatorOptions;vn.setExtension(ee.GestureRecognizerGraphOptions.ext,this.options);const nr=new w.CalculatorGraphConfig.Node;nr.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),nr.addInputStream("IMAGE:"+st),nr.addInputStream("NORM_RECT:"+yt),nr.addOutputStream("HAND_GESTURES:"+St),nr.addOutputStream("LANDMARKS:"+_t),nr.addOutputStream("WORLD_LANDMARKS:"+pt),nr.addOutputStream("HANDEDNESS:"+ft),nr.setOptions(vn),Lt.addNode(nr),this.graphRunner.attachProtoVectorListener(_t,(Rr,Dn)=>{this.addJsLandmarks(Rr),this.setLatestOutputTimestamp(Dn)}),this.graphRunner.attachEmptyPacketListener(_t,Rr=>{this.setLatestOutputTimestamp(Rr)}),this.graphRunner.attachProtoVectorListener(pt,(Rr,Dn)=>{this.adddJsWorldLandmarks(Rr),this.setLatestOutputTimestamp(Dn)}),this.graphRunner.attachEmptyPacketListener(pt,Rr=>{this.setLatestOutputTimestamp(Rr)}),this.graphRunner.attachProtoVectorListener(St,(Rr,Dn)=>{this.gestures.push(...this.toJsCategories(Rr,!1)),this.setLatestOutputTimestamp(Dn)}),this.graphRunner.attachEmptyPacketListener(St,Rr=>{this.setLatestOutputTimestamp(Rr)}),this.graphRunner.attachProtoVectorListener(ft,(Rr,Dn)=>{this.handednesses.push(...this.toJsCategories(Rr)),this.setLatestOutputTimestamp(Dn)}),this.graphRunner.attachEmptyPacketListener(ft,Rr=>{this.setLatestOutputTimestamp(Rr)});const br=Lt.serializeBinary();this.setGraph(new Uint8Array(br),!0)}}u.GestureRecognizer=Rt,Rt.HAND_CONNECTIONS=We.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(pt,ft,kt,Rt){Rt===void 0&&(Rt=kt);var Jt=Object.getOwnPropertyDescriptor(ft,kt);Jt&&!("get"in Jt?!ft.__esModule:Jt.writable||Jt.configurable)||(Jt={enumerable:!0,get:function(){return ft[kt]}}),Object.defineProperty(pt,Rt,Jt)}:function(pt,ft,kt,Rt){Rt===void 0&&(Rt=kt),pt[Rt]=ft[kt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(pt,ft){for(var kt in pt)kt==="default"||Object.prototype.hasOwnProperty.call(ft,kt)||n(ft,pt,kt)};Object.defineProperty(u,"__esModule",{value:!0}),u.HandLandmarker=void 0;const w=calculator_pb,d=calculator_options_pb,m=classification_pb,o=landmark_pb,E=base_options_pb,j=hand_detector_graph_options_pb,ee=hand_landmarker_graph_options_pb,le=hand_landmarks_detector_graph_options_pb,q=landmark_result,pe=vision_task_runner,ue=hand_landmarks_connections;A(hand_landmarker_options,u),A(hand_landmarker_result,u);const xt="image_in",rt="norm_rect",We="hand_landmarks",st="world_hand_landmarks",yt="handedness",St=.5;class _t extends pe.VisionTaskRunner{static createFromOptions(ft,kt){return pe.VisionTaskRunner.createVisionInstance(_t,ft,kt)}static createFromModelBuffer(ft,kt){return pe.VisionTaskRunner.createVisionInstance(_t,ft,{baseOptions:{modelAssetBuffer:kt}})}static createFromModelPath(ft,kt){return pe.VisionTaskRunner.createVisionInstance(_t,ft,{baseOptions:{modelAssetPath:kt}})}constructor(ft,kt){super(new pe.VisionGraphRunner(ft,kt),xt,rt,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new ee.HandLandmarkerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.handLandmarksDetectorGraphOptions=new le.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new j.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ft){this.options.setBaseOptions(ft)}setOptions(ft){var kt,Rt,Jt,Lt;return"numHands"in ft&&this.handDetectorGraphOptions.setNumHands((kt=ft.numHands)!==null&&kt!==void 0?kt:1),"minHandDetectionConfidence"in ft&&this.handDetectorGraphOptions.setMinDetectionConfidence((Rt=ft.minHandDetectionConfidence)!==null&&Rt!==void 0?Rt:St),"minTrackingConfidence"in ft&&this.options.setMinTrackingConfidence((Jt=ft.minTrackingConfidence)!==null&&Jt!==void 0?Jt:St),"minHandPresenceConfidence"in ft&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((Lt=ft.minHandPresenceConfidence)!==null&&Lt!==void 0?Lt:St),this.applyOptions(ft)}detect(ft,kt){return this.resetResults(),this.processImageData(ft,kt),this.processResults()}detectForVideo(ft,kt,Rt){return this.resetResults(),this.processVideoData(ft,Rt,kt),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(St),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(St),this.options.setMinTrackingConfidence(St)}toJsCategories(ft){var kt,Rt,Jt,Lt;const vn=[];for(const nr of ft){const br=m.ClassificationList.deserializeBinary(nr),Rr=[];for(const Dn of br.getClassificationList())Rr.push({score:(kt=Dn.getScore())!==null&&kt!==void 0?kt:0,index:(Rt=Dn.getIndex())!==null&&Rt!==void 0?Rt:-1,categoryName:(Jt=Dn.getLabel())!==null&&Jt!==void 0?Jt:"",displayName:(Lt=Dn.getDisplayName())!==null&&Lt!==void 0?Lt:""});vn.push(Rr)}return vn}addJsLandmarks(ft){for(const kt of ft){const Rt=o.NormalizedLandmarkList.deserializeBinary(kt);this.landmarks.push((0,q.convertToLandmarks)(Rt))}}adddJsWorldLandmarks(ft){for(const kt of ft){const Rt=o.LandmarkList.deserializeBinary(kt);this.worldLandmarks.push((0,q.convertToWorldLandmarks)(Rt))}}refreshGraph(){const ft=new w.CalculatorGraphConfig;ft.addInputStream(xt),ft.addInputStream(rt),ft.addOutputStream(We),ft.addOutputStream(st),ft.addOutputStream(yt);const kt=new d.CalculatorOptions;kt.setExtension(ee.HandLandmarkerGraphOptions.ext,this.options);const Rt=new w.CalculatorGraphConfig.Node;Rt.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Rt.addInputStream("IMAGE:"+xt),Rt.addInputStream("NORM_RECT:"+rt),Rt.addOutputStream("LANDMARKS:"+We),Rt.addOutputStream("WORLD_LANDMARKS:"+st),Rt.addOutputStream("HANDEDNESS:"+yt),Rt.setOptions(kt),ft.addNode(Rt),this.graphRunner.attachProtoVectorListener(We,(Lt,vn)=>{this.addJsLandmarks(Lt),this.setLatestOutputTimestamp(vn)}),this.graphRunner.attachEmptyPacketListener(We,Lt=>{this.setLatestOutputTimestamp(Lt)}),this.graphRunner.attachProtoVectorListener(st,(Lt,vn)=>{this.adddJsWorldLandmarks(Lt),this.setLatestOutputTimestamp(vn)}),this.graphRunner.attachEmptyPacketListener(st,Lt=>{this.setLatestOutputTimestamp(Lt)}),this.graphRunner.attachProtoVectorListener(yt,(Lt,vn)=>{this.handednesses.push(...this.toJsCategories(Lt)),this.setLatestOutputTimestamp(vn)}),this.graphRunner.attachEmptyPacketListener(yt,Lt=>{this.setLatestOutputTimestamp(Lt)});const Jt=ft.serializeBinary();this.setGraph(new Uint8Array(Jt),!0)}}u.HandLandmarker=_t,_t.HAND_CONNECTIONS=ue.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=classification_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,w),proto.mediapipe.tasks.components.containers.proto.Classifications=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(m){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(m,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(m,o){var E,j={classificationList:(E=o.getClassificationList())&&d.ClassificationList.toObject(m,E),headIndex:(E=n.Message.getField(o,2))==null?void 0:E,headName:(E=n.Message.getField(o,3))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(E,o)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 4:var E=new d.ClassificationList;o.readMessage(E,d.ClassificationList.deserializeBinaryFromReader),m.setClassificationList(E);break;case 2:E=o.readInt32(),m.setHeadIndex(E);break;case 3:E=o.readString(),m.setHeadName(E);break;default:o.skipField()}return m},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getClassificationList())!=null&&o.writeMessage(4,E,d.ClassificationList.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&o.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&o.writeString(3,E)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return n.Message.getWrapperField(this,d.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(m){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(m,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(m,o){var E,j={classificationsList:n.Message.toObjectList(o.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,m),timestampMs:(E=n.Message.getField(o,2))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(E,o)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.tasks.components.containers.proto.Classifications;o.readMessage(E,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),m.addClassifications(E);break;case 2:E=o.readInt64(),m.setTimestampMs(E);break;default:o.skipField()}return m},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getClassificationsList()).length>0&&o.writeRepeatedMessage(1,E,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&o.writeInt64(2,E)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(m,o){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.tasks.components.containers.proto.Classifications,o)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(classifications_pb);var image_classifier_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=classifier_options_pb;A.object.extend(proto,o);var E=base_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,w),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(j,ee){var le,q={baseOptions:(le=ee.getBaseOptions())&&E.BaseOptions.toObject(j,le),classifierOptions:(le=ee.getClassifierOptions())&&o.ClassifierOptions.toObject(j,le)};return j&&(q.$jspbMessageInstance=ee),q}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(j){var ee=new n.BinaryReader(j),le=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(le,ee)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(j,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var le=new E.BaseOptions;ee.readMessage(le,E.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(le);break;case 2:le=new o.ClassifierOptions,ee.readMessage(le,o.ClassifierOptions.deserializeBinaryFromReader),j.setClassifierOptions(le);break;default:ee.skipField()}return j},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(j,ee){var le=void 0;(le=j.getBaseOptions())!=null&&ee.writeMessage(1,le,E.BaseOptions.serializeBinaryToWriter),(le=j.getClassifierOptions())!=null&&ee.writeMessage(2,le,o.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,o.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_classifier.proto)})(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(rt,We,st,yt){yt===void 0&&(yt=st);var St=Object.getOwnPropertyDescriptor(We,st);St&&!("get"in St?!We.__esModule:St.writable||St.configurable)||(St={enumerable:!0,get:function(){return We[st]}}),Object.defineProperty(rt,yt,St)}:function(rt,We,st,yt){yt===void 0&&(yt=st),rt[yt]=We[st]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(rt,We){for(var st in rt)st==="default"||Object.prototype.hasOwnProperty.call(We,st)||n(We,rt,st)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageClassifier=void 0;const w=calculator_pb,d=calculator_options_pb,m=classifications_pb,o=base_options_pb,E=image_classifier_graph_options_pb,j=classifier_options,ee=classifier_result,le=vision_task_runner,q="input_image",pe="norm_rect",ue="classifications";A(image_classifier_options,u),A(image_classifier_result,u);class xt extends le.VisionTaskRunner{static createFromOptions(We,st){return le.VisionTaskRunner.createVisionInstance(xt,We,st)}static createFromModelBuffer(We,st){return le.VisionTaskRunner.createVisionInstance(xt,We,{baseOptions:{modelAssetBuffer:st}})}static createFromModelPath(We,st){return le.VisionTaskRunner.createVisionInstance(xt,We,{baseOptions:{modelAssetPath:st}})}constructor(We,st){super(new le.VisionGraphRunner(We,st),q,pe,!0),this.classificationResult={classifications:[]},this.options=new E.ImageClassifierGraphOptions,this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(We){this.options.setBaseOptions(We)}setOptions(We){return this.options.setClassifierOptions((0,j.convertClassifierOptionsToProto)(We,this.options.getClassifierOptions())),this.applyOptions(We)}classify(We,st){return this.classificationResult={classifications:[]},this.processImageData(We,st),this.classificationResult}classifyForVideo(We,st,yt){return this.classificationResult={classifications:[]},this.processVideoData(We,yt,st),this.classificationResult}refreshGraph(){const We=new w.CalculatorGraphConfig;We.addInputStream(q),We.addInputStream(pe),We.addOutputStream(ue);const st=new d.CalculatorOptions;st.setExtension(E.ImageClassifierGraphOptions.ext,this.options);const yt=new w.CalculatorGraphConfig.Node;yt.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),yt.addInputStream("IMAGE:"+q),yt.addInputStream("NORM_RECT:"+pe),yt.addOutputStream("CLASSIFICATIONS:"+ue),yt.setOptions(st),We.addNode(yt),this.graphRunner.attachProtoListener(ue,(_t,pt)=>{this.classificationResult=(0,ee.convertFromClassificationResultProto)(m.ClassificationResult.deserializeBinary(_t)),this.setLatestOutputTimestamp(pt)}),this.graphRunner.attachEmptyPacketListener(ue,_t=>{this.setLatestOutputTimestamp(_t)});const St=We.serializeBinary();this.setGraph(new Uint8Array(St),!0)}}u.ImageClassifier=xt}(image_classifier);var image_embedder={},embeddings_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,w),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(d){n.Message.initialize(this,d,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},A.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(d,m){var o,E={valuesList:(o=n.Message.getRepeatedFloatingPointField(m,1))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1)for(var o=m.isDelimited()?m.readPackedFloat():[m.readFloat()],E=0;E<o.length;E++)d.addValues(o[E]);else m.skipField();return d},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(d,m){var o;(o=d.getValuesList()).length>0&&m.writePackedFloat(1,o)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return n.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(d){return n.Message.setField(this,1,d||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(d,m){return n.Message.addToRepeatedField(this,1,d,m)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(d,m){var o={values:m.getValues_asB64()};return d&&(o.$jspbMessageInstance=m),o}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=m.readBytes();d.setValues(o)}else m.skipField();return d},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(d,m){var o;(o=n.Message.getField(d,1))!=null&&m.writeBytes(1,o)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return n.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return n.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(d,m){var o,E={floatEmbedding:(o=m.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,o),quantizedEmbedding:(o=m.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,o),headIndex:(o=n.Message.getField(m,3))==null?void 0:o,headName:(o=n.Message.getField(m,4))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;m.readMessage(o,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),d.setFloatEmbedding(o);break;case 2:o=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,m.readMessage(o,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),d.setQuantizedEmbedding(o);break;case 3:o=m.readInt32(),d.setHeadIndex(o);break;case 4:o=m.readString(),d.setHeadName(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(d,m){var o=void 0;(o=d.getFloatEmbedding())!=null&&m.writeMessage(1,o,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),(o=d.getQuantizedEmbedding())!=null&&m.writeMessage(2,o,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),(o=n.Message.getField(d,3))!=null&&m.writeInt32(3,o),(o=n.Message.getField(d,4))!=null&&m.writeString(4,o)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(d){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(d){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(d,m){var o,E={embeddingsList:n.Message.toObjectList(m.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,d),timestampMs:(o=n.Message.getField(m,2))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=new proto.mediapipe.tasks.components.containers.proto.Embedding;m.readMessage(o,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),d.addEmbeddings(o);break;case 2:o=m.readInt64(),d.setTimestampMs(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(d,m){var o=void 0;(o=d.getEmbeddingsList()).length>0&&m.writeRepeatedMessage(1,o,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),(o=n.Message.getField(d,2))!=null&&m.writeInt64(2,o)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.tasks.components.containers.proto.Embedding,m)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,w),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(d,m){var o,E={l2Normalize:(o=n.Message.getBooleanField(m,1))==null?void 0:o,quantize:(o=n.Message.getBooleanField(m,2))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readBool();d.setL2Normalize(o);break;case 2:o=m.readBool(),d.setQuantize(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeBool(1,o),(o=n.Message.getField(d,2))!=null&&m.writeBool(2,o)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(embedder_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=embedder_options_pb;A.object.extend(proto,o);var E=base_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,w),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(j,ee){var le,q={baseOptions:(le=ee.getBaseOptions())&&E.BaseOptions.toObject(j,le),embedderOptions:(le=ee.getEmbedderOptions())&&o.EmbedderOptions.toObject(j,le)};return j&&(q.$jspbMessageInstance=ee),q}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(j){var ee=new n.BinaryReader(j),le=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(le,ee)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(j,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var le=new E.BaseOptions;ee.readMessage(le,E.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(le);break;case 2:le=new o.EmbedderOptions,ee.readMessage(le,o.EmbedderOptions.deserializeBinaryFromReader),j.setEmbedderOptions(le);break;default:ee.skipField()}return j},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(j,ee){var le=void 0;(le=j.getBaseOptions())!=null&&ee.writeMessage(1,le,E.BaseOptions.serializeBinaryToWriter),(le=j.getEmbedderOptions())!=null&&ee.writeMessage(2,le,o.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return n.Message.getWrapperField(this,o.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;const embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(u,n){const A=n?n.clone():new embedder_options_pb_1.EmbedderOptions;return u.l2Normalize!==void 0?A.setL2Normalize(u.l2Normalize):"l2Normalize"in u&&A.clearL2Normalize(),u.quantize!==void 0?A.setQuantize(u.quantize):"quantize"in u&&A.clearQuantize(),A}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;const DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(u){var n,A,w,d;const m={headIndex:(n=u.getHeadIndex())!==null&&n!==void 0?n:DEFAULT_INDEX,headName:(A=u.getHeadName())!==null&&A!==void 0?A:""};if(u.hasFloatEmbedding())m.floatEmbedding=u.getFloatEmbedding().getValuesList();else{const o=(d=(w=u.getQuantizedEmbedding())===null||w===void 0?void 0:w.getValues())!==null&&d!==void 0?d:"";m.quantizedEmbedding=typeof o=="string"?Uint8Array.from(atob(o),E=>E.charCodeAt(0)):o}return m}function convertFromEmbeddingResultProto(u){return{embeddings:u.getEmbeddingsList().map(n=>convertFromEmbeddingsProto(n)),timestampMs:u.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(u,n){if(u.floatEmbedding&&n.floatEmbedding)return compute(u.floatEmbedding,n.floatEmbedding);if(u.quantizedEmbedding&&n.quantizedEmbedding)return compute(convertToBytes(u.quantizedEmbedding),convertToBytes(n.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(u){return Array.from(u,n=>n>127?n-256:n)}function compute(u,n){if(u.length!==n.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${u.length} vs. ${n.length}).`);let A=0,w=0,d=0;for(let m=0;m<u.length;m++)A+=u[m]*n[m],w+=u[m]*u[m],d+=n[m]*n[m];if(w<=0||d<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return A/Math.sqrt(w*d)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(We,st,yt,St){St===void 0&&(St=yt);var _t=Object.getOwnPropertyDescriptor(st,yt);_t&&!("get"in _t?!st.__esModule:_t.writable||_t.configurable)||(_t={enumerable:!0,get:function(){return st[yt]}}),Object.defineProperty(We,St,_t)}:function(We,st,yt,St){St===void 0&&(St=yt),We[St]=st[yt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(We,st){for(var yt in We)yt==="default"||Object.prototype.hasOwnProperty.call(st,yt)||n(st,We,yt)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageEmbedder=void 0;const w=calculator_pb,d=calculator_options_pb,m=embeddings_pb,o=base_options_pb,E=image_embedder_graph_options_pb,j=embedder_options,ee=embedder_result,le=cosine_similarity,q=vision_task_runner,pe="image_in",ue="norm_rect",xt="embeddings_out";A(image_embedder_options,u),A(image_embedder_result,u);class rt extends q.VisionTaskRunner{static createFromOptions(st,yt){return q.VisionTaskRunner.createVisionInstance(rt,st,yt)}static createFromModelBuffer(st,yt){return q.VisionTaskRunner.createVisionInstance(rt,st,{baseOptions:{modelAssetBuffer:yt}})}static createFromModelPath(st,yt){return q.VisionTaskRunner.createVisionInstance(rt,st,{baseOptions:{modelAssetPath:yt}})}constructor(st,yt){super(new q.VisionGraphRunner(st,yt),pe,ue,!0),this.options=new E.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(st){this.options.setBaseOptions(st)}setOptions(st){return this.options.setEmbedderOptions((0,j.convertEmbedderOptionsToProto)(st,this.options.getEmbedderOptions())),this.applyOptions(st)}embed(st,yt){return this.processImageData(st,yt),this.embeddings}embedForVideo(st,yt,St){return this.processVideoData(st,St,yt),this.embeddings}static cosineSimilarity(st,yt){return(0,le.computeCosineSimilarity)(st,yt)}addJsImageEmdedding(st){const yt=m.EmbeddingResult.deserializeBinary(st);this.embeddings=(0,ee.convertFromEmbeddingResultProto)(yt)}refreshGraph(){const st=new w.CalculatorGraphConfig;st.addInputStream(pe),st.addInputStream(ue),st.addOutputStream(xt);const yt=new d.CalculatorOptions;yt.setExtension(E.ImageEmbedderGraphOptions.ext,this.options);const St=new w.CalculatorGraphConfig.Node;St.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),St.addInputStream("IMAGE:"+pe),St.addInputStream("NORM_RECT:"+ue),St.addOutputStream("EMBEDDINGS:"+xt),St.setOptions(yt),st.addNode(St),this.graphRunner.attachProtoListener(xt,(pt,ft)=>{this.addJsImageEmdedding(pt),this.setLatestOutputTimestamp(ft)}),this.graphRunner.attachEmptyPacketListener(xt,pt=>{this.setLatestOutputTimestamp(pt)});const _t=st.serializeBinary();this.setGraph(new Uint8Array(_t),!0)}}u.ImageEmbedder=rt}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,w),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(d,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(d,m){var o,E={outputType:(o=n.Message.getField(m,1))==null?void 0:o,activation:n.Message.getFieldWithDefault(m,2,0)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(o,m)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readEnum();d.setOutputType(o);break;case 2:o=m.readEnum(),d.setActivation(o);break;default:m.skipField()}return d},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeEnum(1,o),(o=n.Message.getField(d,2))!=null&&m.writeEnum(2,o)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(segmenter_options_pb);var label_map_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.LabelMapItem",null,w),proto.mediapipe.LabelMapItem=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},A.inherits(proto.mediapipe.LabelMapItem,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(d){return proto.mediapipe.LabelMapItem.toObject(d,this)},proto.mediapipe.LabelMapItem.toObject=function(d,m){var o,E={name:(o=n.Message.getField(m,1))==null?void 0:o,displayName:(o=n.Message.getField(m,2))==null?void 0:o,childNameList:(o=n.Message.getRepeatedField(m,3))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.LabelMapItem.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(o,m)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readString();d.setName(o);break;case 2:o=m.readString(),d.setDisplayName(o);break;case 3:o=m.readString(),d.addChildName(o);break;default:m.skipField()}return d},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeString(1,o),(o=n.Message.getField(d,2))!=null&&m.writeString(2,o),(o=d.getChildNameList()).length>0&&m.writeRepeatedString(3,o)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},A.object.extend(u,proto.mediapipe)})(label_map_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=segmenter_options_pb;A.object.extend(proto,m);var o=label_map_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,w),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(E,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(E,j){var ee,le={segmenterOptions:(ee=j.getSegmenterOptions())&&m.SegmenterOptions.toObject(E,ee),labelItemsMap:(ee=j.getLabelItemsMap())?ee.toObject(E,proto.mediapipe.LabelMapItem.toObject):[]};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new m.SegmenterOptions;j.readMessage(ee,m.SegmenterOptions.deserializeBinaryFromReader),E.setSegmenterOptions(ee);break;case 2:ee=E.getLabelItemsMap(),j.readMessage(ee,function(le,q){n.Map.deserializeBinary(le,q,n.BinaryReader.prototype.readInt64,n.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)});break;default:j.skipField()}return E},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getSegmenterOptions())!=null&&j.writeMessage(1,ee,m.SegmenterOptions.serializeBinaryToWriter),(ee=E.getLabelItemsMap(!0))&&ee.getLength()>0&&ee.serializeBinary(2,j,n.BinaryWriter.prototype.writeInt64,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,m.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(E){return n.Message.getMapField(this,2,E,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,A.object.extend(u,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=segmenter_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,w),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(j,ee){var le,q={baseOptions:(le=ee.getBaseOptions())&&o.BaseOptions.toObject(j,le),displayNamesLocale:n.Message.getFieldWithDefault(ee,2,"en"),segmenterOptions:(le=ee.getSegmenterOptions())&&E.SegmenterOptions.toObject(j,le)};return j&&(q.$jspbMessageInstance=ee),q}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(j){var ee=new n.BinaryReader(j),le=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(le,ee)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(j,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var le=new o.BaseOptions;ee.readMessage(le,o.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(le);break;case 2:le=ee.readString(),j.setDisplayNamesLocale(le);break;case 3:le=new E.SegmenterOptions,ee.readMessage(le,E.SegmenterOptions.deserializeBinaryFromReader),j.setSegmenterOptions(le);break;default:ee.skipField()}return j},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(j,ee){var le=void 0;(le=j.getBaseOptions())!=null&&ee.writeMessage(1,le,o.BaseOptions.serializeBinaryToWriter),(le=n.Message.getField(j,2))!=null&&ee.writeString(2,le),(le=j.getSegmenterOptions())!=null&&ee.writeMessage(3,le,E.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(j){return n.Message.setField(this,2,j)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,E.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(j){return n.Message.setWrapperField(this,3,j)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(image_segmenter_graph_options_pb);var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),image_segmenter_result.ImageSegmenterResult=void 0;class ImageSegmenterResult{constructor(n,A,w){this.confidenceMasks=n,this.categoryMask=A,this.qualityScores=w}close(){var n,A;(n=this.confidenceMasks)===null||n===void 0||n.forEach(w=>{w.close()}),(A=this.categoryMask)===null||A===void 0||A.close()}}image_segmenter_result.ImageSegmenterResult=ImageSegmenterResult;var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(yt,St,_t,pt){pt===void 0&&(pt=_t);var ft=Object.getOwnPropertyDescriptor(St,_t);ft&&!("get"in ft?!St.__esModule:ft.writable||ft.configurable)||(ft={enumerable:!0,get:function(){return St[_t]}}),Object.defineProperty(yt,pt,ft)}:function(yt,St,_t,pt){pt===void 0&&(pt=_t),yt[pt]=St[_t]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(yt,St){for(var _t in yt)_t==="default"||Object.prototype.hasOwnProperty.call(St,_t)||n(St,yt,_t)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageSegmenter=void 0;const w=calculator_pb,d=calculator_options_pb,m=base_options_pb,o=tensors_to_segmentation_calculator_pb,E=image_segmenter_graph_options_pb,j=segmenter_options_pb,ee=vision_task_runner,le=image_segmenter_result;A(image_segmenter_options,u),A(image_segmenter_result,u);const q="image_in",pe="norm_rect",ue="confidence_masks",xt="category_mask",rt="quality_scores",We="mediapipe.tasks.TensorsToSegmentationCalculator";class st extends ee.VisionTaskRunner{static createFromOptions(St,_t){return ee.VisionTaskRunner.createVisionInstance(st,St,_t)}static createFromModelBuffer(St,_t){return ee.VisionTaskRunner.createVisionInstance(st,St,{baseOptions:{modelAssetBuffer:_t}})}static createFromModelPath(St,_t){return ee.VisionTaskRunner.createVisionInstance(st,St,{baseOptions:{modelAssetPath:_t}})}constructor(St,_t){super(new ee.VisionGraphRunner(St,_t),q,pe,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new E.ImageSegmenterGraphOptions,this.segmenterOptions=new j.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(St){this.options.setBaseOptions(St)}setOptions(St){var _t,pt;return St.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(St.displayNamesLocale):"displayNamesLocale"in St&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in St&&(this.outputCategoryMask=(_t=St.outputCategoryMask)!==null&&_t!==void 0&&_t),"outputConfidenceMasks"in St&&(this.outputConfidenceMasks=(pt=St.outputConfidenceMasks)===null||pt===void 0||pt),super.applyOptions(St)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var St,_t,pt;const ft=this.getCalculatorGraphConfig().getNodeList().filter(kt=>kt.getName().includes(We));if(this.labels=[],ft.length>1)throw new Error(`The graph has more than one ${We}.`);ft.length===1&&((pt=(_t=(St=ft[0].getOptions())===null||St===void 0?void 0:St.getExtension(o.TensorsToSegmentationCalculatorOptions.ext))===null||_t===void 0?void 0:_t.getLabelItemsMap())!==null&&pt!==void 0?pt:new Map).forEach((kt,Rt)=>{this.labels[Number(Rt)]=kt.getName()})}segment(St,_t,pt){const ft=typeof _t!="function"?_t:{};return this.userCallback=typeof _t=="function"?_t:pt,this.reset(),this.processImageData(St,ft),this.processResults()}segmentForVideo(St,_t,pt,ft){const kt=typeof pt!="function"?pt:{};return this.userCallback=typeof pt=="function"?pt:ft,this.reset(),this.processVideoData(St,kt,_t),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{const St=new le.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return St;this.userCallback(St)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const St=new w.CalculatorGraphConfig;St.addInputStream(q),St.addInputStream(pe);const _t=new d.CalculatorOptions;_t.setExtension(E.ImageSegmenterGraphOptions.ext,this.options);const pt=new w.CalculatorGraphConfig.Node;pt.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),pt.addInputStream("IMAGE:"+q),pt.addInputStream("NORM_RECT:"+pe),pt.setOptions(_t),St.addNode(pt),this.addKeepaliveNode(St),this.outputConfidenceMasks&&(St.addOutputStream(ue),pt.addOutputStream("CONFIDENCE_MASKS:"+ue),this.keepStreamAlive(ue),this.graphRunner.attachImageVectorListener(ue,(kt,Rt)=>{this.confidenceMasks=kt.map(Jt=>this.convertToMPMask(Jt,!this.userCallback)),this.setLatestOutputTimestamp(Rt)}),this.graphRunner.attachEmptyPacketListener(ue,kt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(kt)})),this.outputCategoryMask&&(St.addOutputStream(xt),pt.addOutputStream("CATEGORY_MASK:"+xt),this.keepStreamAlive(xt),this.graphRunner.attachImageListener(xt,(kt,Rt)=>{this.categoryMask=this.convertToMPMask(kt,!this.userCallback),this.setLatestOutputTimestamp(Rt)}),this.graphRunner.attachEmptyPacketListener(xt,kt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(kt)})),St.addOutputStream(rt),pt.addOutputStream("QUALITY_SCORES:"+rt),this.graphRunner.attachFloatVectorListener(rt,(kt,Rt)=>{this.qualityScores=kt,this.setLatestOutputTimestamp(Rt)}),this.graphRunner.attachEmptyPacketListener(rt,kt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(kt)});const ft=St.serializeBinary();this.setGraph(new Uint8Array(ft),!0)}}u.ImageSegmenter=st}(image_segmenter);var interactive_segmenter={},color_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Color",null,w),A.exportSymbol("proto.mediapipe.ColorMap",null,w),proto.mediapipe.Color=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Color,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.ColorMap,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(d){return proto.mediapipe.Color.toObject(d,this)},proto.mediapipe.Color.toObject=function(d,m){var o,E={r:(o=n.Message.getField(m,1))==null?void 0:o,g:(o=n.Message.getField(m,2))==null?void 0:o,b:(o=n.Message.getField(m,3))==null?void 0:o};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Color.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(o,m)},proto.mediapipe.Color.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var o=m.readInt32();d.setR(o);break;case 2:o=m.readInt32(),d.setG(o);break;case 3:o=m.readInt32(),d.setB(o);break;default:m.skipField()}return d},proto.mediapipe.Color.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(d,m){var o=void 0;(o=n.Message.getField(d,1))!=null&&m.writeInt32(1,o),(o=n.Message.getField(d,2))!=null&&m.writeInt32(2,o),(o=n.Message.getField(d,3))!=null&&m.writeInt32(3,o)},proto.mediapipe.Color.prototype.getR=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Color.prototype.clearR=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Color.prototype.getG=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Color.prototype.clearG=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Color.prototype.getB=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Color.prototype.clearB=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(d){return proto.mediapipe.ColorMap.toObject(d,this)},proto.mediapipe.ColorMap.toObject=function(d,m){var o,E={labelToColorMap:(o=m.getLabelToColorMap())?o.toObject(d,proto.mediapipe.Color.toObject):[]};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.ColorMap.deserializeBinary=function(d){var m=new n.BinaryReader(d),o=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(o,m)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var o=d.getLabelToColorMap();m.readMessage(o,function(E,j){n.Map.deserializeBinary(E,j,n.BinaryReader.prototype.readString,n.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)})}else m.skipField();return d},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(d,m){var o=void 0;(o=d.getLabelToColorMap(!0))&&o.getLength()>0&&o.serializeBinary(1,m,n.BinaryWriter.prototype.writeString,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(d){return n.Message.getMapField(this,1,d,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},A.object.extend(u,proto.mediapipe)})(color_pb);var render_data_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=color_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.RenderAnnotation",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,w),A.exportSymbol("proto.mediapipe.RenderData",null,w),A.exportSymbol("proto.mediapipe.RenderViewport",null,w),proto.mediapipe.RenderData=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},A.inherits(proto.mediapipe.RenderData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(m){n.Message.initialize(this,m,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},A.inherits(proto.mediapipe.RenderAnnotation,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Rectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Oval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledOval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Point,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Line,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.GradientLine,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},A.inherits(proto.mediapipe.RenderAnnotation.Scribble,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Arrow,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Text,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderViewport,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(m){return proto.mediapipe.RenderData.toObject(m,this)},proto.mediapipe.RenderData.toObject=function(m,o){var E,j={renderAnnotationsList:n.Message.toObjectList(o.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,m),sceneClass:(E=n.Message.getField(o,2))==null?void 0:E,sceneViewport:(E=o.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderData.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation;o.readMessage(E,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),m.addRenderAnnotations(E);break;case 2:E=o.readString(),m.setSceneClass(E);break;case 3:E=new proto.mediapipe.RenderViewport,o.readMessage(E,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),m.setSceneViewport(E);break;default:o.skipField()}return m},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getRenderAnnotationsList()).length>0&&o.writeRepeatedMessage(1,E,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&o.writeString(2,E),(E=m.getSceneViewport())!=null&&o.writeMessage(3,E,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(m,o){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.RenderAnnotation,o)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.toObject(m,this)},proto.mediapipe.RenderAnnotation.toObject=function(m,o){var E,j={rectangle:(E=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),filledRectangle:(E=o.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(m,E),oval:(E=o.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(m,E),filledOval:(E=o.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(m,E),point:(E=o.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(m,E),line:(E=o.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(m,E),arrow:(E=o.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(m,E),text:(E=o.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(m,E),roundedRectangle:(E=o.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,E),filledRoundedRectangle:(E=o.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(m,E),gradientLine:(E=o.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(m,E),scribble:(E=o.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(m,E),thickness:n.Message.getFloatingPointFieldWithDefault(o,11,1),color:(E=o.getColor())&&d.Color.toObject(m,E),sceneTag:(E=n.Message.getField(o,13))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=new proto.mediapipe.RenderAnnotation.FilledRectangle,o.readMessage(E,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),m.setFilledRectangle(E);break;case 3:E=new proto.mediapipe.RenderAnnotation.Oval,o.readMessage(E,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),m.setOval(E);break;case 4:E=new proto.mediapipe.RenderAnnotation.FilledOval,o.readMessage(E,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),m.setFilledOval(E);break;case 5:E=new proto.mediapipe.RenderAnnotation.Point,o.readMessage(E,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),m.setPoint(E);break;case 6:E=new proto.mediapipe.RenderAnnotation.Line,o.readMessage(E,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),m.setLine(E);break;case 7:E=new proto.mediapipe.RenderAnnotation.Arrow,o.readMessage(E,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),m.setArrow(E);break;case 8:E=new proto.mediapipe.RenderAnnotation.Text,o.readMessage(E,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),m.setText(E);break;case 9:E=new proto.mediapipe.RenderAnnotation.RoundedRectangle,o.readMessage(E,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),m.setRoundedRectangle(E);break;case 10:E=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,o.readMessage(E,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),m.setFilledRoundedRectangle(E);break;case 14:E=new proto.mediapipe.RenderAnnotation.GradientLine,o.readMessage(E,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),m.setGradientLine(E);break;case 15:E=new proto.mediapipe.RenderAnnotation.Scribble,o.readMessage(E,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),m.setScribble(E);break;case 11:E=o.readDouble(),m.setThickness(E);break;case 12:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor(E);break;case 13:E=o.readString(),m.setSceneTag(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getRectangle())!=null&&o.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=m.getFilledRectangle())!=null&&o.writeMessage(2,E,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),(E=m.getOval())!=null&&o.writeMessage(3,E,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(E=m.getFilledOval())!=null&&o.writeMessage(4,E,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),(E=m.getPoint())!=null&&o.writeMessage(5,E,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),(E=m.getLine())!=null&&o.writeMessage(6,E,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),(E=m.getArrow())!=null&&o.writeMessage(7,E,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),(E=m.getText())!=null&&o.writeMessage(8,E,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),(E=m.getRoundedRectangle())!=null&&o.writeMessage(9,E,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(E=m.getFilledRoundedRectangle())!=null&&o.writeMessage(10,E,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),(E=m.getGradientLine())!=null&&o.writeMessage(14,E,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),(E=m.getScribble())!=null&&o.writeMessage(15,E,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),(E=n.Message.getField(m,11))!=null&&o.writeDouble(11,E),(E=m.getColor())!=null&&o.writeMessage(12,E,d.Color.serializeBinaryToWriter),(E=n.Message.getField(m,13))!=null&&o.writeString(13,E)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(m,o){var E,j={left:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,top:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,right:(E=n.Message.getOptionalFloatingPointField(o,3))==null?void 0:E,bottom:(E=n.Message.getOptionalFloatingPointField(o,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(o,5,!1),rotation:(E=n.Message.getOptionalFloatingPointField(o,6))==null?void 0:E,topLeftThickness:(E=n.Message.getOptionalFloatingPointField(o,7))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readDouble();m.setLeft(E);break;case 2:E=o.readDouble(),m.setTop(E);break;case 3:E=o.readDouble(),m.setRight(E);break;case 4:E=o.readDouble(),m.setBottom(E);break;case 5:E=o.readBool(),m.setNormalized(E);break;case 6:E=o.readDouble(),m.setRotation(E);break;case 7:E=o.readDouble(),m.setTopLeftThickness(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&o.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&o.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&o.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&o.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&o.writeDouble(6,E),(E=n.Message.getField(m,7))!=null&&o.writeDouble(7,E)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return n.Message.getField(this,7)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(m,o){var E,j={rectangle:(E=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),fillColor:(E=o.getFillColor())&&d.Color.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getRectangle())!=null&&o.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=m.getFillColor())!=null&&o.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(m,o){var E,j={rectangle:(E=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),cornerRadius:n.Message.getFieldWithDefault(o,2,0),lineType:n.Message.getFieldWithDefault(o,3,4)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=o.readInt32(),m.setCornerRadius(E);break;case 3:E=o.readInt32(),m.setLineType(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getRectangle())!=null&&o.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&o.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&o.writeInt32(3,E)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(m,o){var E,j={roundedRectangle:(E=o.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,E),fillColor:(E=o.getFillColor())&&d.Color.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.RoundedRectangle;o.readMessage(E,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),m.setRoundedRectangle(E);break;case 2:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getRoundedRectangle())!=null&&o.writeMessage(1,E,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(E=m.getFillColor())!=null&&o.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Oval.toObject(m,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(m,o){var E,j={rectangle:(E=o.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var E=new proto.mediapipe.RenderAnnotation.Rectangle;o.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E)}else o.skipField();return m},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(m,o){var E;(E=m.getRectangle())!=null&&o.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(m,o){var E,j={oval:(E=o.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(m,E),fillColor:(E=o.getFillColor())&&d.Color.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Oval;o.readMessage(E,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),m.setOval(E);break;case 2:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(m,o){var E=void 0;(E=m.getOval())!=null&&o.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(E=m.getFillColor())!=null&&o.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Point.toObject(m,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(m,o){var E,j={x:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,y:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(o,3,!1)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readDouble();m.setX(E);break;case 2:E=o.readDouble(),m.setY(E);break;case 3:E=o.readBool(),m.setNormalized(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&o.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&o.writeBool(3,E)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Line.toObject(m,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(m,o){var E,j={xStart:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(o,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(o,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(o,5,!1),lineType:n.Message.getFieldWithDefault(o,6,1)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readDouble();m.setXStart(E);break;case 2:E=o.readDouble(),m.setYStart(E);break;case 3:E=o.readDouble(),m.setXEnd(E);break;case 4:E=o.readDouble(),m.setYEnd(E);break;case 5:E=o.readBool(),m.setNormalized(E);break;case 6:E=o.readEnum(),m.setLineType(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&o.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&o.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&o.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&o.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&o.writeEnum(6,E)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(m,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(m,o){var E,j={xStart:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(o,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(o,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(o,5,!1),color1:(E=o.getColor1())&&d.Color.toObject(m,E),color2:(E=o.getColor2())&&d.Color.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readDouble();m.setXStart(E);break;case 2:E=o.readDouble(),m.setYStart(E);break;case 3:E=o.readDouble(),m.setXEnd(E);break;case 4:E=o.readDouble(),m.setYEnd(E);break;case 5:E=o.readBool(),m.setNormalized(E);break;case 6:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor1(E);break;case 7:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor2(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&o.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&o.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&o.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&o.writeBool(5,E),(E=m.getColor1())!=null&&o.writeMessage(6,E,d.Color.serializeBinaryToWriter),(E=m.getColor2())!=null&&o.writeMessage(7,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return n.Message.getWrapperField(this,d.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(m){return n.Message.setWrapperField(this,6,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return n.Message.getWrapperField(this,d.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(m){return n.Message.setWrapperField(this,7,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Scribble.toObject(m,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(m,o){var E={pointList:n.Message.toObjectList(o.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,m)};return m&&(E.$jspbMessageInstance=o),E}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var E=new proto.mediapipe.RenderAnnotation.Point;o.readMessage(E,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),m.addPoint(E)}else o.skipField();return m},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(m,o){var E;(E=m.getPointList()).length>0&&o.writeRepeatedMessage(1,E,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(m,o){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.RenderAnnotation.Point,o)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Arrow.toObject(m,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(m,o){var E,j={xStart:(E=n.Message.getOptionalFloatingPointField(o,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(o,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(o,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(o,5,!1)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readDouble();m.setXStart(E);break;case 2:E=o.readDouble(),m.setYStart(E);break;case 3:E=o.readDouble(),m.setXEnd(E);break;case 4:E=o.readDouble(),m.setYEnd(E);break;case 5:E=o.readBool(),m.setNormalized(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&o.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&o.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&o.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&o.writeBool(5,E)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Text.toObject(m,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(m,o){var E,j={displayText:(E=n.Message.getField(o,1))==null?void 0:E,left:(E=n.Message.getOptionalFloatingPointField(o,2))==null?void 0:E,baseline:(E=n.Message.getOptionalFloatingPointField(o,3))==null?void 0:E,fontHeight:n.Message.getFloatingPointFieldWithDefault(o,4,8),normalized:n.Message.getBooleanFieldWithDefault(o,5,!1),fontFace:n.Message.getFieldWithDefault(o,6,0),centerHorizontally:n.Message.getBooleanFieldWithDefault(o,7,!1),centerVertically:n.Message.getBooleanFieldWithDefault(o,8,!1),outlineThickness:n.Message.getFloatingPointFieldWithDefault(o,11,0),outlineColor:(E=o.getOutlineColor())&&d.Color.toObject(m,E)};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readString();m.setDisplayText(E);break;case 2:E=o.readDouble(),m.setLeft(E);break;case 3:E=o.readDouble(),m.setBaseline(E);break;case 4:E=o.readDouble(),m.setFontHeight(E);break;case 5:E=o.readBool(),m.setNormalized(E);break;case 6:E=o.readInt32(),m.setFontFace(E);break;case 7:E=o.readBool(),m.setCenterHorizontally(E);break;case 8:E=o.readBool(),m.setCenterVertically(E);break;case 11:E=o.readDouble(),m.setOutlineThickness(E);break;case 12:E=new d.Color,o.readMessage(E,d.Color.deserializeBinaryFromReader),m.setOutlineColor(E);break;default:o.skipField()}return m},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeString(1,E),(E=n.Message.getField(m,2))!=null&&o.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&o.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&o.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&o.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&o.writeInt32(6,E),(E=n.Message.getField(m,7))!=null&&o.writeBool(7,E),(E=n.Message.getField(m,8))!=null&&o.writeBool(8,E),(E=n.Message.getField(m,11))!=null&&o.writeDouble(11,E),(E=m.getOutlineColor())!=null&&o.writeMessage(12,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return n.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return n.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(m){return n.Message.setField(this,8,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(m){return n.Message.setField(this,11,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(m){return n.Message.setWrapperField(this,12,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(m){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(m){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(m){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(m){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(m){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(m){return n.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(m){return n.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(m){return n.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(m){return n.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,9)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(m){return n.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(m){return n.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return n.Message.getField(this,14)!=null},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(m){return n.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(m){return n.Message.setField(this,11,m)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(m){return n.Message.setWrapperField(this,12,m)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return n.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(m){return n.Message.setField(this,13,m)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return n.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return n.Message.getField(this,13)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(m){return proto.mediapipe.RenderViewport.toObject(m,this)},proto.mediapipe.RenderViewport.toObject=function(m,o){var E,j={id:(E=n.Message.getField(o,1))==null?void 0:E,widthPx:(E=n.Message.getField(o,2))==null?void 0:E,heightPx:(E=n.Message.getField(o,3))==null?void 0:E,composeOnVideo:(E=n.Message.getBooleanField(o,4))==null?void 0:E};return m&&(j.$jspbMessageInstance=o),j}),proto.mediapipe.RenderViewport.deserializeBinary=function(m){var o=new n.BinaryReader(m),E=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(E,o)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(m,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var E=o.readString();m.setId(E);break;case 2:E=o.readInt32(),m.setWidthPx(E);break;case 3:E=o.readInt32(),m.setHeightPx(E);break;case 4:E=o.readBool(),m.setComposeOnVideo(E);break;default:o.skipField()}return m},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(m,o){var E=void 0;(E=n.Message.getField(m,1))!=null&&o.writeString(1,E),(E=n.Message.getField(m,2))!=null&&o.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&o.writeInt32(3,E),(E=n.Message.getField(m,4))!=null&&o.writeBool(4,E)},proto.mediapipe.RenderViewport.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(render_data_pb);var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),interactive_segmenter_result.InteractiveSegmenterResult=void 0;class InteractiveSegmenterResult{constructor(n,A,w){this.confidenceMasks=n,this.categoryMask=A,this.qualityScores=w}close(){var n,A;(n=this.confidenceMasks)===null||n===void 0||n.forEach(w=>{w.close()}),(A=this.categoryMask)===null||A===void 0||A.close()}}interactive_segmenter_result.InteractiveSegmenterResult=InteractiveSegmenterResult;var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(St,_t,pt,ft){ft===void 0&&(ft=pt);var kt=Object.getOwnPropertyDescriptor(_t,pt);kt&&!("get"in kt?!_t.__esModule:kt.writable||kt.configurable)||(kt={enumerable:!0,get:function(){return _t[pt]}}),Object.defineProperty(St,ft,kt)}:function(St,_t,pt,ft){ft===void 0&&(ft=pt),St[ft]=_t[pt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(St,_t){for(var pt in St)pt==="default"||Object.prototype.hasOwnProperty.call(_t,pt)||n(_t,St,pt)};Object.defineProperty(u,"__esModule",{value:!0}),u.InteractiveSegmenter=void 0;const w=calculator_pb,d=calculator_options_pb,m=base_options_pb,o=image_segmenter_graph_options_pb,E=segmenter_options_pb,j=vision_task_runner,ee=color_pb,le=render_data_pb,q=interactive_segmenter_result;A(interactive_segmenter_options,u),A(interactive_segmenter_result,u);const pe="image_in",ue="norm_rect_in",xt="roi_in",rt="confidence_masks",We="category_mask",st="quality_scores";class yt extends j.VisionTaskRunner{static createFromOptions(_t,pt){return j.VisionTaskRunner.createVisionInstance(yt,_t,pt)}static createFromModelBuffer(_t,pt){return j.VisionTaskRunner.createVisionInstance(yt,_t,{baseOptions:{modelAssetBuffer:pt}})}static createFromModelPath(_t,pt){return j.VisionTaskRunner.createVisionInstance(yt,_t,{baseOptions:{modelAssetPath:pt}})}constructor(_t,pt){super(new j.VisionGraphRunner(_t,pt),pe,ue,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new o.ImageSegmenterGraphOptions,this.segmenterOptions=new E.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(_t){this.options.setBaseOptions(_t)}setOptions(_t){var pt,ft;return"outputCategoryMask"in _t&&(this.outputCategoryMask=(pt=_t.outputCategoryMask)!==null&&pt!==void 0&&pt),"outputConfidenceMasks"in _t&&(this.outputConfidenceMasks=(ft=_t.outputConfidenceMasks)===null||ft===void 0||ft),super.applyOptions(_t)}segment(_t,pt,ft,kt){const Rt=typeof ft!="function"?ft:{};return this.userCallback=typeof ft=="function"?ft:kt,this.reset(),this.processRenderData(pt,this.getSynctheticTimestamp()),this.processImageData(_t,Rt),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{const _t=new q.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return _t;this.userCallback(_t)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const _t=new w.CalculatorGraphConfig;_t.addInputStream(pe),_t.addInputStream(xt),_t.addInputStream(ue);const pt=new d.CalculatorOptions;pt.setExtension(o.ImageSegmenterGraphOptions.ext,this.options);const ft=new w.CalculatorGraphConfig.Node;ft.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),ft.addInputStream("IMAGE:"+pe),ft.addInputStream("ROI:"+xt),ft.addInputStream("NORM_RECT:"+ue),ft.setOptions(pt),_t.addNode(ft),this.addKeepaliveNode(_t),this.outputConfidenceMasks&&(_t.addOutputStream(rt),ft.addOutputStream("CONFIDENCE_MASKS:"+rt),this.keepStreamAlive(rt),this.graphRunner.attachImageVectorListener(rt,(Rt,Jt)=>{this.confidenceMasks=Rt.map(Lt=>this.convertToMPMask(Lt,!this.userCallback)),this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachEmptyPacketListener(rt,Rt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(Rt)})),this.outputCategoryMask&&(_t.addOutputStream(We),ft.addOutputStream("CATEGORY_MASK:"+We),this.keepStreamAlive(We),this.graphRunner.attachImageListener(We,(Rt,Jt)=>{this.categoryMask=this.convertToMPMask(Rt,!this.userCallback),this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachEmptyPacketListener(We,Rt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Rt)})),_t.addOutputStream(st),ft.addOutputStream("QUALITY_SCORES:"+st),this.graphRunner.attachFloatVectorListener(st,(Rt,Jt)=>{this.qualityScores=Rt,this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachEmptyPacketListener(st,Rt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Rt)});const kt=_t.serializeBinary();this.setGraph(new Uint8Array(kt),!0)}processRenderData(_t,pt){const ft=new le.RenderData,kt=new le.RenderAnnotation,Rt=new ee.Color;if(Rt.setR(255),kt.setColor(Rt),_t.keypoint&&_t.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(_t.keypoint){const Jt=new le.RenderAnnotation.Point;Jt.setNormalized(!0),Jt.setX(_t.keypoint.x),Jt.setY(_t.keypoint.y),kt.setPoint(Jt)}else{if(!_t.scribble)throw new Error("Must provide either a keypoint or a scribble.");{const Jt=new le.RenderAnnotation.Scribble;for(const Lt of _t.scribble){const vn=new le.RenderAnnotation.Point;vn.setNormalized(!0),vn.setX(Lt.x),vn.setY(Lt.y),Jt.addPoint(vn)}kt.setScribble(Jt)}}ft.addRenderAnnotations(kt),this.graphRunner.addProtoToStream(ft.serializeBinary(),"mediapipe.RenderData",xt,pt)}}u.InteractiveSegmenter=yt}(interactive_segmenter);var object_detector={},object_detector_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,w),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(E){n.Message.initialize(this,E,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(E,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee),displayNamesLocale:n.Message.getFieldWithDefault(j,2,"en"),maxResults:n.Message.getFieldWithDefault(j,3,-1),scoreThreshold:(ee=n.Message.getOptionalFloatingPointField(j,4))==null?void 0:ee,categoryAllowlistList:(ee=n.Message.getRepeatedField(j,5))==null?void 0:ee,categoryDenylistList:(ee=n.Message.getRepeatedField(j,6))==null?void 0:ee};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=j.readString(),E.setDisplayNamesLocale(ee);break;case 3:ee=j.readInt32(),E.setMaxResults(ee);break;case 4:ee=j.readFloat(),E.setScoreThreshold(ee);break;case 5:ee=j.readString(),E.addCategoryAllowlist(ee);break;case 6:ee=j.readString(),E.addCategoryDenylist(ee);break;default:j.skipField()}return E},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&j.writeString(2,ee),(ee=n.Message.getField(E,3))!=null&&j.writeInt32(3,ee),(ee=n.Message.getField(E,4))!=null&&j.writeFloat(4,ee),(ee=E.getCategoryAllowlistList()).length>0&&j.writeRepeatedString(5,ee),(ee=E.getCategoryDenylistList()).length>0&&j.writeRepeatedString(6,ee)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(E){return n.Message.setField(this,5,E||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(E,j){return n.Message.addToRepeatedField(this,5,E,j)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(E){return n.Message.setField(this,6,E||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(E,j){return n.Message.addToRepeatedField(this,6,E,j)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.object_detector.proto)})(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(xt,rt,We,st){st===void 0&&(st=We);var yt=Object.getOwnPropertyDescriptor(rt,We);yt&&!("get"in yt?!rt.__esModule:yt.writable||yt.configurable)||(yt={enumerable:!0,get:function(){return rt[We]}}),Object.defineProperty(xt,st,yt)}:function(xt,rt,We,st){st===void 0&&(st=We),xt[st]=rt[We]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(xt,rt){for(var We in xt)We==="default"||Object.prototype.hasOwnProperty.call(rt,We)||n(rt,xt,We)};Object.defineProperty(u,"__esModule",{value:!0}),u.ObjectDetector=void 0;const w=calculator_pb,d=calculator_options_pb,m=detection_pb,o=base_options_pb,E=object_detector_options_pb,j=detection_result,ee=vision_task_runner,le="input_frame_gpu",q="norm_rect",pe="detections";A(object_detector_options,u),A(object_detector_result,u);class ue extends ee.VisionTaskRunner{static createFromOptions(rt,We){return ee.VisionTaskRunner.createVisionInstance(ue,rt,We)}static createFromModelBuffer(rt,We){return ee.VisionTaskRunner.createVisionInstance(ue,rt,{baseOptions:{modelAssetBuffer:We}})}static createFromModelPath(rt,We){return es(this,null,function*(){return ee.VisionTaskRunner.createVisionInstance(ue,rt,{baseOptions:{modelAssetPath:We}})})}constructor(rt,We){super(new ee.VisionGraphRunner(rt,We),le,q,!1),this.result={detections:[]},this.options=new E.ObjectDetectorOptions,this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(rt){this.options.setBaseOptions(rt)}setOptions(rt){return rt.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(rt.displayNamesLocale):"displayNamesLocale"in rt&&this.options.clearDisplayNamesLocale(),rt.maxResults!==void 0?this.options.setMaxResults(rt.maxResults):"maxResults"in rt&&this.options.clearMaxResults(),rt.scoreThreshold!==void 0?this.options.setScoreThreshold(rt.scoreThreshold):"scoreThreshold"in rt&&this.options.clearScoreThreshold(),rt.categoryAllowlist!==void 0?this.options.setCategoryAllowlistList(rt.categoryAllowlist):"categoryAllowlist"in rt&&this.options.clearCategoryAllowlistList(),rt.categoryDenylist!==void 0?this.options.setCategoryDenylistList(rt.categoryDenylist):"categoryDenylist"in rt&&this.options.clearCategoryDenylistList(),this.applyOptions(rt)}detect(rt,We){return this.result={detections:[]},this.processImageData(rt,We),this.result}detectForVideo(rt,We,st){return this.result={detections:[]},this.processVideoData(rt,st,We),this.result}addJsObjectDetections(rt){for(const We of rt){const st=m.Detection.deserializeBinary(We);this.result.detections.push((0,j.convertFromDetectionProto)(st))}}refreshGraph(){const rt=new w.CalculatorGraphConfig;rt.addInputStream(le),rt.addInputStream(q),rt.addOutputStream(pe);const We=new d.CalculatorOptions;We.setExtension(E.ObjectDetectorOptions.ext,this.options);const st=new w.CalculatorGraphConfig.Node;st.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),st.addInputStream("IMAGE:"+le),st.addInputStream("NORM_RECT:"+q),st.addOutputStream("DETECTIONS:"+pe),st.setOptions(We),rt.addNode(st),this.graphRunner.attachProtoVectorListener(pe,(St,_t)=>{this.addJsObjectDetections(St),this.setLatestOutputTimestamp(_t)}),this.graphRunner.attachEmptyPacketListener(pe,St=>{this.setLatestOutputTimestamp(St)});const yt=rt.serializeBinary();this.setGraph(new Uint8Array(yt),!0)}}u.ObjectDetector=ue}(object_detector);var pose_landmarker={},pose_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(j,3,.5),numPoses:(ee=n.Message.getField(j,4))==null?void 0:ee};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=j.readFloat(),E.setMinDetectionConfidence(ee);break;case 3:ee=j.readFloat(),E.setMinSuppressionThreshold(ee);break;case 4:ee=j.readInt32(),E.setNumPoses(ee);break;default:j.skipField()}return E},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&j.writeFloat(2,ee),(ee=n.Message.getField(E,3))!=null&&j.writeFloat(3,ee),(ee=n.Message.getField(E,4))!=null&&j.writeInt32(4,ee)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_detector.proto)})(pose_detector_graph_options_pb);var pose_landmarker_graph_options_pb={},pose_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o),A.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(E,j){var ee,le={baseOptions:(ee=j.getBaseOptions())&&o.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5)};return E&&(le.$jspbMessageInstance=j),le}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(E){var j=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader(ee,j)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(E,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var ee=new o.BaseOptions;j.readMessage(ee,o.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=j.readFloat(),E.setMinDetectionConfidence(ee);break;default:j.skipField()}return E},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(E,j){var ee=void 0;(ee=E.getBaseOptions())!=null&&j.writeMessage(1,ee,o.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&j.writeFloat(2,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(pose_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var o=base_options_pb;A.object.extend(proto,o);var E=pose_detector_graph_options_pb;A.object.extend(proto,E);var j=pose_landmarks_detector_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,w),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function(ee,le){var q,pe={baseOptions:(q=le.getBaseOptions())&&o.BaseOptions.toObject(ee,q),poseDetectorGraphOptions:(q=le.getPoseDetectorGraphOptions())&&E.PoseDetectorGraphOptions.toObject(ee,q),poseLandmarksDetectorGraphOptions:(q=le.getPoseLandmarksDetectorGraphOptions())&&j.PoseLandmarksDetectorGraphOptions.toObject(ee,q),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(le,4,.5)};return ee&&(pe.$jspbMessageInstance=le),pe}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function(ee){var le=new n.BinaryReader(ee),q=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(q,le)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function(ee,le){for(;le.nextField()&&!le.isEndGroup();)switch(le.getFieldNumber()){case 1:var q=new o.BaseOptions;le.readMessage(q,o.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(q);break;case 2:q=new E.PoseDetectorGraphOptions,le.readMessage(q,E.PoseDetectorGraphOptions.deserializeBinaryFromReader),ee.setPoseDetectorGraphOptions(q);break;case 3:q=new j.PoseLandmarksDetectorGraphOptions,le.readMessage(q,j.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),ee.setPoseLandmarksDetectorGraphOptions(q);break;case 4:q=le.readFloat(),ee.setMinTrackingConfidence(q);break;default:le.skipField()}return ee},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function(ee,le){var q=void 0;(q=ee.getBaseOptions())!=null&&le.writeMessage(1,q,o.BaseOptions.serializeBinaryToWriter),(q=ee.getPoseDetectorGraphOptions())!=null&&le.writeMessage(2,q,E.PoseDetectorGraphOptions.serializeBinaryToWriter),(q=ee.getPoseLandmarksDetectorGraphOptions())!=null&&le.writeMessage(3,q,j.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),(q=n.Message.getField(ee,4))!=null&&le.writeFloat(4,q)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,o.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,j.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(ee){return n.Message.setField(this,4,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarker_graph_options_pb);var pose_landmarker_result={};Object.defineProperty(pose_landmarker_result,"__esModule",{value:!0}),pose_landmarker_result.PoseLandmarkerResult=void 0;class PoseLandmarkerResult{constructor(n,A,w){this.landmarks=n,this.worldLandmarks=A,this.segmentationMasks=w}close(){var n;(n=this.segmentationMasks)===null||n===void 0||n.forEach(A=>{A.close()})}}pose_landmarker_result.PoseLandmarkerResult=PoseLandmarkerResult;var pose_landmarker_options={};Object.defineProperty(pose_landmarker_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_t,pt,ft,kt){kt===void 0&&(kt=ft);var Rt=Object.getOwnPropertyDescriptor(pt,ft);Rt&&!("get"in Rt?!pt.__esModule:Rt.writable||Rt.configurable)||(Rt={enumerable:!0,get:function(){return pt[ft]}}),Object.defineProperty(_t,kt,Rt)}:function(_t,pt,ft,kt){kt===void 0&&(kt=ft),_t[kt]=pt[ft]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(_t,pt){for(var ft in _t)ft==="default"||Object.prototype.hasOwnProperty.call(pt,ft)||n(pt,_t,ft)};Object.defineProperty(u,"__esModule",{value:!0}),u.PoseLandmarker=void 0;const w=calculator_pb,d=calculator_options_pb,m=landmark_pb,o=base_options_pb,E=pose_detector_graph_options_pb,j=pose_landmarker_graph_options_pb,ee=pose_landmarks_detector_graph_options_pb,le=landmark_result,q=vision_task_runner,pe=pose_landmarker_result;A(pose_landmarker_options,u),A(pose_landmarker_result,u);const ue="image_in",xt="norm_rect",rt="normalized_landmarks",We="world_landmarks",st="segmentation_masks",yt=.5;class St extends q.VisionTaskRunner{static createFromOptions(pt,ft){return q.VisionTaskRunner.createVisionInstance(St,pt,ft)}static createFromModelBuffer(pt,ft){return q.VisionTaskRunner.createVisionInstance(St,pt,{baseOptions:{modelAssetBuffer:ft}})}static createFromModelPath(pt,ft){return q.VisionTaskRunner.createVisionInstance(St,pt,{baseOptions:{modelAssetPath:ft}})}constructor(pt,ft){super(new q.VisionGraphRunner(pt,ft),ue,xt,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new j.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new o.BaseOptions),this.poseLandmarksDetectorGraphOptions=new ee.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new E.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(pt){this.options.setBaseOptions(pt)}setOptions(pt){var ft,kt,Rt,Jt,Lt;return"numPoses"in pt&&this.poseDetectorGraphOptions.setNumPoses((ft=pt.numPoses)!==null&&ft!==void 0?ft:1),"minPoseDetectionConfidence"in pt&&this.poseDetectorGraphOptions.setMinDetectionConfidence((kt=pt.minPoseDetectionConfidence)!==null&&kt!==void 0?kt:yt),"minTrackingConfidence"in pt&&this.options.setMinTrackingConfidence((Rt=pt.minTrackingConfidence)!==null&&Rt!==void 0?Rt:yt),"minPosePresenceConfidence"in pt&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence((Jt=pt.minPosePresenceConfidence)!==null&&Jt!==void 0?Jt:yt),"outputSegmentationMasks"in pt&&(this.outputSegmentationMasks=(Lt=pt.outputSegmentationMasks)!==null&&Lt!==void 0&&Lt),this.applyOptions(pt)}detect(pt,ft,kt){const Rt=typeof ft!="function"?ft:{};return this.userCallback=typeof ft=="function"?ft:kt,this.resetResults(),this.processImageData(pt,Rt),this.processResults()}detectForVideo(pt,ft,kt,Rt){const Jt=typeof kt!="function"?kt:{};return this.userCallback=typeof kt=="function"?kt:Rt,this.resetResults(),this.processVideoData(pt,Jt,ft),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{const pt=new pe.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return pt;this.userCallback(pt)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(yt),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(yt),this.options.setMinTrackingConfidence(yt)}addJsLandmarks(pt){this.landmarks=[];for(const ft of pt){const kt=m.NormalizedLandmarkList.deserializeBinary(ft);this.landmarks.push((0,le.convertToLandmarks)(kt))}}adddJsWorldLandmarks(pt){this.worldLandmarks=[];for(const ft of pt){const kt=m.LandmarkList.deserializeBinary(ft);this.worldLandmarks.push((0,le.convertToWorldLandmarks)(kt))}}refreshGraph(){const pt=new w.CalculatorGraphConfig;pt.addInputStream(ue),pt.addInputStream(xt),pt.addOutputStream(rt),pt.addOutputStream(We),pt.addOutputStream(st);const ft=new d.CalculatorOptions;ft.setExtension(j.PoseLandmarkerGraphOptions.ext,this.options);const kt=new w.CalculatorGraphConfig.Node;kt.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),kt.addInputStream("IMAGE:"+ue),kt.addInputStream("NORM_RECT:"+xt),kt.addOutputStream("NORM_LANDMARKS:"+rt),kt.addOutputStream("WORLD_LANDMARKS:"+We),kt.setOptions(ft),pt.addNode(kt),this.addKeepaliveNode(pt),this.graphRunner.attachProtoVectorListener(rt,(Jt,Lt)=>{this.addJsLandmarks(Jt),this.setLatestOutputTimestamp(Lt)}),this.graphRunner.attachEmptyPacketListener(rt,Jt=>{this.landmarks=[],this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachProtoVectorListener(We,(Jt,Lt)=>{this.adddJsWorldLandmarks(Jt),this.setLatestOutputTimestamp(Lt)}),this.graphRunner.attachEmptyPacketListener(We,Jt=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(Jt)}),this.outputSegmentationMasks&&(kt.addOutputStream("SEGMENTATION_MASK:"+st),this.keepStreamAlive(st),this.graphRunner.attachImageVectorListener(st,(Jt,Lt)=>{this.segmentationMasks=Jt.map(vn=>this.convertToMPMask(vn,!this.userCallback)),this.setLatestOutputTimestamp(Lt)}),this.graphRunner.attachEmptyPacketListener(st,Jt=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(Jt)}));const Rt=pt.serializeBinary();this.setGraph(new Uint8Array(Rt),!0)}}u.PoseLandmarker=St,St.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]}(pose_landmarker),Object.defineProperty(vision,"__esModule",{value:!0});var PoseLandmarker_1=vision.PoseLandmarker=ObjectDetector_1=vision.ObjectDetector=InteractiveSegmenter_1=vision.InteractiveSegmenter=ImageSegmenter_1=vision.ImageSegmenter=ImageEmbedder_1=vision.ImageEmbedder=ImageClassifier_1=vision.ImageClassifier=HandLandmarker_1=vision.HandLandmarker=GestureRecognizer_1=vision.GestureRecognizer=FaceStylizer_1=vision.FaceStylizer=FaceLandmarker_1=vision.FaceLandmarker=FaceDetector_1=vision.FaceDetector=MPMask_1=vision.MPMask=MPImage_1=vision.MPImage=FilesetResolver_1=vision.FilesetResolver=DrawingUtils_1=vision.DrawingUtils=void 0;const fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,image_1=image,mask_1=mask,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,pose_landmarker_1=pose_landmarker,DrawingUtils=drawing_utils_1.DrawingUtils;var DrawingUtils_1=vision.DrawingUtils=DrawingUtils;const FilesetResolver=fileset_resolver_1.FilesetResolver;var FilesetResolver_1=vision.FilesetResolver=FilesetResolver;const MPImage=image_1.MPImage;var MPImage_1=vision.MPImage=MPImage;const MPMask=mask_1.MPMask;var MPMask_1=vision.MPMask=MPMask;const FaceDetector=face_detector_1.FaceDetector;var FaceDetector_1=vision.FaceDetector=FaceDetector;const FaceLandmarker=face_landmarker_1.FaceLandmarker;var FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker;const FaceStylizer=face_stylizer_1.FaceStylizer;var FaceStylizer_1=vision.FaceStylizer=FaceStylizer;const GestureRecognizer=gesture_recognizer_1.GestureRecognizer;var GestureRecognizer_1=vision.GestureRecognizer=GestureRecognizer;const HandLandmarker=hand_landmarker_1.HandLandmarker;var HandLandmarker_1=vision.HandLandmarker=HandLandmarker;const ImageClassifier=image_classifier_1.ImageClassifier;var ImageClassifier_1=vision.ImageClassifier=ImageClassifier;const ImageEmbedder=image_embedder_1.ImageEmbedder;var ImageEmbedder_1=vision.ImageEmbedder=ImageEmbedder;const ImageSegmenter=image_segmenter_1.ImageSegmenter;var ImageSegmenter_1=vision.ImageSegmenter=ImageSegmenter;const InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter;var InteractiveSegmenter_1=vision.InteractiveSegmenter=InteractiveSegmenter;const ObjectDetector=object_detector_1.ObjectDetector;var ObjectDetector_1=vision.ObjectDetector=ObjectDetector;const PoseLandmarker=pose_landmarker_1.PoseLandmarker;PoseLandmarker_1=vision.PoseLandmarker=PoseLandmarker},99477:function(u,n,A){"use strict";A.r(n),A.d(n,{ACESFilmicToneMapping:function(){return aa},AddEquation:function(){return Jt},AddOperation:function(){return Kr},AdditiveAnimationBlendMode:function(){return ku},AdditiveBlending:function(){return pt},AlphaFormat:function(){return fp},AlwaysCompare:function(){return Pd},AlwaysDepth:function(){return Pi},AlwaysStencilFunc:function(){return Nl},AmbientLight:function(){return kv},AmbientLightProbe:function(){return J3},AnimationAction:function(){return Xv},AnimationClip:function(){return Rf},AnimationLoader:function(){return v0},AnimationMixer:function(){return aE},AnimationObjectGroup:function(){return yA},AnimationUtils:function(){return MM},ArcCurve:function(){return lv},ArrayCamera:function(){return df},ArrowHelper:function(){return _E},Audio:function(){return Wv},AudioAnalyser:function(){return Qv},AudioContext:function(){return dA},AudioListener:function(){return $3},AudioLoader:function(){return K3},AxesHelper:function(){return Pt},BackSide:function(){return We},BasicDepthPacking:function(){return Ap},BasicShadowMap:function(){return q},Bone:function(){return Ym},BooleanKeyframeTrack:function(){return Ms},Box2:function(){return pE},Box3:function(){return Lo},Box3Helper:function(){return $n},BoxGeometry:function(){return Rc},BoxHelper:function(){return yE},BufferAttribute:function(){return uo},BufferGeometry:function(){return xi},BufferGeometryLoader:function(){return zv},ByteType:function(){return ks},Cache:function(){return _h},Camera:function(){return Wo},CameraHelper:function(){return AE},CanvasTexture:function(){return _3},CapsuleGeometry:function(){return i0},CatmullRomCurve3:function(){return pv},CineonToneMapping:function(){return Ss},CircleGeometry:function(){return Wg},ClampToEdgeWrapping:function(){return Br},Clock:function(){return jv},Color:function(){return pr},ColorKeyframeTrack:function(){return Tf},ColorManagement:function(){return Do},CompressedArrayTexture:function(){return Zm},CompressedTexture:function(){return qm},CompressedTextureLoader:function(){return N3},ConeGeometry:function(){return Qg},CubeCamera:function(){return Ip},CubeReflectionMapping:function(){return Ls},CubeRefractionMapping:function(){return ts},CubeTexture:function(){return Jo},CubeTextureLoader:function(){return H3},CubeUVReflectionMapping:function(){return Qs},CubicBezierCurve:function(){return Ef},CubicBezierCurve3:function(){return e0},CubicInterpolant:function(){return Bv},CullFaceBack:function(){return j},CullFaceFront:function(){return ee},CullFaceFrontBack:function(){return le},CullFaceNone:function(){return E},Curve:function(){return Pc},CurvePath:function(){return fv},CustomBlending:function(){return Rt},CustomToneMapping:function(){return Vs},CylinderGeometry:function(){return Vg},Cylindrical:function(){return cE},Data3DTexture:function(){return Po},DataArrayTexture:function(){return Ca},DataTexture:function(){return fh},DataTextureLoader:function(){return _0},DataUtils:function(){return $u},DecrementStencilOp:function(){return c1},DecrementWrapStencilOp:function(){return Ac},DefaultLoadingManager:function(){return im},DepthFormat:function(){return Fn},DepthStencilFormat:function(){return On},DepthTexture:function(){return I1},DirectionalLight:function(){return Lv},DirectionalLightHelper:function(){return n2},DiscreteInterpolant:function(){return Rv},DisplayP3ColorSpace:function(){return Jf},DodecahedronGeometry:function(){return Xg},DoubleSide:function(){return st},DstAlphaFactor:function(){return cs},DstColorFactor:function(){return nn},DynamicCopyUsage:function(){return Qc},DynamicDrawUsage:function(){return Wu},DynamicReadUsage:function(){return $p},EdgesGeometry:function(){return Oa},EllipseCurve:function(){return X1},EqualCompare:function(){return Dh},EqualDepth:function(){return Ln},EqualStencilFunc:function(){return bl},EquirectangularReflectionMapping:function(){return Ui},EquirectangularRefractionMapping:function(){return Yi},Euler:function(){return wp},EventDispatcher:function(){return Ma},ExtrudeGeometry:function(){return Zg},FileLoader:function(){return Ru},Float16BufferAttribute:function(){return uu},Float32BufferAttribute:function(){return wr},Float64BufferAttribute:function(){return bm},FloatType:function(){return No},Fog:function(){return jm},FogExp2:function(){return ud},FramebufferTexture:function(){return v3},FrontSide:function(){return rt},Frustum:function(){return od},GLBufferAttribute:function(){return w0},GLSL1:function(){return $f},GLSL3:function(){return sc},GreaterCompare:function(){return Hu},GreaterDepth:function(){return ni},GreaterEqualCompare:function(){return yp},GreaterEqualDepth:function(){return gr},GreaterEqualStencilFunc:function(){return Uu},GreaterStencilFunc:function(){return Oh},GridHelper:function(){return T0},Group:function(){return hf},HalfFloatType:function(){return _a},HemisphereLight:function(){return Fv},HemisphereLightHelper:function(){return gE},HemisphereLightProbe:function(){return Y3},IcosahedronGeometry:function(){return u0},ImageBitmapLoader:function(){return X3},ImageLoader:function(){return om},ImageUtils:function(){return cc},IncrementStencilOp:function(){return Fh},IncrementWrapStencilOp:function(){return qf},InstancedBufferAttribute:function(){return wu},InstancedBufferGeometry:function(){return Xi},InstancedInterleavedBuffer:function(){return Yv},InstancedMesh:function(){return iv},Int16BufferAttribute:function(){return Qh},Int32BufferAttribute:function(){return Xh},Int8BufferAttribute:function(){return Bc},IntType:function(){return Oo},InterleavedBuffer:function(){return Wm},InterleavedBufferAttribute:function(){return Up},Interpolant:function(){return wf},InterpolateDiscrete:function(){return Ho},InterpolateLinear:function(){return Ga},InterpolateSmooth:function(){return Ih},InvertStencilOp:function(){return Am},KeepStencilOp:function(){return Gu},KeyframeTrack:function(){return lp},LOD:function(){return Zy},LatheGeometry:function(){return bf},Layers:function(){return jh},LessCompare:function(){return Nu},LessDepth:function(){return Tn},LessEqualCompare:function(){return Ys},LessEqualDepth:function(){return Sn},LessEqualStencilFunc:function(){return Dd},LessStencilFunc:function(){return Ua},Light:function(){return yd},LightProbe:function(){return zc},Line:function(){return fd},Line3:function(){return uE},LineBasicMaterial:function(){return Rl},LineCurve:function(){return Ad},LineCurve3:function(){return hv},LineDashedMaterial:function(){return wv},LineLoop:function(){return gd},LineSegments:function(){return Hp},LinearEncoding:function(){return zu},LinearFilter:function(){return co},LinearInterpolant:function(){return A0},LinearMipMapLinearFilter:function(){return al},LinearMipMapNearestFilter:function(){return us},LinearMipmapLinearFilter:function(){return ho},LinearMipmapNearestFilter:function(){return za},LinearSRGBColorSpace:function(){return oc},LinearToneMapping:function(){return lo},Loader:function(){return $l},LoaderUtils:function(){return uA},LoadingManager:function(){return y0},LoopOnce:function(){return mi},LoopPingPong:function(){return Ul},LoopRepeat:function(){return ii},LuminanceAlphaFormat:function(){return cn},LuminanceFormat:function(){return wt},MOUSE:function(){return m},Material:function(){return fa},MaterialLoader:function(){return If},MathUtils:function(){return tg},Matrix3:function(){return Ai},Matrix4:function(){return si},MaxEquation:function(){return br},Mesh:function(){return fo},MeshBasicMaterial:function(){return Vl},MeshDepthMaterial:function(){return Um},MeshDistanceMaterial:function(){return Nm},MeshLambertMaterial:function(){return Sv},MeshMatcapMaterial:function(){return iA},MeshNormalMaterial:function(){return Cv},MeshPhongMaterial:function(){return rA},MeshPhysicalMaterial:function(){return Mv},MeshStandardMaterial:function(){return Bu},MeshToonMaterial:function(){return xv},MinEquation:function(){return nr},MirroredRepeatWrapping:function(){return Ni},MixOperation:function(){return Ro},MultiplyBlending:function(){return kt},MultiplyOperation:function(){return Li},NearestFilter:function(){return ki},NearestMipMapLinearFilter:function(){return Io},NearestMipMapNearestFilter:function(){return ka},NearestMipmapLinearFilter:function(){return ps},NearestMipmapNearestFilter:function(){return la},NeverCompare:function(){return Zf},NeverDepth:function(){return Ir},NeverStencilFunc:function(){return Gs},NoBlending:function(){return St},NoColorSpace:function(){return ic},NoToneMapping:function(){return ao},NormalAnimationBlendMode:function(){return mp},NormalBlending:function(){return _t},NotEqualCompare:function(){return ju},NotEqualDepth:function(){return yr},NotEqualStencilFunc:function(){return ym},NumberKeyframeTrack:function(){return nm},Object3D:function(){return Ti},ObjectLoader:function(){return V3},ObjectSpaceNormalMap:function(){return Yf},OctahedronGeometry:function(){return $g},OneFactor:function(){return Dn},OneMinusDstAlphaFactor:function(){return Wn},OneMinusDstColorFactor:function(){return Bn},OneMinusSrcAlphaFactor:function(){return vi},OneMinusSrcColorFactor:function(){return Wi},OrthographicCamera:function(){return Im},PCFShadowMap:function(){return pe},PCFSoftShadowMap:function(){return ue},PMREMGenerator:function(){return Fm},Path:function(){return jg},PerspectiveCamera:function(){return Gi},Plane:function(){return Fa},PlaneGeometry:function(){return _u},PlaneHelper:function(){return vE},PointLight:function(){return M0},PointLightHelper:function(){return fE},Points:function(){return V1},PointsMaterial:function(){return H1},PolarGridHelper:function(){return mE},PolyhedronGeometry:function(){return yh},PositionalAudio:function(){return Ff},PropertyBinding:function(){return Zi},PropertyMixer:function(){return gA},QuadraticBezierCurve:function(){return Hg},QuadraticBezierCurve3:function(){return t0},Quaternion:function(){return Zs},QuaternionKeyframeTrack:function(){return Bf},QuaternionLinearInterpolant:function(){return aA},RED_GREEN_RGTC2_Format:function(){return ns},RED_RGTC1_Format:function(){return ws},REVISION:function(){return d},RGBADepthPacking:function(){return Od},RGBAFormat:function(){return $e},RGBAIntegerFormat:function(){return at},RGBA_ASTC_10x10_Format:function(){return pa},RGBA_ASTC_10x5_Format:function(){return Hi},RGBA_ASTC_10x6_Format:function(){return Vi},RGBA_ASTC_10x8_Format:function(){return zi},RGBA_ASTC_12x10_Format:function(){return mo},RGBA_ASTC_12x12_Format:function(){return hs},RGBA_ASTC_4x4_Format:function(){return Cn},RGBA_ASTC_5x4_Format:function(){return kn},RGBA_ASTC_5x5_Format:function(){return mr},RGBA_ASTC_6x5_Format:function(){return Hr},RGBA_ASTC_6x6_Format:function(){return pi},RGBA_ASTC_8x5_Format:function(){return gi},RGBA_ASTC_8x6_Format:function(){return Qn},RGBA_ASTC_8x8_Format:function(){return qr},RGBA_BPTC_Format:function(){return cl},RGBA_ETC2_EAC_Format:function(){return qt},RGBA_PVRTC_2BPPV1_Format:function(){return Me},RGBA_PVRTC_4BPPV1_Format:function(){return ln},RGBA_S3TC_DXT1_Format:function(){return et},RGBA_S3TC_DXT3_Format:function(){return dt},RGBA_S3TC_DXT5_Format:function(){return bt},RGB_ETC1_Format:function(){return je},RGB_ETC2_Format:function(){return lt},RGB_PVRTC_2BPPV1_Format:function(){return pn},RGB_PVRTC_4BPPV1_Format:function(){return Tt},RGB_S3TC_DXT1_Format:function(){return De},RGFormat:function(){return ke},RGIntegerFormat:function(){return Fe},RawShaderMaterial:function(){return Sf},Ray:function(){return Cp},Raycaster:function(){return lE},RectAreaLight:function(){return sm},RedFormat:function(){return lr},RedIntegerFormat:function(){return He},ReinhardToneMapping:function(){return sa},RepeatWrapping:function(){return Ko},ReplaceStencilOp:function(){return l1},ReverseSubtractEquation:function(){return vn},RingGeometry:function(){return Fl},SIGNED_RED_GREEN_RGTC2_Format:function(){return zs},SIGNED_RED_RGTC1_Format:function(){return ro},SRGBColorSpace:function(){return ui},Scene:function(){return Pg},ShaderChunk:function(){return Bi},ShaderLib:function(){return Oc},ShaderMaterial:function(){return Wr},ShadowMaterial:function(){return Lc},Shape:function(){return Mf},ShapeGeometry:function(){return d0},ShapePath:function(){return Gr},ShapeUtils:function(){return Wp},ShortType:function(){return ca},Skeleton:function(){return Np},SkeletonHelper:function(){return hE},SkinnedMesh:function(){return k1},Source:function(){return xc},Sphere:function(){return wa},SphereGeometry:function(){return em},Spherical:function(){return ec},SphericalHarmonics3:function(){return x0},SplineCurve:function(){return n0},SpotLight:function(){return b0},SpotLightHelper:function(){return dE},Sprite:function(){return O1},SpriteMaterial:function(){return Vm},SrcAlphaFactor:function(){return ti},SrcAlphaSaturateFactor:function(){return hr},SrcColorFactor:function(){return Di},StaticCopyUsage:function(){return Na},StaticDrawUsage:function(){return Zp},StaticReadUsage:function(){return Lh},StereoCamera:function(){return q3},StreamCopyUsage:function(){return kh},StreamDrawUsage:function(){return Ph},StreamReadUsage:function(){return Hl},StringKeyframeTrack:function(){return vh},SubtractEquation:function(){return Lt},SubtractiveBlending:function(){return ft},TOUCH:function(){return o},TangentSpaceNormalMap:function(){return wi},TetrahedronGeometry:function(){return Vp},Texture:function(){return io},TextureLoader:function(){return lA},TorusGeometry:function(){return h0},TorusKnotGeometry:function(){return f0},Triangle:function(){return Ya},TriangleFanDrawMode:function(){return Kf},TriangleStripDrawMode:function(){return Xf},TrianglesDrawMode:function(){return a1},TubeGeometry:function(){return g0},TwoPassDoubleSide:function(){return yt},UVMapping:function(){return va},Uint16BufferAttribute:function(){return Zc},Uint32BufferAttribute:function(){return Jn},Uint8BufferAttribute:function(){return d1},Uint8ClampedBufferAttribute:function(){return h1},Uniform:function(){return vA},UniformsGroup:function(){return S0},UniformsLib:function(){return Xn},UniformsUtils:function(){return Au},UnsignedByteType:function(){return Fo},UnsignedInt248Type:function(){return Ea},UnsignedIntType:function(){return ds},UnsignedShort4444Type:function(){return ll},UnsignedShort5551Type:function(){return gc},UnsignedShortType:function(){return Xs},VSMShadowMap:function(){return xt},Vector2:function(){return fn},Vector3:function(){return Xe},Vector4:function(){return Ji},VectorKeyframeTrack:function(){return rm},VideoTexture:function(){return y3},WebGL1Renderer:function(){return Hm},WebGL3DRenderTarget:function(){return da},WebGLArrayRenderTarget:function(){return Ku},WebGLCoordinateSystem:function(){return gs},WebGLCubeRenderTarget:function(){return yu},WebGLMultipleRenderTargets:function(){return bo},WebGLRenderTarget:function(){return qs},WebGLRenderer:function(){return ff},WebGLUtils:function(){return Yy},WebGPUCoordinateSystem:function(){return eu},WireframeGeometry:function(){return Ev},WrapAroundEnding:function(){return gp},ZeroCurvatureEnding:function(){return ba},ZeroFactor:function(){return Rr},ZeroSlopeEnding:function(){return mc},ZeroStencilOp:function(){return Ks},_SRGBAFormat:function(){return fs},sRGBEncoding:function(){return El}});var w=A(25108);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const d="154",m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},E=0,j=1,ee=2,le=3,q=0,pe=1,ue=2,xt=3,rt=0,We=1,st=2,yt=2,St=0,_t=1,pt=2,ft=3,kt=4,Rt=5,Jt=100,Lt=101,vn=102,nr=103,br=104,Rr=200,Dn=201,Di=202,Wi=203,ti=204,vi=205,cs=206,Wn=207,nn=208,Bn=209,hr=210,Ir=0,Pi=1,Tn=2,Sn=3,Ln=4,gr=5,ni=6,yr=7,Li=0,Ro=1,Kr=2,ao=0,lo=1,sa=2,Ss=3,aa=4,Vs=5,va=300,Ls=301,ts=302,Ui=303,Yi=304,Qs=306,Ko=1e3,Br=1001,Ni=1002,ki=1003,la=1004,ka=1004,ps=1005,Io=1005,co=1006,za=1007,us=1007,ho=1008,al=1008,Fo=1009,ks=1010,ca=1011,Xs=1012,Oo=1013,ds=1014,No=1015,_a=1016,ll=1017,gc=1018,Ea=1020,fp=1021,$e=1023,wt=1024,cn=1025,Fn=1026,On=1027,lr=1028,He=1029,ke=1030,Fe=1031,at=1033,De=33776,et=33777,dt=33778,bt=33779,Tt=35840,pn=35841,ln=35842,Me=35843,je=36196,lt=37492,qt=37496,Cn=37808,kn=37809,mr=37810,Hr=37811,pi=37812,gi=37813,Qn=37814,qr=37815,Hi=37816,Vi=37817,zi=37818,pa=37819,mo=37820,hs=37821,cl=36492,ws=36283,ro=36284,ns=36285,zs=36286,mi=2200,ii=2201,Ul=2202,Ho=2300,Ga=2301,Ih=2302,ba=2400,mc=2401,gp=2402,mp=2500,ku=2501,a1=0,Xf=1,Kf=2,zu=3e3,El=3001,Ap=3200,Od=3201,wi=0,Yf=1,ic="",ui="srgb",oc="srgb-linear",Jf="display-p3",Ks=0,Gu=7680,l1=7681,Fh=7682,c1=7683,qf=34055,Ac=34056,Am=5386,Gs=512,Ua=513,bl=514,Dd=515,Oh=516,ym=517,Uu=518,Nl=519,Zf=512,Nu=513,Dh=514,Ys=515,Hu=516,ju=517,yp=518,Pd=519,Zp=35044,Wu=35048,Ph=35040,Lh=35045,$p=35049,Hl=35041,Na=35046,Qc=35050,kh=35042,$f="100",sc="300 es",fs=1035,gs=2e3,eu=2001;class Ma{addEventListener(e,l){this._listeners===void 0&&(this._listeners={});const f=this._listeners;f[e]===void 0&&(f[e]=[]),f[e].indexOf(l)===-1&&f[e].push(l)}hasEventListener(e,l){if(this._listeners===void 0)return!1;const f=this._listeners;return f[e]!==void 0&&f[e].indexOf(l)!==-1}removeEventListener(e,l){if(this._listeners===void 0)return;const v=this._listeners[e];if(v!==void 0){const M=v.indexOf(l);M!==-1&&v.splice(M,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const f=this._listeners[e.type];if(f!==void 0){e.target=this;const v=f.slice(0);for(let M=0,B=v.length;M<B;M++)v[M].call(this,e);e.target=null}}}const Js=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zh=1234567;const yc=Math.PI/180,vc=180/Math.PI;function Ha(){const C=Math.random()*4294967295|0,e=Math.random()*4294967295|0,l=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(Js[C&255]+Js[C>>8&255]+Js[C>>16&255]+Js[C>>24&255]+"-"+Js[e&255]+Js[e>>8&255]+"-"+Js[e>>16&15|64]+Js[e>>24&255]+"-"+Js[l&63|128]+Js[l>>8&255]+"-"+Js[l>>16&255]+Js[l>>24&255]+Js[f&255]+Js[f>>8&255]+Js[f>>16&255]+Js[f>>24&255]).toLowerCase()}function _o(C,e,l){return Math.max(e,Math.min(l,C))}function Ld(C,e){return(C%e+e)%e}function Gh(C,e,l,f,v){return f+(C-e)*(v-f)/(l-e)}function tu(C,e,l){return C!==e?(l-C)/(e-C):0}function _c(C,e,l){return(1-l)*C+l*e}function nu(C,e,l,f){return _c(C,e,1-Math.exp(-l*f))}function kd(C,e=1){return e-Math.abs(Ld(C,e*2)-e)}function Ml(C,e,l){return C<=e?0:C>=l?1:(C=(C-e)/(l-e),C*C*(3-2*C))}function xl(C,e,l){return C<=e?0:C>=l?1:(C=(C-e)/(l-e),C*C*C*(C*(C*6-15)+10))}function vp(C,e){return C+Math.floor(Math.random()*(e-C+1))}function Ec(C,e){return C+Math.random()*(e-C)}function bc(C){return C*(.5-Math.random())}function ru(C){C!==void 0&&(zh=C);let e=zh+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zd(C){return C*yc}function eg(C){return C*vc}function _p(C){return(C&C-1)===0&&C!==0}function pl(C){return Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))}function xa(C){return Math.pow(2,Math.floor(Math.log(C)/Math.LN2))}function jo(C,e,l,f,v){const M=Math.cos,B=Math.sin,I=M(l/2),k=B(l/2),N=M((e+f)/2),X=B((e+f)/2),Z=M((e-f)/2),$=B((e-f)/2),J=M((f-e)/2),re=B((f-e)/2);switch(v){case"XYX":C.set(I*X,k*Z,k*$,I*N);break;case"YZY":C.set(k*$,I*X,k*Z,I*N);break;case"ZXZ":C.set(k*Z,k*$,I*X,I*N);break;case"XZX":C.set(I*X,k*re,k*J,I*N);break;case"YXY":C.set(k*J,I*X,k*re,I*N);break;case"ZYZ":C.set(k*re,k*J,I*X,I*N);break;default:w.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+v)}}function ua(C,e){switch(e.constructor){case Float32Array:return C;case Uint32Array:return C/4294967295;case Uint16Array:return C/65535;case Uint8Array:return C/255;case Int32Array:return Math.max(C/2147483647,-1);case Int16Array:return Math.max(C/32767,-1);case Int8Array:return Math.max(C/127,-1);default:throw new Error("Invalid component type.")}}function Yr(C,e){switch(e.constructor){case Float32Array:return C;case Uint32Array:return Math.round(C*4294967295);case Uint16Array:return Math.round(C*65535);case Uint8Array:return Math.round(C*255);case Int32Array:return Math.round(C*2147483647);case Int16Array:return Math.round(C*32767);case Int8Array:return Math.round(C*127);default:throw new Error("Invalid component type.")}}const tg={DEG2RAD:yc,RAD2DEG:vc,generateUUID:Ha,clamp:_o,euclideanModulo:Ld,mapLinear:Gh,inverseLerp:tu,lerp:_c,damp:nu,pingpong:kd,smoothstep:Ml,smootherstep:xl,randInt:vp,randFloat:Ec,randFloatSpread:bc,seededRandom:ru,degToRad:zd,radToDeg:eg,isPowerOfTwo:_p,ceilPowerOfTwo:pl,floorPowerOfTwo:xa,setQuaternionFromProperEuler:jo,normalize:Yr,denormalize:ua};class fn{constructor(e=0,l=0){fn.prototype.isVector2=!0,this.x=e,this.y=l}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,l){return this.x=e,this.y=l,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this}addScaledVector(e,l){return this.x+=e.x*l,this.y+=e.y*l,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const l=this.x,f=this.y,v=e.elements;return this.x=v[0]*l+v[3]*f+v[6],this.y=v[1]*l+v[4]*f+v[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,l){return this.x=Math.max(e.x,Math.min(l.x,this.x)),this.y=Math.max(e.y,Math.min(l.y,this.y)),this}clampScalar(e,l){return this.x=Math.max(e,Math.min(l,this.x)),this.y=Math.max(e,Math.min(l,this.y)),this}clampLength(e,l){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(l,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const l=Math.sqrt(this.lengthSq()*e.lengthSq());if(l===0)return Math.PI/2;const f=this.dot(e)/l;return Math.acos(_o(f,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const l=this.x-e.x,f=this.y-e.y;return l*l+f*f}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this}lerpVectors(e,l,f){return this.x=e.x+(l.x-e.x)*f,this.y=e.y+(l.y-e.y)*f,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,l=0){return this.x=e[l],this.y=e[l+1],this}toArray(e=[],l=0){return e[l]=this.x,e[l+1]=this.y,e}fromBufferAttribute(e,l){return this.x=e.getX(l),this.y=e.getY(l),this}rotateAround(e,l){const f=Math.cos(l),v=Math.sin(l),M=this.x-e.x,B=this.y-e.y;return this.x=M*f-B*v+e.x,this.y=M*v+B*f+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ai{constructor(e,l,f,v,M,B,I,k,N){Ai.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,l,f,v,M,B,I,k,N)}set(e,l,f,v,M,B,I,k,N){const X=this.elements;return X[0]=e,X[1]=v,X[2]=I,X[3]=l,X[4]=M,X[5]=k,X[6]=f,X[7]=B,X[8]=N,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const l=this.elements,f=e.elements;return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],this}extractBasis(e,l,f){return e.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const l=e.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,l){const f=e.elements,v=l.elements,M=this.elements,B=f[0],I=f[3],k=f[6],N=f[1],X=f[4],Z=f[7],$=f[2],J=f[5],re=f[8],fe=v[0],se=v[3],ne=v[6],be=v[1],he=v[4],Se=v[7],Oe=v[2],Qe=v[5],Ze=v[8];return M[0]=B*fe+I*be+k*Oe,M[3]=B*se+I*he+k*Qe,M[6]=B*ne+I*Se+k*Ze,M[1]=N*fe+X*be+Z*Oe,M[4]=N*se+X*he+Z*Qe,M[7]=N*ne+X*Se+Z*Ze,M[2]=$*fe+J*be+re*Oe,M[5]=$*se+J*he+re*Qe,M[8]=$*ne+J*Se+re*Ze,this}multiplyScalar(e){const l=this.elements;return l[0]*=e,l[3]*=e,l[6]*=e,l[1]*=e,l[4]*=e,l[7]*=e,l[2]*=e,l[5]*=e,l[8]*=e,this}determinant(){const e=this.elements,l=e[0],f=e[1],v=e[2],M=e[3],B=e[4],I=e[5],k=e[6],N=e[7],X=e[8];return l*B*X-l*I*N-f*M*X+f*I*k+v*M*N-v*B*k}invert(){const e=this.elements,l=e[0],f=e[1],v=e[2],M=e[3],B=e[4],I=e[5],k=e[6],N=e[7],X=e[8],Z=X*B-I*N,$=I*k-X*M,J=N*M-B*k,re=l*Z+f*$+v*J;if(re===0)return this.set(0,0,0,0,0,0,0,0,0);const fe=1/re;return e[0]=Z*fe,e[1]=(v*N-X*f)*fe,e[2]=(I*f-v*B)*fe,e[3]=$*fe,e[4]=(X*l-v*k)*fe,e[5]=(v*M-I*l)*fe,e[6]=J*fe,e[7]=(f*k-N*l)*fe,e[8]=(B*l-f*M)*fe,this}transpose(){let e;const l=this.elements;return e=l[1],l[1]=l[3],l[3]=e,e=l[2],l[2]=l[6],l[6]=e,e=l[5],l[5]=l[7],l[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const l=this.elements;return e[0]=l[0],e[1]=l[3],e[2]=l[6],e[3]=l[1],e[4]=l[4],e[5]=l[7],e[6]=l[2],e[7]=l[5],e[8]=l[8],this}setUvTransform(e,l,f,v,M,B,I){const k=Math.cos(M),N=Math.sin(M);return this.set(f*k,f*N,-f*(k*B+N*I)+B+e,-v*N,v*k,-v*(-N*B+k*I)+I+l,0,0,1),this}scale(e,l){return this.premultiply(Gd.makeScale(e,l)),this}rotate(e){return this.premultiply(Gd.makeRotation(-e)),this}translate(e,l){return this.premultiply(Gd.makeTranslation(e,l)),this}makeTranslation(e,l){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,l,0,0,1),this}makeRotation(e){const l=Math.cos(e),f=Math.sin(e);return this.set(l,-f,0,f,l,0,0,0,1),this}makeScale(e,l){return this.set(e,0,0,0,l,0,0,0,1),this}equals(e){const l=this.elements,f=e.elements;for(let v=0;v<9;v++)if(l[v]!==f[v])return!1;return!0}fromArray(e,l=0){for(let f=0;f<9;f++)this.elements[f]=e[f+l];return this}toArray(e=[],l=0){const f=this.elements;return e[l]=f[0],e[l+1]=f[1],e[l+2]=f[2],e[l+3]=f[3],e[l+4]=f[4],e[l+5]=f[5],e[l+6]=f[6],e[l+7]=f[7],e[l+8]=f[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Gd=new Ai;function vm(C){for(let e=C.length-1;e>=0;--e)if(C[e]>=65535)return!0;return!1}const Ud={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ac(C,e){return new Ud[C](e)}function Vu(C){return document.createElementNS("http://www.w3.org/1999/xhtml",C)}const Ep={};function Mc(C){C in Ep||(Ep[C]=!0,w.warn(C))}function iu(C){return C<.04045?C*.0773993808:Math.pow(C*.9478672986+.0521327014,2.4)}function Uh(C){return C<.0031308?C*12.92:1.055*Math.pow(C,.41666)-.055}const Qu=new Ai().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),_m=new Ai().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Xu(C){return C.convertSRGBToLinear().applyMatrix3(_m)}function ja(C){return C.applyMatrix3(Qu).convertLinearToSRGB()}const ei={[oc]:C=>C,[ui]:C=>C.convertSRGBToLinear(),[Jf]:Xu},Xc={[oc]:C=>C,[ui]:C=>C.convertLinearToSRGB(),[Jf]:ja},Do={enabled:!0,get legacyMode(){return w.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(C){w.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!C},get workingColorSpace(){return oc},set workingColorSpace(C){w.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(C,e,l){if(this.enabled===!1||e===l||!e||!l)return C;const f=ei[e],v=Xc[l];if(f===void 0||v===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${l}".`);return v(f(C))},fromWorkingColorSpace:function(C,e){return this.convert(C,this.workingColorSpace,e)},toWorkingColorSpace:function(C,e){return this.convert(C,e,this.workingColorSpace)}};let lc;class cc{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let l;if(e instanceof HTMLCanvasElement)l=e;else{lc===void 0&&(lc=Vu("canvas")),lc.width=e.width,lc.height=e.height;const f=lc.getContext("2d");e instanceof ImageData?f.putImageData(e,0,0):f.drawImage(e,0,0,e.width,e.height),l=lc}return l.width>2048||l.height>2048?(w.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),l.toDataURL("image/jpeg",.6)):l.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const l=Vu("canvas");l.width=e.width,l.height=e.height;const f=l.getContext("2d");f.drawImage(e,0,0,e.width,e.height);const v=f.getImageData(0,0,e.width,e.height),M=v.data;for(let B=0;B<M.length;B++)M[B]=iu(M[B]/255)*255;return f.putImageData(v,0,0),l}else if(e.data){const l=e.data.slice(0);for(let f=0;f<l.length;f++)l instanceof Uint8Array||l instanceof Uint8ClampedArray?l[f]=Math.floor(iu(l[f]/255)*255):l[f]=iu(l[f]);return{data:l,width:e.width,height:e.height}}else return w.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let bp=0;class xc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:bp++}),this.uuid=Ha(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const l=e===void 0||typeof e=="string";if(!l&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const f={uuid:this.uuid,url:""},v=this.data;if(v!==null){let M;if(Array.isArray(v)){M=[];for(let B=0,I=v.length;B<I;B++)v[B].isDataTexture?M.push(Eo(v[B].image)):M.push(Eo(v[B]))}else M=Eo(v);f.url=M}return l||(e.images[this.uuid]=f),f}}function Eo(C){return typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&C instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&C instanceof ImageBitmap?cc.getDataURL(C):C.data?{data:Array.from(C.data),width:C.width,height:C.height,type:C.data.constructor.name}:(w.warn("THREE.Texture: Unable to serialize Texture."),{})}let Cl=0;class io extends Ma{constructor(e=io.DEFAULT_IMAGE,l=io.DEFAULT_MAPPING,f=Br,v=Br,M=co,B=ho,I=$e,k=Fo,N=io.DEFAULT_ANISOTROPY,X=ic){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Cl++}),this.uuid=Ha(),this.name="",this.source=new xc(e),this.mipmaps=[],this.mapping=l,this.channel=0,this.wrapS=f,this.wrapT=v,this.magFilter=M,this.minFilter=B,this.anisotropy=N,this.format=I,this.internalFormat=null,this.type=k,this.offset=new fn(0,0),this.repeat=new fn(1,1),this.center=new fn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ai,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof X=="string"?this.colorSpace=X:(Mc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=X===El?ui:ic),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const l=e===void 0||typeof e=="string";if(!l&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const f={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),l||(e.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==va)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ko:e.x=e.x-Math.floor(e.x);break;case Br:e.x=e.x<0?0:1;break;case Ni:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ko:e.y=e.y-Math.floor(e.y);break;case Br:e.y=e.y<0?0:1;break;case Ni:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Mc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ui?El:zu}set encoding(e){Mc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===El?ui:ic}}io.DEFAULT_IMAGE=null,io.DEFAULT_MAPPING=va,io.DEFAULT_ANISOTROPY=1;class Ji{constructor(e=0,l=0,f=0,v=1){Ji.prototype.isVector4=!0,this.x=e,this.y=l,this.z=f,this.w=v}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,l,f,v){return this.x=e,this.y=l,this.z=f,this.w=v,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this.w=e.w+l.w,this}addScaledVector(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l,this.w+=e.w*l,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this.z=e.z-l.z,this.w=e.w-l.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const l=this.x,f=this.y,v=this.z,M=this.w,B=e.elements;return this.x=B[0]*l+B[4]*f+B[8]*v+B[12]*M,this.y=B[1]*l+B[5]*f+B[9]*v+B[13]*M,this.z=B[2]*l+B[6]*f+B[10]*v+B[14]*M,this.w=B[3]*l+B[7]*f+B[11]*v+B[15]*M,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const l=Math.sqrt(1-e.w*e.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/l,this.y=e.y/l,this.z=e.z/l),this}setAxisAngleFromRotationMatrix(e){let l,f,v,M;const k=e.elements,N=k[0],X=k[4],Z=k[8],$=k[1],J=k[5],re=k[9],fe=k[2],se=k[6],ne=k[10];if(Math.abs(X-$)<.01&&Math.abs(Z-fe)<.01&&Math.abs(re-se)<.01){if(Math.abs(X+$)<.1&&Math.abs(Z+fe)<.1&&Math.abs(re+se)<.1&&Math.abs(N+J+ne-3)<.1)return this.set(1,0,0,0),this;l=Math.PI;const he=(N+1)/2,Se=(J+1)/2,Oe=(ne+1)/2,Qe=(X+$)/4,Ze=(Z+fe)/4,ht=(re+se)/4;return he>Se&&he>Oe?he<.01?(f=0,v=.707106781,M=.707106781):(f=Math.sqrt(he),v=Qe/f,M=Ze/f):Se>Oe?Se<.01?(f=.707106781,v=0,M=.707106781):(v=Math.sqrt(Se),f=Qe/v,M=ht/v):Oe<.01?(f=.707106781,v=.707106781,M=0):(M=Math.sqrt(Oe),f=Ze/M,v=ht/M),this.set(f,v,M,l),this}let be=Math.sqrt((se-re)*(se-re)+(Z-fe)*(Z-fe)+($-X)*($-X));return Math.abs(be)<.001&&(be=1),this.x=(se-re)/be,this.y=(Z-fe)/be,this.z=($-X)/be,this.w=Math.acos((N+J+ne-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,l){return this.x=Math.max(e.x,Math.min(l.x,this.x)),this.y=Math.max(e.y,Math.min(l.y,this.y)),this.z=Math.max(e.z,Math.min(l.z,this.z)),this.w=Math.max(e.w,Math.min(l.w,this.w)),this}clampScalar(e,l){return this.x=Math.max(e,Math.min(l,this.x)),this.y=Math.max(e,Math.min(l,this.y)),this.z=Math.max(e,Math.min(l,this.z)),this.w=Math.max(e,Math.min(l,this.w)),this}clampLength(e,l){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(l,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this.z+=(e.z-this.z)*l,this.w+=(e.w-this.w)*l,this}lerpVectors(e,l,f){return this.x=e.x+(l.x-e.x)*f,this.y=e.y+(l.y-e.y)*f,this.z=e.z+(l.z-e.z)*f,this.w=e.w+(l.w-e.w)*f,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,l=0){return this.x=e[l],this.y=e[l+1],this.z=e[l+2],this.w=e[l+3],this}toArray(e=[],l=0){return e[l]=this.x,e[l+1]=this.y,e[l+2]=this.z,e[l+3]=this.w,e}fromBufferAttribute(e,l){return this.x=e.getX(l),this.y=e.getY(l),this.z=e.getZ(l),this.w=e.getW(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class qs extends Ma{constructor(e=1,l=1,f={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=l,this.depth=1,this.scissor=new Ji(0,0,e,l),this.scissorTest=!1,this.viewport=new Ji(0,0,e,l);const v={width:e,height:l,depth:1};f.encoding!==void 0&&(Mc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),f.colorSpace=f.encoding===El?ui:ic),this.texture=new io(v,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=f.generateMipmaps!==void 0?f.generateMipmaps:!1,this.texture.internalFormat=f.internalFormat!==void 0?f.internalFormat:null,this.texture.minFilter=f.minFilter!==void 0?f.minFilter:co,this.depthBuffer=f.depthBuffer!==void 0?f.depthBuffer:!0,this.stencilBuffer=f.stencilBuffer!==void 0?f.stencilBuffer:!1,this.depthTexture=f.depthTexture!==void 0?f.depthTexture:null,this.samples=f.samples!==void 0?f.samples:0}setSize(e,l,f=1){(this.width!==e||this.height!==l||this.depth!==f)&&(this.width=e,this.height=l,this.depth=f,this.texture.image.width=e,this.texture.image.height=l,this.texture.image.depth=f,this.dispose()),this.viewport.set(0,0,e,l),this.scissor.set(0,0,e,l)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const l=Object.assign({},e.texture.image);return this.texture.source=new xc(l),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ca extends io{constructor(e=null,l=1,f=1,v=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:l,height:f,depth:v},this.magFilter=ki,this.minFilter=ki,this.wrapR=Br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ku extends qs{constructor(e=1,l=1,f=1){super(e,l),this.isWebGLArrayRenderTarget=!0,this.depth=f,this.texture=new Ca(null,e,l,f),this.texture.isRenderTargetTexture=!0}}class Po extends io{constructor(e=null,l=1,f=1,v=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:l,height:f,depth:v},this.magFilter=ki,this.minFilter=ki,this.wrapR=Br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class da extends qs{constructor(e=1,l=1,f=1){super(e,l),this.isWebGL3DRenderTarget=!0,this.depth=f,this.texture=new Po(null,e,l,f),this.texture.isRenderTargetTexture=!0}}class bo extends qs{constructor(e=1,l=1,f=1,v={}){super(e,l,v),this.isWebGLMultipleRenderTargets=!0;const M=this.texture;this.texture=[];for(let B=0;B<f;B++)this.texture[B]=M.clone(),this.texture[B].isRenderTargetTexture=!0}setSize(e,l,f=1){if(this.width!==e||this.height!==l||this.depth!==f){this.width=e,this.height=l,this.depth=f;for(let v=0,M=this.texture.length;v<M;v++)this.texture[v].image.width=e,this.texture[v].image.height=l,this.texture[v].image.depth=f;this.dispose()}return this.viewport.set(0,0,e,l),this.scissor.set(0,0,e,l),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let l=0,f=e.texture.length;l<f;l++)this.texture[l]=e.texture[l].clone(),this.texture[l].isRenderTargetTexture=!0;return this}}class Zs{constructor(e=0,l=0,f=0,v=1){this.isQuaternion=!0,this._x=e,this._y=l,this._z=f,this._w=v}static slerpFlat(e,l,f,v,M,B,I){let k=f[v+0],N=f[v+1],X=f[v+2],Z=f[v+3];const $=M[B+0],J=M[B+1],re=M[B+2],fe=M[B+3];if(I===0){e[l+0]=k,e[l+1]=N,e[l+2]=X,e[l+3]=Z;return}if(I===1){e[l+0]=$,e[l+1]=J,e[l+2]=re,e[l+3]=fe;return}if(Z!==fe||k!==$||N!==J||X!==re){let se=1-I;const ne=k*$+N*J+X*re+Z*fe,be=ne>=0?1:-1,he=1-ne*ne;if(he>Number.EPSILON){const Oe=Math.sqrt(he),Qe=Math.atan2(Oe,ne*be);se=Math.sin(se*Qe)/Oe,I=Math.sin(I*Qe)/Oe}const Se=I*be;if(k=k*se+$*Se,N=N*se+J*Se,X=X*se+re*Se,Z=Z*se+fe*Se,se===1-I){const Oe=1/Math.sqrt(k*k+N*N+X*X+Z*Z);k*=Oe,N*=Oe,X*=Oe,Z*=Oe}}e[l]=k,e[l+1]=N,e[l+2]=X,e[l+3]=Z}static multiplyQuaternionsFlat(e,l,f,v,M,B){const I=f[v],k=f[v+1],N=f[v+2],X=f[v+3],Z=M[B],$=M[B+1],J=M[B+2],re=M[B+3];return e[l]=I*re+X*Z+k*J-N*$,e[l+1]=k*re+X*$+N*Z-I*J,e[l+2]=N*re+X*J+I*$-k*Z,e[l+3]=X*re-I*Z-k*$-N*J,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,l,f,v){return this._x=e,this._y=l,this._z=f,this._w=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,l){const f=e._x,v=e._y,M=e._z,B=e._order,I=Math.cos,k=Math.sin,N=I(f/2),X=I(v/2),Z=I(M/2),$=k(f/2),J=k(v/2),re=k(M/2);switch(B){case"XYZ":this._x=$*X*Z+N*J*re,this._y=N*J*Z-$*X*re,this._z=N*X*re+$*J*Z,this._w=N*X*Z-$*J*re;break;case"YXZ":this._x=$*X*Z+N*J*re,this._y=N*J*Z-$*X*re,this._z=N*X*re-$*J*Z,this._w=N*X*Z+$*J*re;break;case"ZXY":this._x=$*X*Z-N*J*re,this._y=N*J*Z+$*X*re,this._z=N*X*re+$*J*Z,this._w=N*X*Z-$*J*re;break;case"ZYX":this._x=$*X*Z-N*J*re,this._y=N*J*Z+$*X*re,this._z=N*X*re-$*J*Z,this._w=N*X*Z+$*J*re;break;case"YZX":this._x=$*X*Z+N*J*re,this._y=N*J*Z+$*X*re,this._z=N*X*re-$*J*Z,this._w=N*X*Z-$*J*re;break;case"XZY":this._x=$*X*Z-N*J*re,this._y=N*J*Z-$*X*re,this._z=N*X*re+$*J*Z,this._w=N*X*Z+$*J*re;break;default:w.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+B)}return l!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,l){const f=l/2,v=Math.sin(f);return this._x=e.x*v,this._y=e.y*v,this._z=e.z*v,this._w=Math.cos(f),this._onChangeCallback(),this}setFromRotationMatrix(e){const l=e.elements,f=l[0],v=l[4],M=l[8],B=l[1],I=l[5],k=l[9],N=l[2],X=l[6],Z=l[10],$=f+I+Z;if($>0){const J=.5/Math.sqrt($+1);this._w=.25/J,this._x=(X-k)*J,this._y=(M-N)*J,this._z=(B-v)*J}else if(f>I&&f>Z){const J=2*Math.sqrt(1+f-I-Z);this._w=(X-k)/J,this._x=.25*J,this._y=(v+B)/J,this._z=(M+N)/J}else if(I>Z){const J=2*Math.sqrt(1+I-f-Z);this._w=(M-N)/J,this._x=(v+B)/J,this._y=.25*J,this._z=(k+X)/J}else{const J=2*Math.sqrt(1+Z-f-I);this._w=(B-v)/J,this._x=(M+N)/J,this._y=(k+X)/J,this._z=.25*J}return this._onChangeCallback(),this}setFromUnitVectors(e,l){let f=e.dot(l)+1;return f<Number.EPSILON?(f=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=f):(this._x=0,this._y=-e.z,this._z=e.y,this._w=f)):(this._x=e.y*l.z-e.z*l.y,this._y=e.z*l.x-e.x*l.z,this._z=e.x*l.y-e.y*l.x,this._w=f),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_o(this.dot(e),-1,1)))}rotateTowards(e,l){const f=this.angleTo(e);if(f===0)return this;const v=Math.min(1,l/f);return this.slerp(e,v),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,l){const f=e._x,v=e._y,M=e._z,B=e._w,I=l._x,k=l._y,N=l._z,X=l._w;return this._x=f*X+B*I+v*N-M*k,this._y=v*X+B*k+M*I-f*N,this._z=M*X+B*N+f*k-v*I,this._w=B*X-f*I-v*k-M*N,this._onChangeCallback(),this}slerp(e,l){if(l===0)return this;if(l===1)return this.copy(e);const f=this._x,v=this._y,M=this._z,B=this._w;let I=B*e._w+f*e._x+v*e._y+M*e._z;if(I<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,I=-I):this.copy(e),I>=1)return this._w=B,this._x=f,this._y=v,this._z=M,this;const k=1-I*I;if(k<=Number.EPSILON){const J=1-l;return this._w=J*B+l*this._w,this._x=J*f+l*this._x,this._y=J*v+l*this._y,this._z=J*M+l*this._z,this.normalize(),this._onChangeCallback(),this}const N=Math.sqrt(k),X=Math.atan2(N,I),Z=Math.sin((1-l)*X)/N,$=Math.sin(l*X)/N;return this._w=B*Z+this._w*$,this._x=f*Z+this._x*$,this._y=v*Z+this._y*$,this._z=M*Z+this._z*$,this._onChangeCallback(),this}slerpQuaternions(e,l,f){return this.copy(e).slerp(l,f)}random(){const e=Math.random(),l=Math.sqrt(1-e),f=Math.sqrt(e),v=2*Math.PI*Math.random(),M=2*Math.PI*Math.random();return this.set(l*Math.cos(v),f*Math.sin(M),f*Math.cos(M),l*Math.sin(v))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,l=0){return this._x=e[l],this._y=e[l+1],this._z=e[l+2],this._w=e[l+3],this._onChangeCallback(),this}toArray(e=[],l=0){return e[l]=this._x,e[l+1]=this._y,e[l+2]=this._z,e[l+3]=this._w,e}fromBufferAttribute(e,l){return this._x=e.getX(l),this._y=e.getY(l),this._z=e.getZ(l),this._w=e.getW(l),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Xe{constructor(e=0,l=0,f=0){Xe.prototype.isVector3=!0,this.x=e,this.y=l,this.z=f}set(e,l,f){return f===void 0&&(f=this.z),this.x=e,this.y=l,this.z=f,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,l){switch(e){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,l){return this.x=e.x+l.x,this.y=e.y+l.y,this.z=e.z+l.z,this}addScaledVector(e,l){return this.x+=e.x*l,this.y+=e.y*l,this.z+=e.z*l,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,l){return this.x=e.x-l.x,this.y=e.y-l.y,this.z=e.z-l.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,l){return this.x=e.x*l.x,this.y=e.y*l.y,this.z=e.z*l.z,this}applyEuler(e){return this.applyQuaternion(Nh.setFromEuler(e))}applyAxisAngle(e,l){return this.applyQuaternion(Nh.setFromAxisAngle(e,l))}applyMatrix3(e){const l=this.x,f=this.y,v=this.z,M=e.elements;return this.x=M[0]*l+M[3]*f+M[6]*v,this.y=M[1]*l+M[4]*f+M[7]*v,this.z=M[2]*l+M[5]*f+M[8]*v,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const l=this.x,f=this.y,v=this.z,M=e.elements,B=1/(M[3]*l+M[7]*f+M[11]*v+M[15]);return this.x=(M[0]*l+M[4]*f+M[8]*v+M[12])*B,this.y=(M[1]*l+M[5]*f+M[9]*v+M[13])*B,this.z=(M[2]*l+M[6]*f+M[10]*v+M[14])*B,this}applyQuaternion(e){const l=this.x,f=this.y,v=this.z,M=e.x,B=e.y,I=e.z,k=e.w,N=k*l+B*v-I*f,X=k*f+I*l-M*v,Z=k*v+M*f-B*l,$=-M*l-B*f-I*v;return this.x=N*k+$*-M+X*-I-Z*-B,this.y=X*k+$*-B+Z*-M-N*-I,this.z=Z*k+$*-I+N*-B-X*-M,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const l=this.x,f=this.y,v=this.z,M=e.elements;return this.x=M[0]*l+M[4]*f+M[8]*v,this.y=M[1]*l+M[5]*f+M[9]*v,this.z=M[2]*l+M[6]*f+M[10]*v,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,l){return this.x=Math.max(e.x,Math.min(l.x,this.x)),this.y=Math.max(e.y,Math.min(l.y,this.y)),this.z=Math.max(e.z,Math.min(l.z,this.z)),this}clampScalar(e,l){return this.x=Math.max(e,Math.min(l,this.x)),this.y=Math.max(e,Math.min(l,this.y)),this.z=Math.max(e,Math.min(l,this.z)),this}clampLength(e,l){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(l,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,l){return this.x+=(e.x-this.x)*l,this.y+=(e.y-this.y)*l,this.z+=(e.z-this.z)*l,this}lerpVectors(e,l,f){return this.x=e.x+(l.x-e.x)*f,this.y=e.y+(l.y-e.y)*f,this.z=e.z+(l.z-e.z)*f,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,l){const f=e.x,v=e.y,M=e.z,B=l.x,I=l.y,k=l.z;return this.x=v*k-M*I,this.y=M*B-f*k,this.z=f*I-v*B,this}projectOnVector(e){const l=e.lengthSq();if(l===0)return this.set(0,0,0);const f=e.dot(this)/l;return this.copy(e).multiplyScalar(f)}projectOnPlane(e){return Mp.copy(this).projectOnVector(e),this.sub(Mp)}reflect(e){return this.sub(Mp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const l=Math.sqrt(this.lengthSq()*e.lengthSq());if(l===0)return Math.PI/2;const f=this.dot(e)/l;return Math.acos(_o(f,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const l=this.x-e.x,f=this.y-e.y,v=this.z-e.z;return l*l+f*f+v*v}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,l,f){const v=Math.sin(l)*e;return this.x=v*Math.sin(f),this.y=Math.cos(l)*e,this.z=v*Math.cos(f),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,l,f){return this.x=e*Math.sin(l),this.y=f,this.z=e*Math.cos(l),this}setFromMatrixPosition(e){const l=e.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}setFromMatrixScale(e){const l=this.setFromMatrixColumn(e,0).length(),f=this.setFromMatrixColumn(e,1).length(),v=this.setFromMatrixColumn(e,2).length();return this.x=l,this.y=f,this.z=v,this}setFromMatrixColumn(e,l){return this.fromArray(e.elements,l*4)}setFromMatrix3Column(e,l){return this.fromArray(e.elements,l*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,l=0){return this.x=e[l],this.y=e[l+1],this.z=e[l+2],this}toArray(e=[],l=0){return e[l]=this.x,e[l+1]=this.y,e[l+2]=this.z,e}fromBufferAttribute(e,l){return this.x=e.getX(l),this.y=e.getY(l),this.z=e.getZ(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,l=Math.random()*Math.PI*2,f=Math.sqrt(1-s1(e,2));return this.x=f*Math.cos(l),this.y=f*Math.sin(l),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Mp=new Xe,Nh=new Zs;class Lo{constructor(e=new Xe(1/0,1/0,1/0),l=new Xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=l}set(e,l){return this.min.copy(e),this.max.copy(l),this}setFromArray(e){this.makeEmpty();for(let l=0,f=e.length;l<f;l+=3)this.expandByPoint(Us.fromArray(e,l));return this}setFromBufferAttribute(e){this.makeEmpty();for(let l=0,f=e.count;l<f;l++)this.expandByPoint(Us.fromBufferAttribute(e,l));return this}setFromPoints(e){this.makeEmpty();for(let l=0,f=e.length;l<f;l++)this.expandByPoint(e[l]);return this}setFromCenterAndSize(e,l){const f=Us.copy(l).multiplyScalar(.5);return this.min.copy(e).sub(f),this.max.copy(e).add(f),this}setFromObject(e,l=!1){return this.makeEmpty(),this.expandByObject(e,l)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,l=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Oi.copy(e.boundingBox),Oi.applyMatrix4(e.matrixWorld),this.union(Oi);else{const v=e.geometry;if(v!==void 0)if(l&&v.attributes!==void 0&&v.attributes.position!==void 0){const M=v.attributes.position;for(let B=0,I=M.count;B<I;B++)Us.fromBufferAttribute(M,B).applyMatrix4(e.matrixWorld),this.expandByPoint(Us)}else v.boundingBox===null&&v.computeBoundingBox(),Oi.copy(v.boundingBox),Oi.applyMatrix4(e.matrixWorld),this.union(Oi)}const f=e.children;for(let v=0,M=f.length;v<M;v++)this.expandByObject(f[v],l);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,l){return l.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Us),Us.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let l,f;return e.normal.x>0?(l=e.normal.x*this.min.x,f=e.normal.x*this.max.x):(l=e.normal.x*this.max.x,f=e.normal.x*this.min.x),e.normal.y>0?(l+=e.normal.y*this.min.y,f+=e.normal.y*this.max.y):(l+=e.normal.y*this.max.y,f+=e.normal.y*this.min.y),e.normal.z>0?(l+=e.normal.z*this.min.z,f+=e.normal.z*this.max.z):(l+=e.normal.z*this.max.z,f+=e.normal.z*this.min.z),l<=-e.constant&&f>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ou),jl.subVectors(this.max,ou),rs.subVectors(e.a,ou),So.subVectors(e.b,ou),Sa.subVectors(e.c,ou),Wa.subVectors(So,rs),Sl.subVectors(Sa,So),Cc.subVectors(rs,Sa);let l=[0,-Wa.z,Wa.y,0,-Sl.z,Sl.y,0,-Cc.z,Cc.y,Wa.z,0,-Wa.x,Sl.z,0,-Sl.x,Cc.z,0,-Cc.x,-Wa.y,Wa.x,0,-Sl.y,Sl.x,0,-Cc.y,Cc.x,0];return!Nd(l,rs,So,Sa,jl)||(l=[1,0,0,0,1,0,0,0,1],!Nd(l,rs,So,Sa,jl))?!1:(Yu.crossVectors(Wa,Sl),l=[Yu.x,Yu.y,Yu.z],Nd(l,rs,So,Sa,jl))}clampPoint(e,l){return l.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Us).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Us).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(In[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),In[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),In[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),In[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),In[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),In[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),In[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),In[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(In),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const In=[new Xe,new Xe,new Xe,new Xe,new Xe,new Xe,new Xe,new Xe],Us=new Xe,Oi=new Lo,rs=new Xe,So=new Xe,Sa=new Xe,Wa=new Xe,Sl=new Xe,Cc=new Xe,ou=new Xe,jl=new Xe,Yu=new Xe,Sc=new Xe;function Nd(C,e,l,f,v){for(let M=0,B=C.length-3;M<=B;M+=3){Sc.fromArray(C,M);const I=v.x*Math.abs(Sc.x)+v.y*Math.abs(Sc.y)+v.z*Math.abs(Sc.z),k=e.dot(Sc),N=l.dot(Sc),X=f.dot(Sc);if(Math.max(-Math.max(k,N,X),Math.min(k,N,X))>I)return!1}return!0}const Wl=new Lo,wl=new Xe,Va=new Xe;class wa{constructor(e=new Xe,l=-1){this.center=e,this.radius=l}set(e,l){return this.center.copy(e),this.radius=l,this}setFromPoints(e,l){const f=this.center;l!==void 0?f.copy(l):Wl.setFromPoints(e).getCenter(f);let v=0;for(let M=0,B=e.length;M<B;M++)v=Math.max(v,f.distanceToSquared(e[M]));return this.radius=Math.sqrt(v),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const l=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=l*l}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,l){const f=this.center.distanceToSquared(e);return l.copy(e),f>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wl.subVectors(e,this.center);const l=wl.lengthSq();if(l>this.radius*this.radius){const f=Math.sqrt(l),v=(f-this.radius)*.5;this.center.addScaledVector(wl,v/f),this.radius+=v}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Va.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wl.copy(e.center).add(Va)),this.expandByPoint(wl.copy(e.center).sub(Va))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Qa=new Xe,Kc=new Xe,xp=new Xe,wc=new Xe,Hd=new Xe,su=new Xe,Hh=new Xe;class Cp{constructor(e=new Xe,l=new Xe(0,0,-1)){this.origin=e,this.direction=l}set(e,l){return this.origin.copy(e),this.direction.copy(l),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,l){return l.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qa)),this}closestPointToPoint(e,l){l.subVectors(e,this.origin);const f=l.dot(this.direction);return f<0?l.copy(this.origin):l.copy(this.origin).addScaledVector(this.direction,f)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const l=Qa.subVectors(e,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(e):(Qa.copy(this.origin).addScaledVector(this.direction,l),Qa.distanceToSquared(e))}distanceSqToSegment(e,l,f,v){Kc.copy(e).add(l).multiplyScalar(.5),xp.copy(l).sub(e).normalize(),wc.copy(this.origin).sub(Kc);const M=e.distanceTo(l)*.5,B=-this.direction.dot(xp),I=wc.dot(this.direction),k=-wc.dot(xp),N=wc.lengthSq(),X=Math.abs(1-B*B);let Z,$,J,re;if(X>0)if(Z=B*k-I,$=B*I-k,re=M*X,Z>=0)if($>=-re)if($<=re){const fe=1/X;Z*=fe,$*=fe,J=Z*(Z+B*$+2*I)+$*(B*Z+$+2*k)+N}else $=M,Z=Math.max(0,-(B*$+I)),J=-Z*Z+$*($+2*k)+N;else $=-M,Z=Math.max(0,-(B*$+I)),J=-Z*Z+$*($+2*k)+N;else $<=-re?(Z=Math.max(0,-(-B*M+I)),$=Z>0?-M:Math.min(Math.max(-M,-k),M),J=-Z*Z+$*($+2*k)+N):$<=re?(Z=0,$=Math.min(Math.max(-M,-k),M),J=$*($+2*k)+N):(Z=Math.max(0,-(B*M+I)),$=Z>0?M:Math.min(Math.max(-M,-k),M),J=-Z*Z+$*($+2*k)+N);else $=B>0?-M:M,Z=Math.max(0,-(B*$+I)),J=-Z*Z+$*($+2*k)+N;return f&&f.copy(this.origin).addScaledVector(this.direction,Z),v&&v.copy(Kc).addScaledVector(xp,$),J}intersectSphere(e,l){Qa.subVectors(e.center,this.origin);const f=Qa.dot(this.direction),v=Qa.dot(Qa)-f*f,M=e.radius*e.radius;if(v>M)return null;const B=Math.sqrt(M-v),I=f-B,k=f+B;return k<0?null:I<0?this.at(k,l):this.at(I,l)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const l=e.normal.dot(this.direction);if(l===0)return e.distanceToPoint(this.origin)===0?0:null;const f=-(this.origin.dot(e.normal)+e.constant)/l;return f>=0?f:null}intersectPlane(e,l){const f=this.distanceToPlane(e);return f===null?null:this.at(f,l)}intersectsPlane(e){const l=e.distanceToPoint(this.origin);return l===0||e.normal.dot(this.direction)*l<0}intersectBox(e,l){let f,v,M,B,I,k;const N=1/this.direction.x,X=1/this.direction.y,Z=1/this.direction.z,$=this.origin;return N>=0?(f=(e.min.x-$.x)*N,v=(e.max.x-$.x)*N):(f=(e.max.x-$.x)*N,v=(e.min.x-$.x)*N),X>=0?(M=(e.min.y-$.y)*X,B=(e.max.y-$.y)*X):(M=(e.max.y-$.y)*X,B=(e.min.y-$.y)*X),f>B||M>v||((M>f||isNaN(f))&&(f=M),(B<v||isNaN(v))&&(v=B),Z>=0?(I=(e.min.z-$.z)*Z,k=(e.max.z-$.z)*Z):(I=(e.max.z-$.z)*Z,k=(e.min.z-$.z)*Z),f>k||I>v)||((I>f||f!==f)&&(f=I),(k<v||v!==v)&&(v=k),v<0)?null:this.at(f>=0?f:v,l)}intersectsBox(e){return this.intersectBox(e,Qa)!==null}intersectTriangle(e,l,f,v,M){Hd.subVectors(l,e),su.subVectors(f,e),Hh.crossVectors(Hd,su);let B=this.direction.dot(Hh),I;if(B>0){if(v)return null;I=1}else if(B<0)I=-1,B=-B;else return null;wc.subVectors(this.origin,e);const k=I*this.direction.dot(su.crossVectors(wc,su));if(k<0)return null;const N=I*this.direction.dot(Hd.cross(wc));if(N<0||k+N>B)return null;const X=-I*wc.dot(Hh);return X<0?null:this.at(X/B,M)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class si{constructor(e,l,f,v,M,B,I,k,N,X,Z,$,J,re,fe,se){si.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,l,f,v,M,B,I,k,N,X,Z,$,J,re,fe,se)}set(e,l,f,v,M,B,I,k,N,X,Z,$,J,re,fe,se){const ne=this.elements;return ne[0]=e,ne[4]=l,ne[8]=f,ne[12]=v,ne[1]=M,ne[5]=B,ne[9]=I,ne[13]=k,ne[2]=N,ne[6]=X,ne[10]=Z,ne[14]=$,ne[3]=J,ne[7]=re,ne[11]=fe,ne[15]=se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new si().fromArray(this.elements)}copy(e){const l=this.elements,f=e.elements;return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],this}copyPosition(e){const l=this.elements,f=e.elements;return l[12]=f[12],l[13]=f[13],l[14]=f[14],this}setFromMatrix3(e){const l=e.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}extractBasis(e,l,f){return e.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this}makeBasis(e,l,f){return this.set(e.x,l.x,f.x,0,e.y,l.y,f.y,0,e.z,l.z,f.z,0,0,0,0,1),this}extractRotation(e){const l=this.elements,f=e.elements,v=1/ha.setFromMatrixColumn(e,0).length(),M=1/ha.setFromMatrixColumn(e,1).length(),B=1/ha.setFromMatrixColumn(e,2).length();return l[0]=f[0]*v,l[1]=f[1]*v,l[2]=f[2]*v,l[3]=0,l[4]=f[4]*M,l[5]=f[5]*M,l[6]=f[6]*M,l[7]=0,l[8]=f[8]*B,l[9]=f[9]*B,l[10]=f[10]*B,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromEuler(e){const l=this.elements,f=e.x,v=e.y,M=e.z,B=Math.cos(f),I=Math.sin(f),k=Math.cos(v),N=Math.sin(v),X=Math.cos(M),Z=Math.sin(M);if(e.order==="XYZ"){const $=B*X,J=B*Z,re=I*X,fe=I*Z;l[0]=k*X,l[4]=-k*Z,l[8]=N,l[1]=J+re*N,l[5]=$-fe*N,l[9]=-I*k,l[2]=fe-$*N,l[6]=re+J*N,l[10]=B*k}else if(e.order==="YXZ"){const $=k*X,J=k*Z,re=N*X,fe=N*Z;l[0]=$+fe*I,l[4]=re*I-J,l[8]=B*N,l[1]=B*Z,l[5]=B*X,l[9]=-I,l[2]=J*I-re,l[6]=fe+$*I,l[10]=B*k}else if(e.order==="ZXY"){const $=k*X,J=k*Z,re=N*X,fe=N*Z;l[0]=$-fe*I,l[4]=-B*Z,l[8]=re+J*I,l[1]=J+re*I,l[5]=B*X,l[9]=fe-$*I,l[2]=-B*N,l[6]=I,l[10]=B*k}else if(e.order==="ZYX"){const $=B*X,J=B*Z,re=I*X,fe=I*Z;l[0]=k*X,l[4]=re*N-J,l[8]=$*N+fe,l[1]=k*Z,l[5]=fe*N+$,l[9]=J*N-re,l[2]=-N,l[6]=I*k,l[10]=B*k}else if(e.order==="YZX"){const $=B*k,J=B*N,re=I*k,fe=I*N;l[0]=k*X,l[4]=fe-$*Z,l[8]=re*Z+J,l[1]=Z,l[5]=B*X,l[9]=-I*X,l[2]=-N*X,l[6]=J*Z+re,l[10]=$-fe*Z}else if(e.order==="XZY"){const $=B*k,J=B*N,re=I*k,fe=I*N;l[0]=k*X,l[4]=-Z,l[8]=N*X,l[1]=$*Z+fe,l[5]=B*X,l[9]=J*Z-re,l[2]=re*Z-J,l[6]=I*X,l[10]=fe*Z+$}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jd,e,p1)}lookAt(e,l,f){const v=this.elements;return dl.subVectors(e,l),dl.lengthSq()===0&&(dl.z=1),dl.normalize(),Sp.crossVectors(f,dl),Sp.lengthSq()===0&&(Math.abs(f.z)===1?dl.x+=1e-4:dl.z+=1e-4,dl.normalize(),Sp.crossVectors(f,dl)),Sp.normalize(),Wd.crossVectors(dl,Sp),v[0]=Sp.x,v[4]=Wd.x,v[8]=dl.x,v[1]=Sp.y,v[5]=Wd.y,v[9]=dl.y,v[2]=Sp.z,v[6]=Wd.z,v[10]=dl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,l){const f=e.elements,v=l.elements,M=this.elements,B=f[0],I=f[4],k=f[8],N=f[12],X=f[1],Z=f[5],$=f[9],J=f[13],re=f[2],fe=f[6],se=f[10],ne=f[14],be=f[3],he=f[7],Se=f[11],Oe=f[15],Qe=v[0],Ze=v[4],ht=v[8],we=v[12],Ve=v[1],$t=v[5],bn=v[9],Nt=v[13],Vt=v[2],en=v[6],Ht=v[10],un=v[14],hn=v[3],xn=v[7],mn=v[11],mt=v[15];return M[0]=B*Qe+I*Ve+k*Vt+N*hn,M[4]=B*Ze+I*$t+k*en+N*xn,M[8]=B*ht+I*bn+k*Ht+N*mn,M[12]=B*we+I*Nt+k*un+N*mt,M[1]=X*Qe+Z*Ve+$*Vt+J*hn,M[5]=X*Ze+Z*$t+$*en+J*xn,M[9]=X*ht+Z*bn+$*Ht+J*mn,M[13]=X*we+Z*Nt+$*un+J*mt,M[2]=re*Qe+fe*Ve+se*Vt+ne*hn,M[6]=re*Ze+fe*$t+se*en+ne*xn,M[10]=re*ht+fe*bn+se*Ht+ne*mn,M[14]=re*we+fe*Nt+se*un+ne*mt,M[3]=be*Qe+he*Ve+Se*Vt+Oe*hn,M[7]=be*Ze+he*$t+Se*en+Oe*xn,M[11]=be*ht+he*bn+Se*Ht+Oe*mn,M[15]=be*we+he*Nt+Se*un+Oe*mt,this}multiplyScalar(e){const l=this.elements;return l[0]*=e,l[4]*=e,l[8]*=e,l[12]*=e,l[1]*=e,l[5]*=e,l[9]*=e,l[13]*=e,l[2]*=e,l[6]*=e,l[10]*=e,l[14]*=e,l[3]*=e,l[7]*=e,l[11]*=e,l[15]*=e,this}determinant(){const e=this.elements,l=e[0],f=e[4],v=e[8],M=e[12],B=e[1],I=e[5],k=e[9],N=e[13],X=e[2],Z=e[6],$=e[10],J=e[14],re=e[3],fe=e[7],se=e[11],ne=e[15];return re*(+M*k*Z-v*N*Z-M*I*$+f*N*$+v*I*J-f*k*J)+fe*(+l*k*J-l*N*$+M*B*$-v*B*J+v*N*X-M*k*X)+se*(+l*N*Z-l*I*J-M*B*Z+f*B*J+M*I*X-f*N*X)+ne*(-v*I*X-l*k*Z+l*I*$+v*B*Z-f*B*$+f*k*X)}transpose(){const e=this.elements;let l;return l=e[1],e[1]=e[4],e[4]=l,l=e[2],e[2]=e[8],e[8]=l,l=e[6],e[6]=e[9],e[9]=l,l=e[3],e[3]=e[12],e[12]=l,l=e[7],e[7]=e[13],e[13]=l,l=e[11],e[11]=e[14],e[14]=l,this}setPosition(e,l,f){const v=this.elements;return e.isVector3?(v[12]=e.x,v[13]=e.y,v[14]=e.z):(v[12]=e,v[13]=l,v[14]=f),this}invert(){const e=this.elements,l=e[0],f=e[1],v=e[2],M=e[3],B=e[4],I=e[5],k=e[6],N=e[7],X=e[8],Z=e[9],$=e[10],J=e[11],re=e[12],fe=e[13],se=e[14],ne=e[15],be=Z*se*N-fe*$*N+fe*k*J-I*se*J-Z*k*ne+I*$*ne,he=re*$*N-X*se*N-re*k*J+B*se*J+X*k*ne-B*$*ne,Se=X*fe*N-re*Z*N+re*I*J-B*fe*J-X*I*ne+B*Z*ne,Oe=re*Z*k-X*fe*k-re*I*$+B*fe*$+X*I*se-B*Z*se,Qe=l*be+f*he+v*Se+M*Oe;if(Qe===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ze=1/Qe;return e[0]=be*Ze,e[1]=(fe*$*M-Z*se*M-fe*v*J+f*se*J+Z*v*ne-f*$*ne)*Ze,e[2]=(I*se*M-fe*k*M+fe*v*N-f*se*N-I*v*ne+f*k*ne)*Ze,e[3]=(Z*k*M-I*$*M-Z*v*N+f*$*N+I*v*J-f*k*J)*Ze,e[4]=he*Ze,e[5]=(X*se*M-re*$*M+re*v*J-l*se*J-X*v*ne+l*$*ne)*Ze,e[6]=(re*k*M-B*se*M-re*v*N+l*se*N+B*v*ne-l*k*ne)*Ze,e[7]=(B*$*M-X*k*M+X*v*N-l*$*N-B*v*J+l*k*J)*Ze,e[8]=Se*Ze,e[9]=(re*Z*M-X*fe*M-re*f*J+l*fe*J+X*f*ne-l*Z*ne)*Ze,e[10]=(B*fe*M-re*I*M+re*f*N-l*fe*N-B*f*ne+l*I*ne)*Ze,e[11]=(X*I*M-B*Z*M-X*f*N+l*Z*N+B*f*J-l*I*J)*Ze,e[12]=Oe*Ze,e[13]=(X*fe*v-re*Z*v+re*f*$-l*fe*$-X*f*se+l*Z*se)*Ze,e[14]=(re*I*v-B*fe*v-re*f*k+l*fe*k+B*f*se-l*I*se)*Ze,e[15]=(B*Z*v-X*I*v+X*f*k-l*Z*k-B*f*$+l*I*$)*Ze,this}scale(e){const l=this.elements,f=e.x,v=e.y,M=e.z;return l[0]*=f,l[4]*=v,l[8]*=M,l[1]*=f,l[5]*=v,l[9]*=M,l[2]*=f,l[6]*=v,l[10]*=M,l[3]*=f,l[7]*=v,l[11]*=M,this}getMaxScaleOnAxis(){const e=this.elements,l=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],f=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],v=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(l,f,v))}makeTranslation(e,l,f){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,l,0,0,1,f,0,0,0,1),this}makeRotationX(e){const l=Math.cos(e),f=Math.sin(e);return this.set(1,0,0,0,0,l,-f,0,0,f,l,0,0,0,0,1),this}makeRotationY(e){const l=Math.cos(e),f=Math.sin(e);return this.set(l,0,f,0,0,1,0,0,-f,0,l,0,0,0,0,1),this}makeRotationZ(e){const l=Math.cos(e),f=Math.sin(e);return this.set(l,-f,0,0,f,l,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,l){const f=Math.cos(l),v=Math.sin(l),M=1-f,B=e.x,I=e.y,k=e.z,N=M*B,X=M*I;return this.set(N*B+f,N*I-v*k,N*k+v*I,0,N*I+v*k,X*I+f,X*k-v*B,0,N*k-v*I,X*k+v*B,M*k*k+f,0,0,0,0,1),this}makeScale(e,l,f){return this.set(e,0,0,0,0,l,0,0,0,0,f,0,0,0,0,1),this}makeShear(e,l,f,v,M,B){return this.set(1,f,M,0,e,1,B,0,l,v,1,0,0,0,0,1),this}compose(e,l,f){const v=this.elements,M=l._x,B=l._y,I=l._z,k=l._w,N=M+M,X=B+B,Z=I+I,$=M*N,J=M*X,re=M*Z,fe=B*X,se=B*Z,ne=I*Z,be=k*N,he=k*X,Se=k*Z,Oe=f.x,Qe=f.y,Ze=f.z;return v[0]=(1-(fe+ne))*Oe,v[1]=(J+Se)*Oe,v[2]=(re-he)*Oe,v[3]=0,v[4]=(J-Se)*Qe,v[5]=(1-($+ne))*Qe,v[6]=(se+be)*Qe,v[7]=0,v[8]=(re+he)*Ze,v[9]=(se-be)*Ze,v[10]=(1-($+fe))*Ze,v[11]=0,v[12]=e.x,v[13]=e.y,v[14]=e.z,v[15]=1,this}decompose(e,l,f){const v=this.elements;let M=ha.set(v[0],v[1],v[2]).length();const B=ha.set(v[4],v[5],v[6]).length(),I=ha.set(v[8],v[9],v[10]).length();this.determinant()<0&&(M=-M),e.x=v[12],e.y=v[13],e.z=v[14],ul.copy(this);const N=1/M,X=1/B,Z=1/I;return ul.elements[0]*=N,ul.elements[1]*=N,ul.elements[2]*=N,ul.elements[4]*=X,ul.elements[5]*=X,ul.elements[6]*=X,ul.elements[8]*=Z,ul.elements[9]*=Z,ul.elements[10]*=Z,l.setFromRotationMatrix(ul),f.x=M,f.y=B,f.z=I,this}makePerspective(e,l,f,v,M,B,I=gs){const k=this.elements,N=2*M/(l-e),X=2*M/(f-v),Z=(l+e)/(l-e),$=(f+v)/(f-v);let J,re;if(I===gs)J=-(B+M)/(B-M),re=-2*B*M/(B-M);else if(I===eu)J=-B/(B-M),re=-B*M/(B-M);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+I);return k[0]=N,k[4]=0,k[8]=Z,k[12]=0,k[1]=0,k[5]=X,k[9]=$,k[13]=0,k[2]=0,k[6]=0,k[10]=J,k[14]=re,k[3]=0,k[7]=0,k[11]=-1,k[15]=0,this}makeOrthographic(e,l,f,v,M,B,I=gs){const k=this.elements,N=1/(l-e),X=1/(f-v),Z=1/(B-M),$=(l+e)*N,J=(f+v)*X;let re,fe;if(I===gs)re=(B+M)*Z,fe=-2*Z;else if(I===eu)re=M*Z,fe=-1*Z;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+I);return k[0]=2*N,k[4]=0,k[8]=0,k[12]=-$,k[1]=0,k[5]=2*X,k[9]=0,k[13]=-J,k[2]=0,k[6]=0,k[10]=fe,k[14]=-re,k[3]=0,k[7]=0,k[11]=0,k[15]=1,this}equals(e){const l=this.elements,f=e.elements;for(let v=0;v<16;v++)if(l[v]!==f[v])return!1;return!0}fromArray(e,l=0){for(let f=0;f<16;f++)this.elements[f]=e[f+l];return this}toArray(e=[],l=0){const f=this.elements;return e[l]=f[0],e[l+1]=f[1],e[l+2]=f[2],e[l+3]=f[3],e[l+4]=f[4],e[l+5]=f[5],e[l+6]=f[6],e[l+7]=f[7],e[l+8]=f[8],e[l+9]=f[9],e[l+10]=f[10],e[l+11]=f[11],e[l+12]=f[12],e[l+13]=f[13],e[l+14]=f[14],e[l+15]=f[15],e}}const ha=new Xe,ul=new si,jd=new Xe(0,0,0),p1=new Xe(1,1,1),Sp=new Xe,Wd=new Xe,dl=new Xe,ng=new si,rg=new Zs;class wp{constructor(e=0,l=0,f=0,v=wp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=l,this._z=f,this._order=v}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,l,f,v=this._order){return this._x=e,this._y=l,this._z=f,this._order=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,l=this._order,f=!0){const v=e.elements,M=v[0],B=v[4],I=v[8],k=v[1],N=v[5],X=v[9],Z=v[2],$=v[6],J=v[10];switch(l){case"XYZ":this._y=Math.asin(_o(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(-X,J),this._z=Math.atan2(-B,M)):(this._x=Math.atan2($,N),this._z=0);break;case"YXZ":this._x=Math.asin(-_o(X,-1,1)),Math.abs(X)<.9999999?(this._y=Math.atan2(I,J),this._z=Math.atan2(k,N)):(this._y=Math.atan2(-Z,M),this._z=0);break;case"ZXY":this._x=Math.asin(_o($,-1,1)),Math.abs($)<.9999999?(this._y=Math.atan2(-Z,J),this._z=Math.atan2(-B,N)):(this._y=0,this._z=Math.atan2(k,M));break;case"ZYX":this._y=Math.asin(-_o(Z,-1,1)),Math.abs(Z)<.9999999?(this._x=Math.atan2($,J),this._z=Math.atan2(k,M)):(this._x=0,this._z=Math.atan2(-B,N));break;case"YZX":this._z=Math.asin(_o(k,-1,1)),Math.abs(k)<.9999999?(this._x=Math.atan2(-X,N),this._y=Math.atan2(-Z,M)):(this._x=0,this._y=Math.atan2(I,J));break;case"XZY":this._z=Math.asin(-_o(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2($,N),this._y=Math.atan2(I,M)):(this._x=Math.atan2(-X,J),this._y=0);break;default:w.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+l)}return this._order=l,f===!0&&this._onChangeCallback(),this}setFromQuaternion(e,l,f){return ng.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ng,l,f)}setFromVector3(e,l=this._order){return this.set(e.x,e.y,e.z,l)}reorder(e){return rg.setFromEuler(this),this.setFromQuaternion(rg,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],l=0){return e[l]=this._x,e[l+1]=this._y,e[l+2]=this._z,e[l+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wp.DEFAULT_ORDER="XYZ";class jh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let u1=0;const Wh=new Xe,Yc=new Zs,Ta=new si,Vd=new Xe,au=new Xe,Qd=new Xe,ig=new Zs,lu=new Xe(1,0,0),og=new Xe(0,1,0),pc=new Xe(0,0,1),Em={type:"added"},Jc={type:"removed"};class Ti extends Ma{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:u1++}),this.uuid=Ha(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ti.DEFAULT_UP.clone();const e=new Xe,l=new wp,f=new Zs,v=new Xe(1,1,1);function M(){f.setFromEuler(l,!1)}function B(){l.setFromQuaternion(f,void 0,!1)}l._onChange(M),f._onChange(B),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:l},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new si},normalMatrix:{value:new Ai}}),this.matrix=new si,this.matrixWorld=new si,this.matrixAutoUpdate=Ti.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new jh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,l){this.quaternion.setFromAxisAngle(e,l)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,l){return Yc.setFromAxisAngle(e,l),this.quaternion.multiply(Yc),this}rotateOnWorldAxis(e,l){return Yc.setFromAxisAngle(e,l),this.quaternion.premultiply(Yc),this}rotateX(e){return this.rotateOnAxis(lu,e)}rotateY(e){return this.rotateOnAxis(og,e)}rotateZ(e){return this.rotateOnAxis(pc,e)}translateOnAxis(e,l){return Wh.copy(e).applyQuaternion(this.quaternion),this.position.add(Wh.multiplyScalar(l)),this}translateX(e){return this.translateOnAxis(lu,e)}translateY(e){return this.translateOnAxis(og,e)}translateZ(e){return this.translateOnAxis(pc,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ta.copy(this.matrixWorld).invert())}lookAt(e,l,f){e.isVector3?Vd.copy(e):Vd.set(e,l,f);const v=this.parent;this.updateWorldMatrix(!0,!1),au.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ta.lookAt(au,Vd,this.up):Ta.lookAt(Vd,au,this.up),this.quaternion.setFromRotationMatrix(Ta),v&&(Ta.extractRotation(v.matrixWorld),Yc.setFromRotationMatrix(Ta),this.quaternion.premultiply(Yc.invert()))}add(e){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return e===this?(w.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Em)):w.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const l=this.children.indexOf(e);return l!==-1&&(e.parent=null,this.children.splice(l,1),e.dispatchEvent(Jc)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const l=this.children[e];l.parent=null,l.dispatchEvent(Jc)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ta.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ta.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ta),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,l){if(this[e]===l)return this;for(let f=0,v=this.children.length;f<v;f++){const B=this.children[f].getObjectByProperty(e,l);if(B!==void 0)return B}}getObjectsByProperty(e,l){let f=[];this[e]===l&&f.push(this);for(let v=0,M=this.children.length;v<M;v++){const B=this.children[v].getObjectsByProperty(e,l);B.length>0&&(f=f.concat(B))}return f}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(au,e,Qd),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(au,ig,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return e.set(l[8],l[9],l[10]).normalize()}raycast(){}traverse(e){e(this);const l=this.children;for(let f=0,v=l.length;f<v;f++)l[f].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const l=this.children;for(let f=0,v=l.length;f<v;f++)l[f].traverseVisible(e)}traverseAncestors(e){const l=this.parent;l!==null&&(e(l),l.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const l=this.children;for(let f=0,v=l.length;f<v;f++){const M=l[f];(M.matrixWorldAutoUpdate===!0||e===!0)&&M.updateMatrixWorld(e)}}updateWorldMatrix(e,l){const f=this.parent;if(e===!0&&f!==null&&f.matrixWorldAutoUpdate===!0&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),l===!0){const v=this.children;for(let M=0,B=v.length;M<B;M++){const I=v[M];I.matrixWorldAutoUpdate===!0&&I.updateWorldMatrix(!1,!0)}}}toJSON(e){const l=e===void 0||typeof e=="string",f={};l&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const v={};v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),this.castShadow===!0&&(v.castShadow=!0),this.receiveShadow===!0&&(v.receiveShadow=!0),this.visible===!1&&(v.visible=!1),this.frustumCulled===!1&&(v.frustumCulled=!1),this.renderOrder!==0&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),v.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(v.instanceColor=this.instanceColor.toJSON()));function M(I,k){return I[k.uuid]===void 0&&(I[k.uuid]=k.toJSON(e)),k.uuid}if(this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(v.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=M(e.geometries,this.geometry);const I=this.geometry.parameters;if(I!==void 0&&I.shapes!==void 0){const k=I.shapes;if(Array.isArray(k))for(let N=0,X=k.length;N<X;N++){const Z=k[N];M(e.shapes,Z)}else M(e.shapes,k)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(M(e.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const I=[];for(let k=0,N=this.material.length;k<N;k++)I.push(M(e.materials,this.material[k]));v.material=I}else v.material=M(e.materials,this.material);if(this.children.length>0){v.children=[];for(let I=0;I<this.children.length;I++)v.children.push(this.children[I].toJSON(e).object)}if(this.animations.length>0){v.animations=[];for(let I=0;I<this.animations.length;I++){const k=this.animations[I];v.animations.push(M(e.animations,k))}}if(l){const I=B(e.geometries),k=B(e.materials),N=B(e.textures),X=B(e.images),Z=B(e.shapes),$=B(e.skeletons),J=B(e.animations),re=B(e.nodes);I.length>0&&(f.geometries=I),k.length>0&&(f.materials=k),N.length>0&&(f.textures=N),X.length>0&&(f.images=X),Z.length>0&&(f.shapes=Z),$.length>0&&(f.skeletons=$),J.length>0&&(f.animations=J),re.length>0&&(f.nodes=re)}return f.object=v,f;function B(I){const k=[];for(const N in I){const X=I[N];delete X.metadata,k.push(X)}return k}}clone(e){return new this.constructor().copy(this,e)}copy(e,l=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),l===!0)for(let f=0;f<e.children.length;f++){const v=e.children[f];this.add(v.clone())}return this}}Ti.DEFAULT_UP=new Xe(0,1,0),Ti.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ti.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xa=new Xe,Tl=new Xe,Xd=new Xe,Ba=new Xe,ms=new Xe,Tp=new Xe,cu=new Xe,As=new Xe,wo=new Xe,Ka=new Xe;let Ju=!1;class Ya{constructor(e=new Xe,l=new Xe,f=new Xe){this.a=e,this.b=l,this.c=f}static getNormal(e,l,f,v){v.subVectors(f,l),Xa.subVectors(e,l),v.cross(Xa);const M=v.lengthSq();return M>0?v.multiplyScalar(1/Math.sqrt(M)):v.set(0,0,0)}static getBarycoord(e,l,f,v,M){Xa.subVectors(v,l),Tl.subVectors(f,l),Xd.subVectors(e,l);const B=Xa.dot(Xa),I=Xa.dot(Tl),k=Xa.dot(Xd),N=Tl.dot(Tl),X=Tl.dot(Xd),Z=B*N-I*I;if(Z===0)return M.set(-2,-1,-1);const $=1/Z,J=(N*k-I*X)*$,re=(B*X-I*k)*$;return M.set(1-J-re,re,J)}static containsPoint(e,l,f,v){return this.getBarycoord(e,l,f,v,Ba),Ba.x>=0&&Ba.y>=0&&Ba.x+Ba.y<=1}static getUV(e,l,f,v,M,B,I,k){return Ju===!1&&(w.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ju=!0),this.getInterpolation(e,l,f,v,M,B,I,k)}static getInterpolation(e,l,f,v,M,B,I,k){return this.getBarycoord(e,l,f,v,Ba),k.setScalar(0),k.addScaledVector(M,Ba.x),k.addScaledVector(B,Ba.y),k.addScaledVector(I,Ba.z),k}static isFrontFacing(e,l,f,v){return Xa.subVectors(f,l),Tl.subVectors(e,l),Xa.cross(Tl).dot(v)<0}set(e,l,f){return this.a.copy(e),this.b.copy(l),this.c.copy(f),this}setFromPointsAndIndices(e,l,f,v){return this.a.copy(e[l]),this.b.copy(e[f]),this.c.copy(e[v]),this}setFromAttributeAndIndices(e,l,f,v){return this.a.fromBufferAttribute(e,l),this.b.fromBufferAttribute(e,f),this.c.fromBufferAttribute(e,v),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xa.subVectors(this.c,this.b),Tl.subVectors(this.a,this.b),Xa.cross(Tl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ya.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,l){return Ya.getBarycoord(e,this.a,this.b,this.c,l)}getUV(e,l,f,v,M){return Ju===!1&&(w.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ju=!0),Ya.getInterpolation(e,this.a,this.b,this.c,l,f,v,M)}getInterpolation(e,l,f,v,M){return Ya.getInterpolation(e,this.a,this.b,this.c,l,f,v,M)}containsPoint(e){return Ya.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ya.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,l){const f=this.a,v=this.b,M=this.c;let B,I;ms.subVectors(v,f),Tp.subVectors(M,f),As.subVectors(e,f);const k=ms.dot(As),N=Tp.dot(As);if(k<=0&&N<=0)return l.copy(f);wo.subVectors(e,v);const X=ms.dot(wo),Z=Tp.dot(wo);if(X>=0&&Z<=X)return l.copy(v);const $=k*Z-X*N;if($<=0&&k>=0&&X<=0)return B=k/(k-X),l.copy(f).addScaledVector(ms,B);Ka.subVectors(e,M);const J=ms.dot(Ka),re=Tp.dot(Ka);if(re>=0&&J<=re)return l.copy(M);const fe=J*N-k*re;if(fe<=0&&N>=0&&re<=0)return I=N/(N-re),l.copy(f).addScaledVector(Tp,I);const se=X*re-J*Z;if(se<=0&&Z-X>=0&&J-re>=0)return cu.subVectors(M,v),I=(Z-X)/(Z-X+(J-re)),l.copy(v).addScaledVector(cu,I);const ne=1/(se+fe+$);return B=fe*ne,I=$*ne,l.copy(f).addScaledVector(ms,B).addScaledVector(Tp,I)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Kd=0;class fa extends Ma{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kd++}),this.uuid=Ha(),this.name="",this.type="Material",this.blending=_t,this.side=rt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ti,this.blendDst=vi,this.blendEquation=Jt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Sn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Nl,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gu,this.stencilZFail=Gu,this.stencilZPass=Gu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const l in e){const f=e[l];if(f===void 0){w.warn(`THREE.Material: parameter '${l}' has value of undefined.`);continue}const v=this[l];if(v===void 0){w.warn(`THREE.Material: '${l}' is not a property of THREE.${this.type}.`);continue}v&&v.isColor?v.set(f):v&&v.isVector3&&f&&f.isVector3?v.copy(f):this[l]=f}}toJSON(e){const l=e===void 0||typeof e=="string";l&&(e={textures:{},images:{}});const f={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),this.roughness!==void 0&&(f.roughness=this.roughness),this.metalness!==void 0&&(f.metalness=this.metalness),this.sheen!==void 0&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(f.shininess=this.shininess),this.clearcoat!==void 0&&(f.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(f.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(f.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(f.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(f.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(f.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(e).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(e).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(e).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(e).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(e).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(f.combine=this.combine)),this.envMapIntensity!==void 0&&(f.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(f.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(f.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(f.size=this.size),this.shadowSide!==null&&(f.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(f.sizeAttenuation=this.sizeAttenuation),this.blending!==_t&&(f.blending=this.blending),this.side!==rt&&(f.side=this.side),this.vertexColors&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),this.transparent===!0&&(f.transparent=this.transparent),f.depthFunc=this.depthFunc,f.depthTest=this.depthTest,f.depthWrite=this.depthWrite,f.colorWrite=this.colorWrite,f.stencilWrite=this.stencilWrite,f.stencilWriteMask=this.stencilWriteMask,f.stencilFunc=this.stencilFunc,f.stencilRef=this.stencilRef,f.stencilFuncMask=this.stencilFuncMask,f.stencilFail=this.stencilFail,f.stencilZFail=this.stencilZFail,f.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(f.rotation=this.rotation),this.polygonOffset===!0&&(f.polygonOffset=!0),this.polygonOffsetFactor!==0&&(f.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(f.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(f.linewidth=this.linewidth),this.dashSize!==void 0&&(f.dashSize=this.dashSize),this.gapSize!==void 0&&(f.gapSize=this.gapSize),this.scale!==void 0&&(f.scale=this.scale),this.dithering===!0&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),this.alphaHash===!0&&(f.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(f.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(f.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(f.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(f.wireframe=this.wireframe),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(f.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(f.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(f.flatShading=this.flatShading),this.visible===!1&&(f.visible=!1),this.toneMapped===!1&&(f.toneMapped=!1),this.fog===!1&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData);function v(M){const B=[];for(const I in M){const k=M[I];delete k.metadata,B.push(k)}return B}if(l){const M=v(e.textures),B=v(e.images);M.length>0&&(f.textures=M),B.length>0&&(f.images=B)}return f}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const l=e.clippingPlanes;let f=null;if(l!==null){const v=l.length;f=new Array(v);for(let M=0;M!==v;++M)f[M]=l[M].clone()}return this.clippingPlanes=f,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Vh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ra={h:0,s:0,l:0},qc={h:0,s:0,l:0};function Yd(C,e,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?C+(e-C)*6*l:l<1/2?e:l<2/3?C+(e-C)*6*(2/3-l):C}class pr{constructor(e,l,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,l,f)}set(e,l,f){if(l===void 0&&f===void 0){const v=e;v&&v.isColor?this.copy(v):typeof v=="number"?this.setHex(v):typeof v=="string"&&this.setStyle(v)}else this.setRGB(e,l,f);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,l=ui){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Do.toWorkingColorSpace(this,l),this}setRGB(e,l,f,v=Do.workingColorSpace){return this.r=e,this.g=l,this.b=f,Do.toWorkingColorSpace(this,v),this}setHSL(e,l,f,v=Do.workingColorSpace){if(e=Ld(e,1),l=_o(l,0,1),f=_o(f,0,1),l===0)this.r=this.g=this.b=f;else{const M=f<=.5?f*(1+l):f+l-f*l,B=2*f-M;this.r=Yd(B,M,e+1/3),this.g=Yd(B,M,e),this.b=Yd(B,M,e-1/3)}return Do.toWorkingColorSpace(this,v),this}setStyle(e,l=ui){function f(M){M!==void 0&&parseFloat(M)<1&&w.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let v;if(v=/^(\w+)\(([^\)]*)\)/.exec(e)){let M;const B=v[1],I=v[2];switch(B){case"rgb":case"rgba":if(M=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(M[4]),this.setRGB(Math.min(255,parseInt(M[1],10))/255,Math.min(255,parseInt(M[2],10))/255,Math.min(255,parseInt(M[3],10))/255,l);if(M=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(M[4]),this.setRGB(Math.min(100,parseInt(M[1],10))/100,Math.min(100,parseInt(M[2],10))/100,Math.min(100,parseInt(M[3],10))/100,l);break;case"hsl":case"hsla":if(M=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(M[4]),this.setHSL(parseFloat(M[1])/360,parseFloat(M[2])/100,parseFloat(M[3])/100,l);break;default:w.warn("THREE.Color: Unknown color model "+e)}}else if(v=/^\#([A-Fa-f\d]+)$/.exec(e)){const M=v[1],B=M.length;if(B===3)return this.setRGB(parseInt(M.charAt(0),16)/15,parseInt(M.charAt(1),16)/15,parseInt(M.charAt(2),16)/15,l);if(B===6)return this.setHex(parseInt(M,16),l);w.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,l);return this}setColorName(e,l=ui){const f=Vh[e.toLowerCase()];return f!==void 0?this.setHex(f,l):w.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=iu(e.r),this.g=iu(e.g),this.b=iu(e.b),this}copyLinearToSRGB(e){return this.r=Uh(e.r),this.g=Uh(e.g),this.b=Uh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ui){return Do.fromWorkingColorSpace(Ns.copy(this),e),Math.round(_o(Ns.r*255,0,255))*65536+Math.round(_o(Ns.g*255,0,255))*256+Math.round(_o(Ns.b*255,0,255))}getHexString(e=ui){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,l=Do.workingColorSpace){Do.fromWorkingColorSpace(Ns.copy(this),l);const f=Ns.r,v=Ns.g,M=Ns.b,B=Math.max(f,v,M),I=Math.min(f,v,M);let k,N;const X=(I+B)/2;if(I===B)k=0,N=0;else{const Z=B-I;switch(N=X<=.5?Z/(B+I):Z/(2-B-I),B){case f:k=(v-M)/Z+(v<M?6:0);break;case v:k=(M-f)/Z+2;break;case M:k=(f-v)/Z+4;break}k/=6}return e.h=k,e.s=N,e.l=X,e}getRGB(e,l=Do.workingColorSpace){return Do.fromWorkingColorSpace(Ns.copy(this),l),e.r=Ns.r,e.g=Ns.g,e.b=Ns.b,e}getStyle(e=ui){Do.fromWorkingColorSpace(Ns.copy(this),e);const l=Ns.r,f=Ns.g,v=Ns.b;return e!==ui?`color(${e} ${l.toFixed(3)} ${f.toFixed(3)} ${v.toFixed(3)})`:`rgb(${Math.round(l*255)},${Math.round(f*255)},${Math.round(v*255)})`}offsetHSL(e,l,f){return this.getHSL(Ra),Ra.h+=e,Ra.s+=l,Ra.l+=f,this.setHSL(Ra.h,Ra.s,Ra.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,l){return this.r=e.r+l.r,this.g=e.g+l.g,this.b=e.b+l.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,l){return this.r+=(e.r-this.r)*l,this.g+=(e.g-this.g)*l,this.b+=(e.b-this.b)*l,this}lerpColors(e,l,f){return this.r=e.r+(l.r-e.r)*f,this.g=e.g+(l.g-e.g)*f,this.b=e.b+(l.b-e.b)*f,this}lerpHSL(e,l){this.getHSL(Ra),e.getHSL(qc);const f=_c(Ra.h,qc.h,l),v=_c(Ra.s,qc.s,l),M=_c(Ra.l,qc.l,l);return this.setHSL(f,v,M),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const l=this.r,f=this.g,v=this.b,M=e.elements;return this.r=M[0]*l+M[3]*f+M[6]*v,this.g=M[1]*l+M[4]*f+M[7]*v,this.b=M[2]*l+M[5]*f+M[8]*v,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,l=0){return this.r=e[l],this.g=e[l+1],this.b=e[l+2],this}toArray(e=[],l=0){return e[l]=this.r,e[l+1]=this.g,e[l+2]=this.b,e}fromBufferAttribute(e,l){return this.r=e.getX(l),this.g=e.getY(l),this.b=e.getZ(l),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ns=new pr;pr.NAMES=Vh;class Vl extends fa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Li,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Tc=qu();function qu(){const C=new ArrayBuffer(4),e=new Float32Array(C),l=new Uint32Array(C),f=new Uint32Array(512),v=new Uint32Array(512);for(let k=0;k<256;++k){const N=k-127;N<-27?(f[k]=0,f[k|256]=32768,v[k]=24,v[k|256]=24):N<-14?(f[k]=1024>>-N-14,f[k|256]=1024>>-N-14|32768,v[k]=-N-1,v[k|256]=-N-1):N<=15?(f[k]=N+15<<10,f[k|256]=N+15<<10|32768,v[k]=13,v[k|256]=13):N<128?(f[k]=31744,f[k|256]=64512,v[k]=24,v[k|256]=24):(f[k]=31744,f[k|256]=64512,v[k]=13,v[k|256]=13)}const M=new Uint32Array(2048),B=new Uint32Array(64),I=new Uint32Array(64);for(let k=1;k<1024;++k){let N=k<<13,X=0;for(;!(N&8388608);)N<<=1,X-=8388608;N&=-8388609,X+=947912704,M[k]=N|X}for(let k=1024;k<2048;++k)M[k]=939524096+(k-1024<<13);for(let k=1;k<31;++k)B[k]=k<<23;B[31]=1199570944,B[32]=2147483648;for(let k=33;k<63;++k)B[k]=2147483648+(k-32<<23);B[63]=3347054592;for(let k=1;k<64;++k)k!==32&&(I[k]=1024);return{floatView:e,uint32View:l,baseTable:f,shiftTable:v,mantissaTable:M,exponentTable:B,offsetTable:I}}function Ia(C){Math.abs(C)>65504&&w.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),C=_o(C,-65504,65504),Tc.floatView[0]=C;const e=Tc.uint32View[0],l=e>>23&511;return Tc.baseTable[l]+((e&8388607)>>Tc.shiftTable[l])}function Zu(C){const e=C>>10;return Tc.uint32View[0]=Tc.mantissaTable[Tc.offsetTable[e]+(C&1023)]+Tc.exponentTable[e],Tc.floatView[0]}const $u={toHalfFloat:Ia,fromHalfFloat:Zu},ys=new Xe,pu=new fn;class uo{constructor(e,l,f=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=l,this.count=e!==void 0?e.length/l:0,this.normalized=f,this.usage=Zp,this.updateRange={offset:0,count:-1},this.gpuType=No,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,l,f){e*=this.itemSize,f*=l.itemSize;for(let v=0,M=this.itemSize;v<M;v++)this.array[e+v]=l.array[f+v];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let l=0,f=this.count;l<f;l++)pu.fromBufferAttribute(this,l),pu.applyMatrix3(e),this.setXY(l,pu.x,pu.y);else if(this.itemSize===3)for(let l=0,f=this.count;l<f;l++)ys.fromBufferAttribute(this,l),ys.applyMatrix3(e),this.setXYZ(l,ys.x,ys.y,ys.z);return this}applyMatrix4(e){for(let l=0,f=this.count;l<f;l++)ys.fromBufferAttribute(this,l),ys.applyMatrix4(e),this.setXYZ(l,ys.x,ys.y,ys.z);return this}applyNormalMatrix(e){for(let l=0,f=this.count;l<f;l++)ys.fromBufferAttribute(this,l),ys.applyNormalMatrix(e),this.setXYZ(l,ys.x,ys.y,ys.z);return this}transformDirection(e){for(let l=0,f=this.count;l<f;l++)ys.fromBufferAttribute(this,l),ys.transformDirection(e),this.setXYZ(l,ys.x,ys.y,ys.z);return this}set(e,l=0){return this.array.set(e,l),this}getX(e){let l=this.array[e*this.itemSize];return this.normalized&&(l=ua(l,this.array)),l}setX(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize]=l,this}getY(e){let l=this.array[e*this.itemSize+1];return this.normalized&&(l=ua(l,this.array)),l}setY(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize+1]=l,this}getZ(e){let l=this.array[e*this.itemSize+2];return this.normalized&&(l=ua(l,this.array)),l}setZ(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize+2]=l,this}getW(e){let l=this.array[e*this.itemSize+3];return this.normalized&&(l=ua(l,this.array)),l}setW(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize+3]=l,this}setXY(e,l,f){return e*=this.itemSize,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array)),this.array[e+0]=l,this.array[e+1]=f,this}setXYZ(e,l,f,v){return e*=this.itemSize,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array),v=Yr(v,this.array)),this.array[e+0]=l,this.array[e+1]=f,this.array[e+2]=v,this}setXYZW(e,l,f,v,M){return e*=this.itemSize,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array),v=Yr(v,this.array),M=Yr(M,this.array)),this.array[e+0]=l,this.array[e+1]=f,this.array[e+2]=v,this.array[e+3]=M,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Zp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Bc extends uo{constructor(e,l,f){super(new Int8Array(e),l,f)}}class d1 extends uo{constructor(e,l,f){super(new Uint8Array(e),l,f)}}class h1 extends uo{constructor(e,l,f){super(new Uint8ClampedArray(e),l,f)}}class Qh extends uo{constructor(e,l,f){super(new Int16Array(e),l,f)}}class Zc extends uo{constructor(e,l,f){super(new Uint16Array(e),l,f)}}class Xh extends uo{constructor(e,l,f){super(new Int32Array(e),l,f)}}class Jn extends uo{constructor(e,l,f){super(new Uint32Array(e),l,f)}}class uu extends uo{constructor(e,l,f){super(new Uint16Array(e),l,f),this.isFloat16BufferAttribute=!0}getX(e){let l=Zu(this.array[e*this.itemSize]);return this.normalized&&(l=ua(l,this.array)),l}setX(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize]=Ia(l),this}getY(e){let l=Zu(this.array[e*this.itemSize+1]);return this.normalized&&(l=ua(l,this.array)),l}setY(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize+1]=Ia(l),this}getZ(e){let l=Zu(this.array[e*this.itemSize+2]);return this.normalized&&(l=ua(l,this.array)),l}setZ(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize+2]=Ia(l),this}getW(e){let l=Zu(this.array[e*this.itemSize+3]);return this.normalized&&(l=ua(l,this.array)),l}setW(e,l){return this.normalized&&(l=Yr(l,this.array)),this.array[e*this.itemSize+3]=Ia(l),this}setXY(e,l,f){return e*=this.itemSize,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array)),this.array[e+0]=Ia(l),this.array[e+1]=Ia(f),this}setXYZ(e,l,f,v){return e*=this.itemSize,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array),v=Yr(v,this.array)),this.array[e+0]=Ia(l),this.array[e+1]=Ia(f),this.array[e+2]=Ia(v),this}setXYZW(e,l,f,v,M){return e*=this.itemSize,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array),v=Yr(v,this.array),M=Yr(M,this.array)),this.array[e+0]=Ia(l),this.array[e+1]=Ia(f),this.array[e+2]=Ia(v),this.array[e+3]=Ia(M),this}}class wr extends uo{constructor(e,l,f){super(new Float32Array(e),l,f)}}class bm extends uo{constructor(e,l,f){super(new Float64Array(e),l,f)}}let Kh=0;const os=new si,du=new Ti,Bp=new Xe,hl=new Lo,ed=new Lo,Hs=new Xe;class xi extends Ma{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Kh++}),this.uuid=Ha(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(vm(e)?Jn:Zc)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,l){return this.attributes[e]=l,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,l,f=0){this.groups.push({start:e,count:l,materialIndex:f})}clearGroups(){this.groups=[]}setDrawRange(e,l){this.drawRange.start=e,this.drawRange.count=l}applyMatrix4(e){const l=this.attributes.position;l!==void 0&&(l.applyMatrix4(e),l.needsUpdate=!0);const f=this.attributes.normal;if(f!==void 0){const M=new Ai().getNormalMatrix(e);f.applyNormalMatrix(M),f.needsUpdate=!0}const v=this.attributes.tangent;return v!==void 0&&(v.transformDirection(e),v.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return os.makeRotationFromQuaternion(e),this.applyMatrix4(os),this}rotateX(e){return os.makeRotationX(e),this.applyMatrix4(os),this}rotateY(e){return os.makeRotationY(e),this.applyMatrix4(os),this}rotateZ(e){return os.makeRotationZ(e),this.applyMatrix4(os),this}translate(e,l,f){return os.makeTranslation(e,l,f),this.applyMatrix4(os),this}scale(e,l,f){return os.makeScale(e,l,f),this.applyMatrix4(os),this}lookAt(e){return du.lookAt(e),du.updateMatrix(),this.applyMatrix4(du.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bp).negate(),this.translate(Bp.x,Bp.y,Bp.z),this}setFromPoints(e){const l=[];for(let f=0,v=e.length;f<v;f++){const M=e[f];l.push(M.x,M.y,M.z||0)}return this.setAttribute("position",new wr(l,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Lo);const e=this.attributes.position,l=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){w.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Xe(-1/0,-1/0,-1/0),new Xe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),l)for(let f=0,v=l.length;f<v;f++){const M=l[f];hl.setFromBufferAttribute(M),this.morphTargetsRelative?(Hs.addVectors(this.boundingBox.min,hl.min),this.boundingBox.expandByPoint(Hs),Hs.addVectors(this.boundingBox.max,hl.max),this.boundingBox.expandByPoint(Hs)):(this.boundingBox.expandByPoint(hl.min),this.boundingBox.expandByPoint(hl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&w.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wa);const e=this.attributes.position,l=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){w.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Xe,1/0);return}if(e){const f=this.boundingSphere.center;if(hl.setFromBufferAttribute(e),l)for(let M=0,B=l.length;M<B;M++){const I=l[M];ed.setFromBufferAttribute(I),this.morphTargetsRelative?(Hs.addVectors(hl.min,ed.min),hl.expandByPoint(Hs),Hs.addVectors(hl.max,ed.max),hl.expandByPoint(Hs)):(hl.expandByPoint(ed.min),hl.expandByPoint(ed.max))}hl.getCenter(f);let v=0;for(let M=0,B=e.count;M<B;M++)Hs.fromBufferAttribute(e,M),v=Math.max(v,f.distanceToSquared(Hs));if(l)for(let M=0,B=l.length;M<B;M++){const I=l[M],k=this.morphTargetsRelative;for(let N=0,X=I.count;N<X;N++)Hs.fromBufferAttribute(I,N),k&&(Bp.fromBufferAttribute(e,N),Hs.add(Bp)),v=Math.max(v,f.distanceToSquared(Hs))}this.boundingSphere.radius=Math.sqrt(v),isNaN(this.boundingSphere.radius)&&w.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,l=this.attributes;if(e===null||l.position===void 0||l.normal===void 0||l.uv===void 0){w.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const f=e.array,v=l.position.array,M=l.normal.array,B=l.uv.array,I=v.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new uo(new Float32Array(4*I),4));const k=this.getAttribute("tangent").array,N=[],X=[];for(let Ve=0;Ve<I;Ve++)N[Ve]=new Xe,X[Ve]=new Xe;const Z=new Xe,$=new Xe,J=new Xe,re=new fn,fe=new fn,se=new fn,ne=new Xe,be=new Xe;function he(Ve,$t,bn){Z.fromArray(v,Ve*3),$.fromArray(v,$t*3),J.fromArray(v,bn*3),re.fromArray(B,Ve*2),fe.fromArray(B,$t*2),se.fromArray(B,bn*2),$.sub(Z),J.sub(Z),fe.sub(re),se.sub(re);const Nt=1/(fe.x*se.y-se.x*fe.y);isFinite(Nt)&&(ne.copy($).multiplyScalar(se.y).addScaledVector(J,-fe.y).multiplyScalar(Nt),be.copy(J).multiplyScalar(fe.x).addScaledVector($,-se.x).multiplyScalar(Nt),N[Ve].add(ne),N[$t].add(ne),N[bn].add(ne),X[Ve].add(be),X[$t].add(be),X[bn].add(be))}let Se=this.groups;Se.length===0&&(Se=[{start:0,count:f.length}]);for(let Ve=0,$t=Se.length;Ve<$t;++Ve){const bn=Se[Ve],Nt=bn.start,Vt=bn.count;for(let en=Nt,Ht=Nt+Vt;en<Ht;en+=3)he(f[en+0],f[en+1],f[en+2])}const Oe=new Xe,Qe=new Xe,Ze=new Xe,ht=new Xe;function we(Ve){Ze.fromArray(M,Ve*3),ht.copy(Ze);const $t=N[Ve];Oe.copy($t),Oe.sub(Ze.multiplyScalar(Ze.dot($t))).normalize(),Qe.crossVectors(ht,$t);const Nt=Qe.dot(X[Ve])<0?-1:1;k[Ve*4]=Oe.x,k[Ve*4+1]=Oe.y,k[Ve*4+2]=Oe.z,k[Ve*4+3]=Nt}for(let Ve=0,$t=Se.length;Ve<$t;++Ve){const bn=Se[Ve],Nt=bn.start,Vt=bn.count;for(let en=Nt,Ht=Nt+Vt;en<Ht;en+=3)we(f[en+0]),we(f[en+1]),we(f[en+2])}}computeVertexNormals(){const e=this.index,l=this.getAttribute("position");if(l!==void 0){let f=this.getAttribute("normal");if(f===void 0)f=new uo(new Float32Array(l.count*3),3),this.setAttribute("normal",f);else for(let $=0,J=f.count;$<J;$++)f.setXYZ($,0,0,0);const v=new Xe,M=new Xe,B=new Xe,I=new Xe,k=new Xe,N=new Xe,X=new Xe,Z=new Xe;if(e)for(let $=0,J=e.count;$<J;$+=3){const re=e.getX($+0),fe=e.getX($+1),se=e.getX($+2);v.fromBufferAttribute(l,re),M.fromBufferAttribute(l,fe),B.fromBufferAttribute(l,se),X.subVectors(B,M),Z.subVectors(v,M),X.cross(Z),I.fromBufferAttribute(f,re),k.fromBufferAttribute(f,fe),N.fromBufferAttribute(f,se),I.add(X),k.add(X),N.add(X),f.setXYZ(re,I.x,I.y,I.z),f.setXYZ(fe,k.x,k.y,k.z),f.setXYZ(se,N.x,N.y,N.z)}else for(let $=0,J=l.count;$<J;$+=3)v.fromBufferAttribute(l,$+0),M.fromBufferAttribute(l,$+1),B.fromBufferAttribute(l,$+2),X.subVectors(B,M),Z.subVectors(v,M),X.cross(Z),f.setXYZ($+0,X.x,X.y,X.z),f.setXYZ($+1,X.x,X.y,X.z),f.setXYZ($+2,X.x,X.y,X.z);this.normalizeNormals(),f.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let l=0,f=e.count;l<f;l++)Hs.fromBufferAttribute(e,l),Hs.normalize(),e.setXYZ(l,Hs.x,Hs.y,Hs.z)}toNonIndexed(){function e(I,k){const N=I.array,X=I.itemSize,Z=I.normalized,$=new N.constructor(k.length*X);let J=0,re=0;for(let fe=0,se=k.length;fe<se;fe++){I.isInterleavedBufferAttribute?J=k[fe]*I.data.stride+I.offset:J=k[fe]*X;for(let ne=0;ne<X;ne++)$[re++]=N[J++]}return new uo($,X,Z)}if(this.index===null)return w.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const l=new xi,f=this.index.array,v=this.attributes;for(const I in v){const k=v[I],N=e(k,f);l.setAttribute(I,N)}const M=this.morphAttributes;for(const I in M){const k=[],N=M[I];for(let X=0,Z=N.length;X<Z;X++){const $=N[X],J=e($,f);k.push(J)}l.morphAttributes[I]=k}l.morphTargetsRelative=this.morphTargetsRelative;const B=this.groups;for(let I=0,k=B.length;I<k;I++){const N=B[I];l.addGroup(N.start,N.count,N.materialIndex)}return l}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const k=this.parameters;for(const N in k)k[N]!==void 0&&(e[N]=k[N]);return e}e.data={attributes:{}};const l=this.index;l!==null&&(e.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});const f=this.attributes;for(const k in f){const N=f[k];e.data.attributes[k]=N.toJSON(e.data)}const v={};let M=!1;for(const k in this.morphAttributes){const N=this.morphAttributes[k],X=[];for(let Z=0,$=N.length;Z<$;Z++){const J=N[Z];X.push(J.toJSON(e.data))}X.length>0&&(v[k]=X,M=!0)}M&&(e.data.morphAttributes=v,e.data.morphTargetsRelative=this.morphTargetsRelative);const B=this.groups;B.length>0&&(e.data.groups=JSON.parse(JSON.stringify(B)));const I=this.boundingSphere;return I!==null&&(e.data.boundingSphere={center:I.center.toArray(),radius:I.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const l={};this.name=e.name;const f=e.index;f!==null&&this.setIndex(f.clone(l));const v=e.attributes;for(const N in v){const X=v[N];this.setAttribute(N,X.clone(l))}const M=e.morphAttributes;for(const N in M){const X=[],Z=M[N];for(let $=0,J=Z.length;$<J;$++)X.push(Z[$].clone(l));this.morphAttributes[N]=X}this.morphTargetsRelative=e.morphTargetsRelative;const B=e.groups;for(let N=0,X=B.length;N<X;N++){const Z=B[N];this.addGroup(Z.start,Z.count,Z.materialIndex)}const I=e.boundingBox;I!==null&&(this.boundingBox=I.clone());const k=e.boundingSphere;return k!==null&&(this.boundingSphere=k.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const hu=new si,$c=new Cp,Rp=new wa,Jd=new Xe,td=new Xe,fu=new Xe,Ql=new Xe,sg=new Xe,qd=new Xe,Zd=new fn,$d=new fn,nd=new fn,ag=new Xe,rd=new Xe,Yh=new Xe,uc=new Xe,gu=new Xe;class fo extends Ti{constructor(e=new xi,l=new Vl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=l,this.updateMorphTargets()}copy(e,l){return super.copy(e,l),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const l=this.geometry.morphAttributes,f=Object.keys(l);if(f.length>0){const v=l[f[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,B=v.length;M<B;M++){const I=v[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=M}}}}getVertexPosition(e,l){const f=this.geometry,v=f.attributes.position,M=f.morphAttributes.position,B=f.morphTargetsRelative;l.fromBufferAttribute(v,e);const I=this.morphTargetInfluences;if(M&&I){qd.set(0,0,0);for(let k=0,N=M.length;k<N;k++){const X=I[k],Z=M[k];X!==0&&(sg.fromBufferAttribute(Z,e),B?qd.addScaledVector(sg,X):qd.addScaledVector(sg.sub(l),X))}l.add(qd)}return l}raycast(e,l){const f=this.geometry,v=this.material,M=this.matrixWorld;v!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),Rp.copy(f.boundingSphere),Rp.applyMatrix4(M),$c.copy(e.ray).recast(e.near),!(Rp.containsPoint($c.origin)===!1&&($c.intersectSphere(Rp,Jd)===null||$c.origin.distanceToSquared(Jd)>s1(e.far-e.near,2)))&&(hu.copy(M).invert(),$c.copy(e.ray).applyMatrix4(hu),!(f.boundingBox!==null&&$c.intersectsBox(f.boundingBox)===!1)&&this._computeIntersections(e,l,$c)))}_computeIntersections(e,l,f){let v;const M=this.geometry,B=this.material,I=M.index,k=M.attributes.position,N=M.attributes.uv,X=M.attributes.uv1,Z=M.attributes.normal,$=M.groups,J=M.drawRange;if(I!==null)if(Array.isArray(B))for(let re=0,fe=$.length;re<fe;re++){const se=$[re],ne=B[se.materialIndex],be=Math.max(se.start,J.start),he=Math.min(I.count,Math.min(se.start+se.count,J.start+J.count));for(let Se=be,Oe=he;Se<Oe;Se+=3){const Qe=I.getX(Se),Ze=I.getX(Se+1),ht=I.getX(Se+2);v=ep(this,ne,e,f,N,X,Z,Qe,Ze,ht),v&&(v.faceIndex=Math.floor(Se/3),v.face.materialIndex=se.materialIndex,l.push(v))}}else{const re=Math.max(0,J.start),fe=Math.min(I.count,J.start+J.count);for(let se=re,ne=fe;se<ne;se+=3){const be=I.getX(se),he=I.getX(se+1),Se=I.getX(se+2);v=ep(this,B,e,f,N,X,Z,be,he,Se),v&&(v.faceIndex=Math.floor(se/3),l.push(v))}}else if(k!==void 0)if(Array.isArray(B))for(let re=0,fe=$.length;re<fe;re++){const se=$[re],ne=B[se.materialIndex],be=Math.max(se.start,J.start),he=Math.min(k.count,Math.min(se.start+se.count,J.start+J.count));for(let Se=be,Oe=he;Se<Oe;Se+=3){const Qe=Se,Ze=Se+1,ht=Se+2;v=ep(this,ne,e,f,N,X,Z,Qe,Ze,ht),v&&(v.faceIndex=Math.floor(Se/3),v.face.materialIndex=se.materialIndex,l.push(v))}}else{const re=Math.max(0,J.start),fe=Math.min(k.count,J.start+J.count);for(let se=re,ne=fe;se<ne;se+=3){const be=se,he=se+1,Se=se+2;v=ep(this,B,e,f,N,X,Z,be,he,Se),v&&(v.faceIndex=Math.floor(se/3),l.push(v))}}}}function mu(C,e,l,f,v,M,B,I){let k;if(e.side===We?k=f.intersectTriangle(B,M,v,!0,I):k=f.intersectTriangle(v,M,B,e.side===rt,I),k===null)return null;gu.copy(I),gu.applyMatrix4(C.matrixWorld);const N=l.ray.origin.distanceTo(gu);return N<l.near||N>l.far?null:{distance:N,point:gu.clone(),object:C}}function ep(C,e,l,f,v,M,B,I,k,N){C.getVertexPosition(I,td),C.getVertexPosition(k,fu),C.getVertexPosition(N,Ql);const X=mu(C,e,l,f,td,fu,Ql,uc);if(X){v&&(Zd.fromBufferAttribute(v,I),$d.fromBufferAttribute(v,k),nd.fromBufferAttribute(v,N),X.uv=Ya.getInterpolation(uc,td,fu,Ql,Zd,$d,nd,new fn)),M&&(Zd.fromBufferAttribute(M,I),$d.fromBufferAttribute(M,k),nd.fromBufferAttribute(M,N),X.uv1=Ya.getInterpolation(uc,td,fu,Ql,Zd,$d,nd,new fn),X.uv2=X.uv1),B&&(ag.fromBufferAttribute(B,I),rd.fromBufferAttribute(B,k),Yh.fromBufferAttribute(B,N),X.normal=Ya.getInterpolation(uc,td,fu,Ql,ag,rd,Yh,new Xe),X.normal.dot(f.direction)>0&&X.normal.multiplyScalar(-1));const Z={a:I,b:k,c:N,normal:new Xe,materialIndex:0};Ya.getNormal(td,fu,Ql,Z.normal),X.face=Z}return X}class Rc extends xi{constructor(e=1,l=1,f=1,v=1,M=1,B=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:l,depth:f,widthSegments:v,heightSegments:M,depthSegments:B};const I=this;v=Math.floor(v),M=Math.floor(M),B=Math.floor(B);const k=[],N=[],X=[],Z=[];let $=0,J=0;re("z","y","x",-1,-1,f,l,e,B,M,0),re("z","y","x",1,-1,f,l,-e,B,M,1),re("x","z","y",1,1,e,f,l,v,B,2),re("x","z","y",1,-1,e,f,-l,v,B,3),re("x","y","z",1,-1,e,l,f,v,M,4),re("x","y","z",-1,-1,e,l,-f,v,M,5),this.setIndex(k),this.setAttribute("position",new wr(N,3)),this.setAttribute("normal",new wr(X,3)),this.setAttribute("uv",new wr(Z,2));function re(fe,se,ne,be,he,Se,Oe,Qe,Ze,ht,we){const Ve=Se/Ze,$t=Oe/ht,bn=Se/2,Nt=Oe/2,Vt=Qe/2,en=Ze+1,Ht=ht+1;let un=0,hn=0;const xn=new Xe;for(let mn=0;mn<Ht;mn++){const mt=mn*$t-Nt;for(let it=0;it<en;it++){const ir=it*Ve-bn;xn[fe]=ir*be,xn[se]=mt*he,xn[ne]=Vt,N.push(xn.x,xn.y,xn.z),xn[fe]=0,xn[se]=0,xn[ne]=Qe>0?1:-1,X.push(xn.x,xn.y,xn.z),Z.push(it/Ze),Z.push(1-mn/ht),un+=1}}for(let mn=0;mn<ht;mn++)for(let mt=0;mt<Ze;mt++){const it=$+mt+en*mn,ir=$+mt+en*(mn+1),or=$+(mt+1)+en*(mn+1),cr=$+(mt+1)+en*mn;k.push(it,ir,cr),k.push(ir,or,cr),hn+=6}I.addGroup(J,hn,we),J+=hn,$+=un}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bl(C){const e={};for(const l in C){e[l]={};for(const f in C[l]){const v=C[l][f];v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture||v.isQuaternion)?v.isRenderTargetTexture?(w.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[l][f]=null):e[l][f]=v.clone():Array.isArray(v)?e[l][f]=v.slice():e[l][f]=v}}return e}function vs(C){const e={};for(let l=0;l<C.length;l++){const f=Bl(C[l]);for(const v in f)e[v]=f[v]}return e}function id(C){const e=[];for(let l=0;l<C.length;l++)e.push(C[l].clone());return e}function Jh(C){return C.getRenderTarget()===null?C.outputColorSpace:oc}const Au={clone:Bl,merge:vs};var lg=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Yo=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Wr extends fa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=lg,this.fragmentShader=Yo,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bl(e.uniforms),this.uniformsGroups=id(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const l=super.toJSON(e);l.glslVersion=this.glslVersion,l.uniforms={};for(const v in this.uniforms){const B=this.uniforms[v].value;B&&B.isTexture?l.uniforms[v]={type:"t",value:B.toJSON(e).uuid}:B&&B.isColor?l.uniforms[v]={type:"c",value:B.getHex()}:B&&B.isVector2?l.uniforms[v]={type:"v2",value:B.toArray()}:B&&B.isVector3?l.uniforms[v]={type:"v3",value:B.toArray()}:B&&B.isVector4?l.uniforms[v]={type:"v4",value:B.toArray()}:B&&B.isMatrix3?l.uniforms[v]={type:"m3",value:B.toArray()}:B&&B.isMatrix4?l.uniforms[v]={type:"m4",value:B.toArray()}:l.uniforms[v]={value:B}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader,l.lights=this.lights,l.clipping=this.clipping;const f={};for(const v in this.extensions)this.extensions[v]===!0&&(f[v]=!0);return Object.keys(f).length>0&&(l.extensions=f),l}}class Wo extends Ti{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new si,this.projectionMatrix=new si,this.projectionMatrixInverse=new si,this.coordinateSystem=gs}copy(e,l){return super.copy(e,l),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return e.set(-l[8],-l[9],-l[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,l){super.updateWorldMatrix(e,l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Gi extends Wo{constructor(e=50,l=1,f=.1,v=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=f,this.far=v,this.focus=10,this.aspect=l,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,l){return super.copy(e,l),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const l=.5*this.getFilmHeight()/e;this.fov=vc*2*Math.atan(l),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vc*2*Math.atan(Math.tan(yc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,l,f,v,M,B){this.aspect=e/l,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=l,this.view.offsetX=f,this.view.offsetY=v,this.view.width=M,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let l=e*Math.tan(yc*.5*this.fov)/this.zoom,f=2*l,v=this.aspect*f,M=-.5*v;const B=this.view;if(this.view!==null&&this.view.enabled){const k=B.fullWidth,N=B.fullHeight;M+=B.offsetX*v/k,l-=B.offsetY*f/N,v*=B.width/k,f*=B.height/N}const I=this.filmOffset;I!==0&&(M+=e*I/this.getFilmWidth()),this.projectionMatrix.makePerspective(M,M+v,l,l-f,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const l=super.toJSON(e);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,this.view!==null&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}const ss=-90,$s=1;class Ip extends Ti{constructor(e,l,f){super(),this.type="CubeCamera",this.renderTarget=f,this.coordinateSystem=null;const v=new Gi(ss,$s,e,l);v.layers=this.layers,this.add(v);const M=new Gi(ss,$s,e,l);M.layers=this.layers,this.add(M);const B=new Gi(ss,$s,e,l);B.layers=this.layers,this.add(B);const I=new Gi(ss,$s,e,l);I.layers=this.layers,this.add(I);const k=new Gi(ss,$s,e,l);k.layers=this.layers,this.add(k);const N=new Gi(ss,$s,e,l);N.layers=this.layers,this.add(N)}updateCoordinateSystem(){const e=this.coordinateSystem,l=this.children.concat(),[f,v,M,B,I,k]=l;for(const N of l)this.remove(N);if(e===gs)f.up.set(0,1,0),f.lookAt(1,0,0),v.up.set(0,1,0),v.lookAt(-1,0,0),M.up.set(0,0,-1),M.lookAt(0,1,0),B.up.set(0,0,1),B.lookAt(0,-1,0),I.up.set(0,1,0),I.lookAt(0,0,1),k.up.set(0,1,0),k.lookAt(0,0,-1);else if(e===eu)f.up.set(0,-1,0),f.lookAt(-1,0,0),v.up.set(0,-1,0),v.lookAt(1,0,0),M.up.set(0,0,1),M.lookAt(0,1,0),B.up.set(0,0,-1),B.lookAt(0,-1,0),I.up.set(0,-1,0),I.lookAt(0,0,1),k.up.set(0,-1,0),k.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const N of l)this.add(N),N.updateMatrixWorld()}update(e,l){this.parent===null&&this.updateMatrixWorld();const f=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[v,M,B,I,k,N]=this.children,X=e.getRenderTarget(),Z=e.toneMapping,$=e.xr.enabled;e.toneMapping=ao,e.xr.enabled=!1;const J=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,e.setRenderTarget(f,0),e.render(l,v),e.setRenderTarget(f,1),e.render(l,M),e.setRenderTarget(f,2),e.render(l,B),e.setRenderTarget(f,3),e.render(l,I),e.setRenderTarget(f,4),e.render(l,k),f.texture.generateMipmaps=J,e.setRenderTarget(f,5),e.render(l,N),e.setRenderTarget(X),e.toneMapping=Z,e.xr.enabled=$,f.texture.needsPMREMUpdate=!0}}class Jo extends io{constructor(e,l,f,v,M,B,I,k,N,X){e=e!==void 0?e:[],l=l!==void 0?l:Ls,super(e,l,f,v,M,B,I,k,N,X),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class yu extends qs{constructor(e=1,l={}){super(e,e,l),this.isWebGLCubeRenderTarget=!0;const f={width:e,height:e,depth:1},v=[f,f,f,f,f,f];l.encoding!==void 0&&(Mc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),l.colorSpace=l.encoding===El?ui:ic),this.texture=new Jo(v,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=l.generateMipmaps!==void 0?l.generateMipmaps:!1,this.texture.minFilter=l.minFilter!==void 0?l.minFilter:co}fromEquirectangularTexture(e,l){this.texture.type=l.type,this.texture.colorSpace=l.colorSpace,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;const f={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},v=new Rc(5,5,5),M=new Wr({name:"CubemapFromEquirect",uniforms:Bl(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,side:We,blending:St});M.uniforms.tEquirect.value=l;const B=new fo(v,M),I=l.minFilter;return l.minFilter===ho&&(l.minFilter=co),new Ip(1,10,this).update(e,B),l.minFilter=I,B.geometry.dispose(),B.material.dispose(),this}clear(e,l,f,v){const M=e.getRenderTarget();for(let B=0;B<6;B++)e.setRenderTarget(this,B),e.clear(l,f,v);e.setRenderTarget(M)}}const Fp=new Xe,go=new Xe,ga=new Ai;class Fa{constructor(e=new Xe(1,0,0),l=0){this.isPlane=!0,this.normal=e,this.constant=l}set(e,l){return this.normal.copy(e),this.constant=l,this}setComponents(e,l,f,v){return this.normal.set(e,l,f),this.constant=v,this}setFromNormalAndCoplanarPoint(e,l){return this.normal.copy(e),this.constant=-l.dot(this.normal),this}setFromCoplanarPoints(e,l,f){const v=Fp.subVectors(f,l).cross(go.subVectors(e,l)).normalize();return this.setFromNormalAndCoplanarPoint(v,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,l){return l.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,l){const f=e.delta(Fp),v=this.normal.dot(f);if(v===0)return this.distanceToPoint(e.start)===0?l.copy(e.start):null;const M=-(e.start.dot(this.normal)+this.constant)/v;return M<0||M>1?null:l.copy(e.start).addScaledVector(f,M)}intersectsLine(e){const l=this.distanceToPoint(e.start),f=this.distanceToPoint(e.end);return l<0&&f>0||f<0&&l>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,l){const f=l||ga.getNormalMatrix(e),v=this.coplanarPoint(Fp).applyMatrix4(e),M=this.normal.applyMatrix3(f).normalize();return this.constant=-v.dot(M),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _s=new wa,vu=new Xe;class od{constructor(e=new Fa,l=new Fa,f=new Fa,v=new Fa,M=new Fa,B=new Fa){this.planes=[e,l,f,v,M,B]}set(e,l,f,v,M,B){const I=this.planes;return I[0].copy(e),I[1].copy(l),I[2].copy(f),I[3].copy(v),I[4].copy(M),I[5].copy(B),this}copy(e){const l=this.planes;for(let f=0;f<6;f++)l[f].copy(e.planes[f]);return this}setFromProjectionMatrix(e,l=gs){const f=this.planes,v=e.elements,M=v[0],B=v[1],I=v[2],k=v[3],N=v[4],X=v[5],Z=v[6],$=v[7],J=v[8],re=v[9],fe=v[10],se=v[11],ne=v[12],be=v[13],he=v[14],Se=v[15];if(f[0].setComponents(k-M,$-N,se-J,Se-ne).normalize(),f[1].setComponents(k+M,$+N,se+J,Se+ne).normalize(),f[2].setComponents(k+B,$+X,se+re,Se+be).normalize(),f[3].setComponents(k-B,$-X,se-re,Se-be).normalize(),f[4].setComponents(k-I,$-Z,se-fe,Se-he).normalize(),l===gs)f[5].setComponents(k+I,$+Z,se+fe,Se+he).normalize();else if(l===eu)f[5].setComponents(I,Z,fe,he).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+l);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_s.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const l=e.geometry;l.boundingSphere===null&&l.computeBoundingSphere(),_s.copy(l.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_s)}intersectsSprite(e){return _s.center.set(0,0,0),_s.radius=.7071067811865476,_s.applyMatrix4(e.matrixWorld),this.intersectsSphere(_s)}intersectsSphere(e){const l=this.planes,f=e.center,v=-e.radius;for(let M=0;M<6;M++)if(l[M].distanceToPoint(f)<v)return!1;return!0}intersectsBox(e){const l=this.planes;for(let f=0;f<6;f++){const v=l[f];if(vu.x=v.normal.x>0?e.max.x:e.min.x,vu.y=v.normal.y>0?e.max.y:e.min.y,vu.z=v.normal.z>0?e.max.z:e.min.z,v.distanceToPoint(vu)<0)return!1}return!0}containsPoint(e){const l=this.planes;for(let f=0;f<6;f++)if(l[f].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Ic(){let C=null,e=!1,l=null,f=null;function v(M,B){l(M,B),f=C.requestAnimationFrame(v)}return{start:function(){e!==!0&&l!==null&&(f=C.requestAnimationFrame(v),e=!0)},stop:function(){C.cancelAnimationFrame(f),e=!1},setAnimationLoop:function(M){l=M},setContext:function(M){C=M}}}function qh(C,e){const l=e.isWebGL2,f=new WeakMap;function v(N,X){const Z=N.array,$=N.usage,J=C.createBuffer();C.bindBuffer(X,J),C.bufferData(X,Z,$),N.onUploadCallback();let re;if(Z instanceof Float32Array)re=C.FLOAT;else if(Z instanceof Uint16Array)if(N.isFloat16BufferAttribute)if(l)re=C.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else re=C.UNSIGNED_SHORT;else if(Z instanceof Int16Array)re=C.SHORT;else if(Z instanceof Uint32Array)re=C.UNSIGNED_INT;else if(Z instanceof Int32Array)re=C.INT;else if(Z instanceof Int8Array)re=C.BYTE;else if(Z instanceof Uint8Array)re=C.UNSIGNED_BYTE;else if(Z instanceof Uint8ClampedArray)re=C.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Z);return{buffer:J,type:re,bytesPerElement:Z.BYTES_PER_ELEMENT,version:N.version}}function M(N,X,Z){const $=X.array,J=X.updateRange;C.bindBuffer(Z,N),J.count===-1?C.bufferSubData(Z,0,$):(l?C.bufferSubData(Z,J.offset*$.BYTES_PER_ELEMENT,$,J.offset,J.count):C.bufferSubData(Z,J.offset*$.BYTES_PER_ELEMENT,$.subarray(J.offset,J.offset+J.count)),J.count=-1),X.onUploadCallback()}function B(N){return N.isInterleavedBufferAttribute&&(N=N.data),f.get(N)}function I(N){N.isInterleavedBufferAttribute&&(N=N.data);const X=f.get(N);X&&(C.deleteBuffer(X.buffer),f.delete(N))}function k(N,X){if(N.isGLBufferAttribute){const $=f.get(N);(!$||$.version<N.version)&&f.set(N,{buffer:N.buffer,type:N.type,bytesPerElement:N.elementSize,version:N.version});return}N.isInterleavedBufferAttribute&&(N=N.data);const Z=f.get(N);Z===void 0?f.set(N,v(N,X)):Z.version<N.version&&(M(Z.buffer,N,X),Z.version=N.version)}return{get:B,remove:I,update:k}}class _u extends xi{constructor(e=1,l=1,f=1,v=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:l,widthSegments:f,heightSegments:v};const M=e/2,B=l/2,I=Math.floor(f),k=Math.floor(v),N=I+1,X=k+1,Z=e/I,$=l/k,J=[],re=[],fe=[],se=[];for(let ne=0;ne<X;ne++){const be=ne*$-B;for(let he=0;he<N;he++){const Se=he*Z-M;re.push(Se,-be,0),fe.push(0,0,1),se.push(he/I),se.push(1-ne/k)}}for(let ne=0;ne<k;ne++)for(let be=0;be<I;be++){const he=be+N*ne,Se=be+N*(ne+1),Oe=be+1+N*(ne+1),Qe=be+1+N*ne;J.push(he,Se,Qe),J.push(Se,Oe,Qe)}this.setIndex(J),this.setAttribute("position",new wr(re,3)),this.setAttribute("normal",new wr(fe,3)),this.setAttribute("uv",new wr(se,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _u(e.width,e.height,e.widthSegments,e.heightSegments)}}var Op=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,sd=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Xl=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,eh=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Eu=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,th=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ad=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,cg=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,fl=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Fc=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Kl=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zh=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Ja=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,pg=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,ug=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,$h=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dg=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tp=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Yl=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,bu=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ef=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,dc=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,hg=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fg=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,nh=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tf=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gg=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Mu=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mg="gl_FragColor = linearToOutputTexel( gl_FragColor );",nf=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,np=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ag=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,gl=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ld=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qa=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Mm=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yg=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rh=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xm=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cd=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Cm=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Sm=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Jl=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rf=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ih=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Dp=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,of=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Pp=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pd=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sf=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oh=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,wm=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vg=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_g=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Eg=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,rp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bg=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sh=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,af=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,x=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,S=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,U=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,V=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,te=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,de=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Je=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Et=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Wt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Pn=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Mr=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,di=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,jr=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,To=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Fr=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Za=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ql=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Dt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Ct=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Xt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ur=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Or=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ci=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,yi=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,oo=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ma=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Qi=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Lp=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Tm=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,f1=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Vb=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Qb=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Xb=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,l_=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Kb=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,c_=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,p_=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,qo=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,dy=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hy=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,u_=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,d_=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,h_=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ea=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fy=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Es=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Bi={alphahash_fragment:Op,alphahash_pars_fragment:sd,alphamap_fragment:Xl,alphamap_pars_fragment:eh,alphatest_fragment:Eu,alphatest_pars_fragment:th,aomap_fragment:ad,aomap_pars_fragment:cg,begin_vertex:fl,beginnormal_vertex:Fc,bsdfs:Kl,iridescence_fragment:Zh,bumpmap_pars_fragment:Ja,clipping_planes_fragment:pg,clipping_planes_pars_fragment:ug,clipping_planes_pars_vertex:$h,clipping_planes_vertex:dg,color_fragment:tp,color_pars_fragment:Yl,color_pars_vertex:bu,color_vertex:ef,common:dc,cube_uv_reflection_fragment:hg,defaultnormal_vertex:fg,displacementmap_pars_vertex:nh,displacementmap_vertex:tf,emissivemap_fragment:gg,emissivemap_pars_fragment:Mu,colorspace_fragment:mg,colorspace_pars_fragment:nf,envmap_fragment:np,envmap_common_pars_fragment:Ag,envmap_pars_fragment:gl,envmap_pars_vertex:ld,envmap_physical_pars_fragment:Dp,envmap_vertex:qa,fog_vertex:Mm,fog_pars_vertex:yg,fog_fragment:rh,fog_pars_fragment:xm,gradientmap_pars_fragment:cd,lightmap_fragment:Cm,lightmap_pars_fragment:Sm,lights_lambert_fragment:Jl,lights_lambert_pars_fragment:rf,lights_pars_begin:ih,lights_toon_fragment:of,lights_toon_pars_fragment:Pp,lights_phong_fragment:pd,lights_phong_pars_fragment:sf,lights_physical_fragment:oh,lights_physical_pars_fragment:wm,lights_fragment_begin:vg,lights_fragment_maps:_g,lights_fragment_end:Eg,logdepthbuf_fragment:rp,logdepthbuf_pars_fragment:bg,logdepthbuf_pars_vertex:sh,logdepthbuf_vertex:af,map_fragment:x,map_pars_fragment:S,map_particle_fragment:U,map_particle_pars_fragment:V,metalnessmap_fragment:te,metalnessmap_pars_fragment:de,morphcolor_vertex:Je,morphnormal_vertex:Et,morphtarget_pars_vertex:Wt,morphtarget_vertex:Pn,normal_fragment_begin:Mr,normal_fragment_maps:di,normal_pars_fragment:jr,normal_pars_vertex:To,normal_vertex:Fr,normalmap_pars_fragment:Za,clearcoat_normal_fragment_begin:ql,clearcoat_normal_fragment_maps:Dt,clearcoat_pars_fragment:Ct,iridescence_pars_fragment:Xt,opaque_fragment:ur,packing:Or,premultiplied_alpha_fragment:Ci,project_vertex:yi,dithering_fragment:oo,dithering_pars_fragment:ma,roughnessmap_fragment:Qi,roughnessmap_pars_fragment:Lp,shadowmap_pars_fragment:Tm,shadowmap_pars_vertex:f1,shadowmap_vertex:Vb,shadowmask_pars_fragment:Qb,skinbase_vertex:Xb,skinning_pars_vertex:l_,skinning_vertex:Kb,skinnormal_vertex:c_,specularmap_fragment:p_,specularmap_pars_fragment:qo,tonemapping_fragment:dy,tonemapping_pars_fragment:hy,transmission_fragment:u_,transmission_pars_fragment:d_,uv_pars_fragment:h_,uv_pars_vertex:ea,uv_vertex:fy,worldpos_vertex:Es,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},Xn={common:{diffuse:{value:new pr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ai},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ai}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ai}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ai}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ai},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ai},normalScale:{value:new fn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ai},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ai}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ai}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ai}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0},uvTransform:{value:new Ai}},sprite:{diffuse:{value:new pr(16777215)},opacity:{value:1},center:{value:new fn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ai},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0}}},Oc={basic:{uniforms:vs([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.fog]),vertexShader:Bi.meshbasic_vert,fragmentShader:Bi.meshbasic_frag},lambert:{uniforms:vs([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,Xn.lights,{emissive:{value:new pr(0)}}]),vertexShader:Bi.meshlambert_vert,fragmentShader:Bi.meshlambert_frag},phong:{uniforms:vs([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,Xn.lights,{emissive:{value:new pr(0)},specular:{value:new pr(1118481)},shininess:{value:30}}]),vertexShader:Bi.meshphong_vert,fragmentShader:Bi.meshphong_frag},standard:{uniforms:vs([Xn.common,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.roughnessmap,Xn.metalnessmap,Xn.fog,Xn.lights,{emissive:{value:new pr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bi.meshphysical_vert,fragmentShader:Bi.meshphysical_frag},toon:{uniforms:vs([Xn.common,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.gradientmap,Xn.fog,Xn.lights,{emissive:{value:new pr(0)}}]),vertexShader:Bi.meshtoon_vert,fragmentShader:Bi.meshtoon_frag},matcap:{uniforms:vs([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,{matcap:{value:null}}]),vertexShader:Bi.meshmatcap_vert,fragmentShader:Bi.meshmatcap_frag},points:{uniforms:vs([Xn.points,Xn.fog]),vertexShader:Bi.points_vert,fragmentShader:Bi.points_frag},dashed:{uniforms:vs([Xn.common,Xn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bi.linedashed_vert,fragmentShader:Bi.linedashed_frag},depth:{uniforms:vs([Xn.common,Xn.displacementmap]),vertexShader:Bi.depth_vert,fragmentShader:Bi.depth_frag},normal:{uniforms:vs([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,{opacity:{value:1}}]),vertexShader:Bi.meshnormal_vert,fragmentShader:Bi.meshnormal_frag},sprite:{uniforms:vs([Xn.sprite,Xn.fog]),vertexShader:Bi.sprite_vert,fragmentShader:Bi.sprite_frag},background:{uniforms:{uvTransform:{value:new Ai},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bi.background_vert,fragmentShader:Bi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Bi.backgroundCube_vert,fragmentShader:Bi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bi.cube_vert,fragmentShader:Bi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bi.equirect_vert,fragmentShader:Bi.equirect_frag},distanceRGBA:{uniforms:vs([Xn.common,Xn.displacementmap,{referencePosition:{value:new Xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bi.distanceRGBA_vert,fragmentShader:Bi.distanceRGBA_frag},shadow:{uniforms:vs([Xn.lights,Xn.fog,{color:{value:new pr(0)},opacity:{value:1}}]),vertexShader:Bi.shadow_vert,fragmentShader:Bi.shadow_frag}};Oc.physical={uniforms:vs([Oc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ai},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ai},clearcoatNormalScale:{value:new fn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ai},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ai},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ai},sheen:{value:0},sheenColor:{value:new pr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ai},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ai},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ai},transmissionSamplerSize:{value:new fn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ai},attenuationDistance:{value:0},attenuationColor:{value:new pr(0)},specularColor:{value:new pr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ai},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ai},anisotropyVector:{value:new fn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ai}}]),vertexShader:Bi.meshphysical_vert,fragmentShader:Bi.meshphysical_frag};const Rm={r:0,b:0,g:0};function S_(C,e,l,f,v,M,B){const I=new pr(0);let k=M===!0?0:1,N,X,Z=null,$=0,J=null;function re(se,ne){let be=!1,he=ne.isScene===!0?ne.background:null;switch(he&&he.isTexture&&(he=(ne.backgroundBlurriness>0?l:e).get(he)),he===null?fe(I,k):he&&he.isColor&&(fe(he,1),be=!0),C.xr.getEnvironmentBlendMode()){case"opaque":be=!0;break;case"additive":f.buffers.color.setClear(0,0,0,1,B),be=!0;break;case"alpha-blend":f.buffers.color.setClear(0,0,0,0,B),be=!0;break}(C.autoClear||be)&&C.clear(C.autoClearColor,C.autoClearDepth,C.autoClearStencil),he&&(he.isCubeTexture||he.mapping===Qs)?(X===void 0&&(X=new fo(new Rc(1,1,1),new Wr({name:"BackgroundCubeMaterial",uniforms:Bl(Oc.backgroundCube.uniforms),vertexShader:Oc.backgroundCube.vertexShader,fragmentShader:Oc.backgroundCube.fragmentShader,side:We,depthTest:!1,depthWrite:!1,fog:!1})),X.geometry.deleteAttribute("normal"),X.geometry.deleteAttribute("uv"),X.onBeforeRender=function(Qe,Ze,ht){this.matrixWorld.copyPosition(ht.matrixWorld)},Object.defineProperty(X.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),v.update(X)),X.material.uniforms.envMap.value=he,X.material.uniforms.flipEnvMap.value=he.isCubeTexture&&he.isRenderTargetTexture===!1?-1:1,X.material.uniforms.backgroundBlurriness.value=ne.backgroundBlurriness,X.material.uniforms.backgroundIntensity.value=ne.backgroundIntensity,X.material.toneMapped=he.colorSpace!==ui,(Z!==he||$!==he.version||J!==C.toneMapping)&&(X.material.needsUpdate=!0,Z=he,$=he.version,J=C.toneMapping),X.layers.enableAll(),se.unshift(X,X.geometry,X.material,0,0,null)):he&&he.isTexture&&(N===void 0&&(N=new fo(new _u(2,2),new Wr({name:"BackgroundMaterial",uniforms:Bl(Oc.background.uniforms),vertexShader:Oc.background.vertexShader,fragmentShader:Oc.background.fragmentShader,side:rt,depthTest:!1,depthWrite:!1,fog:!1})),N.geometry.deleteAttribute("normal"),Object.defineProperty(N.material,"map",{get:function(){return this.uniforms.t2D.value}}),v.update(N)),N.material.uniforms.t2D.value=he,N.material.uniforms.backgroundIntensity.value=ne.backgroundIntensity,N.material.toneMapped=he.colorSpace!==ui,he.matrixAutoUpdate===!0&&he.updateMatrix(),N.material.uniforms.uvTransform.value.copy(he.matrix),(Z!==he||$!==he.version||J!==C.toneMapping)&&(N.material.needsUpdate=!0,Z=he,$=he.version,J=C.toneMapping),N.layers.enableAll(),se.unshift(N,N.geometry,N.material,0,0,null))}function fe(se,ne){se.getRGB(Rm,Jh(C)),f.buffers.color.setClear(Rm.r,Rm.g,Rm.b,ne,B)}return{getClearColor:function(){return I},setClearColor:function(se,ne=1){I.set(se),k=ne,fe(I,k)},getClearAlpha:function(){return k},setClearAlpha:function(se){k=se,fe(I,k)},render:re}}function xg(C,e,l,f){const v=C.getParameter(C.MAX_VERTEX_ATTRIBS),M=f.isWebGL2?null:e.get("OES_vertex_array_object"),B=f.isWebGL2||M!==null,I={},k=se(null);let N=k,X=!1;function Z(Vt,en,Ht,un,hn){let xn=!1;if(B){const mn=fe(un,Ht,en);N!==mn&&(N=mn,J(N.object)),xn=ne(Vt,un,Ht,hn),xn&&be(Vt,un,Ht,hn)}else{const mn=en.wireframe===!0;(N.geometry!==un.id||N.program!==Ht.id||N.wireframe!==mn)&&(N.geometry=un.id,N.program=Ht.id,N.wireframe=mn,xn=!0)}hn!==null&&l.update(hn,C.ELEMENT_ARRAY_BUFFER),(xn||X)&&(X=!1,ht(Vt,en,Ht,un),hn!==null&&C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,l.get(hn).buffer))}function $(){return f.isWebGL2?C.createVertexArray():M.createVertexArrayOES()}function J(Vt){return f.isWebGL2?C.bindVertexArray(Vt):M.bindVertexArrayOES(Vt)}function re(Vt){return f.isWebGL2?C.deleteVertexArray(Vt):M.deleteVertexArrayOES(Vt)}function fe(Vt,en,Ht){const un=Ht.wireframe===!0;let hn=I[Vt.id];hn===void 0&&(hn={},I[Vt.id]=hn);let xn=hn[en.id];xn===void 0&&(xn={},hn[en.id]=xn);let mn=xn[un];return mn===void 0&&(mn=se($()),xn[un]=mn),mn}function se(Vt){const en=[],Ht=[],un=[];for(let hn=0;hn<v;hn++)en[hn]=0,Ht[hn]=0,un[hn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:en,enabledAttributes:Ht,attributeDivisors:un,object:Vt,attributes:{},index:null}}function ne(Vt,en,Ht,un){const hn=N.attributes,xn=en.attributes;let mn=0;const mt=Ht.getAttributes();for(const it in mt)if(mt[it].location>=0){const or=hn[it];let cr=xn[it];if(cr===void 0&&(it==="instanceMatrix"&&Vt.instanceMatrix&&(cr=Vt.instanceMatrix),it==="instanceColor"&&Vt.instanceColor&&(cr=Vt.instanceColor)),or===void 0||or.attribute!==cr||cr&&or.data!==cr.data)return!0;mn++}return N.attributesNum!==mn||N.index!==un}function be(Vt,en,Ht,un){const hn={},xn=en.attributes;let mn=0;const mt=Ht.getAttributes();for(const it in mt)if(mt[it].location>=0){let or=xn[it];or===void 0&&(it==="instanceMatrix"&&Vt.instanceMatrix&&(or=Vt.instanceMatrix),it==="instanceColor"&&Vt.instanceColor&&(or=Vt.instanceColor));const cr={};cr.attribute=or,or&&or.data&&(cr.data=or.data),hn[it]=cr,mn++}N.attributes=hn,N.attributesNum=mn,N.index=un}function he(){const Vt=N.newAttributes;for(let en=0,Ht=Vt.length;en<Ht;en++)Vt[en]=0}function Se(Vt){Oe(Vt,0)}function Oe(Vt,en){const Ht=N.newAttributes,un=N.enabledAttributes,hn=N.attributeDivisors;Ht[Vt]=1,un[Vt]===0&&(C.enableVertexAttribArray(Vt),un[Vt]=1),hn[Vt]!==en&&((f.isWebGL2?C:e.get("ANGLE_instanced_arrays"))[f.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Vt,en),hn[Vt]=en)}function Qe(){const Vt=N.newAttributes,en=N.enabledAttributes;for(let Ht=0,un=en.length;Ht<un;Ht++)en[Ht]!==Vt[Ht]&&(C.disableVertexAttribArray(Ht),en[Ht]=0)}function Ze(Vt,en,Ht,un,hn,xn,mn){mn===!0?C.vertexAttribIPointer(Vt,en,Ht,hn,xn):C.vertexAttribPointer(Vt,en,Ht,un,hn,xn)}function ht(Vt,en,Ht,un){if(f.isWebGL2===!1&&(Vt.isInstancedMesh||un.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;he();const hn=un.attributes,xn=Ht.getAttributes(),mn=en.defaultAttributeValues;for(const mt in xn){const it=xn[mt];if(it.location>=0){let ir=hn[mt];if(ir===void 0&&(mt==="instanceMatrix"&&Vt.instanceMatrix&&(ir=Vt.instanceMatrix),mt==="instanceColor"&&Vt.instanceColor&&(ir=Vt.instanceColor)),ir!==void 0){const or=ir.normalized,cr=ir.itemSize,Lr=l.get(ir);if(Lr===void 0)continue;const Zr=Lr.buffer,Vr=Lr.type,$i=Lr.bytesPerElement,po=f.isWebGL2===!0&&(Vr===C.INT||Vr===C.UNSIGNED_INT||ir.gpuType===Oo);if(ir.isInterleavedBufferAttribute){const Ar=ir.data,nt=Ar.stride,Zn=ir.offset;if(Ar.isInstancedInterleavedBuffer){for(let dn=0;dn<it.locationSize;dn++)Oe(it.location+dn,Ar.meshPerAttribute);Vt.isInstancedMesh!==!0&&un._maxInstanceCount===void 0&&(un._maxInstanceCount=Ar.meshPerAttribute*Ar.count)}else for(let dn=0;dn<it.locationSize;dn++)Se(it.location+dn);C.bindBuffer(C.ARRAY_BUFFER,Zr);for(let dn=0;dn<it.locationSize;dn++)Ze(it.location+dn,cr/it.locationSize,Vr,or,nt*$i,(Zn+cr/it.locationSize*dn)*$i,po)}else{if(ir.isInstancedBufferAttribute){for(let Ar=0;Ar<it.locationSize;Ar++)Oe(it.location+Ar,ir.meshPerAttribute);Vt.isInstancedMesh!==!0&&un._maxInstanceCount===void 0&&(un._maxInstanceCount=ir.meshPerAttribute*ir.count)}else for(let Ar=0;Ar<it.locationSize;Ar++)Se(it.location+Ar);C.bindBuffer(C.ARRAY_BUFFER,Zr);for(let Ar=0;Ar<it.locationSize;Ar++)Ze(it.location+Ar,cr/it.locationSize,Vr,or,cr*$i,cr/it.locationSize*Ar*$i,po)}}else if(mn!==void 0){const or=mn[mt];if(or!==void 0)switch(or.length){case 2:C.vertexAttrib2fv(it.location,or);break;case 3:C.vertexAttrib3fv(it.location,or);break;case 4:C.vertexAttrib4fv(it.location,or);break;default:C.vertexAttrib1fv(it.location,or)}}}}Qe()}function we(){bn();for(const Vt in I){const en=I[Vt];for(const Ht in en){const un=en[Ht];for(const hn in un)re(un[hn].object),delete un[hn];delete en[Ht]}delete I[Vt]}}function Ve(Vt){if(I[Vt.id]===void 0)return;const en=I[Vt.id];for(const Ht in en){const un=en[Ht];for(const hn in un)re(un[hn].object),delete un[hn];delete en[Ht]}delete I[Vt.id]}function $t(Vt){for(const en in I){const Ht=I[en];if(Ht[Vt.id]===void 0)continue;const un=Ht[Vt.id];for(const hn in un)re(un[hn].object),delete un[hn];delete Ht[Vt.id]}}function bn(){Nt(),X=!0,N!==k&&(N=k,J(N.object))}function Nt(){k.geometry=null,k.program=null,k.wireframe=!1}return{setup:Z,reset:bn,resetDefaultState:Nt,dispose:we,releaseStatesOfGeometry:Ve,releaseStatesOfProgram:$t,initAttributes:he,enableAttribute:Se,disableUnusedAttributes:Qe}}function w_(C,e,l,f){const v=f.isWebGL2;let M;function B(N){M=N}function I(N,X){C.drawArrays(M,N,X),l.update(X,M,1)}function k(N,X,Z){if(Z===0)return;let $,J;if(v)$=C,J="drawArraysInstanced";else if($=e.get("ANGLE_instanced_arrays"),J="drawArraysInstancedANGLE",$===null){w.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}$[J](M,N,X,Z),l.update(X,M,Z)}this.setMode=B,this.render=I,this.renderInstances=k}function Ay(C,e,l){let f;function v(){if(f!==void 0)return f;if(e.has("EXT_texture_filter_anisotropic")===!0){const Ze=e.get("EXT_texture_filter_anisotropic");f=C.getParameter(Ze.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else f=0;return f}function M(Ze){if(Ze==="highp"){if(C.getShaderPrecisionFormat(C.VERTEX_SHADER,C.HIGH_FLOAT).precision>0&&C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.HIGH_FLOAT).precision>0)return"highp";Ze="mediump"}return Ze==="mediump"&&C.getShaderPrecisionFormat(C.VERTEX_SHADER,C.MEDIUM_FLOAT).precision>0&&C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const B=typeof WebGL2RenderingContext!="undefined"&&C.constructor.name==="WebGL2RenderingContext";let I=l.precision!==void 0?l.precision:"highp";const k=M(I);k!==I&&(w.warn("THREE.WebGLRenderer:",I,"not supported, using",k,"instead."),I=k);const N=B||e.has("WEBGL_draw_buffers"),X=l.logarithmicDepthBuffer===!0,Z=C.getParameter(C.MAX_TEXTURE_IMAGE_UNITS),$=C.getParameter(C.MAX_VERTEX_TEXTURE_IMAGE_UNITS),J=C.getParameter(C.MAX_TEXTURE_SIZE),re=C.getParameter(C.MAX_CUBE_MAP_TEXTURE_SIZE),fe=C.getParameter(C.MAX_VERTEX_ATTRIBS),se=C.getParameter(C.MAX_VERTEX_UNIFORM_VECTORS),ne=C.getParameter(C.MAX_VARYING_VECTORS),be=C.getParameter(C.MAX_FRAGMENT_UNIFORM_VECTORS),he=$>0,Se=B||e.has("OES_texture_float"),Oe=he&&Se,Qe=B?C.getParameter(C.MAX_SAMPLES):0;return{isWebGL2:B,drawBuffers:N,getMaxAnisotropy:v,getMaxPrecision:M,precision:I,logarithmicDepthBuffer:X,maxTextures:Z,maxVertexTextures:$,maxTextureSize:J,maxCubemapSize:re,maxAttributes:fe,maxVertexUniforms:se,maxVaryings:ne,maxFragmentUniforms:be,vertexTextures:he,floatFragmentTextures:Se,floatVertexTextures:Oe,maxSamples:Qe}}function T_(C){const e=this;let l=null,f=0,v=!1,M=!1;const B=new Fa,I=new Ai,k={value:null,needsUpdate:!1};this.uniform=k,this.numPlanes=0,this.numIntersection=0,this.init=function(Z,$){const J=Z.length!==0||$||f!==0||v;return v=$,f=Z.length,J},this.beginShadows=function(){M=!0,X(null)},this.endShadows=function(){M=!1},this.setGlobalState=function(Z,$){l=X(Z,$,0)},this.setState=function(Z,$,J){const re=Z.clippingPlanes,fe=Z.clipIntersection,se=Z.clipShadows,ne=C.get(Z);if(!v||re===null||re.length===0||M&&!se)M?X(null):N();else{const be=M?0:f,he=be*4;let Se=ne.clippingState||null;k.value=Se,Se=X(re,$,he,J);for(let Oe=0;Oe!==he;++Oe)Se[Oe]=l[Oe];ne.clippingState=Se,this.numIntersection=fe?this.numPlanes:0,this.numPlanes+=be}};function N(){k.value!==l&&(k.value=l,k.needsUpdate=f>0),e.numPlanes=f,e.numIntersection=0}function X(Z,$,J,re){const fe=Z!==null?Z.length:0;let se=null;if(fe!==0){if(se=k.value,re!==!0||se===null){const ne=J+fe*4,be=$.matrixWorldInverse;I.getNormalMatrix(be),(se===null||se.length<ne)&&(se=new Float32Array(ne));for(let he=0,Se=J;he!==fe;++he,Se+=4)B.copy(Z[he]).applyMatrix4(be,I),B.normal.toArray(se,Se),se[Se+3]=B.constant}k.value=se,k.needsUpdate=!0}return e.numPlanes=fe,e.numIntersection=0,se}}function B_(C){let e=new WeakMap;function l(B,I){return I===Ui?B.mapping=Ls:I===Yi&&(B.mapping=ts),B}function f(B){if(B&&B.isTexture&&B.isRenderTargetTexture===!1){const I=B.mapping;if(I===Ui||I===Yi)if(e.has(B)){const k=e.get(B).texture;return l(k,B.mapping)}else{const k=B.image;if(k&&k.height>0){const N=new yu(k.height/2);return N.fromEquirectangularTexture(C,B),e.set(B,N),B.addEventListener("dispose",v),l(N.texture,B.mapping)}else return null}}return B}function v(B){const I=B.target;I.removeEventListener("dispose",v);const k=e.get(I);k!==void 0&&(e.delete(I),k.dispose())}function M(){e=new WeakMap}return{get:f,dispose:M}}class Im extends Wo{constructor(e=-1,l=1,f=1,v=-1,M=.1,B=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=l,this.top=f,this.bottom=v,this.near=M,this.far=B,this.updateProjectionMatrix()}copy(e,l){return super.copy(e,l),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,l,f,v,M,B){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=l,this.view.offsetX=f,this.view.offsetY=v,this.view.width=M,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,v=(this.top+this.bottom)/2;let M=f-e,B=f+e,I=v+l,k=v-l;if(this.view!==null&&this.view.enabled){const N=(this.right-this.left)/this.view.fullWidth/this.zoom,X=(this.top-this.bottom)/this.view.fullHeight/this.zoom;M+=N*this.view.offsetX,B=M+N*this.view.width,I-=X*this.view.offsetY,k=I-X*this.view.height}this.projectionMatrix.makeOrthographic(M,B,I,k,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const l=super.toJSON(e);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,this.view!==null&&(l.object.view=Object.assign({},this.view)),l}}const $a=4,yy=[.125,.215,.35,.446,.526,.582],ah=20,A1=new Im,vy=new pr;let y1=null;const lh=(1+Math.sqrt(5))/2,ch=1/lh,_y=[new Xe(1,1,1),new Xe(-1,1,1),new Xe(1,1,-1),new Xe(-1,1,-1),new Xe(0,lh,ch),new Xe(0,lh,-ch),new Xe(ch,0,lh),new Xe(-ch,0,lh),new Xe(lh,ch,0),new Xe(-lh,ch,0)];class Fm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,l=0,f=.1,v=100){y1=this._renderer.getRenderTarget(),this._setSize(256);const M=this._allocateTargets();return M.depthBuffer=!0,this._sceneToCubeUV(e,f,v,M),l>0&&this._blur(M,0,0,l),this._applyPMREM(M),this._cleanup(M),M}fromEquirectangular(e,l=null){return this._fromTexture(e,l)}fromCubemap(e,l=null){return this._fromTexture(e,l)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=My(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=by(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(y1),e.scissorTest=!1,Om(e,0,0,e.width,e.height)}_fromTexture(e,l){e.mapping===Ls||e.mapping===ts?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),y1=this._renderer.getRenderTarget();const f=l||this._allocateTargets();return this._textureToCubeUV(e,f),this._applyPMREM(f),this._cleanup(f),f}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),l=4*this._cubeSize,f={magFilter:co,minFilter:co,generateMipmaps:!1,type:_a,format:$e,colorSpace:oc,depthBuffer:!1},v=Ey(e,l,f);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==l){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ey(e,l,f);const{_lodMax:M}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=R_(M)),this._blurMaterial=I_(M,e,l)}return v}_compileMaterial(e){const l=new fo(this._lodPlanes[0],e);this._renderer.compile(l,A1)}_sceneToCubeUV(e,l,f,v){const I=new Gi(90,1,l,f),k=[1,-1,1,1,1,1],N=[1,1,1,-1,-1,-1],X=this._renderer,Z=X.autoClear,$=X.toneMapping;X.getClearColor(vy),X.toneMapping=ao,X.autoClear=!1;const J=new Vl({name:"PMREM.Background",side:We,depthWrite:!1,depthTest:!1}),re=new fo(new Rc,J);let fe=!1;const se=e.background;se?se.isColor&&(J.color.copy(se),e.background=null,fe=!0):(J.color.copy(vy),fe=!0);for(let ne=0;ne<6;ne++){const be=ne%3;be===0?(I.up.set(0,k[ne],0),I.lookAt(N[ne],0,0)):be===1?(I.up.set(0,0,k[ne]),I.lookAt(0,N[ne],0)):(I.up.set(0,k[ne],0),I.lookAt(0,0,N[ne]));const he=this._cubeSize;Om(v,be*he,ne>2?he:0,he,he),X.setRenderTarget(v),fe&&X.render(re,I),X.render(e,I)}re.geometry.dispose(),re.material.dispose(),X.toneMapping=$,X.autoClear=Z,e.background=se}_textureToCubeUV(e,l){const f=this._renderer,v=e.mapping===Ls||e.mapping===ts;v?(this._cubemapMaterial===null&&(this._cubemapMaterial=My()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=by());const M=v?this._cubemapMaterial:this._equirectMaterial,B=new fo(this._lodPlanes[0],M),I=M.uniforms;I.envMap.value=e;const k=this._cubeSize;Om(l,0,0,3*k,2*k),f.setRenderTarget(l),f.render(B,A1)}_applyPMREM(e){const l=this._renderer,f=l.autoClear;l.autoClear=!1;for(let v=1;v<this._lodPlanes.length;v++){const M=Math.sqrt(this._sigmas[v]*this._sigmas[v]-this._sigmas[v-1]*this._sigmas[v-1]),B=_y[(v-1)%_y.length];this._blur(e,v-1,v,M,B)}l.autoClear=f}_blur(e,l,f,v,M){const B=this._pingPongRenderTarget;this._halfBlur(e,B,l,f,v,"latitudinal",M),this._halfBlur(B,e,f,f,v,"longitudinal",M)}_halfBlur(e,l,f,v,M,B,I){const k=this._renderer,N=this._blurMaterial;B!=="latitudinal"&&B!=="longitudinal"&&w.error("blur direction must be either latitudinal or longitudinal!");const X=3,Z=new fo(this._lodPlanes[v],N),$=N.uniforms,J=this._sizeLods[f]-1,re=isFinite(M)?Math.PI/(2*J):2*Math.PI/(2*ah-1),fe=M/re,se=isFinite(M)?1+Math.floor(X*fe):ah;se>ah&&w.warn(`sigmaRadians, ${M}, is too large and will clip, as it requested ${se} samples when the maximum is set to ${ah}`);const ne=[];let be=0;for(let Ze=0;Ze<ah;++Ze){const ht=Ze/fe,we=Math.exp(-ht*ht/2);ne.push(we),Ze===0?be+=we:Ze<se&&(be+=2*we)}for(let Ze=0;Ze<ne.length;Ze++)ne[Ze]=ne[Ze]/be;$.envMap.value=e.texture,$.samples.value=se,$.weights.value=ne,$.latitudinal.value=B==="latitudinal",I&&($.poleAxis.value=I);const{_lodMax:he}=this;$.dTheta.value=re,$.mipInt.value=he-f;const Se=this._sizeLods[v],Oe=3*Se*(v>he-$a?v-he+$a:0),Qe=4*(this._cubeSize-Se);Om(l,Oe,Qe,3*Se,2*Se),k.setRenderTarget(l),k.render(Z,A1)}}function R_(C){const e=[],l=[],f=[];let v=C;const M=C-$a+1+yy.length;for(let B=0;B<M;B++){const I=Math.pow(2,v);l.push(I);let k=1/I;B>C-$a?k=yy[B-C+$a-1]:B===0&&(k=0),f.push(k);const N=1/(I-2),X=-N,Z=1+N,$=[X,X,Z,X,Z,Z,X,X,Z,Z,X,Z],J=6,re=6,fe=3,se=2,ne=1,be=new Float32Array(fe*re*J),he=new Float32Array(se*re*J),Se=new Float32Array(ne*re*J);for(let Qe=0;Qe<J;Qe++){const Ze=Qe%3*2/3-1,ht=Qe>2?0:-1,we=[Ze,ht,0,Ze+2/3,ht,0,Ze+2/3,ht+1,0,Ze,ht,0,Ze+2/3,ht+1,0,Ze,ht+1,0];be.set(we,fe*re*Qe),he.set($,se*re*Qe);const Ve=[Qe,Qe,Qe,Qe,Qe,Qe];Se.set(Ve,ne*re*Qe)}const Oe=new xi;Oe.setAttribute("position",new uo(be,fe)),Oe.setAttribute("uv",new uo(he,se)),Oe.setAttribute("faceIndex",new uo(Se,ne)),e.push(Oe),v>$a&&v--}return{lodPlanes:e,sizeLods:l,sigmas:f}}function Ey(C,e,l){const f=new qs(C,e,l);return f.texture.mapping=Qs,f.texture.name="PMREM.cubeUv",f.scissorTest=!0,f}function Om(C,e,l,f,v){C.viewport.set(e,l,f,v),C.scissor.set(e,l,f,v)}function I_(C,e,l){const f=new Float32Array(ah),v=new Xe(0,1,0);return new Wr({name:"SphericalGaussianBlur",defines:{n:ah,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/l,CUBEUV_MAX_MIP:`${C}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:f},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:v}},vertexShader:v1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:St,depthTest:!1,depthWrite:!1})}function by(){return new Wr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:v1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:St,depthTest:!1,depthWrite:!1})}function My(){return new Wr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:v1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:St,depthTest:!1,depthWrite:!1})}function v1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function F_(C){let e=new WeakMap,l=null;function f(I){if(I&&I.isTexture){const k=I.mapping,N=k===Ui||k===Yi,X=k===Ls||k===ts;if(N||X)if(I.isRenderTargetTexture&&I.needsPMREMUpdate===!0){I.needsPMREMUpdate=!1;let Z=e.get(I);return l===null&&(l=new Fm(C)),Z=N?l.fromEquirectangular(I,Z):l.fromCubemap(I,Z),e.set(I,Z),Z.texture}else{if(e.has(I))return e.get(I).texture;{const Z=I.image;if(N&&Z&&Z.height>0||X&&Z&&v(Z)){l===null&&(l=new Fm(C));const $=N?l.fromEquirectangular(I):l.fromCubemap(I);return e.set(I,$),I.addEventListener("dispose",M),$.texture}else return null}}}return I}function v(I){let k=0;const N=6;for(let X=0;X<N;X++)I[X]!==void 0&&k++;return k===N}function M(I){const k=I.target;k.removeEventListener("dispose",M);const N=e.get(k);N!==void 0&&(e.delete(k),N.dispose())}function B(){e=new WeakMap,l!==null&&(l.dispose(),l=null)}return{get:f,dispose:B}}function O_(C){const e={};function l(f){if(e[f]!==void 0)return e[f];let v;switch(f){case"WEBGL_depth_texture":v=C.getExtension("WEBGL_depth_texture")||C.getExtension("MOZ_WEBGL_depth_texture")||C.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":v=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=C.getExtension("WEBGL_compressed_texture_s3tc")||C.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=C.getExtension("WEBGL_compressed_texture_pvrtc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:v=C.getExtension(f)}return e[f]=v,v}return{has:function(f){return l(f)!==null},init:function(f){f.isWebGL2?l("EXT_color_buffer_float"):(l("WEBGL_depth_texture"),l("OES_texture_float"),l("OES_texture_half_float"),l("OES_texture_half_float_linear"),l("OES_standard_derivatives"),l("OES_element_index_uint"),l("OES_vertex_array_object"),l("ANGLE_instanced_arrays")),l("OES_texture_float_linear"),l("EXT_color_buffer_half_float"),l("WEBGL_multisampled_render_to_texture")},get:function(f){const v=l(f);return v===null&&w.warn("THREE.WebGLRenderer: "+f+" extension not supported."),v}}}function D_(C,e,l,f){const v={},M=new WeakMap;function B(Z){const $=Z.target;$.index!==null&&e.remove($.index);for(const re in $.attributes)e.remove($.attributes[re]);for(const re in $.morphAttributes){const fe=$.morphAttributes[re];for(let se=0,ne=fe.length;se<ne;se++)e.remove(fe[se])}$.removeEventListener("dispose",B),delete v[$.id];const J=M.get($);J&&(e.remove(J),M.delete($)),f.releaseStatesOfGeometry($),$.isInstancedBufferGeometry===!0&&delete $._maxInstanceCount,l.memory.geometries--}function I(Z,$){return v[$.id]===!0||($.addEventListener("dispose",B),v[$.id]=!0,l.memory.geometries++),$}function k(Z){const $=Z.attributes;for(const re in $)e.update($[re],C.ARRAY_BUFFER);const J=Z.morphAttributes;for(const re in J){const fe=J[re];for(let se=0,ne=fe.length;se<ne;se++)e.update(fe[se],C.ARRAY_BUFFER)}}function N(Z){const $=[],J=Z.index,re=Z.attributes.position;let fe=0;if(J!==null){const be=J.array;fe=J.version;for(let he=0,Se=be.length;he<Se;he+=3){const Oe=be[he+0],Qe=be[he+1],Ze=be[he+2];$.push(Oe,Qe,Qe,Ze,Ze,Oe)}}else{const be=re.array;fe=re.version;for(let he=0,Se=be.length/3-1;he<Se;he+=3){const Oe=he+0,Qe=he+1,Ze=he+2;$.push(Oe,Qe,Qe,Ze,Ze,Oe)}}const se=new(vm($)?Jn:Zc)($,1);se.version=fe;const ne=M.get(Z);ne&&e.remove(ne),M.set(Z,se)}function X(Z){const $=M.get(Z);if($){const J=Z.index;J!==null&&$.version<J.version&&N(Z)}else N(Z);return M.get(Z)}return{get:I,update:k,getWireframeAttribute:X}}function P_(C,e,l,f){const v=f.isWebGL2;let M;function B($){M=$}let I,k;function N($){I=$.type,k=$.bytesPerElement}function X($,J){C.drawElements(M,J,I,$*k),l.update(J,M,1)}function Z($,J,re){if(re===0)return;let fe,se;if(v)fe=C,se="drawElementsInstanced";else if(fe=e.get("ANGLE_instanced_arrays"),se="drawElementsInstancedANGLE",fe===null){w.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}fe[se](M,J,I,$*k,re),l.update(J,M,re)}this.setMode=B,this.setIndex=N,this.render=X,this.renderInstances=Z}function L_(C){const e={geometries:0,textures:0},l={frame:0,calls:0,triangles:0,points:0,lines:0};function f(M,B,I){switch(l.calls++,B){case C.TRIANGLES:l.triangles+=I*(M/3);break;case C.LINES:l.lines+=I*(M/2);break;case C.LINE_STRIP:l.lines+=I*(M-1);break;case C.LINE_LOOP:l.lines+=I*M;break;case C.POINTS:l.points+=I*M;break;default:w.error("THREE.WebGLInfo: Unknown draw mode:",B);break}}function v(){l.calls=0,l.triangles=0,l.points=0,l.lines=0}return{memory:e,render:l,programs:null,autoReset:!0,reset:v,update:f}}function _1(C,e){return C[0]-e[0]}function E1(C,e){return Math.abs(e[1])-Math.abs(C[1])}function k_(C,e,l){const f={},v=new Float32Array(8),M=new WeakMap,B=new Ji,I=[];for(let N=0;N<8;N++)I[N]=[N,0];function k(N,X,Z){const $=N.morphTargetInfluences;if(e.isWebGL2===!0){const J=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,re=J!==void 0?J.length:0;let fe=M.get(X);if(fe===void 0||fe.count!==re){let Vt=function(){bn.dispose(),M.delete(X),X.removeEventListener("dispose",Vt)};fe!==void 0&&fe.texture.dispose();const be=X.morphAttributes.position!==void 0,he=X.morphAttributes.normal!==void 0,Se=X.morphAttributes.color!==void 0,Oe=X.morphAttributes.position||[],Qe=X.morphAttributes.normal||[],Ze=X.morphAttributes.color||[];let ht=0;be===!0&&(ht=1),he===!0&&(ht=2),Se===!0&&(ht=3);let we=X.attributes.position.count*ht,Ve=1;we>e.maxTextureSize&&(Ve=Math.ceil(we/e.maxTextureSize),we=e.maxTextureSize);const $t=new Float32Array(we*Ve*4*re),bn=new Ca($t,we,Ve,re);bn.type=No,bn.needsUpdate=!0;const Nt=ht*4;for(let en=0;en<re;en++){const Ht=Oe[en],un=Qe[en],hn=Ze[en],xn=we*Ve*4*en;for(let mn=0;mn<Ht.count;mn++){const mt=mn*Nt;be===!0&&(B.fromBufferAttribute(Ht,mn),$t[xn+mt+0]=B.x,$t[xn+mt+1]=B.y,$t[xn+mt+2]=B.z,$t[xn+mt+3]=0),he===!0&&(B.fromBufferAttribute(un,mn),$t[xn+mt+4]=B.x,$t[xn+mt+5]=B.y,$t[xn+mt+6]=B.z,$t[xn+mt+7]=0),Se===!0&&(B.fromBufferAttribute(hn,mn),$t[xn+mt+8]=B.x,$t[xn+mt+9]=B.y,$t[xn+mt+10]=B.z,$t[xn+mt+11]=hn.itemSize===4?B.w:1)}}fe={count:re,texture:bn,size:new fn(we,Ve)},M.set(X,fe),X.addEventListener("dispose",Vt)}let se=0;for(let be=0;be<$.length;be++)se+=$[be];const ne=X.morphTargetsRelative?1:1-se;Z.getUniforms().setValue(C,"morphTargetBaseInfluence",ne),Z.getUniforms().setValue(C,"morphTargetInfluences",$),Z.getUniforms().setValue(C,"morphTargetsTexture",fe.texture,l),Z.getUniforms().setValue(C,"morphTargetsTextureSize",fe.size)}else{const J=$===void 0?0:$.length;let re=f[X.id];if(re===void 0||re.length!==J){re=[];for(let he=0;he<J;he++)re[he]=[he,0];f[X.id]=re}for(let he=0;he<J;he++){const Se=re[he];Se[0]=he,Se[1]=$[he]}re.sort(E1);for(let he=0;he<8;he++)he<J&&re[he][1]?(I[he][0]=re[he][0],I[he][1]=re[he][1]):(I[he][0]=Number.MAX_SAFE_INTEGER,I[he][1]=0);I.sort(_1);const fe=X.morphAttributes.position,se=X.morphAttributes.normal;let ne=0;for(let he=0;he<8;he++){const Se=I[he],Oe=Se[0],Qe=Se[1];Oe!==Number.MAX_SAFE_INTEGER&&Qe?(fe&&X.getAttribute("morphTarget"+he)!==fe[Oe]&&X.setAttribute("morphTarget"+he,fe[Oe]),se&&X.getAttribute("morphNormal"+he)!==se[Oe]&&X.setAttribute("morphNormal"+he,se[Oe]),v[he]=Qe,ne+=Qe):(fe&&X.hasAttribute("morphTarget"+he)===!0&&X.deleteAttribute("morphTarget"+he),se&&X.hasAttribute("morphNormal"+he)===!0&&X.deleteAttribute("morphNormal"+he),v[he]=0)}const be=X.morphTargetsRelative?1:1-ne;Z.getUniforms().setValue(C,"morphTargetBaseInfluence",be),Z.getUniforms().setValue(C,"morphTargetInfluences",v)}}return{update:k}}function z_(C,e,l,f){let v=new WeakMap;function M(k){const N=f.render.frame,X=k.geometry,Z=e.get(k,X);if(v.get(Z)!==N&&(e.update(Z),v.set(Z,N)),k.isInstancedMesh&&(k.hasEventListener("dispose",I)===!1&&k.addEventListener("dispose",I),v.get(k)!==N&&(l.update(k.instanceMatrix,C.ARRAY_BUFFER),k.instanceColor!==null&&l.update(k.instanceColor,C.ARRAY_BUFFER),v.set(k,N))),k.isSkinnedMesh){const $=k.skeleton;v.get($)!==N&&($.update(),v.set($,N))}return Z}function B(){v=new WeakMap}function I(k){const N=k.target;N.removeEventListener("dispose",I),l.remove(N.instanceMatrix),N.instanceColor!==null&&l.remove(N.instanceColor)}return{update:M,dispose:B}}const xy=new io,Cy=new Ca,Sy=new Po,wy=new Jo,Ty=[],By=[],Ry=new Float32Array(16),Iy=new Float32Array(9),Fy=new Float32Array(4);function xu(C,e,l){const f=C[0];if(f<=0||f>0)return C;const v=e*l;let M=Ty[v];if(M===void 0&&(M=new Float32Array(v),Ty[v]=M),e!==0){f.toArray(M,0);for(let B=1,I=0;B!==e;++B)I+=l,C[B].toArray(M,I)}return M}function Aa(C,e){if(C.length!==e.length)return!1;for(let l=0,f=C.length;l<f;l++)if(C[l]!==e[l])return!1;return!0}function ta(C,e){for(let l=0,f=e.length;l<f;l++)C[l]=e[l]}function Dm(C,e){let l=By[e];l===void 0&&(l=new Int32Array(e),By[e]=l);for(let f=0;f!==e;++f)l[f]=C.allocateTextureUnit();return l}function G_(C,e){const l=this.cache;l[0]!==e&&(C.uniform1f(this.addr,e),l[0]=e)}function lf(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y)&&(C.uniform2f(this.addr,e.x,e.y),l[0]=e.x,l[1]=e.y);else{if(Aa(l,e))return;C.uniform2fv(this.addr,e),ta(l,e)}}function U_(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y||l[2]!==e.z)&&(C.uniform3f(this.addr,e.x,e.y,e.z),l[0]=e.x,l[1]=e.y,l[2]=e.z);else if(e.r!==void 0)(l[0]!==e.r||l[1]!==e.g||l[2]!==e.b)&&(C.uniform3f(this.addr,e.r,e.g,e.b),l[0]=e.r,l[1]=e.g,l[2]=e.b);else{if(Aa(l,e))return;C.uniform3fv(this.addr,e),ta(l,e)}}function Oy(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y||l[2]!==e.z||l[3]!==e.w)&&(C.uniform4f(this.addr,e.x,e.y,e.z,e.w),l[0]=e.x,l[1]=e.y,l[2]=e.z,l[3]=e.w);else{if(Aa(l,e))return;C.uniform4fv(this.addr,e),ta(l,e)}}function N_(C,e){const l=this.cache,f=e.elements;if(f===void 0){if(Aa(l,e))return;C.uniformMatrix2fv(this.addr,!1,e),ta(l,e)}else{if(Aa(l,f))return;Fy.set(f),C.uniformMatrix2fv(this.addr,!1,Fy),ta(l,f)}}function H_(C,e){const l=this.cache,f=e.elements;if(f===void 0){if(Aa(l,e))return;C.uniformMatrix3fv(this.addr,!1,e),ta(l,e)}else{if(Aa(l,f))return;Iy.set(f),C.uniformMatrix3fv(this.addr,!1,Iy),ta(l,f)}}function cf(C,e){const l=this.cache,f=e.elements;if(f===void 0){if(Aa(l,e))return;C.uniformMatrix4fv(this.addr,!1,e),ta(l,e)}else{if(Aa(l,f))return;Ry.set(f),C.uniformMatrix4fv(this.addr,!1,Ry),ta(l,f)}}function j_(C,e){const l=this.cache;l[0]!==e&&(C.uniform1i(this.addr,e),l[0]=e)}function ph(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y)&&(C.uniform2i(this.addr,e.x,e.y),l[0]=e.x,l[1]=e.y);else{if(Aa(l,e))return;C.uniform2iv(this.addr,e),ta(l,e)}}function uM(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y||l[2]!==e.z)&&(C.uniform3i(this.addr,e.x,e.y,e.z),l[0]=e.x,l[1]=e.y,l[2]=e.z);else{if(Aa(l,e))return;C.uniform3iv(this.addr,e),ta(l,e)}}function dM(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y||l[2]!==e.z||l[3]!==e.w)&&(C.uniform4i(this.addr,e.x,e.y,e.z,e.w),l[0]=e.x,l[1]=e.y,l[2]=e.z,l[3]=e.w);else{if(Aa(l,e))return;C.uniform4iv(this.addr,e),ta(l,e)}}function hM(C,e){const l=this.cache;l[0]!==e&&(C.uniform1ui(this.addr,e),l[0]=e)}function fM(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y)&&(C.uniform2ui(this.addr,e.x,e.y),l[0]=e.x,l[1]=e.y);else{if(Aa(l,e))return;C.uniform2uiv(this.addr,e),ta(l,e)}}function gM(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y||l[2]!==e.z)&&(C.uniform3ui(this.addr,e.x,e.y,e.z),l[0]=e.x,l[1]=e.y,l[2]=e.z);else{if(Aa(l,e))return;C.uniform3uiv(this.addr,e),ta(l,e)}}function mM(C,e){const l=this.cache;if(e.x!==void 0)(l[0]!==e.x||l[1]!==e.y||l[2]!==e.z||l[3]!==e.w)&&(C.uniform4ui(this.addr,e.x,e.y,e.z,e.w),l[0]=e.x,l[1]=e.y,l[2]=e.z,l[3]=e.w);else{if(Aa(l,e))return;C.uniform4uiv(this.addr,e),ta(l,e)}}function W_(C,e,l){const f=this.cache,v=l.allocateTextureUnit();f[0]!==v&&(C.uniform1i(this.addr,v),f[0]=v),l.setTexture2D(e||xy,v)}function V_(C,e,l){const f=this.cache,v=l.allocateTextureUnit();f[0]!==v&&(C.uniform1i(this.addr,v),f[0]=v),l.setTexture3D(e||Sy,v)}function Q_(C,e,l){const f=this.cache,v=l.allocateTextureUnit();f[0]!==v&&(C.uniform1i(this.addr,v),f[0]=v),l.setTextureCube(e||wy,v)}function Zl(C,e,l){const f=this.cache,v=l.allocateTextureUnit();f[0]!==v&&(C.uniform1i(this.addr,v),f[0]=v),l.setTexture2DArray(e||Cy,v)}function X_(C){switch(C){case 5126:return G_;case 35664:return lf;case 35665:return U_;case 35666:return Oy;case 35674:return N_;case 35675:return H_;case 35676:return cf;case 5124:case 35670:return j_;case 35667:case 35671:return ph;case 35668:case 35672:return uM;case 35669:case 35673:return dM;case 5125:return hM;case 36294:return fM;case 36295:return gM;case 36296:return mM;case 35678:case 36198:case 36298:case 36306:case 35682:return W_;case 35679:case 36299:case 36307:return V_;case 35680:case 36300:case 36308:case 36293:return Q_;case 36289:case 36303:case 36311:case 36292:return Zl}}function Dy(C,e){C.uniform1fv(this.addr,e)}function K_(C,e){const l=xu(e,this.size,2);C.uniform2fv(this.addr,l)}function Y_(C,e){const l=xu(e,this.size,3);C.uniform3fv(this.addr,l)}function Py(C,e){const l=xu(e,this.size,4);C.uniform4fv(this.addr,l)}function J_(C,e){const l=xu(e,this.size,4);C.uniformMatrix2fv(this.addr,!1,l)}function AM(C,e){const l=xu(e,this.size,9);C.uniformMatrix3fv(this.addr,!1,l)}function yM(C,e){const l=xu(e,this.size,16);C.uniformMatrix4fv(this.addr,!1,l)}function b1(C,e){C.uniform1iv(this.addr,e)}function q_(C,e){C.uniform2iv(this.addr,e)}function vM(C,e){C.uniform3iv(this.addr,e)}function Z_(C,e){C.uniform4iv(this.addr,e)}function Ly(C,e){C.uniform1uiv(this.addr,e)}function $_(C,e){C.uniform2uiv(this.addr,e)}function e3(C,e){C.uniform3uiv(this.addr,e)}function ky(C,e){C.uniform4uiv(this.addr,e)}function pf(C,e,l){const f=this.cache,v=e.length,M=Dm(l,v);Aa(f,M)||(C.uniform1iv(this.addr,M),ta(f,M));for(let B=0;B!==v;++B)l.setTexture2D(e[B]||xy,M[B])}function Pm(C,e,l){const f=this.cache,v=e.length,M=Dm(l,v);Aa(f,M)||(C.uniform1iv(this.addr,M),ta(f,M));for(let B=0;B!==v;++B)l.setTexture3D(e[B]||Sy,M[B])}function _M(C,e,l){const f=this.cache,v=e.length,M=Dm(l,v);Aa(f,M)||(C.uniform1iv(this.addr,M),ta(f,M));for(let B=0;B!==v;++B)l.setTextureCube(e[B]||wy,M[B])}function zy(C,e,l){const f=this.cache,v=e.length,M=Dm(l,v);Aa(f,M)||(C.uniform1iv(this.addr,M),ta(f,M));for(let B=0;B!==v;++B)l.setTexture2DArray(e[B]||Cy,M[B])}function t3(C){switch(C){case 5126:return Dy;case 35664:return K_;case 35665:return Y_;case 35666:return Py;case 35674:return J_;case 35675:return AM;case 35676:return yM;case 5124:case 35670:return b1;case 35667:case 35671:return q_;case 35668:case 35672:return vM;case 35669:case 35673:return Z_;case 5125:return Ly;case 36294:return $_;case 36295:return e3;case 36296:return ky;case 35678:case 36198:case 36298:case 36306:case 35682:return pf;case 35679:case 36299:case 36307:return Pm;case 35680:case 36300:case 36308:case 36293:return _M;case 36289:case 36303:case 36311:case 36292:return zy}}class n3{constructor(e,l,f){this.id=e,this.addr=f,this.cache=[],this.setValue=X_(l.type)}}class r3{constructor(e,l,f){this.id=e,this.addr=f,this.cache=[],this.size=l.size,this.setValue=t3(l.type)}}class M1{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,l,f){const v=this.seq;for(let M=0,B=v.length;M!==B;++M){const I=v[M];I.setValue(e,l[I.id],f)}}}const Cg=/(\w+)(\])?(\[|\.)?/g;function uh(C,e){C.seq.push(e),C.map[e.id]=e}function ip(C,e,l){const f=C.name,v=f.length;for(Cg.lastIndex=0;;){const M=Cg.exec(f),B=Cg.lastIndex;let I=M[1];const k=M[2]==="]",N=M[3];if(k&&(I=I|0),N===void 0||N==="["&&B+2===v){uh(l,N===void 0?new n3(I,C,e):new r3(I,C,e));break}else{let Z=l.map[I];Z===void 0&&(Z=new M1(I),uh(l,Z)),l=Z}}}class Dc{constructor(e,l){this.seq=[],this.map={};const f=e.getProgramParameter(l,e.ACTIVE_UNIFORMS);for(let v=0;v<f;++v){const M=e.getActiveUniform(l,v),B=e.getUniformLocation(l,M.name);ip(M,B,this)}}setValue(e,l,f,v){const M=this.map[l];M!==void 0&&M.setValue(e,f,v)}setOptional(e,l,f){const v=l[f];v!==void 0&&this.setValue(e,f,v)}static upload(e,l,f,v){for(let M=0,B=l.length;M!==B;++M){const I=l[M],k=f[I.id];k.needsUpdate!==!1&&I.setValue(e,k.value,v)}}static seqWithValue(e,l){const f=[];for(let v=0,M=e.length;v!==M;++v){const B=e[v];B.id in l&&f.push(B)}return f}}function op(C,e,l){const f=C.createShader(e);return C.shaderSource(f,l),C.compileShader(f),f}let Cu=0;function Su(C,e){const l=C.split(`
`),f=[],v=Math.max(e-6,0),M=Math.min(e+6,l.length);for(let B=v;B<M;B++){const I=B+1;f.push(`${I===e?">":" "} ${I}: ${l[B]}`)}return f.join(`
`)}function Sg(C){switch(C){case oc:return["Linear","( value )"];case ui:return["sRGB","( value )"];default:return w.warn("THREE.WebGLProgram: Unsupported color space:",C),["Linear","( value )"]}}function uf(C,e,l){const f=C.getShaderParameter(e,C.COMPILE_STATUS),v=C.getShaderInfoLog(e).trim();if(f&&v==="")return"";const M=/ERROR: 0:(\d+)/.exec(v);if(M){const B=parseInt(M[1]);return l.toUpperCase()+`

`+v+`

`+Su(C.getShaderSource(e),B)}else return v}function wg(C,e){const l=Sg(e);return"vec4 "+C+"( vec4 value ) { return LinearTo"+l[0]+l[1]+"; }"}function Lm(C,e){let l;switch(e){case lo:l="Linear";break;case sa:l="Reinhard";break;case Ss:l="OptimizedCineon";break;case aa:l="ACESFilmic";break;case Vs:l="Custom";break;default:w.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),l="Linear"}return"vec3 "+C+"( vec3 color ) { return "+l+"ToneMapping( color ); }"}function Tg(C){return[C.extensionDerivatives||C.envMapCubeUVHeight||C.bumpMap||C.normalMapTangentSpace||C.clearcoatNormalMap||C.flatShading||C.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(C.extensionFragDepth||C.logarithmicDepthBuffer)&&C.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",C.extensionDrawBuffers&&C.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(C.extensionShaderTextureLOD||C.envMap||C.transmission)&&C.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ig).join(`
`)}function Bg(C){const e=[];for(const l in C){const f=C[l];f!==!1&&e.push("#define "+l+" "+f)}return e.join(`
`)}function Rg(C,e){const l={},f=C.getProgramParameter(e,C.ACTIVE_ATTRIBUTES);for(let v=0;v<f;v++){const M=C.getActiveAttrib(e,v),B=M.name;let I=1;M.type===C.FLOAT_MAT2&&(I=2),M.type===C.FLOAT_MAT3&&(I=3),M.type===C.FLOAT_MAT4&&(I=4),l[B]={type:M.type,location:C.getAttribLocation(e,B),locationSize:I}}return l}function Ig(C){return C!==""}function Gy(C,e){const l=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return C.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,l).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function x1(C,e){return C.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const i3=/^[ \t]*#include +<([\w\d./]+)>/gm;function C1(C){return C.replace(i3,o3)}const Uy=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function o3(C,e){let l=Bi[e];if(l===void 0){const f=Uy.get(e);if(f!==void 0)l=Bi[f],w.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,f);else throw new Error("Can not resolve #include <"+e+">")}return C1(l)}const Ny=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function S1(C){return C.replace(Ny,km)}function km(C,e,l,f){let v="";for(let M=parseInt(e);M<parseInt(l);M++)v+=f.replace(/\[\s*i\s*\]/g,"[ "+M+" ]").replace(/UNROLLED_LOOP_INDEX/g,M);return v}function Fg(C){let e="precision "+C.precision+` float;
precision `+C.precision+" int;";return C.precision==="highp"?e+=`
#define HIGH_PRECISION`:C.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:C.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function zm(C){let e="SHADOWMAP_TYPE_BASIC";return C.shadowMapType===pe?e="SHADOWMAP_TYPE_PCF":C.shadowMapType===ue?e="SHADOWMAP_TYPE_PCF_SOFT":C.shadowMapType===xt&&(e="SHADOWMAP_TYPE_VSM"),e}function s3(C){let e="ENVMAP_TYPE_CUBE";if(C.envMap)switch(C.envMapMode){case Ls:case ts:e="ENVMAP_TYPE_CUBE";break;case Qs:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Hy(C){let e="ENVMAP_MODE_REFLECTION";if(C.envMap)switch(C.envMapMode){case ts:e="ENVMAP_MODE_REFRACTION";break}return e}function jy(C){let e="ENVMAP_BLENDING_NONE";if(C.envMap)switch(C.combine){case Li:e="ENVMAP_BLENDING_MULTIPLY";break;case Ro:e="ENVMAP_BLENDING_MIX";break;case Kr:e="ENVMAP_BLENDING_ADD";break}return e}function el(C){const e=C.envMapCubeUVHeight;if(e===null)return null;const l=Math.log2(e)-2,f=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,l),7*16)),texelHeight:f,maxMip:l}}function tl(C,e,l,f){const v=C.getContext(),M=l.defines;let B=l.vertexShader,I=l.fragmentShader;const k=zm(l),N=s3(l),X=Hy(l),Z=jy(l),$=el(l),J=l.isWebGL2?"":Tg(l),re=Bg(M),fe=v.createProgram();let se,ne,be=l.glslVersion?"#version "+l.glslVersion+`
`:"";l.isRawShaderMaterial?(se=["#define SHADER_TYPE "+l.shaderType,"#define SHADER_NAME "+l.shaderName,re].filter(Ig).join(`
`),se.length>0&&(se+=`
`),ne=[J,"#define SHADER_TYPE "+l.shaderType,"#define SHADER_NAME "+l.shaderName,re].filter(Ig).join(`
`),ne.length>0&&(ne+=`
`)):(se=[Fg(l),"#define SHADER_TYPE "+l.shaderType,"#define SHADER_NAME "+l.shaderName,re,l.instancing?"#define USE_INSTANCING":"",l.instancingColor?"#define USE_INSTANCING_COLOR":"",l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+X:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",l.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",l.displacementMap?"#define USE_DISPLACEMENTMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.anisotropyMap?"#define USE_ANISOTROPYMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",l.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.alphaHash?"#define USE_ALPHAHASH":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",l.mapUv?"#define MAP_UV "+l.mapUv:"",l.alphaMapUv?"#define ALPHAMAP_UV "+l.alphaMapUv:"",l.lightMapUv?"#define LIGHTMAP_UV "+l.lightMapUv:"",l.aoMapUv?"#define AOMAP_UV "+l.aoMapUv:"",l.emissiveMapUv?"#define EMISSIVEMAP_UV "+l.emissiveMapUv:"",l.bumpMapUv?"#define BUMPMAP_UV "+l.bumpMapUv:"",l.normalMapUv?"#define NORMALMAP_UV "+l.normalMapUv:"",l.displacementMapUv?"#define DISPLACEMENTMAP_UV "+l.displacementMapUv:"",l.metalnessMapUv?"#define METALNESSMAP_UV "+l.metalnessMapUv:"",l.roughnessMapUv?"#define ROUGHNESSMAP_UV "+l.roughnessMapUv:"",l.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+l.anisotropyMapUv:"",l.clearcoatMapUv?"#define CLEARCOATMAP_UV "+l.clearcoatMapUv:"",l.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+l.clearcoatNormalMapUv:"",l.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+l.clearcoatRoughnessMapUv:"",l.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+l.iridescenceMapUv:"",l.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+l.iridescenceThicknessMapUv:"",l.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+l.sheenColorMapUv:"",l.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+l.sheenRoughnessMapUv:"",l.specularMapUv?"#define SPECULARMAP_UV "+l.specularMapUv:"",l.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+l.specularColorMapUv:"",l.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+l.specularIntensityMapUv:"",l.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+l.transmissionMapUv:"",l.thicknessMapUv?"#define THICKNESSMAP_UV "+l.thicknessMapUv:"",l.vertexTangents&&l.flatShading===!1?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUv1s?"#define USE_UV1":"",l.vertexUv2s?"#define USE_UV2":"",l.vertexUv3s?"#define USE_UV3":"",l.pointsUvs?"#define USE_POINTS_UV":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&l.flatShading===!1?"#define USE_MORPHNORMALS":"",l.morphColors&&l.isWebGL2?"#define USE_MORPHCOLORS":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+l.morphTextureStride:"",l.morphTargetsCount>0&&l.isWebGL2?"#define MORPHTARGETS_COUNT "+l.morphTargetsCount:"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+k:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.useLegacyLights?"#define LEGACY_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ig).join(`
`),ne=[J,Fg(l),"#define SHADER_TYPE "+l.shaderType,"#define SHADER_NAME "+l.shaderName,re,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.matcap?"#define USE_MATCAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+N:"",l.envMap?"#define "+X:"",l.envMap?"#define "+Z:"",$?"#define CUBEUV_TEXEL_WIDTH "+$.texelWidth:"",$?"#define CUBEUV_TEXEL_HEIGHT "+$.texelHeight:"",$?"#define CUBEUV_MAX_MIP "+$.maxMip+".0":"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",l.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.anisotropy?"#define USE_ANISOTROPY":"",l.anisotropyMap?"#define USE_ANISOTROPYMAP":"",l.clearcoat?"#define USE_CLEARCOAT":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.iridescence?"#define USE_IRIDESCENCE":"",l.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",l.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",l.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.alphaTest?"#define USE_ALPHATEST":"",l.alphaHash?"#define USE_ALPHAHASH":"",l.sheen?"#define USE_SHEEN":"",l.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.vertexTangents&&l.flatShading===!1?"#define USE_TANGENT":"",l.vertexColors||l.instancingColor?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUv1s?"#define USE_UV1":"",l.vertexUv2s?"#define USE_UV2":"",l.vertexUv3s?"#define USE_UV3":"",l.pointsUvs?"#define USE_POINTS_UV":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+k:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.useLegacyLights?"#define LEGACY_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",l.toneMapping!==ao?"#define TONE_MAPPING":"",l.toneMapping!==ao?Bi.tonemapping_pars_fragment:"",l.toneMapping!==ao?Lm("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.opaque?"#define OPAQUE":"",Bi.colorspace_pars_fragment,wg("linearToOutputTexel",l.outputColorSpace),l.useDepthPacking?"#define DEPTH_PACKING "+l.depthPacking:"",`
`].filter(Ig).join(`
`)),B=C1(B),B=Gy(B,l),B=x1(B,l),I=C1(I),I=Gy(I,l),I=x1(I,l),B=S1(B),I=S1(I),l.isWebGL2&&l.isRawShaderMaterial!==!0&&(be=`#version 300 es
`,se=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+se,ne=["#define varying in",l.glslVersion===sc?"":"layout(location = 0) out highp vec4 pc_fragColor;",l.glslVersion===sc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ne);const he=be+se+B,Se=be+ne+I,Oe=op(v,v.VERTEX_SHADER,he),Qe=op(v,v.FRAGMENT_SHADER,Se);if(v.attachShader(fe,Oe),v.attachShader(fe,Qe),l.index0AttributeName!==void 0?v.bindAttribLocation(fe,0,l.index0AttributeName):l.morphTargets===!0&&v.bindAttribLocation(fe,0,"position"),v.linkProgram(fe),C.debug.checkShaderErrors){const we=v.getProgramInfoLog(fe).trim(),Ve=v.getShaderInfoLog(Oe).trim(),$t=v.getShaderInfoLog(Qe).trim();let bn=!0,Nt=!0;if(v.getProgramParameter(fe,v.LINK_STATUS)===!1)if(bn=!1,typeof C.debug.onShaderError=="function")C.debug.onShaderError(v,fe,Oe,Qe);else{const Vt=uf(v,Oe,"vertex"),en=uf(v,Qe,"fragment");w.error("THREE.WebGLProgram: Shader Error "+v.getError()+" - VALIDATE_STATUS "+v.getProgramParameter(fe,v.VALIDATE_STATUS)+`

Program Info Log: `+we+`
`+Vt+`
`+en)}else we!==""?w.warn("THREE.WebGLProgram: Program Info Log:",we):(Ve===""||$t==="")&&(Nt=!1);Nt&&(this.diagnostics={runnable:bn,programLog:we,vertexShader:{log:Ve,prefix:se},fragmentShader:{log:$t,prefix:ne}})}v.deleteShader(Oe),v.deleteShader(Qe);let Ze;this.getUniforms=function(){return Ze===void 0&&(Ze=new Dc(v,fe)),Ze};let ht;return this.getAttributes=function(){return ht===void 0&&(ht=Rg(v,fe)),ht},this.destroy=function(){f.releaseStatesOfProgram(this),v.deleteProgram(fe),this.program=void 0},this.type=l.shaderType,this.name=l.shaderName,this.id=Cu++,this.cacheKey=e,this.usedTimes=1,this.program=fe,this.vertexShader=Oe,this.fragmentShader=Qe,this}let kp=0;class w1{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const l=e.vertexShader,f=e.fragmentShader,v=this._getShaderStage(l),M=this._getShaderStage(f),B=this._getShaderCacheForMaterial(e);return B.has(v)===!1&&(B.add(v),v.usedTimes++),B.has(M)===!1&&(B.add(M),M.usedTimes++),this}remove(e){const l=this.materialCache.get(e);for(const f of l)f.usedTimes--,f.usedTimes===0&&this.shaderCache.delete(f.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const l=this.materialCache;let f=l.get(e);return f===void 0&&(f=new Set,l.set(e,f)),f}_getShaderStage(e){const l=this.shaderCache;let f=l.get(e);return f===void 0&&(f=new T1(e),l.set(e,f)),f}}class T1{constructor(e){this.id=kp++,this.code=e,this.usedTimes=0}}function ml(C,e,l,f,v,M,B){const I=new jh,k=new w1,N=[],X=v.isWebGL2,Z=v.logarithmicDepthBuffer,$=v.vertexTextures;let J=v.precision;const re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function fe(we){return we===0?"uv":`uv${we}`}function se(we,Ve,$t,bn,Nt){const Vt=bn.fog,en=Nt.geometry,Ht=we.isMeshStandardMaterial?bn.environment:null,un=(we.isMeshStandardMaterial?l:e).get(we.envMap||Ht),hn=un&&un.mapping===Qs?un.image.height:null,xn=re[we.type];we.precision!==null&&(J=v.getMaxPrecision(we.precision),J!==we.precision&&w.warn("THREE.WebGLProgram.getParameters:",we.precision,"not supported, using",J,"instead."));const mn=en.morphAttributes.position||en.morphAttributes.normal||en.morphAttributes.color,mt=mn!==void 0?mn.length:0;let it=0;en.morphAttributes.position!==void 0&&(it=1),en.morphAttributes.normal!==void 0&&(it=2),en.morphAttributes.color!==void 0&&(it=3);let ir,or,cr,Lr;if(xn){const Gc=Oc[xn];ir=Gc.vertexShader,or=Gc.fragmentShader}else ir=we.vertexShader,or=we.fragmentShader,k.update(we),cr=k.getVertexShaderID(we),Lr=k.getFragmentShaderID(we);const Zr=C.getRenderTarget(),Vr=Nt.isInstancedMesh===!0,$i=!!we.map,po=!!we.matcap,Ar=!!un,nt=!!we.aoMap,Zn=!!we.lightMap,dn=!!we.bumpMap,zn=!!we.normalMap,_n=!!we.displacementMap,Ur=!!we.emissiveMap,xr=!!we.metalnessMap,Tr=!!we.roughnessMap,_i=we.anisotropy>0,eo=we.clearcoat>0,Zo=we.iridescence>0,tt=we.sheen>0,Pe=we.transmission>0,on=_i&&!!we.anisotropyMap,Zt=eo&&!!we.clearcoatMap,Gn=eo&&!!we.clearcoatNormalMap,sr=eo&&!!we.clearcoatRoughnessMap,Pr=Zo&&!!we.iridescenceMap,Un=Zo&&!!we.iridescenceThicknessMap,Ft=tt&&!!we.sheenColorMap,er=tt&&!!we.sheenRoughnessMap,Nr=!!we.specularMap,Qr=!!we.specularColorMap,vr=!!we.specularIntensityMap,_r=Pe&&!!we.transmissionMap,Ei=Pe&&!!we.thicknessMap,zo=!!we.gradientMap,vt=!!we.alphaMap,Kn=we.alphaTest>0,Kt=!!we.alphaHash,Vn=!!we.extensions,fr=!!en.attributes.uv1,so=!!en.attributes.uv2,ls=!!en.attributes.uv3;return{isWebGL2:X,shaderID:xn,shaderType:we.type,shaderName:we.name,vertexShader:ir,fragmentShader:or,defines:we.defines,customVertexShaderID:cr,customFragmentShaderID:Lr,isRawShaderMaterial:we.isRawShaderMaterial===!0,glslVersion:we.glslVersion,precision:J,instancing:Vr,instancingColor:Vr&&Nt.instanceColor!==null,supportsVertexTextures:$,outputColorSpace:Zr===null?C.outputColorSpace:Zr.isXRRenderTarget===!0?Zr.texture.colorSpace:oc,map:$i,matcap:po,envMap:Ar,envMapMode:Ar&&un.mapping,envMapCubeUVHeight:hn,aoMap:nt,lightMap:Zn,bumpMap:dn,normalMap:zn,displacementMap:$&&_n,emissiveMap:Ur,normalMapObjectSpace:zn&&we.normalMapType===Yf,normalMapTangentSpace:zn&&we.normalMapType===wi,metalnessMap:xr,roughnessMap:Tr,anisotropy:_i,anisotropyMap:on,clearcoat:eo,clearcoatMap:Zt,clearcoatNormalMap:Gn,clearcoatRoughnessMap:sr,iridescence:Zo,iridescenceMap:Pr,iridescenceThicknessMap:Un,sheen:tt,sheenColorMap:Ft,sheenRoughnessMap:er,specularMap:Nr,specularColorMap:Qr,specularIntensityMap:vr,transmission:Pe,transmissionMap:_r,thicknessMap:Ei,gradientMap:zo,opaque:we.transparent===!1&&we.blending===_t,alphaMap:vt,alphaTest:Kn,alphaHash:Kt,combine:we.combine,mapUv:$i&&fe(we.map.channel),aoMapUv:nt&&fe(we.aoMap.channel),lightMapUv:Zn&&fe(we.lightMap.channel),bumpMapUv:dn&&fe(we.bumpMap.channel),normalMapUv:zn&&fe(we.normalMap.channel),displacementMapUv:_n&&fe(we.displacementMap.channel),emissiveMapUv:Ur&&fe(we.emissiveMap.channel),metalnessMapUv:xr&&fe(we.metalnessMap.channel),roughnessMapUv:Tr&&fe(we.roughnessMap.channel),anisotropyMapUv:on&&fe(we.anisotropyMap.channel),clearcoatMapUv:Zt&&fe(we.clearcoatMap.channel),clearcoatNormalMapUv:Gn&&fe(we.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:sr&&fe(we.clearcoatRoughnessMap.channel),iridescenceMapUv:Pr&&fe(we.iridescenceMap.channel),iridescenceThicknessMapUv:Un&&fe(we.iridescenceThicknessMap.channel),sheenColorMapUv:Ft&&fe(we.sheenColorMap.channel),sheenRoughnessMapUv:er&&fe(we.sheenRoughnessMap.channel),specularMapUv:Nr&&fe(we.specularMap.channel),specularColorMapUv:Qr&&fe(we.specularColorMap.channel),specularIntensityMapUv:vr&&fe(we.specularIntensityMap.channel),transmissionMapUv:_r&&fe(we.transmissionMap.channel),thicknessMapUv:Ei&&fe(we.thicknessMap.channel),alphaMapUv:vt&&fe(we.alphaMap.channel),vertexTangents:!!en.attributes.tangent&&(zn||_i),vertexColors:we.vertexColors,vertexAlphas:we.vertexColors===!0&&!!en.attributes.color&&en.attributes.color.itemSize===4,vertexUv1s:fr,vertexUv2s:so,vertexUv3s:ls,pointsUvs:Nt.isPoints===!0&&!!en.attributes.uv&&($i||vt),fog:!!Vt,useFog:we.fog===!0,fogExp2:Vt&&Vt.isFogExp2,flatShading:we.flatShading===!0,sizeAttenuation:we.sizeAttenuation===!0,logarithmicDepthBuffer:Z,skinning:Nt.isSkinnedMesh===!0,morphTargets:en.morphAttributes.position!==void 0,morphNormals:en.morphAttributes.normal!==void 0,morphColors:en.morphAttributes.color!==void 0,morphTargetsCount:mt,morphTextureStride:it,numDirLights:Ve.directional.length,numPointLights:Ve.point.length,numSpotLights:Ve.spot.length,numSpotLightMaps:Ve.spotLightMap.length,numRectAreaLights:Ve.rectArea.length,numHemiLights:Ve.hemi.length,numDirLightShadows:Ve.directionalShadowMap.length,numPointLightShadows:Ve.pointShadowMap.length,numSpotLightShadows:Ve.spotShadowMap.length,numSpotLightShadowsWithMaps:Ve.numSpotLightShadowsWithMaps,numClippingPlanes:B.numPlanes,numClipIntersection:B.numIntersection,dithering:we.dithering,shadowMapEnabled:C.shadowMap.enabled&&$t.length>0,shadowMapType:C.shadowMap.type,toneMapping:we.toneMapped?C.toneMapping:ao,useLegacyLights:C.useLegacyLights,premultipliedAlpha:we.premultipliedAlpha,doubleSided:we.side===st,flipSided:we.side===We,useDepthPacking:we.depthPacking>=0,depthPacking:we.depthPacking||0,index0AttributeName:we.index0AttributeName,extensionDerivatives:Vn&&we.extensions.derivatives===!0,extensionFragDepth:Vn&&we.extensions.fragDepth===!0,extensionDrawBuffers:Vn&&we.extensions.drawBuffers===!0,extensionShaderTextureLOD:Vn&&we.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:X||f.has("EXT_frag_depth"),rendererExtensionDrawBuffers:X||f.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:X||f.has("EXT_shader_texture_lod"),customProgramCacheKey:we.customProgramCacheKey()}}function ne(we){const Ve=[];if(we.shaderID?Ve.push(we.shaderID):(Ve.push(we.customVertexShaderID),Ve.push(we.customFragmentShaderID)),we.defines!==void 0)for(const $t in we.defines)Ve.push($t),Ve.push(we.defines[$t]);return we.isRawShaderMaterial===!1&&(be(Ve,we),he(Ve,we),Ve.push(C.outputColorSpace)),Ve.push(we.customProgramCacheKey),Ve.join()}function be(we,Ve){we.push(Ve.precision),we.push(Ve.outputColorSpace),we.push(Ve.envMapMode),we.push(Ve.envMapCubeUVHeight),we.push(Ve.mapUv),we.push(Ve.alphaMapUv),we.push(Ve.lightMapUv),we.push(Ve.aoMapUv),we.push(Ve.bumpMapUv),we.push(Ve.normalMapUv),we.push(Ve.displacementMapUv),we.push(Ve.emissiveMapUv),we.push(Ve.metalnessMapUv),we.push(Ve.roughnessMapUv),we.push(Ve.anisotropyMapUv),we.push(Ve.clearcoatMapUv),we.push(Ve.clearcoatNormalMapUv),we.push(Ve.clearcoatRoughnessMapUv),we.push(Ve.iridescenceMapUv),we.push(Ve.iridescenceThicknessMapUv),we.push(Ve.sheenColorMapUv),we.push(Ve.sheenRoughnessMapUv),we.push(Ve.specularMapUv),we.push(Ve.specularColorMapUv),we.push(Ve.specularIntensityMapUv),we.push(Ve.transmissionMapUv),we.push(Ve.thicknessMapUv),we.push(Ve.combine),we.push(Ve.fogExp2),we.push(Ve.sizeAttenuation),we.push(Ve.morphTargetsCount),we.push(Ve.morphAttributeCount),we.push(Ve.numDirLights),we.push(Ve.numPointLights),we.push(Ve.numSpotLights),we.push(Ve.numSpotLightMaps),we.push(Ve.numHemiLights),we.push(Ve.numRectAreaLights),we.push(Ve.numDirLightShadows),we.push(Ve.numPointLightShadows),we.push(Ve.numSpotLightShadows),we.push(Ve.numSpotLightShadowsWithMaps),we.push(Ve.shadowMapType),we.push(Ve.toneMapping),we.push(Ve.numClippingPlanes),we.push(Ve.numClipIntersection),we.push(Ve.depthPacking)}function he(we,Ve){I.disableAll(),Ve.isWebGL2&&I.enable(0),Ve.supportsVertexTextures&&I.enable(1),Ve.instancing&&I.enable(2),Ve.instancingColor&&I.enable(3),Ve.matcap&&I.enable(4),Ve.envMap&&I.enable(5),Ve.normalMapObjectSpace&&I.enable(6),Ve.normalMapTangentSpace&&I.enable(7),Ve.clearcoat&&I.enable(8),Ve.iridescence&&I.enable(9),Ve.alphaTest&&I.enable(10),Ve.vertexColors&&I.enable(11),Ve.vertexAlphas&&I.enable(12),Ve.vertexUv1s&&I.enable(13),Ve.vertexUv2s&&I.enable(14),Ve.vertexUv3s&&I.enable(15),Ve.vertexTangents&&I.enable(16),Ve.anisotropy&&I.enable(17),we.push(I.mask),I.disableAll(),Ve.fog&&I.enable(0),Ve.useFog&&I.enable(1),Ve.flatShading&&I.enable(2),Ve.logarithmicDepthBuffer&&I.enable(3),Ve.skinning&&I.enable(4),Ve.morphTargets&&I.enable(5),Ve.morphNormals&&I.enable(6),Ve.morphColors&&I.enable(7),Ve.premultipliedAlpha&&I.enable(8),Ve.shadowMapEnabled&&I.enable(9),Ve.useLegacyLights&&I.enable(10),Ve.doubleSided&&I.enable(11),Ve.flipSided&&I.enable(12),Ve.useDepthPacking&&I.enable(13),Ve.dithering&&I.enable(14),Ve.transmission&&I.enable(15),Ve.sheen&&I.enable(16),Ve.opaque&&I.enable(17),Ve.pointsUvs&&I.enable(18),we.push(I.mask)}function Se(we){const Ve=re[we.type];let $t;if(Ve){const bn=Oc[Ve];$t=Au.clone(bn.uniforms)}else $t=we.uniforms;return $t}function Oe(we,Ve){let $t;for(let bn=0,Nt=N.length;bn<Nt;bn++){const Vt=N[bn];if(Vt.cacheKey===Ve){$t=Vt,++$t.usedTimes;break}}return $t===void 0&&($t=new tl(C,Ve,we,M),N.push($t)),$t}function Qe(we){if(--we.usedTimes===0){const Ve=N.indexOf(we);N[Ve]=N[N.length-1],N.pop(),we.destroy()}}function Ze(we){k.remove(we)}function ht(){k.dispose()}return{getParameters:se,getProgramCacheKey:ne,getUniforms:Se,acquireProgram:Oe,releaseProgram:Qe,releaseShaderCache:Ze,programs:N,dispose:ht}}function Wy(){let C=new WeakMap;function e(M){let B=C.get(M);return B===void 0&&(B={},C.set(M,B)),B}function l(M){C.delete(M)}function f(M,B,I){C.get(M)[B]=I}function v(){C=new WeakMap}return{get:e,remove:l,update:f,dispose:v}}function Gm(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.material.id!==e.material.id?C.material.id-e.material.id:C.z!==e.z?C.z-e.z:C.id-e.id}function Og(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.z!==e.z?e.z-C.z:C.id-e.id}function sp(){const C=[];let e=0;const l=[],f=[],v=[];function M(){e=0,l.length=0,f.length=0,v.length=0}function B(Z,$,J,re,fe,se){let ne=C[e];return ne===void 0?(ne={id:Z.id,object:Z,geometry:$,material:J,groupOrder:re,renderOrder:Z.renderOrder,z:fe,group:se},C[e]=ne):(ne.id=Z.id,ne.object=Z,ne.geometry=$,ne.material=J,ne.groupOrder=re,ne.renderOrder=Z.renderOrder,ne.z=fe,ne.group=se),e++,ne}function I(Z,$,J,re,fe,se){const ne=B(Z,$,J,re,fe,se);J.transmission>0?f.push(ne):J.transparent===!0?v.push(ne):l.push(ne)}function k(Z,$,J,re,fe,se){const ne=B(Z,$,J,re,fe,se);J.transmission>0?f.unshift(ne):J.transparent===!0?v.unshift(ne):l.unshift(ne)}function N(Z,$){l.length>1&&l.sort(Z||Gm),f.length>1&&f.sort($||Og),v.length>1&&v.sort($||Og)}function X(){for(let Z=e,$=C.length;Z<$;Z++){const J=C[Z];if(J.id===null)break;J.id=null,J.object=null,J.geometry=null,J.material=null,J.group=null}}return{opaque:l,transmissive:f,transparent:v,init:M,push:I,unshift:k,finish:X,sort:N}}function zp(){let C=new WeakMap;function e(f,v){const M=C.get(f);let B;return M===void 0?(B=new sp,C.set(f,[B])):v>=M.length?(B=new sp,M.push(B)):B=M[v],B}function l(){C=new WeakMap}return{get:e,dispose:l}}function B1(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let l;switch(e.type){case"DirectionalLight":l={direction:new Xe,color:new pr};break;case"SpotLight":l={position:new Xe,direction:new Xe,color:new pr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":l={position:new Xe,color:new pr,distance:0,decay:0};break;case"HemisphereLight":l={direction:new Xe,skyColor:new pr,groundColor:new pr};break;case"RectAreaLight":l={color:new pr,position:new Xe,halfWidth:new Xe,halfHeight:new Xe};break}return C[e.id]=l,l}}}function Vy(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let l;switch(e.type){case"DirectionalLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fn};break;case"SpotLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fn};break;case"PointLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fn,shadowCameraNear:1,shadowCameraFar:1e3};break}return C[e.id]=l,l}}}let dh=0;function Qy(C,e){return(e.castShadow?2:0)-(C.castShadow?2:0)+(e.map?1:0)-(C.map?1:0)}function a3(C,e){const l=new B1,f=Vy(),v={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let X=0;X<9;X++)v.probe.push(new Xe);const M=new Xe,B=new si,I=new si;function k(X,Z){let $=0,J=0,re=0;for(let $t=0;$t<9;$t++)v.probe[$t].set(0,0,0);let fe=0,se=0,ne=0,be=0,he=0,Se=0,Oe=0,Qe=0,Ze=0,ht=0;X.sort(Qy);const we=Z===!0?Math.PI:1;for(let $t=0,bn=X.length;$t<bn;$t++){const Nt=X[$t],Vt=Nt.color,en=Nt.intensity,Ht=Nt.distance,un=Nt.shadow&&Nt.shadow.map?Nt.shadow.map.texture:null;if(Nt.isAmbientLight)$+=Vt.r*en*we,J+=Vt.g*en*we,re+=Vt.b*en*we;else if(Nt.isLightProbe)for(let hn=0;hn<9;hn++)v.probe[hn].addScaledVector(Nt.sh.coefficients[hn],en);else if(Nt.isDirectionalLight){const hn=l.get(Nt);if(hn.color.copy(Nt.color).multiplyScalar(Nt.intensity*we),Nt.castShadow){const xn=Nt.shadow,mn=f.get(Nt);mn.shadowBias=xn.bias,mn.shadowNormalBias=xn.normalBias,mn.shadowRadius=xn.radius,mn.shadowMapSize=xn.mapSize,v.directionalShadow[fe]=mn,v.directionalShadowMap[fe]=un,v.directionalShadowMatrix[fe]=Nt.shadow.matrix,Se++}v.directional[fe]=hn,fe++}else if(Nt.isSpotLight){const hn=l.get(Nt);hn.position.setFromMatrixPosition(Nt.matrixWorld),hn.color.copy(Vt).multiplyScalar(en*we),hn.distance=Ht,hn.coneCos=Math.cos(Nt.angle),hn.penumbraCos=Math.cos(Nt.angle*(1-Nt.penumbra)),hn.decay=Nt.decay,v.spot[ne]=hn;const xn=Nt.shadow;if(Nt.map&&(v.spotLightMap[Ze]=Nt.map,Ze++,xn.updateMatrices(Nt),Nt.castShadow&&ht++),v.spotLightMatrix[ne]=xn.matrix,Nt.castShadow){const mn=f.get(Nt);mn.shadowBias=xn.bias,mn.shadowNormalBias=xn.normalBias,mn.shadowRadius=xn.radius,mn.shadowMapSize=xn.mapSize,v.spotShadow[ne]=mn,v.spotShadowMap[ne]=un,Qe++}ne++}else if(Nt.isRectAreaLight){const hn=l.get(Nt);hn.color.copy(Vt).multiplyScalar(en),hn.halfWidth.set(Nt.width*.5,0,0),hn.halfHeight.set(0,Nt.height*.5,0),v.rectArea[be]=hn,be++}else if(Nt.isPointLight){const hn=l.get(Nt);if(hn.color.copy(Nt.color).multiplyScalar(Nt.intensity*we),hn.distance=Nt.distance,hn.decay=Nt.decay,Nt.castShadow){const xn=Nt.shadow,mn=f.get(Nt);mn.shadowBias=xn.bias,mn.shadowNormalBias=xn.normalBias,mn.shadowRadius=xn.radius,mn.shadowMapSize=xn.mapSize,mn.shadowCameraNear=xn.camera.near,mn.shadowCameraFar=xn.camera.far,v.pointShadow[se]=mn,v.pointShadowMap[se]=un,v.pointShadowMatrix[se]=Nt.shadow.matrix,Oe++}v.point[se]=hn,se++}else if(Nt.isHemisphereLight){const hn=l.get(Nt);hn.skyColor.copy(Nt.color).multiplyScalar(en*we),hn.groundColor.copy(Nt.groundColor).multiplyScalar(en*we),v.hemi[he]=hn,he++}}be>0&&(e.isWebGL2||C.has("OES_texture_float_linear")===!0?(v.rectAreaLTC1=Xn.LTC_FLOAT_1,v.rectAreaLTC2=Xn.LTC_FLOAT_2):C.has("OES_texture_half_float_linear")===!0?(v.rectAreaLTC1=Xn.LTC_HALF_1,v.rectAreaLTC2=Xn.LTC_HALF_2):w.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),v.ambient[0]=$,v.ambient[1]=J,v.ambient[2]=re;const Ve=v.hash;(Ve.directionalLength!==fe||Ve.pointLength!==se||Ve.spotLength!==ne||Ve.rectAreaLength!==be||Ve.hemiLength!==he||Ve.numDirectionalShadows!==Se||Ve.numPointShadows!==Oe||Ve.numSpotShadows!==Qe||Ve.numSpotMaps!==Ze)&&(v.directional.length=fe,v.spot.length=ne,v.rectArea.length=be,v.point.length=se,v.hemi.length=he,v.directionalShadow.length=Se,v.directionalShadowMap.length=Se,v.pointShadow.length=Oe,v.pointShadowMap.length=Oe,v.spotShadow.length=Qe,v.spotShadowMap.length=Qe,v.directionalShadowMatrix.length=Se,v.pointShadowMatrix.length=Oe,v.spotLightMatrix.length=Qe+Ze-ht,v.spotLightMap.length=Ze,v.numSpotLightShadowsWithMaps=ht,Ve.directionalLength=fe,Ve.pointLength=se,Ve.spotLength=ne,Ve.rectAreaLength=be,Ve.hemiLength=he,Ve.numDirectionalShadows=Se,Ve.numPointShadows=Oe,Ve.numSpotShadows=Qe,Ve.numSpotMaps=Ze,v.version=dh++)}function N(X,Z){let $=0,J=0,re=0,fe=0,se=0;const ne=Z.matrixWorldInverse;for(let be=0,he=X.length;be<he;be++){const Se=X[be];if(Se.isDirectionalLight){const Oe=v.directional[$];Oe.direction.setFromMatrixPosition(Se.matrixWorld),M.setFromMatrixPosition(Se.target.matrixWorld),Oe.direction.sub(M),Oe.direction.transformDirection(ne),$++}else if(Se.isSpotLight){const Oe=v.spot[re];Oe.position.setFromMatrixPosition(Se.matrixWorld),Oe.position.applyMatrix4(ne),Oe.direction.setFromMatrixPosition(Se.matrixWorld),M.setFromMatrixPosition(Se.target.matrixWorld),Oe.direction.sub(M),Oe.direction.transformDirection(ne),re++}else if(Se.isRectAreaLight){const Oe=v.rectArea[fe];Oe.position.setFromMatrixPosition(Se.matrixWorld),Oe.position.applyMatrix4(ne),I.identity(),B.copy(Se.matrixWorld),B.premultiply(ne),I.extractRotation(B),Oe.halfWidth.set(Se.width*.5,0,0),Oe.halfHeight.set(0,Se.height*.5,0),Oe.halfWidth.applyMatrix4(I),Oe.halfHeight.applyMatrix4(I),fe++}else if(Se.isPointLight){const Oe=v.point[J];Oe.position.setFromMatrixPosition(Se.matrixWorld),Oe.position.applyMatrix4(ne),J++}else if(Se.isHemisphereLight){const Oe=v.hemi[se];Oe.direction.setFromMatrixPosition(Se.matrixWorld),Oe.direction.transformDirection(ne),se++}}}return{setup:k,setupView:N,state:v}}function Xy(C,e){const l=new a3(C,e),f=[],v=[];function M(){f.length=0,v.length=0}function B(Z){f.push(Z)}function I(Z){v.push(Z)}function k(Z){l.setup(f,Z)}function N(Z){l.setupView(f,Z)}return{init:M,state:{lightsArray:f,shadowsArray:v,lights:l},setupLights:k,setupLightsView:N,pushLight:B,pushShadow:I}}function Ky(C,e){let l=new WeakMap;function f(M,B=0){const I=l.get(M);let k;return I===void 0?(k=new Xy(C,e),l.set(M,[k])):B>=I.length?(k=new Xy(C,e),I.push(k)):k=I[B],k}function v(){l=new WeakMap}return{get:f,dispose:v}}class Um extends fa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ap,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Nm extends fa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Gp=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,l3=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function c3(C,e,l){let f=new od;const v=new fn,M=new fn,B=new Ji,I=new Um({depthPacking:Od}),k=new Nm,N={},X=l.maxTextureSize,Z={[rt]:We,[We]:rt,[st]:st},$=new Wr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new fn},radius:{value:4}},vertexShader:Gp,fragmentShader:l3}),J=$.clone();J.defines.HORIZONTAL_PASS=1;const re=new xi;re.setAttribute("position",new uo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const fe=new fo(re,$),se=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pe;let ne=this.type;this.render=function(Oe,Qe,Ze){if(se.enabled===!1||se.autoUpdate===!1&&se.needsUpdate===!1||Oe.length===0)return;const ht=C.getRenderTarget(),we=C.getActiveCubeFace(),Ve=C.getActiveMipmapLevel(),$t=C.state;$t.setBlending(St),$t.buffers.color.setClear(1,1,1,1),$t.buffers.depth.setTest(!0),$t.setScissorTest(!1);const bn=ne!==xt&&this.type===xt,Nt=ne===xt&&this.type!==xt;for(let Vt=0,en=Oe.length;Vt<en;Vt++){const Ht=Oe[Vt],un=Ht.shadow;if(un===void 0){w.warn("THREE.WebGLShadowMap:",Ht,"has no shadow.");continue}if(un.autoUpdate===!1&&un.needsUpdate===!1)continue;v.copy(un.mapSize);const hn=un.getFrameExtents();if(v.multiply(hn),M.copy(un.mapSize),(v.x>X||v.y>X)&&(v.x>X&&(M.x=Math.floor(X/hn.x),v.x=M.x*hn.x,un.mapSize.x=M.x),v.y>X&&(M.y=Math.floor(X/hn.y),v.y=M.y*hn.y,un.mapSize.y=M.y)),un.map===null||bn===!0||Nt===!0){const mn=this.type!==xt?{minFilter:ki,magFilter:ki}:{};un.map!==null&&un.map.dispose(),un.map=new qs(v.x,v.y,mn),un.map.texture.name=Ht.name+".shadowMap",un.camera.updateProjectionMatrix()}C.setRenderTarget(un.map),C.clear();const xn=un.getViewportCount();for(let mn=0;mn<xn;mn++){const mt=un.getViewport(mn);B.set(M.x*mt.x,M.y*mt.y,M.x*mt.z,M.y*mt.w),$t.viewport(B),un.updateMatrices(Ht,mn),f=un.getFrustum(),Se(Qe,Ze,un.camera,Ht,this.type)}un.isPointLightShadow!==!0&&this.type===xt&&be(un,Ze),un.needsUpdate=!1}ne=this.type,se.needsUpdate=!1,C.setRenderTarget(ht,we,Ve)};function be(Oe,Qe){const Ze=e.update(fe);$.defines.VSM_SAMPLES!==Oe.blurSamples&&($.defines.VSM_SAMPLES=Oe.blurSamples,J.defines.VSM_SAMPLES=Oe.blurSamples,$.needsUpdate=!0,J.needsUpdate=!0),Oe.mapPass===null&&(Oe.mapPass=new qs(v.x,v.y)),$.uniforms.shadow_pass.value=Oe.map.texture,$.uniforms.resolution.value=Oe.mapSize,$.uniforms.radius.value=Oe.radius,C.setRenderTarget(Oe.mapPass),C.clear(),C.renderBufferDirect(Qe,null,Ze,$,fe,null),J.uniforms.shadow_pass.value=Oe.mapPass.texture,J.uniforms.resolution.value=Oe.mapSize,J.uniforms.radius.value=Oe.radius,C.setRenderTarget(Oe.map),C.clear(),C.renderBufferDirect(Qe,null,Ze,J,fe,null)}function he(Oe,Qe,Ze,ht){let we=null;const Ve=Ze.isPointLight===!0?Oe.customDistanceMaterial:Oe.customDepthMaterial;if(Ve!==void 0)we=Ve;else if(we=Ze.isPointLight===!0?k:I,C.localClippingEnabled&&Qe.clipShadows===!0&&Array.isArray(Qe.clippingPlanes)&&Qe.clippingPlanes.length!==0||Qe.displacementMap&&Qe.displacementScale!==0||Qe.alphaMap&&Qe.alphaTest>0||Qe.map&&Qe.alphaTest>0){const $t=we.uuid,bn=Qe.uuid;let Nt=N[$t];Nt===void 0&&(Nt={},N[$t]=Nt);let Vt=Nt[bn];Vt===void 0&&(Vt=we.clone(),Nt[bn]=Vt),we=Vt}if(we.visible=Qe.visible,we.wireframe=Qe.wireframe,ht===xt?we.side=Qe.shadowSide!==null?Qe.shadowSide:Qe.side:we.side=Qe.shadowSide!==null?Qe.shadowSide:Z[Qe.side],we.alphaMap=Qe.alphaMap,we.alphaTest=Qe.alphaTest,we.map=Qe.map,we.clipShadows=Qe.clipShadows,we.clippingPlanes=Qe.clippingPlanes,we.clipIntersection=Qe.clipIntersection,we.displacementMap=Qe.displacementMap,we.displacementScale=Qe.displacementScale,we.displacementBias=Qe.displacementBias,we.wireframeLinewidth=Qe.wireframeLinewidth,we.linewidth=Qe.linewidth,Ze.isPointLight===!0&&we.isMeshDistanceMaterial===!0){const $t=C.properties.get(we);$t.light=Ze}return we}function Se(Oe,Qe,Ze,ht,we){if(Oe.visible===!1)return;if(Oe.layers.test(Qe.layers)&&(Oe.isMesh||Oe.isLine||Oe.isPoints)&&(Oe.castShadow||Oe.receiveShadow&&we===xt)&&(!Oe.frustumCulled||f.intersectsObject(Oe))){Oe.modelViewMatrix.multiplyMatrices(Ze.matrixWorldInverse,Oe.matrixWorld);const bn=e.update(Oe),Nt=Oe.material;if(Array.isArray(Nt)){const Vt=bn.groups;for(let en=0,Ht=Vt.length;en<Ht;en++){const un=Vt[en],hn=Nt[un.materialIndex];if(hn&&hn.visible){const xn=he(Oe,hn,ht,we);C.renderBufferDirect(Ze,null,bn,xn,Oe,un)}}}else if(Nt.visible){const Vt=he(Oe,Nt,ht,we);C.renderBufferDirect(Ze,null,bn,Vt,Oe,null)}}const $t=Oe.children;for(let bn=0,Nt=$t.length;bn<Nt;bn++)Se($t[bn],Qe,Ze,ht,we)}}function p3(C,e,l){const f=l.isWebGL2;function v(){let vt=!1;const Kn=new Ji;let Kt=null;const Vn=new Ji(0,0,0,0);return{setMask:function(fr){Kt!==fr&&!vt&&(C.colorMask(fr,fr,fr,fr),Kt=fr)},setLocked:function(fr){vt=fr},setClear:function(fr,so,ls,na,Gc){Gc===!0&&(fr*=na,so*=na,ls*=na),Kn.set(fr,so,ls,na),Vn.equals(Kn)===!1&&(C.clearColor(fr,so,ls,na),Vn.copy(Kn))},reset:function(){vt=!1,Kt=null,Vn.set(-1,0,0,0)}}}function M(){let vt=!1,Kn=null,Kt=null,Vn=null;return{setTest:function(fr){fr?Zr(C.DEPTH_TEST):Vr(C.DEPTH_TEST)},setMask:function(fr){Kn!==fr&&!vt&&(C.depthMask(fr),Kn=fr)},setFunc:function(fr){if(Kt!==fr){switch(fr){case Ir:C.depthFunc(C.NEVER);break;case Pi:C.depthFunc(C.ALWAYS);break;case Tn:C.depthFunc(C.LESS);break;case Sn:C.depthFunc(C.LEQUAL);break;case Ln:C.depthFunc(C.EQUAL);break;case gr:C.depthFunc(C.GEQUAL);break;case ni:C.depthFunc(C.GREATER);break;case yr:C.depthFunc(C.NOTEQUAL);break;default:C.depthFunc(C.LEQUAL)}Kt=fr}},setLocked:function(fr){vt=fr},setClear:function(fr){Vn!==fr&&(C.clearDepth(fr),Vn=fr)},reset:function(){vt=!1,Kn=null,Kt=null,Vn=null}}}function B(){let vt=!1,Kn=null,Kt=null,Vn=null,fr=null,so=null,ls=null,na=null,Gc=null;return{setTest:function($o){vt||($o?Zr(C.STENCIL_TEST):Vr(C.STENCIL_TEST))},setMask:function($o){Kn!==$o&&!vt&&(C.stencilMask($o),Kn=$o)},setFunc:function($o,Ol,Dl){(Kt!==$o||Vn!==Ol||fr!==Dl)&&(C.stencilFunc($o,Ol,Dl),Kt=$o,Vn=Ol,fr=Dl)},setOp:function($o,Ol,Dl){(so!==$o||ls!==Ol||na!==Dl)&&(C.stencilOp($o,Ol,Dl),so=$o,ls=Ol,na=Dl)},setLocked:function($o){vt=$o},setClear:function($o){Gc!==$o&&(C.clearStencil($o),Gc=$o)},reset:function(){vt=!1,Kn=null,Kt=null,Vn=null,fr=null,so=null,ls=null,na=null,Gc=null}}}const I=new v,k=new M,N=new B,X=new WeakMap,Z=new WeakMap;let $={},J={},re=new WeakMap,fe=[],se=null,ne=!1,be=null,he=null,Se=null,Oe=null,Qe=null,Ze=null,ht=null,we=!1,Ve=null,$t=null,bn=null,Nt=null,Vt=null;const en=C.getParameter(C.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ht=!1,un=0;const hn=C.getParameter(C.VERSION);hn.indexOf("WebGL")!==-1?(un=parseFloat(/^WebGL (\d)/.exec(hn)[1]),Ht=un>=1):hn.indexOf("OpenGL ES")!==-1&&(un=parseFloat(/^OpenGL ES (\d)/.exec(hn)[1]),Ht=un>=2);let xn=null,mn={};const mt=C.getParameter(C.SCISSOR_BOX),it=C.getParameter(C.VIEWPORT),ir=new Ji().fromArray(mt),or=new Ji().fromArray(it);function cr(vt,Kn,Kt,Vn){const fr=new Uint8Array(4),so=C.createTexture();C.bindTexture(vt,so),C.texParameteri(vt,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(vt,C.TEXTURE_MAG_FILTER,C.NEAREST);for(let ls=0;ls<Kt;ls++)f&&(vt===C.TEXTURE_3D||vt===C.TEXTURE_2D_ARRAY)?C.texImage3D(Kn,0,C.RGBA,1,1,Vn,0,C.RGBA,C.UNSIGNED_BYTE,fr):C.texImage2D(Kn+ls,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,fr);return so}const Lr={};Lr[C.TEXTURE_2D]=cr(C.TEXTURE_2D,C.TEXTURE_2D,1),Lr[C.TEXTURE_CUBE_MAP]=cr(C.TEXTURE_CUBE_MAP,C.TEXTURE_CUBE_MAP_POSITIVE_X,6),f&&(Lr[C.TEXTURE_2D_ARRAY]=cr(C.TEXTURE_2D_ARRAY,C.TEXTURE_2D_ARRAY,1,1),Lr[C.TEXTURE_3D]=cr(C.TEXTURE_3D,C.TEXTURE_3D,1,1)),I.setClear(0,0,0,1),k.setClear(1),N.setClear(0),Zr(C.DEPTH_TEST),k.setFunc(Sn),_n(!1),Ur(j),Zr(C.CULL_FACE),dn(St);function Zr(vt){$[vt]!==!0&&(C.enable(vt),$[vt]=!0)}function Vr(vt){$[vt]!==!1&&(C.disable(vt),$[vt]=!1)}function $i(vt,Kn){return J[vt]!==Kn?(C.bindFramebuffer(vt,Kn),J[vt]=Kn,f&&(vt===C.DRAW_FRAMEBUFFER&&(J[C.FRAMEBUFFER]=Kn),vt===C.FRAMEBUFFER&&(J[C.DRAW_FRAMEBUFFER]=Kn)),!0):!1}function po(vt,Kn){let Kt=fe,Vn=!1;if(vt)if(Kt=re.get(Kn),Kt===void 0&&(Kt=[],re.set(Kn,Kt)),vt.isWebGLMultipleRenderTargets){const fr=vt.texture;if(Kt.length!==fr.length||Kt[0]!==C.COLOR_ATTACHMENT0){for(let so=0,ls=fr.length;so<ls;so++)Kt[so]=C.COLOR_ATTACHMENT0+so;Kt.length=fr.length,Vn=!0}}else Kt[0]!==C.COLOR_ATTACHMENT0&&(Kt[0]=C.COLOR_ATTACHMENT0,Vn=!0);else Kt[0]!==C.BACK&&(Kt[0]=C.BACK,Vn=!0);Vn&&(l.isWebGL2?C.drawBuffers(Kt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Kt))}function Ar(vt){return se!==vt?(C.useProgram(vt),se=vt,!0):!1}const nt={[Jt]:C.FUNC_ADD,[Lt]:C.FUNC_SUBTRACT,[vn]:C.FUNC_REVERSE_SUBTRACT};if(f)nt[nr]=C.MIN,nt[br]=C.MAX;else{const vt=e.get("EXT_blend_minmax");vt!==null&&(nt[nr]=vt.MIN_EXT,nt[br]=vt.MAX_EXT)}const Zn={[Rr]:C.ZERO,[Dn]:C.ONE,[Di]:C.SRC_COLOR,[ti]:C.SRC_ALPHA,[hr]:C.SRC_ALPHA_SATURATE,[nn]:C.DST_COLOR,[cs]:C.DST_ALPHA,[Wi]:C.ONE_MINUS_SRC_COLOR,[vi]:C.ONE_MINUS_SRC_ALPHA,[Bn]:C.ONE_MINUS_DST_COLOR,[Wn]:C.ONE_MINUS_DST_ALPHA};function dn(vt,Kn,Kt,Vn,fr,so,ls,na){if(vt===St){ne===!0&&(Vr(C.BLEND),ne=!1);return}if(ne===!1&&(Zr(C.BLEND),ne=!0),vt!==Rt){if(vt!==be||na!==we){if((he!==Jt||Qe!==Jt)&&(C.blendEquation(C.FUNC_ADD),he=Jt,Qe=Jt),na)switch(vt){case _t:C.blendFuncSeparate(C.ONE,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA);break;case pt:C.blendFunc(C.ONE,C.ONE);break;case ft:C.blendFuncSeparate(C.ZERO,C.ONE_MINUS_SRC_COLOR,C.ZERO,C.ONE);break;case kt:C.blendFuncSeparate(C.ZERO,C.SRC_COLOR,C.ZERO,C.SRC_ALPHA);break;default:w.error("THREE.WebGLState: Invalid blending: ",vt);break}else switch(vt){case _t:C.blendFuncSeparate(C.SRC_ALPHA,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA);break;case pt:C.blendFunc(C.SRC_ALPHA,C.ONE);break;case ft:C.blendFuncSeparate(C.ZERO,C.ONE_MINUS_SRC_COLOR,C.ZERO,C.ONE);break;case kt:C.blendFunc(C.ZERO,C.SRC_COLOR);break;default:w.error("THREE.WebGLState: Invalid blending: ",vt);break}Se=null,Oe=null,Ze=null,ht=null,be=vt,we=na}return}fr=fr||Kn,so=so||Kt,ls=ls||Vn,(Kn!==he||fr!==Qe)&&(C.blendEquationSeparate(nt[Kn],nt[fr]),he=Kn,Qe=fr),(Kt!==Se||Vn!==Oe||so!==Ze||ls!==ht)&&(C.blendFuncSeparate(Zn[Kt],Zn[Vn],Zn[so],Zn[ls]),Se=Kt,Oe=Vn,Ze=so,ht=ls),be=vt,we=!1}function zn(vt,Kn){vt.side===st?Vr(C.CULL_FACE):Zr(C.CULL_FACE);let Kt=vt.side===We;Kn&&(Kt=!Kt),_n(Kt),vt.blending===_t&&vt.transparent===!1?dn(St):dn(vt.blending,vt.blendEquation,vt.blendSrc,vt.blendDst,vt.blendEquationAlpha,vt.blendSrcAlpha,vt.blendDstAlpha,vt.premultipliedAlpha),k.setFunc(vt.depthFunc),k.setTest(vt.depthTest),k.setMask(vt.depthWrite),I.setMask(vt.colorWrite);const Vn=vt.stencilWrite;N.setTest(Vn),Vn&&(N.setMask(vt.stencilWriteMask),N.setFunc(vt.stencilFunc,vt.stencilRef,vt.stencilFuncMask),N.setOp(vt.stencilFail,vt.stencilZFail,vt.stencilZPass)),Tr(vt.polygonOffset,vt.polygonOffsetFactor,vt.polygonOffsetUnits),vt.alphaToCoverage===!0?Zr(C.SAMPLE_ALPHA_TO_COVERAGE):Vr(C.SAMPLE_ALPHA_TO_COVERAGE)}function _n(vt){Ve!==vt&&(vt?C.frontFace(C.CW):C.frontFace(C.CCW),Ve=vt)}function Ur(vt){vt!==E?(Zr(C.CULL_FACE),vt!==$t&&(vt===j?C.cullFace(C.BACK):vt===ee?C.cullFace(C.FRONT):C.cullFace(C.FRONT_AND_BACK))):Vr(C.CULL_FACE),$t=vt}function xr(vt){vt!==bn&&(Ht&&C.lineWidth(vt),bn=vt)}function Tr(vt,Kn,Kt){vt?(Zr(C.POLYGON_OFFSET_FILL),(Nt!==Kn||Vt!==Kt)&&(C.polygonOffset(Kn,Kt),Nt=Kn,Vt=Kt)):Vr(C.POLYGON_OFFSET_FILL)}function _i(vt){vt?Zr(C.SCISSOR_TEST):Vr(C.SCISSOR_TEST)}function eo(vt){vt===void 0&&(vt=C.TEXTURE0+en-1),xn!==vt&&(C.activeTexture(vt),xn=vt)}function Zo(vt,Kn,Kt){Kt===void 0&&(xn===null?Kt=C.TEXTURE0+en-1:Kt=xn);let Vn=mn[Kt];Vn===void 0&&(Vn={type:void 0,texture:void 0},mn[Kt]=Vn),(Vn.type!==vt||Vn.texture!==Kn)&&(xn!==Kt&&(C.activeTexture(Kt),xn=Kt),C.bindTexture(vt,Kn||Lr[vt]),Vn.type=vt,Vn.texture=Kn)}function tt(){const vt=mn[xn];vt!==void 0&&vt.type!==void 0&&(C.bindTexture(vt.type,null),vt.type=void 0,vt.texture=void 0)}function Pe(){try{C.compressedTexImage2D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function on(){try{C.compressedTexImage3D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Zt(){try{C.texSubImage2D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Gn(){try{C.texSubImage3D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function sr(){try{C.compressedTexSubImage2D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Pr(){try{C.compressedTexSubImage3D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Un(){try{C.texStorage2D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Ft(){try{C.texStorage3D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function er(){try{C.texImage2D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Nr(){try{C.texImage3D.apply(C,arguments)}catch(vt){w.error("THREE.WebGLState:",vt)}}function Qr(vt){ir.equals(vt)===!1&&(C.scissor(vt.x,vt.y,vt.z,vt.w),ir.copy(vt))}function vr(vt){or.equals(vt)===!1&&(C.viewport(vt.x,vt.y,vt.z,vt.w),or.copy(vt))}function _r(vt,Kn){let Kt=Z.get(Kn);Kt===void 0&&(Kt=new WeakMap,Z.set(Kn,Kt));let Vn=Kt.get(vt);Vn===void 0&&(Vn=C.getUniformBlockIndex(Kn,vt.name),Kt.set(vt,Vn))}function Ei(vt,Kn){const Vn=Z.get(Kn).get(vt);X.get(Kn)!==Vn&&(C.uniformBlockBinding(Kn,Vn,vt.__bindingPointIndex),X.set(Kn,Vn))}function zo(){C.disable(C.BLEND),C.disable(C.CULL_FACE),C.disable(C.DEPTH_TEST),C.disable(C.POLYGON_OFFSET_FILL),C.disable(C.SCISSOR_TEST),C.disable(C.STENCIL_TEST),C.disable(C.SAMPLE_ALPHA_TO_COVERAGE),C.blendEquation(C.FUNC_ADD),C.blendFunc(C.ONE,C.ZERO),C.blendFuncSeparate(C.ONE,C.ZERO,C.ONE,C.ZERO),C.colorMask(!0,!0,!0,!0),C.clearColor(0,0,0,0),C.depthMask(!0),C.depthFunc(C.LESS),C.clearDepth(1),C.stencilMask(4294967295),C.stencilFunc(C.ALWAYS,0,4294967295),C.stencilOp(C.KEEP,C.KEEP,C.KEEP),C.clearStencil(0),C.cullFace(C.BACK),C.frontFace(C.CCW),C.polygonOffset(0,0),C.activeTexture(C.TEXTURE0),C.bindFramebuffer(C.FRAMEBUFFER,null),f===!0&&(C.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),C.bindFramebuffer(C.READ_FRAMEBUFFER,null)),C.useProgram(null),C.lineWidth(1),C.scissor(0,0,C.canvas.width,C.canvas.height),C.viewport(0,0,C.canvas.width,C.canvas.height),$={},xn=null,mn={},J={},re=new WeakMap,fe=[],se=null,ne=!1,be=null,he=null,Se=null,Oe=null,Qe=null,Ze=null,ht=null,we=!1,Ve=null,$t=null,bn=null,Nt=null,Vt=null,ir.set(0,0,C.canvas.width,C.canvas.height),or.set(0,0,C.canvas.width,C.canvas.height),I.reset(),k.reset(),N.reset()}return{buffers:{color:I,depth:k,stencil:N},enable:Zr,disable:Vr,bindFramebuffer:$i,drawBuffers:po,useProgram:Ar,setBlending:dn,setMaterial:zn,setFlipSided:_n,setCullFace:Ur,setLineWidth:xr,setPolygonOffset:Tr,setScissorTest:_i,activeTexture:eo,bindTexture:Zo,unbindTexture:tt,compressedTexImage2D:Pe,compressedTexImage3D:on,texImage2D:er,texImage3D:Nr,updateUBOMapping:_r,uniformBlockBinding:Ei,texStorage2D:Un,texStorage3D:Ft,texSubImage2D:Zt,texSubImage3D:Gn,compressedTexSubImage2D:sr,compressedTexSubImage3D:Pr,scissor:Qr,viewport:vr,reset:zo}}function u3(C,e,l,f,v,M,B){const I=v.isWebGL2,k=v.maxTextures,N=v.maxCubemapSize,X=v.maxTextureSize,Z=v.maxSamples,$=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,J=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),re=new WeakMap;let fe;const se=new WeakMap;let ne=!1;try{ne=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(tt){}function be(tt,Pe){return ne?new OffscreenCanvas(tt,Pe):Vu("canvas")}function he(tt,Pe,on,Zt){let Gn=1;if((tt.width>Zt||tt.height>Zt)&&(Gn=Zt/Math.max(tt.width,tt.height)),Gn<1||Pe===!0)if(typeof HTMLImageElement!="undefined"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&tt instanceof ImageBitmap){const sr=Pe?xa:Math.floor,Pr=sr(Gn*tt.width),Un=sr(Gn*tt.height);fe===void 0&&(fe=be(Pr,Un));const Ft=on?be(Pr,Un):fe;return Ft.width=Pr,Ft.height=Un,Ft.getContext("2d").drawImage(tt,0,0,Pr,Un),w.warn("THREE.WebGLRenderer: Texture has been resized from ("+tt.width+"x"+tt.height+") to ("+Pr+"x"+Un+")."),Ft}else return"data"in tt&&w.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+tt.width+"x"+tt.height+")."),tt;return tt}function Se(tt){return _p(tt.width)&&_p(tt.height)}function Oe(tt){return I?!1:tt.wrapS!==Br||tt.wrapT!==Br||tt.minFilter!==ki&&tt.minFilter!==co}function Qe(tt,Pe){return tt.generateMipmaps&&Pe&&tt.minFilter!==ki&&tt.minFilter!==co}function Ze(tt){C.generateMipmap(tt)}function ht(tt,Pe,on,Zt,Gn=!1){if(I===!1)return Pe;if(tt!==null){if(C[tt]!==void 0)return C[tt];w.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+tt+"'")}let sr=Pe;return Pe===C.RED&&(on===C.FLOAT&&(sr=C.R32F),on===C.HALF_FLOAT&&(sr=C.R16F),on===C.UNSIGNED_BYTE&&(sr=C.R8)),Pe===C.RG&&(on===C.FLOAT&&(sr=C.RG32F),on===C.HALF_FLOAT&&(sr=C.RG16F),on===C.UNSIGNED_BYTE&&(sr=C.RG8)),Pe===C.RGBA&&(on===C.FLOAT&&(sr=C.RGBA32F),on===C.HALF_FLOAT&&(sr=C.RGBA16F),on===C.UNSIGNED_BYTE&&(sr=Zt===ui&&Gn===!1?C.SRGB8_ALPHA8:C.RGBA8),on===C.UNSIGNED_SHORT_4_4_4_4&&(sr=C.RGBA4),on===C.UNSIGNED_SHORT_5_5_5_1&&(sr=C.RGB5_A1)),(sr===C.R16F||sr===C.R32F||sr===C.RG16F||sr===C.RG32F||sr===C.RGBA16F||sr===C.RGBA32F)&&e.get("EXT_color_buffer_float"),sr}function we(tt,Pe,on){return Qe(tt,on)===!0||tt.isFramebufferTexture&&tt.minFilter!==ki&&tt.minFilter!==co?Math.log2(Math.max(Pe.width,Pe.height))+1:tt.mipmaps!==void 0&&tt.mipmaps.length>0?tt.mipmaps.length:tt.isCompressedTexture&&Array.isArray(tt.image)?Pe.mipmaps.length:1}function Ve(tt){return tt===ki||tt===la||tt===ps?C.NEAREST:C.LINEAR}function $t(tt){const Pe=tt.target;Pe.removeEventListener("dispose",$t),Nt(Pe),Pe.isVideoTexture&&re.delete(Pe)}function bn(tt){const Pe=tt.target;Pe.removeEventListener("dispose",bn),en(Pe)}function Nt(tt){const Pe=f.get(tt);if(Pe.__webglInit===void 0)return;const on=tt.source,Zt=se.get(on);if(Zt){const Gn=Zt[Pe.__cacheKey];Gn.usedTimes--,Gn.usedTimes===0&&Vt(tt),Object.keys(Zt).length===0&&se.delete(on)}f.remove(tt)}function Vt(tt){const Pe=f.get(tt);C.deleteTexture(Pe.__webglTexture);const on=tt.source,Zt=se.get(on);delete Zt[Pe.__cacheKey],B.memory.textures--}function en(tt){const Pe=tt.texture,on=f.get(tt),Zt=f.get(Pe);if(Zt.__webglTexture!==void 0&&(C.deleteTexture(Zt.__webglTexture),B.memory.textures--),tt.depthTexture&&tt.depthTexture.dispose(),tt.isWebGLCubeRenderTarget)for(let Gn=0;Gn<6;Gn++)C.deleteFramebuffer(on.__webglFramebuffer[Gn]),on.__webglDepthbuffer&&C.deleteRenderbuffer(on.__webglDepthbuffer[Gn]);else{if(C.deleteFramebuffer(on.__webglFramebuffer),on.__webglDepthbuffer&&C.deleteRenderbuffer(on.__webglDepthbuffer),on.__webglMultisampledFramebuffer&&C.deleteFramebuffer(on.__webglMultisampledFramebuffer),on.__webglColorRenderbuffer)for(let Gn=0;Gn<on.__webglColorRenderbuffer.length;Gn++)on.__webglColorRenderbuffer[Gn]&&C.deleteRenderbuffer(on.__webglColorRenderbuffer[Gn]);on.__webglDepthRenderbuffer&&C.deleteRenderbuffer(on.__webglDepthRenderbuffer)}if(tt.isWebGLMultipleRenderTargets)for(let Gn=0,sr=Pe.length;Gn<sr;Gn++){const Pr=f.get(Pe[Gn]);Pr.__webglTexture&&(C.deleteTexture(Pr.__webglTexture),B.memory.textures--),f.remove(Pe[Gn])}f.remove(Pe),f.remove(tt)}let Ht=0;function un(){Ht=0}function hn(){const tt=Ht;return tt>=k&&w.warn("THREE.WebGLTextures: Trying to use "+tt+" texture units while this GPU supports only "+k),Ht+=1,tt}function xn(tt){const Pe=[];return Pe.push(tt.wrapS),Pe.push(tt.wrapT),Pe.push(tt.wrapR||0),Pe.push(tt.magFilter),Pe.push(tt.minFilter),Pe.push(tt.anisotropy),Pe.push(tt.internalFormat),Pe.push(tt.format),Pe.push(tt.type),Pe.push(tt.generateMipmaps),Pe.push(tt.premultiplyAlpha),Pe.push(tt.flipY),Pe.push(tt.unpackAlignment),Pe.push(tt.colorSpace),Pe.join()}function mn(tt,Pe){const on=f.get(tt);if(tt.isVideoTexture&&eo(tt),tt.isRenderTargetTexture===!1&&tt.version>0&&on.__version!==tt.version){const Zt=tt.image;if(Zt===null)w.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Zt.complete===!1)w.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$i(on,tt,Pe);return}}l.bindTexture(C.TEXTURE_2D,on.__webglTexture,C.TEXTURE0+Pe)}function mt(tt,Pe){const on=f.get(tt);if(tt.version>0&&on.__version!==tt.version){$i(on,tt,Pe);return}l.bindTexture(C.TEXTURE_2D_ARRAY,on.__webglTexture,C.TEXTURE0+Pe)}function it(tt,Pe){const on=f.get(tt);if(tt.version>0&&on.__version!==tt.version){$i(on,tt,Pe);return}l.bindTexture(C.TEXTURE_3D,on.__webglTexture,C.TEXTURE0+Pe)}function ir(tt,Pe){const on=f.get(tt);if(tt.version>0&&on.__version!==tt.version){po(on,tt,Pe);return}l.bindTexture(C.TEXTURE_CUBE_MAP,on.__webglTexture,C.TEXTURE0+Pe)}const or={[Ko]:C.REPEAT,[Br]:C.CLAMP_TO_EDGE,[Ni]:C.MIRRORED_REPEAT},cr={[ki]:C.NEAREST,[la]:C.NEAREST_MIPMAP_NEAREST,[ps]:C.NEAREST_MIPMAP_LINEAR,[co]:C.LINEAR,[za]:C.LINEAR_MIPMAP_NEAREST,[ho]:C.LINEAR_MIPMAP_LINEAR},Lr={[Zf]:C.NEVER,[Pd]:C.ALWAYS,[Nu]:C.LESS,[Ys]:C.LEQUAL,[Dh]:C.EQUAL,[yp]:C.GEQUAL,[Hu]:C.GREATER,[ju]:C.NOTEQUAL};function Zr(tt,Pe,on){if(on?(C.texParameteri(tt,C.TEXTURE_WRAP_S,or[Pe.wrapS]),C.texParameteri(tt,C.TEXTURE_WRAP_T,or[Pe.wrapT]),(tt===C.TEXTURE_3D||tt===C.TEXTURE_2D_ARRAY)&&C.texParameteri(tt,C.TEXTURE_WRAP_R,or[Pe.wrapR]),C.texParameteri(tt,C.TEXTURE_MAG_FILTER,cr[Pe.magFilter]),C.texParameteri(tt,C.TEXTURE_MIN_FILTER,cr[Pe.minFilter])):(C.texParameteri(tt,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(tt,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),(tt===C.TEXTURE_3D||tt===C.TEXTURE_2D_ARRAY)&&C.texParameteri(tt,C.TEXTURE_WRAP_R,C.CLAMP_TO_EDGE),(Pe.wrapS!==Br||Pe.wrapT!==Br)&&w.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),C.texParameteri(tt,C.TEXTURE_MAG_FILTER,Ve(Pe.magFilter)),C.texParameteri(tt,C.TEXTURE_MIN_FILTER,Ve(Pe.minFilter)),Pe.minFilter!==ki&&Pe.minFilter!==co&&w.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Pe.compareFunction&&(C.texParameteri(tt,C.TEXTURE_COMPARE_MODE,C.COMPARE_REF_TO_TEXTURE),C.texParameteri(tt,C.TEXTURE_COMPARE_FUNC,Lr[Pe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Zt=e.get("EXT_texture_filter_anisotropic");if(Pe.magFilter===ki||Pe.minFilter!==ps&&Pe.minFilter!==ho||Pe.type===No&&e.has("OES_texture_float_linear")===!1||I===!1&&Pe.type===_a&&e.has("OES_texture_half_float_linear")===!1)return;(Pe.anisotropy>1||f.get(Pe).__currentAnisotropy)&&(C.texParameterf(tt,Zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Pe.anisotropy,v.getMaxAnisotropy())),f.get(Pe).__currentAnisotropy=Pe.anisotropy)}}function Vr(tt,Pe){let on=!1;tt.__webglInit===void 0&&(tt.__webglInit=!0,Pe.addEventListener("dispose",$t));const Zt=Pe.source;let Gn=se.get(Zt);Gn===void 0&&(Gn={},se.set(Zt,Gn));const sr=xn(Pe);if(sr!==tt.__cacheKey){Gn[sr]===void 0&&(Gn[sr]={texture:C.createTexture(),usedTimes:0},B.memory.textures++,on=!0),Gn[sr].usedTimes++;const Pr=Gn[tt.__cacheKey];Pr!==void 0&&(Gn[tt.__cacheKey].usedTimes--,Pr.usedTimes===0&&Vt(Pe)),tt.__cacheKey=sr,tt.__webglTexture=Gn[sr].texture}return on}function $i(tt,Pe,on){let Zt=C.TEXTURE_2D;(Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)&&(Zt=C.TEXTURE_2D_ARRAY),Pe.isData3DTexture&&(Zt=C.TEXTURE_3D);const Gn=Vr(tt,Pe),sr=Pe.source;l.bindTexture(Zt,tt.__webglTexture,C.TEXTURE0+on);const Pr=f.get(sr);if(sr.version!==Pr.__version||Gn===!0){l.activeTexture(C.TEXTURE0+on),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,Pe.flipY),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),C.pixelStorei(C.UNPACK_ALIGNMENT,Pe.unpackAlignment),C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE);const Un=Oe(Pe)&&Se(Pe.image)===!1;let Ft=he(Pe.image,Un,!1,X);Ft=Zo(Pe,Ft);const er=Se(Ft)||I,Nr=M.convert(Pe.format,Pe.colorSpace);let Qr=M.convert(Pe.type),vr=ht(Pe.internalFormat,Nr,Qr,Pe.colorSpace);Zr(Zt,Pe,er);let _r;const Ei=Pe.mipmaps,zo=I&&Pe.isVideoTexture!==!0,vt=Pr.__version===void 0||Gn===!0,Kn=we(Pe,Ft,er);if(Pe.isDepthTexture)vr=C.DEPTH_COMPONENT,I?Pe.type===No?vr=C.DEPTH_COMPONENT32F:Pe.type===ds?vr=C.DEPTH_COMPONENT24:Pe.type===Ea?vr=C.DEPTH24_STENCIL8:vr=C.DEPTH_COMPONENT16:Pe.type===No&&w.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Pe.format===Fn&&vr===C.DEPTH_COMPONENT&&Pe.type!==Xs&&Pe.type!==ds&&(w.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Pe.type=ds,Qr=M.convert(Pe.type)),Pe.format===On&&vr===C.DEPTH_COMPONENT&&(vr=C.DEPTH_STENCIL,Pe.type!==Ea&&(w.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Pe.type=Ea,Qr=M.convert(Pe.type))),vt&&(zo?l.texStorage2D(C.TEXTURE_2D,1,vr,Ft.width,Ft.height):l.texImage2D(C.TEXTURE_2D,0,vr,Ft.width,Ft.height,0,Nr,Qr,null));else if(Pe.isDataTexture)if(Ei.length>0&&er){zo&&vt&&l.texStorage2D(C.TEXTURE_2D,Kn,vr,Ei[0].width,Ei[0].height);for(let Kt=0,Vn=Ei.length;Kt<Vn;Kt++)_r=Ei[Kt],zo?l.texSubImage2D(C.TEXTURE_2D,Kt,0,0,_r.width,_r.height,Nr,Qr,_r.data):l.texImage2D(C.TEXTURE_2D,Kt,vr,_r.width,_r.height,0,Nr,Qr,_r.data);Pe.generateMipmaps=!1}else zo?(vt&&l.texStorage2D(C.TEXTURE_2D,Kn,vr,Ft.width,Ft.height),l.texSubImage2D(C.TEXTURE_2D,0,0,0,Ft.width,Ft.height,Nr,Qr,Ft.data)):l.texImage2D(C.TEXTURE_2D,0,vr,Ft.width,Ft.height,0,Nr,Qr,Ft.data);else if(Pe.isCompressedTexture)if(Pe.isCompressedArrayTexture){zo&&vt&&l.texStorage3D(C.TEXTURE_2D_ARRAY,Kn,vr,Ei[0].width,Ei[0].height,Ft.depth);for(let Kt=0,Vn=Ei.length;Kt<Vn;Kt++)_r=Ei[Kt],Pe.format!==$e?Nr!==null?zo?l.compressedTexSubImage3D(C.TEXTURE_2D_ARRAY,Kt,0,0,0,_r.width,_r.height,Ft.depth,Nr,_r.data,0,0):l.compressedTexImage3D(C.TEXTURE_2D_ARRAY,Kt,vr,_r.width,_r.height,Ft.depth,0,_r.data,0,0):w.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zo?l.texSubImage3D(C.TEXTURE_2D_ARRAY,Kt,0,0,0,_r.width,_r.height,Ft.depth,Nr,Qr,_r.data):l.texImage3D(C.TEXTURE_2D_ARRAY,Kt,vr,_r.width,_r.height,Ft.depth,0,Nr,Qr,_r.data)}else{zo&&vt&&l.texStorage2D(C.TEXTURE_2D,Kn,vr,Ei[0].width,Ei[0].height);for(let Kt=0,Vn=Ei.length;Kt<Vn;Kt++)_r=Ei[Kt],Pe.format!==$e?Nr!==null?zo?l.compressedTexSubImage2D(C.TEXTURE_2D,Kt,0,0,_r.width,_r.height,Nr,_r.data):l.compressedTexImage2D(C.TEXTURE_2D,Kt,vr,_r.width,_r.height,0,_r.data):w.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zo?l.texSubImage2D(C.TEXTURE_2D,Kt,0,0,_r.width,_r.height,Nr,Qr,_r.data):l.texImage2D(C.TEXTURE_2D,Kt,vr,_r.width,_r.height,0,Nr,Qr,_r.data)}else if(Pe.isDataArrayTexture)zo?(vt&&l.texStorage3D(C.TEXTURE_2D_ARRAY,Kn,vr,Ft.width,Ft.height,Ft.depth),l.texSubImage3D(C.TEXTURE_2D_ARRAY,0,0,0,0,Ft.width,Ft.height,Ft.depth,Nr,Qr,Ft.data)):l.texImage3D(C.TEXTURE_2D_ARRAY,0,vr,Ft.width,Ft.height,Ft.depth,0,Nr,Qr,Ft.data);else if(Pe.isData3DTexture)zo?(vt&&l.texStorage3D(C.TEXTURE_3D,Kn,vr,Ft.width,Ft.height,Ft.depth),l.texSubImage3D(C.TEXTURE_3D,0,0,0,0,Ft.width,Ft.height,Ft.depth,Nr,Qr,Ft.data)):l.texImage3D(C.TEXTURE_3D,0,vr,Ft.width,Ft.height,Ft.depth,0,Nr,Qr,Ft.data);else if(Pe.isFramebufferTexture){if(vt)if(zo)l.texStorage2D(C.TEXTURE_2D,Kn,vr,Ft.width,Ft.height);else{let Kt=Ft.width,Vn=Ft.height;for(let fr=0;fr<Kn;fr++)l.texImage2D(C.TEXTURE_2D,fr,vr,Kt,Vn,0,Nr,Qr,null),Kt>>=1,Vn>>=1}}else if(Ei.length>0&&er){zo&&vt&&l.texStorage2D(C.TEXTURE_2D,Kn,vr,Ei[0].width,Ei[0].height);for(let Kt=0,Vn=Ei.length;Kt<Vn;Kt++)_r=Ei[Kt],zo?l.texSubImage2D(C.TEXTURE_2D,Kt,0,0,Nr,Qr,_r):l.texImage2D(C.TEXTURE_2D,Kt,vr,Nr,Qr,_r);Pe.generateMipmaps=!1}else zo?(vt&&l.texStorage2D(C.TEXTURE_2D,Kn,vr,Ft.width,Ft.height),l.texSubImage2D(C.TEXTURE_2D,0,0,0,Nr,Qr,Ft)):l.texImage2D(C.TEXTURE_2D,0,vr,Nr,Qr,Ft);Qe(Pe,er)&&Ze(Zt),Pr.__version=sr.version,Pe.onUpdate&&Pe.onUpdate(Pe)}tt.__version=Pe.version}function po(tt,Pe,on){if(Pe.image.length!==6)return;const Zt=Vr(tt,Pe),Gn=Pe.source;l.bindTexture(C.TEXTURE_CUBE_MAP,tt.__webglTexture,C.TEXTURE0+on);const sr=f.get(Gn);if(Gn.version!==sr.__version||Zt===!0){l.activeTexture(C.TEXTURE0+on),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,Pe.flipY),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),C.pixelStorei(C.UNPACK_ALIGNMENT,Pe.unpackAlignment),C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE);const Pr=Pe.isCompressedTexture||Pe.image[0].isCompressedTexture,Un=Pe.image[0]&&Pe.image[0].isDataTexture,Ft=[];for(let Kt=0;Kt<6;Kt++)!Pr&&!Un?Ft[Kt]=he(Pe.image[Kt],!1,!0,N):Ft[Kt]=Un?Pe.image[Kt].image:Pe.image[Kt],Ft[Kt]=Zo(Pe,Ft[Kt]);const er=Ft[0],Nr=Se(er)||I,Qr=M.convert(Pe.format,Pe.colorSpace),vr=M.convert(Pe.type),_r=ht(Pe.internalFormat,Qr,vr,Pe.colorSpace),Ei=I&&Pe.isVideoTexture!==!0,zo=sr.__version===void 0||Zt===!0;let vt=we(Pe,er,Nr);Zr(C.TEXTURE_CUBE_MAP,Pe,Nr);let Kn;if(Pr){Ei&&zo&&l.texStorage2D(C.TEXTURE_CUBE_MAP,vt,_r,er.width,er.height);for(let Kt=0;Kt<6;Kt++){Kn=Ft[Kt].mipmaps;for(let Vn=0;Vn<Kn.length;Vn++){const fr=Kn[Vn];Pe.format!==$e?Qr!==null?Ei?l.compressedTexSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn,0,0,fr.width,fr.height,Qr,fr.data):l.compressedTexImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn,_r,fr.width,fr.height,0,fr.data):w.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ei?l.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn,0,0,fr.width,fr.height,Qr,vr,fr.data):l.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn,_r,fr.width,fr.height,0,Qr,vr,fr.data)}}}else{Kn=Pe.mipmaps,Ei&&zo&&(Kn.length>0&&vt++,l.texStorage2D(C.TEXTURE_CUBE_MAP,vt,_r,Ft[0].width,Ft[0].height));for(let Kt=0;Kt<6;Kt++)if(Un){Ei?l.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,0,0,0,Ft[Kt].width,Ft[Kt].height,Qr,vr,Ft[Kt].data):l.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,0,_r,Ft[Kt].width,Ft[Kt].height,0,Qr,vr,Ft[Kt].data);for(let Vn=0;Vn<Kn.length;Vn++){const so=Kn[Vn].image[Kt].image;Ei?l.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn+1,0,0,so.width,so.height,Qr,vr,so.data):l.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn+1,_r,so.width,so.height,0,Qr,vr,so.data)}}else{Ei?l.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,0,0,0,Qr,vr,Ft[Kt]):l.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,0,_r,Qr,vr,Ft[Kt]);for(let Vn=0;Vn<Kn.length;Vn++){const fr=Kn[Vn];Ei?l.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn+1,0,0,Qr,vr,fr.image[Kt]):l.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Kt,Vn+1,_r,Qr,vr,fr.image[Kt])}}}Qe(Pe,Nr)&&Ze(C.TEXTURE_CUBE_MAP),sr.__version=Gn.version,Pe.onUpdate&&Pe.onUpdate(Pe)}tt.__version=Pe.version}function Ar(tt,Pe,on,Zt,Gn){const sr=M.convert(on.format,on.colorSpace),Pr=M.convert(on.type),Un=ht(on.internalFormat,sr,Pr,on.colorSpace);f.get(Pe).__hasExternalTextures||(Gn===C.TEXTURE_3D||Gn===C.TEXTURE_2D_ARRAY?l.texImage3D(Gn,0,Un,Pe.width,Pe.height,Pe.depth,0,sr,Pr,null):l.texImage2D(Gn,0,Un,Pe.width,Pe.height,0,sr,Pr,null)),l.bindFramebuffer(C.FRAMEBUFFER,tt),_i(Pe)?$.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,Zt,Gn,f.get(on).__webglTexture,0,Tr(Pe)):(Gn===C.TEXTURE_2D||Gn>=C.TEXTURE_CUBE_MAP_POSITIVE_X&&Gn<=C.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&C.framebufferTexture2D(C.FRAMEBUFFER,Zt,Gn,f.get(on).__webglTexture,0),l.bindFramebuffer(C.FRAMEBUFFER,null)}function nt(tt,Pe,on){if(C.bindRenderbuffer(C.RENDERBUFFER,tt),Pe.depthBuffer&&!Pe.stencilBuffer){let Zt=C.DEPTH_COMPONENT16;if(on||_i(Pe)){const Gn=Pe.depthTexture;Gn&&Gn.isDepthTexture&&(Gn.type===No?Zt=C.DEPTH_COMPONENT32F:Gn.type===ds&&(Zt=C.DEPTH_COMPONENT24));const sr=Tr(Pe);_i(Pe)?$.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,sr,Zt,Pe.width,Pe.height):C.renderbufferStorageMultisample(C.RENDERBUFFER,sr,Zt,Pe.width,Pe.height)}else C.renderbufferStorage(C.RENDERBUFFER,Zt,Pe.width,Pe.height);C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,tt)}else if(Pe.depthBuffer&&Pe.stencilBuffer){const Zt=Tr(Pe);on&&_i(Pe)===!1?C.renderbufferStorageMultisample(C.RENDERBUFFER,Zt,C.DEPTH24_STENCIL8,Pe.width,Pe.height):_i(Pe)?$.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,Zt,C.DEPTH24_STENCIL8,Pe.width,Pe.height):C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_STENCIL,Pe.width,Pe.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.RENDERBUFFER,tt)}else{const Zt=Pe.isWebGLMultipleRenderTargets===!0?Pe.texture:[Pe.texture];for(let Gn=0;Gn<Zt.length;Gn++){const sr=Zt[Gn],Pr=M.convert(sr.format,sr.colorSpace),Un=M.convert(sr.type),Ft=ht(sr.internalFormat,Pr,Un,sr.colorSpace),er=Tr(Pe);on&&_i(Pe)===!1?C.renderbufferStorageMultisample(C.RENDERBUFFER,er,Ft,Pe.width,Pe.height):_i(Pe)?$.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,er,Ft,Pe.width,Pe.height):C.renderbufferStorage(C.RENDERBUFFER,Ft,Pe.width,Pe.height)}}C.bindRenderbuffer(C.RENDERBUFFER,null)}function Zn(tt,Pe){if(Pe&&Pe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(l.bindFramebuffer(C.FRAMEBUFFER,tt),!(Pe.depthTexture&&Pe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!f.get(Pe.depthTexture).__webglTexture||Pe.depthTexture.image.width!==Pe.width||Pe.depthTexture.image.height!==Pe.height)&&(Pe.depthTexture.image.width=Pe.width,Pe.depthTexture.image.height=Pe.height,Pe.depthTexture.needsUpdate=!0),mn(Pe.depthTexture,0);const Zt=f.get(Pe.depthTexture).__webglTexture,Gn=Tr(Pe);if(Pe.depthTexture.format===Fn)_i(Pe)?$.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,Zt,0,Gn):C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,Zt,0);else if(Pe.depthTexture.format===On)_i(Pe)?$.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,Zt,0,Gn):C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,Zt,0);else throw new Error("Unknown depthTexture format")}function dn(tt){const Pe=f.get(tt),on=tt.isWebGLCubeRenderTarget===!0;if(tt.depthTexture&&!Pe.__autoAllocateDepthBuffer){if(on)throw new Error("target.depthTexture not supported in Cube render targets");Zn(Pe.__webglFramebuffer,tt)}else if(on){Pe.__webglDepthbuffer=[];for(let Zt=0;Zt<6;Zt++)l.bindFramebuffer(C.FRAMEBUFFER,Pe.__webglFramebuffer[Zt]),Pe.__webglDepthbuffer[Zt]=C.createRenderbuffer(),nt(Pe.__webglDepthbuffer[Zt],tt,!1)}else l.bindFramebuffer(C.FRAMEBUFFER,Pe.__webglFramebuffer),Pe.__webglDepthbuffer=C.createRenderbuffer(),nt(Pe.__webglDepthbuffer,tt,!1);l.bindFramebuffer(C.FRAMEBUFFER,null)}function zn(tt,Pe,on){const Zt=f.get(tt);Pe!==void 0&&Ar(Zt.__webglFramebuffer,tt,tt.texture,C.COLOR_ATTACHMENT0,C.TEXTURE_2D),on!==void 0&&dn(tt)}function _n(tt){const Pe=tt.texture,on=f.get(tt),Zt=f.get(Pe);tt.addEventListener("dispose",bn),tt.isWebGLMultipleRenderTargets!==!0&&(Zt.__webglTexture===void 0&&(Zt.__webglTexture=C.createTexture()),Zt.__version=Pe.version,B.memory.textures++);const Gn=tt.isWebGLCubeRenderTarget===!0,sr=tt.isWebGLMultipleRenderTargets===!0,Pr=Se(tt)||I;if(Gn){on.__webglFramebuffer=[];for(let Un=0;Un<6;Un++)on.__webglFramebuffer[Un]=C.createFramebuffer()}else{if(on.__webglFramebuffer=C.createFramebuffer(),sr)if(v.drawBuffers){const Un=tt.texture;for(let Ft=0,er=Un.length;Ft<er;Ft++){const Nr=f.get(Un[Ft]);Nr.__webglTexture===void 0&&(Nr.__webglTexture=C.createTexture(),B.memory.textures++)}}else w.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(I&&tt.samples>0&&_i(tt)===!1){const Un=sr?Pe:[Pe];on.__webglMultisampledFramebuffer=C.createFramebuffer(),on.__webglColorRenderbuffer=[],l.bindFramebuffer(C.FRAMEBUFFER,on.__webglMultisampledFramebuffer);for(let Ft=0;Ft<Un.length;Ft++){const er=Un[Ft];on.__webglColorRenderbuffer[Ft]=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,on.__webglColorRenderbuffer[Ft]);const Nr=M.convert(er.format,er.colorSpace),Qr=M.convert(er.type),vr=ht(er.internalFormat,Nr,Qr,er.colorSpace,tt.isXRRenderTarget===!0),_r=Tr(tt);C.renderbufferStorageMultisample(C.RENDERBUFFER,_r,vr,tt.width,tt.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+Ft,C.RENDERBUFFER,on.__webglColorRenderbuffer[Ft])}C.bindRenderbuffer(C.RENDERBUFFER,null),tt.depthBuffer&&(on.__webglDepthRenderbuffer=C.createRenderbuffer(),nt(on.__webglDepthRenderbuffer,tt,!0)),l.bindFramebuffer(C.FRAMEBUFFER,null)}}if(Gn){l.bindTexture(C.TEXTURE_CUBE_MAP,Zt.__webglTexture),Zr(C.TEXTURE_CUBE_MAP,Pe,Pr);for(let Un=0;Un<6;Un++)Ar(on.__webglFramebuffer[Un],tt,Pe,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+Un);Qe(Pe,Pr)&&Ze(C.TEXTURE_CUBE_MAP),l.unbindTexture()}else if(sr){const Un=tt.texture;for(let Ft=0,er=Un.length;Ft<er;Ft++){const Nr=Un[Ft],Qr=f.get(Nr);l.bindTexture(C.TEXTURE_2D,Qr.__webglTexture),Zr(C.TEXTURE_2D,Nr,Pr),Ar(on.__webglFramebuffer,tt,Nr,C.COLOR_ATTACHMENT0+Ft,C.TEXTURE_2D),Qe(Nr,Pr)&&Ze(C.TEXTURE_2D)}l.unbindTexture()}else{let Un=C.TEXTURE_2D;(tt.isWebGL3DRenderTarget||tt.isWebGLArrayRenderTarget)&&(I?Un=tt.isWebGL3DRenderTarget?C.TEXTURE_3D:C.TEXTURE_2D_ARRAY:w.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),l.bindTexture(Un,Zt.__webglTexture),Zr(Un,Pe,Pr),Ar(on.__webglFramebuffer,tt,Pe,C.COLOR_ATTACHMENT0,Un),Qe(Pe,Pr)&&Ze(Un),l.unbindTexture()}tt.depthBuffer&&dn(tt)}function Ur(tt){const Pe=Se(tt)||I,on=tt.isWebGLMultipleRenderTargets===!0?tt.texture:[tt.texture];for(let Zt=0,Gn=on.length;Zt<Gn;Zt++){const sr=on[Zt];if(Qe(sr,Pe)){const Pr=tt.isWebGLCubeRenderTarget?C.TEXTURE_CUBE_MAP:C.TEXTURE_2D,Un=f.get(sr).__webglTexture;l.bindTexture(Pr,Un),Ze(Pr),l.unbindTexture()}}}function xr(tt){if(I&&tt.samples>0&&_i(tt)===!1){const Pe=tt.isWebGLMultipleRenderTargets?tt.texture:[tt.texture],on=tt.width,Zt=tt.height;let Gn=C.COLOR_BUFFER_BIT;const sr=[],Pr=tt.stencilBuffer?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,Un=f.get(tt),Ft=tt.isWebGLMultipleRenderTargets===!0;if(Ft)for(let er=0;er<Pe.length;er++)l.bindFramebuffer(C.FRAMEBUFFER,Un.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+er,C.RENDERBUFFER,null),l.bindFramebuffer(C.FRAMEBUFFER,Un.__webglFramebuffer),C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0+er,C.TEXTURE_2D,null,0);l.bindFramebuffer(C.READ_FRAMEBUFFER,Un.__webglMultisampledFramebuffer),l.bindFramebuffer(C.DRAW_FRAMEBUFFER,Un.__webglFramebuffer);for(let er=0;er<Pe.length;er++){sr.push(C.COLOR_ATTACHMENT0+er),tt.depthBuffer&&sr.push(Pr);const Nr=Un.__ignoreDepthValues!==void 0?Un.__ignoreDepthValues:!1;if(Nr===!1&&(tt.depthBuffer&&(Gn|=C.DEPTH_BUFFER_BIT),tt.stencilBuffer&&(Gn|=C.STENCIL_BUFFER_BIT)),Ft&&C.framebufferRenderbuffer(C.READ_FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,Un.__webglColorRenderbuffer[er]),Nr===!0&&(C.invalidateFramebuffer(C.READ_FRAMEBUFFER,[Pr]),C.invalidateFramebuffer(C.DRAW_FRAMEBUFFER,[Pr])),Ft){const Qr=f.get(Pe[er]).__webglTexture;C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,Qr,0)}C.blitFramebuffer(0,0,on,Zt,0,0,on,Zt,Gn,C.NEAREST),J&&C.invalidateFramebuffer(C.READ_FRAMEBUFFER,sr)}if(l.bindFramebuffer(C.READ_FRAMEBUFFER,null),l.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),Ft)for(let er=0;er<Pe.length;er++){l.bindFramebuffer(C.FRAMEBUFFER,Un.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+er,C.RENDERBUFFER,Un.__webglColorRenderbuffer[er]);const Nr=f.get(Pe[er]).__webglTexture;l.bindFramebuffer(C.FRAMEBUFFER,Un.__webglFramebuffer),C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0+er,C.TEXTURE_2D,Nr,0)}l.bindFramebuffer(C.DRAW_FRAMEBUFFER,Un.__webglMultisampledFramebuffer)}}function Tr(tt){return Math.min(Z,tt.samples)}function _i(tt){const Pe=f.get(tt);return I&&tt.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Pe.__useRenderToTexture!==!1}function eo(tt){const Pe=B.render.frame;re.get(tt)!==Pe&&(re.set(tt,Pe),tt.update())}function Zo(tt,Pe){const on=tt.colorSpace,Zt=tt.format,Gn=tt.type;return tt.isCompressedTexture===!0||tt.format===fs||on!==oc&&on!==ic&&(on===ui?I===!1?e.has("EXT_sRGB")===!0&&Zt===$e?(tt.format=fs,tt.minFilter=co,tt.generateMipmaps=!1):Pe=cc.sRGBToLinear(Pe):(Zt!==$e||Gn!==Fo)&&w.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):w.error("THREE.WebGLTextures: Unsupported texture color space:",on)),Pe}this.allocateTextureUnit=hn,this.resetTextureUnits=un,this.setTexture2D=mn,this.setTexture2DArray=mt,this.setTexture3D=it,this.setTextureCube=ir,this.rebindTextures=zn,this.setupRenderTarget=_n,this.updateRenderTargetMipmap=Ur,this.updateMultisampleRenderTarget=xr,this.setupDepthRenderbuffer=dn,this.setupFrameBufferTexture=Ar,this.useMultisampledRTT=_i}function Yy(C,e,l){const f=l.isWebGL2;function v(M,B=ic){let I;if(M===Fo)return C.UNSIGNED_BYTE;if(M===ll)return C.UNSIGNED_SHORT_4_4_4_4;if(M===gc)return C.UNSIGNED_SHORT_5_5_5_1;if(M===ks)return C.BYTE;if(M===ca)return C.SHORT;if(M===Xs)return C.UNSIGNED_SHORT;if(M===Oo)return C.INT;if(M===ds)return C.UNSIGNED_INT;if(M===No)return C.FLOAT;if(M===_a)return f?C.HALF_FLOAT:(I=e.get("OES_texture_half_float"),I!==null?I.HALF_FLOAT_OES:null);if(M===fp)return C.ALPHA;if(M===$e)return C.RGBA;if(M===wt)return C.LUMINANCE;if(M===cn)return C.LUMINANCE_ALPHA;if(M===Fn)return C.DEPTH_COMPONENT;if(M===On)return C.DEPTH_STENCIL;if(M===fs)return I=e.get("EXT_sRGB"),I!==null?I.SRGB_ALPHA_EXT:null;if(M===lr)return C.RED;if(M===He)return C.RED_INTEGER;if(M===ke)return C.RG;if(M===Fe)return C.RG_INTEGER;if(M===at)return C.RGBA_INTEGER;if(M===De||M===et||M===dt||M===bt)if(B===ui)if(I=e.get("WEBGL_compressed_texture_s3tc_srgb"),I!==null){if(M===De)return I.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(M===et)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(M===dt)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(M===bt)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(I=e.get("WEBGL_compressed_texture_s3tc"),I!==null){if(M===De)return I.COMPRESSED_RGB_S3TC_DXT1_EXT;if(M===et)return I.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(M===dt)return I.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(M===bt)return I.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(M===Tt||M===pn||M===ln||M===Me)if(I=e.get("WEBGL_compressed_texture_pvrtc"),I!==null){if(M===Tt)return I.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(M===pn)return I.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(M===ln)return I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(M===Me)return I.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(M===je)return I=e.get("WEBGL_compressed_texture_etc1"),I!==null?I.COMPRESSED_RGB_ETC1_WEBGL:null;if(M===lt||M===qt)if(I=e.get("WEBGL_compressed_texture_etc"),I!==null){if(M===lt)return B===ui?I.COMPRESSED_SRGB8_ETC2:I.COMPRESSED_RGB8_ETC2;if(M===qt)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:I.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(M===Cn||M===kn||M===mr||M===Hr||M===pi||M===gi||M===Qn||M===qr||M===Hi||M===Vi||M===zi||M===pa||M===mo||M===hs)if(I=e.get("WEBGL_compressed_texture_astc"),I!==null){if(M===Cn)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:I.COMPRESSED_RGBA_ASTC_4x4_KHR;if(M===kn)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:I.COMPRESSED_RGBA_ASTC_5x4_KHR;if(M===mr)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:I.COMPRESSED_RGBA_ASTC_5x5_KHR;if(M===Hr)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:I.COMPRESSED_RGBA_ASTC_6x5_KHR;if(M===pi)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:I.COMPRESSED_RGBA_ASTC_6x6_KHR;if(M===gi)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:I.COMPRESSED_RGBA_ASTC_8x5_KHR;if(M===Qn)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:I.COMPRESSED_RGBA_ASTC_8x6_KHR;if(M===qr)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:I.COMPRESSED_RGBA_ASTC_8x8_KHR;if(M===Hi)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:I.COMPRESSED_RGBA_ASTC_10x5_KHR;if(M===Vi)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:I.COMPRESSED_RGBA_ASTC_10x6_KHR;if(M===zi)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:I.COMPRESSED_RGBA_ASTC_10x8_KHR;if(M===pa)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:I.COMPRESSED_RGBA_ASTC_10x10_KHR;if(M===mo)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:I.COMPRESSED_RGBA_ASTC_12x10_KHR;if(M===hs)return B===ui?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:I.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(M===cl)if(I=e.get("EXT_texture_compression_bptc"),I!==null){if(M===cl)return B===ui?I.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:I.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(M===ws||M===ro||M===ns||M===zs)if(I=e.get("EXT_texture_compression_rgtc"),I!==null){if(M===cl)return I.COMPRESSED_RED_RGTC1_EXT;if(M===ro)return I.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(M===ns)return I.COMPRESSED_RED_GREEN_RGTC2_EXT;if(M===zs)return I.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return M===Ea?f?C.UNSIGNED_INT_24_8:(I=e.get("WEBGL_depth_texture"),I!==null?I.UNSIGNED_INT_24_8_WEBGL:null):C[M]!==void 0?C[M]:null}return{convert:v}}class df extends Gi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class hf extends Ti{constructor(){super(),this.isGroup=!0,this.type="Group"}}const d3={type:"move"};class R1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Xe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Xe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const l=this._hand;if(l)for(const f of e.hand.values())this._getHandJoint(l,f)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,l,f){let v=null,M=null,B=null;const I=this._targetRay,k=this._grip,N=this._hand;if(e&&l.session.visibilityState!=="visible-blurred"){if(N&&e.hand){B=!0;for(const fe of e.hand.values()){const se=l.getJointPose(fe,f),ne=this._getHandJoint(N,fe);se!==null&&(ne.matrix.fromArray(se.transform.matrix),ne.matrix.decompose(ne.position,ne.rotation,ne.scale),ne.matrixWorldNeedsUpdate=!0,ne.jointRadius=se.radius),ne.visible=se!==null}const X=N.joints["index-finger-tip"],Z=N.joints["thumb-tip"],$=X.position.distanceTo(Z.position),J=.02,re=.005;N.inputState.pinching&&$>J+re?(N.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!N.inputState.pinching&&$<=J-re&&(N.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else k!==null&&e.gripSpace&&(M=l.getPose(e.gripSpace,f),M!==null&&(k.matrix.fromArray(M.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.matrixWorldNeedsUpdate=!0,M.linearVelocity?(k.hasLinearVelocity=!0,k.linearVelocity.copy(M.linearVelocity)):k.hasLinearVelocity=!1,M.angularVelocity?(k.hasAngularVelocity=!0,k.angularVelocity.copy(M.angularVelocity)):k.hasAngularVelocity=!1));I!==null&&(v=l.getPose(e.targetRaySpace,f),v===null&&M!==null&&(v=M),v!==null&&(I.matrix.fromArray(v.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.matrixWorldNeedsUpdate=!0,v.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(v.linearVelocity)):I.hasLinearVelocity=!1,v.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(v.angularVelocity)):I.hasAngularVelocity=!1,this.dispatchEvent(d3)))}return I!==null&&(I.visible=v!==null),k!==null&&(k.visible=M!==null),N!==null&&(N.visible=B!==null),this}_getHandJoint(e,l){if(e.joints[l.jointName]===void 0){const f=new hf;f.matrixAutoUpdate=!1,f.visible=!1,e.joints[l.jointName]=f,e.add(f)}return e.joints[l.jointName]}}class I1 extends io{constructor(e,l,f,v,M,B,I,k,N,X){if(X=X!==void 0?X:Fn,X!==Fn&&X!==On)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");f===void 0&&X===Fn&&(f=ds),f===void 0&&X===On&&(f=Ea),super(null,v,M,B,I,k,X,f,N),this.isDepthTexture=!0,this.image={width:e,height:l},this.magFilter=I!==void 0?I:ki,this.minFilter=k!==void 0?k:ki,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const l=super.toJSON(e);return this.compareFunction!==null&&(l.compareFunction=this.compareFunction),l}}class h3 extends Ma{constructor(e,l){super();const f=this;let v=null,M=1,B=null,I="local-floor",k=1,N=null,X=null,Z=null,$=null,J=null,re=null;const fe=l.getContextAttributes();let se=null,ne=null;const be=[],he=[],Se=new Gi;Se.layers.enable(1),Se.viewport=new Ji;const Oe=new Gi;Oe.layers.enable(2),Oe.viewport=new Ji;const Qe=[Se,Oe],Ze=new df;Ze.layers.enable(1),Ze.layers.enable(2);let ht=null,we=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(mt){let it=be[mt];return it===void 0&&(it=new R1,be[mt]=it),it.getTargetRaySpace()},this.getControllerGrip=function(mt){let it=be[mt];return it===void 0&&(it=new R1,be[mt]=it),it.getGripSpace()},this.getHand=function(mt){let it=be[mt];return it===void 0&&(it=new R1,be[mt]=it),it.getHandSpace()};function Ve(mt){const it=he.indexOf(mt.inputSource);if(it===-1)return;const ir=be[it];ir!==void 0&&(ir.update(mt.inputSource,mt.frame,N||B),ir.dispatchEvent({type:mt.type,data:mt.inputSource}))}function $t(){v.removeEventListener("select",Ve),v.removeEventListener("selectstart",Ve),v.removeEventListener("selectend",Ve),v.removeEventListener("squeeze",Ve),v.removeEventListener("squeezestart",Ve),v.removeEventListener("squeezeend",Ve),v.removeEventListener("end",$t),v.removeEventListener("inputsourceschange",bn);for(let mt=0;mt<be.length;mt++){const it=he[mt];it!==null&&(he[mt]=null,be[mt].disconnect(it))}ht=null,we=null,e.setRenderTarget(se),J=null,$=null,Z=null,v=null,ne=null,mn.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(mt){M=mt,f.isPresenting===!0&&w.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(mt){I=mt,f.isPresenting===!0&&w.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return N||B},this.setReferenceSpace=function(mt){N=mt},this.getBaseLayer=function(){return $!==null?$:J},this.getBinding=function(){return Z},this.getFrame=function(){return re},this.getSession=function(){return v},this.setSession=function(mt){return es(this,null,function*(){if(v=mt,v!==null){if(se=e.getRenderTarget(),v.addEventListener("select",Ve),v.addEventListener("selectstart",Ve),v.addEventListener("selectend",Ve),v.addEventListener("squeeze",Ve),v.addEventListener("squeezestart",Ve),v.addEventListener("squeezeend",Ve),v.addEventListener("end",$t),v.addEventListener("inputsourceschange",bn),fe.xrCompatible!==!0&&(yield l.makeXRCompatible()),v.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const it={antialias:v.renderState.layers===void 0?fe.antialias:!0,alpha:!0,depth:fe.depth,stencil:fe.stencil,framebufferScaleFactor:M};J=new XRWebGLLayer(v,l,it),v.updateRenderState({baseLayer:J}),ne=new qs(J.framebufferWidth,J.framebufferHeight,{format:$e,type:Fo,colorSpace:e.outputColorSpace,stencilBuffer:fe.stencil})}else{let it=null,ir=null,or=null;fe.depth&&(or=fe.stencil?l.DEPTH24_STENCIL8:l.DEPTH_COMPONENT24,it=fe.stencil?On:Fn,ir=fe.stencil?Ea:ds);const cr={colorFormat:l.RGBA8,depthFormat:or,scaleFactor:M};Z=new XRWebGLBinding(v,l),$=Z.createProjectionLayer(cr),v.updateRenderState({layers:[$]}),ne=new qs($.textureWidth,$.textureHeight,{format:$e,type:Fo,depthTexture:new I1($.textureWidth,$.textureHeight,ir,void 0,void 0,void 0,void 0,void 0,void 0,it),stencilBuffer:fe.stencil,colorSpace:e.outputColorSpace,samples:fe.antialias?4:0});const Lr=e.properties.get(ne);Lr.__ignoreDepthValues=$.ignoreDepthValues}ne.isXRRenderTarget=!0,this.setFoveation(k),N=null,B=yield v.requestReferenceSpace(I),mn.setContext(v),mn.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(v!==null)return v.environmentBlendMode};function bn(mt){for(let it=0;it<mt.removed.length;it++){const ir=mt.removed[it],or=he.indexOf(ir);or>=0&&(he[or]=null,be[or].disconnect(ir))}for(let it=0;it<mt.added.length;it++){const ir=mt.added[it];let or=he.indexOf(ir);if(or===-1){for(let Lr=0;Lr<be.length;Lr++)if(Lr>=he.length){he.push(ir),or=Lr;break}else if(he[Lr]===null){he[Lr]=ir,or=Lr;break}if(or===-1)break}const cr=be[or];cr&&cr.connect(ir)}}const Nt=new Xe,Vt=new Xe;function en(mt,it,ir){Nt.setFromMatrixPosition(it.matrixWorld),Vt.setFromMatrixPosition(ir.matrixWorld);const or=Nt.distanceTo(Vt),cr=it.projectionMatrix.elements,Lr=ir.projectionMatrix.elements,Zr=cr[14]/(cr[10]-1),Vr=cr[14]/(cr[10]+1),$i=(cr[9]+1)/cr[5],po=(cr[9]-1)/cr[5],Ar=(cr[8]-1)/cr[0],nt=(Lr[8]+1)/Lr[0],Zn=Zr*Ar,dn=Zr*nt,zn=or/(-Ar+nt),_n=zn*-Ar;it.matrixWorld.decompose(mt.position,mt.quaternion,mt.scale),mt.translateX(_n),mt.translateZ(zn),mt.matrixWorld.compose(mt.position,mt.quaternion,mt.scale),mt.matrixWorldInverse.copy(mt.matrixWorld).invert();const Ur=Zr+zn,xr=Vr+zn,Tr=Zn-_n,_i=dn+(or-_n),eo=$i*Vr/xr*Ur,Zo=po*Vr/xr*Ur;mt.projectionMatrix.makePerspective(Tr,_i,eo,Zo,Ur,xr),mt.projectionMatrixInverse.copy(mt.projectionMatrix).invert()}function Ht(mt,it){it===null?mt.matrixWorld.copy(mt.matrix):mt.matrixWorld.multiplyMatrices(it.matrixWorld,mt.matrix),mt.matrixWorldInverse.copy(mt.matrixWorld).invert()}this.updateCamera=function(mt){if(v===null)return;Ze.near=Oe.near=Se.near=mt.near,Ze.far=Oe.far=Se.far=mt.far,(ht!==Ze.near||we!==Ze.far)&&(v.updateRenderState({depthNear:Ze.near,depthFar:Ze.far}),ht=Ze.near,we=Ze.far);const it=mt.parent,ir=Ze.cameras;Ht(Ze,it);for(let or=0;or<ir.length;or++)Ht(ir[or],it);ir.length===2?en(Ze,Se,Oe):Ze.projectionMatrix.copy(Se.projectionMatrix),un(mt,Ze,it)};function un(mt,it,ir){ir===null?mt.matrix.copy(it.matrixWorld):(mt.matrix.copy(ir.matrixWorld),mt.matrix.invert(),mt.matrix.multiply(it.matrixWorld)),mt.matrix.decompose(mt.position,mt.quaternion,mt.scale),mt.updateMatrixWorld(!0);const or=mt.children;for(let cr=0,Lr=or.length;cr<Lr;cr++)or[cr].updateMatrixWorld(!0);mt.projectionMatrix.copy(it.projectionMatrix),mt.projectionMatrixInverse.copy(it.projectionMatrixInverse),mt.isPerspectiveCamera&&(mt.fov=vc*2*Math.atan(1/mt.projectionMatrix.elements[5]),mt.zoom=1)}this.getCamera=function(){return Ze},this.getFoveation=function(){if(!($===null&&J===null))return k},this.setFoveation=function(mt){k=mt,$!==null&&($.fixedFoveation=mt),J!==null&&J.fixedFoveation!==void 0&&(J.fixedFoveation=mt)};let hn=null;function xn(mt,it){if(X=it.getViewerPose(N||B),re=it,X!==null){const ir=X.views;J!==null&&(e.setRenderTargetFramebuffer(ne,J.framebuffer),e.setRenderTarget(ne));let or=!1;ir.length!==Ze.cameras.length&&(Ze.cameras.length=0,or=!0);for(let cr=0;cr<ir.length;cr++){const Lr=ir[cr];let Zr=null;if(J!==null)Zr=J.getViewport(Lr);else{const $i=Z.getViewSubImage($,Lr);Zr=$i.viewport,cr===0&&(e.setRenderTargetTextures(ne,$i.colorTexture,$.ignoreDepthValues?void 0:$i.depthStencilTexture),e.setRenderTarget(ne))}let Vr=Qe[cr];Vr===void 0&&(Vr=new Gi,Vr.layers.enable(cr),Vr.viewport=new Ji,Qe[cr]=Vr),Vr.matrix.fromArray(Lr.transform.matrix),Vr.matrix.decompose(Vr.position,Vr.quaternion,Vr.scale),Vr.projectionMatrix.fromArray(Lr.projectionMatrix),Vr.projectionMatrixInverse.copy(Vr.projectionMatrix).invert(),Vr.viewport.set(Zr.x,Zr.y,Zr.width,Zr.height),cr===0&&(Ze.matrix.copy(Vr.matrix),Ze.matrix.decompose(Ze.position,Ze.quaternion,Ze.scale)),or===!0&&Ze.cameras.push(Vr)}}for(let ir=0;ir<be.length;ir++){const or=he[ir],cr=be[ir];or!==null&&cr!==void 0&&cr.update(or,it,N||B)}hn&&hn(mt,it),it.detectedPlanes&&f.dispatchEvent({type:"planesdetected",data:it}),re=null}const mn=new Ic;mn.setAnimationLoop(xn),this.setAnimationLoop=function(mt){hn=mt},this.dispose=function(){}}}function f3(C,e){function l(se,ne){se.matrixAutoUpdate===!0&&se.updateMatrix(),ne.value.copy(se.matrix)}function f(se,ne){ne.color.getRGB(se.fogColor.value,Jh(C)),ne.isFog?(se.fogNear.value=ne.near,se.fogFar.value=ne.far):ne.isFogExp2&&(se.fogDensity.value=ne.density)}function v(se,ne,be,he,Se){ne.isMeshBasicMaterial||ne.isMeshLambertMaterial?M(se,ne):ne.isMeshToonMaterial?(M(se,ne),Z(se,ne)):ne.isMeshPhongMaterial?(M(se,ne),X(se,ne)):ne.isMeshStandardMaterial?(M(se,ne),$(se,ne),ne.isMeshPhysicalMaterial&&J(se,ne,Se)):ne.isMeshMatcapMaterial?(M(se,ne),re(se,ne)):ne.isMeshDepthMaterial?M(se,ne):ne.isMeshDistanceMaterial?(M(se,ne),fe(se,ne)):ne.isMeshNormalMaterial?M(se,ne):ne.isLineBasicMaterial?(B(se,ne),ne.isLineDashedMaterial&&I(se,ne)):ne.isPointsMaterial?k(se,ne,be,he):ne.isSpriteMaterial?N(se,ne):ne.isShadowMaterial?(se.color.value.copy(ne.color),se.opacity.value=ne.opacity):ne.isShaderMaterial&&(ne.uniformsNeedUpdate=!1)}function M(se,ne){se.opacity.value=ne.opacity,ne.color&&se.diffuse.value.copy(ne.color),ne.emissive&&se.emissive.value.copy(ne.emissive).multiplyScalar(ne.emissiveIntensity),ne.map&&(se.map.value=ne.map,l(ne.map,se.mapTransform)),ne.alphaMap&&(se.alphaMap.value=ne.alphaMap,l(ne.alphaMap,se.alphaMapTransform)),ne.bumpMap&&(se.bumpMap.value=ne.bumpMap,l(ne.bumpMap,se.bumpMapTransform),se.bumpScale.value=ne.bumpScale,ne.side===We&&(se.bumpScale.value*=-1)),ne.normalMap&&(se.normalMap.value=ne.normalMap,l(ne.normalMap,se.normalMapTransform),se.normalScale.value.copy(ne.normalScale),ne.side===We&&se.normalScale.value.negate()),ne.displacementMap&&(se.displacementMap.value=ne.displacementMap,l(ne.displacementMap,se.displacementMapTransform),se.displacementScale.value=ne.displacementScale,se.displacementBias.value=ne.displacementBias),ne.emissiveMap&&(se.emissiveMap.value=ne.emissiveMap,l(ne.emissiveMap,se.emissiveMapTransform)),ne.specularMap&&(se.specularMap.value=ne.specularMap,l(ne.specularMap,se.specularMapTransform)),ne.alphaTest>0&&(se.alphaTest.value=ne.alphaTest);const be=e.get(ne).envMap;if(be&&(se.envMap.value=be,se.flipEnvMap.value=be.isCubeTexture&&be.isRenderTargetTexture===!1?-1:1,se.reflectivity.value=ne.reflectivity,se.ior.value=ne.ior,se.refractionRatio.value=ne.refractionRatio),ne.lightMap){se.lightMap.value=ne.lightMap;const he=C.useLegacyLights===!0?Math.PI:1;se.lightMapIntensity.value=ne.lightMapIntensity*he,l(ne.lightMap,se.lightMapTransform)}ne.aoMap&&(se.aoMap.value=ne.aoMap,se.aoMapIntensity.value=ne.aoMapIntensity,l(ne.aoMap,se.aoMapTransform))}function B(se,ne){se.diffuse.value.copy(ne.color),se.opacity.value=ne.opacity,ne.map&&(se.map.value=ne.map,l(ne.map,se.mapTransform))}function I(se,ne){se.dashSize.value=ne.dashSize,se.totalSize.value=ne.dashSize+ne.gapSize,se.scale.value=ne.scale}function k(se,ne,be,he){se.diffuse.value.copy(ne.color),se.opacity.value=ne.opacity,se.size.value=ne.size*be,se.scale.value=he*.5,ne.map&&(se.map.value=ne.map,l(ne.map,se.uvTransform)),ne.alphaMap&&(se.alphaMap.value=ne.alphaMap,l(ne.alphaMap,se.alphaMapTransform)),ne.alphaTest>0&&(se.alphaTest.value=ne.alphaTest)}function N(se,ne){se.diffuse.value.copy(ne.color),se.opacity.value=ne.opacity,se.rotation.value=ne.rotation,ne.map&&(se.map.value=ne.map,l(ne.map,se.mapTransform)),ne.alphaMap&&(se.alphaMap.value=ne.alphaMap,l(ne.alphaMap,se.alphaMapTransform)),ne.alphaTest>0&&(se.alphaTest.value=ne.alphaTest)}function X(se,ne){se.specular.value.copy(ne.specular),se.shininess.value=Math.max(ne.shininess,1e-4)}function Z(se,ne){ne.gradientMap&&(se.gradientMap.value=ne.gradientMap)}function $(se,ne){se.metalness.value=ne.metalness,ne.metalnessMap&&(se.metalnessMap.value=ne.metalnessMap,l(ne.metalnessMap,se.metalnessMapTransform)),se.roughness.value=ne.roughness,ne.roughnessMap&&(se.roughnessMap.value=ne.roughnessMap,l(ne.roughnessMap,se.roughnessMapTransform)),e.get(ne).envMap&&(se.envMapIntensity.value=ne.envMapIntensity)}function J(se,ne,be){se.ior.value=ne.ior,ne.sheen>0&&(se.sheenColor.value.copy(ne.sheenColor).multiplyScalar(ne.sheen),se.sheenRoughness.value=ne.sheenRoughness,ne.sheenColorMap&&(se.sheenColorMap.value=ne.sheenColorMap,l(ne.sheenColorMap,se.sheenColorMapTransform)),ne.sheenRoughnessMap&&(se.sheenRoughnessMap.value=ne.sheenRoughnessMap,l(ne.sheenRoughnessMap,se.sheenRoughnessMapTransform))),ne.clearcoat>0&&(se.clearcoat.value=ne.clearcoat,se.clearcoatRoughness.value=ne.clearcoatRoughness,ne.clearcoatMap&&(se.clearcoatMap.value=ne.clearcoatMap,l(ne.clearcoatMap,se.clearcoatMapTransform)),ne.clearcoatRoughnessMap&&(se.clearcoatRoughnessMap.value=ne.clearcoatRoughnessMap,l(ne.clearcoatRoughnessMap,se.clearcoatRoughnessMapTransform)),ne.clearcoatNormalMap&&(se.clearcoatNormalMap.value=ne.clearcoatNormalMap,l(ne.clearcoatNormalMap,se.clearcoatNormalMapTransform),se.clearcoatNormalScale.value.copy(ne.clearcoatNormalScale),ne.side===We&&se.clearcoatNormalScale.value.negate())),ne.iridescence>0&&(se.iridescence.value=ne.iridescence,se.iridescenceIOR.value=ne.iridescenceIOR,se.iridescenceThicknessMinimum.value=ne.iridescenceThicknessRange[0],se.iridescenceThicknessMaximum.value=ne.iridescenceThicknessRange[1],ne.iridescenceMap&&(se.iridescenceMap.value=ne.iridescenceMap,l(ne.iridescenceMap,se.iridescenceMapTransform)),ne.iridescenceThicknessMap&&(se.iridescenceThicknessMap.value=ne.iridescenceThicknessMap,l(ne.iridescenceThicknessMap,se.iridescenceThicknessMapTransform))),ne.transmission>0&&(se.transmission.value=ne.transmission,se.transmissionSamplerMap.value=be.texture,se.transmissionSamplerSize.value.set(be.width,be.height),ne.transmissionMap&&(se.transmissionMap.value=ne.transmissionMap,l(ne.transmissionMap,se.transmissionMapTransform)),se.thickness.value=ne.thickness,ne.thicknessMap&&(se.thicknessMap.value=ne.thicknessMap,l(ne.thicknessMap,se.thicknessMapTransform)),se.attenuationDistance.value=ne.attenuationDistance,se.attenuationColor.value.copy(ne.attenuationColor)),ne.anisotropy>0&&(se.anisotropyVector.value.set(ne.anisotropy*Math.cos(ne.anisotropyRotation),ne.anisotropy*Math.sin(ne.anisotropyRotation)),ne.anisotropyMap&&(se.anisotropyMap.value=ne.anisotropyMap,l(ne.anisotropyMap,se.anisotropyMapTransform))),se.specularIntensity.value=ne.specularIntensity,se.specularColor.value.copy(ne.specularColor),ne.specularColorMap&&(se.specularColorMap.value=ne.specularColorMap,l(ne.specularColorMap,se.specularColorMapTransform)),ne.specularIntensityMap&&(se.specularIntensityMap.value=ne.specularIntensityMap,l(ne.specularIntensityMap,se.specularIntensityMapTransform))}function re(se,ne){ne.matcap&&(se.matcap.value=ne.matcap)}function fe(se,ne){const be=e.get(ne).light;se.referencePosition.value.setFromMatrixPosition(be.matrixWorld),se.nearDistance.value=be.shadow.camera.near,se.farDistance.value=be.shadow.camera.far}return{refreshFogUniforms:f,refreshMaterialUniforms:v}}function F1(C,e,l,f){let v={},M={},B=[];const I=l.isWebGL2?C.getParameter(C.MAX_UNIFORM_BUFFER_BINDINGS):0;function k(be,he){const Se=he.program;f.uniformBlockBinding(be,Se)}function N(be,he){let Se=v[be.id];Se===void 0&&(re(be),Se=X(be),v[be.id]=Se,be.addEventListener("dispose",se));const Oe=he.program;f.updateUBOMapping(be,Oe);const Qe=e.render.frame;M[be.id]!==Qe&&($(be),M[be.id]=Qe)}function X(be){const he=Z();be.__bindingPointIndex=he;const Se=C.createBuffer(),Oe=be.__size,Qe=be.usage;return C.bindBuffer(C.UNIFORM_BUFFER,Se),C.bufferData(C.UNIFORM_BUFFER,Oe,Qe),C.bindBuffer(C.UNIFORM_BUFFER,null),C.bindBufferBase(C.UNIFORM_BUFFER,he,Se),Se}function Z(){for(let be=0;be<I;be++)if(B.indexOf(be)===-1)return B.push(be),be;return w.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function $(be){const he=v[be.id],Se=be.uniforms,Oe=be.__cache;C.bindBuffer(C.UNIFORM_BUFFER,he);for(let Qe=0,Ze=Se.length;Qe<Ze;Qe++){const ht=Se[Qe];if(J(ht,Qe,Oe)===!0){const we=ht.__offset,Ve=Array.isArray(ht.value)?ht.value:[ht.value];let $t=0;for(let bn=0;bn<Ve.length;bn++){const Nt=Ve[bn],Vt=fe(Nt);typeof Nt=="number"?(ht.__data[0]=Nt,C.bufferSubData(C.UNIFORM_BUFFER,we+$t,ht.__data)):Nt.isMatrix3?(ht.__data[0]=Nt.elements[0],ht.__data[1]=Nt.elements[1],ht.__data[2]=Nt.elements[2],ht.__data[3]=Nt.elements[0],ht.__data[4]=Nt.elements[3],ht.__data[5]=Nt.elements[4],ht.__data[6]=Nt.elements[5],ht.__data[7]=Nt.elements[0],ht.__data[8]=Nt.elements[6],ht.__data[9]=Nt.elements[7],ht.__data[10]=Nt.elements[8],ht.__data[11]=Nt.elements[0]):(Nt.toArray(ht.__data,$t),$t+=Vt.storage/Float32Array.BYTES_PER_ELEMENT)}C.bufferSubData(C.UNIFORM_BUFFER,we,ht.__data)}}C.bindBuffer(C.UNIFORM_BUFFER,null)}function J(be,he,Se){const Oe=be.value;if(Se[he]===void 0){if(typeof Oe=="number")Se[he]=Oe;else{const Qe=Array.isArray(Oe)?Oe:[Oe],Ze=[];for(let ht=0;ht<Qe.length;ht++)Ze.push(Qe[ht].clone());Se[he]=Ze}return!0}else if(typeof Oe=="number"){if(Se[he]!==Oe)return Se[he]=Oe,!0}else{const Qe=Array.isArray(Se[he])?Se[he]:[Se[he]],Ze=Array.isArray(Oe)?Oe:[Oe];for(let ht=0;ht<Qe.length;ht++){const we=Qe[ht];if(we.equals(Ze[ht])===!1)return we.copy(Ze[ht]),!0}}return!1}function re(be){const he=be.uniforms;let Se=0;const Oe=16;let Qe=0;for(let Ze=0,ht=he.length;Ze<ht;Ze++){const we=he[Ze],Ve={boundary:0,storage:0},$t=Array.isArray(we.value)?we.value:[we.value];for(let bn=0,Nt=$t.length;bn<Nt;bn++){const Vt=$t[bn],en=fe(Vt);Ve.boundary+=en.boundary,Ve.storage+=en.storage}if(we.__data=new Float32Array(Ve.storage/Float32Array.BYTES_PER_ELEMENT),we.__offset=Se,Ze>0){Qe=Se%Oe;const bn=Oe-Qe;Qe!==0&&bn-Ve.boundary<0&&(Se+=Oe-Qe,we.__offset=Se)}Se+=Ve.storage}return Qe=Se%Oe,Qe>0&&(Se+=Oe-Qe),be.__size=Se,be.__cache={},this}function fe(be){const he={boundary:0,storage:0};return typeof be=="number"?(he.boundary=4,he.storage=4):be.isVector2?(he.boundary=8,he.storage=8):be.isVector3||be.isColor?(he.boundary=16,he.storage=12):be.isVector4?(he.boundary=16,he.storage=16):be.isMatrix3?(he.boundary=48,he.storage=48):be.isMatrix4?(he.boundary=64,he.storage=64):be.isTexture?w.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):w.warn("THREE.WebGLRenderer: Unsupported uniform value type.",be),he}function se(be){const he=be.target;he.removeEventListener("dispose",se);const Se=B.indexOf(he.__bindingPointIndex);B.splice(Se,1),C.deleteBuffer(v[he.id]),delete v[he.id],delete M[he.id]}function ne(){for(const be in v)C.deleteBuffer(v[be]);B=[],v={},M={}}return{bind:k,update:N,dispose:ne}}function Dg(){const C=Vu("canvas");return C.style.display="block",C}class ff{constructor(e={}){const{canvas:l=Dg(),context:f=null,depth:v=!0,stencil:M=!0,alpha:B=!1,antialias:I=!1,premultipliedAlpha:k=!0,preserveDrawingBuffer:N=!1,powerPreference:X="default",failIfMajorPerformanceCaveat:Z=!1}=e;this.isWebGLRenderer=!0;let $;f!==null?$=f.getContextAttributes().alpha:$=B;const J=new Uint32Array(4),re=new Int32Array(4);let fe=null,se=null;const ne=[],be=[];this.domElement=l,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ui,this.useLegacyLights=!0,this.toneMapping=ao,this.toneMappingExposure=1;const he=this;let Se=!1,Oe=0,Qe=0,Ze=null,ht=-1,we=null;const Ve=new Ji,$t=new Ji;let bn=null;const Nt=new pr(0);let Vt=0,en=l.width,Ht=l.height,un=1,hn=null,xn=null;const mn=new Ji(0,0,en,Ht),mt=new Ji(0,0,en,Ht);let it=!1;const ir=new od;let or=!1,cr=!1,Lr=null;const Zr=new si,Vr=new fn,$i=new Xe,po={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ar(){return Ze===null?un:1}let nt=f;function Zn(Ke,zt){for(let sn=0;sn<Ke.length;sn++){const It=Ke[sn],an=l.getContext(It,zt);if(an!==null)return an}return null}try{const Ke={alpha:!0,depth:v,stencil:M,antialias:I,premultipliedAlpha:k,preserveDrawingBuffer:N,powerPreference:X,failIfMajorPerformanceCaveat:Z};if("setAttribute"in l&&l.setAttribute("data-engine",`three.js r${d}`),l.addEventListener("webglcontextlost",Kn,!1),l.addEventListener("webglcontextrestored",Kt,!1),l.addEventListener("webglcontextcreationerror",Vn,!1),nt===null){const zt=["webgl2","webgl","experimental-webgl"];if(he.isWebGL1Renderer===!0&&zt.shift(),nt=Zn(zt,Ke),nt===null)throw Zn(zt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext!="undefined"&&nt instanceof WebGLRenderingContext&&w.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),nt.getShaderPrecisionFormat===void 0&&(nt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ke){throw w.error("THREE.WebGLRenderer: "+Ke.message),Ke}let dn,zn,_n,Ur,xr,Tr,_i,eo,Zo,tt,Pe,on,Zt,Gn,sr,Pr,Un,Ft,er,Nr,Qr,vr,_r,Ei;function zo(){dn=new O_(nt),zn=new Ay(nt,dn,e),dn.init(zn),vr=new Yy(nt,dn,zn),_n=new p3(nt,dn,zn),Ur=new L_(nt),xr=new Wy,Tr=new u3(nt,dn,_n,xr,zn,vr,Ur),_i=new B_(he),eo=new F_(he),Zo=new qh(nt,zn),_r=new xg(nt,dn,Zo,zn),tt=new D_(nt,Zo,Ur,_r),Pe=new z_(nt,tt,Zo,Ur),er=new k_(nt,zn,Tr),Pr=new T_(xr),on=new ml(he,_i,eo,dn,zn,_r,Pr),Zt=new f3(he,xr),Gn=new zp,sr=new Ky(dn,zn),Ft=new S_(he,_i,eo,_n,Pe,$,k),Un=new c3(he,Pe,zn),Ei=new F1(nt,Ur,zn,_n),Nr=new w_(nt,dn,Ur,zn),Qr=new P_(nt,dn,Ur,zn),Ur.programs=on.programs,he.capabilities=zn,he.extensions=dn,he.properties=xr,he.renderLists=Gn,he.shadowMap=Un,he.state=_n,he.info=Ur}zo();const vt=new h3(he,nt);this.xr=vt,this.getContext=function(){return nt},this.getContextAttributes=function(){return nt.getContextAttributes()},this.forceContextLoss=function(){const Ke=dn.get("WEBGL_lose_context");Ke&&Ke.loseContext()},this.forceContextRestore=function(){const Ke=dn.get("WEBGL_lose_context");Ke&&Ke.restoreContext()},this.getPixelRatio=function(){return un},this.setPixelRatio=function(Ke){Ke!==void 0&&(un=Ke,this.setSize(en,Ht,!1))},this.getSize=function(Ke){return Ke.set(en,Ht)},this.setSize=function(Ke,zt,sn=!0){if(vt.isPresenting){w.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}en=Ke,Ht=zt,l.width=Math.floor(Ke*un),l.height=Math.floor(zt*un),sn===!0&&(l.style.width=Ke+"px",l.style.height=zt+"px"),this.setViewport(0,0,Ke,zt)},this.getDrawingBufferSize=function(Ke){return Ke.set(en*un,Ht*un).floor()},this.setDrawingBufferSize=function(Ke,zt,sn){en=Ke,Ht=zt,un=sn,l.width=Math.floor(Ke*sn),l.height=Math.floor(zt*sn),this.setViewport(0,0,Ke,zt)},this.getCurrentViewport=function(Ke){return Ke.copy(Ve)},this.getViewport=function(Ke){return Ke.copy(mn)},this.setViewport=function(Ke,zt,sn,It){Ke.isVector4?mn.set(Ke.x,Ke.y,Ke.z,Ke.w):mn.set(Ke,zt,sn,It),_n.viewport(Ve.copy(mn).multiplyScalar(un).floor())},this.getScissor=function(Ke){return Ke.copy(mt)},this.setScissor=function(Ke,zt,sn,It){Ke.isVector4?mt.set(Ke.x,Ke.y,Ke.z,Ke.w):mt.set(Ke,zt,sn,It),_n.scissor($t.copy(mt).multiplyScalar(un).floor())},this.getScissorTest=function(){return it},this.setScissorTest=function(Ke){_n.setScissorTest(it=Ke)},this.setOpaqueSort=function(Ke){hn=Ke},this.setTransparentSort=function(Ke){xn=Ke},this.getClearColor=function(Ke){return Ke.copy(Ft.getClearColor())},this.setClearColor=function(){Ft.setClearColor.apply(Ft,arguments)},this.getClearAlpha=function(){return Ft.getClearAlpha()},this.setClearAlpha=function(){Ft.setClearAlpha.apply(Ft,arguments)},this.clear=function(Ke=!0,zt=!0,sn=!0){let It=0;if(Ke){let an=!1;if(Ze!==null){const Er=Ze.texture.format;an=Er===at||Er===Fe||Er===He}if(an){const Er=Ze.texture.type,$r=Er===Fo||Er===ds||Er===Xs||Er===Ea||Er===ll||Er===gc,hi=Ft.getClearColor(),li=Ft.getClearAlpha(),ji=hi.r,Si=hi.g,Ri=hi.b;$r?(J[0]=ji,J[1]=Si,J[2]=Ri,J[3]=li,nt.clearBufferuiv(nt.COLOR,0,J)):(re[0]=ji,re[1]=Si,re[2]=Ri,re[3]=li,nt.clearBufferiv(nt.COLOR,0,re))}else It|=nt.COLOR_BUFFER_BIT}zt&&(It|=nt.DEPTH_BUFFER_BIT),sn&&(It|=nt.STENCIL_BUFFER_BIT),nt.clear(It)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){l.removeEventListener("webglcontextlost",Kn,!1),l.removeEventListener("webglcontextrestored",Kt,!1),l.removeEventListener("webglcontextcreationerror",Vn,!1),Gn.dispose(),sr.dispose(),xr.dispose(),_i.dispose(),eo.dispose(),Pe.dispose(),_r.dispose(),Ei.dispose(),on.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",$o),vt.removeEventListener("sessionend",Ol),Lr&&(Lr.dispose(),Lr=null),Dl.stop()};function Kn(Ke){Ke.preventDefault(),w.log("THREE.WebGLRenderer: Context Lost."),Se=!0}function Kt(){w.log("THREE.WebGLRenderer: Context Restored."),Se=!1;const Ke=Ur.autoReset,zt=Un.enabled,sn=Un.autoUpdate,It=Un.needsUpdate,an=Un.type;zo(),Ur.autoReset=Ke,Un.enabled=zt,Un.autoUpdate=sn,Un.needsUpdate=It,Un.type=an}function Vn(Ke){w.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ke.statusMessage)}function fr(Ke){const zt=Ke.target;zt.removeEventListener("dispose",fr),so(zt)}function so(Ke){ls(Ke),xr.remove(Ke)}function ls(Ke){const zt=xr.get(Ke).programs;zt!==void 0&&(zt.forEach(function(sn){on.releaseProgram(sn)}),Ke.isShaderMaterial&&on.releaseShaderCache(Ke))}this.renderBufferDirect=function(Ke,zt,sn,It,an,Er){zt===null&&(zt=po);const $r=an.isMesh&&an.matrixWorld.determinant()<0,hi=TA(Ke,zt,sn,It,an);_n.setMaterial(It,$r);let li=sn.index,ji=1;It.wireframe===!0&&(li=tt.getWireframeAttribute(sn),ji=2);const Si=sn.drawRange,Ri=sn.attributes.position;let Is=Si.start*ji,Fs=(Si.start+Si.count)*ji;Er!==null&&(Is=Math.max(Is,Er.start*ji),Fs=Math.min(Fs,(Er.start+Er.count)*ji)),li!==null?(Is=Math.max(Is,0),Fs=Math.min(Fs,li.count)):Ri!=null&&(Is=Math.max(Is,0),Fs=Math.min(Fs,Ri.count));const Uc=Fs-Is;if(Uc<0||Uc===1/0)return;_r.setup(an,It,hi,sn,li);let Nc,ra=Nr;if(li!==null&&(Nc=Zo.get(li),ra=Qr,ra.setIndex(Nc)),an.isMesh)It.wireframe===!0?(_n.setLineWidth(It.wireframeLinewidth*Ar()),ra.setMode(nt.LINES)):ra.setMode(nt.TRIANGLES);else if(an.isLine){let Ki=It.linewidth;Ki===void 0&&(Ki=1),_n.setLineWidth(Ki*Ar()),an.isLineSegments?ra.setMode(nt.LINES):an.isLineLoop?ra.setMode(nt.LINE_LOOP):ra.setMode(nt.LINE_STRIP)}else an.isPoints?ra.setMode(nt.POINTS):an.isSprite&&ra.setMode(nt.TRIANGLES);if(an.isInstancedMesh)ra.renderInstances(Is,Uc,an.count);else if(sn.isInstancedBufferGeometry){const Ki=sn._maxInstanceCount!==void 0?sn._maxInstanceCount:1/0,D0=Math.min(sn.instanceCount,Ki);ra.renderInstances(Is,Uc,D0)}else ra.render(Is,Uc)},this.compile=function(Ke,zt){function sn(It,an,Er){It.transparent===!0&&It.side===st&&It.forceSinglePass===!1?(It.side=We,It.needsUpdate=!0,cm(It,an,Er),It.side=rt,It.needsUpdate=!0,cm(It,an,Er),It.side=st):cm(It,an,Er)}se=sr.get(Ke),se.init(),be.push(se),Ke.traverseVisible(function(It){It.isLight&&It.layers.test(zt.layers)&&(se.pushLight(It),It.castShadow&&se.pushShadow(It))}),se.setupLights(he.useLegacyLights),Ke.traverse(function(It){const an=It.material;if(an)if(Array.isArray(an))for(let Er=0;Er<an.length;Er++){const $r=an[Er];sn($r,Ke,It)}else sn(an,Ke,It)}),be.pop(),se=null};let na=null;function Gc(Ke){na&&na(Ke)}function $o(){Dl.stop()}function Ol(){Dl.start()}const Dl=new Ic;Dl.setAnimationLoop(Gc),typeof self!="undefined"&&Dl.setContext(self),this.setAnimationLoop=function(Ke){na=Ke,vt.setAnimationLoop(Ke),Ke===null?Dl.stop():Dl.start()},vt.addEventListener("sessionstart",$o),vt.addEventListener("sessionend",Ol),this.render=function(Ke,zt){if(zt!==void 0&&zt.isCamera!==!0){w.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Se===!0)return;Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),zt.parent===null&&zt.matrixWorldAutoUpdate===!0&&zt.updateMatrixWorld(),vt.enabled===!0&&vt.isPresenting===!0&&(vt.cameraAutoUpdate===!0&&vt.updateCamera(zt),zt=vt.getCamera()),Ke.isScene===!0&&Ke.onBeforeRender(he,Ke,zt,Ze),se=sr.get(Ke,be.length),se.init(),be.push(se),Zr.multiplyMatrices(zt.projectionMatrix,zt.matrixWorldInverse),ir.setFromProjectionMatrix(Zr),cr=this.localClippingEnabled,or=Pr.init(this.clippingPlanes,cr),fe=Gn.get(Ke,ne.length),fe.init(),ne.push(fe),SA(Ke,zt,0,he.sortObjects),fe.finish(),he.sortObjects===!0&&fe.sort(hn,xn),this.info.render.frame++,or===!0&&Pr.beginShadows();const sn=se.state.shadowsArray;if(Un.render(sn,Ke,zt),or===!0&&Pr.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ft.render(fe,Ke),se.setupLights(he.useLegacyLights),zt.isArrayCamera){const It=zt.cameras;for(let an=0,Er=It.length;an<Er;an++){const $r=It[an];wA(fe,Ke,$r,$r.viewport)}}else wA(fe,Ke,zt);Ze!==null&&(Tr.updateMultisampleRenderTarget(Ze),Tr.updateRenderTargetMipmap(Ze)),Ke.isScene===!0&&Ke.onAfterRender(he,Ke,zt),_r.resetDefaultState(),ht=-1,we=null,be.pop(),be.length>0?se=be[be.length-1]:se=null,ne.pop(),ne.length>0?fe=ne[ne.length-1]:fe=null};function SA(Ke,zt,sn,It){if(Ke.visible===!1)return;if(Ke.layers.test(zt.layers)){if(Ke.isGroup)sn=Ke.renderOrder;else if(Ke.isLOD)Ke.autoUpdate===!0&&Ke.update(zt);else if(Ke.isLight)se.pushLight(Ke),Ke.castShadow&&se.pushShadow(Ke);else if(Ke.isSprite){if(!Ke.frustumCulled||ir.intersectsSprite(Ke)){It&&$i.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Zr);const $r=Pe.update(Ke),hi=Ke.material;hi.visible&&fe.push(Ke,$r,hi,sn,$i.z,null)}}else if((Ke.isMesh||Ke.isLine||Ke.isPoints)&&(!Ke.frustumCulled||ir.intersectsObject(Ke))){const $r=Pe.update(Ke),hi=Ke.material;if(It&&(Ke.boundingSphere!==void 0?(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),$i.copy(Ke.boundingSphere.center)):($r.boundingSphere===null&&$r.computeBoundingSphere(),$i.copy($r.boundingSphere.center)),$i.applyMatrix4(Ke.matrixWorld).applyMatrix4(Zr)),Array.isArray(hi)){const li=$r.groups;for(let ji=0,Si=li.length;ji<Si;ji++){const Ri=li[ji],Is=hi[Ri.materialIndex];Is&&Is.visible&&fe.push(Ke,$r,Is,sn,$i.z,Ri)}}else hi.visible&&fe.push(Ke,$r,hi,sn,$i.z,null)}}const Er=Ke.children;for(let $r=0,hi=Er.length;$r<hi;$r++)SA(Er[$r],zt,sn,It)}function wA(Ke,zt,sn,It){const an=Ke.opaque,Er=Ke.transmissive,$r=Ke.transparent;se.setupLightsView(sn),or===!0&&Pr.setGlobalState(he.clippingPlanes,sn),Er.length>0&&EE(an,Er,zt,sn),It&&_n.viewport(Ve.copy(It)),an.length>0&&F0(an,zt,sn),Er.length>0&&F0(Er,zt,sn),$r.length>0&&F0($r,zt,sn),_n.buffers.depth.setTest(!0),_n.buffers.depth.setMask(!0),_n.buffers.color.setMask(!0),_n.setPolygonOffset(!1)}function EE(Ke,zt,sn,It){const an=zn.isWebGL2;Lr===null&&(Lr=new qs(1,1,{generateMipmaps:!0,type:dn.has("EXT_color_buffer_half_float")?_a:Fo,minFilter:ho,samples:an?4:0})),he.getDrawingBufferSize(Vr),an?Lr.setSize(Vr.x,Vr.y):Lr.setSize(xa(Vr.x),xa(Vr.y));const Er=he.getRenderTarget();he.setRenderTarget(Lr),he.getClearColor(Nt),Vt=he.getClearAlpha(),Vt<1&&he.setClearColor(16777215,.5),he.clear();const $r=he.toneMapping;he.toneMapping=ao,F0(Ke,sn,It),Tr.updateMultisampleRenderTarget(Lr),Tr.updateRenderTargetMipmap(Lr);let hi=!1;for(let li=0,ji=zt.length;li<ji;li++){const Si=zt[li],Ri=Si.object,Is=Si.geometry,Fs=Si.material,Uc=Si.group;if(Fs.side===st&&Ri.layers.test(It.layers)){const Nc=Fs.side;Fs.side=We,Fs.needsUpdate=!0,i2(Ri,sn,It,Is,Fs,Uc),Fs.side=Nc,Fs.needsUpdate=!0,hi=!0}}hi===!0&&(Tr.updateMultisampleRenderTarget(Lr),Tr.updateRenderTargetMipmap(Lr)),he.setRenderTarget(Er),he.setClearColor(Nt,Vt),he.toneMapping=$r}function F0(Ke,zt,sn){const It=zt.isScene===!0?zt.overrideMaterial:null;for(let an=0,Er=Ke.length;an<Er;an++){const $r=Ke[an],hi=$r.object,li=$r.geometry,ji=It===null?$r.material:It,Si=$r.group;hi.layers.test(sn.layers)&&i2(hi,zt,sn,li,ji,Si)}}function i2(Ke,zt,sn,It,an,Er){Ke.onBeforeRender(he,zt,sn,It,an,Er),Ke.modelViewMatrix.multiplyMatrices(sn.matrixWorldInverse,Ke.matrixWorld),Ke.normalMatrix.getNormalMatrix(Ke.modelViewMatrix),an.onBeforeRender(he,zt,sn,It,Ke,Er),an.transparent===!0&&an.side===st&&an.forceSinglePass===!1?(an.side=We,an.needsUpdate=!0,he.renderBufferDirect(sn,zt,It,an,Ke,Er),an.side=rt,an.needsUpdate=!0,he.renderBufferDirect(sn,zt,It,an,Ke,Er),an.side=st):he.renderBufferDirect(sn,zt,It,an,Ke,Er),Ke.onAfterRender(he,zt,sn,It,an,Er)}function cm(Ke,zt,sn){zt.isScene!==!0&&(zt=po);const It=xr.get(Ke),an=se.state.lights,Er=se.state.shadowsArray,$r=an.state.version,hi=on.getParameters(Ke,an.state,Er,zt,sn),li=on.getProgramCacheKey(hi);let ji=It.programs;It.environment=Ke.isMeshStandardMaterial?zt.environment:null,It.fog=zt.fog,It.envMap=(Ke.isMeshStandardMaterial?eo:_i).get(Ke.envMap||It.environment),ji===void 0&&(Ke.addEventListener("dispose",fr),ji=new Map,It.programs=ji);let Si=ji.get(li);if(Si!==void 0){if(It.currentProgram===Si&&It.lightsStateVersion===$r)return Ch(Ke,hi),Si}else hi.uniforms=on.getUniforms(Ke),Ke.onBuild(sn,hi,he),Ke.onBeforeCompile(hi,he),Si=on.acquireProgram(hi,li),ji.set(li,Si),It.uniforms=hi.uniforms;const Ri=It.uniforms;(!Ke.isShaderMaterial&&!Ke.isRawShaderMaterial||Ke.clipping===!0)&&(Ri.clippingPlanes=Pr.uniform),Ch(Ke,hi),It.needsLights=o2(Ke),It.lightsStateVersion=$r,It.needsLights&&(Ri.ambientLightColor.value=an.state.ambient,Ri.lightProbe.value=an.state.probe,Ri.directionalLights.value=an.state.directional,Ri.directionalLightShadows.value=an.state.directionalShadow,Ri.spotLights.value=an.state.spot,Ri.spotLightShadows.value=an.state.spotShadow,Ri.rectAreaLights.value=an.state.rectArea,Ri.ltc_1.value=an.state.rectAreaLTC1,Ri.ltc_2.value=an.state.rectAreaLTC2,Ri.pointLights.value=an.state.point,Ri.pointLightShadows.value=an.state.pointShadow,Ri.hemisphereLights.value=an.state.hemi,Ri.directionalShadowMap.value=an.state.directionalShadowMap,Ri.directionalShadowMatrix.value=an.state.directionalShadowMatrix,Ri.spotShadowMap.value=an.state.spotShadowMap,Ri.spotLightMatrix.value=an.state.spotLightMatrix,Ri.spotLightMap.value=an.state.spotLightMap,Ri.pointShadowMap.value=an.state.pointShadowMap,Ri.pointShadowMatrix.value=an.state.pointShadowMatrix);const Is=Si.getUniforms(),Fs=Dc.seqWithValue(Is.seq,Ri);return It.currentProgram=Si,It.uniformsList=Fs,Si}function Ch(Ke,zt){const sn=xr.get(Ke);sn.outputColorSpace=zt.outputColorSpace,sn.instancing=zt.instancing,sn.skinning=zt.skinning,sn.morphTargets=zt.morphTargets,sn.morphNormals=zt.morphNormals,sn.morphColors=zt.morphColors,sn.morphTargetsCount=zt.morphTargetsCount,sn.numClippingPlanes=zt.numClippingPlanes,sn.numIntersection=zt.numClipIntersection,sn.vertexAlphas=zt.vertexAlphas,sn.vertexTangents=zt.vertexTangents,sn.toneMapping=zt.toneMapping}function TA(Ke,zt,sn,It,an){zt.isScene!==!0&&(zt=po),Tr.resetTextureUnits();const Er=zt.fog,$r=It.isMeshStandardMaterial?zt.environment:null,hi=Ze===null?he.outputColorSpace:Ze.isXRRenderTarget===!0?Ze.texture.colorSpace:oc,li=(It.isMeshStandardMaterial?eo:_i).get(It.envMap||$r),ji=It.vertexColors===!0&&!!sn.attributes.color&&sn.attributes.color.itemSize===4,Si=!!sn.attributes.tangent&&(!!It.normalMap||It.anisotropy>0),Ri=!!sn.morphAttributes.position,Is=!!sn.morphAttributes.normal,Fs=!!sn.morphAttributes.color,Uc=It.toneMapped?he.toneMapping:ao,Nc=sn.morphAttributes.position||sn.morphAttributes.normal||sn.morphAttributes.color,ra=Nc!==void 0?Nc.length:0,Ki=xr.get(It),D0=se.state.lights;if(or===!0&&(cr===!0||Ke!==we)){const tc=Ke===we&&It.id===ht;Pr.setState(It,Ke,tc)}let xs=!1;It.version===Ki.__version?(Ki.needsLights&&Ki.lightsStateVersion!==D0.state.version||Ki.outputColorSpace!==hi||an.isInstancedMesh&&Ki.instancing===!1||!an.isInstancedMesh&&Ki.instancing===!0||an.isSkinnedMesh&&Ki.skinning===!1||!an.isSkinnedMesh&&Ki.skinning===!0||Ki.envMap!==li||It.fog===!0&&Ki.fog!==Er||Ki.numClippingPlanes!==void 0&&(Ki.numClippingPlanes!==Pr.numPlanes||Ki.numIntersection!==Pr.numIntersection)||Ki.vertexAlphas!==ji||Ki.vertexTangents!==Si||Ki.morphTargets!==Ri||Ki.morphNormals!==Is||Ki.morphColors!==Fs||Ki.toneMapping!==Uc||zn.isWebGL2===!0&&Ki.morphTargetsCount!==ra)&&(xs=!0):(xs=!0,Ki.__version=It.version);let Iu=Ki.currentProgram;xs===!0&&(Iu=cm(It,zt,an));let BA=!1,Of=!1,RA=!1;const Pl=Iu.getUniforms(),pp=Ki.uniforms;if(_n.useProgram(Iu.program)&&(BA=!0,Of=!0,RA=!0),It.id!==ht&&(ht=It.id,Of=!0),BA||we!==Ke){if(Pl.setValue(nt,"projectionMatrix",Ke.projectionMatrix),zn.logarithmicDepthBuffer&&Pl.setValue(nt,"logDepthBufFC",2/(Math.log(Ke.far+1)/Math.LN2)),we!==Ke&&(we=Ke,Of=!0,RA=!0),It.isShaderMaterial||It.isMeshPhongMaterial||It.isMeshToonMaterial||It.isMeshStandardMaterial||It.envMap){const tc=Pl.map.cameraPosition;tc!==void 0&&tc.setValue(nt,$i.setFromMatrixPosition(Ke.matrixWorld))}(It.isMeshPhongMaterial||It.isMeshToonMaterial||It.isMeshLambertMaterial||It.isMeshBasicMaterial||It.isMeshStandardMaterial||It.isShaderMaterial)&&Pl.setValue(nt,"isOrthographic",Ke.isOrthographicCamera===!0),(It.isMeshPhongMaterial||It.isMeshToonMaterial||It.isMeshLambertMaterial||It.isMeshBasicMaterial||It.isMeshStandardMaterial||It.isShaderMaterial||It.isShadowMaterial||an.isSkinnedMesh)&&Pl.setValue(nt,"viewMatrix",Ke.matrixWorldInverse)}if(an.isSkinnedMesh){Pl.setOptional(nt,an,"bindMatrix"),Pl.setOptional(nt,an,"bindMatrixInverse");const tc=an.skeleton;tc&&(zn.floatVertexTextures?(tc.boneTexture===null&&tc.computeBoneTexture(),Pl.setValue(nt,"boneTexture",tc.boneTexture,Tr),Pl.setValue(nt,"boneTextureSize",tc.boneTextureSize)):w.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const IA=sn.morphAttributes;if((IA.position!==void 0||IA.normal!==void 0||IA.color!==void 0&&zn.isWebGL2===!0)&&er.update(an,sn,Iu),(Of||Ki.receiveShadow!==an.receiveShadow)&&(Ki.receiveShadow=an.receiveShadow,Pl.setValue(nt,"receiveShadow",an.receiveShadow)),It.isMeshGouraudMaterial&&It.envMap!==null&&(pp.envMap.value=li,pp.flipEnvMap.value=li.isCubeTexture&&li.isRenderTargetTexture===!1?-1:1),Of&&(Pl.setValue(nt,"toneMappingExposure",he.toneMappingExposure),Ki.needsLights&&O0(pp,RA),Er&&It.fog===!0&&Zt.refreshFogUniforms(pp,Er),Zt.refreshMaterialUniforms(pp,It,un,Ht,Lr),Dc.upload(nt,Ki.uniformsList,pp,Tr)),It.isShaderMaterial&&It.uniformsNeedUpdate===!0&&(Dc.upload(nt,Ki.uniformsList,pp,Tr),It.uniformsNeedUpdate=!1),It.isSpriteMaterial&&Pl.setValue(nt,"center",an.center),Pl.setValue(nt,"modelViewMatrix",an.modelViewMatrix),Pl.setValue(nt,"normalMatrix",an.normalMatrix),Pl.setValue(nt,"modelMatrix",an.matrixWorld),It.isShaderMaterial||It.isRawShaderMaterial){const tc=It.uniformsGroups;for(let FA=0,bE=tc.length;FA<bE;FA++)if(zn.isWebGL2){const OA=tc[FA];Ei.update(OA,Iu),Ei.bind(OA,Iu)}else w.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Iu}function O0(Ke,zt){Ke.ambientLightColor.needsUpdate=zt,Ke.lightProbe.needsUpdate=zt,Ke.directionalLights.needsUpdate=zt,Ke.directionalLightShadows.needsUpdate=zt,Ke.pointLights.needsUpdate=zt,Ke.pointLightShadows.needsUpdate=zt,Ke.spotLights.needsUpdate=zt,Ke.spotLightShadows.needsUpdate=zt,Ke.rectAreaLights.needsUpdate=zt,Ke.hemisphereLights.needsUpdate=zt}function o2(Ke){return Ke.isMeshLambertMaterial||Ke.isMeshToonMaterial||Ke.isMeshPhongMaterial||Ke.isMeshStandardMaterial||Ke.isShadowMaterial||Ke.isShaderMaterial&&Ke.lights===!0}this.getActiveCubeFace=function(){return Oe},this.getActiveMipmapLevel=function(){return Qe},this.getRenderTarget=function(){return Ze},this.setRenderTargetTextures=function(Ke,zt,sn){xr.get(Ke.texture).__webglTexture=zt,xr.get(Ke.depthTexture).__webglTexture=sn;const It=xr.get(Ke);It.__hasExternalTextures=!0,It.__hasExternalTextures&&(It.__autoAllocateDepthBuffer=sn===void 0,It.__autoAllocateDepthBuffer||dn.has("WEBGL_multisampled_render_to_texture")===!0&&(w.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),It.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ke,zt){const sn=xr.get(Ke);sn.__webglFramebuffer=zt,sn.__useDefaultFramebuffer=zt===void 0},this.setRenderTarget=function(Ke,zt=0,sn=0){Ze=Ke,Oe=zt,Qe=sn;let It=!0,an=null,Er=!1,$r=!1;if(Ke){const li=xr.get(Ke);li.__useDefaultFramebuffer!==void 0?(_n.bindFramebuffer(nt.FRAMEBUFFER,null),It=!1):li.__webglFramebuffer===void 0?Tr.setupRenderTarget(Ke):li.__hasExternalTextures&&Tr.rebindTextures(Ke,xr.get(Ke.texture).__webglTexture,xr.get(Ke.depthTexture).__webglTexture);const ji=Ke.texture;(ji.isData3DTexture||ji.isDataArrayTexture||ji.isCompressedArrayTexture)&&($r=!0);const Si=xr.get(Ke).__webglFramebuffer;Ke.isWebGLCubeRenderTarget?(an=Si[zt],Er=!0):zn.isWebGL2&&Ke.samples>0&&Tr.useMultisampledRTT(Ke)===!1?an=xr.get(Ke).__webglMultisampledFramebuffer:an=Si,Ve.copy(Ke.viewport),$t.copy(Ke.scissor),bn=Ke.scissorTest}else Ve.copy(mn).multiplyScalar(un).floor(),$t.copy(mt).multiplyScalar(un).floor(),bn=it;if(_n.bindFramebuffer(nt.FRAMEBUFFER,an)&&zn.drawBuffers&&It&&_n.drawBuffers(Ke,an),_n.viewport(Ve),_n.scissor($t),_n.setScissorTest(bn),Er){const li=xr.get(Ke.texture);nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+zt,li.__webglTexture,sn)}else if($r){const li=xr.get(Ke.texture),ji=zt||0;nt.framebufferTextureLayer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,li.__webglTexture,sn||0,ji)}ht=-1},this.readRenderTargetPixels=function(Ke,zt,sn,It,an,Er,$r){if(!(Ke&&Ke.isWebGLRenderTarget)){w.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let hi=xr.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&$r!==void 0&&(hi=hi[$r]),hi){_n.bindFramebuffer(nt.FRAMEBUFFER,hi);try{const li=Ke.texture,ji=li.format,Si=li.type;if(ji!==$e&&vr.convert(ji)!==nt.getParameter(nt.IMPLEMENTATION_COLOR_READ_FORMAT)){w.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ri=Si===_a&&(dn.has("EXT_color_buffer_half_float")||zn.isWebGL2&&dn.has("EXT_color_buffer_float"));if(Si!==Fo&&vr.convert(Si)!==nt.getParameter(nt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Si===No&&(zn.isWebGL2||dn.has("OES_texture_float")||dn.has("WEBGL_color_buffer_float")))&&!Ri){w.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}zt>=0&&zt<=Ke.width-It&&sn>=0&&sn<=Ke.height-an&&nt.readPixels(zt,sn,It,an,vr.convert(ji),vr.convert(Si),Er)}finally{const li=Ze!==null?xr.get(Ze).__webglFramebuffer:null;_n.bindFramebuffer(nt.FRAMEBUFFER,li)}}},this.copyFramebufferToTexture=function(Ke,zt,sn=0){const It=Math.pow(2,-sn),an=Math.floor(zt.image.width*It),Er=Math.floor(zt.image.height*It);Tr.setTexture2D(zt,0),nt.copyTexSubImage2D(nt.TEXTURE_2D,sn,0,0,Ke.x,Ke.y,an,Er),_n.unbindTexture()},this.copyTextureToTexture=function(Ke,zt,sn,It=0){const an=zt.image.width,Er=zt.image.height,$r=vr.convert(sn.format),hi=vr.convert(sn.type);Tr.setTexture2D(sn,0),nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,sn.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,sn.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,sn.unpackAlignment),zt.isDataTexture?nt.texSubImage2D(nt.TEXTURE_2D,It,Ke.x,Ke.y,an,Er,$r,hi,zt.image.data):zt.isCompressedTexture?nt.compressedTexSubImage2D(nt.TEXTURE_2D,It,Ke.x,Ke.y,zt.mipmaps[0].width,zt.mipmaps[0].height,$r,zt.mipmaps[0].data):nt.texSubImage2D(nt.TEXTURE_2D,It,Ke.x,Ke.y,$r,hi,zt.image),It===0&&sn.generateMipmaps&&nt.generateMipmap(nt.TEXTURE_2D),_n.unbindTexture()},this.copyTextureToTexture3D=function(Ke,zt,sn,It,an=0){if(he.isWebGL1Renderer){w.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Er=Ke.max.x-Ke.min.x+1,$r=Ke.max.y-Ke.min.y+1,hi=Ke.max.z-Ke.min.z+1,li=vr.convert(It.format),ji=vr.convert(It.type);let Si;if(It.isData3DTexture)Tr.setTexture3D(It,0),Si=nt.TEXTURE_3D;else if(It.isDataArrayTexture)Tr.setTexture2DArray(It,0),Si=nt.TEXTURE_2D_ARRAY;else{w.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,It.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,It.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,It.unpackAlignment);const Ri=nt.getParameter(nt.UNPACK_ROW_LENGTH),Is=nt.getParameter(nt.UNPACK_IMAGE_HEIGHT),Fs=nt.getParameter(nt.UNPACK_SKIP_PIXELS),Uc=nt.getParameter(nt.UNPACK_SKIP_ROWS),Nc=nt.getParameter(nt.UNPACK_SKIP_IMAGES),ra=sn.isCompressedTexture?sn.mipmaps[0]:sn.image;nt.pixelStorei(nt.UNPACK_ROW_LENGTH,ra.width),nt.pixelStorei(nt.UNPACK_IMAGE_HEIGHT,ra.height),nt.pixelStorei(nt.UNPACK_SKIP_PIXELS,Ke.min.x),nt.pixelStorei(nt.UNPACK_SKIP_ROWS,Ke.min.y),nt.pixelStorei(nt.UNPACK_SKIP_IMAGES,Ke.min.z),sn.isDataTexture||sn.isData3DTexture?nt.texSubImage3D(Si,an,zt.x,zt.y,zt.z,Er,$r,hi,li,ji,ra.data):sn.isCompressedArrayTexture?(w.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),nt.compressedTexSubImage3D(Si,an,zt.x,zt.y,zt.z,Er,$r,hi,li,ra.data)):nt.texSubImage3D(Si,an,zt.x,zt.y,zt.z,Er,$r,hi,li,ji,ra),nt.pixelStorei(nt.UNPACK_ROW_LENGTH,Ri),nt.pixelStorei(nt.UNPACK_IMAGE_HEIGHT,Is),nt.pixelStorei(nt.UNPACK_SKIP_PIXELS,Fs),nt.pixelStorei(nt.UNPACK_SKIP_ROWS,Uc),nt.pixelStorei(nt.UNPACK_SKIP_IMAGES,Nc),an===0&&It.generateMipmaps&&nt.generateMipmap(Si),_n.unbindTexture()},this.initTexture=function(Ke){Ke.isCubeTexture?Tr.setTextureCube(Ke,0):Ke.isData3DTexture?Tr.setTexture3D(Ke,0):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?Tr.setTexture2DArray(Ke,0):Tr.setTexture2D(Ke,0),_n.unbindTexture()},this.resetState=function(){Oe=0,Qe=0,Ze=null,_n.reset(),_r.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return gs}get physicallyCorrectLights(){return w.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){w.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return w.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ui?El:zu}set outputEncoding(e){w.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===El?ui:oc}}class Hm extends ff{}Hm.prototype.isWebGL1Renderer=!0;class ud{constructor(e,l=25e-5){this.isFogExp2=!0,this.name="",this.color=new pr(e),this.density=l}clone(){return new ud(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class jm{constructor(e,l=1,f=1e3){this.isFog=!0,this.name="",this.color=new pr(e),this.near=l,this.far=f}clone(){return new jm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Pg extends Ti{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,l){return super.copy(e,l),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const l=super.toJSON(e);return this.fog!==null&&(l.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(l.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(l.object.backgroundIntensity=this.backgroundIntensity),l}}class Wm{constructor(e,l){this.isInterleavedBuffer=!0,this.array=e,this.stride=l,this.count=e!==void 0?e.length/l:0,this.usage=Zp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ha()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,l,f){e*=this.stride,f*=l.stride;for(let v=0,M=this.stride;v<M;v++)this.array[e+v]=l.array[f+v];return this}set(e,l=0){return this.array.set(e,l),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const l=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),f=new this.constructor(l,this.stride);return f.setUsage(this.usage),f}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Al=new Xe;class Up{constructor(e,l,f,v=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=l,this.offset=f,this.normalized=v}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let l=0,f=this.data.count;l<f;l++)Al.fromBufferAttribute(this,l),Al.applyMatrix4(e),this.setXYZ(l,Al.x,Al.y,Al.z);return this}applyNormalMatrix(e){for(let l=0,f=this.count;l<f;l++)Al.fromBufferAttribute(this,l),Al.applyNormalMatrix(e),this.setXYZ(l,Al.x,Al.y,Al.z);return this}transformDirection(e){for(let l=0,f=this.count;l<f;l++)Al.fromBufferAttribute(this,l),Al.transformDirection(e),this.setXYZ(l,Al.x,Al.y,Al.z);return this}setX(e,l){return this.normalized&&(l=Yr(l,this.array)),this.data.array[e*this.data.stride+this.offset]=l,this}setY(e,l){return this.normalized&&(l=Yr(l,this.array)),this.data.array[e*this.data.stride+this.offset+1]=l,this}setZ(e,l){return this.normalized&&(l=Yr(l,this.array)),this.data.array[e*this.data.stride+this.offset+2]=l,this}setW(e,l){return this.normalized&&(l=Yr(l,this.array)),this.data.array[e*this.data.stride+this.offset+3]=l,this}getX(e){let l=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(l=ua(l,this.array)),l}getY(e){let l=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(l=ua(l,this.array)),l}getZ(e){let l=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(l=ua(l,this.array)),l}getW(e){let l=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(l=ua(l,this.array)),l}setXY(e,l,f){return e=e*this.data.stride+this.offset,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array)),this.data.array[e+0]=l,this.data.array[e+1]=f,this}setXYZ(e,l,f,v){return e=e*this.data.stride+this.offset,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array),v=Yr(v,this.array)),this.data.array[e+0]=l,this.data.array[e+1]=f,this.data.array[e+2]=v,this}setXYZW(e,l,f,v,M){return e=e*this.data.stride+this.offset,this.normalized&&(l=Yr(l,this.array),f=Yr(f,this.array),v=Yr(v,this.array),M=Yr(M,this.array)),this.data.array[e+0]=l,this.data.array[e+1]=f,this.data.array[e+2]=v,this.data.array[e+3]=M,this}clone(e){if(e===void 0){w.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const l=[];for(let f=0;f<this.count;f++){const v=f*this.data.stride+this.offset;for(let M=0;M<this.itemSize;M++)l.push(this.data.array[v+M])}return new uo(new this.array.constructor(l),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Up(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){w.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const l=[];for(let f=0;f<this.count;f++){const v=f*this.data.stride+this.offset;for(let M=0;M<this.itemSize;M++)l.push(this.data.array[v+M])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:l,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Vm extends fa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new pr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gf;const Lg=new Xe,hh=new Xe,dd=new Xe,Ts=new fn,kg=new fn,hd=new si,Qm=new Xe,mf=new Xe,zg=new Xe,Jy=new fn,Af=new fn,qy=new fn;class O1 extends Ti{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",gf===void 0){gf=new xi;const l=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),f=new Wm(l,5);gf.setIndex([0,1,2,0,2,3]),gf.setAttribute("position",new Up(f,3,0,!1)),gf.setAttribute("uv",new Up(f,2,3,!1))}this.geometry=gf,this.material=e!==void 0?e:new Vm,this.center=new fn(.5,.5)}raycast(e,l){e.camera===null&&w.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hh.setFromMatrixScale(this.matrixWorld),hd.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hh.multiplyScalar(-dd.z);const f=this.material.rotation;let v,M;f!==0&&(M=Math.cos(f),v=Math.sin(f));const B=this.center;Xm(Qm.set(-.5,-.5,0),dd,B,hh,v,M),Xm(mf.set(.5,-.5,0),dd,B,hh,v,M),Xm(zg.set(.5,.5,0),dd,B,hh,v,M),Jy.set(0,0),Af.set(1,0),qy.set(1,1);let I=e.ray.intersectTriangle(Qm,mf,zg,!1,Lg);if(I===null&&(Xm(mf.set(-.5,.5,0),dd,B,hh,v,M),Af.set(0,1),I=e.ray.intersectTriangle(Qm,zg,mf,!1,Lg),I===null))return;const k=e.ray.origin.distanceTo(Lg);k<e.near||k>e.far||l.push({distance:k,point:Lg.clone(),uv:Ya.getInterpolation(Lg,Qm,mf,zg,Jy,Af,qy,new fn),face:null,object:this})}copy(e,l){return super.copy(e,l),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Xm(C,e,l,f,v,M){Ts.subVectors(C,l).addScalar(.5).multiply(f),v!==void 0?(kg.x=M*Ts.x-v*Ts.y,kg.y=v*Ts.x+M*Ts.y):kg.copy(Ts),C.copy(e),C.x+=kg.x,C.y+=kg.y,C.applyMatrix4(hd)}const Km=new Xe,D1=new Xe;class Zy extends Ti{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const l=e.levels;for(let f=0,v=l.length;f<v;f++){const M=l[f];this.addLevel(M.object.clone(),M.distance,M.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,l=0,f=0){l=Math.abs(l);const v=this.levels;let M;for(M=0;M<v.length&&!(l<v[M].distance);M++);return v.splice(M,0,{distance:l,hysteresis:f,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const l=this.levels;if(l.length>0){let f,v;for(f=1,v=l.length;f<v;f++){let M=l[f].distance;if(l[f].object.visible&&(M-=M*l[f].hysteresis),e<M)break}return l[f-1].object}return null}raycast(e,l){if(this.levels.length>0){Km.setFromMatrixPosition(this.matrixWorld);const v=e.ray.origin.distanceTo(Km);this.getObjectForDistance(v).raycast(e,l)}}update(e){const l=this.levels;if(l.length>1){Km.setFromMatrixPosition(e.matrixWorld),D1.setFromMatrixPosition(this.matrixWorld);const f=Km.distanceTo(D1)/e.zoom;l[0].object.visible=!0;let v,M;for(v=1,M=l.length;v<M;v++){let B=l[v].distance;if(l[v].object.visible&&(B-=B*l[v].hysteresis),f>=B)l[v-1].object.visible=!1,l[v].object.visible=!0;else break}for(this._currentLevel=v-1;v<M;v++)l[v].object.visible=!1}}toJSON(e){const l=super.toJSON(e);this.autoUpdate===!1&&(l.object.autoUpdate=!1),l.object.levels=[];const f=this.levels;for(let v=0,M=f.length;v<M;v++){const B=f[v];l.object.levels.push({object:B.object.uuid,distance:B.distance,hysteresis:B.hysteresis})}return l}}const $y=new Xe,g3=new Ji,m3=new Ji,EM=new Xe,ev=new si,yf=new Xe,P1=new wa,tv=new si,L1=new Cp;class k1 extends fo{constructor(e,l){super(e,l),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new si,this.bindMatrixInverse=new si,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Lo),this.boundingBox.makeEmpty();const l=e.getAttribute("position");for(let f=0;f<l.count;f++)yf.fromBufferAttribute(l,f),this.applyBoneTransform(f,yf),this.boundingBox.expandByPoint(yf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wa),this.boundingSphere.makeEmpty();const l=e.getAttribute("position");for(let f=0;f<l.count;f++)yf.fromBufferAttribute(l,f),this.applyBoneTransform(f,yf),this.boundingSphere.expandByPoint(yf)}copy(e,l){return super.copy(e,l),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,l){const f=this.material,v=this.matrixWorld;f!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),P1.copy(this.boundingSphere),P1.applyMatrix4(v),e.ray.intersectsSphere(P1)!==!1&&(tv.copy(v).invert(),L1.copy(e.ray).applyMatrix4(tv),!(this.boundingBox!==null&&L1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,l,L1)))}getVertexPosition(e,l){return super.getVertexPosition(e,l),this.applyBoneTransform(e,l),l}bind(e,l){this.skeleton=e,l===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),l=this.matrixWorld),this.bindMatrix.copy(l),this.bindMatrixInverse.copy(l).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ji,l=this.geometry.attributes.skinWeight;for(let f=0,v=l.count;f<v;f++){e.fromBufferAttribute(l,f);const M=1/e.manhattanLength();M!==1/0?e.multiplyScalar(M):e.set(1,0,0,0),l.setXYZW(f,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():w.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,l){const f=this.skeleton,v=this.geometry;g3.fromBufferAttribute(v.attributes.skinIndex,e),m3.fromBufferAttribute(v.attributes.skinWeight,e),$y.copy(l).applyMatrix4(this.bindMatrix),l.set(0,0,0);for(let M=0;M<4;M++){const B=m3.getComponent(M);if(B!==0){const I=g3.getComponent(M);ev.multiplyMatrices(f.bones[I].matrixWorld,f.boneInverses[I]),l.addScaledVector(EM.copy($y).applyMatrix4(ev),B)}}return l.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,l){return w.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,l)}}class Ym extends Ti{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fh extends io{constructor(e=null,l=1,f=1,v,M,B,I,k,N=ki,X=ki,Z,$){super(null,B,I,k,N,X,v,M,Z,$),this.isDataTexture=!0,this.image={data:e,width:l,height:f},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const nl=new si,A3=new si;class Np{constructor(e=[],l=[]){this.uuid=Ha(),this.bones=e.slice(0),this.boneInverses=l,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,l=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),l.length===0)this.calculateInverses();else if(e.length!==l.length){w.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let f=0,v=this.bones.length;f<v;f++)this.boneInverses.push(new si)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,l=this.bones.length;e<l;e++){const f=new si;this.bones[e]&&f.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(f)}}pose(){for(let e=0,l=this.bones.length;e<l;e++){const f=this.bones[e];f&&f.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,l=this.bones.length;e<l;e++){const f=this.bones[e];f&&(f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(f.matrixWorld)):f.matrix.copy(f.matrixWorld),f.matrix.decompose(f.position,f.quaternion,f.scale))}}update(){const e=this.bones,l=this.boneInverses,f=this.boneMatrices,v=this.boneTexture;for(let M=0,B=e.length;M<B;M++){const I=e[M]?e[M].matrixWorld:A3;nl.multiplyMatrices(I,l[M]),nl.toArray(f,M*16)}v!==null&&(v.needsUpdate=!0)}clone(){return new Np(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=pl(e),e=Math.max(e,4);const l=new Float32Array(e*e*4);l.set(this.boneMatrices);const f=new fh(l,e,e,$e,No);return f.needsUpdate=!0,this.boneMatrices=l,this.boneTexture=f,this.boneTextureSize=e,this}getBoneByName(e){for(let l=0,f=this.bones.length;l<f;l++){const v=this.bones[l];if(v.name===e)return v}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,l){this.uuid=e.uuid;for(let f=0,v=e.bones.length;f<v;f++){const M=e.bones[f];let B=l[M];B===void 0&&(w.warn("THREE.Skeleton: No bone found with UUID:",M),B=new Ym),this.bones.push(B),this.boneInverses.push(new si().fromArray(e.boneInverses[f]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const l=this.bones,f=this.boneInverses;for(let v=0,M=l.length;v<M;v++){const B=l[v];e.bones.push(B.uuid);const I=f[v];e.boneInverses.push(I.toArray())}return e}}class wu extends uo{constructor(e,l,f,v=1){super(e,l,f),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=v}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gh=new si,nv=new si,mh=[],rv=new Lo,z1=new si,vf=new fo,Gg=new wa;class iv extends fo{constructor(e,l,f){super(e,l),this.isInstancedMesh=!0,this.instanceMatrix=new wu(new Float32Array(f*16),16),this.instanceColor=null,this.count=f,this.boundingBox=null,this.boundingSphere=null;for(let v=0;v<f;v++)this.setMatrixAt(v,z1)}computeBoundingBox(){const e=this.geometry,l=this.count;this.boundingBox===null&&(this.boundingBox=new Lo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let f=0;f<l;f++)this.getMatrixAt(f,gh),rv.copy(e.boundingBox).applyMatrix4(gh),this.boundingBox.union(rv)}computeBoundingSphere(){const e=this.geometry,l=this.count;this.boundingSphere===null&&(this.boundingSphere=new wa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let f=0;f<l;f++)this.getMatrixAt(f,gh),Gg.copy(e.boundingSphere).applyMatrix4(gh),this.boundingSphere.union(Gg)}copy(e,l){return super.copy(e,l),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,l){l.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,l){l.fromArray(this.instanceMatrix.array,e*16)}raycast(e,l){const f=this.matrixWorld,v=this.count;if(vf.geometry=this.geometry,vf.material=this.material,vf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gg.copy(this.boundingSphere),Gg.applyMatrix4(f),e.ray.intersectsSphere(Gg)!==!1))for(let M=0;M<v;M++){this.getMatrixAt(M,gh),nv.multiplyMatrices(f,gh),vf.matrixWorld=nv,vf.raycast(e,mh);for(let B=0,I=mh.length;B<I;B++){const k=mh[B];k.instanceId=M,k.object=this,l.push(k)}mh.length=0}}setColorAt(e,l){this.instanceColor===null&&(this.instanceColor=new wu(new Float32Array(this.instanceMatrix.count*3),3)),l.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,l){l.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Rl extends fa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const G1=new Xe,ov=new Xe,U1=new si,N1=new Cp,Jm=new wa;class fd extends Ti{constructor(e=new xi,l=new Rl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=l,this.updateMorphTargets()}copy(e,l){return super.copy(e,l),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const l=e.attributes.position,f=[0];for(let v=1,M=l.count;v<M;v++)G1.fromBufferAttribute(l,v-1),ov.fromBufferAttribute(l,v),f[v]=f[v-1],f[v]+=G1.distanceTo(ov);e.setAttribute("lineDistance",new wr(f,1))}else w.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,l){const f=this.geometry,v=this.matrixWorld,M=e.params.Line.threshold,B=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),Jm.copy(f.boundingSphere),Jm.applyMatrix4(v),Jm.radius+=M,e.ray.intersectsSphere(Jm)===!1)return;U1.copy(v).invert(),N1.copy(e.ray).applyMatrix4(U1);const I=M/((this.scale.x+this.scale.y+this.scale.z)/3),k=I*I,N=new Xe,X=new Xe,Z=new Xe,$=new Xe,J=this.isLineSegments?2:1,re=f.index,se=f.attributes.position;if(re!==null){const ne=Math.max(0,B.start),be=Math.min(re.count,B.start+B.count);for(let he=ne,Se=be-1;he<Se;he+=J){const Oe=re.getX(he),Qe=re.getX(he+1);if(N.fromBufferAttribute(se,Oe),X.fromBufferAttribute(se,Qe),N1.distanceSqToSegment(N,X,$,Z)>k)continue;$.applyMatrix4(this.matrixWorld);const ht=e.ray.origin.distanceTo($);ht<e.near||ht>e.far||l.push({distance:ht,point:Z.clone().applyMatrix4(this.matrixWorld),index:he,face:null,faceIndex:null,object:this})}}else{const ne=Math.max(0,B.start),be=Math.min(se.count,B.start+B.count);for(let he=ne,Se=be-1;he<Se;he+=J){if(N.fromBufferAttribute(se,he),X.fromBufferAttribute(se,he+1),N1.distanceSqToSegment(N,X,$,Z)>k)continue;$.applyMatrix4(this.matrixWorld);const Qe=e.ray.origin.distanceTo($);Qe<e.near||Qe>e.far||l.push({distance:Qe,point:Z.clone().applyMatrix4(this.matrixWorld),index:he,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const l=this.geometry.morphAttributes,f=Object.keys(l);if(f.length>0){const v=l[f[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,B=v.length;M<B;M++){const I=v[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=M}}}}}const sv=new Xe,av=new Xe;class Hp extends fd{constructor(e,l){super(e,l),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const l=e.attributes.position,f=[];for(let v=0,M=l.count;v<M;v+=2)sv.fromBufferAttribute(l,v),av.fromBufferAttribute(l,v+1),f[v]=v===0?0:f[v-1],f[v+1]=f[v]+sv.distanceTo(av);e.setAttribute("lineDistance",new wr(f,1))}else w.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gd extends fd{constructor(e,l){super(e,l),this.isLineLoop=!0,this.type="LineLoop"}}class H1 extends fa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new pr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const j1=new si,md=new Cp,W1=new wa,Ah=new Xe;class V1 extends Ti{constructor(e=new xi,l=new H1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=l,this.updateMorphTargets()}copy(e,l){return super.copy(e,l),this.material=e.material,this.geometry=e.geometry,this}raycast(e,l){const f=this.geometry,v=this.matrixWorld,M=e.params.Points.threshold,B=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),W1.copy(f.boundingSphere),W1.applyMatrix4(v),W1.radius+=M,e.ray.intersectsSphere(W1)===!1)return;j1.copy(v).invert(),md.copy(e.ray).applyMatrix4(j1);const I=M/((this.scale.x+this.scale.y+this.scale.z)/3),k=I*I,N=f.index,Z=f.attributes.position;if(N!==null){const $=Math.max(0,B.start),J=Math.min(N.count,B.start+B.count);for(let re=$,fe=J;re<fe;re++){const se=N.getX(re);Ah.fromBufferAttribute(Z,se),Q1(Ah,se,k,v,e,l,this)}}else{const $=Math.max(0,B.start),J=Math.min(Z.count,B.start+B.count);for(let re=$,fe=J;re<fe;re++)Ah.fromBufferAttribute(Z,re),Q1(Ah,re,k,v,e,l,this)}}updateMorphTargets(){const l=this.geometry.morphAttributes,f=Object.keys(l);if(f.length>0){const v=l[f[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,B=v.length;M<B;M++){const I=v[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=M}}}}}function Q1(C,e,l,f,v,M,B){const I=md.distanceSqToPoint(C);if(I<l){const k=new Xe;md.closestPointToPoint(C,k),k.applyMatrix4(f);const N=v.ray.origin.distanceTo(k);if(N<v.near||N>v.far)return;M.push({distance:N,distanceToRay:Math.sqrt(I),point:k,index:e,face:null,object:B})}}class y3 extends io{constructor(e,l,f,v,M,B,I,k,N){super(e,l,f,v,M,B,I,k,N),this.isVideoTexture=!0,this.minFilter=B!==void 0?B:co,this.magFilter=M!==void 0?M:co,this.generateMipmaps=!1;const X=this;function Z(){X.needsUpdate=!0,e.requestVideoFrameCallback(Z)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(Z)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class v3 extends io{constructor(e,l){super({width:e,height:l}),this.isFramebufferTexture=!0,this.magFilter=ki,this.minFilter=ki,this.generateMipmaps=!1,this.needsUpdate=!0}}class qm extends io{constructor(e,l,f,v,M,B,I,k,N,X,Z,$){super(null,B,I,k,N,X,v,M,Z,$),this.isCompressedTexture=!0,this.image={width:l,height:f},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Zm extends qm{constructor(e,l,f,v,M,B){super(e,l,f,M,B),this.isCompressedArrayTexture=!0,this.image.depth=v,this.wrapR=Br}}class _3 extends io{constructor(e,l,f,v,M,B,I,k,N){super(e,l,f,v,M,B,I,k,N),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Pc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return w.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,l){const f=this.getUtoTmapping(e);return this.getPoint(f,l)}getPoints(e=5){const l=[];for(let f=0;f<=e;f++)l.push(this.getPoint(f/e));return l}getSpacedPoints(e=5){const l=[];for(let f=0;f<=e;f++)l.push(this.getPointAt(f/e));return l}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const l=[];let f,v=this.getPoint(0),M=0;l.push(0);for(let B=1;B<=e;B++)f=this.getPoint(B/e),M+=f.distanceTo(v),l.push(M),v=f;return this.cacheArcLengths=l,l}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,l){const f=this.getLengths();let v=0;const M=f.length;let B;l?B=l:B=e*f[M-1];let I=0,k=M-1,N;for(;I<=k;)if(v=Math.floor(I+(k-I)/2),N=f[v]-B,N<0)I=v+1;else if(N>0)k=v-1;else{k=v;break}if(v=k,f[v]===B)return v/(M-1);const X=f[v],$=f[v+1]-X,J=(B-X)/$;return(v+J)/(M-1)}getTangent(e,l){let v=e-1e-4,M=e+1e-4;v<0&&(v=0),M>1&&(M=1);const B=this.getPoint(v),I=this.getPoint(M),k=l||(B.isVector2?new fn:new Xe);return k.copy(I).sub(B).normalize(),k}getTangentAt(e,l){const f=this.getUtoTmapping(e);return this.getTangent(f,l)}computeFrenetFrames(e,l){const f=new Xe,v=[],M=[],B=[],I=new Xe,k=new si;for(let J=0;J<=e;J++){const re=J/e;v[J]=this.getTangentAt(re,new Xe)}M[0]=new Xe,B[0]=new Xe;let N=Number.MAX_VALUE;const X=Math.abs(v[0].x),Z=Math.abs(v[0].y),$=Math.abs(v[0].z);X<=N&&(N=X,f.set(1,0,0)),Z<=N&&(N=Z,f.set(0,1,0)),$<=N&&f.set(0,0,1),I.crossVectors(v[0],f).normalize(),M[0].crossVectors(v[0],I),B[0].crossVectors(v[0],M[0]);for(let J=1;J<=e;J++){if(M[J]=M[J-1].clone(),B[J]=B[J-1].clone(),I.crossVectors(v[J-1],v[J]),I.length()>Number.EPSILON){I.normalize();const re=Math.acos(_o(v[J-1].dot(v[J]),-1,1));M[J].applyMatrix4(k.makeRotationAxis(I,re))}B[J].crossVectors(v[J],M[J])}if(l===!0){let J=Math.acos(_o(M[0].dot(M[e]),-1,1));J/=e,v[0].dot(I.crossVectors(M[0],M[e]))>0&&(J=-J);for(let re=1;re<=e;re++)M[re].applyMatrix4(k.makeRotationAxis(v[re],J*re)),B[re].crossVectors(v[re],M[re])}return{tangents:v,normals:M,binormals:B}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class X1 extends Pc{constructor(e=0,l=0,f=1,v=1,M=0,B=Math.PI*2,I=!1,k=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=l,this.xRadius=f,this.yRadius=v,this.aStartAngle=M,this.aEndAngle=B,this.aClockwise=I,this.aRotation=k}getPoint(e,l){const f=l||new fn,v=Math.PI*2;let M=this.aEndAngle-this.aStartAngle;const B=Math.abs(M)<Number.EPSILON;for(;M<0;)M+=v;for(;M>v;)M-=v;M<Number.EPSILON&&(B?M=0:M=v),this.aClockwise===!0&&!B&&(M===v?M=-v:M=M-v);const I=this.aStartAngle+e*M;let k=this.aX+this.xRadius*Math.cos(I),N=this.aY+this.yRadius*Math.sin(I);if(this.aRotation!==0){const X=Math.cos(this.aRotation),Z=Math.sin(this.aRotation),$=k-this.aX,J=N-this.aY;k=$*X-J*Z+this.aX,N=$*Z+J*X+this.aY}return f.set(k,N)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class lv extends X1{constructor(e,l,f,v,M,B){super(e,l,f,f,v,M,B),this.isArcCurve=!0,this.type="ArcCurve"}}function cv(){let C=0,e=0,l=0,f=0;function v(M,B,I,k){C=M,e=I,l=-3*M+3*B-2*I-k,f=2*M-2*B+I+k}return{initCatmullRom:function(M,B,I,k,N){v(B,I,N*(I-M),N*(k-B))},initNonuniformCatmullRom:function(M,B,I,k,N,X,Z){let $=(B-M)/N-(I-M)/(N+X)+(I-B)/X,J=(I-B)/X-(k-B)/(X+Z)+(k-I)/Z;$*=X,J*=X,v(B,I,$,J)},calc:function(M){const B=M*M,I=B*M;return C+e*M+l*B+f*I}}}const Ug=new Xe,K1=new cv,Y1=new cv,$m=new cv;class pv extends Pc{constructor(e=[],l=!1,f="centripetal",v=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=l,this.curveType=f,this.tension=v}getPoint(e,l=new Xe){const f=l,v=this.points,M=v.length,B=(M-(this.closed?0:1))*e;let I=Math.floor(B),k=B-I;this.closed?I+=I>0?0:(Math.floor(Math.abs(I)/M)+1)*M:k===0&&I===M-1&&(I=M-2,k=1);let N,X;this.closed||I>0?N=v[(I-1)%M]:(Ug.subVectors(v[0],v[1]).add(v[0]),N=Ug);const Z=v[I%M],$=v[(I+1)%M];if(this.closed||I+2<M?X=v[(I+2)%M]:(Ug.subVectors(v[M-1],v[M-2]).add(v[M-1]),X=Ug),this.curveType==="centripetal"||this.curveType==="chordal"){const J=this.curveType==="chordal"?.5:.25;let re=Math.pow(N.distanceToSquared(Z),J),fe=Math.pow(Z.distanceToSquared($),J),se=Math.pow($.distanceToSquared(X),J);fe<1e-4&&(fe=1),re<1e-4&&(re=fe),se<1e-4&&(se=fe),K1.initNonuniformCatmullRom(N.x,Z.x,$.x,X.x,re,fe,se),Y1.initNonuniformCatmullRom(N.y,Z.y,$.y,X.y,re,fe,se),$m.initNonuniformCatmullRom(N.z,Z.z,$.z,X.z,re,fe,se)}else this.curveType==="catmullrom"&&(K1.initCatmullRom(N.x,Z.x,$.x,X.x,this.tension),Y1.initCatmullRom(N.y,Z.y,$.y,X.y,this.tension),$m.initCatmullRom(N.z,Z.z,$.z,X.z,this.tension));return f.set(K1.calc(k),Y1.calc(k),$m.calc(k)),f}copy(e){super.copy(e),this.points=[];for(let l=0,f=e.points.length;l<f;l++){const v=e.points[l];this.points.push(v.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let l=0,f=this.points.length;l<f;l++){const v=this.points[l];e.points.push(v.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let l=0,f=e.points.length;l<f;l++){const v=e.points[l];this.points.push(new Xe().fromArray(v))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function uv(C,e,l,f,v){const M=(f-e)*.5,B=(v-l)*.5,I=C*C,k=C*I;return(2*l-2*f+M+B)*k+(-3*l+3*f-2*M-B)*I+M*C+l}function J1(C,e){const l=1-C;return l*l*e}function E3(C,e){return 2*(1-C)*C*e}function b3(C,e){return C*C*e}function Ng(C,e,l,f){return J1(C,e)+E3(C,l)+b3(C,f)}function M3(C,e){const l=1-C;return l*l*l*e}function x3(C,e){const l=1-C;return 3*l*l*C*e}function q1(C,e){return 3*(1-C)*C*C*e}function dv(C,e){return C*C*C*e}function _f(C,e,l,f,v){return M3(C,e)+x3(C,l)+q1(C,f)+dv(C,v)}class Ef extends Pc{constructor(e=new fn,l=new fn,f=new fn,v=new fn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=l,this.v2=f,this.v3=v}getPoint(e,l=new fn){const f=l,v=this.v0,M=this.v1,B=this.v2,I=this.v3;return f.set(_f(e,v.x,M.x,B.x,I.x),_f(e,v.y,M.y,B.y,I.y)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class e0 extends Pc{constructor(e=new Xe,l=new Xe,f=new Xe,v=new Xe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=l,this.v2=f,this.v3=v}getPoint(e,l=new Xe){const f=l,v=this.v0,M=this.v1,B=this.v2,I=this.v3;return f.set(_f(e,v.x,M.x,B.x,I.x),_f(e,v.y,M.y,B.y,I.y),_f(e,v.z,M.z,B.z,I.z)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ad extends Pc{constructor(e=new fn,l=new fn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=l}getPoint(e,l=new fn){const f=l;return e===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(e).add(this.v1)),f}getPointAt(e,l){return this.getPoint(e,l)}getTangent(e,l=new fn){return l.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,l){return this.getTangent(e,l)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hv extends Pc{constructor(e=new Xe,l=new Xe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=l}getPoint(e,l=new Xe){const f=l;return e===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(e).add(this.v1)),f}getPointAt(e,l){return this.getPoint(e,l)}getTangent(e,l=new Xe){return l.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,l){return this.getTangent(e,l)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hg extends Pc{constructor(e=new fn,l=new fn,f=new fn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=l,this.v2=f}getPoint(e,l=new fn){const f=l,v=this.v0,M=this.v1,B=this.v2;return f.set(Ng(e,v.x,M.x,B.x),Ng(e,v.y,M.y,B.y)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class t0 extends Pc{constructor(e=new Xe,l=new Xe,f=new Xe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=l,this.v2=f}getPoint(e,l=new Xe){const f=l,v=this.v0,M=this.v1,B=this.v2;return f.set(Ng(e,v.x,M.x,B.x),Ng(e,v.y,M.y,B.y),Ng(e,v.z,M.z,B.z)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class n0 extends Pc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,l=new fn){const f=l,v=this.points,M=(v.length-1)*e,B=Math.floor(M),I=M-B,k=v[B===0?B:B-1],N=v[B],X=v[B>v.length-2?v.length-1:B+1],Z=v[B>v.length-3?v.length-1:B+2];return f.set(uv(I,k.x,N.x,X.x,Z.x),uv(I,k.y,N.y,X.y,Z.y)),f}copy(e){super.copy(e),this.points=[];for(let l=0,f=e.points.length;l<f;l++){const v=e.points[l];this.points.push(v.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let l=0,f=this.points.length;l<f;l++){const v=this.points[l];e.points.push(v.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let l=0,f=e.points.length;l<f;l++){const v=e.points[l];this.points.push(new fn().fromArray(v))}return this}}var r0=Object.freeze({__proto__:null,ArcCurve:lv,CatmullRomCurve3:pv,CubicBezierCurve:Ef,CubicBezierCurve3:e0,EllipseCurve:X1,LineCurve:Ad,LineCurve3:hv,QuadraticBezierCurve:Hg,QuadraticBezierCurve3:t0,SplineCurve:n0});class fv extends Pc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),l=this.curves[this.curves.length-1].getPoint(1);e.equals(l)||this.curves.push(new Ad(l,e))}getPoint(e,l){const f=e*this.getLength(),v=this.getCurveLengths();let M=0;for(;M<v.length;){if(v[M]>=f){const B=v[M]-f,I=this.curves[M],k=I.getLength(),N=k===0?0:1-B/k;return I.getPointAt(N,l)}M++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let l=0;for(let f=0,v=this.curves.length;f<v;f++)l+=this.curves[f].getLength(),e.push(l);return this.cacheLengths=e,e}getSpacedPoints(e=40){const l=[];for(let f=0;f<=e;f++)l.push(this.getPoint(f/e));return this.autoClose&&l.push(l[0]),l}getPoints(e=12){const l=[];let f;for(let v=0,M=this.curves;v<M.length;v++){const B=M[v],I=B.isEllipseCurve?e*2:B.isLineCurve||B.isLineCurve3?1:B.isSplineCurve?e*B.points.length:e,k=B.getPoints(I);for(let N=0;N<k.length;N++){const X=k[N];f&&f.equals(X)||(l.push(X),f=X)}}return this.autoClose&&l.length>1&&!l[l.length-1].equals(l[0])&&l.push(l[0]),l}copy(e){super.copy(e),this.curves=[];for(let l=0,f=e.curves.length;l<f;l++){const v=e.curves[l];this.curves.push(v.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let l=0,f=this.curves.length;l<f;l++){const v=this.curves[l];e.curves.push(v.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let l=0,f=e.curves.length;l<f;l++){const v=e.curves[l];this.curves.push(new r0[v.type]().fromJSON(v))}return this}}class jg extends fv{constructor(e){super(),this.type="Path",this.currentPoint=new fn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let l=1,f=e.length;l<f;l++)this.lineTo(e[l].x,e[l].y);return this}moveTo(e,l){return this.currentPoint.set(e,l),this}lineTo(e,l){const f=new Ad(this.currentPoint.clone(),new fn(e,l));return this.curves.push(f),this.currentPoint.set(e,l),this}quadraticCurveTo(e,l,f,v){const M=new Hg(this.currentPoint.clone(),new fn(e,l),new fn(f,v));return this.curves.push(M),this.currentPoint.set(f,v),this}bezierCurveTo(e,l,f,v,M,B){const I=new Ef(this.currentPoint.clone(),new fn(e,l),new fn(f,v),new fn(M,B));return this.curves.push(I),this.currentPoint.set(M,B),this}splineThru(e){const l=[this.currentPoint.clone()].concat(e),f=new n0(l);return this.curves.push(f),this.currentPoint.copy(e[e.length-1]),this}arc(e,l,f,v,M,B){const I=this.currentPoint.x,k=this.currentPoint.y;return this.absarc(e+I,l+k,f,v,M,B),this}absarc(e,l,f,v,M,B){return this.absellipse(e,l,f,f,v,M,B),this}ellipse(e,l,f,v,M,B,I,k){const N=this.currentPoint.x,X=this.currentPoint.y;return this.absellipse(e+N,l+X,f,v,M,B,I,k),this}absellipse(e,l,f,v,M,B,I,k){const N=new X1(e,l,f,v,M,B,I,k);if(this.curves.length>0){const Z=N.getPoint(0);Z.equals(this.currentPoint)||this.lineTo(Z.x,Z.y)}this.curves.push(N);const X=N.getPoint(1);return this.currentPoint.copy(X),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class bf extends xi{constructor(e=[new fn(0,-.5),new fn(.5,0),new fn(0,.5)],l=12,f=0,v=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:l,phiStart:f,phiLength:v},l=Math.floor(l),v=_o(v,0,Math.PI*2);const M=[],B=[],I=[],k=[],N=[],X=1/l,Z=new Xe,$=new fn,J=new Xe,re=new Xe,fe=new Xe;let se=0,ne=0;for(let be=0;be<=e.length-1;be++)switch(be){case 0:se=e[be+1].x-e[be].x,ne=e[be+1].y-e[be].y,J.x=ne*1,J.y=-se,J.z=ne*0,fe.copy(J),J.normalize(),k.push(J.x,J.y,J.z);break;case e.length-1:k.push(fe.x,fe.y,fe.z);break;default:se=e[be+1].x-e[be].x,ne=e[be+1].y-e[be].y,J.x=ne*1,J.y=-se,J.z=ne*0,re.copy(J),J.x+=fe.x,J.y+=fe.y,J.z+=fe.z,J.normalize(),k.push(J.x,J.y,J.z),fe.copy(re)}for(let be=0;be<=l;be++){const he=f+be*X*v,Se=Math.sin(he),Oe=Math.cos(he);for(let Qe=0;Qe<=e.length-1;Qe++){Z.x=e[Qe].x*Se,Z.y=e[Qe].y,Z.z=e[Qe].x*Oe,B.push(Z.x,Z.y,Z.z),$.x=be/l,$.y=Qe/(e.length-1),I.push($.x,$.y);const Ze=k[3*Qe+0]*Se,ht=k[3*Qe+1],we=k[3*Qe+0]*Oe;N.push(Ze,ht,we)}}for(let be=0;be<l;be++)for(let he=0;he<e.length-1;he++){const Se=he+be*e.length,Oe=Se,Qe=Se+e.length,Ze=Se+e.length+1,ht=Se+1;M.push(Oe,Qe,ht),M.push(Ze,ht,Qe)}this.setIndex(M),this.setAttribute("position",new wr(B,3)),this.setAttribute("uv",new wr(I,2)),this.setAttribute("normal",new wr(N,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bf(e.points,e.segments,e.phiStart,e.phiLength)}}class i0 extends bf{constructor(e=1,l=1,f=4,v=8){const M=new jg;M.absarc(0,-l/2,e,Math.PI*1.5,0),M.absarc(0,l/2,e,0,Math.PI*.5),super(M.getPoints(f),v),this.type="CapsuleGeometry",this.parameters={radius:e,height:l,capSegments:f,radialSegments:v}}static fromJSON(e){return new i0(e.radius,e.length,e.capSegments,e.radialSegments)}}class Wg extends xi{constructor(e=1,l=32,f=0,v=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:l,thetaStart:f,thetaLength:v},l=Math.max(3,l);const M=[],B=[],I=[],k=[],N=new Xe,X=new fn;B.push(0,0,0),I.push(0,0,1),k.push(.5,.5);for(let Z=0,$=3;Z<=l;Z++,$+=3){const J=f+Z/l*v;N.x=e*Math.cos(J),N.y=e*Math.sin(J),B.push(N.x,N.y,N.z),I.push(0,0,1),X.x=(B[$]/e+1)/2,X.y=(B[$+1]/e+1)/2,k.push(X.x,X.y)}for(let Z=1;Z<=l;Z++)M.push(Z,Z+1,0);this.setIndex(M),this.setAttribute("position",new wr(B,3)),this.setAttribute("normal",new wr(I,3)),this.setAttribute("uv",new wr(k,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vg extends xi{constructor(e=1,l=1,f=1,v=32,M=1,B=!1,I=0,k=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:l,height:f,radialSegments:v,heightSegments:M,openEnded:B,thetaStart:I,thetaLength:k};const N=this;v=Math.floor(v),M=Math.floor(M);const X=[],Z=[],$=[],J=[];let re=0;const fe=[],se=f/2;let ne=0;be(),B===!1&&(e>0&&he(!0),l>0&&he(!1)),this.setIndex(X),this.setAttribute("position",new wr(Z,3)),this.setAttribute("normal",new wr($,3)),this.setAttribute("uv",new wr(J,2));function be(){const Se=new Xe,Oe=new Xe;let Qe=0;const Ze=(l-e)/f;for(let ht=0;ht<=M;ht++){const we=[],Ve=ht/M,$t=Ve*(l-e)+e;for(let bn=0;bn<=v;bn++){const Nt=bn/v,Vt=Nt*k+I,en=Math.sin(Vt),Ht=Math.cos(Vt);Oe.x=$t*en,Oe.y=-Ve*f+se,Oe.z=$t*Ht,Z.push(Oe.x,Oe.y,Oe.z),Se.set(en,Ze,Ht).normalize(),$.push(Se.x,Se.y,Se.z),J.push(Nt,1-Ve),we.push(re++)}fe.push(we)}for(let ht=0;ht<v;ht++)for(let we=0;we<M;we++){const Ve=fe[we][ht],$t=fe[we+1][ht],bn=fe[we+1][ht+1],Nt=fe[we][ht+1];X.push(Ve,$t,Nt),X.push($t,bn,Nt),Qe+=6}N.addGroup(ne,Qe,0),ne+=Qe}function he(Se){const Oe=re,Qe=new fn,Ze=new Xe;let ht=0;const we=Se===!0?e:l,Ve=Se===!0?1:-1;for(let bn=1;bn<=v;bn++)Z.push(0,se*Ve,0),$.push(0,Ve,0),J.push(.5,.5),re++;const $t=re;for(let bn=0;bn<=v;bn++){const Vt=bn/v*k+I,en=Math.cos(Vt),Ht=Math.sin(Vt);Ze.x=we*Ht,Ze.y=se*Ve,Ze.z=we*en,Z.push(Ze.x,Ze.y,Ze.z),$.push(0,Ve,0),Qe.x=en*.5+.5,Qe.y=Ht*.5*Ve+.5,J.push(Qe.x,Qe.y),re++}for(let bn=0;bn<v;bn++){const Nt=Oe+bn,Vt=$t+bn;Se===!0?X.push(Vt,Vt+1,Nt):X.push(Vt+1,Vt,Nt),ht+=3}N.addGroup(ne,ht,Se===!0?1:2),ne+=ht}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qg extends Vg{constructor(e=1,l=1,f=32,v=1,M=!1,B=0,I=Math.PI*2){super(0,e,l,f,v,M,B,I),this.type="ConeGeometry",this.parameters={radius:e,height:l,radialSegments:f,heightSegments:v,openEnded:M,thetaStart:B,thetaLength:I}}static fromJSON(e){return new Qg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yh extends xi{constructor(e=[],l=[],f=1,v=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:l,radius:f,detail:v};const M=[],B=[];I(v),N(f),X(),this.setAttribute("position",new wr(M,3)),this.setAttribute("normal",new wr(M.slice(),3)),this.setAttribute("uv",new wr(B,2)),v===0?this.computeVertexNormals():this.normalizeNormals();function I(be){const he=new Xe,Se=new Xe,Oe=new Xe;for(let Qe=0;Qe<l.length;Qe+=3)J(l[Qe+0],he),J(l[Qe+1],Se),J(l[Qe+2],Oe),k(he,Se,Oe,be)}function k(be,he,Se,Oe){const Qe=Oe+1,Ze=[];for(let ht=0;ht<=Qe;ht++){Ze[ht]=[];const we=be.clone().lerp(Se,ht/Qe),Ve=he.clone().lerp(Se,ht/Qe),$t=Qe-ht;for(let bn=0;bn<=$t;bn++)bn===0&&ht===Qe?Ze[ht][bn]=we:Ze[ht][bn]=we.clone().lerp(Ve,bn/$t)}for(let ht=0;ht<Qe;ht++)for(let we=0;we<2*(Qe-ht)-1;we++){const Ve=Math.floor(we/2);we%2===0?($(Ze[ht][Ve+1]),$(Ze[ht+1][Ve]),$(Ze[ht][Ve])):($(Ze[ht][Ve+1]),$(Ze[ht+1][Ve+1]),$(Ze[ht+1][Ve]))}}function N(be){const he=new Xe;for(let Se=0;Se<M.length;Se+=3)he.x=M[Se+0],he.y=M[Se+1],he.z=M[Se+2],he.normalize().multiplyScalar(be),M[Se+0]=he.x,M[Se+1]=he.y,M[Se+2]=he.z}function X(){const be=new Xe;for(let he=0;he<M.length;he+=3){be.x=M[he+0],be.y=M[he+1],be.z=M[he+2];const Se=se(be)/2/Math.PI+.5,Oe=ne(be)/Math.PI+.5;B.push(Se,1-Oe)}re(),Z()}function Z(){for(let be=0;be<B.length;be+=6){const he=B[be+0],Se=B[be+2],Oe=B[be+4],Qe=Math.max(he,Se,Oe),Ze=Math.min(he,Se,Oe);Qe>.9&&Ze<.1&&(he<.2&&(B[be+0]+=1),Se<.2&&(B[be+2]+=1),Oe<.2&&(B[be+4]+=1))}}function $(be){M.push(be.x,be.y,be.z)}function J(be,he){const Se=be*3;he.x=e[Se+0],he.y=e[Se+1],he.z=e[Se+2]}function re(){const be=new Xe,he=new Xe,Se=new Xe,Oe=new Xe,Qe=new fn,Ze=new fn,ht=new fn;for(let we=0,Ve=0;we<M.length;we+=9,Ve+=6){be.set(M[we+0],M[we+1],M[we+2]),he.set(M[we+3],M[we+4],M[we+5]),Se.set(M[we+6],M[we+7],M[we+8]),Qe.set(B[Ve+0],B[Ve+1]),Ze.set(B[Ve+2],B[Ve+3]),ht.set(B[Ve+4],B[Ve+5]),Oe.copy(be).add(he).add(Se).divideScalar(3);const $t=se(Oe);fe(Qe,Ve+0,be,$t),fe(Ze,Ve+2,he,$t),fe(ht,Ve+4,Se,$t)}}function fe(be,he,Se,Oe){Oe<0&&be.x===1&&(B[he]=be.x-1),Se.x===0&&Se.z===0&&(B[he]=Oe/2/Math.PI+.5)}function se(be){return Math.atan2(be.z,-be.x)}function ne(be){return Math.atan2(-be.y,Math.sqrt(be.x*be.x+be.z*be.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yh(e.vertices,e.indices,e.radius,e.details)}}class Xg extends yh{constructor(e=1,l=0){const f=(1+Math.sqrt(5))/2,v=1/f,M=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-v,-f,0,-v,f,0,v,-f,0,v,f,-v,-f,0,-v,f,0,v,-f,0,v,f,0,-f,0,-v,f,0,-v,-f,0,v,f,0,v],B=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(M,B,e,l),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:l}}static fromJSON(e){return new Xg(e.radius,e.detail)}}const o0=new Xe,Il=new Xe,Z1=new Xe,s0=new Ya;class Oa extends xi{constructor(e=null,l=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:l},e!==null){const v=Math.pow(10,4),M=Math.cos(yc*l),B=e.getIndex(),I=e.getAttribute("position"),k=B?B.count:I.count,N=[0,0,0],X=["a","b","c"],Z=new Array(3),$={},J=[];for(let re=0;re<k;re+=3){B?(N[0]=B.getX(re),N[1]=B.getX(re+1),N[2]=B.getX(re+2)):(N[0]=re,N[1]=re+1,N[2]=re+2);const{a:fe,b:se,c:ne}=s0;if(fe.fromBufferAttribute(I,N[0]),se.fromBufferAttribute(I,N[1]),ne.fromBufferAttribute(I,N[2]),s0.getNormal(Z1),Z[0]=`${Math.round(fe.x*v)},${Math.round(fe.y*v)},${Math.round(fe.z*v)}`,Z[1]=`${Math.round(se.x*v)},${Math.round(se.y*v)},${Math.round(se.z*v)}`,Z[2]=`${Math.round(ne.x*v)},${Math.round(ne.y*v)},${Math.round(ne.z*v)}`,!(Z[0]===Z[1]||Z[1]===Z[2]||Z[2]===Z[0]))for(let be=0;be<3;be++){const he=(be+1)%3,Se=Z[be],Oe=Z[he],Qe=s0[X[be]],Ze=s0[X[he]],ht=`${Se}_${Oe}`,we=`${Oe}_${Se}`;we in $&&$[we]?(Z1.dot($[we].normal)<=M&&(J.push(Qe.x,Qe.y,Qe.z),J.push(Ze.x,Ze.y,Ze.z)),$[we]=null):ht in $||($[ht]={index0:N[be],index1:N[he],normal:Z1.clone()})}}for(const re in $)if($[re]){const{index0:fe,index1:se}=$[re];o0.fromBufferAttribute(I,fe),Il.fromBufferAttribute(I,se),J.push(o0.x,o0.y,o0.z),J.push(Il.x,Il.y,Il.z)}this.setAttribute("position",new wr(J,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Mf extends jg{constructor(e){super(e),this.uuid=Ha(),this.type="Shape",this.holes=[]}getPointsHoles(e){const l=[];for(let f=0,v=this.holes.length;f<v;f++)l[f]=this.holes[f].getPoints(e);return l}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let l=0,f=e.holes.length;l<f;l++){const v=e.holes[l];this.holes.push(v.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let l=0,f=this.holes.length;l<f;l++){const v=this.holes[l];e.holes.push(v.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let l=0,f=e.holes.length;l<f;l++){const v=e.holes[l];this.holes.push(new jg().fromJSON(v))}return this}}const gv={triangulate:function(C,e,l=2){const f=e&&e.length,v=f?e[0]*l:C.length;let M=C3(C,0,v,l,!0);const B=[];if(!M||M.next===M.prev)return B;let I,k,N,X,Z,$,J;if(f&&(M=T3(C,e,M,l)),C.length>80*l){I=N=C[0],k=X=C[1];for(let re=l;re<v;re+=l)Z=C[re],$=C[re+1],Z<I&&(I=Z),$<k&&(k=$),Z>N&&(N=Z),$>X&&(X=$);J=Math.max(N-I,X-k),J=J!==0?32767/J:0}return Kg(M,B,l,I,k,J,0),B}};function C3(C,e,l,f,v){let M,B;if(v===nA(C,e,l,f)>0)for(M=e;M<l;M+=f)B=yv(M,C[M],C[M+1],B);else for(M=l-f;M>=e;M-=f)B=yv(M,C[M],C[M+1],B);return B&&Jg(B,B.next)&&(qg(B),B=B.next),B}function xf(C,e){if(!C)return C;e||(e=C);let l=C,f;do if(f=!1,!l.steiner&&(Jg(l,l.next)||bs(l.prev,l,l.next)===0)){if(qg(l),l=e=l.prev,l===l.next)break;f=!0}else l=l.next;while(f||l!==e);return e}function Kg(C,e,l,f,v,M,B){if(!C)return;!B&&M&&I3(C,f,v,M);let I=C,k,N;for(;C.prev!==C.next;){if(k=C.prev,N=C.next,M?bM(C,f,v,M):mv(C)){e.push(k.i/l|0),e.push(C.i/l|0),e.push(N.i/l|0),qg(C),C=N.next,I=N.next;continue}if(C=N,C===I){B?B===1?(C=S3(xf(C),e,l),Kg(C,e,l,f,v,M,2)):B===2&&w3(C,e,l,f,v,M):Kg(xf(C),e,l,f,v,M,1);break}}}function mv(C){const e=C.prev,l=C,f=C.next;if(bs(e,l,f)>=0)return!1;const v=e.x,M=l.x,B=f.x,I=e.y,k=l.y,N=f.y,X=v<M?v<B?v:B:M<B?M:B,Z=I<k?I<N?I:N:k<N?k:N,$=v>M?v>B?v:B:M>B?M:B,J=I>k?I>N?I:N:k>N?k:N;let re=f.next;for(;re!==e;){if(re.x>=X&&re.x<=$&&re.y>=Z&&re.y<=J&&Tu(v,I,M,k,B,N,re.x,re.y)&&bs(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function bM(C,e,l,f){const v=C.prev,M=C,B=C.next;if(bs(v,M,B)>=0)return!1;const I=v.x,k=M.x,N=B.x,X=v.y,Z=M.y,$=B.y,J=I<k?I<N?I:N:k<N?k:N,re=X<Z?X<$?X:$:Z<$?Z:$,fe=I>k?I>N?I:N:k>N?k:N,se=X>Z?X>$?X:$:Z>$?Z:$,ne=Yg(J,re,e,l,f),be=Yg(fe,se,e,l,f);let he=C.prevZ,Se=C.nextZ;for(;he&&he.z>=ne&&Se&&Se.z<=be;){if(he.x>=J&&he.x<=fe&&he.y>=re&&he.y<=se&&he!==v&&he!==B&&Tu(I,X,k,Z,N,$,he.x,he.y)&&bs(he.prev,he,he.next)>=0||(he=he.prevZ,Se.x>=J&&Se.x<=fe&&Se.y>=re&&Se.y<=se&&Se!==v&&Se!==B&&Tu(I,X,k,Z,N,$,Se.x,Se.y)&&bs(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;he&&he.z>=ne;){if(he.x>=J&&he.x<=fe&&he.y>=re&&he.y<=se&&he!==v&&he!==B&&Tu(I,X,k,Z,N,$,he.x,he.y)&&bs(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;Se&&Se.z<=be;){if(Se.x>=J&&Se.x<=fe&&Se.y>=re&&Se.y<=se&&Se!==v&&Se!==B&&Tu(I,X,k,Z,N,$,Se.x,Se.y)&&bs(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function S3(C,e,l){let f=C;do{const v=f.prev,M=f.next.next;!Jg(v,M)&&tA(v,f,f.next,M)&&ap(v,M)&&ap(M,v)&&(e.push(v.i/l|0),e.push(f.i/l|0),e.push(M.i/l|0),qg(f),qg(f.next),f=C=M),f=f.next}while(f!==C);return xf(f)}function w3(C,e,l,f,v,M){let B=C;do{let I=B.next.next;for(;I!==B.prev;){if(B.i!==I.i&&O3(B,I)){let k=jp(B,I);B=xf(B,B.next),k=xf(k,k.next),Kg(B,e,l,f,v,M,0),Kg(k,e,l,f,v,M,0);return}I=I.next}B=B.next}while(B!==C)}function T3(C,e,l,f){const v=[];let M,B,I,k,N;for(M=0,B=e.length;M<B;M++)I=e[M]*f,k=M<B-1?e[M+1]*f:C.length,N=C3(C,I,k,f,!1),N===N.next&&(N.steiner=!0),v.push(Av(N));for(v.sort(B3),M=0;M<v.length;M++)l=$1(v[M],l);return l}function B3(C,e){return C.x-e.x}function $1(C,e){const l=R3(C,e);if(!l)return e;const f=jp(l,C);return xf(f,f.next),xf(l,l.next)}function R3(C,e){let l=e,f=-1/0,v;const M=C.x,B=C.y;do{if(B<=l.y&&B>=l.next.y&&l.next.y!==l.y){const $=l.x+(B-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if($<=M&&$>f&&(f=$,v=l.x<l.next.x?l:l.next,$===M))return v}l=l.next}while(l!==e);if(!v)return null;const I=v,k=v.x,N=v.y;let X=1/0,Z;l=v;do M>=l.x&&l.x>=k&&M!==l.x&&Tu(B<N?M:f,B,k,N,B<N?f:M,B,l.x,l.y)&&(Z=Math.abs(B-l.y)/(M-l.x),ap(l,C)&&(Z<X||Z===X&&(l.x>v.x||l.x===v.x&&eA(v,l)))&&(v=l,X=Z)),l=l.next;while(l!==I);return v}function eA(C,e){return bs(C.prev,C,e.prev)<0&&bs(e.next,C,C.next)<0}function I3(C,e,l,f){let v=C;do v.z===0&&(v.z=Yg(v.x,v.y,e,l,f)),v.prevZ=v.prev,v.nextZ=v.next,v=v.next;while(v!==C);v.prevZ.nextZ=null,v.prevZ=null,F3(v)}function F3(C){let e,l,f,v,M,B,I,k,N=1;do{for(l=C,C=null,M=null,B=0;l;){for(B++,f=l,I=0,e=0;e<N&&(I++,f=f.nextZ,!!f);e++);for(k=N;I>0||k>0&&f;)I!==0&&(k===0||!f||l.z<=f.z)?(v=l,l=l.nextZ,I--):(v=f,f=f.nextZ,k--),M?M.nextZ=v:C=v,v.prevZ=M,M=v;l=f}M.nextZ=null,N*=2}while(B>1);return C}function Yg(C,e,l,f,v){return C=(C-l)*v|0,e=(e-f)*v|0,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,C|e<<1}function Av(C){let e=C,l=C;do(e.x<l.x||e.x===l.x&&e.y<l.y)&&(l=e),e=e.next;while(e!==C);return l}function Tu(C,e,l,f,v,M,B,I){return(v-B)*(e-I)>=(C-B)*(M-I)&&(C-B)*(f-I)>=(l-B)*(e-I)&&(l-B)*(M-I)>=(v-B)*(f-I)}function O3(C,e){return C.next.i!==e.i&&C.prev.i!==e.i&&!D3(C,e)&&(ap(C,e)&&ap(e,C)&&c0(C,e)&&(bs(C.prev,C,e.prev)||bs(C,e.prev,e))||Jg(C,e)&&bs(C.prev,C,C.next)>0&&bs(e.prev,e,e.next)>0)}function bs(C,e,l){return(e.y-C.y)*(l.x-e.x)-(e.x-C.x)*(l.y-e.y)}function Jg(C,e){return C.x===e.x&&C.y===e.y}function tA(C,e,l,f){const v=l0(bs(C,e,l)),M=l0(bs(C,e,f)),B=l0(bs(l,f,C)),I=l0(bs(l,f,e));return!!(v!==M&&B!==I||v===0&&a0(C,l,e)||M===0&&a0(C,f,e)||B===0&&a0(l,C,f)||I===0&&a0(l,e,f))}function a0(C,e,l){return e.x<=Math.max(C.x,l.x)&&e.x>=Math.min(C.x,l.x)&&e.y<=Math.max(C.y,l.y)&&e.y>=Math.min(C.y,l.y)}function l0(C){return C>0?1:C<0?-1:0}function D3(C,e){let l=C;do{if(l.i!==C.i&&l.next.i!==C.i&&l.i!==e.i&&l.next.i!==e.i&&tA(l,l.next,C,e))return!0;l=l.next}while(l!==C);return!1}function ap(C,e){return bs(C.prev,C,C.next)<0?bs(C,e,C.next)>=0&&bs(C,C.prev,e)>=0:bs(C,e,C.prev)<0||bs(C,C.next,e)<0}function c0(C,e){let l=C,f=!1;const v=(C.x+e.x)/2,M=(C.y+e.y)/2;do l.y>M!=l.next.y>M&&l.next.y!==l.y&&v<(l.next.x-l.x)*(M-l.y)/(l.next.y-l.y)+l.x&&(f=!f),l=l.next;while(l!==C);return f}function jp(C,e){const l=new Cf(C.i,C.x,C.y),f=new Cf(e.i,e.x,e.y),v=C.next,M=e.prev;return C.next=e,e.prev=C,l.next=v,v.prev=l,f.next=l,l.prev=f,M.next=f,f.prev=M,f}function yv(C,e,l,f){const v=new Cf(C,e,l);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function qg(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function Cf(C,e,l){this.i=C,this.x=e,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nA(C,e,l,f){let v=0;for(let M=e,B=l-f;M<l;M+=f)v+=(C[B]-C[M])*(C[M+1]+C[B+1]),B=M;return v}class Wp{static area(e){const l=e.length;let f=0;for(let v=l-1,M=0;M<l;v=M++)f+=e[v].x*e[M].y-e[M].x*e[v].y;return f*.5}static isClockWise(e){return Wp.area(e)<0}static triangulateShape(e,l){const f=[],v=[],M=[];vv(e),p0(f,e);let B=e.length;l.forEach(vv);for(let k=0;k<l.length;k++)v.push(B),B+=l[k].length,p0(f,l[k]);const I=gv.triangulate(f,v);for(let k=0;k<I.length;k+=3)M.push(I.slice(k,k+3));return M}}function vv(C){const e=C.length;e>2&&C[e-1].equals(C[0])&&C.pop()}function p0(C,e){for(let l=0;l<e.length;l++)C.push(e[l].x),C.push(e[l].y)}class Zg extends xi{constructor(e=new Mf([new fn(.5,.5),new fn(-.5,.5),new fn(-.5,-.5),new fn(.5,-.5)]),l={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:l},e=Array.isArray(e)?e:[e];const f=this,v=[],M=[];for(let I=0,k=e.length;I<k;I++){const N=e[I];B(N)}this.setAttribute("position",new wr(v,3)),this.setAttribute("uv",new wr(M,2)),this.computeVertexNormals();function B(I){const k=[],N=l.curveSegments!==void 0?l.curveSegments:12,X=l.steps!==void 0?l.steps:1,Z=l.depth!==void 0?l.depth:1;let $=l.bevelEnabled!==void 0?l.bevelEnabled:!0,J=l.bevelThickness!==void 0?l.bevelThickness:.2,re=l.bevelSize!==void 0?l.bevelSize:J-.1,fe=l.bevelOffset!==void 0?l.bevelOffset:0,se=l.bevelSegments!==void 0?l.bevelSegments:3;const ne=l.extrudePath,be=l.UVGenerator!==void 0?l.UVGenerator:P3;let he,Se=!1,Oe,Qe,Ze,ht;ne&&(he=ne.getSpacedPoints(X),Se=!0,$=!1,Oe=ne.computeFrenetFrames(X,!1),Qe=new Xe,Ze=new Xe,ht=new Xe),$||(se=0,J=0,re=0,fe=0);const we=I.extractPoints(N);let Ve=we.shape;const $t=we.holes;if(!Wp.isClockWise(Ve)){Ve=Ve.reverse();for(let nt=0,Zn=$t.length;nt<Zn;nt++){const dn=$t[nt];Wp.isClockWise(dn)&&($t[nt]=dn.reverse())}}const Nt=Wp.triangulateShape(Ve,$t),Vt=Ve;for(let nt=0,Zn=$t.length;nt<Zn;nt++){const dn=$t[nt];Ve=Ve.concat(dn)}function en(nt,Zn,dn){return Zn||w.error("THREE.ExtrudeGeometry: vec does not exist"),nt.clone().addScaledVector(Zn,dn)}const Ht=Ve.length,un=Nt.length;function hn(nt,Zn,dn){let zn,_n,Ur;const xr=nt.x-Zn.x,Tr=nt.y-Zn.y,_i=dn.x-nt.x,eo=dn.y-nt.y,Zo=xr*xr+Tr*Tr,tt=xr*eo-Tr*_i;if(Math.abs(tt)>Number.EPSILON){const Pe=Math.sqrt(Zo),on=Math.sqrt(_i*_i+eo*eo),Zt=Zn.x-Tr/Pe,Gn=Zn.y+xr/Pe,sr=dn.x-eo/on,Pr=dn.y+_i/on,Un=((sr-Zt)*eo-(Pr-Gn)*_i)/(xr*eo-Tr*_i);zn=Zt+xr*Un-nt.x,_n=Gn+Tr*Un-nt.y;const Ft=zn*zn+_n*_n;if(Ft<=2)return new fn(zn,_n);Ur=Math.sqrt(Ft/2)}else{let Pe=!1;xr>Number.EPSILON?_i>Number.EPSILON&&(Pe=!0):xr<-Number.EPSILON?_i<-Number.EPSILON&&(Pe=!0):Math.sign(Tr)===Math.sign(eo)&&(Pe=!0),Pe?(zn=-Tr,_n=xr,Ur=Math.sqrt(Zo)):(zn=xr,_n=Tr,Ur=Math.sqrt(Zo/2))}return new fn(zn/Ur,_n/Ur)}const xn=[];for(let nt=0,Zn=Vt.length,dn=Zn-1,zn=nt+1;nt<Zn;nt++,dn++,zn++)dn===Zn&&(dn=0),zn===Zn&&(zn=0),xn[nt]=hn(Vt[nt],Vt[dn],Vt[zn]);const mn=[];let mt,it=xn.concat();for(let nt=0,Zn=$t.length;nt<Zn;nt++){const dn=$t[nt];mt=[];for(let zn=0,_n=dn.length,Ur=_n-1,xr=zn+1;zn<_n;zn++,Ur++,xr++)Ur===_n&&(Ur=0),xr===_n&&(xr=0),mt[zn]=hn(dn[zn],dn[Ur],dn[xr]);mn.push(mt),it=it.concat(mt)}for(let nt=0;nt<se;nt++){const Zn=nt/se,dn=J*Math.cos(Zn*Math.PI/2),zn=re*Math.sin(Zn*Math.PI/2)+fe;for(let _n=0,Ur=Vt.length;_n<Ur;_n++){const xr=en(Vt[_n],xn[_n],zn);Zr(xr.x,xr.y,-dn)}for(let _n=0,Ur=$t.length;_n<Ur;_n++){const xr=$t[_n];mt=mn[_n];for(let Tr=0,_i=xr.length;Tr<_i;Tr++){const eo=en(xr[Tr],mt[Tr],zn);Zr(eo.x,eo.y,-dn)}}}const ir=re+fe;for(let nt=0;nt<Ht;nt++){const Zn=$?en(Ve[nt],it[nt],ir):Ve[nt];Se?(Ze.copy(Oe.normals[0]).multiplyScalar(Zn.x),Qe.copy(Oe.binormals[0]).multiplyScalar(Zn.y),ht.copy(he[0]).add(Ze).add(Qe),Zr(ht.x,ht.y,ht.z)):Zr(Zn.x,Zn.y,0)}for(let nt=1;nt<=X;nt++)for(let Zn=0;Zn<Ht;Zn++){const dn=$?en(Ve[Zn],it[Zn],ir):Ve[Zn];Se?(Ze.copy(Oe.normals[nt]).multiplyScalar(dn.x),Qe.copy(Oe.binormals[nt]).multiplyScalar(dn.y),ht.copy(he[nt]).add(Ze).add(Qe),Zr(ht.x,ht.y,ht.z)):Zr(dn.x,dn.y,Z/X*nt)}for(let nt=se-1;nt>=0;nt--){const Zn=nt/se,dn=J*Math.cos(Zn*Math.PI/2),zn=re*Math.sin(Zn*Math.PI/2)+fe;for(let _n=0,Ur=Vt.length;_n<Ur;_n++){const xr=en(Vt[_n],xn[_n],zn);Zr(xr.x,xr.y,Z+dn)}for(let _n=0,Ur=$t.length;_n<Ur;_n++){const xr=$t[_n];mt=mn[_n];for(let Tr=0,_i=xr.length;Tr<_i;Tr++){const eo=en(xr[Tr],mt[Tr],zn);Se?Zr(eo.x,eo.y+he[X-1].y,he[X-1].x+dn):Zr(eo.x,eo.y,Z+dn)}}}or(),cr();function or(){const nt=v.length/3;if($){let Zn=0,dn=Ht*Zn;for(let zn=0;zn<un;zn++){const _n=Nt[zn];Vr(_n[2]+dn,_n[1]+dn,_n[0]+dn)}Zn=X+se*2,dn=Ht*Zn;for(let zn=0;zn<un;zn++){const _n=Nt[zn];Vr(_n[0]+dn,_n[1]+dn,_n[2]+dn)}}else{for(let Zn=0;Zn<un;Zn++){const dn=Nt[Zn];Vr(dn[2],dn[1],dn[0])}for(let Zn=0;Zn<un;Zn++){const dn=Nt[Zn];Vr(dn[0]+Ht*X,dn[1]+Ht*X,dn[2]+Ht*X)}}f.addGroup(nt,v.length/3-nt,0)}function cr(){const nt=v.length/3;let Zn=0;Lr(Vt,Zn),Zn+=Vt.length;for(let dn=0,zn=$t.length;dn<zn;dn++){const _n=$t[dn];Lr(_n,Zn),Zn+=_n.length}f.addGroup(nt,v.length/3-nt,1)}function Lr(nt,Zn){let dn=nt.length;for(;--dn>=0;){const zn=dn;let _n=dn-1;_n<0&&(_n=nt.length-1);for(let Ur=0,xr=X+se*2;Ur<xr;Ur++){const Tr=Ht*Ur,_i=Ht*(Ur+1),eo=Zn+zn+Tr,Zo=Zn+_n+Tr,tt=Zn+_n+_i,Pe=Zn+zn+_i;$i(eo,Zo,tt,Pe)}}}function Zr(nt,Zn,dn){k.push(nt),k.push(Zn),k.push(dn)}function Vr(nt,Zn,dn){po(nt),po(Zn),po(dn);const zn=v.length/3,_n=be.generateTopUV(f,v,zn-3,zn-2,zn-1);Ar(_n[0]),Ar(_n[1]),Ar(_n[2])}function $i(nt,Zn,dn,zn){po(nt),po(Zn),po(zn),po(Zn),po(dn),po(zn);const _n=v.length/3,Ur=be.generateSideWallUV(f,v,_n-6,_n-3,_n-2,_n-1);Ar(Ur[0]),Ar(Ur[1]),Ar(Ur[3]),Ar(Ur[1]),Ar(Ur[2]),Ar(Ur[3])}function po(nt){v.push(k[nt*3+0]),v.push(k[nt*3+1]),v.push(k[nt*3+2])}function Ar(nt){M.push(nt.x),M.push(nt.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),l=this.parameters.shapes,f=this.parameters.options;return _v(l,f,e)}static fromJSON(e,l){const f=[];for(let M=0,B=e.shapes.length;M<B;M++){const I=l[e.shapes[M]];f.push(I)}const v=e.options.extrudePath;return v!==void 0&&(e.options.extrudePath=new r0[v.type]().fromJSON(v)),new Zg(f,e.options)}}const P3={generateTopUV:function(C,e,l,f,v){const M=e[l*3],B=e[l*3+1],I=e[f*3],k=e[f*3+1],N=e[v*3],X=e[v*3+1];return[new fn(M,B),new fn(I,k),new fn(N,X)]},generateSideWallUV:function(C,e,l,f,v,M){const B=e[l*3],I=e[l*3+1],k=e[l*3+2],N=e[f*3],X=e[f*3+1],Z=e[f*3+2],$=e[v*3],J=e[v*3+1],re=e[v*3+2],fe=e[M*3],se=e[M*3+1],ne=e[M*3+2];return Math.abs(I-X)<Math.abs(B-N)?[new fn(B,1-k),new fn(N,1-Z),new fn($,1-re),new fn(fe,1-ne)]:[new fn(I,1-k),new fn(X,1-Z),new fn(J,1-re),new fn(se,1-ne)]}};function _v(C,e,l){if(l.shapes=[],Array.isArray(C))for(let f=0,v=C.length;f<v;f++){const M=C[f];l.shapes.push(M.uuid)}else l.shapes.push(C.uuid);return l.options=Object.assign({},e),e.extrudePath!==void 0&&(l.options.extrudePath=e.extrudePath.toJSON()),l}class u0 extends yh{constructor(e=1,l=0){const f=(1+Math.sqrt(5))/2,v=[-1,f,0,1,f,0,-1,-f,0,1,-f,0,0,-1,f,0,1,f,0,-1,-f,0,1,-f,f,0,-1,f,0,1,-f,0,-1,-f,0,1],M=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(v,M,e,l),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:l}}static fromJSON(e){return new u0(e.radius,e.detail)}}class $g extends yh{constructor(e=1,l=0){const f=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],v=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(f,v,e,l),this.type="OctahedronGeometry",this.parameters={radius:e,detail:l}}static fromJSON(e){return new $g(e.radius,e.detail)}}class Fl extends xi{constructor(e=.5,l=1,f=32,v=1,M=0,B=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:l,thetaSegments:f,phiSegments:v,thetaStart:M,thetaLength:B},f=Math.max(3,f),v=Math.max(1,v);const I=[],k=[],N=[],X=[];let Z=e;const $=(l-e)/v,J=new Xe,re=new fn;for(let fe=0;fe<=v;fe++){for(let se=0;se<=f;se++){const ne=M+se/f*B;J.x=Z*Math.cos(ne),J.y=Z*Math.sin(ne),k.push(J.x,J.y,J.z),N.push(0,0,1),re.x=(J.x/l+1)/2,re.y=(J.y/l+1)/2,X.push(re.x,re.y)}Z+=$}for(let fe=0;fe<v;fe++){const se=fe*(f+1);for(let ne=0;ne<f;ne++){const be=ne+se,he=be,Se=be+f+1,Oe=be+f+2,Qe=be+1;I.push(he,Se,Qe),I.push(Se,Oe,Qe)}}this.setIndex(I),this.setAttribute("position",new wr(k,3)),this.setAttribute("normal",new wr(N,3)),this.setAttribute("uv",new wr(X,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fl(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class d0 extends xi{constructor(e=new Mf([new fn(0,.5),new fn(-.5,-.5),new fn(.5,-.5)]),l=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:l};const f=[],v=[],M=[],B=[];let I=0,k=0;if(Array.isArray(e)===!1)N(e);else for(let X=0;X<e.length;X++)N(e[X]),this.addGroup(I,k,X),I+=k,k=0;this.setIndex(f),this.setAttribute("position",new wr(v,3)),this.setAttribute("normal",new wr(M,3)),this.setAttribute("uv",new wr(B,2));function N(X){const Z=v.length/3,$=X.extractPoints(l);let J=$.shape;const re=$.holes;Wp.isClockWise(J)===!1&&(J=J.reverse());for(let se=0,ne=re.length;se<ne;se++){const be=re[se];Wp.isClockWise(be)===!0&&(re[se]=be.reverse())}const fe=Wp.triangulateShape(J,re);for(let se=0,ne=re.length;se<ne;se++){const be=re[se];J=J.concat(be)}for(let se=0,ne=J.length;se<ne;se++){const be=J[se];v.push(be.x,be.y,0),M.push(0,0,1),B.push(be.x,be.y)}for(let se=0,ne=fe.length;se<ne;se++){const be=fe[se],he=be[0]+Z,Se=be[1]+Z,Oe=be[2]+Z;f.push(he,Se,Oe),k+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),l=this.parameters.shapes;return L3(l,e)}static fromJSON(e,l){const f=[];for(let v=0,M=e.shapes.length;v<M;v++){const B=l[e.shapes[v]];f.push(B)}return new d0(f,e.curveSegments)}}function L3(C,e){if(e.shapes=[],Array.isArray(C))for(let l=0,f=C.length;l<f;l++){const v=C[l];e.shapes.push(v.uuid)}else e.shapes.push(C.uuid);return e}class em extends xi{constructor(e=1,l=32,f=16,v=0,M=Math.PI*2,B=0,I=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:l,heightSegments:f,phiStart:v,phiLength:M,thetaStart:B,thetaLength:I},l=Math.max(3,Math.floor(l)),f=Math.max(2,Math.floor(f));const k=Math.min(B+I,Math.PI);let N=0;const X=[],Z=new Xe,$=new Xe,J=[],re=[],fe=[],se=[];for(let ne=0;ne<=f;ne++){const be=[],he=ne/f;let Se=0;ne===0&&B===0?Se=.5/l:ne===f&&k===Math.PI&&(Se=-.5/l);for(let Oe=0;Oe<=l;Oe++){const Qe=Oe/l;Z.x=-e*Math.cos(v+Qe*M)*Math.sin(B+he*I),Z.y=e*Math.cos(B+he*I),Z.z=e*Math.sin(v+Qe*M)*Math.sin(B+he*I),re.push(Z.x,Z.y,Z.z),$.copy(Z).normalize(),fe.push($.x,$.y,$.z),se.push(Qe+Se,1-he),be.push(N++)}X.push(be)}for(let ne=0;ne<f;ne++)for(let be=0;be<l;be++){const he=X[ne][be+1],Se=X[ne][be],Oe=X[ne+1][be],Qe=X[ne+1][be+1];(ne!==0||B>0)&&J.push(he,Se,Qe),(ne!==f-1||k<Math.PI)&&J.push(Se,Oe,Qe)}this.setIndex(J),this.setAttribute("position",new wr(re,3)),this.setAttribute("normal",new wr(fe,3)),this.setAttribute("uv",new wr(se,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new em(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vp extends yh{constructor(e=1,l=0){const f=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],v=[2,1,0,0,3,2,1,3,0,2,3,1];super(f,v,e,l),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:l}}static fromJSON(e){return new Vp(e.radius,e.detail)}}class h0 extends xi{constructor(e=1,l=.4,f=12,v=48,M=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:l,radialSegments:f,tubularSegments:v,arc:M},f=Math.floor(f),v=Math.floor(v);const B=[],I=[],k=[],N=[],X=new Xe,Z=new Xe,$=new Xe;for(let J=0;J<=f;J++)for(let re=0;re<=v;re++){const fe=re/v*M,se=J/f*Math.PI*2;Z.x=(e+l*Math.cos(se))*Math.cos(fe),Z.y=(e+l*Math.cos(se))*Math.sin(fe),Z.z=l*Math.sin(se),I.push(Z.x,Z.y,Z.z),X.x=e*Math.cos(fe),X.y=e*Math.sin(fe),$.subVectors(Z,X).normalize(),k.push($.x,$.y,$.z),N.push(re/v),N.push(J/f)}for(let J=1;J<=f;J++)for(let re=1;re<=v;re++){const fe=(v+1)*J+re-1,se=(v+1)*(J-1)+re-1,ne=(v+1)*(J-1)+re,be=(v+1)*J+re;B.push(fe,se,be),B.push(se,ne,be)}this.setIndex(B),this.setAttribute("position",new wr(I,3)),this.setAttribute("normal",new wr(k,3)),this.setAttribute("uv",new wr(N,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class f0 extends xi{constructor(e=1,l=.4,f=64,v=8,M=2,B=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:l,tubularSegments:f,radialSegments:v,p:M,q:B},f=Math.floor(f),v=Math.floor(v);const I=[],k=[],N=[],X=[],Z=new Xe,$=new Xe,J=new Xe,re=new Xe,fe=new Xe,se=new Xe,ne=new Xe;for(let he=0;he<=f;++he){const Se=he/f*M*Math.PI*2;be(Se,M,B,e,J),be(Se+.01,M,B,e,re),se.subVectors(re,J),ne.addVectors(re,J),fe.crossVectors(se,ne),ne.crossVectors(fe,se),fe.normalize(),ne.normalize();for(let Oe=0;Oe<=v;++Oe){const Qe=Oe/v*Math.PI*2,Ze=-l*Math.cos(Qe),ht=l*Math.sin(Qe);Z.x=J.x+(Ze*ne.x+ht*fe.x),Z.y=J.y+(Ze*ne.y+ht*fe.y),Z.z=J.z+(Ze*ne.z+ht*fe.z),k.push(Z.x,Z.y,Z.z),$.subVectors(Z,J).normalize(),N.push($.x,$.y,$.z),X.push(he/f),X.push(Oe/v)}}for(let he=1;he<=f;he++)for(let Se=1;Se<=v;Se++){const Oe=(v+1)*(he-1)+(Se-1),Qe=(v+1)*he+(Se-1),Ze=(v+1)*he+Se,ht=(v+1)*(he-1)+Se;I.push(Oe,Qe,ht),I.push(Qe,Ze,ht)}this.setIndex(I),this.setAttribute("position",new wr(k,3)),this.setAttribute("normal",new wr(N,3)),this.setAttribute("uv",new wr(X,2));function be(he,Se,Oe,Qe,Ze){const ht=Math.cos(he),we=Math.sin(he),Ve=Oe/Se*he,$t=Math.cos(Ve);Ze.x=Qe*(2+$t)*.5*ht,Ze.y=Qe*(2+$t)*we*.5,Ze.z=Qe*Math.sin(Ve)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class g0 extends xi{constructor(e=new t0(new Xe(-1,-1,0),new Xe(-1,1,0),new Xe(1,1,0)),l=64,f=1,v=8,M=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:l,radius:f,radialSegments:v,closed:M};const B=e.computeFrenetFrames(l,M);this.tangents=B.tangents,this.normals=B.normals,this.binormals=B.binormals;const I=new Xe,k=new Xe,N=new fn;let X=new Xe;const Z=[],$=[],J=[],re=[];fe(),this.setIndex(re),this.setAttribute("position",new wr(Z,3)),this.setAttribute("normal",new wr($,3)),this.setAttribute("uv",new wr(J,2));function fe(){for(let he=0;he<l;he++)se(he);se(M===!1?l:0),be(),ne()}function se(he){X=e.getPointAt(he/l,X);const Se=B.normals[he],Oe=B.binormals[he];for(let Qe=0;Qe<=v;Qe++){const Ze=Qe/v*Math.PI*2,ht=Math.sin(Ze),we=-Math.cos(Ze);k.x=we*Se.x+ht*Oe.x,k.y=we*Se.y+ht*Oe.y,k.z=we*Se.z+ht*Oe.z,k.normalize(),$.push(k.x,k.y,k.z),I.x=X.x+f*k.x,I.y=X.y+f*k.y,I.z=X.z+f*k.z,Z.push(I.x,I.y,I.z)}}function ne(){for(let he=1;he<=l;he++)for(let Se=1;Se<=v;Se++){const Oe=(v+1)*(he-1)+(Se-1),Qe=(v+1)*he+(Se-1),Ze=(v+1)*he+Se,ht=(v+1)*(he-1)+Se;re.push(Oe,Qe,ht),re.push(Qe,Ze,ht)}}function be(){for(let he=0;he<=l;he++)for(let Se=0;Se<=v;Se++)N.x=he/l,N.y=Se/v,J.push(N.x,N.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new g0(new r0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Ev extends xi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const l=[],f=new Set,v=new Xe,M=new Xe;if(e.index!==null){const B=e.attributes.position,I=e.index;let k=e.groups;k.length===0&&(k=[{start:0,count:I.count,materialIndex:0}]);for(let N=0,X=k.length;N<X;++N){const Z=k[N],$=Z.start,J=Z.count;for(let re=$,fe=$+J;re<fe;re+=3)for(let se=0;se<3;se++){const ne=I.getX(re+se),be=I.getX(re+(se+1)%3);v.fromBufferAttribute(B,ne),M.fromBufferAttribute(B,be),m0(v,M,f)===!0&&(l.push(v.x,v.y,v.z),l.push(M.x,M.y,M.z))}}}else{const B=e.attributes.position;for(let I=0,k=B.count/3;I<k;I++)for(let N=0;N<3;N++){const X=3*I+N,Z=3*I+(N+1)%3;v.fromBufferAttribute(B,X),M.fromBufferAttribute(B,Z),m0(v,M,f)===!0&&(l.push(v.x,v.y,v.z),l.push(M.x,M.y,M.z))}}this.setAttribute("position",new wr(l,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function m0(C,e,l){const f=`${C.x},${C.y},${C.z}-${e.x},${e.y},${e.z}`,v=`${e.x},${e.y},${e.z}-${C.x},${C.y},${C.z}`;return l.has(f)===!0||l.has(v)===!0?!1:(l.add(f),l.add(v),!0)}var bv=Object.freeze({__proto__:null,BoxGeometry:Rc,CapsuleGeometry:i0,CircleGeometry:Wg,ConeGeometry:Qg,CylinderGeometry:Vg,DodecahedronGeometry:Xg,EdgesGeometry:Oa,ExtrudeGeometry:Zg,IcosahedronGeometry:u0,LatheGeometry:bf,OctahedronGeometry:$g,PlaneGeometry:_u,PolyhedronGeometry:yh,RingGeometry:Fl,ShapeGeometry:d0,SphereGeometry:em,TetrahedronGeometry:Vp,TorusGeometry:h0,TorusKnotGeometry:f0,TubeGeometry:g0,WireframeGeometry:Ev});class Lc extends fa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new pr(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Sf extends Wr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Bu extends fa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wi,this.normalScale=new fn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mv extends Bu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new fn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _o(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(l){this.ior=(1+.4*l)/(1-.4*l)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class rA extends fa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new pr(16777215),this.specular=new pr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wi,this.normalScale=new fn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Li,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xv extends fa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wi,this.normalScale=new fn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Cv extends fa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wi,this.normalScale=new fn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Sv extends fa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wi,this.normalScale=new fn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Li,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iA extends fa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wi,this.normalScale=new fn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wv extends Rl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function kc(C,e,l){return tm(C)?new C.constructor(C.subarray(e,l!==void 0?l:C.length)):C.slice(e,l)}function qi(C,e,l){return!C||!l&&C.constructor===e?C:typeof e.BYTES_PER_ELEMENT=="number"?new e(C):Array.prototype.slice.call(C)}function tm(C){return ArrayBuffer.isView(C)&&!(C instanceof DataView)}function Tv(C){function e(v,M){return C[v]-C[M]}const l=C.length,f=new Array(l);for(let v=0;v!==l;++v)f[v]=v;return f.sort(e),f}function oA(C,e,l){const f=C.length,v=new C.constructor(f);for(let M=0,B=0;B!==f;++M){const I=l[M]*e;for(let k=0;k!==e;++k)v[B++]=C[I+k]}return v}function sA(C,e,l,f){let v=1,M=C[0];for(;M!==void 0&&M[f]===void 0;)M=C[v++];if(M===void 0)return;let B=M[f];if(B!==void 0)if(Array.isArray(B))do B=M[f],B!==void 0&&(e.push(M.time),l.push.apply(l,B)),M=C[v++];while(M!==void 0);else if(B.toArray!==void 0)do B=M[f],B!==void 0&&(e.push(M.time),B.toArray(l,l.length)),M=C[v++];while(M!==void 0);else do B=M[f],B!==void 0&&(e.push(M.time),l.push(B)),M=C[v++];while(M!==void 0)}function k3(C,e,l,f,v=30){const M=C.clone();M.name=e;const B=[];for(let k=0;k<M.tracks.length;++k){const N=M.tracks[k],X=N.getValueSize(),Z=[],$=[];for(let J=0;J<N.times.length;++J){const re=N.times[J]*v;if(!(re<l||re>=f)){Z.push(N.times[J]);for(let fe=0;fe<X;++fe)$.push(N.values[J*X+fe])}}Z.length!==0&&(N.times=qi(Z,N.times.constructor),N.values=qi($,N.values.constructor),B.push(N))}M.tracks=B;let I=1/0;for(let k=0;k<M.tracks.length;++k)I>M.tracks[k].times[0]&&(I=M.tracks[k].times[0]);for(let k=0;k<M.tracks.length;++k)M.tracks[k].shift(-1*I);return M.resetDuration(),M}function z3(C,e=0,l=C,f=30){f<=0&&(f=30);const v=l.tracks.length,M=e/f;for(let B=0;B<v;++B){const I=l.tracks[B],k=I.ValueTypeName;if(k==="bool"||k==="string")continue;const N=C.tracks.find(function(ne){return ne.name===I.name&&ne.ValueTypeName===k});if(N===void 0)continue;let X=0;const Z=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(X=Z/3);let $=0;const J=N.getValueSize();N.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&($=J/3);const re=I.times.length-1;let fe;if(M<=I.times[0]){const ne=X,be=Z-X;fe=kc(I.values,ne,be)}else if(M>=I.times[re]){const ne=re*Z+X,be=ne+Z-X;fe=kc(I.values,ne,be)}else{const ne=I.createInterpolant(),be=X,he=Z-X;ne.evaluate(M),fe=kc(ne.resultBuffer,be,he)}k==="quaternion"&&new Zs().fromArray(fe).normalize().conjugate().toArray(fe);const se=N.times.length;for(let ne=0;ne<se;++ne){const be=ne*J+$;if(k==="quaternion")Zs.multiplyQuaternionsFlat(N.values,be,fe,0,N.values,be);else{const he=J-$*2;for(let Se=0;Se<he;++Se)N.values[be+Se]-=fe[Se]}}}return C.blendMode=ku,C}const MM={arraySlice:kc,convertArray:qi,isTypedArray:tm,getKeyframeOrder:Tv,sortedArray:oA,flattenJSON:sA,subclip:k3,makeClipAdditive:z3};class wf{constructor(e,l,f,v){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=v!==void 0?v:new l.constructor(f),this.sampleValues=l,this.valueSize=f,this.settings=null,this.DefaultSettings_={}}evaluate(e){const l=this.parameterPositions;let f=this._cachedIndex,v=l[f],M=l[f-1];e:{t:{let B;n:{r:if(!(e<v)){for(let I=f+2;;){if(v===void 0){if(e<M)break r;return f=l.length,this._cachedIndex=f,this.copySampleValue_(f-1)}if(f===I)break;if(M=v,v=l[++f],e<v)break t}B=l.length;break n}if(!(e>=M)){const I=l[1];e<I&&(f=2,M=I);for(let k=f-2;;){if(M===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===k)break;if(v=M,M=l[--f-1],e>=M)break t}B=f,f=0;break n}break e}for(;f<B;){const I=f+B>>>1;e<l[I]?B=I:f=I+1}if(v=l[f],M=l[f-1],M===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(v===void 0)return f=l.length,this._cachedIndex=f,this.copySampleValue_(f-1)}this._cachedIndex=f,this.intervalChanged_(f,M,v)}return this.interpolate_(f,M,e,v)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const l=this.resultBuffer,f=this.sampleValues,v=this.valueSize,M=e*v;for(let B=0;B!==v;++B)l[B]=f[M+B];return l}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Bv extends wf{constructor(e,l,f,v){super(e,l,f,v),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ba,endingEnd:ba}}intervalChanged_(e,l,f){const v=this.parameterPositions;let M=e-2,B=e+1,I=v[M],k=v[B];if(I===void 0)switch(this.getSettings_().endingStart){case mc:M=e,I=2*l-f;break;case gp:M=v.length-2,I=l+v[M]-v[M+1];break;default:M=e,I=f}if(k===void 0)switch(this.getSettings_().endingEnd){case mc:B=e,k=2*f-l;break;case gp:B=1,k=f+v[1]-v[0];break;default:B=e-1,k=l}const N=(f-l)*.5,X=this.valueSize;this._weightPrev=N/(l-I),this._weightNext=N/(k-f),this._offsetPrev=M*X,this._offsetNext=B*X}interpolate_(e,l,f,v){const M=this.resultBuffer,B=this.sampleValues,I=this.valueSize,k=e*I,N=k-I,X=this._offsetPrev,Z=this._offsetNext,$=this._weightPrev,J=this._weightNext,re=(f-l)/(v-l),fe=re*re,se=fe*re,ne=-$*se+2*$*fe-$*re,be=(1+$)*se+(-1.5-2*$)*fe+(-.5+$)*re+1,he=(-1-J)*se+(1.5+J)*fe+.5*re,Se=J*se-J*fe;for(let Oe=0;Oe!==I;++Oe)M[Oe]=ne*B[X+Oe]+be*B[N+Oe]+he*B[k+Oe]+Se*B[Z+Oe];return M}}class A0 extends wf{constructor(e,l,f,v){super(e,l,f,v)}interpolate_(e,l,f,v){const M=this.resultBuffer,B=this.sampleValues,I=this.valueSize,k=e*I,N=k-I,X=(f-l)/(v-l),Z=1-X;for(let $=0;$!==I;++$)M[$]=B[N+$]*Z+B[k+$]*X;return M}}class Rv extends wf{constructor(e,l,f,v){super(e,l,f,v)}interpolate_(e){return this.copySampleValue_(e-1)}}class lp{constructor(e,l,f,v){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(l===void 0||l.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qi(l,this.TimeBufferType),this.values=qi(f,this.ValueBufferType),this.setInterpolation(v||this.DefaultInterpolation)}static toJSON(e){const l=e.constructor;let f;if(l.toJSON!==this.toJSON)f=l.toJSON(e);else{f={name:e.name,times:qi(e.times,Array),values:qi(e.values,Array)};const v=e.getInterpolation();v!==e.DefaultInterpolation&&(f.interpolation=v)}return f.type=e.ValueTypeName,f}InterpolantFactoryMethodDiscrete(e){return new Rv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new A0(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Bv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let l;switch(e){case Ho:l=this.InterpolantFactoryMethodDiscrete;break;case Ga:l=this.InterpolantFactoryMethodLinear;break;case Ih:l=this.InterpolantFactoryMethodSmooth;break}if(l===void 0){const f="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(f);return w.warn("THREE.KeyframeTrack:",f),this}return this.createInterpolant=l,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ho;case this.InterpolantFactoryMethodLinear:return Ga;case this.InterpolantFactoryMethodSmooth:return Ih}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const l=this.times;for(let f=0,v=l.length;f!==v;++f)l[f]+=e}return this}scale(e){if(e!==1){const l=this.times;for(let f=0,v=l.length;f!==v;++f)l[f]*=e}return this}trim(e,l){const f=this.times,v=f.length;let M=0,B=v-1;for(;M!==v&&f[M]<e;)++M;for(;B!==-1&&f[B]>l;)--B;if(++B,M!==0||B!==v){M>=B&&(B=Math.max(B,1),M=B-1);const I=this.getValueSize();this.times=kc(f,M,B),this.values=kc(this.values,M*I,B*I)}return this}validate(){let e=!0;const l=this.getValueSize();l-Math.floor(l)!==0&&(w.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const f=this.times,v=this.values,M=f.length;M===0&&(w.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let B=null;for(let I=0;I!==M;I++){const k=f[I];if(typeof k=="number"&&isNaN(k)){w.error("THREE.KeyframeTrack: Time is not a valid number.",this,I,k),e=!1;break}if(B!==null&&B>k){w.error("THREE.KeyframeTrack: Out of order keys.",this,I,k,B),e=!1;break}B=k}if(v!==void 0&&tm(v))for(let I=0,k=v.length;I!==k;++I){const N=v[I];if(isNaN(N)){w.error("THREE.KeyframeTrack: Value is not a valid number.",this,I,N),e=!1;break}}return e}optimize(){const e=kc(this.times),l=kc(this.values),f=this.getValueSize(),v=this.getInterpolation()===Ih,M=e.length-1;let B=1;for(let I=1;I<M;++I){let k=!1;const N=e[I],X=e[I+1];if(N!==X&&(I!==1||N!==e[0]))if(v)k=!0;else{const Z=I*f,$=Z-f,J=Z+f;for(let re=0;re!==f;++re){const fe=l[Z+re];if(fe!==l[$+re]||fe!==l[J+re]){k=!0;break}}}if(k){if(I!==B){e[B]=e[I];const Z=I*f,$=B*f;for(let J=0;J!==f;++J)l[$+J]=l[Z+J]}++B}}if(M>0){e[B]=e[M];for(let I=M*f,k=B*f,N=0;N!==f;++N)l[k+N]=l[I+N];++B}return B!==e.length?(this.times=kc(e,0,B),this.values=kc(l,0,B*f)):(this.times=e,this.values=l),this}clone(){const e=kc(this.times,0),l=kc(this.values,0),f=this.constructor,v=new f(this.name,e,l);return v.createInterpolant=this.createInterpolant,v}}lp.prototype.TimeBufferType=Float32Array,lp.prototype.ValueBufferType=Float32Array,lp.prototype.DefaultInterpolation=Ga;class Ms extends lp{}Ms.prototype.ValueTypeName="bool",Ms.prototype.ValueBufferType=Array,Ms.prototype.DefaultInterpolation=Ho,Ms.prototype.InterpolantFactoryMethodLinear=void 0,Ms.prototype.InterpolantFactoryMethodSmooth=void 0;class Tf extends lp{}Tf.prototype.ValueTypeName="color";class nm extends lp{}nm.prototype.ValueTypeName="number";class aA extends wf{constructor(e,l,f,v){super(e,l,f,v)}interpolate_(e,l,f,v){const M=this.resultBuffer,B=this.sampleValues,I=this.valueSize,k=(f-l)/(v-l);let N=e*I;for(let X=N+I;N!==X;N+=4)Zs.slerpFlat(M,0,B,N-I,B,N,k);return M}}class Bf extends lp{InterpolantFactoryMethodLinear(e){return new aA(this.times,this.values,this.getValueSize(),e)}}Bf.prototype.ValueTypeName="quaternion",Bf.prototype.DefaultInterpolation=Ga,Bf.prototype.InterpolantFactoryMethodSmooth=void 0;class vh extends lp{}vh.prototype.ValueTypeName="string",vh.prototype.ValueBufferType=Array,vh.prototype.DefaultInterpolation=Ho,vh.prototype.InterpolantFactoryMethodLinear=void 0,vh.prototype.InterpolantFactoryMethodSmooth=void 0;class rm extends lp{}rm.prototype.ValueTypeName="vector";class Rf{constructor(e,l=-1,f,v=mp){this.name=e,this.tracks=f,this.duration=l,this.blendMode=v,this.uuid=Ha(),this.duration<0&&this.resetDuration()}static parse(e){const l=[],f=e.tracks,v=1/(e.fps||1);for(let B=0,I=f.length;B!==I;++B)l.push(G3(f[B]).scale(v));const M=new this(e.name,e.duration,l,e.blendMode);return M.uuid=e.uuid,M}static toJSON(e){const l=[],f=e.tracks,v={name:e.name,duration:e.duration,tracks:l,uuid:e.uuid,blendMode:e.blendMode};for(let M=0,B=f.length;M!==B;++M)l.push(lp.toJSON(f[M]));return v}static CreateFromMorphTargetSequence(e,l,f,v){const M=l.length,B=[];for(let I=0;I<M;I++){let k=[],N=[];k.push((I+M-1)%M,I,(I+1)%M),N.push(0,1,0);const X=Tv(k);k=oA(k,1,X),N=oA(N,1,X),!v&&k[0]===0&&(k.push(M),N.push(N[0])),B.push(new nm(".morphTargetInfluences["+l[I].name+"]",k,N).scale(1/f))}return new this(e,-1,B)}static findByName(e,l){let f=e;if(!Array.isArray(e)){const v=e;f=v.geometry&&v.geometry.animations||v.animations}for(let v=0;v<f.length;v++)if(f[v].name===l)return f[v];return null}static CreateClipsFromMorphTargetSequences(e,l,f){const v={},M=/^([\w-]*?)([\d]+)$/;for(let I=0,k=e.length;I<k;I++){const N=e[I],X=N.name.match(M);if(X&&X.length>1){const Z=X[1];let $=v[Z];$||(v[Z]=$=[]),$.push(N)}}const B=[];for(const I in v)B.push(this.CreateFromMorphTargetSequence(I,v[I],l,f));return B}static parseAnimation(e,l){if(!e)return w.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const f=function(Z,$,J,re,fe){if(J.length!==0){const se=[],ne=[];sA(J,se,ne,re),se.length!==0&&fe.push(new Z($,se,ne))}},v=[],M=e.name||"default",B=e.fps||30,I=e.blendMode;let k=e.length||-1;const N=e.hierarchy||[];for(let Z=0;Z<N.length;Z++){const $=N[Z].keys;if(!(!$||$.length===0))if($[0].morphTargets){const J={};let re;for(re=0;re<$.length;re++)if($[re].morphTargets)for(let fe=0;fe<$[re].morphTargets.length;fe++)J[$[re].morphTargets[fe]]=-1;for(const fe in J){const se=[],ne=[];for(let be=0;be!==$[re].morphTargets.length;++be){const he=$[re];se.push(he.time),ne.push(he.morphTarget===fe?1:0)}v.push(new nm(".morphTargetInfluence["+fe+"]",se,ne))}k=J.length*B}else{const J=".bones["+l[Z].name+"]";f(rm,J+".position",$,"pos",v),f(Bf,J+".quaternion",$,"rot",v),f(rm,J+".scale",$,"scl",v)}}return v.length===0?null:new this(M,k,v,I)}resetDuration(){const e=this.tracks;let l=0;for(let f=0,v=e.length;f!==v;++f){const M=this.tracks[f];l=Math.max(l,M.times[M.times.length-1])}return this.duration=l,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let l=0;l<this.tracks.length;l++)e=e&&this.tracks[l].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let l=0;l<this.tracks.length;l++)e.push(this.tracks[l].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Iv(C){switch(C.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nm;case"vector":case"vector2":case"vector3":case"vector4":return rm;case"color":return Tf;case"quaternion":return Bf;case"bool":case"boolean":return Ms;case"string":return vh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+C)}function G3(C){if(C.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Iv(C.type);if(C.times===void 0){const l=[],f=[];sA(C.keys,l,f,"value"),C.times=l,C.values=f}return e.parse!==void 0?e.parse(C):new e(C.name,C.times,C.values,C.interpolation)}const _h={enabled:!1,files:{},add:function(C,e){this.enabled!==!1&&(this.files[C]=e)},get:function(C){if(this.enabled!==!1)return this.files[C]},remove:function(C){delete this.files[C]},clear:function(){this.files={}}};class y0{constructor(e,l,f){const v=this;let M=!1,B=0,I=0,k;const N=[];this.onStart=void 0,this.onLoad=e,this.onProgress=l,this.onError=f,this.itemStart=function(X){I++,M===!1&&v.onStart!==void 0&&v.onStart(X,B,I),M=!0},this.itemEnd=function(X){B++,v.onProgress!==void 0&&v.onProgress(X,B,I),B===I&&(M=!1,v.onLoad!==void 0&&v.onLoad())},this.itemError=function(X){v.onError!==void 0&&v.onError(X)},this.resolveURL=function(X){return k?k(X):X},this.setURLModifier=function(X){return k=X,this},this.addHandler=function(X,Z){return N.push(X,Z),this},this.removeHandler=function(X){const Z=N.indexOf(X);return Z!==-1&&N.splice(Z,2),this},this.getHandler=function(X){for(let Z=0,$=N.length;Z<$;Z+=2){const J=N[Z],re=N[Z+1];if(J.global&&(J.lastIndex=0),J.test(X))return re}return null}}}const im=new y0;class $l{constructor(e){this.manager=e!==void 0?e:im,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,l){const f=this;return new Promise(function(v,M){f.load(e,v,l,M)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}$l.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qp={};class U3 extends Error{constructor(e,l){super(e),this.response=l}}class Ru extends $l{constructor(e){super(e)}load(e,l,f,v){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=_h.get(e);if(M!==void 0)return this.manager.itemStart(e),setTimeout(()=>{l&&l(M),this.manager.itemEnd(e)},0),M;if(Qp[e]!==void 0){Qp[e].push({onLoad:l,onProgress:f,onError:v});return}Qp[e]=[],Qp[e].push({onLoad:l,onProgress:f,onError:v});const B=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),I=this.mimeType,k=this.responseType;fetch(B).then(N=>{if(N.status===200||N.status===0){if(N.status===0&&w.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||N.body===void 0||N.body.getReader===void 0)return N;const X=Qp[e],Z=N.body.getReader(),$=N.headers.get("Content-Length")||N.headers.get("X-File-Size"),J=$?parseInt($):0,re=J!==0;let fe=0;const se=new ReadableStream({start(ne){be();function be(){Z.read().then(({done:he,value:Se})=>{if(he)ne.close();else{fe+=Se.byteLength;const Oe=new ProgressEvent("progress",{lengthComputable:re,loaded:fe,total:J});for(let Qe=0,Ze=X.length;Qe<Ze;Qe++){const ht=X[Qe];ht.onProgress&&ht.onProgress(Oe)}ne.enqueue(Se),be()}})}}});return new Response(se)}else throw new U3(`fetch for "${N.url}" responded with ${N.status}: ${N.statusText}`,N)}).then(N=>{switch(k){case"arraybuffer":return N.arrayBuffer();case"blob":return N.blob();case"document":return N.text().then(X=>new DOMParser().parseFromString(X,I));case"json":return N.json();default:if(I===void 0)return N.text();{const Z=/charset="?([^;"\s]*)"?/i.exec(I),$=Z&&Z[1]?Z[1].toLowerCase():void 0,J=new TextDecoder($);return N.arrayBuffer().then(re=>J.decode(re))}}}).then(N=>{_h.add(e,N);const X=Qp[e];delete Qp[e];for(let Z=0,$=X.length;Z<$;Z++){const J=X[Z];J.onLoad&&J.onLoad(N)}}).catch(N=>{const X=Qp[e];if(X===void 0)throw this.manager.itemError(e),N;delete Qp[e];for(let Z=0,$=X.length;Z<$;Z++){const J=X[Z];J.onError&&J.onError(N)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class v0 extends $l{constructor(e){super(e)}load(e,l,f,v){const M=this,B=new Ru(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(e,function(I){try{l(M.parse(JSON.parse(I)))}catch(k){v?v(k):w.error(k),M.manager.itemError(e)}},f,v)}parse(e){const l=[];for(let f=0;f<e.length;f++){const v=Rf.parse(e[f]);l.push(v)}return l}}class N3 extends $l{constructor(e){super(e)}load(e,l,f,v){const M=this,B=[],I=new qm,k=new Ru(this.manager);k.setPath(this.path),k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setWithCredentials(M.withCredentials);let N=0;function X(Z){k.load(e[Z],function($){const J=M.parse($,!0);B[Z]={width:J.width,height:J.height,format:J.format,mipmaps:J.mipmaps},N+=1,N===6&&(J.mipmapCount===1&&(I.minFilter=co),I.image=B,I.format=J.format,I.needsUpdate=!0,l&&l(I))},f,v)}if(Array.isArray(e))for(let Z=0,$=e.length;Z<$;++Z)X(Z);else k.load(e,function(Z){const $=M.parse(Z,!0);if($.isCubemap){const J=$.mipmaps.length/$.mipmapCount;for(let re=0;re<J;re++){B[re]={mipmaps:[]};for(let fe=0;fe<$.mipmapCount;fe++)B[re].mipmaps.push($.mipmaps[re*$.mipmapCount+fe]),B[re].format=$.format,B[re].width=$.width,B[re].height=$.height}I.image=B}else I.image.width=$.width,I.image.height=$.height,I.mipmaps=$.mipmaps;$.mipmapCount===1&&(I.minFilter=co),I.format=$.format,I.needsUpdate=!0,l&&l(I)},f,v);return I}}class om extends $l{constructor(e){super(e)}load(e,l,f,v){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=this,B=_h.get(e);if(B!==void 0)return M.manager.itemStart(e),setTimeout(function(){l&&l(B),M.manager.itemEnd(e)},0),B;const I=Vu("img");function k(){X(),_h.add(e,this),l&&l(this),M.manager.itemEnd(e)}function N(Z){X(),v&&v(Z),M.manager.itemError(e),M.manager.itemEnd(e)}function X(){I.removeEventListener("load",k,!1),I.removeEventListener("error",N,!1)}return I.addEventListener("load",k,!1),I.addEventListener("error",N,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(I.crossOrigin=this.crossOrigin),M.manager.itemStart(e),I.src=e,I}}class H3 extends $l{constructor(e){super(e)}load(e,l,f,v){const M=new Jo;M.colorSpace=ui;const B=new om(this.manager);B.setCrossOrigin(this.crossOrigin),B.setPath(this.path);let I=0;function k(N){B.load(e[N],function(X){M.images[N]=X,I++,I===6&&(M.needsUpdate=!0,l&&l(M))},void 0,v)}for(let N=0;N<e.length;++N)k(N);return M}}class _0 extends $l{constructor(e){super(e)}load(e,l,f,v){const M=this,B=new fh,I=new Ru(this.manager);return I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(M.withCredentials),I.load(e,function(k){const N=M.parse(k);N&&(N.image!==void 0?B.image=N.image:N.data!==void 0&&(B.image.width=N.width,B.image.height=N.height,B.image.data=N.data),B.wrapS=N.wrapS!==void 0?N.wrapS:Br,B.wrapT=N.wrapT!==void 0?N.wrapT:Br,B.magFilter=N.magFilter!==void 0?N.magFilter:co,B.minFilter=N.minFilter!==void 0?N.minFilter:co,B.anisotropy=N.anisotropy!==void 0?N.anisotropy:1,N.colorSpace!==void 0?B.colorSpace=N.colorSpace:N.encoding!==void 0&&(B.encoding=N.encoding),N.flipY!==void 0&&(B.flipY=N.flipY),N.format!==void 0&&(B.format=N.format),N.type!==void 0&&(B.type=N.type),N.mipmaps!==void 0&&(B.mipmaps=N.mipmaps,B.minFilter=ho),N.mipmapCount===1&&(B.minFilter=co),N.generateMipmaps!==void 0&&(B.generateMipmaps=N.generateMipmaps),B.needsUpdate=!0,l&&l(B,N))},f,v),B}}class lA extends $l{constructor(e){super(e)}load(e,l,f,v){const M=new io,B=new om(this.manager);return B.setCrossOrigin(this.crossOrigin),B.setPath(this.path),B.load(e,function(I){M.image=I,M.needsUpdate=!0,l!==void 0&&l(M)},f,v),M}}class yd extends Ti{constructor(e,l=1){super(),this.isLight=!0,this.type="Light",this.color=new pr(e),this.intensity=l}dispose(){}copy(e,l){return super.copy(e,l),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const l=super.toJSON(e);return l.object.color=this.color.getHex(),l.object.intensity=this.intensity,this.groundColor!==void 0&&(l.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(l.object.distance=this.distance),this.angle!==void 0&&(l.object.angle=this.angle),this.decay!==void 0&&(l.object.decay=this.decay),this.penumbra!==void 0&&(l.object.penumbra=this.penumbra),this.shadow!==void 0&&(l.object.shadow=this.shadow.toJSON()),l}}class Fv extends yd{constructor(e,l,f){super(e,f),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pr(l)}copy(e,l){return super.copy(e,l),this.groundColor.copy(e.groundColor),this}}const cA=new si,Ov=new Xe,Dv=new Xe;class E0{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fn(512,512),this.map=null,this.mapPass=null,this.matrix=new si,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new od,this._frameExtents=new fn(1,1),this._viewportCount=1,this._viewports=[new Ji(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const l=this.camera,f=this.matrix;Ov.setFromMatrixPosition(e.matrixWorld),l.position.copy(Ov),Dv.setFromMatrixPosition(e.target.matrixWorld),l.lookAt(Dv),l.updateMatrixWorld(),cA.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cA),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(cA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class j3 extends E0{constructor(){super(new Gi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const l=this.camera,f=vc*2*e.angle*this.focus,v=this.mapSize.width/this.mapSize.height,M=e.distance||l.far;(f!==l.fov||v!==l.aspect||M!==l.far)&&(l.fov=f,l.aspect=v,l.far=M,l.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class b0 extends yd{constructor(e,l,f=0,v=Math.PI/3,M=0,B=2){super(e,l),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.target=new Ti,this.distance=f,this.angle=v,this.penumbra=M,this.decay=B,this.map=null,this.shadow=new j3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,l){return super.copy(e,l),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Pv=new si,Xp=new Xe,Eh=new Xe;class W3 extends E0{constructor(){super(new Gi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new fn(4,2),this._viewportCount=6,this._viewports=[new Ji(2,1,1,1),new Ji(0,1,1,1),new Ji(3,1,1,1),new Ji(1,1,1,1),new Ji(3,0,1,1),new Ji(1,0,1,1)],this._cubeDirections=[new Xe(1,0,0),new Xe(-1,0,0),new Xe(0,0,1),new Xe(0,0,-1),new Xe(0,1,0),new Xe(0,-1,0)],this._cubeUps=[new Xe(0,1,0),new Xe(0,1,0),new Xe(0,1,0),new Xe(0,1,0),new Xe(0,0,1),new Xe(0,0,-1)]}updateMatrices(e,l=0){const f=this.camera,v=this.matrix,M=e.distance||f.far;M!==f.far&&(f.far=M,f.updateProjectionMatrix()),Xp.setFromMatrixPosition(e.matrixWorld),f.position.copy(Xp),Eh.copy(f.position),Eh.add(this._cubeDirections[l]),f.up.copy(this._cubeUps[l]),f.lookAt(Eh),f.updateMatrixWorld(),v.makeTranslation(-Xp.x,-Xp.y,-Xp.z),Pv.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pv)}}class M0 extends yd{constructor(e,l,f=0,v=2){super(e,l),this.isPointLight=!0,this.type="PointLight",this.distance=f,this.decay=v,this.shadow=new W3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,l){return super.copy(e,l),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class pA extends E0{constructor(){super(new Im(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Lv extends yd{constructor(e,l){super(e,l),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ti.DEFAULT_UP),this.updateMatrix(),this.target=new Ti,this.shadow=new pA}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class kv extends yd{constructor(e,l){super(e,l),this.isAmbientLight=!0,this.type="AmbientLight"}}class sm extends yd{constructor(e,l,f=10,v=10){super(e,l),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=f,this.height=v}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const l=super.toJSON(e);return l.object.width=this.width,l.object.height=this.height,l}}class x0{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Xe)}set(e){for(let l=0;l<9;l++)this.coefficients[l].copy(e[l]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,l){const f=e.x,v=e.y,M=e.z,B=this.coefficients;return l.copy(B[0]).multiplyScalar(.282095),l.addScaledVector(B[1],.488603*v),l.addScaledVector(B[2],.488603*M),l.addScaledVector(B[3],.488603*f),l.addScaledVector(B[4],1.092548*(f*v)),l.addScaledVector(B[5],1.092548*(v*M)),l.addScaledVector(B[6],.315392*(3*M*M-1)),l.addScaledVector(B[7],1.092548*(f*M)),l.addScaledVector(B[8],.546274*(f*f-v*v)),l}getIrradianceAt(e,l){const f=e.x,v=e.y,M=e.z,B=this.coefficients;return l.copy(B[0]).multiplyScalar(.886227),l.addScaledVector(B[1],2*.511664*v),l.addScaledVector(B[2],2*.511664*M),l.addScaledVector(B[3],2*.511664*f),l.addScaledVector(B[4],2*.429043*f*v),l.addScaledVector(B[5],2*.429043*v*M),l.addScaledVector(B[6],.743125*M*M-.247708),l.addScaledVector(B[7],2*.429043*f*M),l.addScaledVector(B[8],.429043*(f*f-v*v)),l}add(e){for(let l=0;l<9;l++)this.coefficients[l].add(e.coefficients[l]);return this}addScaledSH(e,l){for(let f=0;f<9;f++)this.coefficients[f].addScaledVector(e.coefficients[f],l);return this}scale(e){for(let l=0;l<9;l++)this.coefficients[l].multiplyScalar(e);return this}lerp(e,l){for(let f=0;f<9;f++)this.coefficients[f].lerp(e.coefficients[f],l);return this}equals(e){for(let l=0;l<9;l++)if(!this.coefficients[l].equals(e.coefficients[l]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,l=0){const f=this.coefficients;for(let v=0;v<9;v++)f[v].fromArray(e,l+v*3);return this}toArray(e=[],l=0){const f=this.coefficients;for(let v=0;v<9;v++)f[v].toArray(e,l+v*3);return e}static getBasisAt(e,l){const f=e.x,v=e.y,M=e.z;l[0]=.282095,l[1]=.488603*v,l[2]=.488603*M,l[3]=.488603*f,l[4]=1.092548*f*v,l[5]=1.092548*v*M,l[6]=.315392*(3*M*M-1),l[7]=1.092548*f*M,l[8]=.546274*(f*f-v*v)}}class zc extends yd{constructor(e=new x0,l=1){super(void 0,l),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const l=super.toJSON(e);return l.object.sh=this.sh.toArray(),l}}class If extends $l{constructor(e){super(e),this.textures={}}load(e,l,f,v){const M=this,B=new Ru(M.manager);B.setPath(M.path),B.setRequestHeader(M.requestHeader),B.setWithCredentials(M.withCredentials),B.load(e,function(I){try{l(M.parse(JSON.parse(I)))}catch(k){v?v(k):w.error(k),M.manager.itemError(e)}},f,v)}parse(e){const l=this.textures;function f(M){return l[M]===void 0&&w.warn("THREE.MaterialLoader: Undefined texture",M),l[M]}const v=If.createMaterialFromType(e.type);if(e.uuid!==void 0&&(v.uuid=e.uuid),e.name!==void 0&&(v.name=e.name),e.color!==void 0&&v.color!==void 0&&v.color.setHex(e.color),e.roughness!==void 0&&(v.roughness=e.roughness),e.metalness!==void 0&&(v.metalness=e.metalness),e.sheen!==void 0&&(v.sheen=e.sheen),e.sheenColor!==void 0&&(v.sheenColor=new pr().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(v.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&v.emissive!==void 0&&v.emissive.setHex(e.emissive),e.specular!==void 0&&v.specular!==void 0&&v.specular.setHex(e.specular),e.specularIntensity!==void 0&&(v.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&v.specularColor!==void 0&&v.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(v.shininess=e.shininess),e.clearcoat!==void 0&&(v.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(v.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(v.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(v.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(v.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(v.transmission=e.transmission),e.thickness!==void 0&&(v.thickness=e.thickness),e.attenuationDistance!==void 0&&(v.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&v.attenuationColor!==void 0&&v.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(v.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(v.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(v.fog=e.fog),e.flatShading!==void 0&&(v.flatShading=e.flatShading),e.blending!==void 0&&(v.blending=e.blending),e.combine!==void 0&&(v.combine=e.combine),e.side!==void 0&&(v.side=e.side),e.shadowSide!==void 0&&(v.shadowSide=e.shadowSide),e.opacity!==void 0&&(v.opacity=e.opacity),e.transparent!==void 0&&(v.transparent=e.transparent),e.alphaTest!==void 0&&(v.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(v.alphaHash=e.alphaHash),e.depthTest!==void 0&&(v.depthTest=e.depthTest),e.depthWrite!==void 0&&(v.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(v.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(v.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(v.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(v.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(v.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(v.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(v.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(v.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(v.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(v.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(v.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(v.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(v.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(v.rotation=e.rotation),e.linewidth!==1&&(v.linewidth=e.linewidth),e.dashSize!==void 0&&(v.dashSize=e.dashSize),e.gapSize!==void 0&&(v.gapSize=e.gapSize),e.scale!==void 0&&(v.scale=e.scale),e.polygonOffset!==void 0&&(v.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(v.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(v.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(v.dithering=e.dithering),e.alphaToCoverage!==void 0&&(v.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(v.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(v.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(v.visible=e.visible),e.toneMapped!==void 0&&(v.toneMapped=e.toneMapped),e.userData!==void 0&&(v.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?v.vertexColors=e.vertexColors>0:v.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const M in e.uniforms){const B=e.uniforms[M];switch(v.uniforms[M]={},B.type){case"t":v.uniforms[M].value=f(B.value);break;case"c":v.uniforms[M].value=new pr().setHex(B.value);break;case"v2":v.uniforms[M].value=new fn().fromArray(B.value);break;case"v3":v.uniforms[M].value=new Xe().fromArray(B.value);break;case"v4":v.uniforms[M].value=new Ji().fromArray(B.value);break;case"m3":v.uniforms[M].value=new Ai().fromArray(B.value);break;case"m4":v.uniforms[M].value=new si().fromArray(B.value);break;default:v.uniforms[M].value=B.value}}if(e.defines!==void 0&&(v.defines=e.defines),e.vertexShader!==void 0&&(v.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(v.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(v.glslVersion=e.glslVersion),e.extensions!==void 0)for(const M in e.extensions)v.extensions[M]=e.extensions[M];if(e.lights!==void 0&&(v.lights=e.lights),e.clipping!==void 0&&(v.clipping=e.clipping),e.size!==void 0&&(v.size=e.size),e.sizeAttenuation!==void 0&&(v.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(v.map=f(e.map)),e.matcap!==void 0&&(v.matcap=f(e.matcap)),e.alphaMap!==void 0&&(v.alphaMap=f(e.alphaMap)),e.bumpMap!==void 0&&(v.bumpMap=f(e.bumpMap)),e.bumpScale!==void 0&&(v.bumpScale=e.bumpScale),e.normalMap!==void 0&&(v.normalMap=f(e.normalMap)),e.normalMapType!==void 0&&(v.normalMapType=e.normalMapType),e.normalScale!==void 0){let M=e.normalScale;Array.isArray(M)===!1&&(M=[M,M]),v.normalScale=new fn().fromArray(M)}return e.displacementMap!==void 0&&(v.displacementMap=f(e.displacementMap)),e.displacementScale!==void 0&&(v.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(v.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(v.roughnessMap=f(e.roughnessMap)),e.metalnessMap!==void 0&&(v.metalnessMap=f(e.metalnessMap)),e.emissiveMap!==void 0&&(v.emissiveMap=f(e.emissiveMap)),e.emissiveIntensity!==void 0&&(v.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(v.specularMap=f(e.specularMap)),e.specularIntensityMap!==void 0&&(v.specularIntensityMap=f(e.specularIntensityMap)),e.specularColorMap!==void 0&&(v.specularColorMap=f(e.specularColorMap)),e.envMap!==void 0&&(v.envMap=f(e.envMap)),e.envMapIntensity!==void 0&&(v.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(v.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(v.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(v.lightMap=f(e.lightMap)),e.lightMapIntensity!==void 0&&(v.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(v.aoMap=f(e.aoMap)),e.aoMapIntensity!==void 0&&(v.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(v.gradientMap=f(e.gradientMap)),e.clearcoatMap!==void 0&&(v.clearcoatMap=f(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(v.clearcoatRoughnessMap=f(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(v.clearcoatNormalMap=f(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(v.clearcoatNormalScale=new fn().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(v.iridescenceMap=f(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(v.iridescenceThicknessMap=f(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(v.transmissionMap=f(e.transmissionMap)),e.thicknessMap!==void 0&&(v.thicknessMap=f(e.thicknessMap)),e.anisotropyMap!==void 0&&(v.anisotropyMap=f(e.anisotropyMap)),e.sheenColorMap!==void 0&&(v.sheenColorMap=f(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(v.sheenRoughnessMap=f(e.sheenRoughnessMap)),v}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const l={ShadowMaterial:Lc,SpriteMaterial:Vm,RawShaderMaterial:Sf,ShaderMaterial:Wr,PointsMaterial:H1,MeshPhysicalMaterial:Mv,MeshStandardMaterial:Bu,MeshPhongMaterial:rA,MeshToonMaterial:xv,MeshNormalMaterial:Cv,MeshLambertMaterial:Sv,MeshDepthMaterial:Um,MeshDistanceMaterial:Nm,MeshBasicMaterial:Vl,MeshMatcapMaterial:iA,LineDashedMaterial:wv,LineBasicMaterial:Rl,Material:fa};return new l[e]}}class uA{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let l="";for(let f=0,v=e.length;f<v;f++)l+=String.fromCharCode(e[f]);try{return decodeURIComponent(escape(l))}catch(f){return l}}static extractUrlBase(e){const l=e.lastIndexOf("/");return l===-1?"./":e.slice(0,l+1)}static resolveURL(e,l){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(l)&&/^\//.test(e)&&(l=l.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:l+e)}}class Xi extends xi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zv extends $l{constructor(e){super(e)}load(e,l,f,v){const M=this,B=new Ru(M.manager);B.setPath(M.path),B.setRequestHeader(M.requestHeader),B.setWithCredentials(M.withCredentials),B.load(e,function(I){try{l(M.parse(JSON.parse(I)))}catch(k){v?v(k):w.error(k),M.manager.itemError(e)}},f,v)}parse(e){const l={},f={};function v(J,re){if(l[re]!==void 0)return l[re];const se=J.interleavedBuffers[re],ne=M(J,se.buffer),be=ac(se.type,ne),he=new Wm(be,se.stride);return he.uuid=se.uuid,l[re]=he,he}function M(J,re){if(f[re]!==void 0)return f[re];const se=J.arrayBuffers[re],ne=new Uint32Array(se).buffer;return f[re]=ne,ne}const B=e.isInstancedBufferGeometry?new Xi:new xi,I=e.data.index;if(I!==void 0){const J=ac(I.type,I.array);B.setIndex(new uo(J,1))}const k=e.data.attributes;for(const J in k){const re=k[J];let fe;if(re.isInterleavedBufferAttribute){const se=v(e.data,re.data);fe=new Up(se,re.itemSize,re.offset,re.normalized)}else{const se=ac(re.type,re.array),ne=re.isInstancedBufferAttribute?wu:uo;fe=new ne(se,re.itemSize,re.normalized)}re.name!==void 0&&(fe.name=re.name),re.usage!==void 0&&fe.setUsage(re.usage),re.updateRange!==void 0&&(fe.updateRange.offset=re.updateRange.offset,fe.updateRange.count=re.updateRange.count),B.setAttribute(J,fe)}const N=e.data.morphAttributes;if(N)for(const J in N){const re=N[J],fe=[];for(let se=0,ne=re.length;se<ne;se++){const be=re[se];let he;if(be.isInterleavedBufferAttribute){const Se=v(e.data,be.data);he=new Up(Se,be.itemSize,be.offset,be.normalized)}else{const Se=ac(be.type,be.array);he=new uo(Se,be.itemSize,be.normalized)}be.name!==void 0&&(he.name=be.name),fe.push(he)}B.morphAttributes[J]=fe}e.data.morphTargetsRelative&&(B.morphTargetsRelative=!0);const Z=e.data.groups||e.data.drawcalls||e.data.offsets;if(Z!==void 0)for(let J=0,re=Z.length;J!==re;++J){const fe=Z[J];B.addGroup(fe.start,fe.count,fe.materialIndex)}const $=e.data.boundingSphere;if($!==void 0){const J=new Xe;$.center!==void 0&&J.fromArray($.center),B.boundingSphere=new wa(J,$.radius)}return e.name&&(B.name=e.name),e.userData&&(B.userData=e.userData),B}}class V3 extends $l{constructor(e){super(e)}load(e,l,f,v){const M=this,B=this.path===""?uA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||B;const I=new Ru(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(e,function(k){let N=null;try{N=JSON.parse(k)}catch(Z){v!==void 0&&v(Z),w.error("THREE:ObjectLoader: Can't parse "+e+".",Z.message);return}const X=N.metadata;if(X===void 0||X.type===void 0||X.type.toLowerCase()==="geometry"){v!==void 0&&v(new Error("THREE.ObjectLoader: Can't load "+e)),w.error("THREE.ObjectLoader: Can't load "+e);return}M.parse(N,l)},f,v)}loadAsync(e,l){return es(this,null,function*(){const f=this,v=this.path===""?uA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||v;const M=new Ru(this.manager);M.setPath(this.path),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials);const B=yield M.loadAsync(e,l),I=JSON.parse(B),k=I.metadata;if(k===void 0||k.type===void 0||k.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield f.parseAsync(I)})}parse(e,l){const f=this.parseAnimations(e.animations),v=this.parseShapes(e.shapes),M=this.parseGeometries(e.geometries,v),B=this.parseImages(e.images,function(){l!==void 0&&l(N)}),I=this.parseTextures(e.textures,B),k=this.parseMaterials(e.materials,I),N=this.parseObject(e.object,M,k,I,f),X=this.parseSkeletons(e.skeletons,N);if(this.bindSkeletons(N,X),l!==void 0){let Z=!1;for(const $ in B)if(B[$].data instanceof HTMLImageElement){Z=!0;break}Z===!1&&l(N)}return N}parseAsync(e){return es(this,null,function*(){const l=this.parseAnimations(e.animations),f=this.parseShapes(e.shapes),v=this.parseGeometries(e.geometries,f),M=yield this.parseImagesAsync(e.images),B=this.parseTextures(e.textures,M),I=this.parseMaterials(e.materials,B),k=this.parseObject(e.object,v,I,B,l),N=this.parseSkeletons(e.skeletons,k);return this.bindSkeletons(k,N),k})}parseShapes(e){const l={};if(e!==void 0)for(let f=0,v=e.length;f<v;f++){const M=new Mf().fromJSON(e[f]);l[M.uuid]=M}return l}parseSkeletons(e,l){const f={},v={};if(l.traverse(function(M){M.isBone&&(v[M.uuid]=M)}),e!==void 0)for(let M=0,B=e.length;M<B;M++){const I=new Np().fromJSON(e[M],v);f[I.uuid]=I}return f}parseGeometries(e,l){const f={};if(e!==void 0){const v=new zv;for(let M=0,B=e.length;M<B;M++){let I;const k=e[M];switch(k.type){case"BufferGeometry":case"InstancedBufferGeometry":I=v.parse(k);break;default:k.type in bv?I=bv[k.type].fromJSON(k,l):w.warn(`THREE.ObjectLoader: Unsupported geometry type "${k.type}"`)}I.uuid=k.uuid,k.name!==void 0&&(I.name=k.name),k.userData!==void 0&&(I.userData=k.userData),f[k.uuid]=I}}return f}parseMaterials(e,l){const f={},v={};if(e!==void 0){const M=new If;M.setTextures(l);for(let B=0,I=e.length;B<I;B++){const k=e[B];f[k.uuid]===void 0&&(f[k.uuid]=M.parse(k)),v[k.uuid]=f[k.uuid]}}return v}parseAnimations(e){const l={};if(e!==void 0)for(let f=0;f<e.length;f++){const v=e[f],M=Rf.parse(v);l[M.uuid]=M}return l}parseImages(e,l){const f=this,v={};let M;function B(k){return f.manager.itemStart(k),M.load(k,function(){f.manager.itemEnd(k)},void 0,function(){f.manager.itemError(k),f.manager.itemEnd(k)})}function I(k){if(typeof k=="string"){const N=k,X=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(N)?N:f.resourcePath+N;return B(X)}else return k.data?{data:ac(k.type,k.data),width:k.width,height:k.height}:null}if(e!==void 0&&e.length>0){const k=new y0(l);M=new om(k),M.setCrossOrigin(this.crossOrigin);for(let N=0,X=e.length;N<X;N++){const Z=e[N],$=Z.url;if(Array.isArray($)){const J=[];for(let re=0,fe=$.length;re<fe;re++){const se=$[re],ne=I(se);ne!==null&&(ne instanceof HTMLImageElement?J.push(ne):J.push(new fh(ne.data,ne.width,ne.height)))}v[Z.uuid]=new xc(J)}else{const J=I(Z.url);v[Z.uuid]=new xc(J)}}}return v}parseImagesAsync(e){return es(this,null,function*(){const l=this,f={};let v;function M(B){return es(this,null,function*(){if(typeof B=="string"){const I=B,k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:l.resourcePath+I;return yield v.loadAsync(k)}else return B.data?{data:ac(B.type,B.data),width:B.width,height:B.height}:null})}if(e!==void 0&&e.length>0){v=new om(this.manager),v.setCrossOrigin(this.crossOrigin);for(let B=0,I=e.length;B<I;B++){const k=e[B],N=k.url;if(Array.isArray(N)){const X=[];for(let Z=0,$=N.length;Z<$;Z++){const J=N[Z],re=yield M(J);re!==null&&(re instanceof HTMLImageElement?X.push(re):X.push(new fh(re.data,re.width,re.height)))}f[k.uuid]=new xc(X)}else{const X=yield M(k.url);f[k.uuid]=new xc(X)}}}return f})}parseTextures(e,l){function f(M,B){return typeof M=="number"?M:(w.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",M),B[M])}const v={};if(e!==void 0)for(let M=0,B=e.length;M<B;M++){const I=e[M];I.image===void 0&&w.warn('THREE.ObjectLoader: No "image" specified for',I.uuid),l[I.image]===void 0&&w.warn("THREE.ObjectLoader: Undefined image",I.image);const k=l[I.image],N=k.data;let X;Array.isArray(N)?(X=new Jo,N.length===6&&(X.needsUpdate=!0)):(N&&N.data?X=new fh:X=new io,N&&(X.needsUpdate=!0)),X.source=k,X.uuid=I.uuid,I.name!==void 0&&(X.name=I.name),I.mapping!==void 0&&(X.mapping=f(I.mapping,Q3)),I.channel!==void 0&&(X.channel=I.channel),I.offset!==void 0&&X.offset.fromArray(I.offset),I.repeat!==void 0&&X.repeat.fromArray(I.repeat),I.center!==void 0&&X.center.fromArray(I.center),I.rotation!==void 0&&(X.rotation=I.rotation),I.wrap!==void 0&&(X.wrapS=f(I.wrap[0],Gv),X.wrapT=f(I.wrap[1],Gv)),I.format!==void 0&&(X.format=I.format),I.internalFormat!==void 0&&(X.internalFormat=I.internalFormat),I.type!==void 0&&(X.type=I.type),I.colorSpace!==void 0&&(X.colorSpace=I.colorSpace),I.encoding!==void 0&&(X.encoding=I.encoding),I.minFilter!==void 0&&(X.minFilter=f(I.minFilter,Uv)),I.magFilter!==void 0&&(X.magFilter=f(I.magFilter,Uv)),I.anisotropy!==void 0&&(X.anisotropy=I.anisotropy),I.flipY!==void 0&&(X.flipY=I.flipY),I.generateMipmaps!==void 0&&(X.generateMipmaps=I.generateMipmaps),I.premultiplyAlpha!==void 0&&(X.premultiplyAlpha=I.premultiplyAlpha),I.unpackAlignment!==void 0&&(X.unpackAlignment=I.unpackAlignment),I.compareFunction!==void 0&&(X.compareFunction=I.compareFunction),I.userData!==void 0&&(X.userData=I.userData),v[I.uuid]=X}return v}parseObject(e,l,f,v,M){let B;function I($){return l[$]===void 0&&w.warn("THREE.ObjectLoader: Undefined geometry",$),l[$]}function k($){if($!==void 0){if(Array.isArray($)){const J=[];for(let re=0,fe=$.length;re<fe;re++){const se=$[re];f[se]===void 0&&w.warn("THREE.ObjectLoader: Undefined material",se),J.push(f[se])}return J}return f[$]===void 0&&w.warn("THREE.ObjectLoader: Undefined material",$),f[$]}}function N($){return v[$]===void 0&&w.warn("THREE.ObjectLoader: Undefined texture",$),v[$]}let X,Z;switch(e.type){case"Scene":B=new Pg,e.background!==void 0&&(Number.isInteger(e.background)?B.background=new pr(e.background):B.background=N(e.background)),e.environment!==void 0&&(B.environment=N(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?B.fog=new jm(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(B.fog=new ud(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(B.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(B.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":B=new Gi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(B.focus=e.focus),e.zoom!==void 0&&(B.zoom=e.zoom),e.filmGauge!==void 0&&(B.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(B.filmOffset=e.filmOffset),e.view!==void 0&&(B.view=Object.assign({},e.view));break;case"OrthographicCamera":B=new Im(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(B.zoom=e.zoom),e.view!==void 0&&(B.view=Object.assign({},e.view));break;case"AmbientLight":B=new kv(e.color,e.intensity);break;case"DirectionalLight":B=new Lv(e.color,e.intensity);break;case"PointLight":B=new M0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":B=new sm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":B=new b0(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":B=new Fv(e.color,e.groundColor,e.intensity);break;case"LightProbe":B=new zc().fromJSON(e);break;case"SkinnedMesh":X=I(e.geometry),Z=k(e.material),B=new k1(X,Z),e.bindMode!==void 0&&(B.bindMode=e.bindMode),e.bindMatrix!==void 0&&B.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(B.skeleton=e.skeleton);break;case"Mesh":X=I(e.geometry),Z=k(e.material),B=new fo(X,Z);break;case"InstancedMesh":X=I(e.geometry),Z=k(e.material);const $=e.count,J=e.instanceMatrix,re=e.instanceColor;B=new iv(X,Z,$),B.instanceMatrix=new wu(new Float32Array(J.array),16),re!==void 0&&(B.instanceColor=new wu(new Float32Array(re.array),re.itemSize));break;case"LOD":B=new Zy;break;case"Line":B=new fd(I(e.geometry),k(e.material));break;case"LineLoop":B=new gd(I(e.geometry),k(e.material));break;case"LineSegments":B=new Hp(I(e.geometry),k(e.material));break;case"PointCloud":case"Points":B=new V1(I(e.geometry),k(e.material));break;case"Sprite":B=new O1(k(e.material));break;case"Group":B=new hf;break;case"Bone":B=new Ym;break;default:B=new Ti}if(B.uuid=e.uuid,e.name!==void 0&&(B.name=e.name),e.matrix!==void 0?(B.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(B.matrixAutoUpdate=e.matrixAutoUpdate),B.matrixAutoUpdate&&B.matrix.decompose(B.position,B.quaternion,B.scale)):(e.position!==void 0&&B.position.fromArray(e.position),e.rotation!==void 0&&B.rotation.fromArray(e.rotation),e.quaternion!==void 0&&B.quaternion.fromArray(e.quaternion),e.scale!==void 0&&B.scale.fromArray(e.scale)),e.up!==void 0&&B.up.fromArray(e.up),e.castShadow!==void 0&&(B.castShadow=e.castShadow),e.receiveShadow!==void 0&&(B.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(B.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(B.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(B.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&B.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(B.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(B.visible=e.visible),e.frustumCulled!==void 0&&(B.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(B.renderOrder=e.renderOrder),e.userData!==void 0&&(B.userData=e.userData),e.layers!==void 0&&(B.layers.mask=e.layers),e.children!==void 0){const $=e.children;for(let J=0;J<$.length;J++)B.add(this.parseObject($[J],l,f,v,M))}if(e.animations!==void 0){const $=e.animations;for(let J=0;J<$.length;J++){const re=$[J];B.animations.push(M[re])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(B.autoUpdate=e.autoUpdate);const $=e.levels;for(let J=0;J<$.length;J++){const re=$[J],fe=B.getObjectByProperty("uuid",re.object);fe!==void 0&&B.addLevel(fe,re.distance,re.hysteresis)}}return B}bindSkeletons(e,l){Object.keys(l).length!==0&&e.traverse(function(f){if(f.isSkinnedMesh===!0&&f.skeleton!==void 0){const v=l[f.skeleton];v===void 0?w.warn("THREE.ObjectLoader: No skeleton found with UUID:",f.skeleton):f.bind(v,f.bindMatrix)}})}}const Q3={UVMapping:va,CubeReflectionMapping:Ls,CubeRefractionMapping:ts,EquirectangularReflectionMapping:Ui,EquirectangularRefractionMapping:Yi,CubeUVReflectionMapping:Qs},Gv={RepeatWrapping:Ko,ClampToEdgeWrapping:Br,MirroredRepeatWrapping:Ni},Uv={NearestFilter:ki,NearestMipmapNearestFilter:la,NearestMipmapLinearFilter:ps,LinearFilter:co,LinearMipmapNearestFilter:za,LinearMipmapLinearFilter:ho};class X3 extends $l{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&w.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&w.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,l,f,v){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=this,B=_h.get(e);if(B!==void 0)return M.manager.itemStart(e),setTimeout(function(){l&&l(B),M.manager.itemEnd(e)},0),B;const I={};I.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",I.headers=this.requestHeader,fetch(e,I).then(function(k){return k.blob()}).then(function(k){return createImageBitmap(k,Object.assign(M.options,{colorSpaceConversion:"none"}))}).then(function(k){_h.add(e,k),l&&l(k),M.manager.itemEnd(e)}).catch(function(k){v&&v(k),M.manager.itemError(e),M.manager.itemEnd(e)}),M.manager.itemStart(e)}}let C0;class dA{static getContext(){return C0===void 0&&(C0=new(window.AudioContext||window.webkitAudioContext)),C0}static setContext(e){C0=e}}class K3 extends $l{constructor(e){super(e)}load(e,l,f,v){const M=this,B=new Ru(this.manager);B.setResponseType("arraybuffer"),B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(e,function(k){try{const N=k.slice(0);dA.getContext().decodeAudioData(N,function(Z){l(Z)},I)}catch(N){I(N)}},f,v);function I(k){v?v(k):w.error(k),M.manager.itemError(e)}}}class Y3 extends zc{constructor(e,l,f=1){super(void 0,f),this.isHemisphereLightProbe=!0;const v=new pr().set(e),M=new pr().set(l),B=new Xe(v.r,v.g,v.b),I=new Xe(M.r,M.g,M.b),k=Math.sqrt(Math.PI),N=k*Math.sqrt(.75);this.sh.coefficients[0].copy(B).add(I).multiplyScalar(k),this.sh.coefficients[1].copy(B).sub(I).multiplyScalar(N)}}class J3 extends zc{constructor(e,l=1){super(void 0,l),this.isAmbientLightProbe=!0;const f=new pr().set(e);this.sh.coefficients[0].set(f.r,f.g,f.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Nv=new si,Hv=new si,bh=new si;class q3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const l=this._cache;if(l.focus!==e.focus||l.fov!==e.fov||l.aspect!==e.aspect*this.aspect||l.near!==e.near||l.far!==e.far||l.zoom!==e.zoom||l.eyeSep!==this.eyeSep){l.focus=e.focus,l.fov=e.fov,l.aspect=e.aspect*this.aspect,l.near=e.near,l.far=e.far,l.zoom=e.zoom,l.eyeSep=this.eyeSep,bh.copy(e.projectionMatrix);const v=l.eyeSep/2,M=v*l.near/l.focus,B=l.near*Math.tan(yc*l.fov*.5)/l.zoom;let I,k;Hv.elements[12]=-v,Nv.elements[12]=v,I=-B*l.aspect+M,k=B*l.aspect+M,bh.elements[0]=2*l.near/(k-I),bh.elements[8]=(k+I)/(k-I),this.cameraL.projectionMatrix.copy(bh),I=-B*l.aspect-M,k=B*l.aspect-M,bh.elements[0]=2*l.near/(k-I),bh.elements[8]=(k+I)/(k-I),this.cameraR.projectionMatrix.copy(bh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Hv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Nv)}}class jv{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const l=hA();e=(l-this.oldTime)/1e3,this.oldTime=l,this.elapsedTime+=e}return e}}function hA(){return(typeof performance=="undefined"?Date:performance).now()}const cp=new Xe,fA=new Zs,Z3=new Xe,Mh=new Xe;class $3 extends Ti{constructor(){super(),this.type="AudioListener",this.context=dA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new jv}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const l=this.context.listener,f=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cp,fA,Z3),Mh.set(0,0,-1).applyQuaternion(fA),l.positionX){const v=this.context.currentTime+this.timeDelta;l.positionX.linearRampToValueAtTime(cp.x,v),l.positionY.linearRampToValueAtTime(cp.y,v),l.positionZ.linearRampToValueAtTime(cp.z,v),l.forwardX.linearRampToValueAtTime(Mh.x,v),l.forwardY.linearRampToValueAtTime(Mh.y,v),l.forwardZ.linearRampToValueAtTime(Mh.z,v),l.upX.linearRampToValueAtTime(f.x,v),l.upY.linearRampToValueAtTime(f.y,v),l.upZ.linearRampToValueAtTime(f.z,v)}else l.setPosition(cp.x,cp.y,cp.z),l.setOrientation(Mh.x,Mh.y,Mh.z,f.x,f.y,f.z)}}class Wv extends Ti{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){w.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const l=this.context.createBufferSource();return l.buffer=this.buffer,l.loop=this.loop,l.loopStart=this.loopStart,l.loopEnd=this.loopEnd,l.onended=this.onEnded.bind(this),l.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=l,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,l=this.filters.length;e<l;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,l=this.filters.length;e<l;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(w.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const vd=new Xe,Vv=new Zs,eE=new Xe,Da=new Xe;class Ff extends Wv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,l,f){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=l,this.panner.coneOuterGain=f,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(vd,Vv,eE),Da.set(0,0,1).applyQuaternion(Vv);const l=this.panner;if(l.positionX){const f=this.context.currentTime+this.listener.timeDelta;l.positionX.linearRampToValueAtTime(vd.x,f),l.positionY.linearRampToValueAtTime(vd.y,f),l.positionZ.linearRampToValueAtTime(vd.z,f),l.orientationX.linearRampToValueAtTime(Da.x,f),l.orientationY.linearRampToValueAtTime(Da.y,f),l.orientationZ.linearRampToValueAtTime(Da.z,f)}else l.setPosition(vd.x,vd.y,vd.z),l.setOrientation(Da.x,Da.y,Da.z)}}class Qv{constructor(e,l=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=l,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const l=this.getFrequencyData();for(let f=0;f<l.length;f++)e+=l[f];return e/l.length}}class gA{constructor(e,l,f){this.binding=e,this.valueSize=f;let v,M,B;switch(l){case"quaternion":v=this._slerp,M=this._slerpAdditive,B=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(f*6),this._workIndex=5;break;case"string":case"bool":v=this._select,M=this._select,B=this._setAdditiveIdentityOther,this.buffer=new Array(f*5);break;default:v=this._lerp,M=this._lerpAdditive,B=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(f*5)}this._mixBufferRegion=v,this._mixBufferRegionAdditive=M,this._setIdentity=B,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,l){const f=this.buffer,v=this.valueSize,M=e*v+v;let B=this.cumulativeWeight;if(B===0){for(let I=0;I!==v;++I)f[M+I]=f[I];B=l}else{B+=l;const I=l/B;this._mixBufferRegion(f,M,0,I,v)}this.cumulativeWeight=B}accumulateAdditive(e){const l=this.buffer,f=this.valueSize,v=f*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(l,v,0,e,f),this.cumulativeWeightAdditive+=e}apply(e){const l=this.valueSize,f=this.buffer,v=e*l+l,M=this.cumulativeWeight,B=this.cumulativeWeightAdditive,I=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,M<1){const k=l*this._origIndex;this._mixBufferRegion(f,v,k,1-M,l)}B>0&&this._mixBufferRegionAdditive(f,v,this._addIndex*l,1,l);for(let k=l,N=l+l;k!==N;++k)if(f[k]!==f[k+l]){I.setValue(f,v);break}}saveOriginalState(){const e=this.binding,l=this.buffer,f=this.valueSize,v=f*this._origIndex;e.getValue(l,v);for(let M=f,B=v;M!==B;++M)l[M]=l[v+M%f];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,l=e+this.valueSize;for(let f=e;f<l;f++)this.buffer[f]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,l=this._addIndex*this.valueSize;for(let f=0;f<this.valueSize;f++)this.buffer[l+f]=this.buffer[e+f]}_select(e,l,f,v,M){if(v>=.5)for(let B=0;B!==M;++B)e[l+B]=e[f+B]}_slerp(e,l,f,v){Zs.slerpFlat(e,l,e,l,e,f,v)}_slerpAdditive(e,l,f,v,M){const B=this._workIndex*M;Zs.multiplyQuaternionsFlat(e,B,e,l,e,f),Zs.slerpFlat(e,l,e,l,e,B,v)}_lerp(e,l,f,v,M){const B=1-v;for(let I=0;I!==M;++I){const k=l+I;e[k]=e[k]*B+e[f+I]*v}}_lerpAdditive(e,l,f,v,M){for(let B=0;B!==M;++B){const I=l+B;e[I]=e[I]+e[f+B]*v}}}const am="\\[\\]\\.:\\/",mA=new RegExp("["+am+"]","g"),Kp="[^"+am+"]",tE="[^"+am.replace("\\.","")+"]",AA=/((?:WC+[\/:])*)/.source.replace("WC",Kp),nE=/(WCOD+)?/.source.replace("WCOD",tE),xh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Kp),_d=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Kp),rE=new RegExp("^"+AA+nE+xh+_d+"$"),iE=["material","materials","bones","map"];class oE{constructor(e,l,f){const v=f||Zi.parseTrackName(l);this._targetGroup=e,this._bindings=e.subscribe_(l,v)}getValue(e,l){this.bind();const f=this._targetGroup.nCachedObjects_,v=this._bindings[f];v!==void 0&&v.getValue(e,l)}setValue(e,l){const f=this._bindings;for(let v=this._targetGroup.nCachedObjects_,M=f.length;v!==M;++v)f[v].setValue(e,l)}bind(){const e=this._bindings;for(let l=this._targetGroup.nCachedObjects_,f=e.length;l!==f;++l)e[l].bind()}unbind(){const e=this._bindings;for(let l=this._targetGroup.nCachedObjects_,f=e.length;l!==f;++l)e[l].unbind()}}class Zi{constructor(e,l,f){this.path=l,this.parsedPath=f||Zi.parseTrackName(l),this.node=Zi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,l,f){return e&&e.isAnimationObjectGroup?new Zi.Composite(e,l,f):new Zi(e,l,f)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mA,"")}static parseTrackName(e){const l=rE.exec(e);if(l===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const f={nodeName:l[2],objectName:l[3],objectIndex:l[4],propertyName:l[5],propertyIndex:l[6]},v=f.nodeName&&f.nodeName.lastIndexOf(".");if(v!==void 0&&v!==-1){const M=f.nodeName.substring(v+1);iE.indexOf(M)!==-1&&(f.nodeName=f.nodeName.substring(0,v),f.objectName=M)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return f}static findNode(e,l){if(l===void 0||l===""||l==="."||l===-1||l===e.name||l===e.uuid)return e;if(e.skeleton){const f=e.skeleton.getBoneByName(l);if(f!==void 0)return f}if(e.children){const f=function(M){for(let B=0;B<M.length;B++){const I=M[B];if(I.name===l||I.uuid===l)return I;const k=f(I.children);if(k)return k}return null},v=f(e.children);if(v)return v}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,l){e[l]=this.targetObject[this.propertyName]}_getValue_array(e,l){const f=this.resolvedProperty;for(let v=0,M=f.length;v!==M;++v)e[l++]=f[v]}_getValue_arrayElement(e,l){e[l]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,l){this.resolvedProperty.toArray(e,l)}_setValue_direct(e,l){this.targetObject[this.propertyName]=e[l]}_setValue_direct_setNeedsUpdate(e,l){this.targetObject[this.propertyName]=e[l],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,l){this.targetObject[this.propertyName]=e[l],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,l){const f=this.resolvedProperty;for(let v=0,M=f.length;v!==M;++v)f[v]=e[l++]}_setValue_array_setNeedsUpdate(e,l){const f=this.resolvedProperty;for(let v=0,M=f.length;v!==M;++v)f[v]=e[l++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,l){const f=this.resolvedProperty;for(let v=0,M=f.length;v!==M;++v)f[v]=e[l++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,l){this.resolvedProperty[this.propertyIndex]=e[l]}_setValue_arrayElement_setNeedsUpdate(e,l){this.resolvedProperty[this.propertyIndex]=e[l],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,l){this.resolvedProperty[this.propertyIndex]=e[l],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,l){this.resolvedProperty.fromArray(e,l)}_setValue_fromArray_setNeedsUpdate(e,l){this.resolvedProperty.fromArray(e,l),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,l){this.resolvedProperty.fromArray(e,l),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,l){this.bind(),this.getValue(e,l)}_setValue_unbound(e,l){this.bind(),this.setValue(e,l)}bind(){let e=this.node;const l=this.parsedPath,f=l.objectName,v=l.propertyName;let M=l.propertyIndex;if(e||(e=Zi.findNode(this.rootNode,l.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){w.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(f){let N=l.objectIndex;switch(f){case"materials":if(!e.material){w.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){w.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){w.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let X=0;X<e.length;X++)if(e[X].name===N){N=X;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){w.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){w.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[f]===void 0){w.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[f]}if(N!==void 0){if(e[N]===void 0){w.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[N]}}const B=e[v];if(B===void 0){const N=l.nodeName;w.error("THREE.PropertyBinding: Trying to update property for track: "+N+"."+v+" but it wasn't found.",e);return}let I=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?I=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(I=this.Versioning.MatrixWorldNeedsUpdate);let k=this.BindingType.Direct;if(M!==void 0){if(v==="morphTargetInfluences"){if(!e.geometry){w.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){w.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[M]!==void 0&&(M=e.morphTargetDictionary[M])}k=this.BindingType.ArrayElement,this.resolvedProperty=B,this.propertyIndex=M}else B.fromArray!==void 0&&B.toArray!==void 0?(k=this.BindingType.HasFromToArray,this.resolvedProperty=B):Array.isArray(B)?(k=this.BindingType.EntireArray,this.resolvedProperty=B):this.propertyName=v;this.getValue=this.GetterByBindingType[k],this.setValue=this.SetterByBindingTypeAndVersioning[k][I]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zi.Composite=oE,Zi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Zi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Zi.prototype.GetterByBindingType=[Zi.prototype._getValue_direct,Zi.prototype._getValue_array,Zi.prototype._getValue_arrayElement,Zi.prototype._getValue_toArray],Zi.prototype.SetterByBindingTypeAndVersioning=[[Zi.prototype._setValue_direct,Zi.prototype._setValue_direct_setNeedsUpdate,Zi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zi.prototype._setValue_array,Zi.prototype._setValue_array_setNeedsUpdate,Zi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zi.prototype._setValue_arrayElement,Zi.prototype._setValue_arrayElement_setNeedsUpdate,Zi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zi.prototype._setValue_fromArray,Zi.prototype._setValue_fromArray_setNeedsUpdate,Zi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class yA{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ha(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let f=0,v=arguments.length;f!==v;++f)e[arguments[f].uuid]=f;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const l=this;this.stats={objects:{get total(){return l._objects.length},get inUse(){return this.total-l.nCachedObjects_}},get bindingsPerObject(){return l._bindings.length}}}add(){const e=this._objects,l=this._indicesByUUID,f=this._paths,v=this._parsedPaths,M=this._bindings,B=M.length;let I,k=e.length,N=this.nCachedObjects_;for(let X=0,Z=arguments.length;X!==Z;++X){const $=arguments[X],J=$.uuid;let re=l[J];if(re===void 0){re=k++,l[J]=re,e.push($);for(let fe=0,se=B;fe!==se;++fe)M[fe].push(new Zi($,f[fe],v[fe]))}else if(re<N){I=e[re];const fe=--N,se=e[fe];l[se.uuid]=re,e[re]=se,l[J]=fe,e[fe]=$;for(let ne=0,be=B;ne!==be;++ne){const he=M[ne],Se=he[fe];let Oe=he[re];he[re]=Se,Oe===void 0&&(Oe=new Zi($,f[ne],v[ne])),he[fe]=Oe}}else e[re]!==I&&w.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=N}remove(){const e=this._objects,l=this._indicesByUUID,f=this._bindings,v=f.length;let M=this.nCachedObjects_;for(let B=0,I=arguments.length;B!==I;++B){const k=arguments[B],N=k.uuid,X=l[N];if(X!==void 0&&X>=M){const Z=M++,$=e[Z];l[$.uuid]=X,e[X]=$,l[N]=Z,e[Z]=k;for(let J=0,re=v;J!==re;++J){const fe=f[J],se=fe[Z],ne=fe[X];fe[X]=se,fe[Z]=ne}}}this.nCachedObjects_=M}uncache(){const e=this._objects,l=this._indicesByUUID,f=this._bindings,v=f.length;let M=this.nCachedObjects_,B=e.length;for(let I=0,k=arguments.length;I!==k;++I){const N=arguments[I],X=N.uuid,Z=l[X];if(Z!==void 0)if(delete l[X],Z<M){const $=--M,J=e[$],re=--B,fe=e[re];l[J.uuid]=Z,e[Z]=J,l[fe.uuid]=$,e[$]=fe,e.pop();for(let se=0,ne=v;se!==ne;++se){const be=f[se],he=be[$],Se=be[re];be[Z]=he,be[$]=Se,be.pop()}}else{const $=--B,J=e[$];$>0&&(l[J.uuid]=Z),e[Z]=J,e.pop();for(let re=0,fe=v;re!==fe;++re){const se=f[re];se[Z]=se[$],se.pop()}}}this.nCachedObjects_=M}subscribe_(e,l){const f=this._bindingsIndicesByPath;let v=f[e];const M=this._bindings;if(v!==void 0)return M[v];const B=this._paths,I=this._parsedPaths,k=this._objects,N=k.length,X=this.nCachedObjects_,Z=new Array(N);v=M.length,f[e]=v,B.push(e),I.push(l),M.push(Z);for(let $=X,J=k.length;$!==J;++$){const re=k[$];Z[$]=new Zi(re,e,l)}return Z}unsubscribe_(e){const l=this._bindingsIndicesByPath,f=l[e];if(f!==void 0){const v=this._paths,M=this._parsedPaths,B=this._bindings,I=B.length-1,k=B[I],N=e[I];l[N]=f,B[f]=k,B.pop(),M[f]=M[I],M.pop(),v[f]=v[I],v.pop()}}}class Xv{constructor(e,l,f=null,v=l.blendMode){this._mixer=e,this._clip=l,this._localRoot=f,this.blendMode=v;const M=l.tracks,B=M.length,I=new Array(B),k={endingStart:ba,endingEnd:ba};for(let N=0;N!==B;++N){const X=M[N].createInterpolant(null);I[N]=X,X.settings=k}this._interpolantSettings=k,this._interpolants=I,this._propertyBindings=new Array(B),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ii,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,l){return this.loop=e,this.repetitions=l,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,l,f){if(e.fadeOut(l),this.fadeIn(l),f){const v=this._clip.duration,M=e._clip.duration,B=M/v,I=v/M;e.warp(1,B,l),this.warp(I,1,l)}return this}crossFadeTo(e,l,f){return e.crossFadeFrom(this,l,f)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,l,f){const v=this._mixer,M=v.time,B=this.timeScale;let I=this._timeScaleInterpolant;I===null&&(I=v._lendControlInterpolant(),this._timeScaleInterpolant=I);const k=I.parameterPositions,N=I.sampleValues;return k[0]=M,k[1]=M+f,N[0]=e/B,N[1]=l/B,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,l,f,v){if(!this.enabled){this._updateWeight(e);return}const M=this._startTime;if(M!==null){const k=(e-M)*f;k<0||f===0?l=0:(this._startTime=null,l=f*k)}l*=this._updateTimeScale(e);const B=this._updateTime(l),I=this._updateWeight(e);if(I>0){const k=this._interpolants,N=this._propertyBindings;switch(this.blendMode){case ku:for(let X=0,Z=k.length;X!==Z;++X)k[X].evaluate(B),N[X].accumulateAdditive(I);break;case mp:default:for(let X=0,Z=k.length;X!==Z;++X)k[X].evaluate(B),N[X].accumulate(v,I)}}}_updateWeight(e){let l=0;if(this.enabled){l=this.weight;const f=this._weightInterpolant;if(f!==null){const v=f.evaluate(e)[0];l*=v,e>f.parameterPositions[1]&&(this.stopFading(),v===0&&(this.enabled=!1))}}return this._effectiveWeight=l,l}_updateTimeScale(e){let l=0;if(!this.paused){l=this.timeScale;const f=this._timeScaleInterpolant;if(f!==null){const v=f.evaluate(e)[0];l*=v,e>f.parameterPositions[1]&&(this.stopWarping(),l===0?this.paused=!0:this.timeScale=l)}}return this._effectiveTimeScale=l,l}_updateTime(e){const l=this._clip.duration,f=this.loop;let v=this.time+e,M=this._loopCount;const B=f===Ul;if(e===0)return M===-1?v:B&&(M&1)===1?l-v:v;if(f===mi){M===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(v>=l)v=l;else if(v<0)v=0;else{this.time=v;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(M===-1&&(e>=0?(M=0,this._setEndings(!0,this.repetitions===0,B)):this._setEndings(this.repetitions===0,!0,B)),v>=l||v<0){const I=Math.floor(v/l);v-=l*I,M+=Math.abs(I);const k=this.repetitions-M;if(k<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,v=e>0?l:0,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(k===1){const N=e<0;this._setEndings(N,!N,B)}else this._setEndings(!1,!1,B);this._loopCount=M,this.time=v,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:I})}}else this.time=v;if(B&&(M&1)===1)return l-v}return v}_setEndings(e,l,f){const v=this._interpolantSettings;f?(v.endingStart=mc,v.endingEnd=mc):(e?v.endingStart=this.zeroSlopeAtStart?mc:ba:v.endingStart=gp,l?v.endingEnd=this.zeroSlopeAtEnd?mc:ba:v.endingEnd=gp)}_scheduleFading(e,l,f){const v=this._mixer,M=v.time;let B=this._weightInterpolant;B===null&&(B=v._lendControlInterpolant(),this._weightInterpolant=B);const I=B.parameterPositions,k=B.sampleValues;return I[0]=M,k[0]=l,I[1]=M+e,k[1]=f,this}}const sE=new Float32Array(1);class aE extends Ma{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,l){const f=e._localRoot||this._root,v=e._clip.tracks,M=v.length,B=e._propertyBindings,I=e._interpolants,k=f.uuid,N=this._bindingsByRootAndName;let X=N[k];X===void 0&&(X={},N[k]=X);for(let Z=0;Z!==M;++Z){const $=v[Z],J=$.name;let re=X[J];if(re!==void 0)++re.referenceCount,B[Z]=re;else{if(re=B[Z],re!==void 0){re._cacheIndex===null&&(++re.referenceCount,this._addInactiveBinding(re,k,J));continue}const fe=l&&l._propertyBindings[Z].binding.parsedPath;re=new gA(Zi.create(f,J,fe),$.ValueTypeName,$.getValueSize()),++re.referenceCount,this._addInactiveBinding(re,k,J),B[Z]=re}I[Z].resultBuffer=re.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const f=(e._localRoot||this._root).uuid,v=e._clip.uuid,M=this._actionsByClip[v];this._bindAction(e,M&&M.knownActions[0]),this._addInactiveAction(e,v,f)}const l=e._propertyBindings;for(let f=0,v=l.length;f!==v;++f){const M=l[f];M.useCount++===0&&(this._lendBinding(M),M.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const l=e._propertyBindings;for(let f=0,v=l.length;f!==v;++f){const M=l[f];--M.useCount===0&&(M.restoreOriginalState(),this._takeBackBinding(M))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const l=e._cacheIndex;return l!==null&&l<this._nActiveActions}_addInactiveAction(e,l,f){const v=this._actions,M=this._actionsByClip;let B=M[l];if(B===void 0)B={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,M[l]=B;else{const I=B.knownActions;e._byClipCacheIndex=I.length,I.push(e)}e._cacheIndex=v.length,v.push(e),B.actionByRoot[f]=e}_removeInactiveAction(e){const l=this._actions,f=l[l.length-1],v=e._cacheIndex;f._cacheIndex=v,l[v]=f,l.pop(),e._cacheIndex=null;const M=e._clip.uuid,B=this._actionsByClip,I=B[M],k=I.knownActions,N=k[k.length-1],X=e._byClipCacheIndex;N._byClipCacheIndex=X,k[X]=N,k.pop(),e._byClipCacheIndex=null;const Z=I.actionByRoot,$=(e._localRoot||this._root).uuid;delete Z[$],k.length===0&&delete B[M],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const l=e._propertyBindings;for(let f=0,v=l.length;f!==v;++f){const M=l[f];--M.referenceCount===0&&this._removeInactiveBinding(M)}}_lendAction(e){const l=this._actions,f=e._cacheIndex,v=this._nActiveActions++,M=l[v];e._cacheIndex=v,l[v]=e,M._cacheIndex=f,l[f]=M}_takeBackAction(e){const l=this._actions,f=e._cacheIndex,v=--this._nActiveActions,M=l[v];e._cacheIndex=v,l[v]=e,M._cacheIndex=f,l[f]=M}_addInactiveBinding(e,l,f){const v=this._bindingsByRootAndName,M=this._bindings;let B=v[l];B===void 0&&(B={},v[l]=B),B[f]=e,e._cacheIndex=M.length,M.push(e)}_removeInactiveBinding(e){const l=this._bindings,f=e.binding,v=f.rootNode.uuid,M=f.path,B=this._bindingsByRootAndName,I=B[v],k=l[l.length-1],N=e._cacheIndex;k._cacheIndex=N,l[N]=k,l.pop(),delete I[M],Object.keys(I).length===0&&delete B[v]}_lendBinding(e){const l=this._bindings,f=e._cacheIndex,v=this._nActiveBindings++,M=l[v];e._cacheIndex=v,l[v]=e,M._cacheIndex=f,l[f]=M}_takeBackBinding(e){const l=this._bindings,f=e._cacheIndex,v=--this._nActiveBindings,M=l[v];e._cacheIndex=v,l[v]=e,M._cacheIndex=f,l[f]=M}_lendControlInterpolant(){const e=this._controlInterpolants,l=this._nActiveControlInterpolants++;let f=e[l];return f===void 0&&(f=new A0(new Float32Array(2),new Float32Array(2),1,sE),f.__cacheIndex=l,e[l]=f),f}_takeBackControlInterpolant(e){const l=this._controlInterpolants,f=e.__cacheIndex,v=--this._nActiveControlInterpolants,M=l[v];e.__cacheIndex=v,l[v]=e,M.__cacheIndex=f,l[f]=M}clipAction(e,l,f){const v=l||this._root,M=v.uuid;let B=typeof e=="string"?Rf.findByName(v,e):e;const I=B!==null?B.uuid:e,k=this._actionsByClip[I];let N=null;if(f===void 0&&(B!==null?f=B.blendMode:f=mp),k!==void 0){const Z=k.actionByRoot[M];if(Z!==void 0&&Z.blendMode===f)return Z;N=k.knownActions[0],B===null&&(B=N._clip)}if(B===null)return null;const X=new Xv(this,B,l,f);return this._bindAction(X,N),this._addInactiveAction(X,I,M),X}existingAction(e,l){const f=l||this._root,v=f.uuid,M=typeof e=="string"?Rf.findByName(f,e):e,B=M?M.uuid:e,I=this._actionsByClip[B];return I!==void 0&&I.actionByRoot[v]||null}stopAllAction(){const e=this._actions,l=this._nActiveActions;for(let f=l-1;f>=0;--f)e[f].stop();return this}update(e){e*=this.timeScale;const l=this._actions,f=this._nActiveActions,v=this.time+=e,M=Math.sign(e),B=this._accuIndex^=1;for(let N=0;N!==f;++N)l[N]._update(v,e,M,B);const I=this._bindings,k=this._nActiveBindings;for(let N=0;N!==k;++N)I[N].apply(B);return this}setTime(e){this.time=0;for(let l=0;l<this._actions.length;l++)this._actions[l].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const l=this._actions,f=e.uuid,v=this._actionsByClip,M=v[f];if(M!==void 0){const B=M.knownActions;for(let I=0,k=B.length;I!==k;++I){const N=B[I];this._deactivateAction(N);const X=N._cacheIndex,Z=l[l.length-1];N._cacheIndex=null,N._byClipCacheIndex=null,Z._cacheIndex=X,l[X]=Z,l.pop(),this._removeInactiveBindingsForAction(N)}delete v[f]}}uncacheRoot(e){const l=e.uuid,f=this._actionsByClip;for(const B in f){const I=f[B].actionByRoot,k=I[l];k!==void 0&&(this._deactivateAction(k),this._removeInactiveAction(k))}const v=this._bindingsByRootAndName,M=v[l];if(M!==void 0)for(const B in M){const I=M[B];I.restoreOriginalState(),this._removeInactiveBinding(I)}}uncacheAction(e,l){const f=this.existingAction(e,l);f!==null&&(this._deactivateAction(f),this._removeInactiveAction(f))}}class vA{constructor(e){this.value=e}clone(){return new vA(this.value.clone===void 0?this.value:this.value.clone())}}let Kv=0;class S0 extends Ma{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Kv++}),this.name="",this.usage=Zp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const l=this.uniforms.indexOf(e);return l!==-1&&this.uniforms.splice(l,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const l=e.uniforms;this.uniforms.length=0;for(let f=0,v=l.length;f<v;f++)this.uniforms.push(l[f].clone());return this}clone(){return new this.constructor().copy(this)}}class Yv extends Wm{constructor(e,l,f=1){super(e,l),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=f}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const l=super.clone(e);return l.meshPerAttribute=this.meshPerAttribute,l}toJSON(e){const l=super.toJSON(e);return l.isInstancedInterleavedBuffer=!0,l.meshPerAttribute=this.meshPerAttribute,l}}class w0{constructor(e,l,f,v,M){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=l,this.itemSize=f,this.elementSize=v,this.count=M,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,l){return this.type=e,this.elementSize=l,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class lE{constructor(e,l,f=0,v=1/0){this.ray=new Cp(e,l),this.near=f,this.far=v,this.camera=null,this.layers=new jh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,l){this.ray.set(e,l)}setFromCamera(e,l){l.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(l).sub(this.ray.origin).normalize(),this.camera=l):l.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld),this.camera=l):w.error("THREE.Raycaster: Unsupported camera type: "+l.type)}intersectObject(e,l=!0,f=[]){return _A(e,this,f,l),f.sort(Jv),f}intersectObjects(e,l=!0,f=[]){for(let v=0,M=e.length;v<M;v++)_A(e[v],this,f,l);return f.sort(Jv),f}}function Jv(C,e){return C.distance-e.distance}function _A(C,e,l,f){if(C.layers.test(e.layers)&&C.raycast(e,l),f===!0){const v=C.children;for(let M=0,B=v.length;M<B;M++)_A(v[M],e,l,!0)}}class ec{constructor(e=1,l=0,f=0){return this.radius=e,this.phi=l,this.theta=f,this}set(e,l,f){return this.radius=e,this.phi=l,this.theta=f,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,l,f){return this.radius=Math.sqrt(e*e+l*l+f*f),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,f),this.phi=Math.acos(_o(l/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class cE{constructor(e=1,l=0,f=0){return this.radius=e,this.theta=l,this.y=f,this}set(e,l,f){return this.radius=e,this.theta=l,this.y=f,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,l,f){return this.radius=Math.sqrt(e*e+f*f),this.theta=Math.atan2(e,f),this.y=l,this}clone(){return new this.constructor().copy(this)}}const EA=new fn;class pE{constructor(e=new fn(1/0,1/0),l=new fn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=l}set(e,l){return this.min.copy(e),this.max.copy(l),this}setFromPoints(e){this.makeEmpty();for(let l=0,f=e.length;l<f;l++)this.expandByPoint(e[l]);return this}setFromCenterAndSize(e,l){const f=EA.copy(l).multiplyScalar(.5);return this.min.copy(e).sub(f),this.max.copy(e).add(f),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,l){return l.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,l){return l.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,EA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qv=new Xe,lm=new Xe;class uE{constructor(e=new Xe,l=new Xe){this.start=e,this.end=l}set(e,l){return this.start.copy(e),this.end.copy(l),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,l){return this.delta(l).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,l){qv.subVectors(e,this.start),lm.subVectors(this.end,this.start);const f=lm.dot(lm);let M=lm.dot(qv)/f;return l&&(M=_o(M,0,1)),M}closestPointToPoint(e,l,f){const v=this.closestPointToPointParameter(e,l);return this.delta(f).multiplyScalar(v).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Zv=new Xe;class dE extends Ti{constructor(e,l){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,this.type="SpotLightHelper";const f=new xi,v=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let B=0,I=1,k=32;B<k;B++,I++){const N=B/k*Math.PI*2,X=I/k*Math.PI*2;v.push(Math.cos(N),Math.sin(N),1,Math.cos(X),Math.sin(X),1)}f.setAttribute("position",new wr(v,3));const M=new Rl({fog:!1,toneMapped:!1});this.cone=new Hp(f,M),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,l=e*Math.tan(this.light.angle);this.cone.scale.set(l,l,e),Zv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Zv),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ed=new Xe,Bs=new si,bA=new si;class hE extends Hp{constructor(e){const l=$v(e),f=new xi,v=[],M=[],B=new pr(0,0,1),I=new pr(0,1,0);for(let N=0;N<l.length;N++){const X=l[N];X.parent&&X.parent.isBone&&(v.push(0,0,0),v.push(0,0,0),M.push(B.r,B.g,B.b),M.push(I.r,I.g,I.b))}f.setAttribute("position",new wr(v,3)),f.setAttribute("color",new wr(M,3));const k=new Rl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(f,k),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=l,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const l=this.bones,f=this.geometry,v=f.getAttribute("position");bA.copy(this.root.matrixWorld).invert();for(let M=0,B=0;M<l.length;M++){const I=l[M];I.parent&&I.parent.isBone&&(Bs.multiplyMatrices(bA,I.matrixWorld),Ed.setFromMatrixPosition(Bs),v.setXYZ(B,Ed.x,Ed.y,Ed.z),Bs.multiplyMatrices(bA,I.parent.matrixWorld),Ed.setFromMatrixPosition(Bs),v.setXYZ(B+1,Ed.x,Ed.y,Ed.z),B+=2)}f.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function $v(C){const e=[];C.isBone===!0&&e.push(C);for(let l=0;l<C.children.length;l++)e.push.apply(e,$v(C.children[l]));return e}class fE extends fo{constructor(e,l,f){const v=new em(l,4,2),M=new Vl({wireframe:!0,fog:!1,toneMapped:!1});super(v,M),this.light=e,this.color=f,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ko=new Xe,MA=new pr,e2=new pr;class gE extends Ti{constructor(e,l,f){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="HemisphereLightHelper";const v=new $g(l);v.rotateY(Math.PI*.5),this.material=new Vl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const M=v.getAttribute("position"),B=new Float32Array(M.count*3);v.setAttribute("color",new uo(B,3)),this.add(new fo(v,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const l=e.geometry.getAttribute("color");MA.copy(this.light.color),e2.copy(this.light.groundColor);for(let f=0,v=l.count;f<v;f++){const M=f<v/2?MA:e2;l.setXYZ(f,M.r,M.g,M.b)}l.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ko.setFromMatrixPosition(this.light.matrixWorld).negate())}}class T0 extends Hp{constructor(e=10,l=10,f=4473924,v=8947848){f=new pr(f),v=new pr(v);const M=l/2,B=e/l,I=e/2,k=[],N=[];for(let $=0,J=0,re=-I;$<=l;$++,re+=B){k.push(-I,0,re,I,0,re),k.push(re,0,-I,re,0,I);const fe=$===M?f:v;fe.toArray(N,J),J+=3,fe.toArray(N,J),J+=3,fe.toArray(N,J),J+=3,fe.toArray(N,J),J+=3}const X=new xi;X.setAttribute("position",new wr(k,3)),X.setAttribute("color",new wr(N,3));const Z=new Rl({vertexColors:!0,toneMapped:!1});super(X,Z),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class mE extends Hp{constructor(e=10,l=16,f=8,v=64,M=4473924,B=8947848){M=new pr(M),B=new pr(B);const I=[],k=[];if(l>1)for(let Z=0;Z<l;Z++){const $=Z/l*(Math.PI*2),J=Math.sin($)*e,re=Math.cos($)*e;I.push(0,0,0),I.push(J,0,re);const fe=Z&1?M:B;k.push(fe.r,fe.g,fe.b),k.push(fe.r,fe.g,fe.b)}for(let Z=0;Z<f;Z++){const $=Z&1?M:B,J=e-e/f*Z;for(let re=0;re<v;re++){let fe=re/v*(Math.PI*2),se=Math.sin(fe)*J,ne=Math.cos(fe)*J;I.push(se,0,ne),k.push($.r,$.g,$.b),fe=(re+1)/v*(Math.PI*2),se=Math.sin(fe)*J,ne=Math.cos(fe)*J,I.push(se,0,ne),k.push($.r,$.g,$.b)}}const N=new xi;N.setAttribute("position",new wr(I,3)),N.setAttribute("color",new wr(k,3));const X=new Rl({vertexColors:!0,toneMapped:!1});super(N,X),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const t2=new Xe,ai=new Xe,xA=new Xe;class n2 extends Ti{constructor(e,l,f){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="DirectionalLightHelper",l===void 0&&(l=1);let v=new xi;v.setAttribute("position",new wr([-l,l,0,l,l,0,l,-l,0,-l,-l,0,-l,l,0],3));const M=new Rl({fog:!1,toneMapped:!1});this.lightPlane=new fd(v,M),this.add(this.lightPlane),v=new xi,v.setAttribute("position",new wr([0,0,0,0,0,1],3)),this.targetLine=new fd(v,M),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),t2.setFromMatrixPosition(this.light.matrixWorld),ai.setFromMatrixPosition(this.light.target.matrixWorld),xA.subVectors(ai,t2),this.lightPlane.lookAt(ai),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ai),this.targetLine.scale.z=xA.length()}}const B0=new Xe,Rs=new Wo;class AE extends Hp{constructor(e){const l=new xi,f=new Rl({color:16777215,vertexColors:!0,toneMapped:!1}),v=[],M=[],B={};I("n1","n2"),I("n2","n4"),I("n4","n3"),I("n3","n1"),I("f1","f2"),I("f2","f4"),I("f4","f3"),I("f3","f1"),I("n1","f1"),I("n2","f2"),I("n3","f3"),I("n4","f4"),I("p","n1"),I("p","n2"),I("p","n3"),I("p","n4"),I("u1","u2"),I("u2","u3"),I("u3","u1"),I("c","t"),I("p","c"),I("cn1","cn2"),I("cn3","cn4"),I("cf1","cf2"),I("cf3","cf4");function I(re,fe){k(re),k(fe)}function k(re){v.push(0,0,0),M.push(0,0,0),B[re]===void 0&&(B[re]=[]),B[re].push(v.length/3-1)}l.setAttribute("position",new wr(v,3)),l.setAttribute("color",new wr(M,3)),super(l,f),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=B,this.update();const N=new pr(16755200),X=new pr(16711680),Z=new pr(43775),$=new pr(16777215),J=new pr(3355443);this.setColors(N,X,Z,$,J)}setColors(e,l,f,v,M){const I=this.geometry.getAttribute("color");I.setXYZ(0,e.r,e.g,e.b),I.setXYZ(1,e.r,e.g,e.b),I.setXYZ(2,e.r,e.g,e.b),I.setXYZ(3,e.r,e.g,e.b),I.setXYZ(4,e.r,e.g,e.b),I.setXYZ(5,e.r,e.g,e.b),I.setXYZ(6,e.r,e.g,e.b),I.setXYZ(7,e.r,e.g,e.b),I.setXYZ(8,e.r,e.g,e.b),I.setXYZ(9,e.r,e.g,e.b),I.setXYZ(10,e.r,e.g,e.b),I.setXYZ(11,e.r,e.g,e.b),I.setXYZ(12,e.r,e.g,e.b),I.setXYZ(13,e.r,e.g,e.b),I.setXYZ(14,e.r,e.g,e.b),I.setXYZ(15,e.r,e.g,e.b),I.setXYZ(16,e.r,e.g,e.b),I.setXYZ(17,e.r,e.g,e.b),I.setXYZ(18,e.r,e.g,e.b),I.setXYZ(19,e.r,e.g,e.b),I.setXYZ(20,e.r,e.g,e.b),I.setXYZ(21,e.r,e.g,e.b),I.setXYZ(22,e.r,e.g,e.b),I.setXYZ(23,e.r,e.g,e.b),I.setXYZ(24,l.r,l.g,l.b),I.setXYZ(25,l.r,l.g,l.b),I.setXYZ(26,l.r,l.g,l.b),I.setXYZ(27,l.r,l.g,l.b),I.setXYZ(28,l.r,l.g,l.b),I.setXYZ(29,l.r,l.g,l.b),I.setXYZ(30,l.r,l.g,l.b),I.setXYZ(31,l.r,l.g,l.b),I.setXYZ(32,f.r,f.g,f.b),I.setXYZ(33,f.r,f.g,f.b),I.setXYZ(34,f.r,f.g,f.b),I.setXYZ(35,f.r,f.g,f.b),I.setXYZ(36,f.r,f.g,f.b),I.setXYZ(37,f.r,f.g,f.b),I.setXYZ(38,v.r,v.g,v.b),I.setXYZ(39,v.r,v.g,v.b),I.setXYZ(40,M.r,M.g,M.b),I.setXYZ(41,M.r,M.g,M.b),I.setXYZ(42,M.r,M.g,M.b),I.setXYZ(43,M.r,M.g,M.b),I.setXYZ(44,M.r,M.g,M.b),I.setXYZ(45,M.r,M.g,M.b),I.setXYZ(46,M.r,M.g,M.b),I.setXYZ(47,M.r,M.g,M.b),I.setXYZ(48,M.r,M.g,M.b),I.setXYZ(49,M.r,M.g,M.b),I.needsUpdate=!0}update(){const e=this.geometry,l=this.pointMap,f=1,v=1;Rs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),as("c",l,e,Rs,0,0,-1),as("t",l,e,Rs,0,0,1),as("n1",l,e,Rs,-f,-v,-1),as("n2",l,e,Rs,f,-v,-1),as("n3",l,e,Rs,-f,v,-1),as("n4",l,e,Rs,f,v,-1),as("f1",l,e,Rs,-f,-v,1),as("f2",l,e,Rs,f,-v,1),as("f3",l,e,Rs,-f,v,1),as("f4",l,e,Rs,f,v,1),as("u1",l,e,Rs,f*.7,v*1.1,-1),as("u2",l,e,Rs,-f*.7,v*1.1,-1),as("u3",l,e,Rs,0,v*2,-1),as("cf1",l,e,Rs,-f,0,1),as("cf2",l,e,Rs,f,0,1),as("cf3",l,e,Rs,0,-v,1),as("cf4",l,e,Rs,0,v,1),as("cn1",l,e,Rs,-f,0,-1),as("cn2",l,e,Rs,f,0,-1),as("cn3",l,e,Rs,0,-v,-1),as("cn4",l,e,Rs,0,v,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function as(C,e,l,f,v,M,B){B0.set(v,M,B).unproject(f);const I=e[C];if(I!==void 0){const k=l.getAttribute("position");for(let N=0,X=I.length;N<X;N++)k.setXYZ(I[N],B0.x,B0.y,B0.z)}}const R0=new Lo;class yE extends Hp{constructor(e,l=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=new Float32Array(8*3),M=new xi;M.setIndex(new uo(f,1)),M.setAttribute("position",new uo(v,3)),super(M,new Rl({color:l,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&w.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&R0.setFromObject(this.object),R0.isEmpty())return;const l=R0.min,f=R0.max,v=this.geometry.attributes.position,M=v.array;M[0]=f.x,M[1]=f.y,M[2]=f.z,M[3]=l.x,M[4]=f.y,M[5]=f.z,M[6]=l.x,M[7]=l.y,M[8]=f.z,M[9]=f.x,M[10]=l.y,M[11]=f.z,M[12]=f.x,M[13]=f.y,M[14]=l.z,M[15]=l.x,M[16]=f.y,M[17]=l.z,M[18]=l.x,M[19]=l.y,M[20]=l.z,M[21]=f.x,M[22]=l.y,M[23]=l.z,v.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,l){return super.copy(e,l),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $n extends Hp{constructor(e,l=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],M=new xi;M.setIndex(new uo(f,1)),M.setAttribute("position",new wr(v,3)),super(M,new Rl({color:l,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const l=this.box;l.isEmpty()||(l.getCenter(this.position),l.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class vE extends fd{constructor(e,l=1,f=16776960){const v=f,M=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],B=new xi;B.setAttribute("position",new wr(M,3)),B.computeBoundingSphere(),super(B,new Rl({color:v,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=l;const I=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],k=new xi;k.setAttribute("position",new wr(I,3)),k.computeBoundingSphere(),this.add(new fo(k,new Vl({color:v,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const r2=new Xe;let I0,CA;class _E extends Ti{constructor(e=new Xe(0,0,1),l=new Xe(0,0,0),f=1,v=16776960,M=f*.2,B=M*.2){super(),this.type="ArrowHelper",I0===void 0&&(I0=new xi,I0.setAttribute("position",new wr([0,0,0,0,1,0],3)),CA=new Vg(0,.5,1,5,1),CA.translate(0,-.5,0)),this.position.copy(l),this.line=new fd(I0,new Rl({color:v,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fo(CA,new Vl({color:v,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(f,M,B)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{r2.set(e.z,0,-e.x).normalize();const l=Math.acos(e.y);this.quaternion.setFromAxisAngle(r2,l)}}setLength(e,l=e*.2,f=l*.2){this.line.scale.set(1,Math.max(1e-4,e-l),1),this.line.updateMatrix(),this.cone.scale.set(f,l,f),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Pt extends Hp{constructor(e=1){const l=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],v=new xi;v.setAttribute("position",new wr(l,3)),v.setAttribute("color",new wr(f,3));const M=new Rl({vertexColors:!0,toneMapped:!1});super(v,M),this.type="AxesHelper"}setColors(e,l,f){const v=new pr,M=this.geometry.attributes.color.array;return v.set(e),v.toArray(M,0),v.toArray(M,3),v.set(l),v.toArray(M,6),v.toArray(M,9),v.set(f),v.toArray(M,12),v.toArray(M,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gr{constructor(){this.type="ShapePath",this.color=new pr,this.subPaths=[],this.currentPath=null}moveTo(e,l){return this.currentPath=new jg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,l),this}lineTo(e,l){return this.currentPath.lineTo(e,l),this}quadraticCurveTo(e,l,f,v){return this.currentPath.quadraticCurveTo(e,l,f,v),this}bezierCurveTo(e,l,f,v,M,B){return this.currentPath.bezierCurveTo(e,l,f,v,M,B),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function l(ne){const be=[];for(let he=0,Se=ne.length;he<Se;he++){const Oe=ne[he],Qe=new Mf;Qe.curves=Oe.curves,be.push(Qe)}return be}function f(ne,be){const he=be.length;let Se=!1;for(let Oe=he-1,Qe=0;Qe<he;Oe=Qe++){let Ze=be[Oe],ht=be[Qe],we=ht.x-Ze.x,Ve=ht.y-Ze.y;if(Math.abs(Ve)>Number.EPSILON){if(Ve<0&&(Ze=be[Qe],we=-we,ht=be[Oe],Ve=-Ve),ne.y<Ze.y||ne.y>ht.y)continue;if(ne.y===Ze.y){if(ne.x===Ze.x)return!0}else{const $t=Ve*(ne.x-Ze.x)-we*(ne.y-Ze.y);if($t===0)return!0;if($t<0)continue;Se=!Se}}else{if(ne.y!==Ze.y)continue;if(ht.x<=ne.x&&ne.x<=Ze.x||Ze.x<=ne.x&&ne.x<=ht.x)return!0}}return Se}const v=Wp.isClockWise,M=this.subPaths;if(M.length===0)return[];let B,I,k;const N=[];if(M.length===1)return I=M[0],k=new Mf,k.curves=I.curves,N.push(k),N;let X=!v(M[0].getPoints());X=e?!X:X;const Z=[],$=[];let J=[],re=0,fe;$[re]=void 0,J[re]=[];for(let ne=0,be=M.length;ne<be;ne++)I=M[ne],fe=I.getPoints(),B=v(fe),B=e?!B:B,B?(!X&&$[re]&&re++,$[re]={s:new Mf,p:fe},$[re].s.curves=I.curves,X&&re++,J[re]=[]):J[re].push({h:I,p:fe[0]});if(!$[0])return l(M);if($.length>1){let ne=!1,be=0;for(let he=0,Se=$.length;he<Se;he++)Z[he]=[];for(let he=0,Se=$.length;he<Se;he++){const Oe=J[he];for(let Qe=0;Qe<Oe.length;Qe++){const Ze=Oe[Qe];let ht=!0;for(let we=0;we<$.length;we++)f(Ze.p,$[we].p)&&(he!==we&&be++,ht?(ht=!1,Z[we].push(Ze)):ne=!0);ht&&Z[he].push(Ze)}}be>0&&ne===!1&&(J=Z)}let se;for(let ne=0,be=$.length;ne<be;ne++){k=$[ne].s,N.push(k),se=J[ne];for(let he=0,Se=se.length;he<Se;he++)k.holes.push(se[he].h)}return N}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window!="undefined"&&(window.__THREE__?w.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d)}}]);

//# sourceMappingURL=5889.66fcadb9629d36ee12e9.js.map