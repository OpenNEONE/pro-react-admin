var rI=Object.defineProperty,iI=Object.defineProperties;var oI=Object.getOwnPropertyDescriptors;var a_=Object.getOwnPropertySymbols;var NS=Object.prototype.hasOwnProperty,US=Object.prototype.propertyIsEnumerable;var t1=Math.pow,GS=(u,n,A)=>n in u?rI(u,n,{enumerable:!0,configurable:!0,writable:!0,value:A}):u[n]=A,Kn=(u,n)=>{for(var A in n||(n={}))NS.call(n,A)&&GS(u,A,n[A]);if(a_)for(var A of a_(n))US.call(n,A)&&GS(u,A,n[A]);return u},Xo=(u,n)=>iI(u,oI(n));var _n=(u,n)=>{var A={};for(var w in u)NS.call(u,w)&&n.indexOf(w)<0&&(A[w]=u[w]);if(u!=null&&a_)for(var w of a_(u))n.indexOf(w)<0&&US.call(u,w)&&(A[w]=u[w]);return A};var ss=(u,n,A)=>new Promise((w,d)=>{var m=H=>{try{E(A.next(H))}catch(ee){d(ee)}},s=H=>{try{E(A.throw(H))}catch(ee){d(ee)}},E=H=>H.done?w(H.value):Promise.resolve(H.value).then(m,s);E((A=A.apply(u,n)).next())});(self.webpackChunkpro_react_admin=self.webpackChunkpro_react_admin||[]).push([[5889],{19154:function(u,n,A){"use strict";A.r(n),A.d(n,{AccumulativeShadows:function(){return bC},AdaptiveDpr:function(){return CR},AdaptiveEvents:function(){return SR},ArcballControls:function(){return X},AsciiRenderer:function(){return Kv},BBAnchor:function(){return Hw},Backdrop:function(){return vB},BakeShadows:function(){return MR},Billboard:function(){return B1},Bounds:function(){return mC},Box:function(){return wT},Bvh:function(){return Dw},CameraControls:function(){return _E},CameraShake:function(){return $T},Capsule:function(){return HT},CatmullRomLine:function(){return yf},Caustics:function(){return MB},Center:function(){return hb},Circle:function(){return TT},Clone:function(){return y0},Cloud:function(){return jB},ComputedAttribute:function(){return G3},Cone:function(){return BT},ContactShadows:function(){return EC},CubeCamera:function(){return Sd},CubicBezierLine:function(){return Ny},CurveModifier:function(){return rT},CycleRaycast:function(){return ft},Cylinder:function(){return RT},Decal:function(){return V3},Detailed:function(){return ER},DeviceOrientationControls:function(){return dE},Dodecahedron:function(){return NT},Edges:function(){return yd},Effects:function(){return vv},Environment:function(){return _C},EnvironmentCube:function(){return _b},EnvironmentMap:function(){return H2},EnvironmentPortal:function(){return vC},Example:function(){return Xw},Extrude:function(){return UT},FaceControls:function(){return Si},FaceLandmarker:function(){return Tr},FaceLandmarkerDefaults:function(){return sn},Facemesh:function(){return o2},FacemeshDatas:function(){return Dt},FacemeshEye:function(){return Ke},FacemeshEyeDefaults:function(){return Ff},FirstPersonControls:function(){return dn},Float:function(){return eB},FlyControls:function(){return e2},GizmoHelper:function(){return uc},GizmoViewcube:function(){return KS},GizmoViewport:function(){return XS},Gltf:function(){return aE},GradientTexture:function(){return nA},GradientType:function(){return g0},Grid:function(){return JS},Html:function(){return pt},Hud:function(){return Qs},Icosahedron:function(){return zT},Image:function(){return Oc},Instance:function(){return tS},Instances:function(){return nS},IsObject:function(){return Bf},KeyboardControls:function(){return t3},Lathe:function(){return jT},Lightformer:function(){return DB},Line:function(){return kp},Loader:function(){return xr},MapControls:function(){return w0},MarchingCube:function(){return Bv},MarchingCubes:function(){return Tv},MarchingPlane:function(){return aA},Mask:function(){return RR},Merged:function(){return yR},MeshDiscardMaterial:function(){return MT},MeshDistortMaterial:function(){return sT},MeshPortalMaterial:function(){return OR},MeshReflectorMaterial:function(){return pT},MeshRefractionMaterial:function(){return _T},MeshTransmissionMaterial:function(){return bT},MeshWobbleMaterial:function(){return lT},Octahedron:function(){return GT},OrbitControls:function(){return gE},OrthographicCamera:function(){return am},PerformanceMonitor:function(){return wR},PerspectiveCamera:function(){return Yv},PivotControls:function(){return eI},Plane:function(){return fC},Point:function(){return hR},PointMaterial:function(){return xT},PointMaterialImpl:function(){return dC},PointerLockControls:function(){return xn},Points:function(){return fR},PointsBuffer:function(){return WC},Polyhedron:function(){return kT},PositionPoint:function(){return NC},PositionalAudio:function(){return l3},Preload:function(){return bR},PresentationControls:function(){return V_},QuadraticBezierLine:function(){return Gy},RandomizedLight:function(){return MC},Reflector:function(){return CB},RenderTexture:function(){return cS},Resize:function(){return YT},Ring:function(){return LT},RoundedBox:function(){return QT},Sampler:function(){return $g},ScreenQuad:function(){return XT},ScreenSpace:function(){return o3},Scroll:function(){return Vd},ScrollControls:function(){return Qh},Segment:function(){return _R},SegmentObject:function(){return iS},Segments:function(){return vR},Select:function(){return r3},Shadow:function(){return _B},Shape:function(){return WT},Sky:function(){return kB},SoftShadows:function(){return ST},Sparkles:function(){return VB},Sphere:function(){return IT},SpotLight:function(){return OB},SpotLightShadow:function(){return FB},SpriteAnimator:function(){return Yw},Stage:function(){return AB},Stars:function(){return NB},Stats:function(){return J4},Svg:function(){return Iv},Tetrahedron:function(){return PT},Text:function(){return Eh},Text3D:function(){return Wg},Torus:function(){return OT},TorusKnot:function(){return DT},TrackballControls:function(){return AE},Trail:function(){return sA},TransformControls:function(){return Se},Tube:function(){return FT},View:function(){return NR},Wireframe:function(){return pR},accumulativeContext:function(){return Eb},calcPosFromAngles:function(){return RC},calculateScaleFactor:function(){return AS},isWebGL2Available:function(){return yv},meshBounds:function(){return xR},shaderMaterial:function(){return Fc},useAnimations:function(){return Lw},useAspect:function(){return Z4},useBVH:function(){return Ow},useBounds:function(){return AC},useBoxProjectedEnv:function(){return jw},useCamera:function(){return $4},useContextBridge:function(){return Pw},useCubeCamera:function(){return Jv},useCubeTexture:function(){return CM},useCursor:function(){return Pt},useDepthBuffer:function(){return q4},useDetectGPU:function(){return ow},useEnvironment:function(){return yb},useFBO:function(){return Hl},useFBX:function(){return GE},useFaceControls:function(){return wi},useFaceLandmarker:function(){return ei},useFont:function(){return bh},useGLTF:function(){return If},useGizmoContext:function(){return Of},useHelper:function(){return Dx},useIntersect:function(){return iC},useKTX2:function(){return qE},useKeyboardControls:function(){return n3},useMask:function(){return IR},useMatcapTexture:function(){return YB},useNormalTexture:function(){return ZB},usePerformanceMonitor:function(){return TR},useProgress:function(){return An},useScroll:function(){return jc},useSelect:function(){return i3},useSurfaceSampler:function(){return Rf},useTexture:function(){return Ad},useTrail:function(){return vd},useTrailTexture:function(){return Kw},useVideoTexture:function(){return cm}});var w=A(87462),d=A(67294),m=A(20745),s=A(99477),E=A(24121);const H=new s.Vector3,ee=new s.Vector3,ae=new s.Vector3;function J(i,t,r){const l=H.setFromMatrixPosition(i.matrixWorld);l.project(t);const c=r.width/2,p=r.height/2;return[l.x*c+c,-(l.y*p)+p]}function pe(i,t){const r=H.setFromMatrixPosition(i.matrixWorld),l=ee.setFromMatrixPosition(t.matrixWorld),c=r.sub(l),p=t.getWorldDirection(ae);return c.angleTo(p)>Math.PI/2}function ue(i,t,r,l){const c=H.setFromMatrixPosition(i.matrixWorld),p=c.clone();p.project(t),r.setFromCamera(p,t);const h=r.intersectObjects(l,!0);if(h.length){const g=h[0].distance;return c.distanceTo(r.ray.origin)<g}return!0}function Mt(i,t){if(t instanceof s.OrthographicCamera)return t.zoom;if(t instanceof s.PerspectiveCamera){const r=H.setFromMatrixPosition(i.matrixWorld),l=ee.setFromMatrixPosition(t.matrixWorld),c=t.fov*Math.PI/180,p=r.distanceTo(l);return 1/(2*Math.tan(c/2)*p)}else return 1}function nt(i,t,r){if(t instanceof s.PerspectiveCamera||t instanceof s.OrthographicCamera){const l=H.setFromMatrixPosition(i.matrixWorld),c=ee.setFromMatrixPosition(t.matrixWorld),p=l.distanceTo(c),h=(r[1]-r[0])/(t.far-t.near),g=r[1]-h*t.far;return Math.round(h*p+g)}}const Ve=i=>Math.abs(i)<1e-10?0:i;function it(i,t,r=""){let l="matrix3d(";for(let c=0;c!==16;c++)l+=Ve(t[c]*i.elements[c])+(c!==15?",":")");return r+l}const At=(i=>t=>it(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Ct=(i=>(t,r)=>it(t,i(r),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function vt(i){return i&&typeof i=="object"&&"current"in i}const pt=d.forwardRef((K,Y)=>{var se=K,{children:i,eps:t=.001,style:r,className:l,prepend:c,center:p,fullscreen:h,portal:g,distanceFactor:v,sprite:_=!1,transform:b=!1,occlude:T,onOcclude:R,castShadow:F,receiveShadow:G,material:L,geometry:O,zIndexRange:k=[16777271,0],calculatePosition:P=J,as:z="div",wrapperClass:j,pointerEvents:Q="auto"}=se,W=_n(se,["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"]);const{gl:ce,camera:ge,scene:le,size:xe,raycaster:me,events:Be,viewport:ke}=(0,E.z)(),[Re]=d.useState(()=>document.createElement(z)),ze=d.useRef(),Pe=d.useRef(null),Ye=d.useRef(0),Ce=d.useRef([0,0]),Ee=d.useRef(null),_e=d.useRef(null),oe=(g==null?void 0:g.current)||Be.connected||ce.domElement.parentNode,Ae=d.useRef(null),Te=d.useRef(!1),ve=d.useMemo(()=>T&&T!=="blending"||Array.isArray(T)&&T.length&&vt(T[0]),[T]);d.useLayoutEffect(()=>{const rt=ce.domElement;T&&T==="blending"?(rt.style.zIndex=`${Math.floor(k[0]/2)}`,rt.style.position="absolute",rt.style.pointerEvents="none"):(rt.style.zIndex=null,rt.style.position=null,rt.style.pointerEvents=null)},[T]),d.useLayoutEffect(()=>{if(Pe.current){const rt=ze.current=m.createRoot(Re);if(le.updateMatrixWorld(),b)Re.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Wt=P(Pe.current,ge,xe);Re.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Wt[0]}px,${Wt[1]}px,0);transform-origin:0 0;`}return oe&&(c?oe.prepend(Re):oe.appendChild(Re)),()=>{oe&&oe.removeChild(Re),rt.unmount()}}},[oe,b]),d.useLayoutEffect(()=>{j&&(Re.className=j)},[j]);const Ge=d.useMemo(()=>b?{position:"absolute",top:0,left:0,width:xe.width,height:xe.height,transformStyle:"preserve-3d",pointerEvents:"none"}:Kn(Kn({position:"absolute",transform:p?"translate3d(-50%,-50%,0)":"none"},h&&{top:-xe.height/2,left:-xe.width/2,width:xe.width,height:xe.height}),r),[r,p,h,xe,b]),bt=d.useMemo(()=>({position:"absolute",pointerEvents:Q}),[Q]);d.useLayoutEffect(()=>{if(Te.current=!1,b){var rt;(rt=ze.current)==null||rt.render(d.createElement("div",{ref:Ee,style:Ge},d.createElement("div",{ref:_e,style:bt},d.createElement("div",{ref:Y,className:l,style:r,children:i}))))}else{var Wt;(Wt=ze.current)==null||Wt.render(d.createElement("div",{ref:Y,style:Ge,className:l,children:i}))}});const mt=d.useRef(!0);(0,E.A)(rt=>{if(Pe.current){ge.updateMatrixWorld(),Pe.current.updateWorldMatrix(!0,!1);const Wt=b?Ce.current:P(Pe.current,ge,xe);if(b||Math.abs(Ye.current-ge.zoom)>t||Math.abs(Ce.current[0]-Wt[0])>t||Math.abs(Ce.current[1]-Wt[1])>t){const kt=pe(Pe.current,ge);let Bt=!1;ve&&(T!=="blending"?Bt=[le]:Array.isArray(T)&&(Bt=T.map(mn=>mn.current)));const qe=mt.current;if(Bt){const mn=ue(Pe.current,ge,me,Bt);mt.current=mn&&!kt}else mt.current=!kt;qe!==mt.current&&(R?R(!mt.current):Re.style.display=mt.current?"block":"none");const Ne=Math.floor(k[0]/2),It=T?ve?[k[0],Ne]:[Ne-1,0]:k;if(Re.style.zIndex=`${nt(Pe.current,ge,It)}`,b){const[mn,Sn]=[xe.width/2,xe.height/2],zt=ge.projectionMatrix.elements[5]*Sn,{isOrthographicCamera:Vn,top:ar,left:_r,bottom:ur,right:_i}=ge,gi=At(ge.matrixWorldInverse),br=Vn?`scale(${zt})translate(${Ve(-(_i+_r)/2)}px,${Ve((ar+ur)/2)}px)`:`translateZ(${zt}px)`;let Pr=Pe.current.matrixWorld;_&&(Pr=ge.matrixWorldInverse.clone().transpose().copyPosition(Pr).scale(Pe.current.scale),Pr.elements[3]=Pr.elements[7]=Pr.elements[11]=0,Pr.elements[15]=1),Re.style.width=xe.width+"px",Re.style.height=xe.height+"px",Re.style.perspective=Vn?"":`${zt}px`,Ee.current&&_e.current&&(Ee.current.style.transform=`${br}${gi}translate(${mn}px,${Sn}px)`,_e.current.style.transform=Ct(Pr,1/((v||10)/400)))}else{const mn=v===void 0?1:Mt(Pe.current,ge)*v;Re.style.transform=`translate3d(${Wt[0]}px,${Wt[1]}px,0) scale(${mn})`}Ce.current=Wt,Ye.current=ge.zoom}}if(!ve&&Ae.current&&!Te.current)if(b){if(Ee.current){const Wt=Ee.current.children[0];if(Wt!=null&&Wt.clientWidth&&Wt!=null&&Wt.clientHeight){const{isOrthographicCamera:kt}=ge;if(kt||O)W.scale&&(Array.isArray(W.scale)?W.scale instanceof s.Vector3?Ae.current.scale.copy(W.scale.clone().divideScalar(1)):Ae.current.scale.set(1/W.scale[0],1/W.scale[1],1/W.scale[2]):Ae.current.scale.setScalar(1/W.scale));else{const Bt=(v||10)/400,qe=Wt.clientWidth*Bt,Ne=Wt.clientHeight*Bt;Ae.current.scale.set(qe,Ne,1)}Te.current=!0}}}else{const Wt=Re.children[0];if(Wt!=null&&Wt.clientWidth&&Wt!=null&&Wt.clientHeight){const kt=1/ke.factor,Bt=Wt.clientWidth*kt,qe=Wt.clientHeight*kt;Ae.current.scale.set(Bt,qe,1),Te.current=!0}Ae.current.lookAt(rt.camera.position)}});const gt=d.useMemo(()=>({vertexShader:b?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[b]);return d.createElement("group",(0,w.Z)({},W,{ref:Pe}),T&&!ve&&d.createElement("mesh",{castShadow:F,receiveShadow:G,ref:Ae},O||d.createElement("planeGeometry",null),L||d.createElement("shaderMaterial",{side:s.DoubleSide,vertexShader:gt.vertexShader,fragmentShader:gt.fragmentShader})))});function ft({onChanged:i,portal:t,preventDefault:r=!0,scroll:l=!0,keyCode:c=9}){const p=d.useRef(0),h=(0,E.z)(_=>_.setEvents),g=(0,E.z)(_=>_.get),v=(0,E.z)(_=>_.gl);return d.useEffect(()=>{var _;let b=[],T;const R=g().events.filter,F=(_=t==null?void 0:t.current)!==null&&_!==void 0?_:v.domElement.parentNode,G=()=>F&&i&&i(b,Math.round(p.current)%b.length);h({filter:(z,j)=>{let Q=[...z];(Q.length!==b.length||!b.every(W=>Q.map(Y=>Y.object.uuid).includes(W.object.uuid)))&&(p.current=0,b=Q,G()),R&&(Q=R(Q,j));for(let W=0;W<Math.round(p.current)%Q.length;W++){const Y=Q.shift();Q=[...Q,Y]}return Q}});const L=z=>{var j,Q;p.current=z(p.current),(j=g().events.handlers)==null||j.onPointerCancel(void 0),(Q=g().events.handlers)==null||Q.onPointerMove(T),G()},O=z=>{(z.keyCode||z.which===c)&&(r&&z.preventDefault(),b.length>1&&L(j=>j+1))},k=z=>{r&&z.preventDefault();let j=0;z||(z=window.event),z.wheelDelta?j=z.wheelDelta/120:z.detail&&(j=-z.detail/3),b.length>1&&L(Q=>Math.abs(Q-j))},P=z=>T=z;return document.addEventListener("pointermove",P,{passive:!0}),l&&document.addEventListener("wheel",k),c!==void 0&&document.addEventListener("keydown",O),()=>{h({filter:R}),c!==void 0&&document.removeEventListener("keydown",O),l&&document.removeEventListener("wheel",k),document.removeEventListener("pointermove",P)}},[v,g,h,r,l,c]),null}function Pt(i,t="pointer",r="auto"){d.useEffect(()=>{if(i)return document.body.style.cursor=t,()=>void(document.body.style.cursor=r)},[i])}var wt=A(14671);const qt=wt.Z.default||wt.Z;let Ft=0;const An=qt(i=>(s.DefaultLoadingManager.onStart=(t,r,l)=>{i({active:!0,item:t,loaded:r,total:l,progress:(r-Ft)/(l-Ft)*100})},s.DefaultLoadingManager.onLoad=()=>{i({active:!1})},s.DefaultLoadingManager.onError=t=>i(r=>({errors:[...r.errors,t]})),s.DefaultLoadingManager.onProgress=(t,r,l)=>{r===l&&(Ft=l),i({active:!0,item:t,loaded:r,total:l,progress:(r-Ft)/(l-Ft)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),rr=i=>`Loading ${i.toFixed(2)}%`;function xr({containerStyles:i,innerStyles:t,barStyles:r,dataStyles:l,dataInterpolation:c=rr,initialState:p=h=>h}){const{active:h,progress:g}=An(),v=d.useRef(0),_=d.useRef(0),b=d.useRef(null),[T,R]=d.useState(p(h));d.useEffect(()=>{let G;return h!==T&&(G=setTimeout(()=>R(h),300)),()=>clearTimeout(G)},[T,h]);const F=d.useCallback(()=>{b.current&&(v.current+=(g-v.current)/2,(v.current>.95*g||g===100)&&(v.current=g),b.current.innerText=c(v.current),v.current<g&&(_.current=requestAnimationFrame(F)))},[c,g]);return d.useEffect(()=>(F(),()=>cancelAnimationFrame(_.current)),[F]),T?d.createElement("div",{style:Kn(Xo(Kn({},Br.container),{opacity:h?1:0}),i)},d.createElement("div",null,d.createElement("div",{style:Kn(Kn({},Br.inner),t)},d.createElement("div",{style:Kn(Xo(Kn({},Br.bar),{transform:`scaleX(${g/100})`}),r)}),d.createElement("span",{ref:b,style:Kn(Kn({},Br.data),l)})))):null}const Br={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Er(i){return function(t){i.forEach(function(r){typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var zr=Er;function Fi(i,t,r){return t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function eo(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),r.push.apply(r,l)}return r}function Gr(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eo(Object(r),!0).forEach(function(l){Fi(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}function Yo(i,t){return Yo=Object.setPrototypeOf||function(l,c){return l.__proto__=c,l},Yo(i,t)}function jn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function tn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];var l=t[0],c=t[1],p=t[2],h=t[3];return l*h-c*p}function Bn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];var l=t[0],c=t[1],p=t[2],h=t[3],g=t[4],v=t[5],_=t[6],b=t[7],T=t[8];return l*g*T+c*v*_+p*h*b-p*g*_-c*h*T-l*v*b}function Ar(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]}function Rr(i,t,r){for(var l=i.clone().transpose(),c=[],p=l.elements.length,h=Math.sqrt(p),g=0;g<p;g++){var v=l.elements[g],_=Math.floor(g/h),b=g%h;_!==t-1&&b!==r-1&&c.push(v)}return Bn.apply(void 0,c)}function Ti(i,t){for(var r=[],l=i.toArray(),c=t.toArray(),p=0;p<l.length;p++)r[p]=l[p]+c[p];return new s.Matrix3().fromArray(r)}var Fn=Object.freeze({__proto__:null,determinant2:tn,determinant3:Bn,determinant4:Ar,getMinor:Rr,matrixSum3:Ti});function Rn(i){if(Array.isArray(i))return i}function Hn(i,t){var r=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var l=[],c=!0,p=!1,h,g;try{for(r=r.call(i);!(c=(h=r.next()).done)&&(l.push(h.value),!(t&&l.length===t));c=!0);}catch(v){p=!0,g=v}finally{try{!c&&r.return!=null&&r.return()}finally{if(p)throw g}}return l}}function hr(i,t){(t==null||t>i.length)&&(t=i.length);for(var r=0,l=new Array(t);r<t;r++)l[r]=i[r];return l}function ti(i,t){if(i){if(typeof i=="string")return hr(i,t);var r=Object.prototype.toString.call(i).slice(8,-1);if(r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set")return Array.from(i);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hr(i,t)}}function ii(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Or(i,t){return Rn(i)||Hn(i,t)||ti(i,t)||ii()}function Bo(i){if(Array.isArray(i))return hr(i)}function Kr(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function co(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function to(i){return Bo(i)||Kr(i)||ti(i)||co()}function Cs(i,t,r){return jn()?Cs=Reflect.construct:Cs=function(c,p,h){var g=[null];g.push.apply(g,p);var v=Function.bind.apply(c,g),_=new v;return h&&Yo(_,h.prototype),_},Cs.apply(null,arguments)}function Ys(i,t){var r=Or(t[0],2),l=r[0],c=r[1],p=Or(t[1],2),h=p[0],g=p[1],v=Or(t[2],2),_=v[0],b=v[1],T=Or(i,2),R=T[0],F=T[1],G=new s.Matrix4;return G.set(l,c,l*l+c*c,1,h,g,h*h+g*g,1,_,b,_*_+b*b,1,R,F,R*R+F*F,1),G.determinant()<=0}function va(i){var t=Or(i[0],2),r=t[0],l=t[1],c=Or(i[1],2),p=c[0],h=c[1],g=Or(i[2],2),v=g[0],_=g[1];return Bn(r,l,1,p,h,1,v,_,1)}function Ss(i){return va(i)===0}function ca(i){return va(i)<0}function Ls(i){var t=Or(i[0],2),r=t[0],l=t[1],c=Or(i[1],2),p=c[0],h=c[1],g=Or(i[2],2),v=g[0],_=g[1];if(Ss(i))return null;var b=new s.Matrix4;b.set(1,1,1,1,r*r+l*l,r,l,1,p*p+h*h,p,h,1,v*v+_*_,v,_,1);var T=Rr(b,1,1),R=Rr(b,1,3),F=Rr(b,1,2),G=Rr(b,1,4),L=.5*(F/T),O=.5*(R/T),k=L*L+O*O+G/T;return{x:Math.abs(L)===0?0:L,y:Math.abs(O)===0?0:-O,r:Math.sqrt(k)}}function as(i,t){var r=Array.isArray(t[0])?t[0]:t[0].toArray(),l=Or(r,2),c=l[0],p=l[1],h=Array.isArray(t[1])?t[1]:t[1].toArray(),g=Or(h,2),v=g[0],_=g[1],b=Array.isArray(t[2])?t[2]:t[2].toArray(),T=Or(b,2),R=T[0],F=T[1],G=Or(i,2),L=G[0],O=G[1];if(Ss(t))throw new Error("Collinear points don't form a triangle");var k=c-L,P=p-O,z=v-L,j=_-O,Q=R-L,W=F-O,Y=Bn(k,P,k*k+P*P,z,j,z*z+j*j,Q,W,Q*Q+W*W);return Y===0?!0:ca(t)?Y<0:Y>0}var zi=new s.Vector2,no=new s.Vector2;function ds(i){var t=i.map(function(_){return Array.isArray(_)?Cs(s.Vector2,to(_)):_}),r=Or(t,3),l=r[0],c=r[1],p=r[2];if(Ss(i))return!1;var h=zi.subVectors(c,l),g=no.subVectors(p,l),v=g.cross(h);return v>0}var hs=Object.freeze({__proto__:null,isPointInTriangle:Ys,triangleDeterminant:va,arePointsCollinear:Ss,isTriangleClockwise:ca,getCircumcircle:Ls,isPointInCircumcircle:as,doThreePointsMakeARight:ds});function Sr(i,t,r){return Math.max(t,Math.min(r,i))}function ji(i,t){return Sr(i-Math.floor(i/t)*t,0,t)}function Pi(i,t){var r=ji(t-i,Math.PI*2);return r>Math.PI&&(r-=Math.PI*2),r}function pa(i){return i/180*Math.PI}function La(i){return i*180/Math.PI}function fs(i,t){for(var r=t.radius,l=r===void 0?1:r,c=i.length/3,p=2/c,h=Math.PI*(3-2.2360679775),g=0;g<i.length;g+=3){var v=g*p-1+p/2,_=Math.sqrt(1-Math.pow(v,2)),b=g%c*h,T=Math.cos(b)*_,R=Math.sin(b)*_;i[g]=T*l,i[g+1]=v*l,i[g+2]=R*l}}function Lo(i,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(i.x-t.x)<r&&Math.abs(i.y-t.y)<r&&Math.abs(i.z-t.z)<r}function Zi(i,t){return i.x===t.x?typeof i.z!="undefined"&&i.y===t.y?i.z-t.z:i.y-t.y:i.x-t.x}function ka(i){for(var t=i.sort(Zi),r=[t[0],t[1]],l=2;l<t.length;l++)for(r.push(t[l]);r.length>2&&ds(to(r.slice(-3)));)r.splice(r.length-2,1);for(var c=[t[t.length-1],t[t.length-2]],p=t.length-3;p>=0;p--)for(c.push(t[p]);c.length>2&&ds(to(c.slice(-3)));)c.splice(c.length-2,1);c.splice(0,1),c.splice(c.length-1,1);var h=[].concat(r,c);return h}function _a(i,t,r){var l=Or(t,2),c=l[0],p=l[1],h=Or(r,2),g=h[0],v=h[1];return g+(i-c)*(v-g)/(p-c)}function Jo(i){return i*i*i*(i*(i*6-15)+10)}function ko(i,t,r){return i*(1-r)+t*r}function bo(i,t,r){return(r-i)/(t-i)}function ks(i,t,r){var l=Math.sqrt(i*i+t*t+r*r);return[i/l,t/l,r/l]}function Ea(i,t,r){var l=i*i,c=t*t,p=r*r,h=i*Math.sqrt(1-(c+p)/2+c*p/3),g=t*Math.sqrt(1-(p+l)/2+p*l/3),v=r*Math.sqrt(1-(l+c)/2+l*c/3);return[h,g,v]}function zs(i,t){var r=new s.Vector3().crossVectors(i,t),l=i.dot(t),c=new s.Matrix3().identity(),p=new s.Matrix3().set(0,-r.z,r.y,r.z,0,-r.x,-r.y,r.x,0),h=new s.Matrix3().multiplyMatrices(p,p).multiplyScalar(1/(1+l)),g=Ti(Ti(c,p),h);return g}function Ro(i,t,r){var l=Math.asin(t),c=Math.atan2(i,-r);return[l,c]}function gs(i,t){var r=Math.sin(i),l=Math.cos(i),c=Math.sin(t)*l,p=-Math.cos(t)*l;return[c,r,p]}function zo(i,t){var r=Or(t,2),l=r[0],c=r[1],p=zs(i.normal,new s.Vector3(0,1,0)),h=bo(l.clone().applyMatrix3(p).y,c.clone().applyMatrix3(p).y,0);return new s.Vector3().lerpVectors(l,c,h)}function ba(i,t){var r=t.normal.dot(i);return r}function Za(i,t){var r=Or(i,3),l=r[0],c=r[1],p=r[2],h=Or(t,2),g=h[0],v=h[1];return p*g*v+c*g+l}function fc(i,t){var r=Or(t,2),l=r[0],c=r[1],p=l*c,h=i/p,g=i-p*h,v=g/l,_=g%l;return[_,v,h]}function Ma(i,t){return i[0]+t[0]*i[1]}function Nc(i,t){var r=i%t,l=Math.floor(i/t);return[r,l]}var Ze=Object.freeze({__proto__:null,clamp:Sr,deltaAngle:Pi,degToRad:pa,radToDeg:La,fibonacciOnSphere:fs,vectorEquals:Lo,lexicographic:Zi,convexHull:ka,remap:_a,fade:Jo,lerp:ko,inverseLerp:bo,normalize:ks,pointOnCubeToPointOnSphere:Ea,rotateVectorOnVector:zs,pointToCoordinate:Ro,coordinateToPoint:gs,planeSegmentIntersection:zo,pointToPlaneDistance:ba,getIndexFrom3D:Za,get3DFromIndex:fc,getIndexFrom2D:Ma,get2DFromIndex:Nc});function St(){return[0,0]}function pn(){return[1,1]}function Dn(i,t){return[i[0]+t[0],i[1]+t[1]]}function Ln(i,t){return[i[0]+t,i[1]+t]}function lr(i,t){return[i[0]-t[0],i[1]-t[1]]}function je(i,t){return[i[0]-t,i[1]-t]}function Le(i,t){return[i[0]*t,i[1]*t]}function Fe(i,t){return i[0]*t[0]+i[1]*t[1]}function at(i){return i[0]*i[0]+i[1]*i[1]}function Oe(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function $e(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1]))}var dt=Object.freeze({__proto__:null,zero:St,one:pn,add:Dn,addValue:Ln,sub:lr,subValue:je,scale:Le,dot:Fe,lengthSqr:at,length:Oe,distance:$e});function _t(){return[0,0,0]}function Tt(){return[1,1,1]}function an(i,t){return[i[0]+t[0],i[1]+t[1],i[2]+t[2]]}function ln(i,t){return[i[0]+t,i[1]+t,i[2]+t]}function Me(i,t){return[i[0]-t[0],i[1]-t[1],i[2]-t[2]]}function He(i,t){return[i[0]-t,i[1]-t,i[2]-t]}function lt(i,t){return[i[0]*t,i[1]*t,i[2]*t]}function Qt(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]}function wn(i,t){var r=i[1]*t[2]-i[2]*t[1],l=i[2]*t[0]-i[0]*t[2],c=i[0]*t[1]-i[1]*t[0];return[r,l,c]}function Gn(i){return i[0]*i[0]+i[1]*i[1]+i[2]*i[2]}function gr(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2])}function Wr(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])+(i[2]-t[2])*(i[2]-t[2]))}var mi=Object.freeze({__proto__:null,zero:_t,one:Tt,add:an,addValue:ln,sub:Me,subValue:He,scale:lt,dot:Qt,cross:wn,lengthSqr:Gn,length:gr,distance:Wr});function Ai(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"xyz",l={x:0,y:0,z:0},c=0;c<i.length;c+=t){l.x=i[c],l.y=i[c+1],l.z=i[c+2];var p=r.split(""),h=Or(p,3),g=h[0],v=h[1],_=h[2];i[c]=l[g],i[c+1]=l[v],t===3&&(i[c+2]=l[_])}return i}function Xn(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return Math.random()},l=t+1,c=new Float32Array(i.length/t*l),p=0;p<i.length;p+=t){var h=p/t*l;c[h]=i[p],c[h+1]=i[p+1],t===2&&(c[h+2]=r(h)),t===3&&(c[h+2]=i[p+2],c[h+3]=r(h))}return c}function Zr(i,t,r,l){for(var c=0;c<i.length;c++)r[c]=ko(i[c],t[c],l)}function Gi(i,t){for(var r=t.length,l=0;l<i.length;l+=r)i[l]+=t[0],i[l+1]+=t[1],i[l+2]+=t[2];return i}function Hi(i,t){for(var r={center:[0,0,0],q:new s.Quaternion().identity()},l=new s.Vector3,c=Gr(Gr({},r),t),p=c.q,h=c.center,g=0;g<i.length;g+=3)l.set(i[g]-h[0],i[g+1]-h[1],i[g+2]-h[2]),l.applyQuaternion(p),i[g]=l.x+h[0],i[g+1]=l.y+h[1],i[g+2]=l.z+h[1];return i}function Ni(i,t,r){for(var l=0,c=0;l<i.length;l+=t,c++)if(t===3){var p=r([i[l],i[l+1],i[l+2]],c);i.set(p,l)}else i.set(r([i[l],i[l+1]],c),l);return i}function Js(i,t,r,l){for(var c=0,p=0;c<i.length;c+=t,p++)t===2?l=r(l,[i[c],i[c+1]],p):l=r(l,[i[c],i[c+1],i[c+2]],p);return l}function po(i,t,r){for(var l={center:[0,0,0]},c=Gr(Gr({},l),r),p=c.center,h=c.distance,g=0;g<i.length;g+=t)i[g]=(i[g]-p[0])*(1+h)+p[0],i[g+1]=(i[g+1]-p[1])*(1+h)+p[1],t===3&&(i[g+2]=(i[g+2]-p[1])*(1+h)+p[2]);return i}function ms(i,t){return Js(i,t,function(r,l){return t===3?r=an(r,l):r=Dn(r,l),r},St())}function za(i,t,r){var l=Int16Array.from({length:i.length/t},function(g,v){return v});l.sort(function(g,v){var _=i.slice(g*t,g*t+t),b=i.slice(v*t,v*t+t);return r(_,b)});for(var c=i.slice(0),p=0;p<l.length;p++){var h=l[p];i.set(c.slice(h*t,h*t+t),p*3)}return i}var ua=Object.freeze({__proto__:null,swizzle:Ai,addAxis:Xn,lerp:Zr,translate:Gi,rotate:Hi,map:Ni,reduce:Js,expand:po,center:ms,sort:za});function qo(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Qi=function i(t,r,l){var c=this;qo(this,i),Fi(this,"dot2",function(p,h){return c.x*p+c.y*h}),Fi(this,"dot3",function(p,h,g){return c.x*p+c.y*h+c.z*g}),this.x=t,this.y=r,this.z=l},qs=[new Qi(1,1,0),new Qi(-1,1,0),new Qi(1,-1,0),new Qi(-1,-1,0),new Qi(1,0,1),new Qi(-1,0,1),new Qi(1,0,-1),new Qi(-1,0,-1),new Qi(0,1,1),new Qi(0,-1,1),new Qi(0,1,-1),new Qi(0,-1,-1)],Ql=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Ir=new Array(512),ro=new Array(512),Io=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var r=0;r<256;r++){var l;r&1?l=Ql[r]^t&255:l=Ql[r]^t>>8&255,Ir[r]=Ir[r+256]=l,ro[r]=ro[r+256]=qs[l%12]}};Io(0);var Kl=.5*(Math.sqrt(3)-1),sp=(3-Math.sqrt(3))/6,Yp=1/3,Gs=1/6,ap=function(t,r){var l,c,p,h=(t+r)*Kl,g=Math.floor(t+h),v=Math.floor(r+h),_=(g+v)*sp,b=t-g+_,T=r-v+_,R,F;b>T?(R=1,F=0):(R=0,F=1);var G=b-R+sp,L=T-F+sp,O=b-1+2*sp,k=T-1+2*sp;g&=255,v&=255;var P=ro[g+Ir[v]],z=ro[g+R+Ir[v+F]],j=ro[g+1+Ir[v+1]],Q=.5-b*b-T*T;Q<0?l=0:(Q*=Q,l=Q*Q*P.dot2(b,T));var W=.5-G*G-L*L;W<0?c=0:(W*=W,c=W*W*z.dot2(G,L));var Y=.5-O*O-k*k;return Y<0?p=0:(Y*=Y,p=Y*Y*j.dot2(O,k)),70*(l+c+p)},lp=function(t,r,l){var c,p,h,g,v=(t+r+l)*Yp,_=Math.floor(t+v),b=Math.floor(r+v),T=Math.floor(l+v),R=(_+b+T)*Gs,F=t-_+R,G=r-b+R,L=l-T+R,O,k,P,z,j,Q;F>=G?G>=L?(O=1,k=0,P=0,z=1,j=1,Q=0):F>=L?(O=1,k=0,P=0,z=1,j=0,Q=1):(O=0,k=0,P=1,z=1,j=0,Q=1):G<L?(O=0,k=0,P=1,z=0,j=1,Q=1):F<L?(O=0,k=1,P=0,z=0,j=1,Q=1):(O=0,k=1,P=0,z=1,j=1,Q=0);var W=F-O+Gs,Y=G-k+Gs,K=L-P+Gs,se=F-z+2*Gs,ce=G-j+2*Gs,ge=L-Q+2*Gs,le=F-1+3*Gs,xe=G-1+3*Gs,me=L-1+3*Gs;_&=255,b&=255,T&=255;var Be=ro[_+Ir[b+Ir[T]]],ke=ro[_+O+Ir[b+k+Ir[T+P]]],Re=ro[_+z+Ir[b+j+Ir[T+Q]]],ze=ro[_+1+Ir[b+1+Ir[T+1]]],Pe=.6-F*F-G*G-L*L;Pe<0?c=0:(Pe*=Pe,c=Pe*Pe*Be.dot3(F,G,L));var Ye=.6-W*W-Y*Y-K*K;Ye<0?p=0:(Ye*=Ye,p=Ye*Ye*ke.dot3(W,Y,K));var Ce=.6-se*se-ce*ce-ge*ge;Ce<0?h=0:(Ce*=Ce,h=Ce*Ce*Re.dot3(se,ce,ge));var Ee=.6-le*le-xe*xe-me*me;return Ee<0?g=0:(Ee*=Ee,g=Ee*Ee*ze.dot3(le,xe,me)),32*(c+p+h+g)},Du=function(t,r){var l=Math.floor(t),c=Math.floor(r);t=t-l,r=r-c,l=l&255,c=c&255;var p=ro[l+Ir[c]].dot2(t,r),h=ro[l+Ir[c+1]].dot2(t,r-1),g=ro[l+1+Ir[c]].dot2(t-1,r),v=ro[l+1+Ir[c+1]].dot2(t-1,r-1),_=Jo(t);return ko(ko(p,g,_),ko(h,v,_),Jo(r))},n1=function(t,r,l){var c=Math.floor(t),p=Math.floor(r),h=Math.floor(l);t=t-c,r=r-p,l=l-h,c=c&255,p=p&255,h=h&255;var g=ro[c+Ir[p+Ir[h]]].dot3(t,r,l),v=ro[c+Ir[p+Ir[h+1]]].dot3(t,r,l-1),_=ro[c+Ir[p+1+Ir[h]]].dot3(t,r-1,l),b=ro[c+Ir[p+1+Ir[h+1]]].dot3(t,r-1,l-1),T=ro[c+1+Ir[p+Ir[h]]].dot3(t-1,r,l),R=ro[c+1+Ir[p+Ir[h+1]]].dot3(t-1,r,l-1),F=ro[c+1+Ir[p+1+Ir[h]]].dot3(t-1,r-1,l),G=ro[c+1+Ir[p+1+Ir[h+1]]].dot3(t-1,r-1,l-1),L=Jo(t),O=Jo(r),k=Jo(l);return ko(ko(ko(g,T,L),ko(v,R,L),k),ko(ko(_,F,L),ko(b,G,L),k),O)},r1=Object.freeze({__proto__:null,seed:Io,simplex2:ap,simplex3:lp,perlin2:Du,perlin3:n1}),Gd=Math.PI*2;function Nd(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var r=0;r<t.length;r++)i=(i+(r+1)*(t.charCodeAt(r)%96))%2147483647}return i===0&&(i=311),i}function ml(i){var t=Nd(i);return function(){var r=t*48271%2147483647;return t=r,r/2147483647}}var Kf=function i(t){var r=this;qo(this,i),Fi(this,"seed",0),Fi(this,"init",function(l){r.seed=l,r.value=ml(l)}),Fi(this,"value",ml(this.seed)),this.init(t)},gc=new Kf(Math.random()),bi={radius:1,center:[0,0,0]};function Xf(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},bi),t),c=l.radius,p=l.center,h=0;h<i.length;h+=3){var g=r.value(),v=r.value(),_=Math.acos(2*v-1),b=Gd*g;i[h]=Math.sin(_)*Math.cos(b)*c+p[0],i[h+1]=Math.sin(_)*Math.sin(b)*c+p[1],i[h+2]=Math.cos(_)*c+p[2]}return i}function mc(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},bi),t),c=l.radius,p=l.center,h=0;h<i.length;h+=3){var g=Math.pow(r.value(),.3333333333333333),v=r.value()*2-1,_=r.value()*2-1,b=r.value()*2-1,T=Math.sqrt(v*v+_*_+b*b);v=g*v/T,_=g*_/T,b=g*b/T,i[h]=v*c+p[0],i[h+1]=_*c+p[1],i[h+2]=b*c+p[2]}return i}var ai={radius:1,center:[0,0]};function Xl(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},ai),t),c=l.radius,p=l.center,h=0;h<i.length;h+=2){var g=c*Math.sqrt(r.value()),v=r.value()*Gd;i[h]=Math.sin(v)*g+p[0],i[h+1]=Math.cos(v)*g+p[1]}return i}function Yf(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},ai),t),c=l.radius,p=l.center,h=0;h<i.length;h+=2){var g=r.value()*Gd;i[h]=Math.sin(g)*c+p[0],i[h+1]=Math.cos(g)*c+p[1]}return i}var Zs={sides:1,center:[0,0]};function Pu(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},Zs),t),c=l.sides,p=l.center,h=typeof c=="number"?c:c[0],g=typeof c=="number"?c:c[1],v=0;v<i.length;v+=2)i[v]=(r.value()-.5)*h+p[0],i[v+1]=(r.value()-.5)*g+p[1];return i}function i1(i,t){return i}function Jf(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},ym),t),c=l.sides,p=l.center,h=typeof c=="number"?c:c[0],g=typeof c=="number"?c:c[1],v=typeof c=="number"?c:c[2],_=0;_<i.length;_+=3)i[_]=(r.value()-.5)*h+p[0],i[_+1]=(r.value()-.5)*g+p[1],i[_+2]=(r.value()-.5)*v+p[2];return i}var ym={sides:1,center:[0,0,0]};function zh(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gc,l=Gr(Gr({},ym),t),c=l.sides,p=l.center,h=typeof c=="number"?c:c[0],g=typeof c=="number"?c:c[1],v=typeof c=="number"?c:c[2],_=0;_<i.length;_+=3)i[_]=(r.value()-.5)*h+p[0],i[_+1]=(r.value()-.5)*g+p[1],i[_+2]=(r.value()-.5)*v+p[2];return i}var Uc=Object.freeze({__proto__:null,Generator:Kf,onSphere:Xf,inSphere:mc,inCircle:Xl,onCircle:Yf,inRect:Pu,onRect:i1,inBox:Jf,onBox:zh,noise:r1}),o1=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return l/Math.atan(1/r)*Math.atan(Math.sin(2*Math.PI*t*c)/r)},vm=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)};function uo(i,t,r){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:vm,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,v="velocity_"+t;if(i.__damp===void 0&&(i.__damp={}),i.__damp[v]===void 0&&(i.__damp[v]=0),Math.abs(i[t]-r)<=g)return i[t]=r,!1;l=Math.max(1e-4,l);var _=2/l,b=h(_*c),T=i[t]-r,R=r,F=p*l;T=Math.min(Math.max(T,-F),F),r=i[t]-T;var G=(i.__damp[v]+_*T)*c;i.__damp[v]=(i.__damp[v]-_*G)*b;var L=r+(T+G)*b;return R-i[t]>0==L>R&&(L=R,i.__damp[v]=(L-R)/c),i[t]=L,!0}function $a(i,t,r,l,c,p,h,g){return uo(i,t,i[t]+Pi(i[t],r),l,c,p,h,g)}var cp=new s.Vector2,Gh,qf;function s1(i,t,r,l,c,p,h){return typeof t=="number"?cp.setScalar(t):Array.isArray(t)?cp.set(t[0],t[1]):cp.copy(t),Gh=uo(i,"x",cp.x,r,l,c,p,h),qf=uo(i,"y",cp.y,r,l,c,p,h),Gh||qf}var xa=new s.Vector3,Zf,Lu,$f;function el(i,t,r,l,c,p,h){return typeof t=="number"?xa.setScalar(t):Array.isArray(t)?xa.set(t[0],t[1],t[2]):xa.copy(t),Zf=uo(i,"x",xa.x,r,l,c,p,h),Lu=uo(i,"y",xa.y,r,l,c,p,h),$f=uo(i,"z",xa.z,r,l,c,p,h),Zf||Lu||$f}var Yl=new s.Vector4,ku,pp,Ud,up;function _m(i,t,r,l,c,p,h){return typeof t=="number"?Yl.setScalar(t):Array.isArray(t)?Yl.set(t[0],t[1],t[2],t[3]):Yl.copy(t),ku=uo(i,"x",Yl.x,r,l,c,p,h),pp=uo(i,"y",Yl.y,r,l,c,p,h),Ud=uo(i,"z",Yl.z,r,l,c,p,h),up=uo(i,"w",Yl.w,r,l,c,p,h),ku||pp||Ud||up}var Jp=new s.Euler,Nh,qp,Al;function Ac(i,t,r,l,c,p,h){return Array.isArray(t)?Jp.set(t[0],t[1],t[2],t[3]):Jp.copy(t),Nh=$a(i,"x",Jp.x,r,l,c,p,h),qp=$a(i,"y",Jp.y,r,l,c,p,h),Al=$a(i,"z",Jp.z,r,l,c,p,h),Nh||qp||Al}var yl=new s.Color,Uh,eg,Il;function Jl(i,t,r,l,c,p,h){return t instanceof s.Color?yl.copy(t):Array.isArray(t)?yl.setRGB(t[0],t[1],t[2]):yl.set(t),Uh=uo(i,"r",yl.r,r,l,c,p,h),eg=uo(i,"g",yl.g,r,l,c,p,h),Il=uo(i,"b",yl.b,r,l,c,p,h),Uh||eg||Il}var Zo=new s.Quaternion,tl=new s.Vector4,vl=new s.Vector4,As=new s.Vector4,jh,yc,vc,Ga;function Go(i,t,r,l,c,p,h){var g=i;Array.isArray(t)?Zo.set(t[0],t[1],t[2],t[3]):Zo.copy(t);var v=i.dot(Zo)>0?1:-1;return Zo.x*=v,Zo.y*=v,Zo.z*=v,Zo.w*=v,jh=uo(i,"x",Zo.x,r,l,c,p,h),yc=uo(i,"y",Zo.y,r,l,c,p,h),vc=uo(i,"z",Zo.z,r,l,c,p,h),Ga=uo(i,"w",Zo.w,r,l,c,p,h),tl.set(i.x,i.y,i.z,i.w).normalize(),vl.set(g.__damp.velocity_x,g.__damp.velocity_y,g.__damp.velocity_z,g.__damp.velocity_w),As.copy(tl).multiplyScalar(vl.dot(tl)/tl.dot(tl)),g.__damp.velocity_x-=As.x,g.__damp.velocity_y-=As.y,g.__damp.velocity_z-=As.z,g.__damp.velocity_w-=As.w,i.set(tl.x,tl.y,tl.z,tl.w),jh||yc||vc||Ga}var dp=new s.Spherical,Hh,Zp,ql;function Wh(i,t,r,l,c,p,h){return Array.isArray(t)?dp.set(t[0],t[1],t[2]):dp.copy(t),Hh=uo(i,"radius",dp.radius,r,l,c,p,h),Zp=$a(i,"phi",dp.phi,r,l,c,p,h),ql=$a(i,"theta",dp.theta,r,l,c,p,h),Hh||Zp||ql}var $p=new s.Matrix4,_l=new s.Vector3,El=new s.Quaternion,hp=new s.Vector3,_c,Ec,fp;function Em(i,t,r,l,c,p,h){var g=i;return g.__damp===void 0&&(g.__damp={position:new s.Vector3,rotation:new s.Quaternion,scale:new s.Vector3},i.decompose(g.__damp.position,g.__damp.rotation,g.__damp.scale)),Array.isArray(t)?$p.set.apply($p,to(t)):$p.copy(t),$p.decompose(_l,El,hp),_c=el(g.__damp.position,_l,r,l,c,p,h),Ec=Go(g.__damp.rotation,El,r,l,c,p,h),fp=el(g.__damp.scale,hp,r,l,c,p,h),i.compose(g.__damp.position,g.__damp.rotation,g.__damp.scale),_c||Ec||fp}var zu=Object.freeze({__proto__:null,rsqw:o1,exp:vm,damp:uo,dampAngle:$a,damp2:s1,damp3:el,damp4:_m,dampE:Ac,dampC:Jl,dampQ:Go,dampS:Wh,dampM:Em});function jd(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&Yo(i,t)}function da(i){return da=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},da(i)}function Ca(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function No(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ca(i)}function ha(i){var t=jn();return function(){var l=da(i),c;if(t){var p=da(this).constructor;c=Reflect.construct(l,arguments,p)}else c=l.apply(this,arguments);return No(this,c)}}var Xr=function(i){jd(r,i);var t=ha(r);function r(){var l,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.2,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:16;qo(this,r),l=t.call(this);for(var v=c/2-h,_=p/2-h,b=h/c,T=(c-h)/c,R=h/p,F=(p-h)/p,G=[v,_,0,-v,_,0,-v,-_,0,v,-_,0],L=[T,F,b,F,b,R,T,R],O=[3*(g+1)+3,3*(g+1)+4,g+4,g+5,2*(g+1)+4,2,1,2*(g+1)+3,3,4*(g+1)+3,4,0],k=[O[0],O[1],O[2],O[0],O[2],O[3],O[4],O[5],O[6],O[4],O[6],O[7],O[8],O[9],O[10],O[8],O[10],O[11]],P,z,j,Q,W,Y,K,se,ce=0;ce<4;ce++){Q=ce<1||ce>2?v:-v,W=ce<2?_:-_,Y=ce<1||ce>2?T:b,K=ce<2?F:R;for(var ge=0;ge<=g;ge++)P=Math.PI/2*(ce+ge/g),z=Math.cos(P),j=Math.sin(P),G.push(Q+h*z,W+h*j,0),L.push(Y+b*z,K+R*j),ge<g&&(se=(g+1)*ce+ge+4,k.push(ce,se,se+1))}return l.setIndex(new s.BufferAttribute(new Uint32Array(k),1)),l.setAttribute("position",new s.BufferAttribute(new Float32Array(G),3)),l.setAttribute("uv",new s.BufferAttribute(new Float32Array(L),2)),l}return r}(s.BufferGeometry);function bm(i){for(var t=[],r=[],l=0;l<i.attributes.position.array.length/3;l++){var c=i.attributes.position.array[l*3+0],p=i.attributes.position.array[l*3+1],h=i.attributes.position.array[l*3+2];r.push(new s.Vector3(c,p,h))}for(var g=r.map(gn),v=0;v<g.length/3;v++)for(var _=new s.Triangle(r[v*3+0],r[v*3+1],r[v*3+2]),b=_.getNormal(new s.Vector3),T=0;T<3;T++){var R=g[v*3+T];if(R.theta===0&&(R.phi===0||R.phi===Math.PI)){var F=R.phi===0?v*3+1:v*3+0;R={r:R.r,phi:R.phi,theta:g[F].theta}}R.theta===Math.PI&&gn(b).theta<Math.PI/2&&(R.theta=-Math.PI);var G=yi(R);t.push(1-G.x,1-G.y)}return i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new s.Float32BufferAttribute(t,2)),i.attributes.uv.needsUpdate=!0,i}function gn(i){var t=Math.sqrt(i.x*i.x+i.z*i.z+i.y*i.y);return{r:t,phi:Math.acos(i.y/t),theta:Math.atan2(i.z,i.x)}}function yi(i){return{y:i.phi/Math.PI,x:(i.theta+Math.PI)/(2*Math.PI)}}function Hd(i){i.computeBoundingBox();var t=i.boundingBox.getSize(new s.Vector3),r=Math.min(t.x,t.y,t.z),l=new s.BoxGeometry(r,r,r),c=new s.Mesh(l);c.rotation.set(0,0,0),c.updateWorldMatrix(!0,!1);var p=c.matrix.clone().invert(),h=new s.Box3(new s.Vector3(-r/2,-r/2,-r/2),new s.Vector3(r/2,r/2,r/2));return tg(i,p,h,r),i.attributes.uv.needsUpdate=!0,i}function tg(i,t,r,l){var c=[];c.length=2*i.attributes.position.array.length/3;var p=function(Ae,Te,ve){Ae.applyMatrix4(t),Te.applyMatrix4(t),ve.applyMatrix4(t);var Ge=new s.Vector3;Ge.crossVectors(Te.clone().sub(Ae),Te.clone().sub(ve)).normalize(),Ge.x=Math.abs(Ge.x),Ge.y=Math.abs(Ge.y),Ge.z=Math.abs(Ge.z);var bt=new s.Vector2,mt=new s.Vector2,gt=new s.Vector2;return Ge.y>Ge.x&&Ge.y>Ge.z?(bt.x=(Ae.x-r.min.x)/l,bt.y=(r.max.z-Ae.z)/l,mt.x=(Te.x-r.min.x)/l,mt.y=(r.max.z-Te.z)/l,gt.x=(ve.x-r.min.x)/l,gt.y=(r.max.z-ve.z)/l):Ge.x>Ge.y&&Ge.x>Ge.z?(bt.x=(Ae.z-r.min.z)/l,bt.y=(Ae.y-r.min.y)/l,mt.x=(Te.z-r.min.z)/l,mt.y=(Te.y-r.min.y)/l,gt.x=(ve.z-r.min.z)/l,gt.y=(ve.y-r.min.y)/l):Ge.z>Ge.y&&Ge.z>Ge.x&&(bt.x=(Ae.x-r.min.x)/l,bt.y=(Ae.y-r.min.y)/l,mt.x=(Te.x-r.min.x)/l,mt.y=(Te.y-r.min.y)/l,gt.x=(ve.x-r.min.x)/l,gt.y=(ve.y-r.min.y)/l),{uv0:bt,uv1:mt,uv2:gt}};if(i.index)for(var h=0;h<i.index.array.length;h+=3){var g=i.index.array[h],v=i.index.array[h+1],_=i.index.array[h+2],b=i.attributes.position.array[3*g],T=i.attributes.position.array[3*g+1],R=i.attributes.position.array[3*g+2],F=i.attributes.position.array[3*v],G=i.attributes.position.array[3*v+1],L=i.attributes.position.array[3*v+2],O=i.attributes.position.array[3*_],k=i.attributes.position.array[3*_+1],P=i.attributes.position.array[3*_+2],z=new s.Vector3(b,T,R),j=new s.Vector3(F,G,L),Q=new s.Vector3(O,k,P),W=p(z,j,Q);c[2*g]=W.uv0.x,c[2*g+1]=W.uv0.y,c[2*v]=W.uv1.x,c[2*v+1]=W.uv1.y,c[2*_]=W.uv2.x,c[2*_+1]=W.uv2.y}else for(var Y=0;Y<i.attributes.position.array.length;Y+=9){var K=i.attributes.position.array[Y],se=i.attributes.position.array[Y+1],ce=i.attributes.position.array[Y+2],ge=i.attributes.position.array[Y+3],le=i.attributes.position.array[Y+4],xe=i.attributes.position.array[Y+5],me=i.attributes.position.array[Y+6],Be=i.attributes.position.array[Y+7],ke=i.attributes.position.array[Y+8],Re=new s.Vector3(K,se,ce),ze=new s.Vector3(ge,le,xe),Pe=new s.Vector3(me,Be,ke),Ye=p(Re,ze,Pe),Ce=Y/3,Ee=Ce+1,_e=Ce+2;c[2*Ce]=Ye.uv0.x,c[2*Ce+1]=Ye.uv0.y,c[2*Ee]=Ye.uv1.x,c[2*Ee+1]=Ye.uv1.y,c[2*_e]=Ye.uv2.x,c[2*_e+1]=Ye.uv2.y}i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new s.Float32BufferAttribute(c,2))}var Vh=Object.freeze({__proto__:null,RoundedPlaneGeometry:Xr,applySphereUV:bm,applyBoxUV:Hd});function Zl(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=[],l=0,c=0;l<i.length;l+=t,c++)t===3?r[c]=new s.Vector3(i[l],i[l+1],i[l+2]):r[c]=new s.Vector2(i[l],i[l+1]);return r}function eu(i){for(var t=i.length,r=i[0].hasOwnProperty("z")?3:2,l=new Float32Array(t*r),c=0;c<t;c++){var p=c*r;l[p]=i[c].x,l[p+1]=i[c].y,r===3&&(l[p+2]=i[c].z)}return l}var Wd=Object.freeze({__proto__:null,bufferToVectors:Zl,vectorsToBuffer:eu});const bc=d.createContext(null);function jc(){return d.useContext(bc)}function Qh({eps:i=1e-5,enabled:t=!0,infinite:r,horizontal:l,pages:c=1,distance:p=1,damping:h=.25,maxSpeed:g=1/0,style:v={},children:_}){const{get:b,setEvents:T,gl:R,size:F,invalidate:G,events:L}=(0,E.z)(),[O]=d.useState(()=>document.createElement("div")),[k]=d.useState(()=>document.createElement("div")),[P]=d.useState(()=>document.createElement("div")),z=R.domElement.parentNode,j=d.useRef(0),Q=d.useMemo(()=>({el:O,eps:i,fill:k,fixed:P,horizontal:l,damping:h,offset:0,delta:0,scroll:j,pages:c,range(K,se,ce=0){const ge=K-ce,le=ge+se+ce*2;return this.offset<ge?0:this.offset>le?1:(this.offset-ge)/(le-ge)},curve(K,se,ce=0){return Math.sin(this.range(K,se,ce)*Math.PI)},visible(K,se,ce=0){const ge=K-ce,le=ge+se+ce*2;return this.offset>=ge&&this.offset<=le}}),[i,h,l,c]);d.useEffect(()=>{O.style.position="absolute",O.style.width="100%",O.style.height="100%",O.style[l?"overflowX":"overflowY"]="auto",O.style[l?"overflowY":"overflowX"]="hidden",O.style.top="0px",O.style.left="0px";for(const se in v)O.style[se]=v[se];P.style.position="sticky",P.style.top="0px",P.style.left="0px",P.style.width="100%",P.style.height="100%",P.style.overflow="hidden",O.appendChild(P),k.style.height=l?"100%":`${c*p*100}%`,k.style.width=l?`${c*p*100}%`:"100%",k.style.pointerEvents="none",O.appendChild(k),z.appendChild(O),O[l?"scrollLeft":"scrollTop"]=1;const Y=L.connected||R.domElement;requestAnimationFrame(()=>L.connect==null?void 0:L.connect(O));const K=b().events.compute;return T({compute(se,ce){const{left:ge,top:le}=z.getBoundingClientRect(),xe=se.clientX-ge,me=se.clientY-le;ce.pointer.set(xe/ce.size.width*2-1,-(me/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),()=>{z.removeChild(O),T({compute:K}),L.connect==null||L.connect(Y)}},[c,p,l,O,k,P,z]),d.useEffect(()=>{if(L.connected===O){const Y=F[l?"width":"height"],K=O[l?"scrollWidth":"scrollHeight"],se=K-Y;let ce=0,ge=!0,le=!0;const xe=()=>{if(!(!t||le)&&(G(),ce=O[l?"scrollLeft":"scrollTop"],j.current=ce/se,r)){if(!ge){if(ce>=se){const Be=1-Q.offset;O[l?"scrollLeft":"scrollTop"]=1,j.current=Q.offset=-Be,ge=!0}else if(ce<=0){const Be=1+Q.offset;O[l?"scrollLeft":"scrollTop"]=K,j.current=Q.offset=Be,ge=!0}}ge&&setTimeout(()=>ge=!1,40)}};O.addEventListener("scroll",xe,{passive:!0}),requestAnimationFrame(()=>le=!1);const me=Be=>O.scrollLeft+=Be.deltaY/2;return l&&O.addEventListener("wheel",me,{passive:!0}),()=>{O.removeEventListener("scroll",xe),l&&O.removeEventListener("wheel",me)}}},[O,L,F,r,Q,G,l,t]);let W=0;return(0,E.A)((Y,K)=>{W=Q.offset,zu.damp(Q,"offset",j.current,h,K,g,void 0,i),zu.damp(Q,"delta",Math.abs(W-Q.offset),h,K,g,void 0,i),Q.delta>i&&G()}),d.createElement(bc.Provider,{value:Q},_)}const Gu=d.forwardRef(({children:i},t)=>{const r=d.useRef(null),l=jc(),{width:c,height:p}=(0,E.z)(h=>h.viewport);return(0,E.A)(()=>{r.current.position.x=l.horizontal?-c*(l.pages-1)*l.offset:0,r.current.position.y=l.horizontal?0:p*(l.pages-1)*l.offset}),d.createElement("group",{ref:zr([t,r])},i)}),Mm=d.forwardRef((c,l)=>{var p=c,{children:i,style:t}=p,r=_n(p,["children","style"]);const h=jc(),g=d.useRef(null),{width:v,height:_}=(0,E.z)(R=>R.size),b=d.useContext(E.f),T=d.useMemo(()=>m.createRoot(h.fixed),[h.fixed]);return(0,E.A)(()=>{h.delta>h.eps&&(g.current.style.transform=`translate3d(${h.horizontal?-v*(h.pages-1)*h.offset:0}px,${h.horizontal?0:_*(h.pages-1)*-h.offset}px,0)`)}),T.render(d.createElement("div",(0,w.Z)({ref:zr([l,g]),style:Xo(Kn({},t),{position:"absolute",top:0,left:0,willChange:"transform"})},r),d.createElement(bc.Provider,{value:h},d.createElement(E.f.Provider,{value:b},i)))),null}),Vd=d.forwardRef((l,r)=>{var c=l,{html:i}=c,t=_n(c,["html"]);const p=i?Mm:Gu;return d.createElement(p,(0,w.Z)({ref:r},t))});var bl=A(25108);let gp=xo();const $r=i=>Ns(i,gp);let Uo=xo();$r.write=i=>Ns(i,Uo);let Fl=xo();$r.onStart=i=>Ns(i,Fl);let $l=xo();$r.onFrame=i=>Ns(i,$l);let Qd=xo();$r.onFinish=i=>Ns(i,Qd);let Na=[];$r.setTimeout=(i,t)=>{let r=$r.now()+t,l=()=>{let p=Na.findIndex(h=>h.cancel==l);~p&&Na.splice(p,1),Mi-=~p?1:0},c={time:r,handler:i,cancel:l};return Na.splice(Mo(r),0,c),Mi+=1,tu(),c};let Mo=i=>~(~Na.findIndex(t=>t.time>i)||~Na.length);$r.cancel=i=>{Fl.delete(i),$l.delete(i),Qd.delete(i),gp.delete(i),Uo.delete(i)},$r.sync=i=>{Sa=!0,$r.batchedUpdates(i),Sa=!1},$r.throttle=i=>{let t;function r(){try{i(...t)}finally{t=null}}function l(...c){t=c,$r.onStart(r)}return l.handler=i,l.cancel=()=>{Fl.delete(r),t=null},l};let Nu=typeof window!="undefined"?window.requestAnimationFrame:()=>{};$r.use=i=>Nu=i,$r.now=typeof performance!="undefined"?()=>performance.now():Date.now,$r.batchedUpdates=i=>i(),$r.catch=bl.error,$r.frameLoop="always",$r.advance=()=>{$r.frameLoop!=="demand"?bl.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Us()};let $i=-1,Mi=0,Sa=!1;function Ns(i,t){Sa?(t.delete(i),i(0)):(t.add(i),tu())}function tu(){$i<0&&($i=0,$r.frameLoop!=="demand"&&Nu(fa))}function jo(){$i=-1}function fa(){~$i&&(Nu(fa),$r.batchedUpdates(Us))}function Us(){let i=$i;$i=$r.now();let t=Mo($i);if(t&&(Qe(Na.splice(0,t),r=>r.handler()),Mi-=t),!Mi){jo();return}Fl.flush(),gp.flush(i?Math.min(64,$i-i):16.667),$l.flush(),Uo.flush(),Qd.flush()}function xo(){let i=new Set,t=i;return{add(r){Mi+=t==i&&!i.has(r)?1:0,i.add(r)},delete(r){return Mi-=t==i&&i.has(r)?1:0,i.delete(r)},flush(r){t.size&&(i=new Set,Mi-=t.size,Qe(t,l=>l(r)&&i.add(l)),Mi+=i.size,t=i)}}}function Qe(i,t){i.forEach(r=>{try{t(r)}catch(l){$r.catch(l)}})}const Uu={count(){return Mi},isRunning(){return $i>=0},clear(){$i=-1,Na=[],Fl=xo(),gp=xo(),$l=xo(),Uo=xo(),Qd=xo(),Mi=0}};var ng=A(25108);function Ao(){}const ec=(i,t,r)=>Object.defineProperty(i,t,{value:r,writable:!0,configurable:!0}),Pn={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function wa(i,t){if(Pn.arr(i)){if(!Pn.arr(t)||i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}return i===t}const di=(i,t)=>i.forEach(t);function $o(i,t,r){if(Pn.arr(i)){for(let l=0;l<i.length;l++)t.call(r,i[l],`${l}`);return}for(const l in i)i.hasOwnProperty(l)&&t.call(r,i[l],l)}const es=i=>Pn.und(i)?[]:Pn.arr(i)?i:[i];function Ua(i,t){if(i.size){const r=Array.from(i);i.clear(),di(r,t)}}const ja=(i,...t)=>Ua(i,r=>r(...t)),Mc=()=>typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let mp,ju,Ol=null,Hc=!1,Hu=Ao;const Kh=i=>{i.to&&(ju=i.to),i.now&&($r.now=i.now),i.colors!==void 0&&(Ol=i.colors),i.skipAnimation!=null&&(Hc=i.skipAnimation),i.createStringInterpolator&&(mp=i.createStringInterpolator),i.requestAnimationFrame&&$r.use(i.requestAnimationFrame),i.batchedUpdates&&($r.batchedUpdates=i.batchedUpdates),i.willAdvance&&(Hu=i.willAdvance),i.frameLoop&&($r.frameLoop=i.frameLoop)};var $s=Object.freeze({__proto__:null,get createStringInterpolator(){return mp},get to(){return ju},get colors(){return Ol},get skipAnimation(){return Hc},get willAdvance(){return Hu},assign:Kh});const Ap=new Set;let Fo=[],nl=[],yp=0;const Dl={get idle(){return!Ap.size&&!Fo.length},start(i){yp>i.priority?(Ap.add(i),$r.onStart(Wc)):(Kd(i),$r(Vu))},advance:Vu,sort(i){if(yp)$r.onFrame(()=>Dl.sort(i));else{const t=Fo.indexOf(i);~t&&(Fo.splice(t,1),Wu(i))}},clear(){Fo=[],Ap.clear()}};function Wc(){Ap.forEach(Kd),Ap.clear(),$r(Vu)}function Kd(i){Fo.includes(i)||Wu(i)}function Wu(i){Fo.splice(vp(Fo,t=>t.priority>i.priority),0,i)}function Vu(i){const t=nl;for(let r=0;r<Fo.length;r++){const l=Fo[r];yp=l.priority,l.idle||(Hu(l),l.advance(i),l.idle||t.push(l))}return yp=0,nl=Fo,nl.length=0,Fo=t,Fo.length>0}function vp(i,t){const r=i.findIndex(t);return r<0?i.length:r}const li=(i,t,r)=>Math.min(Math.max(r,i),t),nu={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ys="[-+]?\\d*\\.?\\d+",Xd=ys+"%";function Xh(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}const _p=new RegExp("rgb"+Xh(ys,ys,ys)),Yd=new RegExp("rgba"+Xh(ys,ys,ys,ys)),rl=new RegExp("hsl"+Xh(ys,Xd,Xd)),rg=new RegExp("hsla"+Xh(ys,Xd,Xd,ys)),ig=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ep=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Yh=/^#([0-9a-fA-F]{6})$/,a1=/^#([0-9a-fA-F]{8})$/;function xm(i){let t;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(t=Yh.exec(i))?parseInt(t[1]+"ff",16)>>>0:Ol&&Ol[i]!==void 0?Ol[i]:(t=_p.exec(i))?(Vc(t[1])<<24|Vc(t[2])<<16|Vc(t[3])<<8|255)>>>0:(t=Yd.exec(i))?(Vc(t[1])<<24|Vc(t[2])<<16|Vc(t[3])<<8|og(t[4]))>>>0:(t=ig.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=a1.exec(i))?parseInt(t[1],16)>>>0:(t=Ep.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=rl.exec(i))?(Pl(ru(t[1]),Jd(t[2]),Jd(t[3]))|255)>>>0:(t=rg.exec(i))?(Pl(ru(t[1]),Jd(t[2]),Jd(t[3]))|og(t[4]))>>>0:null}function xc(i,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?i+(t-i)*6*r:r<1/2?t:r<2/3?i+(t-i)*(2/3-r)*6:i}function Pl(i,t,r){const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l,p=xc(c,l,i+1/3),h=xc(c,l,i),g=xc(c,l,i-1/3);return Math.round(p*255)<<24|Math.round(h*255)<<16|Math.round(g*255)<<8}function Vc(i){const t=parseInt(i,10);return t<0?0:t>255?255:t}function ru(i){return(parseFloat(i)%360+360)%360/360}function og(i){const t=parseFloat(i);return t<0?0:t>1?255:Math.round(t*255)}function Jd(i){const t=parseFloat(i);return t<0?0:t>100?1:t/100}function Jh(i){let t=xm(i);if(t===null)return i;t=t||0;let r=(t&4278190080)>>>24,l=(t&16711680)>>>16,c=(t&65280)>>>8,p=(t&255)/255;return`rgba(${r}, ${l}, ${c}, ${p})`}const iu=(i,t,r)=>{if(Pn.fun(i))return i;if(Pn.arr(i))return iu({range:i,output:t,extrapolate:r});if(Pn.str(i.output[0]))return mp(i);const l=i,c=l.output,p=l.range||[0,1],h=l.extrapolateLeft||l.extrapolate||"extend",g=l.extrapolateRight||l.extrapolate||"extend",v=l.easing||(_=>_);return _=>{const b=Cm(_,p);return tc(_,p[b],p[b+1],c[b],c[b+1],v,h,g,l.map)}};function tc(i,t,r,l,c,p,h,g,v){let _=v?v(i):i;if(_<t){if(h==="identity")return _;h==="clamp"&&(_=t)}if(_>r){if(g==="identity")return _;g==="clamp"&&(_=r)}return l===c?l:t===r?i<=t?l:c:(t===-1/0?_=-_:r===1/0?_=_-t:_=(_-t)/(r-t),_=p(_),l===-1/0?_=-_:c===1/0?_=_+l:_=_*(c-l)+l,_)}function Cm(i,t){for(var r=1;r<t.length-1&&!(t[r]>=i);++r);return r-1}const Qu=(i,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const l=r*i,c=t==="end"?Math.floor(l):Math.ceil(l);return li(0,1,c/i)},Bi=1.70158,ga=Bi*1.525,Ml=Bi+1,qd=2*Math.PI/3,il=2*Math.PI/4.5,Ho=i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,Ku={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>1-(1-i)*(1-i),easeInOutQuad:i=>i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,easeInCubic:i=>i*i*i,easeOutCubic:i=>1-Math.pow(1-i,3),easeInOutCubic:i=>i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,easeInQuart:i=>i*i*i*i,easeOutQuart:i=>1-Math.pow(1-i,4),easeInOutQuart:i=>i<.5?8*i*i*i*i:1-Math.pow(-2*i+2,4)/2,easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>1-Math.pow(1-i,5),easeInOutQuint:i=>i<.5?16*i*i*i*i*i:1-Math.pow(-2*i+2,5)/2,easeInSine:i=>1-Math.cos(i*Math.PI/2),easeOutSine:i=>Math.sin(i*Math.PI/2),easeInOutSine:i=>-(Math.cos(Math.PI*i)-1)/2,easeInExpo:i=>i===0?0:Math.pow(2,10*i-10),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,easeInCirc:i=>1-Math.sqrt(1-Math.pow(i,2)),easeOutCirc:i=>Math.sqrt(1-Math.pow(i-1,2)),easeInOutCirc:i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,easeInBack:i=>Ml*i*i*i-Bi*i*i,easeOutBack:i=>1+Ml*Math.pow(i-1,3)+Bi*Math.pow(i-1,2),easeInOutBack:i=>i<.5?Math.pow(2*i,2)*((ga+1)*2*i-ga)/2:(Math.pow(2*i-2,2)*((ga+1)*(i*2-2)+ga)+2)/2,easeInElastic:i=>i===0?0:i===1?1:-Math.pow(2,10*i-10)*Math.sin((i*10-10.75)*qd),easeOutElastic:i=>i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i*10-.75)*qd)+1,easeInOutElastic:i=>i===0?0:i===1?1:i<.5?-(Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*il))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*il)/2+1,easeInBounce:i=>1-Ho(1-i),easeOutBounce:Ho,easeInOutBounce:i=>i<.5?(1-Ho(1-2*i))/2:(1+Ho(2*i-1))/2,steps:Qu};function qh(){return qh=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=r[l])}return i},qh.apply(this,arguments)}const ws=Symbol.for("FluidValue.get"),ts=Symbol.for("FluidValue.observers"),xl=i=>!!(i&&i[ws]),Ta=i=>i&&i[ws]?i[ws]():i,Ba=i=>i[ts]||null;function Sm(i,t){i.eventObserved?i.eventObserved(t):i(t)}function Ts(i,t){let r=i[ts];r&&r.forEach(l=>{Sm(l,t)})}class Zh{constructor(t){if(this[ws]=void 0,this[ts]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");Ll(this,t)}}const Ll=(i,t)=>fr(i,ws,t);function Cc(i,t){if(i[ws]){let r=i[ts];r||fr(i,ts,r=new Set),r.has(t)||(r.add(t),i.observerAdded&&i.observerAdded(r.size,t))}return t}function ou(i,t){let r=i[ts];if(r&&r.has(t)){const l=r.size-1;l?r.delete(t):i[ts]=null,i.observerRemoved&&i.observerRemoved(l,t)}}const fr=(i,t,r)=>Object.defineProperty(i,t,{value:r,writable:!0,configurable:!0}),ls=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,nc=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,rc=new RegExp(`(${ls.source})(%|[a-z]+)`,"i"),sg=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ea=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,su=i=>{const[t,r]=$h(i);if(!t||Mc())return i;const l=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(l)return l.trim();if(r&&r.startsWith("--")){const c=window.getComputedStyle(document.documentElement).getPropertyValue(r);return c||i}else{if(r&&ea.test(r))return su(r);if(r)return r}return i},$h=i=>{const t=ea.exec(i);if(!t)return[,];const[,r,l]=t;return[r,l]};let ns;const Xu=(i,t,r,l,c)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(l)}, ${c})`,ao=i=>{ns||(ns=Ol?new RegExp(`(${Object.keys(Ol).join("|")})(?!\\w)`,"g"):/^\b$/);const t=i.output.map(p=>Ta(p).replace(ea,su).replace(nc,Jh).replace(ns,Jh)),r=t.map(p=>p.match(ls).map(Number)),c=r[0].map((p,h)=>r.map(g=>{if(!(h in g))throw Error('The arity of each "output" value must be equal');return g[h]})).map(p=>iu(qh({},i,{output:p})));return p=>{var h;const g=!rc.test(t[0])&&((h=t.find(_=>rc.test(_)))==null?void 0:h.replace(ls,""));let v=0;return t[0].replace(ls,()=>`${c[v++](p)}${g||""}`).replace(sg,Xu)}},ic="react-spring: ",wm=i=>{const t=i;let r=!1;if(typeof t!="function")throw new TypeError(`${ic}once requires a function parameter`);return(...l)=>{r||(t(...l),r=!0)}},l1=wm(ng.warn);function ef(){l1(`${ic}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Qc=wm(ng.warn);function c1(){Qc(`${ic}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function er(i){return Pn.str(i)&&(i[0]=="#"||/\d/.test(i)||!Mc()&&ea.test(i)||i in(Ol||{}))}let Kc;const yr=new WeakMap,Tm=i=>i.forEach(({target:t,contentRect:r})=>{var l;return(l=yr.get(t))==null?void 0:l.forEach(c=>c(r))});function p1(i,t){Kc||typeof ResizeObserver!="undefined"&&(Kc=new ResizeObserver(Tm));let r=yr.get(t);return r||(r=new Set,yr.set(t,r)),r.add(i),Kc&&Kc.observe(t),()=>{const l=yr.get(t);l&&(l.delete(i),!l.size&&Kc&&Kc.unobserve(t))}}const vs=new Set;let oc;const bp=()=>{const i=()=>{vs.forEach(t=>t({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},ol=i=>(vs.add(i),oc||(oc=bp()),()=>{vs.delete(i),!vs.size&&oc&&(oc(),oc=void 0)}),Yu=(i,{container:t=document.documentElement}={})=>t===document.documentElement?ol(i):p1(i,t),js=(i,t,r)=>t-i===0?1:(r-i)/(t-i),xi={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class ag{constructor(t,r){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=l=>{const c=this.info[l],{length:p,position:h}=xi[l];c.current=this.container[`scroll${h}`],c.scrollLength=this.container["scroll"+p]-this.container["client"+p],c.progress=js(0,c.scrollLength,c.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=r,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const kl=new WeakMap,au=new WeakMap,Ju=new WeakMap,Mp=i=>i===document.documentElement?window:i,lu=(i,{container:t=document.documentElement}={})=>{let r=Ju.get(t);r||(r=new Set,Ju.set(t,r));const l=new ag(i,t);if(r.add(l),!kl.has(t)){const p=()=>{var g;return(g=r)==null||g.forEach(v=>v.advance()),!0};kl.set(t,p);const h=Mp(t);window.addEventListener("resize",p,{passive:!0}),t!==document.documentElement&&au.set(t,Yu(p,{container:t})),h.addEventListener("scroll",p,{passive:!0})}const c=kl.get(t);return raf(c),()=>{raf.cancel(c);const p=Ju.get(t);if(!p||(p.delete(l),p.size))return;const h=kl.get(t);if(kl.delete(t),h){var g;Mp(t).removeEventListener("scroll",h),window.removeEventListener("resize",h),(g=au.get(t))==null||g()}}};function xp(i){const t=useRef(null);return t.current===null&&(t.current=i()),t.current}const qu=Mc()?d.useEffect:d.useLayoutEffect,tf=()=>{const i=(0,d.useRef)(!1);return qu(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function Zu(){const i=(0,d.useState)()[1],t=tf();return()=>{t.current&&i(Math.random())}}function Zd(i,t){const[r]=(0,d.useState)(()=>({inputs:t,result:i()})),l=(0,d.useRef)(),c=l.current;let p=c;return p?t&&p.inputs&&$d(t,p.inputs)||(p={inputs:t,result:i()}):p=r,(0,d.useEffect)(()=>{l.current=p,c==r&&(r.inputs=r.result=void 0)},[p]),p.result}function $d(i,t){if(i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}const nf=i=>(0,d.useEffect)(i,eh),eh=[];function $u(i){const t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=i}),t.current}const ed=()=>{const[i,t]=useState(null);return qu(()=>{const r=window.matchMedia("(prefers-reduced-motion)"),l=c=>{t(c.matches),Kh({skipAnimation:c.matches})};return l(r),r.addEventListener("change",l),()=>{r.removeEventListener("change",l)}},[]),i},sc=Symbol.for("Animated:node"),Bs=i=>!!i&&i[sc]===i,sl=i=>i&&i[sc],Cp=(i,t)=>ec(i,sc,t),zl=i=>i&&i[sc]&&i[sc].getPayload();class Xc{constructor(){this.payload=void 0,Cp(this,this)}getPayload(){return this.payload||[]}}class _s extends Xc{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,Pn.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new _s(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,r){return Pn.num(t)&&(this.lastPosition=t,r&&(t=Math.round(t/r)*r,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Pn.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class Sp extends _s{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=iu({output:[t,t]})}static create(t){return new Sp(t)}getValue(){let t=this._string;return t==null?this._string=this._toString(this._value):t}setValue(t){if(Pn.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=iu({output:[this.getValue(),t]})),this._value=0,super.reset()}}const th={dependencies:null};class cu extends Xc{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const r={};return $o(this.source,(l,c)=>{Bs(l)?r[c]=l.getValue(t):xl(l)?r[c]=Ta(l):t||(r[c]=l)}),r}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&di(this.payload,t=>t.reset())}_makePayload(t){if(t){const r=new Set;return $o(t,this._addToPayload,r),Array.from(r)}}_addToPayload(t){th.dependencies&&xl(t)&&th.dependencies.add(t);const r=zl(t);r&&di(r,l=>this.add(l))}}class nh extends cu{constructor(t){super(t)}static create(t){return new nh(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const r=this.getPayload();return t.length==r.length?r.map((l,c)=>l.setValue(t[c])).some(Boolean):(super.setValue(t.map(Es)),!0)}}function Es(i){return(er(i)?Sp:_s).create(i)}function Yr(i){const t=sl(i);return t?t.constructor:Pn.arr(i)?nh:er(i)?Sp:_s}function Co(){return Co=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=r[l])}return i},Co.apply(this,arguments)}const Li=(i,t)=>{const r=!Pn.fun(i)||i.prototype&&i.prototype.isReactComponent;return(0,d.forwardRef)((l,c)=>{const p=(0,d.useRef)(null),h=r&&(0,d.useCallback)(G=>{p.current=pu(c,G)},[c]),[g,v]=ta(l,t),_=Zu(),b=()=>{const G=p.current;if(r&&!G)return;(G?t.applyAnimatedValues(G,g.getValue(!0)):!1)===!1&&_()},T=new cs(b,v),R=(0,d.useRef)();qu(()=>(R.current=T,di(v,G=>Cc(G,T)),()=>{R.current&&(di(R.current.deps,G=>ou(G,R.current)),$r.cancel(R.current.update))})),(0,d.useEffect)(b,[]),nf(()=>()=>{const G=R.current;di(G.deps,L=>ou(L,G))});const F=t.getComponentProps(g.getValue());return d.createElement(i,Co({},F,{ref:h}))})};class cs{constructor(t,r){this.update=t,this.deps=r}eventObserved(t){t.type=="change"&&$r.write(this.update)}}function ta(i,t){const r=new Set;return th.dependencies=r,i.style&&(i=Co({},i,{style:t.createAnimatedStyle(i.style)})),i=new cu(i),th.dependencies=null,[i,r]}function pu(i,t){return i&&(Pn.fun(i)?i(t):i.current=t),t}const Wo=Symbol.for("AnimatedComponent"),td=(i,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=c=>new cu(c),getComponentProps:l=c=>c}={})=>{const c={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:l},p=h=>{const g=Yc(h)||"Anonymous";return Pn.str(h)?h=p[h]||(p[h]=Li(h,c)):h=h[Wo]||(h[Wo]=Li(h,c)),h.displayName=`Animated(${g})`,h};return $o(i,(h,g)=>{Pn.arr(i)&&(g=Yc(h)),p[g]=p(h)}),{animated:p}},Yc=i=>Pn.str(i)?i:i&&Pn.str(i.displayName)?i.displayName:Pn.fun(i)&&i.name||null;var rf=A(25108);function ho(){return ho=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=r[l])}return i},ho.apply(this,arguments)}function So(i,...t){return Pn.fun(i)?i(...t):i}const Vo=(i,t)=>i===!0||!!(t&&i&&(Pn.fun(i)?i(t):es(i).includes(t))),uu=(i,t)=>Pn.obj(i)?t&&i[t]:i,du=(i,t)=>i.default===!0?i[t]:i.default?i.default[t]:void 0,hu=i=>i,fu=(i,t=hu)=>{let r=gu;i.default&&i.default!==!0&&(i=i.default,r=Object.keys(i));const l={};for(const c of r){const p=t(i[c],c);Pn.und(p)||(l[c]=p)}return l},gu=["config","onProps","onStart","onChange","onPause","onResume","onRest"],wp={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function of(i){const t={};let r=0;if($o(i,(l,c)=>{wp[c]||(t[c]=l,r++)}),r)return t}function Sc(i){const t=of(i);if(t){const r={to:t};return $o(i,(l,c)=>c in t||(r[c]=l)),r}return ho({},i)}function Tp(i){return i=Ta(i),Pn.arr(i)?i.map(Tp):er(i)?$s.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function nd(i){for(const t in i)return!0;return!1}function rh(i){return Pn.fun(i)||Pn.arr(i)&&Pn.obj(i[0])}function rd(i,t){var r;(r=i.ref)==null||r.delete(i),t==null||t.delete(i)}function id(i,t){if(t&&i.ref!==t){var r;(r=i.ref)==null||r.delete(i),t.add(i),i.ref=t}}function al(i,t,r=1e3){useIsomorphicLayoutEffect(()=>{if(t){let l=0;each(i,(c,p)=>{const h=c.current;if(h.length){let g=r*t[p];isNaN(g)?g=l:l=g,each(h,v=>{each(v.queue,_=>{const b=_.delay;_.delay=T=>g+So(b||0,T)})}),c.start()}})}else{let l=Promise.resolve();each(i,c=>{const p=c.current;if(p.length){const h=p.map(g=>{const v=g.queue;return g.queue=[],v});l=l.then(()=>(each(p,(g,v)=>each(h[v]||[],_=>g.queue.push(_))),Promise.all(c.start())))}})}})}const ll=ho({},{default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}}.default,{mass:1,damping:1,easing:Ku.linear,clamp:!1});class sf{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,ll)}}function cl(i,t,r){r&&(r=ho({},r),lg(r,t),t=ho({},r,t)),lg(i,t),Object.assign(i,t);for(const h in ll)i[h]==null&&(i[h]=ll[h]);let{mass:l,frequency:c,damping:p}=i;return Pn.und(c)||(c<.01&&(c=.01),p<0&&(p=0),i.tension=Math.pow(2*Math.PI/c,2)*l,i.friction=4*Math.PI*p*l/c),i}function lg(i,t){if(!Pn.und(t.decay))i.duration=void 0;else{const r=!Pn.und(t.tension)||!Pn.und(t.friction);(r||!Pn.und(t.frequency)||!Pn.und(t.damping)||!Pn.und(t.mass))&&(i.duration=void 0,i.decay=void 0),r&&(i.frequency=void 0)}}const af=[];class cg{constructor(){this.changed=!1,this.values=af,this.toValues=null,this.fromValues=af,this.to=void 0,this.from=void 0,this.config=new sf,this.immediate=!1}}function Bm(i,{key:t,props:r,defaultProps:l,state:c,actions:p}){return new Promise((h,g)=>{var v;let _,b,T=Vo((v=r.cancel)!=null?v:l==null?void 0:l.cancel,t);if(T)G();else{Pn.und(r.pause)||(c.paused=Vo(r.pause,t));let L=l==null?void 0:l.pause;L!==!0&&(L=c.paused||Vo(L,t)),_=So(r.delay||0,t),L?(c.resumeQueue.add(F),p.pause()):(p.resume(),F())}function R(){c.resumeQueue.add(F),c.timeouts.delete(b),b.cancel(),_=b.time-$r.now()}function F(){_>0&&!$s.skipAnimation?(c.delayed=!0,b=$r.setTimeout(G,_),c.pauseQueue.add(R),c.timeouts.add(b)):G()}function G(){c.delayed&&(c.delayed=!1),c.pauseQueue.delete(R),c.timeouts.delete(b),i<=(c.cancelId||0)&&(T=!0);try{p.start(ho({},r,{callId:i,cancel:T}),h)}catch(L){g(L)}}})}const wc=(i,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?Bp(i.get()):t.every(r=>r.noop)?pg(i.get()):Gl(i.get(),t.every(r=>r.finished)),pg=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),Gl=(i,t,r=!1)=>({value:i,finished:t,cancelled:r}),Bp=i=>({value:i,cancelled:!0,finished:!1});function Rp(i,t,r,l){const{callId:c,parentId:p,onRest:h}=t,{asyncTo:g,promise:v}=r;return!p&&i===g&&!t.reset?v:r.promise=(()=>ss(this,null,function*(){r.asyncId=c,r.asyncTo=i;const _=fu(t,(O,k)=>k==="onRest"?void 0:O);let b,T;const R=new Promise((O,k)=>(b=O,T=k)),F=O=>{const k=c<=(r.cancelId||0)&&Bp(l)||c!==r.asyncId&&Gl(l,!1);if(k)throw O.result=k,T(O),O},G=(O,k)=>{const P=new ug,z=new lf;return(()=>ss(this,null,function*(){if($s.skipAnimation)throw od(r),z.result=Gl(l,!1),T(z),z;F(P);const j=Pn.obj(O)?ho({},O):ho({},k,{to:O});j.parentId=c,$o(_,(W,Y)=>{Pn.und(j[Y])&&(j[Y]=W)});const Q=yield l.start(j);return F(P),r.paused&&(yield new Promise(W=>{r.resumeQueue.add(W)})),Q}))()};let L;if($s.skipAnimation)return od(r),Gl(l,!1);try{let O;Pn.arr(i)?O=(k=>ss(this,null,function*(){for(const P of k)yield G(P)}))(i):O=Promise.resolve(i(G,l.stop.bind(l))),yield Promise.all([O.then(b),R]),L=Gl(l.get(),!0,!1)}catch(O){if(O instanceof ug)L=O.result;else if(O instanceof lf)L=O.result;else throw O}finally{c==r.asyncId&&(r.asyncId=p,r.asyncTo=p?g:void 0,r.promise=p?v:void 0)}return Pn.fun(h)&&$r.batchedUpdates(()=>{h(L,l,l.item)}),L}))()}function od(i,t){Ua(i.timeouts,r=>r.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,t&&(i.cancelId=t)}class ug extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class lf extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const sd=i=>i instanceof dg;let u1=1;class dg extends Zh{constructor(...t){super(...t),this.id=u1++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=sl(this);return t&&t.getValue()}to(...t){return $s.to(this,t)}interpolate(...t){return ef(),$s.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,r=!1){Ts(this,{type:"change",parent:this,value:t,idle:r})}_onPriorityChange(t){this.idle||Dl.sort(this),Ts(this,{type:"priority",parent:this,priority:t})}}const Ip=Symbol.for("SpringPhase"),hg=1,Jc=2,fg=4,qc=i=>(i[Ip]&hg)>0,Zc=i=>(i[Ip]&Jc)>0,na=i=>(i[Ip]&fg)>0,Rm=(i,t)=>t?i[Ip]|=Jc|hg:i[Ip]&=~Jc,gg=(i,t)=>t?i[Ip]|=fg:i[Ip]&=~fg;class Im extends dg{constructor(t,r){if(super(),this.key=void 0,this.animation=new cg,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Pn.und(t)||!Pn.und(r)){const l=Pn.obj(t)?ho({},t):ho({},r,{from:t});Pn.und(l.default)&&(l.default=!0),this.start(l)}}get idle(){return!(Zc(this)||this._state.asyncTo)||na(this)}get goal(){return Ta(this.animation.to)}get velocity(){const t=sl(this);return t instanceof _s?t.lastVelocity||0:t.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return qc(this)}get isAnimating(){return Zc(this)}get isPaused(){return na(this)}get isDelayed(){return this._state.delayed}advance(t){let r=!0,l=!1;const c=this.animation;let{config:p,toValues:h}=c;const g=zl(c.to);!g&&xl(c.to)&&(h=es(Ta(c.to))),c.values.forEach((b,T)=>{if(b.done)return;const R=b.constructor==Sp?1:g?g[T].lastPosition:h[T];let F=c.immediate,G=R;if(!F){if(G=b.lastPosition,p.tension<=0){b.done=!0;return}let L=b.elapsedTime+=t;const O=c.fromValues[T],k=b.v0!=null?b.v0:b.v0=Pn.arr(p.velocity)?p.velocity[T]:p.velocity;let P;const z=p.precision||(O==R?.005:Math.min(1,Math.abs(R-O)*.001));if(Pn.und(p.duration))if(p.decay){const j=p.decay===!0?.998:p.decay,Q=Math.exp(-(1-j)*L);G=O+k/(1-j)*(1-Q),F=Math.abs(b.lastPosition-G)<=z,P=k*Q}else{P=b.lastVelocity==null?k:b.lastVelocity;const j=p.restVelocity||z/10,Q=p.clamp?0:p.bounce,W=!Pn.und(Q),Y=O==R?b.v0>0:O<R;let K,se=!1;const ce=1,ge=Math.ceil(t/ce);for(let le=0;le<ge&&(K=Math.abs(P)>j,!(!K&&(F=Math.abs(R-G)<=z,F)));++le){W&&(se=G==R||G>R==Y,se&&(P=-P*Q,G=R));const xe=-p.tension*1e-6*(G-R),me=-p.friction*.001*P,Be=(xe+me)/p.mass;P=P+Be*ce,G=G+P*ce}}else{let j=1;p.duration>0&&(this._memoizedDuration!==p.duration&&(this._memoizedDuration=p.duration,b.durationProgress>0&&(b.elapsedTime=p.duration*b.durationProgress,L=b.elapsedTime+=t)),j=(p.progress||0)+L/this._memoizedDuration,j=j>1?1:j<0?0:j,b.durationProgress=j),G=O+p.easing(j)*(R-O),P=(G-b.lastPosition)/t,F=j==1}b.lastVelocity=P,Number.isNaN(G)&&(rf.warn("Got NaN while animating:",this),F=!0)}g&&!g[T].done&&(F=!1),F?b.done=!0:r=!1,b.setValue(G,p.round)&&(l=!0)});const v=sl(this),_=v.getValue();if(r){const b=Ta(c.to);(_!==b||l)&&!p.decay?(v.setValue(b),this._onChange(b)):l&&p.decay&&this._onChange(_),this._stop()}else l&&this._onChange(_)}set(t){return $r.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Zc(this)){const{to:t,config:r}=this.animation;$r.batchedUpdates(()=>{this._onStart(),r.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,r){let l;return Pn.und(t)?(l=this.queue||[],this.queue=[]):l=[Pn.obj(t)?t:ho({},r,{to:t})],Promise.all(l.map(c=>this._update(c))).then(c=>wc(this,c))}stop(t){const{to:r}=this.animation;return this._focus(this.get()),od(this._state,t&&this._lastCallId),$r.batchedUpdates(()=>this._stop(r,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const r=this.key||"";let{to:l,from:c}=t;l=Pn.obj(l)?l[r]:l,(l==null||rh(l))&&(l=void 0),c=Pn.obj(c)?c[r]:c,c==null&&(c=void 0);const p={to:l,from:c};return qc(this)||(t.reverse&&([l,c]=[c,l]),c=Ta(c),Pn.und(c)?sl(this)||this._set(l):this._set(c)),p}_update(t,r){let l=ho({},t);const{key:c,defaultProps:p}=this;l.default&&Object.assign(p,fu(l,(v,_)=>/^on/.test(_)?uu(v,c):v)),Fm(this,l,"onProps"),Nl(this,"onProps",l,this);const h=this._prepareNode(l);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const g=this._state;return Bm(++this._lastCallId,{key:c,props:l,defaultProps:p,state:g,actions:{pause:()=>{na(this)||(gg(this,!0),ja(g.pauseQueue),Nl(this,"onPause",Gl(this,ih(this,this.animation.to)),this))},resume:()=>{na(this)&&(gg(this,!1),Zc(this)&&this._resume(),ja(g.resumeQueue),Nl(this,"onResume",Gl(this,ih(this,this.animation.to)),this))},start:this._merge.bind(this,h)}}).then(v=>{if(l.loop&&v.finished&&!(r&&v.noop)){const _=mg(l);if(_)return this._update(_,!0)}return v})}_merge(t,r,l){if(r.cancel)return this.stop(!0),l(Bp(this));const c=!Pn.und(t.to),p=!Pn.und(t.from);if(c||p)if(r.callId>this._lastToId)this._lastToId=r.callId;else return l(Bp(this));const{key:h,defaultProps:g,animation:v}=this,{to:_,from:b}=v;let{to:T=_,from:R=b}=t;p&&!c&&(!r.default||Pn.und(T))&&(T=R),r.reverse&&([T,R]=[R,T]);const F=!wa(R,b);F&&(v.from=R),R=Ta(R);const G=!wa(T,_);G&&this._focus(T);const L=rh(r.to),{config:O}=v,{decay:k,velocity:P}=O;(c||p)&&(O.velocity=0),r.config&&!L&&cl(O,So(r.config,h),r.config!==g.config?So(g.config,h):void 0);let z=sl(this);if(!z||Pn.und(T))return l(Gl(this,!0));const j=Pn.und(r.reset)?p&&!r.default:!Pn.und(R)&&Vo(r.reset,h),Q=j?R:this.get(),W=Tp(T),Y=Pn.num(W)||Pn.arr(W)||er(W),K=!L&&(!Y||Vo(g.immediate||r.immediate,h));if(G){const le=Yr(T);if(le!==z.constructor)if(K)z=this._set(W);else throw Error(`Cannot animate between ${z.constructor.name} and ${le.name}, as the "to" prop suggests`)}const se=z.constructor;let ce=xl(T),ge=!1;if(!ce){const le=j||!qc(this)&&F;(G||le)&&(ge=wa(Tp(Q),W),ce=!ge),(!wa(v.immediate,K)&&!K||!wa(O.decay,k)||!wa(O.velocity,P))&&(ce=!0)}if(ge&&Zc(this)&&(v.changed&&!j?ce=!0:ce||this._stop(_)),!L&&((ce||xl(_))&&(v.values=z.getPayload(),v.toValues=xl(T)?null:se==Sp?[1]:es(W)),v.immediate!=K&&(v.immediate=K,!K&&!j&&this._set(_)),ce)){const{onRest:le}=v;di(Ag,me=>Fm(this,r,me));const xe=Gl(this,ih(this,_));ja(this._pendingCalls,xe),this._pendingCalls.add(l),v.changed&&$r.batchedUpdates(()=>{v.changed=!j,le==null||le(xe,this),j?So(g.onRest,xe):v.onStart==null||v.onStart(xe,this)})}j&&this._set(Q),L?l(Rp(r.to,r,this._state,this)):ce?this._start():Zc(this)&&!G?this._pendingCalls.add(l):l(pg(Q))}_focus(t){const r=this.animation;t!==r.to&&(Ba(this)&&this._detach(),r.to=t,Ba(this)&&this._attach())}_attach(){let t=0;const{to:r}=this.animation;xl(r)&&(Cc(r,this),sd(r)&&(t=r.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;xl(t)&&ou(t,this)}_set(t,r=!0){const l=Ta(t);if(!Pn.und(l)){const c=sl(this);if(!c||!wa(l,c.getValue())){const p=Yr(l);!c||c.constructor!=p?Cp(this,p.create(l)):c.setValue(l),c&&$r.batchedUpdates(()=>{this._onChange(l,r)})}}return sl(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Nl(this,"onStart",Gl(this,ih(this,t.to)),this))}_onChange(t,r){r||(this._onStart(),So(this.animation.onChange,t,this)),So(this.defaultProps.onChange,t,this),super._onChange(t,r)}_start(){const t=this.animation;sl(this).reset(Ta(t.to)),t.immediate||(t.fromValues=t.values.map(r=>r.lastPosition)),Zc(this)||(Rm(this,!0),na(this)||this._resume())}_resume(){$s.skipAnimation?this.finish():Dl.start(this)}_stop(t,r){if(Zc(this)){Rm(this,!1);const l=this.animation;di(l.values,p=>{p.done=!0}),l.toValues&&(l.onChange=l.onPause=l.onResume=void 0),Ts(this,{type:"idle",parent:this});const c=r?Bp(this.get()):Gl(this.get(),ih(this,t!=null?t:l.to));ja(this._pendingCalls,c),l.changed&&(l.changed=!1,Nl(this,"onRest",c,this))}}}function ih(i,t){const r=Tp(t),l=Tp(i.get());return wa(l,r)}function mg(i,t=i.loop,r=i.to){let l=So(t);if(l){const c=l!==!0&&Sc(l),p=(c||i).reverse,h=!c||c.reset;return ad(ho({},i,{loop:t,default:!1,pause:void 0,to:!p||rh(r)?r:void 0,from:h?i.from:void 0,reset:h},c))}}function ad(i){const{to:t,from:r}=i=Sc(i),l=new Set;return Pn.obj(t)&&Cl(t,l),Pn.obj(r)&&Cl(r,l),i.keys=l.size?Array.from(l):null,i}function d1(i){const t=ad(i);return Pn.und(t.default)&&(t.default=fu(t)),t}function Cl(i,t){$o(i,(r,l)=>r!=null&&t.add(l))}const Ag=["onStart","onRest","onChange","onPause","onResume"];function Fm(i,t,r){i.animation[r]=t[r]!==du(t,r)?uu(t[r],i.key):void 0}function Nl(i,t,...r){var l,c,p,h;(l=(c=i.animation)[t])==null||l.call(c,...r),(p=(h=i.defaultProps)[t])==null||p.call(h,...r)}const cf=["onStart","onChange","onRest"];let Au=1;class oh{constructor(t,r){this.id=Au++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),r&&(this._flush=r),t&&this.start(ho({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((r,l)=>t[l]=r.get()),t}set(t){for(const r in t){const l=t[r];Pn.und(l)||this.springs[r].set(l)}}update(t){return t&&this.queue.push(ad(t)),this}start(t){let{queue:r}=this;return t?r=es(t).map(ad):this.queue=[],this._flush?this._flush(this,r):(bg(this,r),sh(this,r))}stop(t,r){if(t!==!!t&&(r=t),r){const l=this.springs;di(es(r),c=>l[c].stop(!!t))}else od(this._state,this._lastAsyncId),this.each(l=>l.stop(!!t));return this}pause(t){if(Pn.und(t))this.start({pause:!0});else{const r=this.springs;di(es(t),l=>r[l].pause())}return this}resume(t){if(Pn.und(t))this.start({pause:!1});else{const r=this.springs;di(es(t),l=>r[l].resume())}return this}each(t){$o(this.springs,t)}_onFrame(){const{onStart:t,onChange:r,onRest:l}=this._events,c=this._active.size>0,p=this._changed.size>0;(c&&!this._started||p&&!this._started)&&(this._started=!0,Ua(t,([v,_])=>{_.value=this.get(),v(_,this,this._item)}));const h=!c&&this._started,g=p||h&&l.size?this.get():null;p&&r.size&&Ua(r,([v,_])=>{_.value=g,v(_,this,this._item)}),h&&(this._started=!1,Ua(l,([v,_])=>{_.value=g,v(_,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;$r.onFrame(this._onFrame)}}function sh(i,t){return Promise.all(t.map(r=>pf(i,r))).then(r=>wc(i,r))}function pf(i,t,r){return ss(this,null,function*(){const{keys:l,to:c,from:p,loop:h,onRest:g,onResolve:v}=t,_=Pn.obj(t.default)&&t.default;h&&(t.loop=!1),c===!1&&(t.to=null),p===!1&&(t.from=null);const b=Pn.arr(c)||Pn.fun(c)?c:void 0;b?(t.to=void 0,t.onRest=void 0,_&&(_.onRest=void 0)):di(cf,L=>{const O=t[L];if(Pn.fun(O)){const k=i._events[L];t[L]=({finished:P,cancelled:z})=>{const j=k.get(O);j?(P||(j.finished=!1),z&&(j.cancelled=!0)):k.set(O,{value:null,finished:P||!1,cancelled:z||!1})},_&&(_[L]=t[L])}});const T=i._state;t.pause===!T.paused?(T.paused=t.pause,ja(t.pause?T.pauseQueue:T.resumeQueue)):T.paused&&(t.pause=!0);const R=(l||Object.keys(i.springs)).map(L=>i.springs[L].start(t)),F=t.cancel===!0||du(t,"cancel")===!0;(b||F&&T.asyncId)&&R.push(Bm(++i._lastAsyncId,{props:t,state:T,actions:{pause:Ao,resume:Ao,start(L,O){F?(od(T,i._lastAsyncId),O(Bp(i))):(L.onRest=g,O(Rp(b,L,T,i)))}}})),T.paused&&(yield new Promise(L=>{T.resumeQueue.add(L)}));const G=wc(i,yield Promise.all(R));if(h&&G.finished&&!(r&&G.noop)){const L=mg(t,h,c);if(L)return bg(i,[L]),pf(i,L,!0)}return v&&$r.batchedUpdates(()=>v(G,i,i.item)),G})}function yg(i,t){const r=ho({},i.springs);return t&&di(es(t),l=>{Pn.und(l.keys)&&(l=ad(l)),Pn.obj(l.to)||(l=ho({},l,{to:void 0})),Eg(r,l,c=>_g(c))}),vg(i,r),r}function vg(i,t){$o(t,(r,l)=>{i.springs[l]||(i.springs[l]=r,Cc(r,i))})}function _g(i,t){const r=new Im;return r.key=i,t&&Cc(r,t),r}function Eg(i,t,r){t.keys&&di(t.keys,l=>{(i[l]||(i[l]=r(l)))._prepareNode(t)})}function bg(i,t){di(t,r=>{Eg(i.springs,r,l=>_g(l,i))})}function Tc(i,t){if(i==null)return{};var r={},l=Object.keys(i),c,p;for(p=0;p<l.length;p++)c=l[p],!(t.indexOf(c)>=0)&&(r[c]=i[c]);return r}const h1=["children"],ah=i=>{let{children:t}=i,r=Tc(i,h1);const l=(0,d.useContext)(x),c=r.pause||!!l.pause,p=r.immediate||!!l.immediate;r=Zd(()=>({pause:c,immediate:p}),[c,p]);const{Provider:h}=x;return d.createElement(h,{value:r},t)},x=S(ah,{});ah.Provider=x.Provider,ah.Consumer=x.Consumer;function S(i,t){return Object.assign(i,d.createContext(t)),i.Provider._context=i,i.Consumer._context=i,i}const N=()=>{const i=[],t=function(c){c1();const p=[];return di(i,(h,g)=>{if(Pn.und(c))p.push(h.start());else{const v=r(c,h,g);v&&p.push(h.start(v))}}),p};t.current=i,t.add=function(l){i.includes(l)||i.push(l)},t.delete=function(l){const c=i.indexOf(l);~c&&i.splice(c,1)},t.pause=function(){return di(i,l=>l.pause(...arguments)),this},t.resume=function(){return di(i,l=>l.resume(...arguments)),this},t.set=function(l){di(i,c=>c.set(l))},t.start=function(l){const c=[];return di(i,(p,h)=>{if(Pn.und(l))c.push(p.start());else{const g=this._getProps(l,p,h);g&&c.push(p.start(g))}}),c},t.stop=function(){return di(i,l=>l.stop(...arguments)),this},t.update=function(l){return di(i,(c,p)=>c.update(this._getProps(l,c,p))),this};const r=function(c,p,h){return Pn.fun(c)?c(h,p):c};return t._getProps=r,t};function V(i,t,r){const l=Pn.fun(t)&&t;l&&!r&&(r=[]);const c=(0,d.useMemo)(()=>l||arguments.length==3?N():void 0,[]),p=(0,d.useRef)(0),h=Zu(),g=(0,d.useMemo)(()=>({ctrls:[],queue:[],flush(k,P){const z=yg(k,P);return p.current>0&&!g.queue.length&&!Object.keys(z).some(Q=>!k.springs[Q])?sh(k,P):new Promise(Q=>{vg(k,z),g.queue.push(()=>{Q(sh(k,P))}),h()})}}),[]),v=(0,d.useRef)([...g.ctrls]),_=[],b=$u(i)||0;(0,d.useMemo)(()=>{di(v.current.slice(i,b),k=>{rd(k,c),k.stop(!0)}),v.current.length=i,T(b,i)},[i]),(0,d.useMemo)(()=>{T(0,Math.min(b,i))},r);function T(k,P){for(let z=k;z<P;z++){const j=v.current[z]||(v.current[z]=new oh(null,g.flush)),Q=l?l(z,j):t[z];Q&&(_[z]=d1(Q))}}const R=v.current.map((k,P)=>yg(k,_[P])),F=(0,d.useContext)(ah),G=$u(F),L=F!==G&&nd(F);qu(()=>{p.current++,g.ctrls=v.current;const{queue:k}=g;k.length&&(g.queue=[],di(k,P=>P())),di(v.current,(P,z)=>{c==null||c.add(P),L&&P.start({default:F});const j=_[z];j&&(id(P,j.ref),P.ref?P.queue.push(j):P.start(j))})}),nf(()=>()=>{di(g.ctrls,k=>k.stop(!0))});const O=R.map(k=>ho({},k));return c?[O,c]:O}function ne(i,t){const r=Pn.fun(i),[[l],c]=V(1,r?i:[i],r?t||[]:t);return r||arguments.length==2?[l,c]:l}const de=()=>N(),Je=()=>useState(de)[0],Et=(i,t)=>{const r=useConstant(()=>new Im(i,t));return useOnce(()=>()=>{r.stop()}),r};function $t(i,t,r){const l=is.fun(t)&&t;l&&!r&&(r=[]);let c=!0,p;const h=V(i,(v,_)=>{const b=l?l(v,_):t;return p=b.ref,c=c&&b.reverse,b},r||[{}]);if(useIsomorphicLayoutEffect(()=>{each(h[1].current,(v,_)=>{const b=h[1].current[_+(c?1:-1)];if(id(v,p),v.ref){b&&v.update({to:b.springs});return}b?v.start({to:b.springs}):v.start()})},r),l||arguments.length==3){var g;const v=(g=p)!=null?g:h[1];return v._getProps=(_,b,T)=>{const R=is.fun(_)?_(T,b):_;if(R){const F=v.current[T+(R.reverse?1:-1)];return F&&(R.to=F.springs),R}},h}return h[0]}let En;(function(i){i.MOUNT="mount",i.ENTER="enter",i.UPDATE="update",i.LEAVE="leave"})(En||(En={}));function vr(i,t,r){const l=is.fun(t)&&t,{reset:c,sort:p,trail:h=0,expires:g=!0,exitBeforeEnter:v=!1,onDestroyed:_,ref:b,config:T}=l?l():t,R=useMemo(()=>l||arguments.length==3?N():void 0,[]),F=toArray(i),G=[],L=useRef(null),O=c?null:L.current;useIsomorphicLayoutEffect(()=>{L.current=G}),useOnce(()=>(each(G,me=>{R==null||R.add(me.ctrl),me.ctrl.ref=R}),()=>{each(L.current,me=>{me.expired&&clearTimeout(me.expirationId),rd(me.ctrl,R),me.ctrl.stop(!0)})}));const k=Vr(F,l?l():t,O),P=c&&L.current||[];useIsomorphicLayoutEffect(()=>each(P,({ctrl:me,item:Be,key:ke})=>{rd(me,R),So(_,Be,ke)}));const z=[];if(O&&each(O,(me,Be)=>{me.expired?(clearTimeout(me.expirationId),P.push(me)):(Be=z[Be]=k.indexOf(me.key),~Be&&(G[Be]=me))}),each(F,(me,Be)=>{G[Be]||(G[Be]={key:k[Be],item:me,phase:En.MOUNT,ctrl:new oh},G[Be].ctrl.item=me)}),z.length){let me=-1;const{leave:Be}=l?l():t;each(z,(ke,Re)=>{const ze=O[Re];~ke?(me=G.indexOf(ze),G[me]=ho({},ze,{item:F[ke]})):Be&&G.splice(++me,0,ze)})}is.fun(p)&&G.sort((me,Be)=>p(me.item,Be.item));let j=-h;const Q=useForceUpdate(),W=fu(t),Y=new Map,K=useRef(new Map),se=useRef(!1);each(G,(me,Be)=>{const ke=me.key,Re=me.phase,ze=l?l():t;let Pe,Ye,Ce=So(ze.delay||0,ke);if(Re==En.MOUNT)Pe=ze.enter,Ye=En.ENTER;else{const Ae=k.indexOf(ke)<0;if(Re!=En.LEAVE)if(Ae)Pe=ze.leave,Ye=En.LEAVE;else if(Pe=ze.update)Ye=En.UPDATE;else return;else if(!Ae)Pe=ze.enter,Ye=En.ENTER;else return}if(Pe=So(Pe,me.item,Be),Pe=is.obj(Pe)?Sc(Pe):{to:Pe},!Pe.config){const Ae=T||W.config;Pe.config=So(Ae,me.item,Be,Ye)}j+=h;const Ee=ho({},W,{delay:Ce+j,ref:b,immediate:ze.immediate,reset:!1},Pe);if(Ye==En.ENTER&&is.und(Ee.from)){const Ae=l?l():t,Te=is.und(Ae.initial)||O?Ae.from:Ae.initial;Ee.from=So(Te,me.item,Be)}const{onResolve:_e}=Ee;Ee.onResolve=Ae=>{So(_e,Ae);const Te=L.current,ve=Te.find(Ge=>Ge.key===ke);if(ve&&!(Ae.cancelled&&ve.phase!=En.UPDATE)&&ve.ctrl.idle){const Ge=Te.every(bt=>bt.ctrl.idle);if(ve.phase==En.LEAVE){const bt=So(g,ve.item);if(bt!==!1){const mt=bt===!0?0:bt;if(ve.expired=!0,!Ge&&mt>0){mt<=2147483647&&(ve.expirationId=setTimeout(Q,mt));return}}}Ge&&Te.some(bt=>bt.expired)&&(K.current.delete(ve),v&&(se.current=!0),Q())}};const oe=yg(me.ctrl,Ee);Ye===En.LEAVE&&v?K.current.set(me,{phase:Ye,springs:oe,payload:Ee}):Y.set(me,{phase:Ye,springs:oe,payload:Ee})});const ce=useContext(ah),ge=usePrev(ce),le=ce!==ge&&nd(ce);useIsomorphicLayoutEffect(()=>{le&&each(G,me=>{me.ctrl.start({default:ce})})},[ce]),each(Y,(me,Be)=>{if(K.current.size){const ke=G.findIndex(Re=>Re.key===Be.key);G.splice(ke,1)}}),useIsomorphicLayoutEffect(()=>{each(K.current.size?K.current:Y,({phase:me,payload:Be},ke)=>{const{ctrl:Re}=ke;ke.phase=me,R==null||R.add(Re),le&&me==En.ENTER&&Re.start({default:ce}),Be&&(id(Re,Be.ref),(Re.ref||R)&&!se.current?Re.update(Be):(Re.start(Be),se.current&&(se.current=!1)))})},c?void 0:r);const xe=me=>React.createElement(React.Fragment,null,G.map((Be,ke)=>{const{springs:Re}=Y.get(Be)||Be.ctrl,ze=me(ho({},Re),Be.item,Be,ke);return ze&&ze.type?React.createElement(ze.type,ho({},ze.props,{key:is.str(Be.key)||is.num(Be.key)?Be.key:Be.ctrl.id,ref:ze.ref})):ze}));return R?[xe,R]:xe}let hi=1;function Vr(i,{key:t,keys:r=t},l){if(r===null){const c=new Set;return i.map(p=>{const h=l&&l.find(g=>g.item===p&&g.phase!==En.LEAVE&&!c.has(g));return h?(c.add(h),h.key):hi++})}return is.und(r)?i:is.fun(r)?i.map(r):toArray(r)}const yo=null,Lr=(i={})=>{let{container:t}=i,r=Tc(i,yo);const[l,c]=ne(()=>ho({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onScroll(({x:h,y:g})=>{c.start({scrollX:h.current,scrollXProgress:h.progress,scrollY:g.current,scrollYProgress:g.progress})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(l),h=>h.stop()),p()}},[]),l},Ra=null,ac=i=>{let{container:t}=i,r=Tc(i,Ra);const[l,c]=ne(()=>ho({width:0,height:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onResize(({width:h,height:g})=>{c.start({width:h,height:g,immediate:l.width.get()===0||l.height.get()===0})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(l),h=>h.stop()),p()}},[]),l},Ot=null,xt=null,Ht={any:0,all:1};function dr(i,t){const[r,l]=useState(!1),c=useRef(),p=is.fun(i)&&i,h=p?p():{},{to:g={},from:v={}}=h,_=Tc(h,Ot),b=p?t:i,[T,R]=ne(()=>ho({from:v},_),[]);return useIsomorphicLayoutEffect(()=>{const F=c.current,G=b!=null?b:{},{root:L,once:O,amount:k="any"}=G,P=Tc(G,xt);if(!F||O&&r||typeof IntersectionObserver=="undefined")return;const z=new WeakMap,j=()=>(g&&R.start(g),l(!0),O?void 0:()=>{v&&R.start(v),l(!1)}),Q=Y=>{Y.forEach(K=>{const se=z.get(K.target);if(K.isIntersecting!==!!se)if(K.isIntersecting){const ce=j();is.fun(ce)?z.set(K.target,ce):W.unobserve(K.target)}else se&&(se(),z.delete(K.target))})},W=new IntersectionObserver(Q,ho({root:L&&L.current||void 0,threshold:typeof k=="number"||Array.isArray(k)?k:Ht[k]},P));return W.observe(F),()=>W.unobserve(F)},[b]),p?[c,T]:[c,r]}const Fr=null;function Ri(i){let{children:t}=i,r=Tc(i,Fr);return t(ne(r))}const fi=null;function io(i){let{items:t,children:r}=i,l=Tc(i,fi);const c=$t(t.length,l);return t.map((p,h)=>{const g=r(p,h);return is.fun(g)?g(c[h]):g})}const ra=null;function oo(i){let{items:t,children:r}=i,l=Tc(i,ra);return vr(t,l)(r)}class Bc extends dg{constructor(t,r){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=iu(...r);const l=this._get(),c=Yr(l);Cp(this,c.create(l))}advance(t){const r=this._get(),l=this.get();wa(r,l)||(sl(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&ty(this._active)&&g1(this)}_get(){const t=Pn.arr(this.source)?this.source.map(Ta):es(Ta(this.source));return this.calc(...t)}_start(){this.idle&&!ty(this._active)&&(this.idle=!1,di(zl(this),t=>{t.done=!1}),$s.skipAnimation?($r.batchedUpdates(()=>this.advance()),g1(this)):Dl.start(this))}_attach(){let t=1;di(es(this.source),r=>{xl(r)&&Cc(r,this),sd(r)&&(r.idle||this._active.add(r),t=Math.max(t,r.priority+1))}),this.priority=t,this._start()}_detach(){di(es(this.source),t=>{xl(t)&&ou(t,this)}),this._active.clear(),g1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=es(this.source).reduce((r,l)=>Math.max(r,(sd(l)?l.priority:0)+1),0))}}function f1(i){return i.idle!==!1}function ty(i){return!i.size||Array.from(i).every(f1)}function g1(i){i.idle||(i.idle=!0,di(zl(i),t=>{t.done=!0}),Ts(i,{type:"idle",parent:i}))}const Wb=(i,...t)=>new Bc(i,t),Vb=(i,...t)=>(deprecateInterpolate(),new Bc(i,t));$s.assign({createStringInterpolator:ao,to:(i,t)=>new Bc(i,t)});const Qb=Dl.advance,l_=["primitive"].concat(Object.keys(s).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));$s.assign({createStringInterpolator:ao,colors:nu,frameLoop:"demand"}),(0,E.n)(()=>{$r.advance()});const c_=td(l_,{applyAnimatedValues:E.j}).animated;function p_(i,t,r){return Math.max(t,Math.min(i,r))}const rs={toVector(i,t){return i===void 0&&(i=t),Array.isArray(i)?i:[i,i]},add(i,t){return[i[0]+t[0],i[1]+t[1]]},sub(i,t){return[i[0]-t[0],i[1]-t[1]]},addTo(i,t){i[0]+=t[0],i[1]+=t[1]},subTo(i,t){i[0]-=t[0],i[1]-=t[1]}};function ny(i,t,r){return t===0||Math.abs(t)===1/0?Math.pow(i,r*5):i*t*r/(t+r*i)}function ry(i,t,r,l=.15){return l===0?p_(i,t,r):i<t?-ny(t-i,r-t,l)+t:i>r?+ny(i-r,r-t,l)+r:i}function u_(i,[t,r],[l,c]){const[[p,h],[g,v]]=i;return[ry(t,p,h,l),ry(r,g,v,c)]}function d_(i,t){if(typeof i!="object"||i===null)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,t||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function h_(i){var t=d_(i,"string");return typeof t=="symbol"?t:String(t)}function ia(i,t,r){return t=h_(t),t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function iy(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),r.push.apply(r,l)}return r}function Rs(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iy(Object(r),!0).forEach(function(l){ia(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):iy(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}const f_={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function g_(i){return i?i[0].toUpperCase()+i.slice(1):""}const Xb=["enter","leave"];function Yb(i=!1,t){return i&&!Xb.includes(t)}function Jb(i,t="",r=!1){const l=f_[i],c=l&&l[t]||t;return"on"+g_(i)+g_(c)+(Yb(r,c)?"Capture":"")}const qb=["gotpointercapture","lostpointercapture"];function Zb(i){let t=i.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const l=qb.includes(t)?"capturecapture":"capture",c=!!~t.indexOf(l);return c&&(t=t.replace("capture","")),{device:t,capture:c,passive:r}}function $b(i,t=""){const r=f_[i],l=r&&r[t]||t;return i+l}function m1(i){return"touches"in i}function m_(i){return m1(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function eM(i){return Array.from(i.touches).filter(t=>{var r,l;return t.target===i.currentTarget||((r=i.currentTarget)===null||r===void 0||(l=r.contains)===null||l===void 0?void 0:l.call(r,t.target))})}function tM(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function A_(i){return m1(i)?tM(i)[0]:i}function oy(i,t){try{const r=t.clientX-i.clientX,l=t.clientY-i.clientY,c=(t.clientX+i.clientX)/2,p=(t.clientY+i.clientY)/2,h=Math.hypot(r,l);return{angle:-(Math.atan2(r,l)*180)/Math.PI,distance:h,origin:[c,p]}}catch(r){}return null}function nM(i){return eM(i).map(t=>t.identifier)}function y_(i,t){const[r,l]=Array.from(i.touches).filter(c=>t.includes(c.identifier));return oy(r,l)}function sy(i){const t=A_(i);return m1(i)?t.identifier:t.pointerId}function Mg(i){const t=A_(i);return[t.clientX,t.clientY]}const v_=40,__=800;function E_(i){let{deltaX:t,deltaY:r,deltaMode:l}=i;return l===1?(t*=v_,r*=v_):l===2&&(t*=__,r*=__),[t,r]}function rM(i){var t,r;const{scrollX:l,scrollY:c,scrollLeft:p,scrollTop:h}=i.currentTarget;return[(t=l!=null?l:p)!==null&&t!==void 0?t:0,(r=c!=null?c:h)!==null&&r!==void 0?r:0]}function iM(i){const t={};if("buttons"in i&&(t.buttons=i.buttons),"shiftKey"in i){const{shiftKey:r,altKey:l,metaKey:c,ctrlKey:p}=i;Object.assign(t,{shiftKey:r,altKey:l,metaKey:c,ctrlKey:p})}return t}function A1(i,...t){return typeof i=="function"?i(...t):i}function oM(){}function sM(...i){return i.length===0?oM:i.length===1?i[0]:function(){let t;for(const r of i)t=r.apply(this,arguments)||t;return t}}function b_(i,t){return Object.assign({},t,i||{})}const aM=32;class M_{constructor(t,r,l){this.ctrl=t,this.args=r,this.key=l,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:l,args:c}=this;r[l]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=c,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,l=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=l.from?A1(l.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:l,shared:c}=this;r.args=this.args;let p=0;if(t&&(r.event=t,l.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,c.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,c.locked=!!document.pointerLockElement,Object.assign(c,iM(t)),c.down=c.pressed=c.buttons%2===1||c.touches>0,p=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const W=r._delta.map(Math.abs);rs.addTo(r._distance,W)}this.axisIntent&&this.axisIntent(t);const[h,g]=r._movement,[v,_]=l.threshold,{_step:b,values:T}=r;if(l.hasCustomTransform?(b[0]===!1&&(b[0]=Math.abs(h)>=v&&T[0]),b[1]===!1&&(b[1]=Math.abs(g)>=_&&T[1])):(b[0]===!1&&(b[0]=Math.abs(h)>=v&&Math.sign(h)*v),b[1]===!1&&(b[1]=Math.abs(g)>=_&&Math.sign(g)*_)),r.intentional=b[0]!==!1||b[1]!==!1,!r.intentional)return;const R=[0,0];if(l.hasCustomTransform){const[W,Y]=T;R[0]=b[0]!==!1?W-b[0]:0,R[1]=b[1]!==!1?Y-b[1]:0}else R[0]=b[0]!==!1?h-b[0]:0,R[1]=b[1]!==!1?g-b[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(R);const F=r.offset,G=r._active&&!r._blocked||r.active;G&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=c[this.ingKey]=r._active,t&&(r.first&&("bounds"in l&&(r._bounds=A1(l.bounds,r)),this.setup&&this.setup()),r.movement=R,this.computeOffset()));const[L,O]=r.offset,[[k,P],[z,j]]=r._bounds;r.overflow=[L<k?-1:L>P?1:0,O<z?-1:O>j?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const Q=r._active?l.rubberband||[0,0]:[0,0];if(r.offset=u_(r._bounds,r.offset,Q),r.delta=rs.sub(r.offset,F),this.computeMovement(),G&&(!r.last||p>aM)){r.delta=rs.sub(r.offset,F);const W=r.delta.map(Math.abs);rs.addTo(r.distance,W),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&p>0&&(r.velocity=[W[0]/p,W[1]/p],r.timeDelta=p)}}emit(){const t=this.state,r=this.shared,l=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!l.triggerAllEvents)return;const c=this.handler(Rs(Rs(Rs({},r),t),{},{[this.aliasKey]:t.values}));c!==void 0&&(t.memo=c)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function lM([i,t],r){const l=Math.abs(i),c=Math.abs(t);if(l>c&&l>r)return"x";if(c>l&&c>r)return"y"}class Om extends M_{constructor(...t){super(...t),ia(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=rs.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=rs.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,l=this.config;if(!r.axis&&t){const c=typeof l.axisThreshold=="object"?l.axisThreshold[m_(t)]:l.axisThreshold;r.axis=lM(r._movement,c)}r._blocked=(l.lockDirection||!!l.axis)&&!r.axis||!!l.axis&&l.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const cM=i=>i,x_=.15,Ci={enabled(i=!0){return i},eventOptions(i,t,r){return Rs(Rs({},r.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[x_,x_];case!1:return[0,0];default:return rs.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return rs.toVector(i)},transform(i,t,r){const l=i||r.shared.transform;return this.hasCustomTransform=!!l,l||cM},threshold(i){return rs.toVector(i,0)}},sr=0,Ha=Rs(Rs({},Ci),{},{axis(i,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(i=sr){return i},bounds(i={}){if(typeof i=="function")return p=>Ha.bounds(i(p));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:t=-1/0,right:r=1/0,top:l=-1/0,bottom:c=1/0}=i;return[[t,r],[l,c]]}}),xg={ArrowRight:(i,t=1)=>[i*t,0],ArrowLeft:(i,t=1)=>[-1*i*t,0],ArrowUp:(i,t=1)=>[0,-1*i*t],ArrowDown:(i,t=1)=>[0,i*t]};class C_ extends Om{constructor(...t){super(...t),ia(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const r=t._bounds.getBoundingClientRect(),l=t.currentTarget.getBoundingClientRect(),c={left:r.left-l.left+t.offset[0],right:r.right-l.right+t.offset[0],top:r.top-l.top+t.offset[1],bottom:r.bottom-l.bottom+t.offset[1]};t._bounds=Ha.bounds(c)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const r=this.config,l=this.state;if(t.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):r.pointerButtons!==-1&&r.pointerButtons!==t.buttons))return;const c=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(c&&c.size>1&&l._pointerActive)&&(this.start(t),this.setupPointer(t),l._pointerId=sy(t),l._pointerActive=!0,this.computeValues(Mg(t)),this.computeInitial(),r.preventScrollAxis&&m_(t)!=="mouse"?(l._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const r=this.state,l=this.config;if(!r._pointerActive)return;const c=sy(t);if(r._pointerId!==void 0&&c!==r._pointerId)return;const p=Mg(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=rs.sub(p,r._values),this.computeValues(p)),rs.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(l.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===l.preventScrollAxis||l.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(g){}const r=this.state,l=this.config;if(!r._active||!r._pointerActive)return;const c=sy(t);if(r._pointerId!==void 0&&c!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[p,h]=r._distance;if(r.tap=p<=l.tapsThreshold&&h<=l.tapsThreshold,r.tap&&l.filterTaps)r._force=!0;else{const[g,v]=r._delta,[_,b]=r._movement,[T,R]=l.swipe.velocity,[F,G]=l.swipe.distance,L=l.swipe.duration;if(r.elapsedTime<L){const O=Math.abs(g/r.timeDelta),k=Math.abs(v/r.timeDelta);O>T&&Math.abs(_)>F&&(r.swipe[0]=Math.sign(g)),k>R&&Math.abs(b)>G&&(r.swipe[1]=Math.sign(v))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const r=this.config,l=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,l,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,S_(t);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const r=xg[t.key];if(r){const l=this.state,c=t.shiftKey?10:t.altKey?.1:1;this.start(t),l._delta=r(this.config.keyboardDisplacement,c),l._keyboardActive=!0,rs.addTo(l._movement,l._delta),this.compute(t),this.emit()}}keyUp(t){t.key in xg&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function S_(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const Cg=typeof window!="undefined"&&window.document&&window.document.createElement;function w_(){return Cg&&"ontouchstart"in window}function ay(){return w_()||Cg&&window.navigator.maxTouchPoints>1}function T_(){return Cg&&"onpointerdown"in window}function Dm(){return Cg&&"exitPointerLock"in window.document}function uf(){try{return"constructor"in GestureEvent}catch(i){return!1}}const lc={isBrowser:Cg,gesture:uf(),touch:ay(),touchscreen:ay(),pointer:T_(),pointerLock:Dm()},lh=250,y1=180,ly=.5,v1=50,ch=250,df=10,_1={mouse:0,touch:0,pen:8},E1=Rs(Rs({},Ha),{},{device(i,t,{pointer:{touch:r=!1,lock:l=!1,mouse:c=!1}={}}){return this.pointerLock=l&&lc.pointerLock,lc.touch&&r?"touch":this.pointerLock?"mouse":lc.pointer&&!c?"pointer":lc.touch?"touch":"mouse"},preventScrollAxis(i,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&i?lh:void 0,!(!lc.touchscreen||r===!1))return i||(r!==void 0?"y":void 0)},pointerCapture(i,t,{pointer:{capture:r=!0,buttons:l=1,keys:c=!0}={}}){return this.pointerButtons=l,this.keys=c,!this.pointerLock&&this.device==="pointer"&&r},threshold(i,t,{filterTaps:r=!1,tapsThreshold:l=3,axis:c=void 0}){const p=rs.toVector(i,r?l:c?1:0);return this.filterTaps=r,this.tapsThreshold=l,p},swipe({velocity:i=ly,distance:t=v1,duration:r=ch}={}){return{velocity:this.transform(rs.toVector(i)),distance:this.transform(rs.toVector(t)),duration:r}},delay(i=0){switch(i){case!0:return y1;case!1:return 0;default:return i}},axisThreshold(i){return i?Rs(Rs({},_1),i):_1},keyboardDisplacement(i=df){return i}});function cy(i){const[t,r]=i.overflow,[l,c]=i._delta,[p,h]=i._direction;(t<0&&l>0&&p<0||t>0&&l<0&&p>0)&&(i._movement[0]=i._movementBound[0]),(r<0&&c>0&&h<0||r>0&&c<0&&h>0)&&(i._movement[1]=i._movementBound[1])}const py=30,Pm=100;class B_ extends M_{constructor(...t){super(...t),ia(this,"ingKey","pinching"),ia(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:l}=this.state;t==="wheel"?this.state.offset=rs.add(r,l):this.state.offset=[(1+r[0])*l[0],r[1]+l[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,l]=t._movement;if(!t.axis){const c=Math.abs(r)*py-Math.abs(l);c<0?t.axis="angle":c>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,l=this.ctrl.touchIds;if(r._active&&r._touchIds.every(p=>l.has(p))||l.size<2)return;this.start(t),r._touchIds=Array.from(l).slice(0,2);const c=y_(t,r._touchIds);c&&this.pinchStart(t,c)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,l=r._pointerEvents,c=this.ctrl.pointerIds;if(r._active&&Array.from(l.keys()).every(h=>c.has(h))||(l.size<2&&l.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const p=oy(...Array.from(l.values()));p&&this.pinchStart(t,p)}pinchStart(t,r){const l=this.state;l.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=y_(t,this.state._touchIds);r&&this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const l=oy(...Array.from(r.values()));l&&this.pinchMove(t,l)}pinchMove(t,r){const l=this.state,c=l._values[1],p=r.angle-c;let h=0;Math.abs(p)>270&&(h+=Math.sign(p)),this.computeValues([r.distance,r.angle-360*h]),l.origin=r.origin,l.turns=h,l._movement=[l._values[0]/l._initial[0]-1,l._values[1]-l._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(l){}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const l=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=rs.sub(r._movement,l),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&!t[r]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const l=this.state;l._delta=[-E_(t)[1]/Pm*l.offset[0],0],rs.addTo(l._movement,l._delta),cy(l),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this)),t("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const uy=Rs(Rs({},Ci),{},{device(i,t,{shared:r,pointer:{touch:l=!1}={}}){if(r.target&&!lc.touch&&lc.gesture)return"gesture";if(lc.touch&&l)return"touch";if(lc.touchscreen){if(lc.pointer)return"pointer";if(lc.touch)return"touch"}},bounds(i,t,{scaleBounds:r={},angleBounds:l={}}){const c=h=>{const g=b_(A1(r,h),{min:-1/0,max:1/0});return[g.min,g.max]},p=h=>{const g=b_(A1(l,h),{min:-1/0,max:1/0});return[g.min,g.max]};return typeof r!="function"&&typeof l!="function"?[c(),p()]:h=>[c(h),p(h)]},threshold(i,t,r){return this.lockDirection=r.axis==="lock",rs.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});class dy extends Om{constructor(...t){super(...t),ia(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(Mg(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const r=Mg(t),l=this.state;l._delta=rs.sub(r,l._values),rs.addTo(l._movement,l._delta),this.computeValues(r),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const b1=Rs(Rs({},Ha),{},{mouseOnly:(i=!0)=>i});class R_ extends Om{constructor(...t){super(...t),ia(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const r=this.state,l=rM(t);r._delta=rs.sub(l,r._values),rs.addTo(r._movement,r._delta),this.computeValues(l),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const I_=Ha;class F_ extends Om{constructor(...t){super(...t),ia(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=E_(t),rs.addTo(r._movement,r._delta),cy(r),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const O_=Ha;class D_ extends Om{constructor(...t){super(...t),ia(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(Mg(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const l=Mg(t);r._movement=r._delta=rs.sub(l,r._values),this.computeValues(l),this.compute(t),r.delta=r.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const P_=Rs(Rs({},Ha),{},{mouseOnly:(i=!0)=>i}),M1=new Map,x1=new Map;function L_(i){M1.set(i.key,i.engine),x1.set(i.key,i.resolver)}const hy={key:"drag",engine:C_,resolver:E1},fy={key:"hover",engine:D_,resolver:P_},gy={key:"move",engine:dy,resolver:b1},my={key:"pinch",engine:B_,resolver:uy},Ay={key:"scroll",engine:R_,resolver:I_},yy={key:"wheel",engine:F_,resolver:O_};function vy(i,t){if(i==null)return{};var r={},l=Object.keys(i),c,p;for(p=0;p<l.length;p++)c=l[p],!(t.indexOf(c)>=0)&&(r[c]=i[c]);return r}function _y(i,t){if(i==null)return{};var r=vy(i,t),l,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);for(c=0;c<p.length;c++)l=p[c],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(i,l)&&(r[l]=i[l])}return r}const Ey={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=lc.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:t=!1}={}){return{passive:i,capture:t}},transform(i){return i}},hf=["target","eventOptions","window","enabled","transform"];function Is(i={},t){const r={};for(const[l,c]of Object.entries(t))switch(typeof c){case"function":r[l]=c.call(r,i[l],l,i);break;case"object":r[l]=Is(i[l],c);break;case"boolean":c&&(r[l]=i[l]);break}return r}function ma(i,t,r={}){const l=i,{target:c,eventOptions:p,window:h,enabled:g,transform:v}=l,_=_y(l,hf);if(r.shared=Is({target:c,eventOptions:p,window:h,enabled:g,transform:v},Ey),t){const b=x1.get(t);r[t]=Is(Rs({shared:r.shared},_),b)}else for(const b in _){const T=x1.get(b);T&&(r[b]=Is(Rs({shared:r.shared},_[b]),T))}return r}class Sg{constructor(t,r){ia(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,l,c,p){const h=this._listeners,g=$b(r,l),v=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},_=Rs(Rs({},v),p);t.addEventListener(g,c,_);const b=()=>{t.removeEventListener(g,c,_),h.delete(b)};return h.add(b),b}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class k_{constructor(){ia(this,"_timeouts",new Map)}add(t,r,l=140,...c){this.remove(t),this._timeouts.set(t,window.setTimeout(r,l,...c))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class z_{constructor(t){ia(this,"gestures",new Set),ia(this,"_targetEventStore",new Sg(this)),ia(this,"gestureEventStores",{}),ia(this,"gestureTimeoutStores",{}),ia(this,"handlers",{}),ia(this,"config",{}),ia(this,"pointerIds",new Set),ia(this,"touchIds",new Set),ia(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),G_(this,t)}setEventIds(t){if(m1(t))return this.touchIds=new Set(nM(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=ma(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,l={};let c;if(!(r.target&&(c=r.target(),!c))){if(r.enabled){for(const h of this.gestures){const g=this.config[h],v=by(l,g.eventOptions,!!c);if(g.enabled){const _=M1.get(h);new _(this,t,h).bind(v)}}const p=by(l,r.eventOptions,!!c);for(const h in this.nativeHandlers)p(h,"",g=>this.nativeHandlers[h](Rs(Rs({},this.state.shared),{},{event:g,args:t})),void 0,!0)}for(const p in l)l[p]=sM(...l[p]);if(!c)return l;for(const p in l){const{device:h,capture:g,passive:v}=Zb(p);this._targetEventStore.add(c,h,"",l[p],{capture:g,passive:v})}}}}function ff(i,t){i.gestures.add(t),i.gestureEventStores[t]=new Sg(i,t),i.gestureTimeoutStores[t]=new k_}function G_(i,t){t.drag&&ff(i,"drag"),t.wheel&&ff(i,"wheel"),t.scroll&&ff(i,"scroll"),t.move&&ff(i,"move"),t.pinch&&ff(i,"pinch"),t.hover&&ff(i,"hover")}const by=(i,t,r)=>(l,c,p,h={},g=!1)=>{var v,_;const b=(v=h.capture)!==null&&v!==void 0?v:t.capture,T=(_=h.passive)!==null&&_!==void 0?_:t.passive;let R=g?l:Jb(l,c,b);r&&T&&(R+="Passive"),i[R]=i[R]||[],i[R].push(p)},N_=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function U_(i){const t={},r={},l=new Set;for(let c in i)N_.test(c)?(l.add(RegExp.lastMatch),r[c]=i[c]):t[c]=i[c];return[r,t,l]}function gf(i,t,r,l,c,p){if(!i.has(r)||!M1.has(l))return;const h=r+"Start",g=r+"End",v=_=>{let b;return _.first&&h in t&&t[h](_),r in t&&(b=t[r](_)),_.last&&g in t&&t[g](_),b};c[l]=v,p[l]=p[l]||{}}function j_(i,t){const[r,l,c]=U_(i),p={};return gf(c,r,"onDrag","drag",p,t),gf(c,r,"onWheel","wheel",p,t),gf(c,r,"onScroll","scroll",p,t),gf(c,r,"onPinch","pinch",p,t),gf(c,r,"onMove","move",p,t),gf(c,r,"onHover","hover",p,t),{handlers:p,config:t,nativeHandlers:l}}function ph(i,t={},r,l){const c=d.useMemo(()=>new z_(i),[]);if(c.applyHandlers(i,l),c.applyConfig(t,r),d.useEffect(c.effect.bind(c)),d.useEffect(()=>c.clean.bind(c),[]),t.target===void 0)return c.bind.bind(c)}function pM(i,t){return registerAction(dragAction),ph({drag:i},t||{},"drag")}function uM(i,t){return registerAction(pinchAction),ph({pinch:i},t||{},"pinch")}function dM(i,t){return registerAction(wheelAction),ph({wheel:i},t||{},"wheel")}function hM(i,t){return registerAction(scrollAction),ph({scroll:i},t||{},"scroll")}function fM(i,t){return registerAction(moveAction),ph({move:i},t||{},"move")}function gM(i,t){return registerAction(hoverAction),ph({hover:i},t||{},"hover")}function H_(i){return i.forEach(L_),function(r,l){const{handlers:c,nativeHandlers:p,config:h}=j_(r,l||{});return ph(c,h,void 0,p)}}function W_(i,t){return H_([hy,my,Ay,yy,gy,fy])(i,t||{})}function V_({enabled:i=!0,snap:t,global:r,domElement:l,cursor:c=!0,children:p,speed:h=1,rotation:g=[0,0,0],zoom:v=1,polar:_=[0,Math.PI/2],azimuth:b=[-1/0,1/0],config:T={mass:1,tension:170,friction:26}}){const R=(0,E.z)(W=>W.events),F=(0,E.z)(W=>W.gl),G=l||R.connected||F.domElement,{size:L}=(0,E.z)(),O=d.useMemo(()=>[g[0]+_[0],g[0]+_[1]],[g[0],_[0],_[1]]),k=d.useMemo(()=>[g[1]+b[0],g[1]+b[1]],[g[1],b[0],b[1]]),P=d.useMemo(()=>[s.MathUtils.clamp(g[0],...O),s.MathUtils.clamp(g[1],...k),g[2]],[g[0],g[1],g[2],O,k]),[z,j]=ne(()=>({scale:1,rotation:P,config:T}));d.useEffect(()=>void j.start({scale:1,rotation:P,config:T}),[P]),d.useEffect(()=>{if(r&&c&&i)return G.style.cursor="grab",F.domElement.style.cursor="",()=>{G.style.cursor="default",F.domElement.style.cursor="default"}},[r,c,G,i]);const Q=W_({onHover:({last:W})=>{c&&!r&&i&&(G.style.cursor=W?"auto":"grab")},onDrag:({down:W,delta:[Y,K],memo:[se,ce]=z.rotation.animation.to||P})=>{if(!i)return[K,Y];c&&(G.style.cursor=W?"grabbing":"grab"),Y=s.MathUtils.clamp(ce+Y/L.width*Math.PI*h,...k),K=s.MathUtils.clamp(se+K/L.height*Math.PI*h,...O);const ge=t&&!W&&typeof t!="boolean"?t:T;return j.start({scale:W&&K>O[1]/2?v:1,rotation:t&&!W?P:[K,Y,0],config:le=>le==="scale"?Xo(Kn({},ge),{friction:ge.friction*3}):ge}),[K,Y]}},{target:r?G:void 0});return d.createElement(c_.group,(0,w.Z)({},Q==null?void 0:Q(),z),p)}var Ul=A(25108),Q_=Object.defineProperty,My=Object.getOwnPropertySymbols,K_=Object.prototype.hasOwnProperty,X_=Object.prototype.propertyIsEnumerable,xy=(i,t,r)=>t in i?Q_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Y_=(i,t)=>{for(var r in t||(t={}))K_.call(t,r)&&xy(i,r,t[r]);if(My)for(var r of My(t))X_.call(t,r)&&xy(i,r,t[r]);return i};const mM=(i,t)=>(r,l,c)=>(c.dispatch=p=>(r(h=>i(h,p),!1,p),p),c.dispatchFromDevtools=!0,Y_({dispatch:(...p)=>c.dispatch(...p)},t));function AM(i,t){return(r,l,c)=>{var p;let h=!1;typeof t=="string"&&!h&&(Ul.warn("[zustand devtools middleware]: passing `name` as directly will be not allowed in next majorpass the `name` in an object `{ name: ... }` instead"),h=!0);const g=t===void 0?{name:void 0,anonymousActionType:void 0}:typeof t=="string"?{name:t}:t;typeof((p=g==null?void 0:g.serialize)==null?void 0:p.options)!="undefined"&&Ul.warn("[zustand devtools middleware]: `serialize.options` is deprecated, just use `serialize`");let v;try{v=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(L){}if(!v)return typeof window!="undefined"&&Ul.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),i(r,l,c);let _=Object.create(v.connect(g)),b=!1;Object.defineProperty(c,"devtools",{get:()=>(b||(Ul.warn("[zustand devtools middleware] `devtools` property on the store is deprecated it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),b=!0),_),set:L=>{b||(Ul.warn("[zustand devtools middleware] `api.devtools` is deprecated, it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),b=!0),_=L}});let T=!1;Object.defineProperty(_,"prefix",{get:()=>(T||(Ul.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+g.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0),""),set:()=>{T||(Ul.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+g.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0)}});let R=!0;c.setState=(L,O,k)=>{r(L,O),R&&_.send(k===void 0?{type:g.anonymousActionType||"anonymous"}:typeof k=="string"?{type:k}:k,l())};const F=(...L)=>{const O=R;R=!1,r(...L),R=O},G=i(c.setState,l,c);if(_.init(G),c.dispatchFromDevtools&&typeof c.dispatch=="function"){let L=!1;const O=c.dispatch;c.dispatch=(...k)=>{k[0].type==="__setState"&&!L&&(Ul.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),L=!0),O(...k)}}return _.subscribe(L=>{var O;switch(L.type){case"ACTION":if(typeof L.payload!="string"){Ul.error("[zustand devtools middleware] Unsupported action format");return}return C1(L.payload,k=>{if(k.type==="__setState"){F(k.state);return}c.dispatchFromDevtools&&typeof c.dispatch=="function"&&c.dispatch(k)});case"DISPATCH":switch(L.payload.type){case"RESET":return F(G),_.init(c.getState());case"COMMIT":return _.init(c.getState());case"ROLLBACK":return C1(L.state,k=>{F(k),_.init(c.getState())});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return C1(L.state,k=>{F(k)});case"IMPORT_STATE":{const{nextLiftedState:k}=L.payload,P=(O=k.computedStates.slice(-1)[0])==null?void 0:O.state;if(!P)return;F(P),_.send(null,k);return}case"PAUSE_RECORDING":return R=!R}return}}),G}}const C1=(i,t)=>{let r;try{r=JSON.parse(i)}catch(l){Ul.error("[zustand devtools middleware] Could not parse the received json",l)}r!==void 0&&t(r)},J_=i=>(t,r,l)=>{const c=l.subscribe;return l.subscribe=(h,g,v)=>{let _=h;if(g){const b=(v==null?void 0:v.equalityFn)||Object.is;let T=h(l.getState());_=R=>{const F=h(R);if(!b(T,F)){const G=T;g(T=F,G)}},v!=null&&v.fireImmediately&&g(T,T)}return c(_)},i(t,r,l)},yM=(i,t)=>(r,l,c)=>Object.assign({},i,t(r,l,c));var q_=Object.defineProperty,Cy=Object.getOwnPropertySymbols,Z_=Object.prototype.hasOwnProperty,$_=Object.prototype.propertyIsEnumerable,Sy=(i,t,r)=>t in i?q_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,mf=(i,t)=>{for(var r in t||(t={}))Z_.call(t,r)&&Sy(i,r,t[r]);if(Cy)for(var r of Cy(t))$_.call(t,r)&&Sy(i,r,t[r]);return i};const Lm=i=>t=>{try{const r=i(t);return r instanceof Promise?r:{then(l){return Lm(l)(r)},catch(l){return this}}}catch(r){return{then(l){return this},catch(l){return Lm(l)(r)}}}},vM=(i,t)=>(r,l,c)=>{let p=mf({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:O=>O,version:0,merge:(O,k)=>mf(mf({},k),O)},t);(p.blacklist||p.whitelist)&&Ul.warn(`The ${p.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let h=!1;const g=new Set,v=new Set;let _;try{_=p.getStorage()}catch(O){}if(_)_.removeItem||Ul.warn(`[zustand persist middleware] The given storage for item '${p.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return i((...O)=>{Ul.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),r(...O)},l,c);const b=Lm(p.serialize),T=()=>{const O=p.partialize(mf({},l()));p.whitelist&&Object.keys(O).forEach(z=>{var j;!((j=p.whitelist)!=null&&j.includes(z))&&delete O[z]}),p.blacklist&&p.blacklist.forEach(z=>delete O[z]);let k;const P=b({state:O,version:p.version}).then(z=>_.setItem(p.name,z)).catch(z=>{k=z});if(k)throw k;return P},R=c.setState;c.setState=(O,k)=>{R(O,k),T()};const F=i((...O)=>{r(...O),T()},l,c);let G;const L=()=>{var O;if(!_)return;h=!1,g.forEach(P=>P(l()));const k=((O=p.onRehydrateStorage)==null?void 0:O.call(p,l()))||void 0;return Lm(_.getItem.bind(_))(p.name).then(P=>{if(P)return p.deserialize(P)}).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==p.version){if(p.migrate)return p.migrate(P.state,P.version);Ul.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return P.state}).then(P=>{var z;return G=p.merge(P,(z=l())!=null?z:F),r(G,!0),T()}).then(()=>{k==null||k(G,void 0),h=!0,v.forEach(P=>P(G))}).catch(P=>{k==null||k(void 0,P)})};return c.persist={setOptions:O=>{p=mf(mf({},p),O),O.getStorage&&(_=O.getStorage())},clearStorage:()=>{var O;(O=_==null?void 0:_.removeItem)==null||O.call(_,p.name)},rehydrate:()=>L(),hasHydrated:()=>h,onHydrate:O=>(g.add(O),()=>{g.delete(O)}),onFinishHydration:O=>(v.add(O),()=>{v.delete(O)})},L(),G||F},e3=wt.Z.default||wt.Z,wy=d.createContext(null);function t3({map:i,children:t,onChange:r,domElement:l}){const c=i.map(v=>v.name+v.keys).join("-"),p=d.useMemo(()=>e3(J_(()=>i.reduce((v,_)=>Xo(Kn({},v),{[_.name]:!1}),{}))),[c]),h=d.useMemo(()=>[p.subscribe,p.getState,p],[c]),g=p.setState;return d.useEffect(()=>{const _=i.map(({name:F,keys:G,up:L})=>({keys:G,up:L,fn:O=>{g({[F]:O}),r&&r(F,O,h[1]())}})).reduce((F,{keys:G,fn:L,up:O=!0})=>(G.forEach(k=>F[k]={fn:L,pressed:!1,up:O}),F),{}),b=({key:F,code:G})=>{const L=_[F]||_[G];if(!L)return;const{fn:O,pressed:k,up:P}=L;L.pressed=!0,(P||!k)&&O(!0)},T=({key:F,code:G})=>{const L=_[F]||_[G];if(!L)return;const{fn:O,up:k}=L;L.pressed=!1,k&&O(!1)},R=l||window;return R.addEventListener("keydown",b,{passive:!0}),R.addEventListener("keyup",T,{passive:!0}),()=>{R.removeEventListener("keydown",b),R.removeEventListener("keyup",T)}},[l,c]),d.createElement(wy.Provider,{value:h,children:t})}function n3(i){const[t,r,l]=d.useContext(wy);return i?l(i):[t,r]}var S1=A(25108);const km=new s.Frustum,w1=new s.Vector3,yu=new s.Vector3,Rc=new s.Vector3,vu=new s.Vector3,Fp=new s.Vector3,_u=new s.Vector3,Op=new s.Vector3,wg=new s.Vector3,Tg=new s.Vector3,Bg=new s.Vector3,zm=new s.Vector3,Rg=new s.Vector3,Eu=new s.Vector3,Af=new s.Vector3;class Ty{constructor(t,r,l){this.camera=t,this.scene=r,this.startPoint=new s.Vector3,this.endPoint=new s.Vector3,this.collection=[],this.deep=l||Number.MAX_VALUE}select(t,r){return this.startPoint=t||this.startPoint,this.endPoint=r||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(km,this.scene),this.collection}updateFrustum(t,r){if(t=t||this.startPoint,r=r||this.endPoint,t.x===r.x&&(r.x+=Number.EPSILON),t.y===r.y&&(r.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){yu.copy(t),yu.x=Math.min(t.x,r.x),yu.y=Math.max(t.y,r.y),r.x=Math.max(t.x,r.x),r.y=Math.min(t.y,r.y),Rc.setFromMatrixPosition(this.camera.matrixWorld),vu.copy(yu),Fp.set(r.x,yu.y,0),_u.copy(r),Op.set(yu.x,r.y,0),vu.unproject(this.camera),Fp.unproject(this.camera),_u.unproject(this.camera),Op.unproject(this.camera),Rg.copy(vu).sub(Rc),Eu.copy(Fp).sub(Rc),Af.copy(_u).sub(Rc),Rg.normalize(),Eu.normalize(),Af.normalize(),Rg.multiplyScalar(this.deep),Eu.multiplyScalar(this.deep),Af.multiplyScalar(this.deep),Rg.add(Rc),Eu.add(Rc),Af.add(Rc);var l=km.planes;l[0].setFromCoplanarPoints(Rc,vu,Fp),l[1].setFromCoplanarPoints(Rc,Fp,_u),l[2].setFromCoplanarPoints(_u,Op,Rc),l[3].setFromCoplanarPoints(Op,vu,Rc),l[4].setFromCoplanarPoints(Fp,_u,Op),l[5].setFromCoplanarPoints(Af,Eu,Rg),l[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const c=Math.min(t.x,r.x),p=Math.max(t.y,r.y),h=Math.max(t.x,r.x),g=Math.min(t.y,r.y);vu.set(c,p,-1),Fp.set(h,p,-1),_u.set(h,g,-1),Op.set(c,g,-1),wg.set(c,p,1),Tg.set(h,p,1),Bg.set(h,g,1),zm.set(c,g,1),vu.unproject(this.camera),Fp.unproject(this.camera),_u.unproject(this.camera),Op.unproject(this.camera),wg.unproject(this.camera),Tg.unproject(this.camera),Bg.unproject(this.camera),zm.unproject(this.camera);var l=km.planes;l[0].setFromCoplanarPoints(vu,wg,Tg),l[1].setFromCoplanarPoints(Fp,Tg,Bg),l[2].setFromCoplanarPoints(Bg,zm,Op),l[3].setFromCoplanarPoints(zm,wg,vu),l[4].setFromCoplanarPoints(Fp,_u,Op),l[5].setFromCoplanarPoints(Bg,Tg,wg),l[5].normal.multiplyScalar(-1)}else S1.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(t,r){if((r.isMesh||r.isLine||r.isPoints)&&r.material!==void 0&&(r.geometry.boundingSphere===null&&r.geometry.computeBoundingSphere(),w1.copy(r.geometry.boundingSphere.center),w1.applyMatrix4(r.matrixWorld),t.containsPoint(w1)&&this.collection.push(r)),r.children.length>0)for(let l=0;l<r.children.length;l++)this.searchChildInFrustum(t,r.children[l])}}function By(i,t){if(Object.is(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;const r=Object.keys(i);if(r.length!==Object.keys(t).length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!Object.is(i[r[l]],t[r[l]]))return!1;return!0}const T1=By.default||By,Ry=d.createContext([]);function r3(_){var b=_,{box:i,multiple:t,children:r,onChange:l,onChangePointerUp:c,border:p="1px solid #55aaff",backgroundColor:h="rgba(75, 160, 255, 0.1)",filter:g=T=>T}=b,v=_n(b,["box","multiple","children","onChange","onChangePointerUp","border","backgroundColor","filter"]);const[T,R]=d.useState(!1),{setEvents:F,camera:G,raycaster:L,gl:O,controls:k,size:P,get:z}=(0,E.z)(),[j,Q]=d.useState(!1),[W,Y]=d.useReducer((ge,{object:le,shift:xe})=>le===void 0?[]:Array.isArray(le)?le:xe?ge.includes(le)?ge.filter(me=>me!==le):[le,...ge]:ge[0]===le?[]:[le],[]);d.useEffect(()=>{T?l==null||l(W):c==null||c(W)},[W,T]);const K=d.useCallback(ge=>{ge.stopPropagation(),Y({object:g([ge.object])[0],shift:t&&ge.shiftKey})},[]),se=d.useCallback(ge=>!j&&Y({}),[j]),ce=d.useRef(null);return d.useEffect(()=>{if(!i||!t)return;const ge=new Ty(G,ce.current),le=document.createElement("div");le.style.pointerEvents="none",le.style.border=p,le.style.backgroundColor=h,le.style.position="fixed";const xe=new s.Vector2,me=new s.Vector2,Be=new s.Vector2,ke=z().events.enabled,Re=k==null?void 0:k.enabled;let ze=!1;function Pe(ve,Ge){const{offsetX:bt,offsetY:mt}=ve,{width:gt,height:rt}=P;Ge.set(bt/gt*2-1,-(mt/rt)*2+1)}function Ye(ve){var Ge;k&&(k.enabled=!1),F({enabled:!1}),R(ze=!0),(Ge=O.domElement.parentElement)==null||Ge.appendChild(le),le.style.left=`${ve.clientX}px`,le.style.top=`${ve.clientY}px`,le.style.width="0px",le.style.height="0px",xe.x=ve.clientX,xe.y=ve.clientY}function Ce(ve){Be.x=Math.max(xe.x,ve.clientX),Be.y=Math.max(xe.y,ve.clientY),me.x=Math.min(xe.x,ve.clientX),me.y=Math.min(xe.y,ve.clientY),le.style.left=`${me.x}px`,le.style.top=`${me.y}px`,le.style.width=`${Be.x-me.x}px`,le.style.height=`${Be.y-me.y}px`}function Ee(){if(ze){var ve;k&&(k.enabled=Re),F({enabled:ke}),R(ze=!1),(ve=le.parentElement)==null||ve.removeChild(le)}}function _e(ve){ve.shiftKey&&(Ye(ve),Pe(ve,ge.startPoint))}let oe=[];function Ae(ve){if(ze){Ce(ve),Pe(ve,ge.endPoint);const Ge=ge.select().sort(bt=>bt.uuid).filter(bt=>bt.isMesh);T1(Ge,oe)||(oe=Ge,Y({object:g(Ge)}))}}function Te(ve){ze&&Ee()}return document.addEventListener("pointerdown",_e,{passive:!0}),document.addEventListener("pointermove",Ae,{passive:!0,capture:!0}),document.addEventListener("pointerup",Te,{passive:!0}),()=>{document.removeEventListener("pointerdown",_e),document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Te)}},[P.width,P.height,L,G,k,O]),d.createElement("group",(0,w.Z)({ref:ce,onClick:K,onPointerOver:()=>Q(!0),onPointerOut:()=>Q(!1),onPointerMissed:se},v),d.createElement(Ry.Provider,{value:W},r))}function i3(){return d.useContext(Ry)}const B1=d.forwardRef(function(g,h){var v=g,{follow:t=!0,lockX:r=!1,lockY:l=!1,lockZ:c=!1}=v,p=_n(v,["follow","lockX","lockY","lockZ"]);const _=d.useRef();return(0,E.A)(({camera:b})=>{if(!t||!_.current)return;const T=_.current.rotation.clone();b.getWorldQuaternion(_.current.quaternion),r&&(_.current.rotation.x=T.x),l&&(_.current.rotation.y=T.y),c&&(_.current.rotation.z=T.z)}),d.createElement("group",(0,w.Z)({ref:zr([_,h])},p))}),o3=d.forwardRef((c,l)=>{var p=c,{children:i,depth:t=-1}=p,r=_n(p,["children","depth"]);const h=d.useRef(null);return(0,E.A)(({camera:g})=>{h.current.quaternion.copy(g.quaternion),h.current.position.copy(g.position)}),d.createElement("group",(0,w.Z)({ref:zr([l,h])},r),d.createElement("group",{"position-z":-t},i))});var R1=A(25108);const Iy=new s.Box3,Gm=new s.Vector3;class Nm extends s.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],r=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],l=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(l),this.setAttribute("position",new s.Float32BufferAttribute(t,3)),this.setAttribute("uv",new s.Float32BufferAttribute(r,2))}applyMatrix4(t){const r=this.attributes.instanceStart,l=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(t),l.applyMatrix4(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const l=new s.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceStart",new s.InterleavedBufferAttribute(l,3,0)),this.setAttribute("instanceEnd",new s.InterleavedBufferAttribute(l,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const l=new s.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceColorStart",new s.InterleavedBufferAttribute(l,3,0)),this.setAttribute("instanceColorEnd",new s.InterleavedBufferAttribute(l,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new s.WireframeGeometry(t.geometry)),this}fromLineSegments(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new s.Box3);const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;t!==void 0&&r!==void 0&&(this.boundingBox.setFromBufferAttribute(t),Iy.setFromBufferAttribute(r),this.boundingBox.union(Iy))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s.Sphere),this.boundingBox===null&&this.computeBoundingBox();const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(t!==void 0&&r!==void 0){const l=this.boundingSphere.center;this.boundingBox.getCenter(l);let c=0;for(let p=0,h=t.count;p<h;p++)Gm.fromBufferAttribute(t,p),c=Math.max(c,l.distanceToSquared(Gm)),Gm.fromBufferAttribute(r,p),c=Math.max(c,l.distanceToSquared(Gm));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&R1.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return R1.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}class Um extends s.ShaderMaterial{constructor(t){super({type:"LineMaterial",uniforms:s.UniformsUtils.clone(s.UniformsUtils.merge([s.UniformsLib.common,s.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new s.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <encodings_fragment>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(r){this.uniforms.diffuse.value=r}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(r){r===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(r){this.uniforms.linewidth.value=r}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(r){!!r!="USE_DASH"in this.defines&&(this.needsUpdate=!0),r===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(r){this.uniforms.dashScale.value=r}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(r){this.uniforms.dashSize.value=r}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(r){this.uniforms.dashOffset.value=r}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(r){this.uniforms.gapSize.value=r}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(r){this.uniforms.resolution.value.copy(r)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(r){!!r!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),r===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}var s3=A(25108);const Fy=new s.Vector3,Oy=new s.Vector3,Wa=new s.Vector4,Va=new s.Vector4,Dp=new s.Vector4,I1=new s.Vector3,F1=new s.Matrix4,Qa=new s.Line3,O1=new s.Vector3,jm=new s.Box3,Hm=new s.Sphere,Pp=new s.Vector4;let Lp,D1,Dy,ld;function Py(i,t,r){return Pp.set(0,0,-t,1).applyMatrix4(i.projectionMatrix),Pp.multiplyScalar(1/Pp.w),Pp.x=ld/r.width,Pp.y=ld/r.height,Pp.applyMatrix4(i.projectionMatrixInverse),Pp.multiplyScalar(1/Pp.w),Math.abs(Math.max(Pp.x,Pp.y))}function P1(i,t){for(let r=0,l=D1.count;r<l;r++){Qa.start.fromBufferAttribute(D1,r),Qa.end.fromBufferAttribute(Dy,r);const c=new s.Vector3,p=new s.Vector3;Lp.distanceSqToSegment(Qa.start,Qa.end,p,c),p.distanceTo(c)<ld*.5&&t.push({point:p,pointOnLine:c,distance:Lp.origin.distanceTo(p),object:i,face:null,faceIndex:r,uv:null,uv2:null})}}function L1(i,t,r){const l=t.projectionMatrix,p=i.material.resolution,h=i.matrixWorld,g=i.geometry,v=g.attributes.instanceStart,_=g.attributes.instanceEnd,b=-t.near;Lp.at(1,Dp),Dp.w=1,Dp.applyMatrix4(t.matrixWorldInverse),Dp.applyMatrix4(l),Dp.multiplyScalar(1/Dp.w),Dp.x*=p.x/2,Dp.y*=p.y/2,Dp.z=0,I1.copy(Dp),F1.multiplyMatrices(t.matrixWorldInverse,h);for(let T=0,R=v.count;T<R;T++){if(Wa.fromBufferAttribute(v,T),Va.fromBufferAttribute(_,T),Wa.w=1,Va.w=1,Wa.applyMatrix4(F1),Va.applyMatrix4(F1),Wa.z>b&&Va.z>b)continue;if(Wa.z>b){const P=Wa.z-Va.z,z=(Wa.z-b)/P;Wa.lerp(Va,z)}else if(Va.z>b){const P=Va.z-Wa.z,z=(Va.z-b)/P;Va.lerp(Wa,z)}Wa.applyMatrix4(l),Va.applyMatrix4(l),Wa.multiplyScalar(1/Wa.w),Va.multiplyScalar(1/Va.w),Wa.x*=p.x/2,Wa.y*=p.y/2,Va.x*=p.x/2,Va.y*=p.y/2,Qa.start.copy(Wa),Qa.start.z=0,Qa.end.copy(Va),Qa.end.z=0;const G=Qa.closestPointToPointParameter(I1,!0);Qa.at(G,O1);const L=s.MathUtils.lerp(Wa.z,Va.z,G),O=L>=-1&&L<=1,k=I1.distanceTo(O1)<ld*.5;if(O&&k){Qa.start.fromBufferAttribute(v,T),Qa.end.fromBufferAttribute(_,T),Qa.start.applyMatrix4(h),Qa.end.applyMatrix4(h);const P=new s.Vector3,z=new s.Vector3;Lp.distanceSqToSegment(Qa.start,Qa.end,z,P),r.push({point:z,pointOnLine:P,distance:Lp.origin.distanceTo(z),object:i,face:null,faceIndex:T,uv:null,uv2:null})}}}class Ly extends s.Mesh{constructor(t=new Nm,r=new Um({color:Math.random()*16777215})){super(t,r),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,r=t.attributes.instanceStart,l=t.attributes.instanceEnd,c=new Float32Array(2*r.count);for(let h=0,g=0,v=r.count;h<v;h++,g+=2)Fy.fromBufferAttribute(r,h),Oy.fromBufferAttribute(l,h),c[g]=g===0?0:c[g-1],c[g+1]=c[g]+Fy.distanceTo(Oy);const p=new s.InstancedInterleavedBuffer(c,2,1);return t.setAttribute("instanceDistanceStart",new s.InterleavedBufferAttribute(p,1,0)),t.setAttribute("instanceDistanceEnd",new s.InterleavedBufferAttribute(p,1,1)),this}raycast(t,r){const l=this.material.worldUnits,c=t.camera;c===null&&!l&&s3.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const p=t.params.Line2!==void 0&&t.params.Line2.threshold||0;Lp=t.ray;const h=this.matrixWorld,g=this.geometry,v=this.material;ld=v.linewidth+p,D1=g.attributes.instanceStart,Dy=g.attributes.instanceEnd,g.boundingSphere===null&&g.computeBoundingSphere(),Hm.copy(g.boundingSphere).applyMatrix4(h);let _;if(l)_=ld*.5;else{const T=Math.max(c.near,Hm.distanceToPoint(Lp.origin));_=Py(c,T,v.resolution)}if(Hm.radius+=_,Lp.intersectsSphere(Hm)===!1)return;g.boundingBox===null&&g.computeBoundingBox(),jm.copy(g.boundingBox).applyMatrix4(h);let b;if(l)b=ld*.5;else{const T=Math.max(c.near,jm.distanceToPoint(Lp.origin));b=Py(c,T,v.resolution)}jm.expandByScalar(b),Lp.intersectsBox(jm)!==!1&&(l?P1(this,r):L1(this,c,r))}}class ky extends Nm{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const r=t.length-3,l=new Float32Array(2*r);for(let c=0;c<r;c+=3)l[2*c]=t[c],l[2*c+1]=t[c+1],l[2*c+2]=t[c+2],l[2*c+3]=t[c+3],l[2*c+4]=t[c+4],l[2*c+5]=t[c+5];return super.setPositions(l),this}setColors(t){const r=t.length-3,l=new Float32Array(2*r);for(let c=0;c<r;c+=3)l[2*c]=t[c],l[2*c+1]=t[c+1],l[2*c+2]=t[c+2],l[2*c+3]=t[c+3],l[2*c+4]=t[c+4],l[2*c+5]=t[c+5];return super.setColors(l),this}fromLine(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}}class zy extends Ly{constructor(t=new ky,r=new Um({color:Math.random()*16777215})){super(t,r),this.isLine2=!0,this.type="Line2"}}const kp=d.forwardRef(function(b,_){var T=b,{points:t,color:r="black",vertexColors:l,linewidth:c,lineWidth:p,segments:h,dashed:g}=T,v=_n(T,["points","color","vertexColors","linewidth","lineWidth","segments","dashed"]);const R=(0,E.z)(O=>O.size),F=d.useMemo(()=>h?new Ly:new zy,[h]),[G]=d.useState(()=>new Um),L=d.useMemo(()=>{const O=h?new Nm:new ky,k=t.map(P=>{const z=Array.isArray(P);return P instanceof s.Vector3?[P.x,P.y,P.z]:P instanceof s.Vector2?[P.x,P.y,0]:z&&P.length===3?[P[0],P[1],P[2]]:z&&P.length===2?[P[0],P[1],0]:P});if(O.setPositions(k.flat()),l){const P=l.map(z=>z instanceof s.Color?z.toArray():z);O.setColors(P.flat())}return O},[t,h,l]);return d.useLayoutEffect(()=>{F.computeLineDistances()},[t,F]),d.useLayoutEffect(()=>{g?G.defines.USE_DASH="":delete G.defines.USE_DASH,G.needsUpdate=!0},[g,G]),d.useEffect(()=>()=>L.dispose(),[L]),d.createElement("primitive",(0,w.Z)({object:F,ref:_},v),d.createElement("primitive",{object:L,attach:"geometry"}),d.createElement("primitive",(0,w.Z)({object:G,attach:"material",color:r,vertexColors:!!l,resolution:[R.width,R.height],linewidth:c!=null?c:p,dashed:g},v)))}),a3=new s.Vector3,Gy=d.forwardRef(function(g,h){var v=g,{start:t=[0,0,0],end:r=[0,0,0],mid:l,segments:c=20}=v,p=_n(v,["start","end","mid","segments"]);const _=d.useRef(null),[b]=d.useState(()=>new s.QuadraticBezierCurve3(void 0,void 0,void 0)),T=d.useCallback((F,G,L,O=20)=>(F instanceof s.Vector3?b.v0.copy(F):b.v0.set(...F),G instanceof s.Vector3?b.v2.copy(G):b.v2.set(...G),L instanceof s.Vector3?b.v1.copy(L):Array.isArray(L)?b.v1.set(...L):b.v1.copy(b.v0.clone().add(b.v2.clone().sub(b.v0)).add(a3.set(0,b.v0.y-b.v2.y,0))),b.getPoints(O)),[]);d.useLayoutEffect(()=>{_.current.setPoints=(F,G,L)=>{const O=T(F,G,L);_.current.geometry&&_.current.geometry.setPositions(O.map(k=>k.toArray()).flat())}},[]);const R=d.useMemo(()=>T(t,r,l,c),[t,r,l,c]);return d.createElement(kp,(0,w.Z)({ref:zr([_,h]),points:R},p))}),Ny=d.forwardRef(function(v,g){var _=v,{start:t,end:r,midA:l,midB:c,segments:p=20}=_,h=_n(_,["start","end","midA","midB","segments"]);const b=d.useMemo(()=>{const T=t instanceof s.Vector3?t:new s.Vector3(...t),R=r instanceof s.Vector3?r:new s.Vector3(...r),F=l instanceof s.Vector3?l:new s.Vector3(...l),G=c instanceof s.Vector3?c:new s.Vector3(...c);return new s.CubicBezierCurve3(T,F,G,R).getPoints(p)},[t,r,l,c,p]);return d.createElement(kp,(0,w.Z)({ref:g,points:b},h))}),yf=d.forwardRef(function(_,v){var b=_,{points:t,closed:r=!1,curveType:l="centripetal",tension:c=.5,segments:p=20,vertexColors:h}=b,g=_n(b,["points","closed","curveType","tension","segments","vertexColors"]);const T=d.useMemo(()=>{const G=t.map(L=>L instanceof s.Vector3?L:new s.Vector3(...L));return new s.CatmullRomCurve3(G,r,l,c)},[t,r,l,c]),R=d.useMemo(()=>T.getPoints(p),[T,p]),F=d.useMemo(()=>{if(!h||h.length<2)return;if(h.length===p+1)return h;const G=h.map(k=>k instanceof s.Color?k:new s.Color(...k));r&&G.push(G[0].clone());const L=[G[0]],O=p/(G.length-1);for(let k=1;k<p;k++){const P=k%O/O,z=Math.floor(k/O);L.push(G[z].clone().lerp(G[z+1],P))}return L.push(G[G.length-1]),L},[h,p]);return d.createElement(kp,(0,w.Z)({ref:v,points:R,vertexColors:F},g))}),l3=d.forwardRef((h,p)=>{var g=h,{url:i,distance:t=1,loop:r=!0,autoplay:l}=g,c=_n(g,["url","distance","loop","autoplay"]);const v=d.useRef(),_=(0,E.z)(({camera:R})=>R),[b]=d.useState(()=>new s.AudioListener),T=(0,E.D)(s.AudioLoader,i);return d.useEffect(()=>{const R=v.current;R&&(R.setBuffer(T),R.setRefDistance(t),R.setLoop(r),l&&!R.isPlaying&&R.play())},[T,_,t,r]),d.useEffect(()=>{const R=v.current;return _.add(b),()=>{_.remove(b),R&&(R.isPlaying&&R.stop(),R.source&&R.source._connected&&R.disconnect())}},[]),d.createElement("positionalAudio",(0,w.Z)({ref:zr([v,p]),args:[b]},c))});var uh=A(25108),Uy=A(34155);function c3(){var i=Object.create(null);function t(c,p){var h=c.id,g=c.name,v=c.dependencies;v===void 0&&(v=[]);var _=c.init;_===void 0&&(_=function(){});var b=c.getTransferables;if(b===void 0&&(b=null),!i[h])try{v=v.map(function(R){return R&&R.isWorkerModule&&(t(R,function(F){if(F instanceof Error)throw F}),R=i[R.id].value),R}),_=l("<"+g+">.init",_),b&&(b=l("<"+g+">.getTransferables",b));var T=null;typeof _=="function"?T=_.apply(void 0,v):uh.error("worker module init function failed to rehydrate"),i[h]={id:h,value:T,getTransferables:b},p(T)}catch(R){R&&R.noLog||uh.error(R),p(R)}}function r(c,p){var h,g=c.id,v=c.args;(!i[g]||typeof i[g].value!="function")&&p(new Error("Worker module "+g+": not found or its 'init' did not return a function"));try{var _=(h=i[g]).value.apply(h,v);_&&typeof _.then=="function"?_.then(b,function(T){return p(T instanceof Error?T:new Error(""+T))}):b(_)}catch(T){p(T)}function b(T){try{var R=i[g].getTransferables&&i[g].getTransferables(T);(!R||!Array.isArray(R)||!R.length)&&(R=void 0),p(T,R)}catch(F){uh.error(F),p(F)}}}function l(c,p){var h=void 0;self.troikaDefine=function(v){return h=v};var g=URL.createObjectURL(new Blob(["/** "+c.replace(/\*/g,"")+` **/

troikaDefine(
`+p+`
)`],{type:"application/javascript"}));try{importScripts(g)}catch(v){uh.error(v)}return URL.revokeObjectURL(g),delete self.troikaDefine,h}self.addEventListener("message",function(c){var p=c.data,h=p.messageId,g=p.action,v=p.data;try{g==="registerModule"&&t(v,function(_){_ instanceof Error?postMessage({messageId:h,success:!1,error:_.message}):postMessage({messageId:h,success:!0,result:{isCallable:typeof _=="function"}})}),g==="callModule"&&r(v,function(_,b){_ instanceof Error?postMessage({messageId:h,success:!1,error:_.message}):postMessage({messageId:h,success:!0,result:_},b||void 0)})}catch(_){postMessage({messageId:h,success:!1,error:_.stack})}})}function p3(i){var t=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return t._getInitResult().then(function(c){if(typeof c=="function")return c.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var r=i.dependencies,l=i.init;r=Array.isArray(r)?r.map(function(p){return p&&p._getInitResult?p._getInitResult():p}):[];var c=Promise.all(r).then(function(p){return l.apply(null,p)});return t._getInitResult=function(){return c},c},t}var jy=function(){var i=!1;if(typeof window!="undefined"&&typeof window.document!="undefined")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(r){uh.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return jy=function(){return i},i},u3=0,Hy=0,Wm=!1,cd=Object.create(null),pd=Object.create(null),Vm=Object.create(null);function ud(i){if((!i||typeof i.init!="function")&&!Wm)throw new Error("requires `options.init` function");var t=i.dependencies,r=i.init,l=i.getTransferables,c=i.workerId;if(!jy())return p3(i);c==null&&(c="#default");var p="workerModule"+ ++u3,h=i.name||p,g=null;t=t&&t.map(function(_){return typeof _=="function"&&!_.workerModuleData&&(Wm=!0,_=ud({workerId:c,name:"<"+h+"> function dependency: "+_.name,init:`function(){return (
`+zp(_)+`
)}`}),Wm=!1),_&&_.workerModuleData&&(_=_.workerModuleData),_});function v(){for(var _=[],b=arguments.length;b--;)_[b]=arguments[b];if(!g){g=dh(c,"registerModule",v.workerModuleData);var T=function(){g=null,pd[c].delete(T)};(pd[c]||(pd[c]=new Set)).add(T)}return g.then(function(R){var F=R.isCallable;if(F)return dh(c,"callModule",{id:p,args:_});throw new Error("Worker module function was called but `init` did not return a callable function")})}return v.workerModuleData={isWorkerModule:!0,id:p,name:h,dependencies:t,init:zp(r),getTransferables:l&&zp(l)},v}function Sl(i){pd[i]&&pd[i].forEach(function(t){t()}),cd[i]&&(cd[i].terminate(),delete cd[i])}function zp(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function k1(i){var t=cd[i];if(!t){var r=zp(c3);t=cd[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+r+")()"],{type:"application/javascript"}))),t.onmessage=function(l){var c=l.data,p=c.messageId,h=Vm[p];if(!h)throw new Error("WorkerModule response with empty or unknown messageId");delete Vm[p],h(c)}}return t}function dh(i,t,r){return new Promise(function(l,c){var p=++Hy;Vm[p]=function(h){h.success?l(h.result):c(new Error("Error in worker "+t+" call: "+h.error))},k1(i).postMessage({messageId:p,action:t,data:r})})}var dd=A(25108);function hh(){var i=function(t){function r(Pe,Ye,Ce,Ee,_e,oe,Ae,Te){var ve=1-Ae;Te.x=ve*ve*Pe+2*ve*Ae*Ce+Ae*Ae*_e,Te.y=ve*ve*Ye+2*ve*Ae*Ee+Ae*Ae*oe}function l(Pe,Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge){var bt=1-ve;Ge.x=bt*bt*bt*Pe+3*bt*bt*ve*Ce+3*bt*ve*ve*_e+ve*ve*ve*Ae,Ge.y=bt*bt*bt*Ye+3*bt*bt*ve*Ee+3*bt*ve*ve*oe+ve*ve*ve*Te}function c(Pe,Ye){for(var Ce=/([MLQCZ])([^MLQCZ]*)/g,Ee,_e,oe,Ae,Te;Ee=Ce.exec(Pe);){var ve=Ee[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Ge){return parseFloat(Ge)});switch(Ee[1]){case"M":Ae=_e=ve[0],Te=oe=ve[1];break;case"L":(ve[0]!==Ae||ve[1]!==Te)&&Ye("L",Ae,Te,Ae=ve[0],Te=ve[1]);break;case"Q":{Ye("Q",Ae,Te,Ae=ve[2],Te=ve[3],ve[0],ve[1]);break}case"C":{Ye("C",Ae,Te,Ae=ve[4],Te=ve[5],ve[0],ve[1],ve[2],ve[3]);break}case"Z":(Ae!==_e||Te!==oe)&&Ye("L",Ae,Te,_e,oe);break}}}function p(Pe,Ye,Ce){Ce===void 0&&(Ce=16);var Ee={x:0,y:0};c(Pe,function(_e,oe,Ae,Te,ve,Ge,bt,mt,gt){switch(_e){case"L":Ye(oe,Ae,Te,ve);break;case"Q":{for(var rt=oe,Wt=Ae,kt=1;kt<Ce;kt++)r(oe,Ae,Ge,bt,Te,ve,kt/(Ce-1),Ee),Ye(rt,Wt,Ee.x,Ee.y),rt=Ee.x,Wt=Ee.y;break}case"C":{for(var Bt=oe,qe=Ae,Ne=1;Ne<Ce;Ne++)l(oe,Ae,Ge,bt,mt,gt,Te,ve,Ne/(Ce-1),Ee),Ye(Bt,qe,Ee.x,Ee.y),Bt=Ee.x,qe=Ee.y;break}}})}var h="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",g="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",v=new WeakMap,_={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function b(Pe,Ye){var Ce=Pe.getContext?Pe.getContext("webgl",_):Pe,Ee=v.get(Ce);if(!Ee){let bt=function(Bt){var qe=oe[Bt];if(!qe&&(qe=oe[Bt]=Ce.getExtension(Bt),!qe))throw new Error(Bt+" not supported");return qe},mt=function(Bt,qe){var Ne=Ce.createShader(qe);return Ce.shaderSource(Ne,Bt),Ce.compileShader(Ne),Ne},gt=function(Bt,qe,Ne,It){if(!Ae[Bt]){var mn={},Sn={},zt=Ce.createProgram();Ce.attachShader(zt,mt(qe,Ce.VERTEX_SHADER)),Ce.attachShader(zt,mt(Ne,Ce.FRAGMENT_SHADER)),Ce.linkProgram(zt),Ae[Bt]={program:zt,transaction:function(ar){Ce.useProgram(zt),ar({setUniform:function(ur,_i){for(var gi=[],br=arguments.length-2;br-- >0;)gi[br]=arguments[br+2];var Pr=Sn[_i]||(Sn[_i]=Ce.getUniformLocation(zt,_i));Ce["uniform"+ur].apply(Ce,[Pr].concat(gi))},setAttribute:function(ur,_i,gi,br,Pr){var Oi=mn[ur];Oi||(Oi=mn[ur]={buf:Ce.createBuffer(),loc:Ce.getAttribLocation(zt,ur),data:null}),Ce.bindBuffer(Ce.ARRAY_BUFFER,Oi.buf),Ce.vertexAttribPointer(Oi.loc,_i,Ce.FLOAT,!1,0,0),Ce.enableVertexAttribArray(Oi.loc),_e?Ce.vertexAttribDivisor(Oi.loc,br):bt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Oi.loc,br),Pr!==Oi.data&&(Ce.bufferData(Ce.ARRAY_BUFFER,Pr,gi),Oi.data=Pr)}})}}}Ae[Bt].transaction(It)},rt=function(Bt,qe){ve++;try{Ce.activeTexture(Ce.TEXTURE0+ve);var Ne=Te[Bt];Ne||(Ne=Te[Bt]=Ce.createTexture(),Ce.bindTexture(Ce.TEXTURE_2D,Ne),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.NEAREST),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.NEAREST)),Ce.bindTexture(Ce.TEXTURE_2D,Ne),qe(Ne,ve)}finally{ve--}},Wt=function(Bt,qe,Ne){var It=Ce.createFramebuffer();Ge.push(It),Ce.bindFramebuffer(Ce.FRAMEBUFFER,It),Ce.activeTexture(Ce.TEXTURE0+qe),Ce.bindTexture(Ce.TEXTURE_2D,Bt),Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_2D,Bt,0);try{Ne(It)}finally{Ce.deleteFramebuffer(It),Ce.bindFramebuffer(Ce.FRAMEBUFFER,Ge[--Ge.length-1]||null)}},kt=function(){oe={},Ae={},Te={},ve=-1,Ge.length=0};var _e=typeof WebGL2RenderingContext!="undefined"&&Ce instanceof WebGL2RenderingContext,oe={},Ae={},Te={},ve=-1,Ge=[];Ce.canvas.addEventListener("webglcontextlost",function(Bt){kt(),Bt.preventDefault()},!1),v.set(Ce,Ee={gl:Ce,isWebGL2:_e,getExtension:bt,withProgram:gt,withTexture:rt,withTextureFramebuffer:Wt,handleContextLoss:kt})}Ye(Ee)}function T(Pe,Ye,Ce,Ee,_e,oe,Ae,Te){Ae===void 0&&(Ae=15),Te===void 0&&(Te=null),b(Pe,function(ve){var Ge=ve.gl,bt=ve.withProgram,mt=ve.withTexture;mt("copy",function(gt,rt){Ge.texImage2D(Ge.TEXTURE_2D,0,Ge.RGBA,_e,oe,0,Ge.RGBA,Ge.UNSIGNED_BYTE,Ye),bt("copy",h,g,function(Wt){var kt=Wt.setUniform,Bt=Wt.setAttribute;Bt("aUV",2,Ge.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),kt("1i","image",rt),Ge.bindFramebuffer(Ge.FRAMEBUFFER,Te||null),Ge.disable(Ge.BLEND),Ge.colorMask(Ae&8,Ae&4,Ae&2,Ae&1),Ge.viewport(Ce,Ee,_e,oe),Ge.scissor(Ce,Ee,_e,oe),Ge.drawArrays(Ge.TRIANGLES,0,3)})})})}function R(Pe,Ye,Ce){var Ee=Pe.width,_e=Pe.height;b(Pe,function(oe){var Ae=oe.gl,Te=new Uint8Array(Ee*_e*4);Ae.readPixels(0,0,Ee,_e,Ae.RGBA,Ae.UNSIGNED_BYTE,Te),Pe.width=Ye,Pe.height=Ce,T(Ae,Te,0,0,Ee,_e)})}var F=Object.freeze({__proto__:null,withWebGLContext:b,renderImageData:T,resizeWebGLCanvasWithoutClearing:R});function G(Pe,Ye,Ce,Ee,_e,oe){oe===void 0&&(oe=1);var Ae=new Uint8Array(Pe*Ye),Te=Ee[2]-Ee[0],ve=Ee[3]-Ee[1],Ge=[];p(Ce,function(Bt,qe,Ne,It){Ge.push({x1:Bt,y1:qe,x2:Ne,y2:It,minX:Math.min(Bt,Ne),minY:Math.min(qe,It),maxX:Math.max(Bt,Ne),maxY:Math.max(qe,It)})}),Ge.sort(function(Bt,qe){return Bt.maxX-qe.maxX});for(var bt=0;bt<Pe;bt++)for(var mt=0;mt<Ye;mt++){var gt=Wt(Ee[0]+Te*(bt+.5)/Pe,Ee[1]+ve*(mt+.5)/Ye),rt=Math.pow(1-Math.abs(gt)/_e,oe)/2;gt<0&&(rt=1-rt),rt=Math.max(0,Math.min(255,Math.round(rt*255))),Ae[mt*Pe+bt]=rt}return Ae;function Wt(Bt,qe){for(var Ne=1/0,It=1/0,mn=Ge.length;mn--;){var Sn=Ge[mn];if(Sn.maxX+It<=Bt)break;if(Bt+It>Sn.minX&&qe-It<Sn.maxY&&qe+It>Sn.minY){var zt=k(Bt,qe,Sn.x1,Sn.y1,Sn.x2,Sn.y2);zt<Ne&&(Ne=zt,It=Math.sqrt(Ne))}}return kt(Bt,qe)&&(It=-It),It}function kt(Bt,qe){for(var Ne=0,It=Ge.length;It--;){var mn=Ge[It];if(mn.maxX<=Bt)break;var Sn=mn.y1>qe!=mn.y2>qe&&Bt<(mn.x2-mn.x1)*(qe-mn.y1)/(mn.y2-mn.y1)+mn.x1;Sn&&(Ne+=mn.y1<mn.y2?1:-1)}return Ne!==0}}function L(Pe,Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge){oe===void 0&&(oe=1),Te===void 0&&(Te=0),ve===void 0&&(ve=0),Ge===void 0&&(Ge=0),O(Pe,Ye,Ce,Ee,_e,oe,Ae,null,Te,ve,Ge)}function O(Pe,Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge,bt){oe===void 0&&(oe=1),ve===void 0&&(ve=0),Ge===void 0&&(Ge=0),bt===void 0&&(bt=0);for(var mt=G(Pe,Ye,Ce,Ee,_e,oe),gt=new Uint8Array(mt.length*4),rt=0;rt<mt.length;rt++)gt[rt*4+bt]=mt[rt];T(Ae,gt,ve,Ge,Pe,Ye,1<<3-bt,Te)}function k(Pe,Ye,Ce,Ee,_e,oe){var Ae=_e-Ce,Te=oe-Ee,ve=Ae*Ae+Te*Te,Ge=ve?Math.max(0,Math.min(1,((Pe-Ce)*Ae+(Ye-Ee)*Te)/ve)):0,bt=Pe-(Ce+Ge*Ae),mt=Ye-(Ee+Ge*Te);return bt*bt+mt*mt}var P=Object.freeze({__proto__:null,generate:G,generateIntoCanvas:L,generateIntoFramebuffer:O}),z="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",j="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",Q="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",W=new Float32Array([0,0,2,0,0,2]),Y=null,K=!1,se={},ce=new WeakMap;function ge(Pe){if(!K&&!Be(Pe))throw new Error("WebGL generation not supported")}function le(Pe,Ye,Ce,Ee,_e,oe,Ae){if(oe===void 0&&(oe=1),Ae===void 0&&(Ae=null),!Ae&&(Ae=Y,!Ae)){var Te=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document!="undefined"?document.createElement("canvas"):null;if(!Te)throw new Error("OffscreenCanvas or DOM canvas not supported");Ae=Y=Te.getContext("webgl",{depth:!1})}ge(Ae);var ve=new Uint8Array(Pe*Ye*4);b(Ae,function(gt){var rt=gt.gl,Wt=gt.withTexture,kt=gt.withTextureFramebuffer;Wt("readable",function(Bt,qe){rt.texImage2D(rt.TEXTURE_2D,0,rt.RGBA,Pe,Ye,0,rt.RGBA,rt.UNSIGNED_BYTE,null),kt(Bt,qe,function(Ne){me(Pe,Ye,Ce,Ee,_e,oe,rt,Ne,0,0,0),rt.readPixels(0,0,Pe,Ye,rt.RGBA,rt.UNSIGNED_BYTE,ve)})})});for(var Ge=new Uint8Array(Pe*Ye),bt=0,mt=0;bt<ve.length;bt+=4)Ge[mt++]=ve[bt];return Ge}function xe(Pe,Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge){oe===void 0&&(oe=1),Te===void 0&&(Te=0),ve===void 0&&(ve=0),Ge===void 0&&(Ge=0),me(Pe,Ye,Ce,Ee,_e,oe,Ae,null,Te,ve,Ge)}function me(Pe,Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge,bt){oe===void 0&&(oe=1),ve===void 0&&(ve=0),Ge===void 0&&(Ge=0),bt===void 0&&(bt=0),ge(Ae);var mt=[];p(Ce,function(gt,rt,Wt,kt){mt.push(gt,rt,Wt,kt)}),mt=new Float32Array(mt),b(Ae,function(gt){var rt=gt.gl,Wt=gt.isWebGL2,kt=gt.getExtension,Bt=gt.withProgram,qe=gt.withTexture,Ne=gt.withTextureFramebuffer,It=gt.handleContextLoss;if(qe("rawDistances",function(mn,Sn){(Pe!==mn._lastWidth||Ye!==mn._lastHeight)&&rt.texImage2D(rt.TEXTURE_2D,0,rt.RGBA,mn._lastWidth=Pe,mn._lastHeight=Ye,0,rt.RGBA,rt.UNSIGNED_BYTE,null),Bt("main",z,j,function(zt){var Vn=zt.setAttribute,ar=zt.setUniform,_r=!Wt&&kt("ANGLE_instanced_arrays"),ur=!Wt&&kt("EXT_blend_minmax");Vn("aUV",2,rt.STATIC_DRAW,0,W),Vn("aLineSegment",4,rt.DYNAMIC_DRAW,1,mt),ar.apply(void 0,["4f","uGlyphBounds"].concat(Ee)),ar("1f","uMaxDistance",_e),ar("1f","uExponent",oe),Ne(mn,Sn,function(_i){rt.enable(rt.BLEND),rt.colorMask(!0,!0,!0,!0),rt.viewport(0,0,Pe,Ye),rt.scissor(0,0,Pe,Ye),rt.blendFunc(rt.ONE,rt.ONE),rt.blendEquationSeparate(rt.FUNC_ADD,Wt?rt.MAX:ur.MAX_EXT),rt.clear(rt.COLOR_BUFFER_BIT),Wt?rt.drawArraysInstanced(rt.TRIANGLES,0,3,mt.length/4):_r.drawArraysInstancedANGLE(rt.TRIANGLES,0,3,mt.length/4)})}),Bt("post",h,Q,function(zt){zt.setAttribute("aUV",2,rt.STATIC_DRAW,0,W),zt.setUniform("1i","tex",Sn),rt.bindFramebuffer(rt.FRAMEBUFFER,Te),rt.disable(rt.BLEND),rt.colorMask(bt===0,bt===1,bt===2,bt===3),rt.viewport(ve,Ge,Pe,Ye),rt.scissor(ve,Ge,Pe,Ye),rt.drawArrays(rt.TRIANGLES,0,3)})}),rt.isContextLost())throw It(),new Error("webgl context lost")})}function Be(Pe){var Ye=!Pe||Pe===Y?se:Pe.canvas||Pe,Ce=ce.get(Ye);if(Ce===void 0){K=!0;var Ee=null;try{var _e=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=le(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Pe);Ce=oe&&_e.length===oe.length&&oe.every(function(Ae,Te){return Ae===_e[Te]}),Ce||(Ee="bad trial run results",dd.info(_e,oe))}catch(Ae){Ce=!1,Ee=Ae.message}Ee&&dd.warn("WebGL SDF generation not supported:",Ee),K=!1,ce.set(Ye,Ce)}return Ce}var ke=Object.freeze({__proto__:null,generate:le,generateIntoCanvas:xe,generateIntoFramebuffer:me,isSupported:Be});function Re(Pe,Ye,Ce,Ee,_e,oe){_e===void 0&&(_e=Math.max(Ee[2]-Ee[0],Ee[3]-Ee[1])/2),oe===void 0&&(oe=1);try{return le.apply(ke,arguments)}catch(Ae){return dd.info("WebGL SDF generation failed, falling back to JS",Ae),G.apply(P,arguments)}}function ze(Pe,Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge){_e===void 0&&(_e=Math.max(Ee[2]-Ee[0],Ee[3]-Ee[1])/2),oe===void 0&&(oe=1),Te===void 0&&(Te=0),ve===void 0&&(ve=0),Ge===void 0&&(Ge=0);try{return xe.apply(ke,arguments)}catch(bt){return dd.info("WebGL SDF generation failed, falling back to JS",bt),L.apply(P,arguments)}}return t.forEachPathCommand=c,t.generate=Re,t.generateIntoCanvas=ze,t.javascript=P,t.pathToLineSegments=p,t.webgl=ke,t.webglUtils=F,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}function vf(){var i=function(t){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},l={},c={};l.L=1,c[1]="L",Object.keys(r).forEach(function(It,mn){l[It]=1<<mn+1,c[l[It]]=It}),Object.freeze(l);var p=l.LRI|l.RLI|l.FSI,h=l.L|l.R|l.AL,g=l.B|l.S|l.WS|l.ON|l.FSI|l.LRI|l.RLI|l.PDI,v=l.BN|l.RLE|l.LRE|l.RLO|l.LRO|l.PDF,_=l.S|l.WS|l.B|p|l.PDI|v,b=null;function T(){if(!b){b=new Map;var It=function(Sn){if(r.hasOwnProperty(Sn)){var zt=0;r[Sn].split(",").forEach(function(Vn){var ar=Vn.split("+"),_r=ar[0],ur=ar[1];_r=parseInt(_r,36),ur=ur?parseInt(ur,36):0,b.set(zt+=_r,l[Sn]);for(var _i=0;_i<ur;_i++)b.set(++zt,l[Sn])})}};for(var mn in r)It(mn)}}function R(It){return T(),b.get(It.codePointAt(0))||l.L}function F(It){return c[R(It)]}var G={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function L(It,mn){var Sn=36,zt=0,Vn=new Map,ar=mn&&new Map,_r;return It.split(",").forEach(function ur(_i){if(_i.indexOf("+")!==-1)for(var gi=+_i;gi--;)ur(_r);else{_r=_i;var br=_i.split(">"),Pr=br[0],Oi=br[1];Pr=String.fromCodePoint(zt+=parseInt(Pr,Sn)),Oi=String.fromCodePoint(zt+=parseInt(Oi,Sn)),Vn.set(Pr,Oi),mn&&ar.set(Oi,Pr)}}),{map:Vn,reverseMap:ar}}var O,k,P;function z(){if(!O){var It=L(G.pairs,!0),mn=It.map,Sn=It.reverseMap;O=mn,k=Sn,P=L(G.canonical,!1).map}}function j(It){return z(),O.get(It)||null}function Q(It){return z(),k.get(It)||null}function W(It){return z(),P.get(It)||null}var Y=l.L,K=l.R,se=l.EN,ce=l.ES,ge=l.ET,le=l.AN,xe=l.CS,me=l.B,Be=l.S,ke=l.ON,Re=l.BN,ze=l.NSM,Pe=l.AL,Ye=l.LRO,Ce=l.RLO,Ee=l.LRE,_e=l.RLE,oe=l.PDF,Ae=l.LRI,Te=l.RLI,ve=l.FSI,Ge=l.PDI;function bt(It,mn){for(var Sn=125,zt=new Uint32Array(It.length),Vn=0;Vn<It.length;Vn++)zt[Vn]=R(It[Vn]);var ar=new Map;function _r(Vl,Ou){var Gc=zt[Vl];zt[Vl]=Ou,ar.set(Gc,ar.get(Gc)-1),Gc&g&&ar.set(g,ar.get(g)-1),ar.set(Ou,(ar.get(Ou)||0)+1),Ou&g&&ar.set(g,(ar.get(g)||0)+1)}for(var ur=new Uint8Array(It.length),_i=new Map,gi=[],br=null,Pr=0;Pr<It.length;Pr++)br||gi.push(br={start:Pr,end:It.length-1,level:mn==="rtl"?1:mn==="ltr"?0:kS(Pr,!1)}),zt[Pr]&me&&(br.end=Pr,br=null);for(var Oi=_e|Ee|Ce|Ye|p|Ge|oe|me,fo=function(Vl){return Vl+(Vl&1?1:2)},ut=function(Vl){return Vl+(Vl&1?2:1)},vn=0;vn<gi.length;vn++){br=gi[vn];var On=[{_level:br.level,_override:0,_isolate:0}],or=void 0,Qr=0,ri=0,ui=0;ar.clear();for(var si=br.start;si<=br.end;si++){var bn=zt[si];if(or=On[On.length-1],ar.set(bn,(ar.get(bn)||0)+1),bn&g&&ar.set(g,(ar.get(g)||0)+1),bn&Oi)if(bn&(_e|Ee)){ur[si]=or._level;var qi=(bn===_e?ut:fo)(or._level);qi<=Sn&&!Qr&&!ri?On.push({_level:qi,_override:0,_isolate:0}):Qr||ri++}else if(bn&(Ce|Ye)){ur[si]=or._level;var Bl=(bn===Ce?ut:fo)(or._level);Bl<=Sn&&!Qr&&!ri?On.push({_level:Bl,_override:bn&Ce?K:Y,_isolate:0}):Qr||ri++}else if(bn&p){bn&ve&&(bn=kS(si+1,!0)===1?Te:Ae),ur[si]=or._level,or._override&&_r(si,or._override);var kh=(bn===Te?ut:fo)(or._level);kh<=Sn&&Qr===0&&ri===0?(ui++,On.push({_level:kh,_override:0,_isolate:1,_isolInitIndex:si})):Qr++}else if(bn&Ge){if(Qr>0)Qr--;else if(ui>0){for(ri=0;!On[On.length-1]._isolate;)On.pop();var kd=On[On.length-1]._isolInitIndex;kd!=null&&(_i.set(kd,si),_i.set(si,kd)),On.pop(),ui--}or=On[On.length-1],ur[si]=or._level,or._override&&_r(si,or._override)}else bn&oe?(Qr===0&&(ri>0?ri--:!or._isolate&&On.length>1&&(On.pop(),or=On[On.length-1])),ur[si]=or._level):bn&me&&(ur[si]=br.level);else ur[si]=or._level,or._override&&bn!==Re&&_r(si,or._override)}for(var kc=[],dc=null,Os=br.start;Os<=br.end;Os++){var Am=zt[Os];if(!(Am&v)){var Xs=ur[Os],Ds=Am&p,rp=Am===Ge;dc&&Xs===dc._level?(dc._end=Os,dc._endsWithIsolInit=Ds):kc.push(dc={_start:Os,_end:Os,_level:Xs,_startsWithPDI:rp,_endsWithIsolInit:Ds})}}for(var hc=[],go=0;go<kc.length;go++){var Ja=kc[go];if(!Ja._startsWithPDI||Ja._startsWithPDI&&!_i.has(Ja._start)){for(var fl=[dc=Ja],aa=void 0;dc&&dc._endsWithIsolInit&&(aa=_i.get(dc._end))!=null;)for(var qr=go+1;qr<kc.length;qr++)if(kc[qr]._start===aa){fl.push(dc=kc[qr]);break}for(var gl=[],zd=0;zd<fl.length;zd++)for(var ye=fl[zd],Ie=ye._start;Ie<=ye._end;Ie++)gl.push(Ie);for(var ct=ur[gl[0]],Nt=br.level,Zt=gl[0]-1;Zt>=0;Zt--)if(!(zt[Zt]&v)){Nt=ur[Zt];break}var en=gl[gl.length-1],Qn=ur[en],In=br.level;if(!(zt[en]&p)){for(var Jn=en+1;Jn<=br.end;Jn++)if(!(zt[Jn]&v)){In=ur[Jn];break}}hc.push({_seqIndices:gl,_sosType:Math.max(Nt,ct)%2?K:Y,_eosType:Math.max(In,Qn)%2?K:Y})}}for(var qn=0;qn<hc.length;qn++){var nr=hc[qn],Vt=nr._seqIndices,Do=nr._sosType,jr=nr._eosType;if(ar.get(ze))for(var Hr=0;Hr<Vt.length;Hr++){var Ei=Vt[Hr];if(zt[Ei]&ze){for(var Di=Do,mo=Hr-1;mo>=0;mo--)if(!(zt[Vt[mo]]&v)){Di=zt[Vt[mo]];break}_r(Ei,Di&(p|Ge)?ke:Di)}}if(ar.get(se))for(var vo=0;vo<Vt.length;vo++){var la=Vt[vo];if(zt[la]&se)for(var Da=vo-1;Da>=-1;Da--){var Po=Da===-1?Do:zt[Vt[Da]];if(Po&h){Po===Pe&&_r(la,le);break}}}if(ar.get(Pe))for(var zc=0;zc<Vt.length;zc++){var Ko=Vt[zc];zt[Ko]&Pe&&_r(Ko,K)}if(ar.get(ce)||ar.get(xe))for(var Ps=1;Ps<Vt.length-1;Ps++){var ip=Vt[Ps];if(zt[ip]&(ce|xe)){for(var Kp=0,Wl=0,_o=Ps-1;_o>=0&&(Kp=zt[Vt[_o]],!!(Kp&v));_o--);for(var Pa=Ps+1;Pa<Vt.length&&(Wl=zt[Vt[Pa]],!!(Wl&v));Pa++);Kp===Wl&&(zt[ip]===ce?Kp===se:Kp&(se|le))&&_r(ip,Kp)}}if(ar.get(se))for(var To=0;To<Vt.length;To++){var Eo=Vt[To];if(zt[Eo]&se){for(var Rl=To-1;Rl>=0&&zt[Vt[Rl]]&(ge|v);Rl--)_r(Vt[Rl],se);for(var Xp=To+1;Xp<Vt.length&&zt[Vt[Xp]]&(ge|v);Xp++)_r(Vt[Xp],se)}}if(ar.get(ge)||ar.get(ce)||ar.get(xe))for(var qa=0;qa<Vt.length;qa++){var Iu=Vt[qa];if(zt[Iu]&(ge|ce|xe)){_r(Iu,ke);for(var $2=qa-1;$2>=0&&zt[Vt[$2]]&v;$2--)_r(Vt[$2],ke);for(var e_=qa+1;e_<Vt.length&&zt[Vt[e_]]&v;e_++)_r(Vt[e_],ke)}}if(ar.get(se))for(var Pb=0,wS=Do;Pb<Vt.length;Pb++){var TS=Vt[Pb],Lb=zt[TS];Lb&se?wS===Y&&_r(TS,Y):Lb&h&&(wS=Lb)}if(ar.get(g)){var KA=K|se|le,BS=KA|Y,t_=[];{for(var Z0=[],$0=0;$0<Vt.length;$0++)if(zt[Vt[$0]]&g){var XA=It[Vt[$0]],RS=void 0;if(j(XA)!==null)if(Z0.length<63)Z0.push({char:XA,seqIndex:$0});else break;else if((RS=Q(XA))!==null)for(var YA=Z0.length-1;YA>=0;YA--){var kb=Z0[YA].char;if(kb===RS||kb===Q(W(XA))||j(W(kb))===XA){t_.push([Z0[YA].seqIndex,$0]),Z0.length=YA;break}}}t_.sort(function(Vl,Ou){return Vl[0]-Ou[0]})}for(var zb=0;zb<t_.length;zb++){for(var IS=t_[zb],JA=IS[0],n_=IS[1],FS=!1,Fu=0,Gb=JA+1;Gb<n_;Gb++){var Nb=Vt[Gb];if(zt[Nb]&BS){FS=!0;var OS=zt[Nb]&KA?K:Y;if(OS===e1(Nb)){Fu=OS;break}}}if(FS&&!Fu){Fu=Do;for(var Ub=JA-1;Ub>=0;Ub--){var r_=Vt[Ub];if(zt[r_]&BS){var DS=zt[r_]&KA?K:Y;DS!==e1(r_)?Fu=DS:Fu=e1(r_);break}}}if(Fu){if(zt[Vt[JA]]=zt[Vt[n_]]=Fu,Fu!==e1(Vt[JA])){for(var qA=JA+1;qA<Vt.length;qA++)if(!(zt[Vt[qA]]&v)){R(It[Vt[qA]])&ze&&(zt[Vt[qA]]=Fu);break}}if(Fu!==e1(Vt[n_])){for(var ZA=n_+1;ZA<Vt.length;ZA++)if(!(zt[Vt[ZA]]&v)){R(It[Vt[ZA]])&ze&&(zt[Vt[ZA]]=Fu);break}}}}for(var Vf=0;Vf<Vt.length;Vf++)if(zt[Vt[Vf]]&g){for(var PS=Vf,jb=Vf,Hb=Do,$A=Vf-1;$A>=0;$A--)if(zt[Vt[$A]]&v)PS=$A;else{Hb=zt[Vt[$A]]&KA?K:Y;break}for(var LS=jr,ey=Vf+1;ey<Vt.length;ey++)if(zt[Vt[ey]]&(g|v))jb=ey;else{LS=zt[Vt[ey]]&KA?K:Y;break}for(var i_=PS;i_<=jb;i_++)zt[Vt[i_]]=Hb===LS?Hb:e1(Vt[i_]);Vf=jb}}}for(var op=br.start;op<=br.end;op++){var tI=ur[op],o_=zt[op];if(tI&1?o_&(Y|se|le)&&ur[op]++:o_&K?ur[op]++:o_&(le|se)&&(ur[op]+=2),o_&v&&(ur[op]=op===0?br.level:ur[op-1]),op===br.end||R(It[op])&(Be|me))for(var s_=op;s_>=0&&R(It[s_])&_;s_--)ur[s_]=br.level}}return{levels:ur,paragraphs:gi};function kS(Vl,Ou){for(var Gc=Vl;Gc<It.length;Gc++){var Qf=zt[Gc];if(Qf&(K|Pe))return 1;if(Qf&(me|Y)||Ou&&Qf===Ge)return 0;if(Qf&p){var zS=nI(Gc);Gc=zS===-1?It.length:zS}}return 0}function nI(Vl){for(var Ou=1,Gc=Vl+1;Gc<It.length;Gc++){var Qf=zt[Gc];if(Qf&me)break;if(Qf&Ge){if(--Ou===0)return Gc}else Qf&p&&Ou++}return-1}function e1(Vl){return ur[Vl]&1?K:Y}}var mt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",gt;function rt(){if(!gt){var It=L(mt,!0),mn=It.map,Sn=It.reverseMap;Sn.forEach(function(zt,Vn){mn.set(Vn,zt)}),gt=mn}}function Wt(It){return rt(),gt.get(It)||null}function kt(It,mn,Sn,zt){var Vn=It.length;Sn=Math.max(0,Sn==null?0:+Sn),zt=Math.min(Vn-1,zt==null?Vn-1:+zt);for(var ar=new Map,_r=Sn;_r<=zt;_r++)if(mn[_r]&1){var ur=Wt(It[_r]);ur!==null&&ar.set(_r,ur)}return ar}function Bt(It,mn,Sn,zt){var Vn=It.length;Sn=Math.max(0,Sn==null?0:+Sn),zt=Math.min(Vn-1,zt==null?Vn-1:+zt);var ar=[];return mn.paragraphs.forEach(function(_r){var ur=Math.max(Sn,_r.start),_i=Math.min(zt,_r.end);if(ur<_i){for(var gi=mn.levels.slice(ur,_i+1),br=_i;br>=ur&&R(It[br])&_;br--)gi[br]=_r.level;for(var Pr=_r.level,Oi=1/0,fo=0;fo<gi.length;fo++){var ut=gi[fo];ut>Pr&&(Pr=ut),ut<Oi&&(Oi=ut|1)}for(var vn=Pr;vn>=Oi;vn--)for(var On=0;On<gi.length;On++)if(gi[On]>=vn){for(var or=On;On+1<gi.length&&gi[On+1]>=vn;)On++;On>or&&ar.push([or+Sn,On+Sn])}}}),ar}function qe(It,mn,Sn,zt){var Vn=Ne(It,mn,Sn,zt),ar=[].concat(It);return Vn.forEach(function(_r,ur){ar[ur]=(mn.levels[_r]&1?Wt(It[_r]):null)||It[_r]}),ar.join("")}function Ne(It,mn,Sn,zt){for(var Vn=Bt(It,mn,Sn,zt),ar=[],_r=0;_r<It.length;_r++)ar[_r]=_r;return Vn.forEach(function(ur){for(var _i=ur[0],gi=ur[1],br=ar.slice(_i,gi+1),Pr=br.length;Pr--;)ar[gi-Pr]=br[Pr]}),ar}return t.closingToOpeningBracket=Q,t.getBidiCharType=R,t.getBidiCharTypeName=F,t.getCanonicalBracket=W,t.getEmbeddingLevels=bt,t.getMirroredCharacter=Wt,t.getMirroredCharactersMap=kt,t.getReorderSegments=Bt,t.getReorderedIndices=Ne,t.getReorderedString=qe,t.openingToClosingBracket=j,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}var _f=vf;const Ef=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Qm(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function r(l,c){let p=s.ShaderChunk[c];return p?Qm(p):l}return i.replace(t,r)}const oa=[];for(let i=0;i<256;i++)oa[i]=(i<16?"0":"")+i.toString(16);function Ig(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return(oa[i&255]+oa[i>>8&255]+oa[i>>16&255]+oa[i>>24&255]+"-"+oa[t&255]+oa[t>>8&255]+"-"+oa[t>>16&15|64]+oa[t>>24&255]+"-"+oa[r&63|128]+oa[r>>8&255]+"-"+oa[r>>16&255]+oa[r>>24&255]+oa[l&255]+oa[l>>8&255]+oa[l>>16&255]+oa[l>>24&255]).toUpperCase()}const Gp=Object.assign||function(){let i=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let l=arguments[t];if(l)for(let c in l)Object.prototype.hasOwnProperty.call(l,c)&&(i[c]=l[c])}return i},Wy=Date.now(),Km=new WeakMap,z1=new Map;let Vy=1e10;function fh(i,t){const r=Xy(t);let l=Km.get(i);if(l||Km.set(i,l=Object.create(null)),l[r])return new l[r];const c=`_onBeforeCompile${r}`,p=function(_,b){i.onBeforeCompile.call(this,_,b);const T=this.customProgramCacheKey()+"|"+_.vertexShader+"|"+_.fragmentShader;let R=z1[T];if(!R){const F=Xm(this,_,t,r);R=z1[T]=F}_.vertexShader=R.vertexShader,_.fragmentShader=R.fragmentShader,Gp(_.uniforms,this.uniforms),t.timeUniform&&(_.uniforms[t.timeUniform]={get value(){return Date.now()-Wy}}),this[c]&&this[c](_)},h=function(){return g(t.chained?i:i.clone())},g=function(_){const b=Object.create(_,v);return Object.defineProperty(b,"baseMaterial",{value:i}),Object.defineProperty(b,"id",{value:Vy++}),b.uuid=Ig(),b.uniforms=Gp({},_.uniforms,t.uniforms),b.defines=Gp({},_.defines,t.defines),b.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",b.extensions=Gp({},_.extensions,t.extensions),b._listeners=void 0,b},v={constructor:{value:h},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get(){return p},set(_){this[c]=_}},copy:{writable:!0,configurable:!0,value:function(_){return i.copy.call(this,_),!i.isShaderMaterial&&!i.isDerivedMaterial&&(Gp(this.extensions,_.extensions),Gp(this.defines,_.defines),Gp(this.uniforms,s.UniformsUtils.clone(_.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const _=new i.constructor;return g(_).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let _=this._depthMaterial;return _||(_=this._depthMaterial=fh(i.isDerivedMaterial?i.getDepthMaterial():new s.MeshDepthMaterial({depthPacking:s.RGBADepthPacking}),t),_.defines.IS_DEPTH_MATERIAL="",_.uniforms=this.uniforms),_}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let _=this._distanceMaterial;return _||(_=this._distanceMaterial=fh(i.isDerivedMaterial?i.getDistanceMaterial():new s.MeshDistanceMaterial,t),_.defines.IS_DISTANCE_MATERIAL="",_.uniforms=this.uniforms),_}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:_,_distanceMaterial:b}=this;_&&_.dispose(),b&&b.dispose(),i.dispose.call(this)}}};return l[r]=h,new h}function Xm(i,{vertexShader:t,fragmentShader:r},l,c){let{vertexDefs:p,vertexMainIntro:h,vertexMainOutro:g,vertexTransform:v,fragmentDefs:_,fragmentMainIntro:b,fragmentMainOutro:T,fragmentColorTransform:R,customRewriter:F,timeUniform:G}=l;if(p=p||"",h=h||"",g=g||"",_=_||"",b=b||"",T=T||"",(v||F)&&(t=Qm(t)),(R||F)&&(r=r.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),r=Qm(r)),F){let L=F({vertexShader:t,fragmentShader:r});t=L.vertexShader,r=L.fragmentShader}if(R){let L=[];r=r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,O=>(L.push(O),"")),T=`${R}
${L.join(`
`)}
${T}`}if(G){const L=`
uniform float ${G};
`;p=L+p,_=L+_}return v&&(t=`vec3 troika_position_${c};
vec3 troika_normal_${c};
vec2 troika_uv_${c};
${t}
`,p=`${p}
void troikaVertexTransform${c}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${v}
}
`,h=`
troika_position_${c} = vec3(position);
troika_normal_${c} = vec3(normal);
troika_uv_${c} = vec2(uv);
troikaVertexTransform${c}(troika_position_${c}, troika_normal_${c}, troika_uv_${c});
${h}
`,t=t.replace(/\b(position|normal|uv)\b/g,(L,O,k,P)=>/\battribute\s+vec[23]\s+$/.test(P.substr(0,k))?O:`troika_${O}_${c}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${c}`))),t=G1(t,c,p,h,g),r=G1(r,c,_,b,T),{vertexShader:t,fragmentShader:r}}function G1(i,t,r,l,c){return(l||c||r)&&(i=i.replace(Ef,`
${r}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${l}
  troikaOrigMain${t}();
  ${c}
}`),i}function Qy(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let Ky=0;const N1=new Map;function Xy(i){const t=JSON.stringify(i,Qy);let r=N1.get(t);return r==null&&N1.set(t,r=++Ky),r}const d3={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function h3(i){let t=d3[i.type];return t?ShaderLib[t]:i}function Fg(i){let t=/\buniform\s+(int|float|vec[234]|mat[34])\s+([A-Za-z_][\w]*)/g,r=Object.create(null),l;for(;(l=t.exec(i))!==null;)r[l[2]]=l[1];return r}function Yy(i,t=new Matrix4){return typeof t.invert=="function"?t.copy(i).invert():t.getInverse(i),t}const Jy=null,U1=null,qy=null,j1=null;function bf(i){return fh(i,{chained:!0,uniforms:{pointA:{value:new Vector3},controlA:{value:new Vector3},controlB:{value:new Vector3},pointB:{value:new Vector3},radius:{value:.01},dashing:{value:new Vector3}},vertexDefs:Jy,vertexTransform:U1,fragmentDefs:qy,fragmentMainIntro:j1})}let H1=null;const Zy=new s.MeshStandardMaterial({color:16777215,side:s.DoubleSide});class Og extends null{static getGeometry(){return H1||(H1=new CylinderGeometry(1,1,1,6,64).translate(0,.5,0))}constructor(){super(Og.getGeometry(),Zy),this.pointA=new Vector3,this.controlA=new Vector3,this.controlB=new Vector3,this.pointB=new Vector3,this.radius=.01,this.dashArray=new Vector2,this.dashOffset=0,this.frustumCulled=!1}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Zy.clone());return(!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=bf(r),r.addEventListener("dispose",function l(){r.removeEventListener("dispose",l),t.dispose()})),t}set material(t){this._baseMaterial=t}get customDepthMaterial(){return this.material.getDepthMaterial()}get customDistanceMaterial(){return this.material.getDistanceMaterial()}onBeforeRender(){const{uniforms:t}=this.material,{pointA:r,controlA:l,controlB:c,pointB:p,radius:h,dashArray:g,dashOffset:v}=this;t.pointA.value.copy(r),t.controlA.value.copy(l),t.controlB.value.copy(c),t.pointB.value.copy(p),t.radius.value=h,t.dashing.value.set(g.x,g.y,v||0)}raycast(){}}var Hs=A(25108);function Mf(i,t,r){const{defaultFontURL:l}=r,c=Object.create(null),p=1/0,h=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,g="[^\\S\\u00A0]",v=new RegExp(`${g}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function _(P,z){function j(){const Q=W=>{Hs.error(`Failure loading font ${P}${P===l?"":"; trying fallback"}`,W),P!==l&&(P=l,j())};try{const W=new XMLHttpRequest;W.open("get",P,!0),W.responseType="arraybuffer",W.onload=function(){if(W.status>=400)Q(new Error(W.statusText));else if(W.status>0)try{const Y=i(W.response);z(Y)}catch(Y){Q(Y)}},W.onerror=Q,W.send()}catch(W){Q(W)}}j()}function b(P,z){P||(P=l);let j=c[P];j?j.pending?j.pending.push(z):z(j):(c[P]={pending:[z]},_(P,Q=>{let W=c[P].pending;c[P]=Q,W.forEach(Y=>Y(Q))}))}function T({text:P="",font:z=l,sdfGlyphSize:j=64,fontSize:Q=1,letterSpacing:W=0,lineHeight:Y="normal",maxWidth:K=p,direction:se,textAlign:ce="left",textIndent:ge=0,whiteSpace:le="normal",overflowWrap:xe="normal",anchorX:me=0,anchorY:Be=0,includeCaretPositions:ke=!1,chunkedBoundsSize:Re=8192,colorRanges:ze=null},Pe,Ye=!1){const Ce=L(),Ee={fontLoad:0,typesetting:0};P.indexOf("\r")>-1&&(Hs.info("Typesetter: got text with \\r chars; normalizing to \\n"),P=P.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),Q=+Q,W=+W,K=+K,Y=Y||"normal",ge=+ge,b(z,_e=>{const oe=isFinite(K);let Ae=null,Te=null,ve=null,Ge=null,bt=null,mt=null,gt=null,rt=0,Wt=0,kt=le!=="nowrap";const{ascender:Bt,descender:qe,unitsPerEm:Ne,lineGap:It,capHeight:mn,xHeight:Sn}=_e;Ee.fontLoad=L()-Ce;const zt=L(),Vn=Q/Ne;Y==="normal"&&(Y=(Bt-qe+It)/Ne),Y=Y*Q;const ar=(Y-(Bt-qe)*Vn)/2,_r=-(Bt*Vn+ar),ur=Math.min(Y,(Bt-qe)*Vn),_i=(Bt+qe)/2*Vn-ur/2;let gi=ge,br=new O;const Pr=[br];_e.forEachGlyph(P,Q,W,(ut,vn,On)=>{const or=P.charAt(On),Qr=ut.advanceWidth*Vn,ri=br.count;let ui;if("isEmpty"in ut||(ut.isWhitespace=!!or&&new RegExp(g).test(or),ut.canBreakAfter=!!or&&v.test(or),ut.isEmpty=ut.xMin===ut.xMax||ut.yMin===ut.yMax||h.test(or)),!ut.isWhitespace&&!ut.isEmpty&&Wt++,kt&&oe&&!ut.isWhitespace&&vn+Qr+gi>K&&ri){if(br.glyphAt(ri-1).glyphObj.canBreakAfter)ui=new O,gi=-vn;else for(let bn=ri;bn--;)if(bn===0&&xe==="break-word"){ui=new O,gi=-vn;break}else if(br.glyphAt(bn).glyphObj.canBreakAfter){ui=br.splitAt(bn+1);const qi=ui.glyphAt(0).x;gi-=qi;for(let Bl=ui.count;Bl--;)ui.glyphAt(Bl).x-=qi;break}ui&&(br.isSoftWrapped=!0,br=ui,Pr.push(br),rt=K)}let si=br.glyphAt(br.count);si.glyphObj=ut,si.x=vn+gi,si.width=Qr,si.charIndex=On,or===`
`&&(br=new O,Pr.push(br),gi=-(vn+Qr+W*Q)+ge)}),Pr.forEach(ut=>{for(let vn=ut.count;vn--;){let{glyphObj:On,x:or,width:Qr}=ut.glyphAt(vn);if(!On.isWhitespace){ut.width=or+Qr,ut.width>rt&&(rt=ut.width);return}}});let Oi=0,fo=0;if(me&&(typeof me=="number"?Oi=-me:typeof me=="string"&&(Oi=-rt*(me==="left"?0:me==="center"?.5:me==="right"?1:F(me)))),Be){if(typeof Be=="number")fo=-Be;else if(typeof Be=="string"){let ut=Pr.length*Y;fo=Be==="top"?0:Be==="top-baseline"?-_r:Be==="top-cap"?-_r-mn*Vn:Be==="top-ex"?-_r-Sn*Vn:Be==="middle"?ut/2:Be==="bottom"?ut:Be==="bottom-baseline"?ut-ar+qe*Vn:F(Be)*ut}}if(!Ye){const ut=t.getEmbeddingLevels(P,se);Ae=new Uint16Array(Wt),Te=new Float32Array(Wt*2),ve={},mt=[p,p,-p,-p],gt=[];let vn=_r;ke&&(bt=new Float32Array(P.length*3)),ze&&(Ge=new Uint8Array(Wt*3));let On=0,or=-1,Qr=-1,ri,ui;if(Pr.forEach((si,bn)=>{let{count:qi,width:Bl}=si;if(qi>0){let kh=0;for(let Xs=qi;Xs--&&si.glyphAt(Xs).glyphObj.isWhitespace;)kh++;let kd=0,kc=0;if(ce==="center")kd=(rt-Bl)/2;else if(ce==="right")kd=rt-Bl;else if(ce==="justify"&&si.isSoftWrapped){let Xs=0;for(let Ds=qi-kh;Ds--;)si.glyphAt(Ds).glyphObj.isWhitespace&&Xs++;kc=(rt-Bl)/Xs}if(kc||kd){let Xs=0;for(let Ds=0;Ds<qi;Ds++){let rp=si.glyphAt(Ds);const hc=rp.glyphObj;rp.x+=kd+Xs,kc!==0&&hc.isWhitespace&&Ds<qi-kh&&(Xs+=kc,rp.width+=kc)}}const dc=t.getReorderSegments(P,ut,si.glyphAt(0).charIndex,si.glyphAt(si.count-1).charIndex);for(let Xs=0;Xs<dc.length;Xs++){const[Ds,rp]=dc[Xs];let hc=1/0,go=-1/0;for(let Ja=0;Ja<qi;Ja++)if(si.glyphAt(Ja).charIndex>=Ds){let fl=Ja,aa=Ja;for(;aa<qi;aa++){let qr=si.glyphAt(aa);if(qr.charIndex>rp)break;aa<qi-kh&&(hc=Math.min(hc,qr.x),go=Math.max(go,qr.x+qr.width))}for(let qr=fl;qr<aa;qr++){const gl=si.glyphAt(qr);gl.x=go-(gl.x+gl.width-hc)}break}}let Os;const Am=Xs=>Os=Xs;for(let Xs=0;Xs<qi;Xs++){let Ds=si.glyphAt(Xs);Os=Ds.glyphObj;const rp=Os.index,hc=ut.levels[Ds.charIndex]&1;if(hc){const go=t.getMirroredCharacter(P[Ds.charIndex]);go&&_e.forEachGlyph(go,0,0,Am)}if(ke){const{charIndex:go}=Ds,Ja=Ds.x+Oi,fl=Ds.x+Ds.width+Oi;bt[go*3]=hc?fl:Ja,bt[go*3+1]=hc?Ja:fl,bt[go*3+2]=vn+_i+fo;const aa=go-or;aa>1&&G(bt,or,aa),or=go}if(ze){const{charIndex:go}=Ds;for(;go>Qr;)Qr++,ze.hasOwnProperty(Qr)&&(ui=ze[Qr])}if(!Os.isWhitespace&&!Os.isEmpty){const go=On++;ve[rp]||(ve[rp]={path:Os.path,pathBounds:[Os.xMin,Os.yMin,Os.xMax,Os.yMax]});const Ja=Ds.x+Oi,fl=vn+fo;Te[go*2]=Ja,Te[go*2+1]=fl;const aa=Ja+Os.xMin*Vn,qr=fl+Os.yMin*Vn,gl=Ja+Os.xMax*Vn,zd=fl+Os.yMax*Vn;aa<mt[0]&&(mt[0]=aa),qr<mt[1]&&(mt[1]=qr),gl>mt[2]&&(mt[2]=gl),zd>mt[3]&&(mt[3]=zd),go%Re===0&&(ri={start:go,end:go,rect:[p,p,-p,-p]},gt.push(ri)),ri.end++;const ye=ri.rect;if(aa<ye[0]&&(ye[0]=aa),qr<ye[1]&&(ye[1]=qr),gl>ye[2]&&(ye[2]=gl),zd>ye[3]&&(ye[3]=zd),Ae[go]=rp,ze){const Ie=go*3;Ge[Ie]=ui>>16&255,Ge[Ie+1]=ui>>8&255,Ge[Ie+2]=ui&255}}}}vn-=Y}),bt){const si=P.length-or;si>1&&G(bt,or,si)}}Ee.typesetting=L()-zt,Pe({glyphIds:Ae,glyphPositions:Te,glyphData:ve,caretPositions:bt,caretHeight:ur,glyphColors:Ge,chunkedBounds:gt,fontSize:Q,unitsPerEm:Ne,ascender:Bt*Vn,descender:qe*Vn,capHeight:mn*Vn,xHeight:Sn*Vn,lineHeight:Y,topBaseline:_r,blockBounds:[Oi,fo-Pr.length*Y,Oi+rt,fo],visibleBounds:mt,timings:Ee})})}function R(P,z){T(P,j=>{const[Q,W,Y,K]=j.blockBounds;z({width:Y-Q,height:K-W})},{metricsOnly:!0})}function F(P){let z=P.match(/^([\d.]+)%$/),j=z?parseFloat(z[1]):NaN;return isNaN(j)?0:j/100}function G(P,z,j){const Q=P[z*3],W=P[z*3+1],Y=P[z*3+2],K=(W-Q)/j;for(let se=0;se<j;se++){const ce=(z+se)*3;P[ce]=Q+K*se,P[ce+1]=Q+K*(se+1),P[ce+2]=Y}}function L(){return(self.performance||Date).now()}function O(){this.data=[]}const k=["glyphObj","x","width","charIndex"];return O.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/k.length)},glyphAt(P){let z=O.flyweight;return z.data=this.data,z.index=P,z},splitAt(P){let z=new O;return z.data=this.data.splice(P*k.length),z}},O.flyweight=k.reduce((P,z,j,Q)=>(Object.defineProperty(P,z,{get(){return this.data[this.index*k.length+j]},set(W){this.data[this.index*k.length+j]=W}}),P),{data:null,index:0}),{typeset:T,measure:R,loadFont:b}}const hd=()=>(self.performance||Date).now(),gh=hh();let W1;function f3(i,t,r,l,c,p,h,g,v,_,b=!0){return b?$y(i,t,r,l,c,p,h,g,v,_).then(null,T=>(W1||(Hs.warn("WebGL SDF generation failed, falling back to JS",T),W1=!0),bu(i,t,r,l,c,p,h,g,v,_))):bu(i,t,r,l,c,p,h,g,v,_)}const fd=[],Dg=5;let Ym=0;function pl(){const i=hd();for(;fd.length&&hd()-i<Dg;)fd.shift()();Ym=fd.length?setTimeout(pl,0):0}const $y=(...i)=>new Promise((t,r)=>{fd.push(()=>{const l=hd();try{gh.webgl.generateIntoCanvas(...i),t({timing:hd()-l})}catch(c){r(c)}}),Ym||(Ym=setTimeout(pl,0))}),ev=4,tv=2e3,Jm={};let qm=0;function bu(i,t,r,l,c,p,h,g,v,_){const b="TroikaTextSDFGenerator_JS_"+qm++%ev;let T=Jm[b];return T||(T=Jm[b]={workerModule:ud({name:b,workerId:b,dependencies:[hh,hd],init(R,F){const G=R().javascript.generate;return function(...L){const O=F();return{textureData:G(...L),timing:F()-O}}},getTransferables(R){return[R.textureData.buffer]}}),requests:0,idleTimer:null}),T.requests++,clearTimeout(T.idleTimer),T.workerModule(i,t,r,l,c,p).then(({textureData:R,timing:F})=>{const G=hd(),L=new Uint8Array(R.length*4);for(let O=0;O<R.length;O++)L[O*4+_]=R[O];return gh.webglUtils.renderImageData(h,L,g,v,i,t,1<<3-_),F+=hd()-G,--T.requests===0&&(T.idleTimer=setTimeout(()=>{Sl(b)},tv)),{timing:F}})}function nv(i){i._warm||(gh.webgl.isSupported(i),i._warm=!0)}const rv=gh.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Np(){return typeof window=="undefined"&&(self.window=self),function(i){var t={parse:function(c){var p=t._bin,h=new Uint8Array(c);if(p.readASCII(h,0,4)=="ttcf"){var g=4;p.readUshort(h,g),g+=2,p.readUshort(h,g),g+=2;var v=p.readUint(h,g);g+=4;for(var _=[],b=0;b<v;b++){var T=p.readUint(h,g);g+=4,_.push(t._readFont(h,T))}return _}return[t._readFont(h,0)]},_readFont:function(c,p){var h=t._bin,g=p;h.readFixed(c,p),p+=4;var v=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2;for(var _=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],b={_data:c,_offset:g},T={},R=0;R<v;R++){var F=h.readASCII(c,p,4);p+=4,h.readUint(c,p),p+=4;var G=h.readUint(c,p);p+=4;var L=h.readUint(c,p);p+=4,T[F]={offset:G,length:L}}for(R=0;R<_.length;R++){var O=_[R];T[O]&&(b[O.trim()]=t[O.trim()].parse(c,T[O].offset,T[O].length,b))}return b},_tabOffset:function(c,p,h){for(var g=t._bin,v=g.readUshort(c,h+4),_=h+12,b=0;b<v;b++){var T=g.readASCII(c,_,4);_+=4,g.readUint(c,_),_+=4;var R=g.readUint(c,_);if(_+=4,g.readUint(c,_),_+=4,T==p)return R}return 0}};t._bin={readFixed:function(c,p){return(c[p]<<8|c[p+1])+(c[p+2]<<8|c[p+3])/65540},readF2dot14:function(c,p){return t._bin.readShort(c,p)/16384},readInt:function(c,p){return t._bin._view(c).getInt32(p)},readInt8:function(c,p){return t._bin._view(c).getInt8(p)},readShort:function(c,p){return t._bin._view(c).getInt16(p)},readUshort:function(c,p){return t._bin._view(c).getUint16(p)},readUshorts:function(c,p,h){for(var g=[],v=0;v<h;v++)g.push(t._bin.readUshort(c,p+2*v));return g},readUint:function(c,p){return t._bin._view(c).getUint32(p)},readUint64:function(c,p){return 4294967296*t._bin.readUint(c,p)+t._bin.readUint(c,p+4)},readASCII:function(c,p,h){for(var g="",v=0;v<h;v++)g+=String.fromCharCode(c[p+v]);return g},readUnicode:function(c,p,h){for(var g="",v=0;v<h;v++){var _=c[p++]<<8|c[p++];g+=String.fromCharCode(_)}return g},_tdec:typeof window!="undefined"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(c,p,h){var g=t._bin._tdec;return g&&p==0&&h==c.length?g.decode(c):t._bin.readASCII(c,p,h)},readBytes:function(c,p,h){for(var g=[],v=0;v<h;v++)g.push(c[p+v]);return g},readASCIIArray:function(c,p,h){for(var g=[],v=0;v<h;v++)g.push(String.fromCharCode(c[p+v]));return g},_view:function(c){return c._dataView||(c._dataView=c.buffer?new DataView(c.buffer,c.byteOffset,c.byteLength):new DataView(new Uint8Array(c).buffer))}},t._lctf={},t._lctf.parse=function(c,p,h,g,v){var _=t._bin,b={},T=p;_.readFixed(c,p),p+=4;var R=_.readUshort(c,p);p+=2;var F=_.readUshort(c,p);p+=2;var G=_.readUshort(c,p);return p+=2,b.scriptList=t._lctf.readScriptList(c,T+R),b.featureList=t._lctf.readFeatureList(c,T+F),b.lookupList=t._lctf.readLookupList(c,T+G,v),b},t._lctf.readLookupList=function(c,p,h){var g=t._bin,v=p,_=[],b=g.readUshort(c,p);p+=2;for(var T=0;T<b;T++){var R=g.readUshort(c,p);p+=2;var F=t._lctf.readLookupTable(c,v+R,h);_.push(F)}return _},t._lctf.readLookupTable=function(c,p,h){var g=t._bin,v=p,_={tabs:[]};_.ltype=g.readUshort(c,p),p+=2,_.flag=g.readUshort(c,p),p+=2;var b=g.readUshort(c,p);p+=2;for(var T=_.ltype,R=0;R<b;R++){var F=g.readUshort(c,p);p+=2;var G=h(c,T,v+F,_);_.tabs.push(G)}return _},t._lctf.numOfOnes=function(c){for(var p=0,h=0;h<32;h++)c>>>h&1&&p++;return p},t._lctf.readClassDef=function(c,p){var h=t._bin,g=[],v=h.readUshort(c,p);if(p+=2,v==1){var _=h.readUshort(c,p);p+=2;var b=h.readUshort(c,p);p+=2;for(var T=0;T<b;T++)g.push(_+T),g.push(_+T),g.push(h.readUshort(c,p)),p+=2}if(v==2){var R=h.readUshort(c,p);for(p+=2,T=0;T<R;T++)g.push(h.readUshort(c,p)),p+=2,g.push(h.readUshort(c,p)),p+=2,g.push(h.readUshort(c,p)),p+=2}return g},t._lctf.getInterval=function(c,p){for(var h=0;h<c.length;h+=3){var g=c[h],v=c[h+1];if(c[h+2],g<=p&&p<=v)return h}return-1},t._lctf.readCoverage=function(c,p){var h=t._bin,g={};g.fmt=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);return p+=2,g.fmt==1&&(g.tab=h.readUshorts(c,p,v)),g.fmt==2&&(g.tab=h.readUshorts(c,p,3*v)),g},t._lctf.coverageIndex=function(c,p){var h=c.tab;if(c.fmt==1)return h.indexOf(p);if(c.fmt==2){var g=t._lctf.getInterval(h,p);if(g!=-1)return h[g+2]+(p-h[g])}return-1},t._lctf.readFeatureList=function(c,p){var h=t._bin,g=p,v=[],_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readASCII(c,p,4);p+=4;var R=h.readUshort(c,p);p+=2;var F=t._lctf.readFeatureTable(c,g+R);F.tag=T.trim(),v.push(F)}return v},t._lctf.readFeatureTable=function(c,p){var h=t._bin,g=p,v={},_=h.readUshort(c,p);p+=2,_>0&&(v.featureParams=g+_);var b=h.readUshort(c,p);p+=2,v.tab=[];for(var T=0;T<b;T++)v.tab.push(h.readUshort(c,p+2*T));return v},t._lctf.readScriptList=function(c,p){var h=t._bin,g=p,v={},_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readASCII(c,p,4);p+=4;var R=h.readUshort(c,p);p+=2,v[T.trim()]=t._lctf.readScriptTable(c,g+R)}return v},t._lctf.readScriptTable=function(c,p){var h=t._bin,g=p,v={},_=h.readUshort(c,p);p+=2,v.default=t._lctf.readLangSysTable(c,g+_);var b=h.readUshort(c,p);p+=2;for(var T=0;T<b;T++){var R=h.readASCII(c,p,4);p+=4;var F=h.readUshort(c,p);p+=2,v[R.trim()]=t._lctf.readLangSysTable(c,g+F)}return v},t._lctf.readLangSysTable=function(c,p){var h=t._bin,g={};h.readUshort(c,p),p+=2,g.reqFeature=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);return p+=2,g.features=h.readUshorts(c,p,v),g},t.CFF={},t.CFF.parse=function(c,p,h){var g=t._bin;(c=new Uint8Array(c.buffer,p,h))[p=0],c[++p],c[++p],c[++p],p++;var v=[];p=t.CFF.readIndex(c,p,v);for(var _=[],b=0;b<v.length-1;b++)_.push(g.readASCII(c,p+v[b],v[b+1]-v[b]));p+=v[v.length-1];var T=[];p=t.CFF.readIndex(c,p,T);var R=[];for(b=0;b<T.length-1;b++)R.push(t.CFF.readDict(c,p+T[b],p+T[b+1]));p+=T[T.length-1];var F=R[0],G=[];p=t.CFF.readIndex(c,p,G);var L=[];for(b=0;b<G.length-1;b++)L.push(g.readASCII(c,p+G[b],G[b+1]-G[b]));if(p+=G[G.length-1],t.CFF.readSubrs(c,p,F),F.CharStrings){p=F.CharStrings,G=[],p=t.CFF.readIndex(c,p,G);var O=[];for(b=0;b<G.length-1;b++)O.push(g.readBytes(c,p+G[b],G[b+1]-G[b]));F.CharStrings=O}if(F.ROS){p=F.FDArray;var k=[];for(p=t.CFF.readIndex(c,p,k),F.FDArray=[],b=0;b<k.length-1;b++){var P=t.CFF.readDict(c,p+k[b],p+k[b+1]);t.CFF._readFDict(c,P,L),F.FDArray.push(P)}p+=k[k.length-1],p=F.FDSelect,F.FDSelect=[];var z=c[p];if(p++,z!=3)throw z;var j=g.readUshort(c,p);for(p+=2,b=0;b<j+1;b++)F.FDSelect.push(g.readUshort(c,p),c[p+2]),p+=3}return F.Encoding&&(F.Encoding=t.CFF.readEncoding(c,F.Encoding,F.CharStrings.length)),F.charset&&(F.charset=t.CFF.readCharset(c,F.charset,F.CharStrings.length)),t.CFF._readFDict(c,F,L),F},t.CFF._readFDict=function(c,p,h){var g;for(var v in p.Private&&(g=p.Private[1],p.Private=t.CFF.readDict(c,g,g+p.Private[0]),p.Private.Subrs&&t.CFF.readSubrs(c,g+p.Private.Subrs,p.Private)),p)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(v)!=-1&&(p[v]=h[p[v]-426+35])},t.CFF.readSubrs=function(c,p,h){var g=t._bin,v=[];p=t.CFF.readIndex(c,p,v);var _,b=v.length;_=b<1240?107:b<33900?1131:32768,h.Bias=_,h.Subrs=[];for(var T=0;T<v.length-1;T++)h.Subrs.push(g.readBytes(c,p+v[T],v[T+1]-v[T]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(c,p){for(var h=0;h<c.charset.length;h++)if(c.charset[h]==p)return h;return-1},t.CFF.glyphBySE=function(c,p){return p<0||p>255?-1:t.CFF.glyphByUnicode(c,t.CFF.tableSE[p])},t.CFF.readEncoding=function(c,p,h){t._bin;var g=[".notdef"],v=c[p];if(p++,v!=0)throw"error: unknown encoding format: "+v;var _=c[p];p++;for(var b=0;b<_;b++)g.push(c[p+b]);return g},t.CFF.readCharset=function(c,p,h){var g=t._bin,v=[".notdef"],_=c[p];if(p++,_==0)for(var b=0;b<h;b++){var T=g.readUshort(c,p);p+=2,v.push(T)}else{if(_!=1&&_!=2)throw"error: format: "+_;for(;v.length<h;){T=g.readUshort(c,p),p+=2;var R=0;for(_==1?(R=c[p],p++):(R=g.readUshort(c,p),p+=2),b=0;b<=R;b++)v.push(T),T++}}return v},t.CFF.readIndex=function(c,p,h){var g=t._bin,v=g.readUshort(c,p)+1,_=c[p+=2];if(p++,_==1)for(var b=0;b<v;b++)h.push(c[p+b]);else if(_==2)for(b=0;b<v;b++)h.push(g.readUshort(c,p+2*b));else if(_==3)for(b=0;b<v;b++)h.push(16777215&g.readUint(c,p+3*b-1));else if(v!=1)throw"unsupported offset size: "+_+", count: "+v;return(p+=v*_)-1},t.CFF.getCharString=function(c,p,h){var g=t._bin,v=c[p],_=c[p+1];c[p+2],c[p+3],c[p+4];var b=1,T=null,R=null;v<=20&&(T=v,b=1),v==12&&(T=100*v+_,b=2),21<=v&&v<=27&&(T=v,b=1),v==28&&(R=g.readShort(c,p+1),b=3),29<=v&&v<=31&&(T=v,b=1),32<=v&&v<=246&&(R=v-139,b=1),247<=v&&v<=250&&(R=256*(v-247)+_+108,b=2),251<=v&&v<=254&&(R=256*-(v-251)-_-108,b=2),v==255&&(R=g.readInt(c,p+1)/65535,b=5),h.val=R!=null?R:"o"+T,h.size=b},t.CFF.readCharString=function(c,p,h){for(var g=p+h,v=t._bin,_=[];p<g;){var b=c[p],T=c[p+1];c[p+2],c[p+3],c[p+4];var R=1,F=null,G=null;b<=20&&(F=b,R=1),b==12&&(F=100*b+T,R=2),b!=19&&b!=20||(F=b,R=2),21<=b&&b<=27&&(F=b,R=1),b==28&&(G=v.readShort(c,p+1),R=3),29<=b&&b<=31&&(F=b,R=1),32<=b&&b<=246&&(G=b-139,R=1),247<=b&&b<=250&&(G=256*(b-247)+T+108,R=2),251<=b&&b<=254&&(G=256*-(b-251)-T-108,R=2),b==255&&(G=v.readInt(c,p+1)/65535,R=5),_.push(G!=null?G:"o"+F),p+=R}return _},t.CFF.readDict=function(c,p,h){for(var g=t._bin,v={},_=[];p<h;){var b=c[p],T=c[p+1];c[p+2],c[p+3],c[p+4];var R=1,F=null,G=null;if(b==28&&(G=g.readShort(c,p+1),R=3),b==29&&(G=g.readInt(c,p+1),R=5),32<=b&&b<=246&&(G=b-139,R=1),247<=b&&b<=250&&(G=256*(b-247)+T+108,R=2),251<=b&&b<=254&&(G=256*-(b-251)-T-108,R=2),b==255)throw G=g.readInt(c,p+1)/65535,R=5,"unknown number";if(b==30){var L=[];for(R=1;;){var O=c[p+R];R++;var k=O>>4,P=15&O;if(k!=15&&L.push(k),P!=15&&L.push(P),P==15)break}for(var z="",j=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],Q=0;Q<L.length;Q++)z+=j[L[Q]];G=parseFloat(z)}b<=21&&(F=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][b],R=1,b==12&&(F=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][T],R=2)),F!=null?(v[F]=_.length==1?_[0]:_,_=[]):_.push(G),p+=R}return v},t.cmap={},t.cmap.parse=function(c,p,h){c=new Uint8Array(c.buffer,p,h),p=0;var g=t._bin,v={};g.readUshort(c,p),p+=2;var _=g.readUshort(c,p);p+=2;var b=[];v.tables=[];for(var T=0;T<_;T++){var R=g.readUshort(c,p);p+=2;var F=g.readUshort(c,p);p+=2;var G=g.readUint(c,p);p+=4;var L="p"+R+"e"+F,O=b.indexOf(G);if(O==-1){var k;O=v.tables.length,b.push(G);var P=g.readUshort(c,G);P==0?k=t.cmap.parse0(c,G):P==4?k=t.cmap.parse4(c,G):P==6?k=t.cmap.parse6(c,G):P==12?k=t.cmap.parse12(c,G):Hs.debug("unknown format: "+P,R,F,G),v.tables.push(k)}if(v[L]!=null)throw"multiple tables for one platform+encoding";v[L]=O}return v},t.cmap.parse0=function(c,p){var h=t._bin,g={};g.format=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2,g.map=[];for(var _=0;_<v-6;_++)g.map.push(c[p+_]);return g},t.cmap.parse4=function(c,p){var h=t._bin,g=p,v={};v.format=h.readUshort(c,p),p+=2;var _=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2;var b=h.readUshort(c,p);p+=2;var T=b/2;v.searchRange=h.readUshort(c,p),p+=2,v.entrySelector=h.readUshort(c,p),p+=2,v.rangeShift=h.readUshort(c,p),p+=2,v.endCount=h.readUshorts(c,p,T),p+=2*T,p+=2,v.startCount=h.readUshorts(c,p,T),p+=2*T,v.idDelta=[];for(var R=0;R<T;R++)v.idDelta.push(h.readShort(c,p)),p+=2;for(v.idRangeOffset=h.readUshorts(c,p,T),p+=2*T,v.glyphIdArray=[];p<g+_;)v.glyphIdArray.push(h.readUshort(c,p)),p+=2;return v},t.cmap.parse6=function(c,p){var h=t._bin,g={};g.format=h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,g.firstCode=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);p+=2,g.glyphIdArray=[];for(var _=0;_<v;_++)g.glyphIdArray.push(h.readUshort(c,p)),p+=2;return g},t.cmap.parse12=function(c,p){var h=t._bin,g={};g.format=h.readUshort(c,p),p+=2,p+=2,h.readUint(c,p),p+=4,h.readUint(c,p),p+=4;var v=h.readUint(c,p);p+=4,g.groups=[];for(var _=0;_<v;_++){var b=p+12*_,T=h.readUint(c,b+0),R=h.readUint(c,b+4),F=h.readUint(c,b+8);g.groups.push([T,R,F])}return g},t.glyf={},t.glyf.parse=function(c,p,h,g){for(var v=[],_=0;_<g.maxp.numGlyphs;_++)v.push(null);return v},t.glyf._parseGlyf=function(c,p){var h=t._bin,g=c._data,v=t._tabOffset(g,"glyf",c._offset)+c.loca[p];if(c.loca[p]==c.loca[p+1])return null;var _={};if(_.noc=h.readShort(g,v),v+=2,_.xMin=h.readShort(g,v),v+=2,_.yMin=h.readShort(g,v),v+=2,_.xMax=h.readShort(g,v),v+=2,_.yMax=h.readShort(g,v),v+=2,_.xMin>=_.xMax||_.yMin>=_.yMax)return null;if(_.noc>0){_.endPts=[];for(var b=0;b<_.noc;b++)_.endPts.push(h.readUshort(g,v)),v+=2;var T=h.readUshort(g,v);if(v+=2,g.length-v<T)return null;_.instructions=h.readBytes(g,v,T),v+=T;var R=_.endPts[_.noc-1]+1;for(_.flags=[],b=0;b<R;b++){var F=g[v];if(v++,_.flags.push(F),(8&F)!=0){var G=g[v];v++;for(var L=0;L<G;L++)_.flags.push(F),b++}}for(_.xs=[],b=0;b<R;b++){var O=(2&_.flags[b])!=0,k=(16&_.flags[b])!=0;O?(_.xs.push(k?g[v]:-g[v]),v++):k?_.xs.push(0):(_.xs.push(h.readShort(g,v)),v+=2)}for(_.ys=[],b=0;b<R;b++)O=(4&_.flags[b])!=0,k=(32&_.flags[b])!=0,O?(_.ys.push(k?g[v]:-g[v]),v++):k?_.ys.push(0):(_.ys.push(h.readShort(g,v)),v+=2);var P=0,z=0;for(b=0;b<R;b++)P+=_.xs[b],z+=_.ys[b],_.xs[b]=P,_.ys[b]=z}else{var j;_.parts=[];do{j=h.readUshort(g,v),v+=2;var Q={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(_.parts.push(Q),Q.glyphIndex=h.readUshort(g,v),v+=2,1&j){var W=h.readShort(g,v);v+=2;var Y=h.readShort(g,v);v+=2}else W=h.readInt8(g,v),v++,Y=h.readInt8(g,v),v++;2&j?(Q.m.tx=W,Q.m.ty=Y):(Q.p1=W,Q.p2=Y),8&j?(Q.m.a=Q.m.d=h.readF2dot14(g,v),v+=2):64&j?(Q.m.a=h.readF2dot14(g,v),v+=2,Q.m.d=h.readF2dot14(g,v),v+=2):128&j&&(Q.m.a=h.readF2dot14(g,v),v+=2,Q.m.b=h.readF2dot14(g,v),v+=2,Q.m.c=h.readF2dot14(g,v),v+=2,Q.m.d=h.readF2dot14(g,v),v+=2)}while(32&j);if(256&j){var K=h.readUshort(g,v);for(v+=2,_.instr=[],b=0;b<K;b++)_.instr.push(g[v]),v++}}return _},t.GPOS={},t.GPOS.parse=function(c,p,h,g){return t._lctf.parse(c,p,h,g,t.GPOS.subt)},t.GPOS.subt=function(c,p,h,g){var v=t._bin,_=h,b={};if(b.fmt=v.readUshort(c,h),h+=2,p==1||p==2||p==3||p==7||p==8&&b.fmt<=2){var T=v.readUshort(c,h);h+=2,b.coverage=t._lctf.readCoverage(c,T+_)}if(p==1&&b.fmt==1){var R=v.readUshort(c,h);h+=2;var F=t._lctf.numOfOnes(R);R!=0&&(b.pos=t.GPOS.readValueRecord(c,h,R))}else if(p==2&&b.fmt>=1&&b.fmt<=2){R=v.readUshort(c,h),h+=2;var G=v.readUshort(c,h);h+=2,F=t._lctf.numOfOnes(R);var L=t._lctf.numOfOnes(G);if(b.fmt==1){b.pairsets=[];var O=v.readUshort(c,h);h+=2;for(var k=0;k<O;k++){var P=_+v.readUshort(c,h);h+=2;var z=v.readUshort(c,P);P+=2;for(var j=[],Q=0;Q<z;Q++){var W=v.readUshort(c,P);P+=2,R!=0&&(le=t.GPOS.readValueRecord(c,P,R),P+=2*F),G!=0&&(xe=t.GPOS.readValueRecord(c,P,G),P+=2*L),j.push({gid2:W,val1:le,val2:xe})}b.pairsets.push(j)}}if(b.fmt==2){var Y=v.readUshort(c,h);h+=2;var K=v.readUshort(c,h);h+=2;var se=v.readUshort(c,h);h+=2;var ce=v.readUshort(c,h);for(h+=2,b.classDef1=t._lctf.readClassDef(c,_+Y),b.classDef2=t._lctf.readClassDef(c,_+K),b.matrix=[],k=0;k<se;k++){var ge=[];for(Q=0;Q<ce;Q++){var le=null,xe=null;R!=0&&(le=t.GPOS.readValueRecord(c,h,R),h+=2*F),G!=0&&(xe=t.GPOS.readValueRecord(c,h,G),h+=2*L),ge.push({val1:le,val2:xe})}b.matrix.push(ge)}}}else{if(p==9&&b.fmt==1){var me=v.readUshort(c,h);h+=2;var Be=v.readUint(c,h);if(h+=4,g.ltype==9)g.ltype=me;else if(g.ltype!=me)throw"invalid extension substitution";return t.GPOS.subt(c,g.ltype,_+Be)}Hs.debug("unsupported GPOS table LookupType",p,"format",b.fmt)}return b},t.GPOS.readValueRecord=function(c,p,h){var g=t._bin,v=[];return v.push(1&h?g.readShort(c,p):0),p+=1&h?2:0,v.push(2&h?g.readShort(c,p):0),p+=2&h?2:0,v.push(4&h?g.readShort(c,p):0),p+=4&h?2:0,v.push(8&h?g.readShort(c,p):0),p+=8&h?2:0,v},t.GSUB={},t.GSUB.parse=function(c,p,h,g){return t._lctf.parse(c,p,h,g,t.GSUB.subt)},t.GSUB.subt=function(c,p,h,g){var v=t._bin,_=h,b={};if(b.fmt=v.readUshort(c,h),h+=2,p!=1&&p!=4&&p!=5&&p!=6)return null;if(p==1||p==4||p==5&&b.fmt<=2||p==6&&b.fmt<=2){var T=v.readUshort(c,h);h+=2,b.coverage=t._lctf.readCoverage(c,_+T)}if(p==1&&b.fmt>=1&&b.fmt<=2){if(b.fmt==1)b.delta=v.readShort(c,h),h+=2;else if(b.fmt==2){var R=v.readUshort(c,h);h+=2,b.newg=v.readUshorts(c,h,R),h+=2*b.newg.length}}else if(p==4){b.vals=[],R=v.readUshort(c,h),h+=2;for(var F=0;F<R;F++){var G=v.readUshort(c,h);h+=2,b.vals.push(t.GSUB.readLigatureSet(c,_+G))}}else if(p==5&&b.fmt==2){if(b.fmt==2){var L=v.readUshort(c,h);h+=2,b.cDef=t._lctf.readClassDef(c,_+L),b.scset=[];var O=v.readUshort(c,h);for(h+=2,F=0;F<O;F++){var k=v.readUshort(c,h);h+=2,b.scset.push(k==0?null:t.GSUB.readSubClassSet(c,_+k))}}}else if(p==6&&b.fmt==3){if(b.fmt==3){for(F=0;F<3;F++){R=v.readUshort(c,h),h+=2;for(var P=[],z=0;z<R;z++)P.push(t._lctf.readCoverage(c,_+v.readUshort(c,h+2*z)));h+=2*R,F==0&&(b.backCvg=P),F==1&&(b.inptCvg=P),F==2&&(b.ahedCvg=P)}R=v.readUshort(c,h),h+=2,b.lookupRec=t.GSUB.readSubstLookupRecords(c,h,R)}}else{if(p==7&&b.fmt==1){var j=v.readUshort(c,h);h+=2;var Q=v.readUint(c,h);if(h+=4,g.ltype==9)g.ltype=j;else if(g.ltype!=j)throw"invalid extension substitution";return t.GSUB.subt(c,g.ltype,_+Q)}Hs.debug("unsupported GSUB table LookupType",p,"format",b.fmt)}return b},t.GSUB.readSubClassSet=function(c,p){var h=t._bin.readUshort,g=p,v=[],_=h(c,p);p+=2;for(var b=0;b<_;b++){var T=h(c,p);p+=2,v.push(t.GSUB.readSubClassRule(c,g+T))}return v},t.GSUB.readSubClassRule=function(c,p){var h=t._bin.readUshort,g={},v=h(c,p),_=h(c,p+=2);p+=2,g.input=[];for(var b=0;b<v-1;b++)g.input.push(h(c,p)),p+=2;return g.substLookupRecords=t.GSUB.readSubstLookupRecords(c,p,_),g},t.GSUB.readSubstLookupRecords=function(c,p,h){for(var g=t._bin.readUshort,v=[],_=0;_<h;_++)v.push(g(c,p),g(c,p+2)),p+=4;return v},t.GSUB.readChainSubClassSet=function(c,p){var h=t._bin,g=p,v=[],_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readUshort(c,p);p+=2,v.push(t.GSUB.readChainSubClassRule(c,g+T))}return v},t.GSUB.readChainSubClassRule=function(c,p){for(var h=t._bin,g={},v=["backtrack","input","lookahead"],_=0;_<v.length;_++){var b=h.readUshort(c,p);p+=2,_==1&&b--,g[v[_]]=h.readUshorts(c,p,b),p+=2*g[v[_]].length}return b=h.readUshort(c,p),p+=2,g.subst=h.readUshorts(c,p,2*b),p+=2*g.subst.length,g},t.GSUB.readLigatureSet=function(c,p){var h=t._bin,g=p,v=[],_=h.readUshort(c,p);p+=2;for(var b=0;b<_;b++){var T=h.readUshort(c,p);p+=2,v.push(t.GSUB.readLigature(c,g+T))}return v},t.GSUB.readLigature=function(c,p){var h=t._bin,g={chain:[]};g.nglyph=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);p+=2;for(var _=0;_<v-1;_++)g.chain.push(h.readUshort(c,p)),p+=2;return g},t.head={},t.head.parse=function(c,p,h){var g=t._bin,v={};return g.readFixed(c,p),p+=4,v.fontRevision=g.readFixed(c,p),p+=4,g.readUint(c,p),p+=4,g.readUint(c,p),p+=4,v.flags=g.readUshort(c,p),p+=2,v.unitsPerEm=g.readUshort(c,p),p+=2,v.created=g.readUint64(c,p),p+=8,v.modified=g.readUint64(c,p),p+=8,v.xMin=g.readShort(c,p),p+=2,v.yMin=g.readShort(c,p),p+=2,v.xMax=g.readShort(c,p),p+=2,v.yMax=g.readShort(c,p),p+=2,v.macStyle=g.readUshort(c,p),p+=2,v.lowestRecPPEM=g.readUshort(c,p),p+=2,v.fontDirectionHint=g.readShort(c,p),p+=2,v.indexToLocFormat=g.readShort(c,p),p+=2,v.glyphDataFormat=g.readShort(c,p),p+=2,v},t.hhea={},t.hhea.parse=function(c,p,h){var g=t._bin,v={};return g.readFixed(c,p),p+=4,v.ascender=g.readShort(c,p),p+=2,v.descender=g.readShort(c,p),p+=2,v.lineGap=g.readShort(c,p),p+=2,v.advanceWidthMax=g.readUshort(c,p),p+=2,v.minLeftSideBearing=g.readShort(c,p),p+=2,v.minRightSideBearing=g.readShort(c,p),p+=2,v.xMaxExtent=g.readShort(c,p),p+=2,v.caretSlopeRise=g.readShort(c,p),p+=2,v.caretSlopeRun=g.readShort(c,p),p+=2,v.caretOffset=g.readShort(c,p),p+=2,p+=8,v.metricDataFormat=g.readShort(c,p),p+=2,v.numberOfHMetrics=g.readUshort(c,p),p+=2,v},t.hmtx={},t.hmtx.parse=function(c,p,h,g){for(var v=t._bin,_={aWidth:[],lsBearing:[]},b=0,T=0,R=0;R<g.maxp.numGlyphs;R++)R<g.hhea.numberOfHMetrics&&(b=v.readUshort(c,p),p+=2,T=v.readShort(c,p),p+=2),_.aWidth.push(b),_.lsBearing.push(T);return _},t.kern={},t.kern.parse=function(c,p,h,g){var v=t._bin,_=v.readUshort(c,p);if(p+=2,_==1)return t.kern.parseV1(c,p-2,h,g);var b=v.readUshort(c,p);p+=2;for(var T={glyph1:[],rval:[]},R=0;R<b;R++){p+=2,h=v.readUshort(c,p),p+=2;var F=v.readUshort(c,p);p+=2;var G=F>>>8;if((G&=15)!=0)throw"unknown kern table format: "+G;p=t.kern.readFormat0(c,p,T)}return T},t.kern.parseV1=function(c,p,h,g){var v=t._bin;v.readFixed(c,p),p+=4;var _=v.readUint(c,p);p+=4;for(var b={glyph1:[],rval:[]},T=0;T<_;T++){v.readUint(c,p),p+=4;var R=v.readUshort(c,p);p+=2,v.readUshort(c,p),p+=2;var F=R>>>8;if((F&=15)!=0)throw"unknown kern table format: "+F;p=t.kern.readFormat0(c,p,b)}return b},t.kern.readFormat0=function(c,p,h){var g=t._bin,v=-1,_=g.readUshort(c,p);p+=2,g.readUshort(c,p),p+=2,g.readUshort(c,p),p+=2,g.readUshort(c,p),p+=2;for(var b=0;b<_;b++){var T=g.readUshort(c,p);p+=2;var R=g.readUshort(c,p);p+=2;var F=g.readShort(c,p);p+=2,T!=v&&(h.glyph1.push(T),h.rval.push({glyph2:[],vals:[]}));var G=h.rval[h.rval.length-1];G.glyph2.push(R),G.vals.push(F),v=T}return p},t.loca={},t.loca.parse=function(c,p,h,g){var v=t._bin,_=[],b=g.head.indexToLocFormat,T=g.maxp.numGlyphs+1;if(b==0)for(var R=0;R<T;R++)_.push(v.readUshort(c,p+(R<<1))<<1);if(b==1)for(R=0;R<T;R++)_.push(v.readUint(c,p+(R<<2)));return _},t.maxp={},t.maxp.parse=function(c,p,h){var g=t._bin,v={},_=g.readUint(c,p);return p+=4,v.numGlyphs=g.readUshort(c,p),p+=2,_==65536&&(v.maxPoints=g.readUshort(c,p),p+=2,v.maxContours=g.readUshort(c,p),p+=2,v.maxCompositePoints=g.readUshort(c,p),p+=2,v.maxCompositeContours=g.readUshort(c,p),p+=2,v.maxZones=g.readUshort(c,p),p+=2,v.maxTwilightPoints=g.readUshort(c,p),p+=2,v.maxStorage=g.readUshort(c,p),p+=2,v.maxFunctionDefs=g.readUshort(c,p),p+=2,v.maxInstructionDefs=g.readUshort(c,p),p+=2,v.maxStackElements=g.readUshort(c,p),p+=2,v.maxSizeOfInstructions=g.readUshort(c,p),p+=2,v.maxComponentElements=g.readUshort(c,p),p+=2,v.maxComponentDepth=g.readUshort(c,p),p+=2),v},t.name={},t.name.parse=function(c,p,h){var g=t._bin,v={};g.readUshort(c,p),p+=2;var _=g.readUshort(c,p);p+=2,g.readUshort(c,p);for(var b,T=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],R=p+=2,F=0;F<_;F++){var G=g.readUshort(c,p);p+=2;var L=g.readUshort(c,p);p+=2;var O=g.readUshort(c,p);p+=2;var k=g.readUshort(c,p);p+=2;var P=g.readUshort(c,p);p+=2;var z=g.readUshort(c,p);p+=2;var j,Q=T[k],W=R+12*_+z;if(G==0)j=g.readUnicode(c,W,P/2);else if(G==3&&L==0)j=g.readUnicode(c,W,P/2);else if(L==0)j=g.readASCII(c,W,P);else if(L==1)j=g.readUnicode(c,W,P/2);else if(L==3)j=g.readUnicode(c,W,P/2);else{if(G!=1)throw"unknown encoding "+L+", platformID: "+G;j=g.readASCII(c,W,P),Hs.debug("reading unknown MAC encoding "+L+" as ASCII")}var Y="p"+G+","+O.toString(16);v[Y]==null&&(v[Y]={}),v[Y][Q!==void 0?Q:k]=j,v[Y]._lang=O}for(var K in v)if(v[K].postScriptName!=null&&v[K]._lang==1033)return v[K];for(var K in v)if(v[K].postScriptName!=null&&v[K]._lang==0)return v[K];for(var K in v)if(v[K].postScriptName!=null&&v[K]._lang==3084)return v[K];for(var K in v)if(v[K].postScriptName!=null)return v[K];for(var K in v){b=K;break}return Hs.debug("returning name table with languageID "+v[b]._lang),v[b]},t["OS/2"]={},t["OS/2"].parse=function(c,p,h){var g=t._bin.readUshort(c,p);p+=2;var v={};if(g==0)t["OS/2"].version0(c,p,v);else if(g==1)t["OS/2"].version1(c,p,v);else if(g==2||g==3||g==4)t["OS/2"].version2(c,p,v);else{if(g!=5)throw"unknown OS/2 table version: "+g;t["OS/2"].version5(c,p,v)}return v},t["OS/2"].version0=function(c,p,h){var g=t._bin;return h.xAvgCharWidth=g.readShort(c,p),p+=2,h.usWeightClass=g.readUshort(c,p),p+=2,h.usWidthClass=g.readUshort(c,p),p+=2,h.fsType=g.readUshort(c,p),p+=2,h.ySubscriptXSize=g.readShort(c,p),p+=2,h.ySubscriptYSize=g.readShort(c,p),p+=2,h.ySubscriptXOffset=g.readShort(c,p),p+=2,h.ySubscriptYOffset=g.readShort(c,p),p+=2,h.ySuperscriptXSize=g.readShort(c,p),p+=2,h.ySuperscriptYSize=g.readShort(c,p),p+=2,h.ySuperscriptXOffset=g.readShort(c,p),p+=2,h.ySuperscriptYOffset=g.readShort(c,p),p+=2,h.yStrikeoutSize=g.readShort(c,p),p+=2,h.yStrikeoutPosition=g.readShort(c,p),p+=2,h.sFamilyClass=g.readShort(c,p),p+=2,h.panose=g.readBytes(c,p,10),p+=10,h.ulUnicodeRange1=g.readUint(c,p),p+=4,h.ulUnicodeRange2=g.readUint(c,p),p+=4,h.ulUnicodeRange3=g.readUint(c,p),p+=4,h.ulUnicodeRange4=g.readUint(c,p),p+=4,h.achVendID=[g.readInt8(c,p),g.readInt8(c,p+1),g.readInt8(c,p+2),g.readInt8(c,p+3)],p+=4,h.fsSelection=g.readUshort(c,p),p+=2,h.usFirstCharIndex=g.readUshort(c,p),p+=2,h.usLastCharIndex=g.readUshort(c,p),p+=2,h.sTypoAscender=g.readShort(c,p),p+=2,h.sTypoDescender=g.readShort(c,p),p+=2,h.sTypoLineGap=g.readShort(c,p),p+=2,h.usWinAscent=g.readUshort(c,p),p+=2,h.usWinDescent=g.readUshort(c,p),p+=2},t["OS/2"].version1=function(c,p,h){var g=t._bin;return p=t["OS/2"].version0(c,p,h),h.ulCodePageRange1=g.readUint(c,p),p+=4,h.ulCodePageRange2=g.readUint(c,p),p+=4},t["OS/2"].version2=function(c,p,h){var g=t._bin;return p=t["OS/2"].version1(c,p,h),h.sxHeight=g.readShort(c,p),p+=2,h.sCapHeight=g.readShort(c,p),p+=2,h.usDefault=g.readUshort(c,p),p+=2,h.usBreak=g.readUshort(c,p),p+=2,h.usMaxContext=g.readUshort(c,p),p+=2},t["OS/2"].version5=function(c,p,h){var g=t._bin;return p=t["OS/2"].version2(c,p,h),h.usLowerOpticalPointSize=g.readUshort(c,p),p+=2,h.usUpperOpticalPointSize=g.readUshort(c,p),p+=2},t.post={},t.post.parse=function(c,p,h){var g=t._bin,v={};return v.version=g.readFixed(c,p),p+=4,v.italicAngle=g.readFixed(c,p),p+=4,v.underlinePosition=g.readShort(c,p),p+=2,v.underlineThickness=g.readShort(c,p),p+=2,v},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(c,p){var h=c.cmap,g=-1;if(h.p0e4!=null?g=h.p0e4:h.p3e1!=null?g=h.p3e1:h.p1e0!=null?g=h.p1e0:h.p0e3!=null&&(g=h.p0e3),g==-1)throw"no familiar platform and encoding!";var v=h.tables[g];if(v.format==0)return p>=v.map.length?0:v.map[p];if(v.format==4){for(var _=-1,b=0;b<v.endCount.length;b++)if(p<=v.endCount[b]){_=b;break}return _==-1||v.startCount[_]>p?0:65535&(v.idRangeOffset[_]!=0?v.glyphIdArray[p-v.startCount[_]+(v.idRangeOffset[_]>>1)-(v.idRangeOffset.length-_)]:p+v.idDelta[_])}if(v.format==12){if(p>v.groups[v.groups.length-1][1])return 0;for(b=0;b<v.groups.length;b++){var T=v.groups[b];if(T[0]<=p&&p<=T[1])return T[2]+(p-T[0])}return 0}throw"unknown cmap table format "+v.format},t.U.glyphToPath=function(c,p){var h={cmds:[],crds:[]};if(c.SVG&&c.SVG.entries[p]){var g=c.SVG.entries[p];return g==null?h:(typeof g=="string"&&(g=t.SVG.toPath(g),c.SVG.entries[p]=g),g)}if(c.CFF){var v={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:c.CFF.Private?c.CFF.Private.defaultWidthX:0,open:!1},_=c.CFF,b=c.CFF.Private;if(_.ROS){for(var T=0;_.FDSelect[T+2]<=p;)T+=2;b=_.FDArray[_.FDSelect[T+1]].Private}t.U._drawCFF(c.CFF.CharStrings[p],v,_,b,h)}else c.glyf&&t.U._drawGlyf(p,c,h);return h},t.U._drawGlyf=function(c,p,h){var g=p.glyf[c];g==null&&(g=p.glyf[c]=t.glyf._parseGlyf(p,c)),g!=null&&(g.noc>-1?t.U._simpleGlyph(g,h):t.U._compoGlyph(g,p,h))},t.U._simpleGlyph=function(c,p){for(var h=0;h<c.noc;h++){for(var g=h==0?0:c.endPts[h-1]+1,v=c.endPts[h],_=g;_<=v;_++){var b=_==g?v:_-1,T=_==v?g:_+1,R=1&c.flags[_],F=1&c.flags[b],G=1&c.flags[T],L=c.xs[_],O=c.ys[_];if(_==g)if(R){if(!F){t.U.P.moveTo(p,L,O);continue}t.U.P.moveTo(p,c.xs[b],c.ys[b])}else F?t.U.P.moveTo(p,c.xs[b],c.ys[b]):t.U.P.moveTo(p,(c.xs[b]+L)/2,(c.ys[b]+O)/2);R?F&&t.U.P.lineTo(p,L,O):G?t.U.P.qcurveTo(p,L,O,c.xs[T],c.ys[T]):t.U.P.qcurveTo(p,L,O,(L+c.xs[T])/2,(O+c.ys[T])/2)}t.U.P.closePath(p)}},t.U._compoGlyph=function(c,p,h){for(var g=0;g<c.parts.length;g++){var v={cmds:[],crds:[]},_=c.parts[g];t.U._drawGlyf(_.glyphIndex,p,v);for(var b=_.m,T=0;T<v.crds.length;T+=2){var R=v.crds[T],F=v.crds[T+1];h.crds.push(R*b.a+F*b.b+b.tx),h.crds.push(R*b.c+F*b.d+b.ty)}for(T=0;T<v.cmds.length;T++)h.cmds.push(v.cmds[T])}},t.U._getGlyphClass=function(c,p){var h=t._lctf.getInterval(p,c);return h==-1?0:p[h+2]},t.U.getPairAdjustment=function(c,p,h){var g=!1;if(c.GPOS)for(var v=c.GPOS,_=v.lookupList,b=v.featureList,T=[],R=0;R<b.length;R++){var F=b[R];if(F.tag=="kern"){g=!0;for(var G=0;G<F.tab.length;G++)if(!T[F.tab[G]]){T[F.tab[G]]=!0;for(var L=_[F.tab[G]],O=0;O<L.tabs.length;O++)if(L.tabs[O]!=null){var k,P=L.tabs[O];if((!P.coverage||(k=t._lctf.coverageIndex(P.coverage,p))!=-1)&&L.ltype!=1){if(L.ltype==2){var z=null;if(P.fmt==1){var j=P.pairsets[k];for(R=0;R<j.length;R++)j[R].gid2==h&&(z=j[R])}else if(P.fmt==2){var Q=t.U._getGlyphClass(p,P.classDef1),W=t.U._getGlyphClass(h,P.classDef2);z=P.matrix[Q][W]}if(z){var Y=0;return z.val1&&z.val1[2]&&(Y+=z.val1[2]),z.val2&&z.val2[0]&&(Y+=z.val2[0]),Y}}}}}}}if(c.kern&&!g){var K=c.kern.glyph1.indexOf(p);if(K!=-1){var se=c.kern.rval[K].glyph2.indexOf(h);if(se!=-1)return c.kern.rval[K].vals[se]}}return 0},t.U._applySubs=function(c,p,h,g){for(var v=c.length-p-1,_=0;_<h.tabs.length;_++)if(h.tabs[_]!=null){var b,T=h.tabs[_];if(!T.coverage||(b=t._lctf.coverageIndex(T.coverage,c[p]))!=-1){if(h.ltype==1)c[p],T.fmt==1?c[p]=c[p]+T.delta:c[p]=T.newg[b];else if(h.ltype==4)for(var R=T.vals[b],F=0;F<R.length;F++){var G=R[F],L=G.chain.length;if(!(L>v)){for(var O=!0,k=0,P=0;P<L;P++){for(;c[p+k+(1+P)]==-1;)k++;G.chain[P]!=c[p+k+(1+P)]&&(O=!1)}if(O){for(c[p]=G.nglyph,P=0;P<L+k;P++)c[p+P+1]=-1;break}}}else if(h.ltype==5&&T.fmt==2)for(var z=t._lctf.getInterval(T.cDef,c[p]),j=T.cDef[z+2],Q=T.scset[j],W=0;W<Q.length;W++){var Y=Q[W],K=Y.input;if(!(K.length>v)){for(O=!0,P=0;P<K.length;P++){var se=t._lctf.getInterval(T.cDef,c[p+1+P]);if(z==-1&&T.cDef[se+2]!=K[P]){O=!1;break}}if(O){var ce=Y.substLookupRecords;for(F=0;F<ce.length;F+=2)ce[F],ce[F+1]}}}else if(h.ltype==6&&T.fmt==3){if(!t.U._glsCovered(c,T.backCvg,p-T.backCvg.length)||!t.U._glsCovered(c,T.inptCvg,p)||!t.U._glsCovered(c,T.ahedCvg,p+T.inptCvg.length))continue;var ge=T.lookupRec;for(W=0;W<ge.length;W+=2){z=ge[W];var le=g[ge[W+1]];t.U._applySubs(c,p+z,le,g)}}}}},t.U._glsCovered=function(c,p,h){for(var g=0;g<p.length;g++)if(t._lctf.coverageIndex(p[g],c[h+g])==-1)return!1;return!0},t.U.glyphsToPath=function(c,p,h){for(var g={cmds:[],crds:[]},v=0,_=0;_<p.length;_++){var b=p[_];if(b!=-1){for(var T=_<p.length-1&&p[_+1]!=-1?p[_+1]:0,R=t.U.glyphToPath(c,b),F=0;F<R.crds.length;F+=2)g.crds.push(R.crds[F]+v),g.crds.push(R.crds[F+1]);for(h&&g.cmds.push(h),F=0;F<R.cmds.length;F++)g.cmds.push(R.cmds[F]);h&&g.cmds.push("X"),v+=c.hmtx.aWidth[b],_<p.length-1&&(v+=t.U.getPairAdjustment(c,b,T))}}return g},t.U.P={},t.U.P.moveTo=function(c,p,h){c.cmds.push("M"),c.crds.push(p,h)},t.U.P.lineTo=function(c,p,h){c.cmds.push("L"),c.crds.push(p,h)},t.U.P.curveTo=function(c,p,h,g,v,_,b){c.cmds.push("C"),c.crds.push(p,h,g,v,_,b)},t.U.P.qcurveTo=function(c,p,h,g,v){c.cmds.push("Q"),c.crds.push(p,h,g,v)},t.U.P.closePath=function(c){c.cmds.push("Z")},t.U._drawCFF=function(c,p,h,g,v){for(var _=p.stack,b=p.nStems,T=p.haveWidth,R=p.width,F=p.open,G=0,L=p.x,O=p.y,k=0,P=0,z=0,j=0,Q=0,W=0,Y=0,K=0,se=0,ce=0,ge={val:0,size:0};G<c.length;){t.CFF.getCharString(c,G,ge);var le=ge.val;if(G+=ge.size,le=="o1"||le=="o18")_.length%2!=0&&!T&&(R=_.shift()+g.nominalWidthX),b+=_.length>>1,_.length=0,T=!0;else if(le=="o3"||le=="o23")_.length%2!=0&&!T&&(R=_.shift()+g.nominalWidthX),b+=_.length>>1,_.length=0,T=!0;else if(le=="o4")_.length>1&&!T&&(R=_.shift()+g.nominalWidthX,T=!0),F&&t.U.P.closePath(v),O+=_.pop(),t.U.P.moveTo(v,L,O),F=!0;else if(le=="o5")for(;_.length>0;)L+=_.shift(),O+=_.shift(),t.U.P.lineTo(v,L,O);else if(le=="o6"||le=="o7")for(var xe=_.length,me=le=="o6",Be=0;Be<xe;Be++){var ke=_.shift();me?L+=ke:O+=ke,me=!me,t.U.P.lineTo(v,L,O)}else if(le=="o8"||le=="o24"){xe=_.length;for(var Re=0;Re+6<=xe;)k=L+_.shift(),P=O+_.shift(),z=k+_.shift(),j=P+_.shift(),L=z+_.shift(),O=j+_.shift(),t.U.P.curveTo(v,k,P,z,j,L,O),Re+=6;le=="o24"&&(L+=_.shift(),O+=_.shift(),t.U.P.lineTo(v,L,O))}else{if(le=="o11")break;if(le=="o1234"||le=="o1235"||le=="o1236"||le=="o1237")le=="o1234"&&(P=O,z=(k=L+_.shift())+_.shift(),ce=j=P+_.shift(),W=j,K=O,L=(Y=(Q=(se=z+_.shift())+_.shift())+_.shift())+_.shift(),t.U.P.curveTo(v,k,P,z,j,se,ce),t.U.P.curveTo(v,Q,W,Y,K,L,O)),le=="o1235"&&(k=L+_.shift(),P=O+_.shift(),z=k+_.shift(),j=P+_.shift(),se=z+_.shift(),ce=j+_.shift(),Q=se+_.shift(),W=ce+_.shift(),Y=Q+_.shift(),K=W+_.shift(),L=Y+_.shift(),O=K+_.shift(),_.shift(),t.U.P.curveTo(v,k,P,z,j,se,ce),t.U.P.curveTo(v,Q,W,Y,K,L,O)),le=="o1236"&&(k=L+_.shift(),P=O+_.shift(),z=k+_.shift(),ce=j=P+_.shift(),W=j,Y=(Q=(se=z+_.shift())+_.shift())+_.shift(),K=W+_.shift(),L=Y+_.shift(),t.U.P.curveTo(v,k,P,z,j,se,ce),t.U.P.curveTo(v,Q,W,Y,K,L,O)),le=="o1237"&&(k=L+_.shift(),P=O+_.shift(),z=k+_.shift(),j=P+_.shift(),se=z+_.shift(),ce=j+_.shift(),Q=se+_.shift(),W=ce+_.shift(),Y=Q+_.shift(),K=W+_.shift(),Math.abs(Y-L)>Math.abs(K-O)?L=Y+_.shift():O=K+_.shift(),t.U.P.curveTo(v,k,P,z,j,se,ce),t.U.P.curveTo(v,Q,W,Y,K,L,O));else if(le=="o14"){if(_.length>0&&!T&&(R=_.shift()+h.nominalWidthX,T=!0),_.length==4){var ze=_.shift(),Pe=_.shift(),Ye=_.shift(),Ce=_.shift(),Ee=t.CFF.glyphBySE(h,Ye),_e=t.CFF.glyphBySE(h,Ce);t.U._drawCFF(h.CharStrings[Ee],p,h,g,v),p.x=ze,p.y=Pe,t.U._drawCFF(h.CharStrings[_e],p,h,g,v)}F&&(t.U.P.closePath(v),F=!1)}else if(le=="o19"||le=="o20")_.length%2!=0&&!T&&(R=_.shift()+g.nominalWidthX),b+=_.length>>1,_.length=0,T=!0,G+=b+7>>3;else if(le=="o21")_.length>2&&!T&&(R=_.shift()+g.nominalWidthX,T=!0),O+=_.pop(),L+=_.pop(),F&&t.U.P.closePath(v),t.U.P.moveTo(v,L,O),F=!0;else if(le=="o22")_.length>1&&!T&&(R=_.shift()+g.nominalWidthX,T=!0),L+=_.pop(),F&&t.U.P.closePath(v),t.U.P.moveTo(v,L,O),F=!0;else if(le=="o25"){for(;_.length>6;)L+=_.shift(),O+=_.shift(),t.U.P.lineTo(v,L,O);k=L+_.shift(),P=O+_.shift(),z=k+_.shift(),j=P+_.shift(),L=z+_.shift(),O=j+_.shift(),t.U.P.curveTo(v,k,P,z,j,L,O)}else if(le=="o26")for(_.length%2&&(L+=_.shift());_.length>0;)k=L,P=O+_.shift(),L=z=k+_.shift(),O=(j=P+_.shift())+_.shift(),t.U.P.curveTo(v,k,P,z,j,L,O);else if(le=="o27")for(_.length%2&&(O+=_.shift());_.length>0;)P=O,z=(k=L+_.shift())+_.shift(),j=P+_.shift(),L=z+_.shift(),O=j,t.U.P.curveTo(v,k,P,z,j,L,O);else if(le=="o10"||le=="o29"){var oe=le=="o10"?g:h;if(_.length==0)Hs.debug("error: empty stack");else{var Ae=_.pop(),Te=oe.Subrs[Ae+oe.Bias];p.x=L,p.y=O,p.nStems=b,p.haveWidth=T,p.width=R,p.open=F,t.U._drawCFF(Te,p,h,g,v),L=p.x,O=p.y,b=p.nStems,T=p.haveWidth,R=p.width,F=p.open}}else if(le=="o30"||le=="o31"){var ve=_.length,Ge=(Re=0,le=="o31");for(Re+=ve-(xe=-3&ve);Re<xe;)Ge?(P=O,z=(k=L+_.shift())+_.shift(),O=(j=P+_.shift())+_.shift(),xe-Re==5?(L=z+_.shift(),Re++):L=z,Ge=!1):(k=L,P=O+_.shift(),z=k+_.shift(),j=P+_.shift(),L=z+_.shift(),xe-Re==5?(O=j+_.shift(),Re++):O=j,Ge=!0),t.U.P.curveTo(v,k,P,z,j,L,O),Re+=4}else{if((le+"").charAt(0)=="o")throw Hs.debug("Unknown operation: "+le,c),le;_.push(le)}}}p.x=L,p.y=O,p.nStems=b,p.haveWidth=T,p.width=R,p.open=F};var r=t,l={Typr:r};return i.Typr=r,i.default=l,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function iv(){return function(i){var t=Uint8Array,r=Uint16Array,l=Uint32Array,c=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=function(le,xe){for(var me=new r(31),Be=0;Be<31;++Be)me[Be]=xe+=1<<le[Be-1];var ke=new l(me[30]);for(Be=1;Be<30;++Be)for(var Re=me[Be];Re<me[Be+1];++Re)ke[Re]=Re-me[Be]<<5|Be;return[me,ke]},v=g(c,2),_=v[0],b=v[1];_[28]=258,b[258]=28;for(var T=g(p,0)[0],R=new r(32768),F=0;F<32768;++F){var G=(43690&F)>>>1|(21845&F)<<1;G=(61680&(G=(52428&G)>>>2|(13107&G)<<2))>>>4|(3855&G)<<4,R[F]=((65280&G)>>>8|(255&G)<<8)>>>1}var L=function(le,xe,me){for(var Be=le.length,ke=0,Re=new r(xe);ke<Be;++ke)++Re[le[ke]-1];var ze,Pe=new r(xe);for(ke=0;ke<xe;++ke)Pe[ke]=Pe[ke-1]+Re[ke-1]<<1;if(me){ze=new r(1<<xe);var Ye=15-xe;for(ke=0;ke<Be;++ke)if(le[ke])for(var Ce=ke<<4|le[ke],Ee=xe-le[ke],_e=Pe[le[ke]-1]++<<Ee,oe=_e|(1<<Ee)-1;_e<=oe;++_e)ze[R[_e]>>>Ye]=Ce}else for(ze=new r(Be),ke=0;ke<Be;++ke)le[ke]&&(ze[ke]=R[Pe[le[ke]-1]++]>>>15-le[ke]);return ze},O=new t(288);for(F=0;F<144;++F)O[F]=8;for(F=144;F<256;++F)O[F]=9;for(F=256;F<280;++F)O[F]=7;for(F=280;F<288;++F)O[F]=8;var k=new t(32);for(F=0;F<32;++F)k[F]=5;var P=L(O,9,1),z=L(k,5,1),j=function(le){for(var xe=le[0],me=1;me<le.length;++me)le[me]>xe&&(xe=le[me]);return xe},Q=function(le,xe,me){var Be=xe/8|0;return(le[Be]|le[Be+1]<<8)>>(7&xe)&me},W=function(le,xe){var me=xe/8|0;return(le[me]|le[me+1]<<8|le[me+2]<<16)>>(7&xe)},Y=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],K=function(le,xe,me){var Be=new Error(xe||Y[le]);if(Be.code=le,Error.captureStackTrace&&Error.captureStackTrace(Be,K),!me)throw Be;return Be},se=function(le,xe,me){var Be=le.length;if(!Be||me&&!me.l&&Be<5)return xe||new t(0);var ke=!xe||me,Re=!me||me.i;me||(me={}),xe||(xe=new t(3*Be));var ze,Pe=function(or){var Qr=xe.length;if(or>Qr){var ri=new t(Math.max(2*Qr,or));ri.set(xe),xe=ri}},Ye=me.f||0,Ce=me.p||0,Ee=me.b||0,_e=me.l,oe=me.d,Ae=me.m,Te=me.n,ve=8*Be;do{if(!_e){me.f=Ye=Q(le,Ce,1);var Ge=Q(le,Ce+1,3);if(Ce+=3,!Ge){var bt=le[(Sn=((ze=Ce)/8|0)+(7&ze&&1)+4)-4]|le[Sn-3]<<8,mt=Sn+bt;if(mt>Be){Re&&K(0);break}ke&&Pe(Ee+bt),xe.set(le.subarray(Sn,mt),Ee),me.b=Ee+=bt,me.p=Ce=8*mt;continue}if(Ge==1)_e=P,oe=z,Ae=9,Te=5;else if(Ge==2){var gt=Q(le,Ce,31)+257,rt=Q(le,Ce+10,15)+4,Wt=gt+Q(le,Ce+5,31)+1;Ce+=14;for(var kt=new t(Wt),Bt=new t(19),qe=0;qe<rt;++qe)Bt[h[qe]]=Q(le,Ce+3*qe,7);Ce+=3*rt;var Ne=j(Bt),It=(1<<Ne)-1,mn=L(Bt,Ne,1);for(qe=0;qe<Wt;){var Sn,zt=mn[Q(le,Ce,It)];if(Ce+=15&zt,(Sn=zt>>>4)<16)kt[qe++]=Sn;else{var Vn=0,ar=0;for(Sn==16?(ar=3+Q(le,Ce,3),Ce+=2,Vn=kt[qe-1]):Sn==17?(ar=3+Q(le,Ce,7),Ce+=3):Sn==18&&(ar=11+Q(le,Ce,127),Ce+=7);ar--;)kt[qe++]=Vn}}var _r=kt.subarray(0,gt),ur=kt.subarray(gt);Ae=j(_r),Te=j(ur),_e=L(_r,Ae,1),oe=L(ur,Te,1)}else K(1);if(Ce>ve){Re&&K(0);break}}ke&&Pe(Ee+131072);for(var _i=(1<<Ae)-1,gi=(1<<Te)-1,br=Ce;;br=Ce){var Pr=(Vn=_e[W(le,Ce)&_i])>>>4;if((Ce+=15&Vn)>ve){Re&&K(0);break}if(Vn||K(2),Pr<256)xe[Ee++]=Pr;else{if(Pr==256){br=Ce,_e=null;break}var Oi=Pr-254;if(Pr>264){var fo=c[qe=Pr-257];Oi=Q(le,Ce,(1<<fo)-1)+_[qe],Ce+=fo}var ut=oe[W(le,Ce)&gi],vn=ut>>>4;if(ut||K(3),Ce+=15&ut,ur=T[vn],vn>3&&(fo=p[vn],ur+=W(le,Ce)&(1<<fo)-1,Ce+=fo),Ce>ve){Re&&K(0);break}ke&&Pe(Ee+131072);for(var On=Ee+Oi;Ee<On;Ee+=4)xe[Ee]=xe[Ee-ur],xe[Ee+1]=xe[Ee+1-ur],xe[Ee+2]=xe[Ee+2-ur],xe[Ee+3]=xe[Ee+3-ur];Ee=On}}me.l=_e,me.p=br,me.b=Ee,_e&&(Ye=1,me.m=Ae,me.d=oe,me.n=Te)}while(!Ye);return Ee==xe.length?xe:function(or,Qr,ri){(Qr==null||Qr<0)&&(Qr=0),(ri==null||ri>or.length)&&(ri=or.length);var ui=new(or instanceof r?r:or instanceof l?l:t)(ri-Qr);return ui.set(or.subarray(Qr,ri)),ui}(xe,0,Ee)},ce=new t(0),ge=typeof TextDecoder!="undefined"&&new TextDecoder;try{ge.decode(ce,{stream:!0})}catch(le){}return i.convert_streams=function(le){var xe=new DataView(le),me=0;function Be(){var gt=xe.getUint16(me);return me+=2,gt}function ke(){var gt=xe.getUint32(me);return me+=4,gt}function Re(gt){bt.setUint16(mt,gt),mt+=2}function ze(gt){bt.setUint32(mt,gt),mt+=4}for(var Pe={signature:ke(),flavor:ke(),length:ke(),numTables:Be(),reserved:Be(),totalSfntSize:ke(),majorVersion:Be(),minorVersion:Be(),metaOffset:ke(),metaLength:ke(),metaOrigLength:ke(),privOffset:ke(),privLength:ke()},Ye=0;Math.pow(2,Ye)<=Pe.numTables;)Ye++;Ye--;for(var Ce=16*Math.pow(2,Ye),Ee=16*Pe.numTables-Ce,_e=12,oe=[],Ae=0;Ae<Pe.numTables;Ae++)oe.push({tag:ke(),offset:ke(),compLength:ke(),origLength:ke(),origChecksum:ke()}),_e+=16;var Te,ve=new Uint8Array(12+16*oe.length+oe.reduce(function(gt,rt){return gt+rt.origLength+4},0)),Ge=ve.buffer,bt=new DataView(Ge),mt=0;return ze(Pe.flavor),Re(Pe.numTables),Re(Ce),Re(Ye),Re(Ee),oe.forEach(function(gt){ze(gt.tag),ze(gt.origChecksum),ze(_e),ze(gt.origLength),gt.outOffset=_e,(_e+=gt.origLength)%4!=0&&(_e+=4-_e%4)}),oe.forEach(function(gt){var rt,Wt=le.slice(gt.offset,gt.offset+gt.compLength);if(gt.compLength!=gt.origLength){var kt=new Uint8Array(gt.origLength);rt=new Uint8Array(Wt,2),se(rt,kt)}else kt=new Uint8Array(Wt);ve.set(kt,gt.outOffset);var Bt=0;(_e=gt.outOffset+gt.origLength)%4!=0&&(Bt=4-_e%4),ve.set(new Uint8Array(Bt).buffer,gt.outOffset+gt.origLength),Te=_e+Bt}),Ge.slice(0,Te)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function V1(i,t){const r={M:2,L:2,Q:4,C:6,Z:0},l={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},c=1,p=2,h=4,g=8,v=16,_=32;let b;function T(Q){if(!b){const W={R:p,L:c,D:h,C:v,U:_,T:g};b=new Map;for(let Y in l){let K=0;l[Y].split(",").forEach(se=>{let[ce,ge]=se.split("+");ce=parseInt(ce,36),ge=ge?parseInt(ge,36):0,b.set(K+=ce,W[Y]);for(let le=ge;le--;)b.set(++K,W[Y])})}}return b.get(Q)||_}const R=1,F=2,G=3,L=4,O=[null,"isol","init","fina","medi"];function k(Q){const W=new Uint8Array(Q.length);let Y=_,K=R,se=-1;for(let ce=0;ce<Q.length;ce++){const ge=Q.codePointAt(ce);let le=T(ge)|0,xe=R;le&g||(Y&(c|h|v)?le&(p|h|v)?(xe=G,(K===R||K===G)&&W[se]++):le&(c|_)&&(K===F||K===L)&&W[se]--:Y&(p|_)&&(K===F||K===L)&&W[se]--,K=W[ce]=xe,Y=le,se=ce,ge>65535&&ce++)}return W}function P(Q,W){const Y=[];for(let se=0;se<W.length;se++){const ce=W.codePointAt(se);ce>65535&&se++,Y.push(i.U.codeToGlyph(Q,ce))}const K=Q.GSUB;if(K){const{lookupList:se,featureList:ce}=K;let ge;const le=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,xe=[];ce.forEach(me=>{if(le.test(me.tag))for(let Be=0;Be<me.tab.length;Be++){if(xe[me.tab[Be]])continue;xe[me.tab[Be]]=!0;const ke=se[me.tab[Be]],Re=/^(isol|init|fina|medi)$/.test(me.tag);Re&&!ge&&(ge=k(W));for(let ze=0;ze<Y.length;ze++)(!ge||!Re||O[ge[ze]]===me.tag)&&i.U._applySubs(Y,ze,ke,se)}})}return Y}function z(...Q){for(let W=0;W<Q.length;W++)if(typeof Q[W]=="number")return Q[W]}function j(Q){const W=Object.create(null),Y=Q["OS/2"],K=Q.hhea,se=Q.head.unitsPerEm,ce=z(Y&&Y.sTypoAscender,K&&K.ascender,se),ge={unitsPerEm:se,ascender:ce,descender:z(Y&&Y.sTypoDescender,K&&K.descender,0),capHeight:z(Y&&Y.sCapHeight,ce),xHeight:z(Y&&Y.sxHeight,ce),lineGap:z(Y&&Y.sTypoLineGap,K&&K.lineGap),forEachGlyph(le,xe,me,Be){let ke=0;const Re=1/ge.unitsPerEm*xe,ze=P(Q,le);let Pe=0,Ye=-1;return ze.forEach((Ce,Ee)=>{if(Ce!==-1){let _e=W[Ce];if(!_e){const{cmds:oe,crds:Ae}=i.U.glyphToPath(Q,Ce);let Te="",ve=0;for(let rt=0,Wt=oe.length;rt<Wt;rt++){const kt=r[oe[rt]];Te+=oe[rt];for(let Bt=1;Bt<=kt;Bt++)Te+=(Bt>1?",":"")+Ae[ve++]}let Ge,bt,mt,gt;if(Ae.length){Ge=bt=1/0,mt=gt=-1/0;for(let rt=0,Wt=Ae.length;rt<Wt;rt+=2){let kt=Ae[rt],Bt=Ae[rt+1];kt<Ge&&(Ge=kt),Bt<bt&&(bt=Bt),kt>mt&&(mt=kt),Bt>gt&&(gt=Bt)}}else Ge=mt=bt=gt=0;_e=W[Ce]={index:Ce,advanceWidth:Q.hmtx.aWidth[Ce],xMin:Ge,yMin:bt,xMax:mt,yMax:gt,path:Te,pathCommandCount:oe.length}}Ye!==-1&&(ke+=i.U.getPairAdjustment(Q,Ye,Ce)*Re),Be.call(null,_e,ke,Pe),_e.advanceWidth&&(ke+=_e.advanceWidth*Re),me&&(ke+=me*xe),Ye=Ce}Pe+=le.codePointAt(Pe)>65535?2:1}),ke}};return ge}return function(W){const Y=new Uint8Array(W,0,4),K=i._bin.readASCII(Y,0,4);if(K==="wOFF")W=t(W);else if(K==="wOF2")throw new Error("woff2 fonts not supported");return j(i.parse(W)[0])}}const ov=ud({name:"Typr Font Parser",dependencies:[Np,iv,V1],init(i,t,r){const l=i(),c=t();return r(l,c)}}),Mu={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Zm=new s.Color;let Pg=!1;function mh(){return(self.performance||Date).now()}function g3(i){Pg?Hs.warn("configureTextBuilder called after first font request; will be ignored."):Ic(Mu,i)}const $m=Object.create(null);function sv(i,t){Pg=!0,i=Ic({},i);const r=mh();if(i.font=av(i.font||Mu.defaultFontURL),i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Mu.sdfGlyphSize,i.colorRanges!=null){let T={};for(let R in i.colorRanges)if(i.colorRanges.hasOwnProperty(R)){let F=i.colorRanges[R];typeof F!="number"&&(F=Zm.set(F).getHex()),T[R]=F}i.colorRanges=T}Object.freeze(i);const{textureWidth:l,sdfExponent:c}=Mu,{sdfGlyphSize:p}=i,h=l/p*4;let g=$m[p];if(!g){const T=document.createElement("canvas");T.width=l,T.height=p*256/h,g=$m[p]={glyphCount:0,sdfGlyphSize:p,sdfCanvas:T,sdfTexture:new s.Texture(T,void 0,void 0,void 0,s.LinearFilter,s.LinearFilter),contextLost:!1,glyphsByFont:new Map},g.sdfTexture.generateMipmaps=!1,m3(g)}const{sdfTexture:v,sdfCanvas:_}=g;let b=g.glyphsByFont.get(i.font);b||g.glyphsByFont.set(i.font,b=new Map),K1(i).then(T=>{const{glyphIds:R,glyphPositions:F,fontSize:G,unitsPerEm:L,timings:O}=T,k=[],P=new Float32Array(R.length*4),z=G/L;let j=0,Q=0;const W=mh();R.forEach((ge,le)=>{let xe=b.get(ge);if(!xe){const{path:Re,pathBounds:ze}=T.glyphData[ge],Pe=Math.max(ze[2]-ze[0],ze[3]-ze[1])/p*(Mu.sdfMargin*p+.5),Ye=g.glyphCount++,Ce=[ze[0]-Pe,ze[1]-Pe,ze[2]+Pe,ze[3]+Pe];b.set(ge,xe={path:Re,atlasIndex:Ye,sdfViewBox:Ce}),k.push(xe)}const{sdfViewBox:me}=xe,Be=F[Q++],ke=F[Q++];P[j++]=Be+me[0]*z,P[j++]=ke+me[1]*z,P[j++]=Be+me[2]*z,P[j++]=ke+me[3]*z,R[le]=xe.atlasIndex}),O.quads=(O.quads||0)+(mh()-W);const Y=mh();O.sdf={};const K=_.height,se=Math.ceil(g.glyphCount/h),ce=Math.pow(2,Math.ceil(Math.log2(se*p)));ce>K&&(Hs.info(`Increasing SDF texture size ${K}->${ce}`),rv(_,l,ce),v.dispose()),Promise.all(k.map(ge=>e0(ge,g,i.gpuAccelerateSDF).then(({timing:le})=>{O.sdf[ge.atlasIndex]=le}))).then(()=>{k.length&&!g.contextLost&&(t0(g),v.needsUpdate=!0),O.sdfTotal=mh()-Y,O.total=mh()-r,t(Object.freeze({parameters:i,sdfTexture:v,sdfGlyphSize:p,sdfExponent:c,glyphBounds:P,glyphAtlasIndices:R,glyphColors:T.glyphColors,caretPositions:T.caretPositions,caretHeight:T.caretHeight,chunkedBounds:T.chunkedBounds,ascender:T.ascender,descender:T.descender,lineHeight:T.lineHeight,capHeight:T.capHeight,xHeight:T.xHeight,topBaseline:T.topBaseline,blockBounds:T.blockBounds,visibleBounds:T.visibleBounds,timings:T.timings}))})}),Promise.resolve().then(()=>{g.contextLost||nv(_)})}function e0({path:i,atlasIndex:t,sdfViewBox:r},{sdfGlyphSize:l,sdfCanvas:c,contextLost:p},h){if(p)return Promise.resolve({timing:-1});const{textureWidth:g,sdfExponent:v}=Mu,_=Math.max(r[2]-r[0],r[3]-r[1]),b=Math.floor(t/4),T=b%(g/l)*l,R=Math.floor(b/(g/l))*l,F=t%4;return f3(l,l,i,r,_,v,c,T,R,F,h)}function m3(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",r=>{Hs.log("Context Lost",r),r.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",r=>{Hs.log("Context Restored",r),i.contextLost=!1;const l=[];i.glyphsByFont.forEach(c=>{c.forEach(p=>{l.push(e0(p,i,!0))})}),Promise.all(l).then(()=>{t0(i),i.sdfTexture.needsUpdate=!0})})}function A3({font:i,characters:t,sdfGlyphSize:r},l){let c=Array.isArray(t)?t.join(`
`):""+t;sv({font:i,sdfGlyphSize:r,text:c},l)}function Ic(i,t){for(let r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i}let Ah;function av(i){return Ah||(Ah=typeof document=="undefined"?{}:document.createElement("a")),Ah.href=i,Ah.href}function t0(i){if(typeof createImageBitmap!="function"){Hs.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:r}=i,{width:l,height:c}=t,p=i.sdfCanvas.getContext("webgl");let h=r.image.data;(!h||h.length!==l*c*4)&&(h=new Uint8Array(l*c*4),r.image={width:l,height:c,data:h},r.flipY=!1,r.isDataTexture=!0),p.readPixels(0,0,l,c,p.RGBA,p.UNSIGNED_BYTE,h)}}const K1=ud({name:"Typesetter",dependencies:[ud({name:"Typesetter",dependencies:[Mu,ov,Mf,_f],init(i,t,r,l){const{defaultFontURL:c}=i;return r(t,l(),{defaultFontURL:c})}})],init(i){return function(t){return new Promise(r=>{i.typeset(t,r)})}},getTransferables(i){const t=[i.glyphPositions.buffer,i.glyphIds.buffer];return i.caretPositions&&t.push(i.caretPositions.buffer),i.glyphColors&&t.push(i.glyphColors.buffer),t}});function lv(){Object.keys($m).forEach(i=>{const t=$m[i].sdfCanvas,{width:r,height:l}=t;Hs.log("%c.",`
      background: url(${t.toDataURL()});
      background-size: ${r}px ${l}px;
      color: transparent;
      font-size: 0;
      line-height: ${l}px;
      padding-left: ${r}px;
    `)})}const n0={};function cv(i){let t=n0[i];if(!t){const r=new s.PlaneGeometry(1,1,i,i),l=r.clone(),c=r.attributes,p=l.attributes,h=new s.BufferGeometry,g=c.uv.count;for(let v=0;v<g;v++)p.position.array[v*3]*=-1,p.normal.array[v*3+2]*=-1;["position","normal","uv"].forEach(v=>{h.setAttribute(v,new s.Float32BufferAttribute([...c[v].array,...p[v].array],c[v].itemSize))}),h.setIndex([...r.index.array,...l.index.array.map(v=>v+g)]),h.translate(.5,.5,0),t=n0[i]=h}return t}const pv="aTroikaGlyphBounds",uv="aTroikaGlyphIndex",y3="aTroikaGlyphColor";class v3 extends s.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s.Sphere,this.boundingBox=new s.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const r=this.getIndex().count;this.setDrawRange(t===s.BackSide?r/2:0,t===s.DoubleSide?r:r/2)}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let r=cv(t);["position","normal","uv"].forEach(l=>{this.attributes[l]=r.attributes[l].clone()}),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,r,l,c,p){yh(this,pv,t,4),yh(this,uv,r,1),yh(this,y3,p,3),this._blockBounds=l,this._chunkedBounds=c,this.instanceCount=r.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:r,boundingBox:l}=this;if(r){const{PI:c,floor:p,min:h,max:g,sin:v,cos:_}=Math,b=c/2,T=c*2,R=Math.abs(r),F=t[0]/R,G=t[2]/R,L=p((F+b)/T)!==p((G+b)/T)?-R:h(v(F)*R,v(G)*R),O=p((F-b)/T)!==p((G-b)/T)?R:g(v(F)*R,v(G)*R),k=p((F+c)/T)!==p((G+c)/T)?R*2:g(R-_(F)*R,R-_(G)*R);l.min.set(L,t[1],r<0?-k:0),l.max.set(O,t[3],r<0?0:k)}else l.min.set(t[0],t[1],0),l.max.set(t[2],t[3],0);l.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let r=this.getAttribute(uv).count,l=this._chunkedBounds;if(l)for(let c=l.length;c--;){r=l[c].end;let p=l[c].rect;if(p[1]<t.w&&p[3]>t.y&&p[0]<t.z&&p[2]>t.x)break}this.instanceCount=r}}function yh(i,t,r,l){const c=i.getAttribute(t);r?c&&c.array.length===r.length?(c.array.set(r),c.needsUpdate=!0):(i.setAttribute(t,new s.InstancedBufferAttribute(r,l)),delete i._maxInstanceCount,i.dispose()):c&&i.deleteAttribute(t)}const _3=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,E3=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,b3=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,M3=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Lg(i){const t=fh(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new s.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new s.Vector4(0,0,0,0)},uTroikaClipRect:{value:new s.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new s.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new s.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new s.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:_3,vertexTransform:E3,fragmentDefs:b3,fragmentColorTransform:M3,customRewriter({vertexShader:r,fragmentShader:l}){let c=/\buniform\s+vec3\s+diffuse\b/;return c.test(l)&&(l=l.replace(c,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),c.test(r)||(r=r.replace(Ef,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:r,fragmentShader:l}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const kg=new s.MeshBasicMaterial({color:16777215,side:s.DoubleSide,transparent:!0}),X1=8421504,zg=new s.Matrix4,Gg=new s.Vector3,Ng=new s.Vector3,vh=[],Y1=new s.Vector3,Ug="+x+y";function J1(i){return Array.isArray(i)?i[0]:i}let xf=()=>{const i=new s.Mesh(new s.PlaneGeometry(1,1),kg);return xf=()=>i,i},Cf=()=>{const i=new s.Mesh(new s.PlaneGeometry(1,1,32,1),kg);return Cf=()=>i,i};const r0={type:"syncstart"},i0={type:"synccomplete"},_h=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],o0=_h.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class xu extends s.Mesh{constructor(){const t=new v3;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=X1,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Ug,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(r0),sv({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},r=>{this._isSyncing=!1,this._textRenderInfo=r,this.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.blockBounds,r.chunkedBounds,r.glyphColors);const l=this._queuedSyncs;l&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{l.forEach(c=>c&&c())})),this.dispatchEvent(i0),t&&t()})))}onBeforeRender(t,r,l,c,p,h){this.sync(),p.isTroikaTextMaterial&&this._prepareForRender(p),p._hadOwnSide=p.hasOwnProperty("side"),this.geometry.setSide(p._actualSide=p.side),p.side=s.FrontSide}onAfterRender(t,r,l,c,p,h){p._hadOwnSide?p.side=p._actualSide:delete p.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=kg.clone());if((!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=Lg(r),r.addEventListener("dispose",function l(){r.removeEventListener("dispose",l),t.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let l=t._outlineMtl;return l||(l=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),l.isTextOutlineMaterial=!0,l.depthWrite=!1,l.map=null,t.addEventListener("dispose",function c(){t.removeEventListener("dispose",c),l.dispose()})),[l,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return J1(this.material).getDepthMaterial()}get customDistanceMaterial(){return J1(this.material).getDistanceMaterial()}_prepareForRender(t){const r=t.isTextOutlineMaterial,l=t.uniforms,c=this.textRenderInfo;if(c){const{sdfTexture:g,blockBounds:v}=c;l.uTroikaSDFTexture.value=g,l.uTroikaSDFTextureSize.value.set(g.image.width,g.image.height),l.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,l.uTroikaSDFExponent.value=c.sdfExponent,l.uTroikaTotalBounds.value.fromArray(v),l.uTroikaUseGlyphColors.value=!r&&!!c.glyphColors;let _=0,b=0,T=0,R,F,G,L=0,O=0;if(r){let{outlineWidth:P,outlineOffsetX:z,outlineOffsetY:j,outlineBlur:Q,outlineOpacity:W}=this;_=this._parsePercent(P)||0,b=Math.max(0,this._parsePercent(Q)||0),R=W,L=this._parsePercent(z)||0,O=this._parsePercent(j)||0}else T=Math.max(0,this._parsePercent(this.strokeWidth)||0),T&&(G=this.strokeColor,l.uTroikaStrokeColor.value.set(G==null?X1:G),F=this.strokeOpacity,F==null&&(F=1)),R=this.fillOpacity;l.uTroikaDistanceOffset.value=_,l.uTroikaPositionOffset.value.set(L,O),l.uTroikaBlurRadius.value=b,l.uTroikaStrokeWidth.value=T,l.uTroikaStrokeOpacity.value=F,l.uTroikaFillOpacity.value=R==null?1:R,l.uTroikaCurveRadius.value=this.curveRadius||0;let k=this.clipRect;if(k&&Array.isArray(k)&&k.length===4)l.uTroikaClipRect.value.fromArray(k);else{const P=(this.fontSize||.1)*100;l.uTroikaClipRect.value.set(v[0]-P,v[1]-P,v[2]+P,v[3]+P)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const p=r?this.outlineColor||0:this.color;if(p==null)delete t.color;else{const g=t.hasOwnProperty("color")?t.color:t.color=new s.Color;(p!==g._input||typeof p=="object")&&g.set(g._input=p)}let h=this.orientation||Ug;if(h!==t._orientation){let g=l.uTroikaOrient.value;h=h.replace(/[^-+xyz]/g,"");let v=h!==Ug&&h.match(/^([-+])([xyz])([-+])([xyz])$/);if(v){let[,_,b,T,R]=v;Gg.set(0,0,0)[b]=_==="-"?1:-1,Ng.set(0,0,0)[R]=T==="-"?-1:1,zg.lookAt(Y1,Gg.cross(Ng),Ng),g.setFromMatrix4(zg)}else g.identity();t._orientation=h}}_parsePercent(t){if(typeof t=="string"){let r=t.match(/^(-?[\d.]+)%$/),l=r?parseFloat(r[1]):NaN;t=(isNaN(l)?0:l/100)*this.fontSize}return t}localPositionToTextCoords(t,r=new s.Vector2){r.copy(t);const l=this.curveRadius;return l&&(r.x=Math.atan2(t.x,Math.abs(l)-Math.abs(t.z))*Math.abs(l)),r}worldPositionToTextCoords(t,r=new s.Vector2){return Gg.copy(t),this.localPositionToTextCoords(this.worldToLocal(Gg),r)}raycast(t,r){const{textRenderInfo:l,curveRadius:c}=this;if(l){const p=l.blockBounds,h=c?Cf():xf(),g=h.geometry,{position:v,uv:_}=g.attributes;for(let b=0;b<_.count;b++){let T=p[0]+_.getX(b)*(p[2]-p[0]);const R=p[1]+_.getY(b)*(p[3]-p[1]);let F=0;c&&(F=c-Math.cos(T/c)*c,T=Math.sin(T/c)*c),v.setXYZ(b,T,R,F)}g.boundingSphere=this.geometry.boundingSphere,g.boundingBox=this.geometry.boundingBox,h.matrixWorld=this.matrixWorld,h.material.side=this.material.side,vh.length=0,h.raycast(t,vh);for(let b=0;b<vh.length;b++)vh[b].object=this,r.push(vh[b])}}copy(t){const r=this.geometry;return super.copy(t),this.geometry=r,o0.forEach(l=>{this[l]=t[l]}),this}clone(){return new this.constructor().copy(this)}}_h.forEach(i=>{const t="_private_"+i;Object.defineProperty(xu.prototype,i,{get(){return this[t]},set(r){r!==this[t]&&(this[t]=r,this._needsSync=!0)}})});function q1(i,t,r){let l=null;const{caretHeight:c}=i,p=a0(i);let h=1/0;return p.forEach((g,v)=>{Math.abs(r-(v+c/2))<Math.abs(r-(h+c/2))&&(h=v)}),p.get(h).forEach(g=>{(!l||Math.abs(t-g.x)<Math.abs(t-l.x))&&(l=g)}),l}const jg=new WeakMap;function Z1(i,t,r){let l;if(i){let c=jg.get(i);if(c&&c.start===t&&c.end===r)return c.rects;const{caretPositions:p,caretHeight:h}=i;if(r<t){const v=t;t=r,r=v}t=Math.max(t,0),r=Math.min(r,p.length+1),l=[];let g=null;for(let v=t;v<r;v++){const _=p[v*3],b=p[v*3+1],T=Math.min(_,b),R=Math.max(_,b),F=p[v*3+2];(!g||F!==g.bottom||T>g.right||R<g.left)&&(g={left:1/0,right:-1/0,bottom:F,top:F+h},l.push(g)),g.left=Math.min(T,g.left),g.right=Math.max(R,g.right)}l.sort((v,_)=>_.bottom-v.bottom||v.left-_.left);for(let v=l.length-1;v-- >0;){const _=l[v],b=l[v+1];_.bottom===b.bottom&&_.left<=b.right&&_.right>=b.left&&(b.left=Math.min(b.left,_.left),b.right=Math.max(b.right,_.right),l.splice(v,1))}jg.set(i,{start:t,end:r,rects:l})}return l}const s0=new WeakMap;function a0(i){let t=s0.get(i);if(!t){const{caretPositions:r,caretHeight:l}=i;t=new Map;for(let c=0;c<r.length;c+=3){const p=r[c+2];let h=t.get(p);h||t.set(p,h=[]),h.push({x:r[c],y:p,height:l,charIndex:c/3}),c+3>=r.length&&h.push({x:r[c+1],y:p,height:l,charIndex:c/3+1})}}return s0.set(i,t),t}var cc=A(58139);const Eh=d.forwardRef((b,_)=>{var T=b,{sdfGlyphSize:i=64,anchorX:t="center",anchorY:r="middle",font:l,fontSize:c=1,children:p,characters:h,onSync:g}=T,v=_n(T,["sdfGlyphSize","anchorX","anchorY","font","fontSize","children","characters","onSync"]);const R=(0,E.z)(({invalidate:O})=>O),[F]=d.useState(()=>new xu),[G,L]=d.useMemo(()=>{const O=[];let k="";return d.Children.forEach(p,P=>{typeof P=="string"||typeof P=="number"?k+=P:O.push(P)}),[O,k]},[p]);return(0,cc.Rq)(()=>new Promise(O=>A3({font:l,characters:h},O)),["troika-text",l,h]),d.useLayoutEffect(()=>void F.sync(()=>{R(),g&&g(F)})),d.useEffect(()=>()=>F.dispose(),[F]),d.createElement("primitive",(0,w.Z)({object:F,ref:_,font:l,text:L,anchorX:t,anchorY:r,fontSize:c,sdfGlyphSize:i},v),G)});class x3 extends s.ExtrudeGeometry{constructor(t,r={}){const R=r,{bevelEnabled:l=!1,bevelSize:c=8,bevelThickness:p=10,font:h,height:g=50,size:v=100,lineHeight:_=1,letterSpacing:b=0}=R,T=_n(R,["bevelEnabled","bevelSize","bevelThickness","font","height","size","lineHeight","letterSpacing"]);if(h===void 0)super();else{const F=h.generateShapes(t,v,{lineHeight:_,letterSpacing:b});super(F,Xo(Kn({},T),{bevelEnabled:l,bevelSize:c,bevelThickness:p,depth:g}))}this.type="TextGeometry"}}var Ia=A(25108);const Sf=(i,t)=>{const r=i[0].index!==null,l=new Set(Object.keys(i[0].attributes)),c=new Set(Object.keys(i[0].morphAttributes)),p={},h={},g=i[0].morphTargetsRelative,v=new BufferGeometry;let _=0;if(i.forEach((b,T)=>{let R=0;if(r!==(b.index!==null))return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let F in b.attributes){if(!l.has(F))return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+'. All geometries must have compatible attributes; make sure "'+F+'" attribute exists among all geometries, or in none of them.'),null;p[F]===void 0&&(p[F]=[]),p[F].push(b.attributes[F]),R++}if(R!==l.size)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". Make sure all geometries have the same number of attributes."),null;if(g!==b.morphTargetsRelative)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let F in b.morphAttributes){if(!c.has(F))return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+".  .morphAttributes must be consistent throughout all geometries."),null;h[F]===void 0&&(h[F]=[]),h[F].push(b.morphAttributes[F])}if(v.userData.mergedUserData=v.userData.mergedUserData||[],v.userData.mergedUserData.push(b.userData),t){let F;if(b.index)F=b.index.count;else if(b.attributes.position!==void 0)F=b.attributes.position.count;else return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". The geometry must have either an index or a position attribute"),null;v.addGroup(_,F,T),_+=F}}),r){let b=0;const T=[];i.forEach(R=>{const F=R.index;for(let G=0;G<F.count;++G)T.push(F.getX(G)+b);b+=R.attributes.position.count}),v.setIndex(T)}for(let b in p){const T=wf(p[b]);if(!T)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" attribute."),null;v.setAttribute(b,T)}for(let b in h){const T=h[b][0].length;if(T===0)break;v.morphAttributes=v.morphAttributes||{},v.morphAttributes[b]=[];for(let R=0;R<T;++R){const F=[];for(let L=0;L<h[b].length;++L)F.push(h[b][L][R]);const G=wf(F);if(!G)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" morphAttribute."),null;v.morphAttributes[b].push(G)}}return v},wf=i=>{let t,r,l,c=0;if(i.forEach(p=>{if(t===void 0&&(t=p.array.constructor),t!==p.array.constructor)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=p.itemSize),r!==p.itemSize)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(l===void 0&&(l=p.normalized),l!==p.normalized)return Ia.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;c+=p.array.length}),t&&r){const p=new t(c);let h=0;return i.forEach(g=>{p.set(g.array,h),h+=g.array.length}),new BufferAttribute(p,r,l)}},_M=i=>{let t,r=0,l=0;for(let _=0,b=i.length;_<b;++_){const T=i[_];if(t===void 0&&(t=T.array.constructor),t!==T.array.constructor)return Ia.error("AttributeBuffers of different types cannot be interleaved"),null;r+=T.array.length,l+=T.itemSize}const c=new InterleavedBuffer(new t(r),l);let p=0;const h=[],g=["getX","getY","getZ","getW"],v=["setX","setY","setZ","setW"];for(let _=0,b=i.length;_<b;_++){const T=i[_],R=T.itemSize,F=T.count,G=new InterleavedBufferAttribute(c,R,p,T.normalized);h.push(G),p+=R;for(let L=0;L<F;L++)for(let O=0;O<R;O++){const k=getWithKey(G,v[O]),P=getWithKey(T,g[O]);k(L,P(L))}}return h};function EM(i){let t=0;for(let l in i.attributes){const c=i.getAttribute(l);t+=c.count*c.itemSize*c.array.BYTES_PER_ELEMENT}const r=i.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}function C3(i,t=1e-4){t=Math.max(t,Number.EPSILON);const r={},l=i.getIndex(),c=i.getAttribute("position"),p=l?l.count:c.count;let h=0;const g=Object.keys(i.attributes),v={},_={},b=[],T=["getX","getY","getZ","getW"];for(let L=0,O=g.length;L<O;L++){const k=g[L];v[k]=[];const P=i.morphAttributes[k];P&&(_[k]=new Array(P.length).fill(0).map(()=>[]))}const R=Math.log10(1/t),F=Math.pow(10,R);for(let L=0;L<p;L++){const O=l?l.getX(L):L;let k="";for(let P=0,z=g.length;P<z;P++){const j=g[P],Q=i.getAttribute(j),W=Q.itemSize;for(let Y=0;Y<W;Y++)k+=`${~~(Q[T[Y]](O)*F)},`}if(k in r)b.push(r[k]);else{for(let P=0,z=g.length;P<z;P++){const j=g[P],Q=i.getAttribute(j),W=i.morphAttributes[j],Y=Q.itemSize,K=v[j],se=_[j];for(let ce=0;ce<Y;ce++){const ge=T[ce];if(K.push(Q[ge](O)),W)for(let le=0,xe=W.length;le<xe;le++)se[le].push(W[le][ge](O))}}r[k]=h,b.push(h),h++}}const G=i.clone();for(let L=0,O=g.length;L<O;L++){const k=g[L],P=i.getAttribute(k),z=new P.array.constructor(v[k]),j=new s.BufferAttribute(z,P.itemSize,P.normalized);if(G.setAttribute(k,j),k in _)for(let Q=0;Q<_[k].length;Q++){const W=i.morphAttributes[k][Q],Y=new W.array.constructor(_[k][Q]),K=new s.BufferAttribute(Y,W.itemSize,W.normalized);G.morphAttributes[k][Q]=K}}return G.setIndex(b),G}function dv(i,t){if(t===s.TrianglesDrawMode)return Ia.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===s.TriangleFanDrawMode||t===s.TriangleStripDrawMode){let r=i.getIndex();if(r===null){const h=[],g=i.getAttribute("position");if(g!==void 0){for(let v=0;v<g.count;v++)h.push(v);i.setIndex(h),r=i.getIndex()}else return Ia.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const l=r.count-2,c=[];if(r)if(t===s.TriangleFanDrawMode)for(let h=1;h<=l;h++)c.push(r.getX(0)),c.push(r.getX(h)),c.push(r.getX(h+1));else for(let h=0;h<l;h++)h%2===0?(c.push(r.getX(h)),c.push(r.getX(h+1)),c.push(r.getX(h+2))):(c.push(r.getX(h+2)),c.push(r.getX(h+1)),c.push(r.getX(h)));c.length/3!==l&&Ia.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const p=i.clone();return p.setIndex(c),p.clearGroups(),p}else return Ia.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}function bM(i){if(i.geometry.isBufferGeometry!==!0)return Ia.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const t=new Vector3,r=new Vector3,l=new Vector3,c=new Vector3,p=new Vector3,h=new Vector3,g=new Vector3,v=new Vector3,_=new Vector3;function b(Ye,Ce,Ee,_e,oe,Ae,Te,ve,Ge){t.fromBufferAttribute(Ee,Ae),r.fromBufferAttribute(Ee,Te),l.fromBufferAttribute(Ee,ve);const bt=Ye.morphTargetInfluences;if(Ce.morphTargets&&_e&&bt){g.set(0,0,0),v.set(0,0,0),_.set(0,0,0);for(let mt=0,gt=_e.length;mt<gt;mt++){const rt=bt[mt],Wt=_e[mt];rt!==0&&(c.fromBufferAttribute(Wt,Ae),p.fromBufferAttribute(Wt,Te),h.fromBufferAttribute(Wt,ve),oe?(g.addScaledVector(c,rt),v.addScaledVector(p,rt),_.addScaledVector(h,rt)):(g.addScaledVector(c.sub(t),rt),v.addScaledVector(p.sub(r),rt),_.addScaledVector(h.sub(l),rt)))}t.add(g),r.add(v),l.add(_)}Ye.isSkinnedMesh&&(Ye.boneTransform(Ae,t),Ye.boneTransform(Te,r),Ye.boneTransform(ve,l)),Ge[Ae*3+0]=t.x,Ge[Ae*3+1]=t.y,Ge[Ae*3+2]=t.z,Ge[Te*3+0]=r.x,Ge[Te*3+1]=r.y,Ge[Te*3+2]=r.z,Ge[ve*3+0]=l.x,Ge[ve*3+1]=l.y,Ge[ve*3+2]=l.z}const T=i.geometry,R=i.material;let F,G,L;const O=T.index,k=T.attributes.position,P=T.morphAttributes.position,z=T.morphTargetsRelative,j=T.attributes.normal,Q=T.morphAttributes.position,W=T.groups,Y=T.drawRange;let K,se,ce,ge,le,xe,me,Be;const ke=new Float32Array(k.count*k.itemSize),Re=new Float32Array(j.count*j.itemSize);if(O!==null)if(Array.isArray(R))for(K=0,ce=W.length;K<ce;K++)for(le=W[K],xe=R[le.materialIndex],me=Math.max(le.start,Y.start),Be=Math.min(le.start+le.count,Y.start+Y.count),se=me,ge=Be;se<ge;se+=3)F=O.getX(se),G=O.getX(se+1),L=O.getX(se+2),b(i,xe,k,P,z,F,G,L,ke),b(i,xe,j,Q,z,F,G,L,Re);else for(me=Math.max(0,Y.start),Be=Math.min(O.count,Y.start+Y.count),K=me,ce=Be;K<ce;K+=3)F=O.getX(K),G=O.getX(K+1),L=O.getX(K+2),b(i,R,k,P,z,F,G,L,ke),b(i,R,j,Q,z,F,G,L,Re);else if(k!==void 0)if(Array.isArray(R))for(K=0,ce=W.length;K<ce;K++)for(le=W[K],xe=R[le.materialIndex],me=Math.max(le.start,Y.start),Be=Math.min(le.start+le.count,Y.start+Y.count),se=me,ge=Be;se<ge;se+=3)F=se,G=se+1,L=se+2,b(i,xe,k,P,z,F,G,L,ke),b(i,xe,j,Q,z,F,G,L,Re);else for(me=Math.max(0,Y.start),Be=Math.min(k.count,Y.start+Y.count),K=me,ce=Be;K<ce;K+=3)F=K,G=K+1,L=K+2,b(i,R,k,P,z,F,G,L,ke),b(i,R,j,Q,z,F,G,L,Re);const ze=new Float32BufferAttribute(ke,3),Pe=new Float32BufferAttribute(Re,3);return{positionAttribute:k,normalAttribute:j,morphedPositionAttribute:ze,morphedNormalAttribute:Pe}}function S3(i,t=Math.PI/3){const r=Math.cos(t),l=(1+1e-10)*100,c=[new s.Vector3,new s.Vector3,new s.Vector3],p=new s.Vector3,h=new s.Vector3,g=new s.Vector3,v=new s.Vector3;function _(L){const O=~~(L.x*l),k=~~(L.y*l),P=~~(L.z*l);return`${O},${k},${P}`}const b=i.index?i.toNonIndexed():i,T=b.attributes.position,R={};for(let L=0,O=T.count/3;L<O;L++){const k=3*L,P=c[0].fromBufferAttribute(T,k+0),z=c[1].fromBufferAttribute(T,k+1),j=c[2].fromBufferAttribute(T,k+2);p.subVectors(j,z),h.subVectors(P,z);const Q=new s.Vector3().crossVectors(p,h).normalize();for(let W=0;W<3;W++){const Y=c[W],K=_(Y);K in R||(R[K]=[]),R[K].push(Q)}}const F=new Float32Array(T.count*3),G=new s.BufferAttribute(F,3,!1);for(let L=0,O=T.count/3;L<O;L++){const k=3*L,P=c[0].fromBufferAttribute(T,k+0),z=c[1].fromBufferAttribute(T,k+1),j=c[2].fromBufferAttribute(T,k+2);p.subVectors(j,z),h.subVectors(P,z),g.crossVectors(p,h).normalize();for(let Q=0;Q<3;Q++){const W=c[Q],Y=_(W),K=R[Y];v.set(0,0,0);for(let se=0,ce=K.length;se<ce;se++){const ge=K[se];g.dot(ge)>r&&v.add(ge)}v.normalize(),G.setXYZ(k+Q,v.x,v.y,v.z)}}return b.setAttribute("normal",G),b}var w3=A(25108),T3=Object.defineProperty,B3=(i,t,r)=>t in i?T3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$1=(i,t,r)=>(B3(i,typeof t!="symbol"?t+"":t,r),r);class R3 extends s.Loader{constructor(t){super(t)}load(t,r,l,c){const p=new s.FileLoader(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{if(typeof h!="string")throw new Error("unsupported data type");const g=JSON.parse(h),v=this.parse(g);r&&r(v)},l,c)}loadAsync(t,r){return super.loadAsync(t,r)}parse(t){return new Hg(t)}}class Hg{constructor(t){$1(this,"data"),this.data=t}generateShapes(t,r=100,l){const c=[],p=Kn({letterSpacing:0,lineHeight:1},l),h=I3(t,r,this.data,p);for(let g=0,v=h.length;g<v;g++)Array.prototype.push.apply(c,h[g].toShapes(!1));return c}}$1(Hg,"isFont"),$1(Hg,"type");function I3(i,t,r,l){const c=Array.from(i),p=t/r.resolution,h=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*p,g=[];let v=0,_=0;for(let b=0;b<c.length;b++){const T=c[b];if(T===`
`)v=0,_-=h*l.lineHeight;else{const R=Tf(T,p,v,_,r);R&&(v+=R.offsetX+l.letterSpacing,g.push(R.path))}}return g}function Tf(i,t,r,l,c){const p=c.glyphs[i]||c.glyphs["?"];if(!p){w3.error('THREE.Font: character "'+i+'" does not exists in font family '+c.familyName+".");return}const h=new s.ShapePath;let g,v,_,b,T,R,F,G;if(p.o){const L=p._cachedOutline||(p._cachedOutline=p.o.split(" "));for(let O=0,k=L.length;O<k;)switch(L[O++]){case"m":g=parseInt(L[O++])*t+r,v=parseInt(L[O++])*t+l,h.moveTo(g,v);break;case"l":g=parseInt(L[O++])*t+r,v=parseInt(L[O++])*t+l,h.lineTo(g,v);break;case"q":_=parseInt(L[O++])*t+r,b=parseInt(L[O++])*t+l,T=parseInt(L[O++])*t+r,R=parseInt(L[O++])*t+l,h.quadraticCurveTo(T,R,_,b);break;case"b":_=parseInt(L[O++])*t+r,b=parseInt(L[O++])*t+l,T=parseInt(L[O++])*t+r,R=parseInt(L[O++])*t+l,F=parseInt(L[O++])*t+r,G=parseInt(L[O++])*t+l,h.bezierCurveTo(T,R,F,G,_,b);break}}return{offsetX:p.ha*t,path:h}}let eA=null;function ps(i){return ss(this,null,function*(){eA||(eA=new R3);let t=typeof i=="string"?yield(yield fetch(i)).json():i;return eA.parse(t)})}function bh(i){return(0,cc.Rq)(ps,[i])}bh.preload=i=>(0,cc.MA)(ps,[i]),bh.clear=i=>(0,cc.ZH)([i]);const hv=["string","number"],l0=i=>{let t="";const r=[];return d.Children.forEach(i,l=>{hv.includes(typeof l)?t+=l+"":r.push(l)}),[t,...r]},Wg=d.forwardRef((L,G)=>{var O=L,{font:i,letterSpacing:t=0,lineHeight:r=1,size:l=1,height:c=.2,bevelThickness:p=.1,bevelSize:h=.01,bevelEnabled:g=!1,bevelOffset:v=0,bevelSegments:_=4,curveSegments:b=8,smooth:T,children:R}=O,F=_n(O,["font","letterSpacing","lineHeight","size","height","bevelThickness","bevelSize","bevelEnabled","bevelOffset","bevelSegments","curveSegments","smooth","children"]);d.useMemo(()=>(0,E.e)({RenamedTextGeometry:x3}),[]);const k=d.useRef(null),P=bh(i),z=(0,d.useMemo)(()=>({font:P,size:l,height:c,bevelThickness:p,bevelSize:h,bevelEnabled:g,bevelSegments:_,bevelOffset:v,curveSegments:b,letterSpacing:t,lineHeight:r}),[P,l,c,p,h,g,_,v,b,t,r]),[j,...Q]=(0,d.useMemo)(()=>l0(R),[R]),W=d.useMemo(()=>[j,z],[j,z]);return d.useLayoutEffect(()=>{T&&(k.current.geometry=C3(k.current.geometry,T),k.current.geometry.computeVertexNormals())},[W,T]),d.useImperativeHandle(G,()=>k.current,[]),d.createElement("mesh",(0,w.Z)({},F,{ref:k}),d.createElement("renamedTextGeometry",{args:W}),Q)}),fv={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var Vg=A(25108),F3=Object.defineProperty,gv=(i,t,r)=>t in i?F3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,gd=(i,t,r)=>(gv(i,typeof t!="symbol"?t+"":t,r),r);class md{constructor(){gd(this,"enabled",!0),gd(this,"needsSwap",!0),gd(this,"clear",!1),gd(this,"renderToScreen",!1)}setSize(t,r){}render(t,r,l,c,p){Vg.error("THREE.Pass: .render() must be implemented in derived pass.")}}class $c{constructor(t){gd(this,"camera",new s.OrthographicCamera(-1,1,1,-1,0,1)),gd(this,"geometry",new s.PlaneGeometry(2,2)),gd(this,"mesh"),this.mesh=new s.Mesh(this.geometry,t)}get material(){return this.mesh.material}set material(t){this.mesh.material=t}dispose(){this.mesh.geometry.dispose()}render(t){t.render(this.mesh,this.camera)}}var O3=Object.defineProperty,Up=(i,t,r)=>t in i?O3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Qg=(i,t,r)=>(Up(i,typeof t!="symbol"?t+"":t,r),r);class c0 extends md{constructor(t,r="tDiffuse"){super(),Qg(this,"textureID"),Qg(this,"uniforms"),Qg(this,"material"),Qg(this,"fsQuad"),this.textureID=r,t instanceof s.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):(this.uniforms=s.UniformsUtils.clone(t.uniforms),this.material=new s.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new $c(this.material)}render(t,r,l){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=l.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}var p0=Object.defineProperty,D3=(i,t,r)=>t in i?p0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,tA=(i,t,r)=>(D3(i,typeof t!="symbol"?t+"":t,r),r);class Kg extends md{constructor(t,r){super(),tA(this,"scene"),tA(this,"camera"),tA(this,"inverse"),this.scene=t,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,r,l){const c=t.getContext(),p=t.state;p.buffers.color.setMask(!1),p.buffers.depth.setMask(!1),p.buffers.color.setLocked(!0),p.buffers.depth.setLocked(!0);let h,g;this.inverse?(h=0,g=1):(h=1,g=0),p.buffers.stencil.setTest(!0),p.buffers.stencil.setOp(c.REPLACE,c.REPLACE,c.REPLACE),p.buffers.stencil.setFunc(c.ALWAYS,h,4294967295),p.buffers.stencil.setClear(g),p.buffers.stencil.setLocked(!0),t.setRenderTarget(l),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),p.buffers.color.setLocked(!1),p.buffers.depth.setLocked(!1),p.buffers.stencil.setLocked(!1),p.buffers.stencil.setFunc(c.EQUAL,1,4294967295),p.buffers.stencil.setOp(c.KEEP,c.KEEP,c.KEEP),p.buffers.stencil.setLocked(!0)}}class Xg extends md{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}var Yg=A(25108),u0=Object.defineProperty,P3=(i,t,r)=>t in i?u0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ul=(i,t,r)=>(P3(i,typeof t!="symbol"?t+"":t,r),r);class d0{constructor(t,r){if(ul(this,"renderer"),ul(this,"_pixelRatio"),ul(this,"_width"),ul(this,"_height"),ul(this,"renderTarget1"),ul(this,"renderTarget2"),ul(this,"writeBuffer"),ul(this,"readBuffer"),ul(this,"renderToScreen"),ul(this,"passes",[]),ul(this,"copyPass"),ul(this,"clock"),this.renderer=t,r===void 0){const l={minFilter:s.LinearFilter,magFilter:s.LinearFilter,format:s.RGBAFormat},c=t.getSize(new s.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=c.width,this._height=c.height,r=new s.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,l),r.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,fv===void 0&&Yg.error("THREE.EffectComposer relies on CopyShader"),c0===void 0&&Yg.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new c0(fv),this.clock=new s.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const r=this.passes.indexOf(t);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const r=this.renderer.getRenderTarget();let l=!1;const c=this.passes.length;for(let p=0;p<c;p++){const h=this.passes[p];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(p),h.render(this.renderer,this.writeBuffer,this.readBuffer,t,l),h.needsSwap){if(l){const g=this.renderer.getContext(),v=this.renderer.state.buffers.stencil;v.setFunc(g.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),v.setFunc(g.EQUAL,1,4294967295)}this.swapBuffers()}Kg!==void 0&&(h instanceof Kg?l=!0:h instanceof Xg&&(l=!1))}}this.renderer.setRenderTarget(r)}reset(t){if(t===void 0){const r=this.renderer.getSize(new s.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,r){this._width=t,this._height=r;const l=this._width*this._pixelRatio,c=this._height*this._pixelRatio;this.renderTarget1.setSize(l,c),this.renderTarget2.setSize(l,c);for(let p=0;p<this.passes.length;p++)this.passes[p].setSize(l,c)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}var h0=Object.defineProperty,f0=(i,t,r)=>t in i?h0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,jp=(i,t,r)=>(f0(i,typeof t!="symbol"?t+"":t,r),r);class mv extends md{constructor(t,r,l,c,p=0){super(),jp(this,"scene"),jp(this,"camera"),jp(this,"overrideMaterial"),jp(this,"clearColor"),jp(this,"clearAlpha"),jp(this,"clearDepth",!1),jp(this,"_oldClearColor",new s.Color),this.scene=t,this.camera=r,this.overrideMaterial=l,this.clearColor=c,this.clearAlpha=p,this.clear=!0,this.needsSwap=!1}render(t,r,l){let c=t.autoClear;t.autoClear=!1;let p,h=null;this.overrideMaterial!==void 0&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),p=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:l),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,p),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=h),t.autoClear=c}}const Av={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},yv=()=>{try{var i=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&i.getContext("webgl2"))}catch(t){return!1}},vv=d.forwardRef((F,R)=>{var G=F,{children:i,multisamping:t=8,renderIndex:r=1,disableRender:l,disableGamma:c,disableRenderPass:p,depthBuffer:h=!0,stencilBuffer:g=!1,anisotropy:v=1,encoding:_,type:b}=G,T=_n(G,["children","multisamping","renderIndex","disableRender","disableGamma","disableRenderPass","depthBuffer","stencilBuffer","anisotropy","encoding","type"]);d.useMemo(()=>(0,E.e)({EffectComposer:d0,RenderPass:mv,ShaderPass:c0}),[]);const L=d.useRef(),{scene:O,camera:k,gl:P,size:z,viewport:j}=(0,E.z)(),[Q]=d.useState(()=>{const Y=new s.WebGLRenderTarget(z.width,z.height,{type:b||s.HalfFloatType,format:s.RGBAFormat,depthBuffer:h,stencilBuffer:g,anisotropy:v});return b===s.UnsignedByteType&&_!=null&&("colorSpace"in Y?Y.texture.colorSpace=_:Y.texture.encoding=_),Y.samples=t,Y});d.useEffect(()=>{var Y,K;(Y=L.current)==null||Y.setSize(z.width,z.height),(K=L.current)==null||K.setPixelRatio(j.dpr)},[P,z,j.dpr]),(0,E.A)(()=>{var Y;l||(Y=L.current)==null||Y.render()},r);const W=[];return p||W.push(d.createElement("renderPass",{key:"renderpass",attach:`passes-${W.length}`,args:[O,k]})),c||W.push(d.createElement("shaderPass",{attach:`passes-${W.length}`,key:"gammapass",args:[Av]})),d.Children.forEach(i,Y=>{Y&&W.push(d.cloneElement(Y,{key:W.length,attach:`passes-${W.length}`}))}),d.createElement("effectComposer",(0,w.Z)({ref:zr([R,L]),args:[P,Q]},T),W)});let g0=function(i){return i.Linear="linear",i.Radial="radial",i}({});function nA(v){var _=v,{stops:i,colors:t,size:r=1024,width:l=16,type:c=g0.Linear,innerCircleRadius:p=0,outerCircleRadius:h="auto"}=_,g=_n(_,["stops","colors","size","width","type","innerCircleRadius","outerCircleRadius"]);const b=(0,E.z)(R=>R.gl),T=d.useMemo(()=>{const R=document.createElement("canvas"),F=R.getContext("2d");R.width=l,R.height=r;let G;if(c===g0.Linear)G=F.createLinearGradient(0,0,0,r);else{const O=R.width/2,k=R.height/2,P=h!=="auto"?Math.abs(Number(h)):Math.sqrt(t1(O,2)+t1(k,2));G=F.createRadialGradient(O,k,Math.abs(p),O,k,P)}let L=i.length;for(;L--;)G.addColorStop(i[L],t[L]);return F.save(),F.fillStyle=G,F.fillRect(0,0,l,r),F.restore(),R},[i]);return d.createElement("canvasTexture",(0,w.Z)({colorSpace:b.outputColorSpace,args:[T],attach:"map"},g))}function Fc(i,t,r,l){const c=class extends s.ShaderMaterial{constructor(h={}){const g=Object.entries(i);super({uniforms:g.reduce((v,[_,b])=>{const T=s.UniformsUtils.clone({[_]:{value:b}});return Kn(Kn({},v),T)},{}),vertexShader:t,fragmentShader:r}),this.key="",g.forEach(([v])=>Object.defineProperty(this,v,{get:()=>this.uniforms[v].value,set:_=>this.uniforms[v].value=_})),Object.assign(this,h),l&&l(this)}};return c.key=s.MathUtils.generateUUID(),c}const Bf=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function Ad(i,t){const r=(0,E.z)(c=>c.gl),l=(0,E.D)(s.TextureLoader,Bf(i)?Object.values(i):i);if((0,d.useLayoutEffect)(()=>{t==null||t(l)},[t]),(0,d.useEffect)(()=>{(Array.isArray(l)?l:[l]).forEach(r.initTexture)},[r,l]),Bf(i)){const c=Object.keys(i),p={};return c.forEach(h=>Object.assign(p,{[h]:l[c.indexOf(h)]})),p}else return l}Ad.preload=i=>E.D.preload(s.TextureLoader,i),Ad.clear=i=>E.D.clear(s.TextureLoader,i);const _v=Fc({color:new s.Color("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),rA=d.forwardRef((R,T)=>{var F=R,{children:i,color:t,segments:r=1,scale:l=1,zoom:c=1,grayscale:p=0,opacity:h=1,texture:g,toneMapped:v,transparent:_}=F,b=_n(F,["children","color","segments","scale","zoom","grayscale","opacity","texture","toneMapped","transparent"]);(0,E.e)({ImageMaterial:_v});const G=Array.isArray(l)?[l[0],l[1]]:[l,l],L=[g.image.width,g.image.height];return d.createElement("mesh",(0,w.Z)({ref:T,scale:Array.isArray(l)?[...l,1]:l},b),d.createElement("planeGeometry",{args:[1,1,r,r]}),d.createElement("imageMaterial",{color:t,map:g,zoom:c,grayscale:p,opacity:h,scale:G,imageBounds:L,toneMapped:v,transparent:_}),i)}),Ev=d.forwardRef((l,r)=>{var c=l,{url:i}=c,t=_n(c,["url"]);const p=Ad(i);return d.createElement(rA,(0,w.Z)({},t,{texture:p,ref:r}))}),bv=d.forwardRef((l,r)=>{var c=l,{url:i}=c,t=_n(c,["url"]);return d.createElement(rA,(0,w.Z)({},t,{ref:r}))}),Oc=d.forwardRef((i,t)=>{if(i.url)return d.createElement(Ev,(0,w.Z)({},i,{ref:t}));if(i.texture)return d.createElement(bv,(0,w.Z)({},i,{ref:t}));throw new Error("<Image /> requires a url or texture")}),yd=d.forwardRef((g,h)=>{var v=g,{userData:i,children:t,geometry:r,threshold:l=15,color:c="black"}=v,p=_n(v,["userData","children","geometry","threshold","color"]);const _=d.useRef(null);return d.useLayoutEffect(()=>{const b=_.current.parent;if(b){const T=r||b.geometry;(T!==_.current.userData.currentGeom||l!==_.current.userData.currentThreshold)&&(_.current.userData.currentGeom=T,_.current.userData.currentThreshold=l,_.current.geometry=new s.EdgesGeometry(T,l))}}),d.useImperativeHandle(h,()=>_.current),d.createElement("lineSegments",(0,w.Z)({ref:_,raycast:()=>null},p),t||d.createElement("lineBasicMaterial",{color:c}))});var iA=Object.defineProperty,Mv=(i,t,r)=>t in i?iA(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,lo=(i,t,r)=>(Mv(i,typeof t!="symbol"?t+"":t,r),r);function Jg(i,t,r,l,c){let p;if(i=i.subarray||i.slice?i:i.buffer,r=r.subarray||r.slice?r:r.buffer,i=t?i.subarray?i.subarray(t,c&&t+c):i.slice(t,c&&t+c):i,r.set)r.set(i,l);else for(p=0;p<i.length;p++)r[p+l]=i[p];return r}function L3(i){return i instanceof Float32Array?i:i instanceof s.BufferGeometry?i.getAttribute("position").array:i.map(t=>{const r=Array.isArray(t);return t instanceof s.Vector3?[t.x,t.y,t.z]:t instanceof s.Vector2?[t.x,t.y,0]:r&&t.length===3?[t[0],t[1],t[2]]:r&&t.length===2?[t[0],t[1],0]:t}).flat()}class k3 extends s.BufferGeometry{constructor(){super(),lo(this,"type","MeshLine"),lo(this,"isMeshLine",!0),lo(this,"positions",[]),lo(this,"previous",[]),lo(this,"next",[]),lo(this,"side",[]),lo(this,"width",[]),lo(this,"indices_array",[]),lo(this,"uvs",[]),lo(this,"counters",[]),lo(this,"widthCallback",null),lo(this,"_attributes"),lo(this,"_points",[]),lo(this,"points"),lo(this,"matrixWorld",new s.Matrix4),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(t){this.setPoints(t,this.widthCallback)}}})}setMatrixWorld(t){this.matrixWorld=t}setPoints(t,r){if(t=L3(t),this._points=t,this.widthCallback=r!=null?r:null,this.positions=[],this.counters=[],t.length&&t[0]instanceof s.Vector3)for(let l=0;l<t.length;l++){const c=t[l],p=l/(t.length-1);this.positions.push(c.x,c.y,c.z),this.positions.push(c.x,c.y,c.z),this.counters.push(p),this.counters.push(p)}else for(let l=0;l<t.length;l+=3){const c=l/(t.length-1);this.positions.push(t[l],t[l+1],t[l+2]),this.positions.push(t[l],t[l+1],t[l+2]),this.counters.push(c),this.counters.push(c)}this.process()}compareV3(t,r){const l=t*6,c=r*6;return this.positions[l]===this.positions[c]&&this.positions[l+1]===this.positions[c+1]&&this.positions[l+2]===this.positions[c+2]}copyV3(t){const r=t*6;return[this.positions[r],this.positions[r+1],this.positions[r+2]]}process(){const t=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let r,l;this.compareV3(0,t-1)?l=this.copyV3(t-2):l=this.copyV3(0),this.previous.push(l[0],l[1],l[2]),this.previous.push(l[0],l[1],l[2]);for(let c=0;c<t;c++){if(this.side.push(1),this.side.push(-1),this.widthCallback?r=this.widthCallback(c/(t-1)):r=1,this.width.push(r),this.width.push(r),this.uvs.push(c/(t-1),0),this.uvs.push(c/(t-1),1),c<t-1){l=this.copyV3(c),this.previous.push(l[0],l[1],l[2]),this.previous.push(l[0],l[1],l[2]);const p=c*2;this.indices_array.push(p,p+1,p+2),this.indices_array.push(p+2,p+1,p+3)}c>0&&(l=this.copyV3(c),this.next.push(l[0],l[1],l[2]),this.next.push(l[0],l[1],l[2]))}this.compareV3(t-1,0)?l=this.copyV3(1):l=this.copyV3(t-1),this.next.push(l[0],l[1],l[2]),this.next.push(l[0],l[1],l[2]),!this._attributes||this._attributes.position.count!==this.positions.length?this._attributes={position:new s.BufferAttribute(new Float32Array(this.positions),3),previous:new s.BufferAttribute(new Float32Array(this.previous),3),next:new s.BufferAttribute(new Float32Array(this.next),3),side:new s.BufferAttribute(new Float32Array(this.side),1),width:new s.BufferAttribute(new Float32Array(this.width),1),uv:new s.BufferAttribute(new Float32Array(this.uvs),2),index:new s.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new s.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:t,y:r,z:l}){const c=this._attributes.position.array,p=this._attributes.previous.array,h=this._attributes.next.array,g=c.length;Jg(c,0,p,0,g),Jg(c,6,c,0,g-6),c[g-6]=t,c[g-5]=r,c[g-4]=l,c[g-3]=t,c[g-2]=r,c[g-1]=l,Jg(c,6,h,0,g-6),h[g-6]=t,h[g-5]=r,h[g-4]=l,h[g-3]=t,h[g-2]=r,h[g-1]=l,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const z3=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
  	vCounters = counters;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0);
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <fog_vertex>
  }
`,qg=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 c = vColor;
    if (useMap == 1.) c *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) c.a *= texture2D(alphaMap, vUV * repeat).a;
    if (c.a < alphaTest) discard;
    if (useDash == 1.) {
      c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    }
    gl_FragColor = c;
    gl_FragColor.a *= step(vCounters, visibility);
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`;class xv extends s.ShaderMaterial{constructor(t){super({uniforms:Xo(Kn({},s.UniformsLib.fog),{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new s.Color(16777215)},opacity:{value:1},resolution:{value:new s.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new s.Vector2(1,1)}}),vertexShader:z3,fragmentShader:qg}),lo(this,"lineWidth"),lo(this,"map"),lo(this,"useMap"),lo(this,"alphaMap"),lo(this,"useAlphaMap"),lo(this,"color"),lo(this,"resolution"),lo(this,"sizeAttenuation"),lo(this,"dashArray"),lo(this,"dashOffset"),lo(this,"dashRatio"),lo(this,"useDash"),lo(this,"visibility"),lo(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(r){this.uniforms.lineWidth.value=r}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(r){this.uniforms.map.value=r}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(r){this.uniforms.useMap.value=r}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(r){this.uniforms.alphaMap.value=r}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(r){this.uniforms.useAlphaMap.value=r}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(r){this.uniforms.color.value=r}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(r){this.uniforms.resolution.value.copy(r)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(r){this.uniforms.sizeAttenuation.value=r}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(r){this.uniforms.dashArray.value=r,this.useDash=r!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(r){this.uniforms.dashOffset.value=r}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(r){this.uniforms.dashRatio.value=r}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(r){this.uniforms.useDash.value=r}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(r){this.uniforms.visibility.value=r}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(r){this.uniforms.alphaTest.value=r}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(r){this.uniforms.repeat.value.copy(r)}}}),this.setValues(t)}copy(t){return super.copy(t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray=t.dashArray,this.dashOffset=t.dashOffset,this.dashRatio=t.dashRatio,this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this}}function Cv(i,t){const r=new THREE.Matrix4,l=new THREE.Ray,c=new THREE.Sphere,p=new THREE.Vector3,h=this.geometry;if(c.copy(h.boundingSphere),c.applyMatrix4(this.matrixWorld),!i.ray.intersectSphere(c,p))return;r.copy(this.matrixWorld).invert(),l.copy(i.ray).applyMatrix4(r);const g=new THREE.Vector3,v=new THREE.Vector3,_=new THREE.Vector3,b=this instanceof THREE.LineSegments?2:1,T=h.index,R=h.attributes;if(T!==null){const F=T.array,G=R.position.array,L=R.width.array;for(let O=0,k=F.length-1;O<k;O+=b){const P=F[O],z=F[O+1];g.fromArray(G,P*3),v.fromArray(G,z*3);const j=L[Math.floor(O/3)]!=null?L[Math.floor(O/3)]:1,Q=i.params.Line.threshold+this.material.lineWidth*j/2,W=Q*Q;if(l.distanceSqToSegment(g,v,p,_)>W)continue;p.applyMatrix4(this.matrixWorld);const K=i.ray.origin.distanceTo(p);K<i.near||K>i.far||(t.push({distance:K,point:_.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:void 0,object:this}),O=k)}}}const oA={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},ep=(i,t=1)=>(i.set(i.subarray(t)),i.fill(-1/0,-t),i);function vd(i,t){const{length:r,local:l,decay:c,interval:p,stride:h}=Kn(Kn({},oA),t),g=d.useRef(),[v]=d.useState(()=>new s.Vector3);d.useLayoutEffect(()=>{i&&(g.current=Float32Array.from({length:r*10*3},(T,R)=>i.position.getComponent(R%3)))},[r,i]);const _=d.useRef(new s.Vector3),b=d.useRef(0);return(0,E.A)(()=>{if(i&&g.current){if(b.current===0){let T;l?T=i.position:(i.getWorldPosition(v),T=v);const R=1*c;for(let F=0;F<R;F++)T.distanceTo(_.current)<h||(ep(g.current,3),g.current.set(T.toArray(),g.current.length-3));_.current.copy(T)}b.current++,b.current=b.current%p}}),g}const sA=d.forwardRef((i,t)=>{const{children:r}=i,{width:l,length:c,decay:p,local:h,stride:g,interval:v}=Kn(Kn({},oA),i),{color:_="hotpink",attenuation:b,target:T}=i,R=(0,E.z)(j=>j.size),F=(0,E.z)(j=>j.scene),G=d.useRef(null),[L,O]=d.useState(null),k=vd(L,{length:c,decay:p,local:h,stride:g,interval:v});d.useEffect(()=>{const j=(T==null?void 0:T.current)||G.current.children.find(Q=>Q instanceof s.Object3D);j&&O(j)},[k,T]);const P=d.useMemo(()=>new k3,[]),z=d.useMemo(()=>{var j;const Q=new xv({lineWidth:.1*l,color:_,sizeAttenuation:1,resolution:new s.Vector2(R.width,R.height)});let W;if(r)if(Array.isArray(r))W=r.find(Y=>{const K=Y;return typeof K.type=="string"&&K.type==="meshLineMaterial"});else{const Y=r;typeof Y.type=="string"&&Y.type==="meshLineMaterial"&&(W=Y)}return typeof((j=W)==null?void 0:j.props)=="object"&&Q.setValues(W.props),Q},[l,_,R,r]);return d.useEffect(()=>{z.uniforms.resolution.value.set(R.width,R.height)},[R]),(0,E.A)(()=>{k.current&&P.setPoints(k.current,b)}),d.createElement("group",null,(0,E.g)(d.createElement("mesh",{ref:t,geometry:P,material:z}),F),d.createElement("group",{ref:G},r))});var Zg=A(25108);const Fa=new s.Triangle,Cu=new s.Vector3;class Mh{constructor(t){let r=t.geometry;r.index&&(Zg.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.positionAttribute,r=this.weightAttribute,l=new Float32Array(t.count/3);for(let p=0;p<t.count;p+=3){let h=1;r&&(h=r.getX(p)+r.getX(p+1)+r.getX(p+2)),Fa.a.fromBufferAttribute(t,p),Fa.b.fromBufferAttribute(t,p+1),Fa.c.fromBufferAttribute(t,p+2),h*=Fa.getArea(),l[p/3]=h}this.distribution=new Float32Array(t.count/3);let c=0;for(let p=0;p<l.length;p++)c+=l[p],this.distribution[p]=c;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,r,l){const c=this.sampleFaceIndex();return this.sampleFace(c,t,r,l)}sampleFaceIndex(){const t=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*t)}binarySearch(t){const r=this.distribution;let l=0,c=r.length-1,p=-1;for(;l<=c;){const h=Math.ceil((l+c)/2);if(h===0||r[h-1]<=t&&r[h]>t){p=h;break}else t<r[h]?c=h-1:l=h+1}return p}sampleFace(t,r,l,c){let p=this.randomFunction(),h=this.randomFunction();return p+h>1&&(p=1-p,h=1-h),Fa.a.fromBufferAttribute(this.positionAttribute,t*3),Fa.b.fromBufferAttribute(this.positionAttribute,t*3+1),Fa.c.fromBufferAttribute(this.positionAttribute,t*3+2),r.set(0,0,0).addScaledVector(Fa.a,p).addScaledVector(Fa.b,h).addScaledVector(Fa.c,1-(p+h)),l!==void 0&&Fa.getNormal(l),c!==void 0&&this.colorAttribute!==void 0&&(Fa.a.fromBufferAttribute(this.colorAttribute,t*3),Fa.b.fromBufferAttribute(this.colorAttribute,t*3+1),Fa.c.fromBufferAttribute(this.colorAttribute,t*3+2),Cu.set(0,0,0).addScaledVector(Fa.a,p).addScaledVector(Fa.b,h).addScaledVector(Fa.c,1-(p+h)),c.r=Cu.x,c.g=Cu.y,c.b=Cu.z),this}}function Rf(i,t=16,r,l,c){const[p,h]=d.useState(()=>{const g=Array.from({length:t},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new s.InstancedBufferAttribute(Float32Array.from(g),16)});return d.useLayoutEffect(()=>{if(typeof i.current=="undefined")return;const g=new Mh(i.current);l&&g.setWeightAttribute(l),g.build();const v=new s.Vector3,_=new s.Vector3,b=new s.Color,T=new s.Object3D;i.current.updateMatrixWorld(!0);for(let R=0;R<t;R++)g.sample(v,_,b),typeof r=="function"?r({dummy:T,sampledMesh:i.current,position:v,normal:_,color:b},R):T.position.copy(v),T.updateMatrix(),c!=null&&c.current&&c.current.setMatrixAt(R,T.matrix),T.matrix.toArray(p.array,R*16);c!=null&&c.current&&(c.current.instanceMatrix.needsUpdate=!0),p.needsUpdate=!0,h(p.clone())},[i,c,l,t,r]),p}function $g(g){var v=g,{children:i,weight:t,transform:r,instances:l,mesh:c,count:p=16}=v,h=_n(v,["children","weight","transform","instances","mesh","count"]);const _=d.useRef(null),b=d.useRef(null),T=d.useRef(null);return d.useLayoutEffect(()=>{var R,F;b.current=(R=l==null?void 0:l.current)!==null&&R!==void 0?R:_.current.children.find(G=>G.hasOwnProperty("instanceMatrix")),T.current=(F=c==null?void 0:c.current)!==null&&F!==void 0?F:_.current.children.find(G=>G.type==="Mesh")},[i,c==null?void 0:c.current,l==null?void 0:l.current]),Rf(T,p,r,t,b),d.createElement("group",(0,w.Z)({ref:_},h),i)}const G3=l=>{var c=l,{compute:i,name:t}=c,r=_n(c,["compute","name"]);const[p]=d.useState(()=>new s.BufferAttribute(new Float32Array(0),1)),h=d.useRef(null);return d.useLayoutEffect(()=>{if(h.current){var g;const v=(g=h.current.parent)!==null&&g!==void 0?g:h.current.__r3f.parent,_=i(v);h.current.copy(_)}},[i]),d.createElement("primitive",(0,w.Z)({ref:h,object:p,attach:`attributes-${t}`},r))};var N3=A(25030),_d=A.n(N3);function m0(i,t,r={}){const l=new s.Vector3,c=new s.Quaternion,p=new s.Vector3,h=new s.Matrix4,g=new s.Matrix4,v=new s.Matrix4;r.preserveMatrix=r.preserveMatrix!==void 0?r.preserveMatrix:!0,r.preservePosition=r.preservePosition!==void 0?r.preservePosition:!0,r.preserveHipPosition=r.preserveHipPosition!==void 0?r.preserveHipPosition:!1,r.useTargetMatrix=r.useTargetMatrix!==void 0?r.useTargetMatrix:!1,r.hip=r.hip!==void 0?r.hip:"hip",r.names=r.names||{};const _=t.isObject3D?t.skeleton.bones:A0(t),b=i.isObject3D?i.skeleton.bones:A0(i);let T,R,F,G,L;if(i.isObject3D?i.skeleton.pose():(r.useTargetMatrix=!0,r.preserveMatrix=!1),r.preservePosition){L=[];for(let O=0;O<b.length;O++)L.push(b[O].position.clone())}if(r.preserveMatrix){i.updateMatrixWorld(),i.matrixWorld.identity();for(let O=0;O<i.children.length;++O)i.children[O].updateMatrixWorld(!0)}if(r.offsets){T=[];for(let O=0;O<b.length;++O)R=b[O],F=r.names[R.name]||R.name,r.offsets[F]&&(R.matrix.multiply(r.offsets[F]),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld()),T.push(R.matrixWorld.clone())}for(let O=0;O<b.length;++O){if(R=b[O],F=r.names[R.name]||R.name,G=Hp(F,_),v.copy(R.matrixWorld),G){if(G.updateMatrixWorld(),r.useTargetMatrix?g.copy(G.matrixWorld):(g.copy(i.matrixWorld).invert(),g.multiply(G.matrixWorld)),p.setFromMatrixScale(g),g.scale(p.set(1/p.x,1/p.y,1/p.z)),v.makeRotationFromQuaternion(c.setFromRotationMatrix(g)),i.isObject3D){const k=b.indexOf(R),P=T?T[k]:h.copy(i.skeleton.boneInverses[k]).invert();v.multiply(P)}v.copyPosition(g)}R.parent&&R.parent.isBone?(R.matrix.copy(R.parent.matrixWorld).invert(),R.matrix.multiply(v)):R.matrix.copy(v),r.preserveHipPosition&&F===r.hip&&R.matrix.setPosition(l.set(0,R.position.y,0)),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld()}if(r.preservePosition)for(let O=0;O<b.length;++O)R=b[O],F=r.names[R.name]||R.name,F!==r.hip&&R.position.copy(L[O]);r.preserveMatrix&&i.updateMatrixWorld(!0)}function Sv(i,t,r,l={}){l.useFirstFramePosition=l.useFirstFramePosition!==void 0?l.useFirstFramePosition:!1,l.fps=l.fps!==void 0?l.fps:30,l.names=l.names||[],t.isObject3D||(t=Su(t));const c=Math.round(r.duration*(l.fps/1e3)*1e3),p=1/l.fps,h=[],g=new s.AnimationMixer(t),v=A0(i.skeleton),_=[];let b,T,R,F,G;g.clipAction(r).play(),g.update(0),t.updateMatrixWorld();for(let L=0;L<c;++L){const O=L*p;m0(i,t,l);for(let k=0;k<v.length;++k)G=l.names[v[k].name]||v[k].name,R=Hp(G,t.skeleton),R&&(T=v[k],F=_[k]=_[k]||{bone:T},l.hip===G&&(F.pos||(F.pos={times:new Float32Array(c),values:new Float32Array(c*3)}),l.useFirstFramePosition&&(L===0&&(b=T.position.clone()),T.position.sub(b)),F.pos.times[L]=O,T.position.toArray(F.pos.values,L*3)),F.quat||(F.quat={times:new Float32Array(c),values:new Float32Array(c*4)}),F.quat.times[L]=O,T.quaternion.toArray(F.quat.values,L*4));g.update(p),t.updateMatrixWorld()}for(let L=0;L<_.length;++L)F=_[L],F&&(F.pos&&h.push(new s.VectorKeyframeTrack(".bones["+F.bone.name+"].position",F.pos.times,F.pos.values)),h.push(new s.QuaternionKeyframeTrack(".bones["+F.bone.name+"].quaternion",F.quat.times,F.quat.values)));return g.uncacheAction(r),new s.AnimationClip(r.name,-1,h)}function jl(i){const t=new Map,r=new Map,l=i.clone();return wv(i,l,function(c,p){t.set(p,c),r.set(c,p)}),l.traverse(function(c){if(!c.isSkinnedMesh)return;const p=c,h=t.get(c),g=h.skeleton.bones;p.skeleton=h.skeleton.clone(),p.bindMatrix.copy(h.bindMatrix),p.skeleton.bones=g.map(function(v){return r.get(v)}),p.bind(p.skeleton,p.bindMatrix)}),l}function Hp(i,t){for(let r=0,l=A0(t);r<l.length;r++)if(i===l[r].name)return l[r]}function A0(i){return Array.isArray(i)?i:i.bones}function Su(i){const t=new s.SkeletonHelper(i.bones[0]);return t.skeleton=i,t}function wv(i,t,r){r(i,t);for(let l=0;l<i.children.length;l++)wv(i.children[l],t.children[l],r)}const U3={retarget:m0,retargetClip:Sv,clone:jl};function em(i,{keys:t=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:r,inject:l,castShadow:c,receiveShadow:p}){let h=_d()(i,t);return r&&(h.geometry&&r!=="materialsOnly"&&(h.geometry=h.geometry.clone()),h.material&&r!=="geometriesOnly"&&(h.material=h.material.clone())),l&&(typeof l=="function"?h=Xo(Kn({},h),{children:l(i)}):d.isValidElement(l)?h=Xo(Kn({},h),{children:l}):h=Kn(Kn({},h),l)),i instanceof s.Mesh&&(c&&(h.castShadow=!0),p&&(h.receiveShadow=!0)),h}const y0=d.forwardRef((b,_)=>{var T=b,{isChild:i=!1,object:t,children:r,deep:l,castShadow:c,receiveShadow:p,inject:h,keys:g}=T,v=_n(T,["isChild","object","children","deep","castShadow","receiveShadow","inject","keys"]);var R;const F={keys:g,deep:l,inject:h,castShadow:c,receiveShadow:p};if(t=d.useMemo(()=>{if(i===!1&&!Array.isArray(t)){let P=!1;if(t.traverse(z=>{z.isSkinnedMesh&&(P=!0)}),P)return U3.clone(t)}return t},[t,i]),Array.isArray(t))return d.createElement("group",(0,w.Z)({},v,{ref:_}),t.map(P=>d.createElement(y0,(0,w.Z)({key:P.uuid,object:P},F))),r);const k=em(t,F),{children:G}=k,L=_n(k,["children"]),O=t.type[0].toLowerCase()+t.type.slice(1);return d.createElement(O,(0,w.Z)({},L,v,{ref:_}),((R=t)==null?void 0:R.children).map(P=>P.type==="Bone"?d.createElement("primitive",(0,w.Z)({key:P.uuid,object:P},F)):d.createElement(y0,(0,w.Z)({key:P.uuid,object:P},F,{isChild:!0}))),r,G)});var j3=A(25108);class H3 extends s.Mesh{constructor(t,r,l=!1,c=!1,p=1e4){const h=new s.BufferGeometry;super(h,r),this.isMarchingCubes=!0;const g=this,v=new Float32Array(12*3),_=new Float32Array(12*3),b=new Float32Array(12*3);this.enableUvs=l,this.enableColors=c,this.init=function(P){this.resolution=P,this.isolation=80,this.size=P,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const z=p*3;this.positionArray=new Float32Array(z*3);const j=new s.BufferAttribute(this.positionArray,3);j.setUsage(s.DynamicDrawUsage),h.setAttribute("position",j),this.normalArray=new Float32Array(z*3);const Q=new s.BufferAttribute(this.normalArray,3);if(Q.setUsage(s.DynamicDrawUsage),h.setAttribute("normal",Q),this.enableUvs){this.uvArray=new Float32Array(z*2);const W=new s.BufferAttribute(this.uvArray,2);W.setUsage(s.DynamicDrawUsage),h.setAttribute("uv",W)}if(this.enableColors){this.colorArray=new Float32Array(z*3);const W=new s.BufferAttribute(this.colorArray,3);W.setUsage(s.DynamicDrawUsage),h.setAttribute("color",W)}h.boundingSphere=new s.Sphere(new s.Vector3,1)};function T(P,z,j){return P+(z-P)*j}function R(P,z,j,Q,W,Y,K,se,ce,ge){const le=(j-K)/(se-K),xe=g.normal_cache;v[z+0]=Q+le*g.delta,v[z+1]=W,v[z+2]=Y,_[z+0]=T(xe[P+0],xe[P+3],le),_[z+1]=T(xe[P+1],xe[P+4],le),_[z+2]=T(xe[P+2],xe[P+5],le),b[z+0]=T(g.palette[ce*3+0],g.palette[ge*3+0],le),b[z+1]=T(g.palette[ce*3+1],g.palette[ge*3+1],le),b[z+2]=T(g.palette[ce*3+2],g.palette[ge*3+2],le)}function F(P,z,j,Q,W,Y,K,se,ce,ge){const le=(j-K)/(se-K),xe=g.normal_cache;v[z+0]=Q,v[z+1]=W+le*g.delta,v[z+2]=Y;const me=P+g.yd*3;_[z+0]=T(xe[P+0],xe[me+0],le),_[z+1]=T(xe[P+1],xe[me+1],le),_[z+2]=T(xe[P+2],xe[me+2],le),b[z+0]=T(g.palette[ce*3+0],g.palette[ge*3+0],le),b[z+1]=T(g.palette[ce*3+1],g.palette[ge*3+1],le),b[z+2]=T(g.palette[ce*3+2],g.palette[ge*3+2],le)}function G(P,z,j,Q,W,Y,K,se,ce,ge){const le=(j-K)/(se-K),xe=g.normal_cache;v[z+0]=Q,v[z+1]=W,v[z+2]=Y+le*g.delta;const me=P+g.zd*3;_[z+0]=T(xe[P+0],xe[me+0],le),_[z+1]=T(xe[P+1],xe[me+1],le),_[z+2]=T(xe[P+2],xe[me+2],le),b[z+0]=T(g.palette[ce*3+0],g.palette[ge*3+0],le),b[z+1]=T(g.palette[ce*3+1],g.palette[ge*3+1],le),b[z+2]=T(g.palette[ce*3+2],g.palette[ge*3+2],le)}function L(P){const z=P*3;g.normal_cache[z]===0&&(g.normal_cache[z+0]=g.field[P-1]-g.field[P+1],g.normal_cache[z+1]=g.field[P-g.yd]-g.field[P+g.yd],g.normal_cache[z+2]=g.field[P-g.zd]-g.field[P+g.zd])}function O(P,z,j,Q,W){const Y=Q+1,K=Q+g.yd,se=Q+g.zd,ce=Y+g.yd,ge=Y+g.zd,le=Q+g.yd+g.zd,xe=Y+g.yd+g.zd;let me=0;const Be=g.field[Q],ke=g.field[Y],Re=g.field[K],ze=g.field[ce],Pe=g.field[se],Ye=g.field[ge],Ce=g.field[le],Ee=g.field[xe];Be<W&&(me|=1),ke<W&&(me|=2),Re<W&&(me|=8),ze<W&&(me|=4),Pe<W&&(me|=16),Ye<W&&(me|=32),Ce<W&&(me|=128),Ee<W&&(me|=64);const _e=Ed[me];if(_e===0)return 0;const oe=g.delta,Ae=P+oe,Te=z+oe,ve=j+oe;_e&1&&(L(Q),L(Y),R(Q*3,0,W,P,z,j,Be,ke,Q,Y)),_e&2&&(L(Y),L(ce),F(Y*3,3,W,Ae,z,j,ke,ze,Y,ce)),_e&4&&(L(K),L(ce),R(K*3,6,W,P,Te,j,Re,ze,K,ce)),_e&8&&(L(Q),L(K),F(Q*3,9,W,P,z,j,Be,Re,Q,K)),_e&16&&(L(se),L(ge),R(se*3,12,W,P,z,ve,Pe,Ye,se,ge)),_e&32&&(L(ge),L(xe),F(ge*3,15,W,Ae,z,ve,Ye,Ee,ge,xe)),_e&64&&(L(le),L(xe),R(le*3,18,W,P,Te,ve,Ce,Ee,le,xe)),_e&128&&(L(se),L(le),F(se*3,21,W,P,z,ve,Pe,Ce,se,le)),_e&256&&(L(Q),L(se),G(Q*3,24,W,P,z,j,Be,Pe,Q,se)),_e&512&&(L(Y),L(ge),G(Y*3,27,W,Ae,z,j,ke,Ye,Y,ge)),_e&1024&&(L(ce),L(xe),G(ce*3,30,W,Ae,Te,j,ze,Ee,ce,xe)),_e&2048&&(L(K),L(le),G(K*3,33,W,P,Te,j,Re,Ce,K,le)),me<<=4;let Ge,bt,mt,gt=0,rt=0;for(;tm[me+rt]!=-1;)Ge=me+rt,bt=Ge+1,mt=Ge+2,k(v,_,b,3*tm[Ge],3*tm[bt],3*tm[mt]),rt+=3,gt++;return gt}function k(P,z,j,Q,W,Y){const K=g.count*3;if(g.positionArray[K+0]=P[Q],g.positionArray[K+1]=P[Q+1],g.positionArray[K+2]=P[Q+2],g.positionArray[K+3]=P[W],g.positionArray[K+4]=P[W+1],g.positionArray[K+5]=P[W+2],g.positionArray[K+6]=P[Y],g.positionArray[K+7]=P[Y+1],g.positionArray[K+8]=P[Y+2],g.material.flatShading===!0){const se=(z[Q+0]+z[W+0]+z[Y+0])/3,ce=(z[Q+1]+z[W+1]+z[Y+1])/3,ge=(z[Q+2]+z[W+2]+z[Y+2])/3;g.normalArray[K+0]=se,g.normalArray[K+1]=ce,g.normalArray[K+2]=ge,g.normalArray[K+3]=se,g.normalArray[K+4]=ce,g.normalArray[K+5]=ge,g.normalArray[K+6]=se,g.normalArray[K+7]=ce,g.normalArray[K+8]=ge}else g.normalArray[K+0]=z[Q+0],g.normalArray[K+1]=z[Q+1],g.normalArray[K+2]=z[Q+2],g.normalArray[K+3]=z[W+0],g.normalArray[K+4]=z[W+1],g.normalArray[K+5]=z[W+2],g.normalArray[K+6]=z[Y+0],g.normalArray[K+7]=z[Y+1],g.normalArray[K+8]=z[Y+2];if(g.enableUvs){const se=g.count*2;g.uvArray[se+0]=P[Q+0],g.uvArray[se+1]=P[Q+2],g.uvArray[se+2]=P[W+0],g.uvArray[se+3]=P[W+2],g.uvArray[se+4]=P[Y+0],g.uvArray[se+5]=P[Y+2]}g.enableColors&&(g.colorArray[K+0]=j[Q+0],g.colorArray[K+1]=j[Q+1],g.colorArray[K+2]=j[Q+2],g.colorArray[K+3]=j[W+0],g.colorArray[K+4]=j[W+1],g.colorArray[K+5]=j[W+2],g.colorArray[K+6]=j[Y+0],g.colorArray[K+7]=j[Y+1],g.colorArray[K+8]=j[Y+2]),g.count+=3}this.addBall=function(P,z,j,Q,W,Y){const K=Math.sign(Q);Q=Math.abs(Q);const se=Y!=null;let ce=new s.Color(P,z,j);if(se)try{ce=Y instanceof s.Color?Y:Array.isArray(Y)?new s.Color(Math.min(Math.abs(Y[0]),1),Math.min(Math.abs(Y[1]),1),Math.min(Math.abs(Y[2]),1)):new s.Color(Y)}catch(rt){ce=new s.Color(P,z,j)}const ge=this.size*Math.sqrt(Q/W),le=j*this.size,xe=z*this.size,me=P*this.size;let Be=Math.floor(le-ge);Be<1&&(Be=1);let ke=Math.floor(le+ge);ke>this.size-1&&(ke=this.size-1);let Re=Math.floor(xe-ge);Re<1&&(Re=1);let ze=Math.floor(xe+ge);ze>this.size-1&&(ze=this.size-1);let Pe=Math.floor(me-ge);Pe<1&&(Pe=1);let Ye=Math.floor(me+ge);Ye>this.size-1&&(Ye=this.size-1);let Ce,Ee,_e,oe,Ae,Te,ve,Ge,bt,mt,gt;for(_e=Be;_e<ke;_e++)for(Ae=this.size2*_e,Ge=_e/this.size-j,bt=Ge*Ge,Ee=Re;Ee<ze;Ee++)for(oe=Ae+this.size*Ee,ve=Ee/this.size-z,mt=ve*ve,Ce=Pe;Ce<Ye;Ce++)if(Te=Ce/this.size-P,gt=Q/(1e-6+Te*Te+mt+bt)-W,gt>0){this.field[oe+Ce]+=gt*K;const rt=Math.sqrt((Ce-me)*(Ce-me)+(Ee-xe)*(Ee-xe)+(_e-le)*(_e-le))/ge,Wt=1-rt*rt*rt*(rt*(rt*6-15)+10);this.palette[(oe+Ce)*3+0]+=ce.r*Wt,this.palette[(oe+Ce)*3+1]+=ce.g*Wt,this.palette[(oe+Ce)*3+2]+=ce.b*Wt}},this.addPlaneX=function(P,z){const j=this.size,Q=this.yd,W=this.zd,Y=this.field;let K,se,ce,ge,le,xe,me,Be=j*Math.sqrt(P/z);for(Be>j&&(Be=j),K=0;K<Be;K++)if(xe=K/j,ge=xe*xe,le=P/(1e-4+ge)-z,le>0)for(se=0;se<j;se++)for(me=K+se*Q,ce=0;ce<j;ce++)Y[W*ce+me]+=le},this.addPlaneY=function(P,z){const j=this.size,Q=this.yd,W=this.zd,Y=this.field;let K,se,ce,ge,le,xe,me,Be,ke=j*Math.sqrt(P/z);for(ke>j&&(ke=j),se=0;se<ke;se++)if(xe=se/j,ge=xe*xe,le=P/(1e-4+ge)-z,le>0)for(me=se*Q,K=0;K<j;K++)for(Be=me+K,ce=0;ce<j;ce++)Y[W*ce+Be]+=le},this.addPlaneZ=function(P,z){const j=this.size,Q=this.yd,W=this.zd,Y=this.field;let K,se,ce,ge,le,xe,me,Be,ke=j*Math.sqrt(P/z);for(ke>j&&(ke=j),ce=0;ce<ke;ce++)if(xe=ce/j,ge=xe*xe,le=P/(1e-4+ge)-z,le>0)for(me=W*ce,se=0;se<j;se++)for(Be=me+se*Q,K=0;K<j;K++)Y[Be+K]+=le},this.setCell=function(P,z,j,Q){const W=this.size2*j+this.size*z+P;this.field[W]=Q},this.getCell=function(P,z,j){const Q=this.size2*j+this.size*z+P;return this.field[Q]},this.blur=function(P=1){const z=this.field,j=z.slice(),Q=this.size,W=this.size2;for(let Y=0;Y<Q;Y++)for(let K=0;K<Q;K++)for(let se=0;se<Q;se++){const ce=W*se+Q*K+Y;let ge=j[ce],le=1;for(let xe=-1;xe<=1;xe+=2){const me=xe+Y;if(!(me<0||me>=Q))for(let Be=-1;Be<=1;Be+=2){const ke=Be+K;if(!(ke<0||ke>=Q))for(let Re=-1;Re<=1;Re+=2){const ze=Re+se;if(ze<0||ze>=Q)continue;const Pe=W*ze+Q*ke+me,Ye=j[Pe];le++,ge+=P*(Ye-ge)/le}}}z[ce]=ge}},this.reset=function(){for(let P=0;P<this.size3;P++)this.normal_cache[P*3]=0,this.field[P]=0,this.palette[P*3]=this.palette[P*3+1]=this.palette[P*3+2]=0},this.update=function(){this.count=0;const P=this.size-2;for(let z=1;z<P;z++){const j=this.size2*z,Q=(z-this.halfsize)/this.halfsize;for(let W=1;W<P;W++){const Y=j+this.size*W,K=(W-this.halfsize)/this.halfsize;for(let se=1;se<P;se++){const ce=(se-this.halfsize)/this.halfsize,ge=Y+se;O(ce,K,Q,ge,this.isolation)}}}this.geometry.setDrawRange(0,this.count),h.getAttribute("position").needsUpdate=!0,h.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(h.getAttribute("uv").needsUpdate=!0),this.enableColors&&(h.getAttribute("color").needsUpdate=!0),this.count/3>p&&j3.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(t)}}const Ed=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),tm=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),nm=d.createContext(null),Tv=d.forwardRef((g,h)=>{var v=g,{resolution:i=28,maxPolyCount:t=1e4,enableUvs:r=!1,enableColors:l=!1,children:c}=v,p=_n(v,["resolution","maxPolyCount","enableUvs","enableColors","children"]);const _=d.useRef(null),b=d.useMemo(()=>new H3(i,null,r,l,t),[i,t,r,l]),T=d.useMemo(()=>({getParent:()=>_}),[]);return(0,E.A)(()=>{b.update(),b.reset()},-1),d.createElement(d.Fragment,null,d.createElement("primitive",(0,w.Z)({object:b,ref:zr([_,h])},p),d.createElement(nm.Provider,{value:T},c)))}),Bv=d.forwardRef((p,c)=>{var h=p,{strength:i=.5,subtract:t=12,color:r}=h,l=_n(h,["strength","subtract","color"]);const{getParent:g}=d.useContext(nm),v=d.useMemo(()=>g(),[g]),_=d.useRef(),b=new s.Vector3;return(0,E.A)(T=>{!v.current||!_.current||(_.current.getWorldPosition(b),v.current.addBall(.5+b.x*.5,.5+b.y*.5,.5+b.z*.5,i,t,r))}),d.createElement("group",(0,w.Z)({ref:zr([c,_])},l))}),aA=d.forwardRef((p,c)=>{var h=p,{planeType:i="x",strength:t=.5,subtract:r=12}=h,l=_n(h,["planeType","strength","subtract"]);const{getParent:g}=d.useContext(nm),v=d.useMemo(()=>g(),[g]),_=d.useRef(),b=d.useMemo(()=>i==="x"?"addPlaneX":i==="y"?"addPlaneY":"addPlaneZ",[i]);return(0,E.A)(()=>{!v.current||!_.current||v.current[b](t,r)}),d.createElement("group",(0,w.Z)({ref:zr([c,_])},l))});var W3=A(25108);class Rv extends s.BufferGeometry{constructor(t,r,l,c){super();const p=[],h=[],g=[],v=new s.Vector3,_=new s.Matrix4;_.makeRotationFromEuler(l),_.setPosition(r);const b=new s.Matrix4;b.copy(_).invert(),T(),this.setAttribute("position",new s.Float32BufferAttribute(p,3)),this.setAttribute("normal",new s.Float32BufferAttribute(h,3)),this.setAttribute("uv",new s.Float32BufferAttribute(g,2));function T(){let L,O=[];const k=new s.Vector3,P=new s.Vector3;if(t.geometry.isGeometry===!0){W3.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const z=t.geometry,j=z.attributes.position,Q=z.attributes.normal;if(z.index!==null){const W=z.index;for(L=0;L<W.count;L++)k.fromBufferAttribute(j,W.getX(L)),P.fromBufferAttribute(Q,W.getX(L)),R(O,k,P)}else for(L=0;L<j.count;L++)k.fromBufferAttribute(j,L),P.fromBufferAttribute(Q,L),R(O,k,P);for(O=F(O,v.set(1,0,0)),O=F(O,v.set(-1,0,0)),O=F(O,v.set(0,1,0)),O=F(O,v.set(0,-1,0)),O=F(O,v.set(0,0,1)),O=F(O,v.set(0,0,-1)),L=0;L<O.length;L++){const W=O[L];g.push(.5+W.position.x/c.x,.5+W.position.y/c.y),W.position.applyMatrix4(_),p.push(W.position.x,W.position.y,W.position.z),h.push(W.normal.x,W.normal.y,W.normal.z)}}function R(L,O,k){O.applyMatrix4(t.matrixWorld),O.applyMatrix4(b),k.transformDirection(t.matrixWorld),L.push(new lA(O.clone(),k.clone()))}function F(L,O){const k=[],P=.5*Math.abs(c.dot(O));for(let z=0;z<L.length;z+=3){let j,Q,W,Y=0,K,se,ce,ge;const le=L[z+0].position.dot(O)-P,xe=L[z+1].position.dot(O)-P,me=L[z+2].position.dot(O)-P;switch(j=le>0,Q=xe>0,W=me>0,Y=(j?1:0)+(Q?1:0)+(W?1:0),Y){case 0:{k.push(L[z]),k.push(L[z+1]),k.push(L[z+2]);break}case 1:{if(j&&(K=L[z+1],se=L[z+2],ce=G(L[z],K,O,P),ge=G(L[z],se,O,P)),Q){K=L[z],se=L[z+2],ce=G(L[z+1],K,O,P),ge=G(L[z+1],se,O,P),k.push(ce),k.push(se.clone()),k.push(K.clone()),k.push(se.clone()),k.push(ce.clone()),k.push(ge);break}W&&(K=L[z],se=L[z+1],ce=G(L[z+2],K,O,P),ge=G(L[z+2],se,O,P)),k.push(K.clone()),k.push(se.clone()),k.push(ce),k.push(ge),k.push(ce.clone()),k.push(se.clone());break}case 2:{j||(K=L[z].clone(),se=G(K,L[z+1],O,P),ce=G(K,L[z+2],O,P),k.push(K),k.push(se),k.push(ce)),Q||(K=L[z+1].clone(),se=G(K,L[z+2],O,P),ce=G(K,L[z],O,P),k.push(K),k.push(se),k.push(ce)),W||(K=L[z+2].clone(),se=G(K,L[z],O,P),ce=G(K,L[z+1],O,P),k.push(K),k.push(se),k.push(ce));break}case 3:break}}return k}function G(L,O,k,P){const z=L.position.dot(k)-P,j=O.position.dot(k)-P,Q=z/(z-j);return new lA(new s.Vector3(L.position.x+Q*(O.position.x-L.position.x),L.position.y+Q*(O.position.y-L.position.y),L.position.z+Q*(O.position.z-L.position.z)),new s.Vector3(L.normal.x+Q*(O.normal.x-L.normal.x),L.normal.y+Q*(O.normal.y-L.normal.y),L.normal.z+Q*(O.normal.z-L.normal.z)))}}}class lA{constructor(t,r){this.position=t,this.normal=r}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function rm(i){return Array.isArray(i)}function im(i=[0,0,0]){return rm(i)?i:i instanceof s.Vector3||i instanceof s.Euler?[i.x,i.y,i.z]:[i,i,i]}const V3=d.forwardRef(function(R,T){var F=R,{debug:t,depthTest:r=!1,polygonOffsetFactor:l=-10,map:c,mesh:p,children:h,position:g,rotation:v,scale:_}=F,b=_n(F,["debug","depthTest","polygonOffsetFactor","map","mesh","children","position","rotation","scale"]);const G=d.useRef(null);d.useImperativeHandle(T,()=>G.current);const L=d.useRef(null);return d.useLayoutEffect(()=>{const O=(p==null?void 0:p.current)||G.current.parent,k=G.current;if(!(O instanceof s.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const P={position:new s.Vector3,rotation:new s.Euler,scale:new s.Vector3(1,1,1)};if(O){(0,E.j)(P,{position:g,scale:_});const z=O.matrixWorld.clone();if(O.matrixWorld.identity(),!v||typeof v=="number"){const j=new s.Object3D;j.position.copy(P.position),j.lookAt(O.position),typeof v=="number"&&j.rotateZ(v),(0,E.j)(P,{rotation:j.rotation})}else(0,E.j)(P,{rotation:v});return k.geometry=new Rv(O,P.position,P.rotation,P.scale),L.current&&((0,E.j)(L.current,P),L.current.traverse(j=>j.raycast=()=>null)),O.matrixWorld=z,()=>{k.geometry.dispose()}}},[p,...im(g),...im(_),...im(v)]),d.createElement("mesh",(0,w.Z)({ref:G,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":l,"material-depthTest":r,"material-map":c},b),h,t&&d.createElement("mesh",{ref:L},d.createElement("boxGeometry",null),d.createElement("meshNormalMaterial",{wireframe:!0}),d.createElement("axesHelper",null)))});var xh=A(25108);class om extends s.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,r,l,c){const p=this,h=new s.FileLoader(p.manager);h.setPath(p.path),h.setRequestHeader(p.requestHeader),h.setWithCredentials(p.withCredentials),h.load(t,function(g){try{r(p.parse(g))}catch(v){c?c(v):xh.error(v),p.manager.itemError(t)}},l,c)}parse(t){const r=this;function l(Ee,_e){if(Ee.nodeType!==1)return;const oe=j(Ee);let Ae=!0,Te=null;switch(Ee.nodeName){case"svg":break;case"style":p(Ee);break;case"g":_e=G(Ee,_e);break;case"path":_e=G(Ee,_e),Ee.hasAttribute("d")&&(Te=c(Ee));break;case"rect":_e=G(Ee,_e),Te=v(Ee);break;case"polygon":_e=G(Ee,_e),Te=_(Ee);break;case"polyline":_e=G(Ee,_e),Te=b(Ee);break;case"circle":_e=G(Ee,_e),Te=T(Ee);break;case"ellipse":_e=G(Ee,_e),Te=R(Ee);break;case"line":_e=G(Ee,_e),Te=F(Ee);break;case"defs":Ae=!1;break;case"mask":Ae=!1;break;case"use":_e=G(Ee,_e);const ve=Ee.href.baseVal.substring(1),Ge=Ee.viewportElement.getElementById(ve);Ge?l(Ge,_e):xh.warn("SVGLoader: 'use node' references non-existent node id: "+ve);break;default:}if(Te&&(_e.fill!==void 0&&_e.fill!=="none"&&Te.color.setStyle(_e.fill),W(Te,Pe),ce.push(Te),Te.userData={node:Ee,style:_e}),Ae){const ve=Ee.childNodes;for(let Ge=0;Ge<ve.length;Ge++)l(ve[Ge],_e)}oe&&(le.pop(),le.length>0?Pe.copy(le[le.length-1]):Pe.identity())}function c(Ee){const _e=new s.ShapePath,oe=new s.Vector2,Ae=new s.Vector2,Te=new s.Vector2;let ve=!0,Ge=!1;const mt=Ee.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let gt=0,rt=mt.length;gt<rt;gt++){const Wt=mt[gt],kt=Wt.charAt(0),Bt=Wt.substr(1).trim();ve===!0&&(Ge=!0,ve=!1);let qe;switch(kt){case"M":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=2)oe.x=qe[Ne+0],oe.y=qe[Ne+1],Ae.x=oe.x,Ae.y=oe.y,Ne===0?_e.moveTo(oe.x,oe.y):_e.lineTo(oe.x,oe.y),Ne===0&&Te.copy(oe);break;case"H":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne++)oe.x=qe[Ne],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),Ne===0&&Ge===!0&&Te.copy(oe);break;case"V":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne++)oe.y=qe[Ne],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),Ne===0&&Ge===!0&&Te.copy(oe);break;case"L":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=2)oe.x=qe[Ne+0],oe.y=qe[Ne+1],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),Ne===0&&Ge===!0&&Te.copy(oe);break;case"C":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=6)_e.bezierCurveTo(qe[Ne+0],qe[Ne+1],qe[Ne+2],qe[Ne+3],qe[Ne+4],qe[Ne+5]),Ae.x=qe[Ne+2],Ae.y=qe[Ne+3],oe.x=qe[Ne+4],oe.y=qe[Ne+5],Ne===0&&Ge===!0&&Te.copy(oe);break;case"S":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=4)_e.bezierCurveTo(L(oe.x,Ae.x),L(oe.y,Ae.y),qe[Ne+0],qe[Ne+1],qe[Ne+2],qe[Ne+3]),Ae.x=qe[Ne+0],Ae.y=qe[Ne+1],oe.x=qe[Ne+2],oe.y=qe[Ne+3],Ne===0&&Ge===!0&&Te.copy(oe);break;case"Q":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=4)_e.quadraticCurveTo(qe[Ne+0],qe[Ne+1],qe[Ne+2],qe[Ne+3]),Ae.x=qe[Ne+0],Ae.y=qe[Ne+1],oe.x=qe[Ne+2],oe.y=qe[Ne+3],Ne===0&&Ge===!0&&Te.copy(oe);break;case"T":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=2){const mn=L(oe.x,Ae.x),Sn=L(oe.y,Ae.y);_e.quadraticCurveTo(mn,Sn,qe[Ne+0],qe[Ne+1]),Ae.x=mn,Ae.y=Sn,oe.x=qe[Ne+0],oe.y=qe[Ne+1],Ne===0&&Ge===!0&&Te.copy(oe)}break;case"A":qe=O(Bt,[3,4],7);for(let Ne=0,It=qe.length;Ne<It;Ne+=7){if(qe[Ne+5]==oe.x&&qe[Ne+6]==oe.y)continue;const mn=oe.clone();oe.x=qe[Ne+5],oe.y=qe[Ne+6],Ae.x=oe.x,Ae.y=oe.y,h(_e,qe[Ne],qe[Ne+1],qe[Ne+2],qe[Ne+3],qe[Ne+4],mn,oe),Ne===0&&Ge===!0&&Te.copy(oe)}break;case"m":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=2)oe.x+=qe[Ne+0],oe.y+=qe[Ne+1],Ae.x=oe.x,Ae.y=oe.y,Ne===0?_e.moveTo(oe.x,oe.y):_e.lineTo(oe.x,oe.y),Ne===0&&Te.copy(oe);break;case"h":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne++)oe.x+=qe[Ne],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),Ne===0&&Ge===!0&&Te.copy(oe);break;case"v":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne++)oe.y+=qe[Ne],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),Ne===0&&Ge===!0&&Te.copy(oe);break;case"l":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=2)oe.x+=qe[Ne+0],oe.y+=qe[Ne+1],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),Ne===0&&Ge===!0&&Te.copy(oe);break;case"c":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=6)_e.bezierCurveTo(oe.x+qe[Ne+0],oe.y+qe[Ne+1],oe.x+qe[Ne+2],oe.y+qe[Ne+3],oe.x+qe[Ne+4],oe.y+qe[Ne+5]),Ae.x=oe.x+qe[Ne+2],Ae.y=oe.y+qe[Ne+3],oe.x+=qe[Ne+4],oe.y+=qe[Ne+5],Ne===0&&Ge===!0&&Te.copy(oe);break;case"s":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=4)_e.bezierCurveTo(L(oe.x,Ae.x),L(oe.y,Ae.y),oe.x+qe[Ne+0],oe.y+qe[Ne+1],oe.x+qe[Ne+2],oe.y+qe[Ne+3]),Ae.x=oe.x+qe[Ne+0],Ae.y=oe.y+qe[Ne+1],oe.x+=qe[Ne+2],oe.y+=qe[Ne+3],Ne===0&&Ge===!0&&Te.copy(oe);break;case"q":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=4)_e.quadraticCurveTo(oe.x+qe[Ne+0],oe.y+qe[Ne+1],oe.x+qe[Ne+2],oe.y+qe[Ne+3]),Ae.x=oe.x+qe[Ne+0],Ae.y=oe.y+qe[Ne+1],oe.x+=qe[Ne+2],oe.y+=qe[Ne+3],Ne===0&&Ge===!0&&Te.copy(oe);break;case"t":qe=O(Bt);for(let Ne=0,It=qe.length;Ne<It;Ne+=2){const mn=L(oe.x,Ae.x),Sn=L(oe.y,Ae.y);_e.quadraticCurveTo(mn,Sn,oe.x+qe[Ne+0],oe.y+qe[Ne+1]),Ae.x=mn,Ae.y=Sn,oe.x=oe.x+qe[Ne+0],oe.y=oe.y+qe[Ne+1],Ne===0&&Ge===!0&&Te.copy(oe)}break;case"a":qe=O(Bt,[3,4],7);for(let Ne=0,It=qe.length;Ne<It;Ne+=7){if(qe[Ne+5]==0&&qe[Ne+6]==0)continue;const mn=oe.clone();oe.x+=qe[Ne+5],oe.y+=qe[Ne+6],Ae.x=oe.x,Ae.y=oe.y,h(_e,qe[Ne],qe[Ne+1],qe[Ne+2],qe[Ne+3],qe[Ne+4],mn,oe),Ne===0&&Ge===!0&&Te.copy(oe)}break;case"Z":case"z":_e.currentPath.autoClose=!0,_e.currentPath.curves.length>0&&(oe.copy(Te),_e.currentPath.currentPoint.copy(oe),ve=!0);break;default:xh.warn(Wt)}Ge=!1}return _e}function p(Ee){if(!(!Ee.sheet||!Ee.sheet.cssRules||!Ee.sheet.cssRules.length))for(let _e=0;_e<Ee.sheet.cssRules.length;_e++){const oe=Ee.sheet.cssRules[_e];if(oe.type!==1)continue;const Ae=oe.selectorText.split(/,/gm).filter(Boolean).map(Te=>Te.trim());for(let Te=0;Te<Ae.length;Te++)ge[Ae[Te]]=Object.assign(ge[Ae[Te]]||{},oe.style)}}function h(Ee,_e,oe,Ae,Te,ve,Ge,bt){if(_e==0||oe==0){Ee.lineTo(bt.x,bt.y);return}Ae=Ae*Math.PI/180,_e=Math.abs(_e),oe=Math.abs(oe);const mt=(Ge.x-bt.x)/2,gt=(Ge.y-bt.y)/2,rt=Math.cos(Ae)*mt+Math.sin(Ae)*gt,Wt=-Math.sin(Ae)*mt+Math.cos(Ae)*gt;let kt=_e*_e,Bt=oe*oe;const qe=rt*rt,Ne=Wt*Wt,It=qe/kt+Ne/Bt;if(It>1){const br=Math.sqrt(It);_e=br*_e,oe=br*oe,kt=_e*_e,Bt=oe*oe}const mn=kt*Ne+Bt*qe,Sn=(kt*Bt-mn)/mn;let zt=Math.sqrt(Math.max(0,Sn));Te===ve&&(zt=-zt);const Vn=zt*_e*Wt/oe,ar=-zt*oe*rt/_e,_r=Math.cos(Ae)*Vn-Math.sin(Ae)*ar+(Ge.x+bt.x)/2,ur=Math.sin(Ae)*Vn+Math.cos(Ae)*ar+(Ge.y+bt.y)/2,_i=g(1,0,(rt-Vn)/_e,(Wt-ar)/oe),gi=g((rt-Vn)/_e,(Wt-ar)/oe,(-rt-Vn)/_e,(-Wt-ar)/oe)%(Math.PI*2);Ee.currentPath.absellipse(_r,ur,_e,oe,_i,_i+gi,ve===0,Ae)}function g(Ee,_e,oe,Ae){const Te=Ee*oe+_e*Ae,ve=Math.sqrt(Ee*Ee+_e*_e)*Math.sqrt(oe*oe+Ae*Ae);let Ge=Math.acos(Math.max(-1,Math.min(1,Te/ve)));return Ee*Ae-_e*oe<0&&(Ge=-Ge),Ge}function v(Ee){const _e=z(Ee.getAttribute("x")||0),oe=z(Ee.getAttribute("y")||0),Ae=z(Ee.getAttribute("rx")||Ee.getAttribute("ry")||0),Te=z(Ee.getAttribute("ry")||Ee.getAttribute("rx")||0),ve=z(Ee.getAttribute("width")),Ge=z(Ee.getAttribute("height")),bt=1-.551915024494,mt=new s.ShapePath;return mt.moveTo(_e+Ae,oe),mt.lineTo(_e+ve-Ae,oe),(Ae!==0||Te!==0)&&mt.bezierCurveTo(_e+ve-Ae*bt,oe,_e+ve,oe+Te*bt,_e+ve,oe+Te),mt.lineTo(_e+ve,oe+Ge-Te),(Ae!==0||Te!==0)&&mt.bezierCurveTo(_e+ve,oe+Ge-Te*bt,_e+ve-Ae*bt,oe+Ge,_e+ve-Ae,oe+Ge),mt.lineTo(_e+Ae,oe+Ge),(Ae!==0||Te!==0)&&mt.bezierCurveTo(_e+Ae*bt,oe+Ge,_e,oe+Ge-Te*bt,_e,oe+Ge-Te),mt.lineTo(_e,oe+Te),(Ae!==0||Te!==0)&&mt.bezierCurveTo(_e,oe+Te*bt,_e+Ae*bt,oe,_e+Ae,oe),mt}function _(Ee){function _e(ve,Ge,bt){const mt=z(Ge),gt=z(bt);Te===0?Ae.moveTo(mt,gt):Ae.lineTo(mt,gt),Te++}const oe=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,Ae=new s.ShapePath;let Te=0;return Ee.getAttribute("points").replace(oe,_e),Ae.currentPath.autoClose=!0,Ae}function b(Ee){function _e(ve,Ge,bt){const mt=z(Ge),gt=z(bt);Te===0?Ae.moveTo(mt,gt):Ae.lineTo(mt,gt),Te++}const oe=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,Ae=new s.ShapePath;let Te=0;return Ee.getAttribute("points").replace(oe,_e),Ae.currentPath.autoClose=!1,Ae}function T(Ee){const _e=z(Ee.getAttribute("cx")||0),oe=z(Ee.getAttribute("cy")||0),Ae=z(Ee.getAttribute("r")||0),Te=new s.Path;Te.absarc(_e,oe,Ae,0,Math.PI*2);const ve=new s.ShapePath;return ve.subPaths.push(Te),ve}function R(Ee){const _e=z(Ee.getAttribute("cx")||0),oe=z(Ee.getAttribute("cy")||0),Ae=z(Ee.getAttribute("rx")||0),Te=z(Ee.getAttribute("ry")||0),ve=new s.Path;ve.absellipse(_e,oe,Ae,Te,0,Math.PI*2);const Ge=new s.ShapePath;return Ge.subPaths.push(ve),Ge}function F(Ee){const _e=z(Ee.getAttribute("x1")||0),oe=z(Ee.getAttribute("y1")||0),Ae=z(Ee.getAttribute("x2")||0),Te=z(Ee.getAttribute("y2")||0),ve=new s.ShapePath;return ve.moveTo(_e,oe),ve.lineTo(Ae,Te),ve.currentPath.autoClose=!1,ve}function G(Ee,_e){_e=Object.assign({},_e);let oe={};if(Ee.hasAttribute("class")){const Ge=Ee.getAttribute("class").split(/\s/).filter(Boolean).map(bt=>bt.trim());for(let bt=0;bt<Ge.length;bt++)oe=Object.assign(oe,ge["."+Ge[bt]])}Ee.hasAttribute("id")&&(oe=Object.assign(oe,ge["#"+Ee.getAttribute("id")]));function Ae(Ge,bt,mt){mt===void 0&&(mt=function(rt){return rt.startsWith("url")&&xh.warn("SVGLoader: url access in attributes is not implemented."),rt}),Ee.hasAttribute(Ge)&&(_e[bt]=mt(Ee.getAttribute(Ge))),oe[Ge]&&(_e[bt]=mt(oe[Ge])),Ee.style&&Ee.style[Ge]!==""&&(_e[bt]=mt(Ee.style[Ge]))}function Te(Ge){return Math.max(0,Math.min(1,z(Ge)))}function ve(Ge){return Math.max(0,z(Ge))}return Ae("fill","fill"),Ae("fill-opacity","fillOpacity",Te),Ae("fill-rule","fillRule"),Ae("opacity","opacity",Te),Ae("stroke","stroke"),Ae("stroke-opacity","strokeOpacity",Te),Ae("stroke-width","strokeWidth",ve),Ae("stroke-linejoin","strokeLineJoin"),Ae("stroke-linecap","strokeLineCap"),Ae("stroke-miterlimit","strokeMiterLimit",ve),Ae("visibility","visibility"),_e}function L(Ee,_e){return Ee-(_e-Ee)}function O(Ee,_e,oe){if(typeof Ee!="string")throw new TypeError("Invalid input: "+typeof Ee);const Ae={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Te=0,ve=1,Ge=2,bt=3;let mt=Te,gt=!0,rt="",Wt="";const kt=[];function Bt(mn,Sn,zt){const Vn=new SyntaxError('Unexpected character "'+mn+'" at index '+Sn+".");throw Vn.partial=zt,Vn}function qe(){rt!==""&&(Wt===""?kt.push(Number(rt)):kt.push(Number(rt)*Math.pow(10,Number(Wt)))),rt="",Wt=""}let Ne;const It=Ee.length;for(let mn=0;mn<It;mn++){if(Ne=Ee[mn],Array.isArray(_e)&&_e.includes(kt.length%oe)&&Ae.FLAGS.test(Ne)){mt=ve,rt=Ne,qe();continue}if(mt===Te){if(Ae.WHITESPACE.test(Ne))continue;if(Ae.DIGIT.test(Ne)||Ae.SIGN.test(Ne)){mt=ve,rt=Ne;continue}if(Ae.POINT.test(Ne)){mt=Ge,rt=Ne;continue}Ae.COMMA.test(Ne)&&(gt&&Bt(Ne,mn,kt),gt=!0)}if(mt===ve){if(Ae.DIGIT.test(Ne)){rt+=Ne;continue}if(Ae.POINT.test(Ne)){rt+=Ne,mt=Ge;continue}if(Ae.EXP.test(Ne)){mt=bt;continue}Ae.SIGN.test(Ne)&&rt.length===1&&Ae.SIGN.test(rt[0])&&Bt(Ne,mn,kt)}if(mt===Ge){if(Ae.DIGIT.test(Ne)){rt+=Ne;continue}if(Ae.EXP.test(Ne)){mt=bt;continue}Ae.POINT.test(Ne)&&rt[rt.length-1]==="."&&Bt(Ne,mn,kt)}if(mt===bt){if(Ae.DIGIT.test(Ne)){Wt+=Ne;continue}if(Ae.SIGN.test(Ne)){if(Wt===""){Wt+=Ne;continue}Wt.length===1&&Ae.SIGN.test(Wt)&&Bt(Ne,mn,kt)}}Ae.WHITESPACE.test(Ne)?(qe(),mt=Te,gt=!1):Ae.COMMA.test(Ne)?(qe(),mt=Te,gt=!0):Ae.SIGN.test(Ne)?(qe(),mt=ve,rt=Ne):Ae.POINT.test(Ne)?(qe(),mt=Ge,rt=Ne):Bt(Ne,mn,kt)}return qe(),kt}const k=["mm","cm","in","pt","pc","px"],P={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function z(Ee){let _e="px";if(typeof Ee=="string"||Ee instanceof String)for(let Ae=0,Te=k.length;Ae<Te;Ae++){const ve=k[Ae];if(Ee.endsWith(ve)){_e=ve,Ee=Ee.substring(0,Ee.length-ve.length);break}}let oe;return _e==="px"&&r.defaultUnit!=="px"?oe=P.in[r.defaultUnit]/r.defaultDPI:(oe=P[_e][r.defaultUnit],oe<0&&(oe=P[_e].in*r.defaultDPI)),oe*parseFloat(Ee)}function j(Ee){if(!(Ee.hasAttribute("transform")||Ee.nodeName==="use"&&(Ee.hasAttribute("x")||Ee.hasAttribute("y"))))return null;const _e=Q(Ee);return le.length>0&&_e.premultiply(le[le.length-1]),Pe.copy(_e),le.push(_e),_e}function Q(Ee){const _e=new s.Matrix3,oe=xe;if(Ee.nodeName==="use"&&(Ee.hasAttribute("x")||Ee.hasAttribute("y"))){const Ae=z(Ee.getAttribute("x")),Te=z(Ee.getAttribute("y"));_e.translate(Ae,Te)}if(Ee.hasAttribute("transform")){const Ae=Ee.getAttribute("transform").split(")");for(let Te=Ae.length-1;Te>=0;Te--){const ve=Ae[Te].trim();if(ve==="")continue;const Ge=ve.indexOf("("),bt=ve.length;if(Ge>0&&Ge<bt){const mt=ve.substr(0,Ge),gt=O(ve.substr(Ge+1,bt-Ge-1));switch(oe.identity(),mt){case"translate":if(gt.length>=1){const rt=gt[0];let Wt=rt;gt.length>=2&&(Wt=gt[1]),oe.translate(rt,Wt)}break;case"rotate":if(gt.length>=1){let rt=0,Wt=0,kt=0;rt=-gt[0]*Math.PI/180,gt.length>=3&&(Wt=gt[1],kt=gt[2]),me.identity().translate(-Wt,-kt),Be.identity().rotate(rt),ke.multiplyMatrices(Be,me),me.identity().translate(Wt,kt),oe.multiplyMatrices(me,ke)}break;case"scale":if(gt.length>=1){const rt=gt[0];let Wt=rt;gt.length>=2&&(Wt=gt[1]),oe.scale(rt,Wt)}break;case"skewX":gt.length===1&&oe.set(1,Math.tan(gt[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":gt.length===1&&oe.set(1,0,0,Math.tan(gt[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":gt.length===6&&oe.set(gt[0],gt[2],gt[4],gt[1],gt[3],gt[5],0,0,1);break}}_e.premultiply(oe)}}return _e}function W(Ee,_e){function oe(ve){ze.set(ve.x,ve.y,1).applyMatrix3(_e),ve.set(ze.x,ze.y)}const Ae=Y(_e),Te=Ee.subPaths;for(let ve=0,Ge=Te.length;ve<Ge;ve++){const mt=Te[ve].curves;for(let gt=0;gt<mt.length;gt++){const rt=mt[gt];rt.isLineCurve?(oe(rt.v1),oe(rt.v2)):rt.isCubicBezierCurve?(oe(rt.v0),oe(rt.v1),oe(rt.v2),oe(rt.v3)):rt.isQuadraticBezierCurve?(oe(rt.v0),oe(rt.v1),oe(rt.v2)):rt.isEllipseCurve&&(Ae&&xh.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),Re.set(rt.aX,rt.aY),oe(Re),rt.aX=Re.x,rt.aY=Re.y,rt.xRadius*=K(_e),rt.yRadius*=se(_e))}}}function Y(Ee){return Ee.elements[1]!==0||Ee.elements[3]!==0}function K(Ee){const _e=Ee.elements;return Math.sqrt(_e[0]*_e[0]+_e[1]*_e[1])}function se(Ee){const _e=Ee.elements;return Math.sqrt(_e[3]*_e[3]+_e[4]*_e[4])}const ce=[],ge={},le=[],xe=new s.Matrix3,me=new s.Matrix3,Be=new s.Matrix3,ke=new s.Matrix3,Re=new s.Vector2,ze=new s.Vector3,Pe=new s.Matrix3,Ye=new DOMParser().parseFromString(t,"image/svg+xml");return l(Ye.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:ce,xml:Ye.documentElement}}static createShapes(t){const l={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},c={loc:l.ORIGIN,t:0};function p(O,k,P,z){const j=O.x,Q=k.x,W=P.x,Y=z.x,K=O.y,se=k.y,ce=P.y,ge=z.y,le=(Y-W)*(K-ce)-(ge-ce)*(j-W),xe=(Q-j)*(K-ce)-(se-K)*(j-W),me=(ge-ce)*(Q-j)-(Y-W)*(se-K),Be=le/me,ke=xe/me;if(me===0&&le!==0||Be<=0||Be>=1||ke<0||ke>1)return null;if(le===0&&me===0){for(let Re=0;Re<2;Re++)if(h(Re===0?P:z,O,k),c.loc==l.ORIGIN){const ze=Re===0?P:z;return{x:ze.x,y:ze.y,t:c.t}}else if(c.loc==l.BETWEEN){const ze=+(j+c.t*(Q-j)).toPrecision(10),Pe=+(K+c.t*(se-K)).toPrecision(10);return{x:ze,y:Pe,t:c.t}}return null}else{for(let Pe=0;Pe<2;Pe++)if(h(Pe===0?P:z,O,k),c.loc==l.ORIGIN){const Ye=Pe===0?P:z;return{x:Ye.x,y:Ye.y,t:c.t}}const Re=+(j+Be*(Q-j)).toPrecision(10),ze=+(K+Be*(se-K)).toPrecision(10);return{x:Re,y:ze,t:Be}}}function h(O,k,P){const z=P.x-k.x,j=P.y-k.y,Q=O.x-k.x,W=O.y-k.y,Y=z*W-Q*j;if(O.x===k.x&&O.y===k.y){c.loc=l.ORIGIN,c.t=0;return}if(O.x===P.x&&O.y===P.y){c.loc=l.DESTINATION,c.t=1;return}if(Y<-Number.EPSILON){c.loc=l.LEFT;return}if(Y>Number.EPSILON){c.loc=l.RIGHT;return}if(z*Q<0||j*W<0){c.loc=l.BEHIND;return}if(Math.sqrt(z*z+j*j)<Math.sqrt(Q*Q+W*W)){c.loc=l.BEYOND;return}let K;z!==0?K=Q/z:K=W/j,c.loc=l.BETWEEN,c.t=K}function g(O,k){const P=[],z=[];for(let j=1;j<O.length;j++){const Q=O[j-1],W=O[j];for(let Y=1;Y<k.length;Y++){const K=k[Y-1],se=k[Y],ce=p(Q,W,K,se);ce!==null&&P.find(ge=>ge.t<=ce.t+Number.EPSILON&&ge.t>=ce.t-Number.EPSILON)===void 0&&(P.push(ce),z.push(new s.Vector2(ce.x,ce.y)))}}return z}function v(O,k,P){const z=new s.Vector2;k.getCenter(z);const j=[];return P.forEach(Q=>{Q.boundingBox.containsPoint(z)&&g(O,Q.points).forEach(Y=>{j.push({identifier:Q.identifier,isCW:Q.isCW,point:Y})})}),j.sort((Q,W)=>Q.point.x-W.point.x),j}function _(O,k,P,z,j){(j==null||j==="")&&(j="nonzero");const Q=new s.Vector2;O.boundingBox.getCenter(Q);const W=[new s.Vector2(P,Q.y),new s.Vector2(z,Q.y)],Y=v(W,O.boundingBox,k);Y.sort((xe,me)=>xe.point.x-me.point.x);const K=[],se=[];Y.forEach(xe=>{xe.identifier===O.identifier?K.push(xe):se.push(xe)});const ce=K[0].point.x,ge=[];let le=0;for(;le<se.length&&se[le].point.x<ce;)ge.length>0&&ge[ge.length-1]===se[le].identifier?ge.pop():ge.push(se[le].identifier),le++;if(ge.push(O.identifier),j==="evenodd"){const xe=ge.length%2===0,me=ge[ge.length-2];return{identifier:O.identifier,isHole:xe,for:me}}else if(j==="nonzero"){let xe=!0,me=null,Be=null;for(let ke=0;ke<ge.length;ke++){const Re=ge[ke];xe?(Be=k[Re].isCW,xe=!1,me=Re):Be!==k[Re].isCW&&(Be=k[Re].isCW,xe=!0)}return{identifier:O.identifier,isHole:xe,for:me}}else xh.warn('fill-rule: "'+j+'" is currently not implemented.')}let b=0,T=999999999,R=-999999999,F=t.subPaths.map(O=>{const k=O.getPoints();let P=-999999999,z=999999999,j=-999999999,Q=999999999;for(let W=0;W<k.length;W++){const Y=k[W];Y.y>P&&(P=Y.y),Y.y<z&&(z=Y.y),Y.x>j&&(j=Y.x),Y.x<Q&&(Q=Y.x)}return R<=j&&(R=j+1),T>=Q&&(T=Q-1),{curves:O.curves,points:k,isCW:s.ShapeUtils.isClockWise(k),identifier:b++,boundingBox:new s.Box2(new s.Vector2(Q,z),new s.Vector2(j,P))}});F=F.filter(O=>O.points.length>1);const G=F.map(O=>_(O,F,T,R,t.userData.style.fillRule)),L=[];return F.forEach(O=>{if(!G[O.identifier].isHole){const P=new s.Shape;P.curves=O.curves,G.filter(j=>j.isHole&&j.for===O.identifier).forEach(j=>{const Q=F[j.identifier],W=new s.Path;W.curves=Q.curves,P.holes.push(W)}),L.push(P)}}),L}static getStrokeStyle(t,r,l,c,p){return t=t!==void 0?t:1,r=r!==void 0?r:"#000",l=l!==void 0?l:"miter",c=c!==void 0?c:"butt",p=p!==void 0?p:4,{strokeColor:r,strokeWidth:t,strokeLineJoin:l,strokeLineCap:c,strokeMiterLimit:p}}static pointsToStroke(t,r,l,c){const p=[],h=[],g=[];if(om.pointsToStrokeWithBuffers(t,r,l,c,p,h,g)===0)return null;const v=new s.BufferGeometry;return v.setAttribute("position",new s.Float32BufferAttribute(p,3)),v.setAttribute("normal",new s.Float32BufferAttribute(h,3)),v.setAttribute("uv",new s.Float32BufferAttribute(g,2)),v}static pointsToStrokeWithBuffers(t,r,l,c,p,h,g,v){const _=new s.Vector2,b=new s.Vector2,T=new s.Vector2,R=new s.Vector2,F=new s.Vector2,G=new s.Vector2,L=new s.Vector2,O=new s.Vector2,k=new s.Vector2,P=new s.Vector2,z=new s.Vector2,j=new s.Vector2,Q=new s.Vector2,W=new s.Vector2,Y=new s.Vector2,K=new s.Vector2,se=new s.Vector2;l=l!==void 0?l:12,c=c!==void 0?c:.001,v=v!==void 0?v:0,t=Wt(t);const ce=t.length;if(ce<2)return 0;const ge=t[0].equals(t[ce-1]);let le,xe=t[0],me;const Be=r.strokeWidth/2,ke=1/(ce-1);let Re=0,ze,Pe,Ye,Ce,Ee=!1,_e=0,oe=v*3,Ae=v*2;Te(t[0],t[1],_).multiplyScalar(Be),O.copy(t[0]).sub(_),k.copy(t[0]).add(_),P.copy(O),z.copy(k);for(let kt=1;kt<ce;kt++){le=t[kt],kt===ce-1?ge?me=t[1]:me=void 0:me=t[kt+1];const Bt=_;if(Te(xe,le,Bt),T.copy(Bt).multiplyScalar(Be),j.copy(le).sub(T),Q.copy(le).add(T),ze=Re+ke,Pe=!1,me!==void 0){Te(le,me,b),T.copy(b).multiplyScalar(Be),W.copy(le).sub(T),Y.copy(le).add(T),Ye=!0,T.subVectors(me,xe),Bt.dot(T)<0&&(Ye=!1),kt===1&&(Ee=Ye),T.subVectors(me,le),T.normalize();const qe=Math.abs(Bt.dot(T));if(qe!==0){const Ne=Be/qe;T.multiplyScalar(-Ne),R.subVectors(le,xe),F.copy(R).setLength(Ne).add(T),K.copy(F).negate();const It=F.length(),mn=R.length();R.divideScalar(mn),G.subVectors(me,le);const Sn=G.length();switch(G.divideScalar(Sn),R.dot(K)<mn&&G.dot(K)<Sn&&(Pe=!0),se.copy(F).add(le),K.add(le),Ce=!1,Pe?Ye?(Y.copy(K),Q.copy(K)):(W.copy(K),j.copy(K)):bt(),r.strokeLineJoin){case"bevel":mt(Ye,Pe,ze);break;case"round":gt(Ye,Pe),Ye?Ge(le,j,W,ze,0):Ge(le,Y,Q,ze,1);break;case"miter":case"miter-clip":default:const zt=Be*r.strokeMiterLimit/It;if(zt<1)if(r.strokeLineJoin!=="miter-clip"){mt(Ye,Pe,ze);break}else gt(Ye,Pe),Ye?(G.subVectors(se,j).multiplyScalar(zt).add(j),L.subVectors(se,W).multiplyScalar(zt).add(W),ve(j,ze,0),ve(G,ze,0),ve(le,ze,.5),ve(le,ze,.5),ve(G,ze,0),ve(L,ze,0),ve(le,ze,.5),ve(L,ze,0),ve(W,ze,0)):(G.subVectors(se,Q).multiplyScalar(zt).add(Q),L.subVectors(se,Y).multiplyScalar(zt).add(Y),ve(Q,ze,1),ve(G,ze,1),ve(le,ze,.5),ve(le,ze,.5),ve(G,ze,1),ve(L,ze,1),ve(le,ze,.5),ve(L,ze,1),ve(Y,ze,1));else Pe?(Ye?(ve(k,Re,1),ve(O,Re,0),ve(se,ze,0),ve(k,Re,1),ve(se,ze,0),ve(K,ze,1)):(ve(k,Re,1),ve(O,Re,0),ve(se,ze,1),ve(O,Re,0),ve(K,ze,0),ve(se,ze,1)),Ye?W.copy(se):Y.copy(se)):Ye?(ve(j,ze,0),ve(se,ze,0),ve(le,ze,.5),ve(le,ze,.5),ve(se,ze,0),ve(W,ze,0)):(ve(Q,ze,1),ve(se,ze,1),ve(le,ze,.5),ve(le,ze,.5),ve(se,ze,1),ve(Y,ze,1)),Ce=!0;break}}else bt()}else bt();!ge&&kt===ce-1&&rt(t[0],P,z,Ye,!0,Re),Re=ze,xe=le,O.copy(W),k.copy(Y)}if(!ge)rt(le,j,Q,Ye,!1,ze);else if(Pe&&p){let kt=se,Bt=K;Ee!==Ye&&(kt=K,Bt=se),Ye?(Ce||Ee)&&(Bt.toArray(p,0*3),Bt.toArray(p,3*3),Ce&&kt.toArray(p,1*3)):(Ce||!Ee)&&(Bt.toArray(p,1*3),Bt.toArray(p,3*3),Ce&&kt.toArray(p,0*3))}return _e;function Te(kt,Bt,qe){return qe.subVectors(Bt,kt),qe.set(-qe.y,qe.x).normalize()}function ve(kt,Bt,qe){p&&(p[oe]=kt.x,p[oe+1]=kt.y,p[oe+2]=0,h&&(h[oe]=0,h[oe+1]=0,h[oe+2]=1),oe+=3,g&&(g[Ae]=Bt,g[Ae+1]=qe,Ae+=2)),_e+=3}function Ge(kt,Bt,qe,Ne,It){_.copy(Bt).sub(kt).normalize(),b.copy(qe).sub(kt).normalize();let mn=Math.PI;const Sn=_.dot(b);Math.abs(Sn)<1&&(mn=Math.abs(Math.acos(Sn))),mn/=l,T.copy(Bt);for(let zt=0,Vn=l-1;zt<Vn;zt++)R.copy(T).rotateAround(kt,mn),ve(T,Ne,It),ve(R,Ne,It),ve(kt,Ne,.5),T.copy(R);ve(R,Ne,It),ve(qe,Ne,It),ve(kt,Ne,.5)}function bt(){ve(k,Re,1),ve(O,Re,0),ve(j,ze,0),ve(k,Re,1),ve(j,ze,1),ve(Q,ze,0)}function mt(kt,Bt,qe){Bt?kt?(ve(k,Re,1),ve(O,Re,0),ve(j,ze,0),ve(k,Re,1),ve(j,ze,0),ve(K,ze,1),ve(j,qe,0),ve(W,qe,0),ve(K,qe,.5)):(ve(k,Re,1),ve(O,Re,0),ve(Q,ze,1),ve(O,Re,0),ve(K,ze,0),ve(Q,ze,1),ve(Q,qe,1),ve(Y,qe,0),ve(K,qe,.5)):kt?(ve(j,qe,0),ve(W,qe,0),ve(le,qe,.5)):(ve(Q,qe,1),ve(Y,qe,0),ve(le,qe,.5))}function gt(kt,Bt){Bt&&(kt?(ve(k,Re,1),ve(O,Re,0),ve(j,ze,0),ve(k,Re,1),ve(j,ze,0),ve(K,ze,1),ve(j,Re,0),ve(le,ze,.5),ve(K,ze,1),ve(le,ze,.5),ve(W,Re,0),ve(K,ze,1)):(ve(k,Re,1),ve(O,Re,0),ve(Q,ze,1),ve(O,Re,0),ve(K,ze,0),ve(Q,ze,1),ve(Q,Re,1),ve(K,ze,0),ve(le,ze,.5),ve(le,ze,.5),ve(K,ze,0),ve(Y,Re,1)))}function rt(kt,Bt,qe,Ne,It,mn){switch(r.strokeLineCap){case"round":It?Ge(kt,qe,Bt,mn,.5):Ge(kt,Bt,qe,mn,.5);break;case"square":if(It)_.subVectors(Bt,kt),b.set(_.y,-_.x),T.addVectors(_,b).add(kt),R.subVectors(b,_).add(kt),Ne?(T.toArray(p,1*3),R.toArray(p,0*3),R.toArray(p,3*3)):(T.toArray(p,1*3),T.toArray(p,3*3),R.toArray(p,0*3));else{_.subVectors(qe,kt),b.set(_.y,-_.x),T.addVectors(_,b).add(kt),R.subVectors(b,_).add(kt);const Sn=p.length;Ne?(T.toArray(p,Sn-1*3),R.toArray(p,Sn-2*3),R.toArray(p,Sn-4*3)):(T.toArray(p,Sn-2*3),R.toArray(p,Sn-1*3),R.toArray(p,Sn-4*3))}break;case"butt":default:break}}function Wt(kt){let Bt=!1;for(let Ne=1,It=kt.length-1;Ne<It;Ne++)if(kt[Ne].distanceTo(kt[Ne+1])<c){Bt=!0;break}if(!Bt)return kt;const qe=[];qe.push(kt[0]);for(let Ne=1,It=kt.length-1;Ne<It;Ne++)kt[Ne].distanceTo(kt[Ne+1])>=c&&qe.push(kt[Ne]);return qe.push(kt[kt.length-1]),qe}}}const Iv=(0,d.forwardRef)(function(b,_){var T=b,{src:t,skipFill:r,skipStrokes:l,fillMaterial:c,strokeMaterial:p,fillMeshProps:h,strokeMeshProps:g}=T,v=_n(T,["src","skipFill","skipStrokes","fillMaterial","strokeMaterial","fillMeshProps","strokeMeshProps"]);const R=(0,E.D)(om,t.startsWith("<svg")?`data:image/svg+xml;utf8,${t}`:t),F=(0,d.useMemo)(()=>l?[]:R.paths.map(G=>{var L;return((L=G.userData)==null?void 0:L.style.stroke)===void 0||G.userData.style.stroke==="none"?null:G.subPaths.map(O=>om.pointsToStroke(O.getPoints(),G.userData.style))}),[R,l]);return(0,d.useEffect)(()=>()=>F.forEach(G=>G&&G.map(L=>L.dispose())),[F]),d.createElement("object3D",(0,w.Z)({ref:_},v),d.createElement("object3D",{scale:[1,-1,1]},R.paths.map((G,L)=>{var O,k;return d.createElement(d.Fragment,{key:L},!r&&((O=G.userData)==null?void 0:O.style.fill)!==void 0&&G.userData.style.fill!=="none"&&om.createShapes(G).map((P,z)=>d.createElement("mesh",(0,w.Z)({key:z},h),d.createElement("shapeGeometry",{args:[P]}),d.createElement("meshBasicMaterial",(0,w.Z)({color:G.userData.style.fill,opacity:G.userData.style.fillOpacity,transparent:!0,side:s.DoubleSide,depthWrite:!1},c)))),!l&&((k=G.userData)==null?void 0:k.style.stroke)!==void 0&&G.userData.style.stroke!=="none"&&G.subPaths.map((P,z)=>d.createElement("mesh",(0,w.Z)({key:z,geometry:F[L][z]},g),d.createElement("meshBasicMaterial",(0,w.Z)({color:G.userData.style.stroke,opacity:G.userData.style.strokeOpacity,transparent:!0,side:s.DoubleSide,depthWrite:!1},p)))))})))});var v0=A(25108);const _0=new WeakMap;class Fv extends s.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,l,c){const p=new s.FileLoader(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{const g={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(h,g).then(r).catch(c)},l,c)}decodeDracoFile(t,r,l,c){const p={attributeIDs:l||this.defaultAttributeIDs,attributeTypes:c||this.defaultAttributeTypes,useUniqueIDs:!!l};this.decodeGeometry(t,p).then(r)}decodeGeometry(t,r){for(const v in r.attributeTypes){const _=r.attributeTypes[v];_.BYTES_PER_ELEMENT!==void 0&&(r.attributeTypes[v]=_.name)}const l=JSON.stringify(r);if(_0.has(t)){const v=_0.get(t);if(v.key===l)return v.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let c;const p=this.workerNextTaskID++,h=t.byteLength,g=this._getWorker(p,h).then(v=>(c=v,new Promise((_,b)=>{c._callbacks[p]={resolve:_,reject:b},c.postMessage({type:"decode",id:p,taskConfig:r,buffer:t},[t])}))).then(v=>this._createGeometry(v.geometry));return g.catch(()=>!0).then(()=>{c&&p&&this._releaseTask(c,p)}),_0.set(t,{key:l,promise:g}),g}_createGeometry(t){const r=new s.BufferGeometry;t.index&&r.setIndex(new s.BufferAttribute(t.index.array,1));for(let l=0;l<t.attributes.length;l++){const c=t.attributes[l],p=c.name,h=c.array,g=c.itemSize;r.setAttribute(p,new s.BufferAttribute(h,g))}return r}_loadLibrary(t,r){const l=new s.FileLoader(this.manager);return l.setPath(this.decoderPath),l.setResponseType(r),l.setWithCredentials(this.withCredentials),new Promise((c,p)=>{l.load(t,c,void 0,p)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(l=>{const c=l[0];t||(this.decoderConfig.wasmBinary=l[1]);const p=E0.toString(),h=["/* draco decoder */",c,"","/* worker */",p.substring(p.indexOf("{")+1,p.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const c=new Worker(this.workerSourceURL);c._callbacks={},c._taskCosts={},c._taskLoad=0,c.postMessage({type:"init",decoderConfig:this.decoderConfig}),c.onmessage=function(p){const h=p.data;switch(h.type){case"decode":c._callbacks[h.id].resolve(h);break;case"error":c._callbacks[h.id].reject(h);break;default:v0.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(c)}else this.workerPool.sort(function(c,p){return c._taskLoad>p._taskLoad?-1:1});const l=this.workerPool[this.workerPool.length-1];return l._taskCosts[t]=r,l._taskLoad+=r,l})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){v0.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function E0(){let i,t;onmessage=function(h){const g=h.data;switch(g.type){case"init":i=g.decoderConfig,t=new Promise(function(b){i.onModuleLoaded=function(T){b({draco:T})},DracoDecoderModule(i)});break;case"decode":const v=g.buffer,_=g.taskConfig;t.then(b=>{const T=b.draco,R=new T.Decoder,F=new T.DecoderBuffer;F.Init(new Int8Array(v),v.byteLength);try{const G=r(T,R,F,_),L=G.attributes.map(O=>O.array.buffer);G.index&&L.push(G.index.array.buffer),self.postMessage({type:"decode",id:g.id,geometry:G},L)}catch(G){v0.error(G),self.postMessage({type:"error",id:g.id,error:G.message})}finally{T.destroy(F),T.destroy(R)}});break}};function r(h,g,v,_){const b=_.attributeIDs,T=_.attributeTypes;let R,F;const G=g.GetEncodedGeometryType(v);if(G===h.TRIANGULAR_MESH)R=new h.Mesh,F=g.DecodeBufferToMesh(v,R);else if(G===h.POINT_CLOUD)R=new h.PointCloud,F=g.DecodeBufferToPointCloud(v,R);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!F.ok()||R.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+F.error_msg());const L={index:null,attributes:[]};for(const O in b){const k=self[T[O]];let P,z;if(_.useUniqueIDs)z=b[O],P=g.GetAttributeByUniqueId(R,z);else{if(z=g.GetAttributeId(R,h[b[O]]),z===-1)continue;P=g.GetAttribute(R,z)}L.attributes.push(c(h,g,R,O,k,P))}return G===h.TRIANGULAR_MESH&&(L.index=l(h,g,R)),h.destroy(R),L}function l(h,g,v){const b=v.num_faces()*3,T=b*4,R=h._malloc(T);g.GetTrianglesUInt32Array(v,T,R);const F=new Uint32Array(h.HEAPF32.buffer,R,b).slice();return h._free(R),{array:F,itemSize:1}}function c(h,g,v,_,b,T){const R=T.num_components(),G=v.num_points()*R,L=G*b.BYTES_PER_ELEMENT,O=p(h,b),k=h._malloc(L);g.GetAttributeDataArrayForAllPoints(v,T,O,L,k);const P=new b(h.HEAPF32.buffer,k,G).slice();return h._free(k),{name:_,array:P,itemSize:R}}function p(h,g){switch(g){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}let Ch;const sm=()=>{if(Ch)return Ch;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),l=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let c=i;WebAssembly.validate(r)&&(c=t);let p;const h=WebAssembly.instantiate(g(c),{}).then(T=>{p=T.instance,p.exports.__wasm_call_ctors()});function g(T){const R=new Uint8Array(T.length);for(let G=0;G<T.length;++G){const L=T.charCodeAt(G);R[G]=L>96?L-71:L>64?L-65:L>47?L+4:L>46?63:62}let F=0;for(let G=0;G<T.length;++G)R[F++]=R[G]<60?l[R[G]]:(R[G]-60)*64+R[++G];return R.buffer.slice(0,F)}function v(T,R,F,G,L,O){const k=p.exports.sbrk,P=F+3&-4,z=k(P*G),j=k(L.length),Q=new Uint8Array(p.exports.memory.buffer);Q.set(L,j);const W=T(z,F,G,j,L.length);if(W===0&&O&&O(z,P,G),R.set(Q.subarray(z,z+F*G)),k(z-k(0)),W!==0)throw new Error(`Malformed buffer data: ${W}`)}const _={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},b={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Ch={ready:h,supported:!0,decodeVertexBuffer(T,R,F,G,L){v(p.exports.meshopt_decodeVertexBuffer,T,R,F,G,p.exports[_[L]])},decodeIndexBuffer(T,R,F,G){v(p.exports.meshopt_decodeIndexBuffer,T,R,F,G)},decodeIndexSequence(T,R,F,G){v(p.exports.meshopt_decodeIndexSequence,T,R,F,G)},decodeGltfBuffer(T,R,F,G,L,O){v(p.exports[b[L]],T,R,F,G,p.exports[_[O]])}},Ch};var Wp=A(25108);class b0 extends s.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new M0(r)}),this.register(function(r){return new q3(r)}),this.register(function(r){return new kv(r)}),this.register(function(r){return new zv(r)}),this.register(function(r){return new X3(r)}),this.register(function(r){return new Y3(r)}),this.register(function(r){return new J3(r)}),this.register(function(r){return new Pv(r)}),this.register(function(r){return new K3(r)}),this.register(function(r){return new Lv(r)}),this.register(function(r){return new cA(r)}),this.register(function(r){return new Sh(r)}),this.register(function(r){return new Ov(r)}),this.register(function(r){return new wh(r)}),this.register(function(r){return new Gv(r)})}load(t,r,l,c){const p=this;let h;this.resourcePath!==""?h=this.resourcePath:this.path!==""?h=this.path:h=s.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);const g=function(_){c?c(_):Wp.error(_),p.manager.itemError(t),p.manager.itemEnd(t)},v=new s.FileLoader(this.manager);v.setPath(this.path),v.setResponseType("arraybuffer"),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(t,function(_){try{p.parse(_,h,function(b){r(b),p.manager.itemEnd(t)},g)}catch(b){g(b)}},l,g)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,l,c){let p;const h={},g={};if(typeof t=="string")p=JSON.parse(t);else if(t instanceof ArrayBuffer)if(s.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4)))===Nv){try{h[Ki.KHR_BINARY_GLTF]=new jv(t)}catch(b){c&&c(b);return}p=JSON.parse(h[Ki.KHR_BINARY_GLTF].content)}else p=JSON.parse(s.LoaderUtils.decodeText(new Uint8Array(t)));else p=t;if(p.asset===void 0||p.asset.version[0]<2){c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const v=new oE(p,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});v.fileLoader.setRequestHeader(this.requestHeader);for(let _=0;_<this.pluginCallbacks.length;_++){const b=this.pluginCallbacks[_](v);g[b.name]=b,h[b.name]=!0}if(p.extensionsUsed)for(let _=0;_<p.extensionsUsed.length;++_){const b=p.extensionsUsed[_],T=p.extensionsRequired||[];switch(b){case Ki.KHR_MATERIALS_UNLIT:h[b]=new Dv;break;case Ki.KHR_DRACO_MESH_COMPRESSION:h[b]=new Th(p,this.dracoLoader);break;case Ki.KHR_TEXTURE_TRANSFORM:h[b]=new Hv;break;case Ki.KHR_MESH_QUANTIZATION:h[b]=new Z3;break;default:T.indexOf(b)>=0&&g[b]===void 0&&Wp.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}v.setExtensions(h),v.setPlugins(g),v.parse(l,c)}parseAsync(t,r){const l=this;return new Promise(function(c,p){l.parse(t,r,c,p)})}}function Q3(){let i={};return{get:function(t){return i[t]},add:function(t,r){i[t]=r},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Ki={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ov{constructor(t){this.parser=t,this.name=Ki.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let l=0,c=r.length;l<c;l++){const p=r[l];p.extensions&&p.extensions[this.name]&&p.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,p.extensions[this.name].light)}}_loadLight(t){const r=this.parser,l="light:"+t;let c=r.cache.get(l);if(c)return c;const p=r.json,v=((p.extensions&&p.extensions[this.name]||{}).lights||[])[t];let _;const b=new s.Color(16777215);v.color!==void 0&&b.fromArray(v.color);const T=v.range!==void 0?v.range:0;switch(v.type){case"directional":_=new s.DirectionalLight(b),_.target.position.set(0,0,-1),_.add(_.target);break;case"point":_=new s.PointLight(b),_.distance=T;break;case"spot":_=new s.SpotLight(b),_.distance=T,v.spot=v.spot||{},v.spot.innerConeAngle=v.spot.innerConeAngle!==void 0?v.spot.innerConeAngle:0,v.spot.outerConeAngle=v.spot.outerConeAngle!==void 0?v.spot.outerConeAngle:Math.PI/4,_.angle=v.spot.outerConeAngle,_.penumbra=1-v.spot.innerConeAngle/v.spot.outerConeAngle,_.target.position.set(0,0,-1),_.add(_.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+v.type)}return _.position.set(0,0,0),_.decay=2,Cd(_,v),v.intensity!==void 0&&(_.intensity=v.intensity),_.name=r.createUniqueName(v.name||"light_"+t),c=Promise.resolve(_),r.cache.add(l,c),c}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,l=this.parser,p=l.json.nodes[t],g=(p.extensions&&p.extensions[this.name]||{}).light;return g===void 0?null:this._loadLight(g).then(function(v){return l._getNodeRef(r.cache,g,v)})}}class Dv{constructor(){this.name=Ki.KHR_MATERIALS_UNLIT}getMaterialType(){return s.MeshBasicMaterial}extendParams(t,r,l){const c=[];t.color=new s.Color(1,1,1),t.opacity=1;const p=r.pbrMetallicRoughness;if(p){if(Array.isArray(p.baseColorFactor)){const h=p.baseColorFactor;t.color.fromArray(h),t.opacity=h[3]}p.baseColorTexture!==void 0&&c.push(l.assignTexture(t,"map",p.baseColorTexture,3001))}return Promise.all(c)}}class K3{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const c=this.parser.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=c.extensions[this.name].emissiveStrength;return p!==void 0&&(r.emissiveIntensity=p),Promise.resolve()}}class M0{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];if(h.clearcoatFactor!==void 0&&(r.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&p.push(l.assignTexture(r,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&p.push(l.assignTexture(r,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(p.push(l.assignTexture(r,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const g=h.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new s.Vector2(g,g)}return Promise.all(p)}}class cA{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.iridescenceFactor!==void 0&&(r.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&p.push(l.assignTexture(r,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(r.iridescenceIOR=h.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&p.push(l.assignTexture(r,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(p)}}class X3{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_SHEEN}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[];r.sheenColor=new s.Color(0,0,0),r.sheenRoughness=0,r.sheen=1;const h=c.extensions[this.name];return h.sheenColorFactor!==void 0&&r.sheenColor.fromArray(h.sheenColorFactor),h.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&p.push(l.assignTexture(r,"sheenColorMap",h.sheenColorTexture,3001)),h.sheenRoughnessTexture!==void 0&&p.push(l.assignTexture(r,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(p)}}class Y3{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.transmissionFactor!==void 0&&(r.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&p.push(l.assignTexture(r,"transmissionMap",h.transmissionTexture)),Promise.all(p)}}class J3{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_VOLUME}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];r.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&p.push(l.assignTexture(r,"thicknessMap",h.thicknessTexture)),r.attenuationDistance=h.attenuationDistance||1/0;const g=h.attenuationColor||[1,1,1];return r.attenuationColor=new s.Color(g[0],g[1],g[2]),Promise.all(p)}}class Pv{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_IOR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const c=this.parser.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=c.extensions[this.name];return r.ior=p.ior!==void 0?p.ior:1.5,Promise.resolve()}}class Lv{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_SPECULAR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];r.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&p.push(l.assignTexture(r,"specularIntensityMap",h.specularTexture));const g=h.specularColorFactor||[1,1,1];return r.specularColor=new s.Color(g[0],g[1],g[2]),h.specularColorTexture!==void 0&&p.push(l.assignTexture(r,"specularColorMap",h.specularColorTexture,3001)),Promise.all(p)}}class Sh{constructor(t){this.parser=t,this.name=Ki.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.anisotropyStrength!==void 0&&(r.anisotropy=h.anisotropyStrength),h.anisotropyRotation!==void 0&&(r.anisotropyRotation=h.anisotropyRotation),h.anisotropyTexture!==void 0&&p.push(l.assignTexture(r,"anisotropyMap",h.anisotropyTexture)),Promise.all(p)}}class q3{constructor(t){this.parser=t,this.name=Ki.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,l=r.json,c=l.textures[t];if(!c.extensions||!c.extensions[this.name])return null;const p=c.extensions[this.name],h=r.options.ktx2Loader;if(!h){if(l.extensionsRequired&&l.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,p.source,h)}}class kv{constructor(t){this.parser=t,this.name=Ki.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,l=this.parser,c=l.json,p=c.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],g=c.images[h.source];let v=l.textureLoader;if(g.uri){const _=l.options.manager.getHandler(g.uri);_!==null&&(v=_)}return this.detectSupport().then(function(_){if(_)return l.loadTextureImage(t,h.source,v);if(c.extensionsRequired&&c.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return l.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class zv{constructor(t){this.parser=t,this.name=Ki.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,l=this.parser,c=l.json,p=c.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],g=c.images[h.source];let v=l.textureLoader;if(g.uri){const _=l.options.manager.getHandler(g.uri);_!==null&&(v=_)}return this.detectSupport().then(function(_){if(_)return l.loadTextureImage(t,h.source,v);if(c.extensionsRequired&&c.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return l.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class wh{constructor(t){this.name=Ki.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,l=r.bufferViews[t];if(l.extensions&&l.extensions[this.name]){const c=l.extensions[this.name],p=this.parser.getDependency("buffer",c.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return p.then(function(g){const v=c.byteOffset||0,_=c.byteLength||0,b=c.count,T=c.byteStride,R=new Uint8Array(g,v,_);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(b,T,R,c.mode,c.filter).then(function(F){return F.buffer}):h.ready.then(function(){const F=new ArrayBuffer(b*T);return h.decodeGltfBuffer(new Uint8Array(F),b,T,R,c.mode,c.filter),F})})}else return null}}class Gv{constructor(t){this.name=Ki.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,l=r.nodes[t];if(!l.extensions||!l.extensions[this.name]||l.mesh===void 0)return null;const c=r.meshes[l.mesh];for(const _ of c.primitives)if(_.mode!==pc.TRIANGLES&&_.mode!==pc.TRIANGLE_STRIP&&_.mode!==pc.TRIANGLE_FAN&&_.mode!==void 0)return null;const h=l.extensions[this.name].attributes,g=[],v={};for(const _ in h)g.push(this.parser.getDependency("accessor",h[_]).then(b=>(v[_]=b,v[_])));return g.length<1?null:(g.push(this.parser.createNodeMesh(t)),Promise.all(g).then(_=>{const b=_.pop(),T=b.isGroup?b.children:[b],R=_[0].count,F=[];for(const G of T){const L=new s.Matrix4,O=new s.Vector3,k=new s.Quaternion,P=new s.Vector3(1,1,1),z=new s.InstancedMesh(G.geometry,G.material,R);for(let j=0;j<R;j++)v.TRANSLATION&&O.fromBufferAttribute(v.TRANSLATION,j),v.ROTATION&&k.fromBufferAttribute(v.ROTATION,j),v.SCALE&&P.fromBufferAttribute(v.SCALE,j),z.setMatrixAt(j,L.compose(O,k,P));for(const j in v)j!=="TRANSLATION"&&j!=="ROTATION"&&j!=="SCALE"&&G.geometry.setAttribute(j,v[j]);s.Object3D.prototype.copy.call(z,G),this.parser.assignFinalMaterial(z),F.push(z)}return b.isGroup?(b.clear(),b.add(...F),b):F[0]}))}}const Nv="glTF",tp=12,Uv={JSON:1313821514,BIN:5130562};class jv{constructor(t){this.name=Ki.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,tp);if(this.header={magic:s.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==Nv)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const l=this.header.length-tp,c=new DataView(t,tp);let p=0;for(;p<l;){const h=c.getUint32(p,!0);p+=4;const g=c.getUint32(p,!0);if(p+=4,g===Uv.JSON){const v=new Uint8Array(t,tp+p,h);this.content=s.LoaderUtils.decodeText(v)}else if(g===Uv.BIN){const v=tp+p;this.body=t.slice(v,v+h)}p+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Th{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ki.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const l=this.json,c=this.dracoLoader,p=t.extensions[this.name].bufferView,h=t.extensions[this.name].attributes,g={},v={},_={};for(const b in h){const T=uA[b]||b.toLowerCase();g[T]=h[b]}for(const b in t.attributes){const T=uA[b]||b.toLowerCase();if(h[b]!==void 0){const R=l.accessors[t.attributes[b]],F=Md[R.componentType];_[T]=F.name,v[T]=R.normalized===!0}}return r.getDependency("bufferView",p).then(function(b){return new Promise(function(T){c.decodeDracoFile(b,function(R){for(const F in R.attributes){const G=R.attributes[F],L=v[F];L!==void 0&&(G.normalized=L)}T(R)},g,_)})})}}class Hv{constructor(){this.name=Ki.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(r.texCoord===void 0||r.texCoord===t.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.texCoord!==void 0&&(t.channel=r.texCoord),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class Z3{constructor(){this.name=Ki.KHR_MESH_QUANTIZATION}}class bd extends s.Interpolant{constructor(t,r,l,c){super(t,r,l,c)}copySampleValue_(t){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,p=t*c*3+c;for(let h=0;h!==c;h++)r[h]=l[p+h];return r}interpolate_(t,r,l,c){const p=this.resultBuffer,h=this.sampleValues,g=this.valueSize,v=g*2,_=g*3,b=c-r,T=(l-r)/b,R=T*T,F=R*T,G=t*_,L=G-_,O=-2*F+3*R,k=F-R,P=1-O,z=k-R+T;for(let j=0;j!==g;j++){const Q=h[L+j+g],W=h[L+j+v]*b,Y=h[G+j+g],K=h[G+j]*b;p[j]=P*Q+z*W+O*Y+k*K}return p}}const $3=new s.Quaternion;class eE extends bd{interpolate_(t,r,l,c){const p=super.interpolate_(t,r,l,c);return $3.fromArray(p).normalize().toArray(p),p}}const pc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Md={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Wv={9728:s.NearestFilter,9729:s.LinearFilter,9984:s.NearestMipmapNearestFilter,9985:s.LinearMipmapNearestFilter,9986:s.NearestMipmapLinearFilter,9987:s.LinearMipmapLinearFilter},x0={33071:s.ClampToEdgeWrapping,33648:s.MirroredRepeatWrapping,10497:s.RepeatWrapping},pA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uA=Xo(Kn({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},s.REVISION.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),xd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},tE={CUBICSPLINE:void 0,LINEAR:s.InterpolateLinear,STEP:s.InterpolateDiscrete},dA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function nE(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new s.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:s.FrontSide})),i.DefaultMaterial}function Bh(i,t,r){for(const l in r.extensions)i[l]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[l]=r.extensions[l])}function Cd(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):Wp.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function so(i,t,r){let l=!1,c=!1,p=!1;for(let _=0,b=t.length;_<b;_++){const T=t[_];if(T.POSITION!==void 0&&(l=!0),T.NORMAL!==void 0&&(c=!0),T.COLOR_0!==void 0&&(p=!0),l&&c&&p)break}if(!l&&!c&&!p)return Promise.resolve(i);const h=[],g=[],v=[];for(let _=0,b=t.length;_<b;_++){const T=t[_];if(l){const R=T.POSITION!==void 0?r.getDependency("accessor",T.POSITION):i.attributes.position;h.push(R)}if(c){const R=T.NORMAL!==void 0?r.getDependency("accessor",T.NORMAL):i.attributes.normal;g.push(R)}if(p){const R=T.COLOR_0!==void 0?r.getDependency("accessor",T.COLOR_0):i.attributes.color;v.push(R)}}return Promise.all([Promise.all(h),Promise.all(g),Promise.all(v)]).then(function(_){const b=_[0],T=_[1],R=_[2];return l&&(i.morphAttributes.position=b),c&&(i.morphAttributes.normal=T),p&&(i.morphAttributes.color=R),i.morphTargetsRelative=!0,i})}function rE(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let r=0,l=t.weights.length;r<l;r++)i.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(i.morphTargetInfluences.length===r.length){i.morphTargetDictionary={};for(let l=0,c=r.length;l<c;l++)i.morphTargetDictionary[r[l]]=l}else Wp.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Vv(i){let t;const r=i.extensions&&i.extensions[Ki.KHR_DRACO_MESH_COMPRESSION];if(r?t="draco:"+r.bufferView+":"+r.indices+":"+hA(r.attributes):t=i.indices+":"+hA(i.attributes)+":"+i.mode,i.targets!==void 0)for(let l=0,c=i.targets.length;l<c;l++)t+=":"+hA(i.targets[l]);return t}function hA(i){let t="";const r=Object.keys(i).sort();for(let l=0,c=r.length;l<c;l++)t+=r[l]+":"+i[r[l]]+";";return t}function fA(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function gA(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const iE=new s.Matrix4;class oE{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Q3,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let l=!1,c=!1,p=-1;typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"&&(l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,c=navigator.userAgent.indexOf("Firefox")>-1,p=c?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap=="undefined"||l||c&&p<98?this.textureLoader=new s.TextureLoader(this.options.manager):this.textureLoader=new s.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new s.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const l=this,c=this.json,p=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([l.getDependencies("scene"),l.getDependencies("animation"),l.getDependencies("camera")])}).then(function(h){const g={scene:h[0][c.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:c.asset,parser:l,userData:{}};Bh(p,g,c),Cd(g,c),Promise.all(l._invokeAll(function(v){return v.afterRoot&&v.afterRoot(g)})).then(function(){t(g)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],l=this.json.meshes||[];for(let c=0,p=r.length;c<p;c++){const h=r[c].joints;for(let g=0,v=h.length;g<v;g++)t[h[g]].isBone=!0}for(let c=0,p=t.length;c<p;c++){const h=t[c];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(l[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,l){if(t.refs[r]<=1)return l;const c=l.clone(),p=(h,g)=>{const v=this.associations.get(h);v!=null&&this.associations.set(g,v);for(const[_,b]of h.children.entries())p(b,g.children[_])};return p(l,c),c.name+="_instance_"+t.uses[r]++,c}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let l=0;l<r.length;l++){const c=t(r[l]);if(c)return c}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const l=[];for(let c=0;c<r.length;c++){const p=t(r[c]);p&&l.push(p)}return l}getDependency(t,r){const l=t+":"+r;let c=this.cache.get(l);if(!c){switch(t){case"scene":c=this.loadScene(r);break;case"node":c=this._invokeOne(function(p){return p.loadNode&&p.loadNode(r)});break;case"mesh":c=this._invokeOne(function(p){return p.loadMesh&&p.loadMesh(r)});break;case"accessor":c=this.loadAccessor(r);break;case"bufferView":c=this._invokeOne(function(p){return p.loadBufferView&&p.loadBufferView(r)});break;case"buffer":c=this.loadBuffer(r);break;case"material":c=this._invokeOne(function(p){return p.loadMaterial&&p.loadMaterial(r)});break;case"texture":c=this._invokeOne(function(p){return p.loadTexture&&p.loadTexture(r)});break;case"skin":c=this.loadSkin(r);break;case"animation":c=this._invokeOne(function(p){return p.loadAnimation&&p.loadAnimation(r)});break;case"camera":c=this.loadCamera(r);break;default:if(c=this._invokeOne(function(p){return p!=this&&p.getDependency&&p.getDependency(t,r)}),!c)throw new Error("Unknown type: "+t);break}this.cache.add(l,c)}return c}getDependencies(t){let r=this.cache.get(t);if(!r){const l=this,c=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(c.map(function(p,h){return l.getDependency(t,h)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],l=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[Ki.KHR_BINARY_GLTF].body);const c=this.options;return new Promise(function(p,h){l.load(s.LoaderUtils.resolveURL(r.uri,c.path),p,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(l){const c=r.byteLength||0,p=r.byteOffset||0;return l.slice(p,p+c)})}loadAccessor(t){const r=this,l=this.json,c=this.json.accessors[t];if(c.bufferView===void 0&&c.sparse===void 0){const h=pA[c.type],g=Md[c.componentType],v=c.normalized===!0,_=new g(c.count*h);return Promise.resolve(new s.BufferAttribute(_,h,v))}const p=[];return c.bufferView!==void 0?p.push(this.getDependency("bufferView",c.bufferView)):p.push(null),c.sparse!==void 0&&(p.push(this.getDependency("bufferView",c.sparse.indices.bufferView)),p.push(this.getDependency("bufferView",c.sparse.values.bufferView))),Promise.all(p).then(function(h){const g=h[0],v=pA[c.type],_=Md[c.componentType],b=_.BYTES_PER_ELEMENT,T=b*v,R=c.byteOffset||0,F=c.bufferView!==void 0?l.bufferViews[c.bufferView].byteStride:void 0,G=c.normalized===!0;let L,O;if(F&&F!==T){const k=Math.floor(R/F),P="InterleavedBuffer:"+c.bufferView+":"+c.componentType+":"+k+":"+c.count;let z=r.cache.get(P);z||(L=new _(g,k*F,c.count*F/b),z=new s.InterleavedBuffer(L,F/b),r.cache.add(P,z)),O=new s.InterleavedBufferAttribute(z,v,R%F/b,G)}else g===null?L=new _(c.count*v):L=new _(g,R,c.count*v),O=new s.BufferAttribute(L,v,G);if(c.sparse!==void 0){const k=pA.SCALAR,P=Md[c.sparse.indices.componentType],z=c.sparse.indices.byteOffset||0,j=c.sparse.values.byteOffset||0,Q=new P(h[1],z,c.sparse.count*k),W=new _(h[2],j,c.sparse.count*v);g!==null&&(O=new s.BufferAttribute(O.array.slice(),O.itemSize,O.normalized));for(let Y=0,K=Q.length;Y<K;Y++){const se=Q[Y];if(O.setX(se,W[Y*v]),v>=2&&O.setY(se,W[Y*v+1]),v>=3&&O.setZ(se,W[Y*v+2]),v>=4&&O.setW(se,W[Y*v+3]),v>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return O})}loadTexture(t){const r=this.json,l=this.options,p=r.textures[t].source,h=r.images[p];let g=this.textureLoader;if(h.uri){const v=l.manager.getHandler(h.uri);v!==null&&(g=v)}return this.loadTextureImage(t,p,g)}loadTextureImage(t,r,l){const c=this,p=this.json,h=p.textures[t],g=p.images[r],v=(g.uri||g.bufferView)+":"+h.sampler;if(this.textureCache[v])return this.textureCache[v];const _=this.loadImageSource(r,l).then(function(b){b.flipY=!1,b.name=h.name||g.name||"",b.name===""&&typeof g.uri=="string"&&g.uri.startsWith("data:image/")===!1&&(b.name=g.uri);const R=(p.samplers||{})[h.sampler]||{};return b.magFilter=Wv[R.magFilter]||s.LinearFilter,b.minFilter=Wv[R.minFilter]||s.LinearMipmapLinearFilter,b.wrapS=x0[R.wrapS]||s.RepeatWrapping,b.wrapT=x0[R.wrapT]||s.RepeatWrapping,c.associations.set(b,{textures:t}),b}).catch(function(){return null});return this.textureCache[v]=_,_}loadImageSource(t,r){const l=this,c=this.json,p=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(T=>T.clone());const h=c.images[t],g=self.URL||self.webkitURL;let v=h.uri||"",_=!1;if(h.bufferView!==void 0)v=l.getDependency("bufferView",h.bufferView).then(function(T){_=!0;const R=new Blob([T],{type:h.mimeType});return v=g.createObjectURL(R),v});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const b=Promise.resolve(v).then(function(T){return new Promise(function(R,F){let G=R;r.isImageBitmapLoader===!0&&(G=function(L){const O=new s.Texture(L);O.needsUpdate=!0,R(O)}),r.load(s.LoaderUtils.resolveURL(T,p.path),G,void 0,F)})}).then(function(T){return _===!0&&g.revokeObjectURL(v),T.userData.mimeType=h.mimeType||gA(h.uri),T}).catch(function(T){throw Wp.error("THREE.GLTFLoader: Couldn't load texture",v),T});return this.sourceCache[t]=b,b}assignTexture(t,r,l,c){const p=this;return this.getDependency("texture",l.index).then(function(h){if(!h)return null;if(l.texCoord!==void 0&&l.texCoord>0&&(h=h.clone(),h.channel=l.texCoord),p.extensions[Ki.KHR_TEXTURE_TRANSFORM]){const g=l.extensions!==void 0?l.extensions[Ki.KHR_TEXTURE_TRANSFORM]:void 0;if(g){const v=p.associations.get(h);h=p.extensions[Ki.KHR_TEXTURE_TRANSFORM].extendTexture(h,g),p.associations.set(h,v)}}return c!==void 0&&("colorSpace"in h?h.colorSpace=c===3001?"srgb":"srgb-linear":h.encoding=c),t[r]=h,h})}assignFinalMaterial(t){const r=t.geometry;let l=t.material;const c=r.attributes.tangent===void 0,p=r.attributes.color!==void 0,h=r.attributes.normal===void 0;if(t.isPoints){const g="PointsMaterial:"+l.uuid;let v=this.cache.get(g);v||(v=new s.PointsMaterial,s.Material.prototype.copy.call(v,l),v.color.copy(l.color),v.map=l.map,v.sizeAttenuation=!1,this.cache.add(g,v)),l=v}else if(t.isLine){const g="LineBasicMaterial:"+l.uuid;let v=this.cache.get(g);v||(v=new s.LineBasicMaterial,s.Material.prototype.copy.call(v,l),v.color.copy(l.color),v.map=l.map,this.cache.add(g,v)),l=v}if(c||p||h){let g="ClonedMaterial:"+l.uuid+":";c&&(g+="derivative-tangents:"),p&&(g+="vertex-colors:"),h&&(g+="flat-shading:");let v=this.cache.get(g);v||(v=l.clone(),p&&(v.vertexColors=!0),h&&(v.flatShading=!0),c&&(v.normalScale&&(v.normalScale.y*=-1),v.clearcoatNormalScale&&(v.clearcoatNormalScale.y*=-1)),this.cache.add(g,v),this.associations.set(v,this.associations.get(l))),l=v}t.material=l}getMaterialType(){return s.MeshStandardMaterial}loadMaterial(t){const r=this,l=this.json,c=this.extensions,p=l.materials[t];let h;const g={},v=p.extensions||{},_=[];if(v[Ki.KHR_MATERIALS_UNLIT]){const T=c[Ki.KHR_MATERIALS_UNLIT];h=T.getMaterialType(),_.push(T.extendParams(g,p,r))}else{const T=p.pbrMetallicRoughness||{};if(g.color=new s.Color(1,1,1),g.opacity=1,Array.isArray(T.baseColorFactor)){const R=T.baseColorFactor;g.color.fromArray(R),g.opacity=R[3]}T.baseColorTexture!==void 0&&_.push(r.assignTexture(g,"map",T.baseColorTexture,3001)),g.metalness=T.metallicFactor!==void 0?T.metallicFactor:1,g.roughness=T.roughnessFactor!==void 0?T.roughnessFactor:1,T.metallicRoughnessTexture!==void 0&&(_.push(r.assignTexture(g,"metalnessMap",T.metallicRoughnessTexture)),_.push(r.assignTexture(g,"roughnessMap",T.metallicRoughnessTexture))),h=this._invokeOne(function(R){return R.getMaterialType&&R.getMaterialType(t)}),_.push(Promise.all(this._invokeAll(function(R){return R.extendMaterialParams&&R.extendMaterialParams(t,g)})))}p.doubleSided===!0&&(g.side=s.DoubleSide);const b=p.alphaMode||dA.OPAQUE;if(b===dA.BLEND?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,b===dA.MASK&&(g.alphaTest=p.alphaCutoff!==void 0?p.alphaCutoff:.5)),p.normalTexture!==void 0&&h!==s.MeshBasicMaterial&&(_.push(r.assignTexture(g,"normalMap",p.normalTexture)),g.normalScale=new s.Vector2(1,1),p.normalTexture.scale!==void 0)){const T=p.normalTexture.scale;g.normalScale.set(T,T)}return p.occlusionTexture!==void 0&&h!==s.MeshBasicMaterial&&(_.push(r.assignTexture(g,"aoMap",p.occlusionTexture)),p.occlusionTexture.strength!==void 0&&(g.aoMapIntensity=p.occlusionTexture.strength)),p.emissiveFactor!==void 0&&h!==s.MeshBasicMaterial&&(g.emissive=new s.Color().fromArray(p.emissiveFactor)),p.emissiveTexture!==void 0&&h!==s.MeshBasicMaterial&&_.push(r.assignTexture(g,"emissiveMap",p.emissiveTexture,3001)),Promise.all(_).then(function(){const T=new h(g);return p.name&&(T.name=p.name),Cd(T,p),r.associations.set(T,{materials:t}),p.extensions&&Bh(c,T,p),T})}createUniqueName(t){const r=s.PropertyBinding.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,l=this.extensions,c=this.primitiveCache;function p(g){return l[Ki.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,r).then(function(v){return Qv(v,g,r)})}const h=[];for(let g=0,v=t.length;g<v;g++){const _=t[g],b=Vv(_),T=c[b];if(T)h.push(T.promise);else{let R;_.extensions&&_.extensions[Ki.KHR_DRACO_MESH_COMPRESSION]?R=p(_):R=Qv(new s.BufferGeometry,_,r),c[b]={primitive:_,promise:R},h.push(R)}}return Promise.all(h)}loadMesh(t){const r=this,l=this.json,c=this.extensions,p=l.meshes[t],h=p.primitives,g=[];for(let v=0,_=h.length;v<_;v++){const b=h[v].material===void 0?nE(this.cache):this.getDependency("material",h[v].material);g.push(b)}return g.push(r.loadGeometries(h)),Promise.all(g).then(function(v){const _=v.slice(0,v.length-1),b=v[v.length-1],T=[];for(let F=0,G=b.length;F<G;F++){const L=b[F],O=h[F];let k;const P=_[F];if(O.mode===pc.TRIANGLES||O.mode===pc.TRIANGLE_STRIP||O.mode===pc.TRIANGLE_FAN||O.mode===void 0)k=p.isSkinnedMesh===!0?new s.SkinnedMesh(L,P):new s.Mesh(L,P),k.isSkinnedMesh===!0&&k.normalizeSkinWeights(),O.mode===pc.TRIANGLE_STRIP?k.geometry=dv(k.geometry,s.TriangleStripDrawMode):O.mode===pc.TRIANGLE_FAN&&(k.geometry=dv(k.geometry,s.TriangleFanDrawMode));else if(O.mode===pc.LINES)k=new s.LineSegments(L,P);else if(O.mode===pc.LINE_STRIP)k=new s.Line(L,P);else if(O.mode===pc.LINE_LOOP)k=new s.LineLoop(L,P);else if(O.mode===pc.POINTS)k=new s.Points(L,P);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(k.geometry.morphAttributes).length>0&&rE(k,p),k.name=r.createUniqueName(p.name||"mesh_"+t),Cd(k,p),O.extensions&&Bh(c,k,O),r.assignFinalMaterial(k),T.push(k)}for(let F=0,G=T.length;F<G;F++)r.associations.set(T[F],{meshes:t,primitives:F});if(T.length===1)return p.extensions&&Bh(c,T[0],p),T[0];const R=new s.Group;p.extensions&&Bh(c,R,p),r.associations.set(R,{meshes:t});for(let F=0,G=T.length;F<G;F++)R.add(T[F]);return R})}loadCamera(t){let r;const l=this.json.cameras[t],c=l[l.type];if(!c){Wp.warn("THREE.GLTFLoader: Missing camera parameters.");return}return l.type==="perspective"?r=new s.PerspectiveCamera(s.MathUtils.radToDeg(c.yfov),c.aspectRatio||1,c.znear||1,c.zfar||2e6):l.type==="orthographic"&&(r=new s.OrthographicCamera(-c.xmag,c.xmag,c.ymag,-c.ymag,c.znear,c.zfar)),l.name&&(r.name=this.createUniqueName(l.name)),Cd(r,l),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],l=[];for(let c=0,p=r.joints.length;c<p;c++)l.push(this._loadNodeShallow(r.joints[c]));return r.inverseBindMatrices!==void 0?l.push(this.getDependency("accessor",r.inverseBindMatrices)):l.push(null),Promise.all(l).then(function(c){const p=c.pop(),h=c,g=[],v=[];for(let _=0,b=h.length;_<b;_++){const T=h[_];if(T){g.push(T);const R=new s.Matrix4;p!==null&&R.fromArray(p.array,_*16),v.push(R)}else Wp.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[_])}return new s.Skeleton(g,v)})}loadAnimation(t){const l=this.json.animations[t],c=l.name?l.name:"animation_"+t,p=[],h=[],g=[],v=[],_=[];for(let b=0,T=l.channels.length;b<T;b++){const R=l.channels[b],F=l.samplers[R.sampler],G=R.target,L=G.node,O=l.parameters!==void 0?l.parameters[F.input]:F.input,k=l.parameters!==void 0?l.parameters[F.output]:F.output;G.node!==void 0&&(p.push(this.getDependency("node",L)),h.push(this.getDependency("accessor",O)),g.push(this.getDependency("accessor",k)),v.push(F),_.push(G))}return Promise.all([Promise.all(p),Promise.all(h),Promise.all(g),Promise.all(v),Promise.all(_)]).then(function(b){const T=b[0],R=b[1],F=b[2],G=b[3],L=b[4],O=[];for(let k=0,P=T.length;k<P;k++){const z=T[k],j=R[k],Q=F[k],W=G[k],Y=L[k];if(z===void 0)continue;z.updateMatrix();let K;switch(xd[Y.path]){case xd.weights:K=s.NumberKeyframeTrack;break;case xd.rotation:K=s.QuaternionKeyframeTrack;break;case xd.position:case xd.scale:default:K=s.VectorKeyframeTrack;break}const se=z.name?z.name:z.uuid,ce=W.interpolation!==void 0?tE[W.interpolation]:s.InterpolateLinear,ge=[];xd[Y.path]===xd.weights?z.traverse(function(xe){xe.morphTargetInfluences&&ge.push(xe.name?xe.name:xe.uuid)}):ge.push(se);let le=Q.array;if(Q.normalized){const xe=fA(le.constructor),me=new Float32Array(le.length);for(let Be=0,ke=le.length;Be<ke;Be++)me[Be]=le[Be]*xe;le=me}for(let xe=0,me=ge.length;xe<me;xe++){const Be=new K(ge[xe]+"."+xd[Y.path],j.array,le,ce);W.interpolation==="CUBICSPLINE"&&(Be.createInterpolant=function(Re){const ze=this instanceof s.QuaternionKeyframeTrack?eE:bd;return new ze(this.times,this.values,this.getValueSize()/3,Re)},Be.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),O.push(Be)}}return new s.AnimationClip(c,void 0,O)})}createNodeMesh(t){const r=this.json,l=this,c=r.nodes[t];return c.mesh===void 0?null:l.getDependency("mesh",c.mesh).then(function(p){const h=l._getNodeRef(l.meshCache,c.mesh,p);return c.weights!==void 0&&h.traverse(function(g){if(g.isMesh)for(let v=0,_=c.weights.length;v<_;v++)g.morphTargetInfluences[v]=c.weights[v]}),h})}loadNode(t){const r=this.json,l=this,c=r.nodes[t],p=l._loadNodeShallow(t),h=[],g=c.children||[];for(let _=0,b=g.length;_<b;_++)h.push(l.getDependency("node",g[_]));const v=c.skin===void 0?Promise.resolve(null):l.getDependency("skin",c.skin);return Promise.all([p,Promise.all(h),v]).then(function(_){const b=_[0],T=_[1],R=_[2];R!==null&&b.traverse(function(F){F.isSkinnedMesh&&F.bind(R,iE)});for(let F=0,G=T.length;F<G;F++)b.add(T[F]);return b})}_loadNodeShallow(t){const r=this.json,l=this.extensions,c=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const p=r.nodes[t],h=p.name?c.createUniqueName(p.name):"",g=[],v=c._invokeOne(function(_){return _.createNodeMesh&&_.createNodeMesh(t)});return v&&g.push(v),p.camera!==void 0&&g.push(c.getDependency("camera",p.camera).then(function(_){return c._getNodeRef(c.cameraCache,p.camera,_)})),c._invokeAll(function(_){return _.createNodeAttachment&&_.createNodeAttachment(t)}).forEach(function(_){g.push(_)}),this.nodeCache[t]=Promise.all(g).then(function(_){let b;if(p.isBone===!0?b=new s.Bone:_.length>1?b=new s.Group:_.length===1?b=_[0]:b=new s.Object3D,b!==_[0])for(let T=0,R=_.length;T<R;T++)b.add(_[T]);if(p.name&&(b.userData.name=p.name,b.name=h),Cd(b,p),p.extensions&&Bh(l,b,p),p.matrix!==void 0){const T=new s.Matrix4;T.fromArray(p.matrix),b.applyMatrix4(T)}else p.translation!==void 0&&b.position.fromArray(p.translation),p.rotation!==void 0&&b.quaternion.fromArray(p.rotation),p.scale!==void 0&&b.scale.fromArray(p.scale);return c.associations.has(b)||c.associations.set(b,{}),c.associations.get(b).nodes=t,b}),this.nodeCache[t]}loadScene(t){const r=this.extensions,l=this.json.scenes[t],c=this,p=new s.Group;l.name&&(p.name=c.createUniqueName(l.name)),Cd(p,l),l.extensions&&Bh(r,p,l);const h=l.nodes||[],g=[];for(let v=0,_=h.length;v<_;v++)g.push(c.getDependency("node",h[v]));return Promise.all(g).then(function(v){for(let b=0,T=v.length;b<T;b++)p.add(v[b]);const _=b=>{const T=new Map;for(const[R,F]of c.associations)(R instanceof s.Material||R instanceof s.Texture)&&T.set(R,F);return b.traverse(R=>{const F=c.associations.get(R);F!=null&&T.set(R,F)}),T};return c.associations=_(p),p})}}function sE(i,t,r){const l=t.attributes,c=new s.Box3;if(l.POSITION!==void 0){const g=r.json.accessors[l.POSITION],v=g.min,_=g.max;if(v!==void 0&&_!==void 0){if(c.set(new s.Vector3(v[0],v[1],v[2]),new s.Vector3(_[0],_[1],_[2])),g.normalized){const b=fA(Md[g.componentType]);c.min.multiplyScalar(b),c.max.multiplyScalar(b)}}else{Wp.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const p=t.targets;if(p!==void 0){const g=new s.Vector3,v=new s.Vector3;for(let _=0,b=p.length;_<b;_++){const T=p[_];if(T.POSITION!==void 0){const R=r.json.accessors[T.POSITION],F=R.min,G=R.max;if(F!==void 0&&G!==void 0){if(v.setX(Math.max(Math.abs(F[0]),Math.abs(G[0]))),v.setY(Math.max(Math.abs(F[1]),Math.abs(G[1]))),v.setZ(Math.max(Math.abs(F[2]),Math.abs(G[2]))),R.normalized){const L=fA(Md[R.componentType]);v.multiplyScalar(L)}g.max(v)}else Wp.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}c.expandByVector(g)}i.boundingBox=c;const h=new s.Sphere;c.getCenter(h.center),h.radius=c.min.distanceTo(c.max)/2,i.boundingSphere=h}function Qv(i,t,r){const l=t.attributes,c=[];function p(h,g){return r.getDependency("accessor",h).then(function(v){i.setAttribute(g,v)})}for(const h in l){const g=uA[h]||h.toLowerCase();g in i.attributes||c.push(p(l[h],g))}if(t.indices!==void 0&&!i.index){const h=r.getDependency("accessor",t.indices).then(function(g){i.setIndex(g)});c.push(h)}return Cd(i,t),sE(i,t,r),Promise.all(c).then(function(){return t.targets!==void 0?so(i,t.targets,r):i})}let C0=null;function mA(i,t,r){return l=>{r&&r(l),i&&(C0||(C0=new Fv),C0.setDecoderPath(typeof i=="string"?i:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),l.setDRACOLoader(C0)),t&&l.setMeshoptDecoder(typeof sm=="function"?sm():sm)}}function If(i,t=!0,r=!0,l){return(0,E.D)(b0,i,mA(t,r,l))}If.preload=(i,t=!0,r=!0,l)=>E.D.preload(b0,i,mA(t,r,l)),If.clear=i=>E.D.clear(b0,i);const aE=d.forwardRef((l,r)=>{var c=l,{src:i}=c,t=_n(c,["src"]);const{scene:p}=If(i);return d.createElement(y0,(0,w.Z)({ref:r},t,{object:p}))});class lE{constructor(t,r=" .:-=+*#%@",l={}){const c=l.resolution||.15,p=l.scale||1,h=l.color||!1,g=l.alpha||!1,v=l.block||!1,_=l.invert||!1,b=l.strResolution||"low";let T,R;const F=document.createElement("div");F.style.cursor="default";const G=document.createElement("table");F.appendChild(G);let L,O,k;this.setSize=function(me,Be){T=me,R=Be,t.setSize(me,Be),P()},this.render=function(me,Be){t.render(me,Be),xe(G)},this.domElement=F;function P(){L=Math.floor(T*c),O=Math.floor(R*c),Y.width=L,Y.height=O,k=t.domElement,k.style.backgroundColor&&(G.rows[0].cells[0].style.backgroundColor=k.style.backgroundColor,G.rows[0].cells[0].style.color=k.style.color),G.cellSpacing=0,G.cellPadding=0;const me=G.style;me.whiteSpace="pre",me.margin="0px",me.padding="0px",me.letterSpacing=le+"px",me.fontFamily=Q,me.fontSize=ce+"px",me.lineHeight=ge+"px",me.textAlign="left",me.textDecoration="none"}const z=" .,:;i1tfLCG08@".split(""),j=" CGO08@".split(""),Q="courier new, monospace",W=t.domElement,Y=document.createElement("canvas");if(!Y.getContext)return;const K=Y.getContext("2d");if(!K.getImageData)return;let se=h?j:z;r&&(se=r);const ce=2/c*p,ge=2/c*p;let le=0;if(b=="low")switch(p){case 1:le=-1;break;case 2:case 3:le=-2.1;break;case 4:le=-3.1;break;case 5:le=-4.15;break}if(b=="medium")switch(p){case 1:le=0;break;case 2:le=-1;break;case 3:le=-1.04;break;case 4:case 5:le=-2.1;break}if(b=="high")switch(p){case 1:case 2:le=0;break;case 3:case 4:case 5:le=-1;break}function xe(me){K.clearRect(0,0,L,O),K.drawImage(W,0,0,L,O);const Be=K.getImageData(0,0,L,O).data;let ke="";for(let Re=0;Re<O;Re+=2){for(let ze=0;ze<L;ze++){const Pe=(Re*L+ze)*4,Ye=Be[Pe],Ce=Be[Pe+1],Ee=Be[Pe+2],_e=Be[Pe+3];let oe,Ae;Ae=(.3*Ye+.59*Ce+.11*Ee)/255,_e==0&&(Ae=1),oe=Math.floor((1-Ae)*(se.length-1)),_&&(oe=se.length-oe-1);let Te=se[oe];(Te===void 0||Te==" ")&&(Te="&nbsp;"),h?ke+="<span style='color:rgb("+Ye+","+Ce+","+Ee+");"+(v?"background-color:rgb("+Ye+","+Ce+","+Ee+");":"")+(g?"opacity:"+_e/255+";":"")+"'>"+Te+"</span>":ke+=Te}ke+="<br/>"}me.innerHTML=`<tr><td style="display:block;width:${T}px;height:${R}px;overflow:hidden">${ke}</td></tr>`}}}function Kv({renderIndex:i=1,bgColor:t="black",fgColor:r="white",characters:l=" .:-+*=%@#",invert:c=!0,color:p=!1,resolution:h=.15}){const{size:g,gl:v,scene:_,camera:b}=(0,E.z)(),T=d.useMemo(()=>{const R=new lE(v,l,{invert:c,color:p,resolution:h});return R.domElement.style.position="absolute",R.domElement.style.top="0px",R.domElement.style.left="0px",R.domElement.style.pointerEvents="none",R},[l,c,p,h]);return d.useLayoutEffect(()=>{T.domElement.style.color=r,T.domElement.style.backgroundColor=t},[r,t]),d.useEffect(()=>(v.domElement.style.opacity="0",v.domElement.parentNode.appendChild(T.domElement),()=>{v.domElement.style.opacity="1",v.domElement.parentNode.removeChild(T.domElement)}),[T]),d.useEffect(()=>{T.setSize(g.width,g.height)},[T,g]),(0,E.A)(R=>{T.render(_,b)},i),d.createElement(d.Fragment,null)}function Hl(i,t,r){const l=(0,E.z)(F=>F.size),c=(0,E.z)(F=>F.viewport),p=typeof i=="number"?i:l.width*c.dpr,h=typeof t=="number"?t:l.height*c.dpr,R=(typeof i=="number"?r:i)||{},{samples:v=0,depth:_}=R,b=_n(R,["samples","depth"]),T=d.useMemo(()=>{const F=new s.WebGLRenderTarget(p,h,Kn({minFilter:s.LinearFilter,magFilter:s.LinearFilter,type:s.HalfFloatType},b));return _&&(F.depthTexture=new s.DepthTexture(p,h,s.FloatType)),F.samples=v,F},[]);return d.useLayoutEffect(()=>{T.setSize(p,h),v&&(T.samples=v)},[v,T,p,h]),d.useEffect(()=>()=>T.dispose(),[]),T}const Xv=i=>typeof i=="function",am=d.forwardRef((g,h)=>{var v=g,{envMap:i,resolution:t=256,frames:r=1/0,children:l,makeDefault:c}=v,p=_n(v,["envMap","resolution","frames","children","makeDefault"]);const _=(0,E.z)(({set:P})=>P),b=(0,E.z)(({camera:P})=>P),T=(0,E.z)(({size:P})=>P),R=d.useRef(null),F=d.useRef(null),G=Hl(t);d.useLayoutEffect(()=>{p.manual||R.current.updateProjectionMatrix()},[T,p]),d.useLayoutEffect(()=>{R.current.updateProjectionMatrix()}),d.useLayoutEffect(()=>{if(c){const P=b;return _(()=>({camera:R.current})),()=>_(()=>({camera:P}))}},[R,c,_]);let L=0,O=null;const k=Xv(l);return(0,E.A)(P=>{k&&(r===1/0||L<r)&&(F.current.visible=!1,P.gl.setRenderTarget(G),O=P.scene.background,i&&(P.scene.background=i),P.gl.render(P.scene,R.current),P.scene.background=O,P.gl.setRenderTarget(null),F.current.visible=!0,L++)}),d.createElement(d.Fragment,null,d.createElement("orthographicCamera",(0,w.Z)({left:T.width/-2,right:T.width/2,top:T.height/2,bottom:T.height/-2,ref:zr([R,h])},p),!k&&l),d.createElement("group",{ref:F},k&&l(G.texture)))}),cE=i=>typeof i=="function",Yv=d.forwardRef((g,h)=>{var v=g,{envMap:i,resolution:t=256,frames:r=1/0,makeDefault:l,children:c}=v,p=_n(v,["envMap","resolution","frames","makeDefault","children"]);const _=(0,E.z)(({set:P})=>P),b=(0,E.z)(({camera:P})=>P),T=(0,E.z)(({size:P})=>P),R=d.useRef(null),F=d.useRef(null),G=Hl(t);d.useLayoutEffect(()=>{p.manual||(R.current.aspect=T.width/T.height)},[T,p]),d.useLayoutEffect(()=>{R.current.updateProjectionMatrix()});let L=0,O=null;const k=cE(c);return(0,E.A)(P=>{k&&(r===1/0||L<r)&&(F.current.visible=!1,P.gl.setRenderTarget(G),O=P.scene.background,i&&(P.scene.background=i),P.gl.render(P.scene,R.current),P.scene.background=O,P.gl.setRenderTarget(null),F.current.visible=!0,L++)}),d.useLayoutEffect(()=>{if(l){const P=b;return _(()=>({camera:R.current})),()=>_(()=>({camera:P}))}},[R,l,_]),d.createElement(d.Fragment,null,d.createElement("perspectiveCamera",(0,w.Z)({ref:zr([R,h])},p),!k&&c),d.createElement("group",{ref:F},k&&c(G.texture)))});function Jv({resolution:i=256,near:t=.1,far:r=1e3,envMap:l,fog:c}={}){const p=(0,E.z)(({gl:R})=>R),h=(0,E.z)(({scene:R})=>R),g=(0,d.useMemo)(()=>{const R=new s.WebGLCubeRenderTarget(i);return R.texture.type=s.HalfFloatType,R},[i]);(0,d.useEffect)(()=>()=>{g.dispose()},[g]);const v=(0,d.useMemo)(()=>new s.CubeCamera(t,r,g),[t,r,g]);let _,b;const T=d.useCallback(()=>{_=h.fog,b=h.background,h.background=l||b,h.fog=c||_,v.update(p,h),h.fog=_,h.background=b},[p,h,v]);return{fbo:g,camera:v,update:T}}function Sd(v){var _=v,{children:i,frames:t=1/0,resolution:r,near:l,far:c,envMap:p,fog:h}=_,g=_n(_,["children","frames","resolution","near","far","envMap","fog"]);const b=d.useRef(),{fbo:T,camera:R,update:F}=Jv({resolution:r,near:l,far:c,envMap:p,fog:h});let G=0;return(0,E.A)(()=>{b.current&&(t===1/0||G<t)&&(b.current.visible=!1,F(),b.current.visible=!0,G++)}),d.createElement("group",g,d.createElement("primitive",{object:R}),d.createElement("group",{ref:b},i(T.texture)))}var S0=A(25108),AA=Object.defineProperty,pE=(i,t,r)=>t in i?AA(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,sa=(i,t,r)=>(pE(i,typeof t!="symbol"?t+"":t,r),r);class uE extends s.EventDispatcher{constructor(t){super(),sa(this,"object"),sa(this,"changeEvent",{type:"change"}),sa(this,"EPS",1e-6),sa(this,"enabled",!0),sa(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),sa(this,"screenOrientation",0),sa(this,"alphaOffset",0),sa(this,"onDeviceOrientationChangeEvent",r=>{this.deviceOrientation=r}),sa(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),sa(this,"zee",new s.Vector3(0,0,1)),sa(this,"euler",new s.Euler),sa(this,"q0",new s.Quaternion),sa(this,"q1",new s.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5))),sa(this,"setObjectQuaternion",(r,l,c,p,h)=>{this.euler.set(c,l,-p,"YXZ"),r.setFromEuler(this.euler),r.multiply(this.q1),r.multiply(this.q0.setFromAxisAngle(this.zee,-h))}),sa(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(r=>{r=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(r=>{S0.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",r)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),sa(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),sa(this,"lastQuaternion",new s.Quaternion),sa(this,"update",()=>{if(this.enabled===!1)return;const r=this.deviceOrientation;if(r){const l=r.alpha?s.MathUtils.degToRad(r.alpha)+this.alphaOffset:0,c=r.beta?s.MathUtils.degToRad(r.beta):0,p=r.gamma?s.MathUtils.degToRad(r.gamma):0,h=this.screenOrientation?s.MathUtils.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,l,c,p,h),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),sa(this,"dispose",()=>this.disconnect()),this.object=t,this.object.rotation.reorder("YXZ"),this.connect()}}const dE=d.forwardRef((i,t)=>{const R=i,{camera:r,onChange:l,makeDefault:c}=R,p=_n(R,["camera","onChange","makeDefault"]),h=(0,E.z)(F=>F.camera),g=(0,E.z)(F=>F.invalidate),v=(0,E.z)(F=>F.get),_=(0,E.z)(F=>F.set),b=r||h,[T]=d.useState(()=>new uE(b));return d.useEffect(()=>{const F=G=>{g(),l&&l(G)};return T==null||T.addEventListener==null||T.addEventListener("change",F),()=>T==null||T.removeEventListener==null?void 0:T.removeEventListener("change",F)},[l,T,g]),(0,E.A)(()=>T==null?void 0:T.update(),-1),d.useEffect(()=>{const F=T;return F==null||F.connect(),()=>F==null?void 0:F.dispose()},[T]),d.useEffect(()=>{if(c){const F=v().controls;return _({controls:T}),()=>_({controls:F})}},[c,T]),T?d.createElement("primitive",(0,w.Z)({ref:t,object:T},p)):null});var qv=Object.defineProperty,Zv=(i,t,r)=>t in i?qv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Oo=(i,t,r)=>(Zv(i,typeof t!="symbol"?t+"":t,r),r);function $v(i){i.preventDefault()}class hE extends s.EventDispatcher{constructor(t,r){super(),Oo(this,"object"),Oo(this,"domElement",null),Oo(this,"movementSpeed",1),Oo(this,"rollSpeed",.005),Oo(this,"dragToLook",!1),Oo(this,"autoForward",!1),Oo(this,"changeEvent",{type:"change"}),Oo(this,"EPS",1e-6),Oo(this,"tmpQuaternion",new s.Quaternion),Oo(this,"mouseStatus",0),Oo(this,"movementSpeedMultiplier",1),Oo(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),Oo(this,"moveVector",new s.Vector3(0,0,0)),Oo(this,"rotationVector",new s.Vector3(0,0,0)),Oo(this,"keydown",l=>{if(!l.altKey){switch(l.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),Oo(this,"keyup",l=>{switch(l.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),Oo(this,"pointerdown",l=>{if(this.dragToLook)this.mouseStatus++;else{switch(l.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),Oo(this,"pointermove",l=>{if(!this.dragToLook||this.mouseStatus>0){const c=this.getContainerDimensions(),p=c.size[0]/2,h=c.size[1]/2;this.moveState.yawLeft=-(l.pageX-c.offset[0]-p)/p,this.moveState.pitchDown=(l.pageY-c.offset[1]-h)/h,this.updateRotationVector()}}),Oo(this,"pointerup",l=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(l.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),Oo(this,"lastQuaternion",new s.Quaternion),Oo(this,"lastPosition",new s.Vector3),Oo(this,"update",l=>{const c=l*this.movementSpeed,p=l*this.rollSpeed;this.object.translateX(this.moveVector.x*c),this.object.translateY(this.moveVector.y*c),this.object.translateZ(this.moveVector.z*c),this.tmpQuaternion.set(this.rotationVector.x*p,this.rotationVector.y*p,this.rotationVector.z*p,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),Oo(this,"updateMovementVector",()=>{const l=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-l+this.moveState.back}),Oo(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),Oo(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),Oo(this,"connect",l=>{this.domElement=l,l&&!(l instanceof Document)&&l.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",$v),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),Oo(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",$v),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=t,r!==void 0&&this.connect(r),this.updateMovementVector(),this.updateRotationVector()}}const e2=d.forwardRef((l,r)=>{var c=l,{domElement:i}=c,t=_n(c,["domElement"]);const O=t,{onChange:p,makeDefault:h}=O,g=_n(O,["onChange","makeDefault"]),v=(0,E.z)(k=>k.invalidate),_=(0,E.z)(k=>k.camera),b=(0,E.z)(k=>k.gl),T=(0,E.z)(k=>k.events),R=(0,E.z)(k=>k.get),F=(0,E.z)(k=>k.set),G=i||T.connected||b.domElement,L=d.useMemo(()=>new hE(_),[_]);return d.useEffect(()=>(L.connect(G),()=>void L.dispose()),[G,L,v]),d.useEffect(()=>{const k=P=>{v(),p&&p(P)};return L.addEventListener==null||L.addEventListener("change",k),()=>L.removeEventListener==null?void 0:L.removeEventListener("change",k)},[p,v]),d.useEffect(()=>{if(h){const k=R().controls;return F({controls:L}),()=>F({controls:k})}},[h,L]),(0,E.A)((k,P)=>L.update(P)),d.createElement("primitive",(0,w.Z)({ref:r,object:L,args:[_,G]},g))});var Rh=A(25108),t2=Object.defineProperty,fE=(i,t,r)=>t in i?t2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ci=(i,t,r)=>(fE(i,typeof t!="symbol"?t+"":t,r),r);const bs=(i,t)=>(i%t+t)%t;class n2 extends s.EventDispatcher{constructor(t,r){super(),ci(this,"object"),ci(this,"domElement"),ci(this,"enabled",!0),ci(this,"target",new s.Vector3),ci(this,"minDistance",0),ci(this,"maxDistance",1/0),ci(this,"minZoom",0),ci(this,"maxZoom",1/0),ci(this,"minPolarAngle",0),ci(this,"maxPolarAngle",Math.PI),ci(this,"minAzimuthAngle",-1/0),ci(this,"maxAzimuthAngle",1/0),ci(this,"enableDamping",!1),ci(this,"dampingFactor",.05),ci(this,"enableZoom",!0),ci(this,"zoomSpeed",1),ci(this,"enableRotate",!0),ci(this,"rotateSpeed",1),ci(this,"enablePan",!0),ci(this,"panSpeed",1),ci(this,"screenSpacePanning",!0),ci(this,"keyPanSpeed",7),ci(this,"autoRotate",!1),ci(this,"autoRotateSpeed",2),ci(this,"reverseOrbit",!1),ci(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ci(this,"mouseButtons",{LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN}),ci(this,"touches",{ONE:s.TOUCH.ROTATE,TWO:s.TOUCH.DOLLY_PAN}),ci(this,"target0"),ci(this,"position0"),ci(this,"zoom0"),ci(this,"_domElementKeyEvents",null),ci(this,"getPolarAngle"),ci(this,"getAzimuthalAngle"),ci(this,"setPolarAngle"),ci(this,"setAzimuthalAngle"),ci(this,"getDistance"),ci(this,"listenToKeyEvents"),ci(this,"saveState"),ci(this,"reset"),ci(this,"update"),ci(this,"connect"),ci(this,"dispose"),this.object=t,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>b.phi,this.getAzimuthalAngle=()=>b.theta,this.setPolarAngle=ut=>{let vn=bs(ut,2*Math.PI),On=b.phi;On<0&&(On+=2*Math.PI),vn<0&&(vn+=2*Math.PI);let or=Math.abs(vn-On);2*Math.PI-or<or&&(vn<On?vn+=2*Math.PI:On+=2*Math.PI),T.phi=vn-On,l.update()},this.setAzimuthalAngle=ut=>{let vn=bs(ut,2*Math.PI),On=b.theta;On<0&&(On+=2*Math.PI),vn<0&&(vn+=2*Math.PI);let or=Math.abs(vn-On);2*Math.PI-or<or&&(vn<On?vn+=2*Math.PI:On+=2*Math.PI),T.theta=vn-On,l.update()},this.getDistance=()=>l.object.position.distanceTo(l.target),this.listenToKeyEvents=ut=>{ut.addEventListener("keydown",_r),this._domElementKeyEvents=ut},this.saveState=()=>{l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=()=>{l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),v=g.NONE},this.update=(()=>{const ut=new s.Vector3,vn=new s.Quaternion().setFromUnitVectors(t.up,new s.Vector3(0,1,0)),On=vn.clone().invert(),or=new s.Vector3,Qr=new s.Quaternion,ri=2*Math.PI;return function(){const si=l.object.position;ut.copy(si).sub(l.target),ut.applyQuaternion(vn),b.setFromVector3(ut),l.autoRotate&&v===g.NONE&&le(ce()),l.enableDamping?(b.theta+=T.theta*l.dampingFactor,b.phi+=T.phi*l.dampingFactor):(b.theta+=T.theta,b.phi+=T.phi);let bn=l.minAzimuthAngle,qi=l.maxAzimuthAngle;return isFinite(bn)&&isFinite(qi)&&(bn<-Math.PI?bn+=ri:bn>Math.PI&&(bn-=ri),qi<-Math.PI?qi+=ri:qi>Math.PI&&(qi-=ri),bn<=qi?b.theta=Math.max(bn,Math.min(qi,b.theta)):b.theta=b.theta>(bn+qi)/2?Math.max(bn,b.theta):Math.min(qi,b.theta)),b.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=R,b.radius=Math.max(l.minDistance,Math.min(l.maxDistance,b.radius)),l.enableDamping===!0?l.target.addScaledVector(F,l.dampingFactor):l.target.add(F),ut.setFromSpherical(b),ut.applyQuaternion(On),si.copy(l.target).add(ut),l.object.lookAt(l.target),l.enableDamping===!0?(T.theta*=1-l.dampingFactor,T.phi*=1-l.dampingFactor,F.multiplyScalar(1-l.dampingFactor)):(T.set(0,0,0),F.set(0,0,0)),R=1,G||or.distanceToSquared(l.object.position)>_||8*(1-Qr.dot(l.object.quaternion))>_?(l.dispatchEvent(c),or.copy(l.object.position),Qr.copy(l.object.quaternion),G=!1,!0):!1}})(),this.connect=ut=>{ut===document&&Rh.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),l.domElement=ut,l.domElement.style.touchAction="none",l.domElement.addEventListener("contextmenu",gi),l.domElement.addEventListener("pointerdown",Ne),l.domElement.addEventListener("pointercancel",Sn),l.domElement.addEventListener("wheel",ar)},this.dispose=()=>{var ut,vn,On,or,Qr,ri;(ut=l.domElement)==null||ut.removeEventListener("contextmenu",gi),(vn=l.domElement)==null||vn.removeEventListener("pointerdown",Ne),(On=l.domElement)==null||On.removeEventListener("pointercancel",Sn),(or=l.domElement)==null||or.removeEventListener("wheel",ar),(Qr=l.domElement)==null||Qr.ownerDocument.removeEventListener("pointermove",It),(ri=l.domElement)==null||ri.ownerDocument.removeEventListener("pointerup",mn),l._domElementKeyEvents!==null&&l._domElementKeyEvents.removeEventListener("keydown",_r)};const l=this,c={type:"change"},p={type:"start"},h={type:"end"},g={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let v=g.NONE;const _=1e-6,b=new s.Spherical,T=new s.Spherical;let R=1;const F=new s.Vector3;let G=!1;const L=new s.Vector2,O=new s.Vector2,k=new s.Vector2,P=new s.Vector2,z=new s.Vector2,j=new s.Vector2,Q=new s.Vector2,W=new s.Vector2,Y=new s.Vector2,K=[],se={};function ce(){return 2*Math.PI/60/60*l.autoRotateSpeed}function ge(){return Math.pow(.95,l.zoomSpeed)}function le(ut){l.reverseOrbit?T.theta+=ut:T.theta-=ut}function xe(ut){l.reverseOrbit?T.phi+=ut:T.phi-=ut}const me=(()=>{const ut=new s.Vector3;return function(On,or){ut.setFromMatrixColumn(or,0),ut.multiplyScalar(-On),F.add(ut)}})(),Be=(()=>{const ut=new s.Vector3;return function(On,or){l.screenSpacePanning===!0?ut.setFromMatrixColumn(or,1):(ut.setFromMatrixColumn(or,0),ut.crossVectors(l.object.up,ut)),ut.multiplyScalar(On),F.add(ut)}})(),ke=(()=>{const ut=new s.Vector3;return function(On,or){const Qr=l.domElement;if(Qr&&l.object instanceof s.PerspectiveCamera&&l.object.isPerspectiveCamera){const ri=l.object.position;ut.copy(ri).sub(l.target);let ui=ut.length();ui*=Math.tan(l.object.fov/2*Math.PI/180),me(2*On*ui/Qr.clientHeight,l.object.matrix),Be(2*or*ui/Qr.clientHeight,l.object.matrix)}else Qr&&l.object instanceof s.OrthographicCamera&&l.object.isOrthographicCamera?(me(On*(l.object.right-l.object.left)/l.object.zoom/Qr.clientWidth,l.object.matrix),Be(or*(l.object.top-l.object.bottom)/l.object.zoom/Qr.clientHeight,l.object.matrix)):(Rh.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}})();function Re(ut){l.object instanceof s.PerspectiveCamera&&l.object.isPerspectiveCamera?R/=ut:l.object instanceof s.OrthographicCamera&&l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*ut)),l.object.updateProjectionMatrix(),G=!0):(Rh.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function ze(ut){l.object instanceof s.PerspectiveCamera&&l.object.isPerspectiveCamera?R*=ut:l.object instanceof s.OrthographicCamera&&l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/ut)),l.object.updateProjectionMatrix(),G=!0):(Rh.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function Pe(ut){L.set(ut.clientX,ut.clientY)}function Ye(ut){Q.set(ut.clientX,ut.clientY)}function Ce(ut){P.set(ut.clientX,ut.clientY)}function Ee(ut){O.set(ut.clientX,ut.clientY),k.subVectors(O,L).multiplyScalar(l.rotateSpeed);const vn=l.domElement;vn&&(le(2*Math.PI*k.x/vn.clientHeight),xe(2*Math.PI*k.y/vn.clientHeight)),L.copy(O),l.update()}function _e(ut){W.set(ut.clientX,ut.clientY),Y.subVectors(W,Q),Y.y>0?Re(ge()):Y.y<0&&ze(ge()),Q.copy(W),l.update()}function oe(ut){z.set(ut.clientX,ut.clientY),j.subVectors(z,P).multiplyScalar(l.panSpeed),ke(j.x,j.y),P.copy(z),l.update()}function Ae(ut){ut.deltaY<0?ze(ge()):ut.deltaY>0&&Re(ge()),l.update()}function Te(ut){let vn=!1;switch(ut.code){case l.keys.UP:ke(0,l.keyPanSpeed),vn=!0;break;case l.keys.BOTTOM:ke(0,-l.keyPanSpeed),vn=!0;break;case l.keys.LEFT:ke(l.keyPanSpeed,0),vn=!0;break;case l.keys.RIGHT:ke(-l.keyPanSpeed,0),vn=!0;break}vn&&(ut.preventDefault(),l.update())}function ve(){if(K.length==1)L.set(K[0].pageX,K[0].pageY);else{const ut=.5*(K[0].pageX+K[1].pageX),vn=.5*(K[0].pageY+K[1].pageY);L.set(ut,vn)}}function Ge(){if(K.length==1)P.set(K[0].pageX,K[0].pageY);else{const ut=.5*(K[0].pageX+K[1].pageX),vn=.5*(K[0].pageY+K[1].pageY);P.set(ut,vn)}}function bt(){const ut=K[0].pageX-K[1].pageX,vn=K[0].pageY-K[1].pageY,On=Math.sqrt(ut*ut+vn*vn);Q.set(0,On)}function mt(){l.enableZoom&&bt(),l.enablePan&&Ge()}function gt(){l.enableZoom&&bt(),l.enableRotate&&ve()}function rt(ut){if(K.length==1)O.set(ut.pageX,ut.pageY);else{const On=fo(ut),or=.5*(ut.pageX+On.x),Qr=.5*(ut.pageY+On.y);O.set(or,Qr)}k.subVectors(O,L).multiplyScalar(l.rotateSpeed);const vn=l.domElement;vn&&(le(2*Math.PI*k.x/vn.clientHeight),xe(2*Math.PI*k.y/vn.clientHeight)),L.copy(O)}function Wt(ut){if(K.length==1)z.set(ut.pageX,ut.pageY);else{const vn=fo(ut),On=.5*(ut.pageX+vn.x),or=.5*(ut.pageY+vn.y);z.set(On,or)}j.subVectors(z,P).multiplyScalar(l.panSpeed),ke(j.x,j.y),P.copy(z)}function kt(ut){const vn=fo(ut),On=ut.pageX-vn.x,or=ut.pageY-vn.y,Qr=Math.sqrt(On*On+or*or);W.set(0,Qr),Y.set(0,Math.pow(W.y/Q.y,l.zoomSpeed)),Re(Y.y),Q.copy(W)}function Bt(ut){l.enableZoom&&kt(ut),l.enablePan&&Wt(ut)}function qe(ut){l.enableZoom&&kt(ut),l.enableRotate&&rt(ut)}function Ne(ut){var vn,On;l.enabled!==!1&&(K.length===0&&((vn=l.domElement)==null||vn.ownerDocument.addEventListener("pointermove",It),(On=l.domElement)==null||On.ownerDocument.addEventListener("pointerup",mn)),br(ut),ut.pointerType==="touch"?ur(ut):zt(ut))}function It(ut){l.enabled!==!1&&(ut.pointerType==="touch"?_i(ut):Vn(ut))}function mn(ut){var vn,On,or;Pr(ut),K.length===0&&((vn=l.domElement)==null||vn.releasePointerCapture(ut.pointerId),(On=l.domElement)==null||On.ownerDocument.removeEventListener("pointermove",It),(or=l.domElement)==null||or.ownerDocument.removeEventListener("pointerup",mn)),l.dispatchEvent(h),v=g.NONE}function Sn(ut){Pr(ut)}function zt(ut){let vn;switch(ut.button){case 0:vn=l.mouseButtons.LEFT;break;case 1:vn=l.mouseButtons.MIDDLE;break;case 2:vn=l.mouseButtons.RIGHT;break;default:vn=-1}switch(vn){case s.MOUSE.DOLLY:if(l.enableZoom===!1)return;Ye(ut),v=g.DOLLY;break;case s.MOUSE.ROTATE:if(ut.ctrlKey||ut.metaKey||ut.shiftKey){if(l.enablePan===!1)return;Ce(ut),v=g.PAN}else{if(l.enableRotate===!1)return;Pe(ut),v=g.ROTATE}break;case s.MOUSE.PAN:if(ut.ctrlKey||ut.metaKey||ut.shiftKey){if(l.enableRotate===!1)return;Pe(ut),v=g.ROTATE}else{if(l.enablePan===!1)return;Ce(ut),v=g.PAN}break;default:v=g.NONE}v!==g.NONE&&l.dispatchEvent(p)}function Vn(ut){if(l.enabled!==!1)switch(v){case g.ROTATE:if(l.enableRotate===!1)return;Ee(ut);break;case g.DOLLY:if(l.enableZoom===!1)return;_e(ut);break;case g.PAN:if(l.enablePan===!1)return;oe(ut);break}}function ar(ut){l.enabled===!1||l.enableZoom===!1||v!==g.NONE&&v!==g.ROTATE||(ut.preventDefault(),l.dispatchEvent(p),Ae(ut),l.dispatchEvent(h))}function _r(ut){l.enabled===!1||l.enablePan===!1||Te(ut)}function ur(ut){switch(Oi(ut),K.length){case 1:switch(l.touches.ONE){case s.TOUCH.ROTATE:if(l.enableRotate===!1)return;ve(),v=g.TOUCH_ROTATE;break;case s.TOUCH.PAN:if(l.enablePan===!1)return;Ge(),v=g.TOUCH_PAN;break;default:v=g.NONE}break;case 2:switch(l.touches.TWO){case s.TOUCH.DOLLY_PAN:if(l.enableZoom===!1&&l.enablePan===!1)return;mt(),v=g.TOUCH_DOLLY_PAN;break;case s.TOUCH.DOLLY_ROTATE:if(l.enableZoom===!1&&l.enableRotate===!1)return;gt(),v=g.TOUCH_DOLLY_ROTATE;break;default:v=g.NONE}break;default:v=g.NONE}v!==g.NONE&&l.dispatchEvent(p)}function _i(ut){switch(Oi(ut),v){case g.TOUCH_ROTATE:if(l.enableRotate===!1)return;rt(ut),l.update();break;case g.TOUCH_PAN:if(l.enablePan===!1)return;Wt(ut),l.update();break;case g.TOUCH_DOLLY_PAN:if(l.enableZoom===!1&&l.enablePan===!1)return;Bt(ut),l.update();break;case g.TOUCH_DOLLY_ROTATE:if(l.enableZoom===!1&&l.enableRotate===!1)return;qe(ut),l.update();break;default:v=g.NONE}}function gi(ut){l.enabled!==!1&&ut.preventDefault()}function br(ut){K.push(ut)}function Pr(ut){delete se[ut.pointerId];for(let vn=0;vn<K.length;vn++)if(K[vn].pointerId==ut.pointerId){K.splice(vn,1);return}}function Oi(ut){let vn=se[ut.pointerId];vn===void 0&&(vn=new s.Vector2,se[ut.pointerId]=vn),vn.set(ut.pageX,ut.pageY)}function fo(ut){const vn=ut.pointerId===K[0].pointerId?K[1]:K[0];return se[vn.pointerId]}r!==void 0&&this.connect(r),this.update()}}class Ws extends n2{constructor(t,r){super(t,r),this.screenSpacePanning=!1,this.mouseButtons.LEFT=s.MOUSE.PAN,this.mouseButtons.RIGHT=s.MOUSE.ROTATE,this.touches.ONE=s.TOUCH.PAN,this.touches.TWO=s.TOUCH.DOLLY_ROTATE}}const w0=d.forwardRef((i={enableDamping:!0},t)=>{const P=i,{domElement:r,camera:l,makeDefault:c,onChange:p,onStart:h,onEnd:g}=P,v=_n(P,["domElement","camera","makeDefault","onChange","onStart","onEnd"]),_=(0,E.z)(z=>z.invalidate),b=(0,E.z)(z=>z.camera),T=(0,E.z)(z=>z.gl),R=(0,E.z)(z=>z.events),F=(0,E.z)(z=>z.set),G=(0,E.z)(z=>z.get),L=r||R.connected||T.domElement,O=l||b,k=d.useMemo(()=>new Ws(O),[O]);return d.useEffect(()=>{k.connect(L);const z=j=>{_(),p&&p(j)};return k.addEventListener("change",z),h&&k.addEventListener("start",h),g&&k.addEventListener("end",g),()=>{k.dispose(),k.removeEventListener("change",z),h&&k.removeEventListener("start",h),g&&k.removeEventListener("end",g)}},[p,h,g,k,_,L]),d.useEffect(()=>{if(c){const z=G().controls;return F({controls:k}),()=>F({controls:z})}},[c,k]),(0,E.A)(()=>k.update(),-1),d.createElement("primitive",(0,w.Z)({ref:t,object:k,enableDamping:!0},v))}),gE=d.forwardRef((T,b)=>{var R=T,{makeDefault:i,camera:t,regress:r,domElement:l,enableDamping:c=!0,keyEvents:p=!1,onChange:h,onStart:g,onEnd:v}=R,_=_n(R,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);const F=(0,E.z)(K=>K.invalidate),G=(0,E.z)(K=>K.camera),L=(0,E.z)(K=>K.gl),O=(0,E.z)(K=>K.events),k=(0,E.z)(K=>K.setEvents),P=(0,E.z)(K=>K.set),z=(0,E.z)(K=>K.get),j=(0,E.z)(K=>K.performance),Q=t||G,W=l||O.connected||L.domElement,Y=d.useMemo(()=>new n2(Q),[Q]);return(0,E.A)(()=>{Y.enabled&&Y.update()},-1),d.useEffect(()=>(p&&Y.connect(p===!0?W:p),Y.connect(W),()=>void Y.dispose()),[p,W,r,Y,F]),d.useEffect(()=>{const K=ge=>{F(),r&&j.regress(),h&&h(ge)},se=ge=>{g&&g(ge)},ce=ge=>{v&&v(ge)};return Y.addEventListener("change",K),Y.addEventListener("start",se),Y.addEventListener("end",ce),()=>{Y.removeEventListener("start",se),Y.removeEventListener("end",ce),Y.removeEventListener("change",K)}},[h,g,v,Y,F,k]),d.useEffect(()=>{if(i){const K=z().controls;return P({controls:Y}),()=>P({controls:K})}},[i,Y]),d.createElement("primitive",(0,w.Z)({ref:b,object:Y,enableDamping:c},_))});var T0=A(25108),mE=Object.defineProperty,r2=(i,t,r)=>t in i?mE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Yn=(i,t,r)=>(r2(i,typeof t!="symbol"?t+"":t,r),r);class yA extends s.EventDispatcher{constructor(t,r){super(),Yn(this,"enabled",!0),Yn(this,"screen",{left:0,top:0,width:0,height:0}),Yn(this,"rotateSpeed",1),Yn(this,"zoomSpeed",1.2),Yn(this,"panSpeed",.3),Yn(this,"noRotate",!1),Yn(this,"noZoom",!1),Yn(this,"noPan",!1),Yn(this,"staticMoving",!1),Yn(this,"dynamicDampingFactor",.2),Yn(this,"minDistance",0),Yn(this,"maxDistance",1/0),Yn(this,"keys",["KeyA","KeyS","KeyD"]),Yn(this,"mouseButtons",{LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN}),Yn(this,"object"),Yn(this,"domElement"),Yn(this,"cursorZoom",!1),Yn(this,"target",new s.Vector3),Yn(this,"mousePosition",new s.Vector2),Yn(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),Yn(this,"EPS",1e-6),Yn(this,"lastZoom",1),Yn(this,"lastPosition",new s.Vector3),Yn(this,"cursorVector",new s.Vector3),Yn(this,"targetVector",new s.Vector3),Yn(this,"_state",this.STATE.NONE),Yn(this,"_keyState",this.STATE.NONE),Yn(this,"_eye",new s.Vector3),Yn(this,"_movePrev",new s.Vector2),Yn(this,"_moveCurr",new s.Vector2),Yn(this,"_lastAxis",new s.Vector3),Yn(this,"_lastAngle",0),Yn(this,"_zoomStart",new s.Vector2),Yn(this,"_zoomEnd",new s.Vector2),Yn(this,"_touchZoomDistanceStart",0),Yn(this,"_touchZoomDistanceEnd",0),Yn(this,"_panStart",new s.Vector2),Yn(this,"_panEnd",new s.Vector2),Yn(this,"target0"),Yn(this,"position0"),Yn(this,"up0"),Yn(this,"zoom0"),Yn(this,"changeEvent",{type:"change"}),Yn(this,"startEvent",{type:"start"}),Yn(this,"endEvent",{type:"end"}),Yn(this,"onScreenVector",new s.Vector2),Yn(this,"getMouseOnScreen",(l,c)=>(this.onScreenVector.set((l-this.screen.left)/this.screen.width,(c-this.screen.top)/this.screen.height),this.onScreenVector)),Yn(this,"onCircleVector",new s.Vector2),Yn(this,"getMouseOnCircle",(l,c)=>(this.onCircleVector.set((l-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-c))/this.screen.width),this.onCircleVector)),Yn(this,"axis",new s.Vector3),Yn(this,"quaternion",new s.Quaternion),Yn(this,"eyeDirection",new s.Vector3),Yn(this,"objectUpDirection",new s.Vector3),Yn(this,"objectSidewaysDirection",new s.Vector3),Yn(this,"moveDirection",new s.Vector3),Yn(this,"angle",0),Yn(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),Yn(this,"zoomCamera",()=>{let l;if(this._state===this.STATE.TOUCH_ZOOM_PAN)l=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(l):this.object.isOrthographicCamera?(this.object.zoom/=l,this.object.updateProjectionMatrix()):T0.warn("THREE.TrackballControls: Unsupported camera type");else{if(l=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(l-1)>this.EPS&&l>0&&(this.object.isPerspectiveCamera?(l>1&&this._eye.length()>=this.maxDistance-this.EPS&&(l=1),this._eye.multiplyScalar(l)):this.object.isOrthographicCamera?(l>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(l=1),this.object.zoom/=l):T0.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let c=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(c,this.target,l)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),Yn(this,"mouseChange",new s.Vector2),Yn(this,"objectUp",new s.Vector3),Yn(this,"pan",new s.Vector3),Yn(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const l=this.object,c=(l.right-l.left)/this.object.zoom,p=(l.top-l.bottom)/this.object.zoom;this.mouseChange.x*=c,this.mouseChange.y*=p}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),Yn(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),Yn(this,"handleResize",()=>{if(!this.domElement)return;const l=this.domElement.getBoundingClientRect(),c=this.domElement.ownerDocument.documentElement;this.screen.left=l.left+window.pageXOffset-c.clientLeft,this.screen.top=l.top+window.pageYOffset-c.clientTop,this.screen.width=l.width,this.screen.height=l.height}),Yn(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):T0.warn("THREE.TrackballControls: Unsupported camera type")}),Yn(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),Yn(this,"keydown",l=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(l.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:l.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:l.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),Yn(this,"onPointerDown",l=>{if(this.enabled!==!1)switch(l.pointerType){case"mouse":case"pen":this.onMouseDown(l);break}}),Yn(this,"onPointerMove",l=>{if(this.enabled!==!1)switch(l.pointerType){case"mouse":case"pen":this.onMouseMove(l);break}}),Yn(this,"onPointerUp",l=>{if(this.enabled!==!1)switch(l.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),Yn(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),Yn(this,"onMouseDown",l=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(l.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break;default:this._state=this.STATE.NONE}const c=this._keyState!==this.STATE.NONE?this._keyState:this._state;c===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(l.pageX,l.pageY)),this._movePrev.copy(this._moveCurr)):c===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(l.pageX,l.pageY)),this._zoomEnd.copy(this._zoomStart)):c===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(l.pageX,l.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),Yn(this,"onMouseMove",l=>{if(this.enabled===!1)return;const c=this._keyState!==this.STATE.NONE?this._keyState:this._state;c===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(l.pageX,l.pageY))):c===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(l.pageX,l.pageY)):c===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(l.pageX,l.pageY))}),Yn(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),Yn(this,"mousewheel",l=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(l.preventDefault(),l.deltaMode){case 2:this._zoomStart.y-=l.deltaY*.025;break;case 1:this._zoomStart.y-=l.deltaY*.01;break;default:this._zoomStart.y-=l.deltaY*25e-5;break}this.mousePosition.x=l.offsetX/this.screen.width*2-1,this.mousePosition.y=-(l.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),Yn(this,"touchstart",l=>{if(this.enabled!==!1){switch(l.preventDefault(),l.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(l.touches[0].pageX,l.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const c=l.touches[0].pageX-l.touches[1].pageX,p=l.touches[0].pageY-l.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(c*c+p*p);const h=(l.touches[0].pageX+l.touches[1].pageX)/2,g=(l.touches[0].pageY+l.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(h,g)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),Yn(this,"touchmove",l=>{if(this.enabled!==!1)switch(l.preventDefault(),l.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(l.touches[0].pageX,l.touches[0].pageY));break;default:const c=l.touches[0].pageX-l.touches[1].pageX,p=l.touches[0].pageY-l.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(c*c+p*p);const h=(l.touches[0].pageX+l.touches[1].pageX)/2,g=(l.touches[0].pageY+l.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(h,g));break}}),Yn(this,"touchend",l=>{if(this.enabled!==!1){switch(l.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(l.touches[0].pageX,l.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),Yn(this,"contextmenu",l=>{this.enabled!==!1&&l.preventDefault()}),Yn(this,"connect",l=>{l===document&&T0.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=l,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),Yn(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,r!==void 0&&this.connect(r),this.update()}}const AE=d.forwardRef((_,v)=>{var b=_,{makeDefault:i,camera:t,domElement:r,regress:l,onChange:c,onStart:p,onEnd:h}=b,g=_n(b,["makeDefault","camera","domElement","regress","onChange","onStart","onEnd"]);const{invalidate:T,camera:R,gl:F,events:G,set:L,get:O,performance:k,viewport:P}=(0,E.z)(),z=t||R,j=r||G.connected||F.domElement,Q=d.useMemo(()=>new yA(z),[z]);return(0,E.A)(()=>{Q.enabled&&Q.update()},-1),d.useEffect(()=>(Q.connect(j),()=>void Q.dispose()),[j,l,Q,T]),d.useEffect(()=>{const W=Y=>{T(),l&&k.regress(),c&&c(Y)};return Q.addEventListener("change",W),p&&Q.addEventListener("start",p),h&&Q.addEventListener("end",h),()=>{p&&Q.removeEventListener("start",p),h&&Q.removeEventListener("end",h),Q.removeEventListener("change",W)}},[c,p,h,Q,T]),d.useEffect(()=>{Q.handleResize()},[P]),d.useEffect(()=>{if(i){const W=O().controls;return L({controls:Q}),()=>L({controls:W})}},[i,Q]),d.createElement("primitive",(0,w.Z)({ref:v,object:Q},g))});var yE=A(25108),vE=Object.defineProperty,C=(i,t,r)=>t in i?vE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,e=(i,t,r)=>(C(i,typeof t!="symbol"?t+"":t,r),r);const o={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},f={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},y={x:0,y:0},M={camera:new s.Matrix4,gizmos:new s.Matrix4},B={type:"change"},I={type:"start"},D={type:"end"};class U extends s.EventDispatcher{constructor(t,r=null,l=null){super(),e(this,"camera"),e(this,"domElement"),e(this,"scene"),e(this,"mouseActions"),e(this,"_mouseOp"),e(this,"_v2_1"),e(this,"_v3_1"),e(this,"_v3_2"),e(this,"_m4_1"),e(this,"_m4_2"),e(this,"_quat"),e(this,"_translationMatrix"),e(this,"_rotationMatrix"),e(this,"_scaleMatrix"),e(this,"_rotationAxis"),e(this,"_cameraMatrixState"),e(this,"_cameraProjectionState"),e(this,"_fovState"),e(this,"_upState"),e(this,"_zoomState"),e(this,"_nearPos"),e(this,"_farPos"),e(this,"_gizmoMatrixState"),e(this,"_up0"),e(this,"_zoom0"),e(this,"_fov0"),e(this,"_initialNear"),e(this,"_nearPos0"),e(this,"_initialFar"),e(this,"_farPos0"),e(this,"_cameraMatrixState0"),e(this,"_gizmoMatrixState0"),e(this,"_button"),e(this,"_touchStart"),e(this,"_touchCurrent"),e(this,"_input"),e(this,"_switchSensibility"),e(this,"_startFingerDistance"),e(this,"_currentFingerDistance"),e(this,"_startFingerRotation"),e(this,"_currentFingerRotation"),e(this,"_devPxRatio"),e(this,"_downValid"),e(this,"_nclicks"),e(this,"_downEvents"),e(this,"_clickStart"),e(this,"_maxDownTime"),e(this,"_maxInterval"),e(this,"_posThreshold"),e(this,"_movementThreshold"),e(this,"_currentCursorPosition"),e(this,"_startCursorPosition"),e(this,"_grid"),e(this,"_gridPosition"),e(this,"_gizmos"),e(this,"_curvePts"),e(this,"_timeStart"),e(this,"_animationId"),e(this,"focusAnimationTime"),e(this,"_timePrev"),e(this,"_timeCurrent"),e(this,"_anglePrev"),e(this,"_angleCurrent"),e(this,"_cursorPosPrev"),e(this,"_cursorPosCurr"),e(this,"_wPrev"),e(this,"_wCurr"),e(this,"adjustNearFar"),e(this,"scaleFactor"),e(this,"dampingFactor"),e(this,"wMax"),e(this,"enableAnimations"),e(this,"enableGrid"),e(this,"cursorZoom"),e(this,"minFov"),e(this,"maxFov"),e(this,"enabled"),e(this,"enablePan"),e(this,"enableRotate"),e(this,"enableZoom"),e(this,"minDistance"),e(this,"maxDistance"),e(this,"minZoom"),e(this,"maxZoom"),e(this,"target"),e(this,"_currentTarget"),e(this,"_tbRadius"),e(this,"_state"),e(this,"onWindowResize",()=>{const c=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const _=this.calculateTbRadius(this.camera);_!==void 0&&(this._tbRadius=_)}const p=this._tbRadius/c,g=new s.EllipseCurve(0,0,p,p).getPoints(this._curvePts),v=new s.BufferGeometry().setFromPoints(g);for(const _ in this._gizmos.children){const b=this._gizmos.children[_];b.geometry=v}this.dispatchEvent(B)}),e(this,"onContextMenu",c=>{if(this.enabled){for(let p=0;p<this.mouseActions.length;p++)if(this.mouseActions[p].mouse==2){c.preventDefault();break}}}),e(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=f.NONE}),e(this,"onPointerDown",c=>{if(c.button==0&&c.isPrimary?(this._downValid=!0,this._downEvents.push(c)):this._downValid=!1,c.pointerType=="touch"&&this._input!=f.CURSOR)switch(this._touchStart.push(c),this._touchCurrent.push(c),this._input){case f.NONE:this._input=f.ONE_FINGER,this.onSinglePanStart(c,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case f.ONE_FINGER:case f.ONE_FINGER_SWITCHED:this._input=f.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case f.TWO_FINGER:this._input=f.MULT_FINGER,this.onTriplePanStart();break}else if(c.pointerType!="touch"&&this._input==f.NONE){let p=null;c.ctrlKey||c.metaKey?p="CTRL":c.shiftKey&&(p="SHIFT"),this._mouseOp=this.getOpFromAction(c.button,p),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=f.CURSOR,this._button=c.button,this.onSinglePanStart(c,this._mouseOp))}}),e(this,"onPointerMove",c=>{if(c.pointerType=="touch"&&this._input!=f.CURSOR)switch(this._input){case f.ONE_FINGER:this.updateTouchEvent(c),this.onSinglePanMove(c,o.ROTATE);break;case f.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],c)*this._devPxRatio>=this._switchSensibility){this._input=f.ONE_FINGER,this.updateTouchEvent(c),this.onSinglePanStart(c,"ROTATE");break}break;case f.TWO_FINGER:this.updateTouchEvent(c),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case f.MULT_FINGER:this.updateTouchEvent(c),this.onTriplePanMove();break}else if(c.pointerType!="touch"&&this._input==f.CURSOR){let p=null;c.ctrlKey||c.metaKey?p="CTRL":c.shiftKey&&(p="SHIFT");const h=this.getOpStateFromAction(this._button,p);h&&this.onSinglePanMove(c,h)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],c)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),e(this,"onPointerUp",c=>{if(c.pointerType=="touch"&&this._input!=f.CURSOR){const p=this._touchCurrent.length;for(let h=0;h<p;h++)if(this._touchCurrent[h].pointerId==c.pointerId){this._touchCurrent.splice(h,1),this._touchStart.splice(h,1);break}switch(this._input){case f.ONE_FINGER:case f.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=f.NONE,this.onSinglePanEnd();break;case f.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=f.ONE_FINGER_SWITCHED;break;case f.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=f.NONE,this.onTriplePanEnd());break}}else c.pointerType!="touch"&&this._input==f.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=f.NONE,this.onSinglePanEnd(),this._button=-1);if(c.isPrimary)if(this._downValid)if(c.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const h=c.timeStamp-this._clickStart,g=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;h<=this._maxInterval&&g<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(c)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),e(this,"onWheel",c=>{var p,h;if(this.enabled&&this.enableZoom&&this.domElement){let g=null;c.ctrlKey||c.metaKey?g="CTRL":c.shiftKey&&(g="SHIFT");const v=this.getOpFromAction("WHEEL",g);if(v){c.preventDefault(),this.dispatchEvent(I);const _=125;let b=c.deltaY/_,T=1;switch(b>0?T=1/this.scaleFactor:b<0&&(T=this.scaleFactor),v){case"ZOOM":if(this.updateTbState(o.SCALE,!0),b>0?T=1/Math.pow(this.scaleFactor,b):b<0&&(T=Math.pow(this.scaleFactor,-b)),this.cursorZoom&&this.enablePan){let R;this.camera instanceof s.OrthographicCamera&&(R=(p=this.unprojectOnTbPlane(this.camera,c.clientX,c.clientY,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof s.PerspectiveCamera&&(R=(h=this.unprojectOnTbPlane(this.camera,c.clientX,c.clientY,this.domElement))==null?void 0:h.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),R!==void 0&&this.applyTransformMatrix(this.applyScale(T,R))}else this.applyTransformMatrix(this.applyScale(T,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(o.IDLE,!1),this.dispatchEvent(B),this.dispatchEvent(D);break;case"FOV":if(this.camera instanceof s.PerspectiveCamera){this.updateTbState(o.FOV,!0),c.deltaX!=0&&(b=c.deltaX/_,T=1,b>0?T=1/Math.pow(this.scaleFactor,b):b<0&&(T=Math.pow(this.scaleFactor,-b))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const R=this._v3_1.distanceTo(this._gizmos.position);let F=R/T;F=s.MathUtils.clamp(F,this.minDistance,this.maxDistance);const G=R*Math.tan(s.MathUtils.DEG2RAD*this.camera.fov*.5);let L=s.MathUtils.RAD2DEG*(Math.atan(G/F)*2);L>this.maxFov?L=this.maxFov:L<this.minFov&&(L=this.minFov);const O=G/Math.tan(s.MathUtils.DEG2RAD*(L/2));T=R/O,this.setFov(L),this.applyTransformMatrix(this.applyScale(T,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(o.IDLE,!1),this.dispatchEvent(B),this.dispatchEvent(D);break}}}}),e(this,"onSinglePanStart",(c,p)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(I),this.setCenter(c.clientX,c.clientY),p){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(B)),this.camera){this.updateTbState(o.PAN,!0);const h=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement);h!==void 0&&this._startCursorPosition.copy(h),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(B))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(o.ROTATE,!0);const h=this.unprojectOnTbSurface(this.camera,y.x,y.y,this.domElement,this._tbRadius);h!==void 0&&this._startCursorPosition.copy(h),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(B);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof s.PerspectiveCamera&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(B)),this.updateTbState(o.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(B)),this.updateTbState(o.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),e(this,"onSinglePanMove",(c,p)=>{if(this.enabled&&this.domElement){const h=p!=this._state;switch(this.setCenter(c.clientX,c.clientY),p){case o.PAN:if(this.enablePan&&this.camera)if(h){this.dispatchEvent(D),this.dispatchEvent(I),this.updateTbState(p,!0);const g=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement);g!==void 0&&this._startCursorPosition.copy(g),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const g=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement);g!==void 0&&this._currentCursorPosition.copy(g),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case o.ROTATE:if(this.enableRotate&&this.camera)if(h){this.dispatchEvent(D),this.dispatchEvent(I),this.updateTbState(p,!0);const g=this.unprojectOnTbSurface(this.camera,y.x,y.y,this.domElement,this._tbRadius);g!==void 0&&this._startCursorPosition.copy(g),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const g=this.unprojectOnTbSurface(this.camera,y.x,y.y,this.domElement,this._tbRadius);g!==void 0&&this._currentCursorPosition.copy(g);const v=this._startCursorPosition.distanceTo(this._currentCursorPosition),_=this._startCursorPosition.angleTo(this._currentCursorPosition),b=Math.max(v/this._tbRadius,_);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),b)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=b,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case o.SCALE:if(this.enableZoom)if(h)this.dispatchEvent(D),this.dispatchEvent(I),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5);const v=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;v<0?_=1/Math.pow(this.scaleFactor,-v*8):v>0&&(_=Math.pow(this.scaleFactor,v*8)),this.applyTransformMatrix(this.applyScale(_,this._gizmos.position))}break;case o.FOV:if(this.enableZoom&&this.camera instanceof s.PerspectiveCamera)if(h)this.dispatchEvent(D),this.dispatchEvent(I),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5);const v=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;v<0?_=1/Math.pow(this.scaleFactor,-v*8):v>0&&(_=Math.pow(this.scaleFactor,v*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const b=this._v3_1.distanceTo(this._gizmos.position);let T=b/_;T=s.MathUtils.clamp(T,this.minDistance,this.maxDistance);const R=b*Math.tan(s.MathUtils.DEG2RAD*this._fovState*.5);let F=s.MathUtils.RAD2DEG*(Math.atan(R/T)*2);F=s.MathUtils.clamp(F,this.minFov,this.maxFov);const G=R/Math.tan(s.MathUtils.DEG2RAD*(F/2));_=b/G,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(_,this._v3_2,!1));const L=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(G/b);this._m4_1.makeTranslation(L.x,L.y,L.z)}break}this.dispatchEvent(B)}}),e(this,"onSinglePanEnd",()=>{if(this._state==o.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const p=Math.abs((this._wPrev+this._wCurr)/2),h=this;this._animationId=window.requestAnimationFrame(function(g){h.updateTbState(o.ANIMATION_ROTATE,!0);const v=h.calculateRotationAxis(h._cursorPosPrev,h._cursorPosCurr);h.onRotationAnim(g,v,Math.min(p,h.wMax))})}else this.updateTbState(o.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(B);else this.updateTbState(o.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(B)}else(this._state==o.PAN||this._state==o.IDLE)&&(this.updateTbState(o.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(B));this.dispatchEvent(D)}),e(this,"onDoubleTap",c=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(I),this.setCenter(c.clientX,c.clientY);const p=this.unprojectOnObj(this.getCursorNDC(y.x,y.y,this.domElement),this.camera);if(p&&this.enableAnimations){const h=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(g){h.updateTbState(o.ANIMATION_FOCUS,!0),h.onFocusAnim(g,p,h._cameraMatrixState,h._gizmoMatrixState)})}else p&&!this.enableAnimations&&(this.updateTbState(o.FOCUS,!0),this.focus(p,this.scaleFactor),this.updateTbState(o.IDLE,!1),this.dispatchEvent(B))}this.dispatchEvent(D)}),e(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(I),this.updateTbState(o.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const c=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement,!0);c!==void 0&&this._startCursorPosition.copy(c),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),e(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=o.PAN&&(this.updateTbState(o.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const c=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement,!0);c!==void 0&&this._currentCursorPosition.copy(c),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(B)}}),e(this,"onDoublePanEnd",()=>{this.updateTbState(o.IDLE,!1),this.dispatchEvent(D)}),e(this,"onRotateStart",()=>{var c;this.enabled&&this.enableRotate&&(this.dispatchEvent(I),this.updateTbState(o.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(c=this.camera)==null||c.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),e(this,"onRotateMove",()=>{var c;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let p;this._state!=o.ZROTATE&&(this.updateTbState(o.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),p=(c=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement))==null?void 0:c.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):p=new s.Vector3().setFromMatrixPosition(this._gizmoMatrixState);const h=s.MathUtils.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);p!==void 0&&this.applyTransformMatrix(this.zRotate(p,h)),this.dispatchEvent(B)}}),e(this,"onRotateEnd",()=>{this.updateTbState(o.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(D)}),e(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(I),this.updateTbState(o.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),e(this,"onPinchMove",()=>{var c,p;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const h=12;this._state!=o.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(o.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),h*this._devPxRatio);const g=this._currentFingerDistance/this._startFingerDistance;let v;this.enablePan?this.camera instanceof s.OrthographicCamera?v=(c=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement))==null?void 0:c.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof s.PerspectiveCamera&&(v=(p=this.unprojectOnTbPlane(this.camera,y.x,y.y,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):v=this._gizmos.position,v!==void 0&&this.applyTransformMatrix(this.applyScale(g,v)),this.dispatchEvent(B)}}),e(this,"onPinchEnd",()=>{this.updateTbState(o.IDLE,!1),this.dispatchEvent(D)}),e(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(I),this.updateTbState(o.SCALE,!0);let c=0,p=0;const h=this._touchCurrent.length;for(let g=0;g<h;g++)c+=this._touchCurrent[g].clientX,p+=this._touchCurrent[g].clientY;this.setCenter(c/h,p/h),this._startCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),e(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let c=0,p=0;const h=this._touchCurrent.length;for(let O=0;O<h;O++)c+=this._touchCurrent[O].clientX,p+=this._touchCurrent[O].clientY;this.setCenter(c/h,p/h);const g=8;this._currentCursorPosition.setY(this.getCursorNDC(y.x,y.y,this.domElement).y*.5);const v=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;v<0?_=1/Math.pow(this.scaleFactor,-v*g):v>0&&(_=Math.pow(this.scaleFactor,v*g)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const b=this._v3_1.distanceTo(this._gizmos.position);let T=b/_;T=s.MathUtils.clamp(T,this.minDistance,this.maxDistance);const R=b*Math.tan(s.MathUtils.DEG2RAD*this._fovState*.5);let F=s.MathUtils.RAD2DEG*(Math.atan(R/T)*2);F=s.MathUtils.clamp(F,this.minFov,this.maxFov);const G=R/Math.tan(s.MathUtils.DEG2RAD*(F/2));_=b/G,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(_,this._v3_2,!1));const L=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(G/b);this._m4_1.makeTranslation(L.x,L.y,L.z),this.dispatchEvent(B)}}),e(this,"onTriplePanEnd",()=>{this.updateTbState(o.IDLE,!1),this.dispatchEvent(D)}),e(this,"setCenter",(c,p)=>{y.x=c,y.y=p}),e(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),e(this,"setMouseAction",(c,p,h=null)=>{const g=["PAN","ROTATE","ZOOM","FOV"],v=[0,1,2,"WHEEL"],_=["CTRL","SHIFT",null];let b;if(!g.includes(c)||!v.includes(p)||!_.includes(h)||p=="WHEEL"&&c!="ZOOM"&&c!="FOV")return!1;switch(c){case"PAN":b=o.PAN;break;case"ROTATE":b=o.ROTATE;break;case"ZOOM":b=o.SCALE;break;case"FOV":b=o.FOV;break}const T={operation:c,mouse:p,key:h,state:b};for(let R=0;R<this.mouseActions.length;R++)if(this.mouseActions[R].mouse==T.mouse&&this.mouseActions[R].key==T.key)return this.mouseActions.splice(R,1,T),!0;return this.mouseActions.push(T),!0}),e(this,"getOpFromAction",(c,p)=>{let h;for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==p)return h.operation;if(p){for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==null)return h.operation}return null}),e(this,"getOpStateFromAction",(c,p)=>{let h;for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==p)return h.state;if(p){for(let g=0;g<this.mouseActions.length;g++)if(h=this.mouseActions[g],h.mouse==c&&h.key==null)return h.state}return null}),e(this,"getAngle",(c,p)=>Math.atan2(p.clientY-c.clientY,p.clientX-c.clientX)*180/Math.PI),e(this,"updateTouchEvent",c=>{for(let p=0;p<this._touchCurrent.length;p++)if(this._touchCurrent[p].pointerId==c.pointerId){this._touchCurrent.splice(p,1,c);break}}),e(this,"calculateAngularSpeed",(c,p,h,g)=>{const v=p-c,_=(g-h)/1e3;return _==0?0:v/_}),e(this,"calculatePointersDistance",(c,p)=>Math.sqrt(Math.pow(p.clientX-c.clientX,2)+Math.pow(p.clientY-c.clientY,2))),e(this,"calculateRotationAxis",(c,p)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(c,p).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),e(this,"calculateTbRadius",c=>{const h=c.position.distanceTo(this._gizmos.position);if(c instanceof s.PerspectiveCamera){const g=s.MathUtils.DEG2RAD*c.fov*.5,v=Math.atan(c.aspect*Math.tan(g));return Math.tan(Math.min(g,v))*h*.67}else if(c instanceof s.OrthographicCamera)return Math.min(c.top,c.right)*.67}),e(this,"focus",(c,p,h=1)=>{if(this.camera){const g=c.clone();g.sub(this._gizmos.position).multiplyScalar(h),this._translationMatrix.makeTranslation(g.x,g.y,g.z);const v=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const _=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(p,this._gizmos.position)),this._gizmoMatrixState.copy(v),this._cameraMatrixState.copy(_)}}),e(this,"drawGrid",()=>{if(this.scene){let h,g,v,_;if(this.camera instanceof s.OrthographicCamera){const b=this.camera.right-this.camera.left,T=this.camera.bottom-this.camera.top;v=Math.max(b,T),_=v/20,h=v/this.camera.zoom*3,g=h/_*this.camera.zoom}else if(this.camera instanceof s.PerspectiveCamera){const b=this.camera.position.distanceTo(this._gizmos.position),T=s.MathUtils.DEG2RAD*this.camera.fov*.5,R=Math.atan(this.camera.aspect*Math.tan(T));v=Math.tan(Math.max(T,R))*b*2,_=v/20,h=v*3,g=h/_}this._grid==null&&this.camera&&(this._grid=new s.GridHelper(h,g,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),e(this,"connect",c=>{c===document&&yE.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),e(this,"dispose",()=>{var c,p,h,g,v;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointercancel",this.onPointerCancel),(h=this.domElement)==null||h.removeEventListener("wheel",this.onWheel),(g=this.domElement)==null||g.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(v=this.scene)==null||v.remove(this._gizmos),this.disposeGrid()}),e(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),e(this,"easeOutCubic",c=>1-Math.pow(1-c,3)),e(this,"activateGizmos",c=>{for(const p of this._gizmos.children)p.material.setValues({opacity:c?1:.6})}),e(this,"getCursorNDC",(c,p,h)=>{const g=h.getBoundingClientRect();return this._v2_1.setX((c-g.left)/g.width*2-1),this._v2_1.setY((g.bottom-p)/g.height*2-1),this._v2_1.clone()}),e(this,"getCursorPosition",(c,p,h)=>(this._v2_1.copy(this.getCursorNDC(c,p,h)),this.camera instanceof s.OrthographicCamera&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),e(this,"setCamera",c=>{if(c){c.lookAt(this.target),c.updateMatrix(),c instanceof s.PerspectiveCamera&&(this._fov0=c.fov,this._fovState=c.fov),this._cameraMatrixState0.copy(c.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(c.projectionMatrix),this._zoom0=c.zoom,this._zoomState=this._zoom0,this._initialNear=c.near,this._nearPos0=c.position.distanceTo(this.target)-c.near,this._nearPos=this._initialNear,this._initialFar=c.far,this._farPos0=c.position.distanceTo(this.target)-c.far,this._farPos=this._initialFar,this._up0.copy(c.up),this._upState.copy(c.up),this.camera=c,this.camera.updateProjectionMatrix();const p=this.calculateTbRadius(c);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius)}}),e(this,"makeGizmos",(c,p)=>{const g=new s.EllipseCurve(0,0,p,p).getPoints(this._curvePts),v=new s.BufferGeometry().setFromPoints(g),_=new s.LineBasicMaterial({color:16744576,fog:!1,transparent:!0,opacity:.6}),b=new s.LineBasicMaterial({color:8454016,fog:!1,transparent:!0,opacity:.6}),T=new s.LineBasicMaterial({color:8421631,fog:!1,transparent:!0,opacity:.6}),R=new s.Line(v,_),F=new s.Line(v,b),G=new s.Line(v,T),L=Math.PI*.5;if(R.rotation.x=L,F.rotation.y=L,this._gizmoMatrixState0.identity().setPosition(c),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const O=1/this.camera.zoom;this._scaleMatrix.makeScale(O,O,O),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(c.x,c.y,c.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(R),this._gizmos.add(F),this._gizmos.add(G)}),e(this,"onFocusAnim",(c,p,h,g)=>{if(this._timeStart==-1&&(this._timeStart=c),this._state==o.ANIMATION_FOCUS){const _=(c-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(g),_>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,this.scaleFactor),this._timeStart=-1,this.updateTbState(o.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(B);else{const b=this.easeOutCubic(_),T=1-b+this.scaleFactor*b;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,T,b),this.dispatchEvent(B);const R=this;this._animationId=window.requestAnimationFrame(function(F){R.onFocusAnim(F,p,h,g.clone())})}}else this._animationId=-1,this._timeStart=-1}),e(this,"onRotationAnim",(c,p,h)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=c),this._state==o.ANIMATION_ROTATE){const g=(c-this._timeStart)/1e3;if(h+-this.dampingFactor*g>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(g,2)+h*g+0,this.applyTransformMatrix(this.rotate(p,this._angleCurrent)),this.dispatchEvent(B);const _=this;this._animationId=window.requestAnimationFrame(function(b){_.onRotationAnim(b,p,h)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(o.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(B)}else this._animationId=-1,this._timeStart=-1,this._state!=o.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(B))}),e(this,"pan",(c,p,h=!1)=>{if(this.camera){const g=c.clone().sub(p);if(this.camera instanceof s.OrthographicCamera&&g.multiplyScalar(1/this.camera.zoom),this.camera instanceof s.PerspectiveCamera&&h){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const v=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);g.multiplyScalar(1/v)}this._v3_1.set(g.x,g.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return M}),e(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof s.PerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(o.IDLE,!1),this.dispatchEvent(B)}}),e(this,"rotate",(c,p)=>{const h=this._gizmos.position;return this._translationMatrix.makeTranslation(-h.x,-h.y,-h.z),this._rotationMatrix.makeRotationAxis(c,-p),this._m4_1.makeTranslation(h.x,h.y,h.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),M}),e(this,"copyState",()=>{if(this.camera){const c=JSON.stringify(this.camera instanceof s.OrthographicCamera?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(c)}}),e(this,"pasteState",()=>{const c=this;navigator.clipboard.readText().then(function(h){c.setStateFromJSON(h)})}),e(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof s.PerspectiveCamera&&(this._fov0=this.camera.fov))}),e(this,"applyScale",(c,p,h=!0)=>{if(!this.camera)return;const g=p.clone();let v=1/c;if(this.camera instanceof s.OrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=c,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,v=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,v=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(v,v,v),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),g.sub(this._v3_1);const _=g.clone().multiplyScalar(v);return g.sub(_),this._m4_1.makeTranslation(g.x,g.y,g.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),M}if(this.camera instanceof s.PerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let _=this._v3_1.distanceTo(g),b=_-_*v;const T=_-b;T<this.minDistance?(v=this.minDistance/_,b=_-_*v):T>this.maxDistance&&(v=this.maxDistance/_,b=_-_*v);let R=g.clone().sub(this._v3_1).normalize().multiplyScalar(b);if(this._m4_1.makeTranslation(R.x,R.y,R.z),h){const F=this._v3_2;_=F.distanceTo(g),b=_-_*v,R=g.clone().sub(this._v3_2).normalize().multiplyScalar(b),this._translationMatrix.makeTranslation(F.x,F.y,F.z),this._scaleMatrix.makeScale(v,v,v),this._m4_2.makeTranslation(R.x,R.y,R.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-F.x,-F.y,-F.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return M}}),e(this,"setFov",c=>{this.camera instanceof s.PerspectiveCamera&&(this.camera.fov=s.MathUtils.clamp(c,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),e(this,"setTarget",(c,p,h)=>{if(this.camera){this.target.set(c,p,h),this._gizmos.position.set(c,p,h);const g=this.calculateTbRadius(this.camera);g!==void 0&&(this._tbRadius=g),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),e(this,"zRotate",(c,p)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,p),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._m4_1.makeTranslation(c.x,c.y,c.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(c),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,p),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),M)),e(this,"unprojectOnObj",(c,p)=>{if(!this.scene)return null;const h=new s.Raycaster;h.near=p.near,h.far=p.far,h.setFromCamera(c,p);const g=h.intersectObjects(this.scene.children,!0);for(let v=0;v<g.length;v++)if(g[v].object.uuid!=this._gizmos.uuid&&g[v].face)return g[v].point.clone();return null}),e(this,"unprojectOnTbSurface",(c,p,h,g,v)=>{if(c instanceof s.OrthographicCamera){this._v2_1.copy(this.getCursorPosition(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const _=Math.pow(this._v2_1.x,2),b=Math.pow(this._v2_1.y,2),T=Math.pow(this._tbRadius,2);return _+b<=T*.5?this._v3_1.setZ(Math.sqrt(T-(_+b))):this._v3_1.setZ(T*.5/Math.sqrt(_+b)),this._v3_1}if(c instanceof s.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(c.projectionMatrixInverse);const _=this._v3_1.clone().normalize(),b=c.position.distanceTo(this._gizmos.position),T=Math.pow(v,2),R=this._v3_1.z,F=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(F==0)return _.set(this._v3_1.x,this._v3_1.y,v),_;const G=R/F,L=b;let O=Math.pow(G,2)+1,k=2*G*L,P=Math.pow(L,2)-T,z=Math.pow(k,2)-4*O*P;if(z>=0&&(this._v2_1.setX((-k-Math.sqrt(z))/(2*O)),this._v2_1.setY(G*this._v2_1.x+L),s.MathUtils.RAD2DEG*this._v2_1.angle()>=45)){const W=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(b-this._v2_1.y,2));return _.multiplyScalar(W),_.z+=b,_}O=G,k=L,P=-T*.5,z=Math.pow(k,2)-4*O*P,this._v2_1.setX((-k-Math.sqrt(z))/(2*O)),this._v2_1.setY(G*this._v2_1.x+L);const j=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(b-this._v2_1.y,2));return _.multiplyScalar(j),_.z+=b,_}}),e(this,"unprojectOnTbPlane",(c,p,h,g,v=!1)=>{if(c instanceof s.OrthographicCamera)return this._v2_1.copy(this.getCursorPosition(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(c instanceof s.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,g)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(c.projectionMatrixInverse);const _=this._v3_1.clone().normalize(),b=this._v3_1.z,T=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let R;if(v?R=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):R=c.position.distanceTo(this._gizmos.position),T==0)return _.set(0,0,0),_;const F=b/T,G=R,L=-G/F,O=Math.sqrt(Math.pow(G,2)+Math.pow(L,2));return _.multiplyScalar(O),_.z=0,_}}),e(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof s.OrthographicCamera&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof s.PerspectiveCamera&&(this._fovState=this.camera.fov))}),e(this,"updateTbState",(c,p)=>{this._state=c,p&&this.updateMatrixState()}),e(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const p=this.calculateTbRadius(this.camera);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof s.OrthographicCamera&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const p=s.MathUtils.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(p/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof s.PerspectiveCamera){const p=this.camera.position.distanceTo(this._gizmos.position);if(p>this.maxDistance+1e-6||p<this.minDistance-1e-6){const v=s.MathUtils.clamp(p,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(v/p,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=s.MathUtils.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const h=this._tbRadius,g=this.calculateTbRadius(this.camera);if(g!==void 0&&(this._tbRadius=g),h<this._tbRadius-1e-6||h>this._tbRadius+1e-6){const v=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,_=this._tbRadius/v,T=new s.EllipseCurve(0,0,_,_).getPoints(this._curvePts),R=new s.BufferGeometry().setFromPoints(T);for(const F in this._gizmos.children){const G=this._gizmos.children[F];G.geometry=R}}}this.camera.lookAt(this._gizmos.position)}}),e(this,"setStateFromJSON",c=>{const p=JSON.parse(c);if(p.arcballState&&this.camera){this._cameraMatrixState.fromArray(p.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(p.arcballState.cameraUp),this.camera.near=p.arcballState.cameraNear,this.camera.far=p.arcballState.cameraFar,this.camera.zoom=p.arcballState.cameraZoom,this.camera instanceof s.PerspectiveCamera&&(this.camera.fov=p.arcballState.cameraFov),this._gizmoMatrixState.fromArray(p.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const h=this.calculateTbRadius(this.camera);h!==void 0&&(this._tbRadius=h);const g=new s.Matrix4().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(g),this.camera.lookAt(this._gizmos.position),this.updateTbState(o.IDLE,!1),this.dispatchEvent(B)}}),this.camera=null,this.domElement=r,this.scene=l,this.mouseActions=[],this._mouseOp=null,this._v2_1=new s.Vector2,this._v3_1=new s.Vector3,this._v3_2=new s.Vector3,this._m4_1=new s.Matrix4,this._m4_2=new s.Matrix4,this._quat=new s.Quaternion,this._translationMatrix=new s.Matrix4,this._rotationMatrix=new s.Matrix4,this._scaleMatrix=new s.Matrix4,this._rotationAxis=new s.Vector3,this._cameraMatrixState=new s.Matrix4,this._cameraProjectionState=new s.Matrix4,this._fovState=1,this._upState=new s.Vector3,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new s.Matrix4,this._up0=new s.Vector3,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new s.Matrix4,this._gizmoMatrixState0=new s.Matrix4,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=f.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new s.Vector3,this._startCursorPosition=new s.Vector3,this._grid=null,this._gridPosition=new s.Vector3,this._gizmos=new s.Group,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new s.Vector3,this._cursorPosCurr=new s.Vector3,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new s.Vector3(0,0,0),this._currentTarget=new s.Vector3(0,0,0),this._tbRadius=1,this._state=o.IDLE,this.setCamera(t),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(t){if(t!=null&&t.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==o.ROTATE||this._state==o.ZROTATE||this._state==o.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),t!=null&&t.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==o.SCALE||this._state==o.FOCUS||this._state==o.ANIMATION_FOCUS)&&this.camera){const r=this.calculateTbRadius(this.camera);if(r!==void 0&&(this._tbRadius=r),this.adjustNearFar){const l=this.camera.position.distanceTo(this._gizmos.position),c=new s.Box3;c.setFromObject(this._gizmos);const p=new s.Sphere;c.getBoundingSphere(p);const h=Math.max(this._nearPos0,p.radius+p.center.length()),g=l-this._initialNear,v=Math.min(h,g);this.camera.near=l-v;const _=Math.min(this._farPos0,-p.radius+p.center.length()),b=l-this._initialFar,T=Math.min(_,b);this.camera.far=l-T,this.camera.updateProjectionMatrix()}else{let l=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,l=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,l=!0),l&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(B)}setTransformationMatrices(t=null,r=null){t?M.camera?M.camera.copy(t):M.camera=t.clone():M.camera=null,r?M.gizmos?M.gizmos.copy(r):M.gizmos=r.clone():M.gizmos=null}}const X=(0,d.forwardRef)((_,v)=>{var b=_,{camera:i,makeDefault:t,regress:r,domElement:l,onChange:c,onStart:p,onEnd:h}=b,g=_n(b,["camera","makeDefault","regress","domElement","onChange","onStart","onEnd"]);const T=(0,E.z)(Q=>Q.invalidate),R=(0,E.z)(Q=>Q.camera),F=(0,E.z)(Q=>Q.gl),G=(0,E.z)(Q=>Q.events),L=(0,E.z)(Q=>Q.set),O=(0,E.z)(Q=>Q.get),k=(0,E.z)(Q=>Q.performance),P=i||R,z=l||G.connected||F.domElement,j=(0,d.useMemo)(()=>new U(P),[P]);return(0,E.A)(()=>{j.enabled&&j.update()},-1),(0,d.useEffect)(()=>(j.connect(z),()=>void j.dispose()),[z,r,j,T]),(0,d.useEffect)(()=>{const Q=W=>{T(),r&&k.regress(),c&&c(W)};return j.addEventListener("change",Q),p&&j.addEventListener("start",p),h&&j.addEventListener("end",h),()=>{j.removeEventListener("change",Q),p&&j.removeEventListener("start",p),h&&j.removeEventListener("end",h)}},[c,p,h]),(0,d.useEffect)(()=>{if(t){const Q=O().controls;return L({controls:j}),()=>L({controls:Q})}},[t,j]),d.createElement("primitive",(0,w.Z)({ref:v,object:j},g))});var q=A(76427),Z=A.n(q),te=A(25108),ie=Object.defineProperty,fe=(i,t,r)=>t in i?ie(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$=(i,t,r)=>(fe(i,typeof t!="symbol"?t+"":t,r),r);class re extends s.Object3D{constructor(t,r){super(),$(this,"isTransformControls",!0),$(this,"visible",!1),$(this,"domElement"),$(this,"raycaster",new s.Raycaster),$(this,"gizmo"),$(this,"plane"),$(this,"tempVector",new s.Vector3),$(this,"tempVector2",new s.Vector3),$(this,"tempQuaternion",new s.Quaternion),$(this,"unit",{X:new s.Vector3(1,0,0),Y:new s.Vector3(0,1,0),Z:new s.Vector3(0,0,1)}),$(this,"pointStart",new s.Vector3),$(this,"pointEnd",new s.Vector3),$(this,"offset",new s.Vector3),$(this,"rotationAxis",new s.Vector3),$(this,"startNorm",new s.Vector3),$(this,"endNorm",new s.Vector3),$(this,"rotationAngle",0),$(this,"cameraPosition",new s.Vector3),$(this,"cameraQuaternion",new s.Quaternion),$(this,"cameraScale",new s.Vector3),$(this,"parentPosition",new s.Vector3),$(this,"parentQuaternion",new s.Quaternion),$(this,"parentQuaternionInv",new s.Quaternion),$(this,"parentScale",new s.Vector3),$(this,"worldPositionStart",new s.Vector3),$(this,"worldQuaternionStart",new s.Quaternion),$(this,"worldScaleStart",new s.Vector3),$(this,"worldPosition",new s.Vector3),$(this,"worldQuaternion",new s.Quaternion),$(this,"worldQuaternionInv",new s.Quaternion),$(this,"worldScale",new s.Vector3),$(this,"eye",new s.Vector3),$(this,"positionStart",new s.Vector3),$(this,"quaternionStart",new s.Quaternion),$(this,"scaleStart",new s.Vector3),$(this,"camera"),$(this,"object"),$(this,"enabled",!0),$(this,"axis",null),$(this,"mode","translate"),$(this,"translationSnap",null),$(this,"rotationSnap",null),$(this,"scaleSnap",null),$(this,"space","world"),$(this,"size",1),$(this,"dragging",!1),$(this,"showX",!0),$(this,"showY",!0),$(this,"showZ",!0),$(this,"changeEvent",{type:"change"}),$(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),$(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),$(this,"objectChangeEvent",{type:"objectChange"}),$(this,"intersectObjectWithRay",(c,p,h)=>{const g=p.intersectObject(c,!0);for(let v=0;v<g.length;v++)if(g[v].object.visible||h)return g[v];return!1}),$(this,"attach",c=>(this.object=c,this.visible=!0,this)),$(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),$(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),$(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?te.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),$(this,"pointerHover",c=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(c,this.camera);const p=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);p?this.axis=p.object.name:this.axis=null}),$(this,"pointerDown",c=>{if(!(this.object===void 0||this.dragging===!0||c.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(c,this.camera);const p=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(p){let h=this.space;if(this.mode==="scale"?h="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(h="world"),h==="local"&&this.mode==="rotate"){const g=this.rotationSnap;this.axis==="X"&&g&&(this.object.rotation.x=Math.round(this.object.rotation.x/g)*g),this.axis==="Y"&&g&&(this.object.rotation.y=Math.round(this.object.rotation.y/g)*g),this.axis==="Z"&&g&&(this.object.rotation.z=Math.round(this.object.rotation.z/g)*g)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(p.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),$(this,"pointerMove",c=>{const p=this.axis,h=this.mode,g=this.object;let v=this.space;if(h==="scale"?v="local":(p==="E"||p==="XYZE"||p==="XYZ")&&(v="world"),g===void 0||p===null||this.dragging===!1||c.button!==-1)return;this.raycaster.setFromCamera(c,this.camera);const _=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(_){if(this.pointEnd.copy(_.point).sub(this.worldPositionStart),h==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),v==="local"&&p!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),p.indexOf("X")===-1&&(this.offset.x=0),p.indexOf("Y")===-1&&(this.offset.y=0),p.indexOf("Z")===-1&&(this.offset.z=0),v==="local"&&p!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),g.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(v==="local"&&(g.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),p.search("X")!==-1&&(g.position.x=Math.round(g.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(g.position.y=Math.round(g.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(g.position.z=Math.round(g.position.z/this.translationSnap)*this.translationSnap),g.position.applyQuaternion(this.quaternionStart)),v==="world"&&(g.parent&&g.position.add(this.tempVector.setFromMatrixPosition(g.parent.matrixWorld)),p.search("X")!==-1&&(g.position.x=Math.round(g.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(g.position.y=Math.round(g.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(g.position.z=Math.round(g.position.z/this.translationSnap)*this.translationSnap),g.parent&&g.position.sub(this.tempVector.setFromMatrixPosition(g.parent.matrixWorld))));else if(h==="scale"){if(p.search("XYZ")!==-1){let b=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(b*=-1),this.tempVector2.set(b,b,b)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),p.search("X")===-1&&(this.tempVector2.x=1),p.search("Y")===-1&&(this.tempVector2.y=1),p.search("Z")===-1&&(this.tempVector2.z=1);g.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(p.search("X")!==-1&&(this.object.scale.x=Math.round(g.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Y")!==-1&&(g.scale.y=Math.round(g.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Z")!==-1&&(g.scale.z=Math.round(g.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(h==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const b=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));p==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):p==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*b):(p==="X"||p==="Y"||p==="Z")&&(this.rotationAxis.copy(this.unit[p]),this.tempVector.copy(this.unit[p]),v==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*b),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),v==="local"&&p!=="E"&&p!=="XYZE"?(g.quaternion.copy(this.quaternionStart),g.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),g.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),g.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),$(this,"pointerUp",c=>{c.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),$(this,"getPointer",c=>{var p,h;if(this.domElement&&((p=this.domElement.ownerDocument)!=null&&p.pointerLockElement))return{x:0,y:0,button:c.button};{const g=c.changedTouches?c.changedTouches[0]:c,v=(h=this.domElement)==null?void 0:h.getBoundingClientRect();return{x:(g.clientX-v.left)/v.width*2-1,y:-(g.clientY-v.top)/v.height*2+1,button:c.button}}}),$(this,"onPointerHover",c=>{if(this.enabled)switch(c.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(c));break}}),$(this,"onPointerDown",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(c)),this.pointerDown(this.getPointer(c)))}),$(this,"onPointerMove",c=>{this.enabled&&this.pointerMove(this.getPointer(c))}),$(this,"onPointerUp",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(c)))}),$(this,"getMode",()=>this.mode),$(this,"setMode",c=>{this.mode=c}),$(this,"setTranslationSnap",c=>{this.translationSnap=c}),$(this,"setRotationSnap",c=>{this.rotationSnap=c}),$(this,"setScaleSnap",c=>{this.scaleSnap=c}),$(this,"setSize",c=>{this.size=c}),$(this,"setSpace",c=>{this.space=c}),$(this,"update",()=>{te.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),$(this,"connect",c=>{c===document&&te.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),$(this,"dispose",()=>{var c,p,h,g,v,_;(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointermove",this.onPointerHover),(g=(h=this.domElement)==null?void 0:h.ownerDocument)==null||g.removeEventListener("pointermove",this.onPointerMove),(_=(v=this.domElement)==null?void 0:v.ownerDocument)==null||_.removeEventListener("pointerup",this.onPointerUp),this.traverse(b=>{const T=b;T.geometry&&T.geometry.dispose(),T.material&&T.material.dispose()})}),this.domElement=r,this.camera=t,this.gizmo=new be,this.add(this.gizmo),this.plane=new he,this.add(this.plane);const l=(c,p)=>{let h=p;Object.defineProperty(this,c,{get:function(){return h!==void 0?h:p},set:function(g){h!==g&&(h=g,this.plane[c]=g,this.gizmo[c]=g,this.dispatchEvent({type:c+"-changed",value:g}),this.dispatchEvent(this.changeEvent))}}),this[c]=p,this.plane[c]=p,this.gizmo[c]=p};l("camera",this.camera),l("object",this.object),l("enabled",this.enabled),l("axis",this.axis),l("mode",this.mode),l("translationSnap",this.translationSnap),l("rotationSnap",this.rotationSnap),l("scaleSnap",this.scaleSnap),l("space",this.space),l("size",this.size),l("dragging",this.dragging),l("showX",this.showX),l("showY",this.showY),l("showZ",this.showZ),l("worldPosition",this.worldPosition),l("worldPositionStart",this.worldPositionStart),l("worldQuaternion",this.worldQuaternion),l("worldQuaternionStart",this.worldQuaternionStart),l("cameraPosition",this.cameraPosition),l("cameraQuaternion",this.cameraQuaternion),l("pointStart",this.pointStart),l("pointEnd",this.pointEnd),l("rotationAxis",this.rotationAxis),l("rotationAngle",this.rotationAngle),l("eye",this.eye),r!==void 0&&this.connect(r)}}class be extends s.Object3D{constructor(){super(),$(this,"isTransformControlsGizmo",!0),$(this,"type","TransformControlsGizmo"),$(this,"tempVector",new s.Vector3(0,0,0)),$(this,"tempEuler",new s.Euler),$(this,"alignVector",new s.Vector3(0,1,0)),$(this,"zeroVector",new s.Vector3(0,0,0)),$(this,"lookAtMatrix",new s.Matrix4),$(this,"tempQuaternion",new s.Quaternion),$(this,"tempQuaternion2",new s.Quaternion),$(this,"identityQuaternion",new s.Quaternion),$(this,"unitX",new s.Vector3(1,0,0)),$(this,"unitY",new s.Vector3(0,1,0)),$(this,"unitZ",new s.Vector3(0,0,1)),$(this,"gizmo"),$(this,"picker"),$(this,"helper"),$(this,"rotationAxis",new s.Vector3),$(this,"cameraPosition",new s.Vector3),$(this,"worldPositionStart",new s.Vector3),$(this,"worldQuaternionStart",new s.Quaternion),$(this,"worldPosition",new s.Vector3),$(this,"worldQuaternion",new s.Quaternion),$(this,"eye",new s.Vector3),$(this,"camera",null),$(this,"enabled",!0),$(this,"axis",null),$(this,"mode","translate"),$(this,"space","world"),$(this,"size",1),$(this,"dragging",!1),$(this,"showX",!0),$(this,"showY",!0),$(this,"showZ",!0),$(this,"updateMatrixWorld",()=>{let Ye=this.space;this.mode==="scale"&&(Ye="local");const Ce=Ye==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let Ee=[];Ee=Ee.concat(this.picker[this.mode].children),Ee=Ee.concat(this.gizmo[this.mode].children),Ee=Ee.concat(this.helper[this.mode].children);for(let _e=0;_e<Ee.length;_e++){const oe=Ee[_e];oe.visible=!0,oe.rotation.set(0,0,0),oe.position.copy(this.worldPosition);let Ae;if(this.camera.isOrthographicCamera?Ae=(this.camera.top-this.camera.bottom)/this.camera.zoom:Ae=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),oe.scale.set(1,1,1).multiplyScalar(Ae*this.size/7),oe.tag==="helper"){oe.visible=!1,oe.name==="AXIS"?(oe.position.copy(this.worldPositionStart),oe.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),oe.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),oe.quaternion.multiply(this.tempQuaternion),oe.visible=this.dragging),this.axis==="E"&&(oe.visible=!1)):oe.name==="START"?(oe.position.copy(this.worldPositionStart),oe.visible=this.dragging):oe.name==="END"?(oe.position.copy(this.worldPosition),oe.visible=this.dragging):oe.name==="DELTA"?(oe.position.copy(this.worldPositionStart),oe.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),oe.scale.copy(this.tempVector),oe.visible=this.dragging):(oe.quaternion.copy(Ce),this.dragging?oe.position.copy(this.worldPositionStart):oe.position.copy(this.worldPosition),this.axis&&(oe.visible=this.axis.search(oe.name)!==-1));continue}oe.quaternion.copy(Ce),this.mode==="translate"||this.mode==="scale"?((oe.name==="X"||oe.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),(oe.name==="Y"||oe.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),(oe.name==="Z"||oe.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.x*=-1:oe.tag==="bwd"&&(oe.visible=!1)),oe.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.y*=-1:oe.tag==="bwd"&&(oe.visible=!1)),oe.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.z*=-1:oe.tag==="bwd"&&(oe.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(Ce),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(Ce).invert()),oe.name.search("E")!==-1&&oe.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),oe.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion)),oe.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion)),oe.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion))),oe.visible=oe.visible&&(oe.name.indexOf("X")===-1||this.showX),oe.visible=oe.visible&&(oe.name.indexOf("Y")===-1||this.showY),oe.visible=oe.visible&&(oe.name.indexOf("Z")===-1||this.showZ),oe.visible=oe.visible&&(oe.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),oe.material.tempOpacity=oe.material.tempOpacity||oe.material.opacity,oe.material.tempColor=oe.material.tempColor||oe.material.color.clone(),oe.material.color.copy(oe.material.tempColor),oe.material.opacity=oe.material.tempOpacity,this.enabled?this.axis&&(oe.name===this.axis?(oe.material.opacity=1,oe.material.color.lerp(new s.Color(1,1,1),.5)):this.axis.split("").some(function(Te){return oe.name===Te})?(oe.material.opacity=1,oe.material.color.lerp(new s.Color(1,1,1),.5)):(oe.material.opacity*=.25,oe.material.color.lerp(new s.Color(1,1,1),.5))):(oe.material.opacity*=.5,oe.material.color.lerp(new s.Color(1,1,1),.5))}super.updateMatrixWorld()});const t=new s.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:s.DoubleSide,fog:!1,toneMapped:!1}),r=new s.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),l=t.clone();l.opacity=.15;const c=t.clone();c.opacity=.33;const p=t.clone();p.color.set(16711680);const h=t.clone();h.color.set(65280);const g=t.clone();g.color.set(255);const v=t.clone();v.opacity=.25;const _=v.clone();_.color.set(16776960);const b=v.clone();b.color.set(65535);const T=v.clone();T.color.set(16711935),t.clone().color.set(16776960);const F=r.clone();F.color.set(16711680);const G=r.clone();G.color.set(65280);const L=r.clone();L.color.set(255);const O=r.clone();O.color.set(65535);const k=r.clone();k.color.set(16711935);const P=r.clone();P.color.set(16776960);const z=r.clone();z.color.set(7895160);const j=P.clone();j.opacity=.25;const Q=new s.CylinderGeometry(0,.05,.2,12,1,!1),W=new s.BoxGeometry(.125,.125,.125),Y=new s.BufferGeometry;Y.setAttribute("position",new s.Float32BufferAttribute([0,0,0,1,0,0],3));const K=(Ye,Ce)=>{const Ee=new s.BufferGeometry,_e=[];for(let oe=0;oe<=64*Ce;++oe)_e.push(0,Math.cos(oe/32*Math.PI)*Ye,Math.sin(oe/32*Math.PI)*Ye);return Ee.setAttribute("position",new s.Float32BufferAttribute(_e,3)),Ee},se=()=>{const Ye=new s.BufferGeometry;return Ye.setAttribute("position",new s.Float32BufferAttribute([0,0,0,1,1,1],3)),Ye},ce={X:[[new s.Mesh(Q,p),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new s.Mesh(Q,p),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new s.Line(Y,F)]],Y:[[new s.Mesh(Q,h),[0,1,0],null,null,"fwd"],[new s.Mesh(Q,h),[0,1,0],[Math.PI,0,0],null,"bwd"],[new s.Line(Y,G),null,[0,0,Math.PI/2]]],Z:[[new s.Mesh(Q,g),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new s.Mesh(Q,g),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new s.Line(Y,L),null,[0,-Math.PI/2,0]]],XYZ:[[new s.Mesh(new s.OctahedronGeometry(.1,0),v.clone()),[0,0,0],[0,0,0]]],XY:[[new s.Mesh(new s.PlaneGeometry(.295,.295),_.clone()),[.15,.15,0]],[new s.Line(Y,P),[.18,.3,0],null,[.125,1,1]],[new s.Line(Y,P),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new s.Mesh(new s.PlaneGeometry(.295,.295),b.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new s.Line(Y,O),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new s.Line(Y,O),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new s.Mesh(new s.PlaneGeometry(.295,.295),T.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new s.Line(Y,k),[.18,0,.3],null,[.125,1,1]],[new s.Line(Y,k),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},ge={X:[[new s.Mesh(new s.CylinderGeometry(.2,0,1,4,1,!1),l),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new s.Mesh(new s.CylinderGeometry(.2,0,1,4,1,!1),l),[0,.6,0]]],Z:[[new s.Mesh(new s.CylinderGeometry(.2,0,1,4,1,!1),l),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new s.Mesh(new s.OctahedronGeometry(.2,0),l)]],XY:[[new s.Mesh(new s.PlaneGeometry(.4,.4),l),[.2,.2,0]]],YZ:[[new s.Mesh(new s.PlaneGeometry(.4,.4),l),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new s.Mesh(new s.PlaneGeometry(.4,.4),l),[.2,0,.2],[-Math.PI/2,0,0]]]},le={START:[[new s.Mesh(new s.OctahedronGeometry(.01,2),c),null,null,null,"helper"]],END:[[new s.Mesh(new s.OctahedronGeometry(.01,2),c),null,null,null,"helper"]],DELTA:[[new s.Line(se(),c),null,null,null,"helper"]],X:[[new s.Line(Y,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new s.Line(Y,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new s.Line(Y,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},xe={X:[[new s.Line(K(1,.5),F)],[new s.Mesh(new s.OctahedronGeometry(.04,0),p),[0,0,.99],null,[1,3,1]]],Y:[[new s.Line(K(1,.5),G),null,[0,0,-Math.PI/2]],[new s.Mesh(new s.OctahedronGeometry(.04,0),h),[0,0,.99],null,[3,1,1]]],Z:[[new s.Line(K(1,.5),L),null,[0,Math.PI/2,0]],[new s.Mesh(new s.OctahedronGeometry(.04,0),g),[.99,0,0],null,[1,3,1]]],E:[[new s.Line(K(1.25,1),j),null,[0,Math.PI/2,0]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),j),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),j),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),j),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),j),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new s.Line(K(1,1),z),null,[0,Math.PI/2,0]]]},me={AXIS:[[new s.Line(Y,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Be={X:[[new s.Mesh(new s.TorusGeometry(1,.1,4,24),l),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new s.Mesh(new s.TorusGeometry(1,.1,4,24),l),[0,0,0],[Math.PI/2,0,0]]],Z:[[new s.Mesh(new s.TorusGeometry(1,.1,4,24),l),[0,0,0],[0,0,-Math.PI/2]]],E:[[new s.Mesh(new s.TorusGeometry(1.25,.1,2,24),l)]],XYZE:[[new s.Mesh(new s.SphereGeometry(.7,10,8),l)]]},ke={X:[[new s.Mesh(W,p),[.8,0,0],[0,0,-Math.PI/2]],[new s.Line(Y,F),null,null,[.8,1,1]]],Y:[[new s.Mesh(W,h),[0,.8,0]],[new s.Line(Y,G),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new s.Mesh(W,g),[0,0,.8],[Math.PI/2,0,0]],[new s.Line(Y,L),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new s.Mesh(W,_),[.85,.85,0],null,[2,2,.2]],[new s.Line(Y,P),[.855,.98,0],null,[.125,1,1]],[new s.Line(Y,P),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new s.Mesh(W,b),[0,.85,.85],null,[.2,2,2]],[new s.Line(Y,O),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new s.Line(Y,O),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new s.Mesh(W,T),[.85,0,.85],null,[2,.2,2]],[new s.Line(Y,k),[.855,0,.98],null,[.125,1,1]],[new s.Line(Y,k),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new s.Mesh(new s.BoxGeometry(.125,.125,.125),v.clone()),[1.1,0,0]]],XYZY:[[new s.Mesh(new s.BoxGeometry(.125,.125,.125),v.clone()),[0,1.1,0]]],XYZZ:[[new s.Mesh(new s.BoxGeometry(.125,.125,.125),v.clone()),[0,0,1.1]]]},Re={X:[[new s.Mesh(new s.CylinderGeometry(.2,0,.8,4,1,!1),l),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new s.Mesh(new s.CylinderGeometry(.2,0,.8,4,1,!1),l),[0,.5,0]]],Z:[[new s.Mesh(new s.CylinderGeometry(.2,0,.8,4,1,!1),l),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new s.Mesh(W,l),[.85,.85,0],null,[3,3,.2]]],YZ:[[new s.Mesh(W,l),[0,.85,.85],null,[.2,3,3]]],XZ:[[new s.Mesh(W,l),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new s.Mesh(new s.BoxGeometry(.2,.2,.2),l),[1.1,0,0]]],XYZY:[[new s.Mesh(new s.BoxGeometry(.2,.2,.2),l),[0,1.1,0]]],XYZZ:[[new s.Mesh(new s.BoxGeometry(.2,.2,.2),l),[0,0,1.1]]]},ze={X:[[new s.Line(Y,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new s.Line(Y,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new s.Line(Y,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Pe=Ye=>{const Ce=new s.Object3D;for(let Ee in Ye)for(let _e=Ye[Ee].length;_e--;){const oe=Ye[Ee][_e][0].clone(),Ae=Ye[Ee][_e][1],Te=Ye[Ee][_e][2],ve=Ye[Ee][_e][3],Ge=Ye[Ee][_e][4];oe.name=Ee,oe.tag=Ge,Ae&&oe.position.set(Ae[0],Ae[1],Ae[2]),Te&&oe.rotation.set(Te[0],Te[1],Te[2]),ve&&oe.scale.set(ve[0],ve[1],ve[2]),oe.updateMatrix();const bt=oe.geometry.clone();bt.applyMatrix4(oe.matrix),oe.geometry=bt,oe.renderOrder=1/0,oe.position.set(0,0,0),oe.rotation.set(0,0,0),oe.scale.set(1,1,1),Ce.add(oe)}return Ce};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Pe(ce)),this.add(this.gizmo.rotate=Pe(xe)),this.add(this.gizmo.scale=Pe(ke)),this.add(this.picker.translate=Pe(ge)),this.add(this.picker.rotate=Pe(Be)),this.add(this.picker.scale=Pe(Re)),this.add(this.helper.translate=Pe(le)),this.add(this.helper.rotate=Pe(me)),this.add(this.helper.scale=Pe(ze)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class he extends s.Mesh{constructor(){super(new s.PlaneGeometry(1e5,1e5,2,2),new s.MeshBasicMaterial({visible:!1,wireframe:!0,side:s.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),$(this,"isTransformControlsPlane",!0),$(this,"type","TransformControlsPlane"),$(this,"unitX",new s.Vector3(1,0,0)),$(this,"unitY",new s.Vector3(0,1,0)),$(this,"unitZ",new s.Vector3(0,0,1)),$(this,"tempVector",new s.Vector3),$(this,"dirVector",new s.Vector3),$(this,"alignVector",new s.Vector3),$(this,"tempMatrix",new s.Matrix4),$(this,"identityQuaternion",new s.Quaternion),$(this,"cameraQuaternion",new s.Quaternion),$(this,"worldPosition",new s.Vector3),$(this,"worldQuaternion",new s.Quaternion),$(this,"eye",new s.Vector3),$(this,"axis",null),$(this,"mode","translate"),$(this,"space","world"),$(this,"updateMatrixWorld",()=>{let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),this.unitX.set(1,0,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}const Se=d.forwardRef((b,_)=>{var T=b,{children:i,domElement:t,onChange:r,onMouseDown:l,onMouseUp:c,onObjectChange:p,object:h,makeDefault:g}=T,v=_n(T,["children","domElement","onChange","onMouseDown","onMouseUp","onObjectChange","object","makeDefault"]);const R=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],ke=v,{camera:F}=ke,G=_n(ke,["camera"]),L=_d()(G,R),O=Z()(G,R),k=(0,E.z)(Re=>Re.controls),P=(0,E.z)(Re=>Re.gl),z=(0,E.z)(Re=>Re.events),j=(0,E.z)(Re=>Re.camera),Q=(0,E.z)(Re=>Re.invalidate),W=(0,E.z)(Re=>Re.get),Y=(0,E.z)(Re=>Re.set),K=F||j,se=t||z.connected||P.domElement,ce=d.useMemo(()=>new re(K,se),[K,se]),ge=d.useRef();d.useLayoutEffect(()=>(h?ce.attach(h instanceof s.Object3D?h:h.current):ge.current instanceof s.Object3D&&ce.attach(ge.current),()=>void ce.detach()),[h,i,ce]),d.useEffect(()=>{if(k){const Re=ze=>k.enabled=!ze.value;return ce.addEventListener("dragging-changed",Re),()=>ce.removeEventListener("dragging-changed",Re)}},[ce,k]);const le=d.useRef(),xe=d.useRef(),me=d.useRef(),Be=d.useRef();return d.useLayoutEffect(()=>void(le.current=r),[r]),d.useLayoutEffect(()=>void(xe.current=l),[l]),d.useLayoutEffect(()=>void(me.current=c),[c]),d.useLayoutEffect(()=>void(Be.current=p),[p]),d.useEffect(()=>{const Re=Ce=>{Q(),le.current==null||le.current(Ce)},ze=Ce=>xe.current==null?void 0:xe.current(Ce),Pe=Ce=>me.current==null?void 0:me.current(Ce),Ye=Ce=>Be.current==null?void 0:Be.current(Ce);return ce.addEventListener("change",Re),ce.addEventListener("mouseDown",ze),ce.addEventListener("mouseUp",Pe),ce.addEventListener("objectChange",Ye),()=>{ce.removeEventListener("change",Re),ce.removeEventListener("mouseDown",ze),ce.removeEventListener("mouseUp",Pe),ce.removeEventListener("objectChange",Ye)}},[Q,ce]),d.useEffect(()=>{if(g){const Re=W().controls;return Y({controls:ce}),()=>Y({controls:Re})}},[g,ce]),ce?d.createElement(d.Fragment,null,d.createElement("primitive",(0,w.Z)({ref:_,object:ce},L)),d.createElement("group",(0,w.Z)({ref:ge},O),i)):null});var Ue=A(25108),Xe=Object.defineProperty,et=(i,t,r)=>t in i?Xe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,st=(i,t,r)=>(et(i,typeof t!="symbol"?t+"":t,r),r);const we=new s.Euler(0,0,0,"YXZ"),We=new s.Vector3,Yt={type:"change"},Mn={type:"lock"},Gt={type:"unlock"},Ut=Math.PI/2;class Xt extends s.EventDispatcher{constructor(t,r){super(),st(this,"camera"),st(this,"domElement"),st(this,"isLocked"),st(this,"minPolarAngle"),st(this,"maxPolarAngle"),st(this,"pointerSpeed"),st(this,"onMouseMove",l=>{if(!this.domElement||this.isLocked===!1)return;const c=l.movementX||l.mozMovementX||l.webkitMovementX||0,p=l.movementY||l.mozMovementY||l.webkitMovementY||0;we.setFromQuaternion(this.camera.quaternion),we.y-=c*.002*this.pointerSpeed,we.x-=p*.002*this.pointerSpeed,we.x=Math.max(Ut-this.maxPolarAngle,Math.min(Ut-this.minPolarAngle,we.x)),this.camera.quaternion.setFromEuler(we),this.dispatchEvent(Yt)}),st(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Mn),this.isLocked=!0):(this.dispatchEvent(Gt),this.isLocked=!1))}),st(this,"onPointerlockError",()=>{Ue.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),st(this,"connect",l=>{this.domElement=l||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),st(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),st(this,"dispose",()=>{this.disconnect()}),st(this,"getObject",()=>this.camera),st(this,"direction",new s.Vector3(0,0,-1)),st(this,"getDirection",l=>l.copy(this.direction).applyQuaternion(this.camera.quaternion)),st(this,"moveForward",l=>{We.setFromMatrixColumn(this.camera.matrix,0),We.crossVectors(this.camera.up,We),this.camera.position.addScaledVector(We,l)}),st(this,"moveRight",l=>{We.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(We,l)}),st(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),st(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=t,this.domElement=r,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,r&&this.connect(r)}}const xn=d.forwardRef((_,v)=>{var b=_,{domElement:i,selector:t,onChange:r,onLock:l,onUnlock:c,enabled:p=!0,makeDefault:h}=b,g=_n(b,["domElement","selector","onChange","onLock","onUnlock","enabled","makeDefault"]);const Y=g,{camera:T}=Y,R=_n(Y,["camera"]),F=(0,E.z)(K=>K.setEvents),G=(0,E.z)(K=>K.gl),L=(0,E.z)(K=>K.camera),O=(0,E.z)(K=>K.invalidate),k=(0,E.z)(K=>K.events),P=(0,E.z)(K=>K.get),z=(0,E.z)(K=>K.set),j=T||L,Q=i||k.connected||G.domElement,[W]=d.useState(()=>new Xt(j));return d.useEffect(()=>{if(p){W.connect(Q);const K=P().events.compute;return F({compute(se,ce){const ge=ce.size.width/2,le=ce.size.height/2;ce.pointer.set(ge/ce.size.width*2-1,-(le/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),()=>{W.disconnect(),F({compute:K})}}},[p,W]),d.useEffect(()=>{const K=ge=>{O(),r&&r(ge)};W.addEventListener("change",K),l&&W.addEventListener("lock",l),c&&W.addEventListener("unlock",c);const se=()=>W.lock(),ce=t?Array.from(document.querySelectorAll(t)):[document];return ce.forEach(ge=>ge&&ge.addEventListener("click",se)),()=>{W.removeEventListener("change",K),l&&W.addEventListener("lock",l),c&&W.addEventListener("unlock",c),ce.forEach(ge=>ge?ge.removeEventListener("click",se):void 0)}},[r,l,c,t,W,O]),d.useEffect(()=>{if(h){const K=P().controls;return z({controls:W}),()=>z({controls:K})}},[h,W]),d.createElement("primitive",(0,w.Z)({ref:v,object:W},R))});var un=Object.defineProperty,fn=(i,t,r)=>t in i?un(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,jt=(i,t,r)=>(fn(i,typeof t!="symbol"?t+"":t,r),r);const Tn=new s.Vector3;class Lt extends s.EventDispatcher{constructor(t,r){super(),jt(this,"object"),jt(this,"domElement"),jt(this,"enabled",!0),jt(this,"movementSpeed",1),jt(this,"lookSpeed",.005),jt(this,"lookVertical",!0),jt(this,"autoForward",!1),jt(this,"activeLook",!0),jt(this,"heightSpeed",!1),jt(this,"heightCoef",1),jt(this,"heightMin",0),jt(this,"heightMax",1),jt(this,"constrainVertical",!1),jt(this,"verticalMin",0),jt(this,"verticalMax",Math.PI),jt(this,"mouseDragOn",!1),jt(this,"autoSpeedFactor",0),jt(this,"mouseX",0),jt(this,"mouseY",0),jt(this,"moveForward",!1),jt(this,"moveBackward",!1),jt(this,"moveLeft",!1),jt(this,"moveRight",!1),jt(this,"moveUp",!1),jt(this,"moveDown",!1),jt(this,"viewHalfX",0),jt(this,"viewHalfY",0),jt(this,"lat",0),jt(this,"lon",0),jt(this,"lookDirection",new s.Vector3),jt(this,"spherical",new s.Spherical),jt(this,"target",new s.Vector3),jt(this,"connect",l=>{l.setAttribute("tabindex","-1"),l.style.touchAction="none",l.addEventListener("contextmenu",this.contextmenu),l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),this.domElement=l,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),jt(this,"dispose",()=>{var l,c,p,h;(l=this.domElement)==null||l.removeEventListener("contextmenu",this.contextmenu),(c=this.domElement)==null||c.removeEventListener("mousedown",this.onMouseDown),(p=this.domElement)==null||p.removeEventListener("mousemove",this.onMouseMove),(h=this.domElement)==null||h.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),jt(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),jt(this,"onMouseDown",l=>{var c;if((c=this.domElement)==null||c.focus(),this.activeLook)switch(l.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),jt(this,"onMouseUp",l=>{if(this.activeLook)switch(l.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),jt(this,"onMouseMove",l=>{this.domElement&&(this.mouseX=l.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=l.pageY-this.domElement.offsetTop-this.viewHalfY)}),jt(this,"onKeyDown",l=>{switch(l.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),jt(this,"onKeyUp",l=>{switch(l.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),jt(this,"lookAt",(l,c,p)=>(l instanceof s.Vector3?this.target.copy(l):c&&p&&this.target.set(l,c,p),this.object.lookAt(this.target),this.setOrientation(),this)),jt(this,"update",l=>{if(!this.enabled)return;if(this.heightSpeed){const T=s.MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=l*(T*this.heightCoef)}else this.autoSpeedFactor=0;const c=l*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(c+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(c),this.moveLeft&&this.object.translateX(-c),this.moveRight&&this.object.translateX(c),this.moveUp&&this.object.translateY(c),this.moveDown&&this.object.translateY(-c);let p=l*this.lookSpeed;this.activeLook||(p=0);let h=1;this.constrainVertical&&(h=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*p,this.lookVertical&&(this.lat-=this.mouseY*p*h),this.lat=Math.max(-85,Math.min(85,this.lat));let g=s.MathUtils.degToRad(90-this.lat);const v=s.MathUtils.degToRad(this.lon);this.constrainVertical&&(g=s.MathUtils.mapLinear(g,0,Math.PI,this.verticalMin,this.verticalMax));const _=this.object.position;Tn.setFromSphericalCoords(1,g,v).add(_),this.object.lookAt(Tn)}),jt(this,"contextmenu",l=>l.preventDefault()),jt(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-s.MathUtils.radToDeg(this.spherical.phi),this.lon=s.MathUtils.radToDeg(this.spherical.theta)}),this.object=t,this.domElement=r,this.setOrientation(),r&&this.connect(r)}}const dn=d.forwardRef((c,l)=>{var p=c,{domElement:i,makeDefault:t}=p,r=_n(p,["domElement","makeDefault"]);const h=(0,E.z)(F=>F.camera),g=(0,E.z)(F=>F.gl),v=(0,E.z)(F=>F.events),_=(0,E.z)(F=>F.get),b=(0,E.z)(F=>F.set),T=i||v.connected||g.domElement,[R]=d.useState(()=>new Lt(h,T));return d.useEffect(()=>{if(t){const F=_().controls;return b({controls:R}),()=>b({controls:F})}},[t,R]),(0,E.A)((F,G)=>{R.update(G)},-1),R?d.createElement("primitive",(0,w.Z)({ref:l,object:R},r)):null});var tr=A(25108);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const cn={LEFT:1,RIGHT:2,MIDDLE:4},yt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Nr={NONE:0,IN:1,OUT:-1};function Ur(i){return i.isPerspectiveCamera}function Dr(i){return i.isOrthographicCamera}const Wi=Math.PI*2,os=Math.PI/2,oi=1e-5,ot=Math.PI/180;function zn(i,t,r){return Math.max(t,Math.min(r,i))}function Kt(i,t=oi){return Math.abs(i)<t}function hn(i,t,r=oi){return Kt(i-t,r)}function Cn(i,t){return Math.round(i/t)*t}function kr(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function mr(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function Cr(i,t,r,l,c=1/0,p){l=Math.max(1e-4,l);const h=2/l,g=h*p,v=1/(1+g+.48*g*g+.235*g*g*g);let _=i-t;const b=t,T=c*l;_=zn(_,-T,T),t=i-_;const R=(r.value+h*_)*p;r.value=(r.value-h*R)*v;let F=t+(_+R)*v;return b-i>0==F>b&&(F=b,r.value=(F-b)/p),F}function vi(i,t,r,l,c=1/0,p,h){l=Math.max(1e-4,l);const g=2/l,v=g*p,_=1/(1+v+.48*v*v+.235*v*v*v);let b=t.x,T=t.y,R=t.z,F=i.x-b,G=i.y-T,L=i.z-R;const O=b,k=T,P=R,z=c*l,j=z*z,Q=F*F+G*G+L*L;if(Q>j){const Be=Math.sqrt(Q);F=F/Be*z,G=G/Be*z,L=L/Be*z}b=i.x-F,T=i.y-G,R=i.z-L;const W=(r.x+g*F)*p,Y=(r.y+g*G)*p,K=(r.z+g*L)*p;r.x=(r.x-g*W)*_,r.y=(r.y-g*Y)*_,r.z=(r.z-g*K)*_,h.x=b+(F+W)*_,h.y=T+(G+Y)*_,h.z=R+(L+K)*_;const se=O-i.x,ce=k-i.y,ge=P-i.z,le=h.x-O,xe=h.y-k,me=h.z-P;return se*le+ce*xe+ge*me>0&&(h.x=O,h.y=k,h.z=P,r.x=(h.x-O)/p,r.y=(h.y-k)/p,r.z=(h.z-P)/p),h}function Ui(i,t){t.set(0,0),i.forEach(r=>{t.x+=r.clientX,t.y+=r.clientY}),t.x/=i.length,t.y/=i.length}function us(i,t){return Dr(i)?(tr.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class tt{constructor(){this._listeners={}}addEventListener(t,r){const l=this._listeners;l[t]===void 0&&(l[t]=[]),l[t].indexOf(r)===-1&&l[t].push(r)}hasEventListener(t,r){const l=this._listeners;return l[t]!==void 0&&l[t].indexOf(r)!==-1}removeEventListener(t,r){const c=this._listeners[t];if(c!==void 0){const p=c.indexOf(r);p!==-1&&c.splice(p,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const l=this._listeners[t.type];if(l!==void 0){t.target=this;const c=l.slice(0);for(let p=0,h=c.length;p<h;p++)c[p].call(this,t)}}}const De="2.7.0",nn=1/8,Un=typeof window!="undefined",Wn=Un&&/Mac/.test(navigator.platform),pr=!(Un&&"PointerEvent"in window);let yn,cr,on,Jr,wr,Nn,kn,Mr,Ii,Xi,ht,ir,Jt,Zn,$n,Vi,wo,Aa,Dc,Ms,Pc,Ka,lm;class Ih extends tt{static install(t){yn=t.THREE,cr=Object.freeze(new yn.Vector3(0,0,0)),on=Object.freeze(new yn.Vector3(0,1,0)),Jr=Object.freeze(new yn.Vector3(0,0,1)),wr=new yn.Vector2,Nn=new yn.Vector3,kn=new yn.Vector3,Mr=new yn.Vector3,Ii=new yn.Vector3,Xi=new yn.Vector3,ht=new yn.Vector3,ir=new yn.Vector3,Jt=new yn.Vector3,Zn=new yn.Vector3,$n=new yn.Spherical,Vi=new yn.Spherical,wo=new yn.Box3,Aa=new yn.Box3,Dc=new yn.Sphere,Ms=new yn.Quaternion,Pc=new yn.Quaternion,Ka=new yn.Matrix4,lm=new yn.Raycaster}static get ACTION(){return yt}constructor(t,r){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=yt.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Nr.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new yn.Vector3,this._focalOffsetVelocity=new yn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(j,Q,W)=>{let Y,K;if(Ur(this._camera)){const se=Nn.copy(this._camera.position).sub(this._target),ce=this._camera.getEffectiveFOV()*ot,ge=se.length()*Math.tan(ce*.5);Y=this.truckSpeed*j*ge/this._elementRect.height,K=this.truckSpeed*Q*ge/this._elementRect.height}else if(Dr(this._camera)){const se=this._camera;Y=j*(se.right-se.left)/se.zoom/this._elementRect.width,K=Q*(se.top-se.bottom)/se.zoom/this._elementRect.height}else return;this.verticalDragToForward?(W?this.setFocalOffset(this._focalOffsetEnd.x+Y,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(Y,0,!0),this.forward(-K,!0)):W?this.setFocalOffset(this._focalOffsetEnd.x+Y,this._focalOffsetEnd.y+K,this._focalOffsetEnd.z,!0):this.truck(Y,K,!0)},this._rotateInternal=(j,Q)=>{const W=Wi*this.azimuthRotateSpeed*j/this._elementRect.height,Y=Wi*this.polarRotateSpeed*Q/this._elementRect.height;this.rotate(W,Y,!0)},this._dollyInternal=(j,Q,W)=>{const Y=Math.pow(.95,-j*this.dollySpeed),K=this._sphericalEnd.radius,se=this._sphericalEnd.radius*Y,ce=yn.MathUtils.clamp(se,this.minDistance,this.maxDistance),ge=ce-se;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(se,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(ge,!0),this._dollyToNoClamp(ce,!0)):this._dollyToNoClamp(ce,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?se:ce)-K,this._dollyControlCoord.set(Q,W)),this._lastDollyDirection=Math.sign(-j)},this._zoomInternal=(j,Q,W)=>{const Y=Math.pow(.95,j*this.dollySpeed),K=this._zoom,se=this._zoom*Y;this.zoomTo(se,!0),this.dollyToCursor&&(this._changedZoom+=se-K,this._dollyControlCoord.set(Q,W))},typeof yn=="undefined"&&tr.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new yn.Quaternion().setFromUnitVectors(this._camera.up,on),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=yt.NONE,this._target=new yn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new yn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new yn.Spherical().setFromVector3(Nn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new yn.Vector3,new yn.Vector3,new yn.Vector3,new yn.Vector3],this._updateNearPlaneCorners(),this._boundary=new yn.Box3(new yn.Vector3(-1/0,-1/0,-1/0),new yn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new yn.Vector2,this.mouseButtons={left:yt.ROTATE,middle:yt.DOLLY,right:yt.TRUCK,wheel:Ur(this._camera)?yt.DOLLY:Dr(this._camera)?yt.ZOOM:yt.NONE},this.touches={one:yt.TOUCH_ROTATE,two:Ur(this._camera)?yt.TOUCH_DOLLY_TRUCK:Dr(this._camera)?yt.TOUCH_ZOOM_TRUCK:yt.NONE,three:yt.TOUCH_TRUCK};const l=new yn.Vector2,c=new yn.Vector2,p=new yn.Vector2,h=j=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const Y=this._domElement.getBoundingClientRect(),K=j.clientX/Y.width,se=j.clientY/Y.height;if(K<this._interactiveArea.left||K>this._interactiveArea.right||se<this._interactiveArea.top||se>this._interactiveArea.bottom)return}const Q=j.pointerType!=="mouse"?null:(j.buttons&cn.LEFT)===cn.LEFT?cn.LEFT:(j.buttons&cn.MIDDLE)===cn.MIDDLE?cn.MIDDLE:(j.buttons&cn.RIGHT)===cn.RIGHT?cn.RIGHT:null;if(Q!==null){const Y=this._findPointerByMouseButton(Q);Y&&this._disposePointer(Y)}if((j.buttons&cn.LEFT)===cn.LEFT&&this._lockedPointer)return;const W={pointerId:j.pointerId,clientX:j.clientX,clientY:j.clientY,deltaX:0,deltaY:0,mouseButton:Q};this._activePointers.push(W),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.addEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",b),this._isDragging=!0,L(j)},g=j=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const Y=this._domElement.getBoundingClientRect(),K=j.clientX/Y.width,se=j.clientY/Y.height;if(K<this._interactiveArea.left||K>this._interactiveArea.right||se<this._interactiveArea.top||se>this._interactiveArea.bottom)return}const Q=(j.buttons&cn.LEFT)===cn.LEFT?cn.LEFT:(j.buttons&cn.MIDDLE)===cn.MIDDLE?cn.MIDDLE:(j.buttons&cn.RIGHT)===cn.RIGHT?cn.RIGHT:null;if(Q!==null){const Y=this._findPointerByMouseButton(Q);Y&&this._disposePointer(Y)}const W={pointerId:1,clientX:j.clientX,clientY:j.clientY,deltaX:0,deltaY:0,mouseButton:(j.buttons&cn.LEFT)===cn.LEFT?cn.LEFT:(j.buttons&cn.MIDDLE)===cn.LEFT?cn.MIDDLE:(j.buttons&cn.RIGHT)===cn.LEFT?cn.RIGHT:null};this._activePointers.push(W),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.addEventListener("mousemove",_),this._domElement.ownerDocument.addEventListener("mouseup",T),this._isDragging=!0,L(j)},v=j=>{j.cancelable&&j.preventDefault();const Q=j.pointerId,W=this._lockedPointer||this._findPointerById(Q);if(W){if(W.clientX=j.clientX,W.clientY=j.clientY,W.deltaX=j.movementX,W.deltaY=j.movementY,this._state=0,j.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(j.buttons&cn.LEFT)===cn.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(j.buttons&cn.MIDDLE)===cn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(j.buttons&cn.RIGHT)===cn.RIGHT&&(this._state=this._state|this.mouseButtons.right);O()}},_=j=>{const Q=this._lockedPointer||this._findPointerById(1);Q&&(Q.clientX=j.clientX,Q.clientY=j.clientY,Q.deltaX=j.movementX,Q.deltaY=j.movementY,this._state=0,(this._lockedPointer||(j.buttons&cn.LEFT)===cn.LEFT)&&(this._state=this._state|this.mouseButtons.left),(j.buttons&cn.MIDDLE)===cn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(j.buttons&cn.RIGHT)===cn.RIGHT&&(this._state=this._state|this.mouseButtons.right),O())},b=j=>{const Q=this._findPointerById(j.pointerId);if(!(Q&&Q===this._lockedPointer)){if(Q&&this._disposePointer(Q),j.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=yt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=yt.NONE;k()}},T=()=>{const j=this._findPointerById(1);j&&j===this._lockedPointer||(j&&this._disposePointer(j),this._state=yt.NONE,k())};let R=-1;const F=j=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===yt.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const se=this._domElement.getBoundingClientRect(),ce=j.clientX/se.width,ge=j.clientY/se.height;if(ce<this._interactiveArea.left||ce>this._interactiveArea.right||ge<this._interactiveArea.top||ge>this._interactiveArea.bottom)return}if(j.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===yt.ROTATE||this.mouseButtons.wheel===yt.TRUCK){const se=performance.now();R-se<1e3&&this._getClientRect(this._elementRect),R=se}const Q=Wn?-1:-3,W=j.deltaMode===1?j.deltaY/Q:j.deltaY/(Q*10),Y=this.dollyToCursor?(j.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,K=this.dollyToCursor?(j.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case yt.ROTATE:{this._rotateInternal(j.deltaX,j.deltaY),this._isUserControllingRotate=!0;break}case yt.TRUCK:{this._truckInternal(j.deltaX,j.deltaY,!1),this._isUserControllingTruck=!0;break}case yt.OFFSET:{this._truckInternal(j.deltaX,j.deltaY,!0),this._isUserControllingOffset=!0;break}case yt.DOLLY:{this._dollyInternal(-W,Y,K),this._isUserControllingDolly=!0;break}case yt.ZOOM:{this._zoomInternal(-W,Y,K),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},G=j=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Ih.ACTION.NONE){const Q=j instanceof PointerEvent?j.pointerId:(j instanceof MouseEvent,0),W=this._findPointerById(Q);W&&this._disposePointer(W),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("mouseup",T);return}j.preventDefault()}},L=j=>{if(!this._enabled)return;if(Ui(this._activePointers,wr),this._getClientRect(this._elementRect),l.copy(wr),c.copy(wr),this._activePointers.length>=2){const W=wr.x-this._activePointers[1].clientX,Y=wr.y-this._activePointers[1].clientY,K=Math.sqrt(W*W+Y*Y);p.set(0,K);const se=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,ce=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;c.set(se,ce)}if(this._state=0,!j)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in j&&j.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(j.buttons&cn.LEFT)===cn.LEFT&&(this._state=this._state|this.mouseButtons.left),(j.buttons&cn.MIDDLE)===cn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(j.buttons&cn.RIGHT)===cn.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&yt.ROTATE)===yt.ROTATE||(this._state&yt.TOUCH_ROTATE)===yt.TOUCH_ROTATE||(this._state&yt.TOUCH_DOLLY_ROTATE)===yt.TOUCH_DOLLY_ROTATE||(this._state&yt.TOUCH_ZOOM_ROTATE)===yt.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&yt.TRUCK)===yt.TRUCK||(this._state&yt.TOUCH_TRUCK)===yt.TOUCH_TRUCK||(this._state&yt.TOUCH_DOLLY_TRUCK)===yt.TOUCH_DOLLY_TRUCK||(this._state&yt.TOUCH_ZOOM_TRUCK)===yt.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&yt.DOLLY)===yt.DOLLY||(this._state&yt.TOUCH_DOLLY)===yt.TOUCH_DOLLY||(this._state&yt.TOUCH_DOLLY_TRUCK)===yt.TOUCH_DOLLY_TRUCK||(this._state&yt.TOUCH_DOLLY_OFFSET)===yt.TOUCH_DOLLY_OFFSET||(this._state&yt.TOUCH_DOLLY_ROTATE)===yt.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&yt.ZOOM)===yt.ZOOM||(this._state&yt.TOUCH_ZOOM)===yt.TOUCH_ZOOM||(this._state&yt.TOUCH_ZOOM_TRUCK)===yt.TOUCH_ZOOM_TRUCK||(this._state&yt.TOUCH_ZOOM_OFFSET)===yt.TOUCH_ZOOM_OFFSET||(this._state&yt.TOUCH_ZOOM_ROTATE)===yt.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&yt.OFFSET)===yt.OFFSET||(this._state&yt.TOUCH_OFFSET)===yt.TOUCH_OFFSET||(this._state&yt.TOUCH_DOLLY_OFFSET)===yt.TOUCH_DOLLY_OFFSET||(this._state&yt.TOUCH_ZOOM_OFFSET)===yt.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},O=()=>{if(!this._enabled)return;Ui(this._activePointers,wr);const Q=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,W=Q?-Q.deltaX:c.x-wr.x,Y=Q?-Q.deltaY:c.y-wr.y;if(c.copy(wr),((this._state&yt.ROTATE)===yt.ROTATE||(this._state&yt.TOUCH_ROTATE)===yt.TOUCH_ROTATE||(this._state&yt.TOUCH_DOLLY_ROTATE)===yt.TOUCH_DOLLY_ROTATE||(this._state&yt.TOUCH_ZOOM_ROTATE)===yt.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(W,Y),this._isUserControllingRotate=!0),(this._state&yt.DOLLY)===yt.DOLLY||(this._state&yt.ZOOM)===yt.ZOOM){const K=this.dollyToCursor?(l.x-this._elementRect.x)/this._elementRect.width*2-1:0,se=this.dollyToCursor?(l.y-this._elementRect.y)/this._elementRect.height*-2+1:0,ce=this.dollyDragInverted?-1:1;(this._state&yt.DOLLY)===yt.DOLLY?(this._dollyInternal(ce*Y*nn,K,se),this._isUserControllingDolly=!0):(this._zoomInternal(ce*Y*nn,K,se),this._isUserControllingZoom=!0)}if((this._state&yt.TOUCH_DOLLY)===yt.TOUCH_DOLLY||(this._state&yt.TOUCH_ZOOM)===yt.TOUCH_ZOOM||(this._state&yt.TOUCH_DOLLY_TRUCK)===yt.TOUCH_DOLLY_TRUCK||(this._state&yt.TOUCH_ZOOM_TRUCK)===yt.TOUCH_ZOOM_TRUCK||(this._state&yt.TOUCH_DOLLY_OFFSET)===yt.TOUCH_DOLLY_OFFSET||(this._state&yt.TOUCH_ZOOM_OFFSET)===yt.TOUCH_ZOOM_OFFSET||(this._state&yt.TOUCH_DOLLY_ROTATE)===yt.TOUCH_DOLLY_ROTATE||(this._state&yt.TOUCH_ZOOM_ROTATE)===yt.TOUCH_ZOOM_ROTATE){const K=wr.x-this._activePointers[1].clientX,se=wr.y-this._activePointers[1].clientY,ce=Math.sqrt(K*K+se*se),ge=p.y-ce;p.set(0,ce);const le=this.dollyToCursor?(c.x-this._elementRect.x)/this._elementRect.width*2-1:0,xe=this.dollyToCursor?(c.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&yt.TOUCH_DOLLY)===yt.TOUCH_DOLLY||(this._state&yt.TOUCH_DOLLY_ROTATE)===yt.TOUCH_DOLLY_ROTATE||(this._state&yt.TOUCH_DOLLY_TRUCK)===yt.TOUCH_DOLLY_TRUCK||(this._state&yt.TOUCH_DOLLY_OFFSET)===yt.TOUCH_DOLLY_OFFSET?(this._dollyInternal(ge*nn,le,xe),this._isUserControllingDolly=!0):(this._zoomInternal(ge*nn,le,xe),this._isUserControllingZoom=!0)}((this._state&yt.TRUCK)===yt.TRUCK||(this._state&yt.TOUCH_TRUCK)===yt.TOUCH_TRUCK||(this._state&yt.TOUCH_DOLLY_TRUCK)===yt.TOUCH_DOLLY_TRUCK||(this._state&yt.TOUCH_ZOOM_TRUCK)===yt.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(W,Y,!1),this._isUserControllingTruck=!0),((this._state&yt.OFFSET)===yt.OFFSET||(this._state&yt.TOUCH_OFFSET)===yt.TOUCH_OFFSET||(this._state&yt.TOUCH_DOLLY_OFFSET)===yt.TOUCH_DOLLY_OFFSET||(this._state&yt.TOUCH_ZOOM_OFFSET)===yt.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(W,Y,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},k=()=>{Ui(this._activePointers,wr),c.copy(wr),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mouseup",T),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",P),this._domElement.ownerDocument.addEventListener("pointerlockerror",z),this._domElement.ownerDocument.addEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",b),L())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",P),this._domElement.ownerDocument.removeEventListener("pointerlockerror",z))};const P=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},z=()=>{this.unlockPointer()};this._addAllEventListeners=j=>{this._domElement=j,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",h),pr&&this._domElement.addEventListener("mousedown",g),this._domElement.addEventListener("pointercancel",b),this._domElement.addEventListener("wheel",F,{passive:!1}),this._domElement.addEventListener("contextmenu",G)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",h),this._domElement.removeEventListener("mousedown",g),this._domElement.removeEventListener("pointercancel",b),this._domElement.removeEventListener("wheel",F,{passive:!1}),this._domElement.removeEventListener("contextmenu",G),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.removeEventListener("pointerlockchange",P),this._domElement.ownerDocument.removeEventListener("pointerlockerror",z))},this.cancel=()=>{this._state!==yt.NONE&&(this._state=yt.NONE,this._activePointers.length=0,k())},r&&this.connect(r),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=zn(t.width,0,1),this._interactiveArea.height=zn(t.height,0,1),this._interactiveArea.x=zn(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=zn(t.x,0,1-this._interactiveArea.height)}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}rotate(t,r,l=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,l)}rotateAzimuthTo(t,r=!1){return this.rotateTo(t,this._sphericalEnd.phi,r)}rotatePolarTo(t,r=!1){return this.rotateTo(this._sphericalEnd.theta,t,r)}rotateTo(t,r,l=!1){this._isUserControllingRotate=!1;const c=zn(t,this.minAzimuthAngle,this.maxAzimuthAngle),p=zn(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=c,this._sphericalEnd.phi=p,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,l||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const h=!l||hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(h)}dolly(t,r=!1){return this.dollyTo(this._sphericalEnd.radius-t,r)}dollyTo(t,r=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Nr.NONE,this._changedDolly=0,this._dollyToNoClamp(zn(t,this.minDistance,this.maxDistance),r)}_dollyToNoClamp(t,r=!1){const l=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const h=this._collisionTest(),g=hn(h,this._spherical.radius);if(!(l>t)&&g)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,h)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,r||(this._spherical.radius=this._sphericalEnd.radius);const p=!r||hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}dollyInFixed(t,r=!1){this._targetEnd.add(this._getCameraDirection(Ii).multiplyScalar(t)),r||this._target.copy(this._targetEnd);const l=!r||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(l)}zoom(t,r=!1){return this.zoomTo(this._zoomEnd+t,r)}zoomTo(t,r=!1){this._isUserControllingZoom=!1,this._zoomEnd=zn(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,r||(this._zoom=this._zoomEnd);const l=!r||hn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(l)}pan(t,r,l=!1){return tr.warn("`pan` has been renamed to `truck`"),this.truck(t,r,l)}truck(t,r,l=!1){this._camera.updateMatrix(),Xi.setFromMatrixColumn(this._camera.matrix,0),ht.setFromMatrixColumn(this._camera.matrix,1),Xi.multiplyScalar(t),ht.multiplyScalar(-r);const c=Nn.copy(Xi).add(ht),p=kn.copy(this._targetEnd).add(c);return this.moveTo(p.x,p.y,p.z,l)}forward(t,r=!1){Nn.setFromMatrixColumn(this._camera.matrix,0),Nn.crossVectors(this._camera.up,Nn),Nn.multiplyScalar(t);const l=kn.copy(this._targetEnd).add(Nn);return this.moveTo(l.x,l.y,l.z,r)}elevate(t,r=!1){return Nn.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+Nn.x,this._targetEnd.y+Nn.y,this._targetEnd.z+Nn.z,r)}moveTo(t,r,l,c=!1){this._isUserControllingTruck=!1;const p=Nn.set(t,r,l).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,p,this.boundaryFriction),this._needsUpdate=!0,c||this._target.copy(this._targetEnd);const h=!c||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(h)}lookInDirectionOf(t,r,l,c=!1){const g=Nn.set(t,r,l).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(g.x,g.y,g.z,c)}fitToBox(t,r,{cover:l=!1,paddingLeft:c=0,paddingRight:p=0,paddingBottom:h=0,paddingTop:g=0}={}){const v=[],_=t.isBox3?wo.copy(t):wo.setFromObject(t);_.isEmpty()&&(tr.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const b=Cn(this._sphericalEnd.theta,os),T=Cn(this._sphericalEnd.phi,os);v.push(this.rotateTo(b,T,r));const R=Nn.setFromSpherical(this._sphericalEnd).normalize(),F=Ms.setFromUnitVectors(R,Jr),G=hn(Math.abs(R.y),1);G&&F.multiply(Pc.setFromAxisAngle(on,b)),F.multiply(this._yAxisUpSpaceInverse);const L=Aa.makeEmpty();kn.copy(_.min).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.min).setX(_.max.x).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.min).setY(_.max.y).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.max).setZ(_.min.z).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.min).setZ(_.max.z).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.max).setY(_.min.y).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.max).setX(_.min.x).applyQuaternion(F),L.expandByPoint(kn),kn.copy(_.max).applyQuaternion(F),L.expandByPoint(kn),L.min.x-=c,L.min.y-=h,L.max.x+=p,L.max.y+=g,F.setFromUnitVectors(Jr,R),G&&F.premultiply(Pc.invert()),F.premultiply(this._yAxisUpSpace);const O=L.getSize(Nn),k=L.getCenter(kn).applyQuaternion(F);if(Ur(this._camera)){const P=this.getDistanceToFitBox(O.x,O.y,O.z,l);v.push(this.moveTo(k.x,k.y,k.z,r)),v.push(this.dollyTo(P,r)),v.push(this.setFocalOffset(0,0,0,r))}else if(Dr(this._camera)){const P=this._camera,z=P.right-P.left,j=P.top-P.bottom,Q=l?Math.max(z/O.x,j/O.y):Math.min(z/O.x,j/O.y);v.push(this.moveTo(k.x,k.y,k.z,r)),v.push(this.zoomTo(Q,r)),v.push(this.setFocalOffset(0,0,0,r))}return Promise.all(v)}fitToSphere(t,r){const l=[],p=t instanceof yn.Sphere?Dc.copy(t):Ih.createBoundingSphere(t,Dc);if(l.push(this.moveTo(p.center.x,p.center.y,p.center.z,r)),Ur(this._camera)){const h=this.getDistanceToFitSphere(p.radius);l.push(this.dollyTo(h,r))}else if(Dr(this._camera)){const h=this._camera.right-this._camera.left,g=this._camera.top-this._camera.bottom,v=2*p.radius,_=Math.min(h/v,g/v);l.push(this.zoomTo(_,r))}return l.push(this.setFocalOffset(0,0,0,r)),Promise.all(l)}setLookAt(t,r,l,c,p,h,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Nr.NONE,this._changedDolly=0;const v=kn.set(c,p,h),_=Nn.set(t,r,l);this._targetEnd.copy(v),this._sphericalEnd.setFromVector3(_.sub(v).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const b=!g||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold)&&hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}lerpLookAt(t,r,l,c,p,h,g,v,_,b,T,R,F,G=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Nr.NONE,this._changedDolly=0;const L=Nn.set(c,p,h),O=kn.set(t,r,l);$n.setFromVector3(O.sub(L).applyQuaternion(this._yAxisUpSpace));const k=Mr.set(b,T,R),P=kn.set(g,v,_);Vi.setFromVector3(P.sub(k).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(L.lerp(k,F));const z=Vi.theta-$n.theta,j=Vi.phi-$n.phi,Q=Vi.radius-$n.radius;this._sphericalEnd.set($n.radius+Q*F,$n.phi+j*F,$n.theta+z*F),this.normalizeRotations(),this._needsUpdate=!0,G||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const W=!G||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold)&&hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(W)}setPosition(t,r,l,c=!1){return this.setLookAt(t,r,l,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,c)}setTarget(t,r,l,c=!1){const p=this.getPosition(Nn),h=this.setLookAt(p.x,p.y,p.z,t,r,l,c);return this._sphericalEnd.phi=zn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),h}setFocalOffset(t,r,l,c=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,r,l),this._needsUpdate=!0,c||this._focalOffset.copy(this._focalOffsetEnd);const p=!c||hn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&hn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&hn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(p)}setOrbitPoint(t,r,l){this._camera.updateMatrixWorld(),Xi.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ht.setFromMatrixColumn(this._camera.matrixWorldInverse,1),ir.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const c=Nn.set(t,r,l),p=c.distanceTo(this._camera.position),h=c.sub(this._camera.position);Xi.multiplyScalar(h.x),ht.multiplyScalar(h.y),ir.multiplyScalar(h.z),Nn.copy(Xi).add(ht).add(ir),Nn.z=Nn.z+p,this.dollyTo(p,!1),this.setFocalOffset(-Nn.x,Nn.y,-Nn.z,!1),this.moveTo(t,r,l,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,r,l,c){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new yn.Vector4,typeof t=="number"?this._viewport.set(t,r,l,c):this._viewport.copy(t)}getDistanceToFitBox(t,r,l,c=!1){if(us(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const p=t/r,h=this._camera.getEffectiveFOV()*ot,g=this._camera.aspect;return((c?p>g:p<g)?r:t/g)*.5/Math.tan(h*.5)+l*.5}getDistanceToFitSphere(t){if(us(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const r=this._camera.getEffectiveFOV()*ot,l=Math.atan(Math.tan(r*.5)*this._camera.aspect)*2,c=1<this._camera.aspect?r:l;return t/Math.sin(c*.5)}getTarget(t,r=!0){return(t&&t.isVector3?t:new yn.Vector3).copy(r?this._targetEnd:this._target)}getPosition(t,r=!0){return(t&&t.isVector3?t:new yn.Vector3).setFromSpherical(r?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r?this._targetEnd:this._target)}getSpherical(t,r=!0){return(t&&t instanceof yn.Spherical?t:new yn.Spherical).copy(r?this._sphericalEnd:this._spherical)}getFocalOffset(t,r=!0){return(t&&t.isVector3?t:new yn.Vector3).copy(r?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Wi,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Wi),this._spherical.theta+=Wi*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Wi)}reset(t=!1){if(!hn(this._camera.up.x,this._cameraUp0.x)||!hn(this._camera.up.y,this._cameraUp0.y)||!hn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const l=this.getPosition(Nn);this.updateCameraUp(),this.setPosition(l.x,l.y,l.z)}const r=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(r)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,on),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=Nn.subVectors(this._target,this._camera.position).normalize(),r=kn.crossVectors(t,this._camera.up);this._camera.up.crossVectors(r,t),this._camera.updateMatrixWorld();const l=this.getPosition(Nn);this.updateCameraUp(),this.setPosition(l.x,l.y,l.z)}update(t){const r=this._sphericalEnd.theta-this._spherical.theta,l=this._sphericalEnd.phi-this._spherical.phi,c=this._sphericalEnd.radius-this._spherical.radius,p=Jt.subVectors(this._targetEnd,this._target),h=Zn.subVectors(this._focalOffsetEnd,this._focalOffset),g=this._zoomEnd-this._zoom;if(Kt(r))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Cr(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,T,1/0,t),this._needsUpdate=!0}if(Kt(l))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Cr(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,T,1/0,t),this._needsUpdate=!0}if(Kt(c))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const T=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Cr(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,T,this.maxSpeed,t),this._needsUpdate=!0}if(Kt(p.x)&&Kt(p.y)&&Kt(p.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const T=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;vi(this._target,this._targetEnd,this._targetVelocity,T,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(Kt(h.x)&&Kt(h.y)&&Kt(h.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const T=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;vi(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,T,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(Kt(g))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const T=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Cr(this._zoom,this._zoomEnd,this._zoomVelocity,T,1/0,t)}if(this.dollyToCursor){if(Ur(this._camera)&&this._changedDolly!==0){const T=this._spherical.radius-this._lastDistance,R=this._camera,F=this._getCameraDirection(Ii),G=Nn.copy(F).cross(R.up).normalize();G.lengthSq()===0&&(G.x=1);const L=kn.crossVectors(G,F),O=this._sphericalEnd.radius*Math.tan(R.getEffectiveFOV()*ot*.5),P=(this._sphericalEnd.radius-T-this._sphericalEnd.radius)/this._sphericalEnd.radius,z=Mr.copy(this._targetEnd).add(G.multiplyScalar(this._dollyControlCoord.x*O*R.aspect)).add(L.multiplyScalar(this._dollyControlCoord.y*O)),j=Nn.copy(this._targetEnd).lerp(z,P),Q=this._lastDollyDirection===Nr.IN&&this._spherical.radius<=this.minDistance,W=this._lastDollyDirection===Nr.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(Q||W)){this._sphericalEnd.radius-=T,this._spherical.radius-=T;const K=kn.copy(F).multiplyScalar(-T);j.add(K)}this._boundary.clampPoint(j,j);const Y=kn.subVectors(j,this._targetEnd);this._targetEnd.copy(j),this._target.add(Y),this._changedDolly-=T,Kt(this._changedDolly)&&(this._changedDolly=0)}else if(Dr(this._camera)&&this._changedZoom!==0){const T=this._zoom-this._lastZoom,R=this._camera,F=Nn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(R.near+R.far)/(R.near-R.far)).unproject(R),G=kn.set(0,0,-1).applyQuaternion(R.quaternion),L=Mr.copy(F).add(G.multiplyScalar(-F.dot(R.up))),k=-(this._zoom-T-this._zoom)/this._zoom,P=this._getCameraDirection(Ii),z=this._targetEnd.dot(P),j=Nn.copy(this._targetEnd).lerp(L,k),Q=j.dot(P),W=P.multiplyScalar(Q-z);j.sub(W),this._boundary.clampPoint(j,j);const Y=kn.subVectors(j,this._targetEnd);this._targetEnd.copy(j),this._target.add(Y),this._changedZoom-=T,Kt(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const v=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,v),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Kt(this._focalOffset.x)||!Kt(this._focalOffset.y)||!Kt(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Xi.setFromMatrixColumn(this._camera.matrix,0),ht.setFromMatrixColumn(this._camera.matrix,1),ir.setFromMatrixColumn(this._camera.matrix,2),Xi.multiplyScalar(this._focalOffset.x),ht.multiplyScalar(-this._focalOffset.y),ir.multiplyScalar(this._focalOffset.z),Nn.copy(Xi).add(ht).add(ir),this._camera.position.add(Nn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Nn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const b=this._needsUpdate;return b&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):b?(this.dispatchEvent({type:"update"}),Kt(r,this.restThreshold)&&Kt(l,this.restThreshold)&&Kt(c,this.restThreshold)&&Kt(p.x,this.restThreshold)&&Kt(p.y,this.restThreshold)&&Kt(p.z,this.restThreshold)&&Kt(h.x,this.restThreshold)&&Kt(h.y,this.restThreshold)&&Kt(h.z,this.restThreshold)&&Kt(g,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!b&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=b,this._needsUpdate=!1,b}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:kr(this.maxDistance),minZoom:this.minZoom,maxZoom:kr(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:kr(this.maxPolarAngle),minAzimuthAngle:kr(this.minAzimuthAngle),maxAzimuthAngle:kr(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Nn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,r=!1){const l=JSON.parse(t);this.enabled=l.enabled,this.minDistance=l.minDistance,this.maxDistance=mr(l.maxDistance),this.minZoom=l.minZoom,this.maxZoom=mr(l.maxZoom),this.minPolarAngle=l.minPolarAngle,this.maxPolarAngle=mr(l.maxPolarAngle),this.minAzimuthAngle=mr(l.minAzimuthAngle),this.maxAzimuthAngle=mr(l.maxAzimuthAngle),this.smoothTime=l.smoothTime,this.draggingSmoothTime=l.draggingSmoothTime,this.dollySpeed=l.dollySpeed,this.truckSpeed=l.truckSpeed,this.dollyToCursor=l.dollyToCursor,this.verticalDragToForward=l.verticalDragToForward,this._target0.fromArray(l.target0),this._position0.fromArray(l.position0),this._zoom0=l.zoom0,this._focalOffset0.fromArray(l.focalOffset0),this.moveTo(l.target[0],l.target[1],l.target[2],r),$n.setFromVector3(Nn.fromArray(l.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo($n.theta,$n.phi,r),this.dollyTo($n.radius,r),this.zoomTo(l.zoom,r),this.setFocalOffset(l.focalOffset[0],l.focalOffset[1],l.focalOffset[2],r),this._needsUpdate=!0}connect(t){if(this._domElement){tr.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",De),this._addAllEventListeners(t)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(r=>r.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(r=>r.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,r,l){const c=r.lengthSq();if(c===0)return t;const p=kn.copy(r).add(t),g=this._boundary.clampPoint(p,Mr).sub(p),v=g.lengthSq();if(v===0)return t.add(r);if(v===c)return t;if(l===0)return t.add(r).add(g);{const _=1+l*v/r.dot(g);return t.add(kn.copy(r).multiplyScalar(_)).add(g.multiplyScalar(1-l))}}_updateNearPlaneCorners(){if(Ur(this._camera)){const t=this._camera,r=t.near,l=t.getEffectiveFOV()*ot,c=Math.tan(l*.5)*r,p=c*t.aspect;this._nearPlaneCorners[0].set(-p,-c,0),this._nearPlaneCorners[1].set(p,-c,0),this._nearPlaneCorners[2].set(p,c,0),this._nearPlaneCorners[3].set(-p,c,0)}else if(Dr(this._camera)){const t=this._camera,r=1/t.zoom,l=t.left*r,c=t.right*r,p=t.top*r,h=t.bottom*r;this._nearPlaneCorners[0].set(l,p,0),this._nearPlaneCorners[1].set(c,p,0),this._nearPlaneCorners[2].set(c,h,0),this._nearPlaneCorners[3].set(l,h,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||us(this._camera,"_collisionTest"))return t;const l=this._getTargetDirection(Ii);Ka.lookAt(cr,l,this._camera.up);for(let c=0;c<4;c++){const p=kn.copy(this._nearPlaneCorners[c]);p.applyMatrix4(Ka);const h=Mr.addVectors(this._target,p);lm.set(h,l),lm.far=this._spherical.radius+1;const g=lm.intersectObjects(this.colliderMeshes);g.length!==0&&g[0].distance<t&&(t=g[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=r.width,t.height=r.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(r=>{const l=()=>{this.removeEventListener("rest",l),r()};this.addEventListener("rest",l)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return tr.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){tr.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return tr.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){tr.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,r=new yn.Sphere){const l=r,c=l.center;wo.makeEmpty(),t.traverseVisible(h=>{h.isMesh&&wo.expandByObject(h)}),wo.getCenter(c);let p=0;return t.traverseVisible(h=>{if(!h.isMesh)return;const g=h,v=g.geometry.clone();v.applyMatrix4(g.matrixWorld);const b=v.attributes.position;for(let T=0,R=b.count;T<R;T++)Nn.fromBufferAttribute(b,T),p=Math.max(p,c.distanceToSquared(Nn))}),l.radius=Math.sqrt(p),l}}const _E=(0,d.forwardRef)((i,t)=>{(0,d.useMemo)(()=>{const W={Box3:s.Box3,MathUtils:{clamp:s.MathUtils.clamp},Matrix4:s.Matrix4,Quaternion:s.Quaternion,Raycaster:s.Raycaster,Sphere:s.Sphere,Spherical:s.Spherical,Vector2:s.Vector2,Vector3:s.Vector3,Vector4:s.Vector4};Ih.install({THREE:W}),(0,E.e)({CameraControlsImpl:Ih})},[]);const Q=i,{camera:r,domElement:l,makeDefault:c,onStart:p,onEnd:h,onChange:g,regress:v}=Q,_=_n(Q,["camera","domElement","makeDefault","onStart","onEnd","onChange","regress"]),b=(0,E.z)(W=>W.camera),T=(0,E.z)(W=>W.gl),R=(0,E.z)(W=>W.invalidate),F=(0,E.z)(W=>W.events),G=(0,E.z)(W=>W.setEvents),L=(0,E.z)(W=>W.set),O=(0,E.z)(W=>W.get),k=(0,E.z)(W=>W.performance),P=r||b,z=l||F.connected||T.domElement,j=(0,d.useMemo)(()=>new Ih(P),[P]);return(0,E.A)((W,Y)=>{j.enabled&&j.update(Y)},-1),(0,d.useEffect)(()=>(j.connect(z),()=>void j.disconnect()),[z,j]),(0,d.useEffect)(()=>{const W=se=>{R(),v&&k.regress(),g&&g(se)},Y=se=>{p&&p(se)},K=se=>{h&&h(se)};return j.addEventListener("update",W),j.addEventListener("controlstart",Y),j.addEventListener("controlend",K),j.addEventListener("control",W),j.addEventListener("transitionstart",W),j.addEventListener("wake",W),()=>{j.removeEventListener("update",W),j.removeEventListener("controlstart",Y),j.removeEventListener("controlend",K),j.removeEventListener("control",W),j.removeEventListener("transitionstart",W),j.removeEventListener("wake",W)}},[j,p,h,R,G,v,g]),(0,d.useEffect)(()=>{if(c){const W=O().controls;return L({controls:j}),()=>L({controls:W})}},[c,j]),d.createElement("primitive",(0,w.Z)({ref:t,object:j},_))});function cm(i,t){const b=Kn({unsuspend:"loadedmetadata",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,playsInline:!0},t),{unsuspend:r,start:l,crossOrigin:c,muted:p,loop:h}=b,g=_n(b,["unsuspend","start","crossOrigin","muted","loop"]),v=(0,E.z)(T=>T.gl),_=(0,cc.Rq)(()=>new Promise((T,R)=>{const F=Object.assign(document.createElement("video"),Kn({src:typeof i=="string"&&i||void 0,srcObject:i instanceof MediaStream&&i||void 0,crossOrigin:c,loop:h,muted:p},g)),G=new s.VideoTexture(F);"colorSpace"in G?G.colorSpace=v.outputColorSpace:G.encoding=v.outputEncoding,F.addEventListener(r,()=>T(G))}),[i]);return(0,d.useEffect)(()=>void(l&&_.image.play()),[_,l]),_}var vA=A(25108);const B0=new s.Vector3(0,0,-1),i2=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Vector3,l=new s.Vector3,c=new s.Vector3;return function(p,h,g,v){return i.copy(p),t.copy(h),r.copy(g),l.copy(t).sub(i),c.copy(r).sub(i),v.crossVectors(c,l).normalize()}}();function EE(i,t){return i.clone().add(t).multiplyScalar(.5)}const o2=d.forwardRef((k,O)=>{var P=k,{points:i=Dt.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:t,facialTransformationMatrix:r,faceBlendshapes:l,offset:c,offsetScalar:p=80,width:h,height:g,depth:v=1,verticalTri:_=[159,386,152],origin:b,eyes:T=!0,eyesAsOrigin:R=!1,debug:F=!1,children:G}=P,L=_n(P,["points","face","facialTransformationMatrix","faceBlendshapes","offset","offsetScalar","width","height","depth","verticalTri","origin","eyes","eyesAsOrigin","debug","children"]);var z;t&&(i=t.keypoints,vA.warn("Facemesh `face` prop is deprecated: use `points` instead"));const j=d.useRef(null),Q=d.useRef(null),W=d.useRef(null),Y=d.useRef(null),K=d.useRef(null),se=d.useRef(null),ce=d.useRef(null),[ge]=d.useState(()=>new s.Vector3),[le]=d.useState(()=>new s.Object3D),[xe]=d.useState(()=>new s.Quaternion),[me]=d.useState(()=>new s.Vector3),{invalidate:Be}=(0,E.z)();d.useEffect(()=>{var Ce;(Ce=K.current)==null||Ce.geometry.setIndex(Dt.TRIANGULATION)},[]);const[ke]=d.useState(()=>new s.Vector3);d.useEffect(()=>{var Ce,Ee;const _e=(Ce=K.current)==null?void 0:Ce.geometry;if(!_e)return;if(_e.setFromPoints(i),_e.setDrawRange(0,Dt.TRIANGULATION.length),r)if(le.matrix.fromArray(r.data),le.matrix.decompose(le.position,le.quaternion,le.scale),le.rotation.y*=-1,le.rotation.z*=-1,xe.setFromEuler(le.rotation),c){var oe;le.position.y*=-1,le.position.z*=-1,(oe=j.current)==null||oe.position.copy(le.position.divideScalar(p))}else{var Ae;(Ae=j.current)==null||Ae.position.set(0,0,0)}else i2(i[_[0]],i[_[1]],i[_[2]],ge),xe.setFromUnitVectors(B0,ge);const Te=xe.clone().invert();if(_e.computeBoundingBox(),F&&Be(),_e.center(),_e.applyQuaternion(Te),(Ee=Y.current)==null||Ee.setRotationFromQuaternion(xe),T){if(!l)vA.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(se.current&&ce.current&&W.current)if(R){const ve=se.current._computeSphere(_e),Ge=ce.current._computeSphere(_e);b=EE(ve.center,Ge.center).negate(),se.current._update(_e,l,ve),ce.current._update(_e,l,Ge)}else se.current._update(_e,l),ce.current._update(_e,l)}if(W.current){if(b!==void 0)if(typeof b=="number"){const ve=_e.getAttribute("position");me.set(-ve.getX(b),-ve.getY(b),-ve.getZ(b))}else b.isVector3&&me.copy(b);else me.setScalar(0);W.current.position.copy(me)}if(Q.current){let ve=1;(h||g||v)&&(_e.boundingBox.getSize(ke),h&&(ve=h/ke.x),g&&(ve=g/ke.y),v&&(ve=v/ke.z)),Q.current.scale.setScalar(ve!==1?ve:1)}_e.computeVertexNormals(),_e.attributes.position.needsUpdate=!0},[i,r,l,le,c,p,h,g,v,_,b,T,F,Be,ge,xe,ke,me]);const Re=d.useMemo(()=>({outerRef:Y,meshRef:K,eyeRightRef:se,eyeLeftRef:ce}),[]);d.useImperativeHandle(O,()=>Re,[Re]);const[ze]=d.useState(()=>new s.Vector3),Pe=(z=K.current)==null?void 0:z.geometry.boundingBox,Ye=(Pe==null?void 0:Pe.getSize(ze).z)||1;return d.createElement("group",L,d.createElement("group",{ref:j},d.createElement("group",{ref:Y},d.createElement("group",{ref:Q},F?d.createElement(d.Fragment,null,d.createElement("axesHelper",{args:[Ye]}),d.createElement(kp,{points:[[0,0,0],[0,0,-Ye]],color:65535})):null,d.createElement("group",{ref:W},T&&l&&d.createElement("group",{name:"eyes"},d.createElement(Ke,{side:"left",ref:se,debug:F}),d.createElement(Ke,{side:"right",ref:ce,debug:F})),d.createElement("mesh",{ref:K,name:"face"},G,F?d.createElement(d.Fragment,null,Pe&&d.createElement("box3Helper",{args:[Pe]})):null))))))}),Ff={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},Ke=d.forwardRef(({side:i,debug:t=!0},r)=>{const l=d.useRef(null),c=d.useRef(null),[p]=d.useState(()=>new s.Sphere),h=d.useCallback(T=>{const R=T.getAttribute("position"),G=Ff.contourLandmarks[i].map(L=>new s.Vector3(R.getX(L),R.getY(L),R.getZ(L)));return p.center.set(0,0,0),G.forEach(L=>p.center.add(L)),p.center.divideScalar(G.length),p.radius=G[0].sub(G[1]).length()/2,p},[p,i]),[g]=d.useState(()=>new s.Euler),v=d.useCallback((T,R,F)=>{if(l.current){var G;(G=F)!==null&&G!==void 0||(F=h(T)),l.current.position.copy(F.center),l.current.scale.setScalar(F.radius)}if(R&&c.current){const L=Ff.blendshapes[i],O=R.categories[L[0]].score,k=R.categories[L[1]].score,P=R.categories[L[2]].score,z=R.categories[L[3]].score,j=Ff.fov.horizontal*s.MathUtils.DEG2RAD,Q=Ff.fov.vertical*s.MathUtils.DEG2RAD,W=j*.5*(z-P),Y=Q*.5*(O-k)*(i==="left"?1:-1);g.set(W,Y,0),c.current.setRotationFromEuler(g)}},[h,i,g]),_=d.useMemo(()=>({eyeMeshRef:l,irisDirRef:c,_computeSphere:h,_update:v}),[h,v]);d.useImperativeHandle(r,()=>_,[_]);const b=Ff.color[i];return d.createElement("group",null,d.createElement("group",{ref:l},t&&d.createElement("axesHelper",null),d.createElement("group",{ref:c},d.createElement(d.Fragment,null,t&&d.createElement(kp,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:b})))))}),Dt={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}};var rn=A(10203);const Rt=(0,d.createContext)({}),sn={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2-rc2/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function Tr({basePath:i=sn.basePath,options:t=sn.options,children:r}){const l=JSON.stringify(t),c=(0,cc.Rq)(()=>ss(this,null,function*(){return yield rn.n.forVisionTasks(i).then(p=>rn.jr.createFromOptions(p,t))}),[i,l]);return(0,d.useEffect)(()=>()=>{c==null||c.close(),(0,cc.ZH)([i,l])},[c,i,l]),d.createElement(Rt.Provider,{value:c},r)}function ei(){return(0,d.useContext)(Rt)}function pi(i,t){return i.clone().add(t).multiplyScalar(.5)}function ni(i,t,r){const l=i.localToWorld(t);return r.worldToLocal(l)}const ki=(0,d.createContext)({}),Si=(0,d.forwardRef)(({camera:i,autostart:t=!0,webcam:r=!0,webcamVideoTextureSrc:l,manualUpdate:c=!1,manualDetect:p=!1,onVideoFrame:h,smoothTime:g=.25,offset:v=!0,offsetScalar:_=80,eyes:b=!1,eyesAsOrigin:T=!0,depth:R=.15,debug:F=!1,facemesh:G,makeDefault:L},O)=>{var k,P;const z=(0,E.z)(Te=>Te.scene),j=(0,E.z)(Te=>Te.camera),Q=(0,E.z)(Te=>Te.set),W=(0,E.z)(Te=>Te.get),Y=i||j,K=(0,d.useRef)(null),se=(0,d.useRef)(null),[ce]=(0,d.useState)(()=>new s.Object3D),[ge]=(0,d.useState)(()=>new s.Vector3),[le]=(0,d.useState)(()=>new s.Vector3),[xe]=(0,d.useState)(()=>new s.Vector3),[me]=(0,d.useState)(()=>new s.Vector3),Be=(0,d.useCallback)(()=>{ce.parent=Y.parent;const Te=se.current;if(Te){const{outerRef:ve,eyeRightRef:Ge,eyeLeftRef:bt}=Te;if(Ge.current&&bt.current){const{irisDirRef:mt}=Ge.current,{irisDirRef:gt}=bt.current;mt.current&&gt.current&&ve.current&&(ge.copy(ni(mt.current,new s.Vector3(0,0,0),ve.current)),le.copy(ni(gt.current,new s.Vector3(0,0,0),ve.current)),ce.position.copy(ni(ve.current,pi(ge,le),Y.parent||z)),xe.copy(ni(mt.current,new s.Vector3(0,0,1),ve.current)),me.copy(ni(gt.current,new s.Vector3(0,0,1),ve.current)),ce.lookAt(ve.current.localToWorld(pi(xe,me))))}else ve.current&&(ce.position.copy(ni(ve.current,new s.Vector3(0,0,0),Y.parent||z)),ce.lookAt(ve.current.localToWorld(new s.Vector3(0,0,1))))}return ce},[Y,le,me,ge,xe,z,ce]),[ke]=(0,d.useState)(()=>new s.Object3D),Re=(0,d.useCallback)(function(Te,ve){if(Y){var Ge;(Ge=ve)!==null&&Ge!==void 0||(ve=Be()),g>0?(zu.damp3(ke.position,ve.position,g,Te,void 0,void 0,1e-9),zu.dampE(ke.rotation,ve.rotation,g,Te,void 0,void 0,1e-9)):(ke.position.copy(ve.position),ke.rotation.copy(ve.rotation)),Y.position.copy(ke.position),Y.rotation.copy(ke.rotation)}},[Y,Be,g,ke.position,ke.rotation]),[ze,Pe]=(0,d.useState)(),Ye=ei(),Ce=(0,d.useCallback)((Te,ve)=>{const Ge=Ye==null?void 0:Ye.detectForVideo(Te,ve);Pe(Ge)},[Ye]);(0,E.A)((Te,ve)=>{c||Re(ve)});const Ee=(0,d.useMemo)(()=>Object.assign(Object.create(s.EventDispatcher.prototype),{detect:Ce,computeTarget:Be,update:Re,facemeshApiRef:se,webcamApiRef:K,play:()=>{var Te,ve;(Te=K.current)==null||(ve=Te.videoTextureApiRef.current)==null||ve.texture.source.data.play()},pause:()=>{var Te,ve;(Te=K.current)==null||(ve=Te.videoTextureApiRef.current)==null||ve.texture.source.data.pause()}}),[Ce,Be,Re]);(0,d.useImperativeHandle)(O,()=>Ee,[Ee]),(0,d.useEffect)(()=>{const Te=ve=>{p||Ce(ve.texture.source.data,ve.time),h&&h(ve)};return Ee.addEventListener("videoFrame",Te),()=>{Ee.removeEventListener("videoFrame",Te)}},[Ee,Ce,Ye,p,h]),(0,d.useEffect)(()=>{if(L){const Te=W().controls;return Q({controls:Ee}),()=>Q({controls:Te})}},[L,Ee,W,Q]);const _e=ze==null?void 0:ze.faceLandmarks[0],oe=ze==null||(k=ze.facialTransformationMatrixes)==null?void 0:k[0],Ae=ze==null||(P=ze.faceBlendshapes)==null?void 0:P[0];return d.createElement(ki.Provider,{value:Ee},r&&d.createElement(d.Suspense,{fallback:null},d.createElement(Fs,{ref:K,autostart:t,videoTextureSrc:l})),d.createElement(o2,(0,w.Z)({ref:se},G,{points:_e,depth:R,facialTransformationMatrix:oe,faceBlendshapes:Ae,eyes:b,eyesAsOrigin:T,offset:v,offsetScalar:_,debug:F,"rotation-z":Math.PI,visible:F}),d.createElement("meshBasicMaterial",{side:s.DoubleSide})))}),wi=()=>(0,d.useContext)(ki),Fs=(0,d.forwardRef)(({videoTextureSrc:i,autostart:t=!0},r)=>{const l=(0,d.useRef)(null),c=wi(),p=(0,cc.Rq)(()=>ss(this,null,function*(){return i?Promise.resolve(null):yield navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})}),[i]);(0,d.useEffect)(()=>(c.dispatchEvent({type:"stream",stream:p}),()=>{p==null||p.getTracks().forEach(g=>g.stop()),(0,cc.ZH)([i])}),[p,c,i]);const h=(0,d.useMemo)(()=>({videoTextureApiRef:l}),[]);return(0,d.useImperativeHandle)(r,()=>h,[h]),d.createElement(d.Suspense,{fallback:null},d.createElement(Vs,{ref:l,src:i||p,start:t}))}),Vs=(0,d.forwardRef)(({src:i,start:t},r)=>{const l=cm(i,{start:t}),c=l.source.data,p=wi(),h=(0,d.useCallback)(v=>{p.dispatchEvent({type:"videoFrame",texture:l,time:v})},[l,p]);np(c,h);const g=(0,d.useMemo)(()=>({texture:l}),[l]);return(0,d.useImperativeHandle)(r,()=>g,[g]),d.createElement(d.Fragment,null)}),np=(i,t)=>{(0,d.useEffect)(()=>{if(!i||!i.requestVideoFrameCallback)return;let r;function l(...c){t(...c),r=i.requestVideoFrameCallback(l)}return i.requestVideoFrameCallback(l),()=>i.cancelVideoFrameCallback(r)},[i,t])};function wu({defaultScene:i,defaultCamera:t,renderPriority:r=1}){const{gl:l,scene:c,camera:p}=(0,E.z)();let h;return(0,E.A)(()=>{h=l.autoClear,r===1&&(l.autoClear=!0,l.render(i,t)),l.autoClear=!1,l.clearDepth(),l.render(c,p),l.autoClear=h},r),d.createElement("group",{onPointerOver:()=>null})}function Qs({children:i,renderPriority:t=1}){const{scene:r,camera:l}=(0,E.z)(),[c]=d.useState(()=>new s.Scene);return d.createElement(d.Fragment,null,(0,E.g)(d.createElement(d.Fragment,null,i,d.createElement(wu,{defaultScene:r,defaultCamera:l,renderPriority:t})),c,{events:{priority:t+1}}))}const Yi=d.createContext({}),Of=()=>d.useContext(Yi),Oa=2*Math.PI,Tu=new s.Object3D,_A=new s.Matrix4,[Vp,pm]=[new s.Quaternion,new s.Quaternion],dl=new s.Vector3,wd=new s.Vector3,EA=i=>"minPolarAngle"in i,uc=({alignment:i="bottom-right",margin:t=[80,80],renderPriority:r=1,onUpdate:l,onTarget:c,children:p})=>{const h=(0,E.z)(W=>W.size),g=(0,E.z)(W=>W.camera),v=(0,E.z)(W=>W.controls),_=(0,E.z)(W=>W.invalidate),b=d.useRef(),T=d.useRef(null),R=d.useRef(!1),F=d.useRef(0),G=d.useRef(new s.Vector3(0,0,0)),L=d.useRef(new s.Vector3(0,0,0));d.useEffect(()=>{L.current.copy(g.up)},[g]);const O=d.useCallback(W=>{R.current=!0,(v||c)&&(G.current=(v==null?void 0:v.target)||(c==null?void 0:c())),F.current=g.position.distanceTo(dl),Vp.copy(g.quaternion),wd.copy(W).multiplyScalar(F.current).add(dl),Tu.lookAt(wd),Tu.up.copy(g.up),pm.copy(Tu.quaternion),_()},[v,g,c,_]);(0,E.A)((W,Y)=>{if(T.current&&b.current){var K;if(R.current)if(Vp.angleTo(pm)<.01)R.current=!1,EA(v)&&g.up.copy(L.current);else{const se=Y*Oa;Vp.rotateTowards(pm,se),g.position.set(0,0,1).applyQuaternion(Vp).multiplyScalar(F.current).add(G.current),g.up.set(0,1,0).applyQuaternion(Vp).normalize(),g.quaternion.copy(Vp),l?l():v&&v.update(),_()}_A.copy(g.matrix).invert(),(K=b.current)==null||K.quaternion.setFromRotationMatrix(_A)}});const k=d.useMemo(()=>({tweenCamera:O}),[O]),[P,z]=t,j=i.endsWith("-center")?0:i.endsWith("-left")?-h.width/2+P:h.width/2-P,Q=i.startsWith("center-")?0:i.startsWith("top-")?h.height/2-z:-h.height/2+z;return d.createElement(Qs,{renderPriority:r},d.createElement(Yi.Provider,{value:k},d.createElement(am,{makeDefault:!0,ref:T,position:[0,0,200]}),d.createElement("group",{ref:b,position:[j,Q,0]},p)))},Fh={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},bE=["Right","Left","Top","Bottom","Front","Back"],bA=i=>new s.Vector3(...i).multiplyScalar(.38),jS=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(bA),HS=[.25,.25,.25],MM=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(bA),WS=MM.map(i=>i.toArray().map(t=>t==0?.5:.25)),VS=({hover:i,index:t,font:r="20px Inter var, Arial, sans-serif",faces:l=bE,color:c=Fh.bg,hoverColor:p=Fh.hover,textColor:h=Fh.text,strokeColor:g=Fh.stroke,opacity:v=1})=>{const _=(0,E.z)(T=>T.gl),b=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const R=T.getContext("2d");return R.fillStyle=c,R.fillRect(0,0,T.width,T.height),R.strokeStyle=g,R.strokeRect(0,0,T.width,T.height),R.font=r,R.textAlign="center",R.fillStyle=h,R.fillText(l[t].toUpperCase(),64,76),new s.CanvasTexture(T)},[t,l,r,c,h,g]);return d.createElement("meshBasicMaterial",{map:b,"map-anisotropy":_.capabilities.getMaxAnisotropy()||1,attach:`material-${t}`,color:i?p:"white",transparent:!0,opacity:v})},QS=i=>{const{tweenCamera:t}=Of(),[r,l]=d.useState(null),c=g=>{g.stopPropagation(),l(null)},p=g=>{g.stopPropagation(),t(g.face.normal)},h=g=>{g.stopPropagation(),l(Math.floor(g.faceIndex/2))};return d.createElement("mesh",{onPointerOut:c,onPointerMove:h,onClick:i.onClick||p},[...Array(6)].map((g,v)=>d.createElement(VS,(0,w.Z)({key:v,index:v,hover:r===v},i))),d.createElement("boxGeometry",null))},xM=({onClick:i,dimensions:t,position:r,hoverColor:l=Fh.hover})=>{const{tweenCamera:c}=Of(),[p,h]=d.useState(!1),g=b=>{b.stopPropagation(),h(!1)},v=b=>{b.stopPropagation(),h(!0)},_=b=>{b.stopPropagation(),c(r)};return d.createElement("mesh",{scale:1.01,position:r,onPointerOver:v,onPointerOut:g,onClick:i||_},d.createElement("meshBasicMaterial",{color:p?l:"white",transparent:!0,opacity:.6,visible:p}),d.createElement("boxGeometry",{args:t}))},KS=i=>d.createElement("group",{scale:[60,60,60]},d.createElement(QS,i),MM.map((t,r)=>d.createElement(xM,(0,w.Z)({key:r,position:t,dimensions:WS[r]},i))),jS.map((t,r)=>d.createElement(xM,(0,w.Z)({key:r,position:t,dimensions:HS},i))));function ME({scale:i=[.8,.05,.05],color:t,rotation:r}){return d.createElement("group",{rotation:r},d.createElement("mesh",{position:[.4,0,0]},d.createElement("boxGeometry",{args:i}),d.createElement("meshBasicMaterial",{color:t,toneMapped:!1})))}function R0(v){var _=v,{onClick:i,font:t,disabled:r,arcStyle:l,label:c,labelColor:p,axisHeadScale:h=1}=_,g=_n(_,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);const b=(0,E.z)(k=>k.gl),T=d.useMemo(()=>{const k=document.createElement("canvas");k.width=64,k.height=64;const P=k.getContext("2d");return P.beginPath(),P.arc(32,32,16,0,2*Math.PI),P.closePath(),P.fillStyle=l,P.fill(),c&&(P.font=t,P.textAlign="center",P.fillStyle=p,P.fillText(c,32,41)),new s.CanvasTexture(k)},[l,c,p,t]),[R,F]=d.useState(!1),G=(c?1:.75)*(R?1.2:1)*h,L=k=>{k.stopPropagation(),F(!0)},O=k=>{k.stopPropagation(),F(!1)};return d.createElement("sprite",(0,w.Z)({scale:G,onPointerOver:r?void 0:L,onPointerOut:r?void 0:i||O},g),d.createElement("spriteMaterial",{map:T,"map-anisotropy":b.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:c?1:.75,toneMapped:!1}))}const XS=T=>{var R=T,{hideNegativeAxes:i,hideAxisHeads:t,disabled:r,font:l="18px Inter var, Arial, sans-serif",axisColors:c=["#ff2060","#20df80","#2080ff"],axisHeadScale:p=1,axisScale:h,labels:g=["X","Y","Z"],labelColor:v="#000",onClick:_}=R,b=_n(R,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);const[F,G,L]=c,{tweenCamera:O}=Of(),k={font:l,disabled:r,labelColor:v,onClick:_,axisHeadScale:p,onPointerDown:r?void 0:P=>{O(P.object.position),P.stopPropagation()}};return d.createElement("group",(0,w.Z)({scale:40},b),d.createElement(ME,{color:F,rotation:[0,0,0],scale:h}),d.createElement(ME,{color:G,rotation:[0,0,Math.PI/2],scale:h}),d.createElement(ME,{color:L,rotation:[0,-Math.PI/2,0],scale:h}),!t&&d.createElement(d.Fragment,null,d.createElement(R0,(0,w.Z)({arcStyle:F,position:[1,0,0],label:g[0]},k)),d.createElement(R0,(0,w.Z)({arcStyle:G,position:[0,1,0],label:g[1]},k)),d.createElement(R0,(0,w.Z)({arcStyle:L,position:[0,0,1],label:g[2]},k)),!i&&d.createElement(d.Fragment,null,d.createElement(R0,(0,w.Z)({arcStyle:F,position:[-1,0,0]},k)),d.createElement(R0,(0,w.Z)({arcStyle:G,position:[0,-1,0]},k)),d.createElement(R0,(0,w.Z)({arcStyle:L,position:[0,0,-1]},k)))))},YS=Fc({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new s.Color,sectionColor:new s.Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new s.Vector3,worldPlanePosition:new s.Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      float dist = distance(worldCamProjPosition, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }
  `),JS=d.forwardRef((G,F)=>{var L=G,{args:i,cellColor:t="#000000",sectionColor:r="#2080ff",cellSize:l=.5,sectionSize:c=1,followCamera:p=!1,infiniteGrid:h=!1,fadeDistance:g=100,fadeStrength:v=1,cellThickness:_=.5,sectionThickness:b=1,side:T=s.BackSide}=L,R=_n(L,["args","cellColor","sectionColor","cellSize","sectionSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","side"]);(0,E.e)({GridMaterial:YS});const O=d.useRef(null),k=new s.Plane,P=new s.Vector3(0,1,0),z=new s.Vector3(0,0,0);(0,E.A)(W=>{k.setFromNormalAndCoplanarPoint(P,z).applyMatrix4(O.current.matrixWorld);const Y=O.current.material,K=Y.uniforms.worldCamProjPosition,se=Y.uniforms.worldPlanePosition;k.projectPoint(W.camera.position,K.value),se.value.set(0,0,0).applyMatrix4(O.current.matrixWorld)});const j={cellSize:l,sectionSize:c,cellColor:t,sectionColor:r,cellThickness:_,sectionThickness:b},Q={fadeDistance:g,fadeStrength:v,infiniteGrid:h,followCamera:p};return d.createElement("mesh",(0,w.Z)({ref:zr([O,F]),frustumCulled:!1},R),d.createElement("gridMaterial",(0,w.Z)({transparent:!0,"extensions-derivatives":!0,side:T},j,Q)),d.createElement("planeGeometry",{args:i}))});function CM(i,{path:t}){const[r]=(0,E.D)(s.CubeTextureLoader,[i],l=>l.setPath(t));return r}CM.preload=(i,{path:t})=>E.D.preload(s.CubeTextureLoader,[i],r=>r.setPath(t));var SM={},qS=function(i,t,r,l,c){var p=new Worker(SM[t]||(SM[t]=URL.createObjectURL(new Blob([i],{type:"text/javascript"}))));return p.onerror=function(h){return c(h.error,null)},p.onmessage=function(h){return c(null,h.data)},p.postMessage(r,l),p},Qo=Uint8Array,hl=Uint16Array,Df=Uint32Array,I0=new Qo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),F0=new Qo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),MA=new Qo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wM=function(i,t){for(var r=new hl(31),l=0;l<31;++l)r[l]=t+=1<<i[l-1];for(var c=new Df(r[30]),l=1;l<30;++l)for(var p=r[l];p<r[l+1];++p)c[p]=p-r[l]<<5|l;return[r,c]},TM=wM(I0,2),xE=TM[0],s2=TM[1];xE[28]=258,s2[258]=28;for(var BM=wM(F0,0),RM=BM[0],CE=BM[1],xA=new hl(32768),xs=0;xs<32768;++xs){var Pf=(xs&43690)>>>1|(xs&21845)<<1;Pf=(Pf&52428)>>>2|(Pf&13107)<<2,Pf=(Pf&61680)>>>4|(Pf&3855)<<4,xA[xs]=((Pf&65280)>>>8|(Pf&255)<<8)>>>1}for(var Td=function(i,t,r){for(var l=i.length,c=0,p=new hl(t);c<l;++c)++p[i[c]-1];var h=new hl(t);for(c=0;c<t;++c)h[c]=h[c-1]+p[c-1]<<1;var g;if(r){g=new hl(1<<t);var v=15-t;for(c=0;c<l;++c)if(i[c])for(var _=c<<4|i[c],b=t-i[c],T=h[i[c]-1]++<<b,R=T|(1<<b)-1;T<=R;++T)g[xA[T]>>>v]=_}else for(g=new hl(l),c=0;c<l;++c)i[c]&&(g[c]=xA[h[i[c]-1]++]>>>15-i[c]);return g},Lf=new Qo(288),xs=0;xs<144;++xs)Lf[xs]=8;for(var xs=144;xs<256;++xs)Lf[xs]=9;for(var xs=256;xs<280;++xs)Lf[xs]=7;for(var xs=280;xs<288;++xs)Lf[xs]=8;for(var CA=new Qo(32),xs=0;xs<32;++xs)CA[xs]=5;var IM=null,FM=Td(Lf,9,1),OM=null,DM=Td(CA,5,1),a2=function(i){for(var t=i[0],r=1;r<i.length;++r)i[r]>t&&(t=i[r]);return t},Qp=function(i,t,r){var l=t/8|0;return(i[l]|i[l+1]<<8)>>(t&7)&r},l2=function(i,t){var r=t/8|0;return(i[r]|i[r+1]<<8|i[r+2]<<16)>>(t&7)},SA=function(i){return(i/8|0)+(i&7&&1)},kf=function(i,t,r){(t==null||t<0)&&(t=0),(r==null||r>i.length)&&(r=i.length);var l=new(i instanceof hl?hl:i instanceof Df?Df:Qo)(r-t);return l.set(i.subarray(t,r)),l},c2=function(i,t,r){var l=i.length;if(!l||r&&!r.l&&l<5)return t||new Qo(0);var c=!t||r,p=!r||r.i;r||(r={}),t||(t=new Qo(l*3));var h=function(Te){var ve=t.length;if(Te>ve){var Ge=new Qo(Math.max(ve*2,Te));Ge.set(t),t=Ge}},g=r.f||0,v=r.p||0,_=r.b||0,b=r.l,T=r.d,R=r.m,F=r.n,G=l*8;do{if(!b){r.f=g=Qp(i,v,1);var L=Qp(i,v+1,3);if(v+=3,L)if(L==1)b=FM,T=DM,R=9,F=5;else if(L==2){var z=Qp(i,v,31)+257,j=Qp(i,v+10,15)+4,Q=z+Qp(i,v+5,31)+1;v+=14;for(var W=new Qo(Q),Y=new Qo(19),K=0;K<j;++K)Y[MA[K]]=Qp(i,v+K*3,7);v+=j*3;for(var se=a2(Y),ce=(1<<se)-1,ge=Td(Y,se,1),K=0;K<Q;){var le=ge[Qp(i,v,ce)];v+=le&15;var O=le>>>4;if(O<16)W[K++]=O;else{var xe=0,me=0;for(O==16?(me=3+Qp(i,v,3),v+=2,xe=W[K-1]):O==17?(me=3+Qp(i,v,7),v+=3):O==18&&(me=11+Qp(i,v,127),v+=7);me--;)W[K++]=xe}}var Be=W.subarray(0,z),ke=W.subarray(z);R=a2(Be),F=a2(ke),b=Td(Be,R,1),T=Td(ke,F,1)}else throw"invalid block type";else{var O=SA(v)+4,k=i[O-4]|i[O-3]<<8,P=O+k;if(P>l){if(p)throw"unexpected EOF";break}c&&h(_+k),t.set(i.subarray(O,P),_),r.b=_+=k,r.p=v=P*8;continue}if(v>G){if(p)throw"unexpected EOF";break}}c&&h(_+131072);for(var Re=(1<<R)-1,ze=(1<<F)-1,Pe=v;;Pe=v){var xe=b[l2(i,v)&Re],Ye=xe>>>4;if(v+=xe&15,v>G){if(p)throw"unexpected EOF";break}if(!xe)throw"invalid length/literal";if(Ye<256)t[_++]=Ye;else if(Ye==256){Pe=v,b=null;break}else{var Ce=Ye-254;if(Ye>264){var K=Ye-257,Ee=I0[K];Ce=Qp(i,v,(1<<Ee)-1)+xE[K],v+=Ee}var _e=T[l2(i,v)&ze],oe=_e>>>4;if(!_e)throw"invalid distance";v+=_e&15;var ke=RM[oe];if(oe>3){var Ee=F0[oe];ke+=l2(i,v)&(1<<Ee)-1,v+=Ee}if(v>G){if(p)throw"unexpected EOF";break}c&&h(_+131072);for(var Ae=_+Ce;_<Ae;_+=4)t[_]=t[_-ke],t[_+1]=t[_+1-ke],t[_+2]=t[_+2-ke],t[_+3]=t[_+3-ke];_=Ae}}r.l=b,r.p=Pe,r.b=_,b&&(g=1,r.m=R,r.d=T,r.n=F)}while(!g);return _==t.length?t:kf(t,0,_)},Bd=function(i,t,r){r<<=t&7;var l=t/8|0;i[l]|=r,i[l+1]|=r>>>8},O0=function(i,t,r){r<<=t&7;var l=t/8|0;i[l]|=r,i[l+1]|=r>>>8,i[l+2]|=r>>>16},p2=function(i,t){for(var r=[],l=0;l<i.length;++l)i[l]&&r.push({s:l,f:i[l]});var c=r.length,p=r.slice();if(!c)return[d2,0];if(c==1){var h=new Qo(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(Q,W){return Q.f-W.f}),r.push({s:-1,f:25001});var g=r[0],v=r[1],_=0,b=1,T=2;for(r[0]={s:-1,f:g.f+v.f,l:g,r:v};b!=c-1;)g=r[r[_].f<r[T].f?_++:T++],v=r[_!=b&&r[_].f<r[T].f?_++:T++],r[b++]={s:-1,f:g.f+v.f,l:g,r:v};for(var R=p[0].s,l=1;l<c;++l)p[l].s>R&&(R=p[l].s);var F=new hl(R+1),G=u2(r[b-1],F,0);if(G>t){var l=0,L=0,O=G-t,k=1<<O;for(p.sort(function(W,Y){return F[Y.s]-F[W.s]||W.f-Y.f});l<c;++l){var P=p[l].s;if(F[P]>t)L+=k-(1<<G-F[P]),F[P]=t;else break}for(L>>>=O;L>0;){var z=p[l].s;F[z]<t?L-=1<<t-F[z]++-1:++l}for(;l>=0&&L;--l){var j=p[l].s;F[j]==t&&(--F[j],++L)}G=t}return[new Qo(F),G]},u2=function(i,t,r){return i.s==-1?Math.max(u2(i.l,t,r+1),u2(i.r,t,r+1)):t[i.s]=r},SE=function(i){for(var t=i.length;t&&!i[--t];);for(var r=new hl(++t),l=0,c=i[0],p=1,h=function(v){r[l++]=v},g=1;g<=t;++g)if(i[g]==c&&g!=t)++p;else{if(!c&&p>2){for(;p>138;p-=138)h(32754);p>2&&(h(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(h(c),--p;p>6;p-=6)h(8304);p>2&&(h(p-3<<5|8208),p=0)}for(;p--;)h(c);p=1,c=i[g]}return[r.subarray(0,l),t]},D0=function(i,t){for(var r=0,l=0;l<t.length;++l)r+=i[l]*t[l];return r},wA=function(i,t,r){var l=r.length,c=SA(t+2);i[c]=l&255,i[c+1]=l>>>8,i[c+2]=i[c]^255,i[c+3]=i[c+1]^255;for(var p=0;p<l;++p)i[c+p+4]=r[p];return(c+4+l)*8},wE=function(i,t,r,l,c,p,h,g,v,_,b){Bd(t,b++,r),++c[256];for(var T=p2(c,15),R=T[0],F=T[1],G=p2(p,15),L=G[0],O=G[1],k=SE(R),P=k[0],z=k[1],j=SE(L),Q=j[0],W=j[1],Y=new hl(19),K=0;K<P.length;++K)Y[P[K]&31]++;for(var K=0;K<Q.length;++K)Y[Q[K]&31]++;for(var se=p2(Y,7),ce=se[0],ge=se[1],le=19;le>4&&!ce[MA[le-1]];--le);var xe=_+5<<3,me=D0(c,Lf)+D0(p,CA)+h,Be=D0(c,R)+D0(p,L)+h+14+3*le+D0(Y,ce)+(2*Y[16]+3*Y[17]+7*Y[18]);if(xe<=me&&xe<=Be)return wA(t,b,i.subarray(v,v+_));var ke,Re,ze,Pe;if(Bd(t,b,1+(Be<me)),b+=2,Be<me){ke=Td(R,F,0),Re=R,ze=Td(L,O,0),Pe=L;var Ye=Td(ce,ge,0);Bd(t,b,z-257),Bd(t,b+5,W-1),Bd(t,b+10,le-4),b+=14;for(var K=0;K<le;++K)Bd(t,b+3*K,ce[MA[K]]);b+=3*le;for(var Ce=[P,Q],Ee=0;Ee<2;++Ee)for(var _e=Ce[Ee],K=0;K<_e.length;++K){var oe=_e[K]&31;Bd(t,b,Ye[oe]),b+=ce[oe],oe>15&&(Bd(t,b,_e[K]>>>5&127),b+=_e[K]>>>12)}}else ke=IM,Re=Lf,ze=OM,Pe=CA;for(var K=0;K<g;++K)if(l[K]>255){var oe=l[K]>>>18&31;O0(t,b,ke[oe+257]),b+=Re[oe+257],oe>7&&(Bd(t,b,l[K]>>>23&31),b+=I0[oe]);var Ae=l[K]&31;O0(t,b,ze[Ae]),b+=Pe[Ae],Ae>3&&(O0(t,b,l[K]>>>5&8191),b+=F0[Ae])}else O0(t,b,ke[l[K]]),b+=Re[l[K]];return O0(t,b,ke[256]),b+Re[256]},PM=new Df([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),d2=new Qo(0),LM=function(i,t,r,l,c,p){var h=i.length,g=new Qo(l+h+5*(1+Math.ceil(h/7e3))+c),v=g.subarray(l,g.length-c),_=0;if(!t||h<8)for(var b=0;b<=h;b+=65535){var T=b+65535;T<h?_=wA(v,_,i.subarray(b,T)):(v[b]=p,_=wA(v,_,i.subarray(b,h)))}else{for(var R=PM[t-1],F=R>>>13,G=R&8191,L=(1<<r)-1,O=new hl(32768),k=new hl(L+1),P=Math.ceil(r/3),z=2*P,j=function(kt){return(i[kt]^i[kt+1]<<P^i[kt+2]<<z)&L},Q=new Df(25e3),W=new hl(288),Y=new hl(32),K=0,se=0,b=0,ce=0,ge=0,le=0;b<h;++b){var xe=j(b),me=b&32767,Be=k[xe];if(O[me]=Be,k[xe]=me,ge<=b){var ke=h-b;if((K>7e3||ce>24576)&&ke>423){_=wE(i,v,0,Q,W,Y,se,ce,le,b-le,_),ce=K=se=0,le=b;for(var Re=0;Re<286;++Re)W[Re]=0;for(var Re=0;Re<30;++Re)Y[Re]=0}var ze=2,Pe=0,Ye=G,Ce=me-Be&32767;if(ke>2&&xe==j(b-Ce))for(var Ee=Math.min(F,ke)-1,_e=Math.min(32767,b),oe=Math.min(258,ke);Ce<=_e&&--Ye&&me!=Be;){if(i[b+ze]==i[b+ze-Ce]){for(var Ae=0;Ae<oe&&i[b+Ae]==i[b+Ae-Ce];++Ae);if(Ae>ze){if(ze=Ae,Pe=Ce,Ae>Ee)break;for(var Te=Math.min(Ce,Ae-2),ve=0,Re=0;Re<Te;++Re){var Ge=b-Ce+Re+32768&32767,bt=O[Ge],mt=Ge-bt+32768&32767;mt>ve&&(ve=mt,Be=Ge)}}}me=Be,Be=O[me],Ce+=me-Be+32768&32767}if(Pe){Q[ce++]=268435456|s2[ze]<<18|CE[Pe];var gt=s2[ze]&31,rt=CE[Pe]&31;se+=I0[gt]+F0[rt],++W[257+gt],++Y[rt],ge=b+ze,++K}else Q[ce++]=i[b],++W[i[b]]}}_=wE(i,v,p,Q,W,Y,se,ce,le,b-le,_),!p&&_&7&&(_=wA(v,_+1,d2))}return kf(g,0,l+SA(_)+c)},kM=null,h2=function(){var i=-1;return{p:function(t){for(var r=i,l=0;l<t.length;++l)r=kM[r&255^t[l]]^r>>>8;i=r},d:function(){return~i}}},zM=function(){var i=1,t=0;return{p:function(r){for(var l=i,c=t,p=r.length,h=0;h!=p;){for(var g=Math.min(h+2655,p);h<g;++h)c+=l+=r[h];l=(l&65535)+15*(l>>16),c=(c&65535)+15*(c>>16)}i=l,t=c},d:function(){return i%=65521,t%=65521,(i&255)<<24|i>>>8<<16|(t&255)<<8|t>>>8}}},f2=function(i,t,r,l,c){return LM(i,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+t.mem,r,l,!c)},g2=function(i,t){var r={};for(var l in i)r[l]=i[l];for(var l in t)r[l]=t[l];return r},GM=function(i,t,r){for(var l=i(),c=i.toString(),p=c.slice(c.indexOf("[")+1,c.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<l.length;++h){var g=l[h],v=p[h];if(typeof g=="function"){t+=";"+v+"=";var _=g.toString();if(g.prototype)if(_.indexOf("[native code]")!=-1){var b=_.indexOf(" ",8)+1;t+=_.slice(b,_.indexOf("(",b))}else{t+=_;for(var T in g.prototype)t+=";"+v+".prototype."+T+"="+g.prototype[T].toString()}else t+=_}else r[v]=g}return[t,r]},m2=null,ZS=function(i){var t=[];for(var r in i)(i[r]instanceof Qo||i[r]instanceof hl||i[r]instanceof Df)&&t.push((i[r]=new i[r].constructor(i[r])).buffer);return t},NM=function(i,t,r,l){var c;if(!m2[r]){for(var p="",h={},g=i.length-1,v=0;v<g;++v)c=GM(i[v],p,h),p=c[0],h=c[1];m2[r]=GM(i[g],p,h)}var _=g2({},m2[r][1]);return qS(m2[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,_,ZS(_),l)},TE=function(){return[Qo,hl,Df,I0,F0,MA,xE,RM,FM,DM,xA,Td,a2,Qp,l2,SA,kf,c2,TA,zf,RE]},BE=function(){return[Qo,hl,Df,I0,F0,MA,s2,CE,IM,Lf,OM,CA,xA,PM,d2,Td,Bd,O0,p2,u2,SE,D0,wA,wE,SA,kf,LM,f2,A2,zf]},$S=function(){return[UM,WM,Ks,h2,kM]},e4=function(){return[jM,HM]},t4=function(){return[VM,Ks,zM]},n4=function(){return[QM]},zf=function(i){return postMessage(i,[i.buffer])},RE=function(i){return i&&i.size&&new Qo(i.size)},P0=function(i,t,r,l,c,p){var h=NM(r,l,c,function(g,v){h.terminate(),p(g,v)});return h.postMessage([i,t],t.consume?[i.buffer]:[]),function(){h.terminate()}},sI=function(i){return i.ondata=function(t,r){return postMessage([t,r],[t.buffer])},function(t){return i.push(t.data[0],t.data[1])}},aI=function(i,t,r,l,c){var p,h=NM(i,l,c,function(g,v){g?(h.terminate(),t.ondata.call(t,g)):(v[1]&&h.terminate(),t.ondata.call(t,g,v[0],v[1]))});h.postMessage(r),t.push=function(g,v){if(p)throw"stream finished";if(!t.ondata)throw"no stream handler";h.postMessage([g,p=v],[g.buffer])},t.terminate=function(){h.terminate()}},Bu=function(i,t){return i[t]|i[t+1]<<8},wl=function(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16|i[t+3]<<24)>>>0},IE=function(i,t){return wl(i,t)+wl(i,t+4)*4294967296},Ks=function(i,t,r){for(;r;++t)i[t]=r,r>>>=8},UM=function(i,t){var r=t.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=t.level<2?4:t.level==9?2:0,i[9]=3,t.mtime!=0&&Ks(i,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){i[3]=8;for(var l=0;l<=r.length;++l)i[l+10]=r.charCodeAt(l)}},jM=function(i){if(i[0]!=31||i[1]!=139||i[2]!=8)throw"invalid gzip data";var t=i[3],r=10;t&4&&(r+=i[10]|(i[11]<<8)+2);for(var l=(t>>3&1)+(t>>4&1);l>0;l-=!i[r++]);return r+(t&2)},HM=function(i){var t=i.length;return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0},WM=function(i){return 10+(i.filename&&i.filename.length+1||0)},VM=function(i,t){var r=t.level,l=r==0?0:r<6?1:r==9?3:2;i[0]=120,i[1]=l<<6|(l?32-2*l:1)},QM=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function lI(i,t){return!t&&typeof i=="function"&&(t=i,i={}),this.ondata=t,i}var cI=null,pI=null;function r4(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return P0(i,t,[BE],function(l){return zf(A2(l.data[0],l.data[1]))},0,r)}function A2(i,t){return f2(i,t||{},0,0)}var uI=null,dI=null;function KM(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return P0(i,t,[TE],function(l){return zf(TA(l.data[0],RE(l.data[1])))},1,r)}function TA(i,t){return c2(i,t)}var hI=null,fI=null;function gI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return P0(i,t,[BE,$S,function(){return[XM]}],function(l){return zf(XM(l.data[0],l.data[1]))},2,r)}function XM(i,t){t||(t={});var r=h2(),l=i.length;r.p(i);var c=f2(i,t,WM(t),8),p=c.length;return UM(c,t),Ks(c,p-8,r.d()),Ks(c,p-4,l),c}var mI=null,AI=null;function i4(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return P0(i,t,[TE,e4,function(){return[FE]}],function(l){return zf(FE(l.data[0]))},3,r)}function FE(i,t){return c2(i.subarray(jM(i),-8),t||new Qo(HM(i)))}var yI=null,vI=null;function _I(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return P0(i,t,[BE,t4,function(){return[YM]}],function(l){return zf(YM(l.data[0],l.data[1]))},4,r)}function YM(i,t){t||(t={});var r=zM();r.p(i);var l=f2(i,t,2,4);return VM(l,t),Ks(l,l.length-4,r.d()),l}var EI=null,bI=null;function o4(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return P0(i,t,[TE,n4,function(){return[Gf]}],function(l){return zf(Gf(l.data[0],RE(l.data[1])))},5,r)}function Gf(i,t){return c2((QM(i),i.subarray(2,-4)),t)}var MI=null,xI=null;function CI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return i[0]==31&&i[1]==139&&i[2]==8?i4(i,t,r):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?KM(i,t,r):o4(i,t,r)}function SI(i,t){return i[0]==31&&i[1]==139&&i[2]==8?FE(i,t):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?TA(i,t):Gf(i,t)}var OE=function(i,t,r,l){for(var c in i){var p=i[c],h=t+c;p instanceof Qo?r[h]=[p,l]:Array.isArray(p)?r[h]=[p[0],g2(l,p[1])]:OE(p,h+"/",r,l)}},JM=typeof TextEncoder!="undefined"&&new TextEncoder,DE=typeof TextDecoder!="undefined"&&new TextDecoder,s4=0;try{DE.decode(d2,{stream:!0}),s4=1}catch(i){}var a4=function(i){for(var t="",r=0;;){var l=i[r++],c=(l>127)+(l>223)+(l>239);if(r+c>i.length)return[t,kf(i,r-1)];c?c==3?(l=((l&15)<<18|(i[r++]&63)<<12|(i[r++]&63)<<6|i[r++]&63)-65536,t+=String.fromCharCode(55296|l>>10,56320|l&1023)):c&1?t+=String.fromCharCode((l&31)<<6|i[r++]&63):t+=String.fromCharCode((l&15)<<12|(i[r++]&63)<<6|i[r++]&63):t+=String.fromCharCode(l)}},wI=null,TI=null;function y2(i,t){if(t){for(var r=new Qo(i.length),l=0;l<i.length;++l)r[l]=i.charCodeAt(l);return r}if(JM)return JM.encode(i);for(var c=i.length,p=new Qo(i.length+(i.length>>1)),h=0,g=function(b){p[h++]=b},l=0;l<c;++l){if(h+5>p.length){var v=new Qo(h+8+(c-l<<1));v.set(p),p=v}var _=i.charCodeAt(l);_<128||t?g(_):_<2048?(g(192|_>>6),g(128|_&63)):_>55295&&_<57344?(_=65536+(_&1047552)|i.charCodeAt(++l)&1023,g(240|_>>18),g(128|_>>12&63),g(128|_>>6&63),g(128|_&63)):(g(224|_>>12),g(128|_>>6&63),g(128|_&63))}return kf(p,0,h)}function l4(i,t){if(t){for(var r="",l=0;l<i.length;l+=16384)r+=String.fromCharCode.apply(null,i.subarray(l,l+16384));return r}else{if(DE)return DE.decode(i);var c=a4(i),p=c[0],h=c[1];if(h.length)throw"invalid utf-8 data";return p}}var BI=function(i){return i==1?3:i<6?2:i==9?1:0},qM=function(i,t){return t+30+Bu(i,t+26)+Bu(i,t+28)},ZM=function(i,t,r){var l=Bu(i,t+28),c=l4(i.subarray(t+46,t+46+l),!(Bu(i,t+8)&2048)),p=t+46+l,h=wl(i,t+20),g=r&&h==4294967295?c4(i,p):[h,wl(i,t+24),wl(i,t+42)],v=g[0],_=g[1],b=g[2];return[Bu(i,t+10),v,_,c,p+Bu(i,t+30)+Bu(i,t+32),b]},c4=function(i,t){for(;Bu(i,t)!=1;t+=4+Bu(i,t+2));return[IE(i,t+12),IE(i,t+4),IE(i,t+20)]},BA=function(i){var t=0;if(i)for(var r in i){var l=i[r].length;if(l>65535)throw"extra field too long";t+=l+4}return t},v2=function(i,t,r,l,c,p,h,g){var v=l.length,_=r.extra,b=g&&g.length,T=BA(_);Ks(i,t,h!=null?33639248:67324752),t+=4,h!=null&&(i[t++]=20,i[t++]=r.os),i[t]=20,t+=2,i[t++]=r.flag<<1|(p==null&&8),i[t++]=c&&8,i[t++]=r.compression&255,i[t++]=r.compression>>8;var R=new Date(r.mtime==null?Date.now():r.mtime),F=R.getFullYear()-1980;if(F<0||F>119)throw"date not in range 1980-2099";if(Ks(i,t,F<<25|R.getMonth()+1<<21|R.getDate()<<16|R.getHours()<<11|R.getMinutes()<<5|R.getSeconds()>>>1),t+=4,p!=null&&(Ks(i,t,r.crc),Ks(i,t+4,p),Ks(i,t+8,r.size)),Ks(i,t+12,v),Ks(i,t+14,T),t+=16,h!=null&&(Ks(i,t,b),Ks(i,t+6,r.attrs),Ks(i,t+10,h),t+=14),i.set(l,t),t+=v,T)for(var G in _){var L=_[G],O=L.length;Ks(i,t,+G),Ks(i,t+2,O),i.set(L,t+4),t+=4+O}return b&&(i.set(g,t),t+=b),t},$M=function(i,t,r,l,c){Ks(i,t,101010256),Ks(i,t+8,r),Ks(i,t+10,r),Ks(i,t+12,l),Ks(i,t+16,c)},RI=null,II=null,FI=null,OI=null;function DI(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";var l={};OE(i,"",l,t);var c=Object.keys(l),p=c.length,h=0,g=0,v=p,_=new Array(p),b=[],T=function(){for(var L=0;L<b.length;++L)b[L]()},R=function(){var L=new Qo(g+22),O=h,k=g-h;g=0;for(var P=0;P<v;++P){var z=_[P];try{var j=z.c.length;v2(L,g,z,z.f,z.u,j);var Q=30+z.f.length+BA(z.extra),W=g+Q;L.set(z.c,W),v2(L,h,z,z.f,z.u,j,g,z.m),h+=16+Q+(z.m?z.m.length:0),g=W+j}catch(Y){return r(Y,null)}}$M(L,h,_.length,k,O),r(null,L)};p||R();for(var F=function(L){var O=c[L],k=l[O],P=k[0],z=k[1],j=h2(),Q=P.length;j.p(P);var W=y2(O),Y=W.length,K=z.comment,se=K&&y2(K),ce=se&&se.length,ge=BA(z.extra),le=z.level==0?0:8,xe=function(me,Be){if(me)T(),r(me,null);else{var ke=Be.length;_[L]=g2(z,{size:Q,crc:j.d(),c:Be,f:W,m:se,u:Y!=O.length||se&&K.length!=ce,compression:le}),h+=30+Y+ge+ke,g+=76+2*(Y+ge)+(ce||0)+ke,--p||R()}};if(Y>65535&&xe("filename too long",null),!le)xe(null,P);else if(Q<16e4)try{xe(null,A2(P,z))}catch(me){xe(me,null)}else b.push(r4(P,z,xe))},G=0;G<v;++G)F(G);return T}function PI(i,t){t||(t={});var r={},l=[];OE(i,"",r,t);var c=0,p=0;for(var h in r){var g=r[h],v=g[0],_=g[1],b=_.level==0?0:8,T=y2(h),R=T.length,F=_.comment,G=F&&y2(F),L=G&&G.length,O=BA(_.extra);if(R>65535)throw"filename too long";var k=b?A2(v,_):v,P=k.length,z=h2();z.p(v),l.push(g2(_,{size:v.length,crc:z.d(),c:k,f:T,m:G,u:R!=h.length||G&&F.length!=L,o:c,compression:b})),c+=30+R+O+P,p+=76+2*(R+O)+(L||0)+P}for(var j=new Qo(p+22),Q=c,W=p-c,Y=0;Y<l.length;++Y){var T=l[Y];v2(j,T.o,T,T.f,T.u,T.c.length);var K=30+T.f.length+BA(T.extra);j.set(T.c,T.o+K),v2(j,c,T,T.f,T.u,T.c.length,T.o,T.m),c+=16+K+(T.m?T.m.length:0)}return $M(j,c,l.length,W,Q),j}var LI=null,kI=null,zI=null,GI=null;function NI(i,t){if(typeof t!="function")throw"no callback";for(var r=[],l=function(){for(var R=0;R<r.length;++R)r[R]()},c={},p=i.length-22;wl(i,p)!=101010256;--p)if(!p||i.length-p>65558){t("invalid zip file",null);return}var h=Bu(i,p+8);h||t(null,{});var g=h,v=wl(i,p+16),_=v==4294967295;if(_){if(p=wl(i,p-12),wl(i,p)!=101075792){t("invalid zip file",null);return}g=h=wl(i,p+32),v=wl(i,p+48)}for(var b=function(R){var F=ZM(i,v,_),G=F[0],L=F[1],O=F[2],k=F[3],P=F[4],z=F[5],j=qM(i,z);v=P;var Q=function(Y,K){Y?(l(),t(Y,null)):(c[k]=K,--h||t(null,c))};if(!G)Q(null,kf(i,j,j+L));else if(G==8){var W=i.subarray(j,j+L);if(L<32e4)try{Q(null,TA(W,new Qo(O)))}catch(Y){Q(Y,null)}else r.push(KM(W,{size:O},Q))}else Q("unknown compression type "+G,null)},T=0;T<g;++T)b(T);return l}function UI(i){for(var t={},r=i.length-22;wl(i,r)!=101010256;--r)if(!r||i.length-r>65558)throw"invalid zip file";var l=Bu(i,r+8);if(!l)return{};var c=wl(i,r+16),p=c==4294967295;if(p){if(r=wl(i,r-12),wl(i,r)!=101075792)throw"invalid zip file";l=wl(i,r+32),c=wl(i,r+48)}for(var h=0;h<l;++h){var g=ZM(i,c,p),v=g[0],_=g[1],b=g[2],T=g[3],R=g[4],F=g[5],G=qM(i,F);if(c=R,!v)t[T]=kf(i,G,G+_);else if(v==8)t[T]=TA(i.subarray(G,G+_),new Qo(b));else throw"unknown compression type "+v}return t}function _2(i,t,r){const l=r.length-i-1;if(t>=r[l])return l-1;if(t<=r[i])return i;let c=i,p=l,h=Math.floor((c+p)/2);for(;t<r[h]||t>=r[h+1];)t<r[h]?p=h:c=h,h=Math.floor((c+p)/2);return h}function PE(i,t,r,l){const c=[],p=[],h=[];c[0]=1;for(let g=1;g<=r;++g){p[g]=t-l[i+1-g],h[g]=l[i+g]-t;let v=0;for(let _=0;_<g;++_){const b=h[_+1],T=p[g-_],R=c[_]/(b+T);c[_]=v+b*R,v=T*R}c[g]=v}return c}function p4(i,t,r,l){const c=_2(i,l,t),p=PE(c,l,i,t),h=new s.Vector4(0,0,0,0);for(let g=0;g<=i;++g){const v=r[c-i+g],_=p[g],b=v.w*_;h.x+=v.x*b,h.y+=v.y*b,h.z+=v.z*b,h.w+=v.w*_}return h}function u4(i,t,r,l,c){const p=[];for(let T=0;T<=r;++T)p[T]=0;const h=[];for(let T=0;T<=l;++T)h[T]=p.slice(0);const g=[];for(let T=0;T<=r;++T)g[T]=p.slice(0);g[0][0]=1;const v=p.slice(0),_=p.slice(0);for(let T=1;T<=r;++T){v[T]=t-c[i+1-T],_[T]=c[i+T]-t;let R=0;for(let F=0;F<T;++F){const G=_[F+1],L=v[T-F];g[T][F]=G+L;const O=g[F][T-1]/g[T][F];g[F][T]=R+G*O,R=L*O}g[T][T]=R}for(let T=0;T<=r;++T)h[0][T]=g[T][r];for(let T=0;T<=r;++T){let R=0,F=1;const G=[];for(let L=0;L<=r;++L)G[L]=p.slice(0);G[0][0]=1;for(let L=1;L<=l;++L){let O=0;const k=T-L,P=r-L;T>=L&&(G[F][0]=G[R][0]/g[P+1][k],O=G[F][0]*g[k][P]);const z=k>=-1?1:-k,j=T-1<=P?L-1:r-T;for(let W=z;W<=j;++W)G[F][W]=(G[R][W]-G[R][W-1])/g[P+1][k+W],O+=G[F][W]*g[k+W][P];T<=P&&(G[F][L]=-G[R][L-1]/g[P+1][T],O+=G[F][L]*g[T][P]),h[L][T]=O;const Q=R;R=F,F=Q}}let b=r;for(let T=1;T<=l;++T){for(let R=0;R<=r;++R)h[T][R]*=b;b*=r-T}return h}function d4(i,t,r,l,c){const p=c<i?c:i,h=[],g=_2(i,l,t),v=u4(g,l,i,p,t),_=[];for(let b=0;b<r.length;++b){const T=r[b].clone(),R=T.w;T.x*=R,T.y*=R,T.z*=R,_[b]=T}for(let b=0;b<=p;++b){const T=_[g-i].clone().multiplyScalar(v[b][0]);for(let R=1;R<=i;++R)T.add(_[g-i+R].clone().multiplyScalar(v[b][R]));h[b]=T}for(let b=p+1;b<=c+1;++b)h[b]=new s.Vector4(0,0,0);return h}function h4(i,t){let r=1;for(let c=2;c<=i;++c)r*=c;let l=1;for(let c=2;c<=t;++c)l*=c;for(let c=2;c<=i-t;++c)l*=c;return r/l}function f4(i){const t=i.length,r=[],l=[];for(let p=0;p<t;++p){const h=i[p];r[p]=new s.Vector3(h.x,h.y,h.z),l[p]=h.w}const c=[];for(let p=0;p<t;++p){const h=r[p].clone();for(let g=1;g<=p;++g)h.sub(c[p-g].clone().multiplyScalar(h4(p,g)*l[g]));c[p]=h.divideScalar(l[0])}return c}function g4(i,t,r,l,c){const p=d4(i,t,r,l,c);return f4(p)}function jI(i,t,r,l,c,p,h,g){const v=_2(i,p,r),_=_2(t,h,l),b=PE(v,p,i,r),T=PE(_,h,t,l),R=[];for(let G=0;G<=t;++G){R[G]=new Vector4(0,0,0,0);for(let L=0;L<=i;++L){const O=c[v-i+L][_-t+G].clone(),k=O.w;O.x*=k,O.y*=k,O.z*=k,R[G].add(O.multiplyScalar(b[L]))}}const F=new Vector4(0,0,0,0);for(let G=0;G<=t;++G)F.add(R[G].multiplyScalar(T[G]));F.divideScalar(F.w),g.set(F.x,F.y,F.z)}class ex extends s.Curve{constructor(t,r,l,c,p){super(),this.degree=t,this.knots=r,this.controlPoints=[],this.startKnot=c||0,this.endKnot=p||this.knots.length-1;for(let h=0;h<l.length;++h){const g=l[h];this.controlPoints[h]=new s.Vector4(g.x,g.y,g.z,g.w)}}getPoint(t,r){const l=r||new s.Vector3,c=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),p=p4(this.degree,this.knots,this.controlPoints,c);return p.w!=1&&p.divideScalar(p.w),l.set(p.x,p.y,p.z)}getTangent(t,r){const l=r||new s.Vector3,c=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),p=g4(this.degree,this.knots,this.controlPoints,c,1);return l.copy(p[1]).normalize(),l}}var Xa=A(25108);let Ji,ya,Lc;class LE extends s.Loader{constructor(t){super(t)}load(t,r,l,c){const p=this,h=p.path===""?s.LoaderUtils.extractUrlBase(t):p.path,g=new s.FileLoader(this.manager);g.setPath(p.path),g.setResponseType("arraybuffer"),g.setRequestHeader(p.requestHeader),g.setWithCredentials(p.withCredentials),g.load(t,function(v){try{r(p.parse(v,h))}catch(_){c?c(_):Xa.error(_),p.manager.itemError(t)}},l,c)}parse(t,r){if(E4(t))Ji=new _4().parse(t);else{const c=sx(t);if(!b4(c))throw new Error("THREE.FBXLoader: Unknown format.");if(rx(c)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+rx(c));Ji=new v4().parse(c)}const l=new s.TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin);return new m4(l,this.manager).parse(Ji)}}class m4{constructor(t,r){this.textureLoader=t,this.manager=r}parse(){ya=this.parseConnections();const t=this.parseImages(),r=this.parseTextures(t),l=this.parseMaterials(r),c=this.parseDeformers(),p=new A4().parse(c);return this.parseScene(c,p,l),Lc}parseConnections(){const t=new Map;return"Connections"in Ji&&Ji.Connections.connections.forEach(function(l){const c=l[0],p=l[1],h=l[2];t.has(c)||t.set(c,{parents:[],children:[]});const g={ID:p,relationship:h};t.get(c).parents.push(g),t.has(p)||t.set(p,{parents:[],children:[]});const v={ID:c,relationship:h};t.get(p).children.push(v)}),t}parseImages(){const t={},r={};if("Video"in Ji.Objects){const l=Ji.Objects.Video;for(const c in l){const p=l[c],h=parseInt(c);if(t[h]=p.RelativeFilename||p.Filename,"Content"in p){const g=p.Content instanceof ArrayBuffer&&p.Content.byteLength>0,v=typeof p.Content=="string"&&p.Content!=="";if(g||v){const _=this.parseImage(l[c]);r[p.RelativeFilename||p.Filename]=_}}}}for(const l in t){const c=t[l];r[c]!==void 0?t[l]=r[c]:t[l]=t[l].split("\\").pop()}return t}parseImage(t){const r=t.Content,l=t.RelativeFilename||t.Filename,c=l.slice(l.lastIndexOf(".")+1).toLowerCase();let p;switch(c){case"bmp":p="image/bmp";break;case"jpg":case"jpeg":p="image/jpeg";break;case"png":p="image/png";break;case"tif":p="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&Xa.warn("FBXLoader: TGA loader not found, skipping ",l),p="image/tga";break;default:Xa.warn('FBXLoader: Image type "'+c+'" is not supported.');return}if(typeof r=="string")return"data:"+p+";base64,"+r;{const h=new Uint8Array(r);return window.URL.createObjectURL(new Blob([h],{type:p}))}}parseTextures(t){const r=new Map;if("Texture"in Ji.Objects){const l=Ji.Objects.Texture;for(const c in l){const p=this.parseTexture(l[c],t);r.set(parseInt(c),p)}}return r}parseTexture(t,r){const l=this.loadTexture(t,r);l.ID=t.id,l.name=t.attrName;const c=t.WrapModeU,p=t.WrapModeV,h=c!==void 0?c.value:0,g=p!==void 0?p.value:0;if(l.wrapS=h===0?s.RepeatWrapping:s.ClampToEdgeWrapping,l.wrapT=g===0?s.RepeatWrapping:s.ClampToEdgeWrapping,"Scaling"in t){const v=t.Scaling.value;l.repeat.x=v[0],l.repeat.y=v[1]}return l}loadTexture(t,r){let l;const c=this.textureLoader.path,p=ya.get(t.id).children;p!==void 0&&p.length>0&&r[p[0].ID]!==void 0&&(l=r[p[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let h;const g=t.FileName.slice(-3).toLowerCase();if(g==="tga"){const v=this.manager.getHandler(".tga");v===null?(Xa.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),h=new s.Texture):(v.setPath(this.textureLoader.path),h=v.load(l))}else g==="psd"?(Xa.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),h=new s.Texture):h=this.textureLoader.load(l);return this.textureLoader.setPath(c),h}parseMaterials(t){const r=new Map;if("Material"in Ji.Objects){const l=Ji.Objects.Material;for(const c in l){const p=this.parseMaterial(l[c],t);p!==null&&r.set(parseInt(c),p)}}return r}parseMaterial(t,r){const l=t.id,c=t.attrName;let p=t.ShadingModel;if(typeof p=="object"&&(p=p.value),!ya.has(l))return null;const h=this.parseParameters(t,r,l);let g;switch(p.toLowerCase()){case"phong":g=new s.MeshPhongMaterial;break;case"lambert":g=new s.MeshLambertMaterial;break;default:Xa.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',p),g=new s.MeshPhongMaterial;break}return g.setValues(h),g.name=c,g}parseParameters(t,r,l){const c={};t.BumpFactor&&(c.bumpScale=t.BumpFactor.value),t.Diffuse?c.color=new s.Color().fromArray(t.Diffuse.value):t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(c.color=new s.Color().fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(c.displacementScale=t.DisplacementFactor.value),t.Emissive?c.emissive=new s.Color().fromArray(t.Emissive.value):t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(c.emissive=new s.Color().fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(c.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(c.opacity=parseFloat(t.Opacity.value)),c.opacity<1&&(c.transparent=!0),t.ReflectionFactor&&(c.reflectivity=t.ReflectionFactor.value),t.Shininess&&(c.shininess=t.Shininess.value),t.Specular?c.specular=new s.Color().fromArray(t.Specular.value):t.SpecularColor&&t.SpecularColor.type==="Color"&&(c.specular=new s.Color().fromArray(t.SpecularColor.value));const p=this;return ya.get(l).children.forEach(function(h){const g=h.relationship;switch(g){case"Bump":c.bumpMap=p.getTexture(r,h.ID);break;case"Maya|TEX_ao_map":c.aoMap=p.getTexture(r,h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":c.map=p.getTexture(r,h.ID),c.map!==void 0&&("colorSpace"in c.map?c.map.colorSpace="srgb":c.map.encoding=3001);break;case"DisplacementColor":c.displacementMap=p.getTexture(r,h.ID);break;case"EmissiveColor":c.emissiveMap=p.getTexture(r,h.ID),c.emissiveMap!==void 0&&("colorSpace"in c.emissiveMap?c.emissiveMap.colorSpace="srgb":c.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":c.normalMap=p.getTexture(r,h.ID);break;case"ReflectionColor":c.envMap=p.getTexture(r,h.ID),c.envMap!==void 0&&(c.envMap.mapping=s.EquirectangularReflectionMapping,"colorSpace"in c.envMap?c.envMap.colorSpace="srgb":c.envMap.encoding=3001);break;case"SpecularColor":c.specularMap=p.getTexture(r,h.ID),c.specularMap!==void 0&&("colorSpace"in c.specularMap?c.specularMap.colorSpace="srgb":c.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":c.alphaMap=p.getTexture(r,h.ID),c.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:Xa.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",g);break}}),c}getTexture(t,r){return"LayeredTexture"in Ji.Objects&&r in Ji.Objects.LayeredTexture&&(Xa.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=ya.get(r).children[0].ID),t.get(r)}parseDeformers(){const t={},r={};if("Deformer"in Ji.Objects){const l=Ji.Objects.Deformer;for(const c in l){const p=l[c],h=ya.get(parseInt(c));if(p.attrType==="Skin"){const g=this.parseSkeleton(h,l);g.ID=c,h.parents.length>1&&Xa.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),g.geometryID=h.parents[0].ID,t[c]=g}else if(p.attrType==="BlendShape"){const g={id:c};g.rawTargets=this.parseMorphTargets(h,l),g.id=c,h.parents.length>1&&Xa.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[c]=g}}}return{skeletons:t,morphTargets:r}}parseSkeleton(t,r){const l=[];return t.children.forEach(function(c){const p=r[c.ID];if(p.attrType!=="Cluster")return;const h={ID:c.ID,indices:[],weights:[],transformLink:new s.Matrix4().fromArray(p.TransformLink.a)};"Indexes"in p&&(h.indices=p.Indexes.a,h.weights=p.Weights.a),l.push(h)}),{rawBones:l,bones:[]}}parseMorphTargets(t,r){const l=[];for(let c=0;c<t.children.length;c++){const p=t.children[c],h=r[p.ID],g={name:h.attrName,initialWeight:h.DeformPercent,id:h.id,fullWeights:h.FullWeights.a};if(h.attrType!=="BlendShapeChannel")return;g.geoID=ya.get(parseInt(p.ID)).children.filter(function(v){return v.relationship===void 0})[0].ID,l.push(g)}return l}parseScene(t,r,l){Lc=new s.Group;const c=this.parseModels(t.skeletons,r,l),p=Ji.Objects.Model,h=this;c.forEach(function(v){const _=p[v.ID];h.setLookAtProperties(v,_),ya.get(v.ID).parents.forEach(function(T){const R=c.get(T.ID);R!==void 0&&R.add(v)}),v.parent===null&&Lc.add(v)}),this.bindSkeleton(t.skeletons,r,c),this.createAmbientLight(),Lc.traverse(function(v){if(v.userData.transformData){v.parent&&(v.userData.transformData.parentMatrix=v.parent.matrix,v.userData.transformData.parentMatrixWorld=v.parent.matrixWorld);const _=ix(v.userData.transformData);v.applyMatrix4(_),v.updateWorldMatrix()}});const g=new y4().parse();Lc.children.length===1&&Lc.children[0].isGroup&&(Lc.children[0].animations=g,Lc=Lc.children[0]),Lc.animations=g}parseModels(t,r,l){const c=new Map,p=Ji.Objects.Model;for(const h in p){const g=parseInt(h),v=p[h],_=ya.get(g);let b=this.buildSkeleton(_,t,g,v.attrName);if(!b){switch(v.attrType){case"Camera":b=this.createCamera(_);break;case"Light":b=this.createLight(_);break;case"Mesh":b=this.createMesh(_,r,l);break;case"NurbsCurve":b=this.createCurve(_,r);break;case"LimbNode":case"Root":b=new s.Bone;break;case"Null":default:b=new s.Group;break}b.name=v.attrName?s.PropertyBinding.sanitizeNodeName(v.attrName):"",b.ID=g}this.getTransformData(b,v),c.set(g,b)}return c}buildSkeleton(t,r,l,c){let p=null;return t.parents.forEach(function(h){for(const g in r){const v=r[g];v.rawBones.forEach(function(_,b){if(_.ID===h.ID){const T=p;p=new s.Bone,p.matrixWorld.copy(_.transformLink),p.name=c?s.PropertyBinding.sanitizeNodeName(c):"",p.ID=l,v.bones[b]=p,T!==null&&p.add(T)}})}}),p}createCamera(t){let r,l;if(t.children.forEach(function(c){const p=Ji.Objects.NodeAttribute[c.ID];p!==void 0&&(l=p)}),l===void 0)r=new s.Object3D;else{let c=0;l.CameraProjectionType!==void 0&&l.CameraProjectionType.value===1&&(c=1);let p=1;l.NearPlane!==void 0&&(p=l.NearPlane.value/1e3);let h=1e3;l.FarPlane!==void 0&&(h=l.FarPlane.value/1e3);let g=window.innerWidth,v=window.innerHeight;l.AspectWidth!==void 0&&l.AspectHeight!==void 0&&(g=l.AspectWidth.value,v=l.AspectHeight.value);const _=g/v;let b=45;l.FieldOfView!==void 0&&(b=l.FieldOfView.value);const T=l.FocalLength?l.FocalLength.value:null;switch(c){case 0:r=new s.PerspectiveCamera(b,_,p,h),T!==null&&r.setFocalLength(T);break;case 1:r=new s.OrthographicCamera(-g/2,g/2,v/2,-v/2,p,h);break;default:Xa.warn("THREE.FBXLoader: Unknown camera type "+c+"."),r=new s.Object3D;break}}return r}createLight(t){let r,l;if(t.children.forEach(function(c){const p=Ji.Objects.NodeAttribute[c.ID];p!==void 0&&(l=p)}),l===void 0)r=new s.Object3D;else{let c;l.LightType===void 0?c=0:c=l.LightType.value;let p=16777215;l.Color!==void 0&&(p=new s.Color().fromArray(l.Color.value));let h=l.Intensity===void 0?1:l.Intensity.value/100;l.CastLightOnObject!==void 0&&l.CastLightOnObject.value===0&&(h=0);let g=0;l.FarAttenuationEnd!==void 0&&(l.EnableFarAttenuation!==void 0&&l.EnableFarAttenuation.value===0?g=0:g=l.FarAttenuationEnd.value);const v=1;switch(c){case 0:r=new s.PointLight(p,h,g,v);break;case 1:r=new s.DirectionalLight(p,h);break;case 2:let _=Math.PI/3;l.InnerAngle!==void 0&&(_=s.MathUtils.degToRad(l.InnerAngle.value));let b=0;l.OuterAngle!==void 0&&(b=s.MathUtils.degToRad(l.OuterAngle.value),b=Math.max(b,1)),r=new s.SpotLight(p,h,g,_,b,v);break;default:Xa.warn("THREE.FBXLoader: Unknown light type "+l.LightType.value+", defaulting to a PointLight."),r=new s.PointLight(p,h);break}l.CastShadows!==void 0&&l.CastShadows.value===1&&(r.castShadow=!0)}return r}createMesh(t,r,l){let c,p=null,h=null;const g=[];return t.children.forEach(function(v){r.has(v.ID)&&(p=r.get(v.ID)),l.has(v.ID)&&g.push(l.get(v.ID))}),g.length>1?h=g:g.length>0?h=g[0]:(h=new s.MeshPhongMaterial({color:13421772}),g.push(h)),"color"in p.attributes&&g.forEach(function(v){v.vertexColors=!0}),p.FBX_Deformer?(c=new s.SkinnedMesh(p,h),c.normalizeSkinWeights()):c=new s.Mesh(p,h),c}createCurve(t,r){const l=t.children.reduce(function(p,h){return r.has(h.ID)&&(p=r.get(h.ID)),p},null),c=new s.LineBasicMaterial({color:3342591,linewidth:1});return new s.Line(l,c)}getTransformData(t,r){const l={};"InheritType"in r&&(l.inheritType=parseInt(r.InheritType.value)),"RotationOrder"in r?l.eulerOrder=ox(r.RotationOrder.value):l.eulerOrder="ZYX","Lcl_Translation"in r&&(l.translation=r.Lcl_Translation.value),"PreRotation"in r&&(l.preRotation=r.PreRotation.value),"Lcl_Rotation"in r&&(l.rotation=r.Lcl_Rotation.value),"PostRotation"in r&&(l.postRotation=r.PostRotation.value),"Lcl_Scaling"in r&&(l.scale=r.Lcl_Scaling.value),"ScalingOffset"in r&&(l.scalingOffset=r.ScalingOffset.value),"ScalingPivot"in r&&(l.scalingPivot=r.ScalingPivot.value),"RotationOffset"in r&&(l.rotationOffset=r.RotationOffset.value),"RotationPivot"in r&&(l.rotationPivot=r.RotationPivot.value),t.userData.transformData=l}setLookAtProperties(t,r){"LookAtProperty"in r&&ya.get(t.ID).children.forEach(function(c){if(c.relationship==="LookAtProperty"){const p=Ji.Objects.Model[c.ID];if("Lcl_Translation"in p){const h=p.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(h),Lc.add(t.target)):t.lookAt(new s.Vector3().fromArray(h))}}})}bindSkeleton(t,r,l){const c=this.parsePoseNodes();for(const p in t){const h=t[p];ya.get(parseInt(h.ID)).parents.forEach(function(v){if(r.has(v.ID)){const _=v.ID;ya.get(_).parents.forEach(function(T){l.has(T.ID)&&l.get(T.ID).bind(new s.Skeleton(h.bones),c[T.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in Ji.Objects){const r=Ji.Objects.Pose;for(const l in r)if(r[l].attrType==="BindPose"&&r[l].NbPoseNodes>0){const c=r[l].PoseNode;Array.isArray(c)?c.forEach(function(p){t[p.Node]=new s.Matrix4().fromArray(p.Matrix.a)}):t[c.Node]=new s.Matrix4().fromArray(c.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in Ji&&"AmbientColor"in Ji.GlobalSettings){const t=Ji.GlobalSettings.AmbientColor.value,r=t[0],l=t[1],c=t[2];if(r!==0||l!==0||c!==0){const p=new s.Color(r,l,c);Lc.add(new s.AmbientLight(p,1))}}}}class A4{parse(t){const r=new Map;if("Geometry"in Ji.Objects){const l=Ji.Objects.Geometry;for(const c in l){const p=ya.get(parseInt(c)),h=this.parseGeometry(p,l[c],t);r.set(parseInt(c),h)}}return r}parseGeometry(t,r,l){switch(r.attrType){case"Mesh":return this.parseMeshGeometry(t,r,l);case"NurbsCurve":return this.parseNurbsGeometry(r)}}parseMeshGeometry(t,r,l){const c=l.skeletons,p=[],h=t.parents.map(function(T){return Ji.Objects.Model[T.ID]});if(h.length===0)return;const g=t.children.reduce(function(T,R){return c[R.ID]!==void 0&&(T=c[R.ID]),T},null);t.children.forEach(function(T){l.morphTargets[T.ID]!==void 0&&p.push(l.morphTargets[T.ID])});const v=h[0],_={};"RotationOrder"in v&&(_.eulerOrder=ox(v.RotationOrder.value)),"InheritType"in v&&(_.inheritType=parseInt(v.InheritType.value)),"GeometricTranslation"in v&&(_.translation=v.GeometricTranslation.value),"GeometricRotation"in v&&(_.rotation=v.GeometricRotation.value),"GeometricScaling"in v&&(_.scale=v.GeometricScaling.value);const b=ix(_);return this.genGeometry(r,g,p,b)}genGeometry(t,r,l,c){const p=new s.BufferGeometry;t.attrName&&(p.name=t.attrName);const h=this.parseGeoNode(t,r),g=this.genBuffers(h),v=new s.Float32BufferAttribute(g.vertex,3);if(v.applyMatrix4(c),p.setAttribute("position",v),g.colors.length>0&&p.setAttribute("color",new s.Float32BufferAttribute(g.colors,3)),r&&(p.setAttribute("skinIndex",new s.Uint16BufferAttribute(g.weightsIndices,4)),p.setAttribute("skinWeight",new s.Float32BufferAttribute(g.vertexWeights,4)),p.FBX_Deformer=r),g.normal.length>0){const _=new s.Matrix3().getNormalMatrix(c),b=new s.Float32BufferAttribute(g.normal,3);b.applyNormalMatrix(_),p.setAttribute("normal",b)}if(g.uvs.forEach(function(_,b){let T="uv"+(b+1).toString();b===0&&(T="uv"),p.setAttribute(T,new s.Float32BufferAttribute(g.uvs[b],2))}),h.material&&h.material.mappingType!=="AllSame"){let _=g.materialIndex[0],b=0;if(g.materialIndex.forEach(function(T,R){T!==_&&(p.addGroup(b,R-b,_),_=T,b=R)}),p.groups.length>0){const T=p.groups[p.groups.length-1],R=T.start+T.count;R!==g.materialIndex.length&&p.addGroup(R,g.materialIndex.length-R,_)}p.groups.length===0&&p.addGroup(0,g.materialIndex.length,g.materialIndex[0])}return this.addMorphTargets(p,t,l,c),p}parseGeoNode(t,r){const l={};if(l.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],l.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(l.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(l.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(l.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){l.uv=[];let c=0;for(;t.LayerElementUV[c];)t.LayerElementUV[c].UV&&l.uv.push(this.parseUVs(t.LayerElementUV[c])),c++}return l.weightTable={},r!==null&&(l.skeleton=r,r.rawBones.forEach(function(c,p){c.indices.forEach(function(h,g){l.weightTable[h]===void 0&&(l.weightTable[h]=[]),l.weightTable[h].push({id:p,weight:c.weights[g]})})})),l}genBuffers(t){const r={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let l=0,c=0,p=!1,h=[],g=[],v=[],_=[],b=[],T=[];const R=this;return t.vertexIndices.forEach(function(F,G){let L,O=!1;F<0&&(F=F^-1,O=!0);let k=[],P=[];if(h.push(F*3,F*3+1,F*3+2),t.color){const z=E2(G,l,F,t.color);v.push(z[0],z[1],z[2])}if(t.skeleton){if(t.weightTable[F]!==void 0&&t.weightTable[F].forEach(function(z){P.push(z.weight),k.push(z.id)}),P.length>4){p||(Xa.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),p=!0);const z=[0,0,0,0],j=[0,0,0,0];P.forEach(function(Q,W){let Y=Q,K=k[W];j.forEach(function(se,ce,ge){if(Y>se){ge[ce]=Y,Y=se;const le=z[ce];z[ce]=K,K=le}})}),k=z,P=j}for(;P.length<4;)P.push(0),k.push(0);for(let z=0;z<4;++z)b.push(P[z]),T.push(k[z])}if(t.normal){const z=E2(G,l,F,t.normal);g.push(z[0],z[1],z[2])}t.material&&t.material.mappingType!=="AllSame"&&(L=E2(G,l,F,t.material)[0]),t.uv&&t.uv.forEach(function(z,j){const Q=E2(G,l,F,z);_[j]===void 0&&(_[j]=[]),_[j].push(Q[0]),_[j].push(Q[1])}),c++,O&&(R.genFace(r,t,h,L,g,v,_,b,T,c),l++,c=0,h=[],g=[],v=[],_=[],b=[],T=[])}),r}genFace(t,r,l,c,p,h,g,v,_,b){for(let T=2;T<b;T++)t.vertex.push(r.vertexPositions[l[0]]),t.vertex.push(r.vertexPositions[l[1]]),t.vertex.push(r.vertexPositions[l[2]]),t.vertex.push(r.vertexPositions[l[(T-1)*3]]),t.vertex.push(r.vertexPositions[l[(T-1)*3+1]]),t.vertex.push(r.vertexPositions[l[(T-1)*3+2]]),t.vertex.push(r.vertexPositions[l[T*3]]),t.vertex.push(r.vertexPositions[l[T*3+1]]),t.vertex.push(r.vertexPositions[l[T*3+2]]),r.skeleton&&(t.vertexWeights.push(v[0]),t.vertexWeights.push(v[1]),t.vertexWeights.push(v[2]),t.vertexWeights.push(v[3]),t.vertexWeights.push(v[(T-1)*4]),t.vertexWeights.push(v[(T-1)*4+1]),t.vertexWeights.push(v[(T-1)*4+2]),t.vertexWeights.push(v[(T-1)*4+3]),t.vertexWeights.push(v[T*4]),t.vertexWeights.push(v[T*4+1]),t.vertexWeights.push(v[T*4+2]),t.vertexWeights.push(v[T*4+3]),t.weightsIndices.push(_[0]),t.weightsIndices.push(_[1]),t.weightsIndices.push(_[2]),t.weightsIndices.push(_[3]),t.weightsIndices.push(_[(T-1)*4]),t.weightsIndices.push(_[(T-1)*4+1]),t.weightsIndices.push(_[(T-1)*4+2]),t.weightsIndices.push(_[(T-1)*4+3]),t.weightsIndices.push(_[T*4]),t.weightsIndices.push(_[T*4+1]),t.weightsIndices.push(_[T*4+2]),t.weightsIndices.push(_[T*4+3])),r.color&&(t.colors.push(h[0]),t.colors.push(h[1]),t.colors.push(h[2]),t.colors.push(h[(T-1)*3]),t.colors.push(h[(T-1)*3+1]),t.colors.push(h[(T-1)*3+2]),t.colors.push(h[T*3]),t.colors.push(h[T*3+1]),t.colors.push(h[T*3+2])),r.material&&r.material.mappingType!=="AllSame"&&(t.materialIndex.push(c),t.materialIndex.push(c),t.materialIndex.push(c)),r.normal&&(t.normal.push(p[0]),t.normal.push(p[1]),t.normal.push(p[2]),t.normal.push(p[(T-1)*3]),t.normal.push(p[(T-1)*3+1]),t.normal.push(p[(T-1)*3+2]),t.normal.push(p[T*3]),t.normal.push(p[T*3+1]),t.normal.push(p[T*3+2])),r.uv&&r.uv.forEach(function(R,F){t.uvs[F]===void 0&&(t.uvs[F]=[]),t.uvs[F].push(g[F][0]),t.uvs[F].push(g[F][1]),t.uvs[F].push(g[F][(T-1)*2]),t.uvs[F].push(g[F][(T-1)*2+1]),t.uvs[F].push(g[F][T*2]),t.uvs[F].push(g[F][T*2+1])})}addMorphTargets(t,r,l,c){if(l.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const p=this;l.forEach(function(h){h.rawTargets.forEach(function(g){const v=Ji.Objects.Geometry[g.geoID];v!==void 0&&p.genMorphGeometry(t,r,v,c,g.name)})})}genMorphGeometry(t,r,l,c,p){const h=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],g=l.Vertices!==void 0?l.Vertices.a:[],v=l.Indexes!==void 0?l.Indexes.a:[],_=t.attributes.position.count*3,b=new Float32Array(_);for(let G=0;G<v.length;G++){const L=v[G]*3;b[L]=g[G*3],b[L+1]=g[G*3+1],b[L+2]=g[G*3+2]}const T={vertexIndices:h,vertexPositions:b},R=this.genBuffers(T),F=new s.Float32BufferAttribute(R.vertex,3);F.name=p||l.attrName,F.applyMatrix4(c),t.morphAttributes.position.push(F)}parseNormals(t){const r=t.MappingInformationType,l=t.ReferenceInformationType,c=t.Normals.a;let p=[];return l==="IndexToDirect"&&("NormalIndex"in t?p=t.NormalIndex.a:"NormalsIndex"in t&&(p=t.NormalsIndex.a)),{dataSize:3,buffer:c,indices:p,mappingType:r,referenceType:l}}parseUVs(t){const r=t.MappingInformationType,l=t.ReferenceInformationType,c=t.UV.a;let p=[];return l==="IndexToDirect"&&(p=t.UVIndex.a),{dataSize:2,buffer:c,indices:p,mappingType:r,referenceType:l}}parseVertexColors(t){const r=t.MappingInformationType,l=t.ReferenceInformationType,c=t.Colors.a;let p=[];return l==="IndexToDirect"&&(p=t.ColorIndex.a),{dataSize:4,buffer:c,indices:p,mappingType:r,referenceType:l}}parseMaterialIndices(t){const r=t.MappingInformationType,l=t.ReferenceInformationType;if(r==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:l};const c=t.Materials.a,p=[];for(let h=0;h<c.length;++h)p.push(h);return{dataSize:1,buffer:c,indices:p,mappingType:r,referenceType:l}}parseNurbsGeometry(t){if(ex===void 0)return Xa.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new s.BufferGeometry;const r=parseInt(t.Order);if(isNaN(r))return Xa.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new s.BufferGeometry;const l=r-1,c=t.KnotVector.a,p=[],h=t.Points.a;for(let T=0,R=h.length;T<R;T+=4)p.push(new s.Vector4().fromArray(h,T));let g,v;if(t.Form==="Closed")p.push(p[0]);else if(t.Form==="Periodic"){g=l,v=c.length-1-g;for(let T=0;T<l;++T)p.push(p[T])}const b=new ex(l,c,p,g,v).getPoints(p.length*12);return new s.BufferGeometry().setFromPoints(b)}}class y4{parse(){const t=[],r=this.parseClips();if(r!==void 0)for(const l in r){const c=r[l],p=this.addClip(c);t.push(p)}return t}parseClips(){if(Ji.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const r=this.parseAnimationLayers(t);return this.parseAnimStacks(r)}parseAnimationCurveNodes(){const t=Ji.Objects.AnimationCurveNode,r=new Map;for(const l in t){const c=t[l];if(c.attrName.match(/S|R|T|DeformPercent/)!==null){const p={id:c.id,attr:c.attrName,curves:{}};r.set(p.id,p)}}return r}parseAnimationCurves(t){const r=Ji.Objects.AnimationCurve;for(const l in r){const c={id:r[l].id,times:r[l].KeyTime.a.map(M4),values:r[l].KeyValueFloat.a},p=ya.get(c.id);if(p!==void 0){const h=p.parents[0].ID,g=p.parents[0].relationship;g.match(/X/)?t.get(h).curves.x=c:g.match(/Y/)?t.get(h).curves.y=c:g.match(/Z/)?t.get(h).curves.z=c:g.match(/d|DeformPercent/)&&t.has(h)&&(t.get(h).curves.morph=c)}}}parseAnimationLayers(t){const r=Ji.Objects.AnimationLayer,l=new Map;for(const c in r){const p=[],h=ya.get(parseInt(c));h!==void 0&&(h.children.forEach(function(v,_){if(t.has(v.ID)){const b=t.get(v.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(p[_]===void 0){const T=ya.get(v.ID).parents.filter(function(R){return R.relationship!==void 0})[0].ID;if(T!==void 0){const R=Ji.Objects.Model[T.toString()];if(R===void 0){Xa.warn("THREE.FBXLoader: Encountered a unused curve.",v);return}const F={modelName:R.attrName?s.PropertyBinding.sanitizeNodeName(R.attrName):"",ID:R.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Lc.traverse(function(G){G.ID===R.id&&(F.transform=G.matrix,G.userData.transformData&&(F.eulerOrder=G.userData.transformData.eulerOrder))}),F.transform||(F.transform=new s.Matrix4),"PreRotation"in R&&(F.preRotation=R.PreRotation.value),"PostRotation"in R&&(F.postRotation=R.PostRotation.value),p[_]=F}}p[_]&&(p[_][b.attr]=b)}else if(b.curves.morph!==void 0){if(p[_]===void 0){const T=ya.get(v.ID).parents.filter(function(k){return k.relationship!==void 0})[0].ID,R=ya.get(T).parents[0].ID,F=ya.get(R).parents[0].ID,G=ya.get(F).parents[0].ID,L=Ji.Objects.Model[G],O={modelName:L.attrName?s.PropertyBinding.sanitizeNodeName(L.attrName):"",morphName:Ji.Objects.Deformer[T].attrName};p[_]=O}p[_][b.attr]=b}}}),l.set(parseInt(c),p))}return l}parseAnimStacks(t){const r=Ji.Objects.AnimationStack,l={};for(const c in r){const p=ya.get(parseInt(c)).children;p.length>1&&Xa.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const h=t.get(p[0].ID);l[c]={name:r[c].attrName,layer:h}}return l}addClip(t){let r=[];const l=this;return t.layer.forEach(function(c){r=r.concat(l.generateTracks(c))}),new s.AnimationClip(t.name,-1,r)}generateTracks(t){const r=[];let l=new s.Vector3,c=new s.Quaternion,p=new s.Vector3;if(t.transform&&t.transform.decompose(l,c,p),l=l.toArray(),c=new s.Euler().setFromQuaternion(c,t.eulerOrder).toArray(),p=p.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.T.curves,l,"position");h!==void 0&&r.push(h)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const h=this.generateRotationTrack(t.modelName,t.R.curves,c,t.preRotation,t.postRotation,t.eulerOrder);h!==void 0&&r.push(h)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.S.curves,p,"scale");h!==void 0&&r.push(h)}if(t.DeformPercent!==void 0){const h=this.generateMorphTrack(t);h!==void 0&&r.push(h)}return r}generateVectorTrack(t,r,l,c){const p=this.getTimesForAllAxes(r),h=this.getKeyframeTrackValues(p,r,l);return new s.VectorKeyframeTrack(t+"."+c,p,h)}generateRotationTrack(t,r,l,c,p,h){r.x!==void 0&&(this.interpolateRotations(r.x),r.x.values=r.x.values.map(s.MathUtils.degToRad)),r.y!==void 0&&(this.interpolateRotations(r.y),r.y.values=r.y.values.map(s.MathUtils.degToRad)),r.z!==void 0&&(this.interpolateRotations(r.z),r.z.values=r.z.values.map(s.MathUtils.degToRad));const g=this.getTimesForAllAxes(r),v=this.getKeyframeTrackValues(g,r,l);c!==void 0&&(c=c.map(s.MathUtils.degToRad),c.push(h),c=new s.Euler().fromArray(c),c=new s.Quaternion().setFromEuler(c)),p!==void 0&&(p=p.map(s.MathUtils.degToRad),p.push(h),p=new s.Euler().fromArray(p),p=new s.Quaternion().setFromEuler(p).invert());const _=new s.Quaternion,b=new s.Euler,T=[];for(let R=0;R<v.length;R+=3)b.set(v[R],v[R+1],v[R+2],h),_.setFromEuler(b),c!==void 0&&_.premultiply(c),p!==void 0&&_.multiply(p),_.toArray(T,R/3*4);return new s.QuaternionKeyframeTrack(t+".quaternion",g,T)}generateMorphTrack(t){const r=t.DeformPercent.curves.morph,l=r.values.map(function(p){return p/100}),c=Lc.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new s.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+c+"]",r.times,l)}getTimesForAllAxes(t){let r=[];if(t.x!==void 0&&(r=r.concat(t.x.times)),t.y!==void 0&&(r=r.concat(t.y.times)),t.z!==void 0&&(r=r.concat(t.z.times)),r=r.sort(function(l,c){return l-c}),r.length>1){let l=1,c=r[0];for(let p=1;p<r.length;p++){const h=r[p];h!==c&&(r[l]=h,c=h,l++)}r=r.slice(0,l)}return r}getKeyframeTrackValues(t,r,l){const c=l,p=[];let h=-1,g=-1,v=-1;return t.forEach(function(_){if(r.x&&(h=r.x.times.indexOf(_)),r.y&&(g=r.y.times.indexOf(_)),r.z&&(v=r.z.times.indexOf(_)),h!==-1){const b=r.x.values[h];p.push(b),c[0]=b}else p.push(c[0]);if(g!==-1){const b=r.y.values[g];p.push(b),c[1]=b}else p.push(c[1]);if(v!==-1){const b=r.z.values[v];p.push(b),c[2]=b}else p.push(c[2])}),p}interpolateRotations(t){for(let r=1;r<t.values.length;r++){const l=t.values[r-1],c=t.values[r]-l,p=Math.abs(c);if(p>=180){const h=p/180,g=c/h;let v=l+g;const _=t.times[r-1],T=(t.times[r]-_)/h;let R=_+T;const F=[],G=[];for(;R<t.times[r];)F.push(R),R+=T,G.push(v),v+=g;t.times=ax(t.times,r,F),t.values=ax(t.values,r,G)}}}}class v4{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,r){this.currentProp=t,this.currentPropName=r}parse(t){this.currentIndent=0,this.allNodes=new nx,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const r=this,l=t.split(/[\r\n]+/);return l.forEach(function(c,p){const h=c.match(/^[\s\t]*;/),g=c.match(/^[\s\t]*$/);if(h||g)return;const v=c.match("^\\t{"+r.currentIndent+"}(\\w+):(.*){",""),_=c.match("^\\t{"+r.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=c.match("^\\t{"+(r.currentIndent-1)+"}}");v?r.parseNodeBegin(c,v):_?r.parseNodeProperty(c,_,l[++p]):b?r.popStack():c.match(/^[^\s\t}]/)&&r.parseNodePropertyContinued(c)}),this.allNodes}parseNodeBegin(t,r){const l=r[1].trim().replace(/^"/,"").replace(/"$/,""),c=r[2].split(",").map(function(v){return v.trim().replace(/^"/,"").replace(/"$/,"")}),p={name:l},h=this.parseNodeAttr(c),g=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(l,p):l in g?(l==="PoseNode"?g.PoseNode.push(p):g[l].id!==void 0&&(g[l]={},g[l][g[l].id]=g[l]),h.id!==""&&(g[l][h.id]=p)):typeof h.id=="number"?(g[l]={},g[l][h.id]=p):l!=="Properties70"&&(l==="PoseNode"?g[l]=[p]:g[l]=p),typeof h.id=="number"&&(p.id=h.id),h.name!==""&&(p.attrName=h.name),h.type!==""&&(p.attrType=h.type),this.pushStack(p)}parseNodeAttr(t){let r=t[0];t[0]!==""&&(r=parseInt(t[0]),isNaN(r)&&(r=t[0]));let l="",c="";return t.length>1&&(l=t[1].replace(/^(\w+)::/,""),c=t[2]),{id:r,name:l,type:c}}parseNodeProperty(t,r,l){let c=r[1].replace(/^"/,"").replace(/"$/,"").trim(),p=r[2].replace(/^"/,"").replace(/"$/,"").trim();c==="Content"&&p===","&&(p=l.replace(/"/g,"").replace(/,$/,"").trim());const h=this.getCurrentNode();if(h.name==="Properties70"){this.parseNodeSpecialProperty(t,c,p);return}if(c==="C"){const v=p.split(",").slice(1),_=parseInt(v[0]),b=parseInt(v[1]);let T=p.split(",").slice(3);T=T.map(function(R){return R.trim().replace(/^"/,"")}),c="connections",p=[_,b],C4(p,T),h[c]===void 0&&(h[c]=[])}c==="Node"&&(h.id=p),c in h&&Array.isArray(h[c])?h[c].push(p):c!=="a"?h[c]=p:h.a=p,this.setCurrentProp(h,c),c==="a"&&p.slice(-1)!==","&&(h.a=zE(p))}parseNodePropertyContinued(t){const r=this.getCurrentNode();r.a+=t,t.slice(-1)!==","&&(r.a=zE(r.a))}parseNodeSpecialProperty(t,r,l){const c=l.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),p=c[0],h=c[1],g=c[2],v=c[3];let _=c[4];switch(h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":_=parseFloat(_);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":_=zE(_);break}this.getPrevNode()[p]={type:h,type2:g,flag:v,value:_},this.setCurrentProp(this.getPrevNode(),p)}}class _4{parse(t){const r=new tx(t);r.skip(23);const l=r.getUint32();if(l<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+l);const c=new nx;for(;!this.endOfContent(r);){const p=this.parseNode(r,l);p!==null&&c.add(p.name,p)}return c}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,r){const l={},c=r>=7500?t.getUint64():t.getUint32(),p=r>=7500?t.getUint64():t.getUint32();r>=7500?t.getUint64():t.getUint32();const h=t.getUint8(),g=t.getString(h);if(c===0)return null;const v=[];for(let R=0;R<p;R++)v.push(this.parseProperty(t));const _=v.length>0?v[0]:"",b=v.length>1?v[1]:"",T=v.length>2?v[2]:"";for(l.singleProperty=p===1&&t.getOffset()===c;c>t.getOffset();){const R=this.parseNode(t,r);R!==null&&this.parseSubNode(g,l,R)}return l.propertyList=v,typeof _=="number"&&(l.id=_),b!==""&&(l.attrName=b),T!==""&&(l.attrType=T),g!==""&&(l.name=g),l}parseSubNode(t,r,l){if(l.singleProperty===!0){const c=l.propertyList[0];Array.isArray(c)?(r[l.name]=l,l.a=c):r[l.name]=c}else if(t==="Connections"&&l.name==="C"){const c=[];l.propertyList.forEach(function(p,h){h!==0&&c.push(p)}),r.connections===void 0&&(r.connections=[]),r.connections.push(c)}else if(l.name==="Properties70")Object.keys(l).forEach(function(p){r[p]=l[p]});else if(t==="Properties70"&&l.name==="P"){let c=l.propertyList[0],p=l.propertyList[1];const h=l.propertyList[2],g=l.propertyList[3];let v;c.indexOf("Lcl ")===0&&(c=c.replace("Lcl ","Lcl_")),p.indexOf("Lcl ")===0&&(p=p.replace("Lcl ","Lcl_")),p==="Color"||p==="ColorRGB"||p==="Vector"||p==="Vector3D"||p.indexOf("Lcl_")===0?v=[l.propertyList[4],l.propertyList[5],l.propertyList[6]]:v=l.propertyList[4],r[c]={type:p,type2:h,flag:g,value:v}}else r[l.name]===void 0?typeof l.id=="number"?(r[l.name]={},r[l.name][l.id]=l):r[l.name]=l:l.name==="PoseNode"?(Array.isArray(r[l.name])||(r[l.name]=[r[l.name]]),r[l.name].push(l)):r[l.name][l.id]===void 0&&(r[l.name][l.id]=l)}parseProperty(t){const r=t.getString(1);let l;switch(r){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return l=t.getUint32(),t.getArrayBuffer(l);case"S":return l=t.getUint32(),t.getString(l);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const c=t.getUint32(),p=t.getUint32(),h=t.getUint32();if(p===0)switch(r){case"b":case"c":return t.getBooleanArray(c);case"d":return t.getFloat64Array(c);case"f":return t.getFloat32Array(c);case"i":return t.getInt32Array(c);case"l":return t.getInt64Array(c)}const g=Gf(new Uint8Array(t.getArrayBuffer(h))),v=new tx(g.buffer);switch(r){case"b":case"c":return v.getBooleanArray(c);case"d":return v.getFloat64Array(c);case"f":return v.getFloat32Array(c);case"i":return v.getInt32Array(c);case"l":return v.getInt64Array(c)}default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}}class tx{constructor(t,r){this.dv=new DataView(t),this.offset=0,this.littleEndian=r!==void 0?r:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const r=[];for(let l=0;l<t;l++)r.push(this.getBoolean());return r}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getInt32());return r}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r&2147483648?(r=~r&4294967295,t=~t&4294967295,t===4294967295&&(r=r+1&4294967295),t=t+1&4294967295,-(r*4294967296+t)):r*4294967296+t}getInt64Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getInt64());return r}getUint64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getFloat32());return r}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getFloat64());return r}getArrayBuffer(t){const r=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}getString(t){let r=[];for(let c=0;c<t;c++)r[c]=this.getUint8();const l=r.indexOf(0);return l>=0&&(r=r.slice(0,l)),s.LoaderUtils.decodeText(new Uint8Array(r))}}class nx{add(t,r){this[t]=r}}function E4(i){const t="Kaydara FBX Binary  \0";return i.byteLength>=t.length&&t===sx(i,0,t.length)}function b4(i){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function l(c){const p=i[c-1];return i=i.slice(r+c),r++,p}for(let c=0;c<t.length;++c)if(l(1)===t[c])return!1;return!0}function rx(i){const t=/FBXVersion: (\d+)/,r=i.match(t);if(r)return parseInt(r[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function M4(i){return i/46186158e3}const x4=[];function E2(i,t,r,l){let c;switch(l.mappingType){case"ByPolygonVertex":c=i;break;case"ByPolygon":c=t;break;case"ByVertice":c=r;break;case"AllSame":c=l.indices[0];break;default:Xa.warn("THREE.FBXLoader: unknown attribute mapping type "+l.mappingType)}l.referenceType==="IndexToDirect"&&(c=l.indices[c]);const p=c*l.dataSize,h=p+l.dataSize;return S4(x4,l.buffer,p,h)}const kE=new s.Euler,L0=new s.Vector3;function ix(i){const t=new s.Matrix4,r=new s.Matrix4,l=new s.Matrix4,c=new s.Matrix4,p=new s.Matrix4,h=new s.Matrix4,g=new s.Matrix4,v=new s.Matrix4,_=new s.Matrix4,b=new s.Matrix4,T=new s.Matrix4,R=new s.Matrix4,F=i.inheritType?i.inheritType:0;if(i.translation&&t.setPosition(L0.fromArray(i.translation)),i.preRotation){const ce=i.preRotation.map(s.MathUtils.degToRad);ce.push(i.eulerOrder),r.makeRotationFromEuler(kE.fromArray(ce))}if(i.rotation){const ce=i.rotation.map(s.MathUtils.degToRad);ce.push(i.eulerOrder),l.makeRotationFromEuler(kE.fromArray(ce))}if(i.postRotation){const ce=i.postRotation.map(s.MathUtils.degToRad);ce.push(i.eulerOrder),c.makeRotationFromEuler(kE.fromArray(ce)),c.invert()}i.scale&&p.scale(L0.fromArray(i.scale)),i.scalingOffset&&g.setPosition(L0.fromArray(i.scalingOffset)),i.scalingPivot&&h.setPosition(L0.fromArray(i.scalingPivot)),i.rotationOffset&&v.setPosition(L0.fromArray(i.rotationOffset)),i.rotationPivot&&_.setPosition(L0.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(T.copy(i.parentMatrix),b.copy(i.parentMatrixWorld));const G=r.clone().multiply(l).multiply(c),L=new s.Matrix4;L.extractRotation(b);const O=new s.Matrix4;O.copyPosition(b);const k=O.clone().invert().multiply(b),P=L.clone().invert().multiply(k),z=p,j=new s.Matrix4;if(F===0)j.copy(L).multiply(G).multiply(P).multiply(z);else if(F===1)j.copy(L).multiply(P).multiply(G).multiply(z);else{const ge=new s.Matrix4().scale(new s.Vector3().setFromMatrixScale(T)).clone().invert(),le=P.clone().multiply(ge);j.copy(L).multiply(G).multiply(le).multiply(z)}const Q=_.clone().invert(),W=h.clone().invert();let Y=t.clone().multiply(v).multiply(_).multiply(r).multiply(l).multiply(c).multiply(Q).multiply(g).multiply(h).multiply(p).multiply(W);const K=new s.Matrix4().copyPosition(Y),se=b.clone().multiply(K);return R.copyPosition(se),Y=R.clone().multiply(j),Y.premultiply(b.invert()),Y}function ox(i){i=i||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(Xa.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[i]}function zE(i){return i.split(",").map(function(r){return parseFloat(r)})}function sx(i,t,r){return t===void 0&&(t=0),r===void 0&&(r=i.byteLength),s.LoaderUtils.decodeText(new Uint8Array(i,t,r))}function C4(i,t){for(let r=0,l=i.length,c=t.length;r<c;r++,l++)i[l]=t[r]}function S4(i,t,r,l){for(let c=r,p=0;c<l;c++,p++)i[p]=t[c];return i}function ax(i,t,r){return i.slice(0,t).concat(r).concat(i.slice(t))}function GE(i){return(0,E.D)(LE,i)}GE.preload=i=>E.D.preload(LE,i),GE.clear=i=>E.D.clear(LE,i);class w4{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const r=this.workerCreator();r.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=r}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,r){const l=this.workersResolve[t];if(l&&l(r),this.queue.length){const{resolve:c,msg:p,transfer:h}=this.queue.shift();this.workersResolve[t]=c,this.workers[t].postMessage(p,h)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,r){return new Promise(l=>{const c=this._getIdleWorker();c!==-1?(this._initWorker(c),this.workerStatus|=1<<c,this.workersResolve[c]=l,this.workers[c].postMessage(t,r)):this.queue.push({resolve:l,msg:t,transfer:r})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var lx=A(48764).lW;const cx=0,HI=1,T4=2,WI=3,px=0,B4=0,R4=2,I4=0,VI=1,QI=160,KI=161,XI=162,YI=163,JI=166,F4=0,O4=1,qI=0,ZI=1,NE=2,$I=3,e6=4,t6=5,n6=6,r6=7,i6=8,o6=9,s6=10,a6=11,l6=12,c6=13,p6=14,u6=15,d6=16,h6=17,f6=18,g6=0,D4=1,m6=2,A6=3,y6=4,v6=5,_6=6,E6=7,b6=8,M6=9,x6=10,C6=11,S6=0,w6=1,T6=2,B6=13,R6=14,I6=15,F6=128,ux=64,O6=32,D6=16,dx=0,P6=1,L6=2,k6=3,z6=4,G6=5,N6=6,U6=7,j6=8,hx=9,H6=10,W6=13,V6=14,UE=15,fx=16,Q6=17,K6=20,X6=21,jE=22,Y6=23,J6=24,q6=27,Z6=28,$6=29,eF=30,tF=31,nF=34,rF=35,iF=36,gx=37,oF=38,sF=41,aF=42,HE=43,lF=44,cF=45,pF=48,uF=49,dF=50,hF=58,fF=59,gF=62,mF=63,AF=64,yF=65,vF=68,_F=69,EF=70,bF=71,MF=74,xF=75,mx=76,CF=77,SF=78,wF=81,TF=82,Ax=83,BF=84,RF=85,IF=88,FF=89,OF=90,DF=91,PF=92,LF=95,kF=96,yx=97,zF=98,GF=99,vx=100,NF=101,UF=102,_x=103,jF=104,HF=105,WF=106,VF=107,QF=108,Ex=109,KF=110,XF=111,YF=112,JF=113,qF=114,ZF=115,$F=116,eO=117,tO=118,nO=119,rO=120,iO=121,oO=122,sO=123,aO=124,lO=125,cO=126,pO=127,uO=128,dO=129,hO=130,fO=131,gO=132,mO=133,AO=134,yO=135,vO=136,_O=137,EO=138,bO=139,MO=140,xO=141,CO=142,SO=143,wO=144,TO=145,BO=146,RO=147,IO=148,FO=149,OO=150,DO=151,PO=152,LO=153,kO=154,zO=155,GO=156,NO=157,UO=158,jO=159,HO=160,WO=161,VO=162,QO=163,KO=164,XO=165,YO=166,JO=167,qO=168,ZO=169,$O=170,e5=171,t5=172,n5=173,r5=174,i5=175,o5=176,s5=177,a5=178,l5=179,c5=180,p5=181,u5=182,d5=183,h5=184,f5=1000156007,g5=1000156008,m5=1000156009,A5=1000156010,y5=1000156011,v5=1000156017,_5=1000156018,E5=1000156019,b5=1000156020,M5=1000156021,x5=1000054e3,C5=1000054001,S5=1000054002,w5=1000054003,T5=1000054004,B5=1000054005,R5=1000054006,I5=1000054007,F5=1000066e3,O5=1000066001,D5=1000066002,P5=1000066003,L5=1000066004,k5=1000066005,z5=1000066006,G5=1000066007,N5=1000066008,U5=1000066009,j5=1000066010,H5=1000066011,W5=1000066012,V5=1000066013,Q5=100034e4,K5=1000340001;class P4{constructor(){this.vkFormat=dx,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=cx,this.levels=[],this.dataFormatDescriptor=[{vendorId:B4,descriptorType:px,descriptorBlockSize:0,versionNumber:R4,colorModel:I4,colorPrimaries:D4,transferFunction:NE,flags:F4,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class RA{constructor(t,r,l,c){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+r,l),this._littleEndian=c,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),l=t+t1(2,32)*r;return this._offset+=8,l}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,r=0){const l=this._offset;let c=0;for(;this._dataView.getUint8(this._offset)!==r&&c<t;)c++,this._offset++;return c<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+l,c)}}const L4=null,bx=new Uint8Array([0]),Tl=[171,75,84,88,32,50,48,187,13,10,26,10],Mx=68;function xx(i){return typeof TextEncoder!="undefined"?new TextEncoder().encode(i):lx.from(i)}function Cx(i){return typeof TextDecoder!="undefined"?new TextDecoder().decode(i):lx.from(i).toString("utf8")}function b2(i){let t=0;for(const c of i)t+=c.byteLength;const r=new Uint8Array(t);let l=0;for(const c of i)r.set(new Uint8Array(c),l),l+=c.byteLength;return r}function k4(i){const t=new Uint8Array(i.buffer,i.byteOffset,Tl.length);if(t[0]!==Tl[0]||t[1]!==Tl[1]||t[2]!==Tl[2]||t[3]!==Tl[3]||t[4]!==Tl[4]||t[5]!==Tl[5]||t[6]!==Tl[6]||t[7]!==Tl[7]||t[8]!==Tl[8]||t[9]!==Tl[9]||t[10]!==Tl[10]||t[11]!==Tl[11])throw new Error("Missing KTX 2.0 identifier.");const r=new P4,l=17*Uint32Array.BYTES_PER_ELEMENT,c=new RA(i,Tl.length,l,!0);r.vkFormat=c._nextUint32(),r.typeSize=c._nextUint32(),r.pixelWidth=c._nextUint32(),r.pixelHeight=c._nextUint32(),r.pixelDepth=c._nextUint32(),r.layerCount=c._nextUint32(),r.faceCount=c._nextUint32();const p=c._nextUint32();r.supercompressionScheme=c._nextUint32();const h=c._nextUint32(),g=c._nextUint32(),v=c._nextUint32(),_=c._nextUint32(),b=c._nextUint64(),T=c._nextUint64(),R=p*3*8,F=new RA(i,Tl.length+l,R,!0);for(let Ye=0;Ye<p;Ye++)r.levels.push({levelData:new Uint8Array(i.buffer,i.byteOffset+F._nextUint64(),F._nextUint64()),uncompressedByteLength:F._nextUint64()});const G=new RA(i,h,g,!0),L={vendorId:G._skip(4)._nextUint16(),descriptorType:G._nextUint16(),versionNumber:G._nextUint16(),descriptorBlockSize:G._nextUint16(),colorModel:G._nextUint8(),colorPrimaries:G._nextUint8(),transferFunction:G._nextUint8(),flags:G._nextUint8(),texelBlockDimension:[G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8()],bytesPlane:[G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8()],samples:[]},O=6,k=4,P=(L.descriptorBlockSize/4-O)/k;for(let Ye=0;Ye<P;Ye++){const Ce={bitOffset:G._nextUint16(),bitLength:G._nextUint8(),channelType:G._nextUint8(),samplePosition:[G._nextUint8(),G._nextUint8(),G._nextUint8(),G._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Ce.channelType&ux?(Ce.sampleLower=G._nextInt32(),Ce.sampleUpper=G._nextInt32()):(Ce.sampleLower=G._nextUint32(),Ce.sampleUpper=G._nextUint32()),L.samples[Ye]=Ce}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(L);const z=new RA(i,v,_,!0);for(;z._offset<_;){const Ye=z._nextUint32(),Ce=z._scan(Ye),Ee=Cx(Ce),_e=z._scan(Ye-Ce.byteLength);r.keyValue[Ee]=Ee.match(/^ktx/i)?Cx(_e):_e,z._offset%4&&z._skip(4-z._offset%4)}if(T<=0)return r;const j=new RA(i,b,T,!0),Q=j._nextUint16(),W=j._nextUint16(),Y=j._nextUint32(),K=j._nextUint32(),se=j._nextUint32(),ce=j._nextUint32(),ge=[];for(let Ye=0;Ye<p;Ye++)ge.push({imageFlags:j._nextUint32(),rgbSliceByteOffset:j._nextUint32(),rgbSliceByteLength:j._nextUint32(),alphaSliceByteOffset:j._nextUint32(),alphaSliceByteLength:j._nextUint32()});const le=b+j._offset,xe=le+Y,me=xe+K,Be=me+se,ke=new Uint8Array(i.buffer,i.byteOffset+le,Y),Re=new Uint8Array(i.buffer,i.byteOffset+xe,K),ze=new Uint8Array(i.buffer,i.byteOffset+me,se),Pe=new Uint8Array(i.buffer,i.byteOffset+Be,ce);return r.globalData={endpointCount:Q,selectorCount:W,imageDescs:ge,endpointsData:ke,selectorsData:Re,tablesData:ze,extendedData:Pe},r}function M2(){return M2=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=r[l])}return i},M2.apply(this,arguments)}const z4={keepWriter:!1};function X5(i,t={}){t=M2({},z4,t);let r=new ArrayBuffer(0);if(i.globalData){const P=new ArrayBuffer(20+i.globalData.imageDescs.length*5*4),z=new DataView(P);z.setUint16(0,i.globalData.endpointCount,!0),z.setUint16(2,i.globalData.selectorCount,!0),z.setUint32(4,i.globalData.endpointsData.byteLength,!0),z.setUint32(8,i.globalData.selectorsData.byteLength,!0),z.setUint32(12,i.globalData.tablesData.byteLength,!0),z.setUint32(16,i.globalData.extendedData.byteLength,!0);for(let j=0;j<i.globalData.imageDescs.length;j++){const Q=i.globalData.imageDescs[j];z.setUint32(20+j*5*4+0,Q.imageFlags,!0),z.setUint32(20+j*5*4+4,Q.rgbSliceByteOffset,!0),z.setUint32(20+j*5*4+8,Q.rgbSliceByteLength,!0),z.setUint32(20+j*5*4+12,Q.alphaSliceByteOffset,!0),z.setUint32(20+j*5*4+16,Q.alphaSliceByteLength,!0)}r=b2([P,i.globalData.endpointsData,i.globalData.selectorsData,i.globalData.tablesData,i.globalData.extendedData])}const l=[];let c=i.keyValue;t.keepWriter||(c=M2({},i.keyValue,{KTXwriter:L4}));for(const P in c){const z=c[P],j=xx(P),Q=typeof z=="string"?xx(z):z,W=j.byteLength+1+Q.byteLength+1,Y=W%4?4-W%4:0;l.push(b2([new Uint32Array([W]),j,bx,Q,bx,new Uint8Array(Y).fill(0)]))}const p=b2(l);if(i.dataFormatDescriptor.length!==1||i.dataFormatDescriptor[0].descriptorType!==px)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const h=i.dataFormatDescriptor[0],g=new ArrayBuffer(28+h.samples.length*16),v=new DataView(g),_=24+h.samples.length*16;if(v.setUint32(0,g.byteLength,!0),v.setUint16(4,h.vendorId,!0),v.setUint16(6,h.descriptorType,!0),v.setUint16(8,h.versionNumber,!0),v.setUint16(10,_,!0),v.setUint8(12,h.colorModel),v.setUint8(13,h.colorPrimaries),v.setUint8(14,h.transferFunction),v.setUint8(15,h.flags),!Array.isArray(h.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");v.setUint8(16,h.texelBlockDimension[0]),v.setUint8(17,h.texelBlockDimension[1]),v.setUint8(18,h.texelBlockDimension[2]),v.setUint8(19,h.texelBlockDimension[3]);for(let P=0;P<8;P++)v.setUint8(20+P,h.bytesPlane[P]);for(let P=0;P<h.samples.length;P++){const z=h.samples[P],j=28+P*16;if(z.channelID)throw new Error("channelID has been renamed to channelType.");v.setUint16(j+0,z.bitOffset,!0),v.setUint8(j+2,z.bitLength),v.setUint8(j+3,z.channelType),v.setUint8(j+4,z.samplePosition[0]),v.setUint8(j+5,z.samplePosition[1]),v.setUint8(j+6,z.samplePosition[2]),v.setUint8(j+7,z.samplePosition[3]),z.channelType&ux?(v.setInt32(j+8,z.sampleLower,!0),v.setInt32(j+12,z.sampleUpper,!0)):(v.setUint32(j+8,z.sampleLower,!0),v.setUint32(j+12,z.sampleUpper,!0))}const b=Tl.length+Mx+i.levels.length*3*8,T=b+g.byteLength;let R=r.byteLength>0?T+p.byteLength:0;R%8&&(R+=8-R%8);const F=[],G=new DataView(new ArrayBuffer(i.levels.length*3*8));let L=(R||T+p.byteLength)+r.byteLength;for(let P=0;P<i.levels.length;P++){const z=i.levels[P];F.push(z.levelData),G.setBigUint64(P*24+0,BigInt(L),!0),G.setBigUint64(P*24+8,BigInt(z.levelData.byteLength),!0),G.setBigUint64(P*24+16,BigInt(z.uncompressedByteLength),!0),L+=z.levelData.byteLength}const O=new ArrayBuffer(Mx),k=new DataView(O);return k.setUint32(0,i.vkFormat,!0),k.setUint32(4,i.typeSize,!0),k.setUint32(8,i.pixelWidth,!0),k.setUint32(12,i.pixelHeight,!0),k.setUint32(16,i.pixelDepth,!0),k.setUint32(20,i.layerCount,!0),k.setUint32(24,i.faceCount,!0),k.setUint32(28,i.levels.length,!0),k.setUint32(32,i.supercompressionScheme,!0),k.setUint32(36,b,!0),k.setUint32(40,g.byteLength,!0),k.setUint32(44,T,!0),k.setUint32(48,p.byteLength,!0),k.setBigUint64(52,BigInt(r.byteLength>0?R:0),!0),k.setBigUint64(60,BigInt(r.byteLength),!0),new Uint8Array(b2([new Uint8Array(Tl).buffer,O,G.buffer,g,p,R>0?new ArrayBuffer(R-(T+p.byteLength)):new ArrayBuffer(0),r,...F]))}var G4=A(48764).lW;let WE,Oh,VE;const QE={env:{emscripten_notify_memory_growth:function(i){VE=new Uint8Array(Oh.exports.memory.buffer)}}};class N4{init(){return WE||(WE=typeof fetch!="undefined"?fetch("data:application/wasm;base64,"+Sx).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,QE)).then(this._init):WebAssembly.instantiate(G4.from(Sx,"base64"),QE).then(this._init),WE)}_init(t){Oh=t.instance,QE.env.emscripten_notify_memory_growth(0)}decode(t,r=0){if(!Oh)throw new Error("ZSTDDecoder: Await .init() before decoding.");const l=t.byteLength,c=Oh.exports.malloc(l);VE.set(t,c),r=r||Number(Oh.exports.ZSTD_findDecompressedSize(c,l));const p=Oh.exports.malloc(r),h=Oh.exports.ZSTD_decompress(p,r,c,l),g=VE.slice(p,p+h);return Oh.exports.free(c),Oh.exports.free(p),g}}const Sx="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class U4 extends s.CompressedTexture{constructor(t,r,l,c,p,h){super(t,r,l,p,h),this.isCompressedArrayTexture=!0,this.image.depth=c,this.wrapR=s.ClampToEdgeWrapping}}class j4 extends s.Texture{constructor(t=null,r=1,l=1,c=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:l,depth:c},this.magFilter=s.NearestFilter,this.minFilter=s.NearestFilter,this.wrapR=s.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var IA=A(25108),H4=Object.defineProperty,W4=(i,t,r)=>t in i?H4(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,x2=(i,t,r)=>(W4(i,typeof t!="symbol"?t+"":t,r),r);const KE=new WeakMap;let XE=0,YE;const FA=class extends s.Loader{constructor(i){super(i),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new w4,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!="undefined"&&IA.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(i){return this.transcoderPath=i,this}setWorkerLimit(i){return this.workerPool.setWorkerLimit(i),this}detectSupport(i){return this.workerConfig={astcSupported:i.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:i.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:i.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:i.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:i.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:i.extensions.has("WEBGL_compressed_texture_pvrtc")||i.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},i.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const i=new s.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setWithCredentials(this.withCredentials);const t=i.loadAsync("basis_transcoder.js"),r=new s.FileLoader(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const l=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,l]).then(([c,p])=>{const h=FA.BasisWorker.toString(),g=["/* constants */","let _EngineFormat = "+JSON.stringify(FA.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(FA.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(FA.BasisFormat),"/* basis_transcoder.js */",c,"/* worker */",h.substring(h.indexOf("{")+1,h.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([g])),this.transcoderBinary=p,this.workerPool.setWorkerCreator(()=>{const v=new Worker(this.workerSourceURL),_=this.transcoderBinary.slice(0);return v.postMessage({type:"init",config:this.workerConfig,transcoderBinary:_},[_]),v})}),XE>0&&IA.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),XE++}return this.transcoderPending}load(i,t,r,l){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const c=new s.FileLoader(this.manager);c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials),c.load(i,p=>{if(KE.has(p))return KE.get(p).promise.then(t).catch(l);this._createTexture(p).then(h=>t?t(h):null).catch(l)},r,l)}_createTextureFrom(i,t){const{mipmaps:r,width:l,height:c,format:p,type:h,error:g,dfdTransferFn:v,dfdFlags:_}=i;if(h==="error")return Promise.reject(g);const b=t.layerCount>1?new U4(r,l,c,t.layerCount,p,s.UnsignedByteType):new s.CompressedTexture(r,l,c,p,s.UnsignedByteType);return b.minFilter=r.length===1?s.LinearFilter:s.LinearMipmapLinearFilter,b.magFilter=s.LinearFilter,b.generateMipmaps=!1,b.needsUpdate=!0,"colorSpace"in b?b.colorSpace=v===NE?"srgb":"srgb-linear":b.encoding=v===NE?3001:3e3,b.premultiplyAlpha=!!(_&O4),b}_createTexture(r){return ss(this,arguments,function*(i,t={}){const l=k4(new Uint8Array(i));if(l.vkFormat!==dx)return Q4(l);const c=t,p=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:i,taskConfig:c},[i])).then(h=>this._createTextureFrom(h.data,l));return KE.set(i,{promise:p}),p})}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),XE--,this}};let um=FA;x2(um,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),x2(um,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),x2(um,"EngineFormat",{RGBAFormat:s.RGBAFormat,RGBA_ASTC_4x4_Format:s.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:s.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:s.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:s.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:s.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:s.RGB_ETC1_Format,RGB_ETC2_Format:s.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:s.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:s.RGB_S3TC_DXT1_Format}),x2(um,"BasisWorker",function(){let i,t,r;const l=_EngineFormat,c=_TranscoderFormat,p=_BasisFormat;self.addEventListener("message",function(G){const L=G.data;switch(L.type){case"init":i=L.config,h(L.transcoderBinary);break;case"transcode":t.then(()=>{try{const{width:O,height:k,hasAlpha:P,mipmaps:z,format:j,dfdTransferFn:Q,dfdFlags:W}=g(L.buffer),Y=[];for(let K=0;K<z.length;++K)Y.push(z[K].data.buffer);self.postMessage({type:"transcode",id:L.id,width:O,height:k,hasAlpha:P,mipmaps:z,format:j,dfdTransferFn:Q,dfdFlags:W},Y)}catch(O){IA.error(O),self.postMessage({type:"error",id:L.id,error:O.message})}});break}});function h(G){t=new Promise(L=>{r={wasmBinary:G,onRuntimeInitialized:L},BASIS(r)}).then(()=>{r.initializeBasis(),r.KTX2File===void 0&&IA.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function g(G){const L=new r.KTX2File(new Uint8Array(G));function O(){L.close(),L.delete()}if(!L.isValid())throw O(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const k=L.isUASTC()?p.UASTC_4x4:p.ETC1S,P=L.getWidth(),z=L.getHeight(),j=L.getLayers()||1,Q=L.getLevels(),W=L.getHasAlpha(),Y=L.getDFDTransferFunc(),K=L.getDFDFlags(),{transcoderFormat:se,engineFormat:ce}=T(k,P,z,W);if(!P||!z||!Q)throw O(),new Error("THREE.KTX2Loader:	Invalid texture");if(!L.startTranscoding())throw O(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ge=[];for(let le=0;le<Q;le++){const xe=[];let me,Be;for(let ke=0;ke<j;ke++){const Re=L.getImageLevelInfo(le,ke,0);me=Re.origWidth<4?Re.origWidth:Re.width,Be=Re.origHeight<4?Re.origHeight:Re.height;const ze=new Uint8Array(L.getImageTranscodedSizeInBytes(le,ke,0,se));if(!L.transcodeImage(ze,le,ke,0,se,0,-1,-1))throw O(),new Error("THREE.KTX2Loader: .transcodeImage failed.");xe.push(ze)}ge.push({data:F(xe),width:me,height:Be})}return O(),{width:P,height:z,hasAlpha:W,mipmaps:ge,format:ce,dfdTransferFn:Y,dfdFlags:K}}const v=[{if:"astcSupported",basisFormat:[p.UASTC_4x4],transcoderFormat:[c.ASTC_4x4,c.ASTC_4x4],engineFormat:[l.RGBA_ASTC_4x4_Format,l.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.BC7_M5,c.BC7_M5],engineFormat:[l.RGBA_BPTC_Format,l.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.BC1,c.BC3],engineFormat:[l.RGB_S3TC_DXT1_Format,l.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.ETC1,c.ETC2],engineFormat:[l.RGB_ETC2_Format,l.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.ETC1],engineFormat:[l.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.PVRTC1_4_RGB,c.PVRTC1_4_RGBA],engineFormat:[l.RGB_PVRTC_4BPPV1_Format,l.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],_=v.sort(function(G,L){return G.priorityETC1S-L.priorityETC1S}),b=v.sort(function(G,L){return G.priorityUASTC-L.priorityUASTC});function T(G,L,O,k){let P,z;const j=G===p.ETC1S?_:b;for(let Q=0;Q<j.length;Q++){const W=j[Q];if(i[W.if]&&W.basisFormat.includes(G)&&!(k&&W.transcoderFormat.length<2)&&!(W.needsPowerOfTwo&&!(R(L)&&R(O))))return P=W.transcoderFormat[k?1:0],z=W.engineFormat[k?1:0],{transcoderFormat:P,engineFormat:z}}return IA.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),P=c.RGBA32,z=l.RGBAFormat,{transcoderFormat:P,engineFormat:z}}function R(G){return G<=2?!0:(G&G-1)===0&&G!==0}function F(G){let L=0;for(let P=0;P<G.length;P++){const z=G[P];L+=z.byteLength}const O=new Uint8Array(L);let k=0;for(let P=0;P<G.length;P++){const z=G[P];O.set(z,k),k+=z.byteLength}return O}});const wx={[Ex]:s.RGBAFormat,[yx]:s.RGBAFormat,[gx]:s.RGBAFormat,[HE]:s.RGBAFormat,[_x]:s.RGFormat,[Ax]:s.RGFormat,[fx]:s.RGFormat,[jE]:s.RGFormat,[vx]:s.RedFormat,[mx]:s.RedFormat,[UE]:s.RedFormat,[hx]:s.RedFormat},JE={[Ex]:s.FloatType,[yx]:s.HalfFloatType,[gx]:s.UnsignedByteType,[HE]:s.UnsignedByteType,[_x]:s.FloatType,[Ax]:s.HalfFloatType,[fx]:s.UnsignedByteType,[jE]:s.UnsignedByteType,[vx]:s.FloatType,[mx]:s.HalfFloatType,[UE]:s.UnsignedByteType,[hx]:s.UnsignedByteType},V4={[HE]:3001,[jE]:3001,[UE]:3001};function Q4(i){return ss(this,null,function*(){const{vkFormat:t,pixelWidth:r,pixelHeight:l,pixelDepth:c}=i;if(wx[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const p=i.levels[0];let h,g;if(i.supercompressionScheme===cx)h=p.levelData;else if(i.supercompressionScheme===T4)YE||(YE=new Promise(_=>ss(this,null,function*(){const b=new N4;yield b.init(),_(b)}))),h=(yield YE).decode(p.levelData,p.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");JE[t]===s.FloatType?g=new Float32Array(h.buffer,h.byteOffset,h.byteLength/Float32Array.BYTES_PER_ELEMENT):JE[t]===s.HalfFloatType?g=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/Uint16Array.BYTES_PER_ELEMENT):g=h;const v=c===0?new s.DataTexture(g,r,l):new j4(g,r,l,c);return v.type=JE[t],v.format=wx[t],v.encoding=V4[t]||3e3,v.needsUpdate=!0,Promise.resolve(v)})}const Tx="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function qE(i,t=`${Tx}/basis/`){const r=(0,E.z)(c=>c.gl),l=(0,E.D)(um,Bf(i)?Object.values(i):i,c=>{c.detectSupport(r),c.setTranscoderPath(t)});if((0,d.useEffect)(()=>{(Array.isArray(l)?l:[l]).forEach(r.initTexture)},[r,l]),Bf(i)){const c=Object.keys(i),p={};return c.forEach(h=>Object.assign(p,{[h]:l[c.indexOf(h)]})),p}else return l}qE.preload=(i,t=`${Tx}/basis/`)=>E.D.preload(um,i,r=>{r.setTranscoderPath(t)}),qE.clear=i=>E.D.clear(um,i);var K4=A(73466),X4=A.n(K4);function Bx(i,t){typeof i=="function"?i(t):i!=null&&(i.current=t)}function Y4(i,t=[],r){const[l,c]=d.useState();return d.useLayoutEffect(()=>{const p=i();return c(p),Bx(r,p),()=>Bx(r,null)},t),l}function J4({showPanel:i=0,className:t,parent:r}){const l=Y4(()=>new(X4()),[]);return d.useEffect(()=>{if(l){const c=r&&r.current||document.body;l.showPanel(i),c==null||c.appendChild(l.dom),t&&l.dom.classList.add(...t.split(" ").filter(g=>g));const p=(0,E.n)(()=>l.begin()),h=(0,E.o)(()=>l.end());return()=>{c==null||c.removeChild(l.dom),p(),h()}}},[r,l,t,i]),null}function q4({size:i=256,frames:t=1/0}={}){const r=(0,E.z)(b=>b.viewport.dpr),{width:l,height:c}=(0,E.z)(b=>b.size),p=i||l*r,h=i||c*r,g=d.useMemo(()=>{const b=new s.DepthTexture(p,h);return b.format=s.DepthFormat,b.type=s.UnsignedShortType,{depthTexture:b}},[p,h]);let v=0;const _=Hl(p,h,g);return(0,E.A)(b=>{(t===1/0||v<t)&&(b.gl.setRenderTarget(_),b.gl.render(b.scene,b.camera),b.gl.setRenderTarget(null),v++)}),_.depthTexture}function Z4(i,t,r=1){const l=(0,E.z)(h=>h.viewport),c=t*(l.aspect>i/t?l.width/i:l.height/t);return[i*(l.aspect>i/t?l.width/i:l.height/t)*r,c*r,1]}function $4(i,t){const r=(0,E.z)(c=>c.pointer),[l]=d.useState(()=>{const c=new s.Raycaster;return t&&(0,E.j)(c,t,{}),function(p,h){c.setFromCamera(r,i instanceof s.Camera?i:i.current);const g=this.constructor.prototype.raycast.bind(this);g&&g(c,h)}});return l}function ZE(i,t,r,l){return new(r||(r=Promise))(function(c,p){function h(_){try{v(l.next(_))}catch(b){p(b)}}function g(_){try{v(l.throw(_))}catch(b){p(b)}}function v(_){var b;_.done?c(_.value):(b=_.value,b instanceof r?b:new r(function(T){T(b)})).then(h,g)}v((l=l.apply(i,t||[])).next())})}const ew=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function Rx(i){return i=i.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const Ix=typeof window=="undefined",Nf=(()=>{if(Ix)return;const{userAgent:i,platform:t,maxTouchPoints:r}=window.navigator,l=/(iphone|ipod|ipad)/i.test(i),c=t==="iPad"||t==="MacIntel"&&r>0&&!window.MSStream;return{isIpad:c,isMobile:/android/i.test(i)||l||c,isSafari12:/Version\/12.+Safari/.test(i)}})();function tw(i,t,r){if(!r)return[t];const l=function(_){const b=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,T=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,R=_.createShader(35633),F=_.createShader(35632),G=_.createProgram();if(!(F&&R&&G))return;_.shaderSource(R,b),_.shaderSource(F,T),_.compileShader(R),_.compileShader(F),_.attachShader(G,R),_.attachShader(G,F),_.linkProgram(G),_.detachShader(G,R),_.detachShader(G,F),_.deleteShader(R),_.deleteShader(F),_.useProgram(G);const L=_.createBuffer();_.bindBuffer(34962,L),_.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const O=_.getAttribLocation(G,"aPosition");_.vertexAttribPointer(O,3,5126,!1,0,0),_.enableVertexAttribArray(O),_.clearColor(1,1,1,1),_.clear(16384),_.viewport(0,0,1,1),_.drawArrays(4,0,3);const k=new Uint8Array(4);return _.readPixels(0,0,1,1,6408,5121,k),_.deleteProgram(G),_.deleteBuffer(L),k.join("")}(i),c="801621810",p="8016218135",h="80162181161",g=Nf!=null&&Nf.isIpad?[["a7",h,12],["a8",p,15],["a8x",p,15],["a9",p,15],["a9x",p,15],["a10",p,15],["a10x",p,15],["a12",c,15],["a12x",c,15],["a12z",c,15],["a14",c,15],["m1",c,15]]:[["a7",h,12],["a8",p,12],["a9",p,15],["a10",p,15],["a11",c,15],["a12",c,15],["a13",c,15],["a14",c,15]];let v;return l==="80162181255"?v=g.filter(([,,_])=>_>=14):(v=g.filter(([,_])=>_===l),v.length||(v=g)),v.map(([_])=>`apple ${_} gpu`)}class Fx extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const $E=[],Ox=[];function nw(i,t){if(i===t)return 0;const r=i;i.length>t.length&&(i=t,t=r);let l=i.length,c=t.length;for(;l>0&&i.charCodeAt(~-l)===t.charCodeAt(~-c);)l--,c--;let p,h=0;for(;h<l&&i.charCodeAt(h)===t.charCodeAt(h);)h++;if(l-=h,c-=h,l===0)return c;let g,v,_=0,b=0,T=0;for(;b<l;)Ox[b]=i.charCodeAt(h+b),$E[b]=++b;for(;T<c;)for(p=t.charCodeAt(h+T),g=T++,_=T,b=0;b<l;b++)v=p===Ox[b]?g:g+1,g=$E[b],_=$E[b]=g>_?v>_?_+1:v:v>g?g+1:v;return _}function rw(i){return i!=null}const iw=({mobileTiers:i=[0,15,30,60],desktopTiers:t=[0,15,30,60],override:r={},glContext:l,failIfMajorPerformanceCaveat:c=!1,benchmarksURL:p="https://unpkg.com/detect-gpu@5.0.31/dist/benchmarks"}={})=>ZE(void 0,void 0,void 0,function*(){const h={};if(Ix)return{tier:0,type:"SSR"};const{isIpad:g=!!(Nf!=null&&Nf.isIpad),isMobile:v=!!(Nf!=null&&Nf.isMobile),screenSize:_=window.screen,loadBenchmarks:b=Q=>ZE(void 0,void 0,void 0,function*(){const W=yield fetch(`${p}/${Q}`).then(Y=>Y.json());if(parseInt(W.shift().split(".")[0],10)<4)throw new Fx("Detect GPU benchmark data is out of date. Please update to version 4x");return W})}=r;let{renderer:T}=r;const R=(Q,W,Y,K,se)=>({device:se,fps:K,gpu:Y,isMobile:v,tier:Q,type:W});let F,G="";if(T)T=Rx(T),F=[T];else{const Q=l||function(Y,K=!1){const se={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:K,powerPreference:"high-performance",stencil:!1};Y&&delete se.powerPreference;const ce=window.document.createElement("canvas"),ge=ce.getContext("webgl",se)||ce.getContext("experimental-webgl",se);return ge!=null?ge:void 0}(Nf==null?void 0:Nf.isSafari12,c);if(!Q)return R(0,"WEBGL_UNSUPPORTED");const W=Q.getExtension("WEBGL_debug_renderer_info");if(W&&(T=Q.getParameter(W.UNMASKED_RENDERER_WEBGL)),!T)return R(1,"FALLBACK");G=T,T=Rx(T),F=function(Y,K,se){return K==="apple gpu"?tw(Y,K,se):[K]}(Q,T,v)}const L=(yield Promise.all(F.map(function(Q){var W;return ZE(this,void 0,void 0,function*(){const Y=(_e=>{const oe=v?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const Ae of oe)if(_e.includes(Ae))return Ae})(Q);if(!Y)return;const K=`${v?"m":"d"}-${Y}${g?"-ipad":""}.json`,se=h[K]=(W=h[K])!==null&&W!==void 0?W:b(K);let ce;try{ce=yield se}catch(_e){if(_e instanceof Fx)throw _e;return}const ge=function(_e){var oe;const Ae=(_e=_e.replace(/\([^)]+\)/,"")).match(/\d+/)||_e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(oe=Ae==null?void 0:Ae.join("").replace(/\W|amd/g,""))!==null&&oe!==void 0?oe:""}(Q);let le=ce.filter(([,_e])=>_e===ge);le.length||(le=ce.filter(([_e])=>_e.includes(Q)));const xe=le.length;if(xe===0)return;const me=Q.split(/[.,()\[\]/\s]/g).sort().filter((_e,oe,Ae)=>oe===0||_e!==Ae[oe-1]).join(" ");let Be,[ke,,,,Re]=xe>1?le.map(_e=>[_e,nw(me,_e[2])]).sort(([,_e],[,oe])=>_e-oe)[0][0]:le[0],ze=Number.MAX_VALUE;const{devicePixelRatio:Pe}=window,Ye=_.width*Pe*_.height*Pe;for(const _e of Re){const[oe,Ae]=_e,Te=oe*Ae,ve=Math.abs(Ye-Te);ve<ze&&(ze=ve,Be=_e)}if(!Be)return;const[,,Ce,Ee]=Be;return[ze,Ce,ke,Ee]})}))).filter(rw).sort(([Q=Number.MAX_VALUE,W],[Y=Number.MAX_VALUE,K])=>Q===Y?W-K:Q-Y);if(!L.length){const Q=ew.find(W=>T.includes(W));return Q?R(0,"BLOCKLISTED",Q):R(1,"FALLBACK",`${T} (${G})`)}const[,O,k,P]=L[0];if(O===-1)return R(0,"BLOCKLISTED",k,O,P);const z=v?i:t;let j=0;for(let Q=0;Q<z.length;Q++)O>=z[Q]&&(j=Q);return R(j,"BENCHMARK",k,O,P)}),ow=i=>(0,cc.Rq)(()=>iw(i),["useDetectGPU"]);function Dx(i,t,...r){const l=d.useRef(),c=(0,E.z)(p=>p.scene);return d.useLayoutEffect(()=>{let p;if(i&&i!=null&&i.current&&t&&(l.current=p=new t(i.current,...r)),p)return p.traverse(h=>h.raycast=()=>null),c.add(p),()=>{l.current=void 0,c.remove(p),p.dispose==null||p.dispose()}},[c,t,i,...r]),(0,E.A)(()=>{var p;return void((p=l.current)==null||p.update==null?void 0:p.update())}),l}const Px=0,sw=1,C2=2,Y5=0,J5=1,Lx=2,eb=1.25,kx=1,dm=6*4+4+4,tb=65535,aw=Math.pow(2,-24),k0=new s.Vector3,z0=new s.Vector3,G0=new s.Vector3,S2=new s.Vector2,w2=new s.Vector2,T2=new s.Vector2,zx=new s.Vector3,Gx=new s.Vector3,Nx=new s.Vector3,B2=new s.Vector3;function lw(i,t,r,l,c,p){let h;return p===s.BackSide?h=i.intersectTriangle(l,r,t,!0,c):h=i.intersectTriangle(t,r,l,p!==s.DoubleSide,c),h===null?null:{distance:i.origin.distanceTo(c),point:c.clone()}}function cw(i,t,r,l,c,p,h,g,v){k0.fromBufferAttribute(t,p),z0.fromBufferAttribute(t,h),G0.fromBufferAttribute(t,g);const _=lw(i,k0,z0,G0,B2,v);if(_){l&&(S2.fromBufferAttribute(l,p),w2.fromBufferAttribute(l,h),T2.fromBufferAttribute(l,g),_.uv=s.Triangle.getInterpolation(B2,k0,z0,G0,S2,w2,T2,new s.Vector2)),c&&(S2.fromBufferAttribute(c,p),w2.fromBufferAttribute(c,h),T2.fromBufferAttribute(c,g),_.uv1=s.Triangle.getInterpolation(B2,k0,z0,G0,S2,w2,T2,new s.Vector2)),r&&(zx.fromBufferAttribute(r,p),Gx.fromBufferAttribute(r,h),Nx.fromBufferAttribute(r,g),_.normal=s.Triangle.getInterpolation(B2,k0,z0,G0,zx,Gx,Nx,new s.Vector3),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const b={a:p,b:h,c:g,normal:new s.Vector3,materialIndex:0};s.Triangle.getNormal(k0,z0,G0,b.normal),_.face=b,_.faceIndex=p}return _}function Ux(i,t,r,l,c){const p=l*3,h=i.index.getX(p),g=i.index.getX(p+1),v=i.index.getX(p+2),{position:_,normal:b,uv:T,uv1:R}=i.attributes,F=cw(r,_,b,T,R,h,g,v,t);return F?(F.faceIndex=l,c&&c.push(F),F):null}function pw(i,t,r,l,c,p){for(let h=l,g=l+c;h<g;h++)Ux(i,t,r,h,p)}function uw(i,t,r,l,c){let p=1/0,h=null;for(let g=l,v=l+c;g<v;g++){const _=Ux(i,t,r,g);_&&_.distance<p&&(h=_,p=_.distance)}return h}function jx(i,t,r){return i===null||(i.point.applyMatrix4(t.matrixWorld),i.distance=i.point.distanceTo(r.ray.origin),i.object=t,i.distance<r.near||i.distance>r.far)?null:i}class R2{constructor(){}}function Rd(i,t,r){return r.min.x=t[i],r.min.y=t[i+1],r.min.z=t[i+2],r.max.x=t[i+3],r.max.y=t[i+4],r.max.z=t[i+5],r}function Hx(i){let t=-1,r=-1/0;for(let l=0;l<3;l++){const c=i[l+3]-i[l];c>r&&(r=c,t=l)}return t}function Wx(i,t){t.set(i)}function Vx(i,t,r){let l,c;for(let p=0;p<3;p++){const h=p+3;l=i[p],c=t[p],r[p]=l<c?l:c,l=i[h],c=t[h],r[h]=l>c?l:c}}function I2(i,t,r){for(let l=0;l<3;l++){const c=t[i+2*l],p=t[i+2*l+1],h=c-p,g=c+p;h<r[l]&&(r[l]=h),g>r[l+3]&&(r[l+3]=g)}}function OA(i){const t=i[3]-i[0],r=i[4]-i[1],l=i[5]-i[2];return 2*(t*r+r*l+l*t)}var nb=A(25108);function dw(i,t){if(!i.index){const r=i.attributes.position.count,l=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let c;r>65535?c=new Uint32Array(new l(4*r)):c=new Uint16Array(new l(2*r)),i.setIndex(new s.BufferAttribute(c,1));for(let p=0;p<r;p++)c[p]=p}}function hw(i){if(!i.groups||!i.groups.length)return[{offset:0,count:i.index.count/3}];const t=[],r=new Set;for(const c of i.groups)r.add(c.start),r.add(c.start+c.count);const l=Array.from(r.values()).sort((c,p)=>c-p);for(let c=0;c<l.length-1;c++){const p=l[c],h=l[c+1];t.push({offset:p/3,count:(h-p)/3})}return t}function rb(i,t,r,l,c=null){let p=1/0,h=1/0,g=1/0,v=-1/0,_=-1/0,b=-1/0,T=1/0,R=1/0,F=1/0,G=-1/0,L=-1/0,O=-1/0;const k=c!==null;for(let P=t*6,z=(t+r)*6;P<z;P+=6){const j=i[P+0],Q=i[P+1],W=j-Q,Y=j+Q;W<p&&(p=W),Y>v&&(v=Y),k&&j<T&&(T=j),k&&j>G&&(G=j);const K=i[P+2],se=i[P+3],ce=K-se,ge=K+se;ce<h&&(h=ce),ge>_&&(_=ge),k&&K<R&&(R=K),k&&K>L&&(L=K);const le=i[P+4],xe=i[P+5],me=le-xe,Be=le+xe;me<g&&(g=me),Be>b&&(b=Be),k&&le<F&&(F=le),k&&le>O&&(O=le)}l[0]=p,l[1]=h,l[2]=g,l[3]=v,l[4]=_,l[5]=b,k&&(c[0]=T,c[1]=R,c[2]=F,c[3]=G,c[4]=L,c[5]=O)}function fw(i,t,r,l){let c=1/0,p=1/0,h=1/0,g=-1/0,v=-1/0,_=-1/0;for(let b=t*6,T=(t+r)*6;b<T;b+=6){const R=i[b+0];R<c&&(c=R),R>g&&(g=R);const F=i[b+2];F<p&&(p=F),F>v&&(v=F);const G=i[b+4];G<h&&(h=G),G>_&&(_=G)}l[0]=c,l[1]=p,l[2]=h,l[3]=g,l[4]=v,l[5]=_}function gw(i,t,r,l,c){let p=r,h=r+l-1;const g=c.pos,v=c.axis*2;for(;;){for(;p<=h&&t[p*6+v]<g;)p++;for(;p<=h&&t[h*6+v]>=g;)h--;if(p<h){for(let _=0;_<3;_++){let b=i[p*3+_];i[p*3+_]=i[h*3+_],i[h*3+_]=b;let T=t[p*6+_*2+0];t[p*6+_*2+0]=t[h*6+_*2+0],t[h*6+_*2+0]=T;let R=t[p*6+_*2+1];t[p*6+_*2+1]=t[h*6+_*2+1],t[h*6+_*2+1]=R}p++,h--}else return p}}const Dh=32,mw=(i,t)=>i.candidate-t.candidate,Uf=new Array(Dh).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),F2=new Float32Array(6);function Aw(i,t,r,l,c,p){let h=-1,g=0;if(p===Px)h=Hx(t),h!==-1&&(g=(t[h]+t[h+3])/2);else if(p===sw)h=Hx(i),h!==-1&&(g=yw(r,l,c,h));else if(p===C2){const v=OA(i);let _=eb*c;const b=l*6,T=(l+c)*6;for(let R=0;R<3;R++){const F=t[R],O=(t[R+3]-F)/Dh;if(c<Dh/4){const k=[...Uf];k.length=c;let P=0;for(let j=b;j<T;j+=6,P++){const Q=k[P];Q.candidate=r[j+2*R],Q.count=0;const{bounds:W,leftCacheBounds:Y,rightCacheBounds:K}=Q;for(let se=0;se<3;se++)K[se]=1/0,K[se+3]=-1/0,Y[se]=1/0,Y[se+3]=-1/0,W[se]=1/0,W[se+3]=-1/0;I2(j,r,W)}k.sort(mw);let z=c;for(let j=0;j<z;j++){const Q=k[j];for(;j+1<z&&k[j+1].candidate===Q.candidate;)k.splice(j+1,1),z--}for(let j=b;j<T;j+=6){const Q=r[j+2*R];for(let W=0;W<z;W++){const Y=k[W];Q>=Y.candidate?I2(j,r,Y.rightCacheBounds):(I2(j,r,Y.leftCacheBounds),Y.count++)}}for(let j=0;j<z;j++){const Q=k[j],W=Q.count,Y=c-Q.count,K=Q.leftCacheBounds,se=Q.rightCacheBounds;let ce=0;W!==0&&(ce=OA(K)/v);let ge=0;Y!==0&&(ge=OA(se)/v);const le=kx+eb*(ce*W+ge*Y);le<_&&(h=R,_=le,g=Q.candidate)}}else{for(let z=0;z<Dh;z++){const j=Uf[z];j.count=0,j.candidate=F+O+z*O;const Q=j.bounds;for(let W=0;W<3;W++)Q[W]=1/0,Q[W+3]=-1/0}for(let z=b;z<T;z+=6){let W=~~((r[z+2*R]-F)/O);W>=Dh&&(W=Dh-1);const Y=Uf[W];Y.count++,I2(z,r,Y.bounds)}const k=Uf[Dh-1];Wx(k.bounds,k.rightCacheBounds);for(let z=Dh-2;z>=0;z--){const j=Uf[z],Q=Uf[z+1];Vx(j.bounds,Q.rightCacheBounds,j.rightCacheBounds)}let P=0;for(let z=0;z<Dh-1;z++){const j=Uf[z],Q=j.count,W=j.bounds,K=Uf[z+1].rightCacheBounds;Q!==0&&(P===0?Wx(W,F2):Vx(W,F2,F2)),P+=Q;let se=0,ce=0;P!==0&&(se=OA(F2)/v);const ge=c-P;ge!==0&&(ce=OA(K)/v);const le=kx+eb*(se*P+ce*ge);le<_&&(h=R,_=le,g=j.candidate)}}}}else nb.warn(`MeshBVH: Invalid build strategy value ${p} used.`);return{axis:h,pos:g}}function yw(i,t,r,l){let c=0;for(let p=t,h=t+r;p<h;p++)c+=i[p*6+l*2];return c/r}function vw(i,t){const r=i.attributes.position,l=i.index.array,c=l.length/3,p=new Float32Array(c*6),h=r.normalized,g=r.array,v=r.offset||0;let _=3;r.isInterleavedBufferAttribute&&(_=r.data.stride);const b=["getX","getY","getZ"];for(let T=0;T<c;T++){const R=T*3,F=T*6;let G,L,O;h?(G=l[R+0],L=l[R+1],O=l[R+2]):(G=l[R+0]*_+v,L=l[R+1]*_+v,O=l[R+2]*_+v);for(let k=0;k<3;k++){let P,z,j;h?(P=r[b[k]](G),z=r[b[k]](L),j=r[b[k]](O)):(P=g[G+k],z=g[L+k],j=g[O+k]);let Q=P;z<Q&&(Q=z),j<Q&&(Q=j);let W=P;z>W&&(W=z),j>W&&(W=j);const Y=(W-Q)/2,K=k*2;p[F+K+0]=Q+Y,p[F+K+1]=Y+(Math.abs(Q)+Y)*aw,Q<t[k]&&(t[k]=Q),W>t[k+3]&&(t[k+3]=W)}}return p}function _w(i,t){function r(k){R&&R(k/F)}function l(k,P,z,j=null,Q=0){if(!G&&Q>=v&&(G=!0,_&&(nb.warn(`MeshBVH: Max depth of ${v} reached when generating BVH. Consider increasing maxDepth.`),nb.warn(i))),z<=b||Q>=v)return r(P+z),k.offset=P,k.count=z,k;const W=Aw(k.boundingData,j,h,P,z,T);if(W.axis===-1)return r(P+z),k.offset=P,k.count=z,k;const Y=gw(g,h,P,z,W);if(Y===P||Y===P+z)r(P+z),k.offset=P,k.count=z;else{k.splitAxis=W.axis;const K=new R2,se=P,ce=Y-P;k.left=K,K.boundingData=new Float32Array(6),rb(h,se,ce,K.boundingData,p),l(K,se,ce,p,Q+1);const ge=new R2,le=Y,xe=z-ce;k.right=ge,ge.boundingData=new Float32Array(6),rb(h,le,xe,ge.boundingData,p),l(ge,le,xe,p,Q+1)}return k}dw(i,t);const c=new Float32Array(6),p=new Float32Array(6),h=vw(i,c),g=i.index.array,v=t.maxDepth,_=t.verbose,b=t.maxLeafTris,T=t.strategy,R=t.onProgress,F=i.index.count/3;let G=!1;const L=[],O=hw(i);if(O.length===1){const k=O[0],P=new R2;P.boundingData=c,fw(h,k.offset,k.count,p),l(P,k.offset,k.count,p),L.push(P)}else for(let k of O){const P=new R2;P.boundingData=new Float32Array(6),rb(h,k.offset,k.count,P.boundingData,p),l(P,k.offset,k.count,p),L.push(P)}return L}function Ew(i,t){const r=_w(i,t);let l,c,p;const h=[],g=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let b=0;b<r.length;b++){const T=r[b];let R=v(T);const F=new g(dm*R);l=new Float32Array(F),c=new Uint32Array(F),p=new Uint16Array(F),_(0,T),h.push(F)}return h;function v(b){return b.count?1:1+v(b.left)+v(b.right)}function _(b,T){const R=b/4,F=b/2,G=!!T.count,L=T.boundingData;for(let O=0;O<6;O++)l[R+O]=L[O];if(G){const O=T.offset,k=T.count;return c[R+6]=O,p[F+14]=k,p[F+15]=tb,b+dm}else{const O=T.left,k=T.right,P=T.splitAxis;let z;if(z=_(b+dm,O),z/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return c[R+6]=z/4,z=_(z,k),c[R+7]=P,z}}}class Id{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,r){let l=1/0,c=-1/0;for(let p=0,h=t.length;p<h;p++){const v=t[p][r];l=v<l?v:l,c=v>c?v:c}this.min=l,this.max=c}setFromPoints(t,r){let l=1/0,c=-1/0;for(let p=0,h=r.length;p<h;p++){const g=r[p],v=t.dot(g);l=v<l?v:l,c=v>c?v:c}this.min=l,this.max=c}isSeparated(t){return this.min>t.max||t.min>this.max}}Id.prototype.setFromBox=function(){const i=new s.Vector3;return function(r,l){const c=l.min,p=l.max;let h=1/0,g=-1/0;for(let v=0;v<=1;v++)for(let _=0;_<=1;_++)for(let b=0;b<=1;b++){i.x=c.x*v+p.x*(1-v),i.y=c.y*_+p.y*(1-_),i.z=c.z*b+p.z*(1-b);const T=r.dot(i);h=Math.min(T,h),g=Math.max(T,g)}this.min=h,this.max=g}}();const q5=function(){const i=new Id;return function(r,l){const c=r.points,p=r.satAxes,h=r.satBounds,g=l.points,v=l.satAxes,_=l.satBounds;for(let b=0;b<3;b++){const T=h[b],R=p[b];if(i.setFromPoints(R,g),T.isSeparated(i))return!1}for(let b=0;b<3;b++){const T=_[b],R=v[b];if(i.setFromPoints(R,c),T.isSeparated(i))return!1}}}(),bw=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Vector3;return function(c,p,h){const g=c.start,v=i,_=p.start,b=t;r.subVectors(g,_),i.subVectors(c.end,c.start),t.subVectors(p.end,p.start);const T=r.dot(b),R=b.dot(v),F=b.dot(b),G=r.dot(v),O=v.dot(v)*F-R*R;let k,P;O!==0?k=(T*R-G*F)/O:k=0,P=(T+k*R)/F,h.x=k,h.y=P}}(),ib=function(){const i=new s.Vector2,t=new s.Vector3,r=new s.Vector3;return function(c,p,h,g){bw(c,p,i);let v=i.x,_=i.y;if(v>=0&&v<=1&&_>=0&&_<=1){c.at(v,h),p.at(_,g);return}else if(v>=0&&v<=1){_<0?p.at(0,g):p.at(1,g),c.closestPointToPoint(g,!0,h);return}else if(_>=0&&_<=1){v<0?c.at(0,h):c.at(1,h),p.closestPointToPoint(h,!0,g);return}else{let b;v<0?b=c.start:b=c.end;let T;_<0?T=p.start:T=p.end;const R=t,F=r;if(c.closestPointToPoint(T,!0,t),p.closestPointToPoint(b,!0,r),R.distanceToSquared(T)<=F.distanceToSquared(b)){h.copy(R),g.copy(T);return}else{h.copy(b),g.copy(F);return}}}}(),Mw=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Plane,l=new s.Line3;return function(p,h){const{radius:g,center:v}=p,{a:_,b,c:T}=h;if(l.start=_,l.end=b,l.closestPointToPoint(v,!0,i).distanceTo(v)<=g||(l.start=_,l.end=T,l.closestPointToPoint(v,!0,i).distanceTo(v)<=g)||(l.start=b,l.end=T,l.closestPointToPoint(v,!0,i).distanceTo(v)<=g))return!0;const L=h.getPlane(r);if(Math.abs(L.distanceToPoint(v))<=g){const k=L.projectPoint(v,t);if(h.containsPoint(k))return!0}return!1}}();var xw=A(25108);const Cw=1e-15;function N0(i){return Math.abs(i)<Cw}class Ph extends s.Triangle{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new s.Vector3),this.satBounds=new Array(4).fill().map(()=>new Id),this.points=[this.a,this.b,this.c],this.sphere=new s.Sphere,this.plane=new s.Plane,this.needsUpdate=!0}intersectsSphere(t){return Mw(t,this)}update(){const t=this.a,r=this.b,l=this.c,c=this.points,p=this.satAxes,h=this.satBounds,g=p[0],v=h[0];this.getNormal(g),v.setFromPoints(g,c);const _=p[1],b=h[1];_.subVectors(t,r),b.setFromPoints(_,c);const T=p[2],R=h[2];T.subVectors(r,l),R.setFromPoints(T,c);const F=p[3],G=h[3];F.subVectors(l,t),G.setFromPoints(F,c),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(g,t),this.needsUpdate=!1}}Ph.prototype.closestPointToSegment=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Line3;return function(c,p=null,h=null){const{start:g,end:v}=c,_=this.points;let b,T=1/0;for(let R=0;R<3;R++){const F=(R+1)%3;r.start.copy(_[R]),r.end.copy(_[F]),ib(r,c,i,t),b=i.distanceToSquared(t),b<T&&(T=b,p&&p.copy(i),h&&h.copy(t))}return this.closestPointToPoint(g,i),b=g.distanceToSquared(i),b<T&&(T=b,p&&p.copy(i),h&&h.copy(g)),this.closestPointToPoint(v,i),b=v.distanceToSquared(i),b<T&&(T=b,p&&p.copy(i),h&&h.copy(v)),Math.sqrt(T)}}(),Ph.prototype.intersectsTriangle=function(){const i=new Ph,t=new Array(3),r=new Array(3),l=new Id,c=new Id,p=new s.Vector3,h=new s.Vector3,g=new s.Vector3,v=new s.Vector3,_=new s.Line3,b=new s.Line3,T=new s.Line3;return function(F,G=null,L=!1){this.needsUpdate&&this.update(),F.isExtendedTriangle?F.needsUpdate&&F.update():(i.copy(F),i.update(),F=i);const O=this.plane,k=F.plane;if(Math.abs(O.normal.dot(k.normal))>1-1e-10){const P=this.satBounds,z=this.satAxes;r[0]=F.a,r[1]=F.b,r[2]=F.c;for(let W=0;W<4;W++){const Y=P[W],K=z[W];if(l.setFromPoints(K,r),Y.isSeparated(l))return!1}const j=F.satBounds,Q=F.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let W=0;W<4;W++){const Y=j[W],K=Q[W];if(l.setFromPoints(K,t),Y.isSeparated(l))return!1}for(let W=0;W<4;W++){const Y=z[W];for(let K=0;K<4;K++){const se=Q[K];if(p.crossVectors(Y,se),l.setFromPoints(p,t),c.setFromPoints(p,r),l.isSeparated(c))return!1}}return G&&(L||xw.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),G.start.set(0,0,0),G.end.set(0,0,0)),!0}else{const P=this.points;let z=!1,j=0;for(let me=0;me<3;me++){const Be=P[me],ke=P[(me+1)%3];_.start.copy(Be),_.end.copy(ke),_.delta(h);const Re=z?b.start:b.end,ze=N0(k.distanceToPoint(Be));if(N0(k.normal.dot(h))&&ze){b.copy(_),j=2;break}if((k.intersectLine(_,Re)||ze)&&!N0(Re.distanceTo(ke))){if(j++,z)break;z=!0}}if(j===1&&F.containsPoint(b.end))return G&&(G.start.copy(b.end),G.end.copy(b.end)),!0;if(j!==2)return!1;const Q=F.points;let W=!1,Y=0;for(let me=0;me<3;me++){const Be=Q[me],ke=Q[(me+1)%3];_.start.copy(Be),_.end.copy(ke),_.delta(g);const Re=W?T.start:T.end,ze=N0(O.distanceToPoint(Be));if(N0(O.normal.dot(g))&&ze){T.copy(_),Y=2;break}if((O.intersectLine(_,Re)||ze)&&!N0(Re.distanceTo(ke))){if(Y++,W)break;W=!0}}if(Y===1&&this.containsPoint(T.end))return G&&(G.start.copy(T.end),G.end.copy(T.end)),!0;if(Y!==2)return!1;if(b.delta(h),T.delta(g),h.dot(g)<0){let me=T.start;T.start=T.end,T.end=me}const K=b.start.dot(h),se=b.end.dot(h),ce=T.start.dot(h),ge=T.end.dot(h),le=se<ce,xe=K<ge;return K!==ge&&ce!==se&&le===xe?!1:(G&&(v.subVectors(b.start,T.start),v.dot(h)>0?G.start.copy(b.start):G.start.copy(T.start),v.subVectors(b.end,T.end),v.dot(h)<0?G.end.copy(b.end):G.end.copy(T.end)),!0)}}}(),Ph.prototype.distanceToPoint=function(){const i=new s.Vector3;return function(r){return this.closestPointToPoint(r,i),r.distanceTo(i)}}(),Ph.prototype.distanceToTriangle=function(){const i=new s.Vector3,t=new s.Vector3,r=["a","b","c"],l=new s.Line3,c=new s.Line3;return function(h,g=null,v=null){const _=g||v?l:null;if(this.intersectsTriangle(h,_))return(g||v)&&(g&&_.getCenter(g),v&&_.getCenter(v)),0;let b=1/0;for(let T=0;T<3;T++){let R;const F=r[T],G=h[F];this.closestPointToPoint(G,i),R=G.distanceToSquared(i),R<b&&(b=R,g&&g.copy(i),v&&v.copy(G));const L=this[F];h.closestPointToPoint(L,i),R=L.distanceToSquared(i),R<b&&(b=R,g&&g.copy(L),v&&v.copy(i))}for(let T=0;T<3;T++){const R=r[T],F=r[(T+1)%3];l.set(this[R],this[F]);for(let G=0;G<3;G++){const L=r[G],O=r[(G+1)%3];c.set(h[L],h[O]),ib(l,c,i,t);const k=i.distanceToSquared(t);k<b&&(b=k,g&&g.copy(i),v&&v.copy(t))}}return Math.sqrt(b)}}();class Fd{constructor(t,r,l){this.isOrientedBox=!0,this.min=new s.Vector3,this.max=new s.Vector3,this.matrix=new s.Matrix4,this.invMatrix=new s.Matrix4,this.points=new Array(8).fill().map(()=>new s.Vector3),this.satAxes=new Array(3).fill().map(()=>new s.Vector3),this.satBounds=new Array(3).fill().map(()=>new Id),this.alignedSatBounds=new Array(3).fill().map(()=>new Id),this.needsUpdate=!1,t&&this.min.copy(t),r&&this.max.copy(r),l&&this.matrix.copy(l)}set(t,r,l){this.min.copy(t),this.max.copy(r),this.matrix.copy(l),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}}Fd.prototype.update=function(){return function(){const t=this.matrix,r=this.min,l=this.max,c=this.points;for(let _=0;_<=1;_++)for(let b=0;b<=1;b++)for(let T=0;T<=1;T++){const R=1*_|2*b|4*T,F=c[R];F.x=_?l.x:r.x,F.y=b?l.y:r.y,F.z=T?l.z:r.z,F.applyMatrix4(t)}const p=this.satBounds,h=this.satAxes,g=c[0];for(let _=0;_<3;_++){const b=h[_],T=p[_],R=1<<_,F=c[R];b.subVectors(g,F),T.setFromPoints(b,c)}const v=this.alignedSatBounds;v[0].setFromPointsField(c,"x"),v[1].setFromPointsField(c,"y"),v[2].setFromPointsField(c,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}(),Fd.prototype.intersectsBox=function(){const i=new Id;return function(r){this.needsUpdate&&this.update();const l=r.min,c=r.max,p=this.satBounds,h=this.satAxes,g=this.alignedSatBounds;if(i.min=l.x,i.max=c.x,g[0].isSeparated(i)||(i.min=l.y,i.max=c.y,g[1].isSeparated(i))||(i.min=l.z,i.max=c.z,g[2].isSeparated(i)))return!1;for(let v=0;v<3;v++){const _=h[v],b=p[v];if(i.setFromBox(_,r),b.isSeparated(i))return!1}return!0}}(),Fd.prototype.intersectsTriangle=function(){const i=new Ph,t=new Array(3),r=new Id,l=new Id,c=new s.Vector3;return function(h){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(i.copy(h),i.update(),h=i);const g=this.satBounds,v=this.satAxes;t[0]=h.a,t[1]=h.b,t[2]=h.c;for(let R=0;R<3;R++){const F=g[R],G=v[R];if(r.setFromPoints(G,t),F.isSeparated(r))return!1}const _=h.satBounds,b=h.satAxes,T=this.points;for(let R=0;R<3;R++){const F=_[R],G=b[R];if(r.setFromPoints(G,T),F.isSeparated(r))return!1}for(let R=0;R<3;R++){const F=v[R];for(let G=0;G<4;G++){const L=b[G];if(c.crossVectors(F,L),r.setFromPoints(c,t),l.setFromPoints(c,T),r.isSeparated(l))return!1}}return!0}}(),Fd.prototype.closestPointToPoint=function(){return function(t,r){return this.needsUpdate&&this.update(),r.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),r}}(),Fd.prototype.distanceToPoint=function(){const i=new s.Vector3;return function(r){return this.closestPointToPoint(r,i),r.distanceTo(i)}}(),Fd.prototype.distanceToBox=function(){const i=["x","y","z"],t=new Array(12).fill().map(()=>new s.Line3),r=new Array(12).fill().map(()=>new s.Line3),l=new s.Vector3,c=new s.Vector3;return function(h,g=0,v=null,_=null){if(this.needsUpdate&&this.update(),this.intersectsBox(h))return(v||_)&&(h.getCenter(c),this.closestPointToPoint(c,l),h.closestPointToPoint(l,c),v&&v.copy(l),_&&_.copy(c)),0;const b=g*g,T=h.min,R=h.max,F=this.points;let G=1/0;for(let O=0;O<8;O++){const k=F[O];c.copy(k).clamp(T,R);const P=k.distanceToSquared(c);if(P<G&&(G=P,v&&v.copy(k),_&&_.copy(c),P<b))return Math.sqrt(P)}let L=0;for(let O=0;O<3;O++)for(let k=0;k<=1;k++)for(let P=0;P<=1;P++){const z=(O+1)%3,j=(O+2)%3,Q=k<<z|P<<j,W=1<<O|k<<z|P<<j,Y=F[Q],K=F[W];t[L].set(Y,K);const ce=i[O],ge=i[z],le=i[j],xe=r[L],me=xe.start,Be=xe.end;me[ce]=T[ce],me[ge]=k?T[ge]:R[ge],me[le]=P?T[le]:R[ge],Be[ce]=R[ce],Be[ge]=k?T[ge]:R[ge],Be[le]=P?T[le]:R[ge],L++}for(let O=0;O<=1;O++)for(let k=0;k<=1;k++)for(let P=0;P<=1;P++){c.x=O?R.x:T.x,c.y=k?R.y:T.y,c.z=P?R.z:T.z,this.closestPointToPoint(c,l);const z=c.distanceToSquared(l);if(z<G&&(G=z,v&&v.copy(l),_&&_.copy(c),z<b))return Math.sqrt(z)}for(let O=0;O<12;O++){const k=t[O];for(let P=0;P<12;P++){const z=r[P];ib(k,z,l,c);const j=l.distanceToSquared(c);if(j<G&&(G=j,v&&v.copy(l),_&&_.copy(c),j<b))return Math.sqrt(j)}}return Math.sqrt(G)}}();function Od(i,t,r,l){const c=i.a,p=i.b,h=i.c;let g=t,v=t+1,_=t+2;r&&(g=r.getX(t),v=r.getX(t+1),_=r.getX(t+2)),c.x=l.getX(g),c.y=l.getY(g),c.z=l.getZ(g),p.x=l.getX(v),p.y=l.getY(v),p.z=l.getZ(v),h.x=l.getX(_),h.y=l.getY(_),h.z=l.getZ(_)}function Qx(i,t,r,l,c,p,h){const g=r.index,v=r.attributes.position;for(let _=i,b=t+i;_<b;_++)if(Od(h,_*3,g,v),h.needsUpdate=!0,l(h,_,c,p))return!0;return!1}const O2=new s.Vector3,D2=new s.Vector3,P2=new s.Vector3,Kx=new s.Vector2,Xx=new s.Vector2,Yx=new s.Vector2;function Z5(i,t,r,l){const c=t.getIndex().array,p=t.getAttribute("position"),h=t.getAttribute("uv"),g=c[r*3],v=c[r*3+1],_=c[r*3+2];O2.fromBufferAttribute(p,g),D2.fromBufferAttribute(p,v),P2.fromBufferAttribute(p,_);let b=0;const T=t.groups,R=r*3;for(let G=0,L=T.length;G<L;G++){const O=T[G],{start:k,count:P}=O;if(R>=k&&R<k+P){b=O.materialIndex;break}}let F=null;return h&&(Kx.fromBufferAttribute(h,g),Xx.fromBufferAttribute(h,v),Yx.fromBufferAttribute(h,_),l&&l.uv?F=l.uv:F=new Vector2,Triangle.getInterpolation(i,O2,D2,P2,Kx,Xx,Yx,F)),l?(l.face||(l.face={}),l.face.a=g,l.face.b=v,l.face.c=_,l.face.materialIndex=b,l.face.normal||(l.face.normal=new Vector3),Triangle.getNormal(O2,D2,P2,l.face.normal),F&&(l.uv=F),l):{face:{a:g,b:v,c:_,materialIndex:b,normal:Triangle.getNormal(O2,D2,P2,new Vector3)},uv:F}}class Jx{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}function Lh(i,t){return t[i+15]===65535}function hm(i,t){return t[i+6]}function U0(i,t){return t[i+14]}function DA(i){return i+8}function j0(i,t){return t[i+6]}function qx(i,t){return t[i+7]}function $5(i){return i}const H0=new s.Box3,L2=new s.Vector3,Sw=["x","y","z"];function ob(i,t,r,l,c){let p=i*2,h=W0,g=jf,v=Hf;if(Lh(p,g)){const b=hm(i,v),T=U0(p,g);pw(t,r,l,b,T,c)}else{const b=DA(i);k2(b,h,l,L2)&&ob(b,t,r,l,c);const T=j0(i,v);k2(T,h,l,L2)&&ob(T,t,r,l,c)}}function sb(i,t,r,l){let c=i*2,p=W0,h=jf,g=Hf;if(Lh(c,h)){const _=hm(i,g),b=U0(c,h);return uw(t,r,l,_,b)}else{const _=qx(i,g),b=Sw[_],R=l.direction[b]>=0;let F,G;R?(F=DA(i),G=j0(i,g)):(F=j0(i,g),G=DA(i));const O=k2(F,p,l,L2)?sb(F,t,r,l):null;if(O){const z=O.point[b];if(R?z<=p[G+_]:z>=p[G+_+3])return O}const P=k2(G,p,l,L2)?sb(G,t,r,l):null;return O&&P?O.distance<=P.distance?O:P:O||P||null}}const ww=function(){let i,t;const r=[],l=new Jx(()=>new s.Box3);return function(...h){i=l.getPrimitive(),t=l.getPrimitive(),r.push(i,t);const g=c(...h);l.releasePrimitive(i),l.releasePrimitive(t),r.pop(),r.pop();const v=r.length;return v>0&&(t=r[v-1],i=r[v-2]),g};function c(p,h,g,v,_=null,b=0,T=0){function R(z){let j=z*2,Q=jf,W=Hf;for(;!Lh(j,Q);)z=DA(z),j=z*2;return hm(z,W)}function F(z){let j=z*2,Q=jf,W=Hf;for(;!Lh(j,Q);)z=j0(z,W),j=z*2;return hm(z,W)+U0(j,Q)}let G=p*2,L=W0,O=jf,k=Hf;if(Lh(G,O)){const z=hm(p,k),j=U0(G,O);return Rd(p,L,i),v(z,j,!1,T,b+p,i)}else{const z=DA(p),j=j0(p,k);let Q=z,W=j,Y,K,se,ce;if(_&&(se=i,ce=t,Rd(Q,L,se),Rd(W,L,ce),Y=_(se),K=_(ce),K<Y)){Q=j,W=z;const Re=Y;Y=K,K=Re,se=ce}se||(se=i,Rd(Q,L,se));const ge=Lh(Q*2,O),le=g(se,ge,Y,T+1,b+Q);let xe;if(le===Lx){const Re=R(Q),Pe=F(Q)-Re;xe=v(Re,Pe,!0,T+1,b+Q,se)}else xe=le&&c(Q,h,g,v,_,b,T+1);if(xe)return!0;ce=t,Rd(W,L,ce);const me=Lh(W*2,O),Be=g(ce,me,K,T+1,b+W);let ke;if(Be===Lx){const Re=R(W),Pe=F(W)-Re;ke=v(Re,Pe,!0,T+1,b+W,ce)}else ke=Be&&c(W,h,g,v,_,b,T+1);return!!ke}}}(),Tw=function(){const i=new Ph,t=new Ph,r=new s.Matrix4,l=new Fd,c=new Fd;return function p(h,g,v,_,b=null){let T=h*2,R=W0,F=jf,G=Hf;if(b===null&&(v.boundingBox||v.computeBoundingBox(),l.set(v.boundingBox.min,v.boundingBox.max,_),b=l),Lh(T,F)){const O=g,k=O.index,P=O.attributes.position,z=v.index,j=v.attributes.position,Q=hm(h,G),W=U0(T,F);if(r.copy(_).invert(),v.boundsTree)return Rd(h,R,c),c.matrix.copy(r),c.needsUpdate=!0,v.boundsTree.shapecast({intersectsBounds:K=>c.intersectsBox(K),intersectsTriangle:K=>{K.a.applyMatrix4(_),K.b.applyMatrix4(_),K.c.applyMatrix4(_),K.needsUpdate=!0;for(let se=Q*3,ce=(W+Q)*3;se<ce;se+=3)if(Od(t,se,k,P),t.needsUpdate=!0,K.intersectsTriangle(t))return!0;return!1}});for(let Y=Q*3,K=W+Q*3;Y<K;Y+=3){Od(i,Y,k,P),i.a.applyMatrix4(r),i.b.applyMatrix4(r),i.c.applyMatrix4(r),i.needsUpdate=!0;for(let se=0,ce=z.count;se<ce;se+=3)if(Od(t,se,z,j),t.needsUpdate=!0,i.intersectsTriangle(t))return!0}}else{const O=h+8,k=G[h+6];return Rd(O,R,H0),!!(b.intersectsBox(H0)&&p(O,g,v,_,b)||(Rd(k,R,H0),b.intersectsBox(H0)&&p(k,g,v,_,b)))}}}();function k2(i,t,r,l){return Rd(i,t,H0),r.intersectBox(H0,l)}const ab=[];let z2,W0,jf,Hf;function PA(i){z2&&ab.push(z2),z2=i,W0=new Float32Array(i),jf=new Uint16Array(i),Hf=new Uint32Array(i)}function G2(){z2=null,W0=null,jf=null,Hf=null,ab.length&&PA(ab.pop())}var lb=A(25108);const cb=Symbol("skip tree generation"),pb=new s.Box3,ub=new s.Box3,V0=new s.Matrix4,fm=new Fd,LA=new Fd,kA=new s.Vector3,N2=new s.Vector3,Bw=new s.Vector3,Rw=new s.Vector3,Iw=new s.Vector3,Zx=new s.Box3,Dd=new Jx(()=>new Ph);class Q0{static serialize(t,r={}){if(r.isBufferGeometry)return lb.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Q0.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});r=Kn({cloneBuffers:!0},r);const l=t.geometry,c=t._roots,p=l.getIndex();let h;return r.cloneBuffers?h={roots:c.map(g=>g.slice()),index:p.array.slice()}:h={roots:c,index:p.array},h}static deserialize(t,r,l={}){if(typeof l=="boolean")return lb.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Q0.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});l=Kn({setIndex:!0},l);const{index:c,roots:p}=t,h=new Q0(r,Xo(Kn({},l),{[cb]:!0}));if(h._roots=p,l.setIndex){const g=r.getIndex();if(g===null){const v=new s.BufferAttribute(t.index,1,!1);r.setIndex(v)}else g.array!==c&&(g.array.set(c),g.needsUpdate=!0)}return h}constructor(t,r={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(r=Object.assign({strategy:Px,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[cb]:!1},r),r.useSharedArrayBuffer&&typeof SharedArrayBuffer=="undefined")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,r[cb]||(this._roots=Ew(t,r),!t.boundingBox&&r.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new s.Box3))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));const r=this.geometry,l=r.index.array,c=r.attributes.position;let p,h,g,v,_=0;const b=this._roots;for(let R=0,F=b.length;R<F;R++)p=b[R],h=new Uint32Array(p),g=new Uint16Array(p),v=new Float32Array(p),T(0,_),_+=p.byteLength;function T(R,F,G=!1){const L=R*2;if(g[L+15]===tb){const k=h[R+6],P=g[L+14];let z=1/0,j=1/0,Q=1/0,W=-1/0,Y=-1/0,K=-1/0;for(let se=3*k,ce=3*(k+P);se<ce;se++){const ge=l[se],le=c.getX(ge),xe=c.getY(ge),me=c.getZ(ge);le<z&&(z=le),le>W&&(W=le),xe<j&&(j=xe),xe>Y&&(Y=xe),me<Q&&(Q=me),me>K&&(K=me)}return v[R+0]!==z||v[R+1]!==j||v[R+2]!==Q||v[R+3]!==W||v[R+4]!==Y||v[R+5]!==K?(v[R+0]=z,v[R+1]=j,v[R+2]=Q,v[R+3]=W,v[R+4]=Y,v[R+5]=K,!0):!1}else{const k=R+8,P=h[R+6],z=k+F,j=P+F;let Q=G,W=!1,Y=!1;t?Q||(W=t.has(z),Y=t.has(j),Q=!W&&!Y):(W=!0,Y=!0);const K=Q||W,se=Q||Y;let ce=!1;K&&(ce=T(k,F,Q));let ge=!1;se&&(ge=T(P,F,Q));const le=ce||ge;if(le)for(let xe=0;xe<3;xe++){const me=k+xe,Be=P+xe,ke=v[me],Re=v[me+3],ze=v[Be],Pe=v[Be+3];v[R+xe]=ke<ze?ke:ze,v[R+xe+3]=Re>Pe?Re:Pe}return le}}}traverse(t,r=0){const l=this._roots[r],c=new Uint32Array(l),p=new Uint16Array(l);h(0);function h(g,v=0){const _=g*2,b=p[_+15]===tb;if(b){const T=c[g+6],R=p[_+14];t(v,b,new Float32Array(l,g*4,6),T,R)}else{const T=g+dm/4,R=c[g+6],F=c[g+7];t(v,b,new Float32Array(l,g*4,6),F)||(h(T,v+1),h(R,v+1))}}}raycast(t,r=s.FrontSide){const l=this._roots,c=this.geometry,p=[],h=r.isMaterial,g=Array.isArray(r),v=c.groups,_=h?r.side:r;for(let b=0,T=l.length;b<T;b++){const R=g?r[v[b].materialIndex].side:_,F=p.length;if(PA(l[b]),ob(0,c,R,t,p),G2(),g){const G=v[b].materialIndex;for(let L=F,O=p.length;L<O;L++)p[L].face.materialIndex=G}}return p}raycastFirst(t,r=s.FrontSide){const l=this._roots,c=this.geometry,p=r.isMaterial,h=Array.isArray(r);let g=null;const v=c.groups,_=p?r.side:r;for(let b=0,T=l.length;b<T;b++){const R=h?r[v[b].materialIndex].side:_;PA(l[b]);const F=sb(0,c,R,t);G2(),F!=null&&(g==null||F.distance<g.distance)&&(g=F,h&&(F.face.materialIndex=v[b].materialIndex))}return g}intersectsGeometry(t,r){const l=this.geometry;let c=!1;for(const p of this._roots)if(PA(p),c=Tw(0,l,t,r),G2(),c)break;return c}shapecast(t,r,l){const c=this.geometry;if(t instanceof Function){if(r){const R=r;r=(F,G,L,O)=>{const k=G*3;return R(F,k,k+1,k+2,L,O)}}t={boundsTraverseOrder:l,intersectsBounds:t,intersectsTriangle:r,intersectsRange:null},lb.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const p=Dd.getPrimitive();let{boundsTraverseOrder:h,intersectsBounds:g,intersectsRange:v,intersectsTriangle:_}=t;if(v&&_){const R=v;v=(F,G,L,O,k)=>R(F,G,L,O,k)?!0:Qx(F,G,c,_,L,O,p)}else v||(_?v=(R,F,G,L)=>Qx(R,F,c,_,G,L,p):v=(R,F,G)=>G);let b=!1,T=0;for(const R of this._roots){if(PA(R),b=ww(0,c,g,v,h,T),G2(),b)break;T+=R.byteLength}return Dd.releasePrimitive(p),b}bvhcast(t,r,l){let{intersectsRanges:c,intersectsTriangles:p}=l;const h=this.geometry.index,g=this.geometry.attributes.position,v=t.geometry.index,_=t.geometry.attributes.position;V0.copy(r).invert();const b=Dd.getPrimitive(),T=Dd.getPrimitive();if(p){let F=function(G,L,O,k,P,z,j,Q){for(let W=O,Y=O+k;W<Y;W++){Od(T,W*3,v,_),T.a.applyMatrix4(r),T.b.applyMatrix4(r),T.c.applyMatrix4(r),T.needsUpdate=!0;for(let K=G,se=G+L;K<se;K++)if(Od(b,K*3,h,g),b.needsUpdate=!0,p(b,T,K,W,P,z,j,Q))return!0}return!1};if(c){const G=c;c=function(L,O,k,P,z,j,Q,W){return G(L,O,k,P,z,j,Q,W)?!0:F(L,O,k,P,z,j,Q,W)}}else c=F}t.getBoundingBox(ub),ub.applyMatrix4(r);const R=this.shapecast({intersectsBounds:F=>ub.intersectsBox(F),intersectsRange:(F,G,L,O,k,P)=>(pb.copy(P),pb.applyMatrix4(V0),t.shapecast({intersectsBounds:z=>pb.intersectsBox(z),intersectsRange:(z,j,Q,W,Y)=>c(F,G,z,j,O,k,W,Y)}))});return Dd.releasePrimitive(b),Dd.releasePrimitive(T),R}intersectsBox(t,r){return fm.set(t.min,t.max,r),fm.needsUpdate=!0,this.shapecast({intersectsBounds:l=>fm.intersectsBox(l),intersectsTriangle:l=>fm.intersectsTriangle(l)})}intersectsSphere(t){return this.shapecast({intersectsBounds:r=>t.intersectsBox(r),intersectsTriangle:r=>r.intersectsSphere(t)})}closestPointToGeometry(t,r,l={},c={},p=0,h=1/0){t.boundingBox||t.computeBoundingBox(),fm.set(t.boundingBox.min,t.boundingBox.max,r),fm.needsUpdate=!0;const g=this.geometry,v=g.attributes.position,_=g.index,b=t.attributes.position,T=t.index,R=Dd.getPrimitive(),F=Dd.getPrimitive();let G=N2,L=Bw,O=null,k=null;c&&(O=Rw,k=Iw);let P=1/0,z=null,j=null;return V0.copy(r).invert(),LA.matrix.copy(V0),this.shapecast({boundsTraverseOrder:Q=>fm.distanceToBox(Q),intersectsBounds:(Q,W,Y)=>Y<P&&Y<h?(W&&(LA.min.copy(Q.min),LA.max.copy(Q.max),LA.needsUpdate=!0),!0):!1,intersectsRange:(Q,W)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:Y=>LA.distanceToBox(Y),intersectsBounds:(Y,K,se)=>se<P&&se<h,intersectsRange:(Y,K)=>{for(let se=Y*3,ce=(Y+K)*3;se<ce;se+=3){Od(F,se,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ge=Q*3,le=(Q+W)*3;ge<le;ge+=3){Od(R,ge,_,v),R.needsUpdate=!0;const xe=R.distanceToTriangle(F,G,O);if(xe<P&&(L.copy(G),k&&k.copy(O),P=xe,z=ge/3,j=se/3),xe<p)return!0}}}});{const Y=T?T.count:b.count;for(let K=0,se=Y;K<se;K+=3){Od(F,K,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ce=Q*3,ge=(Q+W)*3;ce<ge;ce+=3){Od(R,ce,_,v),R.needsUpdate=!0;const le=R.distanceToTriangle(F,G,O);if(le<P&&(L.copy(G),k&&k.copy(O),P=le,z=ce/3,j=K/3),le<p)return!0}}}}}),Dd.releasePrimitive(R),Dd.releasePrimitive(F),P===1/0?null:(l.point?l.point.copy(L):l.point=L.clone(),l.distance=P,l.faceIndex=z,c&&(c.point?c.point.copy(k):c.point=k.clone(),c.point.applyMatrix4(V0),L.applyMatrix4(V0),c.distance=L.sub(c.point).length(),c.faceIndex=j),l)}closestPointToPoint(t,r={},l=0,c=1/0){const p=l*l,h=c*c;let g=1/0,v=null;if(this.shapecast({boundsTraverseOrder:b=>(kA.copy(t).clamp(b.min,b.max),kA.distanceToSquared(t)),intersectsBounds:(b,T,R)=>R<g&&R<h,intersectsTriangle:(b,T)=>{b.closestPointToPoint(t,kA);const R=t.distanceToSquared(kA);return R<g&&(N2.copy(kA),g=R,v=T),R<p}}),g===1/0)return null;const _=Math.sqrt(g);return r.point?r.point.copy(N2):r.point=N2.clone(),r.distance=_,r.faceIndex=v,r}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(l=>{Rd(0,new Float32Array(l),Zx),t.union(Zx)}),t}}const db=new s.Ray,$x=new s.Matrix4,Fw=s.Mesh.prototype.raycast;function eC(i,t){if(this.geometry.boundsTree){if(this.material===void 0)return;$x.copy(this.matrixWorld).invert(),db.copy(i.ray).applyMatrix4($x);const r=this.geometry.boundsTree;if(i.firstHitOnly===!0){const l=jx(r.raycastFirst(db,this.material),this,i);l&&t.push(l)}else{const l=r.raycast(db,this.material);for(let c=0,p=l.length;c<p;c++){const h=jx(l[c],this,i);h&&t.push(h)}}}else Fw.call(this,i,t)}function tC(i){return this.boundsTree=new Q0(this,i),this.boundsTree}function nC(){this.boundsTree=null}const rC=i=>i.isMesh;function Ow(i,t){t=Kn({strategy:C2,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10},t),d.useEffect(()=>{if(i.current){i.current.raycast=eC;const r=i.current.geometry;return r.computeBoundsTree=tC,r.disposeBoundsTree=nC,r.computeBoundsTree(t),()=>{r.boundsTree&&r.disposeBoundsTree()}}},[i,JSON.stringify(t)])}const Dw=d.forwardRef((b,_)=>{var T=b,{enabled:i=!0,firstHitOnly:t=!1,children:r,strategy:l=C2,verbose:c=!1,setBoundingBox:p=!0,maxDepth:h=40,maxLeafTris:g=10}=T,v=_n(T,["enabled","firstHitOnly","children","strategy","verbose","setBoundingBox","maxDepth","maxLeafTris"]);const R=d.useRef(null),F=(0,E.z)(G=>G.raycaster);return d.useImperativeHandle(_,()=>R.current,[]),d.useEffect(()=>{if(i){const G={strategy:l,verbose:c,setBoundingBox:p,maxDepth:h,maxLeafTris:g},L=R.current;return F.firstHitOnly=t,L.traverse(O=>{rC(O)&&!O.geometry.boundsTree&&O.raycast===s.Mesh.prototype.raycast&&(O.raycast=eC,O.geometry.computeBoundsTree=tC,O.geometry.disposeBoundsTree=nC,O.geometry.computeBoundsTree(G))}),()=>{delete F.firstHitOnly,L.traverse(O=>{rC(O)&&O.geometry.boundsTree&&(O.geometry.disposeBoundsTree(),O.raycast=s.Mesh.prototype.raycast)})}}}),d.createElement("group",(0,w.Z)({ref:R},v),r)});function Pw(...i){const t=d.useRef([]);return t.current=i.map(r=>d.useContext(r)),d.useMemo(()=>({children:r})=>i.reduceRight((l,c,p)=>d.createElement(c.Provider,{value:t.current[p],children:l}),r),[])}function Lw(i,t){const r=d.useRef(),[l]=d.useState(()=>t?t instanceof s.Object3D?{current:t}:t:r),[c]=d.useState(()=>new s.AnimationMixer(void 0));d.useLayoutEffect(()=>void(c._root=l.current),[c,t]);const p=d.useRef({}),[h]=d.useState(()=>{const g={};return i.forEach(v=>Object.defineProperty(g,v.name,{enumerable:!0,get(){if(l.current)return p.current[v.name]||(p.current[v.name]=c.clipAction(v,l.current))},configurable:!0})),{ref:l,clips:i,actions:g,names:i.map(v=>v.name),mixer:c}});return(0,E.A)((g,v)=>c.update(v)),d.useEffect(()=>{const g=l.current;return()=>{p.current={},Object.values(h.actions).forEach(v=>{g&&c.uncacheAction(v,g)})}},[i]),d.useEffect(()=>()=>{c.stopAllAction()},[c]),h}function iC(i){const t=d.useRef(null),r=d.useRef(!1),l=d.useRef(!1),c=d.useRef(i);return d.useLayoutEffect(()=>void(c.current=i),[i]),d.useEffect(()=>{const p=t.current;if(p){const h=(0,E.n)(()=>(r.current=!1,!0)),g=p.onBeforeRender;p.onBeforeRender=()=>r.current=!0;const v=(0,E.o)(()=>(r.current!==l.current&&(c.current==null||c.current(l.current=r.current)),!0));return()=>{p.onBeforeRender=g,h(),v()}}},[]),t}const kw=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,zw=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,Gw=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,Nw=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function Uw(i,t,r){i.defines.BOX_PROJECTED_ENV_MAP=!0,i.uniforms.envMapPosition={value:t},i.uniforms.envMapSize={value:r},i.vertexShader=`
  varying vec3 vWorldPosition;
  ${i.vertexShader.replace("#include <worldpos_vertex>",kw)}`,i.fragmentShader=`
    ${zw}
    ${i.fragmentShader.replace("#include <envmap_physical_pars_fragment>",s.ShaderChunk.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${Gw}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${Nw}
        `)}`}function jw(i=new s.Vector3,t=new s.Vector3){const[r]=d.useState(()=>({position:new s.Vector3,size:new s.Vector3}));(0,E.j)(r,{position:i,size:t});const l=d.useRef(null),c=d.useMemo(()=>({ref:l,onBeforeCompile:p=>Uw(p,r.position,r.size),customProgramCacheKey:()=>JSON.stringify(r.position.toArray())+JSON.stringify(r.size.toArray())}),[...r.position.toArray(),...r.size.toArray()]);return d.useLayoutEffect(()=>void(l.current.needsUpdate=!0),[r]),c}const oC=new s.Box3,U2=new s.Vector3,Hw=r=>{var l=r,{anchor:i}=l,t=_n(l,["anchor"]);const c=d.useRef(null),p=d.useRef(null);return d.useEffect(()=>{var h,g;(h=c.current)!=null&&(g=h.parent)!=null&&g.parent&&(p.current=c.current.parent,c.current.parent.parent.add(c.current))},[]),(0,E.A)(()=>{p.current&&(oC.setFromObject(p.current),oC.getSize(U2),c.current.position.set(p.current.position.x+U2.x*i[0]/2,p.current.position.y+U2.y*i[1]/2,p.current.position.z+U2.z*i[2]/2))}),d.createElement("group",(0,w.Z)({ref:c},t))};function Ww(i,t,r=.9){return t*r+i*(1-r)}const Vw=i=>Math.sqrt(1-Math.pow(i-1,2));class Qw{constructor({size:t=256,maxAge:r=750,radius:l=.3,intensity:c=.2,interpolate:p=0,smoothing:h=0,minForce:g=.3,blend:v="screen",ease:_=Vw}={}){this.size=t,this.maxAge=r,this.radius=l,this.intensity=c,this.ease=_,this.interpolate=p,this.smoothing=h,this.minForce=g,this.blend=v,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new s.Texture(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(t){this.clear(),this.trail.forEach((r,l)=>{r.age+=t*1e3,r.age>this.maxAge&&this.trail.splice(l,1)}),this.trail.length||(this.force=0),this.trail.forEach(r=>{this.drawTouch(r)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(t){const r=this.trail[this.trail.length-1];if(r){const l=r.x-t.x,c=r.y-t.y,p=l*l+c*c,h=Math.max(this.minForce,Math.min(p*1e4,1));if(this.force=Ww(h,this.force,this.smoothing),this.interpolate){const g=Math.ceil(p/Math.pow(this.radius*.5/this.interpolate,2));if(g>1)for(let v=1;v<g;v++)this.trail.push({x:r.x-l/g*v,y:r.y-c/g*v,age:0,force:h})}}this.trail.push({x:t.x,y:t.y,age:0,force:this.force})}drawTouch(t){const r={x:t.x*this.size,y:(1-t.y)*this.size};let l=1;t.age<this.maxAge*.3?l=this.ease(t.age/(this.maxAge*.3)):l=this.ease(1-(t.age-this.maxAge*.3)/(this.maxAge*.7)),l*=t.force,this.ctx.globalCompositeOperation=this.blend;const c=this.size*this.radius*l,p=this.ctx.createRadialGradient(r.x,r.y,Math.max(0,c*.25),r.x,r.y,Math.max(0,c));p.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),p.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=p,this.ctx.arc(r.x,r.y,Math.max(0,c),0,Math.PI*2),this.ctx.fill()}}function Kw(i={}){const{size:t,maxAge:r,radius:l,intensity:c,interpolate:p,smoothing:h,minForce:g,blend:v,ease:_}=i,b=(0,d.useMemo)(()=>new Qw(i),[t,r,l,c,p,h,g,v,_]);(0,E.A)((R,F)=>void b.update(F));const T=(0,d.useCallback)(R=>b.addTouch(R.uv),[b]);return[b.texture,T]}const hb=d.forwardRef(function(k,O){var P=k,{children:t,disable:r,disableX:l,disableY:c,disableZ:p,left:h,right:g,top:v,bottom:_,front:b,back:T,onCentered:R,precise:F=!0,cacheKey:G=0}=P,L=_n(P,["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"]);const z=d.useRef(null),j=d.useRef(null),Q=d.useRef(null);return d.useLayoutEffect(()=>{j.current.matrixWorld.identity();const W=new s.Box3().setFromObject(Q.current,F),Y=new s.Vector3,K=new s.Sphere,se=W.max.x-W.min.x,ce=W.max.y-W.min.y,ge=W.max.z-W.min.z;W.getCenter(Y),W.getBoundingSphere(K);const le=v?ce/2:_?-ce/2:0,xe=h?-se/2:g?se/2:0,me=b?ge/2:T?-ge/2:0;j.current.position.set(r||l?0:-Y.x+xe,r||c?0:-Y.y+le,r||p?0:-Y.z+me),typeof R!="undefined"&&R({parent:z.current.parent,container:z.current,width:se,height:ce,depth:ge,boundingBox:W,boundingSphere:K,center:Y,verticalAlignment:le,horizontalAlignment:xe,depthAlignment:me})},[G,R,v,h,b,r,l,c,p,F,g,_,T]),d.useImperativeHandle(O,()=>z.current,[]),d.createElement("group",(0,w.Z)({ref:z},L),d.createElement("group",{ref:j},d.createElement("group",{ref:Q},t)))}),Xw=d.forwardRef((g,h)=>{var v=g,{font:i,color:t="#cbcbcb",bevelSize:r=.04,debug:l=!1,children:c}=v,p=_n(v,["font","color","bevelSize","debug","children"]);const[_,b]=d.useState(0),T=d.useCallback((G=1)=>b(_+G),[_]),R=d.useCallback((G=1)=>b(_-G),[_]),F=d.useMemo(()=>({incr:T,decr:R}),[T,R]);return d.useImperativeHandle(h,()=>F,[F]),d.createElement("group",p,d.createElement(d.Suspense,{fallback:null},d.createElement(hb,{top:!0,cacheKey:JSON.stringify({counter:_,font:i})},d.createElement(Wg,{bevelEnabled:!0,bevelSize:r,font:i},l?d.createElement("meshNormalMaterial",{wireframe:!0}):d.createElement("meshStandardMaterial",{color:t}),_))),c)}),Yw=(Q,j)=>{var W=Q,{startFrame:i,endFrame:t,fps:r,frameName:l,textureDataURL:c,textureImageURL:p,loop:h,numberOfFrames:g,autoPlay:v,animationNames:_,onStart:b,onEnd:T,onLoopEnd:R,onFrame:F,play:G,pause:L,flipX:O,alphaTest:k,children:P}=W,z=_n(W,["startFrame","endFrame","fps","frameName","textureDataURL","textureImageURL","loop","numberOfFrames","autoPlay","animationNames","onStart","onEnd","onLoopEnd","onFrame","play","pause","flipX","alphaTest","children"]);(0,E.z)(mt=>mt.viewport);const Y=d.useRef(null),[K,se]=d.useState(!1),ce=d.useRef(),ge=d.useRef(),le=d.useRef(window.performance.now()),xe=d.useRef(),me=d.useRef(i||0),Be=d.useRef(l||""),ke=1e3/(r||30),[Re,ze]=d.useState(new s.Texture),Pe=d.useRef(0),[Ye,Ce]=d.useState([1,1,1]),Ee=O?-1:1;function _e(mt,gt,rt){const Wt=new s.TextureLoader,kt=fetch(mt).then(qe=>qe.json()),Bt=new Promise(qe=>{Wt.load(gt,qe)});Promise.all([kt,Bt]).then(qe=>{rt(qe[0],qe[1])})}const oe=(mt,gt)=>{const rt=gt/mt;return ge.current.scale.set(1,rt,1),[1,rt,1]};d.useEffect(()=>{if(c&&p)_e(c,p,Ae);else if(p){const mt=new s.TextureLoader;new Promise(gt=>{mt.load(p,gt)}).then(gt=>{Ae(null,gt)})}},[]),d.useLayoutEffect(()=>{ve()},[Re,O]),d.useEffect(()=>{},[L]),d.useEffect(()=>{Be.current!==l&&l&&(me.current=0,Be.current=l)},[l]);const Ae=(mt,gt)=>{if(mt===null){if(gt&&g){const rt=gt.image.width,Wt=gt.image.height,kt=rt/g,Bt=Wt;if(xe.current=gt,Pe.current=g,Y.current={frames:[],meta:{version:"1.0",size:{w:rt,h:Wt},scale:"1"}},parseInt(kt.toString(),10)===kt)for(let qe=0;qe<g;qe++)Y.current.frames.push({frame:{x:qe*kt,y:0,w:kt,h:Bt},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:kt,h:Bt},sourceSize:{w:kt,h:Wt}})}}else if(gt){Y.current=mt,Y.current.frames=Array.isArray(mt.frames)?mt.frames:Te(),Pe.current=Array.isArray(mt.frames)?mt.frames.length:Object.keys(mt.frames).length,xe.current=gt;const{w:rt,h:Wt}=bt(mt.frames).sourceSize,kt=oe(rt,Wt);Ce(kt),ce.current&&(ce.current.map=gt)}gt.premultiplyAlpha=!1,ze(gt)},Te=()=>{const mt={},gt=Y.current,rt=_;if(rt)for(let Wt=0;Wt<rt.length;Wt++){mt[rt[Wt]]=[];for(let kt in gt.frames){const Bt=gt.frames[kt],qe=Bt.frame,Ne=qe.x,It=qe.y,mn=qe.w,Sn=qe.h,zt=Bt.sourceSize.w,Vn=Bt.sourceSize.h;typeof kt=="string"&&kt.toLowerCase().indexOf(rt[Wt].toLowerCase())!==-1&&mt[rt[Wt]].push({x:Ne,y:It,w:mn,h:Sn,frame:qe,sourceSize:{w:zt,h:Vn}})}}return mt},ve=()=>{if(!Y.current)return;const{meta:{size:mt},frames:gt}=Y.current,{w:rt,h:Wt}=Array.isArray(gt)?gt[0].sourceSize:l?gt[l]?gt[l][0].sourceSize:{w:0,h:0}:{w:0,h:0};ce.current.map.wrapS=ce.current.map.wrapT=s.RepeatWrapping,ce.current.map.center.set(0,0),ce.current.map.repeat.set(1*Ee/(mt.w/rt),1/(mt.h/Wt));const Bt=1/((mt.h-1)/Wt);ce.current.map.offset.x=0,ce.current.map.offset.y=1-Bt,se(!0),b&&b({currentFrameName:l,currentFrame:me.current})},Ge=()=>{const mt=window.performance.now(),gt=mt-le.current,{meta:{size:rt},frames:Wt}=Y.current,{w:kt,h:Bt}=bt(Wt).sourceSize,qe=Array.isArray(Wt)?Wt:l?Wt[l]:[];let Ne=0,It=0;const mn=t||qe.length-1;if(me.current>mn&&(me.current=h&&i!=null?i:0,h?R==null||R({currentFrameName:l,currentFrame:me.current}):T==null||T({currentFrameName:l,currentFrame:me.current}),!h)||gt<=ke)return;le.current=mt-gt%ke,oe(kt,Bt);const Sn=(rt.w-1)/kt,zt=(rt.h-1)/Bt,{frame:{x:Vn,y:ar},sourceSize:{w:_r,h:ur}}=qe[me.current],_i=1/Sn,gi=1/zt;Ne=Ee>0?_i*(Vn/_r):_i*(Vn/_r)-ce.current.map.repeat.x,It=Math.abs(1-gi)-gi*(ar/ur),ce.current.map.offset.x=Ne,ce.current.map.offset.y=It,me.current+=1};(0,E.A)((mt,gt)=>{var rt,Wt;!((rt=Y.current)!=null&&rt.frames)||!((Wt=ce.current)!=null&&Wt.map)||L||(v||G)&&(Ge(),F&&F({currentFrameName:Be.current,currentFrame:me.current}))});const bt=mt=>{if(Array.isArray(mt))return mt[0];if(typeof mt=="object"&&mt!==null){const gt=Object.keys(mt);return mt[gt[0]][0]}else return{w:0,h:0}};return d.createElement("group",z,d.createElement(d.Suspense,{fallback:null},d.createElement("sprite",{ref:ge,scale:Ye},d.createElement("spriteMaterial",{toneMapped:!1,ref:ce,map:Re,transparent:!0,alphaTest:k!=null?k:0}))),P)};var Jw=Object.defineProperty,qw=(i,t,r)=>t in i?Jw(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,gm=(i,t,r)=>(qw(i,typeof t!="symbol"?t+"":t,r),r);const K0=4,X0=1024,Pd=4,Zw=(i=1)=>{const t=new Float32Array(X0*Pd*i*K0),r=new s.DataTexture(t,X0,Pd*i,s.RGBAFormat,s.FloatType);return r.wrapS=s.RepeatWrapping,r.wrapT=s.RepeatWrapping,r.magFilter=s.NearestFilter,r.needsUpdate=!0,r},$w=(i,t,r=0)=>{const l=Math.floor(X0*(Pd/4));t.arcLengthDivisions=l/2,t.updateArcLengths();const c=t.getSpacedPoints(l),p=t.computeFrenetFrames(l,!0);for(let h=0;h<l;h++){const g=Math.floor(h/X0),v=h%X0;let _=c[h];j2(i,v,_.x,_.y,_.z,0+g+Pd*r),_=p.tangents[h],j2(i,v,_.x,_.y,_.z,1+g+Pd*r),_=p.normals[h],j2(i,v,_.x,_.y,_.z,2+g+Pd*r),_=p.binormals[h],j2(i,v,_.x,_.y,_.z,3+g+Pd*r)}i.needsUpdate=!0},j2=(i,t,r,l,c,p)=>{const h=i.image,{data:g}=h,v=K0*X0*p;g[t*K0+v+0]=r,g[t*K0+v+1]=l,g[t*K0+v+2]=c,g[t*K0+v+3]=1},eT=i=>({spineTexture:{value:i},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function tT(i,t,r=1){i.__ok||(i.__ok=!0,i.onBeforeCompile=l=>{if(l.__modified)return;l.__modified=!0,Object.assign(l.uniforms,t);const c=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Pd*r}.;
		float textureStacks = ${Pd/4}.;

		${l.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Pd}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);l.vertexShader=c})}class nT{constructor(t,r=1){gm(this,"curveArray"),gm(this,"curveLengthArray"),gm(this,"object3D"),gm(this,"splineTexure"),gm(this,"uniforms");const l=t.clone(),c=Zw(r),p=eT(c);l.traverse(h=>{(h instanceof s.Mesh||h instanceof s.InstancedMesh)&&(h.material=h.material.clone(),tT(h.material,p,r))}),this.curveArray=new Array(r),this.curveLengthArray=new Array(r),this.object3D=l,this.splineTexure=c,this.uniforms=p}updateCurve(t,r){if(t>=this.curveArray.length)throw Error("Index out of range for Flow");const l=r.getLength();this.uniforms.spineLength.value=l,this.curveLengthArray[t]=l,this.curveArray[t]=r,$w(this.splineTexure,r,t)}moveAlongCurve(t){this.uniforms.pathOffset.value+=t}}const sC=new s.Matrix4;class e8 extends null{constructor(t,r,l,c){const p=new InstancedMesh(l,c,t);p.instanceMatrix.setUsage(DynamicDrawUsage),p.frustumCulled=!1,super(p,r),gm(this,"offsets"),gm(this,"whichCurve"),this.offsets=new Array(t).fill(0),this.whichCurve=new Array(t).fill(0)}writeChanges(t){sC.makeTranslation(this.curveLengthArray[this.whichCurve[t]],this.whichCurve[t],this.offsets[t]),this.object3D.setMatrixAt(t,sC),this.object3D.instanceMatrix.needsUpdate=!0}moveIndividualAlongCurve(t,r){this.offsets[t]+=r,this.writeChanges(t)}setCurve(t,r){if(isNaN(r))throw Error("curve index being set is Not a Number (NaN)");this.whichCurve[t]=r,this.writeChanges(t)}}const rT=d.forwardRef(({children:i,curve:t},r)=>{const[l]=d.useState(()=>new s.Scene),[c,p]=d.useState(),h=d.useRef();return d.useEffect(()=>{h.current=new nT(l.children[0]),p(h.current.object3D)},[i]),d.useEffect(()=>{var g;t&&((g=h.current)==null||g.updateCurve(0,t))},[t]),d.useImperativeHandle(r,()=>({moveAlongCurve:g=>{var v;(v=h.current)==null||v.moveAlongCurve(g)}})),d.createElement(d.Fragment,null,(0,E.g)(i,l),c&&d.createElement("primitive",{object:c}))});var iT=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class oT extends s.MeshPhysicalMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${iT}
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}const sT=d.forwardRef((l,r)=>{var c=l,{speed:i=1}=c,t=_n(c,["speed"]);const[p]=d.useState(()=>new oT);return(0,E.A)(h=>p&&(p.time=h.clock.getElapsedTime()*i)),d.createElement("primitive",(0,w.Z)({object:p,ref:r,attach:"material"},t))});class aT extends s.MeshStandardMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._factor={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.factor=this._factor,t.vertexShader=`
      uniform float time;
      uniform float factor;
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(t){this._time.value=t}get factor(){return this._factor.value}set factor(t){this._factor.value=t}}const lT=d.forwardRef((l,r)=>{var c=l,{speed:i=1}=c,t=_n(c,["speed"]);const[p]=d.useState(()=>new aT);return(0,E.A)(h=>p&&(p.time=h.clock.getElapsedTime()*i)),d.createElement("primitive",(0,w.Z)({object:p,ref:r,attach:"material"},t))});class cT extends s.ShaderMaterial{constructor(t=new s.Vector2){super({uniforms:{inputBuffer:new s.Uniform(null),depthBuffer:new s.Uniform(null),resolution:new s.Uniform(new s.Vector2),texelSize:new s.Uniform(new s.Vector2),halfTexelSize:new s.Uniform(new s.Vector2),kernel:new s.Uniform(0),scale:new s.Uniform(1),cameraNear:new s.Uniform(0),cameraFar:new s.Uniform(1),minDepthThreshold:new s.Uniform(0),maxDepthThreshold:new s.Uniform(1),depthScale:new s.Uniform(0),depthToBlurRatioBias:new s.Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <encodings_fragment>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:s.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(t,r){this.uniforms.texelSize.value.set(t,r),this.uniforms.halfTexelSize.value.set(t,r).multiplyScalar(.5)}setResolution(t){this.uniforms.resolution.value.copy(t)}}class aC{constructor({gl:t,resolution:r,width:l=500,height:c=500,minDepthThreshold:p=0,maxDepthThreshold:h=1,depthScale:g=0,depthToBlurRatioBias:v=.25}){this.renderToScreen=!1,this.renderTargetA=new s.WebGLRenderTarget(r,r,{minFilter:s.LinearFilter,magFilter:s.LinearFilter,stencilBuffer:!1,depthBuffer:!1,type:s.HalfFloatType}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new cT,this.convolutionMaterial.setTexelSize(1/l,1/c),this.convolutionMaterial.setResolution(new s.Vector2(l,c)),this.scene=new s.Scene,this.camera=new s.Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=p,this.convolutionMaterial.uniforms.maxDepthThreshold.value=h,this.convolutionMaterial.uniforms.depthScale.value=g,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=v,this.convolutionMaterial.defines.USE_DEPTH=g>0;const _=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),b=new Float32Array([0,0,2,0,0,2]),T=new s.BufferGeometry;T.setAttribute("position",new s.BufferAttribute(_,3)),T.setAttribute("uv",new s.BufferAttribute(b,2)),this.screen=new s.Mesh(T,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(t,r,l){const c=this.scene,p=this.camera,h=this.renderTargetA,g=this.renderTargetB;let v=this.convolutionMaterial,_=v.uniforms;_.depthBuffer.value=r.depthTexture;const b=v.kernel;let T=r,R,F,G;for(F=0,G=b.length-1;F<G;++F)R=F&1?g:h,_.kernel.value=b[F],_.inputBuffer.value=T.texture,t.setRenderTarget(R),t.render(c,p),T=R;_.kernel.value=b[F],_.inputBuffer.value=T.texture,t.setRenderTarget(this.renderToScreen?null:l),t.render(c,p)}}class lC extends s.MeshStandardMaterial{constructor(t={}){super(t),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(t)}onBeforeCompile(t){var r;(r=t.defines)!=null&&r.USE_UV||(t.defines.USE_UV=""),t.uniforms.hasBlur=this._hasBlur,t.uniforms.tDiffuse=this._tDiffuse,t.uniforms.tDepth=this._tDepth,t.uniforms.distortionMap=this._distortionMap,t.uniforms.tDiffuseBlur=this._tDiffuseBlur,t.uniforms.textureMatrix=this._textureMatrix,t.uniforms.mirror=this._mirror,t.uniforms.mixBlur=this._mixBlur,t.uniforms.mixStrength=this._blurStrength,t.uniforms.minDepthThreshold=this._minDepthThreshold,t.uniforms.maxDepthThreshold=this._maxDepthThreshold,t.uniforms.depthScale=this._depthScale,t.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,t.uniforms.distortion=this._distortion,t.uniforms.mixContrast=this._mixContrast,t.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${t.vertexShader}`,t.vertexShader=t.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),t.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${t.fragmentShader}`,t.fragmentShader=t.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(t){this._tDiffuse.value=t}get tDepth(){return this._tDepth.value}set tDepth(t){this._tDepth.value=t}get distortionMap(){return this._distortionMap.value}set distortionMap(t){this._distortionMap.value=t}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(t){this._tDiffuseBlur.value=t}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(t){this._textureMatrix.value=t}get hasBlur(){return this._hasBlur.value}set hasBlur(t){this._hasBlur.value=t}get mirror(){return this._mirror.value}set mirror(t){this._mirror.value=t}get mixBlur(){return this._mixBlur.value}set mixBlur(t){this._mixBlur.value=t}get mixStrength(){return this._blurStrength.value}set mixStrength(t){this._blurStrength.value=t}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(t){this._minDepthThreshold.value=t}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(t){this._maxDepthThreshold.value=t}get depthScale(){return this._depthScale.value}set depthScale(t){this._depthScale.value=t}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(t){this._depthToBlurRatioBias.value=t}get distortion(){return this._distortion.value}set distortion(t){this._distortion.value=t}get mixContrast(){return this._mixContrast.value}set mixContrast(t){this._mixContrast.value=t}}(0,E.e)({MeshReflectorMaterialImpl:lC});const pT=d.forwardRef((L,G)=>{var O=L,{mixBlur:i=0,mixStrength:t=1,resolution:r=256,blur:l=[0,0],minDepthThreshold:c=.9,maxDepthThreshold:p=1,depthScale:h=0,depthToBlurRatioBias:g=.25,mirror:v=0,distortion:_=1,mixContrast:b=1,distortionMap:T,reflectorOffset:R=0}=O,F=_n(O,["mixBlur","mixStrength","resolution","blur","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","distortion","mixContrast","distortionMap","reflectorOffset"]);const k=(0,E.z)(({gl:_e})=>_e),P=(0,E.z)(({camera:_e})=>_e),z=(0,E.z)(({scene:_e})=>_e);l=Array.isArray(l)?l:[l,l];const j=l[0]+l[1]>0,Q=d.useRef(null),[W]=d.useState(()=>new s.Plane),[Y]=d.useState(()=>new s.Vector3),[K]=d.useState(()=>new s.Vector3),[se]=d.useState(()=>new s.Vector3),[ce]=d.useState(()=>new s.Matrix4),[ge]=d.useState(()=>new s.Vector3(0,0,-1)),[le]=d.useState(()=>new s.Vector4),[xe]=d.useState(()=>new s.Vector3),[me]=d.useState(()=>new s.Vector3),[Be]=d.useState(()=>new s.Vector4),[ke]=d.useState(()=>new s.Matrix4),[Re]=d.useState(()=>new s.PerspectiveCamera),ze=d.useCallback(()=>{var _e;const oe=Q.current.parent||((_e=Q.current)==null?void 0:_e.__r3f.parent);if(!oe||(K.setFromMatrixPosition(oe.matrixWorld),se.setFromMatrixPosition(P.matrixWorld),ce.extractRotation(oe.matrixWorld),Y.set(0,0,1),Y.applyMatrix4(ce),K.addScaledVector(Y,R),xe.subVectors(K,se),xe.dot(Y)>0))return;xe.reflect(Y).negate(),xe.add(K),ce.extractRotation(P.matrixWorld),ge.set(0,0,-1),ge.applyMatrix4(ce),ge.add(se),me.subVectors(K,ge),me.reflect(Y).negate(),me.add(K),Re.position.copy(xe),Re.up.set(0,1,0),Re.up.applyMatrix4(ce),Re.up.reflect(Y),Re.lookAt(me),Re.far=P.far,Re.updateMatrixWorld(),Re.projectionMatrix.copy(P.projectionMatrix),ke.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ke.multiply(Re.projectionMatrix),ke.multiply(Re.matrixWorldInverse),ke.multiply(oe.matrixWorld),W.setFromNormalAndCoplanarPoint(Y,K),W.applyMatrix4(Re.matrixWorldInverse),le.set(W.normal.x,W.normal.y,W.normal.z,W.constant);const Ae=Re.projectionMatrix;Be.x=(Math.sign(le.x)+Ae.elements[8])/Ae.elements[0],Be.y=(Math.sign(le.y)+Ae.elements[9])/Ae.elements[5],Be.z=-1,Be.w=(1+Ae.elements[10])/Ae.elements[14],le.multiplyScalar(2/le.dot(Be)),Ae.elements[2]=le.x,Ae.elements[6]=le.y,Ae.elements[10]=le.z+1,Ae.elements[14]=le.w},[P,R]),[Pe,Ye,Ce,Ee]=d.useMemo(()=>{const _e={minFilter:s.LinearFilter,magFilter:s.LinearFilter,type:s.HalfFloatType},oe=new s.WebGLRenderTarget(r,r,_e);oe.depthBuffer=!0,oe.depthTexture=new s.DepthTexture(r,r),oe.depthTexture.format=s.DepthFormat,oe.depthTexture.type=s.UnsignedShortType;const Ae=new s.WebGLRenderTarget(r,r,_e),Te=new aC({gl:k,resolution:r,width:l[0],height:l[1],minDepthThreshold:c,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:g}),ve={mirror:v,textureMatrix:ke,mixBlur:i,tDiffuse:oe.texture,tDepth:oe.depthTexture,tDiffuseBlur:Ae.texture,hasBlur:j,mixStrength:t,minDepthThreshold:c,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:g,distortion:_,distortionMap:T,mixContrast:b,"defines-USE_BLUR":j?"":void 0,"defines-USE_DEPTH":h>0?"":void 0,"defines-USE_DISTORTION":T?"":void 0};return[oe,Ae,Te,ve]},[k,l,ke,r,v,j,i,t,c,p,h,g,_,T,b]);return(0,E.A)(()=>{var _e;const oe=Q.current.parent||((_e=Q.current)==null?void 0:_e.__r3f.parent);if(!oe)return;oe.visible=!1;const Ae=k.xr.enabled,Te=k.shadowMap.autoUpdate;ze(),k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.setRenderTarget(Pe),k.state.buffers.depth.setMask(!0),k.autoClear||k.clear(),k.render(z,Re),j&&Ce.render(k,Pe,Ye),k.xr.enabled=Ae,k.shadowMap.autoUpdate=Te,oe.visible=!0,k.setRenderTarget(null)}),d.createElement("meshReflectorMaterialImpl",(0,w.Z)({attach:"material",key:"key"+Ee["defines-USE_BLUR"]+Ee["defines-USE_DEPTH"]+Ee["defines-USE_DISTORTION"],ref:zr([Q,G])},Ee,F))});function uT(i){switch(i){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function dT(i){switch(i){case 1:return s.RedFormat;case 2:return s.RGFormat;case 3:return s.RGBAFormat;case 4:return s.RGBAFormat}}function cC(i){switch(i){case 1:return s.RedIntegerFormat;case 2:return s.RGIntegerFormat;case 3:return s.RGBAIntegerFormat;case 4:return s.RGBAIntegerFormat}}class pC extends s.DataTexture{constructor(){super(),this.minFilter=s.NearestFilter,this.magFilter=s.NearestFilter,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(t){const r=this.overrideItemSize,l=t.itemSize,c=t.count;if(r!==null){if(l*c%r!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");t.itemSize=r,t.count=c*l/r}const p=t.itemSize,h=t.count,g=t.normalized,v=t.array.constructor,_=v.BYTES_PER_ELEMENT;let b=this._forcedType,T=p;if(b===null)switch(v){case Float32Array:b=s.FloatType;break;case Uint8Array:case Uint16Array:case Uint32Array:b=s.UnsignedIntType;break;case Int8Array:case Int16Array:case Int32Array:b=s.IntType;break}let R,F,G,L,O=uT(p);switch(b){case s.FloatType:G=1,F=dT(p),g&&_===1?(L=v,O+="8",v===Uint8Array?R=s.UnsignedByteType:(R=s.ByteType,O+="_SNORM")):(L=Float32Array,O+="32F",R=s.FloatType);break;case s.IntType:O+=_*8+"I",G=g?Math.pow(2,v.BYTES_PER_ELEMENT*8-1):1,F=cC(p),_===1?(L=Int8Array,R=s.ByteType):_===2?(L=Int16Array,R=s.ShortType):(L=Int32Array,R=s.IntType);break;case s.UnsignedIntType:O+=_*8+"UI",G=g?Math.pow(2,v.BYTES_PER_ELEMENT*8-1):1,F=cC(p),_===1?(L=Uint8Array,R=s.UnsignedByteType):_===2?(L=Uint16Array,R=s.UnsignedShortType):(L=Uint32Array,R=s.UnsignedIntType);break}T===3&&(F===s.RGBAFormat||F===s.RGBAIntegerFormat)&&(T=4);const k=Math.ceil(Math.sqrt(h)),P=T*k*k,z=new L(P),j=t.normalized;t.normalized=!1;for(let Q=0;Q<h;Q++){const W=T*Q;z[W]=t.getX(Q)/G,p>=2&&(z[W+1]=t.getY(Q)/G),p>=3&&(z[W+2]=t.getZ(Q)/G,T===4&&(z[W+3]=1)),p>=4&&(z[W+3]=t.getW(Q)/G)}t.normalized=j,this.internalFormat=O,this.format=F,this.type=R,this.image.width=k,this.image.height=k,this.image.data=z,this.needsUpdate=!0,this.dispose(),t.itemSize=l,t.count=c}}class hT extends pC{constructor(){super(),this._forcedType=s.UnsignedIntType}}class t8 extends null{constructor(){super(),this._forcedType=IntType}}class fT extends pC{constructor(){super(),this._forcedType=s.FloatType}}function gT(i,t,r){const l=i._roots;if(l.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const c=l[0],p=new Uint16Array(c),h=new Uint32Array(c),g=new Float32Array(c),v=c.byteLength/dm,_=2*Math.ceil(Math.sqrt(v/2)),b=new Float32Array(4*_*_),T=Math.ceil(Math.sqrt(v)),R=new Uint32Array(2*T*T);for(let F=0;F<v;F++){const G=F*dm/4,L=G*2,O=G;for(let k=0;k<3;k++)b[8*F+0+k]=g[O+0+k],b[8*F+4+k]=g[O+3+k];if(Lh(L,p)){const k=U0(L,p),P=hm(G,h),z=4294901760|k;R[F*2+0]=z,R[F*2+1]=P}else{const k=4*j0(G,h)/dm,P=qx(G,h);R[F*2+0]=P,R[F*2+1]=k}}t.image.data=b,t.image.width=_,t.image.height=_,t.format=s.RGBAFormat,t.type=s.FloatType,t.internalFormat="RGBA32F",t.minFilter=s.NearestFilter,t.magFilter=s.NearestFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose(),r.image.data=R,r.image.width=T,r.image.height=T,r.format=s.RGIntegerFormat,r.type=s.UnsignedIntType,r.internalFormat="RG32UI",r.minFilter=s.NearestFilter,r.magFilter=s.NearestFilter,r.generateMipmaps=!1,r.needsUpdate=!0,r.dispose()}class uC{constructor(){this.autoDispose=!0,this.index=new hT,this.position=new fT,this.bvhBounds=new s.DataTexture,this.bvhContents=new s.DataTexture,this.index.overrideItemSize=3}updateFrom(t){const{geometry:r}=t;gT(t,this.bvhBounds,this.bvhContents),this.index.updateFrom(r.index),this.position.updateFrom(r.attributes.position)}dispose(){const{index:t,position:r,bvhBounds:l,bvhContents:c}=this;t&&t.dispose(),r&&r.dispose(),l&&l.dispose(),c&&c.dispose()}}const mT=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,AT=`

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

// Raycasting
float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,n8=null,yT=Fc({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new uC,color:new s.Color("white"),resolution:new s.Vector2,viewMatrixInverse:new s.Matrix4,projectionMatrixInverse:new s.Matrix4},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${mT}
  ${AT}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }`),vT=i=>i&&i.isCubeTexture;function _T(c){var p=c,{aberrationStrength:i=0,fastChroma:t=!0,envMap:r}=p,l=_n(p,["aberrationStrength","fastChroma","envMap"]);(0,E.e)({MeshRefractionMaterial:yT});const h=(0,d.useRef)(),{size:g}=(0,E.z)(),v=(0,d.useMemo)(()=>{var _,b;const T={},R=vT(r),G=((_=R?(b=r.image[0])==null?void 0:b.width:r.image.width)!==null&&_!==void 0?_:1024)/4,L=Math.floor(Math.log2(G)),O=Math.pow(2,L),k=3*Math.max(O,16*7),P=4*O;return R&&(T.ENVMAP_TYPE_CUBEM=""),T.CUBEUV_TEXEL_WIDTH=`${1/k}`,T.CUBEUV_TEXEL_HEIGHT=`${1/P}`,T.CUBEUV_MAX_MIP=`${L}.0`,i>0&&(T.CHROMATIC_ABERRATIONS=""),t&&(T.FAST_CHROMA=""),T},[i,t]);return(0,d.useLayoutEffect)(()=>{var _,b,T;const R=(_=h.current)==null||(b=_.__r3f)==null||(T=b.parent)==null?void 0:T.geometry;R&&(h.current.bvh=new uC,h.current.bvh.updateFrom(new Q0(R.clone().toNonIndexed(),{lazyGeneration:!1,strategy:C2})))},[]),(0,E.A)(({camera:_})=>{h.current.viewMatrixInverse=_.matrixWorld,h.current.projectionMatrixInverse=_.projectionMatrixInverse}),d.createElement("meshRefractionMaterial",(0,w.Z)({key:JSON.stringify(v),defines:v,ref:h,resolution:[g.width,g.height],aberrationStrength:i,envMap:r},l))}const fb=Fc({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class ET extends s.MeshPhysicalMaterial{constructor(t=6,r=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new s.Color("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=l=>{l.uniforms=Kn(Kn({},l.uniforms),this.uniforms),r?l.defines.USE_SAMPLER="":l.defines.USE_TRANSMISSION="",l.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      float seed = 0.0;
      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }

      float rand() {
        float result = random(vec3(gl_FragCoord.xy, seed));
        seed += 1.0;
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+l.fragmentShader,l.fragmentShader=l.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +\u221E, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),l.fragmentShader=l.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand();
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${t}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${t})) , material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${t})), material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${t}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(l=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c}))}}const bT=d.forwardRef((L,G)=>{var O=L,{buffer:i,transmissionSampler:t=!1,backside:r=!1,side:l=s.FrontSide,transmission:c=1,thickness:p=0,backsideThickness:h=0,samples:g=10,resolution:v,backsideResolution:_,background:b,anisotropy:T,anisotropicBlur:R}=O,F=_n(O,["buffer","transmissionSampler","backside","side","transmission","thickness","backsideThickness","samples","resolution","backsideResolution","background","anisotropy","anisotropicBlur"]);(0,E.e)({MeshTransmissionMaterial:ET});const k=d.useRef(null),[P]=d.useState(()=>new fb),z=Hl(_||v),j=Hl(v);let Q,W,Y;return(0,E.A)(K=>{k.current.time=K.clock.getElapsedTime(),k.current.buffer===j.texture&&!t&&(Y=k.current.__r3f.parent,Y&&(W=K.gl.toneMapping,Q=K.scene.background,K.gl.toneMapping=s.NoToneMapping,b&&(K.scene.background=b),Y.material=P,r&&(K.gl.setRenderTarget(z),K.gl.render(K.scene,K.camera),Y.material=k.current,Y.material.buffer=z.texture,Y.material.thickness=h,Y.material.side=s.BackSide),K.gl.setRenderTarget(j),K.gl.render(K.scene,K.camera),Y.material.thickness=p,Y.material.side=l,Y.material.buffer=j.texture,K.scene.background=Q,K.gl.setRenderTarget(null),Y.material=k.current,K.gl.toneMapping=W))}),d.useImperativeHandle(G,()=>k.current,[]),d.createElement("meshTransmissionMaterial",(0,w.Z)({args:[g,t],ref:k},F,{buffer:i||j.texture,_transmission:c,anisotropicBlur:R!=null?R:T,transmission:t?c:0,thickness:p,side:l}))}),MT=d.forwardRef((i,t)=>((0,E.e)({DiscardMaterialImpl:fb}),d.createElement("discardMaterialImpl",(0,w.Z)({ref:t},i))));class dC extends s.PointsMaterial{constructor(t){super(t),this.onBeforeCompile=(r,l)=>{const{isWebGL2:c}=l.capabilities;r.fragmentShader=r.fragmentShader.replace("#include <output_fragment>",`
        ${c?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const xT=d.forwardRef((i,t)=>{const[r]=d.useState(()=>new dC(null));return d.createElement("primitive",(0,w.Z)({},i,{object:r,ref:t,attach:"material"}))}),CT=({focus:i=0,size:t=25,samples:r=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${t})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${i});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${r}; i ++) {
    offset = (vogelDiskSample(j, ${r}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${r}; i++) {
    vogelSample = vogelDiskSample(j, ${r}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${t}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${r}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function hC(i,t,r){t.traverse(l=>{l.material&&(i.properties.remove(l.material),l.material.dispose==null||l.material.dispose())}),i.info.programs.length=0,i.compile(t,r)}function ST({focus:i=0,samples:t=10,size:r=25}){const l=(0,E.z)(h=>h.gl),c=(0,E.z)(h=>h.scene),p=(0,E.z)(h=>h.camera);return d.useEffect(()=>{const h=s.ShaderChunk.shadowmap_pars_fragment;return s.ShaderChunk.shadowmap_pars_fragment=s.ShaderChunk.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+CT({size:r,samples:t,focus:i})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),hC(l,c,p),()=>{s.ShaderChunk.shadowmap_pars_fragment=h,hC(l,c,p)}},[i,r,t]),null}function Ya(i,t){const r=i+"Geometry";return d.forwardRef((g,h)=>{var v=g,{args:l,children:c}=v,p=_n(v,["args","children"]);const _=d.useRef(null);return d.useImperativeHandle(h,()=>_.current),d.useLayoutEffect(()=>void(t==null?void 0:t(_.current))),d.createElement("mesh",(0,w.Z)({ref:_},p),d.createElement(r,{attach:"geometry",args:l}),c)})}const wT=Ya("box"),TT=Ya("circle"),BT=Ya("cone"),RT=Ya("cylinder"),IT=Ya("sphere"),fC=Ya("plane"),FT=Ya("tube"),OT=Ya("torus"),DT=Ya("torusKnot"),PT=Ya("tetrahedron"),LT=Ya("ring"),kT=Ya("polyhedron"),zT=Ya("icosahedron"),GT=Ya("octahedron"),NT=Ya("dodecahedron"),UT=Ya("extrude"),jT=Ya("lathe"),HT=Ya("capsule"),WT=Ya("shape",({geometry:i})=>{const t=i.attributes.position,r=new s.Box3().setFromBufferAttribute(t),l=new s.Vector3;r.getSize(l);const c=[];let p=0,h=0,g=0,v=0;for(let _=0;_<t.count;_++)p=t.getX(_),h=t.getY(_),g=(p-r.min.x)/l.x,v=(h-r.min.y)/l.y,c.push(g,v);i.setAttribute("uv",new s.Float32BufferAttribute(c,2))}),Ld=1e-5;function VT(i,t,r){const l=new s.Shape,c=r-Ld;return l.absarc(Ld,Ld,Ld,-Math.PI/2,-Math.PI,!0),l.absarc(Ld,t-c*2,Ld,Math.PI,Math.PI/2,!0),l.absarc(i-c*2,t-c*2,Ld,Math.PI/2,0,!0),l.absarc(i-c*2,Ld,Ld,0,-Math.PI/2,!0),l}const QT=d.forwardRef(function(T,b){var R=T,{args:[t=1,r=1,l=1]=[],radius:c=.05,steps:p=1,smoothness:h=4,creaseAngle:g=.4,children:v}=R,_=_n(R,["args","radius","steps","smoothness","creaseAngle","children"]);const F=d.useMemo(()=>VT(t,r,c),[t,r,c]),G=d.useMemo(()=>({depth:l-c*2,bevelEnabled:!0,bevelSegments:h*2,steps:p,bevelSize:c-Ld,bevelThickness:c,curveSegments:h}),[l,c,h]),L=d.useRef();return d.useLayoutEffect(()=>{L.current&&(L.current.center(),S3(L.current,g))},[F,G]),d.createElement("mesh",(0,w.Z)({ref:b},_),d.createElement("extrudeGeometry",{ref:L,args:[F,G]}),v)});function KT(){const i=new s.BufferGeometry,t=new Float32Array([-1,-1,3,-1,-1,3]);return i.setAttribute("position",new s.BufferAttribute(t,2)),i}const XT=d.forwardRef(function(c,l){var p=c,{children:t}=p,r=_n(p,["children"]);const h=d.useMemo(KT,[]);return d.createElement("mesh",(0,w.Z)({ref:l,geometry:h,frustumCulled:!1},r),t)}),YT=d.forwardRef((v,g)=>{var _=v,{children:i,width:t,height:r,depth:l,box3:c,precise:p=!0}=_,h=_n(_,["children","width","height","depth","box3","precise"]);const b=d.useRef(null),T=d.useRef(null),R=d.useRef(null);return d.useLayoutEffect(()=>{T.current.matrixWorld.identity();let F=c||new s.Box3().setFromObject(R.current,p);const G=F.max.x-F.min.x,L=F.max.y-F.min.y,O=F.max.z-F.min.z;let k=Math.max(G,L,O);t&&(k=G),r&&(k=L),l&&(k=O),T.current.scale.setScalar(1/k)},[t,r,l,c,p]),d.useImperativeHandle(g,()=>b.current,[]),d.createElement("group",(0,w.Z)({ref:b},h),d.createElement("group",{ref:T},d.createElement("group",{ref:R},i)))}),Y0=i=>i&&i.isOrthographicCamera,JT=i=>i&&i.isBox3,gC=d.createContext(null);function mC({children:i,damping:t=6,fit:r,clip:l,observe:c,margin:p=1.2,eps:h=.01,onFit:g}){const v=d.useRef(null),{camera:_,invalidate:b,size:T,controls:R}=(0,E.z)(),F=R,G=d.useRef(g);G.current=g;function L(W,Y){return Math.abs(W.x-Y.x)<h&&Math.abs(W.y-Y.y)<h&&Math.abs(W.z-Y.z)<h}function O(W,Y,K,se){W.x=s.MathUtils.damp(W.x,Y.x,K,se),W.y=s.MathUtils.damp(W.y,Y.y,K,se),W.z=s.MathUtils.damp(W.z,Y.z,K,se)}const[k]=d.useState(()=>({animating:!1,focus:new s.Vector3,camera:new s.Vector3,zoom:1})),[P]=d.useState(()=>({focus:new s.Vector3,camera:new s.Vector3,zoom:1})),[z]=d.useState(()=>new s.Box3),j=d.useMemo(()=>{function W(){const Y=z.getSize(new s.Vector3),K=z.getCenter(new s.Vector3),se=Math.max(Y.x,Y.y,Y.z),ce=Y0(_)?se*4:se/(2*Math.atan(Math.PI*_.fov/360)),ge=Y0(_)?se*4:ce/_.aspect,le=p*Math.max(ce,ge);return{box:z,size:Y,center:K,distance:le}}return{getSize:W,refresh(Y){if(JT(Y))z.copy(Y);else{const K=Y||v.current;K.updateWorldMatrix(!0,!0),z.setFromObject(K)}if(z.isEmpty()){const K=_.position.length()||10;z.setFromCenterAndSize(new s.Vector3,new s.Vector3(K,K,K))}if((F==null?void 0:F.constructor.name)==="OrthographicTrackballControls"){const{distance:K}=W(),se=_.position.clone().sub(F.target).normalize().multiplyScalar(K),ce=F.target.clone().add(se);_.position.copy(ce)}return this},clip(){const{distance:Y}=W();return F&&(F.maxDistance=Y*10),_.near=Y/100,_.far=Y*100,_.updateProjectionMatrix(),F&&F.update(),b(),this},to({position:Y,target:K}){k.camera.copy(_.position);const{center:se}=W();return P.camera.set(...Y),K?P.focus.set(...K):P.focus.copy(se),t?k.animating=!0:_.position.set(...Y),this},fit(){k.camera.copy(_.position),F&&k.focus.copy(F.target);const{center:Y,distance:K}=W(),se=Y.clone().sub(_.position).normalize().multiplyScalar(K);if(P.camera.copy(Y).sub(se),P.focus.copy(Y),Y0(_)){k.zoom=_.zoom;let ce=0,ge=0;const le=[new s.Vector3(z.min.x,z.min.y,z.min.z),new s.Vector3(z.min.x,z.max.y,z.min.z),new s.Vector3(z.min.x,z.min.y,z.max.z),new s.Vector3(z.min.x,z.max.y,z.max.z),new s.Vector3(z.max.x,z.max.y,z.max.z),new s.Vector3(z.max.x,z.max.y,z.min.z),new s.Vector3(z.max.x,z.min.y,z.max.z),new s.Vector3(z.max.x,z.min.y,z.min.z)];Y.applyMatrix4(_.matrixWorldInverse);for(const Be of le)Be.applyMatrix4(_.matrixWorldInverse),ce=Math.max(ce,Math.abs(Be.y-Y.y)),ge=Math.max(ge,Math.abs(Be.x-Y.x));ce*=2,ge*=2;const xe=(_.top-_.bottom)/ce,me=(_.right-_.left)/ge;P.zoom=Math.min(xe,me)/p,t||(_.zoom=P.zoom,_.updateProjectionMatrix())}return t?k.animating=!0:(_.position.copy(P.camera),_.lookAt(P.focus),F&&(F.target.copy(P.focus),F.update())),G.current&&G.current(this.getSize()),b(),this}}},[z,_,F,p,t,b]);d.useLayoutEffect(()=>{if(F){const W=()=>k.animating=!1;return F.addEventListener("start",W),()=>F.removeEventListener("start",W)}},[F]);const Q=d.useRef(0);return d.useLayoutEffect(()=>{(c||Q.current++===0)&&(j.refresh(),r&&j.fit(),l&&j.clip())},[T,l,r,c,_,F]),(0,E.A)((W,Y)=>{if(k.animating){if(O(k.focus,P.focus,t,Y),O(k.camera,P.camera,t,Y),k.zoom=s.MathUtils.damp(k.zoom,P.zoom,t,Y),_.position.copy(k.camera),Y0(_)&&(_.zoom=k.zoom,_.updateProjectionMatrix()),F?(F.target.copy(k.focus),F.update()):_.lookAt(k.focus),b(),Y0(_)&&!(Math.abs(k.zoom-P.zoom)<h)||!Y0(_)&&!L(k.camera,P.camera)||F&&!L(k.focus,P.focus))return;k.animating=!1}}),d.createElement("group",{ref:v},d.createElement(gC.Provider,{value:j},i))}function AC(){return d.useContext(gC)}var qT=Object.defineProperty,ZT=(i,t,r)=>t in i?qT(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ru=(i,t,r)=>(ZT(i,typeof t!="symbol"?t+"":t,r),r);class gb{constructor(t=Math){Ru(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Ru(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Ru(this,"p",[]),Ru(this,"perm",[]),Ru(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Ru(this,"dot",(r,l,c)=>r[0]*l+r[1]*c),Ru(this,"dot3",(r,l,c,p)=>r[0]*l+r[1]*c+r[2]*p),Ru(this,"dot4",(r,l,c,p,h)=>r[0]*l+r[1]*c+r[2]*p+r[3]*h),Ru(this,"noise",(r,l)=>{let c,p,h;const g=.5*(Math.sqrt(3)-1),v=(r+l)*g,_=Math.floor(r+v),b=Math.floor(l+v),T=(3-Math.sqrt(3))/6,R=(_+b)*T,F=_-R,G=b-R,L=r-F,O=l-G;let k=0,P=1;L>O&&(k=1,P=0);const z=L-k+T,j=O-P+T,Q=L-1+2*T,W=O-1+2*T,Y=_&255,K=b&255,se=this.perm[Y+this.perm[K]]%12,ce=this.perm[Y+k+this.perm[K+P]]%12,ge=this.perm[Y+1+this.perm[K+1]]%12;let le=.5-L*L-O*O;le<0?c=0:(le*=le,c=le*le*this.dot(this.grad3[se],L,O));let xe=.5-z*z-j*j;xe<0?p=0:(xe*=xe,p=xe*xe*this.dot(this.grad3[ce],z,j));let me=.5-Q*Q-W*W;return me<0?h=0:(me*=me,h=me*me*this.dot(this.grad3[ge],Q,W)),70*(c+p+h)}),Ru(this,"noise3d",(r,l,c)=>{let p,h,g,v;const _=.3333333333333333,b=(r+l+c)*_,T=Math.floor(r+b),R=Math.floor(l+b),F=Math.floor(c+b),G=1/6,L=(T+R+F)*G,O=T-L,k=R-L,P=F-L,z=r-O,j=l-k,Q=c-P;let W,Y,K,se,ce,ge;z>=j?j>=Q?(W=1,Y=0,K=0,se=1,ce=1,ge=0):z>=Q?(W=1,Y=0,K=0,se=1,ce=0,ge=1):(W=0,Y=0,K=1,se=1,ce=0,ge=1):j<Q?(W=0,Y=0,K=1,se=0,ce=1,ge=1):z<Q?(W=0,Y=1,K=0,se=0,ce=1,ge=1):(W=0,Y=1,K=0,se=1,ce=1,ge=0);const le=z-W+G,xe=j-Y+G,me=Q-K+G,Be=z-se+2*G,ke=j-ce+2*G,Re=Q-ge+2*G,ze=z-1+3*G,Pe=j-1+3*G,Ye=Q-1+3*G,Ce=T&255,Ee=R&255,_e=F&255,oe=this.perm[Ce+this.perm[Ee+this.perm[_e]]]%12,Ae=this.perm[Ce+W+this.perm[Ee+Y+this.perm[_e+K]]]%12,Te=this.perm[Ce+se+this.perm[Ee+ce+this.perm[_e+ge]]]%12,ve=this.perm[Ce+1+this.perm[Ee+1+this.perm[_e+1]]]%12;let Ge=.6-z*z-j*j-Q*Q;Ge<0?p=0:(Ge*=Ge,p=Ge*Ge*this.dot3(this.grad3[oe],z,j,Q));let bt=.6-le*le-xe*xe-me*me;bt<0?h=0:(bt*=bt,h=bt*bt*this.dot3(this.grad3[Ae],le,xe,me));let mt=.6-Be*Be-ke*ke-Re*Re;mt<0?g=0:(mt*=mt,g=mt*mt*this.dot3(this.grad3[Te],Be,ke,Re));let gt=.6-ze*ze-Pe*Pe-Ye*Ye;return gt<0?v=0:(gt*=gt,v=gt*gt*this.dot3(this.grad3[ve],ze,Pe,Ye)),32*(p+h+g+v)}),Ru(this,"noise4d",(r,l,c,p)=>{const h=this.grad4,g=this.simplex,v=this.perm,_=(Math.sqrt(5)-1)/4,b=(5-Math.sqrt(5))/20;let T,R,F,G,L;const O=(r+l+c+p)*_,k=Math.floor(r+O),P=Math.floor(l+O),z=Math.floor(c+O),j=Math.floor(p+O),Q=(k+P+z+j)*b,W=k-Q,Y=P-Q,K=z-Q,se=j-Q,ce=r-W,ge=l-Y,le=c-K,xe=p-se,me=ce>ge?32:0,Be=ce>le?16:0,ke=ge>le?8:0,Re=ce>xe?4:0,ze=ge>xe?2:0,Pe=le>xe?1:0,Ye=me+Be+ke+Re+ze+Pe;let Ce,Ee,_e,oe,Ae,Te,ve,Ge,bt,mt,gt,rt;Ce=g[Ye][0]>=3?1:0,Ee=g[Ye][1]>=3?1:0,_e=g[Ye][2]>=3?1:0,oe=g[Ye][3]>=3?1:0,Ae=g[Ye][0]>=2?1:0,Te=g[Ye][1]>=2?1:0,ve=g[Ye][2]>=2?1:0,Ge=g[Ye][3]>=2?1:0,bt=g[Ye][0]>=1?1:0,mt=g[Ye][1]>=1?1:0,gt=g[Ye][2]>=1?1:0,rt=g[Ye][3]>=1?1:0;const Wt=ce-Ce+b,kt=ge-Ee+b,Bt=le-_e+b,qe=xe-oe+b,Ne=ce-Ae+2*b,It=ge-Te+2*b,mn=le-ve+2*b,Sn=xe-Ge+2*b,zt=ce-bt+3*b,Vn=ge-mt+3*b,ar=le-gt+3*b,_r=xe-rt+3*b,ur=ce-1+4*b,_i=ge-1+4*b,gi=le-1+4*b,br=xe-1+4*b,Pr=k&255,Oi=P&255,fo=z&255,ut=j&255,vn=v[Pr+v[Oi+v[fo+v[ut]]]]%32,On=v[Pr+Ce+v[Oi+Ee+v[fo+_e+v[ut+oe]]]]%32,or=v[Pr+Ae+v[Oi+Te+v[fo+ve+v[ut+Ge]]]]%32,Qr=v[Pr+bt+v[Oi+mt+v[fo+gt+v[ut+rt]]]]%32,ri=v[Pr+1+v[Oi+1+v[fo+1+v[ut+1]]]]%32;let ui=.6-ce*ce-ge*ge-le*le-xe*xe;ui<0?T=0:(ui*=ui,T=ui*ui*this.dot4(h[vn],ce,ge,le,xe));let si=.6-Wt*Wt-kt*kt-Bt*Bt-qe*qe;si<0?R=0:(si*=si,R=si*si*this.dot4(h[On],Wt,kt,Bt,qe));let bn=.6-Ne*Ne-It*It-mn*mn-Sn*Sn;bn<0?F=0:(bn*=bn,F=bn*bn*this.dot4(h[or],Ne,It,mn,Sn));let qi=.6-zt*zt-Vn*Vn-ar*ar-_r*_r;qi<0?G=0:(qi*=qi,G=qi*qi*this.dot4(h[Qr],zt,Vn,ar,_r));let Bl=.6-ur*ur-_i*_i-gi*gi-br*br;return Bl<0?L=0:(Bl*=Bl,L=Bl*Bl*this.dot4(h[ri],ur,_i,gi,br)),27*(T+R+F+G+L)});for(let r=0;r<256;r++)this.p[r]=Math.floor(t.random()*256);for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}}const $T=d.forwardRef(({intensity:i=1,decay:t,decayRate:r=.65,maxYaw:l=.1,maxPitch:c=.1,maxRoll:p=.1,yawFrequency:h=.1,pitchFrequency:g=.1,rollFrequency:v=.1},_)=>{const b=(0,E.z)(P=>P.camera),T=(0,E.z)(P=>P.controls),R=d.useRef(i),F=d.useRef(b.rotation.clone()),[G]=d.useState(()=>new gb),[L]=d.useState(()=>new gb),[O]=d.useState(()=>new gb),k=()=>{(R.current<0||R.current>1)&&(R.current=R.current<0?0:1)};return d.useImperativeHandle(_,()=>({getIntensity:()=>R.current,setIntensity:P=>{R.current=P,k()}}),[]),d.useEffect(()=>{if(T){const P=()=>void(F.current=b.rotation.clone());return T.addEventListener("change",P),P(),()=>void T.removeEventListener("change",P)}},[b,T]),(0,E.A)((P,z)=>{const j=Math.pow(R.current,2),Q=l*j*G.noise(P.clock.elapsedTime*h,1),W=c*j*L.noise(P.clock.elapsedTime*g,1),Y=p*j*O.noise(P.clock.elapsedTime*v,1);b.rotation.set(F.current.x+W,F.current.y+Q,F.current.z+Y),t&&R.current>0&&(R.current-=r*z,k())}),null}),eB=d.forwardRef((v,g)=>{var _=v,{children:i,enabled:t=!0,speed:r=1,rotationIntensity:l=1,floatIntensity:c=1,floatingRange:p=[-.1,.1]}=_,h=_n(_,["children","enabled","speed","rotationIntensity","floatIntensity","floatingRange"]);const b=d.useRef(null),T=d.useRef(Math.random()*1e4);return(0,E.A)(R=>{var F,G;if(!t||r===0)return;const L=T.current+R.clock.getElapsedTime();b.current.rotation.x=Math.cos(L/4*r)/8*l,b.current.rotation.y=Math.sin(L/4*r)/8*l,b.current.rotation.z=Math.sin(L/4*r)/20*l;let O=Math.sin(L/4*r)/10;O=s.MathUtils.mapLinear(O,-.1,.1,(F=p==null?void 0:p[0])!==null&&F!==void 0?F:-.1,(G=p==null?void 0:p[1])!==null&&G!==void 0?G:.1),b.current.position.y=O*c,b.current.updateMatrix()}),d.createElement("group",h,d.createElement("group",{ref:zr([b,g]),matrixAutoUpdate:!1},i))}),tB=i=>i&&i.isCubeTexture;class nB extends s.Mesh{constructor(t,r){var l,c;const p=tB(t),g=((c=p?(l=t.image[0])==null?void 0:l.width:t.image.width)!=null?c:1024)/4,v=Math.floor(Math.log2(g)),_=Math.pow(2,v),b=3*Math.max(_,16*7),T=4*_,R=[p?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/b}`,`#define CUBEUV_TEXEL_HEIGHT ${1/T}`,`#define CUBEUV_MAX_MIP ${v}.0`],F=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,G=R.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,L={map:{value:t},height:{value:(r==null?void 0:r.height)||15},radius:{value:(r==null?void 0:r.radius)||100}},O=new s.IcosahedronGeometry(1,16),k=new s.ShaderMaterial({uniforms:L,fragmentShader:G,vertexShader:F,side:s.DoubleSide});super(O,k)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var zA=A(25108);class rB extends s.DataTextureLoader{constructor(t){super(t),this.type=s.HalfFloatType}parse(t){const g=function(z,j){switch(z){case 1:zA.error("THREE.RGBELoader Read Error: "+(j||""));break;case 2:zA.error("THREE.RGBELoader Write Error: "+(j||""));break;case 3:zA.error("THREE.RGBELoader Bad File Format: "+(j||""));break;default:case 4:zA.error("THREE.RGBELoader: Error: "+(j||""))}return-1},T=`
`,R=function(z,j,Q){j=j||1024;let Y=z.pos,K=-1,se=0,ce="",ge=String.fromCharCode.apply(null,new Uint16Array(z.subarray(Y,Y+128)));for(;0>(K=ge.indexOf(T))&&se<j&&Y<z.byteLength;)ce+=ge,se+=ge.length,Y+=128,ge+=String.fromCharCode.apply(null,new Uint16Array(z.subarray(Y,Y+128)));return-1<K?(Q!==!1&&(z.pos+=se+K+1),ce+ge.slice(0,K)):!1},F=function(z){const j=/^#\?(\S+)/,Q=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*FORMAT=(\S+)\s*$/,K=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,se={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ce,ge;if(z.pos>=z.byteLength||!(ce=R(z)))return g(1,"no header found");if(!(ge=ce.match(j)))return g(3,"bad initial token");for(se.valid|=1,se.programtype=ge[1],se.string+=ce+`
`;ce=R(z),ce!==!1;){if(se.string+=ce+`
`,ce.charAt(0)==="#"){se.comments+=ce+`
`;continue}if((ge=ce.match(Q))&&(se.gamma=parseFloat(ge[1])),(ge=ce.match(W))&&(se.exposure=parseFloat(ge[1])),(ge=ce.match(Y))&&(se.valid|=2,se.format=ge[1]),(ge=ce.match(K))&&(se.valid|=4,se.height=parseInt(ge[1],10),se.width=parseInt(ge[2],10)),se.valid&2&&se.valid&4)break}return se.valid&2?se.valid&4?se:g(3,"missing image size specifier"):g(3,"missing format specifier")},G=function(z,j,Q){const W=j;if(W<8||W>32767||z[0]!==2||z[1]!==2||z[2]&128)return new Uint8Array(z);if(W!==(z[2]<<8|z[3]))return g(3,"wrong scanline width");const Y=new Uint8Array(4*j*Q);if(!Y.length)return g(4,"unable to allocate buffer space");let K=0,se=0;const ce=4*W,ge=new Uint8Array(4),le=new Uint8Array(ce);let xe=Q;for(;xe>0&&se<z.byteLength;){if(se+4>z.byteLength)return g(1);if(ge[0]=z[se++],ge[1]=z[se++],ge[2]=z[se++],ge[3]=z[se++],ge[0]!=2||ge[1]!=2||(ge[2]<<8|ge[3])!=W)return g(3,"bad rgbe scanline format");let me=0,Be;for(;me<ce&&se<z.byteLength;){Be=z[se++];const Re=Be>128;if(Re&&(Be-=128),Be===0||me+Be>ce)return g(3,"bad scanline data");if(Re){const ze=z[se++];for(let Pe=0;Pe<Be;Pe++)le[me++]=ze}else le.set(z.subarray(se,se+Be),me),me+=Be,se+=Be}const ke=W;for(let Re=0;Re<ke;Re++){let ze=0;Y[K]=le[Re+ze],ze+=W,Y[K+1]=le[Re+ze],ze+=W,Y[K+2]=le[Re+ze],ze+=W,Y[K+3]=le[Re+ze],K+=4}xe--}return Y},L=function(z,j,Q,W){const Y=z[j+3],K=Math.pow(2,Y-128)/255;Q[W+0]=z[j+0]*K,Q[W+1]=z[j+1]*K,Q[W+2]=z[j+2]*K,Q[W+3]=1},O=function(z,j,Q,W){const Y=z[j+3],K=Math.pow(2,Y-128)/255;Q[W+0]=s.DataUtils.toHalfFloat(Math.min(z[j+0]*K,65504)),Q[W+1]=s.DataUtils.toHalfFloat(Math.min(z[j+1]*K,65504)),Q[W+2]=s.DataUtils.toHalfFloat(Math.min(z[j+2]*K,65504)),Q[W+3]=s.DataUtils.toHalfFloat(1)},k=new Uint8Array(t);k.pos=0;const P=F(k);if(P!==-1){const z=P.width,j=P.height,Q=G(k.subarray(k.pos),z,j);if(Q!==-1){let W,Y,K;switch(this.type){case s.FloatType:K=Q.length/4;const se=new Float32Array(K*4);for(let ge=0;ge<K;ge++)L(Q,ge*4,se,ge*4);W=se,Y=s.FloatType;break;case s.HalfFloatType:K=Q.length/4;const ce=new Uint16Array(K*4);for(let ge=0;ge<K;ge++)O(Q,ge*4,ce,ge*4);W=ce,Y=s.HalfFloatType;break;default:zA.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:z,height:j,data:W,header:P.string,gamma:P.gamma,exposure:P.exposure,type:Y}}}return null}setDataType(t){return this.type=t,this}load(t,r,l,c){function p(h,g){switch(h.type){case s.FloatType:case s.HalfFloatType:"colorSpace"in h?h.colorSpace="srgb-linear":h.encoding=3e3,h.minFilter=s.LinearFilter,h.magFilter=s.LinearFilter,h.generateMipmaps=!1,h.flipY=!0;break}r&&r(h,g)}return super.load(t,p,l,c)}}var mb=A(25108);const GA="colorSpace"in new s.Texture;class iB extends s.DataTextureLoader{constructor(t){super(t),this.type=s.HalfFloatType}parse(t){const se=Math.pow(2.7182818,2.2);function ce(ye,Ie){for(var ct=0,Nt=0;Nt<65536;++Nt)(Nt==0||ye[Nt>>3]&1<<(Nt&7))&&(Ie[ct++]=Nt);for(var Zt=ct-1;ct<65536;)Ie[ct++]=0;return Zt}function ge(ye){for(var Ie=0;Ie<16384;Ie++)ye[Ie]={},ye[Ie].len=0,ye[Ie].lit=0,ye[Ie].p=null}const le={l:0,c:0,lc:0};function xe(ye,Ie,ct,Nt,Zt){for(;ct<ye;)Ie=Ie<<8|or(Nt,Zt),ct+=8;ct-=ye,le.l=Ie>>ct&(1<<ye)-1,le.c=Ie,le.lc=ct}const me=new Array(59);function Be(ye){for(var Ie=0;Ie<=58;++Ie)me[Ie]=0;for(var Ie=0;Ie<65537;++Ie)me[ye[Ie]]+=1;for(var ct=0,Ie=58;Ie>0;--Ie){var Nt=ct+me[Ie]>>1;me[Ie]=ct,ct=Nt}for(var Ie=0;Ie<65537;++Ie){var Zt=ye[Ie];Zt>0&&(ye[Ie]=Zt|me[Zt]++<<6)}}function ke(ye,Ie,ct,Nt,Zt,en,Qn){for(var In=ct,Jn=0,qn=0;Zt<=en;Zt++){if(In.value-ct.value>Nt)return!1;xe(6,Jn,qn,ye,In);var nr=le.l;if(Jn=le.c,qn=le.lc,Qn[Zt]=nr,nr==63){if(In.value-ct.value>Nt)throw"Something wrong with hufUnpackEncTable";xe(8,Jn,qn,ye,In);var Vt=le.l+6;if(Jn=le.c,qn=le.lc,Zt+Vt>en+1)throw"Something wrong with hufUnpackEncTable";for(;Vt--;)Qn[Zt++]=0;Zt--}else if(nr>=59){var Vt=nr-59+2;if(Zt+Vt>en+1)throw"Something wrong with hufUnpackEncTable";for(;Vt--;)Qn[Zt++]=0;Zt--}}Be(Qn)}function Re(ye){return ye&63}function ze(ye){return ye>>6}function Pe(ye,Ie,ct,Nt){for(;Ie<=ct;Ie++){var Zt=ze(ye[Ie]),en=Re(ye[Ie]);if(Zt>>en)throw"Invalid table entry";if(en>14){var Qn=Nt[Zt>>en-14];if(Qn.len)throw"Invalid table entry";if(Qn.lit++,Qn.p){var In=Qn.p;Qn.p=new Array(Qn.lit);for(var Jn=0;Jn<Qn.lit-1;++Jn)Qn.p[Jn]=In[Jn]}else Qn.p=new Array(1);Qn.p[Qn.lit-1]=Ie}else if(en)for(var qn=0,Jn=1<<14-en;Jn>0;Jn--){var Qn=Nt[(Zt<<14-en)+qn];if(Qn.len||Qn.p)throw"Invalid table entry";Qn.len=en,Qn.lit=Ie,qn++}}return!0}const Ye={c:0,lc:0};function Ce(ye,Ie,ct,Nt){ye=ye<<8|or(ct,Nt),Ie+=8,Ye.c=ye,Ye.lc=Ie}const Ee={c:0,lc:0};function _e(ye,Ie,ct,Nt,Zt,en,Qn,In,Jn,qn){if(ye==Ie){Nt<8&&(Ce(ct,Nt,Zt,Qn),ct=Ye.c,Nt=Ye.lc),Nt-=8;var nr=ct>>Nt,nr=new Uint8Array([nr])[0];if(Jn.value+nr>qn)return!1;for(var Vt=In[Jn.value-1];nr-- >0;)In[Jn.value++]=Vt}else if(Jn.value<qn)In[Jn.value++]=ye;else return!1;Ee.c=ct,Ee.lc=Nt}function oe(ye){return ye&65535}function Ae(ye){var Ie=oe(ye);return Ie>32767?Ie-65536:Ie}const Te={a:0,b:0};function ve(ye,Ie){var ct=Ae(ye),Nt=Ae(Ie),Zt=Nt,en=ct+(Zt&1)+(Zt>>1),Qn=en,In=en-Zt;Te.a=Qn,Te.b=In}function Ge(ye,Ie){var ct=oe(ye),Nt=oe(Ie),Zt=ct-(Nt>>1)&65535,en=Nt+Zt-32768&65535;Te.a=en,Te.b=Zt}function bt(ye,Ie,ct,Nt,Zt,en,Qn){for(var In=Qn<16384,Jn=ct>Zt?Zt:ct,qn=1,nr;qn<=Jn;)qn<<=1;for(qn>>=1,nr=qn,qn>>=1;qn>=1;){for(var Vt=0,Do=Vt+en*(Zt-nr),jr=en*qn,Hr=en*nr,Ei=Nt*qn,Di=Nt*nr,mo,vo,la,Da;Vt<=Do;Vt+=Hr){for(var Po=Vt,zc=Vt+Nt*(ct-nr);Po<=zc;Po+=Di){var Ko=Po+Ei,Ps=Po+jr,ip=Ps+Ei;In?(ve(ye[Po+Ie],ye[Ps+Ie]),mo=Te.a,la=Te.b,ve(ye[Ko+Ie],ye[ip+Ie]),vo=Te.a,Da=Te.b,ve(mo,vo),ye[Po+Ie]=Te.a,ye[Ko+Ie]=Te.b,ve(la,Da),ye[Ps+Ie]=Te.a,ye[ip+Ie]=Te.b):(Ge(ye[Po+Ie],ye[Ps+Ie]),mo=Te.a,la=Te.b,Ge(ye[Ko+Ie],ye[ip+Ie]),vo=Te.a,Da=Te.b,Ge(mo,vo),ye[Po+Ie]=Te.a,ye[Ko+Ie]=Te.b,Ge(la,Da),ye[Ps+Ie]=Te.a,ye[ip+Ie]=Te.b)}if(ct&qn){var Ps=Po+jr;In?ve(ye[Po+Ie],ye[Ps+Ie]):Ge(ye[Po+Ie],ye[Ps+Ie]),mo=Te.a,ye[Ps+Ie]=Te.b,ye[Po+Ie]=mo}}if(Zt&qn)for(var Po=Vt,zc=Vt+Nt*(ct-nr);Po<=zc;Po+=Di){var Ko=Po+Ei;In?ve(ye[Po+Ie],ye[Ko+Ie]):Ge(ye[Po+Ie],ye[Ko+Ie]),mo=Te.a,ye[Ko+Ie]=Te.b,ye[Po+Ie]=mo}nr=qn,qn>>=1}return Vt}function mt(ye,Ie,ct,Nt,Zt,en,Qn,In,Jn,qn){for(var nr=0,Vt=0,Do=In,jr=Math.trunc(Zt.value+(en+7)/8);Zt.value<jr;)for(Ce(nr,Vt,ct,Zt),nr=Ye.c,Vt=Ye.lc;Vt>=14;){var Hr=nr>>Vt-14&16383,Ei=Ie[Hr];if(Ei.len)Vt-=Ei.len,_e(Ei.lit,Qn,nr,Vt,ct,Nt,Zt,Jn,qn,Do),nr=Ee.c,Vt=Ee.lc;else{if(!Ei.p)throw"hufDecode issues";var Di;for(Di=0;Di<Ei.lit;Di++){for(var mo=Re(ye[Ei.p[Di]]);Vt<mo&&Zt.value<jr;)Ce(nr,Vt,ct,Zt),nr=Ye.c,Vt=Ye.lc;if(Vt>=mo&&ze(ye[Ei.p[Di]])==(nr>>Vt-mo&(1<<mo)-1)){Vt-=mo,_e(Ei.p[Di],Qn,nr,Vt,ct,Nt,Zt,Jn,qn,Do),nr=Ee.c,Vt=Ee.lc;break}}if(Di==Ei.lit)throw"hufDecode issues"}}var vo=8-en&7;for(nr>>=vo,Vt-=vo;Vt>0;){var Ei=Ie[nr<<14-Vt&16383];if(Ei.len)Vt-=Ei.len,_e(Ei.lit,Qn,nr,Vt,ct,Nt,Zt,Jn,qn,Do),nr=Ee.c,Vt=Ee.lc;else throw"hufDecode issues"}return!0}function gt(ye,Ie,ct,Nt,Zt,en){var Qn={value:0},In=ct.value,Jn=On(Ie,ct),qn=On(Ie,ct);ct.value+=4;var nr=On(Ie,ct);if(ct.value+=4,Jn<0||Jn>=65537||qn<0||qn>=65537)throw"Something wrong with HUF_ENCSIZE";var Vt=new Array(65537),Do=new Array(16384);ge(Do);var jr=Nt-(ct.value-In);if(ke(ye,Ie,ct,jr,Jn,qn,Vt),nr>8*(Nt-(ct.value-In)))throw"Something wrong with hufUncompress";Pe(Vt,Jn,qn,Do),mt(Vt,Do,ye,Ie,ct,nr,qn,en,Zt,Qn)}function rt(ye,Ie,ct){for(var Nt=0;Nt<ct;++Nt)Ie[Nt]=ye[Ie[Nt]]}function Wt(ye){for(var Ie=1;Ie<ye.length;Ie++){var ct=ye[Ie-1]+ye[Ie]-128;ye[Ie]=ct}}function kt(ye,Ie){for(var ct=0,Nt=Math.floor((ye.length+1)/2),Zt=0,en=ye.length-1;!(Zt>en||(Ie[Zt++]=ye[ct++],Zt>en));)Ie[Zt++]=ye[Nt++]}function Bt(ye){for(var Ie=ye.byteLength,ct=new Array,Nt=0,Zt=new DataView(ye);Ie>0;){var en=Zt.getInt8(Nt++);if(en<0){var Qn=-en;Ie-=Qn+1;for(var In=0;In<Qn;In++)ct.push(Zt.getUint8(Nt++))}else{var Qn=en;Ie-=2;for(var Jn=Zt.getUint8(Nt++),In=0;In<Qn+1;In++)ct.push(Jn)}}return ct}function qe(ye,Ie,ct,Nt,Zt,en){var Ko=new DataView(en.buffer),Qn=ct[ye.idx[0]].width,In=ct[ye.idx[0]].height,Jn=3,qn=Math.floor(Qn/8),nr=Math.ceil(Qn/8),Vt=Math.ceil(In/8),Do=Qn-(nr-1)*8,jr=In-(Vt-1)*8,Hr={value:0},Ei=new Array(Jn),Di=new Array(Jn),mo=new Array(Jn),vo=new Array(Jn),la=new Array(Jn);for(let _o=0;_o<Jn;++_o)la[_o]=Ie[ye.idx[_o]],Ei[_o]=_o<1?0:Ei[_o-1]+nr*Vt,Di[_o]=new Float32Array(64),mo[_o]=new Uint16Array(64),vo[_o]=new Uint16Array(nr*64);for(let _o=0;_o<Vt;++_o){var Da=8;_o==Vt-1&&(Da=jr);var Po=8;for(let To=0;To<nr;++To){To==nr-1&&(Po=Do);for(let Eo=0;Eo<Jn;++Eo)mo[Eo].fill(0),mo[Eo][0]=Zt[Ei[Eo]++],Ne(Hr,Nt,mo[Eo]),It(mo[Eo],Di[Eo]),mn(Di[Eo]);Jn==3&&Sn(Di);for(let Eo=0;Eo<Jn;++Eo)zt(Di[Eo],vo[Eo],To*64)}let Pa=0;for(let To=0;To<Jn;++To){const Eo=ct[ye.idx[To]].type;for(let Rl=8*_o;Rl<8*_o+Da;++Rl){Pa=la[To][Rl];for(let Xp=0;Xp<qn;++Xp){const qa=Xp*64+(Rl&7)*8;Ko.setUint16(Pa+0*2*Eo,vo[To][qa+0],!0),Ko.setUint16(Pa+1*2*Eo,vo[To][qa+1],!0),Ko.setUint16(Pa+2*2*Eo,vo[To][qa+2],!0),Ko.setUint16(Pa+3*2*Eo,vo[To][qa+3],!0),Ko.setUint16(Pa+4*2*Eo,vo[To][qa+4],!0),Ko.setUint16(Pa+5*2*Eo,vo[To][qa+5],!0),Ko.setUint16(Pa+6*2*Eo,vo[To][qa+6],!0),Ko.setUint16(Pa+7*2*Eo,vo[To][qa+7],!0),Pa+=8*2*Eo}}if(qn!=nr)for(let Rl=8*_o;Rl<8*_o+Da;++Rl){const Xp=la[To][Rl]+8*qn*2*Eo,qa=qn*64+(Rl&7)*8;for(let Iu=0;Iu<Po;++Iu)Ko.setUint16(Xp+Iu*2*Eo,vo[To][qa+Iu],!0)}}}for(var zc=new Uint16Array(Qn),Ko=new DataView(en.buffer),Ps=0;Ps<Jn;++Ps){ct[ye.idx[Ps]].decoded=!0;var ip=ct[ye.idx[Ps]].type;if(ct[Ps].type==2)for(var Kp=0;Kp<In;++Kp){const _o=la[Ps][Kp];for(var Wl=0;Wl<Qn;++Wl)zc[Wl]=Ko.getUint16(_o+Wl*2*ip,!0);for(var Wl=0;Wl<Qn;++Wl)Ko.setFloat32(_o+Wl*2*ip,bn(zc[Wl]),!0)}}}function Ne(ye,Ie,ct){for(var Nt,Zt=1;Zt<64;)Nt=Ie[ye.value],Nt==65280?Zt=64:Nt>>8==255?Zt+=Nt&255:(ct[Zt]=Nt,Zt++),ye.value++}function It(ye,Ie){Ie[0]=bn(ye[0]),Ie[1]=bn(ye[1]),Ie[2]=bn(ye[5]),Ie[3]=bn(ye[6]),Ie[4]=bn(ye[14]),Ie[5]=bn(ye[15]),Ie[6]=bn(ye[27]),Ie[7]=bn(ye[28]),Ie[8]=bn(ye[2]),Ie[9]=bn(ye[4]),Ie[10]=bn(ye[7]),Ie[11]=bn(ye[13]),Ie[12]=bn(ye[16]),Ie[13]=bn(ye[26]),Ie[14]=bn(ye[29]),Ie[15]=bn(ye[42]),Ie[16]=bn(ye[3]),Ie[17]=bn(ye[8]),Ie[18]=bn(ye[12]),Ie[19]=bn(ye[17]),Ie[20]=bn(ye[25]),Ie[21]=bn(ye[30]),Ie[22]=bn(ye[41]),Ie[23]=bn(ye[43]),Ie[24]=bn(ye[9]),Ie[25]=bn(ye[11]),Ie[26]=bn(ye[18]),Ie[27]=bn(ye[24]),Ie[28]=bn(ye[31]),Ie[29]=bn(ye[40]),Ie[30]=bn(ye[44]),Ie[31]=bn(ye[53]),Ie[32]=bn(ye[10]),Ie[33]=bn(ye[19]),Ie[34]=bn(ye[23]),Ie[35]=bn(ye[32]),Ie[36]=bn(ye[39]),Ie[37]=bn(ye[45]),Ie[38]=bn(ye[52]),Ie[39]=bn(ye[54]),Ie[40]=bn(ye[20]),Ie[41]=bn(ye[22]),Ie[42]=bn(ye[33]),Ie[43]=bn(ye[38]),Ie[44]=bn(ye[46]),Ie[45]=bn(ye[51]),Ie[46]=bn(ye[55]),Ie[47]=bn(ye[60]),Ie[48]=bn(ye[21]),Ie[49]=bn(ye[34]),Ie[50]=bn(ye[37]),Ie[51]=bn(ye[47]),Ie[52]=bn(ye[50]),Ie[53]=bn(ye[56]),Ie[54]=bn(ye[59]),Ie[55]=bn(ye[61]),Ie[56]=bn(ye[35]),Ie[57]=bn(ye[36]),Ie[58]=bn(ye[48]),Ie[59]=bn(ye[49]),Ie[60]=bn(ye[57]),Ie[61]=bn(ye[58]),Ie[62]=bn(ye[62]),Ie[63]=bn(ye[63])}function mn(ye){const Ie=.5*Math.cos(.7853975),ct=.5*Math.cos(3.14159/16),Nt=.5*Math.cos(3.14159/8),Zt=.5*Math.cos(3*3.14159/16),en=.5*Math.cos(5*3.14159/16),Qn=.5*Math.cos(3*3.14159/8),In=.5*Math.cos(7*3.14159/16);for(var Jn=new Array(4),qn=new Array(4),nr=new Array(4),Vt=new Array(4),Do=0;Do<8;++Do){var jr=Do*8;Jn[0]=Nt*ye[jr+2],Jn[1]=Qn*ye[jr+2],Jn[2]=Nt*ye[jr+6],Jn[3]=Qn*ye[jr+6],qn[0]=ct*ye[jr+1]+Zt*ye[jr+3]+en*ye[jr+5]+In*ye[jr+7],qn[1]=Zt*ye[jr+1]-In*ye[jr+3]-ct*ye[jr+5]-en*ye[jr+7],qn[2]=en*ye[jr+1]-ct*ye[jr+3]+In*ye[jr+5]+Zt*ye[jr+7],qn[3]=In*ye[jr+1]-en*ye[jr+3]+Zt*ye[jr+5]-ct*ye[jr+7],nr[0]=Ie*(ye[jr+0]+ye[jr+4]),nr[3]=Ie*(ye[jr+0]-ye[jr+4]),nr[1]=Jn[0]+Jn[3],nr[2]=Jn[1]-Jn[2],Vt[0]=nr[0]+nr[1],Vt[1]=nr[3]+nr[2],Vt[2]=nr[3]-nr[2],Vt[3]=nr[0]-nr[1],ye[jr+0]=Vt[0]+qn[0],ye[jr+1]=Vt[1]+qn[1],ye[jr+2]=Vt[2]+qn[2],ye[jr+3]=Vt[3]+qn[3],ye[jr+4]=Vt[3]-qn[3],ye[jr+5]=Vt[2]-qn[2],ye[jr+6]=Vt[1]-qn[1],ye[jr+7]=Vt[0]-qn[0]}for(var Hr=0;Hr<8;++Hr)Jn[0]=Nt*ye[16+Hr],Jn[1]=Qn*ye[16+Hr],Jn[2]=Nt*ye[48+Hr],Jn[3]=Qn*ye[48+Hr],qn[0]=ct*ye[8+Hr]+Zt*ye[24+Hr]+en*ye[40+Hr]+In*ye[56+Hr],qn[1]=Zt*ye[8+Hr]-In*ye[24+Hr]-ct*ye[40+Hr]-en*ye[56+Hr],qn[2]=en*ye[8+Hr]-ct*ye[24+Hr]+In*ye[40+Hr]+Zt*ye[56+Hr],qn[3]=In*ye[8+Hr]-en*ye[24+Hr]+Zt*ye[40+Hr]-ct*ye[56+Hr],nr[0]=Ie*(ye[Hr]+ye[32+Hr]),nr[3]=Ie*(ye[Hr]-ye[32+Hr]),nr[1]=Jn[0]+Jn[3],nr[2]=Jn[1]-Jn[2],Vt[0]=nr[0]+nr[1],Vt[1]=nr[3]+nr[2],Vt[2]=nr[3]-nr[2],Vt[3]=nr[0]-nr[1],ye[0+Hr]=Vt[0]+qn[0],ye[8+Hr]=Vt[1]+qn[1],ye[16+Hr]=Vt[2]+qn[2],ye[24+Hr]=Vt[3]+qn[3],ye[32+Hr]=Vt[3]-qn[3],ye[40+Hr]=Vt[2]-qn[2],ye[48+Hr]=Vt[1]-qn[1],ye[56+Hr]=Vt[0]-qn[0]}function Sn(ye){for(var Ie=0;Ie<64;++Ie){var ct=ye[0][Ie],Nt=ye[1][Ie],Zt=ye[2][Ie];ye[0][Ie]=ct+1.5747*Zt,ye[1][Ie]=ct-.1873*Nt-.4682*Zt,ye[2][Ie]=ct+1.8556*Nt}}function zt(ye,Ie,ct){for(var Nt=0;Nt<64;++Nt)Ie[ct+Nt]=s.DataUtils.toHalfFloat(Vn(ye[Nt]))}function Vn(ye){return ye<=1?Math.sign(ye)*Math.pow(Math.abs(ye),2.2):Math.sign(ye)*Math.pow(se,Math.abs(ye)-1)}function ar(ye){return new DataView(ye.array.buffer,ye.offset.value,ye.size)}function _r(ye){var Ie=ye.viewer.buffer.slice(ye.offset.value,ye.offset.value+ye.size),ct=new Uint8Array(Bt(Ie)),Nt=new Uint8Array(ct.length);return Wt(ct),kt(ct,Nt),new DataView(Nt.buffer)}function ur(ye){var Ie=ye.array.slice(ye.offset.value,ye.offset.value+ye.size),ct=Gf(Ie),Nt=new Uint8Array(ct.length);return Wt(ct),kt(ct,Nt),new DataView(Nt.buffer)}function _i(ye){for(var Ie=ye.viewer,ct={value:ye.offset.value},Nt=new Uint16Array(ye.width*ye.scanlineBlockSize*(ye.channels*ye.type)),Zt=new Uint8Array(8192),en=0,Qn=new Array(ye.channels),In=0;In<ye.channels;In++)Qn[In]={},Qn[In].start=en,Qn[In].end=Qn[In].start,Qn[In].nx=ye.width,Qn[In].ny=ye.lines,Qn[In].size=ye.type,en+=Qn[In].nx*Qn[In].ny*Qn[In].size;var Jn=qi(Ie,ct),qn=qi(Ie,ct);if(qn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Jn<=qn)for(var In=0;In<qn-Jn+1;In++)Zt[In+Jn]=Qr(Ie,ct);var nr=new Uint16Array(65536),Vt=ce(Zt,nr),Do=On(Ie,ct);gt(ye.array,Ie,ct,Do,Nt,en);for(var In=0;In<ye.channels;++In)for(var jr=Qn[In],Hr=0;Hr<Qn[In].size;++Hr)bt(Nt,jr.start+Hr,jr.nx,jr.size,jr.ny,jr.nx*jr.size,Vt);rt(nr,Nt,en);for(var Ei=0,Di=new Uint8Array(Nt.buffer.byteLength),mo=0;mo<ye.lines;mo++)for(var vo=0;vo<ye.channels;vo++){var jr=Qn[vo],la=jr.nx*jr.size,Da=new Uint8Array(Nt.buffer,jr.end*2,la*2);Di.set(Da,Ei),Ei+=la*2,jr.end+=la}return new DataView(Di.buffer)}function gi(ye){var Ie=ye.array.slice(ye.offset.value,ye.offset.value+ye.size),ct=Gf(Ie);const Nt=ye.lines*ye.channels*ye.width,Zt=ye.type==1?new Uint16Array(Nt):new Uint32Array(Nt);let en=0,Qn=0;const In=new Array(4);for(let Jn=0;Jn<ye.lines;Jn++)for(let qn=0;qn<ye.channels;qn++){let nr=0;switch(ye.type){case 1:In[0]=en,In[1]=In[0]+ye.width,en=In[1]+ye.width;for(let Vt=0;Vt<ye.width;++Vt){const Do=ct[In[0]++]<<8|ct[In[1]++];nr+=Do,Zt[Qn]=nr,Qn++}break;case 2:In[0]=en,In[1]=In[0]+ye.width,In[2]=In[1]+ye.width,en=In[2]+ye.width;for(let Vt=0;Vt<ye.width;++Vt){const Do=ct[In[0]++]<<24|ct[In[1]++]<<16|ct[In[2]++]<<8;nr+=Do,Zt[Qn]=nr,Qn++}break}}return new DataView(Zt.buffer)}function br(ye){var Ie=ye.viewer,ct={value:ye.offset.value},Nt=new Uint8Array(ye.width*ye.lines*(ye.channels*ye.type*2)),Zt={version:ri(Ie,ct),unknownUncompressedSize:ri(Ie,ct),unknownCompressedSize:ri(Ie,ct),acCompressedSize:ri(Ie,ct),dcCompressedSize:ri(Ie,ct),rleCompressedSize:ri(Ie,ct),rleUncompressedSize:ri(Ie,ct),rleRawSize:ri(Ie,ct),totalAcUncompressedCount:ri(Ie,ct),totalDcUncompressedCount:ri(Ie,ct),acCompression:ri(Ie,ct)};if(Zt.version<2)throw"EXRLoader.parse: "+aa.compression+" version "+Zt.version+" is unsupported";for(var en=new Array,Qn=qi(Ie,ct)-2;Qn>0;){var In=Pr(Ie.buffer,ct),Jn=Qr(Ie,ct),qn=Jn>>2&3,nr=(Jn>>4)-1,Vt=new Int8Array([nr])[0],Do=Qr(Ie,ct);en.push({name:In,index:Vt,type:Do,compression:qn}),Qn-=In.length+3}for(var jr=aa.channels,Hr=new Array(ye.channels),Ei=0;Ei<ye.channels;++Ei){var Di=Hr[Ei]={},mo=jr[Ei];Di.name=mo.name,Di.compression=0,Di.decoded=!1,Di.type=mo.pixelType,Di.pLinear=mo.pLinear,Di.width=ye.width,Di.height=ye.lines}for(var vo={idx:new Array(3)},la=0;la<ye.channels;++la)for(var Di=Hr[la],Ei=0;Ei<en.length;++Ei){var Da=en[Ei];Di.name==Da.name&&(Di.compression=Da.compression,Da.index>=0&&(vo.idx[Da.index]=la),Di.offset=la)}if(Zt.acCompressedSize>0)switch(Zt.acCompression){case 0:var Ko=new Uint16Array(Zt.totalAcUncompressedCount);gt(ye.array,Ie,ct,Zt.acCompressedSize,Ko,Zt.totalAcUncompressedCount);break;case 1:var Po=ye.array.slice(ct.value,ct.value+Zt.totalAcUncompressedCount),zc=Gf(Po),Ko=new Uint16Array(zc.buffer);ct.value+=Zt.totalAcUncompressedCount;break}if(Zt.dcCompressedSize>0){var Ps={array:ye.array,offset:ct,size:Zt.dcCompressedSize},ip=new Uint16Array(ur(Ps).buffer);ct.value+=Zt.dcCompressedSize}if(Zt.rleRawSize>0){var Po=ye.array.slice(ct.value,ct.value+Zt.rleCompressedSize),zc=Gf(Po),Kp=Bt(zc.buffer);ct.value+=Zt.rleCompressedSize}for(var Wl=0,_o=new Array(Hr.length),Ei=0;Ei<_o.length;++Ei)_o[Ei]=new Array;for(var Pa=0;Pa<ye.lines;++Pa)for(var To=0;To<Hr.length;++To)_o[To].push(Wl),Wl+=Hr[To].width*ye.type*2;qe(vo,_o,Hr,Ko,ip,Nt);for(var Ei=0;Ei<Hr.length;++Ei){var Di=Hr[Ei];if(!Di.decoded)switch(Di.compression){case 2:for(var Eo=0,Rl=0,Pa=0;Pa<ye.lines;++Pa){for(var Xp=_o[Ei][Eo],qa=0;qa<Di.width;++qa){for(var Iu=0;Iu<2*Di.type;++Iu)Nt[Xp++]=Kp[Rl+Iu*Di.width*Di.height];Rl++}Eo++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Nt.buffer)}function Pr(ye,Ie){for(var ct=new Uint8Array(ye),Nt=0;ct[Ie.value+Nt]!=0;)Nt+=1;var Zt=new TextDecoder().decode(ct.slice(Ie.value,Ie.value+Nt));return Ie.value=Ie.value+Nt+1,Zt}function Oi(ye,Ie,ct){var Nt=new TextDecoder().decode(new Uint8Array(ye).slice(Ie.value,Ie.value+ct));return Ie.value=Ie.value+ct,Nt}function fo(ye,Ie){var ct=vn(ye,Ie),Nt=On(ye,Ie);return[ct,Nt]}function ut(ye,Ie){var ct=On(ye,Ie),Nt=On(ye,Ie);return[ct,Nt]}function vn(ye,Ie){var ct=ye.getInt32(Ie.value,!0);return Ie.value=Ie.value+4,ct}function On(ye,Ie){var ct=ye.getUint32(Ie.value,!0);return Ie.value=Ie.value+4,ct}function or(ye,Ie){var ct=ye[Ie.value];return Ie.value=Ie.value+1,ct}function Qr(ye,Ie){var ct=ye.getUint8(Ie.value);return Ie.value=Ie.value+1,ct}const ri=function(ye,Ie){let ct;return"getBigInt64"in DataView.prototype?ct=Number(ye.getBigInt64(Ie.value,!0)):ct=ye.getUint32(Ie.value+4,!0)+Number(ye.getUint32(Ie.value,!0)<<32),Ie.value+=8,ct};function ui(ye,Ie){var ct=ye.getFloat32(Ie.value,!0);return Ie.value+=4,ct}function si(ye,Ie){return s.DataUtils.toHalfFloat(ui(ye,Ie))}function bn(ye){var Ie=(ye&31744)>>10,ct=ye&1023;return(ye>>15?-1:1)*(Ie?Ie===31?ct?NaN:1/0:Math.pow(2,Ie-15)*(1+ct/1024):6103515625e-14*(ct/1024))}function qi(ye,Ie){var ct=ye.getUint16(Ie.value,!0);return Ie.value+=2,ct}function Bl(ye,Ie){return bn(qi(ye,Ie))}function kh(ye,Ie,ct,Nt){for(var Zt=ct.value,en=[];ct.value<Zt+Nt-1;){var Qn=Pr(Ie,ct),In=vn(ye,ct),Jn=Qr(ye,ct);ct.value+=3;var qn=vn(ye,ct),nr=vn(ye,ct);en.push({name:Qn,pixelType:In,pLinear:Jn,xSampling:qn,ySampling:nr})}return ct.value+=1,en}function kd(ye,Ie){var ct=ui(ye,Ie),Nt=ui(ye,Ie),Zt=ui(ye,Ie),en=ui(ye,Ie),Qn=ui(ye,Ie),In=ui(ye,Ie),Jn=ui(ye,Ie),qn=ui(ye,Ie);return{redX:ct,redY:Nt,greenX:Zt,greenY:en,blueX:Qn,blueY:In,whiteX:Jn,whiteY:qn}}function kc(ye,Ie){var ct=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Nt=Qr(ye,Ie);return ct[Nt]}function dc(ye,Ie){var ct=On(ye,Ie),Nt=On(ye,Ie),Zt=On(ye,Ie),en=On(ye,Ie);return{xMin:ct,yMin:Nt,xMax:Zt,yMax:en}}function Os(ye,Ie){var ct=["INCREASING_Y"],Nt=Qr(ye,Ie);return ct[Nt]}function Am(ye,Ie){var ct=ui(ye,Ie),Nt=ui(ye,Ie);return[ct,Nt]}function Xs(ye,Ie){var ct=ui(ye,Ie),Nt=ui(ye,Ie),Zt=ui(ye,Ie);return[ct,Nt,Zt]}function Ds(ye,Ie,ct,Nt,Zt){if(Nt==="string"||Nt==="stringvector"||Nt==="iccProfile")return Oi(Ie,ct,Zt);if(Nt==="chlist")return kh(ye,Ie,ct,Zt);if(Nt==="chromaticities")return kd(ye,ct);if(Nt==="compression")return kc(ye,ct);if(Nt==="box2i")return dc(ye,ct);if(Nt==="lineOrder")return Os(ye,ct);if(Nt==="float")return ui(ye,ct);if(Nt==="v2f")return Am(ye,ct);if(Nt==="v3f")return Xs(ye,ct);if(Nt==="int")return vn(ye,ct);if(Nt==="rational")return fo(ye,ct);if(Nt==="timecode")return ut(ye,ct);if(Nt==="preview")return ct.value+=Zt,"skipped";ct.value+=Zt}function rp(ye,Ie,ct){const Nt={};if(ye.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Nt.version=ye.getUint8(4);const Zt=ye.getUint8(5);Nt.spec={singleTile:!!(Zt&2),longName:!!(Zt&4),deepFormat:!!(Zt&8),multiPart:!!(Zt&16)},ct.value=8;for(var en=!0;en;){var Qn=Pr(Ie,ct);if(Qn==0)en=!1;else{var In=Pr(Ie,ct),Jn=On(ye,ct),qn=Ds(ye,Ie,ct,In,Jn);qn===void 0?mb.warn(`EXRLoader.parse: skipped unknown header attribute type '${In}'.`):Nt[Qn]=qn}}if(Zt!=0)throw mb.error("EXRHeader:",Nt),"THREE.EXRLoader: provided file is currently unsupported.";return Nt}function hc(ye,Ie,ct,Nt,Zt){const en={size:0,viewer:Ie,array:ct,offset:Nt,width:ye.dataWindow.xMax-ye.dataWindow.xMin+1,height:ye.dataWindow.yMax-ye.dataWindow.yMin+1,channels:ye.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ye.channels[0].pixelType,uncompress:null,getter:null,format:null,[GA?"colorSpace":"encoding"]:null};switch(ye.compression){case"NO_COMPRESSION":en.lines=1,en.uncompress=ar;break;case"RLE_COMPRESSION":en.lines=1,en.uncompress=_r;break;case"ZIPS_COMPRESSION":en.lines=1,en.uncompress=ur;break;case"ZIP_COMPRESSION":en.lines=16,en.uncompress=ur;break;case"PIZ_COMPRESSION":en.lines=32,en.uncompress=_i;break;case"PXR24_COMPRESSION":en.lines=16,en.uncompress=gi;break;case"DWAA_COMPRESSION":en.lines=32,en.uncompress=br;break;case"DWAB_COMPRESSION":en.lines=256,en.uncompress=br;break;default:throw"EXRLoader.parse: "+ye.compression+" is unsupported"}if(en.scanlineBlockSize=en.lines,en.type==1)switch(Zt){case s.FloatType:en.getter=Bl,en.inputSize=2;break;case s.HalfFloatType:en.getter=qi,en.inputSize=2;break}else if(en.type==2)switch(Zt){case s.FloatType:en.getter=ui,en.inputSize=4;break;case s.HalfFloatType:en.getter=si,en.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+en.type+" for "+ye.compression+".";en.blockCount=(ye.dataWindow.yMax+1)/en.scanlineBlockSize;for(var Qn=0;Qn<en.blockCount;Qn++)ri(Ie,Nt);en.outputChannels=en.channels==3?4:en.channels;const In=en.width*en.height*en.outputChannels;switch(Zt){case s.FloatType:en.byteArray=new Float32Array(In),en.channels<en.outputChannels&&en.byteArray.fill(1,0,In);break;case s.HalfFloatType:en.byteArray=new Uint16Array(In),en.channels<en.outputChannels&&en.byteArray.fill(15360,0,In);break;default:mb.error("THREE.EXRLoader: unsupported type: ",Zt);break}return en.bytesPerLine=en.width*en.inputSize*en.channels,en.outputChannels==4?en.format=s.RGBAFormat:en.format=s.RedFormat,GA?en.colorSpace="srgb-linear":en.encoding=3e3,en}const go=new DataView(t),Ja=new Uint8Array(t),fl={value:0},aa=rp(go,t,fl),qr=hc(aa,go,Ja,fl,this.type),gl={value:0},zd={R:0,G:1,B:2,A:3,Y:0};for(let ye=0;ye<qr.height/qr.scanlineBlockSize;ye++){const Ie=On(go,fl);qr.size=On(go,fl),qr.lines=Ie+qr.scanlineBlockSize>qr.height?qr.height-Ie:qr.scanlineBlockSize;const Nt=qr.size<qr.lines*qr.bytesPerLine?qr.uncompress(qr):ar(qr);fl.value+=qr.size;for(let Zt=0;Zt<qr.scanlineBlockSize;Zt++){const en=Zt+ye*qr.scanlineBlockSize;if(en>=qr.height)break;for(let Qn=0;Qn<qr.channels;Qn++){const In=zd[aa.channels[Qn].name];for(let Jn=0;Jn<qr.width;Jn++){gl.value=(Zt*(qr.channels*qr.width)+Qn*qr.width+Jn)*qr.inputSize;const qn=(qr.height-1-en)*(qr.width*qr.outputChannels)+Jn*qr.outputChannels+In;qr.byteArray[qn]=qr.getter(Nt,gl)}}}}return{header:aa,width:qr.width,height:qr.height,data:qr.byteArray,format:qr.format,[GA?"colorSpace":"encoding"]:qr[GA?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,r,l,c){function p(h,g){GA?h.colorSpace=g.colorSpace:h.encoding=g.encoding,h.minFilter=s.LinearFilter,h.magFilter=s.LinearFilter,h.generateMipmaps=!1,h.flipY=!1,r&&r(h,g)}return super.load(t,p,l,c)}}const Ab={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},oB="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",yC=i=>Array.isArray(i);function yb({files:i=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r=void 0,encoding:l=void 0,extensions:c}={}){var p;let h=null,g=!1,v;if(r){if(!(r in Ab))throw new Error("Preset must be one of: "+Object.keys(Ab).join(", "));i=Ab[r],t=oB}if(g=yC(i),v=yC(i)?"cube":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":(p=i.split(".").pop())==null?void 0:p.toLowerCase(),h=g?s.CubeTextureLoader:v==="hdr"?rB:v==="exr"?iB:null,!h)throw new Error("useEnvironment: Unrecognized file extension: "+i);const _=(0,E.D)(h,g?[i]:i,F=>{F.setPath==null||F.setPath(t),c&&c(F)}),b=g?_[0]:_;b.mapping=g?s.CubeReflectionMapping:s.EquirectangularReflectionMapping;const T=3001,R=3e3;return"colorSpace"in b?b.colorSpace=(l!=null?l:g)?"srgb":"srgb-linear":b.encoding=(l!=null?l:g)?T:R,b}const sB=i=>i.current&&i.current.isScene,aB=i=>sB(i)?i.current:i;function vb(i,t,r,l,c=0){const p=aB(t||r),h=p.background,g=p.environment,v=p.backgroundBlurriness||0;return i!=="only"&&(p.environment=l),i&&(p.background=l),i&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=c),()=>{i!=="only"&&(p.environment=g),i&&(p.background=h),i&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=v)}}function H2({scene:i,background:t=!1,blur:r,map:l}){const c=(0,E.z)(p=>p.scene);return d.useLayoutEffect(()=>{if(l)return vb(t,i,c,l,r)},[c,i,l,t,r]),null}function _b(c){var p=c,{background:i=!1,scene:t,blur:r}=p,l=_n(p,["background","scene","blur"]);const h=yb(l),g=(0,E.z)(v=>v.scene);return d.useLayoutEffect(()=>vb(i,t,g,h,r),[h,i,t,g,r]),null}function vC({children:i,near:t=1,far:r=1e3,resolution:l=256,frames:c=1,map:p,background:h=!1,blur:g,scene:v,files:_,path:b,preset:T=void 0,extensions:R}){const F=(0,E.z)(z=>z.gl),G=(0,E.z)(z=>z.scene),L=d.useRef(null),[O]=d.useState(()=>new s.Scene),k=d.useMemo(()=>{const z=new s.WebGLCubeRenderTarget(l);return z.texture.type=s.HalfFloatType,z},[l]);d.useLayoutEffect(()=>(c===1&&L.current.update(F,O),vb(h,v,G,k.texture,g)),[i,O,k.texture,v,G,h,c,F]);let P=1;return(0,E.A)(()=>{(c===1/0||P<c)&&(L.current.update(F,O),P++)}),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(d.Fragment,null,i,d.createElement("cubeCamera",{ref:L,args:[t,r,k]}),_||T?d.createElement(_b,{background:!0,files:_,preset:T,path:b,extensions:R}):p?d.createElement(H2,{background:!0,map:p,extensions:R}):null),O))}function lB(i){var t,r,l,c;const p=yb(i),h=i.map||p;d.useMemo(()=>(0,E.e)({GroundProjectedEnvImpl:nB}),[]);const g=d.useMemo(()=>[h],[h]),v=(t=i.ground)==null?void 0:t.height,_=(r=i.ground)==null?void 0:r.radius,b=(l=(c=i.ground)==null?void 0:c.scale)!==null&&l!==void 0?l:1e3;return d.createElement(d.Fragment,null,d.createElement(H2,(0,w.Z)({},i,{map:h})),d.createElement("groundProjectedEnvImpl",{args:g,scale:b,height:v,radius:_}))}function _C(i){return i.ground?d.createElement(lB,i):i.map?d.createElement(H2,i):i.children?d.createElement(vC,i):d.createElement(_b,i)}const cB={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},pB={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},EC=d.forwardRef((L,G)=>{var O=L,{scale:i=10,frames:t=1/0,opacity:r=1,width:l=1,height:c=1,blur:p=1,near:h=0,far:g=10,resolution:v=512,smooth:_=!0,color:b="#000000",depthWrite:T=!1,renderOrder:R}=O,F=_n(O,["scale","frames","opacity","width","height","blur","near","far","resolution","smooth","color","depthWrite","renderOrder"]);const k=d.useRef(null),P=(0,E.z)(ke=>ke.scene),z=(0,E.z)(ke=>ke.gl),j=d.useRef(null);l=l*(Array.isArray(i)?i[0]:i||1),c=c*(Array.isArray(i)?i[1]:i||1);const[Q,W,Y,K,se,ce,ge]=d.useMemo(()=>{const ke=new s.WebGLRenderTarget(v,v),Re=new s.WebGLRenderTarget(v,v);Re.texture.generateMipmaps=ke.texture.generateMipmaps=!1;const ze=new s.PlaneGeometry(l,c).rotateX(Math.PI/2),Pe=new s.Mesh(ze),Ye=new s.MeshDepthMaterial;Ye.depthTest=Ye.depthWrite=!1,Ye.onBeforeCompile=_e=>{_e.uniforms=Xo(Kn({},_e.uniforms),{ucolor:{value:new s.Color(b)}}),_e.fragmentShader=_e.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),_e.fragmentShader=_e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Ce=new s.ShaderMaterial(cB),Ee=new s.ShaderMaterial(pB);return Ee.depthTest=Ce.depthTest=!1,[ke,ze,Ye,Pe,Ce,Ee,Re]},[v,l,c,i,b]),le=ke=>{K.visible=!0,K.material=se,se.uniforms.tDiffuse.value=Q.texture,se.uniforms.h.value=ke*1/256,z.setRenderTarget(ge),z.render(K,j.current),K.material=ce,ce.uniforms.tDiffuse.value=ge.texture,ce.uniforms.v.value=ke*1/256,z.setRenderTarget(Q),z.render(K,j.current),K.visible=!1};let xe=0,me,Be;return(0,E.A)(()=>{j.current&&(t===1/0||xe<t)&&(xe++,me=P.background,Be=P.overrideMaterial,k.current.visible=!1,P.background=null,P.overrideMaterial=Y,z.setRenderTarget(Q),z.render(P,j.current),le(p),_&&le(p*.4),z.setRenderTarget(null),k.current.visible=!0,P.overrideMaterial=Be,P.background=me)}),d.useImperativeHandle(G,()=>k.current,[]),d.createElement("group",(0,w.Z)({"rotation-x":Math.PI/2},F,{ref:k}),d.createElement("mesh",{renderOrder:R,geometry:W,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},d.createElement("meshBasicMaterial",{transparent:!0,map:Q.texture,opacity:r,depthWrite:T})),d.createElement("orthographicCamera",{ref:j,args:[-l/2,l/2,c/2,-c/2,h,g]}))});function uB(i){return i.isLight}function dB(i){return!!i.geometry}const Eb=d.createContext(null),hB=Fc({color:new s.Color,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),bC=d.forwardRef((G,F)=>{var L=G,{children:i,temporal:t,frames:r=40,limit:l=1/0,blend:c=20,scale:p=10,opacity:h=1,alphaTest:g=.75,color:v="black",colorBlend:_=2,resolution:b=1024,toneMapped:T=!0}=L,R=_n(L,["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"]);(0,E.e)({SoftShadowMaterial:hB});const O=(0,E.z)(K=>K.gl),k=(0,E.z)(K=>K.scene),P=(0,E.z)(K=>K.camera),z=(0,E.z)(K=>K.invalidate),j=d.useRef(null),Q=d.useRef(null),[W]=d.useState(()=>new fB(O,k,b));d.useLayoutEffect(()=>{W.configure(j.current)},[]);const Y=d.useMemo(()=>({lights:new Map,temporal:!!t,frames:Math.max(2,r),blend:Math.max(2,r===1/0?c:r),count:0,getMesh:()=>j.current,reset:()=>{W.clear();const K=j.current.material;K.opacity=0,K.alphaTest=0,Y.count=0},update:(K=1)=>{const se=j.current.material;Y.temporal?(se.opacity=Math.min(h,se.opacity+h/Y.blend),se.alphaTest=Math.min(g,se.alphaTest+g/Y.blend)):(se.opacity=h,se.alphaTest=g),Q.current.visible=!0,W.prepare();for(let ce=0;ce<K;ce++)Y.lights.forEach(ge=>ge.update()),W.update(P,Y.blend);Q.current.visible=!1,W.finish()}}),[W,P,k,t,r,c,h,g]);return d.useLayoutEffect(()=>{Y.reset(),!Y.temporal&&Y.frames!==1/0&&Y.update(Y.blend)}),d.useImperativeHandle(F,()=>Y,[Y]),(0,E.A)(()=>{(Y.temporal||Y.frames===1/0)&&Y.count<Y.frames&&Y.count<l&&(z(),Y.update(),Y.count++)}),d.createElement("group",R,d.createElement("group",{traverse:()=>null,ref:Q},d.createElement(Eb.Provider,{value:Y},i)),d.createElement("mesh",{receiveShadow:!0,ref:j,scale:p,rotation:[-Math.PI/2,0,0]},d.createElement("planeGeometry",null),d.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:T,color:v,blend:_,map:W.progressiveLightMap2.texture})))}),MC=d.forwardRef((G,F)=>{var L=G,{castShadow:i=!0,bias:t=.001,mapSize:r=512,size:l=5,near:c=.5,far:p=500,frames:h=1,position:g=[0,0,0],radius:v=1,amount:_=8,intensity:b=1,ambient:T=.5}=L,R=_n(L,["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"]);const O=d.useRef(null),k=new s.Vector3(...g).length(),P=d.useContext(Eb),z=d.useCallback(()=>{let Q;if(O.current)for(let W=0;W<O.current.children.length;W++)if(Q=O.current.children[W],Math.random()>T)Q.position.set(g[0]+s.MathUtils.randFloatSpread(v),g[1]+s.MathUtils.randFloatSpread(v),g[2]+s.MathUtils.randFloatSpread(v));else{let Y=Math.acos(2*Math.random()-1)-Math.PI/2,K=2*Math.PI*Math.random();Q.position.set(Math.cos(Y)*Math.cos(K)*k,Math.abs(Math.cos(Y)*Math.sin(K)*k),Math.sin(Y)*k)}},[v,T,k,...g]),j=d.useMemo(()=>({update:z}),[z]);return d.useImperativeHandle(F,()=>j,[j]),d.useLayoutEffect(()=>{const Q=O.current;return P&&P.lights.set(Q.uuid,j),()=>void P.lights.delete(Q.uuid)},[P,j]),d.createElement("group",(0,w.Z)({ref:O},R),Array.from({length:_},(Q,W)=>d.createElement("directionalLight",{key:W,castShadow:i,"shadow-bias":t,"shadow-mapSize":[r,r],intensity:b/_},d.createElement("orthographicCamera",{attach:"shadow-camera",args:[-l,l,l,-l,c,p]}))))});class fB{constructor(t,r,l=1024){this.renderer=t,this.res=l,this.scene=r,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new s.Color,this.clearAlpha=0;const c=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?s.HalfFloatType:s.FloatType;this.progressiveLightMap1=new s.WebGLRenderTarget(this.res,this.res,{type:c}),this.progressiveLightMap2=new s.WebGLRenderTarget(this.res,this.res,{type:c}),this.discardMat=new fb,this.targetMat=new s.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=p=>{p.vertexShader=`varying vec2 vUv;
`+p.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const h=p.fragmentShader.indexOf("void main() {");p.fragmentShader=`varying vec2 vUv;
`+p.fragmentShader.slice(0,h)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+p.fragmentShader.slice(h-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,p.uniforms.previousShadowMap=this.previousShadowMap,p.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(t=>{dB(t)?this.meshes.push({object:t,material:t.material}):uB(t)&&this.lights.push({object:t,intensity:t.intensity})})}prepare(){this.lights.forEach(t=>t.object.intensity=0),this.meshes.forEach(t=>t.object.material=this.discardMat)}finish(){this.lights.forEach(t=>t.object.intensity=t.intensity),this.meshes.forEach(t=>t.object.material=t.material)}configure(t){this.object=t}update(t,r=100){if(!this.object)return;this.averagingWindow.value=r,this.object.material=this.targetMat;const l=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,c=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,p=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(l),this.previousShadowMap.value=c.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.scene.background=p}}const gB={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function mB({radius:i,adjustCamera:t}){const r=AC();return d.useEffect(()=>{t&&r.refresh().clip().fit()},[i,t]),null}function AB(v){var _=v,{children:i,center:t,adjustCamera:r=!0,intensity:l=.5,shadows:c="contact",environment:p="city",preset:h="rembrandt"}=_,g=_n(_,["children","center","adjustCamera","intensity","shadows","environment","preset"]);var b,T,R,F,G,L,O,k;const P=typeof h=="string"?gB[h]:h,[{radius:z,height:j},Q]=d.useState({radius:0,width:0,height:0,depth:0}),W=(b=c==null?void 0:c.bias)!==null&&b!==void 0?b:-1e-4,Y=(T=c==null?void 0:c.normalBias)!==null&&T!==void 0?T:0,K=(R=c==null?void 0:c.size)!==null&&R!==void 0?R:1024,se=(F=c==null?void 0:c.offset)!==null&&F!==void 0?F:0,ce=c==="contact"||(c==null?void 0:c.type)==="contact",ge=c==="accumulative"||(c==null?void 0:c.type)==="accumulative",le=Kn({},typeof c=="object"?c:{}),xe=p?typeof p=="string"?{preset:p}:p:null,me=d.useCallback(Be=>{const{width:ke,height:Re,depth:ze,boundingSphere:Pe}=Be;Q({radius:Pe.radius,width:ke,height:Re,depth:ze}),t!=null&&t.onCentered&&t.onCentered(Be)},[]);return d.createElement(d.Fragment,null,d.createElement("ambientLight",{intensity:l/3}),d.createElement("spotLight",{penumbra:1,position:[P.main[0]*z,P.main[1]*z,P.main[2]*z],intensity:l*2,castShadow:!!c,"shadow-bias":W,"shadow-normalBias":Y,"shadow-mapSize":K}),d.createElement("pointLight",{position:[P.fill[0]*z,P.fill[1]*z,P.fill[2]*z],intensity:l}),d.createElement(mC,(0,w.Z)({fit:!!r,clip:!!r,margin:Number(r),observe:!0},g),d.createElement(mB,{radius:z,adjustCamera:r}),d.createElement(hb,(0,w.Z)({},t,{position:[0,se/2,0],onCentered:me}),i)),d.createElement("group",{position:[0,-j/2-se/2,0]},ce&&d.createElement(EC,(0,w.Z)({scale:z*4,far:z,blur:2},le)),ge&&d.createElement(bC,(0,w.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:z*4},le),d.createElement(MC,{amount:(G=le.amount)!==null&&G!==void 0?G:8,radius:(L=le.radius)!==null&&L!==void 0?L:z,ambient:(O=le.ambient)!==null&&O!==void 0?O:.5,intensity:(k=le.intensity)!==null&&k!==void 0?k:1,position:[P.main[0]*z,P.main[1]*z,P.main[2]*z],size:z*4,bias:-W,mapSize:K}))),p&&d.createElement(_C,xe))}const yB=i=>i===0?0:Math.pow(2,10*i-10);function vB(p){var h=p,{children:i,floor:t=.25,segments:r=20,receiveShadow:l}=h,c=_n(h,["children","floor","segments","receiveShadow"]);const g=d.useRef(null);return d.useLayoutEffect(()=>{let v=0;const _=r/r/2,b=g.current.attributes.position;for(let T=0;T<r+1;T++)for(let R=0;R<r+1;R++)b.setXYZ(v++,T/r-_+(T===0?-t:0),R/r-_,yB(T/r));b.needsUpdate=!0,g.current.computeVertexNormals()},[r,t]),d.createElement("group",c,d.createElement("mesh",{receiveShadow:l,rotation:[-Math.PI/2,0,Math.PI/2]},d.createElement("planeGeometry",{ref:g,args:[1,1,r,r]}),i))}const _B=d.forwardRef((v,g)=>{var _=v,{fog:i=!1,renderOrder:t,depthWrite:r=!1,colorStop:l=0,color:c="black",opacity:p=.5}=_,h=_n(_,["fog","renderOrder","depthWrite","colorStop","color","opacity"]);const b=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const R=T.getContext("2d"),F=R.createRadialGradient(T.width/2,T.height/2,0,T.width/2,T.height/2,T.width/2);return F.addColorStop(l,new s.Color(c).getStyle()),F.addColorStop(1,"rgba(0,0,0,0)"),R.fillStyle=F,R.fillRect(0,0,T.width,T.height),T},[c,l]);return d.createElement("mesh",(0,w.Z)({renderOrder:t,ref:g,"rotation-x":-Math.PI/2},h),d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,opacity:p,fog:i,depthWrite:r,side:s.DoubleSide},d.createElement("canvasTexture",{attach:"map",args:[b]})))});function xC(i=s.FrontSide){const t={value:new s.Matrix4};return Object.assign(new s.MeshNormalMaterial({side:i}),{viewMatrix:t,onBeforeCompile:r=>{r.uniforms.viewMatrix=t,r.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+r.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const EB=Fc({causticsTexture:null,causticsTextureB:null,color:new s.Color,lightProjMatrix:new s.Matrix4,lightViewMatrix:new s.Matrix4},`varying vec3 vWorldPosition;   
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture; 
  uniform sampler2D causticsTextureB; 
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics  
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5; 
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <encodings_fragment>
   }`),bB=Fc({cameraMatrixWorld:new s.Matrix4,cameraProjectionMatrixInv:new s.Matrix4,normalTexture:null,depthTexture:null,lightDir:new s.Vector3(0,1,0),lightPlaneNormal:new s.Vector3(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new s.Matrix4,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`  
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }                  
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),CC={depth:!0,minFilter:s.LinearFilter,magFilter:s.LinearFilter,type:s.UnsignedByteType},SC={minFilter:s.LinearMipmapLinearFilter,magFilter:s.LinearFilter,type:s.FloatType,generateMipmaps:!0},MB=d.forwardRef((G,F)=>{var L=G,{debug:i,children:t,frames:r=1,ior:l=1.1,color:c="white",causticsOnly:p=!1,backside:h=!1,backsideIOR:g=1.1,worldRadius:v=.3125,intensity:_=.05,resolution:b=2024,lightSource:T=[5,5,5]}=L,R=_n(L,["debug","children","frames","ior","color","causticsOnly","backside","backsideIOR","worldRadius","intensity","resolution","lightSource"]);(0,E.e)({CausticsProjectionMaterial:EB});const O=d.useRef(null),k=d.useRef(null),P=d.useRef(null),z=d.useRef(null),j=(0,E.z)(Ge=>Ge.gl),Q=Dx(i&&k,s.CameraHelper),W=Hl(b,b,CC),Y=Hl(b,b,CC),K=Hl(b,b,SC),se=Hl(b,b,SC),[ce]=d.useState(()=>xC()),[ge]=d.useState(()=>xC(s.BackSide)),[le]=d.useState(()=>new bB),[xe]=d.useState(()=>new $c(le));d.useLayoutEffect(()=>{O.current.updateWorldMatrix(!1,!0)});let me=0;const Be=new s.Vector3,ke=new s.Frustum,Re=new s.Matrix4,ze=new s.Plane,Pe=new s.Vector3,Ye=new s.Vector3,Ce=new s.Box3,Ee=new s.Vector3,_e=[],oe=[],Ae=[],Te=[],ve=new s.Vector3;for(let Ge=0;Ge<8;Ge++)_e.push(new s.Vector3),oe.push(new s.Vector3),Ae.push(new s.Vector3),Te.push(new s.Vector3);return(0,E.A)(()=>{if(r===1/0||me++<r){var Ge,bt;Array.isArray(T)?Pe.fromArray(T).normalize():Pe.copy(O.current.worldToLocal(T.current.getWorldPosition(Be)).normalize()),Ye.copy(Pe).multiplyScalar(-1),(Ge=P.current.parent)==null||Ge.matrixWorld.identity(),Ce.setFromObject(P.current,!0),_e[0].set(Ce.min.x,Ce.min.y,Ce.min.z),_e[1].set(Ce.min.x,Ce.min.y,Ce.max.z),_e[2].set(Ce.min.x,Ce.max.y,Ce.min.z),_e[3].set(Ce.min.x,Ce.max.y,Ce.max.z),_e[4].set(Ce.max.x,Ce.min.y,Ce.min.z),_e[5].set(Ce.max.x,Ce.min.y,Ce.max.z),_e[6].set(Ce.max.x,Ce.max.y,Ce.min.z),_e[7].set(Ce.max.x,Ce.max.y,Ce.max.z);for(let zt=0;zt<8;zt++)oe[zt].copy(_e[zt]);Ce.getCenter(Ee),_e.map(zt=>zt.sub(Ee));const mt=ze.set(Ye,0);_e.map((zt,Vn)=>mt.projectPoint(zt,Ae[Vn]));const gt=Ae.reduce((zt,Vn)=>zt.add(Vn),Be.set(0,0,0)).divideScalar(Ae.length),rt=Ae.map(zt=>zt.distanceTo(gt)).reduce((zt,Vn)=>Math.max(zt,Vn)),Wt=_e.map(zt=>zt.dot(Pe)).reduce((zt,Vn)=>Math.max(zt,Vn));k.current.position.copy(ve.copy(Pe).multiplyScalar(Wt).add(Ee)),k.current.lookAt(P.current.localToWorld(Ee));const kt=Re.lookAt(k.current.position,Ee,Be.set(0,1,0));k.current.left=-rt,k.current.right=rt,k.current.top=rt,k.current.bottom=-rt;const Bt=Be.set(0,rt,0).applyMatrix4(kt),qe=(k.current.position.y+Bt.y)/Pe.y;k.current.near=.1,k.current.far=qe,k.current.updateProjectionMatrix(),k.current.updateMatrixWorld();const Ne=oe.map((zt,Vn)=>zt.add(Te[Vn].copy(Pe).multiplyScalar(-zt.y/Pe.y))),It=Ne.reduce((zt,Vn)=>zt.add(Vn),Be.set(0,0,0)).divideScalar(Ne.length),mn=2*Ne.map(zt=>Math.hypot(zt.x-It.x,zt.z-It.z)).reduce((zt,Vn)=>Math.max(zt,Vn));z.current.scale.setScalar(mn),z.current.position.copy(It),i&&((bt=Q.current)==null||bt.update()),ge.viewMatrix.value=ce.viewMatrix.value=k.current.matrixWorldInverse;const Sn=ke.setFromProjectionMatrix(Re.multiplyMatrices(k.current.projectionMatrix,k.current.matrixWorldInverse)).planes[4];le.cameraMatrixWorld=k.current.matrixWorld,le.cameraProjectionMatrixInv=k.current.projectionMatrixInverse,le.lightDir=Ye,le.lightPlaneNormal=Sn.normal,le.lightPlaneConstant=Sn.constant,le.near=k.current.near,le.far=k.current.far,le.resolution=b,le.size=rt,le.intensity=_,le.worldRadius=v,P.current.visible=!0,j.setRenderTarget(W),j.clear(),P.current.overrideMaterial=ce,j.render(P.current,k.current),j.setRenderTarget(Y),j.clear(),h&&(P.current.overrideMaterial=ge,j.render(P.current,k.current)),P.current.overrideMaterial=null,le.ior=l,z.current.material.lightProjMatrix=k.current.projectionMatrix,z.current.material.lightViewMatrix=k.current.matrixWorldInverse,le.normalTexture=W.texture,le.depthTexture=W.depthTexture,j.setRenderTarget(K),j.clear(),xe.render(j),le.ior=g,le.normalTexture=Y.texture,le.depthTexture=Y.depthTexture,j.setRenderTarget(se),j.clear(),h&&xe.render(j),j.setRenderTarget(null),p&&(P.current.visible=!1)}}),d.useImperativeHandle(F,()=>O.current,[]),d.createElement("group",(0,w.Z)({ref:O},R),d.createElement("scene",{ref:P},d.createElement("orthographicCamera",{ref:k,up:[0,1,0]}),t),d.createElement("mesh",{renderOrder:2,ref:z,"rotation-x":-Math.PI/2},d.createElement("planeGeometry",null),d.createElement("causticsProjectionMaterial",{transparent:!0,color:c,causticsTexture:K.texture,causticsTextureB:se.texture,blending:s.CustomBlending,blendSrc:s.OneFactor,blendDst:s.SrcAlphaFactor,depthWrite:!1}),i&&d.createElement(yd,null,d.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))});var xB=A(25108);(0,E.e)({MeshReflectorMaterial:lC});const CB=d.forwardRef((k,O)=>{var P=k,{mixBlur:i=0,mixStrength:t=.5,resolution:r=256,blur:l=[0,0],args:c=[1,1],minDepthThreshold:p=.9,maxDepthThreshold:h=1,depthScale:g=0,depthToBlurRatioBias:v=.25,mirror:_=0,children:b,debug:T=0,distortion:R=1,mixContrast:F=1,distortionMap:G}=P,L=_n(P,["mixBlur","mixStrength","resolution","blur","args","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","children","debug","distortion","mixContrast","distortionMap"]);d.useEffect(()=>{xB.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const z=(0,E.z)(({gl:Ae})=>Ae),j=(0,E.z)(({camera:Ae})=>Ae),Q=(0,E.z)(({scene:Ae})=>Ae);l=Array.isArray(l)?l:[l,l];const W=l[0]+l[1]>0,Y=d.useRef(null),[K]=d.useState(()=>new s.Plane),[se]=d.useState(()=>new s.Vector3),[ce]=d.useState(()=>new s.Vector3),[ge]=d.useState(()=>new s.Vector3),[le]=d.useState(()=>new s.Matrix4),[xe]=d.useState(()=>new s.Vector3(0,0,-1)),[me]=d.useState(()=>new s.Vector4),[Be]=d.useState(()=>new s.Vector3),[ke]=d.useState(()=>new s.Vector3),[Re]=d.useState(()=>new s.Vector4),[ze]=d.useState(()=>new s.Matrix4),[Pe]=d.useState(()=>new s.PerspectiveCamera),Ye=d.useCallback(()=>{if(ce.setFromMatrixPosition(Y.current.matrixWorld),ge.setFromMatrixPosition(j.matrixWorld),le.extractRotation(Y.current.matrixWorld),se.set(0,0,1),se.applyMatrix4(le),Be.subVectors(ce,ge),Be.dot(se)>0)return;Be.reflect(se).negate(),Be.add(ce),le.extractRotation(j.matrixWorld),xe.set(0,0,-1),xe.applyMatrix4(le),xe.add(ge),ke.subVectors(ce,xe),ke.reflect(se).negate(),ke.add(ce),Pe.position.copy(Be),Pe.up.set(0,1,0),Pe.up.applyMatrix4(le),Pe.up.reflect(se),Pe.lookAt(ke),Pe.far=j.far,Pe.updateMatrixWorld(),Pe.projectionMatrix.copy(j.projectionMatrix),ze.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ze.multiply(Pe.projectionMatrix),ze.multiply(Pe.matrixWorldInverse),ze.multiply(Y.current.matrixWorld),K.setFromNormalAndCoplanarPoint(se,ce),K.applyMatrix4(Pe.matrixWorldInverse),me.set(K.normal.x,K.normal.y,K.normal.z,K.constant);const Ae=Pe.projectionMatrix;Re.x=(Math.sign(me.x)+Ae.elements[8])/Ae.elements[0],Re.y=(Math.sign(me.y)+Ae.elements[9])/Ae.elements[5],Re.z=-1,Re.w=(1+Ae.elements[10])/Ae.elements[14],me.multiplyScalar(2/me.dot(Re)),Ae.elements[2]=me.x,Ae.elements[6]=me.y,Ae.elements[10]=me.z+1,Ae.elements[14]=me.w},[]),[Ce,Ee,_e,oe]=d.useMemo(()=>{const Ae={type:s.HalfFloatType,minFilter:s.LinearFilter,magFilter:s.LinearFilter},Te=new s.WebGLRenderTarget(r,r,Ae);Te.depthBuffer=!0,Te.depthTexture=new s.DepthTexture(r,r),Te.depthTexture.format=s.DepthFormat,Te.depthTexture.type=s.UnsignedShortType;const ve=new s.WebGLRenderTarget(r,r,Ae),Ge=new aC({gl:z,resolution:r,width:l[0],height:l[1],minDepthThreshold:p,maxDepthThreshold:h,depthScale:g,depthToBlurRatioBias:v}),bt={mirror:_,textureMatrix:ze,mixBlur:i,tDiffuse:Te.texture,tDepth:Te.depthTexture,tDiffuseBlur:ve.texture,hasBlur:W,mixStrength:t,minDepthThreshold:p,maxDepthThreshold:h,depthScale:g,depthToBlurRatioBias:v,transparent:!0,debug:T,distortion:R,distortionMap:G,mixContrast:F,"defines-USE_BLUR":W?"":void 0,"defines-USE_DEPTH":g>0?"":void 0,"defines-USE_DISTORTION":G?"":void 0};return[Te,ve,Ge,bt]},[z,l,ze,r,_,W,i,t,p,h,g,v,T,R,G,F]);return(0,E.A)(()=>{if(!(Y!=null&&Y.current))return;Y.current.visible=!1;const Ae=z.xr.enabled,Te=z.shadowMap.autoUpdate;Ye(),z.xr.enabled=!1,z.shadowMap.autoUpdate=!1,z.setRenderTarget(Ce),z.state.buffers.depth.setMask(!0),z.autoClear||z.clear(),z.render(Q,Pe),W&&_e.render(z,Ce,Ee),z.xr.enabled=Ae,z.shadowMap.autoUpdate=Te,Y.current.visible=!0,z.setRenderTarget(null)}),d.createElement("mesh",(0,w.Z)({ref:zr([Y,O])},L),d.createElement("planeGeometry",{args:c}),b?b("meshReflectorMaterial",oe):d.createElement("meshReflectorMaterial",oe))});class SB extends s.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new s.Vector3(0,0,0)},lightColor:{value:new s.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new s.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}var wB=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const TB=i=>i==null?void 0:i.isSpotLight;function BB({opacity:i=1,radiusTop:t,radiusBottom:r,depthBuffer:l,color:c="white",distance:p=5,angle:h=.15,attenuation:g=5,anglePower:v=5}){const _=d.useRef(null),b=(0,E.z)(O=>O.size),T=(0,E.z)(O=>O.camera),R=(0,E.z)(O=>O.viewport.dpr),[F]=d.useState(()=>new SB),[G]=d.useState(()=>new s.Vector3);t=t===void 0?.1:t,r=r===void 0?h*7:r,(0,E.A)(()=>{F.uniforms.spotPosition.value.copy(_.current.getWorldPosition(G)),_.current.lookAt(_.current.parent.target.getWorldPosition(G))});const L=d.useMemo(()=>{const O=new s.CylinderGeometry(t,r,p,128,64,!0);return O.applyMatrix4(new s.Matrix4().makeTranslation(0,-p/2,0)),O.applyMatrix4(new s.Matrix4().makeRotationX(-Math.PI/2)),O},[p,t,r]);return d.createElement(d.Fragment,null,d.createElement("mesh",{ref:_,geometry:L,raycast:()=>null},d.createElement("primitive",{object:F,attach:"material","uniforms-opacity-value":i,"uniforms-lightColor-value":c,"uniforms-attenuation-value":g,"uniforms-anglePower-value":v,"uniforms-depth-value":l,"uniforms-cameraNear-value":T.near,"uniforms-cameraFar-value":T.far,"uniforms-resolution-value":l?[b.width*R,b.height*R]:[0,0]})))}function wC(i,t,r,l,c){const[[p,h]]=d.useState(()=>[new s.Vector3,new s.Vector3]);d.useLayoutEffect(()=>{if(TB(i.current))i.current.shadow.mapSize.set(r,l),i.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[i,r,l]),(0,E.A)(()=>{if(!i.current)return;const g=i.current.position,v=i.current.target.position;h.copy(v).sub(g);var _=h.length();h.normalize().multiplyScalar(_*c),p.copy(g).add(h),t.current.position.copy(p),t.current.lookAt(i.current.target.position)})}function RB(_){var b=_,{distance:i=.4,alphaTest:t=.5,map:r,shader:l=wB,width:c=512,height:p=512,scale:h=1,children:g}=b,v=_n(b,["distance","alphaTest","map","shader","width","height","scale","children"]);const T=d.useRef(null),R=v.spotlightRef,F=v.debug;wC(R,T,c,p,i);const G=d.useMemo(()=>new s.WebGLRenderTarget(c,p,{format:s.RGBAFormat,encoding:s.LinearEncoding,stencilBuffer:!1}),[c,p]),L=d.useRef({uShadowMap:{value:r},uTime:{value:0}});d.useEffect(()=>void(L.current.uShadowMap.value=r),[r]);const O=d.useMemo(()=>new $c(new s.ShaderMaterial({uniforms:L.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:l})),[l]);return d.useEffect(()=>()=>{O.material.dispose(),O.dispose()},[O]),d.useEffect(()=>()=>G.dispose(),[G]),(0,E.A)(({gl:k},P)=>{L.current.uTime.value+=P,k.setRenderTarget(G),O.render(k),k.setRenderTarget(null)}),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:T,scale:h,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:s.DoubleSide,alphaTest:t,alphaMap:G.texture,"alphaMap-wrapS":s.RepeatWrapping,"alphaMap-wrapT":s.RepeatWrapping,opacity:F?1:0},g)))}function IB(v){var _=v,{distance:i=.4,alphaTest:t=.5,map:r,width:l=512,height:c=512,scale:p,children:h}=_,g=_n(_,["distance","alphaTest","map","width","height","scale","children"]);const b=d.useRef(null),T=g.spotlightRef,R=g.debug;return wC(T,b,l,c,i),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:b,scale:p,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:s.DoubleSide,alphaTest:t,alphaMap:r,"alphaMap-wrapS":s.RepeatWrapping,"alphaMap-wrapT":s.RepeatWrapping,opacity:R?1:0},h)))}function FB(i){return i.shader?d.createElement(RB,i):d.createElement(IB,i)}const OB=d.forwardRef((G,F)=>{var L=G,{opacity:i=1,radiusTop:t,radiusBottom:r,depthBuffer:l,color:c="white",distance:p=5,angle:h=.15,attenuation:g=5,anglePower:v=5,volumetric:_=!0,debug:b=!1,children:T}=L,R=_n(L,["opacity","radiusTop","radiusBottom","depthBuffer","color","distance","angle","attenuation","anglePower","volumetric","debug","children"]);const O=d.useRef(null);return d.createElement("group",null,b&&O.current&&d.createElement("spotLightHelper",{args:[O.current]}),d.createElement("spotLight",(0,w.Z)({ref:zr([F,O]),angle:h,color:c,distance:p,castShadow:!0},R),_&&d.createElement(BB,{debug:b,opacity:i,radiusTop:t,radiusBottom:r,depthBuffer:l,color:c,distance:p,angle:h,attenuation:g,anglePower:v})),T&&d.cloneElement(T,{spotlightRef:O,debug:b}))}),DB=d.forwardRef((T,b)=>{var R=T,{args:i,map:t,toneMapped:r=!1,color:l="white",form:c="rect",intensity:p=1,scale:h=1,target:g,children:v}=R,_=_n(R,["args","map","toneMapped","color","form","intensity","scale","target","children"]);const F=d.useRef(null);return d.useLayoutEffect(()=>{!v&&!_.material&&((0,E.j)(F.current.material,{color:l}),F.current.material.color.multiplyScalar(p))},[l,p,v,_.material]),d.useLayoutEffect(()=>{g&&F.current.lookAt(Array.isArray(g)?new s.Vector3(...g):g)},[g]),h=Array.isArray(h)&&h.length===2?[h[0],h[1],1]:h,d.createElement("mesh",(0,w.Z)({ref:zr([F,b]),scale:h},_),c==="circle"?d.createElement("ringGeometry",{args:[0,1,64]}):c==="ring"?d.createElement("ringGeometry",{args:[.5,1,64]}):c==="rect"?d.createElement("planeGeometry",null):d.createElement(c,{args:i}),v||(_.material?null:d.createElement("meshBasicMaterial",{toneMapped:r,map:t,side:s.DoubleSide})))});var PB=Object.defineProperty,LB=(i,t,r)=>t in i?PB(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,TC=(i,t,r)=>(LB(i,typeof t!="symbol"?t+"":t,r),r);const W2={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new s.Vector3},up:{value:new s.Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <encodings_fragment>

      }
    `},BC=new s.ShaderMaterial({name:"SkyShader",fragmentShader:W2.fragmentShader,vertexShader:W2.vertexShader,uniforms:s.UniformsUtils.clone(W2.uniforms),side:s.BackSide,depthWrite:!1});class bb extends s.Mesh{constructor(){super(new s.BoxGeometry(1,1,1),BC)}}TC(bb,"SkyShader",W2),TC(bb,"material",BC);function RC(i,t,r=new s.Vector3){const l=Math.PI*(i-.5),c=2*Math.PI*(t-.5);return r.x=Math.cos(c),r.y=Math.sin(l),r.z=Math.sin(c),r}const kB=d.forwardRef((b,_)=>{var T=b,{inclination:i=.6,azimuth:t=.1,distance:r=1e3,mieCoefficient:l=.005,mieDirectionalG:c=.8,rayleigh:p=.5,turbidity:h=10,sunPosition:g=RC(i,t)}=T,v=_n(T,["inclination","azimuth","distance","mieCoefficient","mieDirectionalG","rayleigh","turbidity","sunPosition"]);const R=d.useMemo(()=>new s.Vector3().setScalar(r),[r]),[F]=d.useState(()=>new bb);return d.createElement("primitive",(0,w.Z)({object:F,ref:_,"material-uniforms-mieCoefficient-value":l,"material-uniforms-mieDirectionalG-value":c,"material-uniforms-rayleigh-value":p,"material-uniforms-sunPosition-value":g,"material-uniforms-turbidity-value":h,scale:R},v))});class zB extends s.ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const GB=i=>new s.Vector3().setFromSpherical(new s.Spherical(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),NB=d.forwardRef(({radius:i=100,depth:t=50,count:r=5e3,saturation:l=0,factor:c=4,fade:p=!1,speed:h=1},g)=>{const v=d.useRef(),[_,b,T]=d.useMemo(()=>{const F=[],G=[],L=Array.from({length:r},()=>(.5+.5*Math.random())*c),O=new s.Color;let k=i+t;const P=t/r;for(let z=0;z<r;z++)k-=P*Math.random(),F.push(...GB(k).toArray()),O.setHSL(z/r,l,.9),G.push(O.r,O.g,O.b);return[new Float32Array(F),new Float32Array(G),new Float32Array(L)]},[r,t,c,i,l]);(0,E.A)(F=>v.current&&(v.current.uniforms.time.value=F.clock.getElapsedTime()*h));const[R]=d.useState(()=>new zB);return d.createElement("points",{ref:g},d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[_,3]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[b,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[T,1]})),d.createElement("primitive",{ref:v,object:R,attach:"material",blending:s.AdditiveBlending,"uniforms-fade-value":p,depthWrite:!1,transparent:!0,vertexColors:!0}))}),UB="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png";function jB(_){var b=_,{opacity:i=.5,speed:t=.4,width:r=10,depth:l=1.5,segments:c=20,texture:p=UB,color:h="#ffffff",depthTest:g=!0}=b,v=_n(b,["opacity","speed","width","depth","segments","texture","color","depthTest"]);const T=d.useRef(),R=Ad(p),F=d.useMemo(()=>[...new Array(c)].map((G,L)=>({x:r/2-Math.random()*r,y:r/2-Math.random()*r,scale:.4+Math.sin((L+1)/c*Math.PI)*((.2+Math.random())*10),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*t})),[r,c,t]);return(0,E.A)(G=>{var L;return(L=T.current)==null?void 0:L.children.forEach((O,k)=>{O.children[0].rotation.z+=F[k].rotation,O.children[0].scale.setScalar(F[k].scale+(1+Math.sin(G.clock.getElapsedTime()/10))/2*k/10)})}),d.createElement("group",v,d.createElement("group",{position:[0,0,c/2*l],ref:T},F.map(({x:G,y:L,scale:O,density:k},P)=>d.createElement(B1,{key:P,position:[G,L,-P*l]},d.createElement(fC,{scale:O,rotation:[0,0,0]},d.createElement("meshStandardMaterial",{map:R,transparent:!0,opacity:O/6*k*i,depthTest:g,color:h}))))))}const HB=Fc({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }`),IC=i=>i&&i.constructor===Float32Array,WB=i=>[i.r,i.g,i.b],FC=i=>i instanceof s.Vector2||i instanceof s.Vector3||i instanceof s.Vector4,OC=i=>Array.isArray(i)?i:FC(i)?i.toArray():[i,i,i];function NA(i,t,r){return d.useMemo(()=>{if(t!==void 0){if(IC(t))return t;if(t instanceof s.Color){const l=Array.from({length:i*3},()=>WB(t)).flat();return Float32Array.from(l)}else if(FC(t)||Array.isArray(t)){const l=Array.from({length:i*3},()=>OC(t)).flat();return Float32Array.from(l)}return Float32Array.from({length:i},()=>t)}return Float32Array.from({length:i},r)},[t])}const VB=d.forwardRef((b,_)=>{var T=b,{noise:i=1,count:t=100,speed:r=1,opacity:l=1,scale:c=1,size:p,color:h,children:g}=T,v=_n(T,["noise","count","speed","opacity","scale","size","color","children"]);d.useMemo(()=>(0,E.e)({SparklesImplMaterial:HB}),[]);const R=d.useRef(null),F=(0,E.z)(j=>j.viewport.dpr),G=d.useMemo(()=>Float32Array.from(Array.from({length:t},()=>OC(c).map(s.MathUtils.randFloatSpread)).flat()),[t,c]),L=NA(t,p,Math.random),O=NA(t,l),k=NA(t,r),P=NA(t*3,i),z=NA(h===void 0?t*3:t,IC(h)?h:new s.Color(h),()=>1);return(0,E.A)(j=>{R.current&&R.current.material&&(R.current.material.time=j.clock.elapsedTime)}),d.useImperativeHandle(_,()=>R.current,[]),d.createElement("points",(0,w.Z)({key:`particle-${t}-${JSON.stringify(c)}`},v,{ref:R}),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[G,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[L,1]}),d.createElement("bufferAttribute",{attach:"attributes-opacity",args:[O,1]}),d.createElement("bufferAttribute",{attach:"attributes-speed",args:[k,1]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[z,3]}),d.createElement("bufferAttribute",{attach:"attributes-noise",args:[P,3]})),g||d.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:F,depthWrite:!1}))});function QB(i){switch(i){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const KB="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",XB="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function YB(i=0,t=1024,r){const l=(0,cc.Rq)(()=>fetch(KB).then(b=>b.json()),["matcapList"]),c=l[0],p=d.useMemo(()=>Object.keys(l).length,[]),g=`${d.useMemo(()=>typeof i=="string"?i:typeof i=="number"?l[i]:null,[i])||c}${QB(t)}.png`,v=`${XB}/${t}/${g}`;return[Ad(v,r),v,p]}const JB="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",qB="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function ZB(i=0,t={},r){const{repeat:l=[1,1],anisotropy:c=1,offset:p=[0,0]}=t,h=(0,cc.Rq)(()=>fetch(qB).then(R=>R.json()),["normalsList"]),g=d.useMemo(()=>Object.keys(h).length,[]),v=h[0],_=h[i]||v,b=`${JB}/normals/${_}`,T=Ad(b,r);return d.useLayoutEffect(()=>{T&&(T.wrapS=T.wrapT=s.RepeatWrapping,T.repeat=new s.Vector2(l[0],l[1]),T.offset=new s.Vector2(p[0],p[1]),T.anisotropy=c)},[T,c,l,p]),[T,b,g]}const Wf={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new s.Color("#ff0000"),backfaceStroke:new s.Color("#0000ff"),fill:new s.Color("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},$B=Fc(Wf.uniforms,Wf.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Wf.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function eR(i,t){i.onBeforeCompile=r=>{r.uniforms=Kn(Kn({},r.uniforms),t),r.vertexShader=r.vertexShader.replace("void main() {",`
		  ${Wf.vertex}
		  void main() {
			initWireframe();
		`),r.fragmentShader=r.fragmentShader.replace("void main() {",`
		  ${Wf.fragment}
		  void main() {
		`),r.fragmentShader=r.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},i.side=s.DoubleSide,i.transparent=!0}function tR(i,t){d.useEffect(()=>{var r;return void(i.fillOpacity.value=(r=t.fillOpacity)!==null&&r!==void 0?r:i.fillOpacity.value)},[t.fillOpacity]),d.useEffect(()=>{var r;return void(i.fillMix.value=(r=t.fillMix)!==null&&r!==void 0?r:i.fillMix.value)},[t.fillMix]),d.useEffect(()=>{var r;return void(i.strokeOpacity.value=(r=t.strokeOpacity)!==null&&r!==void 0?r:i.strokeOpacity.value)},[t.strokeOpacity]),d.useEffect(()=>{var r;return void(i.thickness.value=(r=t.thickness)!==null&&r!==void 0?r:i.thickness.value)},[t.thickness]),d.useEffect(()=>void(i.colorBackfaces.value=!!t.colorBackfaces),[t.colorBackfaces]),d.useEffect(()=>void(i.dash.value=!!t.dash),[t.dash]),d.useEffect(()=>void(i.dashInvert.value=!!t.dashInvert),[t.dashInvert]),d.useEffect(()=>{var r;return void(i.dashRepeats.value=(r=t.dashRepeats)!==null&&r!==void 0?r:i.dashRepeats.value)},[t.dashRepeats]),d.useEffect(()=>{var r;return void(i.dashLength.value=(r=t.dashLength)!==null&&r!==void 0?r:i.dashLength.value)},[t.dashLength]),d.useEffect(()=>void(i.squeeze.value=!!t.squeeze),[t.squeeze]),d.useEffect(()=>{var r;return void(i.squeezeMin.value=(r=t.squeezeMin)!==null&&r!==void 0?r:i.squeezeMin.value)},[t.squeezeMin]),d.useEffect(()=>{var r;return void(i.squeezeMax.value=(r=t.squeezeMax)!==null&&r!==void 0?r:i.squeezeMax.value)},[t.squeezeMax]),d.useEffect(()=>void(i.stroke.value=t.stroke?new s.Color(t.stroke):i.stroke.value),[t.stroke]),d.useEffect(()=>void(i.fill.value=t.fill?new s.Color(t.fill):i.fill.value),[t.fill]),d.useEffect(()=>void(i.backfaceStroke.value=t.backfaceStroke?new s.Color(t.backfaceStroke):i.backfaceStroke.value),[t.backfaceStroke])}var nR=A(25108);E.e({MeshWireframeMaterial:$B});function rR(i){return!!(i!=null&&i.geometry)}function iR(i){return!!(i!=null&&i.isBufferGeometry)}function oR(i){return!!(i!=null&&i.current)}function DC(i){return(i==null?void 0:i.current)!==void 0}function PC(i){return i.type==="WireframeGeometry"}function sR(){const i={};for(const t in Wf.uniforms)i[t]={value:Wf.uniforms[t]};return i}function aR(i,t){const l=i.getAttribute("position").count,c=[];for(let p=0;p<l;p++){const h=p%2===0,g=t?1:0;h?c.push(0,0,1,0,1,0,1,0,g):c.push(0,1,0,0,0,1,1,0,g)}return new s.BufferAttribute(Float32Array.from(c),3)}function LC(i){const t=oR(i)?i.current:i;if(iR(t))return t;{if(PC(t))throw new Error("Wireframe: WireframeGeometry is not supported.");const r=t.parent;if(rR(r)){if(PC(r.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return r.geometry}}}function kC(i,t){if(i.index){nR.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const l=i.toNonIndexed();i.copy(l),i.setIndex(null)}const r=aR(i,t);i.setAttribute("barycentric",r)}function lR(l){var c=l,{geometry:i,simplify:t=!1}=c,r=_n(c,["geometry","simplify"]);const[p,h]=d.useState(null);d.useLayoutEffect(()=>{const v=LC(i);if(!v)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");kC(v,t),DC(i)&&h(v)},[t,i]);const g=DC(i)?p:i;return d.createElement(d.Fragment,null,g&&d.createElement("mesh",{geometry:g},d.createElement("meshWireframeMaterial",(0,w.Z)({attach:"material",transparent:!0,side:s.DoubleSide,polygonOffset:!0,polygonOffsetFactor:-4},r,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function cR(r){var l=r,{simplify:i=!1}=l,t=_n(l,["simplify"]);const c=d.useRef(null),p=d.useMemo(()=>sR(),[Wf.uniforms]);return tR(p,t),d.useLayoutEffect(()=>{const h=LC(c);if(!h)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const g=h.clone();return kC(h,i),()=>{h.copy(g),g.dispose()}},[i]),d.useLayoutEffect(()=>{const h=c.current.parent,g=h.material.clone();return eR(h.material,p),()=>{h.material.dispose(),h.material=g}},[]),d.createElement("object3D",{ref:c})}function pR(r){var l=r,{geometry:i}=l,t=_n(l,["geometry"]);return i?d.createElement(lR,(0,w.Z)({geometry:i},t)):d.createElement(cR,t)}const zC=new s.Matrix4,Mb=new s.Ray,GC=new s.Sphere,uR=new s.Vector3;class NC extends s.Group{constructor(){super(),this.size=0,this.color=new s.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){var l,c;const p=this.instance.current;if(!p||!p.geometry)return;const h=p.userData.instances.indexOf(this.instanceKey);if(h===-1||h>p.geometry.drawRange.count)return;const g=(l=(c=t.params.Points)==null?void 0:c.threshold)!==null&&l!==void 0?l:1;if(GC.set(this.getWorldPosition(uR),g),t.ray.intersectsSphere(GC)===!1)return;zC.copy(p.matrixWorld).invert(),Mb.copy(t.ray).applyMatrix4(zC);const v=g/((this.scale.x+this.scale.y+this.scale.z)/3),_=v*v,b=Mb.distanceSqToPoint(this.position);if(b<_){const T=new s.Vector3;Mb.closestPointToPoint(this.position,T),T.applyMatrix4(this.matrixWorld);const R=t.ray.origin.distanceTo(T);if(R<t.near||R>t.far)return;r.push({distance:R,distanceToRay:Math.sqrt(b),point:T,index:h,face:null,object:this})}}}let mm,UA;const UC=d.createContext(null),jC=new s.Matrix4,HC=new s.Vector3,dR=d.forwardRef((p,c)=>{var h=p,{children:i,range:t,limit:r=1e3}=h,l=_n(h,["children","range","limit"]);const g=d.useRef(null),[v,_]=d.useState([]),[[b,T,R]]=d.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);d.useEffect(()=>{g.current.geometry.attributes.position.needsUpdate=!0}),(0,E.A)(()=>{for(g.current.updateMatrix(),g.current.updateMatrixWorld(),jC.copy(g.current.matrixWorld).invert(),g.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,v.length),mm=0;mm<v.length;mm++)UA=v[mm].current,UA.getWorldPosition(HC).applyMatrix4(jC),HC.toArray(b,mm*3),g.current.geometry.attributes.position.needsUpdate=!0,UA.matrixWorldNeedsUpdate=!0,UA.color.toArray(T,mm*3),g.current.geometry.attributes.color.needsUpdate=!0,R.set([UA.size],mm),g.current.geometry.attributes.size.needsUpdate=!0});const F=d.useMemo(()=>({getParent:()=>g,subscribe:G=>(_(L=>[...L,G]),()=>_(L=>L.filter(O=>O.current!==G.current)))}),[]);return d.createElement("points",(0,w.Z)({userData:{instances:v},matrixAutoUpdate:!1,ref:zr([c,g]),raycast:()=>null},l),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:b.length/3,array:b,itemSize:3,usage:s.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-color",count:T.length/3,array:T,itemSize:3,usage:s.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-size",count:R.length,array:R,itemSize:1,usage:s.DynamicDrawUsage})),d.createElement(UC.Provider,{value:F},i))}),hR=d.forwardRef((l,r)=>{var c=l,{children:i}=c,t=_n(c,["children"]);d.useMemo(()=>(0,E.e)({PositionPoint:NC}),[]);const p=d.useRef(),{subscribe:h,getParent:g}=d.useContext(UC);return d.useLayoutEffect(()=>h(p),[]),d.createElement("positionPoint",(0,w.Z)({instance:g(),instanceKey:p,ref:zr([r,p])},t),i)}),WC=d.forwardRef((g,h)=>{var v=g,{children:i,positions:t,colors:r,sizes:l,stride:c=3}=v,p=_n(v,["children","positions","colors","sizes","stride"]);const _=d.useRef(null);return(0,E.A)(()=>{const b=_.current.geometry.attributes;b.position.needsUpdate=!0,r&&(b.color.needsUpdate=!0),l&&(b.size.needsUpdate=!0)}),d.createElement("points",(0,w.Z)({ref:zr([h,_])},p),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:t.length/c,array:t,itemSize:c,usage:s.DynamicDrawUsage}),r&&d.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/c,array:r,itemSize:3,usage:s.DynamicDrawUsage}),l&&d.createElement("bufferAttribute",{attach:"attributes-size",count:l.length/c,array:l,itemSize:1,usage:s.DynamicDrawUsage})),i)}),fR=d.forwardRef((i,t)=>i.positions instanceof Float32Array?d.createElement(WC,(0,w.Z)({},i,{ref:t})):d.createElement(dR,(0,w.Z)({},i,{ref:t})));var gR=A(45697),jA=A.n(gR);function VC(i){return QC(i.children,i.components)}VC.propTypes={children:jA().func.isRequired,components:jA().arrayOf(jA().oneOfType([jA().element,jA().func])).isRequired};function QC(i,t,r){if(r=r||[],!t[0])return i(r);function l(c){return QC(i,t.slice(1),r.concat([c]))}return typeof t[0]=="function"?t[0]({results:r,render:l}):(0,d.cloneElement)(t[0],{children:l})}const KC=new s.Matrix4,XC=new s.Matrix4,V2=[],HA=new s.Mesh;class mR extends s.Group{constructor(){super(),this.color=new s.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){const l=this.instance.current;if(!l||!l.geometry||!l.material)return;HA.geometry=l.geometry;const c=l.matrixWorld,p=l.userData.instances.indexOf(this.instanceKey);if(!(p===-1||p>l.count)){l.getMatrixAt(p,KC),XC.multiplyMatrices(c,KC),HA.matrixWorld=XC,l.material instanceof s.Material?HA.material.side=l.material.side:HA.material.side=l.material[0].side,HA.raycast(t,V2);for(let h=0,g=V2.length;h<g;h++){const v=V2[h];v.instanceId=p,v.object=this,r.push(v)}V2.length=0}}}const YC=d.createContext(null),JC=new s.Matrix4,qC=new s.Matrix4,AR=new s.Matrix4,ZC=new s.Vector3,$C=new s.Quaternion,eS=new s.Vector3,tS=d.forwardRef((c,l)=>{var p=c,{context:i,children:t}=p,r=_n(p,["context","children"]);d.useMemo(()=>(0,E.e)({PositionMesh:mR}),[]);const h=d.useRef(),{subscribe:g,getParent:v}=d.useContext(i||YC);return d.useLayoutEffect(()=>g(h),[]),d.createElement("positionMesh",(0,w.Z)({instance:v(),instanceKey:h,ref:zr([l,h])},r),t)}),nS=d.forwardRef((h,p)=>{var g=h,{children:i,range:t,limit:r=1e3,frames:l=1/0}=g,c=_n(g,["children","range","limit","frames"]);const[{context:v,instance:_}]=d.useState(()=>{const P=d.createContext(null);return{context:P,instance:d.forwardRef((z,j)=>d.createElement(tS,(0,w.Z)({context:P},z,{ref:j})))}}),b=d.useRef(null),[T,R]=d.useState([]),[[F,G]]=d.useState(()=>{const P=new Float32Array(r*16);for(let z=0;z<r;z++)AR.identity().toArray(P,z*16);return[P,new Float32Array([...new Array(r*3)].map(()=>1))]});d.useEffect(()=>{b.current.instanceMatrix.needsUpdate=!0});let L=0,O=0;(0,E.A)(()=>{if(l===1/0||L<l){b.current.updateMatrix(),b.current.updateMatrixWorld(),JC.copy(b.current.matrixWorld).invert(),O=Math.min(r,t!==void 0?t:r,T.length),b.current.count=O,b.current.instanceMatrix.updateRange.count=O*16,b.current.instanceColor.updateRange.count=O*3;for(let P=0;P<T.length;P++){const z=T[P].current;z.matrixWorld.decompose(ZC,$C,eS),qC.compose(ZC,$C,eS).premultiply(JC),qC.toArray(F,P*16),b.current.instanceMatrix.needsUpdate=!0,z.color.toArray(G,P*3),b.current.instanceColor.needsUpdate=!0}L++}});const k=d.useMemo(()=>({getParent:()=>b,subscribe:P=>(R(z=>[...z,P]),()=>R(z=>z.filter(j=>j.current!==P.current)))}),[]);return d.createElement("instancedMesh",(0,w.Z)({userData:{instances:T},matrixAutoUpdate:!1,ref:zr([p,b]),args:[null,null,0],raycast:()=>null},c),d.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:F.length/16,array:F,itemSize:16,usage:s.DynamicDrawUsage}),d.createElement("instancedBufferAttribute",{attach:"instanceColor",count:G.length/3,array:G,itemSize:3,usage:s.DynamicDrawUsage}),typeof i=="function"?d.createElement(v.Provider,{value:k},i(_)):d.createElement(YC.Provider,{value:k},i))}),yR=d.forwardRef(function(p,c){var h=p,{meshes:t,children:r}=h,l=_n(h,["meshes","children"]);const g=Array.isArray(t);if(!g)for(const v of Object.keys(t))t[v].isMesh||delete t[v];return d.createElement("group",{ref:c},d.createElement(VC,{components:(g?t:Object.values(t)).map(({geometry:v,material:_})=>d.createElement(nS,(0,w.Z)({key:v.uuid,geometry:v,material:_},l)))},v=>g?r(...v):r(Object.keys(t).filter(_=>t[_].isMesh).reduce((_,b,T)=>Xo(Kn({},_),{[b]:v[T]}),{}))))}),rS=d.createContext(null),vR=d.forwardRef((i,t)=>{d.useMemo(()=>(0,E.e)({SegmentObject:iS}),[]);const L=i,{limit:r=1e3,lineWidth:l=1,children:c}=L,p=_n(L,["limit","lineWidth","children"]),[h,g]=d.useState([]),[v]=d.useState(()=>new zy),[_]=d.useState(()=>new Um),[b]=d.useState(()=>new Nm),[T]=d.useState(()=>new s.Vector2(512,512)),[R]=d.useState(()=>Array(r*6).fill(0)),[F]=d.useState(()=>Array(r*6).fill(0)),G=d.useMemo(()=>({subscribe:O=>(g(k=>[...k,O]),()=>g(k=>k.filter(P=>P.current!==O.current)))}),[]);return(0,E.A)(()=>{for(let k=0;k<r;k++){var O;const P=(O=h[k])==null?void 0:O.current;P&&(R[k*6+0]=P.start.x,R[k*6+1]=P.start.y,R[k*6+2]=P.start.z,R[k*6+3]=P.end.x,R[k*6+4]=P.end.y,R[k*6+5]=P.end.z,F[k*6+0]=P.color.r,F[k*6+1]=P.color.g,F[k*6+2]=P.color.b,F[k*6+3]=P.color.r,F[k*6+4]=P.color.g,F[k*6+5]=P.color.b)}b.setColors(F),b.setPositions(R),v.computeLineDistances()}),d.createElement("primitive",{object:v,ref:t},d.createElement("primitive",{object:b,attach:"geometry"}),d.createElement("primitive",(0,w.Z)({object:_,attach:"material",vertexColors:!0,resolution:T,linewidth:l},p)),d.createElement(rS.Provider,{value:G},c))});class iS{constructor(){this.color=new s.Color("white"),this.start=new s.Vector3(0,0,0),this.end=new s.Vector3(0,0,0)}}const oS=i=>i instanceof s.Vector3?i:new s.Vector3(...typeof i=="number"?[i,i,i]:i),_R=d.forwardRef(({color:i,start:t,end:r},l)=>{const c=d.useContext(rS);if(!c)throw"Segment must used inside Segments component.";const p=d.useRef(null);return d.useLayoutEffect(()=>c.subscribe(p),[]),d.createElement("segmentObject",{ref:zr([p,l]),color:i,start:oS(t),end:oS(r)})}),ER=d.forwardRef((p,c)=>{var h=p,{children:i,hysteresis:t=0,distances:r}=h,l=_n(h,["children","hysteresis","distances"]);const g=d.useRef(null);return d.useLayoutEffect(()=>{const{current:v}=g;v.levels.length=0,v.children.forEach((_,b)=>v.levels.push({object:_,hysteresis:t,distance:r[b]}))}),(0,E.A)(v=>{var _;return(_=g.current)==null?void 0:_.update(v.camera)}),d.createElement("lOD",(0,w.Z)({ref:zr([g,c])},l),i)});function bR({all:i,scene:t,camera:r}){const l=(0,E.z)(({gl:h})=>h),c=(0,E.z)(({camera:h})=>h),p=(0,E.z)(({scene:h})=>h);return d.useLayoutEffect(()=>{const h=[];i&&(t||p).traverse(_=>{_.visible===!1&&(h.push(_),_.visible=!0)}),l.compile(t||p,r||c);const g=new s.WebGLCubeRenderTarget(128);new s.CubeCamera(.01,1e5,g).update(l,t||p),g.dispose(),h.forEach(_=>_.visible=!1)},[]),null}function MR(){const i=(0,E.z)(t=>t.gl);return(0,d.useEffect)(()=>(i.shadowMap.autoUpdate=!1,i.shadowMap.needsUpdate=!0,()=>{i.shadowMap.autoUpdate=i.shadowMap.needsUpdate=!0}),[i.shadowMap]),null}const sS=new s.Matrix4,aS=new s.Ray,xb=new s.Sphere,Cb=new s.Vector3;function xR(i,t){const r=this.geometry,l=this.material,c=this.matrixWorld;l!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),xb.copy(r.boundingSphere),xb.applyMatrix4(c),i.ray.intersectsSphere(xb)!==!1&&(sS.copy(c).invert(),aS.copy(i.ray).applyMatrix4(sS),!(r.boundingBox!==null&&aS.intersectBox(r.boundingBox,Cb)===null)&&t.push({distance:Cb.distanceTo(i.ray.origin),point:Cb.clone(),object:this})))}function CR({pixelated:i}){const t=(0,E.z)(h=>h.gl),r=(0,E.z)(h=>h.internal.active),l=(0,E.z)(h=>h.performance.current),c=(0,E.z)(h=>h.viewport.initialDpr),p=(0,E.z)(h=>h.setDpr);return d.useEffect(()=>{const h=t.domElement;return()=>{r&&p(c),i&&h&&(h.style.imageRendering="auto")}},[]),d.useEffect(()=>{p(l*c),i&&t.domElement&&(t.domElement.style.imageRendering=l===1?"auto":"pixelated")},[l]),null}function SR(){const i=(0,E.z)(l=>l.get),t=(0,E.z)(l=>l.setEvents),r=(0,E.z)(l=>l.performance.current);return d.useEffect(()=>{const l=i().events.enabled;return()=>t({enabled:l})},[]),d.useEffect(()=>t({enabled:r===1}),[r]),null}const lS=(0,d.createContext)(null);function wR({iterations:i=10,ms:t=250,threshold:r=.75,step:l=.1,factor:c=.5,flipflops:p=1/0,bounds:h=R=>R>100?[60,100]:[40,60],onIncline:g,onDecline:v,onChange:_,onFallback:b,children:T}){const R=Math.pow(10,0),[F,G]=(0,d.useState)(()=>({fps:0,index:0,factor:c,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:O=>{const k=Symbol();return F.subscriptions.set(k,O.current),()=>void F.subscriptions.delete(k)}}));let L=0;return(0,E.A)(()=>{const{frames:O,averages:k}=F;if(!F.fallback&&k.length<i){O.push(performance.now());const P=O[O.length-1]-O[0];if(P>=t){if(F.fps=Math.round(O.length/P*1e3*R)/R,F.refreshrate=Math.max(F.refreshrate,F.fps),k[F.index++%i]=F.fps,k.length===i){const[z,j]=h(F.refreshrate),Q=k.filter(Y=>Y>=j),W=k.filter(Y=>Y<z);Q.length>i*r&&(F.factor=Math.min(1,F.factor+l),F.flipped++,g&&g(F),F.subscriptions.forEach(Y=>Y.onIncline&&Y.onIncline(F))),W.length>i*r&&(F.factor=Math.max(0,F.factor-l),F.flipped++,v&&v(F),F.subscriptions.forEach(Y=>Y.onDecline&&Y.onDecline(F))),L!==F.factor&&(L=F.factor,_&&_(F),F.subscriptions.forEach(Y=>Y.onChange&&Y.onChange(F))),F.flipped>p&&!F.fallback&&(F.fallback=!0,b&&b(F),F.subscriptions.forEach(Y=>Y.onFallback&&Y.onFallback(F))),F.averages=[]}F.frames=[]}}}),d.createElement(lS.Provider,{value:F},T)}function TR({onIncline:i,onDecline:t,onChange:r,onFallback:l}){const c=(0,d.useContext)(lS),p=(0,d.useRef)({onIncline:i,onDecline:t,onChange:r,onFallback:l});(0,d.useLayoutEffect)(()=>{p.current.onIncline=i,p.current.onDecline=t,p.current.onChange=r,p.current.onFallback=l},[i,t,r,l]),(0,d.useLayoutEffect)(()=>c.subscribe(p),[c])}const cS=d.forwardRef((F,R)=>{var G=F,{children:i,compute:t,width:r,height:l,samples:c=8,renderPriority:p=0,eventPriority:h=0,frames:g=1/0,stencilBuffer:v=!1,depthBuffer:_=!0,generateMipmaps:b=!1}=G,T=_n(G,["children","compute","width","height","samples","renderPriority","eventPriority","frames","stencilBuffer","depthBuffer","generateMipmaps"]);const{size:L,viewport:O}=(0,E.z)(),k=Hl((r||L.width)*O.dpr,(l||L.height)*O.dpr,{samples:c,stencilBuffer:v,depthBuffer:_,generateMipmaps:b}),[P]=d.useState(()=>new s.Scene),z=d.useCallback((j,Q,W)=>{var Y,K;let se=(Y=k.texture)==null?void 0:Y.__r3f.parent;for(;se&&!(se instanceof s.Object3D);)se=se.__r3f.parent;if(!se)return!1;W.raycaster.camera||W.events.compute(j,W,(K=W.previousRoot)==null?void 0:K.getState());const[ce]=W.raycaster.intersectObject(se);if(!ce)return!1;const ge=ce.uv;if(!ge)return!1;Q.raycaster.setFromCamera(Q.pointer.set(ge.x*2-1,ge.y*2-1),Q.camera)},[]);return d.useImperativeHandle(R,()=>k.texture,[k]),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(BR,{renderPriority:p,frames:g,fbo:k},i,d.createElement("group",{onPointerOver:()=>null})),P,{events:{compute:t||z,priority:h}}),d.createElement("primitive",(0,w.Z)({object:k.texture},T)))});function BR({frames:i,renderPriority:t,children:r,fbo:l}){let c=0,p;return(0,E.A)(h=>{(i===1/0||c<i)&&(p=h.gl.autoClear,h.gl.autoClear=!0,h.gl.setRenderTarget(l),h.gl.render(h.scene,h.camera),h.gl.setRenderTarget(null),h.gl.autoClear=p,c++)},t),d.createElement(d.Fragment,null,r)}const RR=d.forwardRef((p,c)=>{var h=p,{id:i=1,colorWrite:t=!1,depthWrite:r=!1}=h,l=_n(h,["id","colorWrite","depthWrite"]);const g=d.useRef(null),v=d.useMemo(()=>({colorWrite:t,depthWrite:r,stencilWrite:!0,stencilRef:i,stencilFunc:s.AlwaysStencilFunc,stencilFail:s.ReplaceStencilOp,stencilZFail:s.ReplaceStencilOp,stencilZPass:s.ReplaceStencilOp}),[i,t,r]);return d.useLayoutEffect(()=>{Object.assign(g.current.material,v)}),d.useImperativeHandle(c,()=>g.current,[]),d.createElement("mesh",(0,w.Z)({ref:g,renderOrder:-i},l))});function IR(i,t=!1){return{stencilWrite:!0,stencilRef:i,stencilFunc:t?s.NotEqualStencilFunc:s.EqualStencilFunc,stencilFail:s.KeepStencilOp,stencilZFail:s.KeepStencilOp,stencilZPass:s.KeepStencilOp}}const FR=Fc({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new s.Vector2},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),OR=d.forwardRef((_,v)=>{var b=_,{children:i,events:t=void 0,blur:r=0,eventPriority:l=0,renderPriority:c=0,worldUnits:p=!1,resolution:h=512}=b,g=_n(b,["children","events","blur","eventPriority","renderPriority","worldUnits","resolution"]);(0,E.e)({PortalMaterialImpl:FR});const T=d.useRef(null),{scene:R,gl:F,size:G,viewport:L,setEvents:O}=(0,E.z)(),k=Hl(h,h),[P,z]=d.useState(0);(0,E.A)(()=>{const K=T.current.blend>0?Math.max(1,c):0;P!==K&&z(K)}),d.useEffect(()=>{t!==void 0&&O({enabled:!t})},[t]);const[j,Q]=d.useState(!0),W=iC(Q);d.useLayoutEffect(()=>{var K;W.current=(K=T.current)==null?void 0:K.__r3f.parent},[]),d.useLayoutEffect(()=>{if(W.current&&r&&T.current.sdf===null){const K=new s.Mesh(W.current.geometry,new s.MeshBasicMaterial),se=new s.Box3().setFromBufferAttribute(K.geometry.attributes.position),ce=new s.OrthographicCamera(se.min.x*(1+2/h),se.max.x*(1+2/h),se.max.y*(1+2/h),se.min.y*(1+2/h),.1,1e3);ce.position.set(0,0,1),ce.lookAt(0,0,0),F.setRenderTarget(k),F.render(K,ce);const le=PR(h,h,F)(k.texture),xe=new Float32Array(h*h);F.readRenderTargetPixels(le,0,0,h,h,xe);let me=1/0;for(let Be=0;Be<xe.length;Be++)xe[Be]<me&&(me=xe[Be]);me=-me,T.current.size=me,T.current.sdf=le.texture,F.setRenderTarget(null)}},[h,r]),d.useImperativeHandle(v,()=>T.current);const Y=d.useCallback((K,se,ce)=>{var ge;if(!W.current)return!1;if(se.pointer.set(K.offsetX/se.size.width*2-1,-(K.offsetY/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera),((ge=T.current)==null?void 0:ge.blend)===0){const[le]=se.raycaster.intersectObject(W.current);if(!le)return se.raycaster.camera=void 0,!1}},[]);return d.createElement("portalMaterialImpl",(0,w.Z)({ref:T,blur:r,blend:0,resolution:[G.width*L.dpr,G.height*L.dpr],toneMapped:!1,attach:"material"},g),d.createElement(cS,{attach:"map",frames:j?1/0:0,eventPriority:l,renderPriority:c,compute:Y},i,d.createElement(DR,{events:t,rootScene:R,priority:P,material:T,worldUnits:p})))});function DR({events:i=void 0,rootScene:t,material:r,priority:l,worldUnits:c}){const p=(0,E.z)(T=>T.scene),h=(0,E.z)(T=>T.setEvents),g=Hl(),v=Hl();d.useLayoutEffect(()=>{p.matrixAutoUpdate=!1},[]),d.useEffect(()=>{i!==void 0&&h({enabled:i})},[i]);const[_,b]=d.useMemo(()=>{const T={value:0};return[new $c(new s.ShaderMaterial({uniforms:{a:{value:g.texture},b:{value:v.texture},blend:T},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <encodings_fragment>
          }`})),T]},[]);return(0,E.A)(T=>{var R;let F=r==null||(R=r.current)==null?void 0:R.__r3f.parent;if(F){if(c)p.matrixWorld.identity();else{var G;l&&((G=r.current)==null?void 0:G.blend)===1&&F.updateWorldMatrix(!0,!1),p.matrixWorld.copy(F.matrixWorld)}if(l){var L,O,k;((L=r.current)==null?void 0:L.blend)>0&&((O=r.current)==null?void 0:O.blend)<1?(b.value=r.current.blend,T.gl.setRenderTarget(g),T.gl.render(p,T.camera),T.gl.setRenderTarget(v),T.gl.render(t,T.camera),T.gl.setRenderTarget(null),_.render(T.gl)):((k=r.current)==null?void 0:k.blend)===1&&T.gl.render(p,T.camera)}}},l),d.createElement(d.Fragment,null)}const PR=(i,t,r)=>{let l=new s.WebGLRenderTarget(i,t,{minFilter:s.LinearMipmapLinearFilter,magFilter:s.LinearFilter,type:s.FloatType,format:s.RedFormat,generateMipmaps:!0}),c=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),p=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),h=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),g=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),v=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter,type:s.FloatType,format:s.RedFormat}),_=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter,type:s.FloatType,format:s.RedFormat});const b=new $c(new s.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),T=new $c(new s.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),R=new $c(new s.ShaderMaterial({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/i}, ${1/t}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),F=new $c(new s.ShaderMaterial({uniforms:{tex:{value:null},size:{value:new s.Vector2(i,t)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),G=new $c(new s.ShaderMaterial({uniforms:{inside:{value:_.texture},outside:{value:v.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return L=>{let O=l;L.minFilter=s.NearestFilter,L.magFilter=s.NearestFilter,b.material.uniforms.tex.value=L,r.setRenderTarget(c),b.render(r);const k=Math.ceil(Math.log(Math.max(i,t))/Math.log(2));let P=c,z=null;for(let j=0;j<k;j++){const Q=Math.pow(2,k-j-1);z=P===c?h:c,R.material.uniforms.level.value=j,R.material.uniforms.maxSteps.value=k,R.material.uniforms.offset.value=Q,R.material.uniforms.tex.value=P.texture,r.setRenderTarget(z),R.render(r),P=z}r.setRenderTarget(v),F.material.uniforms.tex.value=z.texture,F.render(r),T.material.uniforms.tex.value=L,r.setRenderTarget(p),T.render(r),P=p;for(let j=0;j<k;j++){const Q=Math.pow(2,k-j-1);z=P===p?g:p,R.material.uniforms.level.value=j,R.material.uniforms.maxSteps.value=k,R.material.uniforms.offset.value=Q,R.material.uniforms.tex.value=P.texture,r.setRenderTarget(z),R.render(r),P=z}return r.setRenderTarget(_),F.material.uniforms.tex.value=z.texture,F.render(r),r.setRenderTarget(O),G.material.uniforms.tex.value=L,G.render(r),r.setRenderTarget(null),O}};var LR=A(25108);const kR=i=>i&&i.isOrthographicCamera,pS=new s.Color;function uS(i){return"top"in i}function zR(i,t){const{right:r,top:l,left:c,bottom:p,width:h,height:g}=t,v=t.bottom<0||l>i.height||r<0||t.left>i.width;if(uS(i)){const T=i.top+i.height-p,R=c-i.left;return{position:{width:h,height:g,left:R,top:l,bottom:T,right:r},isOffscreen:v}}const _=i.height-p;return{position:{width:h,height:g,top:l,left:c,bottom:_,right:r},isOffscreen:v}}function GR({canvasSize:i,scene:t,index:r,children:l,frames:c,rect:p,track:h}){const g=(0,E.z)(R=>R.get),v=(0,E.z)(R=>R.camera),_=(0,E.z)(R=>R.scene),b=(0,E.z)(R=>R.setEvents);let T=0;return(0,E.A)(R=>{if(c===1/0||T<=c){var F;p.current=(F=h.current)==null?void 0:F.getBoundingClientRect(),T++}if(p.current){const{position:{left:G,bottom:L,width:O,height:k},isOffscreen:P}=zR(i,p.current),z=O/k;kR(v)?(v.left!==O/-2||v.right!==O/2||v.top!==k/2||v.bottom!==k/-2)&&(Object.assign(v,{left:O/-2,right:O/2,top:k/2,bottom:k/-2}),v.updateProjectionMatrix()):v.aspect!==z&&(v.aspect=z,v.updateProjectionMatrix()),R.gl.setViewport(G,L,O,k),R.gl.setScissor(G,L,O,k),R.gl.setScissorTest(!0),P?(R.gl.getClearColor(pS),R.gl.setClearColor(pS,R.gl.getClearAlpha()),R.gl.clear(!0,!0)):R.gl.render(l?_:t,v),R.gl.setScissorTest(!0)}},r),d.useEffect(()=>{const R=g().events.connected;return b({connected:h.current}),()=>b({connected:R})},[]),d.useEffect(()=>{uS(i)||LR.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),d.createElement(d.Fragment,null,l)}const NR=({track:i,index:t=1,frames:r=1/0,children:l})=>{var c,p;const h=d.useRef(null),{size:g,scene:v}=(0,E.z)(),[_]=d.useState(()=>new s.Scene),b=d.useCallback((F,G)=>{if(h.current&&i.current&&F.target===i.current){const{width:L,height:O,left:k,top:P}=h.current,z=F.clientX-k,j=F.clientY-P;G.pointer.set(z/L*2-1,-(j/O)*2+1),G.raycaster.setFromCamera(G.pointer,G.camera)}},[h,i]),[T,R]=d.useReducer(()=>!0,!1);return d.useEffect(()=>{var F;h.current=(F=i.current)==null?void 0:F.getBoundingClientRect(),R()},[i]),d.createElement(d.Fragment,null,T&&(0,E.g)(d.createElement(GR,{canvasSize:g,frames:r,scene:v,track:i,rect:h,index:t},l,d.createElement("group",{onPointerOver:()=>null})),_,{events:{compute:b,priority:t},size:{width:(c=h.current)==null?void 0:c.width,height:(p=h.current)==null?void 0:p.height}}))},Q2=d.createContext(null),K2=new s.Vector3,dS=new s.Vector3,UR=(i,t,r,l)=>{const c=t.dot(t),p=t.dot(i)-t.dot(r),h=t.dot(l);return h===0?-p/c:(K2.copy(l).multiplyScalar(c/h).sub(t),dS.copy(l).multiplyScalar(p/h).add(r).sub(i),-K2.dot(dS)/K2.dot(K2))},jR=new s.Vector3(0,1,0),hS=new s.Matrix4,Sb=({direction:i,axis:t})=>{const{translation:r,translationLimits:l,annotations:c,annotationsClass:p,depthTest:h,scale:g,lineWidth:v,fixed:_,axisColors:b,hoveredColor:T,opacity:R,onDragStart:F,onDrag:G,onDragEnd:L,userData:O}=d.useContext(Q2),k=(0,E.z)(Re=>Re.controls),P=d.useRef(null),z=d.useRef(null),j=d.useRef(null),Q=d.useRef(0),[W,Y]=d.useState(!1),K=d.useCallback(Re=>{c&&(P.current.innerText=`${r.current[t].toFixed(2)}`,P.current.style.display="block"),Re.stopPropagation();const ze=new s.Matrix4().extractRotation(z.current.matrixWorld),Pe=Re.point.clone(),Ye=new s.Vector3().setFromMatrixPosition(z.current.matrixWorld),Ce=i.clone().applyMatrix4(ze).normalize();j.current={clickPoint:Pe,dir:Ce},Q.current=r.current[t],F({component:"Arrow",axis:t,origin:Ye,directions:[Ce]}),k&&(k.enabled=!1),Re.target.setPointerCapture(Re.pointerId)},[c,i,k,F,r,t]),se=d.useCallback(Re=>{if(Re.stopPropagation(),W||Y(!0),j.current){const{clickPoint:ze,dir:Pe}=j.current,[Ye,Ce]=(l==null?void 0:l[t])||[void 0,void 0];let Ee=UR(ze,Pe,Re.ray.origin,Re.ray.direction);Ye!==void 0&&(Ee=Math.max(Ee,Ye-Q.current)),Ce!==void 0&&(Ee=Math.min(Ee,Ce-Q.current)),r.current[t]=Q.current+Ee,c&&(P.current.innerText=`${r.current[t].toFixed(2)}`),hS.makeTranslation(Pe.x*Ee,Pe.y*Ee,Pe.z*Ee),G(hS)}},[c,G,W,r,l,t]),ce=d.useCallback(Re=>{c&&(P.current.style.display="none"),Re.stopPropagation(),j.current=null,L(),k&&(k.enabled=!0),Re.target.releasePointerCapture(Re.pointerId)},[c,k,L]),ge=d.useCallback(Re=>{Re.stopPropagation(),Y(!1)},[]),{cylinderLength:le,coneWidth:xe,coneLength:me,matrixL:Be}=d.useMemo(()=>{const Re=_?v/g*1.6:g/20,ze=_?.2:g/5,Pe=_?1-ze:g-ze,Ye=new s.Quaternion().setFromUnitVectors(jR,i.clone().normalize()),Ce=new s.Matrix4().makeRotationFromQuaternion(Ye);return{cylinderLength:Pe,coneWidth:Re,coneLength:ze,matrixL:Ce}},[i,g,v,_]),ke=W?T:b[t];return d.createElement("group",{ref:z},d.createElement("group",{matrix:Be,matrixAutoUpdate:!1,onPointerDown:K,onPointerMove:se,onPointerUp:ce,onPointerOut:ge},c&&d.createElement(pt,{position:[0,-me,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:P})),d.createElement("mesh",{visible:!1,position:[0,(le+me)/2,0],userData:O},d.createElement("cylinderGeometry",{args:[xe*1.4,xe*1.4,le+me,8,1]})),d.createElement(kp,{transparent:!0,raycast:()=>null,depthTest:h,points:[0,0,0,0,le,0],lineWidth:v,color:ke,opacity:R,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),d.createElement("mesh",{raycast:()=>null,position:[0,le+me/2,0],renderOrder:500},d.createElement("coneGeometry",{args:[xe,me,24,1]}),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:h,color:ke,opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},HR=(i,t,r)=>{const l=Math.abs(i.x)>=Math.abs(i.y)&&Math.abs(i.x)>=Math.abs(i.z)?0:Math.abs(i.y)>=Math.abs(i.x)&&Math.abs(i.y)>=Math.abs(i.z)?1:2,c=[0,1,2].sort((G,L)=>Math.abs(t.getComponent(L))-Math.abs(t.getComponent(G))),p=l===c[0]?c[1]:c[0],h=i.getComponent(l),g=i.getComponent(p),v=t.getComponent(l),_=t.getComponent(p),b=r.getComponent(l),R=(r.getComponent(p)-b*(g/h))/(_-v*(g/h));return[(b-R*v)/h,R]},X2=new s.Ray,Y2=new s.Vector3,fS=new s.Matrix4,wb=({dir1:i,dir2:t,axis:r})=>{const{translation:l,translationLimits:c,annotations:p,annotationsClass:h,depthTest:g,scale:v,lineWidth:_,fixed:b,axisColors:T,hoveredColor:R,opacity:F,onDragStart:G,onDrag:L,onDragEnd:O,userData:k}=d.useContext(Q2),P=(0,E.z)(Pe=>Pe.controls),z=d.useRef(null),j=d.useRef(null),Q=d.useRef(null),W=d.useRef(0),Y=d.useRef(0),[K,se]=d.useState(!1),ce=d.useCallback(Pe=>{p&&(z.current.innerText=`${l.current[(r+1)%3].toFixed(2)}, ${l.current[(r+2)%3].toFixed(2)}`,z.current.style.display="block"),Pe.stopPropagation();const Ye=Pe.point.clone(),Ce=new s.Vector3().setFromMatrixPosition(j.current.matrixWorld),Ee=new s.Vector3().setFromMatrixColumn(j.current.matrixWorld,0).normalize(),_e=new s.Vector3().setFromMatrixColumn(j.current.matrixWorld,1).normalize(),oe=new s.Vector3().setFromMatrixColumn(j.current.matrixWorld,2).normalize(),Ae=new s.Plane().setFromNormalAndCoplanarPoint(oe,Ce);Q.current={clickPoint:Ye,e1:Ee,e2:_e,plane:Ae},W.current=l.current[(r+1)%3],Y.current=l.current[(r+2)%3],G({component:"Slider",axis:r,origin:Ce,directions:[Ee,_e,oe]}),P&&(P.enabled=!1),Pe.target.setPointerCapture(Pe.pointerId)},[p,P,G,r]),ge=d.useCallback(Pe=>{if(Pe.stopPropagation(),K||se(!0),Q.current){const{clickPoint:Ye,e1:Ce,e2:Ee,plane:_e}=Q.current,[oe,Ae]=(c==null?void 0:c[(r+1)%3])||[void 0,void 0],[Te,ve]=(c==null?void 0:c[(r+2)%3])||[void 0,void 0];X2.copy(Pe.ray),X2.intersectPlane(_e,Y2),X2.direction.negate(),X2.intersectPlane(_e,Y2),Y2.sub(Ye);let[Ge,bt]=HR(Ce,Ee,Y2);oe!==void 0&&(Ge=Math.max(Ge,oe-W.current)),Ae!==void 0&&(Ge=Math.min(Ge,Ae-W.current)),Te!==void 0&&(bt=Math.max(bt,Te-Y.current)),ve!==void 0&&(bt=Math.min(bt,ve-Y.current)),l.current[(r+1)%3]=W.current+Ge,l.current[(r+2)%3]=Y.current+bt,p&&(z.current.innerText=`${l.current[(r+1)%3].toFixed(2)}, ${l.current[(r+2)%3].toFixed(2)}`),fS.makeTranslation(Ge*Ce.x+bt*Ee.x,Ge*Ce.y+bt*Ee.y,Ge*Ce.z+bt*Ee.z),L(fS)}},[p,L,K,l,c,r]),le=d.useCallback(Pe=>{p&&(z.current.style.display="none"),Pe.stopPropagation(),Q.current=null,O(),P&&(P.enabled=!0),Pe.target.releasePointerCapture(Pe.pointerId)},[p,P,O]),xe=d.useCallback(Pe=>{Pe.stopPropagation(),se(!1)},[]),me=d.useMemo(()=>{const Pe=i.clone().normalize(),Ye=t.clone().normalize();return new s.Matrix4().makeBasis(Pe,Ye,Pe.clone().cross(Ye))},[i,t]),Be=b?1/7:v/7,ke=b?.225:v*.225,Re=K?R:T[r],ze=d.useMemo(()=>[new s.Vector3(0,0,0),new s.Vector3(0,ke,0),new s.Vector3(ke,ke,0),new s.Vector3(ke,0,0),new s.Vector3(0,0,0)],[ke]);return d.createElement("group",{ref:j,matrix:me,matrixAutoUpdate:!1},p&&d.createElement(pt,{position:[0,0,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:h,ref:z})),d.createElement("group",{position:[Be*1.7,Be*1.7,0]},d.createElement("mesh",{visible:!0,onPointerDown:ce,onPointerMove:ge,onPointerUp:le,onPointerOut:xe,scale:ke,userData:k},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:g,color:Re,polygonOffset:!0,polygonOffsetFactor:-10,side:s.DoubleSide,fog:!1})),d.createElement(kp,{position:[-ke/2,-ke/2,0],transparent:!0,depthTest:g,points:ze,lineWidth:_,color:Re,opacity:F,polygonOffset:!0,polygonOffsetFactor:-10,userData:k,fog:!1})))};var WR=A(7378),VR=A.n(WR);const Tb=new s.Vector3,Bb=new s.Vector3,Rb=i=>i*180/Math.PI,QR=i=>i*Math.PI/180,KR=(i,t,r,l,c)=>{Tb.copy(i).sub(r),Bb.copy(t).sub(r);const p=l.dot(l),h=c.dot(c),g=Tb.dot(l)/p,v=Tb.dot(c)/h,_=Bb.dot(l)/p,b=Bb.dot(c)/h,T=Math.atan2(v,g);return Math.atan2(b,_)-T},XR=(i,t)=>{let r=Math.floor(i/t);return r=r<0?r+1:r,i-r*t},gS=i=>{let t=XR(i,2*Math.PI);return Math.abs(t)<1e-6?0:(t<0&&(t+=2*Math.PI),t)},J2=new s.Matrix4,mS=new s.Vector3,q2=new s.Ray,Ib=new s.Vector3,Fb=({dir1:i,dir2:t,axis:r})=>{const{rotationLimits:l,annotations:c,annotationsClass:p,depthTest:h,scale:g,lineWidth:v,fixed:_,axisColors:b,hoveredColor:T,opacity:R,onDragStart:F,onDrag:G,onDragEnd:L,userData:O}=d.useContext(Q2),k=(0,E.z)(ke=>ke.controls),P=d.useRef(null),z=d.useRef(null),j=d.useRef(0),Q=d.useRef(0),W=d.useRef(null),[Y,K]=d.useState(!1),se=d.useCallback(ke=>{c&&(P.current.innerText=`${Rb(Q.current).toFixed(0)}\xBA`,P.current.style.display="block"),ke.stopPropagation();const Re=ke.point.clone(),ze=new s.Vector3().setFromMatrixPosition(z.current.matrixWorld),Pe=new s.Vector3().setFromMatrixColumn(z.current.matrixWorld,0).normalize(),Ye=new s.Vector3().setFromMatrixColumn(z.current.matrixWorld,1).normalize(),Ce=new s.Vector3().setFromMatrixColumn(z.current.matrixWorld,2).normalize(),Ee=new s.Plane().setFromNormalAndCoplanarPoint(Ce,ze);W.current={clickPoint:Re,origin:ze,e1:Pe,e2:Ye,normal:Ce,plane:Ee},F({component:"Rotator",axis:r,origin:ze,directions:[Pe,Ye,Ce]}),k&&(k.enabled=!1),ke.target.setPointerCapture(ke.pointerId)},[c,k,F,r]),ce=d.useCallback(ke=>{if(ke.stopPropagation(),Y||K(!0),W.current){const{clickPoint:Re,origin:ze,e1:Pe,e2:Ye,normal:Ce,plane:Ee}=W.current,[_e,oe]=(l==null?void 0:l[r])||[void 0,void 0];q2.copy(ke.ray),q2.intersectPlane(Ee,Ib),q2.direction.negate(),q2.intersectPlane(Ee,Ib);let Ae=KR(Re,Ib,ze,Pe,Ye),Te=Rb(Ae);ke.shiftKey&&(Te=Math.round(Te/10)*10,Ae=QR(Te)),_e!==void 0&&oe!==void 0&&oe-_e<2*Math.PI?(Ae=gS(Ae),Ae=Ae>Math.PI?Ae-2*Math.PI:Ae,Ae=VR()(Ae,_e-j.current,oe-j.current),Q.current=j.current+Ae):(Q.current=gS(j.current+Ae),Q.current=Q.current>Math.PI?Q.current-2*Math.PI:Q.current),c&&(Te=Rb(Q.current),P.current.innerText=`${Te.toFixed(0)}\xBA`),J2.makeRotationAxis(Ce,Ae),mS.copy(ze).applyMatrix4(J2).sub(ze).negate(),J2.setPosition(mS),G(J2)}},[c,G,Y,l,r]),ge=d.useCallback(ke=>{c&&(P.current.style.display="none"),ke.stopPropagation(),j.current=Q.current,W.current=null,L(),k&&(k.enabled=!0),ke.target.releasePointerCapture(ke.pointerId)},[c,k,L]),le=d.useCallback(ke=>{ke.stopPropagation(),K(!1)},[]),xe=d.useMemo(()=>{const ke=i.clone().normalize(),Re=t.clone().normalize();return new s.Matrix4().makeBasis(ke,Re,ke.clone().cross(Re))},[i,t]),me=_?.65:g*.65,Be=d.useMemo(()=>{const Re=[];for(let ze=0;ze<=32;ze++){const Pe=ze*(Math.PI/2)/32;Re.push(new s.Vector3(Math.cos(Pe)*me,Math.sin(Pe)*me,0))}return Re},[me]);return d.createElement("group",{ref:z,onPointerDown:se,onPointerMove:ce,onPointerUp:ge,onPointerOut:le,matrix:xe,matrixAutoUpdate:!1},c&&d.createElement(pt,{position:[me,me,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:P})),d.createElement(kp,{points:Be,lineWidth:v*4,visible:!1,userData:O}),d.createElement(kp,{transparent:!0,raycast:()=>null,depthTest:h,points:Be,lineWidth:v,color:Y?T:b[r],opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},YR=new s.Vector3,JR=new s.Vector3,qR=new s.Vector3,ZR=(i,t,r)=>{const l=r.width/2,c=r.height/2;t.updateMatrixWorld(!1);const p=i.project(t);return p.x=p.x*l+l,p.y=-(p.y*c)+c,p},$R=(i,t,r,l=1)=>{const c=YR.set(i.x/r.width*2-1,-(i.y/r.height)*2+1,l);return c.unproject(t),c},AS=(i,t,r,l)=>{const c=ZR(qR.copy(i),r,l);let p=0;for(let h=0;h<2;++h){const g=JR.copy(c).setComponent(h,c.getComponent(h)+t),v=$R(g,r,l,g.z);p=Math.max(p,i.distanceTo(v))}return p},yS=new s.Matrix4,vS=new s.Matrix4,_S=new s.Matrix4,Z2=new s.Matrix4,Ob=new s.Matrix4,J0=new s.Matrix4,ES=new s.Matrix4,bS=new s.Matrix4,q0=new s.Box3,Db=new s.Box3,MS=new s.Vector3,xS=new s.Vector3,CS=new s.Vector3,SS=new s.Vector3,WA=new s.Vector3(1,0,0),VA=new s.Vector3(0,1,0),QA=new s.Vector3(0,0,1),eI=d.forwardRef((le,ge)=>{var xe=le,{matrix:i,onDragStart:t,onDrag:r,onDragEnd:l,autoTransform:c=!0,anchor:p,disableAxes:h=!1,disableSliders:g=!1,disableRotations:v=!1,activeAxes:_=[!0,!0,!0],offset:b=[0,0,0],rotation:T=[0,0,0],scale:R=1,lineWidth:F=4,fixed:G=!1,translationLimits:L,rotationLimits:O,depthTest:k=!0,axisColors:P=["#ff2060","#20df80","#2080ff"],hoveredColor:z="#ffff40",annotations:j=!1,annotationsClass:Q,opacity:W=1,visible:Y=!0,userData:K,children:se}=xe,ce=_n(xe,["matrix","onDragStart","onDrag","onDragEnd","autoTransform","anchor","disableAxes","disableSliders","disableRotations","activeAxes","offset","rotation","scale","lineWidth","fixed","translationLimits","rotationLimits","depthTest","axisColors","hoveredColor","annotations","annotationsClass","opacity","visible","userData","children"]);const me=(0,E.z)(Ee=>Ee.invalidate),Be=d.useRef(null),ke=d.useRef(null),Re=d.useRef(null),ze=d.useRef(null),Pe=d.useRef([0,0,0]);d.useLayoutEffect(()=>{p&&(ze.current.updateWorldMatrix(!0,!0),Z2.copy(ze.current.matrixWorld).invert(),q0.makeEmpty(),ze.current.traverse(Ee=>{Ee.geometry&&(Ee.geometry.boundingBox||Ee.geometry.computeBoundingBox(),J0.copy(Ee.matrixWorld).premultiply(Z2),Db.copy(Ee.geometry.boundingBox),Db.applyMatrix4(J0),q0.union(Db))}),MS.copy(q0.max).add(q0.min).multiplyScalar(.5),xS.copy(q0.max).sub(q0.min).multiplyScalar(.5),CS.copy(xS).multiply(new s.Vector3(...p)).add(MS),SS.set(...b).add(CS),Re.current.position.copy(SS),me())});const Ye=d.useMemo(()=>({onDragStart:Ee=>{yS.copy(ke.current.matrix),vS.copy(ke.current.matrixWorld),t&&t(Ee),me()},onDrag:Ee=>{_S.copy(Be.current.matrixWorld),Z2.copy(_S).invert(),Ob.copy(vS).premultiply(Ee),J0.copy(Ob).premultiply(Z2),ES.copy(yS).invert(),bS.copy(J0).multiply(ES),c&&ke.current.matrix.copy(J0),r&&r(J0,bS,Ob,Ee),me()},onDragEnd:()=>{l&&l(),me()},translation:Pe,translationLimits:L,rotationLimits:O,axisColors:P,hoveredColor:z,opacity:W,scale:R,lineWidth:F,fixed:G,depthTest:k,userData:K,annotations:j,annotationsClass:Q}),[t,r,l,Pe,L,O,k,R,F,G,...P,z,W,K,c,j,Q]),Ce=new s.Vector3;return(0,E.A)(Ee=>{if(G){const Te=AS(Re.current.getWorldPosition(Ce),R,Ee.camera,Ee.size);if(Re.current){var _e,oe,Ae;(((_e=Re.current)==null?void 0:_e.scale.x)!==Te||((oe=Re.current)==null?void 0:oe.scale.y)!==Te||((Ae=Re.current)==null?void 0:Ae.scale.z)!==Te)&&(Re.current.scale.setScalar(Te),Ee.invalidate())}}}),d.useImperativeHandle(ge,()=>ke.current,[]),d.useLayoutEffect(()=>{i&&i instanceof s.Matrix4&&(ke.current.matrix=i)},[i]),d.createElement(Q2.Provider,{value:Ye},d.createElement("group",{ref:Be},d.createElement("group",(0,w.Z)({ref:ke,matrix:i,matrixAutoUpdate:!1},ce),d.createElement("group",{visible:Y,ref:Re,position:b,rotation:T},!h&&_[0]&&d.createElement(Sb,{axis:0,direction:WA}),!h&&_[1]&&d.createElement(Sb,{axis:1,direction:VA}),!h&&_[2]&&d.createElement(Sb,{axis:2,direction:QA}),!g&&_[0]&&_[1]&&d.createElement(wb,{axis:2,dir1:WA,dir2:VA}),!g&&_[0]&&_[2]&&d.createElement(wb,{axis:1,dir1:QA,dir2:WA}),!g&&_[2]&&_[1]&&d.createElement(wb,{axis:0,dir1:VA,dir2:QA}),!v&&_[0]&&_[1]&&d.createElement(Fb,{axis:2,dir1:WA,dir2:VA}),!v&&_[0]&&_[2]&&d.createElement(Fb,{axis:1,dir1:QA,dir2:WA}),!v&&_[2]&&_[1]&&d.createElement(Fb,{axis:0,dir1:VA,dir2:QA})),d.createElement("group",{ref:ze},se))))})},24121:function(u,n,A){"use strict";A.d(n,{A:function(){return fs},B:function(){return wt},C:function(){return Lo},D:function(){return ka},E:function(){return qt},a:function(){return ft},b:function(){return gs},c:function(){return ii},d:function(){return Za},e:function(){return Mt},f:function(){return Kr},g:function(){return fc},h:function(){return bo},i:function(){return pt},j:function(){return ks},k:function(){return Fi},l:function(){return Jo},m:function(){return ko},n:function(){return ca},o:function(){return Ls},p:function(){return as},q:function(){return no},r:function(){return zo},s:function(){return Br},t:function(){return pe},u:function(){return Pt},v:function(){return Nc},w:function(){return _a},x:function(){return Pi},y:function(){return pa},z:function(){return La}});var w=A(99477),d=A(67294),m=A(32576),s=A(14671),E=A(76525),H=A.n(E),ee=A(63840),ae=A(58139),J=A(25108),pe=Object.freeze({__proto__:null});const ue={},Mt=Ze=>void Object.assign(ue,Ze);function nt(Ze,St){function pn(Oe,an,Tt){var ln=an,{args:$e=[],attach:dt}=ln,_t=_n(ln,["args","attach"]);let Me=`${Oe[0].toUpperCase()}${Oe.slice(1)}`,He;if(Oe==="primitive"){if(_t.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const lt=_t.object;He=eo(lt,{type:Oe,root:Tt,attach:dt,primitive:!0})}else{const lt=ue[Me];if(!lt)throw new Error(`R3F: ${Me} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray($e))throw new Error("R3F: The args prop must be an array!");He=eo(new lt(...$e),{type:Oe,root:Tt,attach:dt,memoizedProps:{args:$e}})}return He.__r3f.attach===void 0&&(He instanceof w.BufferGeometry?He.__r3f.attach="geometry":He instanceof w.Material&&(He.__r3f.attach="material")),Me!=="inject"&&Ar(He,_t),He}function Dn(Oe,$e){let dt=!1;if($e){var _t,Tt;(_t=$e.__r3f)!=null&&_t.attach?jn(Oe,$e,$e.__r3f.attach):$e.isObject3D&&Oe.isObject3D&&(Oe.add($e),dt=!0),dt||(Tt=Oe.__r3f)==null||Tt.objects.push($e),$e.__r3f||eo($e,{}),$e.__r3f.parent=Oe,Ti($e),Rr($e)}}function Ln(Oe,$e,dt){let _t=!1;if($e){var Tt,an;if((Tt=$e.__r3f)!=null&&Tt.attach)jn(Oe,$e,$e.__r3f.attach);else if($e.isObject3D&&Oe.isObject3D){$e.parent=Oe,$e.dispatchEvent({type:"added"});const ln=Oe.children.filter(He=>He!==$e),Me=ln.indexOf(dt);Oe.children=[...ln.slice(0,Me),$e,...ln.slice(Me)],_t=!0}_t||(an=Oe.__r3f)==null||an.objects.push($e),$e.__r3f||eo($e,{}),$e.__r3f.parent=Oe,Ti($e),Rr($e)}}function lr(Oe,$e,dt=!1){Oe&&[...Oe].forEach(_t=>je($e,_t,dt))}function je(Oe,$e,dt){if($e){var _t,Tt,an;if($e.__r3f&&($e.__r3f.parent=null),(_t=Oe.__r3f)!=null&&_t.objects&&(Oe.__r3f.objects=Oe.__r3f.objects.filter(Qt=>Qt!==$e)),(Tt=$e.__r3f)!=null&&Tt.attach)tn(Oe,$e,$e.__r3f.attach);else if($e.isObject3D&&Oe.isObject3D){var ln;Oe.remove($e),(ln=$e.__r3f)!=null&&ln.root&&ti($e.__r3f.root,$e)}const He=(an=$e.__r3f)==null?void 0:an.primitive,lt=dt===void 0?$e.dispose!==null&&!He:dt;if(!He){var Me;lr((Me=$e.__r3f)==null?void 0:Me.objects,$e,lt),lr($e.children,$e,lt)}delete $e.__r3f,lt&&$e.dispose&&$e.type!=="Scene"&&(0,ee.unstable_scheduleCallback)(ee.unstable_IdlePriority,()=>{try{$e.dispose()}catch(Qt){}}),Rr(Oe)}}function Le(Oe,$e,dt,_t){var Tt;const an=(Tt=Oe.__r3f)==null?void 0:Tt.parent;if(!an)return;const ln=pn($e,dt,Oe.__r3f.root);if(Oe.children){for(const Me of Oe.children)Me.__r3f&&Dn(ln,Me);Oe.children=Oe.children.filter(Me=>!Me.__r3f)}Oe.__r3f.objects.forEach(Me=>Dn(ln,Me)),Oe.__r3f.objects=[],Oe.__r3f.autoRemovedBeforeAppend||je(an,Oe),ln.parent&&(ln.__r3f.autoRemovedBeforeAppend=!0),Dn(an,ln),ln.raycast&&ln.__r3f.eventCount&&ln.__r3f.root.getState().internal.interaction.push(ln),[_t,_t.alternate].forEach(Me=>{Me!==null&&(Me.stateNode=ln,Me.ref&&(typeof Me.ref=="function"?Me.ref(ln):Me.ref.current=ln))})}const Fe=()=>J.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:H()({createInstance:pn,removeChild:je,appendChild:Dn,appendInitialChild:Dn,insertBefore:Ln,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(Oe,$e)=>{if(!$e)return;const dt=Oe.getState().scene;dt.__r3f&&(dt.__r3f.root=Oe,Dn(dt,$e))},removeChildFromContainer:(Oe,$e)=>{$e&&je(Oe.getState().scene,$e)},insertInContainerBefore:(Oe,$e,dt)=>{if(!$e||!dt)return;const _t=Oe.getState().scene;_t.__r3f&&Ln(_t,$e,dt)},getRootHostContext:()=>null,getChildHostContext:Oe=>Oe,finalizeInitialChildren(Oe){var $e;return!!(($e=Oe==null?void 0:Oe.__r3f)!=null?$e:{}).handlers},prepareUpdate(Oe,$e,dt,_t){var Tt;if(((Tt=Oe==null?void 0:Oe.__r3f)!=null?Tt:{}).primitive&&_t.object&&_t.object!==Oe)return[!0];{const ln=_t,{args:He=[],children:lt}=ln,Qt=_n(ln,["args","children"]),Me=dt,{args:wn=[],children:Gn}=Me,gr=_n(Me,["args","children"]);if(!Array.isArray(He))throw new Error("R3F: the args prop must be an array!");if(He.some((mi,Ai)=>mi!==wn[Ai]))return[!0];const Wr=Bn(Oe,Qt,gr,!0);return Wr.changes.length?[!1,Wr]:null}},commitUpdate(Oe,[$e,dt],_t,Tt,an,ln){$e?Le(Oe,_t,an,ln):Ar(Oe,dt)},commitMount(Oe,$e,dt,_t){var Tt;const an=(Tt=Oe.__r3f)!=null?Tt:{};Oe.raycast&&an.handlers&&an.eventCount&&Oe.__r3f.root.getState().internal.interaction.push(Oe)},getPublicInstance:Oe=>Oe,prepareForCommit:()=>null,preparePortalMount:Oe=>eo(Oe.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(Oe){var $e;const{attach:dt,parent:_t}=($e=Oe.__r3f)!=null?$e:{};dt&&_t&&tn(_t,Oe,dt),Oe.isObject3D&&(Oe.visible=!1),Rr(Oe)},unhideInstance(Oe,$e){var dt;const{attach:_t,parent:Tt}=(dt=Oe.__r3f)!=null?dt:{};_t&&Tt&&jn(Tt,Oe,_t),(Oe.isObject3D&&$e.visible==null||$e.visible)&&(Oe.visible=!0),Rr(Oe)},createTextInstance:Fe,hideTextInstance:Fe,unhideTextInstance:Fe,getCurrentEventPriority:()=>St?St():m.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&Er.fun(performance.now)?performance.now:Er.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Er.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Er.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ar}}var Ve,it;const At=Ze=>"colorSpace"in Ze||"outputColorSpace"in Ze,Ct=()=>{var Ze;return(Ze=ue.ColorManagement)!=null?Ze:null},vt=Ze=>Ze&&Ze.isOrthographicCamera,pt=Ze=>Ze&&Ze.hasOwnProperty("current"),ft=typeof window!="undefined"&&((Ve=window.document)!=null&&Ve.createElement||((it=window.navigator)==null?void 0:it.product)==="ReactNative")?d.useLayoutEffect:d.useEffect;function Pt(Ze){const St=d.useRef(Ze);return ft(()=>void(St.current=Ze),[Ze]),St}function wt({set:Ze}){return ft(()=>(Ze(new Promise(()=>null)),()=>Ze(!1)),[Ze]),null}class qt extends d.Component{constructor(...St){super(...St),this.state={error:!1}}componentDidCatch(St){this.props.set(St)}render(){return this.state.error?null:this.props.children}}qt.getDerivedStateFromError=()=>({error:!0});const Ft="__default",An=new Map,rr=Ze=>Ze&&!!Ze.memoized&&!!Ze.changes;function xr(Ze){var St;const pn=typeof window!="undefined"?(St=window.devicePixelRatio)!=null?St:2:1;return Array.isArray(Ze)?Math.min(Math.max(Ze[0],pn),Ze[1]):Ze}const Br=Ze=>{var St;return(St=Ze.__r3f)==null?void 0:St.root.getState()},Er={obj:Ze=>Ze===Object(Ze)&&!Er.arr(Ze)&&typeof Ze!="function",fun:Ze=>typeof Ze=="function",str:Ze=>typeof Ze=="string",num:Ze=>typeof Ze=="number",boo:Ze=>typeof Ze=="boolean",und:Ze=>Ze===void 0,arr:Ze=>Array.isArray(Ze),equ(Ze,St,{arrays:pn="shallow",objects:Dn="reference",strict:Ln=!0}={}){if(typeof Ze!=typeof St||!!Ze!=!!St)return!1;if(Er.str(Ze)||Er.num(Ze))return Ze===St;const lr=Er.obj(Ze);if(lr&&Dn==="reference")return Ze===St;const je=Er.arr(Ze);if(je&&pn==="reference")return Ze===St;if((je||lr)&&Ze===St)return!0;let Le;for(Le in Ze)if(!(Le in St))return!1;if(lr&&pn==="shallow"&&Dn==="shallow"){for(Le in Ln?St:Ze)if(!Er.equ(Ze[Le],St[Le],{strict:Ln,objects:"reference"}))return!1}else for(Le in Ln?St:Ze)if(Ze[Le]!==St[Le])return!1;if(Er.und(Le)){if(je&&Ze.length===0&&St.length===0||lr&&Object.keys(Ze).length===0&&Object.keys(St).length===0)return!0;if(Ze!==St)return!1}return!0}};function zr(Ze){const St={nodes:{},materials:{}};return Ze&&Ze.traverse(pn=>{pn.name&&(St.nodes[pn.name]=pn),pn.material&&!St.materials[pn.material.name]&&(St.materials[pn.material.name]=pn.material)}),St}function Fi(Ze){Ze.dispose&&Ze.type!=="Scene"&&Ze.dispose();for(const St in Ze)St.dispose==null||St.dispose(),delete Ze[St]}function eo(Ze,St){const pn=Ze;return pn.__r3f=Kn({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},St),Ze}function Gr(Ze,St){let pn=Ze;if(St.includes("-")){const Dn=St.split("-"),Ln=Dn.pop();return pn=Dn.reduce((lr,je)=>lr[je],Ze),{target:pn,key:Ln}}else return{target:pn,key:St}}const Yo=/-\d+$/;function jn(Ze,St,pn){if(Er.str(pn)){if(Yo.test(pn)){const lr=pn.replace(Yo,""),{target:je,key:Le}=Gr(Ze,lr);Array.isArray(je[Le])||(je[Le]=[])}const{target:Dn,key:Ln}=Gr(Ze,pn);St.__r3f.previousAttach=Dn[Ln],Dn[Ln]=St}else St.__r3f.previousAttach=pn(Ze,St)}function tn(Ze,St,pn){var Dn,Ln;if(Er.str(pn)){const{target:lr,key:je}=Gr(Ze,pn),Le=St.__r3f.previousAttach;Le===void 0?delete lr[je]:lr[je]=Le}else(Dn=St.__r3f)==null||Dn.previousAttach==null||Dn.previousAttach(Ze,St);(Ln=St.__r3f)==null||delete Ln.previousAttach}function Bn(Ze,Oe,dt={},at=!1){var $e=Oe,{children:St,key:pn,ref:Dn}=$e,Ln=_n($e,["children","key","ref"]);var _t=dt,{children:lr,key:je,ref:Le}=_t,Fe=_n(_t,["children","key","ref"]);var Tt;const an=(Tt=Ze==null?void 0:Ze.__r3f)!=null?Tt:{},ln=Object.entries(Ln),Me=[];if(at){const lt=Object.keys(Fe);for(let Qt=0;Qt<lt.length;Qt++)Ln.hasOwnProperty(lt[Qt])||ln.unshift([lt[Qt],Ft+"remove"])}ln.forEach(([lt,Qt])=>{var wn;if((wn=Ze.__r3f)!=null&&wn.primitive&&lt==="object"||Er.equ(Qt,Fe[lt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(lt))return Me.push([lt,Qt,!0,[]]);let Gn=[];lt.includes("-")&&(Gn=lt.split("-")),Me.push([lt,Qt,!1,Gn]);for(const gr in Ln){const Wr=Ln[gr];gr.startsWith(`${lt}-`)&&Me.push([gr,Wr,!1,gr.split("-")])}});const He=Kn({},Ln);return an.memoizedProps&&an.memoizedProps.args&&(He.args=an.memoizedProps.args),an.memoizedProps&&an.memoizedProps.attach&&(He.attach=an.memoizedProps.attach),{memoized:He,changes:Me}}function Ar(Ze,St){var pn,Dn,Ln;const lr=(pn=Ze.__r3f)!=null?pn:{},je=lr.root,Le=(Dn=je==null||je.getState==null?void 0:je.getState())!=null?Dn:{},{memoized:Fe,changes:at}=rr(St)?St:Bn(Ze,St),Oe=lr.eventCount;Ze.__r3f&&(Ze.__r3f.memoizedProps=Fe);for(let dt=0;dt<at.length;dt++){let[_t,Tt,an,ln]=at[dt];if(At(Ze)){const Qt="srgb",wn="srgb-linear";_t==="encoding"?(_t="colorSpace",Tt=Tt===3001?Qt:wn):_t==="outputEncoding"&&(_t="outputColorSpace",Tt=Tt===3001?Qt:wn)}let Me=Ze,He=Me[_t];if(ln.length&&(He=ln.reduce((lt,Qt)=>lt[Qt],Ze),!(He&&He.set))){const[lt,...Qt]=ln.reverse();Me=Qt.reverse().reduce((wn,Gn)=>wn[Gn],Ze),_t=lt}if(Tt===Ft+"remove")if(Me.constructor){let lt=An.get(Me.constructor);lt||(lt=new Me.constructor,An.set(Me.constructor,lt)),Tt=lt[_t]}else Tt=0;if(an)Tt?lr.handlers[_t]=Tt:delete lr.handlers[_t],lr.eventCount=Object.keys(lr.handlers).length;else if(He&&He.set&&(He.copy||He instanceof w.Layers)){if(Array.isArray(Tt))He.fromArray?He.fromArray(Tt):He.set(...Tt);else if(He.copy&&Tt&&Tt.constructor&&He.constructor===Tt.constructor)He.copy(Tt);else if(Tt!==void 0){const lt=He instanceof w.Color;!lt&&He.setScalar?He.setScalar(Tt):He instanceof w.Layers&&Tt instanceof w.Layers?He.mask=Tt.mask:He.set(Tt),!Ct()&&!Le.linear&&lt&&He.convertSRGBToLinear()}}else if(Me[_t]=Tt,Me[_t]instanceof w.Texture&&Me[_t].format===w.RGBAFormat&&Me[_t].type===w.UnsignedByteType){const lt=Me[_t];At(lt)&&At(Le.gl)?lt.colorSpace=Le.gl.outputColorSpace:lt.encoding=Le.gl.outputEncoding}Rr(Ze)}if(lr.parent&&Le.internal&&Ze.raycast&&Oe!==lr.eventCount){const dt=Le.internal.interaction.indexOf(Ze);dt>-1&&Le.internal.interaction.splice(dt,1),lr.eventCount&&Le.internal.interaction.push(Ze)}return!(at.length===1&&at[0][0]==="onUpdate")&&at.length&&(Ln=Ze.__r3f)!=null&&Ln.parent&&Ti(Ze),Ze}function Rr(Ze){var St,pn;const Dn=(St=Ze.__r3f)==null||(pn=St.root)==null||pn.getState==null?void 0:pn.getState();Dn&&Dn.internal.frames===0&&Dn.invalidate()}function Ti(Ze){Ze.onUpdate==null||Ze.onUpdate(Ze)}function Fn(Ze,St){Ze.manual||(vt(Ze)?(Ze.left=St.width/-2,Ze.right=St.width/2,Ze.top=St.height/2,Ze.bottom=St.height/-2):Ze.aspect=St.width/St.height,Ze.updateProjectionMatrix(),Ze.updateMatrixWorld())}function Rn(Ze){return(Ze.eventObject||Ze.object).uuid+"/"+Ze.index+Ze.instanceId}function Hn(){var Ze;const St=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!St)return m.DefaultEventPriority;switch((Ze=St.event)==null?void 0:Ze.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return m.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return m.ContinuousEventPriority;default:return m.DefaultEventPriority}}function hr(Ze,St,pn,Dn){const Ln=pn.get(St);Ln&&(pn.delete(St),pn.size===0&&(Ze.delete(Dn),Ln.target.releasePointerCapture(Dn)))}function ti(Ze,St){const{internal:pn}=Ze.getState();pn.interaction=pn.interaction.filter(Dn=>Dn!==St),pn.initialHits=pn.initialHits.filter(Dn=>Dn!==St),pn.hovered.forEach((Dn,Ln)=>{(Dn.eventObject===St||Dn.object===St)&&pn.hovered.delete(Ln)}),pn.capturedMap.forEach((Dn,Ln)=>{hr(pn.capturedMap,St,Dn,Ln)})}function ii(Ze){function St(Fe){const{internal:at}=Ze.getState(),Oe=Fe.offsetX-at.initialClick[0],$e=Fe.offsetY-at.initialClick[1];return Math.round(Math.sqrt(Oe*Oe+$e*$e))}function pn(Fe){return Fe.filter(at=>["Move","Over","Enter","Out","Leave"].some(Oe=>{var $e;return($e=at.__r3f)==null?void 0:$e.handlers["onPointer"+Oe]}))}function Dn(Fe,at){const Oe=Ze.getState(),$e=new Set,dt=[],_t=at?at(Oe.internal.interaction):Oe.internal.interaction;for(let Me=0;Me<_t.length;Me++){const He=Br(_t[Me]);He&&(He.raycaster.camera=void 0)}Oe.previousRoot||Oe.events.compute==null||Oe.events.compute(Fe,Oe);function Tt(Me){const He=Br(Me);if(!He||!He.events.enabled||He.raycaster.camera===null)return[];if(He.raycaster.camera===void 0){var lt;He.events.compute==null||He.events.compute(Fe,He,(lt=He.previousRoot)==null?void 0:lt.getState()),He.raycaster.camera===void 0&&(He.raycaster.camera=null)}return He.raycaster.camera?He.raycaster.intersectObject(Me,!0):[]}let an=_t.flatMap(Tt).sort((Me,He)=>{const lt=Br(Me.object),Qt=Br(He.object);return!lt||!Qt?Me.distance-He.distance:Qt.events.priority-lt.events.priority||Me.distance-He.distance}).filter(Me=>{const He=Rn(Me);return $e.has(He)?!1:($e.add(He),!0)});Oe.events.filter&&(an=Oe.events.filter(an,Oe));for(const Me of an){let He=Me.object;for(;He;){var ln;(ln=He.__r3f)!=null&&ln.eventCount&&dt.push(Xo(Kn({},Me),{eventObject:He})),He=He.parent}}if("pointerId"in Fe&&Oe.internal.capturedMap.has(Fe.pointerId))for(let Me of Oe.internal.capturedMap.get(Fe.pointerId).values())$e.has(Rn(Me.intersection))||dt.push(Me.intersection);return dt}function Ln(Fe,at,Oe,$e){const dt=Ze.getState();if(Fe.length){const _t={stopped:!1};for(const Tt of Fe){const an=Br(Tt.object)||dt,{raycaster:ln,pointer:Me,camera:He,internal:lt}=an,Qt=new w.Vector3(Me.x,Me.y,0).unproject(He),wn=Ai=>{var Xn,Zr;return(Xn=(Zr=lt.capturedMap.get(Ai))==null?void 0:Zr.has(Tt.eventObject))!=null?Xn:!1},Gn=Ai=>{const Xn={intersection:Tt,target:at.target};lt.capturedMap.has(Ai)?lt.capturedMap.get(Ai).set(Tt.eventObject,Xn):lt.capturedMap.set(Ai,new Map([[Tt.eventObject,Xn]])),at.target.setPointerCapture(Ai)},gr=Ai=>{const Xn=lt.capturedMap.get(Ai);Xn&&hr(lt.capturedMap,Tt.eventObject,Xn,Ai)};let Wr={};for(let Ai in at){let Xn=at[Ai];typeof Xn!="function"&&(Wr[Ai]=Xn)}let mi=Xo(Kn(Kn({},Tt),Wr),{pointer:Me,intersections:Fe,stopped:_t.stopped,delta:Oe,unprojectedPoint:Qt,ray:ln.ray,camera:He,stopPropagation(){const Ai="pointerId"in at&&lt.capturedMap.get(at.pointerId);if((!Ai||Ai.has(Tt.eventObject))&&(mi.stopped=_t.stopped=!0,lt.hovered.size&&Array.from(lt.hovered.values()).find(Xn=>Xn.eventObject===Tt.eventObject))){const Xn=Fe.slice(0,Fe.indexOf(Tt));lr([...Xn,Tt])}},target:{hasPointerCapture:wn,setPointerCapture:Gn,releasePointerCapture:gr},currentTarget:{hasPointerCapture:wn,setPointerCapture:Gn,releasePointerCapture:gr},nativeEvent:at});if($e(mi),_t.stopped===!0)break}}return Fe}function lr(Fe){const{internal:at}=Ze.getState();for(const Oe of at.hovered.values())if(!Fe.length||!Fe.find($e=>$e.object===Oe.object&&$e.index===Oe.index&&$e.instanceId===Oe.instanceId)){const dt=Oe.eventObject.__r3f,_t=dt==null?void 0:dt.handlers;if(at.hovered.delete(Rn(Oe)),dt!=null&&dt.eventCount){const Tt=Xo(Kn({},Oe),{intersections:Fe});_t.onPointerOut==null||_t.onPointerOut(Tt),_t.onPointerLeave==null||_t.onPointerLeave(Tt)}}}function je(Fe,at){for(let Oe=0;Oe<at.length;Oe++){const $e=at[Oe].__r3f;$e==null||$e.handlers.onPointerMissed==null||$e.handlers.onPointerMissed(Fe)}}function Le(Fe){switch(Fe){case"onPointerLeave":case"onPointerCancel":return()=>lr([]);case"onLostPointerCapture":return at=>{const{internal:Oe}=Ze.getState();"pointerId"in at&&Oe.capturedMap.has(at.pointerId)&&requestAnimationFrame(()=>{Oe.capturedMap.has(at.pointerId)&&(Oe.capturedMap.delete(at.pointerId),lr([]))})}}return function(Oe){const{onPointerMissed:$e,internal:dt}=Ze.getState();dt.lastEvent.current=Oe;const _t=Fe==="onPointerMove",Tt=Fe==="onClick"||Fe==="onContextMenu"||Fe==="onDoubleClick",ln=Dn(Oe,_t?pn:void 0),Me=Tt?St(Oe):0;Fe==="onPointerDown"&&(dt.initialClick=[Oe.offsetX,Oe.offsetY],dt.initialHits=ln.map(lt=>lt.eventObject)),Tt&&!ln.length&&Me<=2&&(je(Oe,dt.interaction),$e&&$e(Oe)),_t&&lr(ln);function He(lt){const Qt=lt.eventObject,wn=Qt.__r3f,Gn=wn==null?void 0:wn.handlers;if(wn!=null&&wn.eventCount)if(_t){if(Gn.onPointerOver||Gn.onPointerEnter||Gn.onPointerOut||Gn.onPointerLeave){const gr=Rn(lt),Wr=dt.hovered.get(gr);Wr?Wr.stopped&&lt.stopPropagation():(dt.hovered.set(gr,lt),Gn.onPointerOver==null||Gn.onPointerOver(lt),Gn.onPointerEnter==null||Gn.onPointerEnter(lt))}Gn.onPointerMove==null||Gn.onPointerMove(lt)}else{const gr=Gn[Fe];gr?(!Tt||dt.initialHits.includes(Qt))&&(je(Oe,dt.interaction.filter(Wr=>!dt.initialHits.includes(Wr))),gr(lt)):Tt&&dt.initialHits.includes(Qt)&&je(Oe,dt.interaction.filter(Wr=>!dt.initialHits.includes(Wr)))}}Ln(ln,Oe,Me,He)}}return{handlePointer:Le}}const Or=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Bo=Ze=>!!(Ze!=null&&Ze.render),Kr=d.createContext(null),co=(Ze,St)=>{const pn=(0,s.Z)((Le,Fe)=>{const at=new w.Vector3,Oe=new w.Vector3,$e=new w.Vector3;function dt(Me=Fe().camera,He=Oe,lt=Fe().size){const{width:Qt,height:wn,top:Gn,left:gr}=lt,Wr=Qt/wn;He instanceof w.Vector3?$e.copy(He):$e.set(...He);const mi=Me.getWorldPosition(at).distanceTo($e);if(vt(Me))return{width:Qt/Me.zoom,height:wn/Me.zoom,top:Gn,left:gr,factor:1,distance:mi,aspect:Wr};{const Ai=Me.fov*Math.PI/180,Xn=2*Math.tan(Ai/2)*mi,Zr=Xn*(Qt/wn);return{width:Zr,height:Xn,top:Gn,left:gr,factor:Qt/Zr,distance:mi,aspect:Wr}}}let _t;const Tt=Me=>Le(He=>({performance:Xo(Kn({},He.performance),{current:Me})})),an=new w.Vector2;return{set:Le,get:Fe,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(Me=1)=>Ze(Fe(),Me),advance:(Me,He)=>St(Me,He,Fe()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new w.Clock,pointer:an,mouse:an,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Me=Fe();_t&&clearTimeout(_t),Me.performance.current!==Me.performance.min&&Tt(Me.performance.min),_t=setTimeout(()=>Tt(Fe().performance.max),Me.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:dt},setEvents:Me=>Le(He=>Xo(Kn({},He),{events:Kn(Kn({},He.events),Me)})),setSize:(Me,He,lt,Qt,wn)=>{const Gn=Fe().camera,gr={width:Me,height:He,top:Qt||0,left:wn||0,updateStyle:lt};Le(Wr=>({size:gr,viewport:Kn(Kn({},Wr.viewport),dt(Gn,Oe,gr))}))},setDpr:Me=>Le(He=>{const lt=xr(Me);return{viewport:Xo(Kn({},He.viewport),{dpr:lt,initialDpr:He.viewport.initialDpr||lt})}}),setFrameloop:(Me="always")=>{const He=Fe().clock;He.stop(),He.elapsedTime=0,Me!=="never"&&(He.start(),He.elapsedTime=0),Le(()=>({frameloop:Me}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:d.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Me,He,lt)=>{const Qt=Fe().internal;return Qt.priority=Qt.priority+(He>0?1:0),Qt.subscribers.push({ref:Me,priority:He,store:lt}),Qt.subscribers=Qt.subscribers.sort((wn,Gn)=>wn.priority-Gn.priority),()=>{const wn=Fe().internal;wn!=null&&wn.subscribers&&(wn.priority=wn.priority-(He>0?1:0),wn.subscribers=wn.subscribers.filter(Gn=>Gn.ref!==Me))}}}}}),Dn=pn.getState();let Ln=Dn.size,lr=Dn.viewport.dpr,je=Dn.camera;return pn.subscribe(()=>{const{camera:Le,size:Fe,viewport:at,gl:Oe,set:$e}=pn.getState();if(Fe!==Ln||at.dpr!==lr){var dt;Ln=Fe,lr=at.dpr,Fn(Le,Fe),Oe.setPixelRatio(at.dpr);const _t=(dt=Fe.updateStyle)!=null?dt:typeof HTMLCanvasElement!="undefined"&&Oe.domElement instanceof HTMLCanvasElement;Oe.setSize(Fe.width,Fe.height,_t)}Le!==je&&(je=Le,$e(_t=>({viewport:Kn(Kn({},_t.viewport),_t.viewport.getCurrentViewport(Le))})))}),pn.subscribe(Le=>Ze(Le)),pn};function to(Ze,St){const pn={callback:Ze};return St.add(pn),()=>void St.delete(pn)}let Cs,Ys=new Set,va=new Set,Ss=new Set;const ca=Ze=>to(Ze,Ys),Ls=Ze=>to(Ze,va),as=Ze=>to(Ze,Ss);function zi(Ze,St){if(Ze.size)for(const{callback:pn}of Ze.values())pn(St)}function no(Ze,St){switch(Ze){case"before":return zi(Ys,St);case"after":return zi(va,St);case"tail":return zi(Ss,St)}}let ds,hs;function Sr(Ze,St,pn){let Dn=St.clock.getDelta();for(St.frameloop==="never"&&typeof Ze=="number"&&(Dn=Ze-St.clock.elapsedTime,St.clock.oldTime=St.clock.elapsedTime,St.clock.elapsedTime=Ze),ds=St.internal.subscribers,Cs=0;Cs<ds.length;Cs++)hs=ds[Cs],hs.ref.current(hs.store.getState(),Dn,pn);return!St.internal.priority&&St.gl.render&&St.gl.render(St.scene,St.camera),St.internal.frames=Math.max(0,St.internal.frames-1),St.frameloop==="always"?1:St.internal.frames}function ji(Ze){let St=!1,pn,Dn,Ln;function lr(Fe){Dn=requestAnimationFrame(lr),St=!0,pn=0,no("before",Fe);for(const Oe of Ze.values()){var at;Ln=Oe.store.getState(),Ln.internal.active&&(Ln.frameloop==="always"||Ln.internal.frames>0)&&!((at=Ln.gl.xr)!=null&&at.isPresenting)&&(pn+=Sr(Fe,Ln))}if(no("after",Fe),pn===0)return no("tail",Fe),St=!1,cancelAnimationFrame(Dn)}function je(Fe,at=1){var Oe;if(!Fe)return Ze.forEach($e=>je($e.store.getState()),at);(Oe=Fe.gl.xr)!=null&&Oe.isPresenting||!Fe.internal.active||Fe.frameloop==="never"||(Fe.internal.frames=Math.min(60,Fe.internal.frames+at),St||(St=!0,requestAnimationFrame(lr)))}function Le(Fe,at=!0,Oe,$e){if(at&&no("before",Fe),Oe)Sr(Fe,Oe,$e);else for(const dt of Ze.values())Sr(Fe,dt.store.getState());at&&no("after",Fe)}return{loop:lr,invalidate:je,advance:Le}}function Pi(Ze){const St=d.useRef(null);return ft(()=>void(St.current=Ze.current.__r3f),[Ze]),St}function pa(){const Ze=d.useContext(Kr);if(!Ze)throw new Error("R3F: Hooks can only be used within the Canvas component!");return Ze}function La(Ze=pn=>pn,St){return pa()(Ze,St)}function fs(Ze,St=0){const pn=pa(),Dn=pn.getState().internal.subscribe,Ln=Pt(Ze);return ft(()=>Dn(Ln,St,pn),[St,Dn,pn]),null}function Lo(Ze){return d.useMemo(()=>zr(Ze),[Ze])}function Zi(Ze,St){return function(pn,...Dn){const Ln=new pn;return Ze&&Ze(Ln),Promise.all(Dn.map(lr=>new Promise((je,Le)=>Ln.load(lr,Fe=>{Fe.scene&&Object.assign(Fe,zr(Fe.scene)),je(Fe)},St,Fe=>Le(new Error(`Could not load ${lr}: ${Fe.message})`))))))}}function ka(Ze,St,pn,Dn){const Ln=Array.isArray(St)?St:[St],lr=(0,ae.Rq)(Zi(pn,Dn),[Ze,...Ln],{equal:Er.equ});return Array.isArray(St)?lr:lr[0]}ka.preload=function(Ze,St,pn){const Dn=Array.isArray(St)?St:[St];return(0,ae.MA)(Zi(pn),[Ze,...Dn])},ka.clear=function(Ze,St){const pn=Array.isArray(St)?St:[St];return(0,ae.ZH)([Ze,...pn])};const _a=new Map,{invalidate:Jo,advance:ko}=ji(_a),{reconciler:bo,applyProps:ks}=nt(_a,Hn),Ea={objects:"shallow",strict:!1},zs=(Ze,St)=>{const pn=typeof Ze=="function"?Ze(St):Ze;return Bo(pn)?pn:new w.WebGLRenderer(Kn({powerPreference:"high-performance",canvas:St,antialias:!0,alpha:!0},Ze))};function Ro(Ze,St){if(St)return St;if(typeof HTMLCanvasElement!="undefined"&&Ze instanceof HTMLCanvasElement&&Ze.parentElement){const{width:pn,height:Dn,top:Ln,left:lr}=Ze.parentElement.getBoundingClientRect();return{width:pn,height:Dn,top:Ln,left:lr}}else if(typeof OffscreenCanvas!="undefined"&&Ze instanceof OffscreenCanvas)return{width:Ze.width,height:Ze.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function gs(Ze){const St=_a.get(Ze),pn=St==null?void 0:St.fiber,Dn=St==null?void 0:St.store;St&&J.warn("R3F.createRoot should only be called once!");const Ln=typeof reportError=="function"?reportError:J.error,lr=Dn||co(Jo,ko),je=pn||bo.createContainer(lr,m.ConcurrentRoot,null,!1,null,"",Ln,null);St||_a.set(Ze,{fiber:je,store:lr});let Le,Fe=!1,at;return{configure(Oe={}){let{gl:$e,size:dt,scene:_t,events:Tt,onCreated:an,shadows:ln=!1,linear:Me=!1,flat:He=!1,legacy:lt=!1,orthographic:Qt=!1,frameloop:wn="always",dpr:Gn=[1,2],performance:gr,raycaster:Wr,camera:mi,onPointerMissed:Ai}=Oe,Xn=lr.getState(),Zr=Xn.gl;Xn.gl||Xn.set({gl:Zr=zs($e,Ze)});let Gi=Xn.raycaster;Gi||Xn.set({raycaster:Gi=new w.Raycaster});const qo=Wr||{},{params:Hi}=qo,Ni=_n(qo,["params"]);if(Er.equ(Ni,Gi,Ea)||ks(Gi,Kn({},Ni)),Er.equ(Hi,Gi.params,Ea)||ks(Gi,{params:Kn(Kn({},Gi.params),Hi)}),!Xn.camera||Xn.camera===at&&!Er.equ(at,mi,Ea)){at=mi;const Qi=mi instanceof w.Camera,qs=Qi?mi:Qt?new w.OrthographicCamera(0,0,0,0,.1,1e3):new w.PerspectiveCamera(75,0,.1,1e3);Qi||(qs.position.z=5,mi&&ks(qs,mi),!Xn.camera&&!(mi!=null&&mi.rotation)&&qs.lookAt(0,0,0)),Xn.set({camera:qs})}if(!Xn.scene){let Qi;_t instanceof w.Scene?Qi=_t:(Qi=new w.Scene,_t&&ks(Qi,_t)),Xn.set({scene:eo(Qi)})}if(!Xn.xr){const Qi=(Ir,ro)=>{const Io=lr.getState();Io.frameloop!=="never"&&ko(Ir,!0,Io,ro)},qs=()=>{const Ir=lr.getState();Ir.gl.xr.enabled=Ir.gl.xr.isPresenting,Ir.gl.xr.setAnimationLoop(Ir.gl.xr.isPresenting?Qi:null),Ir.gl.xr.isPresenting||Jo(Ir)},Ql={connect(){const Ir=lr.getState().gl;Ir.xr.addEventListener("sessionstart",qs),Ir.xr.addEventListener("sessionend",qs)},disconnect(){const Ir=lr.getState().gl;Ir.xr.removeEventListener("sessionstart",qs),Ir.xr.removeEventListener("sessionend",qs)}};Zr.xr&&Ql.connect(),Xn.set({xr:Ql})}if(Zr.shadowMap){const Qi=Zr.shadowMap.enabled,qs=Zr.shadowMap.type;if(Zr.shadowMap.enabled=!!ln,Er.boo(ln))Zr.shadowMap.type=w.PCFSoftShadowMap;else if(Er.str(ln)){var Js;const Ql={basic:w.BasicShadowMap,percentage:w.PCFShadowMap,soft:w.PCFSoftShadowMap,variance:w.VSMShadowMap};Zr.shadowMap.type=(Js=Ql[ln])!=null?Js:w.PCFSoftShadowMap}else Er.obj(ln)&&Object.assign(Zr.shadowMap,ln);(Qi!==Zr.shadowMap.enabled||qs!==Zr.shadowMap.type)&&(Zr.shadowMap.needsUpdate=!0)}const po=Ct();po&&("enabled"in po?po.enabled=!lt:"legacyMode"in po&&(po.legacyMode=lt)),ks(Zr,{outputEncoding:Me?3e3:3001,toneMapping:He?w.NoToneMapping:w.ACESFilmicToneMapping}),Xn.legacy!==lt&&Xn.set(()=>({legacy:lt})),Xn.linear!==Me&&Xn.set(()=>({linear:Me})),Xn.flat!==He&&Xn.set(()=>({flat:He})),$e&&!Er.fun($e)&&!Bo($e)&&!Er.equ($e,Zr,Ea)&&ks(Zr,$e),Tt&&!Xn.events.handlers&&Xn.set({events:Tt(lr)});const ua=Ro(Ze,dt);return Er.equ(ua,Xn.size,Ea)||Xn.setSize(ua.width,ua.height,ua.updateStyle,ua.top,ua.left),Gn&&Xn.viewport.dpr!==xr(Gn)&&Xn.setDpr(Gn),Xn.frameloop!==wn&&Xn.setFrameloop(wn),Xn.onPointerMissed||Xn.set({onPointerMissed:Ai}),gr&&!Er.equ(gr,Xn.performance,Ea)&&Xn.set(Qi=>({performance:Kn(Kn({},Qi.performance),gr)})),Le=an,Fe=!0,this},render(Oe){return Fe||this.configure(),bo.updateContainer(d.createElement(ba,{store:lr,children:Oe,onCreated:Le,rootElement:Ze}),je,null,()=>{}),lr},unmount(){Za(Ze)}}}function zo(Ze,St,pn){J.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const Dn=gs(St);return Dn.configure(pn),Dn.render(Ze)}function ba({store:Ze,children:St,onCreated:pn,rootElement:Dn}){return ft(()=>{const Ln=Ze.getState();Ln.set(lr=>({internal:Xo(Kn({},lr.internal),{active:!0})})),pn&&pn(Ln),Ze.getState().events.connected||Ln.events.connect==null||Ln.events.connect(Dn)},[]),d.createElement(Kr.Provider,{value:Ze},St)}function Za(Ze,St){const pn=_a.get(Ze),Dn=pn==null?void 0:pn.fiber;if(Dn){const Ln=pn==null?void 0:pn.store.getState();Ln&&(Ln.internal.active=!1),bo.updateContainer(null,Dn,null,()=>{Ln&&setTimeout(()=>{try{var lr,je,Le,Fe;Ln.events.disconnect==null||Ln.events.disconnect(),(lr=Ln.gl)==null||(je=lr.renderLists)==null||je.dispose==null||je.dispose(),(Le=Ln.gl)==null||Le.forceContextLoss==null||Le.forceContextLoss(),(Fe=Ln.gl)!=null&&Fe.xr&&Ln.xr.disconnect(),Fi(Ln),_a.delete(Ze),St&&St(Ze)}catch(at){}},500)})}}function fc(Ze,St,pn){return d.createElement(Ma,{key:St.uuid,children:Ze,container:St,state:pn})}function Ma({state:Ze={},children:St,container:pn}){const $e=Ze,{events:Dn,size:Ln}=$e,lr=_n($e,["events","size"]),je=pa(),[Le]=d.useState(()=>new w.Raycaster),[Fe]=d.useState(()=>new w.Vector2),at=d.useCallback((dt,_t)=>{const Tt=Kn({},dt);Object.keys(dt).forEach(ln=>{(Or.includes(ln)||dt[ln]!==_t[ln]&&_t[ln])&&delete Tt[ln]});let an;if(_t&&Ln){const ln=_t.camera;an=dt.viewport.getCurrentViewport(ln,new w.Vector3,Ln),ln!==dt.camera&&Fn(ln,Ln)}return Kn(Xo(Kn({},Tt),{scene:pn,raycaster:Le,pointer:Fe,mouse:Fe,previousRoot:je,events:Kn(Kn(Kn({},dt.events),_t==null?void 0:_t.events),Dn),size:Kn(Kn({},dt.size),Ln),viewport:Kn(Kn({},dt.viewport),an)}),lr)},[Ze]),[Oe]=d.useState(()=>{const dt=je.getState();return(0,s.Z)((Tt,an)=>Xo(Kn(Xo(Kn({},dt),{scene:pn,raycaster:Le,pointer:Fe,mouse:Fe,previousRoot:je,events:Kn(Kn({},dt.events),Dn),size:Kn(Kn({},dt.size),Ln)}),lr),{set:Tt,get:an,setEvents:ln=>Tt(Me=>Xo(Kn({},Me),{events:Kn(Kn({},Me.events),ln)}))}))});return d.useEffect(()=>{const dt=je.subscribe(_t=>Oe.setState(Tt=>at(_t,Tt)));return()=>{dt(),Oe.destroy()}},[]),d.useEffect(()=>{Oe.setState(dt=>at(je.getState(),dt))},[at]),d.createElement(d.Fragment,null,bo.createPortal(d.createElement(Kr.Provider,{value:Oe},St),Oe,null))}bo.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:d.version});const Nc=d.unstable_act},45953:function(u,n,A){"use strict";A.r(n),A.d(n,{Canvas:function(){return Ti},ReactThreeFiber:function(){return w.t},_roots:function(){return w.w},act:function(){return w.v},addAfterEffect:function(){return w.o},addEffect:function(){return w.n},addTail:function(){return w.p},advance:function(){return w.m},applyProps:function(){return w.j},context:function(){return w.f},createEvents:function(){return w.c},createPortal:function(){return w.g},createRoot:function(){return w.b},dispose:function(){return w.k},events:function(){return Ar},extend:function(){return w.e},flushGlobalEffects:function(){return w.q},getRootState:function(){return w.s},invalidate:function(){return w.l},reconciler:function(){return w.h},render:function(){return w.r},unmountComponentAtNode:function(){return w.d},useFrame:function(){return w.A},useGraph:function(){return w.C},useInstanceHandle:function(){return w.x},useLoader:function(){return w.D},useStore:function(){return w.y},useThree:function(){return w.z}});var w=A(24121),d=A(87462),m=A(67294),s=A(99477),E=A(20296),H=A.n(E);function ee(Fn){let{debounce:Rn,scroll:Hn,polyfill:hr,offsetSize:ti}=Fn===void 0?{debounce:0,scroll:!1,offsetSize:!1}:Fn;const ii=hr||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!ii)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Or,Bo]=(0,m.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Kr=(0,m.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Or}),co=Rn?typeof Rn=="number"?Rn:Rn.scroll:null,to=Rn?typeof Rn=="number"?Rn:Rn.resize:null,Cs=(0,m.useRef)(!1);(0,m.useEffect)(()=>(Cs.current=!0,()=>void(Cs.current=!1)));const[Ys,va,Ss]=(0,m.useMemo)(()=>{const zi=()=>{if(!Kr.current.element)return;const{left:no,top:ds,width:hs,height:Sr,bottom:ji,right:Pi,x:pa,y:La}=Kr.current.element.getBoundingClientRect(),fs={left:no,top:ds,width:hs,height:Sr,bottom:ji,right:Pi,x:pa,y:La};Kr.current.element instanceof HTMLElement&&ti&&(fs.height=Kr.current.element.offsetHeight,fs.width=Kr.current.element.offsetWidth),Object.freeze(fs),Cs.current&&!Mt(Kr.current.lastBounds,fs)&&Bo(Kr.current.lastBounds=fs)};return[zi,to?H()(zi,to):zi,co?H()(zi,co):zi]},[Bo,ti,co,to]);function ca(){Kr.current.scrollContainers&&(Kr.current.scrollContainers.forEach(zi=>zi.removeEventListener("scroll",Ss,!0)),Kr.current.scrollContainers=null),Kr.current.resizeObserver&&(Kr.current.resizeObserver.disconnect(),Kr.current.resizeObserver=null)}function Ls(){Kr.current.element&&(Kr.current.resizeObserver=new ii(Ss),Kr.current.resizeObserver.observe(Kr.current.element),Hn&&Kr.current.scrollContainers&&Kr.current.scrollContainers.forEach(zi=>zi.addEventListener("scroll",Ss,{capture:!0,passive:!0})))}const as=zi=>{!zi||zi===Kr.current.element||(ca(),Kr.current.element=zi,Kr.current.scrollContainers=pe(zi),Ls())};return J(Ss,!!Hn),ae(va),(0,m.useEffect)(()=>{ca(),Ls()},[Hn,Ss,va]),(0,m.useEffect)(()=>ca,[]),[as,Or,Ys]}function ae(Fn){(0,m.useEffect)(()=>{const Rn=Fn;return window.addEventListener("resize",Rn),()=>void window.removeEventListener("resize",Rn)},[Fn])}function J(Fn,Rn){(0,m.useEffect)(()=>{if(Rn){const Hn=Fn;return window.addEventListener("scroll",Hn,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",Hn,!0)}},[Fn,Rn])}function pe(Fn){const Rn=[];if(!Fn||Fn===document.body)return Rn;const{overflow:Hn,overflowX:hr,overflowY:ti}=window.getComputedStyle(Fn);return[Hn,hr,ti].some(ii=>ii==="auto"||ii==="scroll")&&Rn.push(Fn),[...Rn,...pe(Fn.parentElement)]}const ue=["x","y","top","bottom","left","right","width","height"],Mt=(Fn,Rn)=>ue.every(Hn=>Fn[Hn]===Rn[Hn]);var nt=Object.defineProperty,Ve=Object.defineProperties,it=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,pt=(Fn,Rn,Hn)=>Rn in Fn?nt(Fn,Rn,{enumerable:!0,configurable:!0,writable:!0,value:Hn}):Fn[Rn]=Hn,ft=(Fn,Rn)=>{for(var Hn in Rn||(Rn={}))Ct.call(Rn,Hn)&&pt(Fn,Hn,Rn[Hn]);if(At)for(var Hn of At(Rn))vt.call(Rn,Hn)&&pt(Fn,Hn,Rn[Hn]);return Fn},Pt=(Fn,Rn)=>Ve(Fn,it(Rn));function wt(Fn,Rn,Hn){if(!Fn)return;if(Hn(Fn)===!0)return Fn;let hr=Rn?Fn.return:Fn.child;for(;hr;){const ti=wt(hr,Rn,Hn);if(ti)return ti;hr=Rn?null:hr.sibling}}function qt(Fn){try{return Object.defineProperties(Fn,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(Rn){return Fn}}const Ft=qt(m.createContext(null));class An extends m.Component{render(){return m.createElement(Ft.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:rr,ReactCurrentDispatcher:xr}=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Br(){const Fn=m.useContext(Ft);if(Fn===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const Rn=m.useId();return m.useMemo(()=>{for(const hr of[rr==null?void 0:rr.current,Fn,Fn==null?void 0:Fn.alternate]){if(!hr)continue;const ti=wt(hr,!1,ii=>{let Or=ii.memoizedState;for(;Or;){if(Or.memoizedState===Rn)return!0;Or=Or.next}});if(ti)return ti}},[Fn,Rn])}function Er(){const Fn=Br(),Rn=React.useMemo(()=>wt(Fn,!0,Hn=>{var hr;return((hr=Hn.stateNode)==null?void 0:hr.containerInfo)!=null}),[Fn]);return Rn==null?void 0:Rn.stateNode.containerInfo}function zr(Fn){const Rn=Br(),Hn=React.useRef();return React.useLayoutEffect(()=>{var hr;Hn.current=(hr=wt(Rn,!1,ti=>typeof ti.type=="string"&&(Fn===void 0||ti.type===Fn)))==null?void 0:hr.stateNode},[Rn]),Hn}function Fi(Fn){const Rn=Br(),Hn=React.useRef();return React.useLayoutEffect(()=>{var hr;Hn.current=(hr=wt(Rn,!0,ti=>typeof ti.type=="string"&&(Fn===void 0||ti.type===Fn)))==null?void 0:hr.stateNode},[Rn]),Hn}function eo(){var Fn,Rn;const Hn=Br(),[hr]=m.useState(()=>new Map);hr.clear();let ti=Hn;for(;ti;){const ii=(Fn=ti.type)==null?void 0:Fn._context;ii&&ii!==Ft&&!hr.has(ii)&&hr.set(ii,(Rn=xr==null?void 0:xr.current)==null?void 0:Rn.readContext(qt(ii))),ti=ti.return}return hr}function Gr(){const Fn=eo();return m.useMemo(()=>Array.from(Fn.keys()).reduce((Rn,Hn)=>hr=>m.createElement(Rn,null,m.createElement(Hn.Provider,Pt(ft({},hr),{value:Fn.get(Hn)}))),Rn=>m.createElement(An,ft({},Rn))),[Fn])}var Yo=A(32576),jn=A(76525),tn=A(63840);const Bn={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ar(Fn){const{handlePointer:Rn}=(0,w.c)(Fn);return{priority:1,enabled:!0,compute(Hn,hr,ti){hr.pointer.set(Hn.offsetX/hr.size.width*2-1,-(Hn.offsetY/hr.size.height)*2+1),hr.raycaster.setFromCamera(hr.pointer,hr.camera)},connected:void 0,handlers:Object.keys(Bn).reduce((Hn,hr)=>Xo(Kn({},Hn),{[hr]:Rn(hr)}),{}),update:()=>{var Hn;const{events:hr,internal:ti}=Fn.getState();(Hn=ti.lastEvent)!=null&&Hn.current&&hr.handlers&&hr.handlers.onPointerMove(ti.lastEvent.current)},connect:Hn=>{var hr;const{set:ti,events:ii}=Fn.getState();ii.disconnect==null||ii.disconnect(),ti(Or=>({events:Xo(Kn({},Or.events),{connected:Hn})})),Object.entries((hr=ii.handlers)!=null?hr:[]).forEach(([Or,Bo])=>{const[Kr,co]=Bn[Or];Hn.addEventListener(Kr,Bo,{passive:co})})},disconnect:()=>{const{set:Hn,events:hr}=Fn.getState();if(hr.connected){var ti;Object.entries((ti=hr.handlers)!=null?ti:[]).forEach(([ii,Or])=>{if(hr&&hr.connected instanceof HTMLElement){const[Bo]=Bn[ii];hr.connected.removeEventListener(Bo,Or)}}),Hn(ii=>({events:Xo(Kn({},ii.events),{connected:void 0})}))}}}}const Rr=m.forwardRef(function(ji,Sr){var Pi=ji,{children:Rn,fallback:Hn,resize:hr,style:ti,gl:ii,events:Or=Ar,eventSource:Bo,eventPrefix:Kr,shadows:co,linear:to,flat:Cs,legacy:Ys,orthographic:va,frameloop:Ss,dpr:ca,performance:Ls,raycaster:as,camera:zi,onPointerMissed:no,onCreated:ds}=Pi,hs=_n(Pi,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"]);m.useMemo(()=>(0,w.e)(s),[]);const pa=Gr(),[La,fs]=ee(Kn({scroll:!0,debounce:{scroll:50,resize:0}},hr)),Lo=m.useRef(null),Zi=m.useRef(null);m.useImperativeHandle(Sr,()=>Lo.current);const ka=(0,w.u)(no),[_a,Jo]=m.useState(!1),[ko,bo]=m.useState(!1);if(_a)throw _a;if(ko)throw ko;const ks=m.useRef(null);(0,w.a)(()=>{const zs=Lo.current;fs.width>0&&fs.height>0&&zs&&(ks.current||(ks.current=(0,w.b)(zs)),ks.current.configure({gl:ii,events:Or,shadows:co,linear:to,flat:Cs,legacy:Ys,orthographic:va,frameloop:Ss,dpr:ca,performance:Ls,raycaster:as,camera:zi,size:fs,onPointerMissed:(...Ro)=>ka.current==null?void 0:ka.current(...Ro),onCreated:Ro=>{Ro.events.connect==null||Ro.events.connect(Bo?(0,w.i)(Bo)?Bo.current:Bo:Zi.current),Kr&&Ro.setEvents({compute:(gs,zo)=>{const ba=gs[Kr+"X"],Za=gs[Kr+"Y"];zo.pointer.set(ba/zo.size.width*2-1,-(Za/zo.size.height)*2+1),zo.raycaster.setFromCamera(zo.pointer,zo.camera)}}),ds==null||ds(Ro)}}),ks.current.render(m.createElement(pa,null,m.createElement(w.E,{set:bo},m.createElement(m.Suspense,{fallback:m.createElement(w.B,{set:Jo})},Rn)))))}),m.useEffect(()=>{const zs=Lo.current;if(zs)return()=>(0,w.d)(zs)},[]);const Ea=Bo?"none":"auto";return m.createElement("div",(0,d.Z)({ref:Zi,style:Kn({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Ea},ti)},hs),m.createElement("div",{ref:La,style:{width:"100%",height:"100%"}},m.createElement("canvas",{ref:Lo,style:{display:"block"}},Hn)))}),Ti=m.forwardRef(function(Rn,Hn){return m.createElement(An,null,m.createElement(Rr,(0,d.Z)({},Rn,{ref:Hn})))})},88208:function(u,n,A){"use strict";var w=A(87537),d=A.n(w),m=A(23645),s=A.n(m),E=s()(d());E.push([u.id,`/* stylelint-disable property-no-vendor-prefix */
.liner--GyAEo {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
}
`,"",{version:3,sources:["webpack://./src/pages/three/index.module.less"],names:[],mappings:"AAAA,gDAAgD;AAChD;EACE,oDAAoD;EACpD,6BAA6B;EAC7B,oCAAoC;EACpC,eAAe;EACf,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,wCAAgC;UAAhC,gCAAgC;AAClC",sourcesContent:[`/* stylelint-disable property-no-vendor-prefix */
.liner {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
`],sourceRoot:""}]),E.locals={liner:"liner--GyAEo"},n.Z=E},20296:function(u){function n(A,w,d){var m,s,E,H,ee;w==null&&(w=100);function ae(){var pe=Date.now()-H;pe<w&&pe>=0?m=setTimeout(ae,w-pe):(m=null,d||(ee=A.apply(E,s),E=s=null))}var J=function(){E=this,s=arguments,H=Date.now();var pe=d&&!m;return m||(m=setTimeout(ae,w)),pe&&(ee=A.apply(E,s),E=s=null),ee};return J.clear=function(){m&&(clearTimeout(m),m=null)},J.flush=function(){m&&(ee=A.apply(E,s),E=s=null,clearTimeout(m),m=null)},J}n.debounce=n,u.exports=n},75889:function(u,n,A){"use strict";var w=A(64836),d=A(18698);Object.defineProperty(n,"__esModule",{value:!0}),n.default=Mt;var m=w(A(10434)),s=w(A(27424)),E=ue(A(67294)),H=A(45953),ee=A(19154),ae=ue(A(22967)),J=w(A(90209));function pe(Ve){if(typeof WeakMap!="function")return null;var it=new WeakMap,At=new WeakMap;return(pe=function(vt){return vt?At:it})(Ve)}function ue(Ve,it){if(!it&&Ve&&Ve.__esModule)return Ve;if(Ve===null||d(Ve)!=="object"&&typeof Ve!="function")return{default:Ve};var At=pe(it);if(At&&At.has(Ve))return At.get(Ve);var Ct={},vt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pt in Ve)if(pt!=="default"&&Object.prototype.hasOwnProperty.call(Ve,pt)){var ft=vt?Object.getOwnPropertyDescriptor(Ve,pt):null;ft&&(ft.get||ft.set)?Object.defineProperty(Ct,pt,ft):Ct[pt]=Ve[pt]}return Ct.default=Ve,At&&At.set(Ve,Ct),Ct}function Mt(){return E.default.createElement("div",{style:{width:"100%",height:"calc(100vh - 232px)",background:"#12071f"}},E.default.createElement("h2",{className:J.default.liner},"React Three Fiber"),E.default.createElement(H.Canvas,{camera:{position:[0,0,1]}},E.default.createElement(nt,null)))}function nt(Ve){var it=(0,E.useRef)(),At=(0,E.useState)(function(){return ae.inSphere(new Float32Array(5e3),{radius:1.5})}),Ct=(0,s.default)(At,1),vt=Ct[0];return(0,H.useFrame)(function(pt,ft){it.current.rotation.x-=ft/10,it.current.rotation.y-=ft/15}),E.default.createElement("group",{rotation:[0,0,Math.PI/4]},E.default.createElement(ee.Points,(0,m.default)({ref:it,positions:vt,stride:3,frustumCulled:!1},Ve),E.default.createElement(ee.PointMaterial,{transparent:!0,color:"#ffa0e0",size:.005,sizeAttenuation:!0,depthWrite:!1})))}},7378:function(u){var n=NaN,A="[object Symbol]",w=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,s=/^0o[0-7]+$/i,E=parseInt,H=Object.prototype,ee=H.toString;function ae(Ve,it,At){return Ve===Ve&&(At!==void 0&&(Ve=Ve<=At?Ve:At),it!==void 0&&(Ve=Ve>=it?Ve:it)),Ve}function J(Ve){var it=typeof Ve;return!!Ve&&(it=="object"||it=="function")}function pe(Ve){return!!Ve&&typeof Ve=="object"}function ue(Ve){return typeof Ve=="symbol"||pe(Ve)&&ee.call(Ve)==A}function Mt(Ve){if(typeof Ve=="number")return Ve;if(ue(Ve))return n;if(J(Ve)){var it=typeof Ve.valueOf=="function"?Ve.valueOf():Ve;Ve=J(it)?it+"":it}if(typeof Ve!="string")return Ve===0?Ve:+Ve;Ve=Ve.replace(w,"");var At=m.test(Ve);return At||s.test(Ve)?E(Ve.slice(2),At?2:8):d.test(Ve)?n:+Ve}function nt(Ve,it,At){return At===void 0&&(At=it,it=void 0),At!==void 0&&(At=Mt(At),At=At===At?At:0),it!==void 0&&(it=Mt(it),it=it===it?it:0),ae(Mt(Ve),it,At)}u.exports=nt},76427:function(u,n,A){var w=200,d="__lodash_hash_undefined__",m=1/0,s=9007199254740991,E="[object Arguments]",H="[object Function]",ee="[object GeneratorFunction]",ae="[object Symbol]",J=/[\\^$.*+?()[\]{}|]/g,pe=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,Mt=typeof A.g=="object"&&A.g&&A.g.Object===Object&&A.g,nt=typeof self=="object"&&self&&self.Object===Object&&self,Ve=Mt||nt||Function("return this")();function it(Me,He,lt){switch(lt.length){case 0:return Me.call(He);case 1:return Me.call(He,lt[0]);case 2:return Me.call(He,lt[0],lt[1]);case 3:return Me.call(He,lt[0],lt[1],lt[2])}return Me.apply(He,lt)}function At(Me,He){var lt=Me?Me.length:0;return!!lt&&Pt(Me,He,0)>-1}function Ct(Me,He,lt){for(var Qt=-1,wn=Me?Me.length:0;++Qt<wn;)if(lt(He,Me[Qt]))return!0;return!1}function vt(Me,He){for(var lt=-1,Qt=Me?Me.length:0,wn=Array(Qt);++lt<Qt;)wn[lt]=He(Me[lt],lt,Me);return wn}function pt(Me,He){for(var lt=-1,Qt=He.length,wn=Me.length;++lt<Qt;)Me[wn+lt]=He[lt];return Me}function ft(Me,He,lt,Qt){for(var wn=Me.length,Gn=lt+(Qt?1:-1);Qt?Gn--:++Gn<wn;)if(He(Me[Gn],Gn,Me))return Gn;return-1}function Pt(Me,He,lt){if(He!==He)return ft(Me,wt,lt);for(var Qt=lt-1,wn=Me.length;++Qt<wn;)if(Me[Qt]===He)return Qt;return-1}function wt(Me){return Me!==Me}function qt(Me,He){for(var lt=-1,Qt=Array(Me);++lt<Me;)Qt[lt]=He(lt);return Qt}function Ft(Me){return function(He){return Me(He)}}function An(Me,He){return Me.has(He)}function rr(Me,He){return Me==null?void 0:Me[He]}function xr(Me){var He=!1;if(Me!=null&&typeof Me.toString!="function")try{He=!!(Me+"")}catch(lt){}return He}function Br(Me,He){return function(lt){return Me(He(lt))}}var Er=Array.prototype,zr=Function.prototype,Fi=Object.prototype,eo=Ve["__core-js_shared__"],Gr=function(){var Me=/[^.]+$/.exec(eo&&eo.keys&&eo.keys.IE_PROTO||"");return Me?"Symbol(src)_1."+Me:""}(),Yo=zr.toString,jn=Fi.hasOwnProperty,tn=Fi.toString,Bn=RegExp("^"+Yo.call(jn).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ar=Ve.Symbol,Rr=Br(Object.getPrototypeOf,Object),Ti=Fi.propertyIsEnumerable,Fn=Er.splice,Rn=Ar?Ar.isConcatSpreadable:void 0,Hn=Object.getOwnPropertySymbols,hr=Math.max,ti=gs(Ve,"Map"),ii=gs(Object,"create");function Or(Me){var He=-1,lt=Me?Me.length:0;for(this.clear();++He<lt;){var Qt=Me[He];this.set(Qt[0],Qt[1])}}function Bo(){this.__data__=ii?ii(null):{}}function Kr(Me){return this.has(Me)&&delete this.__data__[Me]}function co(Me){var He=this.__data__;if(ii){var lt=He[Me];return lt===d?void 0:lt}return jn.call(He,Me)?He[Me]:void 0}function to(Me){var He=this.__data__;return ii?He[Me]!==void 0:jn.call(He,Me)}function Cs(Me,He){var lt=this.__data__;return lt[Me]=ii&&He===void 0?d:He,this}Or.prototype.clear=Bo,Or.prototype.delete=Kr,Or.prototype.get=co,Or.prototype.has=to,Or.prototype.set=Cs;function Ys(Me){var He=-1,lt=Me?Me.length:0;for(this.clear();++He<lt;){var Qt=Me[He];this.set(Qt[0],Qt[1])}}function va(){this.__data__=[]}function Ss(Me){var He=this.__data__,lt=Lo(He,Me);if(lt<0)return!1;var Qt=He.length-1;return lt==Qt?He.pop():Fn.call(He,lt,1),!0}function ca(Me){var He=this.__data__,lt=Lo(He,Me);return lt<0?void 0:He[lt][1]}function Ls(Me){return Lo(this.__data__,Me)>-1}function as(Me,He){var lt=this.__data__,Qt=Lo(lt,Me);return Qt<0?lt.push([Me,He]):lt[Qt][1]=He,this}Ys.prototype.clear=va,Ys.prototype.delete=Ss,Ys.prototype.get=ca,Ys.prototype.has=Ls,Ys.prototype.set=as;function zi(Me){var He=-1,lt=Me?Me.length:0;for(this.clear();++He<lt;){var Qt=Me[He];this.set(Qt[0],Qt[1])}}function no(){this.__data__={hash:new Or,map:new(ti||Ys),string:new Or}}function ds(Me){return Ro(this,Me).delete(Me)}function hs(Me){return Ro(this,Me).get(Me)}function Sr(Me){return Ro(this,Me).has(Me)}function ji(Me,He){return Ro(this,Me).set(Me,He),this}zi.prototype.clear=no,zi.prototype.delete=ds,zi.prototype.get=hs,zi.prototype.has=Sr,zi.prototype.set=ji;function Pi(Me){var He=-1,lt=Me?Me.length:0;for(this.__data__=new zi;++He<lt;)this.add(Me[He])}function pa(Me){return this.__data__.set(Me,d),this}function La(Me){return this.__data__.has(Me)}Pi.prototype.add=Pi.prototype.push=pa,Pi.prototype.has=La;function fs(Me,He){var lt=je(Me)||lr(Me)?qt(Me.length,String):[],Qt=lt.length,wn=!!Qt;for(var Gn in Me)(He||jn.call(Me,Gn))&&!(wn&&(Gn=="length"||fc(Gn,Qt)))&&lt.push(Gn);return lt}function Lo(Me,He){for(var lt=Me.length;lt--;)if(Ln(Me[lt][0],He))return lt;return-1}function Zi(Me,He,lt,Qt){var wn=-1,Gn=At,gr=!0,Wr=Me.length,mi=[],Ai=He.length;if(!Wr)return mi;lt&&(He=vt(He,Ft(lt))),Qt?(Gn=Ct,gr=!1):He.length>=w&&(Gn=An,gr=!1,He=new Pi(He));e:for(;++wn<Wr;){var Xn=Me[wn],Zr=lt?lt(Xn):Xn;if(Xn=Qt||Xn!==0?Xn:0,gr&&Zr===Zr){for(var Gi=Ai;Gi--;)if(He[Gi]===Zr)continue e;mi.push(Xn)}else Gn(He,Zr,Qt)||mi.push(Xn)}return mi}function ka(Me,He,lt,Qt,wn){var Gn=-1,gr=Me.length;for(lt||(lt=Za),wn||(wn=[]);++Gn<gr;){var Wr=Me[Gn];He>0&&lt(Wr)?He>1?ka(Wr,He-1,lt,Qt,wn):pt(wn,Wr):Qt||(wn[wn.length]=Wr)}return wn}function _a(Me,He,lt){var Qt=He(Me);return je(Me)?Qt:pt(Qt,lt(Me))}function Jo(Me){if(!$e(Me)||Nc(Me))return!1;var He=at(Me)||xr(Me)?Bn:pe;return He.test(Dn(Me))}function ko(Me){if(!$e(Me))return St(Me);var He=Ze(Me),lt=[];for(var Qt in Me)Qt=="constructor"&&(He||!jn.call(Me,Qt))||lt.push(Qt);return lt}function bo(Me,He){return Me=Object(Me),ks(Me,He,function(lt,Qt){return Qt in Me})}function ks(Me,He,lt){for(var Qt=-1,wn=He.length,Gn={};++Qt<wn;){var gr=He[Qt],Wr=Me[gr];lt(Wr,gr)&&(Gn[gr]=Wr)}return Gn}function Ea(Me,He){return He=hr(He===void 0?Me.length-1:He,0),function(){for(var lt=arguments,Qt=-1,wn=hr(lt.length-He,0),Gn=Array(wn);++Qt<wn;)Gn[Qt]=lt[He+Qt];Qt=-1;for(var gr=Array(He+1);++Qt<He;)gr[Qt]=lt[Qt];return gr[He]=Gn,it(Me,this,gr)}}function zs(Me){return _a(Me,Tt,ba)}function Ro(Me,He){var lt=Me.__data__;return Ma(He)?lt[typeof He=="string"?"string":"hash"]:lt.map}function gs(Me,He){var lt=rr(Me,He);return Jo(lt)?lt:void 0}var zo=Hn?Br(Hn,Object):ln,ba=Hn?function(Me){for(var He=[];Me;)pt(He,zo(Me)),Me=Rr(Me);return He}:ln;function Za(Me){return je(Me)||lr(Me)||!!(Rn&&Me&&Me[Rn])}function fc(Me,He){return He=He==null?s:He,!!He&&(typeof Me=="number"||ue.test(Me))&&Me>-1&&Me%1==0&&Me<He}function Ma(Me){var He=typeof Me;return He=="string"||He=="number"||He=="symbol"||He=="boolean"?Me!=="__proto__":Me===null}function Nc(Me){return!!Gr&&Gr in Me}function Ze(Me){var He=Me&&Me.constructor,lt=typeof He=="function"&&He.prototype||Fi;return Me===lt}function St(Me){var He=[];if(Me!=null)for(var lt in Object(Me))He.push(lt);return He}function pn(Me){if(typeof Me=="string"||_t(Me))return Me;var He=Me+"";return He=="0"&&1/Me==-m?"-0":He}function Dn(Me){if(Me!=null){try{return Yo.call(Me)}catch(He){}try{return Me+""}catch(He){}}return""}function Ln(Me,He){return Me===He||Me!==Me&&He!==He}function lr(Me){return Fe(Me)&&jn.call(Me,"callee")&&(!Ti.call(Me,"callee")||tn.call(Me)==E)}var je=Array.isArray;function Le(Me){return Me!=null&&Oe(Me.length)&&!at(Me)}function Fe(Me){return dt(Me)&&Le(Me)}function at(Me){var He=$e(Me)?tn.call(Me):"";return He==H||He==ee}function Oe(Me){return typeof Me=="number"&&Me>-1&&Me%1==0&&Me<=s}function $e(Me){var He=typeof Me;return!!Me&&(He=="object"||He=="function")}function dt(Me){return!!Me&&typeof Me=="object"}function _t(Me){return typeof Me=="symbol"||dt(Me)&&tn.call(Me)==ae}function Tt(Me){return Le(Me)?fs(Me,!0):ko(Me)}var an=Ea(function(Me,He){return Me==null?{}:(He=vt(ka(He,1),pn),bo(Me,Zi(zs(Me),He)))});function ln(){return[]}u.exports=an},25030:function(u,n,A){var w=1/0,d=9007199254740991,m="[object Arguments]",s="[object Function]",E="[object GeneratorFunction]",H="[object Symbol]",ee=typeof A.g=="object"&&A.g&&A.g.Object===Object&&A.g,ae=typeof self=="object"&&self&&self.Object===Object&&self,J=ee||ae||Function("return this")();function pe(tn,Bn,Ar){switch(Ar.length){case 0:return tn.call(Bn);case 1:return tn.call(Bn,Ar[0]);case 2:return tn.call(Bn,Ar[0],Ar[1]);case 3:return tn.call(Bn,Ar[0],Ar[1],Ar[2])}return tn.apply(Bn,Ar)}function ue(tn,Bn){for(var Ar=-1,Rr=tn?tn.length:0,Ti=Array(Rr);++Ar<Rr;)Ti[Ar]=Bn(tn[Ar],Ar,tn);return Ti}function Mt(tn,Bn){for(var Ar=-1,Rr=Bn.length,Ti=tn.length;++Ar<Rr;)tn[Ti+Ar]=Bn[Ar];return tn}var nt=Object.prototype,Ve=nt.hasOwnProperty,it=nt.toString,At=J.Symbol,Ct=nt.propertyIsEnumerable,vt=At?At.isConcatSpreadable:void 0,pt=Math.max;function ft(tn,Bn,Ar,Rr,Ti){var Fn=-1,Rn=tn.length;for(Ar||(Ar=Ft),Ti||(Ti=[]);++Fn<Rn;){var Hn=tn[Fn];Bn>0&&Ar(Hn)?Bn>1?ft(Hn,Bn-1,Ar,Rr,Ti):Mt(Ti,Hn):Rr||(Ti[Ti.length]=Hn)}return Ti}function Pt(tn,Bn){return tn=Object(tn),wt(tn,Bn,function(Ar,Rr){return Rr in tn})}function wt(tn,Bn,Ar){for(var Rr=-1,Ti=Bn.length,Fn={};++Rr<Ti;){var Rn=Bn[Rr],Hn=tn[Rn];Ar(Hn,Rn)&&(Fn[Rn]=Hn)}return Fn}function qt(tn,Bn){return Bn=pt(Bn===void 0?tn.length-1:Bn,0),function(){for(var Ar=arguments,Rr=-1,Ti=pt(Ar.length-Bn,0),Fn=Array(Ti);++Rr<Ti;)Fn[Rr]=Ar[Bn+Rr];Rr=-1;for(var Rn=Array(Bn+1);++Rr<Bn;)Rn[Rr]=Ar[Rr];return Rn[Bn]=Fn,pe(tn,this,Rn)}}function Ft(tn){return xr(tn)||rr(tn)||!!(vt&&tn&&tn[vt])}function An(tn){if(typeof tn=="string"||Yo(tn))return tn;var Bn=tn+"";return Bn=="0"&&1/tn==-w?"-0":Bn}function rr(tn){return Er(tn)&&Ve.call(tn,"callee")&&(!Ct.call(tn,"callee")||it.call(tn)==m)}var xr=Array.isArray;function Br(tn){return tn!=null&&Fi(tn.length)&&!zr(tn)}function Er(tn){return Gr(tn)&&Br(tn)}function zr(tn){var Bn=eo(tn)?it.call(tn):"";return Bn==s||Bn==E}function Fi(tn){return typeof tn=="number"&&tn>-1&&tn%1==0&&tn<=d}function eo(tn){var Bn=typeof tn;return!!tn&&(Bn=="object"||Bn=="function")}function Gr(tn){return!!tn&&typeof tn=="object"}function Yo(tn){return typeof tn=="symbol"||Gr(tn)&&it.call(tn)==H}var jn=qt(function(tn,Bn){return tn==null?{}:Pt(tn,ue(ft(Bn,1),An))});u.exports=jn},22967:function(u,n,A){"use strict";A.r(n),A.d(n,{Generator:function(){return zs},inBox:function(){return pn},inCircle:function(){return fc},inRect:function(){return Ze},inSphere:function(){return ba},noise:function(){return ko},onBox:function(){return Ln},onCircle:function(){return Ma},onRect:function(){return St},onSphere:function(){return zo}});function w(je,Le,Fe){return Le in je?Object.defineProperty(je,Le,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):je[Le]=Fe,je}function d(je,Le){var Fe=Object.keys(je);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(je);Le&&(at=at.filter(function(Oe){return Object.getOwnPropertyDescriptor(je,Oe).enumerable})),Fe.push.apply(Fe,at)}return Fe}function m(je){for(var Le=1;Le<arguments.length;Le++){var Fe=arguments[Le]!=null?arguments[Le]:{};Le%2?d(Object(Fe),!0).forEach(function(at){w(je,at,Fe[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Fe)):d(Object(Fe)).forEach(function(at){Object.defineProperty(je,at,Object.getOwnPropertyDescriptor(Fe,at))})}return je}function s(je,Le){if(!(je instanceof Le))throw new TypeError("Cannot call a class as a function")}function E(je,Le){return E=Object.setPrototypeOf||function(at,Oe){return at.__proto__=Oe,at},E(je,Le)}function H(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(je){return!1}}var ee=A(99477);function ae(){for(var je=arguments.length,Le=new Array(je),Fe=0;Fe<je;Fe++)Le[Fe]=arguments[Fe];var at=Le[0],Oe=Le[1],$e=Le[2],dt=Le[3];return at*dt-Oe*$e}function J(){for(var je=arguments.length,Le=new Array(je),Fe=0;Fe<je;Fe++)Le[Fe]=arguments[Fe];var at=Le[0],Oe=Le[1],$e=Le[2],dt=Le[3],_t=Le[4],Tt=Le[5],an=Le[6],ln=Le[7],Me=Le[8];return at*_t*Me+Oe*Tt*an+$e*dt*ln-$e*_t*an-Oe*dt*Me-at*Tt*ln}function pe(){for(var je=arguments.length,Le=new Array(je),Fe=0;Fe<je;Fe++)Le[Fe]=arguments[Fe];Le[0],Le[1],Le[2],Le[3],Le[4],Le[5],Le[6],Le[7],Le[8],Le[9],Le[10],Le[11],Le[12],Le[13],Le[14]}function ue(je,Le,Fe){for(var at=je.clone().transpose(),Oe=[],$e=at.elements.length,dt=Math.sqrt($e),_t=0;_t<$e;_t++){var Tt=at.elements[_t],an=Math.floor(_t/dt),ln=_t%dt;an!==Le-1&&ln!==Fe-1&&Oe.push(Tt)}return J.apply(void 0,Oe)}function Mt(je,Le){for(var Fe=[],at=je.toArray(),Oe=Le.toArray(),$e=0;$e<at.length;$e++)Fe[$e]=at[$e]+Oe[$e];return new ee.Matrix3().fromArray(Fe)}var nt=Object.freeze({__proto__:null,determinant2:ae,determinant3:J,determinant4:pe,getMinor:ue,matrixSum3:Mt});function Ve(je){if(Array.isArray(je))return je}function it(je,Le){var Fe=je==null?null:typeof Symbol!="undefined"&&je[Symbol.iterator]||je["@@iterator"];if(Fe!=null){var at=[],Oe=!0,$e=!1,dt,_t;try{for(Fe=Fe.call(je);!(Oe=(dt=Fe.next()).done)&&(at.push(dt.value),!(Le&&at.length===Le));Oe=!0);}catch(Tt){$e=!0,_t=Tt}finally{try{!Oe&&Fe.return!=null&&Fe.return()}finally{if($e)throw _t}}return at}}function At(je,Le){(Le==null||Le>je.length)&&(Le=je.length);for(var Fe=0,at=new Array(Le);Fe<Le;Fe++)at[Fe]=je[Fe];return at}function Ct(je,Le){if(je){if(typeof je=="string")return At(je,Le);var Fe=Object.prototype.toString.call(je).slice(8,-1);if(Fe==="Object"&&je.constructor&&(Fe=je.constructor.name),Fe==="Map"||Fe==="Set")return Array.from(je);if(Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe))return At(je,Le)}}function vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(je,Le){return Ve(je)||it(je,Le)||Ct(je,Le)||vt()}function ft(je){if(Array.isArray(je))return At(je)}function Pt(je){if(typeof Symbol!="undefined"&&je[Symbol.iterator]!=null||je["@@iterator"]!=null)return Array.from(je)}function wt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qt(je){return ft(je)||Pt(je)||Ct(je)||wt()}function Ft(je,Le,Fe){return H()?Ft=Reflect.construct:Ft=function(Oe,$e,dt){var _t=[null];_t.push.apply(_t,$e);var Tt=Function.bind.apply(Oe,_t),an=new Tt;return dt&&E(an,dt.prototype),an},Ft.apply(null,arguments)}function An(je,Le){var Fe=pt(Le[0],2),at=Fe[0],Oe=Fe[1],$e=pt(Le[1],2),dt=$e[0],_t=$e[1],Tt=pt(Le[2],2),an=Tt[0],ln=Tt[1],Me=pt(je,2),He=Me[0],lt=Me[1],Qt=new ee.Matrix4;return Qt.set(at,Oe,at*at+Oe*Oe,1,dt,_t,dt*dt+_t*_t,1,an,ln,an*an+ln*ln,1,He,lt,He*He+lt*lt,1),Qt.determinant()<=0}function rr(je){var Le=pt(je[0],2),Fe=Le[0],at=Le[1],Oe=pt(je[1],2),$e=Oe[0],dt=Oe[1],_t=pt(je[2],2),Tt=_t[0],an=_t[1];return J(Fe,at,1,$e,dt,1,Tt,an,1)}function xr(je){return rr(je)===0}function Br(je){return rr(je)<0}function Er(je){var Le=pt(je[0],2),Fe=Le[0],at=Le[1],Oe=pt(je[1],2),$e=Oe[0],dt=Oe[1],_t=pt(je[2],2),Tt=_t[0],an=_t[1];if(xr(je))return null;var ln=new ee.Matrix4;ln.set(1,1,1,1,Fe*Fe+at*at,Fe,at,1,$e*$e+dt*dt,$e,dt,1,Tt*Tt+an*an,Tt,an,1);var Me=ue(ln,1,1),He=ue(ln,1,3),lt=ue(ln,1,2),Qt=ue(ln,1,4),wn=.5*(lt/Me),Gn=.5*(He/Me),gr=wn*wn+Gn*Gn+Qt/Me;return{x:Math.abs(wn)===0?0:wn,y:Math.abs(Gn)===0?0:-Gn,r:Math.sqrt(gr)}}function zr(je,Le){var Fe=Array.isArray(Le[0])?Le[0]:Le[0].toArray(),at=pt(Fe,2),Oe=at[0],$e=at[1],dt=Array.isArray(Le[1])?Le[1]:Le[1].toArray(),_t=pt(dt,2),Tt=_t[0],an=_t[1],ln=Array.isArray(Le[2])?Le[2]:Le[2].toArray(),Me=pt(ln,2),He=Me[0],lt=Me[1],Qt=pt(je,2),wn=Qt[0],Gn=Qt[1];if(xr(Le))throw new Error("Collinear points don't form a triangle");var gr=Oe-wn,Wr=$e-Gn,mi=Tt-wn,Ai=an-Gn,Xn=He-wn,Zr=lt-Gn,Gi=J(gr,Wr,gr*gr+Wr*Wr,mi,Ai,mi*mi+Ai*Ai,Xn,Zr,Xn*Xn+Zr*Zr);return Gi===0?!0:Br(Le)?Gi<0:Gi>0}var Fi=new ee.Vector2,eo=new ee.Vector2;function Gr(je){var Le=je.map(function(an){return Array.isArray(an)?Ft(ee.Vector2,qt(an)):an}),Fe=pt(Le,3),at=Fe[0],Oe=Fe[1],$e=Fe[2];if(xr(je))return!1;var dt=Fi.subVectors(Oe,at),_t=eo.subVectors($e,at),Tt=_t.cross(dt);return Tt>0}var Yo=Object.freeze({__proto__:null,isPointInTriangle:An,triangleDeterminant:rr,arePointsCollinear:xr,isTriangleClockwise:Br,getCircumcircle:Er,isPointInCircumcircle:zr,doThreePointsMakeARight:Gr});function jn(je,Le,Fe){return Math.max(Le,Math.min(Fe,je))}function tn(je,Le){return jn(je-Math.floor(je/Le)*Le,0,Le)}function Bn(je,Le){var Fe=tn(Le-je,Math.PI*2);return Fe>Math.PI&&(Fe-=Math.PI*2),Fe}function Ar(je){return je/180*Math.PI}function Rr(je){return je*180/Math.PI}function Ti(je,Le){for(var Fe=Le.radius,at=Fe===void 0?1:Fe,Oe=je.length/3,$e=2/Oe,dt=Math.PI*(3-2.2360679775),_t=0;_t<je.length;_t+=3){var Tt=_t*$e-1+$e/2,an=Math.sqrt(1-Math.pow(Tt,2)),ln=_t%Oe*dt,Me=Math.cos(ln)*an,He=Math.sin(ln)*an;je[_t]=Me*at,je[_t+1]=Tt*at,je[_t+2]=He*at}}function Fn(je,Le){var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(je.x-Le.x)<Fe&&Math.abs(je.y-Le.y)<Fe&&Math.abs(je.z-Le.z)<Fe}function Rn(je,Le){return je.x===Le.x?typeof je.z!="undefined"&&je.y===Le.y?je.z-Le.z:je.y-Le.y:je.x-Le.x}function Hn(je){for(var Le=je.sort(Rn),Fe=[Le[0],Le[1]],at=2;at<Le.length;at++)for(Fe.push(Le[at]);Fe.length>2&&Gr(qt(Fe.slice(-3)));)Fe.splice(Fe.length-2,1);for(var Oe=[Le[Le.length-1],Le[Le.length-2]],$e=Le.length-3;$e>=0;$e--)for(Oe.push(Le[$e]);Oe.length>2&&Gr(qt(Oe.slice(-3)));)Oe.splice(Oe.length-2,1);Oe.splice(0,1),Oe.splice(Oe.length-1,1);var dt=[].concat(Fe,Oe);return dt}function hr(je,Le,Fe){var at=pt(Le,2),Oe=at[0],$e=at[1],dt=pt(Fe,2),_t=dt[0],Tt=dt[1];return _t+(je-Oe)*(Tt-_t)/($e-Oe)}function ti(je){return je*je*je*(je*(je*6-15)+10)}function ii(je,Le,Fe){return je*(1-Fe)+Le*Fe}function Or(je,Le,Fe){return(Fe-je)/(Le-je)}function Bo(je,Le,Fe){var at=Math.sqrt(je*je+Le*Le+Fe*Fe);return[je/at,Le/at,Fe/at]}function Kr(je,Le,Fe){var at=je*je,Oe=Le*Le,$e=Fe*Fe,dt=je*Math.sqrt(1-(Oe+$e)/2+Oe*$e/3),_t=Le*Math.sqrt(1-($e+at)/2+$e*at/3),Tt=Fe*Math.sqrt(1-(at+Oe)/2+at*Oe/3);return[dt,_t,Tt]}function co(je,Le){var Fe=new ee.Vector3().crossVectors(je,Le),at=je.dot(Le),Oe=new ee.Matrix3().identity(),$e=new ee.Matrix3().set(0,-Fe.z,Fe.y,Fe.z,0,-Fe.x,-Fe.y,Fe.x,0),dt=new ee.Matrix3().multiplyMatrices($e,$e).multiplyScalar(1/(1+at)),_t=Mt(Mt(Oe,$e),dt);return _t}function to(je,Le,Fe){var at=Math.asin(Le),Oe=Math.atan2(je,-Fe);return[at,Oe]}function Cs(je,Le){var Fe=Math.sin(je),at=Math.cos(je),Oe=Math.sin(Le)*at,$e=-Math.cos(Le)*at;return[Oe,Fe,$e]}function Ys(je,Le){var Fe=pt(Le,2),at=Fe[0],Oe=Fe[1],$e=co(je.normal,new ee.Vector3(0,1,0)),dt=Or(at.clone().applyMatrix3($e).y,Oe.clone().applyMatrix3($e).y,0);return new ee.Vector3().lerpVectors(at,Oe,dt)}function va(je,Le){var Fe=Le.normal.dot(je);return Fe}function Ss(je,Le){var Fe=pt(je,3),at=Fe[0],Oe=Fe[1],$e=Fe[2],dt=pt(Le,2),_t=dt[0],Tt=dt[1];return $e*_t*Tt+Oe*_t+at}function ca(je,Le){var Fe=pt(Le,2),at=Fe[0],Oe=Fe[1],$e=at*Oe,dt=je/$e,_t=je-$e*dt,Tt=_t/at,an=_t%at;return[an,Tt,dt]}function Ls(je,Le){return je[0]+Le[0]*je[1]}function as(je,Le){var Fe=je%Le,at=Math.floor(je/Le);return[Fe,at]}var zi=Object.freeze({__proto__:null,clamp:jn,deltaAngle:Bn,degToRad:Ar,radToDeg:Rr,fibonacciOnSphere:Ti,vectorEquals:Fn,lexicographic:Rn,convexHull:Hn,remap:hr,fade:ti,lerp:ii,inverseLerp:Or,normalize:Bo,pointOnCubeToPointOnSphere:Kr,rotateVectorOnVector:co,pointToCoordinate:to,coordinateToPoint:Cs,planeSegmentIntersection:Ys,pointToPlaneDistance:va,getIndexFrom3D:Ss,get3DFromIndex:ca,getIndexFrom2D:Ls,get2DFromIndex:as}),no=function je(Le,Fe,at){var Oe=this;s(this,je),w(this,"dot2",function($e,dt){return Oe.x*$e+Oe.y*dt}),w(this,"dot3",function($e,dt,_t){return Oe.x*$e+Oe.y*dt+Oe.z*_t}),this.x=Le,this.y=Fe,this.z=at},ds=[new no(1,1,0),new no(-1,1,0),new no(1,-1,0),new no(-1,-1,0),new no(1,0,1),new no(-1,0,1),new no(1,0,-1),new no(-1,0,-1),new no(0,1,1),new no(0,-1,1),new no(0,1,-1),new no(0,-1,-1)],hs=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Sr=new Array(512),ji=new Array(512),Pi=function(Le){Le>0&&Le<1&&(Le*=65536),Le=Math.floor(Le),Le<256&&(Le|=Le<<8);for(var Fe=0;Fe<256;Fe++){var at;Fe&1?at=hs[Fe]^Le&255:at=hs[Fe]^Le>>8&255,Sr[Fe]=Sr[Fe+256]=at,ji[Fe]=ji[Fe+256]=ds[at%12]}};Pi(0);var pa=.5*(Math.sqrt(3)-1),La=(3-Math.sqrt(3))/6,fs=1/3,Lo=1/6,Zi=function(Le,Fe){var at,Oe,$e,dt=(Le+Fe)*pa,_t=Math.floor(Le+dt),Tt=Math.floor(Fe+dt),an=(_t+Tt)*La,ln=Le-_t+an,Me=Fe-Tt+an,He,lt;ln>Me?(He=1,lt=0):(He=0,lt=1);var Qt=ln-He+La,wn=Me-lt+La,Gn=ln-1+2*La,gr=Me-1+2*La;_t&=255,Tt&=255;var Wr=ji[_t+Sr[Tt]],mi=ji[_t+He+Sr[Tt+lt]],Ai=ji[_t+1+Sr[Tt+1]],Xn=.5-ln*ln-Me*Me;Xn<0?at=0:(Xn*=Xn,at=Xn*Xn*Wr.dot2(ln,Me));var Zr=.5-Qt*Qt-wn*wn;Zr<0?Oe=0:(Zr*=Zr,Oe=Zr*Zr*mi.dot2(Qt,wn));var Gi=.5-Gn*Gn-gr*gr;return Gi<0?$e=0:(Gi*=Gi,$e=Gi*Gi*Ai.dot2(Gn,gr)),70*(at+Oe+$e)},ka=function(Le,Fe,at){var Oe,$e,dt,_t,Tt=(Le+Fe+at)*fs,an=Math.floor(Le+Tt),ln=Math.floor(Fe+Tt),Me=Math.floor(at+Tt),He=(an+ln+Me)*Lo,lt=Le-an+He,Qt=Fe-ln+He,wn=at-Me+He,Gn,gr,Wr,mi,Ai,Xn;lt>=Qt?Qt>=wn?(Gn=1,gr=0,Wr=0,mi=1,Ai=1,Xn=0):lt>=wn?(Gn=1,gr=0,Wr=0,mi=1,Ai=0,Xn=1):(Gn=0,gr=0,Wr=1,mi=1,Ai=0,Xn=1):Qt<wn?(Gn=0,gr=0,Wr=1,mi=0,Ai=1,Xn=1):lt<wn?(Gn=0,gr=1,Wr=0,mi=0,Ai=1,Xn=1):(Gn=0,gr=1,Wr=0,mi=1,Ai=1,Xn=0);var Zr=lt-Gn+Lo,Gi=Qt-gr+Lo,Hi=wn-Wr+Lo,Ni=lt-mi+2*Lo,Js=Qt-Ai+2*Lo,po=wn-Xn+2*Lo,ms=lt-1+3*Lo,za=Qt-1+3*Lo,ua=wn-1+3*Lo;an&=255,ln&=255,Me&=255;var qo=ji[an+Sr[ln+Sr[Me]]],Qi=ji[an+Gn+Sr[ln+gr+Sr[Me+Wr]]],qs=ji[an+mi+Sr[ln+Ai+Sr[Me+Xn]]],Ql=ji[an+1+Sr[ln+1+Sr[Me+1]]],Ir=.6-lt*lt-Qt*Qt-wn*wn;Ir<0?Oe=0:(Ir*=Ir,Oe=Ir*Ir*qo.dot3(lt,Qt,wn));var ro=.6-Zr*Zr-Gi*Gi-Hi*Hi;ro<0?$e=0:(ro*=ro,$e=ro*ro*Qi.dot3(Zr,Gi,Hi));var Io=.6-Ni*Ni-Js*Js-po*po;Io<0?dt=0:(Io*=Io,dt=Io*Io*qs.dot3(Ni,Js,po));var Kl=.6-ms*ms-za*za-ua*ua;return Kl<0?_t=0:(Kl*=Kl,_t=Kl*Kl*Ql.dot3(ms,za,ua)),32*(Oe+$e+dt+_t)},_a=function(Le,Fe){var at=Math.floor(Le),Oe=Math.floor(Fe);Le=Le-at,Fe=Fe-Oe,at=at&255,Oe=Oe&255;var $e=ji[at+Sr[Oe]].dot2(Le,Fe),dt=ji[at+Sr[Oe+1]].dot2(Le,Fe-1),_t=ji[at+1+Sr[Oe]].dot2(Le-1,Fe),Tt=ji[at+1+Sr[Oe+1]].dot2(Le-1,Fe-1),an=ti(Le);return ii(ii($e,_t,an),ii(dt,Tt,an),ti(Fe))},Jo=function(Le,Fe,at){var Oe=Math.floor(Le),$e=Math.floor(Fe),dt=Math.floor(at);Le=Le-Oe,Fe=Fe-$e,at=at-dt,Oe=Oe&255,$e=$e&255,dt=dt&255;var _t=ji[Oe+Sr[$e+Sr[dt]]].dot3(Le,Fe,at),Tt=ji[Oe+Sr[$e+Sr[dt+1]]].dot3(Le,Fe,at-1),an=ji[Oe+Sr[$e+1+Sr[dt]]].dot3(Le,Fe-1,at),ln=ji[Oe+Sr[$e+1+Sr[dt+1]]].dot3(Le,Fe-1,at-1),Me=ji[Oe+1+Sr[$e+Sr[dt]]].dot3(Le-1,Fe,at),He=ji[Oe+1+Sr[$e+Sr[dt+1]]].dot3(Le-1,Fe,at-1),lt=ji[Oe+1+Sr[$e+1+Sr[dt]]].dot3(Le-1,Fe-1,at),Qt=ji[Oe+1+Sr[$e+1+Sr[dt+1]]].dot3(Le-1,Fe-1,at-1),wn=ti(Le),Gn=ti(Fe),gr=ti(at);return ii(ii(ii(_t,Me,wn),ii(Tt,He,wn),gr),ii(ii(an,lt,wn),ii(ln,Qt,wn),gr),Gn)},ko=Object.freeze({__proto__:null,seed:Pi,simplex2:Zi,simplex3:ka,perlin2:_a,perlin3:Jo}),bo=Math.PI*2;function ks(je){if(typeof je=="number")je=Math.abs(je);else if(typeof je=="string"){var Le=je;je=0;for(var Fe=0;Fe<Le.length;Fe++)je=(je+(Fe+1)*(Le.charCodeAt(Fe)%96))%2147483647}return je===0&&(je=311),je}function Ea(je){var Le=ks(je);return function(){var Fe=Le*48271%2147483647;return Le=Fe,Fe/2147483647}}var zs=function je(Le){var Fe=this;s(this,je),w(this,"seed",0),w(this,"init",function(at){Fe.seed=at,Fe.value=Ea(at)}),w(this,"value",Ea(this.seed)),this.init(Le)},Ro=new zs(Math.random()),gs={radius:1,center:[0,0,0]};function zo(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},gs),Le),Oe=at.radius,$e=at.center,dt=0;dt<je.length;dt+=3){var _t=Fe.value(),Tt=Fe.value(),an=Math.acos(2*Tt-1),ln=bo*_t;je[dt]=Math.sin(an)*Math.cos(ln)*Oe+$e[0],je[dt+1]=Math.sin(an)*Math.sin(ln)*Oe+$e[1],je[dt+2]=Math.cos(an)*Oe+$e[2]}return je}function ba(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},gs),Le),Oe=at.radius,$e=at.center,dt=0;dt<je.length;dt+=3){var _t=Math.pow(Fe.value(),.3333333333333333),Tt=Fe.value()*2-1,an=Fe.value()*2-1,ln=Fe.value()*2-1,Me=Math.sqrt(Tt*Tt+an*an+ln*ln);Tt=_t*Tt/Me,an=_t*an/Me,ln=_t*ln/Me,je[dt]=Tt*Oe+$e[0],je[dt+1]=an*Oe+$e[1],je[dt+2]=ln*Oe+$e[2]}return je}var Za={radius:1,center:[0,0]};function fc(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},Za),Le),Oe=at.radius,$e=at.center,dt=0;dt<je.length;dt+=2){var _t=Oe*Math.sqrt(Fe.value()),Tt=Fe.value()*bo;je[dt]=Math.sin(Tt)*_t+$e[0],je[dt+1]=Math.cos(Tt)*_t+$e[1]}return je}function Ma(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},Za),Le),Oe=at.radius,$e=at.center,dt=0;dt<je.length;dt+=2){var _t=Fe.value()*bo;je[dt]=Math.sin(_t)*Oe+$e[0],je[dt+1]=Math.cos(_t)*Oe+$e[1]}return je}var Nc={sides:1,center:[0,0]};function Ze(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},Nc),Le),Oe=at.sides,$e=at.center,dt=typeof Oe=="number"?Oe:Oe[0],_t=typeof Oe=="number"?Oe:Oe[1],Tt=0;Tt<je.length;Tt+=2)je[Tt]=(Fe.value()-.5)*dt+$e[0],je[Tt+1]=(Fe.value()-.5)*_t+$e[1];return je}function St(je,Le){return je}function pn(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},Dn),Le),Oe=at.sides,$e=at.center,dt=typeof Oe=="number"?Oe:Oe[0],_t=typeof Oe=="number"?Oe:Oe[1],Tt=typeof Oe=="number"?Oe:Oe[2],an=0;an<je.length;an+=3)je[an]=(Fe.value()-.5)*dt+$e[0],je[an+1]=(Fe.value()-.5)*_t+$e[1],je[an+2]=(Fe.value()-.5)*Tt+$e[2];return je}var Dn={sides:1,center:[0,0,0]};function Ln(je,Le){for(var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ro,at=m(m({},Dn),Le),Oe=at.sides,$e=at.center,dt=typeof Oe=="number"?Oe:Oe[0],_t=typeof Oe=="number"?Oe:Oe[1],Tt=typeof Oe=="number"?Oe:Oe[2],an=0;an<je.length;an+=3)je[an]=(Fe.value()-.5)*dt+$e[0],je[an+1]=(Fe.value()-.5)*_t+$e[1],je[an+2]=(Fe.value()-.5)*Tt+$e[2];return je}var lr=Object.freeze({__proto__:null,Generator:zs,onSphere:zo,inSphere:ba,inCircle:fc,onCircle:Ma,inRect:Ze,onRect:St,inBox:pn,onBox:Ln,noise:ko})},92703:function(u,n,A){"use strict";var w=A(50414);function d(){}function m(){}m.resetWarningCache=d,u.exports=function(){function s(ee,ae,J,pe,ue,Mt){if(Mt!==w){var nt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw nt.name="Invariant Violation",nt}}s.isRequired=s;function E(){return s}var H={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:E,element:s,elementType:s,instanceOf:E,node:s,objectOf:E,oneOf:E,oneOfType:E,shape:E,exact:E,checkPropTypes:m,resetWarningCache:d};return H.PropTypes=H,H}},45697:function(u,n,A){if(!1)var w,d;else u.exports=A(92703)()},50414:function(u){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";u.exports=n},46511:function(u,n){"use strict";var A;/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */n.ConcurrentRoot=1,n.ContinuousEventPriority=4,n.DefaultEventPriority=16,n.DiscreteEventPriority=1,A=536870912,A=0},67287:function(u,n,A){var w=A(25108);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */u.exports=function(m){var s={},E=A(67294),H=A(63840),ee=Object.assign;function ae(x){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+x,N=1;N<arguments.length;N++)S+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+x+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),ue=Symbol.for("react.portal"),Mt=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),Ve=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),At=Symbol.for("react.context"),Ct=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var wt=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var qt=Symbol.iterator;function Ft(x){return x===null||typeof x!="object"?null:(x=qt&&x[qt]||x["@@iterator"],typeof x=="function"?x:null)}function An(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case Mt:return"Fragment";case ue:return"Portal";case Ve:return"Profiler";case nt:return"StrictMode";case vt:return"Suspense";case pt:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case At:return(x.displayName||"Context")+".Consumer";case it:return(x._context.displayName||"Context")+".Provider";case Ct:var S=x.render;return x=x.displayName,x||(x=S.displayName||S.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case ft:return S=x.displayName||null,S!==null?S:An(x.type)||"Memo";case Pt:S=x._payload,x=x._init;try{return An(x(S))}catch(N){}}return null}function rr(x){var S=x.type;switch(x.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=S.render,x=x.displayName||x.name||"",S.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return An(S);case 8:return S===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function xr(x){var S=x,N=x;if(x.alternate)for(;S.return;)S=S.return;else{x=S;do S=x,S.flags&4098&&(N=S.return),x=S.return;while(x)}return S.tag===3?N:null}function Br(x){if(xr(x)!==x)throw Error(ae(188))}function Er(x){var S=x.alternate;if(!S){if(S=xr(x),S===null)throw Error(ae(188));return S!==x?null:x}for(var N=x,V=S;;){var ne=N.return;if(ne===null)break;var de=ne.alternate;if(de===null){if(V=ne.return,V!==null){N=V;continue}break}if(ne.child===de.child){for(de=ne.child;de;){if(de===N)return Br(ne),x;if(de===V)return Br(ne),S;de=de.sibling}throw Error(ae(188))}if(N.return!==V.return)N=ne,V=de;else{for(var Je=!1,Et=ne.child;Et;){if(Et===N){Je=!0,N=ne,V=de;break}if(Et===V){Je=!0,V=ne,N=de;break}Et=Et.sibling}if(!Je){for(Et=de.child;Et;){if(Et===N){Je=!0,N=de,V=ne;break}if(Et===V){Je=!0,V=de,N=ne;break}Et=Et.sibling}if(!Je)throw Error(ae(189))}}if(N.alternate!==V)throw Error(ae(190))}if(N.tag!==3)throw Error(ae(188));return N.stateNode.current===N?x:S}function zr(x){return x=Er(x),x!==null?Fi(x):null}function Fi(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var S=Fi(x);if(S!==null)return S;x=x.sibling}return null}function eo(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var S=eo(x);if(S!==null)return S}x=x.sibling}return null}var Gr=Array.isArray,Yo=m.getPublicInstance,jn=m.getRootHostContext,tn=m.getChildHostContext,Bn=m.prepareForCommit,Ar=m.resetAfterCommit,Rr=m.createInstance,Ti=m.appendInitialChild,Fn=m.finalizeInitialChildren,Rn=m.prepareUpdate,Hn=m.shouldSetTextContent,hr=m.createTextInstance,ti=m.scheduleTimeout,ii=m.cancelTimeout,Or=m.noTimeout,Bo=m.isPrimaryRenderer,Kr=m.supportsMutation,co=m.supportsPersistence,to=m.supportsHydration,Cs=m.getInstanceFromNode,Ys=m.preparePortalMount,va=m.getCurrentEventPriority,Ss=m.detachDeletedInstance,ca=m.supportsMicrotasks,Ls=m.scheduleMicrotask,as=m.supportsTestSelectors,zi=m.findFiberRoot,no=m.getBoundingRect,ds=m.getTextContent,hs=m.isHiddenSubtree,Sr=m.matchAccessibilityRole,ji=m.setFocusIfFocusable,Pi=m.setupIntersectionObserver,pa=m.appendChild,La=m.appendChildToContainer,fs=m.commitTextUpdate,Lo=m.commitMount,Zi=m.commitUpdate,ka=m.insertBefore,_a=m.insertInContainerBefore,Jo=m.removeChild,ko=m.removeChildFromContainer,bo=m.resetTextContent,ks=m.hideInstance,Ea=m.hideTextInstance,zs=m.unhideInstance,Ro=m.unhideTextInstance,gs=m.clearContainer,zo=m.cloneInstance,ba=m.createContainerChildSet,Za=m.appendChildToContainerChildSet,fc=m.finalizeContainerChildren,Ma=m.replaceContainerChildren,Nc=m.cloneHiddenInstance,Ze=m.cloneHiddenTextInstance,St=m.canHydrateInstance,pn=m.canHydrateTextInstance,Dn=m.canHydrateSuspenseInstance,Ln=m.isSuspenseInstancePending,lr=m.isSuspenseInstanceFallback,je=m.registerSuspenseInstanceRetry,Le=m.getNextHydratableSibling,Fe=m.getFirstHydratableChild,at=m.getFirstHydratableChildWithinContainer,Oe=m.getFirstHydratableChildWithinSuspenseInstance,$e=m.hydrateInstance,dt=m.hydrateTextInstance,_t=m.hydrateSuspenseInstance,Tt=m.getNextHydratableInstanceAfterSuspenseInstance,an=m.commitHydratedContainer,ln=m.commitHydratedSuspenseInstance,Me=m.clearSuspenseBoundary,He=m.clearSuspenseBoundaryFromContainer,lt=m.shouldDeleteUnhydratedTailInstances,Qt=m.didNotMatchHydratedContainerTextInstance,wn=m.didNotMatchHydratedTextInstance,Gn;function gr(x){if(Gn===void 0)try{throw Error()}catch(N){var S=N.stack.trim().match(/\n( *(at )?)/);Gn=S&&S[1]||""}return`
`+Gn+x}var Wr=!1;function mi(x,S){if(!x||Wr)return"";Wr=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(En){var V=En}Reflect.construct(x,[],S)}else{try{S.call()}catch(En){V=En}x.call(S.prototype)}else{try{throw Error()}catch(En){V=En}x()}}catch(En){if(En&&V&&typeof En.stack=="string"){for(var ne=En.stack.split(`
`),de=V.stack.split(`
`),Je=ne.length-1,Et=de.length-1;1<=Je&&0<=Et&&ne[Je]!==de[Et];)Et--;for(;1<=Je&&0<=Et;Je--,Et--)if(ne[Je]!==de[Et]){if(Je!==1||Et!==1)do if(Je--,Et--,0>Et||ne[Je]!==de[Et]){var $t=`
`+ne[Je].replace(" at new "," at ");return x.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",x.displayName)),$t}while(1<=Je&&0<=Et);break}}}finally{Wr=!1,Error.prepareStackTrace=N}return(x=x?x.displayName||x.name:"")?gr(x):""}var Ai=Object.prototype.hasOwnProperty,Xn=[],Zr=-1;function Gi(x){return{current:x}}function Hi(x){0>Zr||(x.current=Xn[Zr],Xn[Zr]=null,Zr--)}function Ni(x,S){Zr++,Xn[Zr]=x.current,x.current=S}var Js={},po=Gi(Js),ms=Gi(!1),za=Js;function ua(x,S){var N=x.type.contextTypes;if(!N)return Js;var V=x.stateNode;if(V&&V.__reactInternalMemoizedUnmaskedChildContext===S)return V.__reactInternalMemoizedMaskedChildContext;var ne={},de;for(de in N)ne[de]=S[de];return V&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=S,x.__reactInternalMemoizedMaskedChildContext=ne),ne}function qo(x){return x=x.childContextTypes,x!=null}function Qi(){Hi(ms),Hi(po)}function qs(x,S,N){if(po.current!==Js)throw Error(ae(168));Ni(po,S),Ni(ms,N)}function Ql(x,S,N){var V=x.stateNode;if(S=S.childContextTypes,typeof V.getChildContext!="function")return N;V=V.getChildContext();for(var ne in V)if(!(ne in S))throw Error(ae(108,rr(x)||"Unknown",ne));return ee({},N,V)}function Ir(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Js,za=po.current,Ni(po,x),Ni(ms,ms.current),!0}function ro(x,S,N){var V=x.stateNode;if(!V)throw Error(ae(169));N?(x=Ql(x,S,za),V.__reactInternalMemoizedMergedChildContext=x,Hi(ms),Hi(po),Ni(po,x)):Hi(ms),Ni(ms,N)}var Io=Math.clz32?Math.clz32:Yp,Kl=Math.log,sp=Math.LN2;function Yp(x){return x>>>=0,x===0?32:31-(Kl(x)/sp|0)|0}var Gs=64,ap=4194304;function lp(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function Du(x,S){var N=x.pendingLanes;if(N===0)return 0;var V=0,ne=x.suspendedLanes,de=x.pingedLanes,Je=N&268435455;if(Je!==0){var Et=Je&~ne;Et!==0?V=lp(Et):(de&=Je,de!==0&&(V=lp(de)))}else Je=N&~ne,Je!==0?V=lp(Je):de!==0&&(V=lp(de));if(V===0)return 0;if(S!==0&&S!==V&&!(S&ne)&&(ne=V&-V,de=S&-S,ne>=de||ne===16&&(de&4194240)!==0))return S;if(V&4&&(V|=N&16),S=x.entangledLanes,S!==0)for(x=x.entanglements,S&=V;0<S;)N=31-Io(S),ne=1<<N,V|=x[N],S&=~ne;return V}function n1(x,S){switch(x){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r1(x,S){for(var N=x.suspendedLanes,V=x.pingedLanes,ne=x.expirationTimes,de=x.pendingLanes;0<de;){var Je=31-Io(de),Et=1<<Je,$t=ne[Je];$t===-1?(!(Et&N)||Et&V)&&(ne[Je]=n1(Et,S)):$t<=S&&(x.expiredLanes|=Et),de&=~Et}}function Gd(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function Nd(x){for(var S=[],N=0;31>N;N++)S.push(x);return S}function ml(x,S,N){x.pendingLanes|=S,S!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,S=31-Io(S),x[S]=N}function Kf(x,S){var N=x.pendingLanes&~S;x.pendingLanes=S,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=S,x.mutableReadLanes&=S,x.entangledLanes&=S,S=x.entanglements;var V=x.eventTimes;for(x=x.expirationTimes;0<N;){var ne=31-Io(N),de=1<<ne;S[ne]=0,V[ne]=-1,x[ne]=-1,N&=~de}}function gc(x,S){var N=x.entangledLanes|=S;for(x=x.entanglements;N;){var V=31-Io(N),ne=1<<V;ne&S|x[V]&S&&(x[V]|=S),N&=~ne}}var bi=0;function Xf(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var mc=H.unstable_scheduleCallback,ai=H.unstable_cancelCallback,Xl=H.unstable_shouldYield,Yf=H.unstable_requestPaint,Zs=H.unstable_now,Pu=H.unstable_ImmediatePriority,i1=H.unstable_UserBlockingPriority,Jf=H.unstable_NormalPriority,ym=H.unstable_IdlePriority,zh=null,Uc=null;function o1(x){if(Uc&&typeof Uc.onCommitFiberRoot=="function")try{Uc.onCommitFiberRoot(zh,x,void 0,(x.current.flags&128)===128)}catch(S){}}function vm(x,S){return x===S&&(x!==0||1/x===1/S)||x!==x&&S!==S}var uo=typeof Object.is=="function"?Object.is:vm,$a=null,cp=!1,Gh=!1;function qf(x){$a===null?$a=[x]:$a.push(x)}function s1(x){cp=!0,qf(x)}function xa(){if(!Gh&&$a!==null){Gh=!0;var x=0,S=bi;try{var N=$a;for(bi=1;x<N.length;x++){var V=N[x];do V=V(!0);while(V!==null)}$a=null,cp=!1}catch(ne){throw $a!==null&&($a=$a.slice(x+1)),mc(Pu,xa),ne}finally{bi=S,Gh=!1}}return null}var Zf=J.ReactCurrentBatchConfig;function Lu(x,S){if(uo(x,S))return!0;if(typeof x!="object"||x===null||typeof S!="object"||S===null)return!1;var N=Object.keys(x),V=Object.keys(S);if(N.length!==V.length)return!1;for(V=0;V<N.length;V++){var ne=N[V];if(!Ai.call(S,ne)||!uo(x[ne],S[ne]))return!1}return!0}function $f(x){switch(x.tag){case 5:return gr(x.type);case 16:return gr("Lazy");case 13:return gr("Suspense");case 19:return gr("SuspenseList");case 0:case 2:case 15:return x=mi(x.type,!1),x;case 11:return x=mi(x.type.render,!1),x;case 1:return x=mi(x.type,!0),x;default:return""}}function el(x,S){if(x&&x.defaultProps){S=ee({},S),x=x.defaultProps;for(var N in x)S[N]===void 0&&(S[N]=x[N]);return S}return S}var Yl=Gi(null),ku=null,pp=null,Ud=null;function up(){Ud=pp=ku=null}function _m(x,S,N){Bo?(Ni(Yl,S._currentValue),S._currentValue=N):(Ni(Yl,S._currentValue2),S._currentValue2=N)}function Jp(x){var S=Yl.current;Hi(Yl),Bo?x._currentValue=S:x._currentValue2=S}function Nh(x,S,N){for(;x!==null;){var V=x.alternate;if((x.childLanes&S)!==S?(x.childLanes|=S,V!==null&&(V.childLanes|=S)):V!==null&&(V.childLanes&S)!==S&&(V.childLanes|=S),x===N)break;x=x.return}}function qp(x,S){ku=x,Ud=pp=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&S&&(ws=!0),x.firstContext=null)}function Al(x){var S=Bo?x._currentValue:x._currentValue2;if(Ud!==x)if(x={context:x,memoizedValue:S,next:null},pp===null){if(ku===null)throw Error(ae(308));pp=x,ku.dependencies={lanes:0,firstContext:x}}else pp=pp.next=x;return S}var Ac=null,yl=!1;function Uh(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eg(x,S){x=x.updateQueue,S.updateQueue===x&&(S.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function Il(x,S){return{eventTime:x,lane:S,tag:0,payload:null,callback:null,next:null}}function Jl(x,S){var N=x.updateQueue;N!==null&&(N=N.shared,Co!==null&&x.mode&1&&!(Yr&2)?(x=N.interleaved,x===null?(S.next=S,Ac===null?Ac=[N]:Ac.push(N)):(S.next=x.next,x.next=S),N.interleaved=S):(x=N.pending,x===null?S.next=S:(S.next=x.next,x.next=S),N.pending=S))}function Zo(x,S,N){if(S=S.updateQueue,S!==null&&(S=S.shared,(N&4194240)!==0)){var V=S.lanes;V&=x.pendingLanes,N|=V,S.lanes=N,gc(x,N)}}function tl(x,S){var N=x.updateQueue,V=x.alternate;if(V!==null&&(V=V.updateQueue,N===V)){var ne=null,de=null;if(N=N.firstBaseUpdate,N!==null){do{var Je={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};de===null?ne=de=Je:de=de.next=Je,N=N.next}while(N!==null);de===null?ne=de=S:de=de.next=S}else ne=de=S;N={baseState:V.baseState,firstBaseUpdate:ne,lastBaseUpdate:de,shared:V.shared,effects:V.effects},x.updateQueue=N;return}x=N.lastBaseUpdate,x===null?N.firstBaseUpdate=S:x.next=S,N.lastBaseUpdate=S}function vl(x,S,N,V){var ne=x.updateQueue;yl=!1;var de=ne.firstBaseUpdate,Je=ne.lastBaseUpdate,Et=ne.shared.pending;if(Et!==null){ne.shared.pending=null;var $t=Et,En=$t.next;$t.next=null,Je===null?de=En:Je.next=En,Je=$t;var vr=x.alternate;vr!==null&&(vr=vr.updateQueue,Et=vr.lastBaseUpdate,Et!==Je&&(Et===null?vr.firstBaseUpdate=En:Et.next=En,vr.lastBaseUpdate=$t))}if(de!==null){var hi=ne.baseState;Je=0,vr=En=$t=null,Et=de;do{var Vr=Et.lane,yo=Et.eventTime;if((V&Vr)===Vr){vr!==null&&(vr=vr.next={eventTime:yo,lane:0,tag:Et.tag,payload:Et.payload,callback:Et.callback,next:null});e:{var Lr=x,Ra=Et;switch(Vr=S,yo=N,Ra.tag){case 1:if(Lr=Ra.payload,typeof Lr=="function"){hi=Lr.call(yo,hi,Vr);break e}hi=Lr;break e;case 3:Lr.flags=Lr.flags&-65537|128;case 0:if(Lr=Ra.payload,Vr=typeof Lr=="function"?Lr.call(yo,hi,Vr):Lr,Vr==null)break e;hi=ee({},hi,Vr);break e;case 2:yl=!0}}Et.callback!==null&&Et.lane!==0&&(x.flags|=64,Vr=ne.effects,Vr===null?ne.effects=[Et]:Vr.push(Et))}else yo={eventTime:yo,lane:Vr,tag:Et.tag,payload:Et.payload,callback:Et.callback,next:null},vr===null?(En=vr=yo,$t=hi):vr=vr.next=yo,Je|=Vr;if(Et=Et.next,Et===null){if(Et=ne.shared.pending,Et===null)break;Vr=Et,Et=Vr.next,Vr.next=null,ne.lastBaseUpdate=Vr,ne.shared.pending=null}}while(1);if(vr===null&&($t=hi),ne.baseState=$t,ne.firstBaseUpdate=En,ne.lastBaseUpdate=vr,S=ne.shared.interleaved,S!==null){ne=S;do Je|=ne.lane,ne=ne.next;while(ne!==S)}else de===null&&(ne.shared.lanes=0);Yc|=Je,x.lanes=Je,x.memoizedState=hi}}function As(x,S,N){if(x=S.effects,S.effects=null,x!==null)for(S=0;S<x.length;S++){var V=x[S],ne=V.callback;if(ne!==null){if(V.callback=null,V=N,typeof ne!="function")throw Error(ae(191,ne));ne.call(V)}}}var jh=new E.Component().refs;function yc(x,S,N,V){S=x.memoizedState,N=N(V,S),N=N==null?S:ee({},S,N),x.memoizedState=N,x.lanes===0&&(x.updateQueue.baseState=N)}var vc={isMounted:function(x){return(x=x._reactInternals)?xr(x)===x:!1},enqueueSetState:function(x,S,N){x=x._reactInternals;var V=al(),ne=mu(x),de=Il(V,ne);de.payload=S,N!=null&&(de.callback=N),Jl(x,de),S=ll(x,ne,V),S!==null&&Zo(S,x,ne)},enqueueReplaceState:function(x,S,N){x=x._reactInternals;var V=al(),ne=mu(x),de=Il(V,ne);de.tag=1,de.payload=S,N!=null&&(de.callback=N),Jl(x,de),S=ll(x,ne,V),S!==null&&Zo(S,x,ne)},enqueueForceUpdate:function(x,S){x=x._reactInternals;var N=al(),V=mu(x),ne=Il(N,V);ne.tag=2,S!=null&&(ne.callback=S),Jl(x,ne),S=ll(x,V,N),S!==null&&Zo(S,x,V)}};function Ga(x,S,N,V,ne,de,Je){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(V,de,Je):S.prototype&&S.prototype.isPureReactComponent?!Lu(N,V)||!Lu(ne,de):!0}function Go(x,S,N){var V=!1,ne=Js,de=S.contextType;return typeof de=="object"&&de!==null?de=Al(de):(ne=qo(S)?za:po.current,V=S.contextTypes,de=(V=V!=null)?ua(x,ne):Js),S=new S(N,de),x.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=vc,x.stateNode=S,S._reactInternals=x,V&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=ne,x.__reactInternalMemoizedMaskedChildContext=de),S}function dp(x,S,N,V){x=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(N,V),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(N,V),S.state!==x&&vc.enqueueReplaceState(S,S.state,null)}function Hh(x,S,N,V){var ne=x.stateNode;ne.props=N,ne.state=x.memoizedState,ne.refs=jh,Uh(x);var de=S.contextType;typeof de=="object"&&de!==null?ne.context=Al(de):(de=qo(S)?za:po.current,ne.context=ua(x,de)),ne.state=x.memoizedState,de=S.getDerivedStateFromProps,typeof de=="function"&&(yc(x,S,de,N),ne.state=x.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof ne.getSnapshotBeforeUpdate=="function"||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(S=ne.state,typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount(),S!==ne.state&&vc.enqueueReplaceState(ne,ne.state,null),vl(x,N,ne,V),ne.state=x.memoizedState),typeof ne.componentDidMount=="function"&&(x.flags|=4194308)}var Zp=[],ql=0,Wh=null,$p=0,_l=[],El=0,hp=null,_c=1,Ec="";function fp(x,S){Zp[ql++]=$p,Zp[ql++]=Wh,Wh=x,$p=S}function Em(x,S,N){_l[El++]=_c,_l[El++]=Ec,_l[El++]=hp,hp=x;var V=_c;x=Ec;var ne=32-Io(V)-1;V&=~(1<<ne),N+=1;var de=32-Io(S)+ne;if(30<de){var Je=ne-ne%5;de=(V&(1<<Je)-1).toString(32),V>>=Je,ne-=Je,_c=1<<32-Io(S)+ne|N<<ne|V,Ec=de+x}else _c=1<<de|N<<ne|V,Ec=x}function zu(x){x.return!==null&&(fp(x,1),Em(x,1,0))}function jd(x){for(;x===Wh;)Wh=Zp[--ql],Zp[ql]=null,$p=Zp[--ql],Zp[ql]=null;for(;x===hp;)hp=_l[--El],_l[El]=null,Ec=_l[--El],_l[El]=null,_c=_l[--El],_l[El]=null}var da=null,Ca=null,No=!1,ha=!1,Xr=null;function bm(x,S){var N=Cl(5,null,null,0);N.elementType="DELETED",N.stateNode=S,N.return=x,S=x.deletions,S===null?(x.deletions=[N],x.flags|=16):S.push(N)}function gn(x,S){switch(x.tag){case 5:return S=St(S,x.type,x.pendingProps),S!==null?(x.stateNode=S,da=x,Ca=Fe(S),!0):!1;case 6:return S=pn(S,x.pendingProps),S!==null?(x.stateNode=S,da=x,Ca=null,!0):!1;case 13:if(S=Dn(S),S!==null){var N=hp!==null?{id:_c,overflow:Ec}:null;return x.memoizedState={dehydrated:S,treeContext:N,retryLane:1073741824},N=Cl(18,null,null,0),N.stateNode=S,N.return=x,x.child=N,da=x,Ca=null,!0}return!1;default:return!1}}function yi(x){return(x.mode&1)!==0&&(x.flags&128)===0}function Hd(x){if(No){var S=Ca;if(S){var N=S;if(!gn(x,S)){if(yi(x))throw Error(ae(418));S=Le(N);var V=da;S&&gn(x,S)?bm(V,N):(x.flags=x.flags&-4097|2,No=!1,da=x)}}else{if(yi(x))throw Error(ae(418));x.flags=x.flags&-4097|2,No=!1,da=x}}}function tg(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;da=x}function Vh(x){if(!to||x!==da)return!1;if(!No)return tg(x),No=!0,!1;if(x.tag!==3&&(x.tag!==5||lt(x.type)&&!Hn(x.type,x.memoizedProps))){var S=Ca;if(S){if(yi(x)){for(x=Ca;x;)x=Le(x);throw Error(ae(418))}for(;S;)bm(x,S),S=Le(S)}}if(tg(x),x.tag===13){if(!to)throw Error(ae(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(ae(317));Ca=Tt(x)}else Ca=da?Le(x.stateNode):null;return!0}function Zl(){to&&(Ca=da=null,ha=No=!1)}function eu(x){Xr===null?Xr=[x]:Xr.push(x)}function Wd(x,S,N){if(x=N.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(ae(309));var V=N.stateNode}if(!V)throw Error(ae(147,x));var ne=V,de=""+x;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===de?S.ref:(S=function(Je){var Et=ne.refs;Et===jh&&(Et=ne.refs={}),Je===null?delete Et[de]:Et[de]=Je},S._stringRef=de,S)}if(typeof x!="string")throw Error(ae(284));if(!N._owner)throw Error(ae(290,x))}return x}function bc(x,S){throw x=Object.prototype.toString.call(S),Error(ae(31,x==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":x))}function jc(x){var S=x._init;return S(x._payload)}function Qh(x){function S(Ot,xt){if(x){var Ht=Ot.deletions;Ht===null?(Ot.deletions=[xt],Ot.flags|=16):Ht.push(xt)}}function N(Ot,xt){if(!x)return null;for(;xt!==null;)S(Ot,xt),xt=xt.sibling;return null}function V(Ot,xt){for(Ot=new Map;xt!==null;)xt.key!==null?Ot.set(xt.key,xt):Ot.set(xt.index,xt),xt=xt.sibling;return Ot}function ne(Ot,xt){return Ot=Nl(Ot,xt),Ot.index=0,Ot.sibling=null,Ot}function de(Ot,xt,Ht){return Ot.index=Ht,x?(Ht=Ot.alternate,Ht!==null?(Ht=Ht.index,Ht<xt?(Ot.flags|=2,xt):Ht):(Ot.flags|=2,xt)):(Ot.flags|=1048576,xt)}function Je(Ot){return x&&Ot.alternate===null&&(Ot.flags|=2),Ot}function Et(Ot,xt,Ht,dr){return xt===null||xt.tag!==6?(xt=sh(Ht,Ot.mode,dr),xt.return=Ot,xt):(xt=ne(xt,Ht),xt.return=Ot,xt)}function $t(Ot,xt,Ht,dr){var Fr=Ht.type;return Fr===Mt?vr(Ot,xt,Ht.props.children,dr,Ht.key):xt!==null&&(xt.elementType===Fr||typeof Fr=="object"&&Fr!==null&&Fr.$$typeof===Pt&&jc(Fr)===xt.type)?(dr=ne(xt,Ht.props),dr.ref=Wd(Ot,xt,Ht),dr.return=Ot,dr):(dr=cf(Ht.type,Ht.key,Ht.props,null,Ot.mode,dr),dr.ref=Wd(Ot,xt,Ht),dr.return=Ot,dr)}function En(Ot,xt,Ht,dr){return xt===null||xt.tag!==4||xt.stateNode.containerInfo!==Ht.containerInfo||xt.stateNode.implementation!==Ht.implementation?(xt=pf(Ht,Ot.mode,dr),xt.return=Ot,xt):(xt=ne(xt,Ht.children||[]),xt.return=Ot,xt)}function vr(Ot,xt,Ht,dr,Fr){return xt===null||xt.tag!==7?(xt=Au(Ht,Ot.mode,dr,Fr),xt.return=Ot,xt):(xt=ne(xt,Ht),xt.return=Ot,xt)}function hi(Ot,xt,Ht){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return xt=sh(""+xt,Ot.mode,Ht),xt.return=Ot,xt;if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case pe:return Ht=cf(xt.type,xt.key,xt.props,null,Ot.mode,Ht),Ht.ref=Wd(Ot,null,xt),Ht.return=Ot,Ht;case ue:return xt=pf(xt,Ot.mode,Ht),xt.return=Ot,xt;case Pt:var dr=xt._init;return hi(Ot,dr(xt._payload),Ht)}if(Gr(xt)||Ft(xt))return xt=Au(xt,Ot.mode,Ht,null),xt.return=Ot,xt;bc(Ot,xt)}return null}function Vr(Ot,xt,Ht,dr){var Fr=xt!==null?xt.key:null;if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number")return Fr!==null?null:Et(Ot,xt,""+Ht,dr);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case pe:return Ht.key===Fr?$t(Ot,xt,Ht,dr):null;case ue:return Ht.key===Fr?En(Ot,xt,Ht,dr):null;case Pt:return Fr=Ht._init,Vr(Ot,xt,Fr(Ht._payload),dr)}if(Gr(Ht)||Ft(Ht))return Fr!==null?null:vr(Ot,xt,Ht,dr,null);bc(Ot,Ht)}return null}function yo(Ot,xt,Ht,dr,Fr){if(typeof dr=="string"&&dr!==""||typeof dr=="number")return Ot=Ot.get(Ht)||null,Et(xt,Ot,""+dr,Fr);if(typeof dr=="object"&&dr!==null){switch(dr.$$typeof){case pe:return Ot=Ot.get(dr.key===null?Ht:dr.key)||null,$t(xt,Ot,dr,Fr);case ue:return Ot=Ot.get(dr.key===null?Ht:dr.key)||null,En(xt,Ot,dr,Fr);case Pt:var Ri=dr._init;return yo(Ot,xt,Ht,Ri(dr._payload),Fr)}if(Gr(dr)||Ft(dr))return Ot=Ot.get(Ht)||null,vr(xt,Ot,dr,Fr,null);bc(xt,dr)}return null}function Lr(Ot,xt,Ht,dr){for(var Fr=null,Ri=null,fi=xt,io=xt=0,ra=null;fi!==null&&io<Ht.length;io++){fi.index>io?(ra=fi,fi=null):ra=fi.sibling;var oo=Vr(Ot,fi,Ht[io],dr);if(oo===null){fi===null&&(fi=ra);break}x&&fi&&oo.alternate===null&&S(Ot,fi),xt=de(oo,xt,io),Ri===null?Fr=oo:Ri.sibling=oo,Ri=oo,fi=ra}if(io===Ht.length)return N(Ot,fi),No&&fp(Ot,io),Fr;if(fi===null){for(;io<Ht.length;io++)fi=hi(Ot,Ht[io],dr),fi!==null&&(xt=de(fi,xt,io),Ri===null?Fr=fi:Ri.sibling=fi,Ri=fi);return No&&fp(Ot,io),Fr}for(fi=V(Ot,fi);io<Ht.length;io++)ra=yo(fi,Ot,io,Ht[io],dr),ra!==null&&(x&&ra.alternate!==null&&fi.delete(ra.key===null?io:ra.key),xt=de(ra,xt,io),Ri===null?Fr=ra:Ri.sibling=ra,Ri=ra);return x&&fi.forEach(function(Bc){return S(Ot,Bc)}),No&&fp(Ot,io),Fr}function Ra(Ot,xt,Ht,dr){var Fr=Ft(Ht);if(typeof Fr!="function")throw Error(ae(150));if(Ht=Fr.call(Ht),Ht==null)throw Error(ae(151));for(var Ri=Fr=null,fi=xt,io=xt=0,ra=null,oo=Ht.next();fi!==null&&!oo.done;io++,oo=Ht.next()){fi.index>io?(ra=fi,fi=null):ra=fi.sibling;var Bc=Vr(Ot,fi,oo.value,dr);if(Bc===null){fi===null&&(fi=ra);break}x&&fi&&Bc.alternate===null&&S(Ot,fi),xt=de(Bc,xt,io),Ri===null?Fr=Bc:Ri.sibling=Bc,Ri=Bc,fi=ra}if(oo.done)return N(Ot,fi),No&&fp(Ot,io),Fr;if(fi===null){for(;!oo.done;io++,oo=Ht.next())oo=hi(Ot,oo.value,dr),oo!==null&&(xt=de(oo,xt,io),Ri===null?Fr=oo:Ri.sibling=oo,Ri=oo);return No&&fp(Ot,io),Fr}for(fi=V(Ot,fi);!oo.done;io++,oo=Ht.next())oo=yo(fi,Ot,io,oo.value,dr),oo!==null&&(x&&oo.alternate!==null&&fi.delete(oo.key===null?io:oo.key),xt=de(oo,xt,io),Ri===null?Fr=oo:Ri.sibling=oo,Ri=oo);return x&&fi.forEach(function(f1){return S(Ot,f1)}),No&&fp(Ot,io),Fr}function ac(Ot,xt,Ht,dr){if(typeof Ht=="object"&&Ht!==null&&Ht.type===Mt&&Ht.key===null&&(Ht=Ht.props.children),typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case pe:e:{for(var Fr=Ht.key,Ri=xt;Ri!==null;){if(Ri.key===Fr){if(Fr=Ht.type,Fr===Mt){if(Ri.tag===7){N(Ot,Ri.sibling),xt=ne(Ri,Ht.props.children),xt.return=Ot,Ot=xt;break e}}else if(Ri.elementType===Fr||typeof Fr=="object"&&Fr!==null&&Fr.$$typeof===Pt&&jc(Fr)===Ri.type){N(Ot,Ri.sibling),xt=ne(Ri,Ht.props),xt.ref=Wd(Ot,Ri,Ht),xt.return=Ot,Ot=xt;break e}N(Ot,Ri);break}else S(Ot,Ri);Ri=Ri.sibling}Ht.type===Mt?(xt=Au(Ht.props.children,Ot.mode,dr,Ht.key),xt.return=Ot,Ot=xt):(dr=cf(Ht.type,Ht.key,Ht.props,null,Ot.mode,dr),dr.ref=Wd(Ot,xt,Ht),dr.return=Ot,Ot=dr)}return Je(Ot);case ue:e:{for(Ri=Ht.key;xt!==null;){if(xt.key===Ri)if(xt.tag===4&&xt.stateNode.containerInfo===Ht.containerInfo&&xt.stateNode.implementation===Ht.implementation){N(Ot,xt.sibling),xt=ne(xt,Ht.children||[]),xt.return=Ot,Ot=xt;break e}else{N(Ot,xt);break}else S(Ot,xt);xt=xt.sibling}xt=pf(Ht,Ot.mode,dr),xt.return=Ot,Ot=xt}return Je(Ot);case Pt:return Ri=Ht._init,ac(Ot,xt,Ri(Ht._payload),dr)}if(Gr(Ht))return Lr(Ot,xt,Ht,dr);if(Ft(Ht))return Ra(Ot,xt,Ht,dr);bc(Ot,Ht)}return typeof Ht=="string"&&Ht!==""||typeof Ht=="number"?(Ht=""+Ht,xt!==null&&xt.tag===6?(N(Ot,xt.sibling),xt=ne(xt,Ht),xt.return=Ot,Ot=xt):(N(Ot,xt),xt=sh(Ht,Ot.mode,dr),xt.return=Ot,Ot=xt),Je(Ot)):N(Ot,xt)}return ac}var Gu=Qh(!0),Mm=Qh(!1),Vd={},bl=Gi(Vd),gp=Gi(Vd),$r=Gi(Vd);function Uo(x){if(x===Vd)throw Error(ae(174));return x}function Fl(x,S){Ni($r,S),Ni(gp,x),Ni(bl,Vd),x=jn(S),Hi(bl),Ni(bl,x)}function $l(){Hi(bl),Hi(gp),Hi($r)}function Qd(x){var S=Uo($r.current),N=Uo(bl.current);S=tn(N,x.type,S),N!==S&&(Ni(gp,x),Ni(bl,S))}function Na(x){gp.current===x&&(Hi(bl),Hi(gp))}var Mo=Gi(0);function Nu(x){for(var S=x;S!==null;){if(S.tag===13){var N=S.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||Ln(N)||lr(N)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if(S.flags&128)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===x)break;for(;S.sibling===null;){if(S.return===null||S.return===x)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var $i=[];function Mi(){for(var x=0;x<$i.length;x++){var S=$i[x];Bo?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}$i.length=0}var Sa=J.ReactCurrentDispatcher,Ns=J.ReactCurrentBatchConfig,tu=0,jo=null,fa=null,Us=null,xo=!1,Qe=!1,Uu=0,ng=0;function Ao(){throw Error(ae(321))}function ec(x,S){if(S===null)return!1;for(var N=0;N<S.length&&N<x.length;N++)if(!uo(x[N],S[N]))return!1;return!0}function Pn(x,S,N,V,ne,de){if(tu=de,jo=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,Sa.current=x===null||x.memoizedState===null?Yh:a1,x=N(V,ne),Qe){de=0;do{if(Qe=!1,Uu=0,25<=de)throw Error(ae(301));de+=1,Us=fa=null,S.updateQueue=null,Sa.current=xm,x=N(V,ne)}while(Qe)}if(Sa.current=Ep,S=fa!==null&&fa.next!==null,tu=0,Us=fa=jo=null,xo=!1,S)throw Error(ae(300));return x}function wa(){var x=Uu!==0;return Uu=0,x}function di(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Us===null?jo.memoizedState=Us=x:Us=Us.next=x,Us}function $o(){if(fa===null){var x=jo.alternate;x=x!==null?x.memoizedState:null}else x=fa.next;var S=Us===null?jo.memoizedState:Us.next;if(S!==null)Us=S,fa=x;else{if(x===null)throw Error(ae(310));fa=x,x={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},Us===null?jo.memoizedState=Us=x:Us=Us.next=x}return Us}function es(x,S){return typeof S=="function"?S(x):S}function Ua(x){var S=$o(),N=S.queue;if(N===null)throw Error(ae(311));N.lastRenderedReducer=x;var V=fa,ne=V.baseQueue,de=N.pending;if(de!==null){if(ne!==null){var Je=ne.next;ne.next=de.next,de.next=Je}V.baseQueue=ne=de,N.pending=null}if(ne!==null){de=ne.next,V=V.baseState;var Et=Je=null,$t=null,En=de;do{var vr=En.lane;if((tu&vr)===vr)$t!==null&&($t=$t.next={lane:0,action:En.action,hasEagerState:En.hasEagerState,eagerState:En.eagerState,next:null}),V=En.hasEagerState?En.eagerState:x(V,En.action);else{var hi={lane:vr,action:En.action,hasEagerState:En.hasEagerState,eagerState:En.eagerState,next:null};$t===null?(Et=$t=hi,Je=V):$t=$t.next=hi,jo.lanes|=vr,Yc|=vr}En=En.next}while(En!==null&&En!==de);$t===null?Je=V:$t.next=Et,uo(V,S.memoizedState)||(ws=!0),S.memoizedState=V,S.baseState=Je,S.baseQueue=$t,N.lastRenderedState=V}if(x=N.interleaved,x!==null){ne=x;do de=ne.lane,jo.lanes|=de,Yc|=de,ne=ne.next;while(ne!==x)}else ne===null&&(N.lanes=0);return[S.memoizedState,N.dispatch]}function ja(x){var S=$o(),N=S.queue;if(N===null)throw Error(ae(311));N.lastRenderedReducer=x;var V=N.dispatch,ne=N.pending,de=S.memoizedState;if(ne!==null){N.pending=null;var Je=ne=ne.next;do de=x(de,Je.action),Je=Je.next;while(Je!==ne);uo(de,S.memoizedState)||(ws=!0),S.memoizedState=de,S.baseQueue===null&&(S.baseState=de),N.lastRenderedState=de}return[de,V]}function Mc(){}function mp(x,S){var N=jo,V=$o(),ne=S(),de=!uo(V.memoizedState,ne);if(de&&(V.memoizedState=ne,ws=!0),V=V.queue,Dl(Hc.bind(null,N,V,x),[x]),V.getSnapshot!==S||de||Us!==null&&Us.memoizedState.tag&1){if(N.flags|=2048,$s(9,Ol.bind(null,N,V,ne,S),void 0,null),Co===null)throw Error(ae(349));tu&30||ju(N,S,ne)}return ne}function ju(x,S,N){x.flags|=16384,x={getSnapshot:S,value:N},S=jo.updateQueue,S===null?(S={lastEffect:null,stores:null},jo.updateQueue=S,S.stores=[x]):(N=S.stores,N===null?S.stores=[x]:N.push(x))}function Ol(x,S,N,V){S.value=N,S.getSnapshot=V,Hu(S)&&ll(x,1,-1)}function Hc(x,S,N){return N(function(){Hu(S)&&ll(x,1,-1)})}function Hu(x){var S=x.getSnapshot;x=x.value;try{var N=S();return!uo(x,N)}catch(V){return!0}}function Kh(x){var S=di();return typeof x=="function"&&(x=x()),S.memoizedState=S.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:x},S.queue=x,x=x.dispatch=_p.bind(null,jo,x),[S.memoizedState,x]}function $s(x,S,N,V){return x={tag:x,create:S,destroy:N,deps:V,next:null},S=jo.updateQueue,S===null?(S={lastEffect:null,stores:null},jo.updateQueue=S,S.lastEffect=x.next=x):(N=S.lastEffect,N===null?S.lastEffect=x.next=x:(V=N.next,N.next=x,x.next=V,S.lastEffect=x)),x}function Ap(){return $o().memoizedState}function Fo(x,S,N,V){var ne=di();jo.flags|=x,ne.memoizedState=$s(1|S,N,void 0,V===void 0?null:V)}function nl(x,S,N,V){var ne=$o();V=V===void 0?null:V;var de=void 0;if(fa!==null){var Je=fa.memoizedState;if(de=Je.destroy,V!==null&&ec(V,Je.deps)){ne.memoizedState=$s(S,N,de,V);return}}jo.flags|=x,ne.memoizedState=$s(1|S,N,de,V)}function yp(x,S){return Fo(8390656,8,x,S)}function Dl(x,S){return nl(2048,8,x,S)}function Wc(x,S){return nl(4,2,x,S)}function Kd(x,S){return nl(4,4,x,S)}function Wu(x,S){if(typeof S=="function")return x=x(),S(x),function(){S(null)};if(S!=null)return x=x(),S.current=x,function(){S.current=null}}function Vu(x,S,N){return N=N!=null?N.concat([x]):null,nl(4,4,Wu.bind(null,S,x),N)}function vp(){}function li(x,S){var N=$o();S=S===void 0?null:S;var V=N.memoizedState;return V!==null&&S!==null&&ec(S,V[1])?V[0]:(N.memoizedState=[x,S],x)}function nu(x,S){var N=$o();S=S===void 0?null:S;var V=N.memoizedState;return V!==null&&S!==null&&ec(S,V[1])?V[0]:(x=x(),N.memoizedState=[x,S],x)}function ys(x,S){var N=bi;bi=N!==0&&4>N?N:4,x(!0);var V=Ns.transition;Ns.transition={};try{x(!1),S()}finally{bi=N,Ns.transition=V}}function Xd(){return $o().memoizedState}function Xh(x,S,N){var V=mu(x);N={lane:V,action:N,hasEagerState:!1,eagerState:null,next:null},Yd(x)?rl(S,N):(rg(x,S,N),N=al(),x=ll(x,V,N),x!==null&&ig(x,S,V))}function _p(x,S,N){var V=mu(x),ne={lane:V,action:N,hasEagerState:!1,eagerState:null,next:null};if(Yd(x))rl(S,ne);else{rg(x,S,ne);var de=x.alternate;if(x.lanes===0&&(de===null||de.lanes===0)&&(de=S.lastRenderedReducer,de!==null))try{var Je=S.lastRenderedState,Et=de(Je,N);if(ne.hasEagerState=!0,ne.eagerState=Et,uo(Et,Je))return}catch($t){}finally{}N=al(),x=ll(x,V,N),x!==null&&ig(x,S,V)}}function Yd(x){var S=x.alternate;return x===jo||S!==null&&S===jo}function rl(x,S){Qe=xo=!0;var N=x.pending;N===null?S.next=S:(S.next=N.next,N.next=S),x.pending=S}function rg(x,S,N){Co!==null&&x.mode&1&&!(Yr&2)?(x=S.interleaved,x===null?(N.next=N,Ac===null?Ac=[S]:Ac.push(S)):(N.next=x.next,x.next=N),S.interleaved=N):(x=S.pending,x===null?N.next=N:(N.next=x.next,x.next=N),S.pending=N)}function ig(x,S,N){if(N&4194240){var V=S.lanes;V&=x.pendingLanes,N|=V,S.lanes=N,gc(x,N)}}var Ep={readContext:Al,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useInsertionEffect:Ao,useLayoutEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useMutableSource:Ao,useSyncExternalStore:Ao,useId:Ao,unstable_isNewReconciler:!1},Yh={readContext:Al,useCallback:function(x,S){return di().memoizedState=[x,S===void 0?null:S],x},useContext:Al,useEffect:yp,useImperativeHandle:function(x,S,N){return N=N!=null?N.concat([x]):null,Fo(4194308,4,Wu.bind(null,S,x),N)},useLayoutEffect:function(x,S){return Fo(4194308,4,x,S)},useInsertionEffect:function(x,S){return Fo(4,2,x,S)},useMemo:function(x,S){var N=di();return S=S===void 0?null:S,x=x(),N.memoizedState=[x,S],x},useReducer:function(x,S,N){var V=di();return S=N!==void 0?N(S):S,V.memoizedState=V.baseState=S,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:S},V.queue=x,x=x.dispatch=Xh.bind(null,jo,x),[V.memoizedState,x]},useRef:function(x){var S=di();return x={current:x},S.memoizedState=x},useState:Kh,useDebugValue:vp,useDeferredValue:function(x){var S=Kh(x),N=S[0],V=S[1];return yp(function(){var ne=Ns.transition;Ns.transition={};try{V(x)}finally{Ns.transition=ne}},[x]),N},useTransition:function(){var x=Kh(!1),S=x[0];return x=ys.bind(null,x[1]),di().memoizedState=x,[S,x]},useMutableSource:function(){},useSyncExternalStore:function(x,S,N){var V=jo,ne=di();if(No){if(N===void 0)throw Error(ae(407));N=N()}else{if(N=S(),Co===null)throw Error(ae(349));tu&30||ju(V,S,N)}ne.memoizedState=N;var de={value:N,getSnapshot:S};return ne.queue=de,yp(Hc.bind(null,V,de,x),[x]),V.flags|=2048,$s(9,Ol.bind(null,V,de,N,S),void 0,null),N},useId:function(){var x=di(),S=Co.identifierPrefix;if(No){var N=Ec,V=_c;N=(V&~(1<<32-Io(V)-1)).toString(32)+N,S=":"+S+"R"+N,N=Uu++,0<N&&(S+="H"+N.toString(32)),S+=":"}else N=ng++,S=":"+S+"r"+N.toString(32)+":";return x.memoizedState=S},unstable_isNewReconciler:!1},a1={readContext:Al,useCallback:li,useContext:Al,useEffect:Dl,useImperativeHandle:Vu,useInsertionEffect:Wc,useLayoutEffect:Kd,useMemo:nu,useReducer:Ua,useRef:Ap,useState:function(){return Ua(es)},useDebugValue:vp,useDeferredValue:function(x){var S=Ua(es),N=S[0],V=S[1];return Dl(function(){var ne=Ns.transition;Ns.transition={};try{V(x)}finally{Ns.transition=ne}},[x]),N},useTransition:function(){var x=Ua(es)[0],S=$o().memoizedState;return[x,S]},useMutableSource:Mc,useSyncExternalStore:mp,useId:Xd,unstable_isNewReconciler:!1},xm={readContext:Al,useCallback:li,useContext:Al,useEffect:Dl,useImperativeHandle:Vu,useInsertionEffect:Wc,useLayoutEffect:Kd,useMemo:nu,useReducer:ja,useRef:Ap,useState:function(){return ja(es)},useDebugValue:vp,useDeferredValue:function(x){var S=ja(es),N=S[0],V=S[1];return Dl(function(){var ne=Ns.transition;Ns.transition={};try{V(x)}finally{Ns.transition=ne}},[x]),N},useTransition:function(){var x=ja(es)[0],S=$o().memoizedState;return[x,S]},useMutableSource:Mc,useSyncExternalStore:mp,useId:Xd,unstable_isNewReconciler:!1};function xc(x,S){try{var N="",V=S;do N+=$f(V),V=V.return;while(V);var ne=N}catch(de){ne=`
Error generating stack: `+de.message+`
`+de.stack}return{value:x,source:S,stack:ne}}function Pl(x,S){try{w.error(S.value)}catch(N){setTimeout(function(){throw N})}}var Vc=typeof WeakMap=="function"?WeakMap:Map;function ru(x,S,N){N=Il(-1,N),N.tag=3,N.payload={element:null};var V=S.value;return N.callback=function(){fu||(fu=!0,gu=V),Pl(x,S)},N}function og(x,S,N){N=Il(-1,N),N.tag=3;var V=x.type.getDerivedStateFromError;if(typeof V=="function"){var ne=S.value;N.payload=function(){return V(ne)},N.callback=function(){Pl(x,S)}}var de=x.stateNode;return de!==null&&typeof de.componentDidCatch=="function"&&(N.callback=function(){Pl(x,S),typeof V!="function"&&(wp===null?wp=new Set([this]):wp.add(this));var Je=S.stack;this.componentDidCatch(S.value,{componentStack:Je!==null?Je:""})}),N}function Jd(x,S,N){var V=x.pingCache;if(V===null){V=x.pingCache=new Vc;var ne=new Set;V.set(S,ne)}else ne=V.get(S),ne===void 0&&(ne=new Set,V.set(S,ne));ne.has(N)||(ne.add(N),x=Rm.bind(null,x,S,N),S.then(x,x))}function Jh(x){do{var S;if((S=x.tag===13)&&(S=x.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return x;x=x.return}while(x!==null);return null}function iu(x,S,N,V,ne){return x.mode&1?(x.flags|=65536,x.lanes=ne,x):(x===S?x.flags|=65536:(x.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(S=Il(-1,1),S.tag=2,Jl(N,S))),N.lanes|=1),x)}function tc(x){x.flags|=4}function Cm(x,S){if(x!==null&&x.child===S.child)return!0;if(S.flags&16)return!1;for(x=S.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var Qu,Bi,ga,Ml;if(Kr)Qu=function(x,S){for(var N=S.child;N!==null;){if(N.tag===5||N.tag===6)Ti(x,N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===S)break;for(;N.sibling===null;){if(N.return===null||N.return===S)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},Bi=function(){},ga=function(x,S,N,V,ne){if(x=x.memoizedProps,x!==V){var de=S.stateNode,Je=Uo(bl.current);N=Rn(de,N,x,V,ne,Je),(S.updateQueue=N)&&tc(S)}},Ml=function(x,S,N,V){N!==V&&tc(S)};else if(co){Qu=function(x,S,N,V){for(var ne=S.child;ne!==null;){if(ne.tag===5){var de=ne.stateNode;N&&V&&(de=Nc(de,ne.type,ne.memoizedProps,ne)),Ti(x,de)}else if(ne.tag===6)de=ne.stateNode,N&&V&&(de=Ze(de,ne.memoizedProps,ne)),Ti(x,de);else if(ne.tag!==4){if(ne.tag===22&&ne.memoizedState!==null)de=ne.child,de!==null&&(de.return=ne),Qu(x,ne,!0,!0);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}}if(ne===S)break;for(;ne.sibling===null;){if(ne.return===null||ne.return===S)return;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}};var qd=function(x,S,N,V){for(var ne=S.child;ne!==null;){if(ne.tag===5){var de=ne.stateNode;N&&V&&(de=Nc(de,ne.type,ne.memoizedProps,ne)),Za(x,de)}else if(ne.tag===6)de=ne.stateNode,N&&V&&(de=Ze(de,ne.memoizedProps,ne)),Za(x,de);else if(ne.tag!==4){if(ne.tag===22&&ne.memoizedState!==null)de=ne.child,de!==null&&(de.return=ne),qd(x,ne,!0,!0);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}}if(ne===S)break;for(;ne.sibling===null;){if(ne.return===null||ne.return===S)return;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}};Bi=function(x,S){var N=S.stateNode;if(!Cm(x,S)){x=N.containerInfo;var V=ba(x);qd(V,S,!1,!1),N.pendingChildren=V,tc(S),fc(x,V)}},ga=function(x,S,N,V,ne){var de=x.stateNode,Je=x.memoizedProps;if((x=Cm(x,S))&&Je===V)S.stateNode=de;else{var Et=S.stateNode,$t=Uo(bl.current),En=null;Je!==V&&(En=Rn(Et,N,Je,V,ne,$t)),x&&En===null?S.stateNode=de:(de=zo(de,En,N,Je,V,S,x,Et),Fn(de,N,V,ne,$t)&&tc(S),S.stateNode=de,x?tc(S):Qu(de,S,!1,!1))}},Ml=function(x,S,N,V){N!==V?(x=Uo($r.current),N=Uo(bl.current),S.stateNode=hr(V,x,N,S),tc(S)):S.stateNode=x.stateNode}}else Bi=function(){},ga=function(){},Ml=function(){};function il(x,S){if(!No)switch(x.tailMode){case"hidden":S=x.tail;for(var N=null;S!==null;)S.alternate!==null&&(N=S),S=S.sibling;N===null?x.tail=null:N.sibling=null;break;case"collapsed":N=x.tail;for(var V=null;N!==null;)N.alternate!==null&&(V=N),N=N.sibling;V===null?S||x.tail===null?x.tail=null:x.tail.sibling=null:V.sibling=null}}function Ho(x){var S=x.alternate!==null&&x.alternate.child===x.child,N=0,V=0;if(S)for(var ne=x.child;ne!==null;)N|=ne.lanes|ne.childLanes,V|=ne.subtreeFlags&14680064,V|=ne.flags&14680064,ne.return=x,ne=ne.sibling;else for(ne=x.child;ne!==null;)N|=ne.lanes|ne.childLanes,V|=ne.subtreeFlags,V|=ne.flags,ne.return=x,ne=ne.sibling;return x.subtreeFlags|=V,x.childLanes=N,S}function Ku(x,S,N){var V=S.pendingProps;switch(jd(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(S),null;case 1:return qo(S.type)&&Qi(),Ho(S),null;case 3:return V=S.stateNode,$l(),Hi(ms),Hi(po),Mi(),V.pendingContext&&(V.context=V.pendingContext,V.pendingContext=null),(x===null||x.child===null)&&(Vh(S)?tc(S):x===null||x.memoizedState.isDehydrated&&!(S.flags&256)||(S.flags|=1024,Xr!==null&&(cg(Xr),Xr=null))),Bi(x,S),Ho(S),null;case 5:Na(S),N=Uo($r.current);var ne=S.type;if(x!==null&&S.stateNode!=null)ga(x,S,ne,V,N),x.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!V){if(S.stateNode===null)throw Error(ae(166));return Ho(S),null}if(x=Uo(bl.current),Vh(S)){if(!to)throw Error(ae(175));x=$e(S.stateNode,S.type,S.memoizedProps,N,x,S,!ha),S.updateQueue=x,x!==null&&tc(S)}else{var de=Rr(ne,V,N,x,S);Qu(de,S,!1,!1),S.stateNode=de,Fn(de,ne,V,N,x)&&tc(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return Ho(S),null;case 6:if(x&&S.stateNode!=null)Ml(x,S,x.memoizedProps,V);else{if(typeof V!="string"&&S.stateNode===null)throw Error(ae(166));if(x=Uo($r.current),N=Uo(bl.current),Vh(S)){if(!to)throw Error(ae(176));if(x=S.stateNode,V=S.memoizedProps,(N=dt(x,V,S,!ha))&&(ne=da,ne!==null))switch(de=(ne.mode&1)!==0,ne.tag){case 3:Qt(ne.stateNode.containerInfo,x,V,de);break;case 5:wn(ne.type,ne.memoizedProps,ne.stateNode,x,V,de)}N&&tc(S)}else S.stateNode=hr(V,x,N,S)}return Ho(S),null;case 13:if(Hi(Mo),V=S.memoizedState,No&&Ca!==null&&S.mode&1&&!(S.flags&128)){for(x=Ca;x;)x=Le(x);return Zl(),S.flags|=98560,S}if(V!==null&&V.dehydrated!==null){if(V=Vh(S),x===null){if(!V)throw Error(ae(318));if(!to)throw Error(ae(344));if(x=S.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(ae(317));_t(x,S)}else Zl(),!(S.flags&128)&&(S.memoizedState=null),S.flags|=4;return Ho(S),null}return Xr!==null&&(cg(Xr),Xr=null),S.flags&128?(S.lanes=N,S):(V=V!==null,N=!1,x===null?Vh(S):N=x.memoizedState!==null,V&&!N&&(S.child.flags|=8192,S.mode&1&&(x===null||Mo.current&1?Wo===0&&(Wo=3):lf())),S.updateQueue!==null&&(S.flags|=4),Ho(S),null);case 4:return $l(),Bi(x,S),x===null&&Ys(S.stateNode.containerInfo),Ho(S),null;case 10:return Jp(S.type._context),Ho(S),null;case 17:return qo(S.type)&&Qi(),Ho(S),null;case 19:if(Hi(Mo),ne=S.memoizedState,ne===null)return Ho(S),null;if(V=(S.flags&128)!==0,de=ne.rendering,de===null)if(V)il(ne,!1);else{if(Wo!==0||x!==null&&x.flags&128)for(x=S.child;x!==null;){if(de=Nu(x),de!==null){for(S.flags|=128,il(ne,!1),x=de.updateQueue,x!==null&&(S.updateQueue=x,S.flags|=4),S.subtreeFlags=0,x=N,V=S.child;V!==null;)N=V,ne=x,N.flags&=14680066,de=N.alternate,de===null?(N.childLanes=0,N.lanes=ne,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=de.childLanes,N.lanes=de.lanes,N.child=de.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=de.memoizedProps,N.memoizedState=de.memoizedState,N.updateQueue=de.updateQueue,N.type=de.type,ne=de.dependencies,N.dependencies=ne===null?null:{lanes:ne.lanes,firstContext:ne.firstContext}),V=V.sibling;return Ni(Mo,Mo.current&1|2),S.child}x=x.sibling}ne.tail!==null&&Zs()>du&&(S.flags|=128,V=!0,il(ne,!1),S.lanes=4194304)}else{if(!V)if(x=Nu(de),x!==null){if(S.flags|=128,V=!0,x=x.updateQueue,x!==null&&(S.updateQueue=x,S.flags|=4),il(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!de.alternate&&!No)return Ho(S),null}else 2*Zs()-ne.renderingStartTime>du&&N!==1073741824&&(S.flags|=128,V=!0,il(ne,!1),S.lanes=4194304);ne.isBackwards?(de.sibling=S.child,S.child=de):(x=ne.last,x!==null?x.sibling=de:S.child=de,ne.last=de)}return ne.tail!==null?(S=ne.tail,ne.rendering=S,ne.tail=S.sibling,ne.renderingStartTime=Zs(),S.sibling=null,x=Mo.current,Ni(Mo,V?x&1|2:x&1),S):(Ho(S),null);case 22:case 23:return Bp(),V=S.memoizedState!==null,x!==null&&x.memoizedState!==null!==V&&(S.flags|=8192),V&&S.mode&1?ta&1073741824&&(Ho(S),Kr&&S.subtreeFlags&6&&(S.flags|=8192)):Ho(S),null;case 24:return null;case 25:return null}throw Error(ae(156,S.tag))}var qh=J.ReactCurrentOwner,ws=!1;function ts(x,S,N,V){S.child=x===null?Mm(S,null,N,V):Gu(S,x.child,N,V)}function xl(x,S,N,V,ne){N=N.render;var de=S.ref;return qp(S,ne),V=Pn(x,S,N,V,de,ne),N=wa(),x!==null&&!ws?(S.updateQueue=x.updateQueue,S.flags&=-2053,x.lanes&=~ne,ic(x,S,ne)):(No&&N&&zu(S),S.flags|=1,ts(x,S,V,ne),S.child)}function Ta(x,S,N,V,ne){if(x===null){var de=N.type;return typeof de=="function"&&!Ag(de)&&de.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(S.tag=15,S.type=de,Ba(x,S,de,V,ne)):(x=cf(N.type,null,V,S,S.mode,ne),x.ref=S.ref,x.return=S,S.child=x)}if(de=x.child,!(x.lanes&ne)){var Je=de.memoizedProps;if(N=N.compare,N=N!==null?N:Lu,N(Je,V)&&x.ref===S.ref)return ic(x,S,ne)}return S.flags|=1,x=Nl(de,V),x.ref=S.ref,x.return=S,S.child=x}function Ba(x,S,N,V,ne){if(x!==null&&Lu(x.memoizedProps,V)&&x.ref===S.ref)if(ws=!1,(x.lanes&ne)!==0)x.flags&131072&&(ws=!0);else return S.lanes=x.lanes,ic(x,S,ne);return Zh(x,S,N,V,ne)}function Sm(x,S,N){var V=S.pendingProps,ne=V.children,de=x!==null?x.memoizedState:null;if(V.mode==="hidden")if(!(S.mode&1))S.memoizedState={baseLanes:0,cachePool:null},Ni(pu,ta),ta|=N;else if(N&1073741824)S.memoizedState={baseLanes:0,cachePool:null},V=de!==null?de.baseLanes:N,Ni(pu,ta),ta|=V;else return x=de!==null?de.baseLanes|N:N,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:x,cachePool:null},S.updateQueue=null,Ni(pu,ta),ta|=x,null;else de!==null?(V=de.baseLanes|N,S.memoizedState=null):V=N,Ni(pu,ta),ta|=V;return ts(x,S,ne,N),S.child}function Ts(x,S){var N=S.ref;(x===null&&N!==null||x!==null&&x.ref!==N)&&(S.flags|=512,S.flags|=2097152)}function Zh(x,S,N,V,ne){var de=qo(N)?za:po.current;return de=ua(S,de),qp(S,ne),N=Pn(x,S,N,V,de,ne),V=wa(),x!==null&&!ws?(S.updateQueue=x.updateQueue,S.flags&=-2053,x.lanes&=~ne,ic(x,S,ne)):(No&&V&&zu(S),S.flags|=1,ts(x,S,N,ne),S.child)}function Ll(x,S,N,V,ne){if(qo(N)){var de=!0;Ir(S)}else de=!1;if(qp(S,ne),S.stateNode===null)x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),Go(S,N,V),Hh(S,N,V,ne),V=!0;else if(x===null){var Je=S.stateNode,Et=S.memoizedProps;Je.props=Et;var $t=Je.context,En=N.contextType;typeof En=="object"&&En!==null?En=Al(En):(En=qo(N)?za:po.current,En=ua(S,En));var vr=N.getDerivedStateFromProps,hi=typeof vr=="function"||typeof Je.getSnapshotBeforeUpdate=="function";hi||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(Et!==V||$t!==En)&&dp(S,Je,V,En),yl=!1;var Vr=S.memoizedState;Je.state=Vr,vl(S,V,Je,ne),$t=S.memoizedState,Et!==V||Vr!==$t||ms.current||yl?(typeof vr=="function"&&(yc(S,N,vr,V),$t=S.memoizedState),(Et=yl||Ga(S,N,Et,V,Vr,$t,En))?(hi||typeof Je.UNSAFE_componentWillMount!="function"&&typeof Je.componentWillMount!="function"||(typeof Je.componentWillMount=="function"&&Je.componentWillMount(),typeof Je.UNSAFE_componentWillMount=="function"&&Je.UNSAFE_componentWillMount()),typeof Je.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Je.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=V,S.memoizedState=$t),Je.props=V,Je.state=$t,Je.context=En,V=Et):(typeof Je.componentDidMount=="function"&&(S.flags|=4194308),V=!1)}else{Je=S.stateNode,eg(x,S),Et=S.memoizedProps,En=S.type===S.elementType?Et:el(S.type,Et),Je.props=En,hi=S.pendingProps,Vr=Je.context,$t=N.contextType,typeof $t=="object"&&$t!==null?$t=Al($t):($t=qo(N)?za:po.current,$t=ua(S,$t));var yo=N.getDerivedStateFromProps;(vr=typeof yo=="function"||typeof Je.getSnapshotBeforeUpdate=="function")||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(Et!==hi||Vr!==$t)&&dp(S,Je,V,$t),yl=!1,Vr=S.memoizedState,Je.state=Vr,vl(S,V,Je,ne);var Lr=S.memoizedState;Et!==hi||Vr!==Lr||ms.current||yl?(typeof yo=="function"&&(yc(S,N,yo,V),Lr=S.memoizedState),(En=yl||Ga(S,N,En,V,Vr,Lr,$t)||!1)?(vr||typeof Je.UNSAFE_componentWillUpdate!="function"&&typeof Je.componentWillUpdate!="function"||(typeof Je.componentWillUpdate=="function"&&Je.componentWillUpdate(V,Lr,$t),typeof Je.UNSAFE_componentWillUpdate=="function"&&Je.UNSAFE_componentWillUpdate(V,Lr,$t)),typeof Je.componentDidUpdate=="function"&&(S.flags|=4),typeof Je.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Je.componentDidUpdate!="function"||Et===x.memoizedProps&&Vr===x.memoizedState||(S.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||Et===x.memoizedProps&&Vr===x.memoizedState||(S.flags|=1024),S.memoizedProps=V,S.memoizedState=Lr),Je.props=V,Je.state=Lr,Je.context=$t,V=En):(typeof Je.componentDidUpdate!="function"||Et===x.memoizedProps&&Vr===x.memoizedState||(S.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||Et===x.memoizedProps&&Vr===x.memoizedState||(S.flags|=1024),V=!1)}return Cc(x,S,N,V,de,ne)}function Cc(x,S,N,V,ne,de){Ts(x,S);var Je=(S.flags&128)!==0;if(!V&&!Je)return ne&&ro(S,N,!1),ic(x,S,de);V=S.stateNode,qh.current=S;var Et=Je&&typeof N.getDerivedStateFromError!="function"?null:V.render();return S.flags|=1,x!==null&&Je?(S.child=Gu(S,x.child,null,de),S.child=Gu(S,null,Et,de)):ts(x,S,Et,de),S.memoizedState=V.state,ne&&ro(S,N,!0),S.child}function ou(x){var S=x.stateNode;S.pendingContext?qs(x,S.pendingContext,S.pendingContext!==S.context):S.context&&qs(x,S.context,!1),Fl(x,S.containerInfo)}function fr(x,S,N,V,ne){return Zl(),eu(ne),S.flags|=256,ts(x,S,N,V),S.child}var ls={dehydrated:null,treeContext:null,retryLane:0};function nc(x){return{baseLanes:x,cachePool:null}}function rc(x,S,N){var V=S.pendingProps,ne=Mo.current,de=!1,Je=(S.flags&128)!==0,Et;if((Et=Je)||(Et=x!==null&&x.memoizedState===null?!1:(ne&2)!==0),Et?(de=!0,S.flags&=-129):(x===null||x.memoizedState!==null)&&(ne|=1),Ni(Mo,ne&1),x===null)return Hd(S),x=S.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(S.mode&1?lr(x)?S.lanes=8:S.lanes=1073741824:S.lanes=1,null):(ne=V.children,x=V.fallback,de?(V=S.mode,de=S.child,ne={mode:"hidden",children:ne},!(V&1)&&de!==null?(de.childLanes=0,de.pendingProps=ne):de=oh(ne,V,0,null),x=Au(x,V,N,null),de.return=S,x.return=S,de.sibling=x,S.child=de,S.child.memoizedState=nc(N),S.memoizedState=ls,x):sg(S,ne));if(ne=x.memoizedState,ne!==null){if(Et=ne.dehydrated,Et!==null){if(Je)return S.flags&256?(S.flags&=-257,$h(x,S,N,Error(ae(422)))):S.memoizedState!==null?(S.child=x.child,S.flags|=128,null):(de=V.fallback,ne=S.mode,V=oh({mode:"visible",children:V.children},ne,0,null),de=Au(de,ne,N,null),de.flags|=2,V.return=S,de.return=S,V.sibling=de,S.child=V,S.mode&1&&Gu(S,x.child,null,N),S.child.memoizedState=nc(N),S.memoizedState=ls,de);if(!(S.mode&1))S=$h(x,S,N,null);else if(lr(Et))S=$h(x,S,N,Error(ae(419)));else if(V=(N&x.childLanes)!==0,ws||V){if(V=Co,V!==null){switch(N&-N){case 4:de=2;break;case 16:de=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:de=32;break;case 536870912:de=268435456;break;default:de=0}V=de&(V.suspendedLanes|N)?0:de,V!==0&&V!==ne.retryLane&&(ne.retryLane=V,ll(x,V,-1))}lf(),S=$h(x,S,N,Error(ae(421)))}else Ln(Et)?(S.flags|=128,S.child=x.child,S=Im.bind(null,x),je(Et,S),S=null):(N=ne.treeContext,to&&(Ca=Oe(Et),da=S,No=!0,Xr=null,ha=!1,N!==null&&(_l[El++]=_c,_l[El++]=Ec,_l[El++]=hp,_c=N.id,Ec=N.overflow,hp=S)),S=sg(S,S.pendingProps.children),S.flags|=4096);return S}return de?(V=su(x,S,V.children,V.fallback,N),de=S.child,ne=x.child.memoizedState,de.memoizedState=ne===null?nc(N):{baseLanes:ne.baseLanes|N,cachePool:null},de.childLanes=x.childLanes&~N,S.memoizedState=ls,V):(N=ea(x,S,V.children,N),S.memoizedState=null,N)}return de?(V=su(x,S,V.children,V.fallback,N),de=S.child,ne=x.child.memoizedState,de.memoizedState=ne===null?nc(N):{baseLanes:ne.baseLanes|N,cachePool:null},de.childLanes=x.childLanes&~N,S.memoizedState=ls,V):(N=ea(x,S,V.children,N),S.memoizedState=null,N)}function sg(x,S){return S=oh({mode:"visible",children:S},x.mode,0,null),S.return=x,x.child=S}function ea(x,S,N,V){var ne=x.child;return x=ne.sibling,N=Nl(ne,{mode:"visible",children:N}),!(S.mode&1)&&(N.lanes=V),N.return=S,N.sibling=null,x!==null&&(V=S.deletions,V===null?(S.deletions=[x],S.flags|=16):V.push(x)),S.child=N}function su(x,S,N,V,ne){var de=S.mode;x=x.child;var Je=x.sibling,Et={mode:"hidden",children:N};return!(de&1)&&S.child!==x?(N=S.child,N.childLanes=0,N.pendingProps=Et,S.deletions=null):(N=Nl(x,Et),N.subtreeFlags=x.subtreeFlags&14680064),Je!==null?V=Nl(Je,V):(V=Au(V,de,ne,null),V.flags|=2),V.return=S,N.return=S,N.sibling=V,S.child=N,V}function $h(x,S,N,V){return V!==null&&eu(V),Gu(S,x.child,null,N),x=sg(S,S.pendingProps.children),x.flags|=2,S.memoizedState=null,x}function ns(x,S,N){x.lanes|=S;var V=x.alternate;V!==null&&(V.lanes|=S),Nh(x.return,S,N)}function Xu(x,S,N,V,ne){var de=x.memoizedState;de===null?x.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:V,tail:N,tailMode:ne}:(de.isBackwards=S,de.rendering=null,de.renderingStartTime=0,de.last=V,de.tail=N,de.tailMode=ne)}function ao(x,S,N){var V=S.pendingProps,ne=V.revealOrder,de=V.tail;if(ts(x,S,V.children,N),V=Mo.current,V&2)V=V&1|2,S.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=S.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&ns(x,N,S);else if(x.tag===19)ns(x,N,S);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===S)break e;for(;x.sibling===null;){if(x.return===null||x.return===S)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}V&=1}if(Ni(Mo,V),!(S.mode&1))S.memoizedState=null;else switch(ne){case"forwards":for(N=S.child,ne=null;N!==null;)x=N.alternate,x!==null&&Nu(x)===null&&(ne=N),N=N.sibling;N=ne,N===null?(ne=S.child,S.child=null):(ne=N.sibling,N.sibling=null),Xu(S,!1,ne,N,de);break;case"backwards":for(N=null,ne=S.child,S.child=null;ne!==null;){if(x=ne.alternate,x!==null&&Nu(x)===null){S.child=ne;break}x=ne.sibling,ne.sibling=N,N=ne,ne=x}Xu(S,!0,N,null,de);break;case"together":Xu(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function ic(x,S,N){if(x!==null&&(S.dependencies=x.dependencies),Yc|=S.lanes,!(N&S.childLanes))return null;if(x!==null&&S.child!==x.child)throw Error(ae(153));if(S.child!==null){for(x=S.child,N=Nl(x,x.pendingProps),S.child=N,N.return=S;x.sibling!==null;)x=x.sibling,N=N.sibling=Nl(x,x.pendingProps),N.return=S;N.sibling=null}return S.child}function wm(x,S,N){switch(S.tag){case 3:ou(S),Zl();break;case 5:Qd(S);break;case 1:qo(S.type)&&Ir(S);break;case 4:Fl(S,S.stateNode.containerInfo);break;case 10:_m(S,S.type._context,S.memoizedProps.value);break;case 13:var V=S.memoizedState;if(V!==null)return V.dehydrated!==null?(Ni(Mo,Mo.current&1),S.flags|=128,null):N&S.child.childLanes?rc(x,S,N):(Ni(Mo,Mo.current&1),x=ic(x,S,N),x!==null?x.sibling:null);Ni(Mo,Mo.current&1);break;case 19:if(V=(N&S.childLanes)!==0,x.flags&128){if(V)return ao(x,S,N);S.flags|=128}var ne=S.memoizedState;if(ne!==null&&(ne.rendering=null,ne.tail=null,ne.lastEffect=null),Ni(Mo,Mo.current),V)break;return null;case 22:case 23:return S.lanes=0,Sm(x,S,N)}return ic(x,S,N)}function l1(x,S){switch(jd(S),S.tag){case 1:return qo(S.type)&&Qi(),x=S.flags,x&65536?(S.flags=x&-65537|128,S):null;case 3:return $l(),Hi(ms),Hi(po),Mi(),x=S.flags,x&65536&&!(x&128)?(S.flags=x&-65537|128,S):null;case 5:return Na(S),null;case 13:if(Hi(Mo),x=S.memoizedState,x!==null&&x.dehydrated!==null){if(S.alternate===null)throw Error(ae(340));Zl()}return x=S.flags,x&65536?(S.flags=x&-65537|128,S):null;case 19:return Hi(Mo),null;case 4:return $l(),null;case 10:return Jp(S.type._context),null;case 22:case 23:return Bp(),null;case 24:return null;default:return null}}var ef=!1,Qc=!1,c1=typeof WeakSet=="function"?WeakSet:Set,er=null;function Kc(x,S){var N=x.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(V){na(x,S,V)}else N.current=null}function yr(x,S,N){try{N()}catch(V){na(x,S,V)}}var Tm=!1;function p1(x,S){for(Bn(x.containerInfo),er=S;er!==null;)if(x=er,S=x.child,(x.subtreeFlags&1028)!==0&&S!==null)S.return=x,er=S;else for(;er!==null;){x=er;try{var N=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var V=N.memoizedProps,ne=N.memoizedState,de=x.stateNode,Je=de.getSnapshotBeforeUpdate(x.elementType===x.type?V:el(x.type,V),ne);de.__reactInternalSnapshotBeforeUpdate=Je}break;case 3:Kr&&gs(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(Et){na(x,x.return,Et)}if(S=x.sibling,S!==null){S.return=x.return,er=S;break}er=x.return}return N=Tm,Tm=!1,N}function vs(x,S,N){var V=S.updateQueue;if(V=V!==null?V.lastEffect:null,V!==null){var ne=V=V.next;do{if((ne.tag&x)===x){var de=ne.destroy;ne.destroy=void 0,de!==void 0&&yr(S,N,de)}ne=ne.next}while(ne!==V)}}function oc(x,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var N=S=S.next;do{if((N.tag&x)===x){var V=N.create;N.destroy=V()}N=N.next}while(N!==S)}}function bp(x){var S=x.ref;if(S!==null){var N=x.stateNode;switch(x.tag){case 5:x=Yo(N);break;default:x=N}typeof S=="function"?S(x):S.current=x}}function ol(x,S,N){if(Uc&&typeof Uc.onCommitFiberUnmount=="function")try{Uc.onCommitFiberUnmount(zh,S)}catch(Je){}switch(S.tag){case 0:case 11:case 14:case 15:if(x=S.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var V=x=x.next;do{var ne=V,de=ne.destroy;ne=ne.tag,de!==void 0&&(ne&2||ne&4)&&yr(S,N,de),V=V.next}while(V!==x)}break;case 1:if(Kc(S,N),x=S.stateNode,typeof x.componentWillUnmount=="function")try{x.props=S.memoizedProps,x.state=S.memoizedState,x.componentWillUnmount()}catch(Je){na(S,N,Je)}break;case 5:Kc(S,N);break;case 4:Kr?Mp(x,S,N):co&&co&&(S=S.stateNode.containerInfo,N=ba(S),Ma(S,N))}}function Yu(x,S,N){for(var V=S;;)if(ol(x,V,N),V.child===null||Kr&&V.tag===4){if(V===S)break;for(;V.sibling===null;){if(V.return===null||V.return===S)return;V=V.return}V.sibling.return=V.return,V=V.sibling}else V.child.return=V,V=V.child}function js(x){var S=x.alternate;S!==null&&(x.alternate=null,js(S)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(S=x.stateNode,S!==null&&Ss(S)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function xi(x){return x.tag===5||x.tag===3||x.tag===4}function ag(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||xi(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function kl(x){if(Kr){e:{for(var S=x.return;S!==null;){if(xi(S))break e;S=S.return}throw Error(ae(160))}var N=S;switch(N.tag){case 5:S=N.stateNode,N.flags&32&&(bo(S),N.flags&=-33),N=ag(x),Ju(x,N,S);break;case 3:case 4:S=N.stateNode.containerInfo,N=ag(x),au(x,N,S);break;default:throw Error(ae(161))}}}function au(x,S,N){var V=x.tag;if(V===5||V===6)x=x.stateNode,S?_a(N,x,S):La(N,x);else if(V!==4&&(x=x.child,x!==null))for(au(x,S,N),x=x.sibling;x!==null;)au(x,S,N),x=x.sibling}function Ju(x,S,N){var V=x.tag;if(V===5||V===6)x=x.stateNode,S?ka(N,x,S):pa(N,x);else if(V!==4&&(x=x.child,x!==null))for(Ju(x,S,N),x=x.sibling;x!==null;)Ju(x,S,N),x=x.sibling}function Mp(x,S,N){for(var V=S,ne=!1,de,Je;;){if(!ne){ne=V.return;e:for(;;){if(ne===null)throw Error(ae(160));switch(de=ne.stateNode,ne.tag){case 5:Je=!1;break e;case 3:de=de.containerInfo,Je=!0;break e;case 4:de=de.containerInfo,Je=!0;break e}ne=ne.return}ne=!0}if(V.tag===5||V.tag===6)Yu(x,V,N),Je?ko(de,V.stateNode):Jo(de,V.stateNode);else if(V.tag===18)Je?He(de,V.stateNode):Me(de,V.stateNode);else if(V.tag===4){if(V.child!==null){de=V.stateNode.containerInfo,Je=!0,V.child.return=V,V=V.child;continue}}else if(ol(x,V,N),V.child!==null){V.child.return=V,V=V.child;continue}if(V===S)break;for(;V.sibling===null;){if(V.return===null||V.return===S)return;V=V.return,V.tag===4&&(ne=!1)}V.sibling.return=V.return,V=V.sibling}}function lu(x,S){if(Kr){switch(S.tag){case 0:case 11:case 14:case 15:vs(3,S,S.return),oc(3,S),vs(5,S,S.return);return;case 1:return;case 5:var N=S.stateNode;if(N!=null){var V=S.memoizedProps;x=x!==null?x.memoizedProps:V;var ne=S.type,de=S.updateQueue;S.updateQueue=null,de!==null&&Zi(N,de,ne,x,V,S)}return;case 6:if(S.stateNode===null)throw Error(ae(162));N=S.memoizedProps,fs(S.stateNode,x!==null?x.memoizedProps:N,N);return;case 3:to&&x!==null&&x.memoizedState.isDehydrated&&an(S.stateNode.containerInfo);return;case 12:return;case 13:xp(S);return;case 19:xp(S);return;case 17:return}throw Error(ae(163))}switch(S.tag){case 0:case 11:case 14:case 15:vs(3,S,S.return),oc(3,S),vs(5,S,S.return);return;case 12:return;case 13:xp(S);return;case 19:xp(S);return;case 3:to&&x!==null&&x.memoizedState.isDehydrated&&an(S.stateNode.containerInfo);break;case 22:case 23:return}e:if(co){switch(S.tag){case 1:case 5:case 6:break e;case 3:case 4:S=S.stateNode,Ma(S.containerInfo,S.pendingChildren);break e}throw Error(ae(163))}}function xp(x){var S=x.updateQueue;if(S!==null){x.updateQueue=null;var N=x.stateNode;N===null&&(N=x.stateNode=new c1),S.forEach(function(V){var ne=ih.bind(null,x,V);N.has(V)||(N.add(V),V.then(ne,ne))})}}function qu(x,S){for(er=S;er!==null;){S=er;var N=S.deletions;if(N!==null)for(var V=0;V<N.length;V++){var ne=N[V];try{var de=x;Kr?Mp(de,ne,S):Yu(de,ne,S);var Je=ne.alternate;Je!==null&&(Je.return=null),ne.return=null}catch(Fr){na(ne,S,Fr)}}if(N=S.child,S.subtreeFlags&12854&&N!==null)N.return=S,er=N;else for(;er!==null;){S=er;try{var Et=S.flags;if(Et&32&&Kr&&bo(S.stateNode),Et&512){var $t=S.alternate;if($t!==null){var En=$t.ref;En!==null&&(typeof En=="function"?En(null):En.current=null)}}if(Et&8192)switch(S.tag){case 13:if(S.memoizedState!==null){var vr=S.alternate;(vr===null||vr.memoizedState===null)&&(uu=Zs())}break;case 22:var hi=S.memoizedState!==null,Vr=S.alternate,yo=Vr!==null&&Vr.memoizedState!==null;if(N=S,Kr){e:if(V=N,ne=hi,de=null,Kr)for(var Lr=V;;){if(Lr.tag===5){if(de===null){de=Lr;var Ra=Lr.stateNode;ne?ks(Ra):zs(Lr.stateNode,Lr.memoizedProps)}}else if(Lr.tag===6){if(de===null){var ac=Lr.stateNode;ne?Ea(ac):Ro(ac,Lr.memoizedProps)}}else if((Lr.tag!==22&&Lr.tag!==23||Lr.memoizedState===null||Lr===V)&&Lr.child!==null){Lr.child.return=Lr,Lr=Lr.child;continue}if(Lr===V)break;for(;Lr.sibling===null;){if(Lr.return===null||Lr.return===V)break e;de===Lr&&(de=null),Lr=Lr.return}de===Lr&&(de=null),Lr.sibling.return=Lr.return,Lr=Lr.sibling}}if(hi&&!yo&&N.mode&1){er=N;for(var Ot=N.child;Ot!==null;){for(N=er=Ot;er!==null;){V=er;var xt=V.child;switch(V.tag){case 0:case 11:case 14:case 15:vs(4,V,V.return);break;case 1:Kc(V,V.return);var Ht=V.stateNode;if(typeof Ht.componentWillUnmount=="function"){var dr=V.return;try{Ht.props=V.memoizedProps,Ht.state=V.memoizedState,Ht.componentWillUnmount()}catch(Fr){na(V,dr,Fr)}}break;case 5:Kc(V,V.return);break;case 22:if(V.memoizedState!==null){$d(N);continue}}xt!==null?(xt.return=V,er=xt):$d(N)}Ot=Ot.sibling}}}switch(Et&4102){case 2:kl(S),S.flags&=-3;break;case 6:kl(S),S.flags&=-3,lu(S.alternate,S);break;case 4096:S.flags&=-4097;break;case 4100:S.flags&=-4097,lu(S.alternate,S);break;case 4:lu(S.alternate,S)}}catch(Fr){na(S,S.return,Fr)}if(N=S.sibling,N!==null){N.return=S.return,er=N;break}er=S.return}}}function tf(x,S,N){er=x,Zu(x,S,N)}function Zu(x,S,N){for(var V=(x.mode&1)!==0;er!==null;){var ne=er,de=ne.child;if(ne.tag===22&&V){var Je=ne.memoizedState!==null||ef;if(!Je){var Et=ne.alternate,$t=Et!==null&&Et.memoizedState!==null||Qc;Et=ef;var En=Qc;if(ef=Je,(Qc=$t)&&!En)for(er=ne;er!==null;)Je=er,$t=Je.child,Je.tag===22&&Je.memoizedState!==null?nf(ne):$t!==null?($t.return=Je,er=$t):nf(ne);for(;de!==null;)er=de,Zu(de,S,N),de=de.sibling;er=ne,ef=Et,Qc=En}Zd(x,S,N)}else ne.subtreeFlags&8772&&de!==null?(de.return=ne,er=de):Zd(x,S,N)}}function Zd(x){for(;er!==null;){var S=er;if(S.flags&8772){var N=S.alternate;try{if(S.flags&8772)switch(S.tag){case 0:case 11:case 15:Qc||oc(5,S);break;case 1:var V=S.stateNode;if(S.flags&4&&!Qc)if(N===null)V.componentDidMount();else{var ne=S.elementType===S.type?N.memoizedProps:el(S.type,N.memoizedProps);V.componentDidUpdate(ne,N.memoizedState,V.__reactInternalSnapshotBeforeUpdate)}var de=S.updateQueue;de!==null&&As(S,de,V);break;case 3:var Je=S.updateQueue;if(Je!==null){if(N=null,S.child!==null)switch(S.child.tag){case 5:N=Yo(S.child.stateNode);break;case 1:N=S.child.stateNode}As(S,Je,N)}break;case 5:var Et=S.stateNode;N===null&&S.flags&4&&Lo(Et,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(to&&S.memoizedState===null){var $t=S.alternate;if($t!==null){var En=$t.memoizedState;if(En!==null){var vr=En.dehydrated;vr!==null&&ln(vr)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ae(163))}Qc||S.flags&512&&bp(S)}catch(hi){na(S,S.return,hi)}}if(S===x){er=null;break}if(N=S.sibling,N!==null){N.return=S.return,er=N;break}er=S.return}}function $d(x){for(;er!==null;){var S=er;if(S===x){er=null;break}var N=S.sibling;if(N!==null){N.return=S.return,er=N;break}er=S.return}}function nf(x){for(;er!==null;){var S=er;try{switch(S.tag){case 0:case 11:case 15:var N=S.return;try{oc(4,S)}catch($t){na(S,N,$t)}break;case 1:var V=S.stateNode;if(typeof V.componentDidMount=="function"){var ne=S.return;try{V.componentDidMount()}catch($t){na(S,ne,$t)}}var de=S.return;try{bp(S)}catch($t){na(S,de,$t)}break;case 5:var Je=S.return;try{bp(S)}catch($t){na(S,Je,$t)}}}catch($t){na(S,S.return,$t)}if(S===x){er=null;break}var Et=S.sibling;if(Et!==null){Et.return=S.return,er=Et;break}er=S.return}}var eh=0,$u=1,ed=2,sc=3,Bs=4;if(typeof Symbol=="function"&&Symbol.for){var sl=Symbol.for;eh=sl("selector.component"),$u=sl("selector.has_pseudo_class"),ed=sl("selector.role"),sc=sl("selector.test_id"),Bs=sl("selector.text")}function Cp(x){var S=Cs(x);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(ae(364));return S}if(x=zi(x),x===null)throw Error(ae(362));return x.stateNode.current}function zl(x,S){switch(S.$$typeof){case eh:if(x.type===S.value)return!0;break;case $u:e:{S=S.value,x=[x,0];for(var N=0;N<x.length;){var V=x[N++],ne=x[N++],de=S[ne];if(V.tag!==5||!hs(V)){for(;de!=null&&zl(V,de);)ne++,de=S[ne];if(ne===S.length){S=!0;break e}else for(V=V.child;V!==null;)x.push(V,ne),V=V.sibling}}S=!1}return S;case ed:if(x.tag===5&&Sr(x.stateNode,S.value))return!0;break;case Bs:if((x.tag===5||x.tag===6)&&(x=ds(x),x!==null&&0<=x.indexOf(S.value)))return!0;break;case sc:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(ae(365))}return!1}function Xc(x){switch(x.$$typeof){case eh:return"<"+(An(x.value)||"Unknown")+">";case $u:return":has("+(Xc(x)||"")+")";case ed:return'[role="'+x.value+'"]';case Bs:return'"'+x.value+'"';case sc:return'[data-testname="'+x.value+'"]';default:throw Error(ae(365))}}function _s(x,S){var N=[];x=[x,0];for(var V=0;V<x.length;){var ne=x[V++],de=x[V++],Je=S[de];if(ne.tag!==5||!hs(ne)){for(;Je!=null&&zl(ne,Je);)de++,Je=S[de];if(de===S.length)N.push(ne);else for(ne=ne.child;ne!==null;)x.push(ne,de),ne=ne.sibling}}return N}function Sp(x,S){if(!as)throw Error(ae(363));x=Cp(x),x=_s(x,S),S=[],x=Array.from(x);for(var N=0;N<x.length;){var V=x[N++];if(V.tag===5)hs(V)||S.push(V.stateNode);else for(V=V.child;V!==null;)x.push(V),V=V.sibling}return S}var th=Math.ceil,cu=J.ReactCurrentDispatcher,nh=J.ReactCurrentOwner,Es=J.ReactCurrentBatchConfig,Yr=0,Co=null,Li=null,cs=0,ta=0,pu=Gi(0),Wo=0,td=null,Yc=0,rf=0,ho=0,So=null,Vo=null,uu=0,du=1/0;function hu(){du=Zs()+500}var fu=!1,gu=null,wp=null,of=!1,Sc=null,Tp=0,nd=0,rh=null,rd=-1,id=0;function al(){return Yr&6?Zs():rd!==-1?rd:rd=Zs()}function mu(x){return x.mode&1?Yr&2&&cs!==0?cs&-cs:Zf.transition!==null?(id===0&&(x=Gs,Gs<<=1,!(Gs&4194240)&&(Gs=64),id=x),id):(x=bi,x!==0?x:va()):1}function ll(x,S,N){if(50<nd)throw nd=0,rh=null,Error(ae(185));var V=sf(x,S);return V===null?null:(ml(V,S,N),(!(Yr&2)||V!==Co)&&(V===Co&&(!(Yr&2)&&(rf|=S),Wo===4&&wc(V,cs)),cl(V,N),S===1&&Yr===0&&!(x.mode&1)&&(hu(),cp&&xa())),V)}function sf(x,S){x.lanes|=S;var N=x.alternate;for(N!==null&&(N.lanes|=S),N=x,x=x.return;x!==null;)x.childLanes|=S,N=x.alternate,N!==null&&(N.childLanes|=S),N=x,x=x.return;return N.tag===3?N.stateNode:null}function cl(x,S){var N=x.callbackNode;r1(x,S);var V=Du(x,x===Co?cs:0);if(V===0)N!==null&&ai(N),x.callbackNode=null,x.callbackPriority=0;else if(S=V&-V,x.callbackPriority!==S){if(N!=null&&ai(N),S===1)x.tag===0?s1(pg.bind(null,x)):qf(pg.bind(null,x)),ca?Ls(function(){Yr===0&&xa()}):mc(Pu,xa),N=null;else{switch(Xf(V)){case 1:N=Pu;break;case 4:N=i1;break;case 16:N=Jf;break;case 536870912:N=ym;break;default:N=Jf}N=ad(N,lg.bind(null,x))}x.callbackPriority=S,x.callbackNode=N}}function lg(x,S){if(rd=-1,id=0,Yr&6)throw Error(ae(327));var N=x.callbackNode;if(qc()&&x.callbackNode!==N)return null;var V=Du(x,x===Co?cs:0);if(V===0)return null;if(V&30||V&x.expiredLanes||S)S=sd(x,V);else{S=V;var ne=Yr;Yr|=2;var de=ug();(Co!==x||cs!==S)&&(hu(),Rp(x,S));do try{dg();break}catch(Et){od(x,Et)}while(1);up(),cu.current=de,Yr=ne,Li!==null?S=0:(Co=null,cs=0,S=Wo)}if(S!==0){if(S===2&&(ne=Gd(x),ne!==0&&(V=ne,S=af(x,ne))),S===1)throw N=td,Rp(x,0),wc(x,V),cl(x,Zs()),N;if(S===6)wc(x,V);else{if(ne=x.current.alternate,!(V&30)&&!Bm(ne)&&(S=sd(x,V),S===2&&(de=Gd(x),de!==0&&(V=de,S=af(x,de))),S===1))throw N=td,Rp(x,0),wc(x,V),cl(x,Zs()),N;switch(x.finishedWork=ne,x.finishedLanes=V,S){case 0:case 1:throw Error(ae(345));case 2:Jc(x,Vo);break;case 3:if(wc(x,V),(V&130023424)===V&&(S=uu+500-Zs(),10<S)){if(Du(x,0)!==0)break;if(ne=x.suspendedLanes,(ne&V)!==V){al(),x.pingedLanes|=x.suspendedLanes&ne;break}x.timeoutHandle=ti(Jc.bind(null,x,Vo),S);break}Jc(x,Vo);break;case 4:if(wc(x,V),(V&4194240)===V)break;for(S=x.eventTimes,ne=-1;0<V;){var Je=31-Io(V);de=1<<Je,Je=S[Je],Je>ne&&(ne=Je),V&=~de}if(V=ne,V=Zs()-V,V=(120>V?120:480>V?480:1080>V?1080:1920>V?1920:3e3>V?3e3:4320>V?4320:1960*th(V/1960))-V,10<V){x.timeoutHandle=ti(Jc.bind(null,x,Vo),V);break}Jc(x,Vo);break;case 5:Jc(x,Vo);break;default:throw Error(ae(329))}}}return cl(x,Zs()),x.callbackNode===N?lg.bind(null,x):null}function af(x,S){var N=So;return x.current.memoizedState.isDehydrated&&(Rp(x,S).flags|=256),x=sd(x,S),x!==2&&(S=Vo,Vo=N,S!==null&&cg(S)),x}function cg(x){Vo===null?Vo=x:Vo.push.apply(Vo,x)}function Bm(x){for(var S=x;;){if(S.flags&16384){var N=S.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var V=0;V<N.length;V++){var ne=N[V],de=ne.getSnapshot;ne=ne.value;try{if(!uo(de(),ne))return!1}catch(Je){return!1}}}if(N=S.child,S.subtreeFlags&16384&&N!==null)N.return=S,S=N;else{if(S===x)break;for(;S.sibling===null;){if(S.return===null||S.return===x)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function wc(x,S){for(S&=~ho,S&=~rf,x.suspendedLanes|=S,x.pingedLanes&=~S,x=x.expirationTimes;0<S;){var N=31-Io(S),V=1<<N;x[N]=-1,S&=~V}}function pg(x){if(Yr&6)throw Error(ae(327));qc();var S=Du(x,0);if(!(S&1))return cl(x,Zs()),null;var N=sd(x,S);if(x.tag!==0&&N===2){var V=Gd(x);V!==0&&(S=V,N=af(x,V))}if(N===1)throw N=td,Rp(x,0),wc(x,S),cl(x,Zs()),N;if(N===6)throw Error(ae(345));return x.finishedWork=x.current.alternate,x.finishedLanes=S,Jc(x,Vo),cl(x,Zs()),null}function Gl(x){Sc!==null&&Sc.tag===0&&!(Yr&6)&&qc();var S=Yr;Yr|=1;var N=Es.transition,V=bi;try{if(Es.transition=null,bi=1,x)return x()}finally{bi=V,Es.transition=N,Yr=S,!(Yr&6)&&xa()}}function Bp(){ta=pu.current,Hi(pu)}function Rp(x,S){x.finishedWork=null,x.finishedLanes=0;var N=x.timeoutHandle;if(N!==Or&&(x.timeoutHandle=Or,ii(N)),Li!==null)for(N=Li.return;N!==null;){var V=N;switch(jd(V),V.tag){case 1:V=V.type.childContextTypes,V!=null&&Qi();break;case 3:$l(),Hi(ms),Hi(po),Mi();break;case 5:Na(V);break;case 4:$l();break;case 13:Hi(Mo);break;case 19:Hi(Mo);break;case 10:Jp(V.type._context);break;case 22:case 23:Bp()}N=N.return}if(Co=x,Li=x=Nl(x.current,null),cs=ta=S,Wo=0,td=null,ho=rf=Yc=0,Vo=So=null,Ac!==null){for(S=0;S<Ac.length;S++)if(N=Ac[S],V=N.interleaved,V!==null){N.interleaved=null;var ne=V.next,de=N.pending;if(de!==null){var Je=de.next;de.next=ne,V.next=Je}N.pending=V}Ac=null}return x}function od(x,S){do{var N=Li;try{if(up(),Sa.current=Ep,xo){for(var V=jo.memoizedState;V!==null;){var ne=V.queue;ne!==null&&(ne.pending=null),V=V.next}xo=!1}if(tu=0,Us=fa=jo=null,Qe=!1,Uu=0,nh.current=null,N===null||N.return===null){Wo=1,td=S,Li=null;break}e:{var de=x,Je=N.return,Et=N,$t=S;if(S=cs,Et.flags|=32768,$t!==null&&typeof $t=="object"&&typeof $t.then=="function"){var En=$t,vr=Et,hi=vr.tag;if(!(vr.mode&1)&&(hi===0||hi===11||hi===15)){var Vr=vr.alternate;Vr?(vr.updateQueue=Vr.updateQueue,vr.memoizedState=Vr.memoizedState,vr.lanes=Vr.lanes):(vr.updateQueue=null,vr.memoizedState=null)}var yo=Jh(Je);if(yo!==null){yo.flags&=-257,iu(yo,Je,Et,de,S),yo.mode&1&&Jd(de,En,S),S=yo,$t=En;var Lr=S.updateQueue;if(Lr===null){var Ra=new Set;Ra.add($t),S.updateQueue=Ra}else Lr.add($t);break e}else{if(!(S&1)){Jd(de,En,S),lf();break e}$t=Error(ae(426))}}else if(No&&Et.mode&1){var ac=Jh(Je);if(ac!==null){!(ac.flags&65536)&&(ac.flags|=256),iu(ac,Je,Et,de,S),eu($t);break e}}de=$t,Wo!==4&&(Wo=2),So===null?So=[de]:So.push(de),$t=xc($t,Et),Et=Je;do{switch(Et.tag){case 3:Et.flags|=65536,S&=-S,Et.lanes|=S;var Ot=ru(Et,$t,S);tl(Et,Ot);break e;case 1:de=$t;var xt=Et.type,Ht=Et.stateNode;if(!(Et.flags&128)&&(typeof xt.getDerivedStateFromError=="function"||Ht!==null&&typeof Ht.componentDidCatch=="function"&&(wp===null||!wp.has(Ht)))){Et.flags|=65536,S&=-S,Et.lanes|=S;var dr=og(Et,de,S);tl(Et,dr);break e}}Et=Et.return}while(Et!==null)}hg(N)}catch(Fr){S=Fr,Li===N&&N!==null&&(Li=N=N.return);continue}break}while(1)}function ug(){var x=cu.current;return cu.current=Ep,x===null?Ep:x}function lf(){(Wo===0||Wo===3||Wo===2)&&(Wo=4),Co===null||!(Yc&268435455)&&!(rf&268435455)||wc(Co,cs)}function sd(x,S){var N=Yr;Yr|=2;var V=ug();Co===x&&cs===S||Rp(x,S);do try{u1();break}catch(ne){od(x,ne)}while(1);if(up(),Yr=N,cu.current=V,Li!==null)throw Error(ae(261));return Co=null,cs=0,Wo}function u1(){for(;Li!==null;)Ip(Li)}function dg(){for(;Li!==null&&!Xl();)Ip(Li)}function Ip(x){var S=mg(x.alternate,x,ta);x.memoizedProps=x.pendingProps,S===null?hg(x):Li=S,nh.current=null}function hg(x){var S=x;do{var N=S.alternate;if(x=S.return,S.flags&32768){if(N=l1(N,S),N!==null){N.flags&=32767,Li=N;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{Wo=6,Li=null;return}}else if(N=Ku(N,S,ta),N!==null){Li=N;return}if(S=S.sibling,S!==null){Li=S;return}Li=S=x}while(S!==null);Wo===0&&(Wo=5)}function Jc(x,S){var N=bi,V=Es.transition;try{Es.transition=null,bi=1,fg(x,S,N)}finally{Es.transition=V,bi=N}return null}function fg(x,S,N){do qc();while(Sc!==null);if(Yr&6)throw Error(ae(327));var V=x.finishedWork,ne=x.finishedLanes;if(V===null)return null;if(x.finishedWork=null,x.finishedLanes=0,V===x.current)throw Error(ae(177));x.callbackNode=null,x.callbackPriority=0;var de=V.lanes|V.childLanes;if(Kf(x,de),x===Co&&(Li=Co=null,cs=0),!(V.subtreeFlags&2064)&&!(V.flags&2064)||of||(of=!0,ad(Jf,function(){return qc(),null})),de=(V.flags&15990)!==0,V.subtreeFlags&15990||de){de=Es.transition,Es.transition=null;var Je=bi;bi=1;var Et=Yr;Yr|=4,nh.current=null,p1(x,V),qu(x,V,ne),Ar(x.containerInfo),x.current=V,tf(V,x,ne),Yf(),Yr=Et,bi=Je,Es.transition=de}else x.current=V;if(of&&(of=!1,Sc=x,Tp=ne),de=x.pendingLanes,de===0&&(wp=null),o1(V.stateNode,N),cl(x,Zs()),S!==null)for(N=x.onRecoverableError,V=0;V<S.length;V++)N(S[V]);if(fu)throw fu=!1,x=gu,gu=null,x;return Tp&1&&x.tag!==0&&qc(),de=x.pendingLanes,de&1?x===rh?nd++:(nd=0,rh=x):nd=0,xa(),null}function qc(){if(Sc!==null){var x=Xf(Tp),S=Es.transition,N=bi;try{if(Es.transition=null,bi=16>x?16:x,Sc===null)var V=!1;else{if(x=Sc,Sc=null,Tp=0,Yr&6)throw Error(ae(331));var ne=Yr;for(Yr|=4,er=x.current;er!==null;){var de=er,Je=de.child;if(er.flags&16){var Et=de.deletions;if(Et!==null){for(var $t=0;$t<Et.length;$t++){var En=Et[$t];for(er=En;er!==null;){var vr=er;switch(vr.tag){case 0:case 11:case 15:vs(8,vr,de)}var hi=vr.child;if(hi!==null)hi.return=vr,er=hi;else for(;er!==null;){vr=er;var Vr=vr.sibling,yo=vr.return;if(js(vr),vr===En){er=null;break}if(Vr!==null){Vr.return=yo,er=Vr;break}er=yo}}}var Lr=de.alternate;if(Lr!==null){var Ra=Lr.child;if(Ra!==null){Lr.child=null;do{var ac=Ra.sibling;Ra.sibling=null,Ra=ac}while(Ra!==null)}}er=de}}if(de.subtreeFlags&2064&&Je!==null)Je.return=de,er=Je;else e:for(;er!==null;){if(de=er,de.flags&2048)switch(de.tag){case 0:case 11:case 15:vs(9,de,de.return)}var Ot=de.sibling;if(Ot!==null){Ot.return=de.return,er=Ot;break e}er=de.return}}var xt=x.current;for(er=xt;er!==null;){Je=er;var Ht=Je.child;if(Je.subtreeFlags&2064&&Ht!==null)Ht.return=Je,er=Ht;else e:for(Je=xt;er!==null;){if(Et=er,Et.flags&2048)try{switch(Et.tag){case 0:case 11:case 15:oc(9,Et)}}catch(Fr){na(Et,Et.return,Fr)}if(Et===Je){er=null;break e}var dr=Et.sibling;if(dr!==null){dr.return=Et.return,er=dr;break e}er=Et.return}}if(Yr=ne,xa(),Uc&&typeof Uc.onPostCommitFiberRoot=="function")try{Uc.onPostCommitFiberRoot(zh,x)}catch(Fr){}V=!0}return V}finally{bi=N,Es.transition=S}}return!1}function Zc(x,S,N){S=xc(N,S),S=ru(x,S,1),Jl(x,S),S=al(),x=sf(x,1),x!==null&&(ml(x,1,S),cl(x,S))}function na(x,S,N){if(x.tag===3)Zc(x,x,N);else for(;S!==null;){if(S.tag===3){Zc(S,x,N);break}else if(S.tag===1){var V=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof V.componentDidCatch=="function"&&(wp===null||!wp.has(V))){x=xc(N,x),x=og(S,x,1),Jl(S,x),x=al(),S=sf(S,1),S!==null&&(ml(S,1,x),cl(S,x));break}}S=S.return}}function Rm(x,S,N){var V=x.pingCache;V!==null&&V.delete(S),S=al(),x.pingedLanes|=x.suspendedLanes&N,Co===x&&(cs&N)===N&&(Wo===4||Wo===3&&(cs&130023424)===cs&&500>Zs()-uu?Rp(x,0):ho|=N),cl(x,S)}function gg(x,S){S===0&&(x.mode&1?(S=ap,ap<<=1,!(ap&130023424)&&(ap=4194304)):S=1);var N=al();x=sf(x,S),x!==null&&(ml(x,S,N),cl(x,N))}function Im(x){var S=x.memoizedState,N=0;S!==null&&(N=S.retryLane),gg(x,N)}function ih(x,S){var N=0;switch(x.tag){case 13:var V=x.stateNode,ne=x.memoizedState;ne!==null&&(N=ne.retryLane);break;case 19:V=x.stateNode;break;default:throw Error(ae(314))}V!==null&&V.delete(S),gg(x,N)}var mg;mg=function(x,S,N){if(x!==null)if(x.memoizedProps!==S.pendingProps||ms.current)ws=!0;else{if(!(x.lanes&N)&&!(S.flags&128))return ws=!1,wm(x,S,N);ws=!!(x.flags&131072)}else ws=!1,No&&S.flags&1048576&&Em(S,$p,S.index);switch(S.lanes=0,S.tag){case 2:var V=S.type;x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),x=S.pendingProps;var ne=ua(S,po.current);qp(S,N),ne=Pn(null,S,V,x,ne,N);var de=wa();return S.flags|=1,typeof ne=="object"&&ne!==null&&typeof ne.render=="function"&&ne.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,qo(V)?(de=!0,Ir(S)):de=!1,S.memoizedState=ne.state!==null&&ne.state!==void 0?ne.state:null,Uh(S),ne.updater=vc,S.stateNode=ne,ne._reactInternals=S,Hh(S,V,x,N),S=Cc(null,S,V,!0,de,N)):(S.tag=0,No&&de&&zu(S),ts(null,S,ne,N),S=S.child),S;case 16:V=S.elementType;e:{switch(x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),x=S.pendingProps,ne=V._init,V=ne(V._payload),S.type=V,ne=S.tag=Fm(V),x=el(V,x),ne){case 0:S=Zh(null,S,V,x,N);break e;case 1:S=Ll(null,S,V,x,N);break e;case 11:S=xl(null,S,V,x,N);break e;case 14:S=Ta(null,S,V,el(V.type,x),N);break e}throw Error(ae(306,V,""))}return S;case 0:return V=S.type,ne=S.pendingProps,ne=S.elementType===V?ne:el(V,ne),Zh(x,S,V,ne,N);case 1:return V=S.type,ne=S.pendingProps,ne=S.elementType===V?ne:el(V,ne),Ll(x,S,V,ne,N);case 3:e:{if(ou(S),x===null)throw Error(ae(387));V=S.pendingProps,de=S.memoizedState,ne=de.element,eg(x,S),vl(S,V,null,N);var Je=S.memoizedState;if(V=Je.element,to&&de.isDehydrated)if(de={element:V,isDehydrated:!1,cache:Je.cache,transitions:Je.transitions},S.updateQueue.baseState=de,S.memoizedState=de,S.flags&256){ne=Error(ae(423)),S=fr(x,S,V,N,ne);break e}else if(V!==ne){ne=Error(ae(424)),S=fr(x,S,V,N,ne);break e}else for(to&&(Ca=at(S.stateNode.containerInfo),da=S,No=!0,Xr=null,ha=!1),N=Mm(S,null,V,N),S.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Zl(),V===ne){S=ic(x,S,N);break e}ts(x,S,V,N)}S=S.child}return S;case 5:return Qd(S),x===null&&Hd(S),V=S.type,ne=S.pendingProps,de=x!==null?x.memoizedProps:null,Je=ne.children,Hn(V,ne)?Je=null:de!==null&&Hn(V,de)&&(S.flags|=32),Ts(x,S),ts(x,S,Je,N),S.child;case 6:return x===null&&Hd(S),null;case 13:return rc(x,S,N);case 4:return Fl(S,S.stateNode.containerInfo),V=S.pendingProps,x===null?S.child=Gu(S,null,V,N):ts(x,S,V,N),S.child;case 11:return V=S.type,ne=S.pendingProps,ne=S.elementType===V?ne:el(V,ne),xl(x,S,V,ne,N);case 7:return ts(x,S,S.pendingProps,N),S.child;case 8:return ts(x,S,S.pendingProps.children,N),S.child;case 12:return ts(x,S,S.pendingProps.children,N),S.child;case 10:e:{if(V=S.type._context,ne=S.pendingProps,de=S.memoizedProps,Je=ne.value,_m(S,V,Je),de!==null)if(uo(de.value,Je)){if(de.children===ne.children&&!ms.current){S=ic(x,S,N);break e}}else for(de=S.child,de!==null&&(de.return=S);de!==null;){var Et=de.dependencies;if(Et!==null){Je=de.child;for(var $t=Et.firstContext;$t!==null;){if($t.context===V){if(de.tag===1){$t=Il(-1,N&-N),$t.tag=2;var En=de.updateQueue;if(En!==null){En=En.shared;var vr=En.pending;vr===null?$t.next=$t:($t.next=vr.next,vr.next=$t),En.pending=$t}}de.lanes|=N,$t=de.alternate,$t!==null&&($t.lanes|=N),Nh(de.return,N,S),Et.lanes|=N;break}$t=$t.next}}else if(de.tag===10)Je=de.type===S.type?null:de.child;else if(de.tag===18){if(Je=de.return,Je===null)throw Error(ae(341));Je.lanes|=N,Et=Je.alternate,Et!==null&&(Et.lanes|=N),Nh(Je,N,S),Je=de.sibling}else Je=de.child;if(Je!==null)Je.return=de;else for(Je=de;Je!==null;){if(Je===S){Je=null;break}if(de=Je.sibling,de!==null){de.return=Je.return,Je=de;break}Je=Je.return}de=Je}ts(x,S,ne.children,N),S=S.child}return S;case 9:return ne=S.type,V=S.pendingProps.children,qp(S,N),ne=Al(ne),V=V(ne),S.flags|=1,ts(x,S,V,N),S.child;case 14:return V=S.type,ne=el(V,S.pendingProps),ne=el(V.type,ne),Ta(x,S,V,ne,N);case 15:return Ba(x,S,S.type,S.pendingProps,N);case 17:return V=S.type,ne=S.pendingProps,ne=S.elementType===V?ne:el(V,ne),x!==null&&(x.alternate=null,S.alternate=null,S.flags|=2),S.tag=1,qo(V)?(x=!0,Ir(S)):x=!1,qp(S,N),Go(S,V,ne),Hh(S,V,ne,N),Cc(null,S,V,!0,x,N);case 19:return ao(x,S,N);case 22:return Sm(x,S,N)}throw Error(ae(156,S.tag))};function ad(x,S){return mc(x,S)}function d1(x,S,N,V){this.tag=x,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=V,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cl(x,S,N,V){return new d1(x,S,N,V)}function Ag(x){return x=x.prototype,!(!x||!x.isReactComponent)}function Fm(x){if(typeof x=="function")return Ag(x)?1:0;if(x!=null){if(x=x.$$typeof,x===Ct)return 11;if(x===ft)return 14}return 2}function Nl(x,S){var N=x.alternate;return N===null?(N=Cl(x.tag,S,x.key,x.mode),N.elementType=x.elementType,N.type=x.type,N.stateNode=x.stateNode,N.alternate=x,x.alternate=N):(N.pendingProps=S,N.type=x.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=x.flags&14680064,N.childLanes=x.childLanes,N.lanes=x.lanes,N.child=x.child,N.memoizedProps=x.memoizedProps,N.memoizedState=x.memoizedState,N.updateQueue=x.updateQueue,S=x.dependencies,N.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},N.sibling=x.sibling,N.index=x.index,N.ref=x.ref,N}function cf(x,S,N,V,ne,de){var Je=2;if(V=x,typeof x=="function")Ag(x)&&(Je=1);else if(typeof x=="string")Je=5;else e:switch(x){case Mt:return Au(N.children,ne,de,S);case nt:Je=8,ne|=8;break;case Ve:return x=Cl(12,N,S,ne|2),x.elementType=Ve,x.lanes=de,x;case vt:return x=Cl(13,N,S,ne),x.elementType=vt,x.lanes=de,x;case pt:return x=Cl(19,N,S,ne),x.elementType=pt,x.lanes=de,x;case wt:return oh(N,ne,de,S);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case it:Je=10;break e;case At:Je=9;break e;case Ct:Je=11;break e;case ft:Je=14;break e;case Pt:Je=16,V=null;break e}throw Error(ae(130,x==null?x:typeof x,""))}return S=Cl(Je,N,S,ne),S.elementType=x,S.type=V,S.lanes=de,S}function Au(x,S,N,V){return x=Cl(7,x,V,S),x.lanes=N,x}function oh(x,S,N,V){return x=Cl(22,x,V,S),x.elementType=wt,x.lanes=N,x.stateNode={},x}function sh(x,S,N){return x=Cl(6,x,null,S),x.lanes=N,x}function pf(x,S,N){return S=Cl(4,x.children!==null?x.children:[],x.key,S),S.lanes=N,S.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},S}function yg(x,S,N,V,ne){this.tag=S,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Or,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nd(0),this.expirationTimes=Nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nd(0),this.identifierPrefix=V,this.onRecoverableError=ne,to&&(this.mutableSourceEagerHydrationData=null)}function vg(x,S,N,V,ne,de,Je,Et,$t){return x=new yg(x,S,N,Et,$t),S===1?(S=1,de===!0&&(S|=8)):S=0,de=Cl(3,null,null,S),x.current=de,de.stateNode=x,de.memoizedState={element:V,isDehydrated:N,cache:null,transitions:null},Uh(de),x}function _g(x){if(!x)return Js;x=x._reactInternals;e:{if(xr(x)!==x||x.tag!==1)throw Error(ae(170));var S=x;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(qo(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(ae(171))}if(x.tag===1){var N=x.type;if(qo(N))return Ql(x,N,S)}return S}function Eg(x){var S=x._reactInternals;if(S===void 0)throw typeof x.render=="function"?Error(ae(188)):(x=Object.keys(x).join(","),Error(ae(268,x)));return x=zr(S),x===null?null:x.stateNode}function bg(x,S){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var N=x.retryLane;x.retryLane=N!==0&&N<S?N:S}}function Tc(x,S){bg(x,S),(x=x.alternate)&&bg(x,S)}function h1(x){return x=zr(x),x===null?null:x.stateNode}function ah(){return null}return s.attemptContinuousHydration=function(x){if(x.tag===13){var S=al();ll(x,134217728,S),Tc(x,134217728)}},s.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var S=al(),N=mu(x);ll(x,N,S),Tc(x,N)}},s.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var S=x.stateNode;if(S.current.memoizedState.isDehydrated){var N=lp(S.pendingLanes);N!==0&&(gc(S,N|1),cl(S,Zs()),!(Yr&6)&&(hu(),xa()))}break;case 13:var V=al();Gl(function(){return ll(x,1,V)}),Tc(x,1)}},s.batchedUpdates=function(x,S){var N=Yr;Yr|=1;try{return x(S)}finally{Yr=N,Yr===0&&(hu(),cp&&xa())}},s.createComponentSelector=function(x){return{$$typeof:eh,value:x}},s.createContainer=function(x,S,N,V,ne,de,Je){return vg(x,S,!1,null,N,V,ne,de,Je)},s.createHasPseudoClassSelector=function(x){return{$$typeof:$u,value:x}},s.createHydrationContainer=function(x,S,N,V,ne,de,Je,Et,$t){return x=vg(N,V,!0,x,ne,de,Je,Et,$t),x.context=_g(null),N=x.current,V=al(),ne=mu(N),de=Il(V,ne),de.callback=S!=null?S:null,Jl(N,de),x.current.lanes=ne,ml(x,ne,V),cl(x,V),x},s.createPortal=function(x,S,N){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:V==null?null:""+V,children:x,containerInfo:S,implementation:N}},s.createRoleSelector=function(x){return{$$typeof:ed,value:x}},s.createTestNameSelector=function(x){return{$$typeof:sc,value:x}},s.createTextSelector=function(x){return{$$typeof:Bs,value:x}},s.deferredUpdates=function(x){var S=bi,N=Es.transition;try{return Es.transition=null,bi=16,x()}finally{bi=S,Es.transition=N}},s.discreteUpdates=function(x,S,N,V,ne){var de=bi,Je=Es.transition;try{return Es.transition=null,bi=1,x(S,N,V,ne)}finally{bi=de,Es.transition=Je,Yr===0&&hu()}},s.findAllNodes=Sp,s.findBoundingRects=function(x,S){if(!as)throw Error(ae(363));S=Sp(x,S),x=[];for(var N=0;N<S.length;N++)x.push(no(S[N]));for(S=x.length-1;0<S;S--){N=x[S];for(var V=N.x,ne=V+N.width,de=N.y,Je=de+N.height,Et=S-1;0<=Et;Et--)if(S!==Et){var $t=x[Et],En=$t.x,vr=En+$t.width,hi=$t.y,Vr=hi+$t.height;if(V>=En&&de>=hi&&ne<=vr&&Je<=Vr){x.splice(S,1);break}else if(V!==En||N.width!==$t.width||Vr<de||hi>Je){if(!(de!==hi||N.height!==$t.height||vr<V||En>ne)){En>V&&($t.width+=En-V,$t.x=V),vr<ne&&($t.width=ne-En),x.splice(S,1);break}}else{hi>de&&($t.height+=hi-de,$t.y=de),Vr<Je&&($t.height=Je-hi),x.splice(S,1);break}}}return x},s.findHostInstance=Eg,s.findHostInstanceWithNoPortals=function(x){return x=Er(x),x=x!==null?eo(x):null,x===null?null:x.stateNode},s.findHostInstanceWithWarning=function(x){return Eg(x)},s.flushControlled=function(x){var S=Yr;Yr|=1;var N=Es.transition,V=bi;try{Es.transition=null,bi=1,x()}finally{bi=V,Es.transition=N,Yr=S,Yr===0&&(hu(),xa())}},s.flushPassiveEffects=qc,s.flushSync=Gl,s.focusWithin=function(x,S){if(!as)throw Error(ae(363));for(x=Cp(x),S=_s(x,S),S=Array.from(S),x=0;x<S.length;){var N=S[x++];if(!hs(N)){if(N.tag===5&&ji(N.stateNode))return!0;for(N=N.child;N!==null;)S.push(N),N=N.sibling}}return!1},s.getCurrentUpdatePriority=function(){return bi},s.getFindAllNodesFailureDescription=function(x,S){if(!as)throw Error(ae(363));var N=0,V=[];x=[Cp(x),0];for(var ne=0;ne<x.length;){var de=x[ne++],Je=x[ne++],Et=S[Je];if((de.tag!==5||!hs(de))&&(zl(de,Et)&&(V.push(Xc(Et)),Je++,Je>N&&(N=Je)),Je<S.length))for(de=de.child;de!==null;)x.push(de,Je),de=de.sibling}if(N<S.length){for(x=[];N<S.length;N++)x.push(Xc(S[N]));return`findAllNodes was able to match part of the selector:
  `+(V.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},s.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return Yo(x.child.stateNode);default:return x.child.stateNode}},s.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:h1,findFiberByHostInstance:x.findFiberByHostInstance||ah,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")x=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)x=!0;else{try{zh=S.inject(x),Uc=S}catch(N){}x=!!S.checkDCE}}return x},s.isAlreadyRendering=function(){return!1},s.observeVisibleRects=function(x,S,N,V){if(!as)throw Error(ae(363));x=Sp(x,S);var ne=Pi(x,N,V).disconnect;return{disconnect:function(){ne()}}},s.registerMutableSourceForHydration=function(x,S){var N=S._getVersion;N=N(S._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[S,N]:x.mutableSourceEagerHydrationData.push(S,N)},s.runWithPriority=function(x,S){var N=bi;try{return bi=x,S()}finally{bi=N}},s.shouldError=function(){return null},s.shouldSuspend=function(){return!1},s.updateContainer=function(x,S,N,V){var ne=S.current,de=al(),Je=mu(ne);return N=_g(N),S.context===null?S.context=N:S.pendingContext=N,S=Il(de,Je),S.payload={element:x},V=V===void 0?null:V,V!==null&&(S.callback=V),Jl(ne,S),x=ll(ne,Je,de),x!==null&&Zo(x,ne,Je),Je},s}},32576:function(u,n,A){"use strict";u.exports=A(46511)},76525:function(u,n,A){"use strict";u.exports=A(67287)},60053:function(u,n,A){"use strict";var w=A(25108);/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function d(jn,tn){var Bn=jn.length;jn.push(tn);e:for(;0<Bn;){var Ar=Bn-1>>>1,Rr=jn[Ar];if(0<E(Rr,tn))jn[Ar]=tn,jn[Bn]=Rr,Bn=Ar;else break e}}function m(jn){return jn.length===0?null:jn[0]}function s(jn){if(jn.length===0)return null;var tn=jn[0],Bn=jn.pop();if(Bn!==tn){jn[0]=Bn;e:for(var Ar=0,Rr=jn.length,Ti=Rr>>>1;Ar<Ti;){var Fn=2*(Ar+1)-1,Rn=jn[Fn],Hn=Fn+1,hr=jn[Hn];if(0>E(Rn,Bn))Hn<Rr&&0>E(hr,Rn)?(jn[Ar]=hr,jn[Hn]=Bn,Ar=Hn):(jn[Ar]=Rn,jn[Fn]=Bn,Ar=Fn);else if(Hn<Rr&&0>E(hr,Bn))jn[Ar]=hr,jn[Hn]=Bn,Ar=Hn;else break e}}return tn}function E(jn,tn){var Bn=jn.sortIndex-tn.sortIndex;return Bn!==0?Bn:jn.id-tn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var H=performance;n.unstable_now=function(){return H.now()}}else{var ee=Date,ae=ee.now();n.unstable_now=function(){return ee.now()-ae}}var J=[],pe=[],ue=1,Mt=null,nt=3,Ve=!1,it=!1,At=!1,Ct=typeof setTimeout=="function"?setTimeout:null,vt=typeof clearTimeout=="function"?clearTimeout:null,pt=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(jn){for(var tn=m(pe);tn!==null;){if(tn.callback===null)s(pe);else if(tn.startTime<=jn)s(pe),tn.sortIndex=tn.expirationTime,d(J,tn);else break;tn=m(pe)}}function Pt(jn){if(At=!1,ft(jn),!it)if(m(J)!==null)it=!0,Gr(wt);else{var tn=m(pe);tn!==null&&Yo(Pt,tn.startTime-jn)}}function wt(jn,tn){it=!1,At&&(At=!1,vt(An),An=-1),Ve=!0;var Bn=nt;try{for(ft(tn),Mt=m(J);Mt!==null&&(!(Mt.expirationTime>tn)||jn&&!Br());){var Ar=Mt.callback;if(typeof Ar=="function"){Mt.callback=null,nt=Mt.priorityLevel;var Rr=Ar(Mt.expirationTime<=tn);tn=n.unstable_now(),typeof Rr=="function"?Mt.callback=Rr:Mt===m(J)&&s(J),ft(tn)}else s(J);Mt=m(J)}if(Mt!==null)var Ti=!0;else{var Fn=m(pe);Fn!==null&&Yo(Pt,Fn.startTime-tn),Ti=!1}return Ti}finally{Mt=null,nt=Bn,Ve=!1}}var qt=!1,Ft=null,An=-1,rr=5,xr=-1;function Br(){return!(n.unstable_now()-xr<rr)}function Er(){if(Ft!==null){var jn=n.unstable_now();xr=jn;var tn=!0;try{tn=Ft(!0,jn)}finally{tn?zr():(qt=!1,Ft=null)}}else qt=!1}var zr;if(typeof pt=="function")zr=function(){pt(Er)};else if(typeof MessageChannel!="undefined"){var Fi=new MessageChannel,eo=Fi.port2;Fi.port1.onmessage=Er,zr=function(){eo.postMessage(null)}}else zr=function(){Ct(Er,0)};function Gr(jn){Ft=jn,qt||(qt=!0,zr())}function Yo(jn,tn){An=Ct(function(){jn(n.unstable_now())},tn)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(jn){jn.callback=null},n.unstable_continueExecution=function(){it||Ve||(it=!0,Gr(wt))},n.unstable_forceFrameRate=function(jn){0>jn||125<jn?w.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rr=0<jn?Math.floor(1e3/jn):5},n.unstable_getCurrentPriorityLevel=function(){return nt},n.unstable_getFirstCallbackNode=function(){return m(J)},n.unstable_next=function(jn){switch(nt){case 1:case 2:case 3:var tn=3;break;default:tn=nt}var Bn=nt;nt=tn;try{return jn()}finally{nt=Bn}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(jn,tn){switch(jn){case 1:case 2:case 3:case 4:case 5:break;default:jn=3}var Bn=nt;nt=jn;try{return tn()}finally{nt=Bn}},n.unstable_scheduleCallback=function(jn,tn,Bn){var Ar=n.unstable_now();switch(typeof Bn=="object"&&Bn!==null?(Bn=Bn.delay,Bn=typeof Bn=="number"&&0<Bn?Ar+Bn:Ar):Bn=Ar,jn){case 1:var Rr=-1;break;case 2:Rr=250;break;case 5:Rr=1073741823;break;case 4:Rr=1e4;break;default:Rr=5e3}return Rr=Bn+Rr,jn={id:ue++,callback:tn,priorityLevel:jn,startTime:Bn,expirationTime:Rr,sortIndex:-1},Bn>Ar?(jn.sortIndex=Bn,d(pe,jn),m(J)===null&&jn===m(pe)&&(At?(vt(An),An=-1):At=!0,Yo(Pt,Bn-Ar))):(jn.sortIndex=Rr,d(J,jn),it||Ve||(it=!0,Gr(wt))),jn},n.unstable_shouldYield=Br,n.unstable_wrapCallback=function(jn){var tn=nt;return function(){var Bn=nt;nt=tn;try{return jn.apply(this,arguments)}finally{nt=Bn}}}},63840:function(u,n,A){"use strict";u.exports=A(60053)},73466:function(u){(function(n,A){u.exports=A()})(this,function(){var n=function(){function A(pe){return m.appendChild(pe.dom),pe}function w(pe){for(var ue=0;ue<m.children.length;ue++)m.children[ue].style.display=ue===pe?"block":"none";d=pe}var d=0,m=document.createElement("div");m.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",m.addEventListener("click",function(pe){pe.preventDefault(),w(++d%m.children.length)},!1);var s=(performance||Date).now(),E=s,H=0,ee=A(new n.Panel("FPS","#0ff","#002")),ae=A(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var J=A(new n.Panel("MB","#f08","#201"));return w(0),{REVISION:16,dom:m,addPanel:A,showPanel:w,begin:function(){s=(performance||Date).now()},end:function(){H++;var pe=(performance||Date).now();if(ae.update(pe-s,200),pe>E+1e3&&(ee.update(1e3*H/(pe-E),100),E=pe,H=0,J)){var ue=performance.memory;J.update(ue.usedJSHeapSize/1048576,ue.jsHeapSizeLimit/1048576)}return pe},update:function(){s=this.end()},domElement:m,setMode:w}};return n.Panel=function(A,w,d){var m=1/0,s=0,E=Math.round,H=E(window.devicePixelRatio||1),ee=80*H,ae=48*H,J=3*H,pe=2*H,ue=3*H,Mt=15*H,nt=74*H,Ve=30*H,it=document.createElement("canvas");it.width=ee,it.height=ae,it.style.cssText="width:80px;height:48px";var At=it.getContext("2d");return At.font="bold "+9*H+"px Helvetica,Arial,sans-serif",At.textBaseline="top",At.fillStyle=d,At.fillRect(0,0,ee,ae),At.fillStyle=w,At.fillText(A,J,pe),At.fillRect(ue,Mt,nt,Ve),At.fillStyle=d,At.globalAlpha=.9,At.fillRect(ue,Mt,nt,Ve),{dom:it,update:function(Ct,vt){m=Math.min(m,Ct),s=Math.max(s,Ct),At.fillStyle=d,At.globalAlpha=1,At.fillRect(0,0,ee,Mt),At.fillStyle=w,At.fillText(E(Ct)+" "+A+" ("+E(m)+"-"+E(s)+")",J,pe),At.drawImage(it,ue+H,Mt,nt-H,Ve,ue,Mt,nt-H,Ve),At.fillRect(ue+nt-H,Mt,H,Ve),At.fillStyle=d,At.globalAlpha=.9,At.fillRect(ue+nt-H,Mt,H,E((1-Ct/vt)*Ve))}}},n})},90209:function(u,n,A){"use strict";A.r(n);var w=A(93379),d=A.n(w),m=A(7795),s=A.n(m),E=A(90569),H=A.n(E),ee=A(3565),ae=A.n(ee),J=A(19216),pe=A.n(J),ue=A(44589),Mt=A.n(ue),nt=A(88208),Ve={};Ve.styleTagTransform=Mt(),Ve.setAttributes=ae(),Ve.insert=H().bind(null,"head"),Ve.domAPI=s(),Ve.insertStyleElement=pe();var it=d()(nt.Z,Ve);n.default=nt.Z&&nt.Z.locals?nt.Z.locals:void 0},58139:function(u,n,A){"use strict";A.d(n,{MA:function(){return H},Rq:function(){return E},ZH:function(){return ae}});const w=J=>typeof J=="object"&&typeof J.then=="function",d=[];function m(J,pe,ue=(Mt,nt)=>Mt===nt){if(J===pe)return!0;if(!J||!pe)return!1;const Mt=J.length;if(pe.length!==Mt)return!1;for(let nt=0;nt<Mt;nt++)if(!ue(J[nt],pe[nt]))return!1;return!0}function s(J,pe=null,ue=!1,Mt={}){pe===null&&(pe=[J]);for(const Ve of d)if(m(pe,Ve.keys,Ve.equal)){if(ue)return;if(Object.prototype.hasOwnProperty.call(Ve,"error"))throw Ve.error;if(Object.prototype.hasOwnProperty.call(Ve,"response"))return Mt.lifespan&&Mt.lifespan>0&&(Ve.timeout&&clearTimeout(Ve.timeout),Ve.timeout=setTimeout(Ve.remove,Mt.lifespan)),Ve.response;if(!ue)throw Ve.promise}const nt={keys:pe,equal:Mt.equal,remove:()=>{const Ve=d.indexOf(nt);Ve!==-1&&d.splice(Ve,1)},promise:(w(J)?J:J(...pe)).then(Ve=>{nt.response=Ve,Mt.lifespan&&Mt.lifespan>0&&(nt.timeout=setTimeout(nt.remove,Mt.lifespan))}).catch(Ve=>nt.error=Ve)};if(d.push(nt),!ue)throw nt.promise}const E=(J,pe,ue)=>s(J,pe,!1,ue),H=(J,pe,ue)=>void s(J,pe,!0,ue),ee=J=>{var pe;return(pe=d.find(ue=>m(J,ue.keys,ue.equal)))==null?void 0:pe.response},ae=J=>{if(J===void 0||J.length===0)d.splice(0,d.length);else{const pe=d.find(ue=>m(J,ue.keys,ue.equal));pe&&pe.remove()}}},14671:function(u,n,A){"use strict";A.d(n,{Z:function(){return H}});var w=A(67294),d=A(25108);function m(ee){let ae;const J=new Set,pe=(At,Ct)=>{const vt=typeof At=="function"?At(ae):At;if(vt!==ae){const pt=ae;ae=Ct?vt:Object.assign({},ae,vt),J.forEach(ft=>ft(ae,pt))}},ue=()=>ae,Mt=(At,Ct=ue,vt=Object.is)=>{d.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let pt=Ct(ae);function ft(){const Pt=Ct(ae);if(!vt(pt,Pt)){const wt=pt;At(pt=Pt,wt)}}return J.add(ft),()=>J.delete(ft)},it={setState:pe,getState:ue,subscribe:(At,Ct,vt)=>Ct||vt?Mt(At,Ct,vt):(J.add(At),()=>J.delete(At)),destroy:()=>J.clear()};return ae=ee(pe,ue,it),it}const E=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?w.useEffect:w.useLayoutEffect;function H(ee){const ae=typeof ee=="function"?m(ee):ee,J=(pe=ae.getState,ue=Object.is)=>{const[,Mt]=(0,w.useReducer)(qt=>qt+1,0),nt=ae.getState(),Ve=(0,w.useRef)(nt),it=(0,w.useRef)(pe),At=(0,w.useRef)(ue),Ct=(0,w.useRef)(!1),vt=(0,w.useRef)();vt.current===void 0&&(vt.current=pe(nt));let pt,ft=!1;(Ve.current!==nt||it.current!==pe||At.current!==ue||Ct.current)&&(pt=pe(nt),ft=!ue(vt.current,pt)),E(()=>{ft&&(vt.current=pt),Ve.current=nt,it.current=pe,At.current=ue,Ct.current=!1});const Pt=(0,w.useRef)(nt);E(()=>{const qt=()=>{try{const An=ae.getState(),rr=it.current(An);At.current(vt.current,rr)||(Ve.current=An,vt.current=rr,Mt())}catch(An){Ct.current=!0,Mt()}},Ft=ae.subscribe(qt);return ae.getState()!==Pt.current&&qt(),Ft},[]);const wt=ft?pt:vt.current;return(0,w.useDebugValue)(wt),wt};return Object.assign(J,ae),J[Symbol.iterator]=function(){d.warn("[useStore, api] = create() is deprecated and will be removed in v4");const pe=[J,ae];return{next(){const ue=pe.length<=0;return{value:pe.shift(),done:ue}}}},J}},10434:function(u){function n(){return u.exports=n=Object.assign?Object.assign.bind():function(A){for(var w=1;w<arguments.length;w++){var d=arguments[w];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(A[m]=d[m])}return A},u.exports.__esModule=!0,u.exports.default=u.exports,n.apply(this,arguments)}u.exports=n,u.exports.__esModule=!0,u.exports.default=u.exports},10203:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jr:function(){return FaceLandmarker_1},n:function(){return FilesetResolver_1}});var console=__webpack_require__(25108),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vision={},fileset_resolver={};let supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;const WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function isSimdSupported(){return ss(this,null,function*(){if(supportsSimd===void 0)try{yield WebAssembly.instantiate(WASM_SIMD_CHECK),supportsSimd=!0}catch(u){supportsSimd=!1}return supportsSimd})}function createFileset(u,n=""){return ss(this,null,function*(){const A=(yield isSimdSupported())?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${n}/${u}_${A}.js`,wasmBinaryPath:`${n}/${u}_${A}.wasm`}})}class FilesetResolver$1{static isSimdSupported(){return isSimdSupported()}static forAudioTasks(n){return createFileset("audio",n)}static forTextTasks(n){return createFileset("text",n)}static forVisionTasks(n){return createFileset("vision",n)}}fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;const DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(u){return u=u||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:u.color}),u)}function resolve(u,n){return u instanceof Function?u(n):u}class DrawingUtils$1{constructor(n){this.ctx=n}static clamp(n,A,w){const d=Math.min(A,w),m=Math.max(A,w);return Math.max(d,Math.min(m,n))}static lerp(n,A,w,d,m){const s=d*(1-(n-A)/(w-A))+m*(1-(w-n)/(w-A));return DrawingUtils$1.clamp(s,d,m)}drawLandmarks(n,A){if(!n)return;const w=this.ctx,d=addDefaultOptions(A);w.save();const m=w.canvas;let s=0;for(const E of n){w.fillStyle=resolve(d.fillColor,{index:s,from:E}),w.strokeStyle=resolve(d.color,{index:s,from:E}),w.lineWidth=resolve(d.lineWidth,{index:s,from:E});const H=new Path2D;H.arc(E.x*m.width,E.y*m.height,resolve(d.radius,{index:s,from:E}),0,2*Math.PI),w.fill(H),w.stroke(H),++s}w.restore()}drawConnectors(n,A,w){if(!n||!A)return;const d=this.ctx,m=addDefaultOptions(w);d.save();const s=d.canvas;let E=0;for(const H of A){d.beginPath();const ee=n[H.start],ae=n[H.end];ee&&ae&&(d.strokeStyle=resolve(m.color,{index:E,from:ee,to:ae}),d.lineWidth=resolve(m.lineWidth,{index:E,from:ee,to:ae}),d.moveTo(ee.x*s.width,ee.y*s.height),d.lineTo(ae.x*s.width,ae.y*s.height)),++E,d.stroke()}d.restore()}drawBoundingBox(n,A){const w=this.ctx,d=addDefaultOptions(A);w.save(),w.beginPath(),w.lineWidth=resolve(d.lineWidth,{}),w.strokeStyle=resolve(d.color,{}),w.fillStyle=resolve(d.fillColor,{}),w.moveTo(n.originX,n.originY),w.lineTo(n.originX+n.width,n.originY),w.lineTo(n.originX+n.width,n.originY+n.height),w.lineTo(n.originX,n.originY+n.height),w.lineTo(n.originX,n.originY),w.stroke(),w.fill(),w.restore()}}drawing_utils.DrawingUtils=DrawingUtils$1;var image={},image_shader_context={};Object.defineProperty(image_shader_context,"__esModule",{value:!0}),image_shader_context.MPImageShaderContext=image_shader_context.assertNotNull=void 0;const VERTEX_SHADER=`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,FRAGMENT_SHADER=`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
   void main() {
     gl_FragColor = texture2D(inputTexture, vTex);
   }
 `;function assertNotNull(u,n){if(u===null)throw new Error(`Unable to obtain required WebGL resource: ${n}`);return u}image_shader_context.assertNotNull=assertNotNull;class MPImageShaderBuffers{constructor(n,A,w,d){this.gl=n,this.vertexArrayObject=A,this.vertexBuffer=w,this.textureBuffer=d}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}}class MPImageShaderContext{compileShader(n,A){const w=this.gl,d=assertNotNull(w.createShader(A),"Failed to create WebGL shader");if(w.shaderSource(d,n),w.compileShader(d),!w.getShaderParameter(d,w.COMPILE_STATUS)){const m=w.getShaderInfoLog(d);throw new Error(`Could not compile WebGL shader: ${m}`)}return w.attachShader(this.program,d),d}setupShaders(){const n=this.gl;if(this.program=assertNotNull(n.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(VERTEX_SHADER,n.VERTEX_SHADER),this.fragmentShader=this.compileShader(FRAGMENT_SHADER,n.FRAGMENT_SHADER),n.linkProgram(this.program),!n.getProgramParameter(this.program,n.LINK_STATUS)){const A=n.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${A}`)}this.aVertex=n.getAttribLocation(this.program,"aVertex"),this.aTex=n.getAttribLocation(this.program,"aTex")}createBuffers(n){const A=this.gl,w=assertNotNull(A.createVertexArray(),"Failed to create vertex array");A.bindVertexArray(w);const d=assertNotNull(A.createBuffer(),"Failed to create buffer");A.bindBuffer(A.ARRAY_BUFFER,d),A.enableVertexAttribArray(this.aVertex),A.vertexAttribPointer(this.aVertex,2,A.FLOAT,!1,0,0),A.bufferData(A.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),A.STATIC_DRAW);const m=assertNotNull(A.createBuffer(),"Failed to create buffer");A.bindBuffer(A.ARRAY_BUFFER,m),A.enableVertexAttribArray(this.aTex),A.vertexAttribPointer(this.aTex,2,A.FLOAT,!1,0,0);const s=n?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return A.bufferData(A.ARRAY_BUFFER,new Float32Array(s),A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,null),A.bindVertexArray(null),new MPImageShaderBuffers(A,w,d,m)}getShaderBuffers(n){return n?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(n){if(this.gl){if(n!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=n}run(n,A,w){this.maybeInitGL(n),this.program||this.setupShaders();const d=this.getShaderBuffers(A);n.useProgram(this.program),d.bind();const m=w();return d.unbind(),m}bindFramebuffer(n,A){this.maybeInitGL(n),this.framebuffer||(this.framebuffer=assertNotNull(n.createFramebuffer(),"Failed to create framebuffe.")),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0)}unbindFramebuffer(){var n;(n=this.gl)===null||n===void 0||n.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){const n=this.gl;n.deleteProgram(this.program),n.deleteShader(this.vertexShader),n.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}}image_shader_context.MPImageShaderContext=MPImageShaderContext,Object.defineProperty(image,"__esModule",{value:!0}),image.MPImage=void 0;const image_shader_context_1$2=image_shader_context,INSTANCE_COUNT_WARNING_THRESHOLD$1=250;var MPImageType;(function(u){u[u.IMAGE_DATA=0]="IMAGE_DATA",u[u.IMAGE_BITMAP=1]="IMAGE_BITMAP",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPImageType||(MPImageType={}));class MPImage$1{constructor(n,A,w,d,m,s,E){this.containers=n,this.ownsImageBitmap=A,this.ownsWebGLTexture=w,this.canvas=d,this.shaderContext=m,this.width=s,this.height=E,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--MPImage$1.instancesBeforeWarning,MPImage$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(MPImageType.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(MPImageType.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(MPImageType.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(n){switch(n){case MPImageType.IMAGE_DATA:return this.containers.find(A=>A instanceof ImageData);case MPImageType.IMAGE_BITMAP:return this.containers.find(A=>typeof ImageBitmap!="undefined"&&A instanceof ImageBitmap);case MPImageType.WEBGL_TEXTURE:return this.containers.find(A=>typeof WebGLTexture!="undefined"&&A instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const A of this.containers){let w;if(A instanceof ImageData)w=new ImageData(A.data,this.width,this.height);else if(A instanceof WebGLTexture){const d=this.getGL(),m=this.getShaderContext();d.activeTexture(d.TEXTURE1),w=(0,image_shader_context_1$2.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,w),this.configureTextureParams(),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,this.width,this.height,0,d.RGBA,d.UNSIGNED_BYTE,null),d.bindTexture(d.TEXTURE_2D,null),m.bindFramebuffer(d,w),m.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),m.unbindFramebuffer(),this.unbindTexture()}else{if(!(A instanceof ImageBitmap))throw new Error(`Type is not supported: ${A}`);this.convertToWebGLTexture(),this.bindTexture(),w=this.copyTextureToBitmap(),this.unbindTexture()}n.push(w)}return new MPImage$1(n,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$2.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$2.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let n=this.getContainer(MPImageType.IMAGE_BITMAP);return n||(this.convertToWebGLTexture(),n=this.convertWebGLTextureToImageBitmap(),this.containers.push(n),this.ownsImageBitmap=!0),n}convertToImageData(){let n=this.getContainer(MPImageType.IMAGE_DATA);if(!n){const A=this.getGL(),w=this.getShaderContext(),d=new Uint8Array(this.width*this.height*4),m=this.convertToWebGLTexture();w.bindFramebuffer(A,m),A.readPixels(0,0,this.width,this.height,A.RGBA,A.UNSIGNED_BYTE,d),w.unbindFramebuffer(),n=new ImageData(new Uint8ClampedArray(d.buffer),this.width,this.height),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPImageType.WEBGL_TEXTURE);if(!n){const A=this.getGL();n=this.bindTexture();const w=this.getContainer(MPImageType.IMAGE_BITMAP)||this.convertToImageData();A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,w),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let A=this.getContainer(MPImageType.WEBGL_TEXTURE);return A?n.bindTexture(n.TEXTURE_2D,A):(A=(0,image_shader_context_1$2.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(A),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,A),this.configureTextureParams()),A}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){const n=this.getGL();return this.getShaderContext().run(n,!0,()=>this.runWithResizedCanvas(()=>(n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))}convertWebGLTextureToImageBitmap(){this.bindTexture();const n=this.copyTextureToBitmap();return this.unbindTexture(),n}runWithResizedCanvas(n){const A=this.canvas;if(A.width===this.width&&A.height===this.height)return n();const w=A.width,d=A.height;A.width=this.width,A.height=this.height;const m=n();return A.width=w,A.height=d,m}close(){this.ownsImageBitmap&&this.getContainer(MPImageType.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPImageType.WEBGL_TEXTURE)),MPImage$1.instancesBeforeWarning=-1}}image.MPImage=MPImage$1,MPImage$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD$1;var mask={},platform_utils={};function isWebKit(u=navigator){const n=u.userAgent;return n.includes("Safari")&&!n.includes("Chrome")}function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isIOS=platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,platform_utils.isIOS=isIOS,Object.defineProperty(mask,"__esModule",{value:!0}),mask.MPMask=void 0;const image_shader_context_1$1=image_shader_context,platform_utils_1$1=platform_utils,INSTANCE_COUNT_WARNING_THRESHOLD=250;var MPMaskType;(function(u){u[u.UINT8_ARRAY=0]="UINT8_ARRAY",u[u.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPMaskType||(MPMaskType={}));class MPMask$1{constructor(n,A,w,d,m,s){this.containers=n,this.ownsWebGLTexture=A,this.canvas=w,this.shaderContext=d,this.width=m,this.height=s,this.ownsWebGLTexture&&(--MPMask$1.instancesBeforeWarning,MPMask$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(MPMaskType.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(MPMaskType.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(MPMaskType.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){const n=this.getGL();if(!MPMask$1.texImage2DFormat)if(n.getExtension("EXT_color_buffer_float")&&n.getExtension("OES_texture_float_linear")&&n.getExtension("EXT_float_blend"))MPMask$1.texImage2DFormat=n.R32F;else{if(!n.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");MPMask$1.texImage2DFormat=n.R16F}return MPMask$1.texImage2DFormat}getContainer(n){switch(n){case MPMaskType.UINT8_ARRAY:return this.containers.find(A=>A instanceof Uint8Array);case MPMaskType.FLOAT32_ARRAY:return this.containers.find(A=>A instanceof Float32Array);case MPMaskType.WEBGL_TEXTURE:return this.containers.find(A=>typeof WebGLTexture!="undefined"&&A instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const A of this.containers){let w;if(A instanceof Uint8Array)w=new Uint8Array(A);else if(A instanceof Float32Array)w=new Float32Array(A);else{if(!(A instanceof WebGLTexture))throw new Error(`Type is not supported: ${A}`);{const d=this.getGL(),m=this.getShaderContext();d.activeTexture(d.TEXTURE1),w=(0,image_shader_context_1$1.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,w),this.configureTextureParams();const s=this.getTexImage2DFormat();d.texImage2D(d.TEXTURE_2D,0,s,this.width,this.height,0,d.RED,d.FLOAT,null),d.bindTexture(d.TEXTURE_2D,null),m.bindFramebuffer(d,w),m.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),m.unbindFramebuffer(),this.unbindTexture()}}n.push(w)}return new MPMask$1(n,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$1.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$1.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let n=this.getContainer(MPMaskType.FLOAT32_ARRAY);if(!n){const A=this.getContainer(MPMaskType.UINT8_ARRAY);if(A)n=new Float32Array(A).map(w=>w/255);else{n=new Float32Array(this.width*this.height);const w=this.getGL(),d=this.getShaderContext(),m=this.convertToWebGLTexture();if(d.bindFramebuffer(w,m),(0,platform_utils_1$1.isIOS)()){const s=new Float32Array(this.width*this.height*4);w.readPixels(0,0,this.width,this.height,w.RGBA,w.FLOAT,s);for(let E=0,H=0;E<n.length;++E,H+=4)n[E]=s[H]}else w.readPixels(0,0,this.width,this.height,w.RED,w.FLOAT,n)}this.containers.push(n)}return n}convertToUint8Array(){let n=this.getContainer(MPMaskType.UINT8_ARRAY);if(!n){const A=this.convertToFloat32Array();n=new Uint8Array(A.map(w=>255*w)),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPMaskType.WEBGL_TEXTURE);if(!n){const A=this.getGL();n=this.bindTexture();const w=this.convertToFloat32Array(),d=this.getTexImage2DFormat();A.texImage2D(A.TEXTURE_2D,0,d,this.width,this.height,0,A.RED,A.FLOAT,w),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let A=this.getContainer(MPMaskType.WEBGL_TEXTURE);return A?n.bindTexture(n.TEXTURE_2D,A):(A=(0,image_shader_context_1$1.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(A),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,A),this.configureTextureParams()),A}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPMaskType.WEBGL_TEXTURE)),MPMask$1.instancesBeforeWarning=-1}}mask.MPMask=MPMask$1,MPMask$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(u,n,A){u instanceof String&&(u=String(u));for(var w=u.length,d=0;d<w;d++){var m=u[d];if(n.call(A,m,d,u))return{i:d,v:m}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(u,n,A){u!=Array.prototype&&u!=Object.prototype&&(u[n]=A.value)},$jscomp.getGlobal=function(u){return typeof window!="undefined"&&window===u?u:commonjsGlobal!==void 0&&commonjsGlobal!=null?commonjsGlobal:u},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(u,n,A,w){if(n){for(A=$jscomp.global,u=u.split("."),w=0;w<u.length-1;w++){var d=u[w];d in A||(A[d]={}),A=A[d]}(n=n(w=A[u=u[u.length-1]]))!=w&&n!=null&&$jscomp.defineProperty(A,u,{configurable:!0,writable:!0,value:n})}},$jscomp.polyfill("Array.prototype.findIndex",function(u){return u||function(n,A){return $jscomp.findInternal(this,n,A).i}},"es6","es3"),$jscomp.checkStringArgs=function(u,n,A){if(u==null)throw new TypeError("The 'this' value for String.prototype."+A+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+A+" must not be a regular expression");return u+""},$jscomp.polyfill("String.prototype.endsWith",function(u){return u||function(n,A){var w=$jscomp.checkStringArgs(this,n,"endsWith");n+="",A===void 0&&(A=w.length),A=Math.max(0,Math.min(0|A,w.length));for(var d=n.length;0<d&&0<A;)if(w[--A]!=n[--d])return!1;return 0>=d}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(u){return u||function(n,A){return $jscomp.findInternal(this,n,A).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(u){return u||function(n,A){var w=$jscomp.checkStringArgs(this,n,"startsWith");n+="";var d=w.length,m=n.length;A=Math.max(0,Math.min(0|A,w.length));for(var s=0;s<m&&A<d;)if(w[A++]!=n[s++])return!1;return s>=m}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(u){return u||function(n){var A=$jscomp.checkStringArgs(this,null,"repeat");if(0>n||1342177279<n)throw new RangeError("Invalid count value");n|=0;for(var w="";n;)1&n&&(w+=A),(n>>>=1)&&(A+=A);return w}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(u,n,A){u=u.split("."),A=A||goog.global,u[0]in A||A.execScript===void 0||A.execScript("var "+u[0]);for(var w;u.length&&(w=u.shift());)u.length||n===void 0?A=A[w]&&A[w]!==Object.prototype[w]?A[w]:A[w]={}:A[w]=n},goog.define=function(u,n){return n},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(u){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(u)},goog.constructNamespace_=function(u,n){goog.exportPath_(u,n)},goog.getScriptNonce=function(u){return u&&u!=goog.global?goog.getScriptNonce_(u.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(u){return(u=u.querySelector&&u.querySelector("script[nonce]"))&&(u=u.nonce||u.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(u)?u:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(u){if(typeof u!="string"||!u||u.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+u+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=u},goog.module.get=function(u){return goog.module.getInternal_(u)},goog.module.getInternal_=function(u){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var u=goog.global.$jscomp;return!!u&&typeof u.getCurrentModulePath=="function"&&!!u.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(u){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=u;else{var n=goog.global.$jscomp;if(!n||typeof n.getCurrentModulePath!="function")throw Error('Module with namespace "'+u+'" has been loaded incorrectly.');n=n.require(n.getCurrentModulePath()),goog.loadedModules_[u]={exports:n,type:goog.ModuleType.ES6,moduleId:u}}},goog.setTestOnly=function(u){if(goog.DISALLOW_TEST_ONLY_CODE)throw u=u||"",Error("Importing test-only code into non-debug environment"+(u?": "+u:"."))},goog.forwardDeclare=function(u){},goog.getObjectByName=function(u,n){u=u.split("."),n=n||goog.global;for(var A=0;A<u.length;A++)if((n=n[u[A]])==null)return null;return n},goog.globalize=function(u,n){for(var A in n=n||goog.global,u)n[A]=u[A]},goog.addDependency=function(u,n,A,w){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(u){goog.global.console&&goog.global.console.error(u)},goog.require=function(u){},goog.requireType=function(u){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(u){u.instance_=void 0,u.getInstance=function(){return u.instance_?u.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=u),u.instance_=new u)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(u){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(u){return"(function(){"+u+`
;})();
`},goog.loadModule=function(u){var n=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(u))var A=u.call(void 0,{});else{if(typeof u!="string")throw Error("Invalid module definition");goog.useSafari10Workaround()&&(u=goog.workaroundSafari10EvalBug(u)),A=goog.loadModuleFromSource_.call(void 0,u)}var w=goog.moduleLoaderState_.moduleName;if(typeof w!="string"||!w)throw Error('Invalid module name "'+w+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(w,A):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof A=="object"&&A!=null&&Object.seal(A),goog.loadedModules_[w]={exports:A,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=n}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(u){u=u.split("/");for(var n=0;n<u.length;)u[n]=="."?u.splice(n,1):n&&u[n]==".."&&u[n-1]&&u[n-1]!=".."?u.splice(--n,2):n++;return u.join("/")},goog.loadFileSync_=function(u){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(u);try{var n=new goog.global.XMLHttpRequest;return n.open("get",u,!1),n.send(),n.status==0||n.status==200?n.responseText:null}catch(A){return null}},goog.transpile_=function(u,n,A){var w=goog.global.$jscomp;w||(goog.global.$jscomp=w={});var d=w.transpile;if(!d){var m=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(m);if(s){if(function(){(0,eval)(s+`
//# sourceURL=`+m)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=(w=goog.global.$jscomp).transpile}}return d||(d=w.transpile=function(E,H){return goog.logToConsole_(H+" requires transpilation but no transpiler was found."),E}),d(u,n,A)},goog.typeOf=function(u){var n=typeof u;if(n=="object"){if(!u)return"null";if(u instanceof Array)return"array";if(u instanceof Object)return n;var A=Object.prototype.toString.call(u);if(A=="[object Window]")return"object";if(A=="[object Array]"||typeof u.length=="number"&&u.splice!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("splice"))return"array";if(A=="[object Function]"||u.call!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("call"))return"function"}else if(n=="function"&&u.call===void 0)return"object";return n},goog.isArray=function(u){return goog.typeOf(u)=="array"},goog.isArrayLike=function(u){var n=goog.typeOf(u);return n=="array"||n=="object"&&typeof u.length=="number"},goog.isDateLike=function(u){return goog.isObject(u)&&typeof u.getFullYear=="function"},goog.isFunction=function(u){return goog.typeOf(u)=="function"},goog.isObject=function(u){var n=typeof u;return n=="object"&&u!=null||n=="function"},goog.getUid=function(u){return Object.prototype.hasOwnProperty.call(u,goog.UID_PROPERTY_)&&u[goog.UID_PROPERTY_]||(u[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(u){return!!u[goog.UID_PROPERTY_]},goog.removeUid=function(u){u!==null&&"removeAttribute"in u&&u.removeAttribute(goog.UID_PROPERTY_);try{delete u[goog.UID_PROPERTY_]}catch(n){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(typeof u.clone=="function")return u.clone();for(var A in n=n=="array"?[]:{},u)n[A]=goog.cloneObject(u[A]);return n}return u},goog.bindNative_=function(u,n,A){return u.call.apply(u.bind,arguments)},goog.bindJs_=function(u,n,A){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,w),u.apply(n,d)}}return function(){return u.apply(n,arguments)}},goog.bind=function(u,n,A){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(u,n){var A=Array.prototype.slice.call(arguments,1);return function(){var w=A.slice();return w.push.apply(w,arguments),u.apply(this,w)}},goog.mixin=function(u,n){for(var A in n)u[A]=n[A]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(u){if(goog.global.execScript)goog.global.execScript(u,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch(w){}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch(w){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(u);else{var n=goog.global.document,A=n.createElement("script");A.type="text/javascript",A.defer=!1,A.appendChild(n.createTextNode(u)),n.head.appendChild(A),n.head.removeChild(A)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(u,n){if(String(u).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+u);var A=function(d){return goog.cssNameMapping_[d]||d},w=function(d){d=d.split("-");for(var m=[],s=0;s<d.length;s++)m.push(A(d[s]));return m.join("-")};return w=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?A:w:function(d){return d},u=n?u+"-"+w(n):w(u),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(u):u},goog.setCssNameMapping=function(u,n){goog.cssNameMapping_=u,goog.cssNameMappingStyle_=n},goog.getMsg=function(u,n,A){return A&&A.html&&(u=u.replace(/</g,"&lt;")),n&&(u=u.replace(/\{\$([^}]+)}/g,function(w,d){return n!=null&&d in n?n[d]:w})),u},goog.getMsgWithFallback=function(u,n){return u},goog.exportSymbol=function(u,n,A){goog.exportPath_(u,n,A)},goog.exportProperty=function(u,n,A){u[n]=A},goog.inherits=function(u,n){function A(){}A.prototype=n.prototype,u.superClass_=n.prototype,u.prototype=new A,u.prototype.constructor=u,u.base=function(w,d,m){for(var s=Array(arguments.length-2),E=2;E<arguments.length;E++)s[E-2]=arguments[E];return n.prototype[d].apply(w,s)}},goog.scope=function(u){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");u.call(goog.global)},goog.defineClass=function(u,n){var A=n.constructor,w=n.statics;return A&&A!=Object.prototype.constructor||(A=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),A=goog.defineClass.createSealingConstructor_(A,u),u&&goog.inherits(A,u),delete n.constructor,delete n.statics,goog.defineClass.applyProperties_(A.prototype,n),w!=null&&(w instanceof Function?w(A):goog.defineClass.applyProperties_(A,w)),A},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(u,n){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return u;var A=!goog.defineClass.isUnsealable_(n),w=function(){var d=u.apply(this,arguments)||this;return d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_],this.constructor===w&&A&&Object.seal instanceof Function&&Object.seal(d),d};return w},goog.defineClass.isUnsealable_=function(u){return u&&u.prototype&&u.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(u,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(u[A]=n[A]);for(var w=0;w<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;w++)A=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[w],Object.prototype.hasOwnProperty.call(n,A)&&(u[A]=n[A])},goog.tagUnsealableClass=function(u){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(u){return u},goog.createTrustedTypesPolicy=function(u){var n=null,A=goog.global.trustedTypes||goog.global.TrustedTypes;if(!A||!A.createPolicy)return n;try{n=A.createPolicy(u,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(w){goog.logToConsole_(w.message)}return n},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(u,n){return u===n?u!==0||1/u==1/n:u!=u&&n!=n},goog.object.forEach=function(u,n,A){for(var w in u)n.call(A,u[w],w,u)},goog.object.filter=function(u,n,A){var w,d={};for(w in u)n.call(A,u[w],w,u)&&(d[w]=u[w]);return d},goog.object.map=function(u,n,A){var w,d={};for(w in u)d[w]=n.call(A,u[w],w,u);return d},goog.object.some=function(u,n,A){for(var w in u)if(n.call(A,u[w],w,u))return!0;return!1},goog.object.every=function(u,n,A){for(var w in u)if(!n.call(A,u[w],w,u))return!1;return!0},goog.object.getCount=function(u){var n,A=0;for(n in u)A++;return A},goog.object.getAnyKey=function(u){for(var n in u)return n},goog.object.getAnyValue=function(u){for(var n in u)return u[n]},goog.object.contains=function(u,n){return goog.object.containsValue(u,n)},goog.object.getValues=function(u){var n,A=[],w=0;for(n in u)A[w++]=u[n];return A},goog.object.getKeys=function(u){var n,A=[],w=0;for(n in u)A[w++]=n;return A},goog.object.getValueByKeys=function(u,n){var A=goog.isArrayLike(n),w=A?n:arguments;for(A=A?0:1;A<w.length;A++){if(u==null)return;u=u[w[A]]}return u},goog.object.containsKey=function(u,n){return u!==null&&n in u},goog.object.containsValue=function(u,n){for(var A in u)if(u[A]==n)return!0;return!1},goog.object.findKey=function(u,n,A){for(var w in u)if(n.call(A,u[w],w,u))return w},goog.object.findValue=function(u,n,A){return(n=goog.object.findKey(u,n,A))&&u[n]},goog.object.isEmpty=function(u){for(var n in u)return!1;return!0},goog.object.clear=function(u){for(var n in u)delete u[n]},goog.object.remove=function(u,n){var A;return(A=n in u)&&delete u[n],A},goog.object.add=function(u,n,A){if(u!==null&&n in u)throw Error('The object already contains the key "'+n+'"');goog.object.set(u,n,A)},goog.object.get=function(u,n,A){return u!==null&&n in u?u[n]:A},goog.object.set=function(u,n,A){u[n]=A},goog.object.setIfUndefined=function(u,n,A){return n in u?u[n]:u[n]=A},goog.object.setWithReturnValueIfNotSet=function(u,n,A){return n in u?u[n]:(A=A(),u[n]=A)},goog.object.equals=function(u,n){for(var A in u)if(!(A in n)||u[A]!==n[A])return!1;for(var w in n)if(!(w in u))return!1;return!0},goog.object.clone=function(u){var n,A={};for(n in u)A[n]=u[n];return A},goog.object.unsafeClone=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(goog.isFunction(u.clone))return u.clone();for(var A in n=n=="array"?[]:{},u)n[A]=goog.object.unsafeClone(u[A]);return n}return u},goog.object.transpose=function(u){var n,A={};for(n in u)A[u[n]]=n;return A},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(u,n){for(var A,w,d=1;d<arguments.length;d++){for(A in w=arguments[d])u[A]=w[A];for(var m=0;m<goog.object.PROTOTYPE_FIELDS_.length;m++)A=goog.object.PROTOTYPE_FIELDS_[m],Object.prototype.hasOwnProperty.call(w,A)&&(u[A]=w[A])}},goog.object.create=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(n%2)throw Error("Uneven number of arguments");for(var A={},w=0;w<n;w+=2)A[arguments[w]]=arguments[w+1];return A},goog.object.createSet=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var A={},w=0;w<n;w++)A[arguments[w]]=!0;return A},goog.object.createImmutableView=function(u){var n=u;return Object.isFrozen&&!Object.isFrozen(u)&&(n=Object.create(u),Object.freeze(n)),n},goog.object.isImmutableView=function(u){return!!Object.isFrozen&&Object.isFrozen(u)},goog.object.getAllPropertyNames=function(u,n,A){if(!u)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(u);for(var w={};u&&(u!==Object.prototype||n)&&(u!==Function.prototype||A);){for(var d=Object.getOwnPropertyNames(u),m=0;m<d.length;m++)w[d[m]]=!0;u=Object.getPrototypeOf(u)}return goog.object.getKeys(w)},goog.object.getSuperClass=function(u){return(u=Object.getPrototypeOf(u.prototype))&&u.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(u,n,A,w){var d="Assertion failed";if(A){d+=": "+A;var m=w}else u&&(d+=": "+u,m=n);throw Error(""+d,m||[])},jspb.asserts.assert=function(u,n,A){for(var w=[],d=2;d<arguments.length;++d)w[d-2]=arguments[d];return u||jspb.asserts.doAssertFailure("",null,n,w),u},jspb.asserts.assertString=function(u,n,A){for(var w=[],d=2;d<arguments.length;++d)w[d-2]=arguments[d];return typeof u!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(u),u],n,w),u},jspb.asserts.assertArray=function(u,n,A){for(var w=[],d=2;d<arguments.length;++d)w[d-2]=arguments[d];return Array.isArray(u)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(u),u],n,w),u},jspb.asserts.fail=function(u,n){for(var A=[],w=1;w<arguments.length;++w)A[w-1]=arguments[w];throw Error("Failure"+(u?": "+u:""),A)},jspb.asserts.assertInstanceof=function(u,n,A,w){for(var d=[],m=3;m<arguments.length;++m)d[m-3]=arguments[m];return u instanceof n||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(n),jspb.asserts.getType(u)],A,d),u},jspb.asserts.getType=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(u){var n=jspb.BinaryConstants.FieldType,A=jspb.BinaryConstants.WireType;switch(u){case n.INT32:case n.INT64:case n.UINT32:case n.UINT64:case n.SINT32:case n.SINT64:case n.BOOL:case n.ENUM:case n.VHASH64:return A.VARINT;case n.DOUBLE:case n.FIXED64:case n.SFIXED64:case n.FHASH64:return A.FIXED64;case n.STRING:case n.MESSAGE:case n.BYTES:return A.DELIMITED;case n.FLOAT:case n.FIXED32:case n.SFIXED32:return A.FIXED32;default:return A.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(u){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var n=Error().stack;n&&(this.stack=n)}u&&(this.message=String(u)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(u,n){goog.debug.Error.call(this,goog.asserts.subs_(u,n)),this.messagePattern=u},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(u){throw u},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(u,n){for(var A="",w=(u=u.split("%s")).length-1,d=0;d<w;d++)A+=u[d]+(d<n.length?n[d]:"%s");return A+u[w]},goog.asserts.doAssertFailure_=function(u,n,A,w){var d="Assertion failed";if(A){d+=": "+A;var m=w}else u&&(d+=": "+u,m=n);u=new goog.asserts.AssertionError(""+d,m||[]),goog.asserts.errorHandler_(u)},goog.asserts.setErrorHandler=function(u){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=u)},goog.asserts.assert=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!u&&goog.asserts.doAssertFailure_("",null,n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertExists=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&u==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.fail=function(u,n){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(u?": "+u:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertString=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertFunction=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(u)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObject=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(u)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertArray=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(u)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertBoolean=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertElement=function(u,n,A){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(u)&&u.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertInstanceof=function(u,n,A,w){return!goog.asserts.ENABLE_ASSERTS||u instanceof n||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(n),goog.asserts.getType_(u)],A,Array.prototype.slice.call(arguments,3)),u},goog.asserts.assertFinite=function(u,n,A){return!goog.asserts.ENABLE_ASSERTS||typeof u=="number"&&isFinite(u)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var u in Object.prototype)goog.asserts.fail(u+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(u){return u[u.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.indexOf.call(u,n,A)}:function(u,n,A){if(A=A==null?0:0>A?Math.max(0,u.length+A):A,typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.indexOf(n,A);for(;A<u.length;A++)if(A in u&&u[A]===n)return A;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.lastIndexOf.call(u,n,A==null?u.length-1:A)}:function(u,n,A){if(0>(A=A==null?u.length-1:A)&&(A=Math.max(0,u.length+A)),typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.lastIndexOf(n,A);for(;0<=A;A--)if(A in u&&u[A]===n)return A;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(u,n,A){goog.asserts.assert(u.length!=null),Array.prototype.forEach.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)m in d&&n.call(A,d[m],m,u)},goog.array.forEachRight=function(u,n,A){var w=u.length,d=typeof u=="string"?u.split(""):u;for(--w;0<=w;--w)w in d&&n.call(A,d[w],w,u)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.filter.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=[],m=0,s=typeof u=="string"?u.split(""):u,E=0;E<w;E++)if(E in s){var H=s[E];n.call(A,H,E,u)&&(d[m++]=H)}return d},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.map.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=Array(w),m=typeof u=="string"?u.split(""):u,s=0;s<w;s++)s in m&&(d[s]=n.call(A,m[s],s,u));return d},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(u,n,A,w){return goog.asserts.assert(u.length!=null),w&&(n=goog.bind(n,w)),Array.prototype.reduce.call(u,n,A)}:function(u,n,A,w){var d=A;return goog.array.forEach(u,function(m,s){d=n.call(w,d,m,s,u)}),d},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(u,n,A,w){return goog.asserts.assert(u.length!=null),goog.asserts.assert(n!=null),w&&(n=goog.bind(n,w)),Array.prototype.reduceRight.call(u,n,A)}:function(u,n,A,w){var d=A;return goog.array.forEachRight(u,function(m,s){d=n.call(w,d,m,s,u)}),d},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.some.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)if(m in d&&n.call(A,d[m],m,u))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.every.call(u,n,A)}:function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)if(m in d&&!n.call(A,d[m],m,u))return!1;return!0},goog.array.count=function(u,n,A){var w=0;return goog.array.forEach(u,function(d,m,s){n.call(A,d,m,s)&&++w},A),w},goog.array.find=function(u,n,A){return 0>(n=goog.array.findIndex(u,n,A))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndex=function(u,n,A){for(var w=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<w;m++)if(m in d&&n.call(A,d[m],m,u))return m;return-1},goog.array.findRight=function(u,n,A){return 0>(n=goog.array.findIndexRight(u,n,A))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndexRight=function(u,n,A){var w=u.length,d=typeof u=="string"?u.split(""):u;for(--w;0<=w;w--)if(w in d&&n.call(A,d[w],w,u))return w;return-1},goog.array.contains=function(u,n){return 0<=goog.array.indexOf(u,n)},goog.array.isEmpty=function(u){return u.length==0},goog.array.clear=function(u){if(!Array.isArray(u))for(var n=u.length-1;0<=n;n--)delete u[n];u.length=0},goog.array.insert=function(u,n){goog.array.contains(u,n)||u.push(n)},goog.array.insertAt=function(u,n,A){goog.array.splice(u,A,0,n)},goog.array.insertArrayAt=function(u,n,A){goog.partial(goog.array.splice,u,A,0).apply(null,n)},goog.array.insertBefore=function(u,n,A){var w;arguments.length==2||0>(w=goog.array.indexOf(u,A))?u.push(n):goog.array.insertAt(u,n,w)},goog.array.remove=function(u,n){var A;return(A=0<=(n=goog.array.indexOf(u,n)))&&goog.array.removeAt(u,n),A},goog.array.removeLast=function(u,n){return 0<=(n=goog.array.lastIndexOf(u,n))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAt=function(u,n){return goog.asserts.assert(u.length!=null),Array.prototype.splice.call(u,n,1).length==1},goog.array.removeIf=function(u,n,A){return 0<=(n=goog.array.findIndex(u,n,A))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAllIf=function(u,n,A){var w=0;return goog.array.forEachRight(u,function(d,m){n.call(A,d,m,u)&&goog.array.removeAt(u,m)&&w++}),w},goog.array.concat=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(u){var n=u.length;if(0<n){for(var A=Array(n),w=0;w<n;w++)A[w]=u[w];return A}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(u,n){for(var A=1;A<arguments.length;A++){var w=arguments[A];if(goog.isArrayLike(w)){var d=u.length||0,m=w.length||0;u.length=d+m;for(var s=0;s<m;s++)u[d+s]=w[s]}else u.push(w)}},goog.array.splice=function(u,n,A,w){return goog.asserts.assert(u.length!=null),Array.prototype.splice.apply(u,goog.array.slice(arguments,1))},goog.array.slice=function(u,n,A){return goog.asserts.assert(u.length!=null),2>=arguments.length?Array.prototype.slice.call(u,n):Array.prototype.slice.call(u,n,A)},goog.array.removeDuplicates=function(u,n,A){n=n||u;var w=function(H){return goog.isObject(H)?"o"+goog.getUid(H):(typeof H).charAt(0)+H};A=A||w,w={};for(var d=0,m=0;m<u.length;){var s=u[m++],E=A(s);Object.prototype.hasOwnProperty.call(w,E)||(w[E]=!0,n[d++]=s)}n.length=d},goog.array.binarySearch=function(u,n,A){return goog.array.binarySearch_(u,A||goog.array.defaultCompare,!1,n)},goog.array.binarySelect=function(u,n,A){return goog.array.binarySearch_(u,n,!0,void 0,A)},goog.array.binarySearch_=function(u,n,A,w,d){for(var m,s=0,E=u.length;s<E;){var H=s+(E-s>>>1),ee=A?n.call(d,u[H],H,u):n(w,u[H]);0<ee?s=H+1:(E=H,m=!ee)}return m?s:-s-1},goog.array.sort=function(u,n){u.sort(n||goog.array.defaultCompare)},goog.array.stableSort=function(u,n){for(var A=Array(u.length),w=0;w<u.length;w++)A[w]={index:w,value:u[w]};var d=n||goog.array.defaultCompare;for(goog.array.sort(A,function(m,s){return d(m.value,s.value)||m.index-s.index}),w=0;w<u.length;w++)u[w]=A[w].value},goog.array.sortByKey=function(u,n,A){var w=A||goog.array.defaultCompare;goog.array.sort(u,function(d,m){return w(n(d),n(m))})},goog.array.sortObjectsByKey=function(u,n,A){goog.array.sortByKey(u,function(w){return w[n]},A)},goog.array.isSorted=function(u,n,A){n=n||goog.array.defaultCompare;for(var w=1;w<u.length;w++){var d=n(u[w-1],u[w]);if(0<d||d==0&&A)return!1}return!0},goog.array.equals=function(u,n,A){if(!goog.isArrayLike(u)||!goog.isArrayLike(n)||u.length!=n.length)return!1;var w=u.length;A=A||goog.array.defaultCompareEquality;for(var d=0;d<w;d++)if(!A(u[d],n[d]))return!1;return!0},goog.array.compare3=function(u,n,A){A=A||goog.array.defaultCompare;for(var w=Math.min(u.length,n.length),d=0;d<w;d++){var m=A(u[d],n[d]);if(m!=0)return m}return goog.array.defaultCompare(u.length,n.length)},goog.array.defaultCompare=function(u,n){return u>n?1:u<n?-1:0},goog.array.inverseDefaultCompare=function(u,n){return-goog.array.defaultCompare(u,n)},goog.array.defaultCompareEquality=function(u,n){return u===n},goog.array.binaryInsert=function(u,n,A){return 0>(A=goog.array.binarySearch(u,n,A))&&(goog.array.insertAt(u,n,-(A+1)),!0)},goog.array.binaryRemove=function(u,n,A){return 0<=(n=goog.array.binarySearch(u,n,A))&&goog.array.removeAt(u,n)},goog.array.bucket=function(u,n,A){for(var w={},d=0;d<u.length;d++){var m=u[d],s=n.call(A,m,d,u);s!==void 0&&(w[s]||(w[s]=[])).push(m)}return w},goog.array.toObject=function(u,n,A){var w={};return goog.array.forEach(u,function(d,m){w[n.call(A,d,m,u)]=d}),w},goog.array.range=function(u,n,A){var w=[],d=0,m=u;if(n!==void 0&&(d=u,m=n),0>(A=A||1)*(m-d))return[];if(0<A)for(u=d;u<m;u+=A)w.push(u);else for(u=d;u>m;u+=A)w.push(u);return w},goog.array.repeat=function(u,n){for(var A=[],w=0;w<n;w++)A[w]=u;return A},goog.array.flatten=function(u){for(var n=[],A=0;A<arguments.length;A++){var w=arguments[A];if(Array.isArray(w))for(var d=0;d<w.length;d+=8192){var m=goog.array.slice(w,d,d+8192);m=goog.array.flatten.apply(null,m);for(var s=0;s<m.length;s++)n.push(m[s])}else n.push(w)}return n},goog.array.rotate=function(u,n){return goog.asserts.assert(u.length!=null),u.length&&(0<(n%=u.length)?Array.prototype.unshift.apply(u,u.splice(-n,n)):0>n&&Array.prototype.push.apply(u,u.splice(0,-n))),u},goog.array.moveItem=function(u,n,A){goog.asserts.assert(0<=n&&n<u.length),goog.asserts.assert(0<=A&&A<u.length),n=Array.prototype.splice.call(u,n,1),Array.prototype.splice.call(u,A,0,n[0])},goog.array.zip=function(u){if(!arguments.length)return[];for(var n=[],A=arguments[0].length,w=1;w<arguments.length;w++)arguments[w].length<A&&(A=arguments[w].length);for(w=0;w<A;w++){for(var d=[],m=0;m<arguments.length;m++)d.push(arguments[m][w]);n.push(d)}return n},goog.array.shuffle=function(u,n){n=n||Math.random;for(var A=u.length-1;0<A;A--){var w=Math.floor(n()*(A+1)),d=u[A];u[A]=u[w],u[w]=d}},goog.array.copyByIndex=function(u,n){var A=[];return goog.array.forEach(n,function(w){A.push(u[w])}),A},goog.array.concatMap=function(u,n,A){return goog.array.concat.apply([],goog.array.map(u,n,A))},goog.crypt={},goog.crypt.stringToByteArray=function(u){for(var n=[],A=0,w=0;w<u.length;w++){var d=u.charCodeAt(w);255<d&&(n[A++]=255&d,d>>=8),n[A++]=d}return n},goog.crypt.byteArrayToString=function(u){if(8192>=u.length)return String.fromCharCode.apply(null,u);for(var n="",A=0;A<u.length;A+=8192){var w=goog.array.slice(u,A,A+8192);n+=String.fromCharCode.apply(null,w)}return n},goog.crypt.byteArrayToHex=function(u,n){return goog.array.map(u,function(A){return 1<(A=A.toString(16)).length?A:"0"+A}).join(n||"")},goog.crypt.hexToByteArray=function(u){goog.asserts.assert(u.length%2==0,"Key string length must be multiple of 2");for(var n=[],A=0;A<u.length;A+=2)n.push(parseInt(u.substring(A,A+2),16));return n},goog.crypt.stringToUtf8ByteArray=function(u){for(var n=[],A=0,w=0;w<u.length;w++){var d=u.charCodeAt(w);128>d?n[A++]=d:(2048>d?n[A++]=d>>6|192:((64512&d)==55296&&w+1<u.length&&(64512&u.charCodeAt(w+1))==56320?(d=65536+((1023&d)<<10)+(1023&u.charCodeAt(++w)),n[A++]=d>>18|240,n[A++]=d>>12&63|128):n[A++]=d>>12|224,n[A++]=d>>6&63|128),n[A++]=63&d|128)}return n},goog.crypt.utf8ByteArrayToString=function(u){for(var n=[],A=0,w=0;A<u.length;){var d=u[A++];if(128>d)n[w++]=String.fromCharCode(d);else if(191<d&&224>d){var m=u[A++];n[w++]=String.fromCharCode((31&d)<<6|63&m)}else if(239<d&&365>d){m=u[A++];var s=u[A++];d=((7&d)<<18|(63&m)<<12|(63&s)<<6|63&u[A++])-65536,n[w++]=String.fromCharCode(55296+(d>>10)),n[w++]=String.fromCharCode(56320+(1023&d))}else m=u[A++],s=u[A++],n[w++]=String.fromCharCode((15&d)<<12|(63&m)<<6|63&s)}return n.join("")},goog.crypt.xorByteArray=function(u,n){goog.asserts.assert(u.length==n.length,"XOR array lengths must match");for(var A=[],w=0;w<u.length;w++)A.push(u[w]^n[w]);return A},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(u){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(u);n&&(!u||!(u instanceof n.Location)&&u instanceof n.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(u))}return u},goog.dom.asserts.assertIsElementType_=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var A=goog.dom.asserts.getWindow_(u);A&&A[n]!==void 0&&(u&&(u instanceof A[n]||!(u instanceof A.Location||u instanceof A.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",n,goog.dom.asserts.debugStringForType_(u)))}return u},goog.dom.asserts.assertIsHTMLAnchorElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(u){if(!goog.isObject(u))return u===void 0?"undefined":u===null?"null":typeof u;try{return u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u)}catch(n){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(u){try{var n=u&&u.ownerDocument,A=n&&(n.defaultView||n.parentWindow);if((A=A||goog.global).Element&&A.Location)return A}catch(w){}return null},goog.functions={},goog.functions.constant=function(u){return function(){return u}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(u,n){return u},goog.functions.error=function(u){return function(){throw Error(u)}},goog.functions.fail=function(u){return function(){throw u}},goog.functions.lock=function(u,n){return n=n||0,function(){return u.apply(this,Array.prototype.slice.call(arguments,0,n))}},goog.functions.nth=function(u){return function(){return arguments[u]}},goog.functions.partialRight=function(u,n){var A=Array.prototype.slice.call(arguments,1);return function(){var w=Array.prototype.slice.call(arguments);return w.push.apply(w,A),u.apply(this,w)}},goog.functions.withReturnValue=function(u,n){return goog.functions.sequence(u,goog.functions.constant(n))},goog.functions.equalTo=function(u,n){return function(A){return n?u==A:u===A}},goog.functions.compose=function(u,n){var A=arguments,w=A.length;return function(){var d;w&&(d=A[w-1].apply(this,arguments));for(var m=w-2;0<=m;m--)d=A[m].call(this,d);return d}},goog.functions.sequence=function(u){var n=arguments,A=n.length;return function(){for(var w,d=0;d<A;d++)w=n[d].apply(this,arguments);return w}},goog.functions.and=function(u){var n=arguments,A=n.length;return function(){for(var w=0;w<A;w++)if(!n[w].apply(this,arguments))return!1;return!0}},goog.functions.or=function(u){var n=arguments,A=n.length;return function(){for(var w=0;w<A;w++)if(n[w].apply(this,arguments))return!0;return!1}},goog.functions.not=function(u){return function(){return!u.apply(this,arguments)}},goog.functions.create=function(u,n){var A=function(){};return A.prototype=u.prototype,A=new A,u.apply(A,Array.prototype.slice.call(arguments,1)),A},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(u){var n,A=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(A||(n=u(),A=!0),n):u()}},goog.functions.once=function(u){var n=u;return function(){if(n){var A=n;n=null,A()}}},goog.functions.debounce=function(u,n,A){var w=0;return function(d){goog.global.clearTimeout(w);var m=arguments;w=goog.global.setTimeout(function(){u.apply(A,m)},n)}},goog.functions.throttle=function(u,n,A){var w=0,d=!1,m=[],s=function(){w=0,d&&(d=!1,E())},E=function(){w=goog.global.setTimeout(s,n),u.apply(A,m)};return function(H){m=arguments,w?d=!0:E()}},goog.functions.rateLimit=function(u,n,A){var w=0,d=function(){w=0};return function(m){w||(w=goog.global.setTimeout(d,n),u.apply(A,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(u){this.tagName_=u},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(u){return goog.dom.tags.VOID_TAGS_[u]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(u,n){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=u===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(u){return u instanceof goog.string.Const&&u.constructor===goog.string.Const&&u.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?u.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+u+"'"),"type_error:Const")},goog.string.Const.from=function(u){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeScript.fromConstantAndArgs=function(u,n){for(var A=[],w=1;w<arguments.length;w++)A.push(goog.html.SafeScript.stringify_(arguments[w]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(u)+")("+A.join(", ")+");")},goog.html.SafeScript.fromJson=function(u){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(u))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(u){return goog.html.SafeScript.unwrapTrustedScript(u).toString()},goog.html.SafeScript.unwrapTrustedScript=function(u){return u instanceof goog.html.SafeScript&&u.constructor===goog.html.SafeScript&&u.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(u){return JSON.stringify(u).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(u):u,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(u){return goog.fs.url.getUrlObject_().createObjectURL(u)},goog.fs.url.revokeObjectUrl=function(u){goog.fs.url.getUrlObject_().revokeObjectURL(u)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(u){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(u){},goog.fs.url.getUrlObject_=function(){var u=goog.fs.url.findUrlObject_();if(u!=null)return u;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(u){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(n!==void 0){n=new n;for(var A=0;A<arguments.length;A++)n.append(arguments[A]);return n.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(u,n,A){var w=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(w!==void 0){w=new w;for(var d=0;d<u.length;d++)w.append(u[d],A);return w.getBlob(n)}if(goog.global.Blob!==void 0)return w={},n&&(w.type=n),A&&(w.endings=A),new Blob(u,w);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(u,n){return typeof u=="number"?0<u?goog.i18n.bidi.Dir.LTR:0>u?goog.i18n.bidi.Dir.RTL:n?null:goog.i18n.bidi.Dir.NEUTRAL:u==null?null:u?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0900-\u1FFF\u200E\u2C00-\uD801\uD804-\uD839\uD83C-\uDBFF\uF900-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",goog.i18n.bidi.rtlChars_="\u0591-\u06EF\u06FA-\u08FF\u200F\uD802-\uD803\uD83A-\uD83B\uFB1D-\uFDFF\uFE70-\uFEFC",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(u,n){return n?u.replace(goog.i18n.bidi.htmlSkipReg_,""):u},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(u,n){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(u,n){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(u){return goog.i18n.bidi.rtlRe_.test(u)},goog.i18n.bidi.isLtrChar=function(u){return goog.i18n.bidi.ltrRe_.test(u)},goog.i18n.bidi.isNeutralChar=function(u){return!goog.i18n.bidi.isLtrChar(u)&&!goog.i18n.bidi.isRtlChar(u)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(u,n){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(u,n){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(u,n){return u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n),goog.i18n.bidi.isRequiredLtrRe_.test(u)||!goog.i18n.bidi.hasAnyLtr(u)&&!goog.i18n.bidi.hasAnyRtl(u)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(u,n){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(u,n){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(u){return goog.i18n.bidi.rtlLocalesRe_.test(u)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(u,n){return n=(n===void 0?goog.i18n.bidi.hasAnyRtl(u):n)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,u.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+u+"</span>"},goog.i18n.bidi.enforceRtlInText=function(u){return goog.i18n.bidi.Format.RLE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+u+"</span>"},goog.i18n.bidi.enforceLtrInText=function(u){return goog.i18n.bidi.Format.LRE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(u){return u.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(u){return u.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05F4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05F3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(u,n){var A=0,w=0,d=!1;for(u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n).split(goog.i18n.bidi.wordSeparatorRe_),n=0;n<u.length;n++){var m=u[n];goog.i18n.bidi.startsWithRtl(m)?(A++,w++):goog.i18n.bidi.isRequiredLtrRe_.test(m)?d=!0:goog.i18n.bidi.hasAnyLtr(m)?w++:goog.i18n.bidi.hasNumeralsRe_.test(m)&&(d=!0)}return w==0?d?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:A/w>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(u,n){return goog.i18n.bidi.estimateDirection(u,n)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(u,n){u&&(n=goog.i18n.bidi.toDir(n))&&(u.style.textAlign=n==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,u.dir=n==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(u,n){switch(goog.i18n.bidi.estimateDirection(n)){case goog.i18n.bidi.Dir.LTR:u.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:u.dir="rtl";break;default:u.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(u,n){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=u===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(u,n){var A=goog.html.TrustedResourceUrl.unwrap(this),w=(A=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(A))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(A[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",A[2]||"",u)+goog.html.TrustedResourceUrl.stringifyParams_("#",w,n))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(u){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(u).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(u){return u instanceof goog.html.TrustedResourceUrl&&u.constructor===goog.html.TrustedResourceUrl&&u.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(u,n){var A=goog.string.Const.unwrap(u);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(A))throw Error("Invalid TrustedResourceUrl format: "+A);return u=A.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(w,d){if(!Object.prototype.hasOwnProperty.call(n,d))throw Error('Found marker, "'+d+'", in format string, "'+A+'", but no valid label mapping found in args: '+JSON.stringify(n));return(w=n[d])instanceof goog.string.Const?goog.string.Const.unwrap(w):encodeURIComponent(String(w))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(u,n,A,w){return goog.html.TrustedResourceUrl.format(u,n).cloneWithParams(A,w)},goog.html.TrustedResourceUrl.fromConstant=function(u){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.TrustedResourceUrl.fromConstants=function(u){for(var n="",A=0;A<u.length;A++)n+=goog.string.Const.unwrap(u[A]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.TrustedResourceUrl.fromSafeScript=function(u){return u=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(u)],"text/javascript"),u=goog.fs.url.createObjectUrl(u),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(u){return u=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(u):u,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.TrustedResourceUrl.stringifyParams_=function(u,n,A){if(A==null)return n;if(typeof A=="string")return A?u+encodeURIComponent(A):"";for(var w in A){var d=A[w];d=Array.isArray(d)?d:[d];for(var m=0;m<d.length;m++){var s=d[m];s!=null&&(n||(n=u),n+=(n.length>u.length?"&":"")+encodeURIComponent(w)+"="+encodeURIComponent(String(s)))}}return n},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(u,n){return u.lastIndexOf(n,0)==0},goog.string.internal.endsWith=function(u,n){var A=u.length-n.length;return 0<=A&&u.indexOf(n,A)==A},goog.string.internal.caseInsensitiveStartsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(0,n.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(u.length-n.length,n.length))==0},goog.string.internal.caseInsensitiveEquals=function(u,n){return u.toLowerCase()==n.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(u){return/^[\s\xa0]*$/.test(u)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(u){return u.trim()}:function(u){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(u)[1]},goog.string.internal.caseInsensitiveCompare=function(u,n){return(u=String(u).toLowerCase())<(n=String(n).toLowerCase())?-1:u==n?0:1},goog.string.internal.newLineToBr=function(u,n){return u.replace(/(\r\n|\r|\n)/g,n?"<br />":"<br>")},goog.string.internal.htmlEscape=function(u,n){if(n)u=u.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(u))return u;u.indexOf("&")!=-1&&(u=u.replace(goog.string.internal.AMP_RE_,"&amp;")),u.indexOf("<")!=-1&&(u=u.replace(goog.string.internal.LT_RE_,"&lt;")),u.indexOf(">")!=-1&&(u=u.replace(goog.string.internal.GT_RE_,"&gt;")),u.indexOf('"')!=-1&&(u=u.replace(goog.string.internal.QUOT_RE_,"&quot;")),u.indexOf("'")!=-1&&(u=u.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),u.indexOf("\0")!=-1&&(u=u.replace(goog.string.internal.NULL_RE_,"&#0;"))}return u},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(u,n){return goog.string.internal.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.internal.contains=function(u,n){return u.indexOf(n)!=-1},goog.string.internal.caseInsensitiveContains=function(u,n){return goog.string.internal.contains(u.toLowerCase(),n.toLowerCase())},goog.string.internal.compareVersions=function(u,n){var A=0;u=goog.string.internal.trim(String(u)).split("."),n=goog.string.internal.trim(String(n)).split(".");for(var w=Math.max(u.length,n.length),d=0;A==0&&d<w;d++){var m=u[d]||"",s=n[d]||"";do{if(m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],m[0].length==0&&s[0].length==0)break;A=m[1].length==0?0:parseInt(m[1],10);var E=s[1].length==0?0:parseInt(s[1],10);A=goog.string.internal.compareElements_(A,E)||goog.string.internal.compareElements_(m[2].length==0,s[2].length==0)||goog.string.internal.compareElements_(m[2],s[2]),m=m[3],s=s[3]}while(A==0)}return A},goog.string.internal.compareElements_=function(u,n){return u<n?-1:u>n?1:0},goog.html.SafeUrl=function(u,n){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=u===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(u){return u instanceof goog.html.SafeUrl&&u.constructor===goog.html.SafeUrl&&u.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(u){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(u)},goog.html.SafeUrl.fromBlob=function(u){return u=goog.html.SafeUrl.isSafeMimeType(u.type)?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromMediaSource=function(u){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),u=u instanceof MediaSource?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(u){var n=(u=u.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return n=n&&goog.html.SafeUrl.isSafeMimeType(n[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n?u:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"tel:")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(u){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(u))||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"fb-messenger://share")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromWhatsAppUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"whatsapp://send")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromSmsUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(u){var n=u.indexOf("#");if(0<n&&(u=u.substring(0,n)),!(n=u.match(/[?&]body=/gi)))return!0;if(1<n.length)return!1;if(!(u=u.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(u)}catch(A){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(u)},goog.html.SafeUrl.fromSshUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"ssh://")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(u,n,A){return(u=u.exec(n))?(u=u[1],(A instanceof goog.string.Const?[goog.string.Const.unwrap(A)]:A.map(function(w){return goog.string.Const.unwrap(w)})).indexOf(u)==-1&&(n=goog.html.SafeUrl.INNOCUOUS_STRING)):n=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeUrl.fromTrustedResourceUrl=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(u))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(u){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SAFE_URL_PATTERN_.test(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(u,n){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),n&&/^data:/i.test(u)&&(n=goog.html.SafeUrl.fromDataUrl(u)).getTypedStringValue()==u?n:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(u),"%s does not match the safe URL pattern",u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(u,";"),"Last character of style string is not ';': "+u),goog.asserts.assert(goog.string.internal.contains(u,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+u),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(u){return u instanceof goog.html.SafeStyle&&u.constructor===goog.html.SafeStyle&&u.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=u,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(u){var n,A="";for(n in u){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);var w=u[n];w!=null&&(A+=n+":"+(w=Array.isArray(w)?goog.array.map(w,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(w))+";")}return A?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(A):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(u){if(u instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(u).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(u=u instanceof goog.string.Const?goog.string.Const.unwrap(u):goog.html.SafeStyle.sanitizePropertyValueString_(String(u)),/[{;}]/.test(u))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[u]);return u},goog.html.SafeStyle.sanitizePropertyValueString_=function(u){var n=u.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(n)?goog.html.SafeStyle.COMMENT_RE_.test(u)?(goog.asserts.fail("String value disallows comments, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(u)?goog.html.SafeStyle.hasBalancedSquareBrackets_(u)?goog.html.SafeStyle.sanitizeUrl_(u):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(u){for(var n=!0,A=!0,w=0;w<u.length;w++){var d=u.charAt(w);d=="'"&&A?n=!n:d=='"'&&n&&(A=!A)}return n&&A},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(u){for(var n=!0,A=/^[-_a-zA-Z0-9]$/,w=0;w<u.length;w++){var d=u.charAt(w);if(d=="]"){if(n)return!1;n=!0}else if(d=="["){if(!n)return!1;n=!1}else if(!n&&!A.test(d))return!1}return n},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(u){return u.replace(goog.html.SafeStyle.URL_RE_,function(n,A,w,d){var m="";return w=w.replace(/^(['"])(.*)\1$/,function(s,E,H){return m=E,H}),n=goog.html.SafeUrl.sanitize(w).getTypedStringValue(),A+m+n+m+d})},goog.html.SafeStyle.concat=function(u){var n="",A=function(w){Array.isArray(w)?goog.array.forEach(w,A):n+=goog.html.SafeStyle.unwrap(w)};return goog.array.forEach(arguments,A),n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(u,n){if(goog.string.internal.contains(u,"<"))throw Error("Selector does not allow '<', got: "+u);var A=u.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(A))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+u);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(A))throw Error("() and [] in selector must be balanced, got: "+u);return n instanceof goog.html.SafeStyle||(n=goog.html.SafeStyle.create(n)),u=u+"{"+goog.html.SafeStyle.unwrap(n).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(u){for(var n={"(":")","[":"]"},A=[],w=0;w<u.length;w++){var d=u[w];if(n[d])A.push(n[d]);else if(goog.object.contains(n,d)&&A.pop()!=d)return!1}return A.length==0},goog.html.SafeStyleSheet.concat=function(u){var n="",A=function(w){Array.isArray(w)?goog.array.forEach(w,A):n+=goog.html.SafeStyleSheet.unwrap(w)};return goog.array.forEach(arguments,A),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeStyleSheet.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(u,"<"),"Forbidden '<' character in style sheet string: "+u),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(u){return u instanceof goog.html.SafeStyleSheet&&u.constructor===goog.html.SafeStyleSheet&&u.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=u,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var u=goog.labs.userAgent.util.getNavigator_();return u&&(u=u.userAgent)?u:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(u){goog.labs.userAgent.util.userAgent_=u||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(n,u)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(n,u)},goog.labs.userAgent.util.extractVersionTuples=function(u){for(var n,A=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,w=[];n=A.exec(u);)w.push([n[1],n[2],n[3]||void 0]);return w},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function u(d){return d=goog.array.find(d,w),A[d]||""}var n=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(n);n=goog.labs.userAgent.util.extractVersionTuples(n);var A={};goog.array.forEach(n,function(d){A[d[0]]=d[1]});var w=goog.partial(goog.object.containsKey,A);return goog.labs.userAgent.browser.isOpera()?u(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?u(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?u(["Edg"]):goog.labs.userAgent.browser.isChrome()?u(["Chrome","CriOS","HeadlessChrome"]):(n=n[2])&&n[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(u){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),u)},goog.labs.userAgent.browser.getIEVersion_=function(u){var n=/rv: *([\d\.]*)/.exec(u);if(n&&n[1])return n[1];n="";var A=/MSIE +([\d\.]+)/.exec(u);if(A&&A[1])if(u=/Trident\/(\d.\d)/.exec(u),A[1]=="7.0")if(u&&u[1])switch(u[1]){case"4.0":n="8.0";break;case"5.0":n="9.0";break;case"6.0":n="10.0";break;case"7.0":n="11.0"}else n="7.0";else n=A[1];return n},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(u){return goog.html.SafeHtml.unwrapTrustedHTML(u).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(u){return u instanceof goog.html.SafeHtml&&u.constructor===goog.html.SafeHtml&&u.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(u){if(u instanceof goog.html.SafeHtml)return u;var n=typeof u=="object",A=null;return n&&u.implementsGoogI18nBidiDirectionalString&&(A=u.getDirection()),u=n&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(u),A)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(u){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(u)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(u,n,A){return goog.html.SafeHtml.verifyTagName(String(u)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(u),n,A)},goog.html.SafeHtml.verifyTagName=function(u){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+u+">.":"");if(u.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+u+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(u,n,A,w){u&&goog.html.TrustedResourceUrl.unwrap(u);var d={};return d.src=u||null,d.srcdoc=n&&goog.html.SafeHtml.unwrap(n),u=goog.html.SafeHtml.combineAttributes(d,{sandbox:""},A),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,w)},goog.html.SafeHtml.createSandboxIframe=function(u,n,A,w){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var d={};return d.src=u?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)):null,d.srcdoc=n||null,d.sandbox="",u=goog.html.SafeHtml.combineAttributes(d,{},A),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,w)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(u,n){return goog.html.TrustedResourceUrl.unwrap(u),u=goog.html.SafeHtml.combineAttributes({src:u},{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",u)},goog.html.SafeHtml.createScript=function(u,n){for(var A in n){var w=A.toLowerCase();if(w=="language"||w=="src"||w=="text"||w=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+w+'" attribute':"")}for(A="",u=goog.array.concat(u),w=0;w<u.length;w++)A+=goog.html.SafeScript.unwrap(u[w]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(A,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",n,u)},goog.html.SafeHtml.createStyle=function(u,n){n=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},n);var A="";u=goog.array.concat(u);for(var w=0;w<u.length;w++)A+=goog.html.SafeStyleSheet.unwrap(u[w]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(A,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",n,u)},goog.html.SafeHtml.createMetaRefresh=function(u,n){return u=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(u,";")&&(u="'"+u.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(n||0)+"; url="+u})},goog.html.SafeHtml.getAttrNameAndValue_=function(u,n,A){if(A instanceof goog.string.Const)A=goog.string.Const.unwrap(A);else if(n.toLowerCase()=="style"){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");A=goog.html.SafeHtml.getStyleValue_(A)}else{if(/^on/i.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" requires goog.string.Const value, "'+A+'" given.':"");if(n.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(A instanceof goog.html.TrustedResourceUrl)A=goog.html.TrustedResourceUrl.unwrap(A);else if(A instanceof goog.html.SafeUrl)A=goog.html.SafeUrl.unwrap(A);else{if(typeof A!="string")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" on tag "'+u+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+A+'" given.':"");A=goog.html.SafeUrl.sanitize(A).getTypedStringValue()}}return A.implementsGoogStringTypedString&&(A=A.getTypedStringValue()),goog.asserts.assert(typeof A=="string"||typeof A=="number","String or number value expected, got "+typeof A+" with value: "+A),n+'="'+goog.string.internal.htmlEscape(String(A))+'"'},goog.html.SafeHtml.getStyleValue_=function(u){if(!goog.isObject(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof u+" given: "+u:"");return u instanceof goog.html.SafeStyle||(u=goog.html.SafeStyle.create(u)),goog.html.SafeStyle.unwrap(u)},goog.html.SafeHtml.createWithDir=function(u,n,A,w){return(n=goog.html.SafeHtml.create(n,A,w)).dir_=u,n},goog.html.SafeHtml.join=function(u,n){var A=(u=goog.html.SafeHtml.htmlEscape(u)).getDirection(),w=[],d=function(m){Array.isArray(m)?goog.array.forEach(m,d):(m=goog.html.SafeHtml.htmlEscape(m),w.push(goog.html.SafeHtml.unwrap(m)),m=m.getDirection(),A==goog.i18n.bidi.Dir.NEUTRAL?A=m:m!=goog.i18n.bidi.Dir.NEUTRAL&&A!=m&&(A=null))};return goog.array.forEach(n,d),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(w.join(goog.html.SafeHtml.unwrap(u)),A)},goog.html.SafeHtml.concat=function(u){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(u,n){var A=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return A.dir_=u,A},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(u,n){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(u,n)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u,n){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(u):u,this.dir_=n,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(u,n,A){var w=null,d="<"+u+goog.html.SafeHtml.stringifyAttributes(u,n);return A==null?A=[]:Array.isArray(A)||(A=[A]),goog.dom.tags.isVoidTag(u.toLowerCase())?(goog.asserts.assert(!A.length,"Void tag <"+u+"> does not allow content."),d+=">"):(w=goog.html.SafeHtml.concat(A),d+=">"+goog.html.SafeHtml.unwrap(w)+"</"+u+">",w=w.getDirection()),(u=n&&n.dir)&&(w=/^(ltr|rtl|auto)$/i.test(u)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d,w)},goog.html.SafeHtml.stringifyAttributes=function(u,n){var A="";if(n)for(var w in n){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(w))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+w+'".':"");var d=n[w];d!=null&&(A+=" "+goog.html.SafeHtml.getAttrNameAndValue_(u,w,d))}return A},goog.html.SafeHtml.combineAttributes=function(u,n,A){var w,d={};for(w in u)goog.asserts.assert(w.toLowerCase()==w,"Must be lower case"),d[w]=u[w];for(w in n)goog.asserts.assert(w.toLowerCase()==w,"Must be lower case"),d[w]=n[w];if(A)for(w in A){var m=w.toLowerCase();if(m in u)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+m+'" attribute, got "'+w+'" with value "'+A[w]+'"':"");m in n&&delete d[m],d[w]=A[w]}return d},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(u,n,A){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,A||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(u,n,A){u.insertAdjacentHTML(n,goog.html.SafeHtml.unwrapTrustedHTML(A))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document=="undefined")return!1;var u=document.createElement("div"),n=document.createElement("div");return n.appendChild(document.createElement("div")),u.appendChild(n),!(goog.DEBUG&&!u.firstChild)&&(n=u.firstChild.firstChild,u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!n.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(u,n){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;u.lastChild;)u.removeChild(u.lastChild);u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setInnerHtml=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var A=u.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[A])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+u.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(u,n)},goog.dom.safe.setOuterHtml=function(u,n){u.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setFormElementAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLFormElement(u).action=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setButtonFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLButtonElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setInputFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLInputElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setStyle=function(u,n){u.style.cssText=goog.html.SafeStyle.unwrap(n)},goog.dom.safe.documentWrite=function(u,n){u.write(goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.setAnchorHref=function(u,n){goog.dom.asserts.assertIsHTMLAnchorElement(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setImageSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLImageElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:image\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setAudioSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLAudioElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:audio\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setVideoSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLVideoElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:video\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setEmbedSrc=function(u,n){goog.dom.asserts.assertIsHTMLEmbedElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setFrameSrc=function(u,n){goog.dom.asserts.assertIsHTMLFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrcdoc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setLinkHrefAndRel=function(u,n,A){goog.dom.asserts.assertIsHTMLLinkElement(u),u.rel=A,goog.string.internal.caseInsensitiveContains(A,"stylesheet")?(goog.asserts.assert(n instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),u.href=goog.html.TrustedResourceUrl.unwrap(n)):u.href=n instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(n):n instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(n):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(n))},goog.dom.safe.setObjectData=function(u,n){goog.dom.asserts.assertIsHTMLObjectElement(u),u.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setScriptSrc=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setScriptContent=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.text=goog.html.SafeScript.unwrapTrustedScript(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setLocationHref=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.assignLocation=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.assign(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.replaceLocation=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.replace(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.openInWindow=function(u,n,A,w,d){return u=u instanceof goog.html.SafeUrl?u:goog.html.SafeUrl.sanitizeAssertUnchanged(u),n=n||goog.global,A=A instanceof goog.string.Const?goog.string.Const.unwrap(A):A||"",n.open(goog.html.SafeUrl.unwrap(u),A,w,d)},goog.dom.safe.parseFromStringHtml=function(u,n){return goog.dom.safe.parseFromString(u,n,"text/html")},goog.dom.safe.parseFromString=function(u,n,A){return u.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(n),A)},goog.dom.safe.createImageFromBlob=function(u){if(!/^image\/.*/g.test(u.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var n=goog.global.URL.createObjectURL(u);return(u=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(n)},goog.dom.safe.setImageSrc(u,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),n)),u},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:"\xA0"},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(u,n){for(var A=u.split("%s"),w="",d=Array.prototype.slice.call(arguments,1);d.length&&1<A.length;)w+=A.shift()+d.shift();return w+A.join("%s")},goog.string.collapseWhitespace=function(u){return u.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(u){return u.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(u){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(u))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(u){return!/[^\t\n\r ]/.test(u)},goog.string.isAlpha=function(u){return!/[^a-zA-Z]/.test(u)},goog.string.isNumeric=function(u){return!/[^0-9]/.test(u)},goog.string.isAlphaNumeric=function(u){return!/[^a-zA-Z0-9]/.test(u)},goog.string.isSpace=function(u){return u==" "},goog.string.isUnicodeChar=function(u){return u.length==1&&" "<=u&&"~">=u||"\x80"<=u&&"\uFFFD">=u},goog.string.stripNewlines=function(u){return u.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(u){return u.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(u){return u.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(u){return u.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(u){return u.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(u){return u.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(u){return u.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(u,n,A){if(u==n)return 0;if(!u)return-1;if(!n)return 1;for(var w=u.toLowerCase().match(A),d=n.toLowerCase().match(A),m=Math.min(w.length,d.length),s=0;s<m;s++){A=w[s];var E=d[s];if(A!=E)return u=parseInt(A,10),!isNaN(u)&&(n=parseInt(E,10),!isNaN(n)&&u-n)?u-n:A<E?-1:1}return w.length!=d.length?w.length-d.length:u<n?-1:1},goog.string.intAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\D+/g)},goog.string.floatAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(u){return encodeURIComponent(String(u))},goog.string.urlDecode=function(u){return decodeURIComponent(u.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(u,n){return u=goog.string.internal.htmlEscape(u,n),goog.string.DETECT_DOUBLE_ESCAPING&&(u=u.replace(goog.string.E_RE_,"&#101;")),u},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(u){return goog.string.contains(u,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(u):goog.string.unescapePureXmlEntities_(u):u},goog.string.unescapeEntitiesWithDocument=function(u,n){return goog.string.contains(u,"&")?goog.string.unescapeEntitiesUsingDom_(u,n):u},goog.string.unescapeEntitiesUsingDom_=function(u,n){var A={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},w=n?n.createElement("div"):goog.global.document.createElement("div");return u.replace(goog.string.HTML_ENTITY_PATTERN_,function(d,m){var s=A[d];return s||(m.charAt(0)=="#"&&(m=+("0"+m.substr(1)),isNaN(m)||(s=String.fromCharCode(m))),s||(goog.dom.safe.setInnerHtml(w,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),d+" ")),s=w.firstChild.nodeValue.slice(0,-1)),A[d]=s)})},goog.string.unescapePureXmlEntities_=function(u){return u.replace(/&([^;]+);/g,function(n,A){switch(A){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return A.charAt(0)!="#"||(A=+("0"+A.substr(1)),isNaN(A))?n:String.fromCharCode(A)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(u,n){return goog.string.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.preserveSpaces=function(u){return u.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(u,n){for(var A=n.length,w=0;w<A;w++){var d=A==1?n:n.charAt(w);if(u.charAt(0)==d&&u.charAt(u.length-1)==d)return u.substring(1,u.length-1)}return u},goog.string.truncate=function(u,n,A){return A&&(u=goog.string.unescapeEntities(u)),u.length>n&&(u=u.substring(0,n-3)+"..."),A&&(u=goog.string.htmlEscape(u)),u},goog.string.truncateMiddle=function(u,n,A,w){if(A&&(u=goog.string.unescapeEntities(u)),w&&u.length>n){w>n&&(w=n);var d=u.length-w;u=u.substring(0,n-w)+"..."+u.substring(d)}else u.length>n&&(w=Math.floor(n/2),d=u.length-w,u=u.substring(0,w+n%2)+"..."+u.substring(d));return A&&(u=goog.string.htmlEscape(u)),u},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(u){u=String(u);for(var n=['"'],A=0;A<u.length;A++){var w=u.charAt(A),d=w.charCodeAt(0);n[A+1]=goog.string.specialEscapeChars_[w]||(31<d&&127>d?w:goog.string.escapeChar(w))}return n.push('"'),n.join("")},goog.string.escapeString=function(u){for(var n=[],A=0;A<u.length;A++)n[A]=goog.string.escapeChar(u.charAt(A));return n.join("")},goog.string.escapeChar=function(u){if(u in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[u];if(u in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[u]=goog.string.specialEscapeChars_[u];var n=u.charCodeAt(0);if(31<n&&127>n)var A=u;else 256>n?(A="\\x",(16>n||256<n)&&(A+="0")):(A="\\u",4096>n&&(A+="0")),A+=n.toString(16).toUpperCase();return goog.string.jsEscapeCache_[u]=A},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(u,n){return u&&n?u.split(n).length-1:0},goog.string.removeAt=function(u,n,A){var w=u;return 0<=n&&n<u.length&&0<A&&(w=u.substr(0,n)+u.substr(n+A,u.length-n-A)),w},goog.string.remove=function(u,n){return u.replace(n,"")},goog.string.removeAll=function(u,n){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,"")},goog.string.replaceAll=function(u,n,A){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,A.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(u){return String(u).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(u,n){return u.repeat(n)}:function(u,n){return Array(n+1).join(u)},goog.string.padNumber=function(u,n,A){return(A=(u=A!==void 0?u.toFixed(A):String(u)).indexOf("."))==-1&&(A=u.length),goog.string.repeat("0",Math.max(0,n-A))+u},goog.string.makeSafe=function(u){return u==null?"":String(u)},goog.string.buildString=function(u){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(u){for(var n=0,A=0;A<u.length;++A)n=31*n+u.charCodeAt(A)>>>0;return n},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(u){var n=Number(u);return n==0&&goog.string.isEmptyOrWhitespace(u)?NaN:n},goog.string.isLowerCamelCase=function(u){return/^[a-z]+([A-Z][a-z]*)*$/.test(u)},goog.string.isUpperCamelCase=function(u){return/^([A-Z][a-z]*)+$/.test(u)},goog.string.toCamelCase=function(u){return String(u).replace(/\-([a-z])/g,function(n,A){return A.toUpperCase()})},goog.string.toSelectorCase=function(u){return String(u).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(u,n){return n=typeof n=="string"?goog.string.regExpEscape(n):"\\s",u.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(A,w,d){return w+d.toUpperCase()})},goog.string.capitalize=function(u){return String(u.charAt(0)).toUpperCase()+String(u.substr(1)).toLowerCase()},goog.string.parseInt=function(u){return isFinite(u)&&(u=String(u)),typeof u=="string"?/^\s*-?0x/i.test(u)?parseInt(u,16):parseInt(u,10):NaN},goog.string.splitLimit=function(u,n,A){u=u.split(n);for(var w=[];0<A&&u.length;)w.push(u.shift()),A--;return u.length&&w.push(u.join(n)),w},goog.string.lastComponent=function(u,n){if(!n)return u;typeof n=="string"&&(n=[n]);for(var A=-1,w=0;w<n.length;w++)if(n[w]!=""){var d=u.lastIndexOf(n[w]);d>A&&(A=d)}return A==-1?u:u.slice(A+1)},goog.string.editDistance=function(u,n){var A=[],w=[];if(u==n)return 0;if(!u.length||!n.length)return Math.max(u.length,n.length);for(var d=0;d<n.length+1;d++)A[d]=d;for(d=0;d<u.length;d++){w[0]=d+1;for(var m=0;m<n.length;m++)w[m+1]=Math.min(w[m]+1,A[m+1]+1,A[m]+ +(u[d]!=n[m]));for(m=0;m<A.length;m++)A[m]=w[m]}return w[n.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent();if(u){u=goog.labs.userAgent.util.extractVersionTuples(u);var n,A=goog.labs.userAgent.engine.getEngineTuple_(u);if(A)return A[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(u,"Firefox"):A[1];if((u=u[0])&&(n=u[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(u){if(!goog.labs.userAgent.engine.isEdge())return u[1];for(var n=0;n<u.length;n++){var A=u[n];if(A[0]=="Edge")return A}},goog.labs.userAgent.engine.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),u)},goog.labs.userAgent.engine.getVersionForKey_=function(u,n){return(u=goog.array.find(u,function(A){return n==A[0]}))&&u[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent(),n="";return goog.labs.userAgent.platform.isWindows()?n=(u=(n=/Windows (?:NT|Phone) ([0-9.]+)/).exec(u))?u[1]:"0.0":goog.labs.userAgent.platform.isIos()?n=(u=(n=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(u))&&u[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?n=(u=(n=/Mac OS X ([0-9_.]+)/).exec(u))?u[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?n=(u=(n=/(?:KaiOS)\/(\S+)/i).exec(u))&&u[1]:goog.labs.userAgent.platform.isAndroid()?n=(u=(n=/Android\s+([^\);]+)(\)|;)/).exec(u))&&u[1]:goog.labs.userAgent.platform.isChromeOS()&&(n=(u=(n=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(u))&&u[1]),n||""},goog.labs.userAgent.platform.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),u)},goog.reflect={},goog.reflect.object=function(u,n){return n},goog.reflect.objectProperty=function(u,n){return u},goog.reflect.sinkValue=function(u){return goog.reflect.sinkValue[" "](u),u},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(u,n){try{return goog.reflect.sinkValue(u[n]),!0}catch(A){}return!1},goog.reflect.cache=function(u,n,A,w){return w=w?w(n):n,Object.prototype.hasOwnProperty.call(u,w)?u[w]:u[w]=A(n)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var u=goog.userAgent.getNavigatorTyped();return u&&u.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var u=goog.userAgent.getNavigatorTyped();return!!u&&goog.string.contains(u.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var u="",n=goog.userAgent.getVersionRegexResult_();return n&&(u=n?n[1]:""),goog.userAgent.IE&&(n=goog.userAgent.getDocumentMode_())!=null&&n>parseFloat(u)?String(n):u},goog.userAgent.getVersionRegexResult_=function(){var u=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(u):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(u):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(u):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(u):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(u):void 0},goog.userAgent.getDocumentMode_=function(){var u=goog.global.document;return u?u.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(u,n){return goog.string.compareVersions(u,n)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(u){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,u,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,u)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(u){return Number(goog.userAgent.DOCUMENT_MODE)>=u},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var u=goog.userAgent.getDocumentMode_();return u||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(u){return goog.string.contains(goog.crypt.base64.paddingChars_,u)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(u,n){goog.asserts.assert(goog.isArrayLike(u),"encodeByteArray takes an array as a parameter"),n===void 0&&(n=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),n=goog.crypt.base64.byteToCharMaps_[n];for(var A=[],w=0;w<u.length;w+=3){var d=u[w],m=w+1<u.length,s=m?u[w+1]:0,E=w+2<u.length,H=E?u[w+2]:0,ee=d>>2;d=(3&d)<<4|s>>4,s=(15&s)<<2|H>>6,H&=63,E||(H=64,m||(s=64)),A.push(n[ee],n[d],n[s]||"",n[H]||"")}return A.join("")},goog.crypt.base64.encodeString=function(u,n){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!n?goog.global.btoa(u):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(u),n)},goog.crypt.base64.decodeString=function(u,n){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!n)return goog.global.atob(u);var A="";return goog.crypt.base64.decodeStringInternal_(u,function(w){A+=String.fromCharCode(w)}),A},goog.crypt.base64.decodeStringToByteArray=function(u,n){var A=[];return goog.crypt.base64.decodeStringInternal_(u,function(w){A.push(w)}),A},goog.crypt.base64.decodeStringToUint8Array=function(u){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var n=u.length,A=3*n/4;A%3?A=Math.floor(A):goog.crypt.base64.isPadding_(u[n-1])&&(A=goog.crypt.base64.isPadding_(u[n-2])?A-2:A-1);var w=new Uint8Array(A),d=0;return goog.crypt.base64.decodeStringInternal_(u,function(m){w[d++]=m}),w.subarray(0,d)},goog.crypt.base64.decodeStringInternal_=function(u,n){function A(H){for(;w<u.length;){var ee=u.charAt(w++),ae=goog.crypt.base64.charToByteMap_[ee];if(ae!=null)return ae;if(!goog.string.isEmptyOrWhitespace(ee))throw Error("Unknown base64 encoding at char: "+ee)}return H}goog.crypt.base64.init_();for(var w=0;;){var d=A(-1),m=A(0),s=A(64),E=A(64);if(E===64&&d===-1)break;n(d<<2|m>>4),s!=64&&(n(m<<4&240|s>>2),E!=64&&n(s<<6&192|E))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var u=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),n=["+/=","+/","-_=","-_.","-_"],A=0;5>A;A++){var w=u.concat(n[A].split(""));goog.crypt.base64.byteToCharMaps_[A]=w;for(var d=0;d<w.length;d++){var m=w[d],s=goog.crypt.base64.charToByteMap_[m];s===void 0?goog.crypt.base64.charToByteMap_[m]=d:goog.asserts.assert(s===d)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(u){var n=u>>>0;u=Math.floor((u-n)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=n,jspb.utils.split64High=u},jspb.utils.splitInt64=function(u){var n=0>u,A=(u=Math.abs(u))>>>0;u=Math.floor((u-A)/jspb.BinaryConstants.TWO_TO_32),u>>>=0,n&&(u=~u>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++u&&(u=0))),jspb.utils.split64Low=A,jspb.utils.split64High=u},jspb.utils.splitZigzag64=function(u){var n=0>u;u=2*Math.abs(u),jspb.utils.splitUint64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;n&&(u==0?A==0?A=u=4294967295:(A--,u=4294967295):u--),jspb.utils.split64Low=u,jspb.utils.split64High=A},jspb.utils.splitFloat32=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)0<1/u?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(u))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(u>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|2139095040)>>>0;else if(u<jspb.BinaryConstants.FLOAT32_MIN)u=Math.round(u/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|u)>>>0;else{var A=Math.floor(Math.log(u)/Math.LN2);u*=Math.pow(2,-A),16777216<=(u=Math.round(u*jspb.BinaryConstants.TWO_TO_23))&&++A,jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|A+127<<23|8388607&u)>>>0}},jspb.utils.splitFloat64=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)jspb.utils.split64High=0<1/u?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(u))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(u>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(n<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(u<jspb.BinaryConstants.FLOAT64_MIN){var A=u/Math.pow(2,-1074);u=A/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(n<<31|u)>>>0,jspb.utils.split64Low=A>>>0}else{var w=0;if(2<=(A=u))for(;2<=A&&1023>w;)w++,A/=2;else for(;1>A&&-1022<w;)A*=2,w--;u=(A=u*Math.pow(2,-w))*jspb.BinaryConstants.TWO_TO_20&1048575,A=A*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(n<<31|w+1023<<20|u)>>>0,jspb.utils.split64Low=A}},jspb.utils.splitHash64=function(u){var n=u.charCodeAt(0),A=u.charCodeAt(1),w=u.charCodeAt(2),d=u.charCodeAt(3),m=u.charCodeAt(4),s=u.charCodeAt(5),E=u.charCodeAt(6);u=u.charCodeAt(7),jspb.utils.split64Low=n+(A<<8)+(w<<16)+(d<<24)>>>0,jspb.utils.split64High=m+(s<<8)+(E<<16)+(u<<24)>>>0},jspb.utils.joinUint64=function(u,n){return n*jspb.BinaryConstants.TWO_TO_32+(u>>>0)},jspb.utils.joinInt64=function(u,n){var A=2147483648&n;return A&&(n=~n>>>0,(u=1+~u>>>0)==0&&(n=n+1>>>0)),u=jspb.utils.joinUint64(u,n),A?-u:u},jspb.utils.toZigzag64=function(u,n,A){var w=n>>31;return A(u<<1^w,(n<<1|u>>>31)^w)},jspb.utils.joinZigzag64=function(u,n){return jspb.utils.fromZigzag64(u,n,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(u,n,A){var w=-(1&u);return A((u>>>1|n<<31)^w,n>>>1^w)},jspb.utils.joinFloat32=function(u,n){n=2*(u>>31)+1;var A=u>>>23&255;return u&=8388607,A==255?u?NaN:1/0*n:A==0?n*Math.pow(2,-149)*u:n*Math.pow(2,A-150)*(u+Math.pow(2,23))},jspb.utils.joinFloat64=function(u,n){var A=2*(n>>31)+1,w=n>>>20&2047;return u=jspb.BinaryConstants.TWO_TO_32*(1048575&n)+u,w==2047?u?NaN:1/0*A:w==0?A*Math.pow(2,-1074)*u:A*Math.pow(2,w-1075)*(u+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(u,n){return String.fromCharCode(u>>>0&255,u>>>8&255,u>>>16&255,u>>>24&255,n>>>0&255,n>>>8&255,n>>>16&255,n>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(u,n){function A(d,m){return d=d?String(d):"",m?"0000000".slice(d.length)+d:d}if(2097151>=n)return""+jspb.utils.joinUint64(u,n);var w=(u>>>24|n<<8)>>>0&16777215;return u=(16777215&u)+6777216*w+6710656*(n=n>>16&65535),w+=8147497*n,n*=2,1e7<=u&&(w+=Math.floor(u/1e7),u%=1e7),1e7<=w&&(n+=Math.floor(w/1e7),w%=1e7),A(n,0)+A(w,n)+A(u,1)},jspb.utils.joinSignedDecimalString=function(u,n){var A=2147483648&n;return A&&(n=~n+((u=1+~u>>>0)==0?1:0)>>>0),u=jspb.utils.joinUnsignedDecimalString(u,n),A?"-"+u:u},jspb.utils.hash64ToDecimalString=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;return n?jspb.utils.joinSignedDecimalString(u,A):jspb.utils.joinUnsignedDecimalString(u,A)},jspb.utils.hash64ArrayToDecimalStrings=function(u,n){for(var A=Array(u.length),w=0;w<u.length;w++)A[w]=jspb.utils.hash64ToDecimalString(u[w],n);return A},jspb.utils.decimalStringToHash64=function(u){function n(m,s){for(var E=0;8>E&&(m!==1||0<s);E++)s=m*w[E]+s,w[E]=255&s,s>>>=8}jspb.asserts.assert(0<u.length);var A=!1;u[0]==="-"&&(A=!0,u=u.slice(1));for(var w=[0,0,0,0,0,0,0,0],d=0;d<u.length;d++)n(10,u.charCodeAt(d)-jspb.utils.ZERO_CHAR_CODE_);return A&&(function(){for(var m=0;8>m;m++)w[m]=255&~w[m]}(),n(1,1)),goog.crypt.byteArrayToString(w)},jspb.utils.splitDecimalString=function(u){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u))},jspb.utils.toHexDigit_=function(u){return String.fromCharCode(10>u?jspb.utils.ZERO_CHAR_CODE_+u:jspb.utils.A_CHAR_CODE_-10+u)},jspb.utils.fromHexCharCode_=function(u){return u>=jspb.utils.A_CHAR_CODE_?u-jspb.utils.A_CHAR_CODE_+10:u-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(u){var n=Array(18);n[0]="0",n[1]="x";for(var A=0;8>A;A++){var w=u.charCodeAt(7-A);n[2*A+2]=jspb.utils.toHexDigit_(w>>4),n[2*A+3]=jspb.utils.toHexDigit_(15&w)}return n.join("")},jspb.utils.hexStringToHash64=function(u){u=u.toLowerCase(),jspb.asserts.assert(u.length==18),jspb.asserts.assert(u[0]=="0"),jspb.asserts.assert(u[1]=="x");for(var n="",A=0;8>A;A++){var w=jspb.utils.fromHexCharCode_(u.charCodeAt(2*A+2)),d=jspb.utils.fromHexCharCode_(u.charCodeAt(2*A+3));n=String.fromCharCode(16*w+d)+n}return n},jspb.utils.hash64ToNumber=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;return n?jspb.utils.joinInt64(u,A):jspb.utils.joinUint64(u,A)},jspb.utils.numberToHash64=function(u){return jspb.utils.splitInt64(u),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(u,n,A){for(var w=0,d=n;d<A;d++)w+=u[d]>>7;return A-n-w},jspb.utils.countVarintFields=function(u,n,A,w){var d=0;if(128>(w=8*w+jspb.BinaryConstants.WireType.VARINT))for(;n<A&&u[n++]==w;)for(d++;;){var m=u[n++];if(!(128&m))break}else for(;n<A;){for(m=w;128<m;){if(u[n]!=(127&m|128))return d;n++,m>>=7}if(u[n++]!=m)break;for(d++;128&(m=u[n++]););}return d},jspb.utils.countFixedFields_=function(u,n,A,w,d){var m=0;if(128>w)for(;n<A&&u[n++]==w;)m++,n+=d;else for(;n<A;){for(var s=w;128<s;){if(u[n++]!=(127&s|128))return m;s>>=7}if(u[n++]!=s)break;m++,n+=d}return m},jspb.utils.countFixed32Fields=function(u,n,A,w){return jspb.utils.countFixedFields_(u,n,A,8*w+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(u,n,A,w){return jspb.utils.countFixedFields_(u,n,A,8*w+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(u,n,A,w){var d=0;for(w=8*w+jspb.BinaryConstants.WireType.DELIMITED;n<A;){for(var m=w;128<m;){if(u[n++]!=(127&m|128))return d;m>>=7}if(u[n++]!=m)break;d++;for(var s=0,E=1;s+=(127&(m=u[n++]))*E,E*=128,(128&m)!=0;);n+=s}return d},jspb.utils.debugBytesToTextFormat=function(u){var n='"';if(u){u=jspb.utils.byteSourceToUint8Array(u);for(var A=0;A<u.length;A++)n+="\\x",16>u[A]&&(n+="0"),n+=u[A].toString(16)}return n+'"'},jspb.utils.debugScalarToTextFormat=function(u){return typeof u=="string"?goog.string.quote(u):u.toString()},jspb.utils.stringToByteArray=function(u){for(var n=new Uint8Array(u.length),A=0;A<u.length;A++){var w=u.charCodeAt(A);if(255<w)throw Error("Conversion error: string contains codepoint outside of byte range");n[A]=w}return n},jspb.utils.byteSourceToUint8Array=function(u){return u.constructor===Uint8Array?u:u.constructor===ArrayBuffer||u.constructor===Array?new Uint8Array(u):u.constructor===String?goog.crypt.base64.decodeStringToUint8Array(u):u instanceof Uint8Array?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(u,n,A){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,u&&this.setBlock(u,n,A)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(u,n,A){if(jspb.BinaryDecoder.instanceCache_.length){var w=jspb.BinaryDecoder.instanceCache_.pop();return u&&w.setBlock(u,n,A),w}return new jspb.BinaryDecoder(u,n,A)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(u,n,A){this.bytes_=jspb.utils.byteSourceToUint8Array(u),this.start_=n!==void 0?n:0,this.end_=A!==void 0?this.start_+A:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(u){this.end_=u},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(u){this.cursor_=u},jspb.BinaryDecoder.prototype.advance=function(u){this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(u){for(var n=128,A=0,w=0,d=0;4>d&&128<=n;d++)A|=(127&(n=this.bytes_[this.cursor_++]))<<7*d;if(128<=n&&(A|=(127&(n=this.bytes_[this.cursor_++]))<<28,w|=(127&n)>>4),128<=n)for(d=0;5>d&&128<=n;d++)w|=(127&(n=this.bytes_[this.cursor_++]))<<7*d+3;if(128>n)return u(A>>>0,w>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(u){return this.readSplitVarint64(function(n,A){return jspb.utils.fromZigzag64(n,A,u)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(u){var n=this.bytes_,A=this.cursor_;this.cursor_+=8;for(var w=0,d=0,m=A+7;m>=A;m--)w=w<<8|n[m],d=d<<8|n[m+4];return u(w,d)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(u){for(;128<u;)this.cursor_--,u>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var u=this.bytes_,n=u[this.cursor_+0],A=127&n;return 128>n?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+1]))<<7,128>n?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+2]))<<14,128>n?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+3]))<<21,128>n?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(15&(n=u[this.cursor_+4]))<<28,128>n?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),A>>>0):(this.cursor_+=5,128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),A)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var u=this.readUnsignedVarint32();return u>>>1^-(1&u)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u},jspb.BinaryDecoder.prototype.readUint16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],A=this.bytes_[this.cursor_+2],w=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8|A<<16|w<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUint64(u,n)},jspb.BinaryDecoder.prototype.readUint64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUnsignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readInt8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],A=this.bytes_[this.cursor_+2],w=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8|A<<16|w<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinInt64(u,n)},jspb.BinaryDecoder.prototype.readInt64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinSignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readFloat=function(){var u=this.readUint32();return jspb.utils.joinFloat32(u,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinFloat64(u,n)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(u){var n=this.bytes_,A=this.cursor_;u=A+u;for(var w=[],d="";A<u;){var m=n[A++];if(128>m)w.push(m);else{if(192>m)continue;if(224>m){var s=n[A++];w.push((31&m)<<6|63&s)}else if(240>m){s=n[A++];var E=n[A++];w.push((15&m)<<12|(63&s)<<6|63&E)}else 248>m&&(m=(7&m)<<18|(63&(s=n[A++]))<<12|(63&(E=n[A++]))<<6|63&n[A++],m-=65536,w.push(55296+(m>>10&1023),56320+(1023&m)))}8192<=w.length&&(d+=String.fromCharCode.apply(null,w),w.length=0)}return d+=goog.crypt.byteArrayToString(w),this.cursor_=A,d},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var u=this.readUnsignedVarint32();return this.readString(u)},jspb.BinaryDecoder.prototype.readBytes=function(u){if(0>u||this.cursor_+u>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var n=this.bytes_.subarray(this.cursor_,this.cursor_+u);return this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_),n},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var u=this.bytes_,n=this.cursor_,A=u[n+0],w=u[n+1],d=u[n+2],m=u[n+3],s=u[n+4],E=u[n+5],H=u[n+6];return u=u[n+7],this.cursor_+=8,String.fromCharCode(A,w,d,m,s,E,H,u)},jspb.BinaryReader=function(u,n,A){this.decoder_=jspb.BinaryDecoder.alloc(u,n,A),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(u,n,A){if(jspb.BinaryReader.instanceCache_.length){var w=jspb.BinaryReader.instanceCache_.pop();return u&&w.decoder_.setBlock(u,n,A),w}return new jspb.BinaryReader(u,n,A)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(u,n,A){this.decoder_.setBlock(u,n,A),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(u){this.decoder_.advance(u)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var u=this.decoder_.readUnsignedVarint32(),n=u>>>3;return(u&=7)!=jspb.BinaryConstants.WireType.VARINT&&u!=jspb.BinaryConstants.WireType.FIXED32&&u!=jspb.BinaryConstants.WireType.FIXED64&&u!=jspb.BinaryConstants.WireType.DELIMITED&&u!=jspb.BinaryConstants.WireType.START_GROUP&&u!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",u,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=n,this.nextWireType_=u,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var u=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==u;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var u=this.decoder_.readUnsignedVarint32();this.decoder_.advance(u)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var u=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=u&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(u,n){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[u]),this.readCallbacks_[u]=n},jspb.BinaryReader.prototype.runReadCallback=function(u){return jspb.asserts.assert(this.readCallbacks_!==null),u=this.readCallbacks_[u],jspb.asserts.assert(u),u(this)},jspb.BinaryReader.prototype.readAny=function(u){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(u);var n=jspb.BinaryConstants.FieldType;switch(u){case n.DOUBLE:return this.readDouble();case n.FLOAT:return this.readFloat();case n.INT64:return this.readInt64();case n.UINT64:return this.readUint64();case n.INT32:return this.readInt32();case n.FIXED64:return this.readFixed64();case n.FIXED32:return this.readFixed32();case n.BOOL:return this.readBool();case n.STRING:return this.readString();case n.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case n.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case n.BYTES:return this.readBytes();case n.UINT32:return this.readUint32();case n.ENUM:return this.readEnum();case n.SFIXED32:return this.readSfixed32();case n.SFIXED64:return this.readSfixed64();case n.SINT32:return this.readSint32();case n.SINT64:return this.readSint64();case n.FHASH64:return this.readFixedHash64();case n.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(u,n){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var A=this.decoder_.getEnd(),w=this.decoder_.readUnsignedVarint32();w=this.decoder_.getCursor()+w,this.decoder_.setEnd(w),n(u,this),this.decoder_.setCursor(w),this.decoder_.setEnd(A)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(u,n,A){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==u),A(n,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32(),n=this.decoder_.getCursor(),A=n+u;return u=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),n,u),this.decoder_.setCursor(A),u},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(u)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(n,A){return jspb.utils.fromZigzag64(n,A,u)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(u)},jspb.BinaryReader.prototype.readPackedField_=function(u){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n;for(var A=[];this.decoder_.getCursor()<n;)A.push(u.call(this.decoder_));return A},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var u=this.buffer_;return this.buffer_=[],u},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(u,n){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32);0<n||127<u;)this.buffer_.push(127&u|128),u=(u>>>7|n<<25)>>>0,n>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(u,n){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(u),this.writeUint32(n)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(u){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32);127<u;)this.buffer_.push(127&u|128),u>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(u){if(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),0<=u)this.writeUnsignedVarint32(u);else{for(var n=0;9>n;n++)this.buffer_.push(127&u|128),u>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((u<<1^u>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(u){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(u))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(u){var n=this;jspb.utils.splitHash64(u),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(A,w){n.writeSplitVarint64(A>>>0,w>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&256>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&65536>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-128<=u&&128>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-32768<=u&&32768>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(+u>=-jspb.BinaryConstants.TWO_TO_63&&+u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT32_MAX&&u<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(u),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT64_MAX&&u<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(u){jspb.asserts.assert(typeof u=="boolean"||typeof u=="number"),this.buffer_.push(u?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(u)},jspb.BinaryEncoder.prototype.writeBytes=function(u){this.buffer_.push.apply(this.buffer_,u)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(u){jspb.utils.splitHash64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(u){jspb.utils.splitHash64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(u){var n=this.buffer_.length;jspb.asserts.assertString(u);for(var A=0;A<u.length;A++){var w=u.charCodeAt(A);if(128>w)this.buffer_.push(w);else if(2048>w)this.buffer_.push(w>>6|192),this.buffer_.push(63&w|128);else if(65536>w)if(55296<=w&&56319>=w&&A+1<u.length){var d=u.charCodeAt(A+1);56320<=d&&57343>=d&&(w=1024*(w-55296)+d-56320+65536,this.buffer_.push(w>>18|240),this.buffer_.push(w>>12&63|128),this.buffer_.push(w>>6&63|128),this.buffer_.push(63&w|128),A++)}else this.buffer_.push(w>>12|224),this.buffer_.push(w>>6&63|128),this.buffer_.push(63&w|128)}return this.buffer_.length-n},jspb.arith={},jspb.arith.UInt64=function(u,n){this.lo=u,this.hi=n},jspb.arith.UInt64.prototype.cmp=function(u){return this.hi<u.hi||this.hi==u.hi&&this.lo<u.lo?-1:this.hi==u.hi&&this.lo==u.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(u){return new jspb.arith.UInt64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(u){return new jspb.arith.UInt64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(u,n){var A=65535&u,w=65535&n,d=n>>>16;for(n=A*w+65536*(A*d&65535)+65536*((u>>>=16)*w&65535),A=u*d+(A*d>>>16)+(u*w>>>16);4294967296<=n;)n-=4294967296,A+=1;return new jspb.arith.UInt64(n>>>0,A>>>0)},jspb.arith.UInt64.prototype.mul=function(u){var n=jspb.arith.UInt64.mul32x32(this.lo,u);return(u=jspb.arith.UInt64.mul32x32(this.hi,u)).hi=u.lo,u.lo=0,n.add(u)},jspb.arith.UInt64.prototype.div=function(u){if(u==0)return[];var n=new jspb.arith.UInt64(0,0),A=new jspb.arith.UInt64(this.lo,this.hi);u=new jspb.arith.UInt64(u,0);for(var w=new jspb.arith.UInt64(1,0);!u.msb();)u=u.leftShift(),w=w.leftShift();for(;!w.zero();)0>=u.cmp(A)&&(n=n.add(w),A=A.sub(u)),u=u.rightShift(),w=w.rightShift();return[n,A]},jspb.arith.UInt64.prototype.toString=function(){for(var u="",n=this;!n.zero();){var A=(n=n.div(10))[0];u=n[1].lo+u,n=A}return u==""&&(u="0"),u},jspb.arith.UInt64.fromString=function(u){for(var n=new jspb.arith.UInt64(0,0),A=new jspb.arith.UInt64(0,0),w=0;w<u.length;w++){if("0">u[w]||"9"<u[w])return null;var d=parseInt(u[w],10);A.lo=d,n=n.mul(10).add(A)}return n},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(u,n){this.lo=u,this.hi=n},jspb.arith.Int64.prototype.add=function(u){return new jspb.arith.Int64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(u){return new jspb.arith.Int64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var u=(2147483648&this.hi)!=0,n=new jspb.arith.UInt64(this.lo,this.hi);return u&&(n=new jspb.arith.UInt64(0,0).sub(n)),(u?"-":"")+n.toString()},jspb.arith.Int64.fromString=function(u){var n=0<u.length&&u[0]=="-";return n&&(u=u.substring(1)),(u=jspb.arith.UInt64.fromString(u))===null?null:(n&&(u=new jspb.arith.UInt64(0,0).sub(u)),new jspb.arith.Int64(u.lo,u.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(u){var n=this.encoder_.end();this.blocks_.push(n),this.blocks_.push(u),this.totalLength_+=n.length+u.length},jspb.BinaryWriter.prototype.beginDelimited_=function(u){return this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),u=this.encoder_.end(),this.blocks_.push(u),this.totalLength_+=u.length,u.push(this.totalLength_),u},jspb.BinaryWriter.prototype.endDelimited_=function(u){var n=u.pop();for(n=this.totalLength_+this.encoder_.length()-n,jspb.asserts.assert(0<=n);127<n;)u.push(127&n|128),n>>>=7,this.totalLength_++;u.push(n),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(u,n,A){this.appendUint8Array_(u.subarray(n,A))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(u,n,A){u!=null&&n!=null&&A!=null&&this.writeSerializedMessage(u,n,A)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var u=new Uint8Array(this.totalLength_+this.encoder_.length()),n=this.blocks_,A=n.length,w=0,d=0;d<A;d++){var m=n[d];u.set(m,w),w+=m.length}return n=this.encoder_.end(),u.set(n,w),w+=n.length,jspb.asserts.assert(w==u.length),this.blocks_=[u],u},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(u){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),u)},jspb.BinaryWriter.prototype.beginSubMessage=function(u){this.bookmarks_.push(this.beginDelimited_(u))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(u,n){jspb.asserts.assert(1<=u&&u==Math.floor(u)),this.encoder_.writeUnsignedVarint32(8*u+n)},jspb.BinaryWriter.prototype.writeAny=function(u,n,A){var w=jspb.BinaryConstants.FieldType;switch(u){case w.DOUBLE:this.writeDouble(n,A);break;case w.FLOAT:this.writeFloat(n,A);break;case w.INT64:this.writeInt64(n,A);break;case w.UINT64:this.writeUint64(n,A);break;case w.INT32:this.writeInt32(n,A);break;case w.FIXED64:this.writeFixed64(n,A);break;case w.FIXED32:this.writeFixed32(n,A);break;case w.BOOL:this.writeBool(n,A);break;case w.STRING:this.writeString(n,A);break;case w.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case w.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case w.BYTES:this.writeBytes(n,A);break;case w.UINT32:this.writeUint32(n,A);break;case w.ENUM:this.writeEnum(n,A);break;case w.SFIXED32:this.writeSfixed32(n,A);break;case w.SFIXED64:this.writeSfixed64(n,A);break;case w.SINT32:this.writeSint32(n,A);break;case w.SINT64:this.writeSint64(n,A);break;case w.FHASH64:this.writeFixedHash64(n,A);break;case w.VHASH64:this.writeVarintHash64(n,A);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(n))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(n))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(n))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(n))},jspb.BinaryWriter.prototype.writeInt32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeInt64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeUint32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeUint64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSint32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(u,n){n!=null&&this.writeZigzagVarintHash64_(u,n)},jspb.BinaryWriter.prototype.writeSint64String=function(u,n){n!=null&&this.writeZigzagVarint64String_(u,n)},jspb.BinaryWriter.prototype.writeFixed32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeFloat=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(u,n){n!=null&&(jspb.asserts.assert(typeof n=="boolean"||typeof n=="number"),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(u,n){n!=null&&(u=this.beginDelimited_(u),this.encoder_.writeString(n),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(u,n){n!=null&&(n=jspb.utils.byteSourceToUint8Array(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),this.appendUint8Array_(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(u,n,A){n!=null&&(u=this.beginDelimited_(u),A(n,this),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(u,n,A){n!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(u),u=this.beginDelimited_(3),A(n,this),this.endDelimited_(u),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(u,n,A){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),A(n,this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(n))},jspb.BinaryWriter.prototype.writeVarintHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(n))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n,A)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n,A)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT);var w=this.encoder_;jspb.utils.toZigzag64(n,A,function(d,m){w.writeSplitVarint64(d>>>0,m>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSignedVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeInt32String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSignedVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(u,n,A,w){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitFixed64(u,A(n[d]),w(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(u,n,A,w){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitVarint64(u,A(n[d]),w(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(u,n,A,w){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitZigzagVarint64(u,A(n[d]),w(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeInt64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUnsignedVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUint32String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUnsignedVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUint64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint64String_(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarintHash64_(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed32(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed64(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed64String(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed32(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed64(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFloat(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeDouble(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeBool(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeEnum(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeString(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeBytes(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(u,n,A){if(n!=null)for(var w=0;w<n.length;w++){var d=this.beginDelimited_(u);A(n[w],this),this.endDelimited_(d)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(u,n,A){if(n!=null)for(var w=0;w<n.length;w++)this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),A(n[w],this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixedHash64(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeVarintHash64(u,n[A])},jspb.BinaryWriter.prototype.writePackedInt32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint32(parseInt(n[A],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(u,n,A,w){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitFixed64(A(n[d]),w(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(u,n,A,w){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitVarint64(A(n[d]),w(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(u,n,A,w){if(n!=null){u=this.beginDelimited_(u);for(var d=this.encoder_,m=0;m<n.length;m++)jspb.utils.toZigzag64(A(n[m]),w(n[m]),function(s,E){d.writeSplitVarint64(s>>>0,E>>>0)});this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++){var w=jspb.arith.Int64.fromString(n[A]);this.encoder_.writeSplitVarint64(w.lo,w.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint32(parseInt(n[A],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++){var w=jspb.arith.UInt64.fromString(n[A]);this.encoder_.writeSplitVarint64(w.lo,w.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(n[A]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarintHash64(n[A]);this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeUint32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeUint64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++){var A=jspb.arith.UInt64.fromString(n[u]);this.encoder_.writeSplitFixed64(A.lo,A.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeInt32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64String(n[u])},jspb.BinaryWriter.prototype.writePackedFloat=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeFloat(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeDouble(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),u=0;u<n.length;u++)this.encoder_.writeBool(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeEnum(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeFixedHash64(n[u])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeVarintHash64(n[A]);this.endDelimited_(u)}},jspb.Map=function(u,n){this.arr_=u,this.valueCtor_=n,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var u=0;u<this.arr_.length;u++){var n=this.arr_[u],A=n[0];this.map_[A.toString()]=new jspb.Map.Entry_(A,n[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var u,n=this.map_;for(u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var A=n[u].valueWrapper;A&&A.toArray()}}}else{for(this.arr_.length=0,(n=this.stringKeys_()).sort(),u=0;u<n.length;u++){var w=this.map_[n[u]];(A=w.valueWrapper)&&A.toArray(),this.arr_.push([w.key,w.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(u,n){for(var A=this.toArray(),w=[],d=0;d<A.length;d++){var m=this.map_[A[d][0].toString()];this.wrapEntry_(m);var s=m.valueWrapper;s?(jspb.asserts.assert(n),w.push([m.key,n(u,s)])):w.push([m.key,m.value])}return w},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(u,n,A){n=new jspb.Map([],n);for(var w=0;w<u.length;w++){var d=u[w][0],m=A(u[w][1]);n.set(d,m)}return n},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(u){this.idx_=0,this.arr_=u},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol!="undefined"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(u){u=u.toString();var n=this.map_.hasOwnProperty(u);return delete this.map_[u],this.arrClean=!1,n},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++){var w=this.map_[n[A]];u.push([w.key,w.value])}return u},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++){var w=this.map_[n[A]];u.push([w.key,this.wrapEntry_(w)])}return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++)u.push(this.map_[n[A]].key);return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++)u.push(this.wrapEntry_(this.map_[n[A]]));return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(u,n){var A=this.stringKeys_();A.sort();for(var w=0;w<A.length;w++){var d=this.map_[A[w]];u.call(n,this.wrapEntry_(d),d.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(u,n){var A=new jspb.Map.Entry_(u);return this.valueCtor_?(A.valueWrapper=n,A.value=n.toArray()):A.value=n,this.map_[u.toString()]=A,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(u){return this.valueCtor_?(u.valueWrapper||(u.valueWrapper=new this.valueCtor_(u.value)),u.valueWrapper):u.value},jspb.Map.prototype.get=function(u){if(u=this.map_[u.toString()])return this.wrapEntry_(u)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(u){return u.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(u,n,A,w,d){var m=this.stringKeys_();m.sort();for(var s=0;s<m.length;s++){var E=this.map_[m[s]];n.beginSubMessage(u),A.call(n,1,E.key),this.valueCtor_?w.call(n,2,this.wrapEntry_(E),d):w.call(n,2,E.value),n.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(u,n,A,w,d,m,s){for(;n.nextField()&&!n.isEndGroup();){var E=n.getFieldNumber();E==1?m=A.call(n):E==2&&(u.valueCtor_?(jspb.asserts.assert(d),s||(s=new u.valueCtor_),w.call(n,s,d)):s=w.call(n))}jspb.asserts.assert(m!=null),jspb.asserts.assert(s!=null),u.set(m,s)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var u,n=this.map_,A=[];for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&A.push(u);return A},jspb.Map.Entry_=function(u,n){this.key=u,this.value=n,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(u,n,A,w,d){this.fieldIndex=u,this.fieldName=n,this.ctor=A,this.toObjectFn=w,this.isRepeated=d},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(u,n,A,w,d,m){this.fieldInfo=u,this.binaryReaderFn=n,this.binaryWriterFn=A,this.binaryMessageSerializeFn=w,this.binaryMessageDeserializeFn=d,this.isPacked=m},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(u,n){return n+u.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(u,n){return n-u.arrayIndexOffset_},jspb.Message.initialize=function(u,n,A,w,d,m){if(u.wrappers_=null,n||(n=A?[A]:[]),u.messageId_=A?String(A):void 0,u.arrayIndexOffset_=A===0?-1:0,u.array=n,jspb.Message.initPivotAndExtensionObject_(u,w),u.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(u.repeatedFields=d),d)for(n=0;n<d.length;n++)(A=d[n])<u.pivot_?(A=jspb.Message.getIndex_(u,A),u.array[A]=u.array[A]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[A]=u.extensionObject_[A]||jspb.Message.EMPTY_LIST_SENTINEL_);if(m&&m.length)for(n=0;n<m.length;n++)jspb.Message.computeOneofCase(u,m[n])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(u){return jspb.Message.ASSUME_LOCAL_ARRAYS?u instanceof Array:Array.isArray(u)},jspb.Message.isExtensionObject_=function(u){return!(u===null||typeof u!="object"||jspb.Message.isArray_(u)||jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(u,n){var A=u.array.length,w=-1;if(A&&(w=A-1,A=u.array[w],jspb.Message.isExtensionObject_(A)))return u.pivot_=jspb.Message.getFieldNumber_(u,w),void(u.extensionObject_=A);-1<n?(u.pivot_=Math.max(n,jspb.Message.getFieldNumber_(u,w+1)),u.extensionObject_=null):u.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(u){var n=jspb.Message.getIndex_(u,u.pivot_);u.array[n]||(u.extensionObject_=u.array[n]={})},jspb.Message.toObjectList=function(u,n,A){for(var w=[],d=0;d<u.length;d++)w[d]=n.call(u[d],A,u[d]);return w},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(u,n,A,w,d){for(var m in A){var s=A[m],E=w.call(u,s);if(E!=null){for(var H in s.fieldName)if(s.fieldName.hasOwnProperty(H))break;n[H]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(E,s.toObjectFn,d):s.toObjectFn(d,E):E}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(u,n,A,w){for(var d in A){var m=A[d],s=m.fieldInfo;if(!m.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var E=w.call(u,s);if(E!=null)if(s.isMessageType()){if(!m.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");m.binaryWriterFn.call(n,s.fieldIndex,E,m.binaryMessageSerializeFn)}else m.binaryWriterFn.call(n,s.fieldIndex,E)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(u,n,A,w,d){var m=A[n.getFieldNumber()];if(m){if(A=m.fieldInfo,!m.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(A.isMessageType()){var s=new A.ctor;m.binaryReaderFn.call(n,s,m.binaryMessageDeserializeFn)}else s=m.binaryReaderFn.call(n);A.isRepeated&&!m.isPacked?(n=w.call(u,A))?n.push(s):d.call(u,A,[s]):d.call(u,A,s)}else n.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(u,n){if(n<u.pivot_){n=jspb.Message.getIndex_(u,n);var A=u.array[n];return A===jspb.Message.EMPTY_LIST_SENTINEL_?u.array[n]=[]:A}if(u.extensionObject_)return(A=u.extensionObject_[n])===jspb.Message.EMPTY_LIST_SENTINEL_?u.extensionObject_[n]=[]:A},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(u,n){return jspb.Message.getField(u,n)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:+u},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:!!u},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(u,n){var A=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var w=0;w<A.length;w++)A[w]=+A[w];u.convertedPrimitiveFields_[n]=!0}return A},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(u,n){var A=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var w=0;w<A.length;w++)A[w]=!!A[w];u.convertedPrimitiveFields_[n]=!0}return A},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(u){return u==null||typeof u=="string"?u:jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array?goog.crypt.base64.encodeByteArray(u):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(u){return u==null||u instanceof Uint8Array?u:typeof u=="string"?goog.crypt.base64.decodeStringToUint8Array(u):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(u){return jspb.Message.assertConsistentTypes_(u),u.length&&typeof u[0]!="string"?goog.array.map(u,jspb.Message.bytesAsB64):u},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(u){return jspb.Message.assertConsistentTypes_(u),!u.length||u[0]instanceof Uint8Array?u:goog.array.map(u,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(u){if(goog.DEBUG&&u&&1<u.length){var n=goog.typeOf(u[0]);goog.array.forEach(u,function(A){goog.typeOf(A)!=n&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(A)+" expected "+n)})}},jspb.Message.getFieldWithDefault=function(u,n,A){return(u=jspb.Message.getField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(u,n,A){return(u=jspb.Message.getBooleanField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(u,n,A){return(u=jspb.Message.getOptionalFloatingPointField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(u,n,A,w){if(u.wrappers_||(u.wrappers_={}),n in u.wrappers_)return u.wrappers_[n];var d=jspb.Message.getField(u,n);if(!d){if(A)return;d=[],jspb.Message.setField(u,n,d)}return u.wrappers_[n]=new jspb.Map(d,w)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(u,n,A){return jspb.asserts.assertInstanceof(u,jspb.Message),n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=A:(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[n]=A),u},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(u,n,A,w){return jspb.asserts.assertInstanceof(u,jspb.Message),A!==w?jspb.Message.setField(u,n,A):n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(u),delete u.extensionObject_[n]),u},jspb.Message.addToRepeatedField=function(u,n,A,w){return jspb.asserts.assertInstanceof(u,jspb.Message),n=jspb.Message.getRepeatedField(u,n),w!=null?n.splice(w,0,A):n.push(A),u},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(u,n,A,w){return jspb.asserts.assertInstanceof(u,jspb.Message),(A=jspb.Message.computeOneofCase(u,A))&&A!==n&&w!==void 0&&(u.wrappers_&&A in u.wrappers_&&(u.wrappers_[A]=void 0),jspb.Message.setField(u,A,void 0)),jspb.Message.setField(u,n,w)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(u,n){for(var A,w,d=0;d<n.length;d++){var m=n[d],s=jspb.Message.getField(u,m);s!=null&&(A=m,w=s,jspb.Message.setField(u,m,void 0))}return A?(jspb.Message.setField(u,A,w),A):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(u,n,A,w){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[A]){var d=jspb.Message.getField(u,A);(w||d)&&(u.wrappers_[A]=new n(d))}return u.wrappers_[A]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(u,n,A){return jspb.Message.wrapRepeatedField_(u,n,A),(n=u.wrappers_[A])==jspb.Message.EMPTY_LIST_SENTINEL_&&(n=u.wrappers_[A]=[]),n},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(u,n,A){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[A]){for(var w=jspb.Message.getRepeatedField(u,A),d=[],m=0;m<w.length;m++)d[m]=new n(w[m]);u.wrappers_[A]=d}},jspb.Message.setWrapperField=function(u,n,A){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var w=A&&A.toArray();return u.wrappers_[n]=A,jspb.Message.setField(u,n,w)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(u,n,A,w){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var d=w&&w.toArray();return u.wrappers_[n]=w,jspb.Message.setOneofField(u,n,A,d)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(u,n,A){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={}),A=A||[];for(var w=[],d=0;d<A.length;d++)w[d]=A[d].toArray();return u.wrappers_[n]=A,jspb.Message.setField(u,n,w)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(u,n,A,w,d){jspb.Message.wrapRepeatedField_(u,w,n);var m=u.wrappers_[n];return m||(m=u.wrappers_[n]=[]),A=A||new w,u=jspb.Message.getRepeatedField(u,n),d!=null?(m.splice(d,0,A),u.splice(d,0,A.toArray())):(m.push(A),u.push(A.toArray())),A},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(u,n,A,w){for(var d={},m=0;m<u.length;m++)d[n.call(u[m])]=A?A.call(u[m],w,u[m]):u[m];return d},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var u in this.wrappers_){var n=this.wrappers_[u];if(Array.isArray(n))for(var A=0;A<n.length;A++)n[A]&&n[A].toArray();else n&&n.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(u){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var n=u.fieldIndex;if(u.isRepeated){if(u.isMessageType())return this.wrappers_[n]||(this.wrappers_[n]=goog.array.map(this.extensionObject_[n]||[],function(A){return new u.ctor(A)})),this.wrappers_[n]}else if(u.isMessageType())return!this.wrappers_[n]&&this.extensionObject_[n]&&(this.wrappers_[n]=new u.ctor(this.extensionObject_[n])),this.wrappers_[n];return this.extensionObject_[n]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(u,n){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var A=u.fieldIndex;return u.isRepeated?(n=n||[],u.isMessageType()?(this.wrappers_[A]=n,this.extensionObject_[A]=goog.array.map(n,function(w){return w.toArray()})):this.extensionObject_[A]=n):u.isMessageType()?(this.wrappers_[A]=n,this.extensionObject_[A]=n&&n.toArray()):this.extensionObject_[A]=n,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(u,n){if(!(u instanceof n.constructor))throw Error("Messages have different types.");var A=u.toArray();n=n.toArray();var w=[],d=0,m=A.length>n.length?A.length:n.length;for(u.getJsPbMessageId()&&(w[0]=u.getJsPbMessageId(),d=1);d<m;d++)jspb.Message.compareFields(A[d],n[d])||(w[d]=n[d]);return new u.constructor(w)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(u,n){return u==n||!(!u||!n)&&u instanceof n.constructor&&jspb.Message.compareFields(u.toArray(),n.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(u,n){u=u||{},n=n||{};var A,w={};for(A in u)w[A]=0;for(A in n)w[A]=0;for(A in w)if(!jspb.Message.compareFields(u[A],n[A]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(u,n){if(u==n)return!0;if(!goog.isObject(u)||!goog.isObject(n))return!!(typeof u=="number"&&isNaN(u)||typeof n=="number"&&isNaN(n))&&String(u)==String(n);if(u.constructor!=n.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u.constructor===Uint8Array){if(u.length!=n.length)return!1;for(var A=0;A<u.length;A++)if(u[A]!=n[A])return!1;return!0}if(u.constructor===Array){var w=void 0,d=void 0,m=Math.max(u.length,n.length);for(A=0;A<m;A++){var s=u[A],E=n[A];if(s&&s.constructor==Object&&(jspb.asserts.assert(w===void 0),jspb.asserts.assert(A===u.length-1),w=s,s=void 0),E&&E.constructor==Object&&(jspb.asserts.assert(d===void 0),jspb.asserts.assert(A===n.length-1),d=E,E=void 0),!jspb.Message.compareFields(s,E))return!1}return!w&&!d||(w=w||{},d=d||{},jspb.Message.compareExtensions(w,d))}if(u.constructor===Object)return jspb.Message.compareExtensions(u,n);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(u){return jspb.Message.cloneMessage(u)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(u){return new u.constructor(jspb.Message.clone_(u.toArray()))},jspb.Message.copyInto=function(u,n){jspb.asserts.assertInstanceof(u,jspb.Message),jspb.asserts.assertInstanceof(n,jspb.Message),jspb.asserts.assert(u.constructor==n.constructor,"Copy source and target message should have the same type."),u=jspb.Message.clone(u);for(var A=n.toArray(),w=u.toArray(),d=A.length=0;d<w.length;d++)A[d]=w[d];n.wrappers_=u.wrappers_,n.extensionObject_=u.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(u){if(Array.isArray(u)){for(var n=Array(u.length),A=0;A<u.length;A++){var w=u[A];w!=null&&(n[A]=typeof w=="object"?jspb.Message.clone_(jspb.asserts.assert(w)):w)}return n}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)return new Uint8Array(u);for(A in n={},u)(w=u[A])!=null&&(n[A]=typeof w=="object"?jspb.Message.clone_(jspb.asserts.assert(w)):w);return n},jspb.Message.registerMessageType=function(u,n){n.messageId=u},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.CalculatorOptions",null,w),proto.mediapipe.CalculatorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},A.inherits(proto.mediapipe.CalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(d){return proto.mediapipe.CalculatorOptions.toObject(d,this)},proto.mediapipe.CalculatorOptions.toObject=function(d,m){var s,E={mergeFields:(s=n.Message.getBooleanField(m,1))==null?void 0:s};return n.Message.toObjectExtension(m,E,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,d),d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=m.readBool();d.setMergeFields(s)}else n.Message.readBinaryExtension(d,m,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return d},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(d,m){var s;(s=n.Message.getField(d,1))!=null&&m.writeBool(1,s),n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},A.object.extend(u,proto.mediapipe)})(calculator_options_pb);var any_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.google.protobuf.Any",null,w),proto.google.protobuf.Any=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.google.protobuf.Any,n.Message),A.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),n.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(d){return proto.google.protobuf.Any.toObject(d,this)},proto.google.protobuf.Any.toObject=function(d,m){var s={typeUrl:n.Message.getFieldWithDefault(m,1,""),value:m.getValue_asB64()};return d&&(s.$jspbMessageInstance=m),s}),proto.google.protobuf.Any.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(s,m)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setTypeUrl(s);break;case 2:s=m.readBytes(),d.setValue(s);break;default:m.skipField()}return d},proto.google.protobuf.Any.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getTypeUrl()).length>0&&m.writeString(1,s),(s=d.getValue_asU8()).length>0&&m.writeBytes(2,s)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(d){return n.Message.setProto3StringField(this,1,d)},proto.google.protobuf.Any.prototype.getValue=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return n.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return n.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(d){return n.Message.setProto3BytesField(this,2,d)},A.object.extend(u,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(d,m,s){s||(s="type.googleapis.com/"),s.substr(-1)!="/"?this.setTypeUrl(s+"/"+m):this.setTypeUrl(s+m),this.setValue(d)},proto.google.protobuf.Any.prototype.unpack=function(d,m){return this.getTypeName()==m?d(this.getValue_asU8()):null}})(any_pb);var mediapipe_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.MediaPipeOptions",null,w),proto.mediapipe.MediaPipeOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},A.inherits(proto.mediapipe.MediaPipeOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(d){return proto.mediapipe.MediaPipeOptions.toObject(d,this)},proto.mediapipe.MediaPipeOptions.toObject=function(d,m){var s={};return n.Message.toObjectExtension(m,s,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,d),d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)m.getFieldNumber(),n.Message.readBinaryExtension(d,m,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return d},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(d,m){n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},A.object.extend(u,proto.mediapipe)})(mediapipe_options_pb);var packet_factory_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,w),A.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,w),A.exportSymbol("proto.mediapipe.PacketManagerConfig",null,w),proto.mediapipe.PacketFactoryOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},A.inherits(proto.mediapipe.PacketFactoryOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(d){n.Message.initialize(this,d,0,500,null,null)},A.inherits(proto.mediapipe.PacketFactoryConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.PacketManagerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryOptions.toObject(d,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(d,m){var s={};return n.Message.toObjectExtension(m,s,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,d),d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)m.getFieldNumber(),n.Message.readBinaryExtension(d,m,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return d},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(d,m){n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryConfig.toObject(d,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(d,m){var s,E={packetFactory:(s=n.Message.getField(m,1))==null?void 0:s,outputSidePacket:(s=n.Message.getField(m,2))==null?void 0:s,externalOutput:(s=n.Message.getField(m,1002))==null?void 0:s,options:(s=m.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(d,s)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setPacketFactory(s);break;case 2:s=m.readString(),d.setOutputSidePacket(s);break;case 1002:s=m.readString(),d.setExternalOutput(s);break;case 3:s=new proto.mediapipe.PacketFactoryOptions,m.readMessage(s,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),d.setOptions(s);break;default:m.skipField()}return d},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=n.Message.getField(d,2))!=null&&m.writeString(2,s),(s=n.Message.getField(d,1002))!=null&&m.writeString(1002,s),(s=d.getOptions())!=null&&m.writeMessage(3,s,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return n.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(d){return n.Message.setField(this,1002,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return n.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return n.Message.getField(this,1002)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(d){return proto.mediapipe.PacketManagerConfig.toObject(d,this)},proto.mediapipe.PacketManagerConfig.toObject=function(d,m){var s={packetList:n.Message.toObjectList(m.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.PacketFactoryConfig;m.readMessage(s,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),d.addPacket(s)}else m.skipField();return d},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(d,m){var s;(s=d.getPacketList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.PacketFactoryConfig,m)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},A.object.extend(u,proto.mediapipe)})(packet_factory_pb);var packet_generator_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,w),A.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,w),proto.mediapipe.PacketGeneratorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},A.inherits(proto.mediapipe.PacketGeneratorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(d){n.Message.initialize(this,d,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.PacketGeneratorConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorOptions.toObject(d,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(d,m){var s={mergeFields:n.Message.getBooleanFieldWithDefault(m,1,!0)};return n.Message.toObjectExtension(m,s,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,d),d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=m.readBool();d.setMergeFields(s)}else n.Message.readBinaryExtension(d,m,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return d},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(d,m){var s;(s=n.Message.getField(d,1))!=null&&m.writeBool(1,s),n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorConfig.toObject(d,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(d,m){var s,E={packetGenerator:(s=n.Message.getField(m,1))==null?void 0:s,inputSidePacketList:(s=n.Message.getRepeatedField(m,2))==null?void 0:s,externalInputList:(s=n.Message.getRepeatedField(m,1002))==null?void 0:s,outputSidePacketList:(s=n.Message.getRepeatedField(m,3))==null?void 0:s,externalOutputList:(s=n.Message.getRepeatedField(m,1003))==null?void 0:s,options:(s=m.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(d,s)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setPacketGenerator(s);break;case 2:s=m.readString(),d.addInputSidePacket(s);break;case 1002:s=m.readString(),d.addExternalInput(s);break;case 3:s=m.readString(),d.addOutputSidePacket(s);break;case 1003:s=m.readString(),d.addExternalOutput(s);break;case 4:s=new proto.mediapipe.PacketGeneratorOptions,m.readMessage(s,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),d.setOptions(s);break;default:m.skipField()}return d},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=d.getInputSidePacketList()).length>0&&m.writeRepeatedString(2,s),(s=d.getExternalInputList()).length>0&&m.writeRepeatedString(1002,s),(s=d.getOutputSidePacketList()).length>0&&m.writeRepeatedString(3,s),(s=d.getExternalOutputList()).length>0&&m.writeRepeatedString(1003,s),(s=d.getOptions())!=null&&m.writeMessage(4,s,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(d){return n.Message.setField(this,2,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(d,m){return n.Message.addToRepeatedField(this,2,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(d){return n.Message.setField(this,1002,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(d,m){return n.Message.addToRepeatedField(this,1002,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return n.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(d){return n.Message.setField(this,1003,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(d,m){return n.Message.addToRepeatedField(this,1003,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(packet_generator_pb);var status_handler_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,w),proto.mediapipe.StatusHandlerConfig=function(m){n.Message.initialize(this,m,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.StatusHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.StatusHandlerConfig.toObject(m,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(m,s){var E,H={statusHandler:(E=n.Message.getField(s,1))==null?void 0:E,inputSidePacketList:(E=n.Message.getRepeatedField(s,2))==null?void 0:E,externalInputList:(E=n.Message.getRepeatedField(s,1002))==null?void 0:E,options:(E=s.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(E,s)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setStatusHandler(E);break;case 2:E=s.readString(),m.addInputSidePacket(E);break;case 1002:E=s.readString(),m.addExternalInput(E);break;case 3:E=new d.MediaPipeOptions,s.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:s.skipField()}return m},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=m.getInputSidePacketList()).length>0&&s.writeRepeatedString(2,E),(E=m.getExternalInputList()).length>0&&s.writeRepeatedString(1002,E),(E=m.getOptions())!=null&&s.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(m,s){return n.Message.addToRepeatedField(this,2,m,s)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(m){return n.Message.setField(this,1002,m||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(m,s){return n.Message.addToRepeatedField(this,1002,m,s)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe)})(status_handler_pb);var stream_handler_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,w),A.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,w),proto.mediapipe.InputStreamHandlerConfig=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.InputStreamHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.OutputStreamHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.InputStreamHandlerConfig.toObject(m,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(m,s){var E,H={inputStreamHandler:n.Message.getFieldWithDefault(s,1,"DefaultInputStreamHandler"),options:(E=s.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(E,s)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setInputStreamHandler(E);break;case 3:E=new d.MediaPipeOptions,s.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:s.skipField()}return m},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=m.getOptions())!=null&&s.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.OutputStreamHandlerConfig.toObject(m,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(m,s){var E,H={outputStreamHandler:n.Message.getFieldWithDefault(s,1,"InOrderOutputStreamHandler"),inputSidePacketList:(E=n.Message.getRepeatedField(s,2))==null?void 0:E,options:(E=s.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(E,s)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setOutputStreamHandler(E);break;case 2:E=s.readString(),m.addInputSidePacket(E);break;case 3:E=new d.MediaPipeOptions,s.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:s.skipField()}return m},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=m.getInputSidePacketList()).length>0&&s.writeRepeatedString(2,E),(E=m.getOptions())!=null&&s.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(m,s){return n.Message.addToRepeatedField(this,2,m,s)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe)})(stream_handler_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=any_pb;A.object.extend(proto,m);var s=mediapipe_options_pb;A.object.extend(proto,s);var E=packet_factory_pb;A.object.extend(proto,E);var H=packet_generator_pb;A.object.extend(proto,H);var ee=status_handler_pb;A.object.extend(proto,ee);var ae=stream_handler_pb;A.object.extend(proto,ae),A.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,w),A.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,w),A.exportSymbol("proto.mediapipe.ExecutorConfig",null,w),A.exportSymbol("proto.mediapipe.InputCollection",null,w),A.exportSymbol("proto.mediapipe.InputCollection.InputType",null,w),A.exportSymbol("proto.mediapipe.InputCollectionSet",null,w),A.exportSymbol("proto.mediapipe.InputStreamInfo",null,w),A.exportSymbol("proto.mediapipe.ProfilerConfig",null,w),proto.mediapipe.ExecutorConfig=function(J){n.Message.initialize(this,J,0,-1,null,null)},A.inherits(proto.mediapipe.ExecutorConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(J){n.Message.initialize(this,J,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.InputCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(J){n.Message.initialize(this,J,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},A.inherits(proto.mediapipe.InputCollectionSet,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(J){n.Message.initialize(this,J,0,-1,null,null)},A.inherits(proto.mediapipe.InputStreamInfo,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(J){n.Message.initialize(this,J,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.ProfilerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(J){n.Message.initialize(this,J,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.CalculatorGraphConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(J){n.Message.initialize(this,J,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},A.inherits(proto.mediapipe.CalculatorGraphConfig.Node,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(J){return proto.mediapipe.ExecutorConfig.toObject(J,this)},proto.mediapipe.ExecutorConfig.toObject=function(J,pe){var ue,Mt={name:n.Message.getFieldWithDefault(pe,1,""),type:n.Message.getFieldWithDefault(pe,2,""),options:(ue=pe.getOptions())&&s.MediaPipeOptions.toObject(J,ue)};return J&&(Mt.$jspbMessageInstance=pe),Mt}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();J.setName(ue);break;case 2:ue=pe.readString(),J.setType(ue);break;case 3:ue=new s.MediaPipeOptions,pe.readMessage(ue,s.MediaPipeOptions.deserializeBinaryFromReader),J.setOptions(ue);break;default:pe.skipField()}return J},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(J,pe){var ue=void 0;(ue=J.getName()).length>0&&pe.writeString(1,ue),(ue=J.getType()).length>0&&pe.writeString(2,ue),(ue=J.getOptions())!=null&&pe.writeMessage(3,ue,s.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(J){return n.Message.setProto3StringField(this,2,J)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,s.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(J){return n.Message.setWrapperField(this,3,J)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(J){return proto.mediapipe.InputCollection.toObject(J,this)},proto.mediapipe.InputCollection.toObject=function(J,pe){var ue,Mt={name:n.Message.getFieldWithDefault(pe,1,""),sidePacketNameList:(ue=n.Message.getRepeatedField(pe,2))==null?void 0:ue,externalInputNameList:(ue=n.Message.getRepeatedField(pe,1002))==null?void 0:ue,inputType:n.Message.getFieldWithDefault(pe,3,0),fileName:n.Message.getFieldWithDefault(pe,4,"")};return J&&(Mt.$jspbMessageInstance=pe),Mt}),proto.mediapipe.InputCollection.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();J.setName(ue);break;case 2:ue=pe.readString(),J.addSidePacketName(ue);break;case 1002:ue=pe.readString(),J.addExternalInputName(ue);break;case 3:ue=pe.readEnum(),J.setInputType(ue);break;case 4:ue=pe.readString(),J.setFileName(ue);break;default:pe.skipField()}return J},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(J,pe){var ue=void 0;(ue=J.getName()).length>0&&pe.writeString(1,ue),(ue=J.getSidePacketNameList()).length>0&&pe.writeRepeatedString(2,ue),(ue=J.getExternalInputNameList()).length>0&&pe.writeRepeatedString(1002,ue),(ue=J.getInputType())!==0&&pe.writeEnum(3,ue),(ue=J.getFileName()).length>0&&pe.writeString(4,ue)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(J){return n.Message.setField(this,2,J||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(J,pe){return n.Message.addToRepeatedField(this,2,J,pe)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(J){return n.Message.setField(this,1002,J||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(J,pe){return n.Message.addToRepeatedField(this,1002,J,pe)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(J){return n.Message.setProto3EnumField(this,3,J)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(J){return n.Message.setProto3StringField(this,4,J)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(J){return proto.mediapipe.InputCollectionSet.toObject(J,this)},proto.mediapipe.InputCollectionSet.toObject=function(J,pe){var ue={inputCollectionList:n.Message.toObjectList(pe.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,J)};return J&&(ue.$jspbMessageInstance=pe),ue}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)if(pe.getFieldNumber()===1){var ue=new proto.mediapipe.InputCollection;pe.readMessage(ue,proto.mediapipe.InputCollection.deserializeBinaryFromReader),J.addInputCollection(ue)}else pe.skipField();return J},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(J,pe){var ue;(ue=J.getInputCollectionList()).length>0&&pe.writeRepeatedMessage(1,ue,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(J){return n.Message.setRepeatedWrapperField(this,1,J)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(J,pe){return n.Message.addToRepeatedWrapperField(this,1,J,proto.mediapipe.InputCollection,pe)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(J){return proto.mediapipe.InputStreamInfo.toObject(J,this)},proto.mediapipe.InputStreamInfo.toObject=function(J,pe){var ue={tagIndex:n.Message.getFieldWithDefault(pe,1,""),backEdge:n.Message.getBooleanFieldWithDefault(pe,2,!1)};return J&&(ue.$jspbMessageInstance=pe),ue}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();J.setTagIndex(ue);break;case 2:ue=pe.readBool(),J.setBackEdge(ue);break;default:pe.skipField()}return J},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(J,pe){var ue=void 0;(ue=J.getTagIndex()).length>0&&pe.writeString(1,ue),(ue=J.getBackEdge())&&pe.writeBool(2,ue)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(J){return n.Message.setProto3BooleanField(this,2,J)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(J){return proto.mediapipe.ProfilerConfig.toObject(J,this)},proto.mediapipe.ProfilerConfig.toObject=function(J,pe){var ue,Mt={histogramIntervalSizeUsec:n.Message.getFieldWithDefault(pe,1,0),numHistogramIntervals:n.Message.getFieldWithDefault(pe,2,0),enableInputOutputLatency:n.Message.getBooleanFieldWithDefault(pe,3,!1),enableProfiler:n.Message.getBooleanFieldWithDefault(pe,4,!1),enableStreamLatency:n.Message.getBooleanFieldWithDefault(pe,5,!1),usePacketTimestampForAddedPacket:n.Message.getBooleanFieldWithDefault(pe,6,!1),traceLogCapacity:n.Message.getFieldWithDefault(pe,7,0),traceEventTypesDisabledList:(ue=n.Message.getRepeatedField(pe,8))==null?void 0:ue,traceLogPath:n.Message.getFieldWithDefault(pe,9,""),traceLogCount:n.Message.getFieldWithDefault(pe,10,0),traceLogIntervalUsec:n.Message.getFieldWithDefault(pe,11,0),traceLogMarginUsec:n.Message.getFieldWithDefault(pe,12,0),traceLogDurationEvents:n.Message.getBooleanFieldWithDefault(pe,13,!1),traceLogIntervalCount:n.Message.getFieldWithDefault(pe,14,0),traceLogDisabled:n.Message.getBooleanFieldWithDefault(pe,15,!1),traceEnabled:n.Message.getBooleanFieldWithDefault(pe,16,!1),traceLogInstantEvents:n.Message.getBooleanFieldWithDefault(pe,17,!1),calculatorFilter:n.Message.getFieldWithDefault(pe,18,"")};return J&&(Mt.$jspbMessageInstance=pe),Mt}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readInt64();J.setHistogramIntervalSizeUsec(ue);break;case 2:ue=pe.readInt64(),J.setNumHistogramIntervals(ue);break;case 3:ue=pe.readBool(),J.setEnableInputOutputLatency(ue);break;case 4:ue=pe.readBool(),J.setEnableProfiler(ue);break;case 5:ue=pe.readBool(),J.setEnableStreamLatency(ue);break;case 6:ue=pe.readBool(),J.setUsePacketTimestampForAddedPacket(ue);break;case 7:ue=pe.readInt64(),J.setTraceLogCapacity(ue);break;case 8:for(var Mt=pe.isDelimited()?pe.readPackedInt32():[pe.readInt32()],nt=0;nt<Mt.length;nt++)J.addTraceEventTypesDisabled(Mt[nt]);break;case 9:ue=pe.readString(),J.setTraceLogPath(ue);break;case 10:ue=pe.readInt32(),J.setTraceLogCount(ue);break;case 11:ue=pe.readInt64(),J.setTraceLogIntervalUsec(ue);break;case 12:ue=pe.readInt64(),J.setTraceLogMarginUsec(ue);break;case 13:ue=pe.readBool(),J.setTraceLogDurationEvents(ue);break;case 14:ue=pe.readInt32(),J.setTraceLogIntervalCount(ue);break;case 15:ue=pe.readBool(),J.setTraceLogDisabled(ue);break;case 16:ue=pe.readBool(),J.setTraceEnabled(ue);break;case 17:ue=pe.readBool(),J.setTraceLogInstantEvents(ue);break;case 18:ue=pe.readString(),J.setCalculatorFilter(ue);break;default:pe.skipField()}return J},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(J,pe){var ue=void 0;(ue=J.getHistogramIntervalSizeUsec())!==0&&pe.writeInt64(1,ue),(ue=J.getNumHistogramIntervals())!==0&&pe.writeInt64(2,ue),(ue=J.getEnableInputOutputLatency())&&pe.writeBool(3,ue),(ue=J.getEnableProfiler())&&pe.writeBool(4,ue),(ue=J.getEnableStreamLatency())&&pe.writeBool(5,ue),(ue=J.getUsePacketTimestampForAddedPacket())&&pe.writeBool(6,ue),(ue=J.getTraceLogCapacity())!==0&&pe.writeInt64(7,ue),(ue=J.getTraceEventTypesDisabledList()).length>0&&pe.writePackedInt32(8,ue),(ue=J.getTraceLogPath()).length>0&&pe.writeString(9,ue),(ue=J.getTraceLogCount())!==0&&pe.writeInt32(10,ue),(ue=J.getTraceLogIntervalUsec())!==0&&pe.writeInt64(11,ue),(ue=J.getTraceLogMarginUsec())!==0&&pe.writeInt64(12,ue),(ue=J.getTraceLogDurationEvents())&&pe.writeBool(13,ue),(ue=J.getTraceLogIntervalCount())!==0&&pe.writeInt32(14,ue),(ue=J.getTraceLogDisabled())&&pe.writeBool(15,ue),(ue=J.getTraceEnabled())&&pe.writeBool(16,ue),(ue=J.getTraceLogInstantEvents())&&pe.writeBool(17,ue),(ue=J.getCalculatorFilter()).length>0&&pe.writeString(18,ue)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(J){return n.Message.setProto3IntField(this,1,J)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(J){return n.Message.setProto3IntField(this,2,J)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(J){return n.Message.setProto3BooleanField(this,3,J)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(J){return n.Message.setProto3BooleanField(this,4,J)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(J){return n.Message.setProto3BooleanField(this,5,J)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return n.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(J){return n.Message.setProto3BooleanField(this,6,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(J){return n.Message.setProto3IntField(this,7,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return n.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(J){return n.Message.setField(this,8,J||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(J,pe){return n.Message.addToRepeatedField(this,8,J,pe)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return n.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(J){return n.Message.setProto3StringField(this,9,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(J){return n.Message.setProto3IntField(this,10,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(J){return n.Message.setProto3IntField(this,11,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return n.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(J){return n.Message.setProto3IntField(this,12,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return n.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(J){return n.Message.setProto3BooleanField(this,13,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return n.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(J){return n.Message.setProto3IntField(this,14,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return n.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(J){return n.Message.setProto3BooleanField(this,15,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return n.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(J){return n.Message.setProto3BooleanField(this,16,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return n.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(J){return n.Message.setProto3BooleanField(this,17,J)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return n.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(J){return n.Message.setProto3StringField(this,18,J)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(J){return proto.mediapipe.CalculatorGraphConfig.toObject(J,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(J,pe){var ue,Mt={nodeList:n.Message.toObjectList(pe.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,J),packetFactoryList:n.Message.toObjectList(pe.getPacketFactoryList(),E.PacketFactoryConfig.toObject,J),packetGeneratorList:n.Message.toObjectList(pe.getPacketGeneratorList(),H.PacketGeneratorConfig.toObject,J),numThreads:n.Message.getFieldWithDefault(pe,8,0),statusHandlerList:n.Message.toObjectList(pe.getStatusHandlerList(),ee.StatusHandlerConfig.toObject,J),inputStreamList:(ue=n.Message.getRepeatedField(pe,10))==null?void 0:ue,outputStreamList:(ue=n.Message.getRepeatedField(pe,15))==null?void 0:ue,inputSidePacketList:(ue=n.Message.getRepeatedField(pe,16))==null?void 0:ue,outputSidePacketList:(ue=n.Message.getRepeatedField(pe,17))==null?void 0:ue,maxQueueSize:n.Message.getFieldWithDefault(pe,11,0),reportDeadlock:n.Message.getBooleanFieldWithDefault(pe,21,!1),inputStreamHandler:(ue=pe.getInputStreamHandler())&&ae.InputStreamHandlerConfig.toObject(J,ue),outputStreamHandler:(ue=pe.getOutputStreamHandler())&&ae.OutputStreamHandlerConfig.toObject(J,ue),executorList:n.Message.toObjectList(pe.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,J),profilerConfig:(ue=pe.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(J,ue),pb_package:n.Message.getFieldWithDefault(pe,19,""),type:n.Message.getFieldWithDefault(pe,20,""),options:(ue=pe.getOptions())&&s.MediaPipeOptions.toObject(J,ue),graphOptionsList:n.Message.toObjectList(pe.getGraphOptionsList(),m.Any.toObject,J)};return J&&(Mt.$jspbMessageInstance=pe),Mt}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=new proto.mediapipe.CalculatorGraphConfig.Node;pe.readMessage(ue,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),J.addNode(ue);break;case 6:ue=new E.PacketFactoryConfig,pe.readMessage(ue,E.PacketFactoryConfig.deserializeBinaryFromReader),J.addPacketFactory(ue);break;case 7:ue=new H.PacketGeneratorConfig,pe.readMessage(ue,H.PacketGeneratorConfig.deserializeBinaryFromReader),J.addPacketGenerator(ue);break;case 8:ue=pe.readInt32(),J.setNumThreads(ue);break;case 9:ue=new ee.StatusHandlerConfig,pe.readMessage(ue,ee.StatusHandlerConfig.deserializeBinaryFromReader),J.addStatusHandler(ue);break;case 10:ue=pe.readString(),J.addInputStream(ue);break;case 15:ue=pe.readString(),J.addOutputStream(ue);break;case 16:ue=pe.readString(),J.addInputSidePacket(ue);break;case 17:ue=pe.readString(),J.addOutputSidePacket(ue);break;case 11:ue=pe.readInt32(),J.setMaxQueueSize(ue);break;case 21:ue=pe.readBool(),J.setReportDeadlock(ue);break;case 12:ue=new ae.InputStreamHandlerConfig,pe.readMessage(ue,ae.InputStreamHandlerConfig.deserializeBinaryFromReader),J.setInputStreamHandler(ue);break;case 13:ue=new ae.OutputStreamHandlerConfig,pe.readMessage(ue,ae.OutputStreamHandlerConfig.deserializeBinaryFromReader),J.setOutputStreamHandler(ue);break;case 14:ue=new proto.mediapipe.ExecutorConfig,pe.readMessage(ue,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),J.addExecutor(ue);break;case 18:ue=new proto.mediapipe.ProfilerConfig,pe.readMessage(ue,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),J.setProfilerConfig(ue);break;case 19:ue=pe.readString(),J.setPackage(ue);break;case 20:ue=pe.readString(),J.setType(ue);break;case 1001:ue=new s.MediaPipeOptions,pe.readMessage(ue,s.MediaPipeOptions.deserializeBinaryFromReader),J.setOptions(ue);break;case 1002:ue=new m.Any,pe.readMessage(ue,m.Any.deserializeBinaryFromReader),J.addGraphOptions(ue);break;default:pe.skipField()}return J},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(J,pe){var ue=void 0;(ue=J.getNodeList()).length>0&&pe.writeRepeatedMessage(1,ue,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(ue=J.getPacketFactoryList()).length>0&&pe.writeRepeatedMessage(6,ue,E.PacketFactoryConfig.serializeBinaryToWriter),(ue=J.getPacketGeneratorList()).length>0&&pe.writeRepeatedMessage(7,ue,H.PacketGeneratorConfig.serializeBinaryToWriter),(ue=J.getNumThreads())!==0&&pe.writeInt32(8,ue),(ue=J.getStatusHandlerList()).length>0&&pe.writeRepeatedMessage(9,ue,ee.StatusHandlerConfig.serializeBinaryToWriter),(ue=J.getInputStreamList()).length>0&&pe.writeRepeatedString(10,ue),(ue=J.getOutputStreamList()).length>0&&pe.writeRepeatedString(15,ue),(ue=J.getInputSidePacketList()).length>0&&pe.writeRepeatedString(16,ue),(ue=J.getOutputSidePacketList()).length>0&&pe.writeRepeatedString(17,ue),(ue=J.getMaxQueueSize())!==0&&pe.writeInt32(11,ue),(ue=J.getReportDeadlock())&&pe.writeBool(21,ue),(ue=J.getInputStreamHandler())!=null&&pe.writeMessage(12,ue,ae.InputStreamHandlerConfig.serializeBinaryToWriter),(ue=J.getOutputStreamHandler())!=null&&pe.writeMessage(13,ue,ae.OutputStreamHandlerConfig.serializeBinaryToWriter),(ue=J.getExecutorList()).length>0&&pe.writeRepeatedMessage(14,ue,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),(ue=J.getProfilerConfig())!=null&&pe.writeMessage(18,ue,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(ue=J.getPackage()).length>0&&pe.writeString(19,ue),(ue=J.getType()).length>0&&pe.writeString(20,ue),(ue=J.getOptions())!=null&&pe.writeMessage(1001,ue,s.MediaPipeOptions.serializeBinaryToWriter),(ue=J.getGraphOptionsList()).length>0&&pe.writeRepeatedMessage(1002,ue,m.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(J){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(J,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(J,pe){var ue,Mt={name:n.Message.getFieldWithDefault(pe,1,""),calculator:n.Message.getFieldWithDefault(pe,2,""),inputStreamList:(ue=n.Message.getRepeatedField(pe,3))==null?void 0:ue,outputStreamList:(ue=n.Message.getRepeatedField(pe,4))==null?void 0:ue,inputSidePacketList:(ue=n.Message.getRepeatedField(pe,5))==null?void 0:ue,outputSidePacketList:(ue=n.Message.getRepeatedField(pe,6))==null?void 0:ue,options:(ue=pe.getOptions())&&d.CalculatorOptions.toObject(J,ue),nodeOptionsList:n.Message.toObjectList(pe.getNodeOptionsList(),m.Any.toObject,J),sourceLayer:n.Message.getFieldWithDefault(pe,9,0),bufferSizeHint:n.Message.getFieldWithDefault(pe,10,0),inputStreamHandler:(ue=pe.getInputStreamHandler())&&ae.InputStreamHandlerConfig.toObject(J,ue),outputStreamHandler:(ue=pe.getOutputStreamHandler())&&ae.OutputStreamHandlerConfig.toObject(J,ue),inputStreamInfoList:n.Message.toObjectList(pe.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,J),executor:n.Message.getFieldWithDefault(pe,14,""),profilerConfig:(ue=pe.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(J,ue),maxInFlight:n.Message.getFieldWithDefault(pe,16,0),optionValueList:(ue=n.Message.getRepeatedField(pe,17))==null?void 0:ue,externalInputList:(ue=n.Message.getRepeatedField(pe,1005))==null?void 0:ue};return J&&(Mt.$jspbMessageInstance=pe),Mt}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(J){var pe=new n.BinaryReader(J),ue=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(ue,pe)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var ue=pe.readString();J.setName(ue);break;case 2:ue=pe.readString(),J.setCalculator(ue);break;case 3:ue=pe.readString(),J.addInputStream(ue);break;case 4:ue=pe.readString(),J.addOutputStream(ue);break;case 5:ue=pe.readString(),J.addInputSidePacket(ue);break;case 6:ue=pe.readString(),J.addOutputSidePacket(ue);break;case 7:ue=new d.CalculatorOptions,pe.readMessage(ue,d.CalculatorOptions.deserializeBinaryFromReader),J.setOptions(ue);break;case 8:ue=new m.Any,pe.readMessage(ue,m.Any.deserializeBinaryFromReader),J.addNodeOptions(ue);break;case 9:ue=pe.readInt32(),J.setSourceLayer(ue);break;case 10:ue=pe.readInt32(),J.setBufferSizeHint(ue);break;case 11:ue=new ae.InputStreamHandlerConfig,pe.readMessage(ue,ae.InputStreamHandlerConfig.deserializeBinaryFromReader),J.setInputStreamHandler(ue);break;case 12:ue=new ae.OutputStreamHandlerConfig,pe.readMessage(ue,ae.OutputStreamHandlerConfig.deserializeBinaryFromReader),J.setOutputStreamHandler(ue);break;case 13:ue=new proto.mediapipe.InputStreamInfo,pe.readMessage(ue,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),J.addInputStreamInfo(ue);break;case 14:ue=pe.readString(),J.setExecutor(ue);break;case 15:ue=new proto.mediapipe.ProfilerConfig,pe.readMessage(ue,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),J.setProfilerConfig(ue);break;case 16:ue=pe.readInt32(),J.setMaxInFlight(ue);break;case 17:ue=pe.readString(),J.addOptionValue(ue);break;case 1005:ue=pe.readString(),J.addExternalInput(ue);break;default:pe.skipField()}return J},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(J,pe){var ue=void 0;(ue=J.getName()).length>0&&pe.writeString(1,ue),(ue=J.getCalculator()).length>0&&pe.writeString(2,ue),(ue=J.getInputStreamList()).length>0&&pe.writeRepeatedString(3,ue),(ue=J.getOutputStreamList()).length>0&&pe.writeRepeatedString(4,ue),(ue=J.getInputSidePacketList()).length>0&&pe.writeRepeatedString(5,ue),(ue=J.getOutputSidePacketList()).length>0&&pe.writeRepeatedString(6,ue),(ue=J.getOptions())!=null&&pe.writeMessage(7,ue,d.CalculatorOptions.serializeBinaryToWriter),(ue=J.getNodeOptionsList()).length>0&&pe.writeRepeatedMessage(8,ue,m.Any.serializeBinaryToWriter),(ue=J.getSourceLayer())!==0&&pe.writeInt32(9,ue),(ue=J.getBufferSizeHint())!==0&&pe.writeInt32(10,ue),(ue=J.getInputStreamHandler())!=null&&pe.writeMessage(11,ue,ae.InputStreamHandlerConfig.serializeBinaryToWriter),(ue=J.getOutputStreamHandler())!=null&&pe.writeMessage(12,ue,ae.OutputStreamHandlerConfig.serializeBinaryToWriter),(ue=J.getInputStreamInfoList()).length>0&&pe.writeRepeatedMessage(13,ue,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(ue=J.getExecutor()).length>0&&pe.writeString(14,ue),(ue=J.getProfilerConfig())!=null&&pe.writeMessage(15,ue,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(ue=J.getMaxInFlight())!==0&&pe.writeInt32(16,ue),(ue=J.getOptionValueList()).length>0&&pe.writeRepeatedString(17,ue),(ue=J.getExternalInputList()).length>0&&pe.writeRepeatedString(1005,ue)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(J){return n.Message.setProto3StringField(this,2,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(J){return n.Message.setField(this,3,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(J,pe){return n.Message.addToRepeatedField(this,3,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(J){return n.Message.setField(this,4,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(J,pe){return n.Message.addToRepeatedField(this,4,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(J){return n.Message.setField(this,5,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,5,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(J){return n.Message.setField(this,6,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,6,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(J){return n.Message.setWrapperField(this,7,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return n.Message.getRepeatedWrapperField(this,m.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(J){return n.Message.setRepeatedWrapperField(this,8,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(J,pe){return n.Message.addToRepeatedWrapperField(this,8,J,proto.google.protobuf.Any,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return n.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(J){return n.Message.setProto3IntField(this,9,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(J){return n.Message.setProto3IntField(this,10,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,ae.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(J){return n.Message.setWrapperField(this,11,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,ae.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(J){return n.Message.setWrapperField(this,12,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(J){return n.Message.setRepeatedWrapperField(this,13,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(J,pe){return n.Message.addToRepeatedWrapperField(this,13,J,proto.mediapipe.InputStreamInfo,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return n.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(J){return n.Message.setProto3StringField(this,14,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(J){return n.Message.setWrapperField(this,15,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return n.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(J){return n.Message.setProto3IntField(this,16,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(J){return n.Message.setField(this,17,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(J,pe){return n.Message.addToRepeatedField(this,17,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(J){return n.Message.setField(this,1005,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(J,pe){return n.Message.addToRepeatedField(this,1005,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(J){return n.Message.setRepeatedWrapperField(this,1,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(J,pe){return n.Message.addToRepeatedWrapperField(this,1,J,proto.mediapipe.CalculatorGraphConfig.Node,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return n.Message.getRepeatedWrapperField(this,E.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(J){return n.Message.setRepeatedWrapperField(this,6,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(J,pe){return n.Message.addToRepeatedWrapperField(this,6,J,proto.mediapipe.PacketFactoryConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return n.Message.getRepeatedWrapperField(this,H.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(J){return n.Message.setRepeatedWrapperField(this,7,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(J,pe){return n.Message.addToRepeatedWrapperField(this,7,J,proto.mediapipe.PacketGeneratorConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(J){return n.Message.setProto3IntField(this,8,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return n.Message.getRepeatedWrapperField(this,ee.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(J){return n.Message.setRepeatedWrapperField(this,9,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(J,pe){return n.Message.addToRepeatedWrapperField(this,9,J,proto.mediapipe.StatusHandlerConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(J){return n.Message.setField(this,10,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(J,pe){return n.Message.addToRepeatedField(this,10,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(J){return n.Message.setField(this,15,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(J,pe){return n.Message.addToRepeatedField(this,15,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(J){return n.Message.setField(this,16,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,16,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(J){return n.Message.setField(this,17,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,17,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(J){return n.Message.setProto3IntField(this,11,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return n.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(J){return n.Message.setProto3BooleanField(this,21,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,ae.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(J){return n.Message.setWrapperField(this,12,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,ae.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(J){return n.Message.setWrapperField(this,13,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,13)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(J){return n.Message.setRepeatedWrapperField(this,14,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(J,pe){return n.Message.addToRepeatedWrapperField(this,14,J,proto.mediapipe.ExecutorConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(J){return n.Message.setWrapperField(this,18,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return n.Message.getField(this,18)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return n.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(J){return n.Message.setProto3StringField(this,19,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(J){return n.Message.setProto3StringField(this,20,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,s.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(J){return n.Message.setWrapperField(this,1001,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return n.Message.getField(this,1001)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return n.Message.getRepeatedWrapperField(this,m.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(J){return n.Message.setRepeatedWrapperField(this,1002,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(J,pe){return n.Message.addToRepeatedWrapperField(this,1002,J,proto.google.protobuf.Any,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},A.object.extend(u,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Rasterization",null,w),A.exportSymbol("proto.mediapipe.Rasterization.Interval",null,w),proto.mediapipe.Rasterization=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},A.inherits(proto.mediapipe.Rasterization,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Rasterization.Interval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(d){return proto.mediapipe.Rasterization.toObject(d,this)},proto.mediapipe.Rasterization.toObject=function(d,m){var s={intervalList:n.Message.toObjectList(m.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.Rasterization.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(s,m)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.Rasterization.Interval;m.readMessage(s,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),d.addInterval(s)}else m.skipField();return d},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(d,m){var s;(s=d.getIntervalList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(d){return proto.mediapipe.Rasterization.Interval.toObject(d,this)},proto.mediapipe.Rasterization.Interval.toObject=function(d,m){var s,E={y:(s=n.Message.getField(m,1))==null?void 0:s,leftX:(s=n.Message.getField(m,2))==null?void 0:s,rightX:(s=n.Message.getField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(s,m)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setY(s);break;case 2:s=m.readInt32(),d.setLeftX(s);break;case 3:s=m.readInt32(),d.setRightX(s);break;default:m.skipField()}return d},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.Rasterization.prototype.addInterval=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Rasterization.Interval,m)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},A.object.extend(u,proto.mediapipe)})(rasterization_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=rasterization_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.LocationData",null,w),A.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,w),A.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,w),A.exportSymbol("proto.mediapipe.LocationData.Format",null,w),A.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,w),A.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,w),proto.mediapipe.LocationData=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},A.inherits(proto.mediapipe.LocationData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.BoundingBox,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.BinaryMask,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.RelativeKeypoint,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(m){return proto.mediapipe.LocationData.toObject(m,this)},proto.mediapipe.LocationData.toObject=function(m,s){var E,H={format:(E=n.Message.getField(s,1))==null?void 0:E,boundingBox:(E=s.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(m,E),relativeBoundingBox:(E=s.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(m,E),mask:(E=s.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(m,E),relativeKeypointsList:n.Message.toObjectList(s.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,m)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readEnum();m.setFormat(E);break;case 2:E=new proto.mediapipe.LocationData.BoundingBox,s.readMessage(E,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),m.setBoundingBox(E);break;case 3:E=new proto.mediapipe.LocationData.RelativeBoundingBox,s.readMessage(E,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),m.setRelativeBoundingBox(E);break;case 4:E=new proto.mediapipe.LocationData.BinaryMask,s.readMessage(E,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),m.setMask(E);break;case 5:E=new proto.mediapipe.LocationData.RelativeKeypoint,s.readMessage(E,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),m.addRelativeKeypoints(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeEnum(1,E),(E=m.getBoundingBox())!=null&&s.writeMessage(2,E,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),(E=m.getRelativeBoundingBox())!=null&&s.writeMessage(3,E,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),(E=m.getMask())!=null&&s.writeMessage(4,E,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(E=m.getRelativeKeypointsList()).length>0&&s.writeRepeatedMessage(5,E,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(m){return proto.mediapipe.LocationData.BoundingBox.toObject(m,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(m,s){var E,H={xmin:(E=n.Message.getField(s,1))==null?void 0:E,ymin:(E=n.Message.getField(s,2))==null?void 0:E,width:(E=n.Message.getField(s,3))==null?void 0:E,height:(E=n.Message.getField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readInt32();m.setXmin(E);break;case 2:E=s.readInt32(),m.setYmin(E);break;case 3:E=s.readInt32(),m.setWidth(E);break;case 4:E=s.readInt32(),m.setHeight(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeInt32(3,E),(E=n.Message.getField(m,4))!=null&&s.writeInt32(4,E)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(m){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(m,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(m,s){var E,H={xmin:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,ymin:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,width:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,height:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readFloat();m.setXmin(E);break;case 2:E=s.readFloat(),m.setYmin(E);break;case 3:E=s.readFloat(),m.setWidth(E);break;case 4:E=s.readFloat(),m.setHeight(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeFloat(1,E),(E=n.Message.getField(m,2))!=null&&s.writeFloat(2,E),(E=n.Message.getField(m,3))!=null&&s.writeFloat(3,E),(E=n.Message.getField(m,4))!=null&&s.writeFloat(4,E)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(m){return proto.mediapipe.LocationData.BinaryMask.toObject(m,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(m,s){var E,H={width:(E=n.Message.getField(s,1))==null?void 0:E,height:(E=n.Message.getField(s,2))==null?void 0:E,rasterization:(E=s.getRasterization())&&d.Rasterization.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readInt32();m.setWidth(E);break;case 2:E=s.readInt32(),m.setHeight(E);break;case 3:E=new d.Rasterization,s.readMessage(E,d.Rasterization.deserializeBinaryFromReader),m.setRasterization(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=m.getRasterization())!=null&&s.writeMessage(3,E,d.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return n.Message.getWrapperField(this,d.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(m){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(m,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(m,s){var E,H={x:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,y:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,keypointLabel:(E=n.Message.getField(s,3))==null?void 0:E,score:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readFloat();m.setX(E);break;case 2:E=s.readFloat(),m.setY(E);break;case 3:E=s.readString(),m.setKeypointLabel(E);break;case 4:E=s.readFloat(),m.setScore(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeFloat(1,E),(E=n.Message.getField(m,2))!=null&&s.writeFloat(2,E),(E=n.Message.getField(m,3))!=null&&s.writeString(3,E),(E=n.Message.getField(m,4))!=null&&s.writeFloat(4,E)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getFormat=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.prototype.getMask=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(m){return n.Message.setRepeatedWrapperField(this,5,m)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(m,s){return n.Message.addToRepeatedWrapperField(this,5,m,proto.mediapipe.LocationData.RelativeKeypoint,s)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},A.object.extend(u,proto.mediapipe)}(location_data_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=location_data_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.Detection",null,w),A.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,w),A.exportSymbol("proto.mediapipe.DetectionList",null,w),proto.mediapipe.Detection=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},A.inherits(proto.mediapipe.Detection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.Detection.AssociatedDetection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},A.inherits(proto.mediapipe.DetectionList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(m){return proto.mediapipe.Detection.toObject(m,this)},proto.mediapipe.Detection.toObject=function(m,s){var E,H={labelList:(E=n.Message.getRepeatedField(s,1))==null?void 0:E,labelIdList:(E=n.Message.getRepeatedField(s,2))==null?void 0:E,scoreList:(E=n.Message.getRepeatedFloatingPointField(s,3))==null?void 0:E,locationData:(E=s.getLocationData())&&d.LocationData.toObject(m,E),featureTag:(E=n.Message.getField(s,5))==null?void 0:E,trackId:(E=n.Message.getField(s,6))==null?void 0:E,detectionId:(E=n.Message.getField(s,7))==null?void 0:E,associatedDetectionsList:n.Message.toObjectList(s.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,m),displayNameList:(E=n.Message.getRepeatedField(s,9))==null?void 0:E,timestampUsec:(E=n.Message.getField(s,10))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.Detection.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(E,s)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.addLabel(E);break;case 2:for(var H=s.isDelimited()?s.readPackedInt32():[s.readInt32()],ee=0;ee<H.length;ee++)m.addLabelId(H[ee]);break;case 3:for(H=s.isDelimited()?s.readPackedFloat():[s.readFloat()],ee=0;ee<H.length;ee++)m.addScore(H[ee]);break;case 4:E=new d.LocationData,s.readMessage(E,d.LocationData.deserializeBinaryFromReader),m.setLocationData(E);break;case 5:E=s.readString(),m.setFeatureTag(E);break;case 6:E=s.readString(),m.setTrackId(E);break;case 7:E=s.readInt64(),m.setDetectionId(E);break;case 8:E=new proto.mediapipe.Detection.AssociatedDetection,s.readMessage(E,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),m.addAssociatedDetections(E);break;case 9:E=s.readString(),m.addDisplayName(E);break;case 10:E=s.readInt64(),m.setTimestampUsec(E);break;default:s.skipField()}return m},proto.mediapipe.Detection.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getLabelList()).length>0&&s.writeRepeatedString(1,E),(E=m.getLabelIdList()).length>0&&s.writePackedInt32(2,E),(E=m.getScoreList()).length>0&&s.writePackedFloat(3,E),(E=m.getLocationData())!=null&&s.writeMessage(4,E,d.LocationData.serializeBinaryToWriter),(E=n.Message.getField(m,5))!=null&&s.writeString(5,E),(E=n.Message.getField(m,6))!=null&&s.writeString(6,E),(E=n.Message.getField(m,7))!=null&&s.writeInt64(7,E),(E=m.getAssociatedDetectionsList()).length>0&&s.writeRepeatedMessage(8,E,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(E=m.getDisplayNameList()).length>0&&s.writeRepeatedString(9,E),(E=n.Message.getField(m,10))!=null&&s.writeInt64(10,E)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(m){return proto.mediapipe.Detection.AssociatedDetection.toObject(m,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(m,s){var E,H={id:(E=n.Message.getField(s,1))==null?void 0:E,confidence:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(E,s)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readInt32();m.setId(E);break;case 2:E=s.readFloat(),m.setConfidence(E);break;default:s.skipField()}return m},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&s.writeFloat(2,E)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Detection.prototype.getLabelList=function(){return n.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(m){return n.Message.setField(this,1,m||[])},proto.mediapipe.Detection.prototype.addLabel=function(m,s){return n.Message.addToRepeatedField(this,1,m,s)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.Detection.prototype.addLabelId=function(m,s){return n.Message.addToRepeatedField(this,2,m,s)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(m){return n.Message.setField(this,3,m||[])},proto.mediapipe.Detection.prototype.addScore=function(m,s){return n.Message.addToRepeatedField(this,3,m,s)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return n.Message.getWrapperField(this,d.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Detection.prototype.getTrackId=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.Detection.prototype.getDetectionId=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(m){return n.Message.setRepeatedWrapperField(this,8,m)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(m,s){return n.Message.addToRepeatedWrapperField(this,8,m,proto.mediapipe.Detection.AssociatedDetection,s)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return n.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(m){return n.Message.setField(this,9,m||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(m,s){return n.Message.addToRepeatedField(this,9,m,s)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(m){return n.Message.setField(this,10,m)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return n.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.DetectionList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(m){return proto.mediapipe.DetectionList.toObject(m,this)},proto.mediapipe.DetectionList.toObject=function(m,s){var E={detectionList:n.Message.toObjectList(s.getDetectionList(),proto.mediapipe.Detection.toObject,m)};return m&&(E.$jspbMessageInstance=s),E}),proto.mediapipe.DetectionList.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(E,s)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var E=new proto.mediapipe.Detection;s.readMessage(E,proto.mediapipe.Detection.deserializeBinaryFromReader),m.addDetection(E)}else s.skipField();return m},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(m,s){var E;(E=m.getDetectionList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.DetectionList.prototype.addDetection=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.Detection,s)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},A.object.extend(u,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,w),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,w),proto.mediapipe.InferenceCalculatorOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(s){n.Message.initialize(this,s,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(s,E){var H,ee={modelPath:(H=n.Message.getField(E,1))==null?void 0:H,useGpu:n.Message.getBooleanFieldWithDefault(E,2,!1),useNnapi:n.Message.getBooleanFieldWithDefault(E,3,!1),cpuNumThread:n.Message.getFieldWithDefault(E,4,-1),delegate:(H=E.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(s,H)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=E.readString();s.setModelPath(H);break;case 2:H=E.readBool(),s.setUseGpu(H);break;case 3:H=E.readBool(),s.setUseNnapi(H);break;case 4:H=E.readInt32(),s.setCpuNumThread(H);break;case 5:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),s.setDelegate(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(s,E){var H=void 0;(H=n.Message.getField(s,1))!=null&&E.writeString(1,H),(H=n.Message.getField(s,2))!=null&&E.writeBool(2,H),(H=n.Message.getField(s,3))!=null&&E.writeBool(3,H),(H=n.Message.getField(s,4))!=null&&E.writeInt32(4,H),(H=s.getDelegate())!=null&&E.writeMessage(5,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(s,E){var H,ee={tflite:(H=E.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(s,H),gpu:(H=E.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(s,H),nnapi:(H=E.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(s,H),xnnpack:(H=E.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(s,H)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),s.setTflite(H);break;case 2:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),s.setGpu(H);break;case 3:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),s.setNnapi(H);break;case 4:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),s.setXnnpack(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(s,E){var H=void 0;(H=s.getTflite())!=null&&E.writeMessage(1,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(H=s.getGpu())!=null&&E.writeMessage(2,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(H=s.getNnapi())!=null&&E.writeMessage(3,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),(H=s.getXnnpack())!=null&&E.writeMessage(4,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(s,E){var H={};return s&&(H.$jspbMessageInstance=E),H}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)E.getFieldNumber(),E.skipField();return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(s,E){},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(s,E){var H,ee={useAdvancedGpuApi:n.Message.getBooleanFieldWithDefault(E,1,!1),api:n.Message.getFieldWithDefault(E,4,0),allowPrecisionLoss:n.Message.getBooleanFieldWithDefault(E,3,!0),cachedKernelPath:(H=n.Message.getField(E,2))==null?void 0:H,serializedModelDir:(H=n.Message.getField(E,7))==null?void 0:H,modelToken:(H=n.Message.getField(E,8))==null?void 0:H,usage:n.Message.getFieldWithDefault(E,5,2)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=E.readBool();s.setUseAdvancedGpuApi(H);break;case 4:H=E.readEnum(),s.setApi(H);break;case 3:H=E.readBool(),s.setAllowPrecisionLoss(H);break;case 2:H=E.readString(),s.setCachedKernelPath(H);break;case 7:H=E.readString(),s.setSerializedModelDir(H);break;case 8:H=E.readString(),s.setModelToken(H);break;case 5:H=E.readEnum(),s.setUsage(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(s,E){var H=void 0;(H=n.Message.getField(s,1))!=null&&E.writeBool(1,H),(H=n.Message.getField(s,4))!=null&&E.writeEnum(4,H),(H=n.Message.getField(s,3))!=null&&E.writeBool(3,H),(H=n.Message.getField(s,2))!=null&&E.writeString(2,H),(H=n.Message.getField(s,7))!=null&&E.writeString(7,H),(H=n.Message.getField(s,8))!=null&&E.writeString(8,H),(H=n.Message.getField(s,5))!=null&&E.writeEnum(5,H)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(s){return n.Message.setField(this,4,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return n.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(s){return n.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return n.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(s){return n.Message.setField(this,7,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(s){return n.Message.setField(this,8,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return n.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(s){return n.Message.setField(this,5,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(s,E){var H,ee={cacheDir:(H=n.Message.getField(E,1))==null?void 0:H,modelToken:(H=n.Message.getField(E,2))==null?void 0:H,acceleratorName:(H=n.Message.getField(E,3))==null?void 0:H};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=E.readString();s.setCacheDir(H);break;case 2:H=E.readString(),s.setModelToken(H);break;case 3:H=E.readString(),s.setAcceleratorName(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(s,E){var H=void 0;(H=n.Message.getField(s,1))!=null&&E.writeString(1,H),(H=n.Message.getField(s,2))!=null&&E.writeString(2,H),(H=n.Message.getField(s,3))!=null&&E.writeString(3,H)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(s){return n.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(s,E){var H={numThreads:n.Message.getFieldWithDefault(E,1,-1)};return s&&(H.$jspbMessageInstance=E),H}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var H=E.readInt32();s.setNumThreads(H)}else E.skipField();return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(s,E){var H;(H=n.Message.getField(s,1))!=null&&E.writeInt32(1,H)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(s){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(s){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(s){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(s){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(s){return n.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return n.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(s){return n.Message.setField(this,4,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(s){return n.Message.setWrapperField(this,5,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,A.object.extend(u,proto.mediapipe)})(inference_calculator_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=inference_calculator_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,w),A.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,w),proto.mediapipe.tasks.core.proto.Acceleration=function(m){n.Message.initialize(this,m,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},A.inherits(proto.mediapipe.tasks.core.proto.Acceleration,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(m){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(m,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(m,s){var E,H={xnnpack:(E=s.getXnnpack())&&d.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(m,E),gpu:(E=s.getGpu())&&d.InferenceCalculatorOptions.Delegate.Gpu.toObject(m,E),tflite:(E=s.getTflite())&&d.InferenceCalculatorOptions.Delegate.TfLite.toObject(m,E),nnapi:(E=s.getNnapi())&&d.InferenceCalculatorOptions.Delegate.Nnapi.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(E,s)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new d.InferenceCalculatorOptions.Delegate.Xnnpack;s.readMessage(E,d.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),m.setXnnpack(E);break;case 2:E=new d.InferenceCalculatorOptions.Delegate.Gpu,s.readMessage(E,d.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),m.setGpu(E);break;case 4:E=new d.InferenceCalculatorOptions.Delegate.TfLite,s.readMessage(E,d.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),m.setTflite(E);break;case 5:E=new d.InferenceCalculatorOptions.Delegate.Nnapi,s.readMessage(E,d.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),m.setNnapi(E);break;default:s.skipField()}return m},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getXnnpack())!=null&&s.writeMessage(1,E,d.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),(E=m.getGpu())!=null&&s.writeMessage(2,E,d.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(E=m.getTflite())!=null&&s.writeMessage(4,E,d.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(E=m.getNnapi())!=null&&s.writeMessage(5,E,d.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(m){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(m){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(m){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(m){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return n.Message.getField(this,5)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,w),A.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,w),A.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,w),proto.mediapipe.tasks.core.proto.ExternalFile=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(d,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(d,m){var s,E={fileContent:m.getFileContent_asB64(),fileName:(s=n.Message.getField(m,2))==null?void 0:s,fileDescriptorMeta:(s=m.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,s),filePointerMeta:(s=m.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,s)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readBytes();d.setFileContent(s);break;case 2:s=m.readString(),d.setFileName(s);break;case 3:s=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,m.readMessage(s,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),d.setFileDescriptorMeta(s);break;case 4:s=new proto.mediapipe.tasks.core.proto.FilePointerMeta,m.readMessage(s,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),d.setFilePointerMeta(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeBytes(1,s),(s=n.Message.getField(d,2))!=null&&m.writeString(2,s),(s=d.getFileDescriptorMeta())!=null&&m.writeMessage(3,s,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),(s=d.getFilePointerMeta())!=null&&m.writeMessage(4,s,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return n.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return n.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(d,m){var s,E={fd:(s=n.Message.getField(m,1))==null?void 0:s,length:(s=n.Message.getField(m,2))==null?void 0:s,offset:(s=n.Message.getField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setFd(s);break;case 2:s=m.readInt64(),d.setLength(s);break;case 3:s=m.readInt64(),d.setOffset(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt64(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt64(3,s)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(d,m){var s,E={pointer:(s=n.Message.getField(m,1))==null?void 0:s,length:(s=n.Message.getField(m,2))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readUint64();d.setPointer(s);break;case 2:s=m.readInt64(),d.setLength(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeUint64(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt64(2,s)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)})(external_file_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=acceleration_pb;A.object.extend(proto,d);var m=external_file_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,w),proto.mediapipe.tasks.core.proto.BaseOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(s,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(s,E){var H,ee={modelAsset:(H=E.getModelAsset())&&m.ExternalFile.toObject(s,H),useStreamMode:n.Message.getBooleanFieldWithDefault(E,2,!1),acceleration:(H=E.getAcceleration())&&d.Acceleration.toObject(s,H)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=new m.ExternalFile;E.readMessage(H,m.ExternalFile.deserializeBinaryFromReader),s.setModelAsset(H);break;case 2:H=E.readBool(),s.setUseStreamMode(H);break;case 3:H=new d.Acceleration,E.readMessage(H,d.Acceleration.deserializeBinaryFromReader),s.setAcceleration(H);break;default:E.skipField()}return s},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(s,E){var H=void 0;(H=s.getModelAsset())!=null&&E.writeMessage(1,H,m.ExternalFile.serializeBinaryToWriter),(H=n.Message.getField(s,2))!=null&&E.writeBool(2,H),(H=s.getAcceleration())!=null&&E.writeMessage(3,H,d.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return n.Message.getWrapperField(this,m.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return n.Message.getWrapperField(this,d.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(s){return n.Message.setWrapperField(this,3,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(H,3,.5),numFaces:(ee=n.Message.getField(H,4))==null?void 0:ee};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=H.readFloat(),E.setMinDetectionConfidence(ee);break;case 3:ee=H.readFloat(),E.setMinSuppressionThreshold(ee);break;case 4:ee=H.readInt32(),E.setNumFaces(ee);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&H.writeFloat(2,ee),(ee=n.Message.getField(E,3))!=null&&H.writeFloat(3,ee),(ee=n.Message.getField(E,4))!=null&&H.writeInt32(4,ee)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_detector.proto)})(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;const DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(u){var n,A,w,d,m,s,E,H,ee,ae,J,pe,ue;const Mt=u.getScoreList(),nt=u.getLabelIdList(),Ve=u.getLabelList(),it=u.getDisplayNameList(),At={categories:[],keypoints:[]};for(let vt=0;vt<Mt.length;vt++)At.categories.push({score:Mt[vt],index:(n=nt[vt])!==null&&n!==void 0?n:DEFAULT_CATEGORY_INDEX,categoryName:(A=Ve[vt])!==null&&A!==void 0?A:"",displayName:(w=it[vt])!==null&&w!==void 0?w:""});const Ct=(d=u.getLocationData())===null||d===void 0?void 0:d.getBoundingBox();if(Ct&&(At.boundingBox={originX:(m=Ct.getXmin())!==null&&m!==void 0?m:0,originY:(s=Ct.getYmin())!==null&&s!==void 0?s:0,width:(E=Ct.getWidth())!==null&&E!==void 0?E:0,height:(H=Ct.getHeight())!==null&&H!==void 0?H:0}),(ee=u.getLocationData())===null||ee===void 0?void 0:ee.getRelativeKeypointsList().length)for(const vt of u.getLocationData().getRelativeKeypointsList())At.keypoints.push({x:(ae=vt.getX())!==null&&ae!==void 0?ae:0,y:(J=vt.getY())!==null&&J!==void 0?J:0,score:(pe=vt.getScore())!==null&&pe!==void 0?pe:0,label:(ue=vt.getKeypointLabel())!==null&&ue!==void 0?ue:""});return At}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.NormalizedRect",null,w),A.exportSymbol("proto.mediapipe.Rect",null,w),proto.mediapipe.Rect=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Rect,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.NormalizedRect,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(d){return proto.mediapipe.Rect.toObject(d,this)},proto.mediapipe.Rect.toObject=function(d,m){var s,E={xCenter:(s=n.Message.getField(m,1))==null?void 0:s,yCenter:(s=n.Message.getField(m,2))==null?void 0:s,height:(s=n.Message.getField(m,3))==null?void 0:s,width:(s=n.Message.getField(m,4))==null?void 0:s,rotation:n.Message.getFloatingPointFieldWithDefault(m,5,0),rectId:(s=n.Message.getField(m,6))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Rect.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(s,m)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setXCenter(s);break;case 2:s=m.readInt32(),d.setYCenter(s);break;case 3:s=m.readInt32(),d.setHeight(s);break;case 4:s=m.readInt32(),d.setWidth(s);break;case 5:s=m.readFloat(),d.setRotation(s);break;case 6:s=m.readInt64(),d.setRectId(s);break;default:m.skipField()}return d},proto.mediapipe.Rect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s),(s=n.Message.getField(d,4))!=null&&m.writeInt32(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s),(s=n.Message.getField(d,6))!=null&&m.writeInt64(6,s)},proto.mediapipe.Rect.prototype.getXCenter=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rect.prototype.getYCenter=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rect.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rect.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Rect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Rect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Rect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Rect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.Rect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(d){return proto.mediapipe.NormalizedRect.toObject(d,this)},proto.mediapipe.NormalizedRect.toObject=function(d,m){var s,E={xCenter:(s=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:s,yCenter:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,height:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,width:(s=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:s,rotation:n.Message.getFloatingPointFieldWithDefault(m,5,0),rectId:(s=n.Message.getField(m,6))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.NormalizedRect.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readFloat();d.setXCenter(s);break;case 2:s=m.readFloat(),d.setYCenter(s);break;case 3:s=m.readFloat(),d.setHeight(s);break;case 4:s=m.readFloat(),d.setWidth(s);break;case 5:s=m.readFloat(),d.setRotation(s);break;case 6:s=m.readInt64(),d.setRectId(s);break;default:m.skipField()}return d},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeFloat(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeFloat(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s),(s=n.Message.getField(d,6))!=null&&m.writeInt64(6,s)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},A.object.extend(u,proto.mediapipe)})(rect_pb);var task_runner={},graph_runner={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createGraphRunner=u.createMediaPipeLib=u.GraphRunner=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;const n=platform_utils;u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class A{constructor(s,E){this.autoResizeCanvas=!0,this.wasmModule=s,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport=typeof this.wasmModule._addIntToInputStream=="function",E!==void 0?this.wasmModule.canvas=E:typeof OffscreenCanvas=="undefined"||(0,n.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}initializeGraph(s){return ss(this,null,function*(){const E=yield fetch(s),H=yield E.arrayBuffer(),ee=!(s.endsWith(".pbtxt")||s.endsWith(".textproto"));this.setGraph(new Uint8Array(H),ee)})}setGraphFromString(s){this.setGraph(new TextEncoder().encode(s),!1)}setGraph(s,E){const H=s.length,ee=this.wasmModule._malloc(H);this.wasmModule.HEAPU8.set(s,ee),E?this.wasmModule._changeBinaryGraph(H,ee):this.wasmModule._changeTextGraph(H,ee),this.wasmModule._free(ee)}configureAudio(s,E,H,ee,ae){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),ee=ee||"input_audio",this.wrapStringPtr(ee,J=>{ae=ae||"audio_header",this.wrapStringPtr(ae,pe=>{this.wasmModule._configureAudio(J,pe,s,E,H)})})}setAutoResizeCanvas(s){this.autoResizeCanvas=s}setAutoRenderToScreen(s){this.wasmModule._setAutoRenderToScreen(s)}bindTextureToStream(s,E){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");E?this.wasmModule._bindTextureToStream(E):console.assert(this.wasmModule._bindTextureToCanvas());const H=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!H)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let ee,ae;return H.texImage2D(H.TEXTURE_2D,0,H.RGBA,H.RGBA,H.UNSIGNED_BYTE,s),s.videoWidth?(ee=s.videoWidth,ae=s.videoHeight):s.naturalWidth?(ee=s.naturalWidth,ae=s.naturalHeight):(ee=s.width,ae=s.height),!this.autoResizeCanvas||ee===this.wasmModule.canvas.width&&ae===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=ee,this.wasmModule.canvas.height=ae),[ee,ae]}processGl(s,E){const[H,ee]=this.bindTextureToStream(s),ae=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[ae/4]=H,this.wasmModule.HEAPU32[ae/4+1]=ee,this.wasmModule.HEAPF64[ae/8+1]=E,this.wasmModule._processGl(ae),this.wasmModule._free(ae)}wrapStringPtr(s,E){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const H=this.wasmModule.stringToNewUTF8(s);E(H),this.wasmModule._free(H)}wrapStringPtrPtr(s,E){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const H=new Uint32Array(s.length);for(let ae=0;ae<s.length;ae++)H[ae]=this.wasmModule.stringToNewUTF8(s[ae]);const ee=this.wasmModule._malloc(4*H.length);this.wasmModule.HEAPU32.set(H,ee>>2),E(ee);for(const ae of H)this.wasmModule._free(ae);this.wasmModule._free(ee)}getCalculatorGraphConfig(s,E){const H=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(H,ee=>{s(ee)}),this.wrapStringPtr(H,ee=>{this.wasmModule._getGraphConfig(ee,E)}),delete this.wasmModule.simpleListeners[H]}setListener(s,E){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[s]=E}setVectorListener(s,E){let H=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[s]=(ee,ae,J)=>{ae?(E(H,J),H=[]):H.push(ee)}}attachErrorListener(s){this.wasmModule.errorListener=s}attachEmptyPacketListener(s,E){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[s]=E}addAudioToStream(s,E,H){this.addAudioToStreamWithShape(s,0,0,E,H)}addAudioToStreamWithShape(s,E,H,ee,ae){const J=4*s.length;this.audioSize!==J&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(J),this.audioSize=J),this.wasmModule.HEAPF32.set(s,this.audioPtr/4),this.wrapStringPtr(ee,pe=>{this.wasmModule._addAudioToInputStream(this.audioPtr,E,H,pe,ae)})}addGpuBufferToStream(s,E,H){this.wrapStringPtr(E,ee=>{const[ae,J]=this.bindTextureToStream(s,ee);this.wasmModule._addBoundTextureToStream(ee,ae,J,H)})}addBoolToStream(s,E,H){this.wrapStringPtr(E,ee=>{this.wasmModule._addBoolToInputStream(s,ee,H)})}addDoubleToStream(s,E,H){this.wrapStringPtr(E,ee=>{this.wasmModule._addDoubleToInputStream(s,ee,H)})}addFloatToStream(s,E,H){this.wrapStringPtr(E,ee=>{this.wasmModule._addFloatToInputStream(s,ee,H)})}addIntToStream(s,E,H){this.wrapStringPtr(E,ee=>{this.wasmModule._addIntToInputStream(s,ee,H)})}addStringToStream(s,E,H){this.wrapStringPtr(E,ee=>{this.wrapStringPtr(s,ae=>{this.wasmModule._addStringToInputStream(ae,ee,H)})})}addStringRecordToStream(s,E,H){this.wrapStringPtr(E,ee=>{this.wrapStringPtrPtr(Object.keys(s),ae=>{this.wrapStringPtrPtr(Object.values(s),J=>{this.wasmModule._addFlatHashMapToInputStream(ae,J,Object.keys(s).length,ee,H)})})})}addProtoToStream(s,E,H,ee){this.wrapStringPtr(H,ae=>{this.wrapStringPtr(E,J=>{const pe=this.wasmModule._malloc(s.length);this.wasmModule.HEAPU8.set(s,pe),this.wasmModule._addProtoToInputStream(pe,s.length,J,ae,ee),this.wasmModule._free(pe)})})}addEmptyPacketToStream(s,E){this.wrapStringPtr(s,H=>{this.wasmModule._addEmptyPacketToInputStream(H,E)})}addBoolToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addBoolToInputSidePacket(s,H)})}addDoubleToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addDoubleToInputSidePacket(s,H)})}addFloatToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addFloatToInputSidePacket(s,H)})}addIntToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addIntToInputSidePacket(s,H)})}addStringToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wrapStringPtr(s,ee=>{this.wasmModule._addStringToInputSidePacket(ee,H)})})}addProtoToInputSidePacket(s,E,H){this.wrapStringPtr(H,ee=>{this.wrapStringPtr(E,ae=>{const J=this.wasmModule._malloc(s.length);this.wasmModule.HEAPU8.set(s,J),this.wasmModule._addProtoToInputSidePacket(J,s.length,ae,ee),this.wasmModule._free(J)})})}attachBoolListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachBoolListener(H)})}attachBoolVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachBoolVectorListener(H)})}attachIntListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachIntListener(H)})}attachIntVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachIntVectorListener(H)})}attachDoubleListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachDoubleListener(H)})}attachDoubleVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachDoubleVectorListener(H)})}attachFloatListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachFloatListener(H)})}attachFloatVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachFloatVectorListener(H)})}attachStringListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachStringListener(H)})}attachStringVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachStringVectorListener(H)})}attachProtoListener(s,E,H){this.setListener(s,E),this.wrapStringPtr(s,ee=>{this.wasmModule._attachProtoListener(ee,H||!1)})}attachProtoVectorListener(s,E,H){this.setVectorListener(s,E),this.wrapStringPtr(s,ee=>{this.wasmModule._attachProtoVectorListener(ee,H||!1)})}attachAudioListener(s,E,H){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(s,(ee,ae)=>{const J=new Float32Array(ee.buffer,ee.byteOffset,ee.length/4);E(J,ae)}),this.wrapStringPtr(s,ee=>{this.wasmModule._attachAudioListener(ee,H||!1)})}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}function w(m){return ss(this,null,function*(){if(typeof importScripts!="function"){const s=document.createElement("script");return s.setAttribute("src",m),s.setAttribute("crossorigin","anonymous"),new Promise(E=>{s.addEventListener("load",()=>{E()},!1),s.addEventListener("error",()=>{E()},!1),document.body.appendChild(s)})}importScripts(m.toString())})}function d(m,s,E,H,ee){return ss(this,null,function*(){const ae=[];if(s&&ae.push(s),E&&ae.push(E),ae.length&&(yield Promise.all(ae.map(w))),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&ee){const pe=self.Module;pe.locateFile=ee.locateFile,ee.mainScriptUrlOrBlob&&(pe.mainScriptUrlOrBlob=ee.mainScriptUrlOrBlob)}const J=yield self.ModuleFactory(self.Module||ee);return self.ModuleFactory=self.Module=void 0,new m(J,H)})}u.GraphRunner=A,u.createMediaPipeLib=d,u.createGraphRunner=function(m,s,E,H){return ss(this,null,function*(){return d(A,m,s,E,H)})}})(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(u){return class extends u{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;const inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,NO_ASSETS=void 0,FREE_MEMORY_STREAM="free_memory",UNUSED_STREAM_SUFFIX="_unused_out",CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner);class CachedGraphRunner extends CachedGraphRunnerType{}function createTaskRunner(u,n,A,w){return ss(this,null,function*(){const d={locateFile:()=>A.wasmBinaryPath.toString()},m=yield(0,graph_runner_1$1.createMediaPipeLib)(u,A.wasmLoaderPath,NO_ASSETS,n,d);return yield m.setOptions(w),m})}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;class TaskRunner{static createInstance(n,A,w,d){return ss(this,null,function*(){return createTaskRunner(n,A,w,d)})}constructor(n){this.graphRunner=n,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(n){var A,w,d,m,s,E;const H=n.baseOptions||{};if(!((A=n.baseOptions)===null||A===void 0)&&A.modelAssetBuffer&&(!((w=n.baseOptions)===null||w===void 0)&&w.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(!((d=this.baseOptions.getModelAsset())===null||d===void 0)&&d.hasFileContent()||!((m=this.baseOptions.getModelAsset())===null||m===void 0)&&m.hasFileName()||!((s=n.baseOptions)===null||s===void 0)&&s.modelAssetBuffer||!((E=n.baseOptions)===null||E===void 0)&&E.modelAssetPath))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(H),H.modelAssetPath?fetch(H.modelAssetPath.toString()).then(ee=>{if(ee.ok)return ee.arrayBuffer();throw new Error(`Failed to fetch model: ${H.modelAssetPath} (${ee.status})`)}).then(ee=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch(ae){}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array(ee),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()}):(this.setExternalFile(H.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}onGraphRefreshed(){}getCalculatorGraphConfig(){let n;if(this.graphRunner.getCalculatorGraphConfig(A=>{n=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(A)}),!n)throw new Error("Failed to retrieve CalculatorGraphConfig");return n}setGraph(n,A){this.graphRunner.attachErrorListener((w,d)=>{this.processingErrors.push(new Error(d))}),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(n,A),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(n){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,n)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{const n=this.processingErrors.length;if(n===1)throw new Error(this.processingErrors[0].message);if(n>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map(A=>A.message).join(", "))}finally{this.processingErrors=[]}}setExternalFile(n){const A=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;typeof n=="string"?(A.setFileName(n),A.clearFileContent()):n instanceof Uint8Array&&(A.setFileContent(n),A.clearFileName()),this.baseOptions.setModelAsset(A)}setAcceleration(n){let A=this.baseOptions.getAcceleration();A||(A=new acceleration_pb_1.Acceleration,A.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in n&&(n.delegate==="GPU"?A.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):A.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(A)}addKeepaliveNode(n){this.keepaliveNode=new calculator_pb_1.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(FREE_MEMORY_STREAM),this.keepaliveNode.addOutputStream(FREE_MEMORY_STREAM+UNUSED_STREAM_SUFFIX),n.addInputStream(FREE_MEMORY_STREAM),n.addNode(this.keepaliveNode)}keepStreamAlive(n){this.keepaliveNode.addInputStream(n),this.keepaliveNode.addOutputStream(n+UNUSED_STREAM_SUFFIX)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,FREE_MEMORY_STREAM,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}}task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(u){return class extends u{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(n,A,w){this.wrapStringPtr(A,d=>{const[m,s]=this.bindTextureToStream(n,d);this.wasmImageModule._addBoundTextureAsImageToStream(d,m,s,w)})}attachImageListener(n,A){this.setListener(n,A),this.wrapStringPtr(n,w=>{this.wasmImageModule._attachImageListener(w)})}attachImageVectorListener(n,A){this.setVectorListener(n,A),this.wrapStringPtr(n,w=>{this.wasmImageModule._attachImageVectorListener(w)})}}}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;const rect_pb_1=rect_pb,task_runner_1=task_runner,image_1$1=image,image_shader_context_1=image_shader_context,mask_1$1=mask,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner));class VisionGraphRunner extends GraphRunnerVisionType{}function createCanvas(){return typeof OffscreenCanvas!="undefined"&&!(0,platform_utils_1.isWebKit)()?void 0:document.createElement("canvas")}vision_task_runner.VisionGraphRunner=VisionGraphRunner;class VisionTaskRunner extends task_runner_1.TaskRunner{static createVisionInstance(n,A,w){return ss(this,null,function*(){var d;const m=(d=w.canvas)!==null&&d!==void 0?d:createCanvas();return task_runner_1.TaskRunner.createInstance(n,m,A,w)})}constructor(n,A,w,d){super(n),this.graphRunner=n,this.imageStreamName=A,this.normRectStreamName=w,this.roiAllowed=d,this.shaderContext=new image_shader_context_1.MPImageShaderContext}applyOptions(n){if("runningMode"in n){const A=!!n.runningMode&&n.runningMode!=="IMAGE";this.baseOptions.setUseStreamMode(A)}if(n.canvas!==void 0&&this.graphRunner.wasmModule.canvas!==n.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(n)}processImageData(n,A){var w;if(!((w=this.baseOptions)===null||w===void 0)&&w.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(n,A,this.getSynctheticTimestamp())}processVideoData(n,A,w){var d;if(!(!((d=this.baseOptions)===null||d===void 0)&&d.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(n,A,w)}getImageSourceSize(n){return n.videoWidth!==void 0?[n.videoWidth,n.videoHeight]:n.naturalWidth!==void 0?[n.naturalWidth,n.naturalHeight]:[n.width,n.height]}convertToNormalizedRect(n,A){const w=new rect_pb_1.NormalizedRect;if(A!=null&&A.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");const d=A.regionOfInterest;if(d.left>=d.right||d.top>=d.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(d.left<0||d.top<0||d.right>1||d.bottom>1)throw new Error("Expected RectF values to be in [0,1].");w.setXCenter((d.left+d.right)/2),w.setYCenter((d.top+d.bottom)/2),w.setWidth(d.right-d.left),w.setHeight(d.bottom-d.top)}else w.setXCenter(.5),w.setYCenter(.5),w.setWidth(1),w.setHeight(1);if(A!=null&&A.rotationDegrees){if((A==null?void 0:A.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90\xB0.");if(w.setRotation(-Math.PI*A.rotationDegrees/180),(A==null?void 0:A.rotationDegrees)%180!=0){const[d,m]=this.getImageSourceSize(n),s=w.getHeight()*m/d,E=w.getWidth()*d/m;w.setWidth(s),w.setHeight(E)}}return w}process(n,A,w){const d=this.convertToNormalizedRect(n,A);this.graphRunner.addProtoToStream(d.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,w),this.graphRunner.addGpuBufferAsImageToStream(n,this.imageStreamName,w!=null?w:performance.now()),this.finishProcessing()}convertToMPImage(n,A){const{data:w,width:d,height:m}=n,s=d*m;let E;if(w instanceof Uint8Array)if(w.length===3*s){const ee=new Uint8ClampedArray(4*s);for(let ae=0;ae<s;++ae)ee[4*ae]=w[3*ae],ee[4*ae+1]=w[3*ae+1],ee[4*ae+2]=w[3*ae+2],ee[4*ae+3]=255;E=new ImageData(ee,d,m)}else{if(w.length!==4*s)throw new Error("Unsupported channel count: "+w.length/s);E=new ImageData(new Uint8ClampedArray(w.buffer,w.byteOffset,w.length),d,m)}else{if(!(w instanceof WebGLTexture))throw new Error(`Unsupported format: ${w.constructor.name}`);E=w}const H=new image_1$1.MPImage([E],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,m);return A?H.clone():H}convertToMPMask(n,A){const{data:w,width:d,height:m}=n,s=d*m;let E;if(w instanceof Uint8Array||w instanceof Float32Array){if(w.length!==s)throw new Error("Unsupported channel count: "+w.length/s);E=w}else E=w;const H=new mask_1$1.MPMask([E],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,m);return A?H.clone():H}close(){this.shaderContext.close(),super.close()}}vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Mt,nt,Ve,it){it===void 0&&(it=Ve);var At=Object.getOwnPropertyDescriptor(nt,Ve);At&&!("get"in At?!nt.__esModule:At.writable||At.configurable)||(At={enumerable:!0,get:function(){return nt[Ve]}}),Object.defineProperty(Mt,it,At)}:function(Mt,nt,Ve,it){it===void 0&&(it=Ve),Mt[it]=nt[Ve]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Mt,nt){for(var Ve in Mt)Ve==="default"||Object.prototype.hasOwnProperty.call(nt,Ve)||n(nt,Mt,Ve)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceDetector=void 0;const w=calculator_pb,d=calculator_options_pb,m=detection_pb,s=base_options_pb,E=face_detector_graph_options_pb,H=detection_result,ee=vision_task_runner,ae="image_in",J="norm_rect_in",pe="detections";A(face_detector_options,u),A(face_detector_result,u);class ue extends ee.VisionTaskRunner{static createFromOptions(nt,Ve){return ee.VisionTaskRunner.createVisionInstance(ue,nt,Ve)}static createFromModelBuffer(nt,Ve){return ee.VisionTaskRunner.createVisionInstance(ue,nt,{baseOptions:{modelAssetBuffer:Ve}})}static createFromModelPath(nt,Ve){return ss(this,null,function*(){return ee.VisionTaskRunner.createVisionInstance(ue,nt,{baseOptions:{modelAssetPath:Ve}})})}constructor(nt,Ve){super(new ee.VisionGraphRunner(nt,Ve),ae,J,!1),this.result={detections:[]},this.options=new E.FaceDetectorGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(nt){this.options.setBaseOptions(nt)}setOptions(nt){var Ve,it;return"minDetectionConfidence"in nt&&this.options.setMinDetectionConfidence((Ve=nt.minDetectionConfidence)!==null&&Ve!==void 0?Ve:.5),"minSuppressionThreshold"in nt&&this.options.setMinSuppressionThreshold((it=nt.minSuppressionThreshold)!==null&&it!==void 0?it:.3),this.applyOptions(nt)}detect(nt,Ve){return this.result={detections:[]},this.processImageData(nt,Ve),this.result}detectForVideo(nt,Ve,it){return this.result={detections:[]},this.processVideoData(nt,it,Ve),this.result}addJsFaceDetections(nt){for(const Ve of nt){const it=m.Detection.deserializeBinary(Ve);this.result.detections.push((0,H.convertFromDetectionProto)(it))}}refreshGraph(){const nt=new w.CalculatorGraphConfig;nt.addInputStream(ae),nt.addInputStream(J),nt.addOutputStream(pe);const Ve=new d.CalculatorOptions;Ve.setExtension(E.FaceDetectorGraphOptions.ext,this.options);const it=new w.CalculatorGraphConfig.Node;it.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),it.addInputStream("IMAGE:"+ae),it.addInputStream("NORM_RECT:"+J),it.addOutputStream("DETECTIONS:"+pe),it.setOptions(Ve),nt.addNode(it),this.graphRunner.attachProtoVectorListener(pe,(Ct,vt)=>{this.addJsFaceDetections(Ct),this.setLatestOutputTimestamp(vt)}),this.graphRunner.attachEmptyPacketListener(pe,Ct=>{this.setLatestOutputTimestamp(Ct)});const At=nt.serializeBinary();this.setGraph(new Uint8Array(At),!0)}}u.FaceDetector=ue}(face_detector);var face_landmarker={},classification_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Classification",null,w),A.exportSymbol("proto.mediapipe.ClassificationList",null,w),A.exportSymbol("proto.mediapipe.ClassificationListCollection",null,w),proto.mediapipe.Classification=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Classification,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},A.inherits(proto.mediapipe.ClassificationList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.ClassificationListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(d){return proto.mediapipe.Classification.toObject(d,this)},proto.mediapipe.Classification.toObject=function(d,m){var s,E={index:(s=n.Message.getField(m,1))==null?void 0:s,score:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,label:(s=n.Message.getField(m,3))==null?void 0:s,displayName:(s=n.Message.getField(m,4))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Classification.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(s,m)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setIndex(s);break;case 2:s=m.readFloat(),d.setScore(s);break;case 3:s=m.readString(),d.setLabel(s);break;case 4:s=m.readString(),d.setDisplayName(s);break;default:m.skipField()}return d},proto.mediapipe.Classification.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeString(3,s),(s=n.Message.getField(d,4))!=null&&m.writeString(4,s)},proto.mediapipe.Classification.prototype.getIndex=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Classification.prototype.clearIndex=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Classification.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Classification.prototype.clearScore=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Classification.prototype.getLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Classification.prototype.clearLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Classification.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.ClassificationList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(d){return proto.mediapipe.ClassificationList.toObject(d,this)},proto.mediapipe.ClassificationList.toObject=function(d,m){var s={classificationList:n.Message.toObjectList(m.getClassificationList(),proto.mediapipe.Classification.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.ClassificationList.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(s,m)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.Classification;m.readMessage(s,proto.mediapipe.Classification.deserializeBinaryFromReader),d.addClassification(s)}else m.skipField();return d},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(d,m){var s;(s=d.getClassificationList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationList.prototype.addClassification=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Classification,m)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(d){return proto.mediapipe.ClassificationListCollection.toObject(d,this)},proto.mediapipe.ClassificationListCollection.toObject=function(d,m){var s={classificationListList:n.Message.toObjectList(m.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(s,m)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.ClassificationList;m.readMessage(s,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),d.addClassificationList(s)}else m.skipField();return d},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(d,m){var s;(s=d.getClassificationListList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.ClassificationList,m)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},A.object.extend(u,proto.mediapipe)})(classification_pb);var landmark_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Landmark",null,w),A.exportSymbol("proto.mediapipe.LandmarkList",null,w),A.exportSymbol("proto.mediapipe.LandmarkListCollection",null,w),A.exportSymbol("proto.mediapipe.NormalizedLandmark",null,w),A.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,w),A.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,w),proto.mediapipe.Landmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Landmark,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},A.inherits(proto.mediapipe.LandmarkList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.LandmarkListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.NormalizedLandmark,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},A.inherits(proto.mediapipe.NormalizedLandmarkList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.NormalizedLandmarkListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(d){return proto.mediapipe.Landmark.toObject(d,this)},proto.mediapipe.Landmark.toObject=function(d,m){var s,E={x:(s=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:s,y:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,z:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,visibility:(s=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:s,presence:(s=n.Message.getOptionalFloatingPointField(m,5))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Landmark.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(s,m)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readFloat();d.setX(s);break;case 2:s=m.readFloat(),d.setY(s);break;case 3:s=m.readFloat(),d.setZ(s);break;case 4:s=m.readFloat(),d.setVisibility(s);break;case 5:s=m.readFloat(),d.setPresence(s);break;default:m.skipField()}return d},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeFloat(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeFloat(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s)},proto.mediapipe.Landmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Landmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Landmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Landmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Landmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Landmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Landmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Landmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.LandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(d){return proto.mediapipe.LandmarkList.toObject(d,this)},proto.mediapipe.LandmarkList.toObject=function(d,m){var s={landmarkList:n.Message.toObjectList(m.getLandmarkList(),proto.mediapipe.Landmark.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.LandmarkList.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(s,m)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.Landmark;m.readMessage(s,proto.mediapipe.Landmark.deserializeBinaryFromReader),d.addLandmark(s)}else m.skipField();return d},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Landmark,m)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.LandmarkListCollection.toObject(d,this)},proto.mediapipe.LandmarkListCollection.toObject=function(d,m){var s={landmarkListList:n.Message.toObjectList(m.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(s,m)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.LandmarkList;m.readMessage(s,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),d.addLandmarkList(s)}else m.skipField();return d},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkListList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.LandmarkList,m)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmark.toObject(d,this)},proto.mediapipe.NormalizedLandmark.toObject=function(d,m){var s,E={x:(s=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:s,y:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,z:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,visibility:(s=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:s,presence:(s=n.Message.getOptionalFloatingPointField(m,5))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readFloat();d.setX(s);break;case 2:s=m.readFloat(),d.setY(s);break;case 3:s=m.readFloat(),d.setZ(s);break;case 4:s=m.readFloat(),d.setVisibility(s);break;case 5:s=m.readFloat(),d.setPresence(s);break;default:m.skipField()}return d},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeFloat(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeFloat(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkList.toObject(d,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(d,m){var s={landmarkList:n.Message.toObjectList(m.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.NormalizedLandmark;m.readMessage(s,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),d.addLandmark(s)}else m.skipField();return d},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmark,m)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(d,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(d,m){var s={landmarkListList:n.Message.toObjectList(m.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.NormalizedLandmarkList;m.readMessage(s,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),d.addLandmarkList(s)}else m.skipField();return d},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkListList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmarkList,m)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},A.object.extend(u,proto.mediapipe)})(landmark_pb);var face_geometry_pb={},matrix_data_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.MatrixData",null,w),A.exportSymbol("proto.mediapipe.MatrixData.Layout",null,w),proto.mediapipe.MatrixData=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},A.inherits(proto.mediapipe.MatrixData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(d){return proto.mediapipe.MatrixData.toObject(d,this)},proto.mediapipe.MatrixData.toObject=function(d,m){var s,E={rows:(s=n.Message.getField(m,1))==null?void 0:s,cols:(s=n.Message.getField(m,2))==null?void 0:s,packedDataList:(s=n.Message.getRepeatedFloatingPointField(m,3))==null?void 0:s,layout:n.Message.getFieldWithDefault(m,4,0)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.MatrixData.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(s,m)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setRows(s);break;case 2:s=m.readInt32(),d.setCols(s);break;case 3:for(var E=m.isDelimited()?m.readPackedFloat():[m.readFloat()],H=0;H<E.length;H++)d.addPackedData(E[H]);break;case 4:s=m.readEnum(),d.setLayout(s);break;default:m.skipField()}return d},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=d.getPackedDataList()).length>0&&m.writePackedFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeEnum(4,s)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.MatrixData.prototype.getCols=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(matrix_data_pb);var mesh_3d_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,w),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(d,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(d,m){var s,E={vertexType:(s=n.Message.getField(m,1))==null?void 0:s,primitiveType:(s=n.Message.getField(m,2))==null?void 0:s,vertexBufferList:(s=n.Message.getRepeatedFloatingPointField(m,3))==null?void 0:s,indexBufferList:(s=n.Message.getRepeatedField(m,4))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readEnum();d.setVertexType(s);break;case 2:s=m.readEnum(),d.setPrimitiveType(s);break;case 3:for(var E=m.isDelimited()?m.readPackedFloat():[m.readFloat()],H=0;H<E.length;H++)d.addVertexBuffer(E[H]);break;case 4:for(E=m.isDelimited()?m.readPackedUint32():[m.readUint32()],H=0;H<E.length;H++)d.addIndexBuffer(E[H]);break;default:m.skipField()}return d},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeEnum(1,s),(s=n.Message.getField(d,2))!=null&&m.writeEnum(2,s),(s=d.getVertexBufferList()).length>0&&m.writeRepeatedFloat(3,s),(s=d.getIndexBufferList()).length>0&&m.writeRepeatedUint32(4,s)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(d,m){return n.Message.addToRepeatedField(this,4,d,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)})(mesh_3d_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=matrix_data_pb;A.object.extend(proto,d);var m=mesh_3d_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,w),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(s,E){var H,ee={mesh:(H=E.getMesh())&&m.Mesh3d.toObject(s,H),poseTransformMatrix:(H=E.getPoseTransformMatrix())&&d.MatrixData.toObject(s,H)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=new m.Mesh3d;E.readMessage(H,m.Mesh3d.deserializeBinaryFromReader),s.setMesh(H);break;case 2:H=new d.MatrixData,E.readMessage(H,d.MatrixData.deserializeBinaryFromReader),s.setPoseTransformMatrix(H);break;default:E.skipField()}return s},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(s,E){var H=void 0;(H=s.getMesh())!=null&&E.writeMessage(1,H,m.Mesh3d.serializeBinaryToWriter),(H=s.getPoseTransformMatrix())!=null&&E.writeMessage(2,H,d.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return n.Message.getWrapperField(this,m.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return n.Message.getWrapperField(this,d.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(s){return n.Message.setWrapperField(this,2,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=external_file_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,w),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(s,E){var H,ee={metadataFile:(H=E.getMetadataFile())&&m.ExternalFile.toObject(s,H)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var H=new m.ExternalFile;E.readMessage(H,m.ExternalFile.deserializeBinaryFromReader),s.setMetadataFile(H)}else E.skipField();return s},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(s,E){var H;(H=s.getMetadataFile())!=null&&E.writeMessage(1,H,m.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return n.Message.getWrapperField(this,m.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry)})(geometry_pipeline_calculator_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=geometry_pipeline_calculator_pb;A.object.extend(proto,m),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,w),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(s,E){var H,ee={geometryPipelineOptions:(H=E.getGeometryPipelineOptions())&&m.FaceGeometryPipelineCalculatorOptions.toObject(s,H)};return s&&(ee.$jspbMessageInstance=E),ee}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var H=new m.FaceGeometryPipelineCalculatorOptions;E.readMessage(H,m.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),s.setGeometryPipelineOptions(H)}else E.skipField();return s},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(s,E){var H;(H=s.getGeometryPipelineOptions())!=null&&E.writeMessage(1,H,m.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return n.Message.getWrapperField(this,m.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,w),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee)};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)if(H.getFieldNumber()===1){var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee)}else H.skipField();return E},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(E,H){var ee;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)})(face_blendshapes_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=face_blendshapes_graph_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(H,ee){var ae,J={baseOptions:(ae=ee.getBaseOptions())&&s.BaseOptions.toObject(H,ae),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(ee,2,.5),smoothLandmarks:(ae=n.Message.getBooleanField(ee,4))==null?void 0:ae,faceBlendshapesGraphOptions:(ae=ee.getFaceBlendshapesGraphOptions())&&E.FaceBlendshapesGraphOptions.toObject(H,ae)};return H&&(J.$jspbMessageInstance=ee),J}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(H){var ee=new n.BinaryReader(H),ae=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(ae,ee)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(H,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var ae=new s.BaseOptions;ee.readMessage(ae,s.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ae);break;case 2:ae=ee.readFloat(),H.setMinDetectionConfidence(ae);break;case 4:ae=ee.readBool(),H.setSmoothLandmarks(ae);break;case 3:ae=new E.FaceBlendshapesGraphOptions,ee.readMessage(ae,E.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),H.setFaceBlendshapesGraphOptions(ae);break;default:ee.skipField()}return H},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(H,ee){var ae=void 0;(ae=H.getBaseOptions())!=null&&ee.writeMessage(1,ae,s.BaseOptions.serializeBinaryToWriter),(ae=n.Message.getField(H,2))!=null&&ee.writeFloat(2,ae),(ae=n.Message.getField(H,4))!=null&&ee.writeBool(4,ae),(ae=H.getFaceBlendshapesGraphOptions())!=null&&ee.writeMessage(3,ae,E.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(H){return n.Message.setField(this,2,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(H){return n.Message.setField(this,4,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(H){return n.Message.setWrapperField(this,3,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=face_detector_graph_options_pb;A.object.extend(proto,E);var H=face_geometry_graph_options_pb;A.object.extend(proto,H);var ee=face_landmarks_detector_graph_options_pb;A.object.extend(proto,ee),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,w),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(ae){n.Message.initialize(this,ae,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(ae){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(ae,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(ae,J){var pe,ue={baseOptions:(pe=J.getBaseOptions())&&s.BaseOptions.toObject(ae,pe),faceDetectorGraphOptions:(pe=J.getFaceDetectorGraphOptions())&&E.FaceDetectorGraphOptions.toObject(ae,pe),faceLandmarksDetectorGraphOptions:(pe=J.getFaceLandmarksDetectorGraphOptions())&&ee.FaceLandmarksDetectorGraphOptions.toObject(ae,pe),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(J,4,.5),faceGeometryGraphOptions:(pe=J.getFaceGeometryGraphOptions())&&H.FaceGeometryGraphOptions.toObject(ae,pe)};return ae&&(ue.$jspbMessageInstance=J),ue}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(ae){var J=new n.BinaryReader(ae),pe=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(pe,J)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(ae,J){for(;J.nextField()&&!J.isEndGroup();)switch(J.getFieldNumber()){case 1:var pe=new s.BaseOptions;J.readMessage(pe,s.BaseOptions.deserializeBinaryFromReader),ae.setBaseOptions(pe);break;case 2:pe=new E.FaceDetectorGraphOptions,J.readMessage(pe,E.FaceDetectorGraphOptions.deserializeBinaryFromReader),ae.setFaceDetectorGraphOptions(pe);break;case 3:pe=new ee.FaceLandmarksDetectorGraphOptions,J.readMessage(pe,ee.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),ae.setFaceLandmarksDetectorGraphOptions(pe);break;case 4:pe=J.readFloat(),ae.setMinTrackingConfidence(pe);break;case 5:pe=new H.FaceGeometryGraphOptions,J.readMessage(pe,H.FaceGeometryGraphOptions.deserializeBinaryFromReader),ae.setFaceGeometryGraphOptions(pe);break;default:J.skipField()}return ae},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var ae=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,ae),ae.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(ae,J){var pe=void 0;(pe=ae.getBaseOptions())!=null&&J.writeMessage(1,pe,s.BaseOptions.serializeBinaryToWriter),(pe=ae.getFaceDetectorGraphOptions())!=null&&J.writeMessage(2,pe,E.FaceDetectorGraphOptions.serializeBinaryToWriter),(pe=ae.getFaceLandmarksDetectorGraphOptions())!=null&&J.writeMessage(3,pe,ee.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),(pe=n.Message.getField(ae,4))!=null&&J.writeFloat(4,pe),(pe=ae.getFaceGeometryGraphOptions())!=null&&J.writeMessage(5,pe,H.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(ae){return n.Message.setWrapperField(this,1,ae)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(ae){return n.Message.setWrapperField(this,2,ae)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,ee.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(ae){return n.Message.setWrapperField(this,3,ae)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(ae){return n.Message.setField(this,4,ae)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return n.Message.getWrapperField(this,H.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(ae){return n.Message.setWrapperField(this,5,ae)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;const DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(u,n=DEFAULT_INDEX$1,A=""){return{categories:u.map(w=>{var d,m,s,E;return{index:(d=w.getIndex())!==null&&d!==void 0?d:DEFAULT_INDEX$1,score:(m=w.getScore())!==null&&m!==void 0?m:DEFAULT_SCORE,categoryName:(s=w.getLabel())!==null&&s!==void 0?s:"",displayName:(E=w.getDisplayName())!==null&&E!==void 0?E:""}}),headIndex:n,headName:A}}function convertFromClassificationsProto(u){var n,A;return convertFromClassifications((A=(n=u.getClassificationList())===null||n===void 0?void 0:n.getClassificationList())!==null&&A!==void 0?A:[],u.getHeadIndex(),u.getHeadName())}function convertFromClassificationResultProto(u){const n={classifications:u.getClassificationsList().map(A=>convertFromClassificationsProto(A))};return u.hasTimestampMs()&&(n.timestampMs=u.getTimestampMs()),n}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var landmark_result={};function convertToLandmarks(u){var n,A,w;const d=[];for(const m of u.getLandmarkList())d.push({x:(n=m.getX())!==null&&n!==void 0?n:0,y:(A=m.getY())!==null&&A!==void 0?A:0,z:(w=m.getZ())!==null&&w!==void 0?w:0});return d}function convertToWorldLandmarks(u){var n,A,w;const d=[];for(const m of u.getLandmarkList())d.push({x:(n=m.getX())!==null&&n!==void 0?n:0,y:(A=m.getY())!==null&&A!==void 0?A:0,z:(w=m.getZ())!==null&&w!==void 0?w:0});return d}Object.defineProperty(landmark_result,"__esModule",{value:!0}),landmark_result.convertToWorldLandmarks=landmark_result.convertToLandmarks=void 0,landmark_result.convertToLandmarks=convertToLandmarks,landmark_result.convertToWorldLandmarks=convertToWorldLandmarks;var face_landmarks_connections={},exports;exports=face_landmarks_connections,Object.defineProperty(exports,"__esModule",{value:!0}),exports.FACE_LANDMARKS_TESSELATION=exports.FACE_LANDMARKS_CONTOURS=exports.FACE_LANDMARKS_FACE_OVAL=exports.FACE_LANDMARKS_RIGHT_IRIS=exports.FACE_LANDMARKS_RIGHT_EYEBROW=exports.FACE_LANDMARKS_RIGHT_EYE=exports.FACE_LANDMARKS_LEFT_IRIS=exports.FACE_LANDMARKS_LEFT_EYEBROW=exports.FACE_LANDMARKS_LEFT_EYE=exports.FACE_LANDMARKS_LIPS=void 0,exports.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],exports.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],exports.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],exports.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],exports.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],exports.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],exports.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],exports.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],exports.FACE_LANDMARKS_CONTOURS=[...exports.FACE_LANDMARKS_LIPS,...exports.FACE_LANDMARKS_LEFT_EYE,...exports.FACE_LANDMARKS_LEFT_EYEBROW,...exports.FACE_LANDMARKS_RIGHT_EYE,...exports.FACE_LANDMARKS_RIGHT_EYEBROW,...exports.FACE_LANDMARKS_FACE_OVAL],exports.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Pt,wt,qt,Ft){Ft===void 0&&(Ft=qt);var An=Object.getOwnPropertyDescriptor(wt,qt);An&&!("get"in An?!wt.__esModule:An.writable||An.configurable)||(An={enumerable:!0,get:function(){return wt[qt]}}),Object.defineProperty(Pt,Ft,An)}:function(Pt,wt,qt,Ft){Ft===void 0&&(Ft=qt),Pt[Ft]=wt[qt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Pt,wt){for(var qt in Pt)qt==="default"||Object.prototype.hasOwnProperty.call(wt,qt)||n(wt,Pt,qt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceLandmarker=void 0;const w=calculator_pb,d=calculator_options_pb,m=classification_pb,s=landmark_pb,E=base_options_pb,H=face_detector_graph_options_pb,ee=face_geometry_pb,ae=face_landmarker_graph_options_pb,J=face_landmarks_detector_graph_options_pb,pe=classifier_result,ue=landmark_result,Mt=vision_task_runner,nt=face_landmarks_connections;A(face_landmarker_options,u),A(face_landmarker_result,u);const Ve="image_in",it="norm_rect",At="face_landmarks",Ct="blendshapes",vt="face_geometry",pt=.5;class ft extends Mt.VisionTaskRunner{static createFromOptions(wt,qt){return Mt.VisionTaskRunner.createVisionInstance(ft,wt,qt)}static createFromModelBuffer(wt,qt){return Mt.VisionTaskRunner.createVisionInstance(ft,wt,{baseOptions:{modelAssetBuffer:qt}})}static createFromModelPath(wt,qt){return Mt.VisionTaskRunner.createVisionInstance(ft,wt,{baseOptions:{modelAssetPath:qt}})}constructor(wt,qt){super(new Mt.VisionGraphRunner(wt,qt),Ve,it,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new ae.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.faceLandmarksDetectorGraphOptions=new J.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new H.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(wt){this.options.setBaseOptions(wt)}setOptions(wt){var qt,Ft,An,rr;return"numFaces"in wt&&this.faceDetectorGraphOptions.setNumFaces((qt=wt.numFaces)!==null&&qt!==void 0?qt:1),"minFaceDetectionConfidence"in wt&&this.faceDetectorGraphOptions.setMinDetectionConfidence((Ft=wt.minFaceDetectionConfidence)!==null&&Ft!==void 0?Ft:pt),"minTrackingConfidence"in wt&&this.options.setMinTrackingConfidence((An=wt.minTrackingConfidence)!==null&&An!==void 0?An:pt),"minFacePresenceConfidence"in wt&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence((rr=wt.minFacePresenceConfidence)!==null&&rr!==void 0?rr:pt),"outputFaceBlendshapes"in wt&&(this.outputFaceBlendshapes=!!wt.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in wt&&(this.outputFacialTransformationMatrixes=!!wt.outputFacialTransformationMatrixes),this.applyOptions(wt)}detect(wt,qt){return this.resetResults(),this.processImageData(wt,qt),this.result}detectForVideo(wt,qt,Ft){return this.resetResults(),this.processVideoData(wt,Ft,qt),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(pt),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(pt),this.options.setMinTrackingConfidence(pt)}addJsLandmarks(wt){for(const qt of wt){const Ft=s.NormalizedLandmarkList.deserializeBinary(qt);this.result.faceLandmarks.push((0,ue.convertToLandmarks)(Ft))}}addBlenshape(wt){var qt;if(this.outputFaceBlendshapes)for(const Ft of wt){const An=m.ClassificationList.deserializeBinary(Ft);this.result.faceBlendshapes.push((0,pe.convertFromClassifications)((qt=An.getClassificationList())!==null&&qt!==void 0?qt:[]))}}addFacialTransformationMatrixes(wt){var qt,Ft,An;if(this.outputFacialTransformationMatrixes)for(const rr of wt){const xr=ee.FaceGeometry.deserializeBinary(rr).getPoseTransformMatrix();xr&&this.result.facialTransformationMatrixes.push({rows:(qt=xr.getRows())!==null&&qt!==void 0?qt:0,columns:(Ft=xr.getCols())!==null&&Ft!==void 0?Ft:0,data:(An=xr.getPackedDataList())!==null&&An!==void 0?An:[]})}}refreshGraph(){const wt=new w.CalculatorGraphConfig;wt.addInputStream(Ve),wt.addInputStream(it),wt.addOutputStream(At);const qt=new d.CalculatorOptions;qt.setExtension(ae.FaceLandmarkerGraphOptions.ext,this.options);const Ft=new w.CalculatorGraphConfig.Node;Ft.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Ft.addInputStream("IMAGE:"+Ve),Ft.addInputStream("NORM_RECT:"+it),Ft.addOutputStream("NORM_LANDMARKS:"+At),Ft.setOptions(qt),wt.addNode(Ft),this.graphRunner.attachProtoVectorListener(At,(rr,xr)=>{this.addJsLandmarks(rr),this.setLatestOutputTimestamp(xr)}),this.graphRunner.attachEmptyPacketListener(At,rr=>{this.setLatestOutputTimestamp(rr)}),this.outputFaceBlendshapes&&(wt.addOutputStream(Ct),Ft.addOutputStream("BLENDSHAPES:"+Ct),this.graphRunner.attachProtoVectorListener(Ct,(rr,xr)=>{this.addBlenshape(rr),this.setLatestOutputTimestamp(xr)}),this.graphRunner.attachEmptyPacketListener(Ct,rr=>{this.setLatestOutputTimestamp(rr)})),this.outputFacialTransformationMatrixes&&(wt.addOutputStream(vt),Ft.addOutputStream("FACE_GEOMETRY:"+vt),this.graphRunner.attachProtoVectorListener(vt,(rr,xr)=>{this.addFacialTransformationMatrixes(rr),this.setLatestOutputTimestamp(xr)}),this.graphRunner.attachEmptyPacketListener(vt,rr=>{this.setLatestOutputTimestamp(rr)}));const An=wt.serializeBinary();this.setGraph(new Uint8Array(An),!0)}}u.FaceLandmarker=ft,ft.FACE_LANDMARKS_LIPS=nt.FACE_LANDMARKS_LIPS,ft.FACE_LANDMARKS_LEFT_EYE=nt.FACE_LANDMARKS_LEFT_EYE,ft.FACE_LANDMARKS_LEFT_EYEBROW=nt.FACE_LANDMARKS_LEFT_EYEBROW,ft.FACE_LANDMARKS_LEFT_IRIS=nt.FACE_LANDMARKS_LEFT_IRIS,ft.FACE_LANDMARKS_RIGHT_EYE=nt.FACE_LANDMARKS_RIGHT_EYE,ft.FACE_LANDMARKS_RIGHT_EYEBROW=nt.FACE_LANDMARKS_RIGHT_EYEBROW,ft.FACE_LANDMARKS_RIGHT_IRIS=nt.FACE_LANDMARKS_RIGHT_IRIS,ft.FACE_LANDMARKS_FACE_OVAL=nt.FACE_LANDMARKS_FACE_OVAL,ft.FACE_LANDMARKS_CONTOURS=nt.FACE_LANDMARKS_CONTOURS,ft.FACE_LANDMARKS_TESSELATION=nt.FACE_LANDMARKS_TESSELATION}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=face_landmarker_graph_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,w),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(H,ee){var ae,J={baseOptions:(ae=ee.getBaseOptions())&&s.BaseOptions.toObject(H,ae),faceLandmarkerGraphOptions:(ae=ee.getFaceLandmarkerGraphOptions())&&E.FaceLandmarkerGraphOptions.toObject(H,ae),faceAlignmentSize:n.Message.getFieldWithDefault(ee,3,256)};return H&&(J.$jspbMessageInstance=ee),J}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(H){var ee=new n.BinaryReader(H),ae=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(ae,ee)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(H,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var ae=new s.BaseOptions;ee.readMessage(ae,s.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ae);break;case 2:ae=new E.FaceLandmarkerGraphOptions,ee.readMessage(ae,E.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),H.setFaceLandmarkerGraphOptions(ae);break;case 3:ae=ee.readInt32(),H.setFaceAlignmentSize(ae);break;default:ee.skipField()}return H},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(H,ee){var ae=void 0;(ae=H.getBaseOptions())!=null&&ee.writeMessage(1,ae,s.BaseOptions.serializeBinaryToWriter),(ae=H.getFaceLandmarkerGraphOptions())!=null&&ee.writeMessage(2,ae,E.FaceLandmarkerGraphOptions.serializeBinaryToWriter),(ae=n.Message.getField(H,3))!=null&&ee.writeInt32(3,ae)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return n.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(H){return n.Message.setField(this,3,H)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_stylizer.proto)})(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(pe,ue,Mt,nt){nt===void 0&&(nt=Mt);var Ve=Object.getOwnPropertyDescriptor(ue,Mt);Ve&&!("get"in Ve?!ue.__esModule:Ve.writable||Ve.configurable)||(Ve={enumerable:!0,get:function(){return ue[Mt]}}),Object.defineProperty(pe,nt,Ve)}:function(pe,ue,Mt,nt){nt===void 0&&(nt=Mt),pe[nt]=ue[Mt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(pe,ue){for(var Mt in pe)Mt==="default"||Object.prototype.hasOwnProperty.call(ue,Mt)||n(ue,pe,Mt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceStylizer=void 0;const w=calculator_pb,d=calculator_options_pb,m=base_options_pb,s=face_stylizer_graph_options_pb,E=vision_task_runner;A(face_stylizer_options,u);const H="image_in",ee="norm_rect",ae="stylized_image";class J extends E.VisionTaskRunner{static createFromOptions(ue,Mt){return E.VisionTaskRunner.createVisionInstance(J,ue,Mt)}static createFromModelBuffer(ue,Mt){return E.VisionTaskRunner.createVisionInstance(J,ue,{baseOptions:{modelAssetBuffer:Mt}})}static createFromModelPath(ue,Mt){return E.VisionTaskRunner.createVisionInstance(J,ue,{baseOptions:{modelAssetPath:Mt}})}constructor(ue,Mt){super(new E.VisionGraphRunner(ue,Mt),H,ee,!0),this.options=new s.FaceStylizerGraphOptions,this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ue){this.options.setBaseOptions(ue)}setOptions(ue){return super.applyOptions(ue)}stylize(ue,Mt,nt){const Ve=typeof Mt!="function"?Mt:{};if(this.userCallback=typeof Mt=="function"?Mt:nt,this.processImageData(ue,Ve!=null?Ve:{}),!this.userCallback)return this.result}stylizeForVideo(ue,Mt,nt,Ve){const it=typeof nt!="function"?nt:{};if(this.userCallback=typeof nt=="function"?nt:Ve,this.processVideoData(ue,it,Mt),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){const ue=new w.CalculatorGraphConfig;ue.addInputStream(H),ue.addInputStream(ee),ue.addOutputStream(ae);const Mt=new d.CalculatorOptions;Mt.setExtension(s.FaceStylizerGraphOptions.ext,this.options);const nt=new w.CalculatorGraphConfig.Node;nt.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),nt.addInputStream("IMAGE:"+H),nt.addInputStream("NORM_RECT:"+ee),nt.addOutputStream("STYLIZED_IMAGE:"+ae),nt.setOptions(Mt),ue.addNode(nt),this.graphRunner.attachImageListener(ae,(it,At)=>{const Ct=this.convertToMPImage(it,!this.userCallback);this.result=Ct,this.userCallback&&this.userCallback(Ct),this.setLatestOutputTimestamp(At)}),this.graphRunner.attachEmptyPacketListener(ae,it=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(it)});const Ve=ue.serializeBinary();this.setGraph(new Uint8Array(Ve),!0)}}u.FaceStylizer=J}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,w),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(d,m){var s,E={displayNamesLocale:n.Message.getFieldWithDefault(m,1,"en"),maxResults:n.Message.getFieldWithDefault(m,2,-1),scoreThreshold:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,categoryAllowlistList:(s=n.Message.getRepeatedField(m,4))==null?void 0:s,categoryDenylistList:(s=n.Message.getRepeatedField(m,5))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setDisplayNamesLocale(s);break;case 2:s=m.readInt32(),d.setMaxResults(s);break;case 3:s=m.readFloat(),d.setScoreThreshold(s);break;case 4:s=m.readString(),d.addCategoryAllowlist(s);break;case 5:s=m.readString(),d.addCategoryDenylist(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=d.getCategoryAllowlistList()).length>0&&m.writeRepeatedString(4,s),(s=d.getCategoryDenylistList()).length>0&&m.writeRepeatedString(5,s)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(d,m){return n.Message.addToRepeatedField(this,4,d,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(d){return n.Message.setField(this,5,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(d,m){return n.Message.addToRepeatedField(this,5,d,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},A.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(classifier_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=classifier_options_pb;A.object.extend(proto,s);var E=base_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(H,ee){var ae,J={baseOptions:(ae=ee.getBaseOptions())&&E.BaseOptions.toObject(H,ae),classifierOptions:(ae=ee.getClassifierOptions())&&s.ClassifierOptions.toObject(H,ae)};return H&&(J.$jspbMessageInstance=ee),J}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(H){var ee=new n.BinaryReader(H),ae=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(ae,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(H,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var ae=new E.BaseOptions;ee.readMessage(ae,E.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ae);break;case 2:ae=new s.ClassifierOptions,ee.readMessage(ae,s.ClassifierOptions.deserializeBinaryFromReader),H.setClassifierOptions(ae);break;default:ee.skipField()}return H},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(H,ee){var ae=void 0;(ae=H.getBaseOptions())!=null&&ee.writeMessage(1,ae,E.BaseOptions.serializeBinaryToWriter),(ae=H.getClassifierOptions())!=null&&ee.writeMessage(2,ae,s.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,s.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee)};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)if(H.getFieldNumber()===1){var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee)}else H.skipField();return E},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(E,H){var ee;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(gesture_embedder_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=gesture_classifier_graph_options_pb;A.object.extend(proto,E);var H=gesture_embedder_graph_options_pb;A.object.extend(proto,H),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(ee,ae){var J,pe={baseOptions:(J=ae.getBaseOptions())&&s.BaseOptions.toObject(ee,J),gestureEmbedderGraphOptions:(J=ae.getGestureEmbedderGraphOptions())&&H.GestureEmbedderGraphOptions.toObject(ee,J),cannedGestureClassifierGraphOptions:(J=ae.getCannedGestureClassifierGraphOptions())&&E.GestureClassifierGraphOptions.toObject(ee,J),customGestureClassifierGraphOptions:(J=ae.getCustomGestureClassifierGraphOptions())&&E.GestureClassifierGraphOptions.toObject(ee,J)};return ee&&(pe.$jspbMessageInstance=ae),pe}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(ee){var ae=new n.BinaryReader(ee),J=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(J,ae)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(ee,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var J=new s.BaseOptions;ae.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(J);break;case 2:J=new H.GestureEmbedderGraphOptions,ae.readMessage(J,H.GestureEmbedderGraphOptions.deserializeBinaryFromReader),ee.setGestureEmbedderGraphOptions(J);break;case 3:J=new E.GestureClassifierGraphOptions,ae.readMessage(J,E.GestureClassifierGraphOptions.deserializeBinaryFromReader),ee.setCannedGestureClassifierGraphOptions(J);break;case 4:J=new E.GestureClassifierGraphOptions,ae.readMessage(J,E.GestureClassifierGraphOptions.deserializeBinaryFromReader),ee.setCustomGestureClassifierGraphOptions(J);break;default:ae.skipField()}return ee},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(ee,ae){var J=void 0;(J=ee.getBaseOptions())!=null&&ae.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=ee.getGestureEmbedderGraphOptions())!=null&&ae.writeMessage(2,J,H.GestureEmbedderGraphOptions.serializeBinaryToWriter),(J=ee.getCannedGestureClassifierGraphOptions())!=null&&ae.writeMessage(3,J,E.GestureClassifierGraphOptions.serializeBinaryToWriter),(J=ee.getCustomGestureClassifierGraphOptions())!=null&&ae.writeMessage(4,J,E.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return n.Message.getWrapperField(this,H.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,E.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,E.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(ee){return n.Message.setWrapperField(this,4,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5),numHands:(ee=n.Message.getField(H,3))==null?void 0:ee};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=H.readFloat(),E.setMinDetectionConfidence(ee);break;case 3:ee=H.readInt32(),E.setNumHands(ee);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&H.writeFloat(2,ee),(ee=n.Message.getField(E,3))!=null&&H.writeInt32(3,ee)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_detector.proto)})(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5)};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=H.readFloat(),E.setMinDetectionConfidence(ee);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&H.writeFloat(2,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(hand_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=hand_detector_graph_options_pb;A.object.extend(proto,E);var H=hand_landmarks_detector_graph_options_pb;A.object.extend(proto,H),A.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,w),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(ee,ae){var J,pe={baseOptions:(J=ae.getBaseOptions())&&s.BaseOptions.toObject(ee,J),handDetectorGraphOptions:(J=ae.getHandDetectorGraphOptions())&&E.HandDetectorGraphOptions.toObject(ee,J),handLandmarksDetectorGraphOptions:(J=ae.getHandLandmarksDetectorGraphOptions())&&H.HandLandmarksDetectorGraphOptions.toObject(ee,J),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(ae,4,.5)};return ee&&(pe.$jspbMessageInstance=ae),pe}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(ee){var ae=new n.BinaryReader(ee),J=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(J,ae)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(ee,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var J=new s.BaseOptions;ae.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(J);break;case 2:J=new E.HandDetectorGraphOptions,ae.readMessage(J,E.HandDetectorGraphOptions.deserializeBinaryFromReader),ee.setHandDetectorGraphOptions(J);break;case 3:J=new H.HandLandmarksDetectorGraphOptions,ae.readMessage(J,H.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),ee.setHandLandmarksDetectorGraphOptions(J);break;case 4:J=ae.readFloat(),ee.setMinTrackingConfidence(J);break;default:ae.skipField()}return ee},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(ee,ae){var J=void 0;(J=ee.getBaseOptions())!=null&&ae.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=ee.getHandDetectorGraphOptions())!=null&&ae.writeMessage(2,J,E.HandDetectorGraphOptions.serializeBinaryToWriter),(J=ee.getHandLandmarksDetectorGraphOptions())!=null&&ae.writeMessage(3,J,H.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),(J=n.Message.getField(ee,4))!=null&&ae.writeFloat(4,J)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,H.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(ee){return n.Message.setField(this,4,ee)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=hand_gesture_recognizer_graph_options_pb;A.object.extend(proto,E);var H=hand_landmarker_graph_options_pb;A.object.extend(proto,H),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,w),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(ee,ae){var J,pe={baseOptions:(J=ae.getBaseOptions())&&s.BaseOptions.toObject(ee,J),handLandmarkerGraphOptions:(J=ae.getHandLandmarkerGraphOptions())&&H.HandLandmarkerGraphOptions.toObject(ee,J),handGestureRecognizerGraphOptions:(J=ae.getHandGestureRecognizerGraphOptions())&&E.HandGestureRecognizerGraphOptions.toObject(ee,J)};return ee&&(pe.$jspbMessageInstance=ae),pe}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(ee){var ae=new n.BinaryReader(ee),J=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(J,ae)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(ee,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var J=new s.BaseOptions;ae.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(J);break;case 2:J=new H.HandLandmarkerGraphOptions,ae.readMessage(J,H.HandLandmarkerGraphOptions.deserializeBinaryFromReader),ee.setHandLandmarkerGraphOptions(J);break;case 3:J=new E.HandGestureRecognizerGraphOptions,ae.readMessage(J,E.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),ee.setHandGestureRecognizerGraphOptions(J);break;default:ae.skipField()}return ee},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(ee,ae){var J=void 0;(J=ee.getBaseOptions())!=null&&ae.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=ee.getHandLandmarkerGraphOptions())!=null&&ae.writeMessage(2,J,H.HandLandmarkerGraphOptions.serializeBinaryToWriter),(J=ee.getHandGestureRecognizerGraphOptions())!=null&&ae.writeMessage(3,J,E.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,H.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return n.Message.getWrapperField(this,E.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;const classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(u,n){const A=n?n.clone():new classifier_options_pb_1.ClassifierOptions;return u.displayNamesLocale!==void 0?A.setDisplayNamesLocale(u.displayNamesLocale):u.displayNamesLocale===void 0&&A.clearDisplayNamesLocale(),u.maxResults!==void 0?A.setMaxResults(u.maxResults):"maxResults"in u&&A.clearMaxResults(),u.scoreThreshold!==void 0?A.setScoreThreshold(u.scoreThreshold):"scoreThreshold"in u&&A.clearScoreThreshold(),u.categoryAllowlist!==void 0?A.setCategoryAllowlistList(u.categoryAllowlist):"categoryAllowlist"in u&&A.clearCategoryAllowlistList(),u.categoryDenylist!==void 0?A.setCategoryDenylistList(u.categoryDenylist):"categoryDenylist"in u&&A.clearCategoryDenylistList(),A}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(qt,Ft,An,rr){rr===void 0&&(rr=An);var xr=Object.getOwnPropertyDescriptor(Ft,An);xr&&!("get"in xr?!Ft.__esModule:xr.writable||xr.configurable)||(xr={enumerable:!0,get:function(){return Ft[An]}}),Object.defineProperty(qt,rr,xr)}:function(qt,Ft,An,rr){rr===void 0&&(rr=An),qt[rr]=Ft[An]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(qt,Ft){for(var An in qt)An==="default"||Object.prototype.hasOwnProperty.call(Ft,An)||n(Ft,qt,An)};Object.defineProperty(u,"__esModule",{value:!0}),u.GestureRecognizer=void 0;const w=calculator_pb,d=calculator_options_pb,m=classification_pb,s=landmark_pb,E=base_options_pb,H=gesture_classifier_graph_options_pb,ee=gesture_recognizer_graph_options_pb,ae=hand_gesture_recognizer_graph_options_pb,J=hand_detector_graph_options_pb,pe=hand_landmarker_graph_options_pb,ue=hand_landmarks_detector_graph_options_pb,Mt=classifier_options,nt=vision_task_runner,Ve=hand_landmarks_connections;A(gesture_recognizer_options,u),A(gesture_recognizer_result,u);const it="image_in",At="norm_rect",Ct="hand_gestures",vt="hand_landmarks",pt="world_hand_landmarks",ft="handedness",Pt=.5;class wt extends nt.VisionTaskRunner{static createFromOptions(Ft,An){return nt.VisionTaskRunner.createVisionInstance(wt,Ft,An)}static createFromModelBuffer(Ft,An){return nt.VisionTaskRunner.createVisionInstance(wt,Ft,{baseOptions:{modelAssetBuffer:An}})}static createFromModelPath(Ft,An){return nt.VisionTaskRunner.createVisionInstance(wt,Ft,{baseOptions:{modelAssetPath:An}})}constructor(Ft,An){super(new nt.VisionGraphRunner(Ft,An),it,At,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new ee.GestureRecognizerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.handLandmarkerGraphOptions=new pe.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new ue.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new J.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new ae.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(Pt),this.handLandmarkerGraphOptions.setMinTrackingConfidence(Pt),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(Pt)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Ft){this.options.setBaseOptions(Ft)}setOptions(Ft){var An,rr,xr,Br,Er,zr,Fi,eo;if(this.handDetectorGraphOptions.setNumHands((An=Ft.numHands)!==null&&An!==void 0?An:1),"minHandDetectionConfidence"in Ft&&this.handDetectorGraphOptions.setMinDetectionConfidence((rr=Ft.minHandDetectionConfidence)!==null&&rr!==void 0?rr:Pt),"minTrackingConfidence"in Ft&&this.handLandmarkerGraphOptions.setMinTrackingConfidence((xr=Ft.minTrackingConfidence)!==null&&xr!==void 0?xr:Pt),"minHandPresenceConfidence"in Ft&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((Br=Ft.minHandPresenceConfidence)!==null&&Br!==void 0?Br:Pt),Ft.cannedGesturesClassifierOptions){const Gr=new H.GestureClassifierGraphOptions;Gr.setClassifierOptions((0,Mt.convertClassifierOptionsToProto)(Ft.cannedGesturesClassifierOptions,(Er=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||Er===void 0?void 0:Er.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(Gr)}else Ft.cannedGesturesClassifierOptions===void 0&&((zr=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||zr===void 0||zr.clearClassifierOptions());if(Ft.customGesturesClassifierOptions){const Gr=new H.GestureClassifierGraphOptions;Gr.setClassifierOptions((0,Mt.convertClassifierOptionsToProto)(Ft.customGesturesClassifierOptions,(Fi=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||Fi===void 0?void 0:Fi.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(Gr)}else Ft.customGesturesClassifierOptions===void 0&&((eo=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||eo===void 0||eo.clearClassifierOptions());return this.applyOptions(Ft)}recognize(Ft,An){return this.resetResults(),this.processImageData(Ft,An),this.processResults()}recognizeForVideo(Ft,An,rr){return this.resetResults(),this.processVideoData(Ft,rr,An),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return this.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(Ft,An=!0){var rr,xr,Br;const Er=[];for(const zr of Ft){const Fi=m.ClassificationList.deserializeBinary(zr),eo=[];for(const Gr of Fi.getClassificationList()){const Yo=An&&Gr.hasIndex()?Gr.getIndex():-1;eo.push({score:(rr=Gr.getScore())!==null&&rr!==void 0?rr:0,index:Yo,categoryName:(xr=Gr.getLabel())!==null&&xr!==void 0?xr:"",displayName:(Br=Gr.getDisplayName())!==null&&Br!==void 0?Br:""})}Er.push(eo)}return Er}addJsLandmarks(Ft){var An,rr,xr;for(const Br of Ft){const Er=s.NormalizedLandmarkList.deserializeBinary(Br),zr=[];for(const Fi of Er.getLandmarkList())zr.push({x:(An=Fi.getX())!==null&&An!==void 0?An:0,y:(rr=Fi.getY())!==null&&rr!==void 0?rr:0,z:(xr=Fi.getZ())!==null&&xr!==void 0?xr:0});this.landmarks.push(zr)}}adddJsWorldLandmarks(Ft){var An,rr,xr;for(const Br of Ft){const Er=s.LandmarkList.deserializeBinary(Br),zr=[];for(const Fi of Er.getLandmarkList())zr.push({x:(An=Fi.getX())!==null&&An!==void 0?An:0,y:(rr=Fi.getY())!==null&&rr!==void 0?rr:0,z:(xr=Fi.getZ())!==null&&xr!==void 0?xr:0});this.worldLandmarks.push(zr)}}refreshGraph(){const Ft=new w.CalculatorGraphConfig;Ft.addInputStream(it),Ft.addInputStream(At),Ft.addOutputStream(Ct),Ft.addOutputStream(vt),Ft.addOutputStream(pt),Ft.addOutputStream(ft);const An=new d.CalculatorOptions;An.setExtension(ee.GestureRecognizerGraphOptions.ext,this.options);const rr=new w.CalculatorGraphConfig.Node;rr.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),rr.addInputStream("IMAGE:"+it),rr.addInputStream("NORM_RECT:"+At),rr.addOutputStream("HAND_GESTURES:"+Ct),rr.addOutputStream("LANDMARKS:"+vt),rr.addOutputStream("WORLD_LANDMARKS:"+pt),rr.addOutputStream("HANDEDNESS:"+ft),rr.setOptions(An),Ft.addNode(rr),this.graphRunner.attachProtoVectorListener(vt,(Br,Er)=>{this.addJsLandmarks(Br),this.setLatestOutputTimestamp(Er)}),this.graphRunner.attachEmptyPacketListener(vt,Br=>{this.setLatestOutputTimestamp(Br)}),this.graphRunner.attachProtoVectorListener(pt,(Br,Er)=>{this.adddJsWorldLandmarks(Br),this.setLatestOutputTimestamp(Er)}),this.graphRunner.attachEmptyPacketListener(pt,Br=>{this.setLatestOutputTimestamp(Br)}),this.graphRunner.attachProtoVectorListener(Ct,(Br,Er)=>{this.gestures.push(...this.toJsCategories(Br,!1)),this.setLatestOutputTimestamp(Er)}),this.graphRunner.attachEmptyPacketListener(Ct,Br=>{this.setLatestOutputTimestamp(Br)}),this.graphRunner.attachProtoVectorListener(ft,(Br,Er)=>{this.handednesses.push(...this.toJsCategories(Br)),this.setLatestOutputTimestamp(Er)}),this.graphRunner.attachEmptyPacketListener(ft,Br=>{this.setLatestOutputTimestamp(Br)});const xr=Ft.serializeBinary();this.setGraph(new Uint8Array(xr),!0)}}u.GestureRecognizer=wt,wt.HAND_CONNECTIONS=Ve.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(pt,ft,Pt,wt){wt===void 0&&(wt=Pt);var qt=Object.getOwnPropertyDescriptor(ft,Pt);qt&&!("get"in qt?!ft.__esModule:qt.writable||qt.configurable)||(qt={enumerable:!0,get:function(){return ft[Pt]}}),Object.defineProperty(pt,wt,qt)}:function(pt,ft,Pt,wt){wt===void 0&&(wt=Pt),pt[wt]=ft[Pt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(pt,ft){for(var Pt in pt)Pt==="default"||Object.prototype.hasOwnProperty.call(ft,Pt)||n(ft,pt,Pt)};Object.defineProperty(u,"__esModule",{value:!0}),u.HandLandmarker=void 0;const w=calculator_pb,d=calculator_options_pb,m=classification_pb,s=landmark_pb,E=base_options_pb,H=hand_detector_graph_options_pb,ee=hand_landmarker_graph_options_pb,ae=hand_landmarks_detector_graph_options_pb,J=landmark_result,pe=vision_task_runner,ue=hand_landmarks_connections;A(hand_landmarker_options,u),A(hand_landmarker_result,u);const Mt="image_in",nt="norm_rect",Ve="hand_landmarks",it="world_hand_landmarks",At="handedness",Ct=.5;class vt extends pe.VisionTaskRunner{static createFromOptions(ft,Pt){return pe.VisionTaskRunner.createVisionInstance(vt,ft,Pt)}static createFromModelBuffer(ft,Pt){return pe.VisionTaskRunner.createVisionInstance(vt,ft,{baseOptions:{modelAssetBuffer:Pt}})}static createFromModelPath(ft,Pt){return pe.VisionTaskRunner.createVisionInstance(vt,ft,{baseOptions:{modelAssetPath:Pt}})}constructor(ft,Pt){super(new pe.VisionGraphRunner(ft,Pt),Mt,nt,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new ee.HandLandmarkerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.handLandmarksDetectorGraphOptions=new ae.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new H.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ft){this.options.setBaseOptions(ft)}setOptions(ft){var Pt,wt,qt,Ft;return"numHands"in ft&&this.handDetectorGraphOptions.setNumHands((Pt=ft.numHands)!==null&&Pt!==void 0?Pt:1),"minHandDetectionConfidence"in ft&&this.handDetectorGraphOptions.setMinDetectionConfidence((wt=ft.minHandDetectionConfidence)!==null&&wt!==void 0?wt:Ct),"minTrackingConfidence"in ft&&this.options.setMinTrackingConfidence((qt=ft.minTrackingConfidence)!==null&&qt!==void 0?qt:Ct),"minHandPresenceConfidence"in ft&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((Ft=ft.minHandPresenceConfidence)!==null&&Ft!==void 0?Ft:Ct),this.applyOptions(ft)}detect(ft,Pt){return this.resetResults(),this.processImageData(ft,Pt),this.processResults()}detectForVideo(ft,Pt,wt){return this.resetResults(),this.processVideoData(ft,wt,Pt),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(Ct),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(Ct),this.options.setMinTrackingConfidence(Ct)}toJsCategories(ft){var Pt,wt,qt,Ft;const An=[];for(const rr of ft){const xr=m.ClassificationList.deserializeBinary(rr),Br=[];for(const Er of xr.getClassificationList())Br.push({score:(Pt=Er.getScore())!==null&&Pt!==void 0?Pt:0,index:(wt=Er.getIndex())!==null&&wt!==void 0?wt:-1,categoryName:(qt=Er.getLabel())!==null&&qt!==void 0?qt:"",displayName:(Ft=Er.getDisplayName())!==null&&Ft!==void 0?Ft:""});An.push(Br)}return An}addJsLandmarks(ft){for(const Pt of ft){const wt=s.NormalizedLandmarkList.deserializeBinary(Pt);this.landmarks.push((0,J.convertToLandmarks)(wt))}}adddJsWorldLandmarks(ft){for(const Pt of ft){const wt=s.LandmarkList.deserializeBinary(Pt);this.worldLandmarks.push((0,J.convertToWorldLandmarks)(wt))}}refreshGraph(){const ft=new w.CalculatorGraphConfig;ft.addInputStream(Mt),ft.addInputStream(nt),ft.addOutputStream(Ve),ft.addOutputStream(it),ft.addOutputStream(At);const Pt=new d.CalculatorOptions;Pt.setExtension(ee.HandLandmarkerGraphOptions.ext,this.options);const wt=new w.CalculatorGraphConfig.Node;wt.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),wt.addInputStream("IMAGE:"+Mt),wt.addInputStream("NORM_RECT:"+nt),wt.addOutputStream("LANDMARKS:"+Ve),wt.addOutputStream("WORLD_LANDMARKS:"+it),wt.addOutputStream("HANDEDNESS:"+At),wt.setOptions(Pt),ft.addNode(wt),this.graphRunner.attachProtoVectorListener(Ve,(Ft,An)=>{this.addJsLandmarks(Ft),this.setLatestOutputTimestamp(An)}),this.graphRunner.attachEmptyPacketListener(Ve,Ft=>{this.setLatestOutputTimestamp(Ft)}),this.graphRunner.attachProtoVectorListener(it,(Ft,An)=>{this.adddJsWorldLandmarks(Ft),this.setLatestOutputTimestamp(An)}),this.graphRunner.attachEmptyPacketListener(it,Ft=>{this.setLatestOutputTimestamp(Ft)}),this.graphRunner.attachProtoVectorListener(At,(Ft,An)=>{this.handednesses.push(...this.toJsCategories(Ft)),this.setLatestOutputTimestamp(An)}),this.graphRunner.attachEmptyPacketListener(At,Ft=>{this.setLatestOutputTimestamp(Ft)});const qt=ft.serializeBinary();this.setGraph(new Uint8Array(qt),!0)}}u.HandLandmarker=vt,vt.HAND_CONNECTIONS=ue.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=classification_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,w),proto.mediapipe.tasks.components.containers.proto.Classifications=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(m){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(m,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(m,s){var E,H={classificationList:(E=s.getClassificationList())&&d.ClassificationList.toObject(m,E),headIndex:(E=n.Message.getField(s,2))==null?void 0:E,headName:(E=n.Message.getField(s,3))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(E,s)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 4:var E=new d.ClassificationList;s.readMessage(E,d.ClassificationList.deserializeBinaryFromReader),m.setClassificationList(E);break;case 2:E=s.readInt32(),m.setHeadIndex(E);break;case 3:E=s.readString(),m.setHeadName(E);break;default:s.skipField()}return m},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getClassificationList())!=null&&s.writeMessage(4,E,d.ClassificationList.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeString(3,E)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return n.Message.getWrapperField(this,d.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(m){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(m,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(m,s){var E,H={classificationsList:n.Message.toObjectList(s.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,m),timestampMs:(E=n.Message.getField(s,2))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(E,s)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.tasks.components.containers.proto.Classifications;s.readMessage(E,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),m.addClassifications(E);break;case 2:E=s.readInt64(),m.setTimestampMs(E);break;default:s.skipField()}return m},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getClassificationsList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeInt64(2,E)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.tasks.components.containers.proto.Classifications,s)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(classifications_pb);var image_classifier_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=classifier_options_pb;A.object.extend(proto,s);var E=base_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,w),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(H,ee){var ae,J={baseOptions:(ae=ee.getBaseOptions())&&E.BaseOptions.toObject(H,ae),classifierOptions:(ae=ee.getClassifierOptions())&&s.ClassifierOptions.toObject(H,ae)};return H&&(J.$jspbMessageInstance=ee),J}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(H){var ee=new n.BinaryReader(H),ae=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(ae,ee)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(H,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var ae=new E.BaseOptions;ee.readMessage(ae,E.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ae);break;case 2:ae=new s.ClassifierOptions,ee.readMessage(ae,s.ClassifierOptions.deserializeBinaryFromReader),H.setClassifierOptions(ae);break;default:ee.skipField()}return H},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(H,ee){var ae=void 0;(ae=H.getBaseOptions())!=null&&ee.writeMessage(1,ae,E.BaseOptions.serializeBinaryToWriter),(ae=H.getClassifierOptions())!=null&&ee.writeMessage(2,ae,s.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,s.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_classifier.proto)})(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nt,Ve,it,At){At===void 0&&(At=it);var Ct=Object.getOwnPropertyDescriptor(Ve,it);Ct&&!("get"in Ct?!Ve.__esModule:Ct.writable||Ct.configurable)||(Ct={enumerable:!0,get:function(){return Ve[it]}}),Object.defineProperty(nt,At,Ct)}:function(nt,Ve,it,At){At===void 0&&(At=it),nt[At]=Ve[it]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(nt,Ve){for(var it in nt)it==="default"||Object.prototype.hasOwnProperty.call(Ve,it)||n(Ve,nt,it)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageClassifier=void 0;const w=calculator_pb,d=calculator_options_pb,m=classifications_pb,s=base_options_pb,E=image_classifier_graph_options_pb,H=classifier_options,ee=classifier_result,ae=vision_task_runner,J="input_image",pe="norm_rect",ue="classifications";A(image_classifier_options,u),A(image_classifier_result,u);class Mt extends ae.VisionTaskRunner{static createFromOptions(Ve,it){return ae.VisionTaskRunner.createVisionInstance(Mt,Ve,it)}static createFromModelBuffer(Ve,it){return ae.VisionTaskRunner.createVisionInstance(Mt,Ve,{baseOptions:{modelAssetBuffer:it}})}static createFromModelPath(Ve,it){return ae.VisionTaskRunner.createVisionInstance(Mt,Ve,{baseOptions:{modelAssetPath:it}})}constructor(Ve,it){super(new ae.VisionGraphRunner(Ve,it),J,pe,!0),this.classificationResult={classifications:[]},this.options=new E.ImageClassifierGraphOptions,this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Ve){this.options.setBaseOptions(Ve)}setOptions(Ve){return this.options.setClassifierOptions((0,H.convertClassifierOptionsToProto)(Ve,this.options.getClassifierOptions())),this.applyOptions(Ve)}classify(Ve,it){return this.classificationResult={classifications:[]},this.processImageData(Ve,it),this.classificationResult}classifyForVideo(Ve,it,At){return this.classificationResult={classifications:[]},this.processVideoData(Ve,At,it),this.classificationResult}refreshGraph(){const Ve=new w.CalculatorGraphConfig;Ve.addInputStream(J),Ve.addInputStream(pe),Ve.addOutputStream(ue);const it=new d.CalculatorOptions;it.setExtension(E.ImageClassifierGraphOptions.ext,this.options);const At=new w.CalculatorGraphConfig.Node;At.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),At.addInputStream("IMAGE:"+J),At.addInputStream("NORM_RECT:"+pe),At.addOutputStream("CLASSIFICATIONS:"+ue),At.setOptions(it),Ve.addNode(At),this.graphRunner.attachProtoListener(ue,(vt,pt)=>{this.classificationResult=(0,ee.convertFromClassificationResultProto)(m.ClassificationResult.deserializeBinary(vt)),this.setLatestOutputTimestamp(pt)}),this.graphRunner.attachEmptyPacketListener(ue,vt=>{this.setLatestOutputTimestamp(vt)});const Ct=Ve.serializeBinary();this.setGraph(new Uint8Array(Ct),!0)}}u.ImageClassifier=Mt}(image_classifier);var image_embedder={},embeddings_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,w),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,w),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(d){n.Message.initialize(this,d,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},A.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(d,m){var s,E={valuesList:(s=n.Message.getRepeatedFloatingPointField(m,1))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1)for(var s=m.isDelimited()?m.readPackedFloat():[m.readFloat()],E=0;E<s.length;E++)d.addValues(s[E]);else m.skipField();return d},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(d,m){var s;(s=d.getValuesList()).length>0&&m.writePackedFloat(1,s)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return n.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(d){return n.Message.setField(this,1,d||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(d,m){return n.Message.addToRepeatedField(this,1,d,m)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(d,m){var s={values:m.getValues_asB64()};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=m.readBytes();d.setValues(s)}else m.skipField();return d},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(d,m){var s;(s=n.Message.getField(d,1))!=null&&m.writeBytes(1,s)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return n.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return n.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(d,m){var s,E={floatEmbedding:(s=m.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,s),quantizedEmbedding:(s=m.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,s),headIndex:(s=n.Message.getField(m,3))==null?void 0:s,headName:(s=n.Message.getField(m,4))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;m.readMessage(s,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),d.setFloatEmbedding(s);break;case 2:s=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,m.readMessage(s,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),d.setQuantizedEmbedding(s);break;case 3:s=m.readInt32(),d.setHeadIndex(s);break;case 4:s=m.readString(),d.setHeadName(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getFloatEmbedding())!=null&&m.writeMessage(1,s,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),(s=d.getQuantizedEmbedding())!=null&&m.writeMessage(2,s,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s),(s=n.Message.getField(d,4))!=null&&m.writeString(4,s)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(d){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(d){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(d,m){var s,E={embeddingsList:n.Message.toObjectList(m.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,d),timestampMs:(s=n.Message.getField(m,2))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=new proto.mediapipe.tasks.components.containers.proto.Embedding;m.readMessage(s,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),d.addEmbeddings(s);break;case 2:s=m.readInt64(),d.setTimestampMs(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getEmbeddingsList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),(s=n.Message.getField(d,2))!=null&&m.writeInt64(2,s)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.tasks.components.containers.proto.Embedding,m)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,w),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(d,m){var s,E={l2Normalize:(s=n.Message.getBooleanField(m,1))==null?void 0:s,quantize:(s=n.Message.getBooleanField(m,2))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readBool();d.setL2Normalize(s);break;case 2:s=m.readBool(),d.setQuantize(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeBool(1,s),(s=n.Message.getField(d,2))!=null&&m.writeBool(2,s)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(embedder_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=embedder_options_pb;A.object.extend(proto,s);var E=base_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,w),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(H,ee){var ae,J={baseOptions:(ae=ee.getBaseOptions())&&E.BaseOptions.toObject(H,ae),embedderOptions:(ae=ee.getEmbedderOptions())&&s.EmbedderOptions.toObject(H,ae)};return H&&(J.$jspbMessageInstance=ee),J}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(H){var ee=new n.BinaryReader(H),ae=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(ae,ee)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(H,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var ae=new E.BaseOptions;ee.readMessage(ae,E.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ae);break;case 2:ae=new s.EmbedderOptions,ee.readMessage(ae,s.EmbedderOptions.deserializeBinaryFromReader),H.setEmbedderOptions(ae);break;default:ee.skipField()}return H},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(H,ee){var ae=void 0;(ae=H.getBaseOptions())!=null&&ee.writeMessage(1,ae,E.BaseOptions.serializeBinaryToWriter),(ae=H.getEmbedderOptions())!=null&&ee.writeMessage(2,ae,s.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return n.Message.getWrapperField(this,s.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;const embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(u,n){const A=n?n.clone():new embedder_options_pb_1.EmbedderOptions;return u.l2Normalize!==void 0?A.setL2Normalize(u.l2Normalize):"l2Normalize"in u&&A.clearL2Normalize(),u.quantize!==void 0?A.setQuantize(u.quantize):"quantize"in u&&A.clearQuantize(),A}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;const DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(u){var n,A,w,d;const m={headIndex:(n=u.getHeadIndex())!==null&&n!==void 0?n:DEFAULT_INDEX,headName:(A=u.getHeadName())!==null&&A!==void 0?A:""};if(u.hasFloatEmbedding())m.floatEmbedding=u.getFloatEmbedding().getValuesList();else{const s=(d=(w=u.getQuantizedEmbedding())===null||w===void 0?void 0:w.getValues())!==null&&d!==void 0?d:"";m.quantizedEmbedding=typeof s=="string"?Uint8Array.from(atob(s),E=>E.charCodeAt(0)):s}return m}function convertFromEmbeddingResultProto(u){return{embeddings:u.getEmbeddingsList().map(n=>convertFromEmbeddingsProto(n)),timestampMs:u.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(u,n){if(u.floatEmbedding&&n.floatEmbedding)return compute(u.floatEmbedding,n.floatEmbedding);if(u.quantizedEmbedding&&n.quantizedEmbedding)return compute(convertToBytes(u.quantizedEmbedding),convertToBytes(n.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(u){return Array.from(u,n=>n>127?n-256:n)}function compute(u,n){if(u.length!==n.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${u.length} vs. ${n.length}).`);let A=0,w=0,d=0;for(let m=0;m<u.length;m++)A+=u[m]*n[m],w+=u[m]*u[m],d+=n[m]*n[m];if(w<=0||d<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return A/Math.sqrt(w*d)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Ve,it,At,Ct){Ct===void 0&&(Ct=At);var vt=Object.getOwnPropertyDescriptor(it,At);vt&&!("get"in vt?!it.__esModule:vt.writable||vt.configurable)||(vt={enumerable:!0,get:function(){return it[At]}}),Object.defineProperty(Ve,Ct,vt)}:function(Ve,it,At,Ct){Ct===void 0&&(Ct=At),Ve[Ct]=it[At]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Ve,it){for(var At in Ve)At==="default"||Object.prototype.hasOwnProperty.call(it,At)||n(it,Ve,At)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageEmbedder=void 0;const w=calculator_pb,d=calculator_options_pb,m=embeddings_pb,s=base_options_pb,E=image_embedder_graph_options_pb,H=embedder_options,ee=embedder_result,ae=cosine_similarity,J=vision_task_runner,pe="image_in",ue="norm_rect",Mt="embeddings_out";A(image_embedder_options,u),A(image_embedder_result,u);class nt extends J.VisionTaskRunner{static createFromOptions(it,At){return J.VisionTaskRunner.createVisionInstance(nt,it,At)}static createFromModelBuffer(it,At){return J.VisionTaskRunner.createVisionInstance(nt,it,{baseOptions:{modelAssetBuffer:At}})}static createFromModelPath(it,At){return J.VisionTaskRunner.createVisionInstance(nt,it,{baseOptions:{modelAssetPath:At}})}constructor(it,At){super(new J.VisionGraphRunner(it,At),pe,ue,!0),this.options=new E.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(it){this.options.setBaseOptions(it)}setOptions(it){return this.options.setEmbedderOptions((0,H.convertEmbedderOptionsToProto)(it,this.options.getEmbedderOptions())),this.applyOptions(it)}embed(it,At){return this.processImageData(it,At),this.embeddings}embedForVideo(it,At,Ct){return this.processVideoData(it,Ct,At),this.embeddings}static cosineSimilarity(it,At){return(0,ae.computeCosineSimilarity)(it,At)}addJsImageEmdedding(it){const At=m.EmbeddingResult.deserializeBinary(it);this.embeddings=(0,ee.convertFromEmbeddingResultProto)(At)}refreshGraph(){const it=new w.CalculatorGraphConfig;it.addInputStream(pe),it.addInputStream(ue),it.addOutputStream(Mt);const At=new d.CalculatorOptions;At.setExtension(E.ImageEmbedderGraphOptions.ext,this.options);const Ct=new w.CalculatorGraphConfig.Node;Ct.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Ct.addInputStream("IMAGE:"+pe),Ct.addInputStream("NORM_RECT:"+ue),Ct.addOutputStream("EMBEDDINGS:"+Mt),Ct.setOptions(At),it.addNode(Ct),this.graphRunner.attachProtoListener(Mt,(pt,ft)=>{this.addJsImageEmdedding(pt),this.setLatestOutputTimestamp(ft)}),this.graphRunner.attachEmptyPacketListener(Mt,pt=>{this.setLatestOutputTimestamp(pt)});const vt=it.serializeBinary();this.setGraph(new Uint8Array(vt),!0)}}u.ImageEmbedder=nt}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,w),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,w),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(d,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(d,m){var s,E={outputType:(s=n.Message.getField(m,1))==null?void 0:s,activation:n.Message.getFieldWithDefault(m,2,0)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readEnum();d.setOutputType(s);break;case 2:s=m.readEnum(),d.setActivation(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeEnum(1,s),(s=n.Message.getField(d,2))!=null&&m.writeEnum(2,s)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(segmenter_options_pb);var label_map_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.LabelMapItem",null,w),proto.mediapipe.LabelMapItem=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},A.inherits(proto.mediapipe.LabelMapItem,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(d){return proto.mediapipe.LabelMapItem.toObject(d,this)},proto.mediapipe.LabelMapItem.toObject=function(d,m){var s,E={name:(s=n.Message.getField(m,1))==null?void 0:s,displayName:(s=n.Message.getField(m,2))==null?void 0:s,childNameList:(s=n.Message.getRepeatedField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.LabelMapItem.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(s,m)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setName(s);break;case 2:s=m.readString(),d.setDisplayName(s);break;case 3:s=m.readString(),d.addChildName(s);break;default:m.skipField()}return d},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=n.Message.getField(d,2))!=null&&m.writeString(2,s),(s=d.getChildNameList()).length>0&&m.writeRepeatedString(3,s)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},A.object.extend(u,proto.mediapipe)})(label_map_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var m=segmenter_options_pb;A.object.extend(proto,m);var s=label_map_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,w),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(E,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(E,H){var ee,ae={segmenterOptions:(ee=H.getSegmenterOptions())&&m.SegmenterOptions.toObject(E,ee),labelItemsMap:(ee=H.getLabelItemsMap())?ee.toObject(E,proto.mediapipe.LabelMapItem.toObject):[]};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new m.SegmenterOptions;H.readMessage(ee,m.SegmenterOptions.deserializeBinaryFromReader),E.setSegmenterOptions(ee);break;case 2:ee=E.getLabelItemsMap(),H.readMessage(ee,function(ae,J){n.Map.deserializeBinary(ae,J,n.BinaryReader.prototype.readInt64,n.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)});break;default:H.skipField()}return E},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getSegmenterOptions())!=null&&H.writeMessage(1,ee,m.SegmenterOptions.serializeBinaryToWriter),(ee=E.getLabelItemsMap(!0))&&ee.getLength()>0&&ee.serializeBinary(2,H,n.BinaryWriter.prototype.writeInt64,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,m.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(E){return n.Message.getMapField(this,2,E,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,A.object.extend(u,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=segmenter_options_pb;A.object.extend(proto,E),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,w),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(H,ee){var ae,J={baseOptions:(ae=ee.getBaseOptions())&&s.BaseOptions.toObject(H,ae),displayNamesLocale:n.Message.getFieldWithDefault(ee,2,"en"),segmenterOptions:(ae=ee.getSegmenterOptions())&&E.SegmenterOptions.toObject(H,ae)};return H&&(J.$jspbMessageInstance=ee),J}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(H){var ee=new n.BinaryReader(H),ae=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(ae,ee)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(H,ee){for(;ee.nextField()&&!ee.isEndGroup();)switch(ee.getFieldNumber()){case 1:var ae=new s.BaseOptions;ee.readMessage(ae,s.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ae);break;case 2:ae=ee.readString(),H.setDisplayNamesLocale(ae);break;case 3:ae=new E.SegmenterOptions,ee.readMessage(ae,E.SegmenterOptions.deserializeBinaryFromReader),H.setSegmenterOptions(ae);break;default:ee.skipField()}return H},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(H,ee){var ae=void 0;(ae=H.getBaseOptions())!=null&&ee.writeMessage(1,ae,s.BaseOptions.serializeBinaryToWriter),(ae=n.Message.getField(H,2))!=null&&ee.writeString(2,ae),(ae=H.getSegmenterOptions())!=null&&ee.writeMessage(3,ae,E.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(H){return n.Message.setField(this,2,H)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,E.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(H){return n.Message.setWrapperField(this,3,H)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(image_segmenter_graph_options_pb);var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),image_segmenter_result.ImageSegmenterResult=void 0;class ImageSegmenterResult{constructor(n,A,w){this.confidenceMasks=n,this.categoryMask=A,this.qualityScores=w}close(){var n,A;(n=this.confidenceMasks)===null||n===void 0||n.forEach(w=>{w.close()}),(A=this.categoryMask)===null||A===void 0||A.close()}}image_segmenter_result.ImageSegmenterResult=ImageSegmenterResult;var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(At,Ct,vt,pt){pt===void 0&&(pt=vt);var ft=Object.getOwnPropertyDescriptor(Ct,vt);ft&&!("get"in ft?!Ct.__esModule:ft.writable||ft.configurable)||(ft={enumerable:!0,get:function(){return Ct[vt]}}),Object.defineProperty(At,pt,ft)}:function(At,Ct,vt,pt){pt===void 0&&(pt=vt),At[pt]=Ct[vt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(At,Ct){for(var vt in At)vt==="default"||Object.prototype.hasOwnProperty.call(Ct,vt)||n(Ct,At,vt)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageSegmenter=void 0;const w=calculator_pb,d=calculator_options_pb,m=base_options_pb,s=tensors_to_segmentation_calculator_pb,E=image_segmenter_graph_options_pb,H=segmenter_options_pb,ee=vision_task_runner,ae=image_segmenter_result;A(image_segmenter_options,u),A(image_segmenter_result,u);const J="image_in",pe="norm_rect",ue="confidence_masks",Mt="category_mask",nt="quality_scores",Ve="mediapipe.tasks.TensorsToSegmentationCalculator";class it extends ee.VisionTaskRunner{static createFromOptions(Ct,vt){return ee.VisionTaskRunner.createVisionInstance(it,Ct,vt)}static createFromModelBuffer(Ct,vt){return ee.VisionTaskRunner.createVisionInstance(it,Ct,{baseOptions:{modelAssetBuffer:vt}})}static createFromModelPath(Ct,vt){return ee.VisionTaskRunner.createVisionInstance(it,Ct,{baseOptions:{modelAssetPath:vt}})}constructor(Ct,vt){super(new ee.VisionGraphRunner(Ct,vt),J,pe,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new E.ImageSegmenterGraphOptions,this.segmenterOptions=new H.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Ct){this.options.setBaseOptions(Ct)}setOptions(Ct){var vt,pt;return Ct.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(Ct.displayNamesLocale):"displayNamesLocale"in Ct&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in Ct&&(this.outputCategoryMask=(vt=Ct.outputCategoryMask)!==null&&vt!==void 0&&vt),"outputConfidenceMasks"in Ct&&(this.outputConfidenceMasks=(pt=Ct.outputConfidenceMasks)===null||pt===void 0||pt),super.applyOptions(Ct)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var Ct,vt,pt;const ft=this.getCalculatorGraphConfig().getNodeList().filter(Pt=>Pt.getName().includes(Ve));if(this.labels=[],ft.length>1)throw new Error(`The graph has more than one ${Ve}.`);ft.length===1&&((pt=(vt=(Ct=ft[0].getOptions())===null||Ct===void 0?void 0:Ct.getExtension(s.TensorsToSegmentationCalculatorOptions.ext))===null||vt===void 0?void 0:vt.getLabelItemsMap())!==null&&pt!==void 0?pt:new Map).forEach((Pt,wt)=>{this.labels[Number(wt)]=Pt.getName()})}segment(Ct,vt,pt){const ft=typeof vt!="function"?vt:{};return this.userCallback=typeof vt=="function"?vt:pt,this.reset(),this.processImageData(Ct,ft),this.processResults()}segmentForVideo(Ct,vt,pt,ft){const Pt=typeof pt!="function"?pt:{};return this.userCallback=typeof pt=="function"?pt:ft,this.reset(),this.processVideoData(Ct,Pt,vt),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{const Ct=new ae.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return Ct;this.userCallback(Ct)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const Ct=new w.CalculatorGraphConfig;Ct.addInputStream(J),Ct.addInputStream(pe);const vt=new d.CalculatorOptions;vt.setExtension(E.ImageSegmenterGraphOptions.ext,this.options);const pt=new w.CalculatorGraphConfig.Node;pt.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),pt.addInputStream("IMAGE:"+J),pt.addInputStream("NORM_RECT:"+pe),pt.setOptions(vt),Ct.addNode(pt),this.addKeepaliveNode(Ct),this.outputConfidenceMasks&&(Ct.addOutputStream(ue),pt.addOutputStream("CONFIDENCE_MASKS:"+ue),this.keepStreamAlive(ue),this.graphRunner.attachImageVectorListener(ue,(Pt,wt)=>{this.confidenceMasks=Pt.map(qt=>this.convertToMPMask(qt,!this.userCallback)),this.setLatestOutputTimestamp(wt)}),this.graphRunner.attachEmptyPacketListener(ue,Pt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(Pt)})),this.outputCategoryMask&&(Ct.addOutputStream(Mt),pt.addOutputStream("CATEGORY_MASK:"+Mt),this.keepStreamAlive(Mt),this.graphRunner.attachImageListener(Mt,(Pt,wt)=>{this.categoryMask=this.convertToMPMask(Pt,!this.userCallback),this.setLatestOutputTimestamp(wt)}),this.graphRunner.attachEmptyPacketListener(Mt,Pt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Pt)})),Ct.addOutputStream(nt),pt.addOutputStream("QUALITY_SCORES:"+nt),this.graphRunner.attachFloatVectorListener(nt,(Pt,wt)=>{this.qualityScores=Pt,this.setLatestOutputTimestamp(wt)}),this.graphRunner.attachEmptyPacketListener(nt,Pt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Pt)});const ft=Ct.serializeBinary();this.setGraph(new Uint8Array(ft),!0)}}u.ImageSegmenter=it}(image_segmenter);var interactive_segmenter={},color_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Color",null,w),A.exportSymbol("proto.mediapipe.ColorMap",null,w),proto.mediapipe.Color=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Color,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.ColorMap,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(d){return proto.mediapipe.Color.toObject(d,this)},proto.mediapipe.Color.toObject=function(d,m){var s,E={r:(s=n.Message.getField(m,1))==null?void 0:s,g:(s=n.Message.getField(m,2))==null?void 0:s,b:(s=n.Message.getField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Color.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(s,m)},proto.mediapipe.Color.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setR(s);break;case 2:s=m.readInt32(),d.setG(s);break;case 3:s=m.readInt32(),d.setB(s);break;default:m.skipField()}return d},proto.mediapipe.Color.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s)},proto.mediapipe.Color.prototype.getR=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Color.prototype.clearR=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Color.prototype.getG=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Color.prototype.clearG=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Color.prototype.getB=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Color.prototype.clearB=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(d){return proto.mediapipe.ColorMap.toObject(d,this)},proto.mediapipe.ColorMap.toObject=function(d,m){var s,E={labelToColorMap:(s=m.getLabelToColorMap())?s.toObject(d,proto.mediapipe.Color.toObject):[]};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.ColorMap.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(s,m)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=d.getLabelToColorMap();m.readMessage(s,function(E,H){n.Map.deserializeBinary(E,H,n.BinaryReader.prototype.readString,n.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)})}else m.skipField();return d},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getLabelToColorMap(!0))&&s.getLength()>0&&s.serializeBinary(1,m,n.BinaryWriter.prototype.writeString,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(d){return n.Message.getMapField(this,1,d,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},A.object.extend(u,proto.mediapipe)})(color_pb);var render_data_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=color_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.RenderAnnotation",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,w),A.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,w),A.exportSymbol("proto.mediapipe.RenderData",null,w),A.exportSymbol("proto.mediapipe.RenderViewport",null,w),proto.mediapipe.RenderData=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},A.inherits(proto.mediapipe.RenderData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(m){n.Message.initialize(this,m,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},A.inherits(proto.mediapipe.RenderAnnotation,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Rectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Oval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledOval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Point,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Line,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.GradientLine,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},A.inherits(proto.mediapipe.RenderAnnotation.Scribble,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Arrow,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Text,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(m){n.Message.initialize(this,m,0,-1,null,null)},A.inherits(proto.mediapipe.RenderViewport,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(m){return proto.mediapipe.RenderData.toObject(m,this)},proto.mediapipe.RenderData.toObject=function(m,s){var E,H={renderAnnotationsList:n.Message.toObjectList(s.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,m),sceneClass:(E=n.Message.getField(s,2))==null?void 0:E,sceneViewport:(E=s.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderData.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation;s.readMessage(E,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),m.addRenderAnnotations(E);break;case 2:E=s.readString(),m.setSceneClass(E);break;case 3:E=new proto.mediapipe.RenderViewport,s.readMessage(E,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),m.setSceneViewport(E);break;default:s.skipField()}return m},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRenderAnnotationsList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeString(2,E),(E=m.getSceneViewport())!=null&&s.writeMessage(3,E,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.RenderAnnotation,s)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.toObject(m,this)},proto.mediapipe.RenderAnnotation.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),filledRectangle:(E=s.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(m,E),oval:(E=s.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(m,E),filledOval:(E=s.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(m,E),point:(E=s.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(m,E),line:(E=s.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(m,E),arrow:(E=s.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(m,E),text:(E=s.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(m,E),roundedRectangle:(E=s.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,E),filledRoundedRectangle:(E=s.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(m,E),gradientLine:(E=s.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(m,E),scribble:(E=s.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(m,E),thickness:n.Message.getFloatingPointFieldWithDefault(s,11,1),color:(E=s.getColor())&&d.Color.toObject(m,E),sceneTag:(E=n.Message.getField(s,13))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=new proto.mediapipe.RenderAnnotation.FilledRectangle,s.readMessage(E,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),m.setFilledRectangle(E);break;case 3:E=new proto.mediapipe.RenderAnnotation.Oval,s.readMessage(E,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),m.setOval(E);break;case 4:E=new proto.mediapipe.RenderAnnotation.FilledOval,s.readMessage(E,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),m.setFilledOval(E);break;case 5:E=new proto.mediapipe.RenderAnnotation.Point,s.readMessage(E,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),m.setPoint(E);break;case 6:E=new proto.mediapipe.RenderAnnotation.Line,s.readMessage(E,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),m.setLine(E);break;case 7:E=new proto.mediapipe.RenderAnnotation.Arrow,s.readMessage(E,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),m.setArrow(E);break;case 8:E=new proto.mediapipe.RenderAnnotation.Text,s.readMessage(E,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),m.setText(E);break;case 9:E=new proto.mediapipe.RenderAnnotation.RoundedRectangle,s.readMessage(E,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),m.setRoundedRectangle(E);break;case 10:E=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,s.readMessage(E,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),m.setFilledRoundedRectangle(E);break;case 14:E=new proto.mediapipe.RenderAnnotation.GradientLine,s.readMessage(E,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),m.setGradientLine(E);break;case 15:E=new proto.mediapipe.RenderAnnotation.Scribble,s.readMessage(E,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),m.setScribble(E);break;case 11:E=s.readDouble(),m.setThickness(E);break;case 12:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor(E);break;case 13:E=s.readString(),m.setSceneTag(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=m.getFilledRectangle())!=null&&s.writeMessage(2,E,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),(E=m.getOval())!=null&&s.writeMessage(3,E,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(E=m.getFilledOval())!=null&&s.writeMessage(4,E,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),(E=m.getPoint())!=null&&s.writeMessage(5,E,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),(E=m.getLine())!=null&&s.writeMessage(6,E,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),(E=m.getArrow())!=null&&s.writeMessage(7,E,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),(E=m.getText())!=null&&s.writeMessage(8,E,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),(E=m.getRoundedRectangle())!=null&&s.writeMessage(9,E,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(E=m.getFilledRoundedRectangle())!=null&&s.writeMessage(10,E,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),(E=m.getGradientLine())!=null&&s.writeMessage(14,E,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),(E=m.getScribble())!=null&&s.writeMessage(15,E,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),(E=n.Message.getField(m,11))!=null&&s.writeDouble(11,E),(E=m.getColor())!=null&&s.writeMessage(12,E,d.Color.serializeBinaryToWriter),(E=n.Message.getField(m,13))!=null&&s.writeString(13,E)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(m,s){var E,H={left:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,top:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,right:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,bottom:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),rotation:(E=n.Message.getOptionalFloatingPointField(s,6))==null?void 0:E,topLeftThickness:(E=n.Message.getOptionalFloatingPointField(s,7))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setLeft(E);break;case 2:E=s.readDouble(),m.setTop(E);break;case 3:E=s.readDouble(),m.setRight(E);break;case 4:E=s.readDouble(),m.setBottom(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=s.readDouble(),m.setRotation(E);break;case 7:E=s.readDouble(),m.setTopLeftThickness(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&s.writeDouble(6,E),(E=n.Message.getField(m,7))!=null&&s.writeDouble(7,E)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return n.Message.getField(this,7)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),fillColor:(E=s.getFillColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=m.getFillColor())!=null&&s.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),cornerRadius:n.Message.getFieldWithDefault(s,2,0),lineType:n.Message.getFieldWithDefault(s,3,4)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=s.readInt32(),m.setCornerRadius(E);break;case 3:E=s.readInt32(),m.setLineType(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeInt32(3,E)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(m,s){var E,H={roundedRectangle:(E=s.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,E),fillColor:(E=s.getFillColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.RoundedRectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),m.setRoundedRectangle(E);break;case 2:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRoundedRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(E=m.getFillColor())!=null&&s.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Oval.toObject(m,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E)}else s.skipField();return m},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(m,s){var E;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(m,s){var E,H={oval:(E=s.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(m,E),fillColor:(E=s.getFillColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Oval;s.readMessage(E,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),m.setOval(E);break;case 2:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getOval())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(E=m.getFillColor())!=null&&s.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Point.toObject(m,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(m,s){var E,H={x:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,y:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,3,!1)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setX(E);break;case 2:E=s.readDouble(),m.setY(E);break;case 3:E=s.readBool(),m.setNormalized(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeBool(3,E)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Line.toObject(m,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(m,s){var E,H={xStart:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),lineType:n.Message.getFieldWithDefault(s,6,1)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setXStart(E);break;case 2:E=s.readDouble(),m.setYStart(E);break;case 3:E=s.readDouble(),m.setXEnd(E);break;case 4:E=s.readDouble(),m.setYEnd(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=s.readEnum(),m.setLineType(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&s.writeEnum(6,E)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(m,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(m,s){var E,H={xStart:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),color1:(E=s.getColor1())&&d.Color.toObject(m,E),color2:(E=s.getColor2())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setXStart(E);break;case 2:E=s.readDouble(),m.setYStart(E);break;case 3:E=s.readDouble(),m.setXEnd(E);break;case 4:E=s.readDouble(),m.setYEnd(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor1(E);break;case 7:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor2(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=m.getColor1())!=null&&s.writeMessage(6,E,d.Color.serializeBinaryToWriter),(E=m.getColor2())!=null&&s.writeMessage(7,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return n.Message.getWrapperField(this,d.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(m){return n.Message.setWrapperField(this,6,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return n.Message.getWrapperField(this,d.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(m){return n.Message.setWrapperField(this,7,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Scribble.toObject(m,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(m,s){var E={pointList:n.Message.toObjectList(s.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,m)};return m&&(E.$jspbMessageInstance=s),E}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var E=new proto.mediapipe.RenderAnnotation.Point;s.readMessage(E,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),m.addPoint(E)}else s.skipField();return m},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(m,s){var E;(E=m.getPointList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.RenderAnnotation.Point,s)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Arrow.toObject(m,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(m,s){var E,H={xStart:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setXStart(E);break;case 2:E=s.readDouble(),m.setYStart(E);break;case 3:E=s.readDouble(),m.setXEnd(E);break;case 4:E=s.readDouble(),m.setYEnd(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Text.toObject(m,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(m,s){var E,H={displayText:(E=n.Message.getField(s,1))==null?void 0:E,left:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,baseline:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,fontHeight:n.Message.getFloatingPointFieldWithDefault(s,4,8),normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),fontFace:n.Message.getFieldWithDefault(s,6,0),centerHorizontally:n.Message.getBooleanFieldWithDefault(s,7,!1),centerVertically:n.Message.getBooleanFieldWithDefault(s,8,!1),outlineThickness:n.Message.getFloatingPointFieldWithDefault(s,11,0),outlineColor:(E=s.getOutlineColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setDisplayText(E);break;case 2:E=s.readDouble(),m.setLeft(E);break;case 3:E=s.readDouble(),m.setBaseline(E);break;case 4:E=s.readDouble(),m.setFontHeight(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=s.readInt32(),m.setFontFace(E);break;case 7:E=s.readBool(),m.setCenterHorizontally(E);break;case 8:E=s.readBool(),m.setCenterVertically(E);break;case 11:E=s.readDouble(),m.setOutlineThickness(E);break;case 12:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setOutlineColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&s.writeInt32(6,E),(E=n.Message.getField(m,7))!=null&&s.writeBool(7,E),(E=n.Message.getField(m,8))!=null&&s.writeBool(8,E),(E=n.Message.getField(m,11))!=null&&s.writeDouble(11,E),(E=m.getOutlineColor())!=null&&s.writeMessage(12,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return n.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return n.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(m){return n.Message.setField(this,8,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(m){return n.Message.setField(this,11,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(m){return n.Message.setWrapperField(this,12,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(m){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(m){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(m){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(m){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(m){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(m){return n.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(m){return n.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(m){return n.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(m){return n.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,9)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(m){return n.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(m){return n.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return n.Message.getField(this,14)!=null},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(m){return n.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(m){return n.Message.setField(this,11,m)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(m){return n.Message.setWrapperField(this,12,m)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return n.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(m){return n.Message.setField(this,13,m)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return n.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return n.Message.getField(this,13)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(m){return proto.mediapipe.RenderViewport.toObject(m,this)},proto.mediapipe.RenderViewport.toObject=function(m,s){var E,H={id:(E=n.Message.getField(s,1))==null?void 0:E,widthPx:(E=n.Message.getField(s,2))==null?void 0:E,heightPx:(E=n.Message.getField(s,3))==null?void 0:E,composeOnVideo:(E=n.Message.getBooleanField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderViewport.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setId(E);break;case 2:E=s.readInt32(),m.setWidthPx(E);break;case 3:E=s.readInt32(),m.setHeightPx(E);break;case 4:E=s.readBool(),m.setComposeOnVideo(E);break;default:s.skipField()}return m},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeInt32(3,E),(E=n.Message.getField(m,4))!=null&&s.writeBool(4,E)},proto.mediapipe.RenderViewport.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(render_data_pb);var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),interactive_segmenter_result.InteractiveSegmenterResult=void 0;class InteractiveSegmenterResult{constructor(n,A,w){this.confidenceMasks=n,this.categoryMask=A,this.qualityScores=w}close(){var n,A;(n=this.confidenceMasks)===null||n===void 0||n.forEach(w=>{w.close()}),(A=this.categoryMask)===null||A===void 0||A.close()}}interactive_segmenter_result.InteractiveSegmenterResult=InteractiveSegmenterResult;var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Ct,vt,pt,ft){ft===void 0&&(ft=pt);var Pt=Object.getOwnPropertyDescriptor(vt,pt);Pt&&!("get"in Pt?!vt.__esModule:Pt.writable||Pt.configurable)||(Pt={enumerable:!0,get:function(){return vt[pt]}}),Object.defineProperty(Ct,ft,Pt)}:function(Ct,vt,pt,ft){ft===void 0&&(ft=pt),Ct[ft]=vt[pt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Ct,vt){for(var pt in Ct)pt==="default"||Object.prototype.hasOwnProperty.call(vt,pt)||n(vt,Ct,pt)};Object.defineProperty(u,"__esModule",{value:!0}),u.InteractiveSegmenter=void 0;const w=calculator_pb,d=calculator_options_pb,m=base_options_pb,s=image_segmenter_graph_options_pb,E=segmenter_options_pb,H=vision_task_runner,ee=color_pb,ae=render_data_pb,J=interactive_segmenter_result;A(interactive_segmenter_options,u),A(interactive_segmenter_result,u);const pe="image_in",ue="norm_rect_in",Mt="roi_in",nt="confidence_masks",Ve="category_mask",it="quality_scores";class At extends H.VisionTaskRunner{static createFromOptions(vt,pt){return H.VisionTaskRunner.createVisionInstance(At,vt,pt)}static createFromModelBuffer(vt,pt){return H.VisionTaskRunner.createVisionInstance(At,vt,{baseOptions:{modelAssetBuffer:pt}})}static createFromModelPath(vt,pt){return H.VisionTaskRunner.createVisionInstance(At,vt,{baseOptions:{modelAssetPath:pt}})}constructor(vt,pt){super(new H.VisionGraphRunner(vt,pt),pe,ue,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new s.ImageSegmenterGraphOptions,this.segmenterOptions=new E.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(vt){this.options.setBaseOptions(vt)}setOptions(vt){var pt,ft;return"outputCategoryMask"in vt&&(this.outputCategoryMask=(pt=vt.outputCategoryMask)!==null&&pt!==void 0&&pt),"outputConfidenceMasks"in vt&&(this.outputConfidenceMasks=(ft=vt.outputConfidenceMasks)===null||ft===void 0||ft),super.applyOptions(vt)}segment(vt,pt,ft,Pt){const wt=typeof ft!="function"?ft:{};return this.userCallback=typeof ft=="function"?ft:Pt,this.reset(),this.processRenderData(pt,this.getSynctheticTimestamp()),this.processImageData(vt,wt),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{const vt=new J.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return vt;this.userCallback(vt)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const vt=new w.CalculatorGraphConfig;vt.addInputStream(pe),vt.addInputStream(Mt),vt.addInputStream(ue);const pt=new d.CalculatorOptions;pt.setExtension(s.ImageSegmenterGraphOptions.ext,this.options);const ft=new w.CalculatorGraphConfig.Node;ft.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),ft.addInputStream("IMAGE:"+pe),ft.addInputStream("ROI:"+Mt),ft.addInputStream("NORM_RECT:"+ue),ft.setOptions(pt),vt.addNode(ft),this.addKeepaliveNode(vt),this.outputConfidenceMasks&&(vt.addOutputStream(nt),ft.addOutputStream("CONFIDENCE_MASKS:"+nt),this.keepStreamAlive(nt),this.graphRunner.attachImageVectorListener(nt,(wt,qt)=>{this.confidenceMasks=wt.map(Ft=>this.convertToMPMask(Ft,!this.userCallback)),this.setLatestOutputTimestamp(qt)}),this.graphRunner.attachEmptyPacketListener(nt,wt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(wt)})),this.outputCategoryMask&&(vt.addOutputStream(Ve),ft.addOutputStream("CATEGORY_MASK:"+Ve),this.keepStreamAlive(Ve),this.graphRunner.attachImageListener(Ve,(wt,qt)=>{this.categoryMask=this.convertToMPMask(wt,!this.userCallback),this.setLatestOutputTimestamp(qt)}),this.graphRunner.attachEmptyPacketListener(Ve,wt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(wt)})),vt.addOutputStream(it),ft.addOutputStream("QUALITY_SCORES:"+it),this.graphRunner.attachFloatVectorListener(it,(wt,qt)=>{this.qualityScores=wt,this.setLatestOutputTimestamp(qt)}),this.graphRunner.attachEmptyPacketListener(it,wt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(wt)});const Pt=vt.serializeBinary();this.setGraph(new Uint8Array(Pt),!0)}processRenderData(vt,pt){const ft=new ae.RenderData,Pt=new ae.RenderAnnotation,wt=new ee.Color;if(wt.setR(255),Pt.setColor(wt),vt.keypoint&&vt.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(vt.keypoint){const qt=new ae.RenderAnnotation.Point;qt.setNormalized(!0),qt.setX(vt.keypoint.x),qt.setY(vt.keypoint.y),Pt.setPoint(qt)}else{if(!vt.scribble)throw new Error("Must provide either a keypoint or a scribble.");{const qt=new ae.RenderAnnotation.Scribble;for(const Ft of vt.scribble){const An=new ae.RenderAnnotation.Point;An.setNormalized(!0),An.setX(Ft.x),An.setY(Ft.y),qt.addPoint(An)}Pt.setScribble(qt)}}ft.addRenderAnnotations(Pt),this.graphRunner.addProtoToStream(ft.serializeBinary(),"mediapipe.RenderData",Mt,pt)}}u.InteractiveSegmenter=At}(interactive_segmenter);var object_detector={},object_detector_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,w),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(E){n.Message.initialize(this,E,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(E,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee),displayNamesLocale:n.Message.getFieldWithDefault(H,2,"en"),maxResults:n.Message.getFieldWithDefault(H,3,-1),scoreThreshold:(ee=n.Message.getOptionalFloatingPointField(H,4))==null?void 0:ee,categoryAllowlistList:(ee=n.Message.getRepeatedField(H,5))==null?void 0:ee,categoryDenylistList:(ee=n.Message.getRepeatedField(H,6))==null?void 0:ee};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=H.readString(),E.setDisplayNamesLocale(ee);break;case 3:ee=H.readInt32(),E.setMaxResults(ee);break;case 4:ee=H.readFloat(),E.setScoreThreshold(ee);break;case 5:ee=H.readString(),E.addCategoryAllowlist(ee);break;case 6:ee=H.readString(),E.addCategoryDenylist(ee);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&H.writeString(2,ee),(ee=n.Message.getField(E,3))!=null&&H.writeInt32(3,ee),(ee=n.Message.getField(E,4))!=null&&H.writeFloat(4,ee),(ee=E.getCategoryAllowlistList()).length>0&&H.writeRepeatedString(5,ee),(ee=E.getCategoryDenylistList()).length>0&&H.writeRepeatedString(6,ee)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(E){return n.Message.setField(this,5,E||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(E,H){return n.Message.addToRepeatedField(this,5,E,H)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(E){return n.Message.setField(this,6,E||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(E,H){return n.Message.addToRepeatedField(this,6,E,H)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.object_detector.proto)})(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Mt,nt,Ve,it){it===void 0&&(it=Ve);var At=Object.getOwnPropertyDescriptor(nt,Ve);At&&!("get"in At?!nt.__esModule:At.writable||At.configurable)||(At={enumerable:!0,get:function(){return nt[Ve]}}),Object.defineProperty(Mt,it,At)}:function(Mt,nt,Ve,it){it===void 0&&(it=Ve),Mt[it]=nt[Ve]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Mt,nt){for(var Ve in Mt)Ve==="default"||Object.prototype.hasOwnProperty.call(nt,Ve)||n(nt,Mt,Ve)};Object.defineProperty(u,"__esModule",{value:!0}),u.ObjectDetector=void 0;const w=calculator_pb,d=calculator_options_pb,m=detection_pb,s=base_options_pb,E=object_detector_options_pb,H=detection_result,ee=vision_task_runner,ae="input_frame_gpu",J="norm_rect",pe="detections";A(object_detector_options,u),A(object_detector_result,u);class ue extends ee.VisionTaskRunner{static createFromOptions(nt,Ve){return ee.VisionTaskRunner.createVisionInstance(ue,nt,Ve)}static createFromModelBuffer(nt,Ve){return ee.VisionTaskRunner.createVisionInstance(ue,nt,{baseOptions:{modelAssetBuffer:Ve}})}static createFromModelPath(nt,Ve){return ss(this,null,function*(){return ee.VisionTaskRunner.createVisionInstance(ue,nt,{baseOptions:{modelAssetPath:Ve}})})}constructor(nt,Ve){super(new ee.VisionGraphRunner(nt,Ve),ae,J,!1),this.result={detections:[]},this.options=new E.ObjectDetectorOptions,this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(nt){this.options.setBaseOptions(nt)}setOptions(nt){return nt.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(nt.displayNamesLocale):"displayNamesLocale"in nt&&this.options.clearDisplayNamesLocale(),nt.maxResults!==void 0?this.options.setMaxResults(nt.maxResults):"maxResults"in nt&&this.options.clearMaxResults(),nt.scoreThreshold!==void 0?this.options.setScoreThreshold(nt.scoreThreshold):"scoreThreshold"in nt&&this.options.clearScoreThreshold(),nt.categoryAllowlist!==void 0?this.options.setCategoryAllowlistList(nt.categoryAllowlist):"categoryAllowlist"in nt&&this.options.clearCategoryAllowlistList(),nt.categoryDenylist!==void 0?this.options.setCategoryDenylistList(nt.categoryDenylist):"categoryDenylist"in nt&&this.options.clearCategoryDenylistList(),this.applyOptions(nt)}detect(nt,Ve){return this.result={detections:[]},this.processImageData(nt,Ve),this.result}detectForVideo(nt,Ve,it){return this.result={detections:[]},this.processVideoData(nt,it,Ve),this.result}addJsObjectDetections(nt){for(const Ve of nt){const it=m.Detection.deserializeBinary(Ve);this.result.detections.push((0,H.convertFromDetectionProto)(it))}}refreshGraph(){const nt=new w.CalculatorGraphConfig;nt.addInputStream(ae),nt.addInputStream(J),nt.addOutputStream(pe);const Ve=new d.CalculatorOptions;Ve.setExtension(E.ObjectDetectorOptions.ext,this.options);const it=new w.CalculatorGraphConfig.Node;it.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),it.addInputStream("IMAGE:"+ae),it.addInputStream("NORM_RECT:"+J),it.addOutputStream("DETECTIONS:"+pe),it.setOptions(Ve),nt.addNode(it),this.graphRunner.attachProtoVectorListener(pe,(Ct,vt)=>{this.addJsObjectDetections(Ct),this.setLatestOutputTimestamp(vt)}),this.graphRunner.attachEmptyPacketListener(pe,Ct=>{this.setLatestOutputTimestamp(Ct)});const At=nt.serializeBinary();this.setGraph(new Uint8Array(At),!0)}}u.ObjectDetector=ue}(object_detector);var pose_landmarker={},pose_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(H,3,.5),numPoses:(ee=n.Message.getField(H,4))==null?void 0:ee};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=H.readFloat(),E.setMinDetectionConfidence(ee);break;case 3:ee=H.readFloat(),E.setMinSuppressionThreshold(ee);break;case 4:ee=H.readInt32(),E.setNumPoses(ee);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&H.writeFloat(2,ee),(ee=n.Message.getField(E,3))!=null&&H.writeFloat(3,ee),(ee=n.Message.getField(E,4))!=null&&H.writeInt32(4,ee)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_detector.proto)})(pose_detector_graph_options_pb);var pose_landmarker_graph_options_pb={},pose_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s),A.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,w),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(E,H){var ee,ae={baseOptions:(ee=H.getBaseOptions())&&s.BaseOptions.toObject(E,ee),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5)};return E&&(ae.$jspbMessageInstance=H),ae}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),ee=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader(ee,H)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var ee=new s.BaseOptions;H.readMessage(ee,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(ee);break;case 2:ee=H.readFloat(),E.setMinDetectionConfidence(ee);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var ee=void 0;(ee=E.getBaseOptions())!=null&&H.writeMessage(1,ee,s.BaseOptions.serializeBinaryToWriter),(ee=n.Message.getField(E,2))!=null&&H.writeFloat(2,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(pose_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,w=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||w!==void 0&&w||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var m=calculator_options_pb;A.object.extend(proto,m);var s=base_options_pb;A.object.extend(proto,s);var E=pose_detector_graph_options_pb;A.object.extend(proto,E);var H=pose_landmarks_detector_graph_options_pb;A.object.extend(proto,H),A.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,w),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function(ee){n.Message.initialize(this,ee,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function(ee){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject(ee,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function(ee,ae){var J,pe={baseOptions:(J=ae.getBaseOptions())&&s.BaseOptions.toObject(ee,J),poseDetectorGraphOptions:(J=ae.getPoseDetectorGraphOptions())&&E.PoseDetectorGraphOptions.toObject(ee,J),poseLandmarksDetectorGraphOptions:(J=ae.getPoseLandmarksDetectorGraphOptions())&&H.PoseLandmarksDetectorGraphOptions.toObject(ee,J),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(ae,4,.5)};return ee&&(pe.$jspbMessageInstance=ae),pe}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function(ee){var ae=new n.BinaryReader(ee),J=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(J,ae)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function(ee,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var J=new s.BaseOptions;ae.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),ee.setBaseOptions(J);break;case 2:J=new E.PoseDetectorGraphOptions,ae.readMessage(J,E.PoseDetectorGraphOptions.deserializeBinaryFromReader),ee.setPoseDetectorGraphOptions(J);break;case 3:J=new H.PoseLandmarksDetectorGraphOptions,ae.readMessage(J,H.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),ee.setPoseLandmarksDetectorGraphOptions(J);break;case 4:J=ae.readFloat(),ee.setMinTrackingConfidence(J);break;default:ae.skipField()}return ee},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var ee=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,ee),ee.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function(ee,ae){var J=void 0;(J=ee.getBaseOptions())!=null&&ae.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=ee.getPoseDetectorGraphOptions())!=null&&ae.writeMessage(2,J,E.PoseDetectorGraphOptions.serializeBinaryToWriter),(J=ee.getPoseLandmarksDetectorGraphOptions())!=null&&ae.writeMessage(3,J,H.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),(J=n.Message.getField(ee,4))!=null&&ae.writeFloat(4,J)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function(ee){return n.Message.setWrapperField(this,1,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,2,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,H.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function(ee){return n.Message.setWrapperField(this,3,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(ee){return n.Message.setField(this,4,ee)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarker_graph_options_pb);var pose_landmarker_result={};Object.defineProperty(pose_landmarker_result,"__esModule",{value:!0}),pose_landmarker_result.PoseLandmarkerResult=void 0;class PoseLandmarkerResult{constructor(n,A,w){this.landmarks=n,this.worldLandmarks=A,this.segmentationMasks=w}close(){var n;(n=this.segmentationMasks)===null||n===void 0||n.forEach(A=>{A.close()})}}pose_landmarker_result.PoseLandmarkerResult=PoseLandmarkerResult;var pose_landmarker_options={};Object.defineProperty(pose_landmarker_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(vt,pt,ft,Pt){Pt===void 0&&(Pt=ft);var wt=Object.getOwnPropertyDescriptor(pt,ft);wt&&!("get"in wt?!pt.__esModule:wt.writable||wt.configurable)||(wt={enumerable:!0,get:function(){return pt[ft]}}),Object.defineProperty(vt,Pt,wt)}:function(vt,pt,ft,Pt){Pt===void 0&&(Pt=ft),vt[Pt]=pt[ft]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(vt,pt){for(var ft in vt)ft==="default"||Object.prototype.hasOwnProperty.call(pt,ft)||n(pt,vt,ft)};Object.defineProperty(u,"__esModule",{value:!0}),u.PoseLandmarker=void 0;const w=calculator_pb,d=calculator_options_pb,m=landmark_pb,s=base_options_pb,E=pose_detector_graph_options_pb,H=pose_landmarker_graph_options_pb,ee=pose_landmarks_detector_graph_options_pb,ae=landmark_result,J=vision_task_runner,pe=pose_landmarker_result;A(pose_landmarker_options,u),A(pose_landmarker_result,u);const ue="image_in",Mt="norm_rect",nt="normalized_landmarks",Ve="world_landmarks",it="segmentation_masks",At=.5;class Ct extends J.VisionTaskRunner{static createFromOptions(pt,ft){return J.VisionTaskRunner.createVisionInstance(Ct,pt,ft)}static createFromModelBuffer(pt,ft){return J.VisionTaskRunner.createVisionInstance(Ct,pt,{baseOptions:{modelAssetBuffer:ft}})}static createFromModelPath(pt,ft){return J.VisionTaskRunner.createVisionInstance(Ct,pt,{baseOptions:{modelAssetPath:ft}})}constructor(pt,ft){super(new J.VisionGraphRunner(pt,ft),ue,Mt,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new H.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.poseLandmarksDetectorGraphOptions=new ee.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new E.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(pt){this.options.setBaseOptions(pt)}setOptions(pt){var ft,Pt,wt,qt,Ft;return"numPoses"in pt&&this.poseDetectorGraphOptions.setNumPoses((ft=pt.numPoses)!==null&&ft!==void 0?ft:1),"minPoseDetectionConfidence"in pt&&this.poseDetectorGraphOptions.setMinDetectionConfidence((Pt=pt.minPoseDetectionConfidence)!==null&&Pt!==void 0?Pt:At),"minTrackingConfidence"in pt&&this.options.setMinTrackingConfidence((wt=pt.minTrackingConfidence)!==null&&wt!==void 0?wt:At),"minPosePresenceConfidence"in pt&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence((qt=pt.minPosePresenceConfidence)!==null&&qt!==void 0?qt:At),"outputSegmentationMasks"in pt&&(this.outputSegmentationMasks=(Ft=pt.outputSegmentationMasks)!==null&&Ft!==void 0&&Ft),this.applyOptions(pt)}detect(pt,ft,Pt){const wt=typeof ft!="function"?ft:{};return this.userCallback=typeof ft=="function"?ft:Pt,this.resetResults(),this.processImageData(pt,wt),this.processResults()}detectForVideo(pt,ft,Pt,wt){const qt=typeof Pt!="function"?Pt:{};return this.userCallback=typeof Pt=="function"?Pt:wt,this.resetResults(),this.processVideoData(pt,qt,ft),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{const pt=new pe.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return pt;this.userCallback(pt)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(At),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(At),this.options.setMinTrackingConfidence(At)}addJsLandmarks(pt){this.landmarks=[];for(const ft of pt){const Pt=m.NormalizedLandmarkList.deserializeBinary(ft);this.landmarks.push((0,ae.convertToLandmarks)(Pt))}}adddJsWorldLandmarks(pt){this.worldLandmarks=[];for(const ft of pt){const Pt=m.LandmarkList.deserializeBinary(ft);this.worldLandmarks.push((0,ae.convertToWorldLandmarks)(Pt))}}refreshGraph(){const pt=new w.CalculatorGraphConfig;pt.addInputStream(ue),pt.addInputStream(Mt),pt.addOutputStream(nt),pt.addOutputStream(Ve),pt.addOutputStream(it);const ft=new d.CalculatorOptions;ft.setExtension(H.PoseLandmarkerGraphOptions.ext,this.options);const Pt=new w.CalculatorGraphConfig.Node;Pt.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Pt.addInputStream("IMAGE:"+ue),Pt.addInputStream("NORM_RECT:"+Mt),Pt.addOutputStream("NORM_LANDMARKS:"+nt),Pt.addOutputStream("WORLD_LANDMARKS:"+Ve),Pt.setOptions(ft),pt.addNode(Pt),this.addKeepaliveNode(pt),this.graphRunner.attachProtoVectorListener(nt,(qt,Ft)=>{this.addJsLandmarks(qt),this.setLatestOutputTimestamp(Ft)}),this.graphRunner.attachEmptyPacketListener(nt,qt=>{this.landmarks=[],this.setLatestOutputTimestamp(qt)}),this.graphRunner.attachProtoVectorListener(Ve,(qt,Ft)=>{this.adddJsWorldLandmarks(qt),this.setLatestOutputTimestamp(Ft)}),this.graphRunner.attachEmptyPacketListener(Ve,qt=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(qt)}),this.outputSegmentationMasks&&(Pt.addOutputStream("SEGMENTATION_MASK:"+it),this.keepStreamAlive(it),this.graphRunner.attachImageVectorListener(it,(qt,Ft)=>{this.segmentationMasks=qt.map(An=>this.convertToMPMask(An,!this.userCallback)),this.setLatestOutputTimestamp(Ft)}),this.graphRunner.attachEmptyPacketListener(it,qt=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(qt)}));const wt=pt.serializeBinary();this.setGraph(new Uint8Array(wt),!0)}}u.PoseLandmarker=Ct,Ct.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]}(pose_landmarker),Object.defineProperty(vision,"__esModule",{value:!0});var PoseLandmarker_1=vision.PoseLandmarker=ObjectDetector_1=vision.ObjectDetector=InteractiveSegmenter_1=vision.InteractiveSegmenter=ImageSegmenter_1=vision.ImageSegmenter=ImageEmbedder_1=vision.ImageEmbedder=ImageClassifier_1=vision.ImageClassifier=HandLandmarker_1=vision.HandLandmarker=GestureRecognizer_1=vision.GestureRecognizer=FaceStylizer_1=vision.FaceStylizer=FaceLandmarker_1=vision.FaceLandmarker=FaceDetector_1=vision.FaceDetector=MPMask_1=vision.MPMask=MPImage_1=vision.MPImage=FilesetResolver_1=vision.FilesetResolver=DrawingUtils_1=vision.DrawingUtils=void 0;const fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,image_1=image,mask_1=mask,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,pose_landmarker_1=pose_landmarker,DrawingUtils=drawing_utils_1.DrawingUtils;var DrawingUtils_1=vision.DrawingUtils=DrawingUtils;const FilesetResolver=fileset_resolver_1.FilesetResolver;var FilesetResolver_1=vision.FilesetResolver=FilesetResolver;const MPImage=image_1.MPImage;var MPImage_1=vision.MPImage=MPImage;const MPMask=mask_1.MPMask;var MPMask_1=vision.MPMask=MPMask;const FaceDetector=face_detector_1.FaceDetector;var FaceDetector_1=vision.FaceDetector=FaceDetector;const FaceLandmarker=face_landmarker_1.FaceLandmarker;var FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker;const FaceStylizer=face_stylizer_1.FaceStylizer;var FaceStylizer_1=vision.FaceStylizer=FaceStylizer;const GestureRecognizer=gesture_recognizer_1.GestureRecognizer;var GestureRecognizer_1=vision.GestureRecognizer=GestureRecognizer;const HandLandmarker=hand_landmarker_1.HandLandmarker;var HandLandmarker_1=vision.HandLandmarker=HandLandmarker;const ImageClassifier=image_classifier_1.ImageClassifier;var ImageClassifier_1=vision.ImageClassifier=ImageClassifier;const ImageEmbedder=image_embedder_1.ImageEmbedder;var ImageEmbedder_1=vision.ImageEmbedder=ImageEmbedder;const ImageSegmenter=image_segmenter_1.ImageSegmenter;var ImageSegmenter_1=vision.ImageSegmenter=ImageSegmenter;const InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter;var InteractiveSegmenter_1=vision.InteractiveSegmenter=InteractiveSegmenter;const ObjectDetector=object_detector_1.ObjectDetector;var ObjectDetector_1=vision.ObjectDetector=ObjectDetector;const PoseLandmarker=pose_landmarker_1.PoseLandmarker;PoseLandmarker_1=vision.PoseLandmarker=PoseLandmarker},99477:function(u,n,A){"use strict";A.r(n),A.d(n,{ACESFilmicToneMapping:function(){return va},AddEquation:function(){return qt},AddOperation:function(){return Kr},AdditiveAnimationBlendMode:function(){return Du},AdditiveBlending:function(){return pt},AlphaFormat:function(){return Nc},AlwaysCompare:function(){return Ud},AlwaysDepth:function(){return Ti},AlwaysStencilFunc:function(){return xa},AmbientLight:function(){return v0},AmbientLightProbe:function(){return J3},AnimationAction:function(){return Vv},AnimationClip:function(){return $g},AnimationLoader:function(){return wv},AnimationMixer:function(){return fA},AnimationObjectGroup:function(){return rE},AnimationUtils:function(){return z3},ArcCurve:function(){return av},ArrayCamera:function(){return Ny},ArrowHelper:function(){return AE},Audio:function(){return jv},AudioAnalyser:function(){return eE},AudioContext:function(){return cA},AudioListener:function(){return Uv},AudioLoader:function(){return X3},AxesHelper:function(){return yE},BackSide:function(){return Ve},BasicDepthPacking:function(){return Kf},BasicShadowMap:function(){return J},Bone:function(){return j1},BooleanKeyframeTrack:function(){return vd},Box2:function(){return Hl},Box3:function(){return Ao},Box3Helper:function(){return T0},BoxGeometry:function(){return zl},BoxHelper:function(){return gE},BufferAttribute:function(){return ao},BufferGeometry:function(){return xi},BufferGeometryLoader:function(){return b0},ByteType:function(){return ks},Cache:function(){return _d},Camera:function(){return Co},CameraHelper:function(){return n2},CanvasTexture:function(){return A3},CapsuleGeometry:function(){return r0},CatmullRomCurve3:function(){return cv},CineonToneMapping:function(){return Ys},CircleGeometry:function(){return i0},ClampToEdgeWrapping:function(){return Sr},Clock:function(){return kv},Color:function(){return fr},ColorKeyframeTrack:function(){return sA},ColorManagement:function(){return Uo},CompressedArrayTexture:function(){return m3},CompressedTexture:function(){return e0},CompressedTextureLoader:function(){return U3},ConeGeometry:function(){return o0},CubeCamera:function(){return pu},CubeReflectionMapping:function(){return Ls},CubeRefractionMapping:function(){return as},CubeTexture:function(){return Wo},CubeTextureLoader:function(){return y0},CubeUVReflectionMapping:function(){return ds},CubicBezierCurve:function(){return kg},CubicBezierCurve3:function(){return X1},CubicInterpolant:function(){return xv},CullFaceBack:function(){return H},CullFaceFront:function(){return ee},CullFaceFrontBack:function(){return ae},CullFaceNone:function(){return E},Curve:function(){return Ic},CurvePath:function(){return J1},CustomBlending:function(){return wt},CustomToneMapping:function(){return Ss},CylinderGeometry:function(){return _h},Cylindrical:function(){return lE},Data3DTexture:function(){return jo},DataArrayTexture:function(){return Ns},DataTexture:function(){return bf},DataTextureLoader:function(){return j3},DataUtils:function(){return $h},DecrementStencilOp:function(){return ym},DecrementWrapStencilOp:function(){return Uc},DefaultLoadingManager:function(){return Sv},DepthFormat:function(){return Dn},DepthStencilFormat:function(){return Ln},DepthTexture:function(){return Uy},DirectionalLight:function(){return Iv},DirectionalLightHelper:function(){return fE},DiscreteInterpolant:function(){return oA},DisplayP3ColorSpace:function(){return Yf},DodecahedronGeometry:function(){return q1},DoubleSide:function(){return it},DstAlphaFactor:function(){return Yo},DstColorFactor:function(){return tn},DynamicCopyUsage:function(){return yl},DynamicDrawUsage:function(){return _m},DynamicReadUsage:function(){return qp},EdgesGeometry:function(){return cc},EllipseCurve:function(){return Ah},EqualCompare:function(){return $f},EqualDepth:function(){return Hn},EqualStencilFunc:function(){return $a},EquirectangularReflectionMapping:function(){return zi},EquirectangularRefractionMapping:function(){return no},Euler:function(){return Ep},EventDispatcher:function(){return vl},ExtrudeGeometry:function(){return p0},FileLoader:function(){return Su},Float16BufferAttribute:function(){return Kc},Float32BufferAttribute:function(){return yr},Float64BufferAttribute:function(){return Tm},FloatType:function(){return zo},Fog:function(){return pd},FogExp2:function(){return cd},FramebufferTexture:function(){return sv},FrontSide:function(){return nt},Frustum:function(){return du},GLBufferAttribute:function(){return Qv},GLSL1:function(){return eg},GLSL3:function(){return Il},GreaterCompare:function(){return Yl},GreaterDepth:function(){return ti},GreaterEqualCompare:function(){return pp},GreaterEqualDepth:function(){return hr},GreaterEqualStencilFunc:function(){return s1},GreaterStencilFunc:function(){return Gh},GridHelper:function(){return $v},Group:function(){return yf},HalfFloatType:function(){return ba},HemisphereLight:function(){return tm},HemisphereLightHelper:function(){return Oo},HemisphereLightProbe:function(){return Y3},IcosahedronGeometry:function(){return Kg},ImageBitmapLoader:function(){return K3},ImageLoader:function(){return em},ImageUtils:function(){return $l},IncrementStencilOp:function(){return Jf},IncrementWrapStencilOp:function(){return zh},InstancedBufferAttribute:function(){return Hs},InstancedBufferGeometry:function(){return Wp},InstancedInterleavedBuffer:function(){return sE},InstancedMesh:function(){return Ym},Int16BufferAttribute:function(){return ef},Int32BufferAttribute:function(){return c1},Int8BufferAttribute:function(){return ic},IntType:function(){return Ro},InterleavedBuffer:function(){return ud},InterleavedBufferAttribute:function(){return zp},Interpolant:function(){return qg},InterpolateDiscrete:function(){return Io},InterpolateLinear:function(){return Kl},InterpolateSmooth:function(){return sp},InvertStencilOp:function(){return o1},KeepStencilOp:function(){return Pu},KeyframeTrack:function(){return ep},LOD:function(){return Qy},LatheGeometry:function(){return Cf},Layers:function(){return Yh},LessCompare:function(){return Lu},LessDepth:function(){return Fn},LessEqualCompare:function(){return el},LessEqualDepth:function(){return Rn},LessEqualStencilFunc:function(){return cp},LessStencilFunc:function(){return uo},Light:function(){return Ed},LightProbe:function(){return E0},Line:function(){return bu},Line3:function(){return cE},LineBasicMaterial:function(){return pl},LineCurve:function(){return zg},LineCurve3:function(){return Gg},LineDashedMaterial:function(){return bv},LineLoop:function(){return iv},LineSegments:function(){return Np},LinearEncoding:function(){return Nd},LinearFilter:function(){return Zi},LinearInterpolant:function(){return Cv},LinearMipMapLinearFilter:function(){return ko},LinearMipMapNearestFilter:function(){return _a},LinearMipmapLinearFilter:function(){return Jo},LinearMipmapNearestFilter:function(){return ka},LinearSRGBColorSpace:function(){return Xl},LinearToneMapping:function(){return to},Loader:function(){return jl},LoaderUtils:function(){return sm},LoadingManager:function(){return m0},LoopOnce:function(){return Ql},LoopPingPong:function(){return ro},LoopRepeat:function(){return Ir},LuminanceAlphaFormat:function(){return pn},LuminanceFormat:function(){return St},MOUSE:function(){return m},Material:function(){return Ts},MaterialLoader:function(){return Ch},MathUtils:function(){return bm},Matrix3:function(){return yi},Matrix4:function(){return li},MaxEquation:function(){return xr},Mesh:function(){return Bs},MeshBasicMaterial:function(){return nc},MeshDepthMaterial:function(){return P1},MeshDistanceMaterial:function(){return L1},MeshLambertMaterial:function(){return rA},MeshMatcapMaterial:function(){return Ev},MeshNormalMaterial:function(){return _v},MeshPhongMaterial:function(){return Bf},MeshPhysicalMaterial:function(){return Fc},MeshStandardMaterial:function(){return nA},MeshToonMaterial:function(){return Ad},MinEquation:function(){return rr},MirroredRepeatWrapping:function(){return ji},MixOperation:function(){return Bo},MultiplyBlending:function(){return Pt},MultiplyOperation:function(){return Or},NearestFilter:function(){return Pi},NearestMipMapLinearFilter:function(){return Lo},NearestMipMapNearestFilter:function(){return La},NearestMipmapLinearFilter:function(){return fs},NearestMipmapNearestFilter:function(){return pa},NeverCompare:function(){return Zf},NeverDepth:function(){return Rr},NeverStencilFunc:function(){return vm},NoBlending:function(){return Ct},NoColorSpace:function(){return mc},NoToneMapping:function(){return co},NormalAnimationBlendMode:function(){return lp},NormalBlending:function(){return vt},NotEqualCompare:function(){return ku},NotEqualDepth:function(){return ii},NotEqualStencilFunc:function(){return qf},NumberKeyframeTrack:function(){return Zg},Object3D:function(){return Bi},ObjectLoader:function(){return Q3},ObjectSpaceNormalMap:function(){return Xf},OctahedronGeometry:function(){return Xg},OneFactor:function(){return Er},OneMinusDstAlphaFactor:function(){return jn},OneMinusDstColorFactor:function(){return Bn},OneMinusSrcAlphaFactor:function(){return Gr},OneMinusSrcColorFactor:function(){return Fi},OrthographicCamera:function(){return Dm},PCFShadowMap:function(){return pe},PCFSoftShadowMap:function(){return ue},PMREMGenerator:function(){return E1},Path:function(){return xf},PerspectiveCamera:function(){return Li},Plane:function(){return So},PlaneGeometry:function(){return gu},PlaneHelper:function(){return mE},PointLight:function(){return xh},PointLightHelper:function(){return uE},Points:function(){return mh},PointsMaterial:function(){return V1},PolarGridHelper:function(){return hE},PolyhedronGeometry:function(){return xu},PositionalAudio:function(){return $3},PropertyBinding:function(){return so},PropertyMixer:function(){return pc},QuadraticBezierCurve:function(){return Ng},QuadraticBezierCurve3:function(){return vh},Quaternion:function(){return xo},QuaternionKeyframeTrack:function(){return Cu},QuaternionLinearInterpolant:function(){return Fa},RED_GREEN_RGTC2_Format:function(){return Qi},RED_RGTC1_Format:function(){return ua},REVISION:function(){return d},RGBADepthPacking:function(){return gc},RGBAFormat:function(){return Ze},RGBAIntegerFormat:function(){return at},RGBA_ASTC_10x10_Format:function(){return Js},RGBA_ASTC_10x5_Format:function(){return Gi},RGBA_ASTC_10x6_Format:function(){return Hi},RGBA_ASTC_10x8_Format:function(){return Ni},RGBA_ASTC_12x10_Format:function(){return po},RGBA_ASTC_12x12_Format:function(){return ms},RGBA_ASTC_4x4_Format:function(){return wn},RGBA_ASTC_5x4_Format:function(){return Gn},RGBA_ASTC_5x5_Format:function(){return gr},RGBA_ASTC_6x5_Format:function(){return Wr},RGBA_ASTC_6x6_Format:function(){return mi},RGBA_ASTC_8x5_Format:function(){return Ai},RGBA_ASTC_8x6_Format:function(){return Xn},RGBA_ASTC_8x8_Format:function(){return Zr},RGBA_BPTC_Format:function(){return za},RGBA_ETC2_EAC_Format:function(){return Qt},RGBA_PVRTC_2BPPV1_Format:function(){return Me},RGBA_PVRTC_4BPPV1_Format:function(){return ln},RGBA_S3TC_DXT1_Format:function(){return $e},RGBA_S3TC_DXT3_Format:function(){return dt},RGBA_S3TC_DXT5_Format:function(){return _t},RGB_ETC1_Format:function(){return He},RGB_ETC2_Format:function(){return lt},RGB_PVRTC_2BPPV1_Format:function(){return an},RGB_PVRTC_4BPPV1_Format:function(){return Tt},RGB_S3TC_DXT1_Format:function(){return Oe},RGFormat:function(){return Le},RGIntegerFormat:function(){return Fe},RawShaderMaterial:function(){return g0},Ray:function(){return vp},Raycaster:function(){return C0},RectAreaLight:function(){return _0},RedFormat:function(){return lr},RedIntegerFormat:function(){return je},ReinhardToneMapping:function(){return Cs},RepeatWrapping:function(){return hs},ReplaceStencilOp:function(){return i1},ReverseSubtractEquation:function(){return An},RingGeometry:function(){return Yg},SIGNED_RED_GREEN_RGTC2_Format:function(){return qs},SIGNED_RED_RGTC1_Format:function(){return qo},SRGBColorSpace:function(){return ai},Scene:function(){return Vm},ShaderChunk:function(){return Ci},ShaderLib:function(){return Ha},ShaderMaterial:function(){return Yr},ShadowMaterial:function(){return vv},Shape:function(){return Eh},ShapeGeometry:function(){return u0},ShapePath:function(){return vE},ShapeUtils:function(){return Up},ShortType:function(){return Ea},Skeleton:function(){return Og},SkeletonHelper:function(){return pE},SkinnedMesh:function(){return qy},Source:function(){return Na},Sphere:function(){return Fo},SphereGeometry:function(){return ul},Spherical:function(){return aE},SphericalHarmonics3:function(){return Fv},SplineCurve:function(){return Y1},SpotLight:function(){return Rv},SpotLightHelper:function(){return Jv},Sprite:function(){return Vy},SpriteMaterial:function(){return k1},SrcAlphaFactor:function(){return eo},SrcAlphaSaturateFactor:function(){return Ar},SrcColorFactor:function(){return zr},StaticCopyUsage:function(){return Ac},StaticDrawUsage:function(){return up},StaticReadUsage:function(){return Nh},StereoCamera:function(){return q3},StreamCopyUsage:function(){return Uh},StreamDrawUsage:function(){return Jp},StreamReadUsage:function(){return Al},StringKeyframeTrack:function(){return Mh},SubtractEquation:function(){return Ft},SubtractiveBlending:function(){return ft},TOUCH:function(){return s},TangentSpaceNormalMap:function(){return bi},TetrahedronGeometry:function(){return d0},Texture:function(){return $i},TextureLoader:function(){return H3},TorusGeometry:function(){return h0},TorusKnotGeometry:function(){return f0},Triangle:function(){return Ba},TriangleFanDrawMode:function(){return Gd},TriangleStripDrawMode:function(){return r1},TrianglesDrawMode:function(){return n1},TubeGeometry:function(){return jp},TwoPassDoubleSide:function(){return At},UVMapping:function(){return ca},Uint16BufferAttribute:function(){return Qc},Uint32BufferAttribute:function(){return er},Uint8BufferAttribute:function(){return wm},Uint8ClampedBufferAttribute:function(){return l1},Uniform:function(){return gA},UniformsGroup:function(){return oE},UniformsLib:function(){return sr},UniformsUtils:function(){return cu},UnsignedByteType:function(){return bo},UnsignedInt248Type:function(){return Ma},UnsignedIntType:function(){return gs},UnsignedShort4444Type:function(){return Za},UnsignedShort5551Type:function(){return fc},UnsignedShortType:function(){return zs},VSMShadowMap:function(){return Mt},Vector2:function(){return gn},Vector3:function(){return Qe},Vector4:function(){return Mi},VectorKeyframeTrack:function(){return Rf},VideoTexture:function(){return $m},WebGL1Renderer:function(){return Wm},WebGL3DRenderTarget:function(){return fa},WebGLArrayRenderTarget:function(){return tu},WebGLCoordinateSystem:function(){return Zo},WebGLCubeRenderTarget:function(){return td},WebGLMultipleRenderTargets:function(){return Us},WebGLRenderTarget:function(){return Sa},WebGLRenderer:function(){return Hy},WebGLUtils:function(){return Gy},WebGPUCoordinateSystem:function(){return tl},WireframeGeometry:function(){return mv},WrapAroundEnding:function(){return ap},ZeroCurvatureEnding:function(){return Yp},ZeroFactor:function(){return Br},ZeroSlopeEnding:function(){return Gs},ZeroStencilOp:function(){return Zs},_SRGBAFormat:function(){return Jl},sRGBEncoding:function(){return ml}});var w=A(25108);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const d="154",m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},E=0,H=1,ee=2,ae=3,J=0,pe=1,ue=2,Mt=3,nt=0,Ve=1,it=2,At=2,Ct=0,vt=1,pt=2,ft=3,Pt=4,wt=5,qt=100,Ft=101,An=102,rr=103,xr=104,Br=200,Er=201,zr=202,Fi=203,eo=204,Gr=205,Yo=206,jn=207,tn=208,Bn=209,Ar=210,Rr=0,Ti=1,Fn=2,Rn=3,Hn=4,hr=5,ti=6,ii=7,Or=0,Bo=1,Kr=2,co=0,to=1,Cs=2,Ys=3,va=4,Ss=5,ca=300,Ls=301,as=302,zi=303,no=304,ds=306,hs=1e3,Sr=1001,ji=1002,Pi=1003,pa=1004,La=1004,fs=1005,Lo=1005,Zi=1006,ka=1007,_a=1007,Jo=1008,ko=1008,bo=1009,ks=1010,Ea=1011,zs=1012,Ro=1013,gs=1014,zo=1015,ba=1016,Za=1017,fc=1018,Ma=1020,Nc=1021,Ze=1023,St=1024,pn=1025,Dn=1026,Ln=1027,lr=1028,je=1029,Le=1030,Fe=1031,at=1033,Oe=33776,$e=33777,dt=33778,_t=33779,Tt=35840,an=35841,ln=35842,Me=35843,He=36196,lt=37492,Qt=37496,wn=37808,Gn=37809,gr=37810,Wr=37811,mi=37812,Ai=37813,Xn=37814,Zr=37815,Gi=37816,Hi=37817,Ni=37818,Js=37819,po=37820,ms=37821,za=36492,ua=36283,qo=36284,Qi=36285,qs=36286,Ql=2200,Ir=2201,ro=2202,Io=2300,Kl=2301,sp=2302,Yp=2400,Gs=2401,ap=2402,lp=2500,Du=2501,n1=0,r1=1,Gd=2,Nd=3e3,ml=3001,Kf=3200,gc=3201,bi=0,Xf=1,mc="",ai="srgb",Xl="srgb-linear",Yf="display-p3",Zs=0,Pu=7680,i1=7681,Jf=7682,ym=7683,zh=34055,Uc=34056,o1=5386,vm=512,uo=513,$a=514,cp=515,Gh=516,qf=517,s1=518,xa=519,Zf=512,Lu=513,$f=514,el=515,Yl=516,ku=517,pp=518,Ud=519,up=35044,_m=35048,Jp=35040,Nh=35045,qp=35049,Al=35041,Ac=35046,yl=35050,Uh=35042,eg="100",Il="300 es",Jl=1035,Zo=2e3,tl=2001;class vl{addEventListener(e,o){this._listeners===void 0&&(this._listeners={});const f=this._listeners;f[e]===void 0&&(f[e]=[]),f[e].indexOf(o)===-1&&f[e].push(o)}hasEventListener(e,o){if(this._listeners===void 0)return!1;const f=this._listeners;return f[e]!==void 0&&f[e].indexOf(o)!==-1}removeEventListener(e,o){if(this._listeners===void 0)return;const y=this._listeners[e];if(y!==void 0){const M=y.indexOf(o);M!==-1&&y.splice(M,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const f=this._listeners[e.type];if(f!==void 0){e.target=this;const y=f.slice(0);for(let M=0,B=y.length;M<B;M++)y[M].call(this,e);e.target=null}}}const As=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let jh=1234567;const yc=Math.PI/180,vc=180/Math.PI;function Ga(){const C=Math.random()*4294967295|0,e=Math.random()*4294967295|0,o=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(As[C&255]+As[C>>8&255]+As[C>>16&255]+As[C>>24&255]+"-"+As[e&255]+As[e>>8&255]+"-"+As[e>>16&15|64]+As[e>>24&255]+"-"+As[o&63|128]+As[o>>8&255]+"-"+As[o>>16&255]+As[o>>24&255]+As[f&255]+As[f>>8&255]+As[f>>16&255]+As[f>>24&255]).toLowerCase()}function Go(C,e,o){return Math.max(e,Math.min(o,C))}function dp(C,e){return(C%e+e)%e}function Hh(C,e,o,f,y){return f+(C-e)*(y-f)/(o-e)}function Zp(C,e,o){return C!==e?(o-C)/(e-C):0}function ql(C,e,o){return(1-o)*C+o*e}function Wh(C,e,o,f){return ql(C,e,1-Math.exp(-o*f))}function $p(C,e=1){return e-Math.abs(dp(C,e*2)-e)}function _l(C,e,o){return C<=e?0:C>=o?1:(C=(C-e)/(o-e),C*C*(3-2*C))}function El(C,e,o){return C<=e?0:C>=o?1:(C=(C-e)/(o-e),C*C*C*(C*(C*6-15)+10))}function hp(C,e){return C+Math.floor(Math.random()*(e-C+1))}function _c(C,e){return C+Math.random()*(e-C)}function Ec(C){return C*(.5-Math.random())}function fp(C){C!==void 0&&(jh=C);let e=jh+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Em(C){return C*yc}function zu(C){return C*vc}function jd(C){return(C&C-1)===0&&C!==0}function da(C){return Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))}function Ca(C){return Math.pow(2,Math.floor(Math.log(C)/Math.LN2))}function No(C,e,o,f,y){const M=Math.cos,B=Math.sin,I=M(o/2),D=B(o/2),U=M((e+f)/2),X=B((e+f)/2),q=M((e-f)/2),Z=B((e-f)/2),te=M((f-e)/2),ie=B((f-e)/2);switch(y){case"XYX":C.set(I*X,D*q,D*Z,I*U);break;case"YZY":C.set(D*Z,I*X,D*q,I*U);break;case"ZXZ":C.set(D*q,D*Z,I*X,I*U);break;case"XZX":C.set(I*X,D*ie,D*te,I*U);break;case"YXY":C.set(D*te,I*X,D*ie,I*U);break;case"ZYZ":C.set(D*ie,D*te,I*X,I*U);break;default:w.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+y)}}function ha(C,e){switch(e.constructor){case Float32Array:return C;case Uint32Array:return C/4294967295;case Uint16Array:return C/65535;case Uint8Array:return C/255;case Int32Array:return Math.max(C/2147483647,-1);case Int16Array:return Math.max(C/32767,-1);case Int8Array:return Math.max(C/127,-1);default:throw new Error("Invalid component type.")}}function Xr(C,e){switch(e.constructor){case Float32Array:return C;case Uint32Array:return Math.round(C*4294967295);case Uint16Array:return Math.round(C*65535);case Uint8Array:return Math.round(C*255);case Int32Array:return Math.round(C*2147483647);case Int16Array:return Math.round(C*32767);case Int8Array:return Math.round(C*127);default:throw new Error("Invalid component type.")}}const bm={DEG2RAD:yc,RAD2DEG:vc,generateUUID:Ga,clamp:Go,euclideanModulo:dp,mapLinear:Hh,inverseLerp:Zp,lerp:ql,damp:Wh,pingpong:$p,smoothstep:_l,smootherstep:El,randInt:hp,randFloat:_c,randFloatSpread:Ec,seededRandom:fp,degToRad:Em,radToDeg:zu,isPowerOfTwo:jd,ceilPowerOfTwo:da,floorPowerOfTwo:Ca,setQuaternionFromProperEuler:No,normalize:Xr,denormalize:ha};class gn{constructor(e=0,o=0){gn.prototype.isVector2=!0,this.x=e,this.y=o}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,o){return this.x=e,this.y=o,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const o=this.x,f=this.y,y=e.elements;return this.x=y[0]*o+y[3]*f+y[6],this.y=y[1]*o+y[4]*f+y[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this}clampLength(e,o){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(o,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const o=Math.sqrt(this.lengthSq()*e.lengthSq());if(o===0)return Math.PI/2;const f=this.dot(e)/o;return Math.acos(Go(f,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const o=this.x-e.x,f=this.y-e.y;return o*o+f*f}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this}lerpVectors(e,o,f){return this.x=e.x+(o.x-e.x)*f,this.y=e.y+(o.y-e.y)*f,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this}rotateAround(e,o){const f=Math.cos(o),y=Math.sin(o),M=this.x-e.x,B=this.y-e.y;return this.x=M*f-B*y+e.x,this.y=M*y+B*f+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yi{constructor(e,o,f,y,M,B,I,D,U){yi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,o,f,y,M,B,I,D,U)}set(e,o,f,y,M,B,I,D,U){const X=this.elements;return X[0]=e,X[1]=y,X[2]=I,X[3]=o,X[4]=M,X[5]=D,X[6]=f,X[7]=B,X[8]=U,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const o=this.elements,f=e.elements;return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],this}extractBasis(e,o,f){return e.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const o=e.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){const f=e.elements,y=o.elements,M=this.elements,B=f[0],I=f[3],D=f[6],U=f[1],X=f[4],q=f[7],Z=f[2],te=f[5],ie=f[8],fe=y[0],$=y[3],re=y[6],be=y[1],he=y[4],Se=y[7],Ue=y[2],Xe=y[5],et=y[8];return M[0]=B*fe+I*be+D*Ue,M[3]=B*$+I*he+D*Xe,M[6]=B*re+I*Se+D*et,M[1]=U*fe+X*be+q*Ue,M[4]=U*$+X*he+q*Xe,M[7]=U*re+X*Se+q*et,M[2]=Z*fe+te*be+ie*Ue,M[5]=Z*$+te*he+ie*Xe,M[8]=Z*re+te*Se+ie*et,this}multiplyScalar(e){const o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=e,o[4]*=e,o[7]*=e,o[2]*=e,o[5]*=e,o[8]*=e,this}determinant(){const e=this.elements,o=e[0],f=e[1],y=e[2],M=e[3],B=e[4],I=e[5],D=e[6],U=e[7],X=e[8];return o*B*X-o*I*U-f*M*X+f*I*D+y*M*U-y*B*D}invert(){const e=this.elements,o=e[0],f=e[1],y=e[2],M=e[3],B=e[4],I=e[5],D=e[6],U=e[7],X=e[8],q=X*B-I*U,Z=I*D-X*M,te=U*M-B*D,ie=o*q+f*Z+y*te;if(ie===0)return this.set(0,0,0,0,0,0,0,0,0);const fe=1/ie;return e[0]=q*fe,e[1]=(y*U-X*f)*fe,e[2]=(I*f-y*B)*fe,e[3]=Z*fe,e[4]=(X*o-y*D)*fe,e[5]=(y*M-I*o)*fe,e[6]=te*fe,e[7]=(f*D-U*o)*fe,e[8]=(B*o-f*M)*fe,this}transpose(){let e;const o=this.elements;return e=o[1],o[1]=o[3],o[3]=e,e=o[2],o[2]=o[6],o[6]=e,e=o[5],o[5]=o[7],o[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const o=this.elements;return e[0]=o[0],e[1]=o[3],e[2]=o[6],e[3]=o[1],e[4]=o[4],e[5]=o[7],e[6]=o[2],e[7]=o[5],e[8]=o[8],this}setUvTransform(e,o,f,y,M,B,I){const D=Math.cos(M),U=Math.sin(M);return this.set(f*D,f*U,-f*(D*B+U*I)+B+e,-y*U,y*D,-y*(-U*B+D*I)+I+o,0,0,1),this}scale(e,o){return this.premultiply(Hd.makeScale(e,o)),this}rotate(e){return this.premultiply(Hd.makeRotation(-e)),this}translate(e,o){return this.premultiply(Hd.makeTranslation(e,o)),this}makeTranslation(e,o){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,o,0,0,1),this}makeRotation(e){const o=Math.cos(e),f=Math.sin(e);return this.set(o,-f,0,f,o,0,0,0,1),this}makeScale(e,o){return this.set(e,0,0,0,o,0,0,0,1),this}equals(e){const o=this.elements,f=e.elements;for(let y=0;y<9;y++)if(o[y]!==f[y])return!1;return!0}fromArray(e,o=0){for(let f=0;f<9;f++)this.elements[f]=e[f+o];return this}toArray(e=[],o=0){const f=this.elements;return e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],e[o+3]=f[3],e[o+4]=f[4],e[o+5]=f[5],e[o+6]=f[6],e[o+7]=f[7],e[o+8]=f[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Hd=new yi;function tg(C){for(let e=C.length-1;e>=0;--e)if(C[e]>=65535)return!0;return!1}const Vh={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Zl(C,e){return new Vh[C](e)}function eu(C){return document.createElementNS("http://www.w3.org/1999/xhtml",C)}const Wd={};function bc(C){C in Wd||(Wd[C]=!0,w.warn(C))}function jc(C){return C<.04045?C*.0773993808:Math.pow(C*.9478672986+.0521327014,2.4)}function Qh(C){return C<.0031308?C*12.92:1.055*Math.pow(C,.41666)-.055}const Gu=new yi().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Mm=new yi().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Vd(C){return C.convertSRGBToLinear().applyMatrix3(Mm)}function bl(C){return C.applyMatrix3(Gu).convertLinearToSRGB()}const gp={[Xl]:C=>C,[ai]:C=>C.convertSRGBToLinear(),[Yf]:Vd},$r={[Xl]:C=>C,[ai]:C=>C.convertLinearToSRGB(),[Yf]:bl},Uo={enabled:!0,get legacyMode(){return w.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(C){w.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!C},get workingColorSpace(){return Xl},set workingColorSpace(C){w.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(C,e,o){if(this.enabled===!1||e===o||!e||!o)return C;const f=gp[e],y=$r[o];if(f===void 0||y===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${o}".`);return y(f(C))},fromWorkingColorSpace:function(C,e){return this.convert(C,this.workingColorSpace,e)},toWorkingColorSpace:function(C,e){return this.convert(C,e,this.workingColorSpace)}};let Fl;class $l{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let o;if(e instanceof HTMLCanvasElement)o=e;else{Fl===void 0&&(Fl=eu("canvas")),Fl.width=e.width,Fl.height=e.height;const f=Fl.getContext("2d");e instanceof ImageData?f.putImageData(e,0,0):f.drawImage(e,0,0,e.width,e.height),o=Fl}return o.width>2048||o.height>2048?(w.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const o=eu("canvas");o.width=e.width,o.height=e.height;const f=o.getContext("2d");f.drawImage(e,0,0,e.width,e.height);const y=f.getImageData(0,0,e.width,e.height),M=y.data;for(let B=0;B<M.length;B++)M[B]=jc(M[B]/255)*255;return f.putImageData(y,0,0),o}else if(e.data){const o=e.data.slice(0);for(let f=0;f<o.length;f++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[f]=Math.floor(jc(o[f]/255)*255):o[f]=jc(o[f]);return{data:o,width:e.width,height:e.height}}else return w.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Qd=0;class Na{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Qd++}),this.uuid=Ga(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const o=e===void 0||typeof e=="string";if(!o&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const f={uuid:this.uuid,url:""},y=this.data;if(y!==null){let M;if(Array.isArray(y)){M=[];for(let B=0,I=y.length;B<I;B++)y[B].isDataTexture?M.push(Mo(y[B].image)):M.push(Mo(y[B]))}else M=Mo(y);f.url=M}return o||(e.images[this.uuid]=f),f}}function Mo(C){return typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&C instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&C instanceof ImageBitmap?$l.getDataURL(C):C.data?{data:Array.from(C.data),width:C.width,height:C.height,type:C.data.constructor.name}:(w.warn("THREE.Texture: Unable to serialize Texture."),{})}let Nu=0;class $i extends vl{constructor(e=$i.DEFAULT_IMAGE,o=$i.DEFAULT_MAPPING,f=Sr,y=Sr,M=Zi,B=Jo,I=Ze,D=bo,U=$i.DEFAULT_ANISOTROPY,X=mc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Nu++}),this.uuid=Ga(),this.name="",this.source=new Na(e),this.mipmaps=[],this.mapping=o,this.channel=0,this.wrapS=f,this.wrapT=y,this.magFilter=M,this.minFilter=B,this.anisotropy=U,this.format=I,this.internalFormat=null,this.type=D,this.offset=new gn(0,0),this.repeat=new gn(1,1),this.center=new gn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof X=="string"?this.colorSpace=X:(bc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=X===ml?ai:mc),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const o=e===void 0||typeof e=="string";if(!o&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const f={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),o||(e.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ca)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hs:e.x=e.x-Math.floor(e.x);break;case Sr:e.x=e.x<0?0:1;break;case ji:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case hs:e.y=e.y-Math.floor(e.y);break;case Sr:e.y=e.y<0?0:1;break;case ji:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return bc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ai?ml:Nd}set encoding(e){bc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ml?ai:mc}}$i.DEFAULT_IMAGE=null,$i.DEFAULT_MAPPING=ca,$i.DEFAULT_ANISOTROPY=1;class Mi{constructor(e=0,o=0,f=0,y=1){Mi.prototype.isVector4=!0,this.x=e,this.y=o,this.z=f,this.w=y}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,o,f,y){return this.x=e,this.y=o,this.z=f,this.w=y,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this.w=e.w+o.w,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this.w+=e.w*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this.w=e.w-o.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const o=this.x,f=this.y,y=this.z,M=this.w,B=e.elements;return this.x=B[0]*o+B[4]*f+B[8]*y+B[12]*M,this.y=B[1]*o+B[5]*f+B[9]*y+B[13]*M,this.z=B[2]*o+B[6]*f+B[10]*y+B[14]*M,this.w=B[3]*o+B[7]*f+B[11]*y+B[15]*M,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const o=Math.sqrt(1-e.w*e.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/o,this.y=e.y/o,this.z=e.z/o),this}setAxisAngleFromRotationMatrix(e){let o,f,y,M;const D=e.elements,U=D[0],X=D[4],q=D[8],Z=D[1],te=D[5],ie=D[9],fe=D[2],$=D[6],re=D[10];if(Math.abs(X-Z)<.01&&Math.abs(q-fe)<.01&&Math.abs(ie-$)<.01){if(Math.abs(X+Z)<.1&&Math.abs(q+fe)<.1&&Math.abs(ie+$)<.1&&Math.abs(U+te+re-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const he=(U+1)/2,Se=(te+1)/2,Ue=(re+1)/2,Xe=(X+Z)/4,et=(q+fe)/4,st=(ie+$)/4;return he>Se&&he>Ue?he<.01?(f=0,y=.707106781,M=.707106781):(f=Math.sqrt(he),y=Xe/f,M=et/f):Se>Ue?Se<.01?(f=.707106781,y=0,M=.707106781):(y=Math.sqrt(Se),f=Xe/y,M=st/y):Ue<.01?(f=.707106781,y=.707106781,M=0):(M=Math.sqrt(Ue),f=et/M,y=st/M),this.set(f,y,M,o),this}let be=Math.sqrt(($-ie)*($-ie)+(q-fe)*(q-fe)+(Z-X)*(Z-X));return Math.abs(be)<.001&&(be=1),this.x=($-ie)/be,this.y=(q-fe)/be,this.z=(Z-X)/be,this.w=Math.acos((U+te+re-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this.w=Math.max(e.w,Math.min(o.w,this.w)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this.w=Math.max(e,Math.min(o,this.w)),this}clampLength(e,o){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(o,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this.w+=(e.w-this.w)*o,this}lerpVectors(e,o,f){return this.x=e.x+(o.x-e.x)*f,this.y=e.y+(o.y-e.y)*f,this.z=e.z+(o.z-e.z)*f,this.w=e.w+(o.w-e.w)*f,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this.w=e[o+3],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e[o+3]=this.w,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this.w=e.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Sa extends vl{constructor(e=1,o=1,f={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=o,this.depth=1,this.scissor=new Mi(0,0,e,o),this.scissorTest=!1,this.viewport=new Mi(0,0,e,o);const y={width:e,height:o,depth:1};f.encoding!==void 0&&(bc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),f.colorSpace=f.encoding===ml?ai:mc),this.texture=new $i(y,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=f.generateMipmaps!==void 0?f.generateMipmaps:!1,this.texture.internalFormat=f.internalFormat!==void 0?f.internalFormat:null,this.texture.minFilter=f.minFilter!==void 0?f.minFilter:Zi,this.depthBuffer=f.depthBuffer!==void 0?f.depthBuffer:!0,this.stencilBuffer=f.stencilBuffer!==void 0?f.stencilBuffer:!1,this.depthTexture=f.depthTexture!==void 0?f.depthTexture:null,this.samples=f.samples!==void 0?f.samples:0}setSize(e,o,f=1){(this.width!==e||this.height!==o||this.depth!==f)&&(this.width=e,this.height=o,this.depth=f,this.texture.image.width=e,this.texture.image.height=o,this.texture.image.depth=f,this.dispose()),this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},e.texture.image);return this.texture.source=new Na(o),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ns extends $i{constructor(e=null,o=1,f=1,y=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:o,height:f,depth:y},this.magFilter=Pi,this.minFilter=Pi,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tu extends Sa{constructor(e=1,o=1,f=1){super(e,o),this.isWebGLArrayRenderTarget=!0,this.depth=f,this.texture=new Ns(null,e,o,f),this.texture.isRenderTargetTexture=!0}}class jo extends $i{constructor(e=null,o=1,f=1,y=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:o,height:f,depth:y},this.magFilter=Pi,this.minFilter=Pi,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fa extends Sa{constructor(e=1,o=1,f=1){super(e,o),this.isWebGL3DRenderTarget=!0,this.depth=f,this.texture=new jo(null,e,o,f),this.texture.isRenderTargetTexture=!0}}class Us extends Sa{constructor(e=1,o=1,f=1,y={}){super(e,o,y),this.isWebGLMultipleRenderTargets=!0;const M=this.texture;this.texture=[];for(let B=0;B<f;B++)this.texture[B]=M.clone(),this.texture[B].isRenderTargetTexture=!0}setSize(e,o,f=1){if(this.width!==e||this.height!==o||this.depth!==f){this.width=e,this.height=o,this.depth=f;for(let y=0,M=this.texture.length;y<M;y++)this.texture[y].image.width=e,this.texture[y].image.height=o,this.texture[y].image.depth=f;this.dispose()}return this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let o=0,f=e.texture.length;o<f;o++)this.texture[o]=e.texture[o].clone(),this.texture[o].isRenderTargetTexture=!0;return this}}class xo{constructor(e=0,o=0,f=0,y=1){this.isQuaternion=!0,this._x=e,this._y=o,this._z=f,this._w=y}static slerpFlat(e,o,f,y,M,B,I){let D=f[y+0],U=f[y+1],X=f[y+2],q=f[y+3];const Z=M[B+0],te=M[B+1],ie=M[B+2],fe=M[B+3];if(I===0){e[o+0]=D,e[o+1]=U,e[o+2]=X,e[o+3]=q;return}if(I===1){e[o+0]=Z,e[o+1]=te,e[o+2]=ie,e[o+3]=fe;return}if(q!==fe||D!==Z||U!==te||X!==ie){let $=1-I;const re=D*Z+U*te+X*ie+q*fe,be=re>=0?1:-1,he=1-re*re;if(he>Number.EPSILON){const Ue=Math.sqrt(he),Xe=Math.atan2(Ue,re*be);$=Math.sin($*Xe)/Ue,I=Math.sin(I*Xe)/Ue}const Se=I*be;if(D=D*$+Z*Se,U=U*$+te*Se,X=X*$+ie*Se,q=q*$+fe*Se,$===1-I){const Ue=1/Math.sqrt(D*D+U*U+X*X+q*q);D*=Ue,U*=Ue,X*=Ue,q*=Ue}}e[o]=D,e[o+1]=U,e[o+2]=X,e[o+3]=q}static multiplyQuaternionsFlat(e,o,f,y,M,B){const I=f[y],D=f[y+1],U=f[y+2],X=f[y+3],q=M[B],Z=M[B+1],te=M[B+2],ie=M[B+3];return e[o]=I*ie+X*q+D*te-U*Z,e[o+1]=D*ie+X*Z+U*q-I*te,e[o+2]=U*ie+X*te+I*Z-D*q,e[o+3]=X*ie-I*q-D*Z-U*te,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,o,f,y){return this._x=e,this._y=o,this._z=f,this._w=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,o){const f=e._x,y=e._y,M=e._z,B=e._order,I=Math.cos,D=Math.sin,U=I(f/2),X=I(y/2),q=I(M/2),Z=D(f/2),te=D(y/2),ie=D(M/2);switch(B){case"XYZ":this._x=Z*X*q+U*te*ie,this._y=U*te*q-Z*X*ie,this._z=U*X*ie+Z*te*q,this._w=U*X*q-Z*te*ie;break;case"YXZ":this._x=Z*X*q+U*te*ie,this._y=U*te*q-Z*X*ie,this._z=U*X*ie-Z*te*q,this._w=U*X*q+Z*te*ie;break;case"ZXY":this._x=Z*X*q-U*te*ie,this._y=U*te*q+Z*X*ie,this._z=U*X*ie+Z*te*q,this._w=U*X*q-Z*te*ie;break;case"ZYX":this._x=Z*X*q-U*te*ie,this._y=U*te*q+Z*X*ie,this._z=U*X*ie-Z*te*q,this._w=U*X*q+Z*te*ie;break;case"YZX":this._x=Z*X*q+U*te*ie,this._y=U*te*q+Z*X*ie,this._z=U*X*ie-Z*te*q,this._w=U*X*q-Z*te*ie;break;case"XZY":this._x=Z*X*q-U*te*ie,this._y=U*te*q-Z*X*ie,this._z=U*X*ie+Z*te*q,this._w=U*X*q+Z*te*ie;break;default:w.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+B)}return o!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,o){const f=o/2,y=Math.sin(f);return this._x=e.x*y,this._y=e.y*y,this._z=e.z*y,this._w=Math.cos(f),this._onChangeCallback(),this}setFromRotationMatrix(e){const o=e.elements,f=o[0],y=o[4],M=o[8],B=o[1],I=o[5],D=o[9],U=o[2],X=o[6],q=o[10],Z=f+I+q;if(Z>0){const te=.5/Math.sqrt(Z+1);this._w=.25/te,this._x=(X-D)*te,this._y=(M-U)*te,this._z=(B-y)*te}else if(f>I&&f>q){const te=2*Math.sqrt(1+f-I-q);this._w=(X-D)/te,this._x=.25*te,this._y=(y+B)/te,this._z=(M+U)/te}else if(I>q){const te=2*Math.sqrt(1+I-f-q);this._w=(M-U)/te,this._x=(y+B)/te,this._y=.25*te,this._z=(D+X)/te}else{const te=2*Math.sqrt(1+q-f-I);this._w=(B-y)/te,this._x=(M+U)/te,this._y=(D+X)/te,this._z=.25*te}return this._onChangeCallback(),this}setFromUnitVectors(e,o){let f=e.dot(o)+1;return f<Number.EPSILON?(f=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=f):(this._x=0,this._y=-e.z,this._z=e.y,this._w=f)):(this._x=e.y*o.z-e.z*o.y,this._y=e.z*o.x-e.x*o.z,this._z=e.x*o.y-e.y*o.x,this._w=f),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Go(this.dot(e),-1,1)))}rotateTowards(e,o){const f=this.angleTo(e);if(f===0)return this;const y=Math.min(1,o/f);return this.slerp(e,y),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,o){const f=e._x,y=e._y,M=e._z,B=e._w,I=o._x,D=o._y,U=o._z,X=o._w;return this._x=f*X+B*I+y*U-M*D,this._y=y*X+B*D+M*I-f*U,this._z=M*X+B*U+f*D-y*I,this._w=B*X-f*I-y*D-M*U,this._onChangeCallback(),this}slerp(e,o){if(o===0)return this;if(o===1)return this.copy(e);const f=this._x,y=this._y,M=this._z,B=this._w;let I=B*e._w+f*e._x+y*e._y+M*e._z;if(I<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,I=-I):this.copy(e),I>=1)return this._w=B,this._x=f,this._y=y,this._z=M,this;const D=1-I*I;if(D<=Number.EPSILON){const te=1-o;return this._w=te*B+o*this._w,this._x=te*f+o*this._x,this._y=te*y+o*this._y,this._z=te*M+o*this._z,this.normalize(),this._onChangeCallback(),this}const U=Math.sqrt(D),X=Math.atan2(U,I),q=Math.sin((1-o)*X)/U,Z=Math.sin(o*X)/U;return this._w=B*q+this._w*Z,this._x=f*q+this._x*Z,this._y=y*q+this._y*Z,this._z=M*q+this._z*Z,this._onChangeCallback(),this}slerpQuaternions(e,o,f){return this.copy(e).slerp(o,f)}random(){const e=Math.random(),o=Math.sqrt(1-e),f=Math.sqrt(e),y=2*Math.PI*Math.random(),M=2*Math.PI*Math.random();return this.set(o*Math.cos(y),f*Math.sin(M),f*Math.cos(M),o*Math.sin(y))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,o=0){return this._x=e[o],this._y=e[o+1],this._z=e[o+2],this._w=e[o+3],this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._w,e}fromBufferAttribute(e,o){return this._x=e.getX(o),this._y=e.getY(o),this._z=e.getZ(o),this._w=e.getW(o),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Qe{constructor(e=0,o=0,f=0){Qe.prototype.isVector3=!0,this.x=e,this.y=o,this.z=f}set(e,o,f){return f===void 0&&(f=this.z),this.x=e,this.y=o,this.z=f,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,o){return this.x=e.x*o.x,this.y=e.y*o.y,this.z=e.z*o.z,this}applyEuler(e){return this.applyQuaternion(ng.setFromEuler(e))}applyAxisAngle(e,o){return this.applyQuaternion(ng.setFromAxisAngle(e,o))}applyMatrix3(e){const o=this.x,f=this.y,y=this.z,M=e.elements;return this.x=M[0]*o+M[3]*f+M[6]*y,this.y=M[1]*o+M[4]*f+M[7]*y,this.z=M[2]*o+M[5]*f+M[8]*y,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const o=this.x,f=this.y,y=this.z,M=e.elements,B=1/(M[3]*o+M[7]*f+M[11]*y+M[15]);return this.x=(M[0]*o+M[4]*f+M[8]*y+M[12])*B,this.y=(M[1]*o+M[5]*f+M[9]*y+M[13])*B,this.z=(M[2]*o+M[6]*f+M[10]*y+M[14])*B,this}applyQuaternion(e){const o=this.x,f=this.y,y=this.z,M=e.x,B=e.y,I=e.z,D=e.w,U=D*o+B*y-I*f,X=D*f+I*o-M*y,q=D*y+M*f-B*o,Z=-M*o-B*f-I*y;return this.x=U*D+Z*-M+X*-I-q*-B,this.y=X*D+Z*-B+q*-M-U*-I,this.z=q*D+Z*-I+U*-B-X*-M,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const o=this.x,f=this.y,y=this.z,M=e.elements;return this.x=M[0]*o+M[4]*f+M[8]*y,this.y=M[1]*o+M[5]*f+M[9]*y,this.z=M[2]*o+M[6]*f+M[10]*y,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this}clampLength(e,o){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(o,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this}lerpVectors(e,o,f){return this.x=e.x+(o.x-e.x)*f,this.y=e.y+(o.y-e.y)*f,this.z=e.z+(o.z-e.z)*f,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,o){const f=e.x,y=e.y,M=e.z,B=o.x,I=o.y,D=o.z;return this.x=y*D-M*I,this.y=M*B-f*D,this.z=f*I-y*B,this}projectOnVector(e){const o=e.lengthSq();if(o===0)return this.set(0,0,0);const f=e.dot(this)/o;return this.copy(e).multiplyScalar(f)}projectOnPlane(e){return Uu.copy(this).projectOnVector(e),this.sub(Uu)}reflect(e){return this.sub(Uu.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const o=Math.sqrt(this.lengthSq()*e.lengthSq());if(o===0)return Math.PI/2;const f=this.dot(e)/o;return Math.acos(Go(f,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const o=this.x-e.x,f=this.y-e.y,y=this.z-e.z;return o*o+f*f+y*y}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,o,f){const y=Math.sin(o)*e;return this.x=y*Math.sin(f),this.y=Math.cos(o)*e,this.z=y*Math.cos(f),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,o,f){return this.x=e*Math.sin(o),this.y=f,this.z=e*Math.cos(o),this}setFromMatrixPosition(e){const o=e.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(e){const o=this.setFromMatrixColumn(e,0).length(),f=this.setFromMatrixColumn(e,1).length(),y=this.setFromMatrixColumn(e,2).length();return this.x=o,this.y=f,this.z=y,this}setFromMatrixColumn(e,o){return this.fromArray(e.elements,o*4)}setFromMatrix3Column(e,o){return this.fromArray(e.elements,o*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,o=Math.random()*Math.PI*2,f=Math.sqrt(1-t1(e,2));return this.x=f*Math.cos(o),this.y=f*Math.sin(o),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Uu=new Qe,ng=new xo;class Ao{constructor(e=new Qe(1/0,1/0,1/0),o=new Qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromArray(e){this.makeEmpty();for(let o=0,f=e.length;o<f;o+=3)this.expandByPoint(Pn.fromArray(e,o));return this}setFromBufferAttribute(e){this.makeEmpty();for(let o=0,f=e.count;o<f;o++)this.expandByPoint(Pn.fromBufferAttribute(e,o));return this}setFromPoints(e){this.makeEmpty();for(let o=0,f=e.length;o<f;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){const f=Pn.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(f),this.max.copy(e).add(f),this}setFromObject(e,o=!1){return this.makeEmpty(),this.expandByObject(e,o)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,o=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),wa.copy(e.boundingBox),wa.applyMatrix4(e.matrixWorld),this.union(wa);else{const y=e.geometry;if(y!==void 0)if(o&&y.attributes!==void 0&&y.attributes.position!==void 0){const M=y.attributes.position;for(let B=0,I=M.count;B<I;B++)Pn.fromBufferAttribute(M,B).applyMatrix4(e.matrixWorld),this.expandByPoint(Pn)}else y.boundingBox===null&&y.computeBoundingBox(),wa.copy(y.boundingBox),wa.applyMatrix4(e.matrixWorld),this.union(wa)}const f=e.children;for(let y=0,M=f.length;y<M;y++)this.expandByObject(f[y],o);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Pn),Pn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let o,f;return e.normal.x>0?(o=e.normal.x*this.min.x,f=e.normal.x*this.max.x):(o=e.normal.x*this.max.x,f=e.normal.x*this.min.x),e.normal.y>0?(o+=e.normal.y*this.min.y,f+=e.normal.y*this.max.y):(o+=e.normal.y*this.max.y,f+=e.normal.y*this.min.y),e.normal.z>0?(o+=e.normal.z*this.min.z,f+=e.normal.z*this.max.z):(o+=e.normal.z*this.max.z,f+=e.normal.z*this.min.z),o<=-e.constant&&f>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(mp),ju.subVectors(this.max,mp),di.subVectors(e.a,mp),$o.subVectors(e.b,mp),es.subVectors(e.c,mp),Ua.subVectors($o,di),ja.subVectors(es,$o),Mc.subVectors(di,es);let o=[0,-Ua.z,Ua.y,0,-ja.z,ja.y,0,-Mc.z,Mc.y,Ua.z,0,-Ua.x,ja.z,0,-ja.x,Mc.z,0,-Mc.x,-Ua.y,Ua.x,0,-ja.y,ja.x,0,-Mc.y,Mc.x,0];return!Hu(o,di,$o,es,ju)||(o=[1,0,0,0,1,0,0,0,1],!Hu(o,di,$o,es,ju))?!1:(Ol.crossVectors(Ua,ja),o=[Ol.x,Ol.y,Ol.z],Hu(o,di,$o,es,ju))}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Pn).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ec[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ec[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ec[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ec[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ec[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ec[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ec[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ec[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ec),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ec=[new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe],Pn=new Qe,wa=new Ao,di=new Qe,$o=new Qe,es=new Qe,Ua=new Qe,ja=new Qe,Mc=new Qe,mp=new Qe,ju=new Qe,Ol=new Qe,Hc=new Qe;function Hu(C,e,o,f,y){for(let M=0,B=C.length-3;M<=B;M+=3){Hc.fromArray(C,M);const I=y.x*Math.abs(Hc.x)+y.y*Math.abs(Hc.y)+y.z*Math.abs(Hc.z),D=e.dot(Hc),U=o.dot(Hc),X=f.dot(Hc);if(Math.max(-Math.max(D,U,X),Math.min(D,U,X))>I)return!1}return!0}const Kh=new Ao,$s=new Qe,Ap=new Qe;class Fo{constructor(e=new Qe,o=-1){this.center=e,this.radius=o}set(e,o){return this.center.copy(e),this.radius=o,this}setFromPoints(e,o){const f=this.center;o!==void 0?f.copy(o):Kh.setFromPoints(e).getCenter(f);let y=0;for(let M=0,B=e.length;M<B;M++)y=Math.max(y,f.distanceToSquared(e[M]));return this.radius=Math.sqrt(y),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const o=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=o*o}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,o){const f=this.center.distanceToSquared(e);return o.copy(e),f>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$s.subVectors(e,this.center);const o=$s.lengthSq();if(o>this.radius*this.radius){const f=Math.sqrt(o),y=(f-this.radius)*.5;this.center.addScaledVector($s,y/f),this.radius+=y}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ap.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($s.copy(e.center).add(Ap)),this.expandByPoint($s.copy(e.center).sub(Ap))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const nl=new Qe,yp=new Qe,Dl=new Qe,Wc=new Qe,Kd=new Qe,Wu=new Qe,Vu=new Qe;class vp{constructor(e=new Qe,o=new Qe(0,0,-1)){this.origin=e,this.direction=o}set(e,o){return this.origin.copy(e),this.direction.copy(o),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,o){return o.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,nl)),this}closestPointToPoint(e,o){o.subVectors(e,this.origin);const f=o.dot(this.direction);return f<0?o.copy(this.origin):o.copy(this.origin).addScaledVector(this.direction,f)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const o=nl.subVectors(e,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(e):(nl.copy(this.origin).addScaledVector(this.direction,o),nl.distanceToSquared(e))}distanceSqToSegment(e,o,f,y){yp.copy(e).add(o).multiplyScalar(.5),Dl.copy(o).sub(e).normalize(),Wc.copy(this.origin).sub(yp);const M=e.distanceTo(o)*.5,B=-this.direction.dot(Dl),I=Wc.dot(this.direction),D=-Wc.dot(Dl),U=Wc.lengthSq(),X=Math.abs(1-B*B);let q,Z,te,ie;if(X>0)if(q=B*D-I,Z=B*I-D,ie=M*X,q>=0)if(Z>=-ie)if(Z<=ie){const fe=1/X;q*=fe,Z*=fe,te=q*(q+B*Z+2*I)+Z*(B*q+Z+2*D)+U}else Z=M,q=Math.max(0,-(B*Z+I)),te=-q*q+Z*(Z+2*D)+U;else Z=-M,q=Math.max(0,-(B*Z+I)),te=-q*q+Z*(Z+2*D)+U;else Z<=-ie?(q=Math.max(0,-(-B*M+I)),Z=q>0?-M:Math.min(Math.max(-M,-D),M),te=-q*q+Z*(Z+2*D)+U):Z<=ie?(q=0,Z=Math.min(Math.max(-M,-D),M),te=Z*(Z+2*D)+U):(q=Math.max(0,-(B*M+I)),Z=q>0?M:Math.min(Math.max(-M,-D),M),te=-q*q+Z*(Z+2*D)+U);else Z=B>0?-M:M,q=Math.max(0,-(B*Z+I)),te=-q*q+Z*(Z+2*D)+U;return f&&f.copy(this.origin).addScaledVector(this.direction,q),y&&y.copy(yp).addScaledVector(Dl,Z),te}intersectSphere(e,o){nl.subVectors(e.center,this.origin);const f=nl.dot(this.direction),y=nl.dot(nl)-f*f,M=e.radius*e.radius;if(y>M)return null;const B=Math.sqrt(M-y),I=f-B,D=f+B;return D<0?null:I<0?this.at(D,o):this.at(I,o)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const o=e.normal.dot(this.direction);if(o===0)return e.distanceToPoint(this.origin)===0?0:null;const f=-(this.origin.dot(e.normal)+e.constant)/o;return f>=0?f:null}intersectPlane(e,o){const f=this.distanceToPlane(e);return f===null?null:this.at(f,o)}intersectsPlane(e){const o=e.distanceToPoint(this.origin);return o===0||e.normal.dot(this.direction)*o<0}intersectBox(e,o){let f,y,M,B,I,D;const U=1/this.direction.x,X=1/this.direction.y,q=1/this.direction.z,Z=this.origin;return U>=0?(f=(e.min.x-Z.x)*U,y=(e.max.x-Z.x)*U):(f=(e.max.x-Z.x)*U,y=(e.min.x-Z.x)*U),X>=0?(M=(e.min.y-Z.y)*X,B=(e.max.y-Z.y)*X):(M=(e.max.y-Z.y)*X,B=(e.min.y-Z.y)*X),f>B||M>y||((M>f||isNaN(f))&&(f=M),(B<y||isNaN(y))&&(y=B),q>=0?(I=(e.min.z-Z.z)*q,D=(e.max.z-Z.z)*q):(I=(e.max.z-Z.z)*q,D=(e.min.z-Z.z)*q),f>D||I>y)||((I>f||f!==f)&&(f=I),(D<y||y!==y)&&(y=D),y<0)?null:this.at(f>=0?f:y,o)}intersectsBox(e){return this.intersectBox(e,nl)!==null}intersectTriangle(e,o,f,y,M){Kd.subVectors(o,e),Wu.subVectors(f,e),Vu.crossVectors(Kd,Wu);let B=this.direction.dot(Vu),I;if(B>0){if(y)return null;I=1}else if(B<0)I=-1,B=-B;else return null;Wc.subVectors(this.origin,e);const D=I*this.direction.dot(Wu.crossVectors(Wc,Wu));if(D<0)return null;const U=I*this.direction.dot(Kd.cross(Wc));if(U<0||D+U>B)return null;const X=-I*Wc.dot(Vu);return X<0?null:this.at(X/B,M)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class li{constructor(e,o,f,y,M,B,I,D,U,X,q,Z,te,ie,fe,$){li.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,o,f,y,M,B,I,D,U,X,q,Z,te,ie,fe,$)}set(e,o,f,y,M,B,I,D,U,X,q,Z,te,ie,fe,$){const re=this.elements;return re[0]=e,re[4]=o,re[8]=f,re[12]=y,re[1]=M,re[5]=B,re[9]=I,re[13]=D,re[2]=U,re[6]=X,re[10]=q,re[14]=Z,re[3]=te,re[7]=ie,re[11]=fe,re[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new li().fromArray(this.elements)}copy(e){const o=this.elements,f=e.elements;return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],o[9]=f[9],o[10]=f[10],o[11]=f[11],o[12]=f[12],o[13]=f[13],o[14]=f[14],o[15]=f[15],this}copyPosition(e){const o=this.elements,f=e.elements;return o[12]=f[12],o[13]=f[13],o[14]=f[14],this}setFromMatrix3(e){const o=e.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(e,o,f){return e.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this}makeBasis(e,o,f){return this.set(e.x,o.x,f.x,0,e.y,o.y,f.y,0,e.z,o.z,f.z,0,0,0,0,1),this}extractRotation(e){const o=this.elements,f=e.elements,y=1/nu.setFromMatrixColumn(e,0).length(),M=1/nu.setFromMatrixColumn(e,1).length(),B=1/nu.setFromMatrixColumn(e,2).length();return o[0]=f[0]*y,o[1]=f[1]*y,o[2]=f[2]*y,o[3]=0,o[4]=f[4]*M,o[5]=f[5]*M,o[6]=f[6]*M,o[7]=0,o[8]=f[8]*B,o[9]=f[9]*B,o[10]=f[10]*B,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(e){const o=this.elements,f=e.x,y=e.y,M=e.z,B=Math.cos(f),I=Math.sin(f),D=Math.cos(y),U=Math.sin(y),X=Math.cos(M),q=Math.sin(M);if(e.order==="XYZ"){const Z=B*X,te=B*q,ie=I*X,fe=I*q;o[0]=D*X,o[4]=-D*q,o[8]=U,o[1]=te+ie*U,o[5]=Z-fe*U,o[9]=-I*D,o[2]=fe-Z*U,o[6]=ie+te*U,o[10]=B*D}else if(e.order==="YXZ"){const Z=D*X,te=D*q,ie=U*X,fe=U*q;o[0]=Z+fe*I,o[4]=ie*I-te,o[8]=B*U,o[1]=B*q,o[5]=B*X,o[9]=-I,o[2]=te*I-ie,o[6]=fe+Z*I,o[10]=B*D}else if(e.order==="ZXY"){const Z=D*X,te=D*q,ie=U*X,fe=U*q;o[0]=Z-fe*I,o[4]=-B*q,o[8]=ie+te*I,o[1]=te+ie*I,o[5]=B*X,o[9]=fe-Z*I,o[2]=-B*U,o[6]=I,o[10]=B*D}else if(e.order==="ZYX"){const Z=B*X,te=B*q,ie=I*X,fe=I*q;o[0]=D*X,o[4]=ie*U-te,o[8]=Z*U+fe,o[1]=D*q,o[5]=fe*U+Z,o[9]=te*U-ie,o[2]=-U,o[6]=I*D,o[10]=B*D}else if(e.order==="YZX"){const Z=B*D,te=B*U,ie=I*D,fe=I*U;o[0]=D*X,o[4]=fe-Z*q,o[8]=ie*q+te,o[1]=q,o[5]=B*X,o[9]=-I*X,o[2]=-U*X,o[6]=te*q+ie,o[10]=Z-fe*q}else if(e.order==="XZY"){const Z=B*D,te=B*U,ie=I*D,fe=I*U;o[0]=D*X,o[4]=-q,o[8]=U*X,o[1]=Z*q+fe,o[5]=B*X,o[9]=te*q-ie,o[2]=ie*q-te,o[6]=I*X,o[10]=fe*q+Z}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Xd,e,Xh)}lookAt(e,o,f){const y=this.elements;return rl.subVectors(e,o),rl.lengthSq()===0&&(rl.z=1),rl.normalize(),_p.crossVectors(f,rl),_p.lengthSq()===0&&(Math.abs(f.z)===1?rl.x+=1e-4:rl.z+=1e-4,rl.normalize(),_p.crossVectors(f,rl)),_p.normalize(),Yd.crossVectors(rl,_p),y[0]=_p.x,y[4]=Yd.x,y[8]=rl.x,y[1]=_p.y,y[5]=Yd.y,y[9]=rl.y,y[2]=_p.z,y[6]=Yd.z,y[10]=rl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){const f=e.elements,y=o.elements,M=this.elements,B=f[0],I=f[4],D=f[8],U=f[12],X=f[1],q=f[5],Z=f[9],te=f[13],ie=f[2],fe=f[6],$=f[10],re=f[14],be=f[3],he=f[7],Se=f[11],Ue=f[15],Xe=y[0],et=y[4],st=y[8],we=y[12],We=y[1],Yt=y[5],Mn=y[9],Gt=y[13],Ut=y[2],Xt=y[6],xn=y[10],un=y[14],fn=y[3],jt=y[7],Tn=y[11],Lt=y[15];return M[0]=B*Xe+I*We+D*Ut+U*fn,M[4]=B*et+I*Yt+D*Xt+U*jt,M[8]=B*st+I*Mn+D*xn+U*Tn,M[12]=B*we+I*Gt+D*un+U*Lt,M[1]=X*Xe+q*We+Z*Ut+te*fn,M[5]=X*et+q*Yt+Z*Xt+te*jt,M[9]=X*st+q*Mn+Z*xn+te*Tn,M[13]=X*we+q*Gt+Z*un+te*Lt,M[2]=ie*Xe+fe*We+$*Ut+re*fn,M[6]=ie*et+fe*Yt+$*Xt+re*jt,M[10]=ie*st+fe*Mn+$*xn+re*Tn,M[14]=ie*we+fe*Gt+$*un+re*Lt,M[3]=be*Xe+he*We+Se*Ut+Ue*fn,M[7]=be*et+he*Yt+Se*Xt+Ue*jt,M[11]=be*st+he*Mn+Se*xn+Ue*Tn,M[15]=be*we+he*Gt+Se*un+Ue*Lt,this}multiplyScalar(e){const o=this.elements;return o[0]*=e,o[4]*=e,o[8]*=e,o[12]*=e,o[1]*=e,o[5]*=e,o[9]*=e,o[13]*=e,o[2]*=e,o[6]*=e,o[10]*=e,o[14]*=e,o[3]*=e,o[7]*=e,o[11]*=e,o[15]*=e,this}determinant(){const e=this.elements,o=e[0],f=e[4],y=e[8],M=e[12],B=e[1],I=e[5],D=e[9],U=e[13],X=e[2],q=e[6],Z=e[10],te=e[14],ie=e[3],fe=e[7],$=e[11],re=e[15];return ie*(+M*D*q-y*U*q-M*I*Z+f*U*Z+y*I*te-f*D*te)+fe*(+o*D*te-o*U*Z+M*B*Z-y*B*te+y*U*X-M*D*X)+$*(+o*U*q-o*I*te-M*B*q+f*B*te+M*I*X-f*U*X)+re*(-y*I*X-o*D*q+o*I*Z+y*B*q-f*B*Z+f*D*X)}transpose(){const e=this.elements;let o;return o=e[1],e[1]=e[4],e[4]=o,o=e[2],e[2]=e[8],e[8]=o,o=e[6],e[6]=e[9],e[9]=o,o=e[3],e[3]=e[12],e[12]=o,o=e[7],e[7]=e[13],e[13]=o,o=e[11],e[11]=e[14],e[14]=o,this}setPosition(e,o,f){const y=this.elements;return e.isVector3?(y[12]=e.x,y[13]=e.y,y[14]=e.z):(y[12]=e,y[13]=o,y[14]=f),this}invert(){const e=this.elements,o=e[0],f=e[1],y=e[2],M=e[3],B=e[4],I=e[5],D=e[6],U=e[7],X=e[8],q=e[9],Z=e[10],te=e[11],ie=e[12],fe=e[13],$=e[14],re=e[15],be=q*$*U-fe*Z*U+fe*D*te-I*$*te-q*D*re+I*Z*re,he=ie*Z*U-X*$*U-ie*D*te+B*$*te+X*D*re-B*Z*re,Se=X*fe*U-ie*q*U+ie*I*te-B*fe*te-X*I*re+B*q*re,Ue=ie*q*D-X*fe*D-ie*I*Z+B*fe*Z+X*I*$-B*q*$,Xe=o*be+f*he+y*Se+M*Ue;if(Xe===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const et=1/Xe;return e[0]=be*et,e[1]=(fe*Z*M-q*$*M-fe*y*te+f*$*te+q*y*re-f*Z*re)*et,e[2]=(I*$*M-fe*D*M+fe*y*U-f*$*U-I*y*re+f*D*re)*et,e[3]=(q*D*M-I*Z*M-q*y*U+f*Z*U+I*y*te-f*D*te)*et,e[4]=he*et,e[5]=(X*$*M-ie*Z*M+ie*y*te-o*$*te-X*y*re+o*Z*re)*et,e[6]=(ie*D*M-B*$*M-ie*y*U+o*$*U+B*y*re-o*D*re)*et,e[7]=(B*Z*M-X*D*M+X*y*U-o*Z*U-B*y*te+o*D*te)*et,e[8]=Se*et,e[9]=(ie*q*M-X*fe*M-ie*f*te+o*fe*te+X*f*re-o*q*re)*et,e[10]=(B*fe*M-ie*I*M+ie*f*U-o*fe*U-B*f*re+o*I*re)*et,e[11]=(X*I*M-B*q*M-X*f*U+o*q*U+B*f*te-o*I*te)*et,e[12]=Ue*et,e[13]=(X*fe*y-ie*q*y+ie*f*Z-o*fe*Z-X*f*$+o*q*$)*et,e[14]=(ie*I*y-B*fe*y-ie*f*D+o*fe*D+B*f*$-o*I*$)*et,e[15]=(B*q*y-X*I*y+X*f*D-o*q*D-B*f*Z+o*I*Z)*et,this}scale(e){const o=this.elements,f=e.x,y=e.y,M=e.z;return o[0]*=f,o[4]*=y,o[8]*=M,o[1]*=f,o[5]*=y,o[9]*=M,o[2]*=f,o[6]*=y,o[10]*=M,o[3]*=f,o[7]*=y,o[11]*=M,this}getMaxScaleOnAxis(){const e=this.elements,o=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],f=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],y=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(o,f,y))}makeTranslation(e,o,f){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,o,0,0,1,f,0,0,0,1),this}makeRotationX(e){const o=Math.cos(e),f=Math.sin(e);return this.set(1,0,0,0,0,o,-f,0,0,f,o,0,0,0,0,1),this}makeRotationY(e){const o=Math.cos(e),f=Math.sin(e);return this.set(o,0,f,0,0,1,0,0,-f,0,o,0,0,0,0,1),this}makeRotationZ(e){const o=Math.cos(e),f=Math.sin(e);return this.set(o,-f,0,0,f,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,o){const f=Math.cos(o),y=Math.sin(o),M=1-f,B=e.x,I=e.y,D=e.z,U=M*B,X=M*I;return this.set(U*B+f,U*I-y*D,U*D+y*I,0,U*I+y*D,X*I+f,X*D-y*B,0,U*D-y*I,X*D+y*B,M*D*D+f,0,0,0,0,1),this}makeScale(e,o,f){return this.set(e,0,0,0,0,o,0,0,0,0,f,0,0,0,0,1),this}makeShear(e,o,f,y,M,B){return this.set(1,f,M,0,e,1,B,0,o,y,1,0,0,0,0,1),this}compose(e,o,f){const y=this.elements,M=o._x,B=o._y,I=o._z,D=o._w,U=M+M,X=B+B,q=I+I,Z=M*U,te=M*X,ie=M*q,fe=B*X,$=B*q,re=I*q,be=D*U,he=D*X,Se=D*q,Ue=f.x,Xe=f.y,et=f.z;return y[0]=(1-(fe+re))*Ue,y[1]=(te+Se)*Ue,y[2]=(ie-he)*Ue,y[3]=0,y[4]=(te-Se)*Xe,y[5]=(1-(Z+re))*Xe,y[6]=($+be)*Xe,y[7]=0,y[8]=(ie+he)*et,y[9]=($-be)*et,y[10]=(1-(Z+fe))*et,y[11]=0,y[12]=e.x,y[13]=e.y,y[14]=e.z,y[15]=1,this}decompose(e,o,f){const y=this.elements;let M=nu.set(y[0],y[1],y[2]).length();const B=nu.set(y[4],y[5],y[6]).length(),I=nu.set(y[8],y[9],y[10]).length();this.determinant()<0&&(M=-M),e.x=y[12],e.y=y[13],e.z=y[14],ys.copy(this);const U=1/M,X=1/B,q=1/I;return ys.elements[0]*=U,ys.elements[1]*=U,ys.elements[2]*=U,ys.elements[4]*=X,ys.elements[5]*=X,ys.elements[6]*=X,ys.elements[8]*=q,ys.elements[9]*=q,ys.elements[10]*=q,o.setFromRotationMatrix(ys),f.x=M,f.y=B,f.z=I,this}makePerspective(e,o,f,y,M,B,I=Zo){const D=this.elements,U=2*M/(o-e),X=2*M/(f-y),q=(o+e)/(o-e),Z=(f+y)/(f-y);let te,ie;if(I===Zo)te=-(B+M)/(B-M),ie=-2*B*M/(B-M);else if(I===tl)te=-B/(B-M),ie=-B*M/(B-M);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+I);return D[0]=U,D[4]=0,D[8]=q,D[12]=0,D[1]=0,D[5]=X,D[9]=Z,D[13]=0,D[2]=0,D[6]=0,D[10]=te,D[14]=ie,D[3]=0,D[7]=0,D[11]=-1,D[15]=0,this}makeOrthographic(e,o,f,y,M,B,I=Zo){const D=this.elements,U=1/(o-e),X=1/(f-y),q=1/(B-M),Z=(o+e)*U,te=(f+y)*X;let ie,fe;if(I===Zo)ie=(B+M)*q,fe=-2*q;else if(I===tl)ie=M*q,fe=-1*q;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+I);return D[0]=2*U,D[4]=0,D[8]=0,D[12]=-Z,D[1]=0,D[5]=2*X,D[9]=0,D[13]=-te,D[2]=0,D[6]=0,D[10]=fe,D[14]=-ie,D[3]=0,D[7]=0,D[11]=0,D[15]=1,this}equals(e){const o=this.elements,f=e.elements;for(let y=0;y<16;y++)if(o[y]!==f[y])return!1;return!0}fromArray(e,o=0){for(let f=0;f<16;f++)this.elements[f]=e[f+o];return this}toArray(e=[],o=0){const f=this.elements;return e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],e[o+3]=f[3],e[o+4]=f[4],e[o+5]=f[5],e[o+6]=f[6],e[o+7]=f[7],e[o+8]=f[8],e[o+9]=f[9],e[o+10]=f[10],e[o+11]=f[11],e[o+12]=f[12],e[o+13]=f[13],e[o+14]=f[14],e[o+15]=f[15],e}}const nu=new Qe,ys=new li,Xd=new Qe(0,0,0),Xh=new Qe(1,1,1),_p=new Qe,Yd=new Qe,rl=new Qe,rg=new li,ig=new xo;class Ep{constructor(e=0,o=0,f=0,y=Ep.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=o,this._z=f,this._order=y}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,o,f,y=this._order){return this._x=e,this._y=o,this._z=f,this._order=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,o=this._order,f=!0){const y=e.elements,M=y[0],B=y[4],I=y[8],D=y[1],U=y[5],X=y[9],q=y[2],Z=y[6],te=y[10];switch(o){case"XYZ":this._y=Math.asin(Go(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(-X,te),this._z=Math.atan2(-B,M)):(this._x=Math.atan2(Z,U),this._z=0);break;case"YXZ":this._x=Math.asin(-Go(X,-1,1)),Math.abs(X)<.9999999?(this._y=Math.atan2(I,te),this._z=Math.atan2(D,U)):(this._y=Math.atan2(-q,M),this._z=0);break;case"ZXY":this._x=Math.asin(Go(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-q,te),this._z=Math.atan2(-B,U)):(this._y=0,this._z=Math.atan2(D,M));break;case"ZYX":this._y=Math.asin(-Go(q,-1,1)),Math.abs(q)<.9999999?(this._x=Math.atan2(Z,te),this._z=Math.atan2(D,M)):(this._x=0,this._z=Math.atan2(-B,U));break;case"YZX":this._z=Math.asin(Go(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(-X,U),this._y=Math.atan2(-q,M)):(this._x=0,this._y=Math.atan2(I,te));break;case"XZY":this._z=Math.asin(-Go(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(Z,U),this._y=Math.atan2(I,M)):(this._x=Math.atan2(-X,te),this._y=0);break;default:w.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,f===!0&&this._onChangeCallback(),this}setFromQuaternion(e,o,f){return rg.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rg,o,f)}setFromVector3(e,o=this._order){return this.set(e.x,e.y,e.z,o)}reorder(e){return ig.setFromEuler(this),this.setFromQuaternion(ig,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ep.DEFAULT_ORDER="XYZ";class Yh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let a1=0;const xm=new Qe,xc=new xo,Pl=new li,Vc=new Qe,ru=new Qe,og=new Qe,Jd=new xo,Jh=new Qe(1,0,0),iu=new Qe(0,1,0),tc=new Qe(0,0,1),Cm={type:"added"},Qu={type:"removed"};class Bi extends vl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:a1++}),this.uuid=Ga(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bi.DEFAULT_UP.clone();const e=new Qe,o=new Ep,f=new xo,y=new Qe(1,1,1);function M(){f.setFromEuler(o,!1)}function B(){o.setFromQuaternion(f,void 0,!1)}o._onChange(M),f._onChange(B),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:y},modelViewMatrix:{value:new li},normalMatrix:{value:new yi}}),this.matrix=new li,this.matrixWorld=new li,this.matrixAutoUpdate=Bi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Bi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Yh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,o){this.quaternion.setFromAxisAngle(e,o)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,o){return xc.setFromAxisAngle(e,o),this.quaternion.multiply(xc),this}rotateOnWorldAxis(e,o){return xc.setFromAxisAngle(e,o),this.quaternion.premultiply(xc),this}rotateX(e){return this.rotateOnAxis(Jh,e)}rotateY(e){return this.rotateOnAxis(iu,e)}rotateZ(e){return this.rotateOnAxis(tc,e)}translateOnAxis(e,o){return xm.copy(e).applyQuaternion(this.quaternion),this.position.add(xm.multiplyScalar(o)),this}translateX(e){return this.translateOnAxis(Jh,e)}translateY(e){return this.translateOnAxis(iu,e)}translateZ(e){return this.translateOnAxis(tc,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pl.copy(this.matrixWorld).invert())}lookAt(e,o,f){e.isVector3?Vc.copy(e):Vc.set(e,o,f);const y=this.parent;this.updateWorldMatrix(!0,!1),ru.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pl.lookAt(ru,Vc,this.up):Pl.lookAt(Vc,ru,this.up),this.quaternion.setFromRotationMatrix(Pl),y&&(Pl.extractRotation(y.matrixWorld),xc.setFromRotationMatrix(Pl),this.quaternion.premultiply(xc.invert()))}add(e){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return e===this?(w.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Cm)):w.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const o=this.children.indexOf(e);return o!==-1&&(e.parent=null,this.children.splice(o,1),e.dispatchEvent(Qu)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const o=this.children[e];o.parent=null,o.dispatchEvent(Qu)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Pl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pl),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,o){if(this[e]===o)return this;for(let f=0,y=this.children.length;f<y;f++){const B=this.children[f].getObjectByProperty(e,o);if(B!==void 0)return B}}getObjectsByProperty(e,o){let f=[];this[e]===o&&f.push(this);for(let y=0,M=this.children.length;y<M;y++){const B=this.children[y].getObjectsByProperty(e,o);B.length>0&&(f=f.concat(B))}return f}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ru,e,og),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ru,Jd,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return e.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(e){e(this);const o=this.children;for(let f=0,y=o.length;f<y;f++)o[f].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const o=this.children;for(let f=0,y=o.length;f<y;f++)o[f].traverseVisible(e)}traverseAncestors(e){const o=this.parent;o!==null&&(e(o),o.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const o=this.children;for(let f=0,y=o.length;f<y;f++){const M=o[f];(M.matrixWorldAutoUpdate===!0||e===!0)&&M.updateMatrixWorld(e)}}updateWorldMatrix(e,o){const f=this.parent;if(e===!0&&f!==null&&f.matrixWorldAutoUpdate===!0&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){const y=this.children;for(let M=0,B=y.length;M<B;M++){const I=y[M];I.matrixWorldAutoUpdate===!0&&I.updateWorldMatrix(!1,!0)}}}toJSON(e){const o=e===void 0||typeof e=="string",f={};o&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const y={};y.uuid=this.uuid,y.type=this.type,this.name!==""&&(y.name=this.name),this.castShadow===!0&&(y.castShadow=!0),this.receiveShadow===!0&&(y.receiveShadow=!0),this.visible===!1&&(y.visible=!1),this.frustumCulled===!1&&(y.frustumCulled=!1),this.renderOrder!==0&&(y.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(y.userData=this.userData),y.layers=this.layers.mask,y.matrix=this.matrix.toArray(),y.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(y.matrixAutoUpdate=!1),this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(y.instanceColor=this.instanceColor.toJSON()));function M(I,D){return I[D.uuid]===void 0&&(I[D.uuid]=D.toJSON(e)),D.uuid}if(this.isScene)this.background&&(this.background.isColor?y.background=this.background.toJSON():this.background.isTexture&&(y.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(y.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){y.geometry=M(e.geometries,this.geometry);const I=this.geometry.parameters;if(I!==void 0&&I.shapes!==void 0){const D=I.shapes;if(Array.isArray(D))for(let U=0,X=D.length;U<X;U++){const q=D[U];M(e.shapes,q)}else M(e.shapes,D)}}if(this.isSkinnedMesh&&(y.bindMode=this.bindMode,y.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(M(e.skeletons,this.skeleton),y.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const I=[];for(let D=0,U=this.material.length;D<U;D++)I.push(M(e.materials,this.material[D]));y.material=I}else y.material=M(e.materials,this.material);if(this.children.length>0){y.children=[];for(let I=0;I<this.children.length;I++)y.children.push(this.children[I].toJSON(e).object)}if(this.animations.length>0){y.animations=[];for(let I=0;I<this.animations.length;I++){const D=this.animations[I];y.animations.push(M(e.animations,D))}}if(o){const I=B(e.geometries),D=B(e.materials),U=B(e.textures),X=B(e.images),q=B(e.shapes),Z=B(e.skeletons),te=B(e.animations),ie=B(e.nodes);I.length>0&&(f.geometries=I),D.length>0&&(f.materials=D),U.length>0&&(f.textures=U),X.length>0&&(f.images=X),q.length>0&&(f.shapes=q),Z.length>0&&(f.skeletons=Z),te.length>0&&(f.animations=te),ie.length>0&&(f.nodes=ie)}return f.object=y,f;function B(I){const D=[];for(const U in I){const X=I[U];delete X.metadata,D.push(X)}return D}}clone(e){return new this.constructor().copy(this,e)}copy(e,o=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),o===!0)for(let f=0;f<e.children.length;f++){const y=e.children[f];this.add(y.clone())}return this}}Bi.DEFAULT_UP=new Qe(0,1,0),Bi.DEFAULT_MATRIX_AUTO_UPDATE=!0,Bi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ga=new Qe,Ml=new Qe,qd=new Qe,il=new Qe,Ho=new Qe,Ku=new Qe,qh=new Qe,ws=new Qe,ts=new Qe,xl=new Qe;let Ta=!1;class Ba{constructor(e=new Qe,o=new Qe,f=new Qe){this.a=e,this.b=o,this.c=f}static getNormal(e,o,f,y){y.subVectors(f,o),ga.subVectors(e,o),y.cross(ga);const M=y.lengthSq();return M>0?y.multiplyScalar(1/Math.sqrt(M)):y.set(0,0,0)}static getBarycoord(e,o,f,y,M){ga.subVectors(y,o),Ml.subVectors(f,o),qd.subVectors(e,o);const B=ga.dot(ga),I=ga.dot(Ml),D=ga.dot(qd),U=Ml.dot(Ml),X=Ml.dot(qd),q=B*U-I*I;if(q===0)return M.set(-2,-1,-1);const Z=1/q,te=(U*D-I*X)*Z,ie=(B*X-I*D)*Z;return M.set(1-te-ie,ie,te)}static containsPoint(e,o,f,y){return this.getBarycoord(e,o,f,y,il),il.x>=0&&il.y>=0&&il.x+il.y<=1}static getUV(e,o,f,y,M,B,I,D){return Ta===!1&&(w.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ta=!0),this.getInterpolation(e,o,f,y,M,B,I,D)}static getInterpolation(e,o,f,y,M,B,I,D){return this.getBarycoord(e,o,f,y,il),D.setScalar(0),D.addScaledVector(M,il.x),D.addScaledVector(B,il.y),D.addScaledVector(I,il.z),D}static isFrontFacing(e,o,f,y){return ga.subVectors(f,o),Ml.subVectors(e,o),ga.cross(Ml).dot(y)<0}set(e,o,f){return this.a.copy(e),this.b.copy(o),this.c.copy(f),this}setFromPointsAndIndices(e,o,f,y){return this.a.copy(e[o]),this.b.copy(e[f]),this.c.copy(e[y]),this}setFromAttributeAndIndices(e,o,f,y){return this.a.fromBufferAttribute(e,o),this.b.fromBufferAttribute(e,f),this.c.fromBufferAttribute(e,y),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ga.subVectors(this.c,this.b),Ml.subVectors(this.a,this.b),ga.cross(Ml).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ba.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,o){return Ba.getBarycoord(e,this.a,this.b,this.c,o)}getUV(e,o,f,y,M){return Ta===!1&&(w.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ta=!0),Ba.getInterpolation(e,this.a,this.b,this.c,o,f,y,M)}getInterpolation(e,o,f,y,M){return Ba.getInterpolation(e,this.a,this.b,this.c,o,f,y,M)}containsPoint(e){return Ba.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ba.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,o){const f=this.a,y=this.b,M=this.c;let B,I;Ho.subVectors(y,f),Ku.subVectors(M,f),ws.subVectors(e,f);const D=Ho.dot(ws),U=Ku.dot(ws);if(D<=0&&U<=0)return o.copy(f);ts.subVectors(e,y);const X=Ho.dot(ts),q=Ku.dot(ts);if(X>=0&&q<=X)return o.copy(y);const Z=D*q-X*U;if(Z<=0&&D>=0&&X<=0)return B=D/(D-X),o.copy(f).addScaledVector(Ho,B);xl.subVectors(e,M);const te=Ho.dot(xl),ie=Ku.dot(xl);if(ie>=0&&te<=ie)return o.copy(M);const fe=te*U-D*ie;if(fe<=0&&U>=0&&ie<=0)return I=U/(U-ie),o.copy(f).addScaledVector(Ku,I);const $=X*ie-te*q;if($<=0&&q-X>=0&&te-ie>=0)return qh.subVectors(M,y),I=(q-X)/(q-X+(te-ie)),o.copy(y).addScaledVector(qh,I);const re=1/($+fe+Z);return B=fe*re,I=Z*re,o.copy(f).addScaledVector(Ho,B).addScaledVector(Ku,I)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Sm=0;class Ts extends vl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Sm++}),this.uuid=Ga(),this.name="",this.type="Material",this.blending=vt,this.side=nt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=eo,this.blendDst=Gr,this.blendEquation=qt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Rn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xa,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pu,this.stencilZFail=Pu,this.stencilZPass=Pu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const o in e){const f=e[o];if(f===void 0){w.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}const y=this[o];if(y===void 0){w.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`);continue}y&&y.isColor?y.set(f):y&&y.isVector3&&f&&f.isVector3?y.copy(f):this[o]=f}}toJSON(e){const o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{}});const f={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),this.roughness!==void 0&&(f.roughness=this.roughness),this.metalness!==void 0&&(f.metalness=this.metalness),this.sheen!==void 0&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(f.shininess=this.shininess),this.clearcoat!==void 0&&(f.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(f.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(f.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(f.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(f.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(f.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(e).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(e).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(e).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(e).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(e).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(f.combine=this.combine)),this.envMapIntensity!==void 0&&(f.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(f.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(f.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(f.size=this.size),this.shadowSide!==null&&(f.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(f.sizeAttenuation=this.sizeAttenuation),this.blending!==vt&&(f.blending=this.blending),this.side!==nt&&(f.side=this.side),this.vertexColors&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),this.transparent===!0&&(f.transparent=this.transparent),f.depthFunc=this.depthFunc,f.depthTest=this.depthTest,f.depthWrite=this.depthWrite,f.colorWrite=this.colorWrite,f.stencilWrite=this.stencilWrite,f.stencilWriteMask=this.stencilWriteMask,f.stencilFunc=this.stencilFunc,f.stencilRef=this.stencilRef,f.stencilFuncMask=this.stencilFuncMask,f.stencilFail=this.stencilFail,f.stencilZFail=this.stencilZFail,f.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(f.rotation=this.rotation),this.polygonOffset===!0&&(f.polygonOffset=!0),this.polygonOffsetFactor!==0&&(f.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(f.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(f.linewidth=this.linewidth),this.dashSize!==void 0&&(f.dashSize=this.dashSize),this.gapSize!==void 0&&(f.gapSize=this.gapSize),this.scale!==void 0&&(f.scale=this.scale),this.dithering===!0&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),this.alphaHash===!0&&(f.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(f.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(f.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(f.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(f.wireframe=this.wireframe),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(f.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(f.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(f.flatShading=this.flatShading),this.visible===!1&&(f.visible=!1),this.toneMapped===!1&&(f.toneMapped=!1),this.fog===!1&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData);function y(M){const B=[];for(const I in M){const D=M[I];delete D.metadata,B.push(D)}return B}if(o){const M=y(e.textures),B=y(e.images);M.length>0&&(f.textures=M),B.length>0&&(f.images=B)}return f}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const o=e.clippingPlanes;let f=null;if(o!==null){const y=o.length;f=new Array(y);for(let M=0;M!==y;++M)f[M]=o[M].clone()}return this.clippingPlanes=f,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Zh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ll={h:0,s:0,l:0},Cc={h:0,s:0,l:0};function ou(C,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?C+(e-C)*6*o:o<1/2?e:o<2/3?C+(e-C)*6*(2/3-o):C}class fr{constructor(e,o,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,o,f)}set(e,o,f){if(o===void 0&&f===void 0){const y=e;y&&y.isColor?this.copy(y):typeof y=="number"?this.setHex(y):typeof y=="string"&&this.setStyle(y)}else this.setRGB(e,o,f);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,o=ai){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Uo.toWorkingColorSpace(this,o),this}setRGB(e,o,f,y=Uo.workingColorSpace){return this.r=e,this.g=o,this.b=f,Uo.toWorkingColorSpace(this,y),this}setHSL(e,o,f,y=Uo.workingColorSpace){if(e=dp(e,1),o=Go(o,0,1),f=Go(f,0,1),o===0)this.r=this.g=this.b=f;else{const M=f<=.5?f*(1+o):f+o-f*o,B=2*f-M;this.r=ou(B,M,e+1/3),this.g=ou(B,M,e),this.b=ou(B,M,e-1/3)}return Uo.toWorkingColorSpace(this,y),this}setStyle(e,o=ai){function f(M){M!==void 0&&parseFloat(M)<1&&w.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let y;if(y=/^(\w+)\(([^\)]*)\)/.exec(e)){let M;const B=y[1],I=y[2];switch(B){case"rgb":case"rgba":if(M=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(M[4]),this.setRGB(Math.min(255,parseInt(M[1],10))/255,Math.min(255,parseInt(M[2],10))/255,Math.min(255,parseInt(M[3],10))/255,o);if(M=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(M[4]),this.setRGB(Math.min(100,parseInt(M[1],10))/100,Math.min(100,parseInt(M[2],10))/100,Math.min(100,parseInt(M[3],10))/100,o);break;case"hsl":case"hsla":if(M=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(M[4]),this.setHSL(parseFloat(M[1])/360,parseFloat(M[2])/100,parseFloat(M[3])/100,o);break;default:w.warn("THREE.Color: Unknown color model "+e)}}else if(y=/^\#([A-Fa-f\d]+)$/.exec(e)){const M=y[1],B=M.length;if(B===3)return this.setRGB(parseInt(M.charAt(0),16)/15,parseInt(M.charAt(1),16)/15,parseInt(M.charAt(2),16)/15,o);if(B===6)return this.setHex(parseInt(M,16),o);w.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,o);return this}setColorName(e,o=ai){const f=Zh[e.toLowerCase()];return f!==void 0?this.setHex(f,o):w.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=jc(e.r),this.g=jc(e.g),this.b=jc(e.b),this}copyLinearToSRGB(e){return this.r=Qh(e.r),this.g=Qh(e.g),this.b=Qh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ai){return Uo.fromWorkingColorSpace(ls.copy(this),e),Math.round(Go(ls.r*255,0,255))*65536+Math.round(Go(ls.g*255,0,255))*256+Math.round(Go(ls.b*255,0,255))}getHexString(e=ai){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,o=Uo.workingColorSpace){Uo.fromWorkingColorSpace(ls.copy(this),o);const f=ls.r,y=ls.g,M=ls.b,B=Math.max(f,y,M),I=Math.min(f,y,M);let D,U;const X=(I+B)/2;if(I===B)D=0,U=0;else{const q=B-I;switch(U=X<=.5?q/(B+I):q/(2-B-I),B){case f:D=(y-M)/q+(y<M?6:0);break;case y:D=(M-f)/q+2;break;case M:D=(f-y)/q+4;break}D/=6}return e.h=D,e.s=U,e.l=X,e}getRGB(e,o=Uo.workingColorSpace){return Uo.fromWorkingColorSpace(ls.copy(this),o),e.r=ls.r,e.g=ls.g,e.b=ls.b,e}getStyle(e=ai){Uo.fromWorkingColorSpace(ls.copy(this),e);const o=ls.r,f=ls.g,y=ls.b;return e!==ai?`color(${e} ${o.toFixed(3)} ${f.toFixed(3)} ${y.toFixed(3)})`:`rgb(${Math.round(o*255)},${Math.round(f*255)},${Math.round(y*255)})`}offsetHSL(e,o,f){return this.getHSL(Ll),Ll.h+=e,Ll.s+=o,Ll.l+=f,this.setHSL(Ll.h,Ll.s,Ll.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,o){return this.r=e.r+o.r,this.g=e.g+o.g,this.b=e.b+o.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,o){return this.r+=(e.r-this.r)*o,this.g+=(e.g-this.g)*o,this.b+=(e.b-this.b)*o,this}lerpColors(e,o,f){return this.r=e.r+(o.r-e.r)*f,this.g=e.g+(o.g-e.g)*f,this.b=e.b+(o.b-e.b)*f,this}lerpHSL(e,o){this.getHSL(Ll),e.getHSL(Cc);const f=ql(Ll.h,Cc.h,o),y=ql(Ll.s,Cc.s,o),M=ql(Ll.l,Cc.l,o);return this.setHSL(f,y,M),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const o=this.r,f=this.g,y=this.b,M=e.elements;return this.r=M[0]*o+M[3]*f+M[6]*y,this.g=M[1]*o+M[4]*f+M[7]*y,this.b=M[2]*o+M[5]*f+M[8]*y,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,o=0){return this.r=e[o],this.g=e[o+1],this.b=e[o+2],this}toArray(e=[],o=0){return e[o]=this.r,e[o+1]=this.g,e[o+2]=this.b,e}fromBufferAttribute(e,o){return this.r=e.getX(o),this.g=e.getY(o),this.b=e.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ls=new fr;fr.NAMES=Zh;class nc extends Ts{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Or,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rc=sg();function sg(){const C=new ArrayBuffer(4),e=new Float32Array(C),o=new Uint32Array(C),f=new Uint32Array(512),y=new Uint32Array(512);for(let D=0;D<256;++D){const U=D-127;U<-27?(f[D]=0,f[D|256]=32768,y[D]=24,y[D|256]=24):U<-14?(f[D]=1024>>-U-14,f[D|256]=1024>>-U-14|32768,y[D]=-U-1,y[D|256]=-U-1):U<=15?(f[D]=U+15<<10,f[D|256]=U+15<<10|32768,y[D]=13,y[D|256]=13):U<128?(f[D]=31744,f[D|256]=64512,y[D]=24,y[D|256]=24):(f[D]=31744,f[D|256]=64512,y[D]=13,y[D|256]=13)}const M=new Uint32Array(2048),B=new Uint32Array(64),I=new Uint32Array(64);for(let D=1;D<1024;++D){let U=D<<13,X=0;for(;!(U&8388608);)U<<=1,X-=8388608;U&=-8388609,X+=947912704,M[D]=U|X}for(let D=1024;D<2048;++D)M[D]=939524096+(D-1024<<13);for(let D=1;D<31;++D)B[D]=D<<23;B[31]=1199570944,B[32]=2147483648;for(let D=33;D<63;++D)B[D]=2147483648+(D-32<<23);B[63]=3347054592;for(let D=1;D<64;++D)D!==32&&(I[D]=1024);return{floatView:e,uint32View:o,baseTable:f,shiftTable:y,mantissaTable:M,exponentTable:B,offsetTable:I}}function ea(C){Math.abs(C)>65504&&w.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),C=Go(C,-65504,65504),rc.floatView[0]=C;const e=rc.uint32View[0],o=e>>23&511;return rc.baseTable[o]+((e&8388607)>>rc.shiftTable[o])}function su(C){const e=C>>10;return rc.uint32View[0]=rc.mantissaTable[rc.offsetTable[e]+(C&1023)]+rc.exponentTable[e],rc.floatView[0]}const $h={toHalfFloat:ea,fromHalfFloat:su},ns=new Qe,Xu=new gn;class ao{constructor(e,o,f=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=o,this.count=e!==void 0?e.length/o:0,this.normalized=f,this.usage=up,this.updateRange={offset:0,count:-1},this.gpuType=zo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,o,f){e*=this.itemSize,f*=o.itemSize;for(let y=0,M=this.itemSize;y<M;y++)this.array[e+y]=o.array[f+y];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let o=0,f=this.count;o<f;o++)Xu.fromBufferAttribute(this,o),Xu.applyMatrix3(e),this.setXY(o,Xu.x,Xu.y);else if(this.itemSize===3)for(let o=0,f=this.count;o<f;o++)ns.fromBufferAttribute(this,o),ns.applyMatrix3(e),this.setXYZ(o,ns.x,ns.y,ns.z);return this}applyMatrix4(e){for(let o=0,f=this.count;o<f;o++)ns.fromBufferAttribute(this,o),ns.applyMatrix4(e),this.setXYZ(o,ns.x,ns.y,ns.z);return this}applyNormalMatrix(e){for(let o=0,f=this.count;o<f;o++)ns.fromBufferAttribute(this,o),ns.applyNormalMatrix(e),this.setXYZ(o,ns.x,ns.y,ns.z);return this}transformDirection(e){for(let o=0,f=this.count;o<f;o++)ns.fromBufferAttribute(this,o),ns.transformDirection(e),this.setXYZ(o,ns.x,ns.y,ns.z);return this}set(e,o=0){return this.array.set(e,o),this}getX(e){let o=this.array[e*this.itemSize];return this.normalized&&(o=ha(o,this.array)),o}setX(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize]=o,this}getY(e){let o=this.array[e*this.itemSize+1];return this.normalized&&(o=ha(o,this.array)),o}setY(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize+1]=o,this}getZ(e){let o=this.array[e*this.itemSize+2];return this.normalized&&(o=ha(o,this.array)),o}setZ(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize+2]=o,this}getW(e){let o=this.array[e*this.itemSize+3];return this.normalized&&(o=ha(o,this.array)),o}setW(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize+3]=o,this}setXY(e,o,f){return e*=this.itemSize,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array)),this.array[e+0]=o,this.array[e+1]=f,this}setXYZ(e,o,f,y){return e*=this.itemSize,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array),y=Xr(y,this.array)),this.array[e+0]=o,this.array[e+1]=f,this.array[e+2]=y,this}setXYZW(e,o,f,y,M){return e*=this.itemSize,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array),y=Xr(y,this.array),M=Xr(M,this.array)),this.array[e+0]=o,this.array[e+1]=f,this.array[e+2]=y,this.array[e+3]=M,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==up&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class ic extends ao{constructor(e,o,f){super(new Int8Array(e),o,f)}}class wm extends ao{constructor(e,o,f){super(new Uint8Array(e),o,f)}}class l1 extends ao{constructor(e,o,f){super(new Uint8ClampedArray(e),o,f)}}class ef extends ao{constructor(e,o,f){super(new Int16Array(e),o,f)}}class Qc extends ao{constructor(e,o,f){super(new Uint16Array(e),o,f)}}class c1 extends ao{constructor(e,o,f){super(new Int32Array(e),o,f)}}class er extends ao{constructor(e,o,f){super(new Uint32Array(e),o,f)}}class Kc extends ao{constructor(e,o,f){super(new Uint16Array(e),o,f),this.isFloat16BufferAttribute=!0}getX(e){let o=su(this.array[e*this.itemSize]);return this.normalized&&(o=ha(o,this.array)),o}setX(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize]=ea(o),this}getY(e){let o=su(this.array[e*this.itemSize+1]);return this.normalized&&(o=ha(o,this.array)),o}setY(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize+1]=ea(o),this}getZ(e){let o=su(this.array[e*this.itemSize+2]);return this.normalized&&(o=ha(o,this.array)),o}setZ(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize+2]=ea(o),this}getW(e){let o=su(this.array[e*this.itemSize+3]);return this.normalized&&(o=ha(o,this.array)),o}setW(e,o){return this.normalized&&(o=Xr(o,this.array)),this.array[e*this.itemSize+3]=ea(o),this}setXY(e,o,f){return e*=this.itemSize,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array)),this.array[e+0]=ea(o),this.array[e+1]=ea(f),this}setXYZ(e,o,f,y){return e*=this.itemSize,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array),y=Xr(y,this.array)),this.array[e+0]=ea(o),this.array[e+1]=ea(f),this.array[e+2]=ea(y),this}setXYZW(e,o,f,y,M){return e*=this.itemSize,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array),y=Xr(y,this.array),M=Xr(M,this.array)),this.array[e+0]=ea(o),this.array[e+1]=ea(f),this.array[e+2]=ea(y),this.array[e+3]=ea(M),this}}class yr extends ao{constructor(e,o,f){super(new Float32Array(e),o,f)}}class Tm extends ao{constructor(e,o,f){super(new Float64Array(e),o,f)}}let p1=0;const vs=new li,oc=new Bi,bp=new Qe,ol=new Ao,Yu=new Ao,js=new Qe;class xi extends vl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:p1++}),this.uuid=Ga(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tg(e)?er:Qc)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,o){return this.attributes[e]=o,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,o,f=0){this.groups.push({start:e,count:o,materialIndex:f})}clearGroups(){this.groups=[]}setDrawRange(e,o){this.drawRange.start=e,this.drawRange.count=o}applyMatrix4(e){const o=this.attributes.position;o!==void 0&&(o.applyMatrix4(e),o.needsUpdate=!0);const f=this.attributes.normal;if(f!==void 0){const M=new yi().getNormalMatrix(e);f.applyNormalMatrix(M),f.needsUpdate=!0}const y=this.attributes.tangent;return y!==void 0&&(y.transformDirection(e),y.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vs.makeRotationFromQuaternion(e),this.applyMatrix4(vs),this}rotateX(e){return vs.makeRotationX(e),this.applyMatrix4(vs),this}rotateY(e){return vs.makeRotationY(e),this.applyMatrix4(vs),this}rotateZ(e){return vs.makeRotationZ(e),this.applyMatrix4(vs),this}translate(e,o,f){return vs.makeTranslation(e,o,f),this.applyMatrix4(vs),this}scale(e,o,f){return vs.makeScale(e,o,f),this.applyMatrix4(vs),this}lookAt(e){return oc.lookAt(e),oc.updateMatrix(),this.applyMatrix4(oc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bp).negate(),this.translate(bp.x,bp.y,bp.z),this}setFromPoints(e){const o=[];for(let f=0,y=e.length;f<y;f++){const M=e[f];o.push(M.x,M.y,M.z||0)}return this.setAttribute("position",new yr(o,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ao);const e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){w.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Qe(-1/0,-1/0,-1/0),new Qe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),o)for(let f=0,y=o.length;f<y;f++){const M=o[f];ol.setFromBufferAttribute(M),this.morphTargetsRelative?(js.addVectors(this.boundingBox.min,ol.min),this.boundingBox.expandByPoint(js),js.addVectors(this.boundingBox.max,ol.max),this.boundingBox.expandByPoint(js)):(this.boundingBox.expandByPoint(ol.min),this.boundingBox.expandByPoint(ol.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&w.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fo);const e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){w.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Qe,1/0);return}if(e){const f=this.boundingSphere.center;if(ol.setFromBufferAttribute(e),o)for(let M=0,B=o.length;M<B;M++){const I=o[M];Yu.setFromBufferAttribute(I),this.morphTargetsRelative?(js.addVectors(ol.min,Yu.min),ol.expandByPoint(js),js.addVectors(ol.max,Yu.max),ol.expandByPoint(js)):(ol.expandByPoint(Yu.min),ol.expandByPoint(Yu.max))}ol.getCenter(f);let y=0;for(let M=0,B=e.count;M<B;M++)js.fromBufferAttribute(e,M),y=Math.max(y,f.distanceToSquared(js));if(o)for(let M=0,B=o.length;M<B;M++){const I=o[M],D=this.morphTargetsRelative;for(let U=0,X=I.count;U<X;U++)js.fromBufferAttribute(I,U),D&&(bp.fromBufferAttribute(e,U),js.add(bp)),y=Math.max(y,f.distanceToSquared(js))}this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&w.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,o=this.attributes;if(e===null||o.position===void 0||o.normal===void 0||o.uv===void 0){w.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const f=e.array,y=o.position.array,M=o.normal.array,B=o.uv.array,I=y.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ao(new Float32Array(4*I),4));const D=this.getAttribute("tangent").array,U=[],X=[];for(let We=0;We<I;We++)U[We]=new Qe,X[We]=new Qe;const q=new Qe,Z=new Qe,te=new Qe,ie=new gn,fe=new gn,$=new gn,re=new Qe,be=new Qe;function he(We,Yt,Mn){q.fromArray(y,We*3),Z.fromArray(y,Yt*3),te.fromArray(y,Mn*3),ie.fromArray(B,We*2),fe.fromArray(B,Yt*2),$.fromArray(B,Mn*2),Z.sub(q),te.sub(q),fe.sub(ie),$.sub(ie);const Gt=1/(fe.x*$.y-$.x*fe.y);isFinite(Gt)&&(re.copy(Z).multiplyScalar($.y).addScaledVector(te,-fe.y).multiplyScalar(Gt),be.copy(te).multiplyScalar(fe.x).addScaledVector(Z,-$.x).multiplyScalar(Gt),U[We].add(re),U[Yt].add(re),U[Mn].add(re),X[We].add(be),X[Yt].add(be),X[Mn].add(be))}let Se=this.groups;Se.length===0&&(Se=[{start:0,count:f.length}]);for(let We=0,Yt=Se.length;We<Yt;++We){const Mn=Se[We],Gt=Mn.start,Ut=Mn.count;for(let Xt=Gt,xn=Gt+Ut;Xt<xn;Xt+=3)he(f[Xt+0],f[Xt+1],f[Xt+2])}const Ue=new Qe,Xe=new Qe,et=new Qe,st=new Qe;function we(We){et.fromArray(M,We*3),st.copy(et);const Yt=U[We];Ue.copy(Yt),Ue.sub(et.multiplyScalar(et.dot(Yt))).normalize(),Xe.crossVectors(st,Yt);const Gt=Xe.dot(X[We])<0?-1:1;D[We*4]=Ue.x,D[We*4+1]=Ue.y,D[We*4+2]=Ue.z,D[We*4+3]=Gt}for(let We=0,Yt=Se.length;We<Yt;++We){const Mn=Se[We],Gt=Mn.start,Ut=Mn.count;for(let Xt=Gt,xn=Gt+Ut;Xt<xn;Xt+=3)we(f[Xt+0]),we(f[Xt+1]),we(f[Xt+2])}}computeVertexNormals(){const e=this.index,o=this.getAttribute("position");if(o!==void 0){let f=this.getAttribute("normal");if(f===void 0)f=new ao(new Float32Array(o.count*3),3),this.setAttribute("normal",f);else for(let Z=0,te=f.count;Z<te;Z++)f.setXYZ(Z,0,0,0);const y=new Qe,M=new Qe,B=new Qe,I=new Qe,D=new Qe,U=new Qe,X=new Qe,q=new Qe;if(e)for(let Z=0,te=e.count;Z<te;Z+=3){const ie=e.getX(Z+0),fe=e.getX(Z+1),$=e.getX(Z+2);y.fromBufferAttribute(o,ie),M.fromBufferAttribute(o,fe),B.fromBufferAttribute(o,$),X.subVectors(B,M),q.subVectors(y,M),X.cross(q),I.fromBufferAttribute(f,ie),D.fromBufferAttribute(f,fe),U.fromBufferAttribute(f,$),I.add(X),D.add(X),U.add(X),f.setXYZ(ie,I.x,I.y,I.z),f.setXYZ(fe,D.x,D.y,D.z),f.setXYZ($,U.x,U.y,U.z)}else for(let Z=0,te=o.count;Z<te;Z+=3)y.fromBufferAttribute(o,Z+0),M.fromBufferAttribute(o,Z+1),B.fromBufferAttribute(o,Z+2),X.subVectors(B,M),q.subVectors(y,M),X.cross(q),f.setXYZ(Z+0,X.x,X.y,X.z),f.setXYZ(Z+1,X.x,X.y,X.z),f.setXYZ(Z+2,X.x,X.y,X.z);this.normalizeNormals(),f.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let o=0,f=e.count;o<f;o++)js.fromBufferAttribute(e,o),js.normalize(),e.setXYZ(o,js.x,js.y,js.z)}toNonIndexed(){function e(I,D){const U=I.array,X=I.itemSize,q=I.normalized,Z=new U.constructor(D.length*X);let te=0,ie=0;for(let fe=0,$=D.length;fe<$;fe++){I.isInterleavedBufferAttribute?te=D[fe]*I.data.stride+I.offset:te=D[fe]*X;for(let re=0;re<X;re++)Z[ie++]=U[te++]}return new ao(Z,X,q)}if(this.index===null)return w.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new xi,f=this.index.array,y=this.attributes;for(const I in y){const D=y[I],U=e(D,f);o.setAttribute(I,U)}const M=this.morphAttributes;for(const I in M){const D=[],U=M[I];for(let X=0,q=U.length;X<q;X++){const Z=U[X],te=e(Z,f);D.push(te)}o.morphAttributes[I]=D}o.morphTargetsRelative=this.morphTargetsRelative;const B=this.groups;for(let I=0,D=B.length;I<D;I++){const U=B[I];o.addGroup(U.start,U.count,U.materialIndex)}return o}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const D=this.parameters;for(const U in D)D[U]!==void 0&&(e[U]=D[U]);return e}e.data={attributes:{}};const o=this.index;o!==null&&(e.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const f=this.attributes;for(const D in f){const U=f[D];e.data.attributes[D]=U.toJSON(e.data)}const y={};let M=!1;for(const D in this.morphAttributes){const U=this.morphAttributes[D],X=[];for(let q=0,Z=U.length;q<Z;q++){const te=U[q];X.push(te.toJSON(e.data))}X.length>0&&(y[D]=X,M=!0)}M&&(e.data.morphAttributes=y,e.data.morphTargetsRelative=this.morphTargetsRelative);const B=this.groups;B.length>0&&(e.data.groups=JSON.parse(JSON.stringify(B)));const I=this.boundingSphere;return I!==null&&(e.data.boundingSphere={center:I.center.toArray(),radius:I.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=e.name;const f=e.index;f!==null&&this.setIndex(f.clone(o));const y=e.attributes;for(const U in y){const X=y[U];this.setAttribute(U,X.clone(o))}const M=e.morphAttributes;for(const U in M){const X=[],q=M[U];for(let Z=0,te=q.length;Z<te;Z++)X.push(q[Z].clone(o));this.morphAttributes[U]=X}this.morphTargetsRelative=e.morphTargetsRelative;const B=e.groups;for(let U=0,X=B.length;U<X;U++){const q=B[U];this.addGroup(q.start,q.count,q.materialIndex)}const I=e.boundingBox;I!==null&&(this.boundingBox=I.clone());const D=e.boundingSphere;return D!==null&&(this.boundingSphere=D.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ag=new li,kl=new vp,au=new Fo,Ju=new Qe,Mp=new Qe,lu=new Qe,xp=new Qe,qu=new Qe,tf=new Qe,Zu=new gn,Zd=new gn,$d=new gn,nf=new Qe,eh=new Qe,$u=new Qe,ed=new Qe,sc=new Qe;class Bs extends Bi{constructor(e=new xi,o=new nc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const o=this.geometry.morphAttributes,f=Object.keys(o);if(f.length>0){const y=o[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,B=y.length;M<B;M++){const I=y[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=M}}}}getVertexPosition(e,o){const f=this.geometry,y=f.attributes.position,M=f.morphAttributes.position,B=f.morphTargetsRelative;o.fromBufferAttribute(y,e);const I=this.morphTargetInfluences;if(M&&I){tf.set(0,0,0);for(let D=0,U=M.length;D<U;D++){const X=I[D],q=M[D];X!==0&&(qu.fromBufferAttribute(q,e),B?tf.addScaledVector(qu,X):tf.addScaledVector(qu.sub(o),X))}o.add(tf)}return o}raycast(e,o){const f=this.geometry,y=this.material,M=this.matrixWorld;y!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),au.copy(f.boundingSphere),au.applyMatrix4(M),kl.copy(e.ray).recast(e.near),!(au.containsPoint(kl.origin)===!1&&(kl.intersectSphere(au,Ju)===null||kl.origin.distanceToSquared(Ju)>t1(e.far-e.near,2)))&&(ag.copy(M).invert(),kl.copy(e.ray).applyMatrix4(ag),!(f.boundingBox!==null&&kl.intersectsBox(f.boundingBox)===!1)&&this._computeIntersections(e,o,kl)))}_computeIntersections(e,o,f){let y;const M=this.geometry,B=this.material,I=M.index,D=M.attributes.position,U=M.attributes.uv,X=M.attributes.uv1,q=M.attributes.normal,Z=M.groups,te=M.drawRange;if(I!==null)if(Array.isArray(B))for(let ie=0,fe=Z.length;ie<fe;ie++){const $=Z[ie],re=B[$.materialIndex],be=Math.max($.start,te.start),he=Math.min(I.count,Math.min($.start+$.count,te.start+te.count));for(let Se=be,Ue=he;Se<Ue;Se+=3){const Xe=I.getX(Se),et=I.getX(Se+1),st=I.getX(Se+2);y=Cp(this,re,e,f,U,X,q,Xe,et,st),y&&(y.faceIndex=Math.floor(Se/3),y.face.materialIndex=$.materialIndex,o.push(y))}}else{const ie=Math.max(0,te.start),fe=Math.min(I.count,te.start+te.count);for(let $=ie,re=fe;$<re;$+=3){const be=I.getX($),he=I.getX($+1),Se=I.getX($+2);y=Cp(this,B,e,f,U,X,q,be,he,Se),y&&(y.faceIndex=Math.floor($/3),o.push(y))}}else if(D!==void 0)if(Array.isArray(B))for(let ie=0,fe=Z.length;ie<fe;ie++){const $=Z[ie],re=B[$.materialIndex],be=Math.max($.start,te.start),he=Math.min(D.count,Math.min($.start+$.count,te.start+te.count));for(let Se=be,Ue=he;Se<Ue;Se+=3){const Xe=Se,et=Se+1,st=Se+2;y=Cp(this,re,e,f,U,X,q,Xe,et,st),y&&(y.faceIndex=Math.floor(Se/3),y.face.materialIndex=$.materialIndex,o.push(y))}}else{const ie=Math.max(0,te.start),fe=Math.min(D.count,te.start+te.count);for(let $=ie,re=fe;$<re;$+=3){const be=$,he=$+1,Se=$+2;y=Cp(this,B,e,f,U,X,q,be,he,Se),y&&(y.faceIndex=Math.floor($/3),o.push(y))}}}}function sl(C,e,o,f,y,M,B,I){let D;if(e.side===Ve?D=f.intersectTriangle(B,M,y,!0,I):D=f.intersectTriangle(y,M,B,e.side===nt,I),D===null)return null;sc.copy(I),sc.applyMatrix4(C.matrixWorld);const U=o.ray.origin.distanceTo(sc);return U<o.near||U>o.far?null:{distance:U,point:sc.clone(),object:C}}function Cp(C,e,o,f,y,M,B,I,D,U){C.getVertexPosition(I,Mp),C.getVertexPosition(D,lu),C.getVertexPosition(U,xp);const X=sl(C,e,o,f,Mp,lu,xp,ed);if(X){y&&(Zu.fromBufferAttribute(y,I),Zd.fromBufferAttribute(y,D),$d.fromBufferAttribute(y,U),X.uv=Ba.getInterpolation(ed,Mp,lu,xp,Zu,Zd,$d,new gn)),M&&(Zu.fromBufferAttribute(M,I),Zd.fromBufferAttribute(M,D),$d.fromBufferAttribute(M,U),X.uv1=Ba.getInterpolation(ed,Mp,lu,xp,Zu,Zd,$d,new gn),X.uv2=X.uv1),B&&(nf.fromBufferAttribute(B,I),eh.fromBufferAttribute(B,D),$u.fromBufferAttribute(B,U),X.normal=Ba.getInterpolation(ed,Mp,lu,xp,nf,eh,$u,new Qe),X.normal.dot(f.direction)>0&&X.normal.multiplyScalar(-1));const q={a:I,b:D,c:U,normal:new Qe,materialIndex:0};Ba.getNormal(Mp,lu,xp,q.normal),X.face=q}return X}class zl extends xi{constructor(e=1,o=1,f=1,y=1,M=1,B=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:o,depth:f,widthSegments:y,heightSegments:M,depthSegments:B};const I=this;y=Math.floor(y),M=Math.floor(M),B=Math.floor(B);const D=[],U=[],X=[],q=[];let Z=0,te=0;ie("z","y","x",-1,-1,f,o,e,B,M,0),ie("z","y","x",1,-1,f,o,-e,B,M,1),ie("x","z","y",1,1,e,f,o,y,B,2),ie("x","z","y",1,-1,e,f,-o,y,B,3),ie("x","y","z",1,-1,e,o,f,y,M,4),ie("x","y","z",-1,-1,e,o,-f,y,M,5),this.setIndex(D),this.setAttribute("position",new yr(U,3)),this.setAttribute("normal",new yr(X,3)),this.setAttribute("uv",new yr(q,2));function ie(fe,$,re,be,he,Se,Ue,Xe,et,st,we){const We=Se/et,Yt=Ue/st,Mn=Se/2,Gt=Ue/2,Ut=Xe/2,Xt=et+1,xn=st+1;let un=0,fn=0;const jt=new Qe;for(let Tn=0;Tn<xn;Tn++){const Lt=Tn*Yt-Gt;for(let dn=0;dn<Xt;dn++){const tr=dn*We-Mn;jt[fe]=tr*be,jt[$]=Lt*he,jt[re]=Ut,U.push(jt.x,jt.y,jt.z),jt[fe]=0,jt[$]=0,jt[re]=Xe>0?1:-1,X.push(jt.x,jt.y,jt.z),q.push(dn/et),q.push(1-Tn/st),un+=1}}for(let Tn=0;Tn<st;Tn++)for(let Lt=0;Lt<et;Lt++){const dn=Z+Lt+Xt*Tn,tr=Z+Lt+Xt*(Tn+1),cn=Z+(Lt+1)+Xt*(Tn+1),yt=Z+(Lt+1)+Xt*Tn;D.push(dn,tr,yt),D.push(tr,cn,yt),fn+=6}I.addGroup(te,fn,we),te+=fn,Z+=un}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xc(C){const e={};for(const o in C){e[o]={};for(const f in C[o]){const y=C[o][f];y&&(y.isColor||y.isMatrix3||y.isMatrix4||y.isVector2||y.isVector3||y.isVector4||y.isTexture||y.isQuaternion)?y.isRenderTargetTexture?(w.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[o][f]=null):e[o][f]=y.clone():Array.isArray(y)?e[o][f]=y.slice():e[o][f]=y}}return e}function _s(C){const e={};for(let o=0;o<C.length;o++){const f=Xc(C[o]);for(const y in f)e[y]=f[y]}return e}function Sp(C){const e=[];for(let o=0;o<C.length;o++)e.push(C[o].clone());return e}function th(C){return C.getRenderTarget()===null?C.outputColorSpace:Xl}const cu={clone:Xc,merge:_s};var nh=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Es=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Yr extends Ts{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nh,this.fragmentShader=Es,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xc(e.uniforms),this.uniformsGroups=Sp(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const o=super.toJSON(e);o.glslVersion=this.glslVersion,o.uniforms={};for(const y in this.uniforms){const B=this.uniforms[y].value;B&&B.isTexture?o.uniforms[y]={type:"t",value:B.toJSON(e).uuid}:B&&B.isColor?o.uniforms[y]={type:"c",value:B.getHex()}:B&&B.isVector2?o.uniforms[y]={type:"v2",value:B.toArray()}:B&&B.isVector3?o.uniforms[y]={type:"v3",value:B.toArray()}:B&&B.isVector4?o.uniforms[y]={type:"v4",value:B.toArray()}:B&&B.isMatrix3?o.uniforms[y]={type:"m3",value:B.toArray()}:B&&B.isMatrix4?o.uniforms[y]={type:"m4",value:B.toArray()}:o.uniforms[y]={value:B}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader,o.lights=this.lights,o.clipping=this.clipping;const f={};for(const y in this.extensions)this.extensions[y]===!0&&(f[y]=!0);return Object.keys(f).length>0&&(o.extensions=f),o}}class Co extends Bi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new li,this.projectionMatrix=new li,this.projectionMatrixInverse=new li,this.coordinateSystem=Zo}copy(e,o){return super.copy(e,o),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return e.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,o){super.updateWorldMatrix(e,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Li extends Co{constructor(e=50,o=1,f=.1,y=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=f,this.far=y,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const o=.5*this.getFilmHeight()/e;this.fov=vc*2*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vc*2*Math.atan(Math.tan(yc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,o,f,y,M,B){this.aspect=e/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=f,this.view.offsetY=y,this.view.width=M,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let o=e*Math.tan(yc*.5*this.fov)/this.zoom,f=2*o,y=this.aspect*f,M=-.5*y;const B=this.view;if(this.view!==null&&this.view.enabled){const D=B.fullWidth,U=B.fullHeight;M+=B.offsetX*y/D,o-=B.offsetY*f/U,y*=B.width/D,f*=B.height/U}const I=this.filmOffset;I!==0&&(M+=e*I/this.getFilmWidth()),this.projectionMatrix.makePerspective(M,M+y,o,o-f,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const o=super.toJSON(e);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,this.view!==null&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}const cs=-90,ta=1;class pu extends Bi{constructor(e,o,f){super(),this.type="CubeCamera",this.renderTarget=f,this.coordinateSystem=null;const y=new Li(cs,ta,e,o);y.layers=this.layers,this.add(y);const M=new Li(cs,ta,e,o);M.layers=this.layers,this.add(M);const B=new Li(cs,ta,e,o);B.layers=this.layers,this.add(B);const I=new Li(cs,ta,e,o);I.layers=this.layers,this.add(I);const D=new Li(cs,ta,e,o);D.layers=this.layers,this.add(D);const U=new Li(cs,ta,e,o);U.layers=this.layers,this.add(U)}updateCoordinateSystem(){const e=this.coordinateSystem,o=this.children.concat(),[f,y,M,B,I,D]=o;for(const U of o)this.remove(U);if(e===Zo)f.up.set(0,1,0),f.lookAt(1,0,0),y.up.set(0,1,0),y.lookAt(-1,0,0),M.up.set(0,0,-1),M.lookAt(0,1,0),B.up.set(0,0,1),B.lookAt(0,-1,0),I.up.set(0,1,0),I.lookAt(0,0,1),D.up.set(0,1,0),D.lookAt(0,0,-1);else if(e===tl)f.up.set(0,-1,0),f.lookAt(-1,0,0),y.up.set(0,-1,0),y.lookAt(1,0,0),M.up.set(0,0,1),M.lookAt(0,1,0),B.up.set(0,0,-1),B.lookAt(0,-1,0),I.up.set(0,-1,0),I.lookAt(0,0,1),D.up.set(0,-1,0),D.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const U of o)this.add(U),U.updateMatrixWorld()}update(e,o){this.parent===null&&this.updateMatrixWorld();const f=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[y,M,B,I,D,U]=this.children,X=e.getRenderTarget(),q=e.toneMapping,Z=e.xr.enabled;e.toneMapping=co,e.xr.enabled=!1;const te=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,e.setRenderTarget(f,0),e.render(o,y),e.setRenderTarget(f,1),e.render(o,M),e.setRenderTarget(f,2),e.render(o,B),e.setRenderTarget(f,3),e.render(o,I),e.setRenderTarget(f,4),e.render(o,D),f.texture.generateMipmaps=te,e.setRenderTarget(f,5),e.render(o,U),e.setRenderTarget(X),e.toneMapping=q,e.xr.enabled=Z,f.texture.needsPMREMUpdate=!0}}class Wo extends $i{constructor(e,o,f,y,M,B,I,D,U,X){e=e!==void 0?e:[],o=o!==void 0?o:Ls,super(e,o,f,y,M,B,I,D,U,X),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class td extends Sa{constructor(e=1,o={}){super(e,e,o),this.isWebGLCubeRenderTarget=!0;const f={width:e,height:e,depth:1},y=[f,f,f,f,f,f];o.encoding!==void 0&&(bc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=o.encoding===ml?ai:mc),this.texture=new Wo(y,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:Zi}fromEquirectangularTexture(e,o){this.texture.type=o.type,this.texture.colorSpace=o.colorSpace,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const f={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},y=new zl(5,5,5),M=new Yr({name:"CubemapFromEquirect",uniforms:Xc(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,side:Ve,blending:Ct});M.uniforms.tEquirect.value=o;const B=new Bs(y,M),I=o.minFilter;return o.minFilter===Jo&&(o.minFilter=Zi),new pu(1,10,this).update(e,B),o.minFilter=I,B.geometry.dispose(),B.material.dispose(),this}clear(e,o,f,y){const M=e.getRenderTarget();for(let B=0;B<6;B++)e.setRenderTarget(this,B),e.clear(o,f,y);e.setRenderTarget(M)}}const Yc=new Qe,rf=new Qe,ho=new yi;class So{constructor(e=new Qe(1,0,0),o=0){this.isPlane=!0,this.normal=e,this.constant=o}set(e,o){return this.normal.copy(e),this.constant=o,this}setComponents(e,o,f,y){return this.normal.set(e,o,f),this.constant=y,this}setFromNormalAndCoplanarPoint(e,o){return this.normal.copy(e),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(e,o,f){const y=Yc.subVectors(f,o).cross(rf.subVectors(e,o)).normalize();return this.setFromNormalAndCoplanarPoint(y,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,o){return o.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,o){const f=e.delta(Yc),y=this.normal.dot(f);if(y===0)return this.distanceToPoint(e.start)===0?o.copy(e.start):null;const M=-(e.start.dot(this.normal)+this.constant)/y;return M<0||M>1?null:o.copy(e.start).addScaledVector(f,M)}intersectsLine(e){const o=this.distanceToPoint(e.start),f=this.distanceToPoint(e.end);return o<0&&f>0||f<0&&o>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,o){const f=o||ho.getNormalMatrix(e),y=this.coplanarPoint(Yc).applyMatrix4(e),M=this.normal.applyMatrix3(f).normalize();return this.constant=-y.dot(M),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Vo=new Fo,uu=new Qe;class du{constructor(e=new So,o=new So,f=new So,y=new So,M=new So,B=new So){this.planes=[e,o,f,y,M,B]}set(e,o,f,y,M,B){const I=this.planes;return I[0].copy(e),I[1].copy(o),I[2].copy(f),I[3].copy(y),I[4].copy(M),I[5].copy(B),this}copy(e){const o=this.planes;for(let f=0;f<6;f++)o[f].copy(e.planes[f]);return this}setFromProjectionMatrix(e,o=Zo){const f=this.planes,y=e.elements,M=y[0],B=y[1],I=y[2],D=y[3],U=y[4],X=y[5],q=y[6],Z=y[7],te=y[8],ie=y[9],fe=y[10],$=y[11],re=y[12],be=y[13],he=y[14],Se=y[15];if(f[0].setComponents(D-M,Z-U,$-te,Se-re).normalize(),f[1].setComponents(D+M,Z+U,$+te,Se+re).normalize(),f[2].setComponents(D+B,Z+X,$+ie,Se+be).normalize(),f[3].setComponents(D-B,Z-X,$-ie,Se-be).normalize(),f[4].setComponents(D-I,Z-q,$-fe,Se-he).normalize(),o===Zo)f[5].setComponents(D+I,Z+q,$+fe,Se+he).normalize();else if(o===tl)f[5].setComponents(I,q,fe,he).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+o);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Vo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const o=e.geometry;o.boundingSphere===null&&o.computeBoundingSphere(),Vo.copy(o.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vo)}intersectsSprite(e){return Vo.center.set(0,0,0),Vo.radius=.7071067811865476,Vo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vo)}intersectsSphere(e){const o=this.planes,f=e.center,y=-e.radius;for(let M=0;M<6;M++)if(o[M].distanceToPoint(f)<y)return!1;return!0}intersectsBox(e){const o=this.planes;for(let f=0;f<6;f++){const y=o[f];if(uu.x=y.normal.x>0?e.max.x:e.min.x,uu.y=y.normal.y>0?e.max.y:e.min.y,uu.z=y.normal.z>0?e.max.z:e.min.z,y.distanceToPoint(uu)<0)return!1}return!0}containsPoint(e){const o=this.planes;for(let f=0;f<6;f++)if(o[f].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function hu(){let C=null,e=!1,o=null,f=null;function y(M,B){o(M,B),f=C.requestAnimationFrame(y)}return{start:function(){e!==!0&&o!==null&&(f=C.requestAnimationFrame(y),e=!0)},stop:function(){C.cancelAnimationFrame(f),e=!1},setAnimationLoop:function(M){o=M},setContext:function(M){C=M}}}function fu(C,e){const o=e.isWebGL2,f=new WeakMap;function y(U,X){const q=U.array,Z=U.usage,te=C.createBuffer();C.bindBuffer(X,te),C.bufferData(X,q,Z),U.onUploadCallback();let ie;if(q instanceof Float32Array)ie=C.FLOAT;else if(q instanceof Uint16Array)if(U.isFloat16BufferAttribute)if(o)ie=C.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else ie=C.UNSIGNED_SHORT;else if(q instanceof Int16Array)ie=C.SHORT;else if(q instanceof Uint32Array)ie=C.UNSIGNED_INT;else if(q instanceof Int32Array)ie=C.INT;else if(q instanceof Int8Array)ie=C.BYTE;else if(q instanceof Uint8Array)ie=C.UNSIGNED_BYTE;else if(q instanceof Uint8ClampedArray)ie=C.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+q);return{buffer:te,type:ie,bytesPerElement:q.BYTES_PER_ELEMENT,version:U.version}}function M(U,X,q){const Z=X.array,te=X.updateRange;C.bindBuffer(q,U),te.count===-1?C.bufferSubData(q,0,Z):(o?C.bufferSubData(q,te.offset*Z.BYTES_PER_ELEMENT,Z,te.offset,te.count):C.bufferSubData(q,te.offset*Z.BYTES_PER_ELEMENT,Z.subarray(te.offset,te.offset+te.count)),te.count=-1),X.onUploadCallback()}function B(U){return U.isInterleavedBufferAttribute&&(U=U.data),f.get(U)}function I(U){U.isInterleavedBufferAttribute&&(U=U.data);const X=f.get(U);X&&(C.deleteBuffer(X.buffer),f.delete(U))}function D(U,X){if(U.isGLBufferAttribute){const Z=f.get(U);(!Z||Z.version<U.version)&&f.set(U,{buffer:U.buffer,type:U.type,bytesPerElement:U.elementSize,version:U.version});return}U.isInterleavedBufferAttribute&&(U=U.data);const q=f.get(U);q===void 0?f.set(U,y(U,X)):q.version<U.version&&(M(q.buffer,U,X),q.version=U.version)}return{get:B,remove:I,update:D}}class gu extends xi{constructor(e=1,o=1,f=1,y=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:o,widthSegments:f,heightSegments:y};const M=e/2,B=o/2,I=Math.floor(f),D=Math.floor(y),U=I+1,X=D+1,q=e/I,Z=o/D,te=[],ie=[],fe=[],$=[];for(let re=0;re<X;re++){const be=re*Z-B;for(let he=0;he<U;he++){const Se=he*q-M;ie.push(Se,-be,0),fe.push(0,0,1),$.push(he/I),$.push(1-re/D)}}for(let re=0;re<D;re++)for(let be=0;be<I;be++){const he=be+U*re,Se=be+U*(re+1),Ue=be+1+U*(re+1),Xe=be+1+U*re;te.push(he,Se,Xe),te.push(Se,Ue,Xe)}this.setIndex(te),this.setAttribute("position",new yr(ie,3)),this.setAttribute("normal",new yr(fe,3)),this.setAttribute("uv",new yr($,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gu(e.width,e.height,e.widthSegments,e.heightSegments)}}var wp=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,of=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Sc=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Tp=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nd=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,rh=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rd=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,id=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,al=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,mu=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ll=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,sf=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cl=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lg=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,af=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,cg=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Bm=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,wc=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pg=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Gl=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Bp=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Rp=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,od=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ug=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,lf=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sd=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,u1=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dg=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ip="gl_FragColor = linearToOutputTexel( gl_FragColor );",hg=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Jc=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fg=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,qc=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zc=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,na=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Rm=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gg=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Im=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ih=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mg=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ad=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,d1=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cl=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ag=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Fm=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Nl=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,cf=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Au=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,oh=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sh=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pf=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,yg=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vg=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_g=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Eg=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,bg=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Tc=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,h1=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ah=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,x=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,S=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,N=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,V=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ne=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,de=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Je=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Et=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,$t=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,En=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,vr=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,hi=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Vr=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yo=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lr=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ra=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ac=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Ot=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,xt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Ht=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dr=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Fr=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ri=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fi=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,io=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ra=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,oo=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Bc=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,f1=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ty=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,g1=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Wb=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Vb=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Qb=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,l_=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Kb=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,c_=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,p_=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rs=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ny=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ry=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,u_=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,d_=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,h_=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ia=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,iy=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ci={alphahash_fragment:wp,alphahash_pars_fragment:of,alphamap_fragment:Sc,alphamap_pars_fragment:Tp,alphatest_fragment:nd,alphatest_pars_fragment:rh,aomap_fragment:rd,aomap_pars_fragment:id,begin_vertex:al,beginnormal_vertex:mu,bsdfs:ll,iridescence_fragment:sf,bumpmap_pars_fragment:cl,clipping_planes_fragment:lg,clipping_planes_pars_fragment:af,clipping_planes_pars_vertex:cg,clipping_planes_vertex:Bm,color_fragment:wc,color_pars_fragment:pg,color_pars_vertex:Gl,color_vertex:Bp,common:Rp,cube_uv_reflection_fragment:od,defaultnormal_vertex:ug,displacementmap_pars_vertex:lf,displacementmap_vertex:sd,emissivemap_fragment:u1,emissivemap_pars_fragment:dg,colorspace_fragment:Ip,colorspace_pars_fragment:hg,envmap_fragment:Jc,envmap_common_pars_fragment:fg,envmap_pars_fragment:qc,envmap_pars_vertex:Zc,envmap_physical_pars_fragment:Nl,envmap_vertex:na,fog_vertex:Rm,fog_pars_vertex:gg,fog_fragment:Im,fog_pars_fragment:ih,gradientmap_pars_fragment:mg,lightmap_fragment:ad,lightmap_pars_fragment:d1,lights_lambert_fragment:Cl,lights_lambert_pars_fragment:Ag,lights_pars_begin:Fm,lights_toon_fragment:cf,lights_toon_pars_fragment:Au,lights_phong_fragment:oh,lights_phong_pars_fragment:sh,lights_physical_fragment:pf,lights_physical_pars_fragment:yg,lights_fragment_begin:vg,lights_fragment_maps:_g,lights_fragment_end:Eg,logdepthbuf_fragment:bg,logdepthbuf_pars_fragment:Tc,logdepthbuf_pars_vertex:h1,logdepthbuf_vertex:ah,map_fragment:x,map_pars_fragment:S,map_particle_fragment:N,map_particle_pars_fragment:V,metalnessmap_fragment:ne,metalnessmap_pars_fragment:de,morphcolor_vertex:Je,morphnormal_vertex:Et,morphtarget_pars_vertex:$t,morphtarget_vertex:En,normal_fragment_begin:vr,normal_fragment_maps:hi,normal_pars_fragment:Vr,normal_pars_vertex:yo,normal_vertex:Lr,normalmap_pars_fragment:Ra,clearcoat_normal_fragment_begin:ac,clearcoat_normal_fragment_maps:Ot,clearcoat_pars_fragment:xt,iridescence_pars_fragment:Ht,opaque_fragment:dr,packing:Fr,premultiplied_alpha_fragment:Ri,project_vertex:fi,dithering_fragment:io,dithering_pars_fragment:ra,roughnessmap_fragment:oo,roughnessmap_pars_fragment:Bc,shadowmap_pars_fragment:f1,shadowmap_pars_vertex:ty,shadowmap_vertex:g1,shadowmask_pars_fragment:Wb,skinbase_vertex:Vb,skinning_pars_vertex:Qb,skinning_vertex:l_,skinnormal_vertex:Kb,specularmap_fragment:c_,specularmap_pars_fragment:p_,tonemapping_fragment:rs,tonemapping_pars_fragment:ny,transmission_fragment:ry,transmission_pars_fragment:u_,uv_pars_fragment:d_,uv_pars_vertex:h_,uv_vertex:ia,worldpos_vertex:iy,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},sr={common:{diffuse:{value:new fr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yi},alphaMap:{value:null},alphaMapTransform:{value:new yi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yi}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yi},normalScale:{value:new gn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yi},alphaTest:{value:0},uvTransform:{value:new yi}},sprite:{diffuse:{value:new fr(16777215)},opacity:{value:1},center:{value:new gn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yi},alphaMap:{value:null},alphaMapTransform:{value:new yi},alphaTest:{value:0}}},Ha={basic:{uniforms:_s([sr.common,sr.specularmap,sr.envmap,sr.aomap,sr.lightmap,sr.fog]),vertexShader:Ci.meshbasic_vert,fragmentShader:Ci.meshbasic_frag},lambert:{uniforms:_s([sr.common,sr.specularmap,sr.envmap,sr.aomap,sr.lightmap,sr.emissivemap,sr.bumpmap,sr.normalmap,sr.displacementmap,sr.fog,sr.lights,{emissive:{value:new fr(0)}}]),vertexShader:Ci.meshlambert_vert,fragmentShader:Ci.meshlambert_frag},phong:{uniforms:_s([sr.common,sr.specularmap,sr.envmap,sr.aomap,sr.lightmap,sr.emissivemap,sr.bumpmap,sr.normalmap,sr.displacementmap,sr.fog,sr.lights,{emissive:{value:new fr(0)},specular:{value:new fr(1118481)},shininess:{value:30}}]),vertexShader:Ci.meshphong_vert,fragmentShader:Ci.meshphong_frag},standard:{uniforms:_s([sr.common,sr.envmap,sr.aomap,sr.lightmap,sr.emissivemap,sr.bumpmap,sr.normalmap,sr.displacementmap,sr.roughnessmap,sr.metalnessmap,sr.fog,sr.lights,{emissive:{value:new fr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ci.meshphysical_vert,fragmentShader:Ci.meshphysical_frag},toon:{uniforms:_s([sr.common,sr.aomap,sr.lightmap,sr.emissivemap,sr.bumpmap,sr.normalmap,sr.displacementmap,sr.gradientmap,sr.fog,sr.lights,{emissive:{value:new fr(0)}}]),vertexShader:Ci.meshtoon_vert,fragmentShader:Ci.meshtoon_frag},matcap:{uniforms:_s([sr.common,sr.bumpmap,sr.normalmap,sr.displacementmap,sr.fog,{matcap:{value:null}}]),vertexShader:Ci.meshmatcap_vert,fragmentShader:Ci.meshmatcap_frag},points:{uniforms:_s([sr.points,sr.fog]),vertexShader:Ci.points_vert,fragmentShader:Ci.points_frag},dashed:{uniforms:_s([sr.common,sr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ci.linedashed_vert,fragmentShader:Ci.linedashed_frag},depth:{uniforms:_s([sr.common,sr.displacementmap]),vertexShader:Ci.depth_vert,fragmentShader:Ci.depth_frag},normal:{uniforms:_s([sr.common,sr.bumpmap,sr.normalmap,sr.displacementmap,{opacity:{value:1}}]),vertexShader:Ci.meshnormal_vert,fragmentShader:Ci.meshnormal_frag},sprite:{uniforms:_s([sr.sprite,sr.fog]),vertexShader:Ci.sprite_vert,fragmentShader:Ci.sprite_frag},background:{uniforms:{uvTransform:{value:new yi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ci.background_vert,fragmentShader:Ci.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ci.backgroundCube_vert,fragmentShader:Ci.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ci.cube_vert,fragmentShader:Ci.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ci.equirect_vert,fragmentShader:Ci.equirect_frag},distanceRGBA:{uniforms:_s([sr.common,sr.displacementmap,{referencePosition:{value:new Qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ci.distanceRGBA_vert,fragmentShader:Ci.distanceRGBA_frag},shadow:{uniforms:_s([sr.lights,sr.fog,{color:{value:new fr(0)},opacity:{value:1}}]),vertexShader:Ci.shadow_vert,fragmentShader:Ci.shadow_frag}};Ha.physical={uniforms:_s([Ha.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yi},clearcoatNormalScale:{value:new gn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yi},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yi},sheen:{value:0},sheenColor:{value:new fr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yi},transmissionSamplerSize:{value:new gn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yi},attenuationDistance:{value:0},attenuationColor:{value:new fr(0)},specularColor:{value:new fr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yi},anisotropyVector:{value:new gn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yi}}]),vertexShader:Ci.meshphysical_vert,fragmentShader:Ci.meshphysical_frag};const xg={r:0,b:0,g:0};function C_(C,e,o,f,y,M,B){const I=new fr(0);let D=M===!0?0:1,U,X,q=null,Z=0,te=null;function ie($,re){let be=!1,he=re.isScene===!0?re.background:null;switch(he&&he.isTexture&&(he=(re.backgroundBlurriness>0?o:e).get(he)),he===null?fe(I,D):he&&he.isColor&&(fe(he,1),be=!0),C.xr.getEnvironmentBlendMode()){case"opaque":be=!0;break;case"additive":f.buffers.color.setClear(0,0,0,1,B),be=!0;break;case"alpha-blend":f.buffers.color.setClear(0,0,0,0,B),be=!0;break}(C.autoClear||be)&&C.clear(C.autoClearColor,C.autoClearDepth,C.autoClearStencil),he&&(he.isCubeTexture||he.mapping===ds)?(X===void 0&&(X=new Bs(new zl(1,1,1),new Yr({name:"BackgroundCubeMaterial",uniforms:Xc(Ha.backgroundCube.uniforms),vertexShader:Ha.backgroundCube.vertexShader,fragmentShader:Ha.backgroundCube.fragmentShader,side:Ve,depthTest:!1,depthWrite:!1,fog:!1})),X.geometry.deleteAttribute("normal"),X.geometry.deleteAttribute("uv"),X.onBeforeRender=function(Xe,et,st){this.matrixWorld.copyPosition(st.matrixWorld)},Object.defineProperty(X.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),y.update(X)),X.material.uniforms.envMap.value=he,X.material.uniforms.flipEnvMap.value=he.isCubeTexture&&he.isRenderTargetTexture===!1?-1:1,X.material.uniforms.backgroundBlurriness.value=re.backgroundBlurriness,X.material.uniforms.backgroundIntensity.value=re.backgroundIntensity,X.material.toneMapped=he.colorSpace!==ai,(q!==he||Z!==he.version||te!==C.toneMapping)&&(X.material.needsUpdate=!0,q=he,Z=he.version,te=C.toneMapping),X.layers.enableAll(),$.unshift(X,X.geometry,X.material,0,0,null)):he&&he.isTexture&&(U===void 0&&(U=new Bs(new gu(2,2),new Yr({name:"BackgroundMaterial",uniforms:Xc(Ha.background.uniforms),vertexShader:Ha.background.vertexShader,fragmentShader:Ha.background.fragmentShader,side:nt,depthTest:!1,depthWrite:!1,fog:!1})),U.geometry.deleteAttribute("normal"),Object.defineProperty(U.material,"map",{get:function(){return this.uniforms.t2D.value}}),y.update(U)),U.material.uniforms.t2D.value=he,U.material.uniforms.backgroundIntensity.value=re.backgroundIntensity,U.material.toneMapped=he.colorSpace!==ai,he.matrixAutoUpdate===!0&&he.updateMatrix(),U.material.uniforms.uvTransform.value.copy(he.matrix),(q!==he||Z!==he.version||te!==C.toneMapping)&&(U.material.needsUpdate=!0,q=he,Z=he.version,te=C.toneMapping),U.layers.enableAll(),$.unshift(U,U.geometry,U.material,0,0,null))}function fe($,re){$.getRGB(xg,th(C)),f.buffers.color.setClear(xg.r,xg.g,xg.b,re,B)}return{getClearColor:function(){return I},setClearColor:function($,re=1){I.set($),D=re,fe(I,D)},getClearAlpha:function(){return D},setClearAlpha:function($){D=$,fe(I,D)},render:ie}}function S_(C,e,o,f){const y=C.getParameter(C.MAX_VERTEX_ATTRIBS),M=f.isWebGL2?null:e.get("OES_vertex_array_object"),B=f.isWebGL2||M!==null,I={},D=$(null);let U=D,X=!1;function q(Ut,Xt,xn,un,fn){let jt=!1;if(B){const Tn=fe(un,xn,Xt);U!==Tn&&(U=Tn,te(U.object)),jt=re(Ut,un,xn,fn),jt&&be(Ut,un,xn,fn)}else{const Tn=Xt.wireframe===!0;(U.geometry!==un.id||U.program!==xn.id||U.wireframe!==Tn)&&(U.geometry=un.id,U.program=xn.id,U.wireframe=Tn,jt=!0)}fn!==null&&o.update(fn,C.ELEMENT_ARRAY_BUFFER),(jt||X)&&(X=!1,st(Ut,Xt,xn,un),fn!==null&&C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,o.get(fn).buffer))}function Z(){return f.isWebGL2?C.createVertexArray():M.createVertexArrayOES()}function te(Ut){return f.isWebGL2?C.bindVertexArray(Ut):M.bindVertexArrayOES(Ut)}function ie(Ut){return f.isWebGL2?C.deleteVertexArray(Ut):M.deleteVertexArrayOES(Ut)}function fe(Ut,Xt,xn){const un=xn.wireframe===!0;let fn=I[Ut.id];fn===void 0&&(fn={},I[Ut.id]=fn);let jt=fn[Xt.id];jt===void 0&&(jt={},fn[Xt.id]=jt);let Tn=jt[un];return Tn===void 0&&(Tn=$(Z()),jt[un]=Tn),Tn}function $(Ut){const Xt=[],xn=[],un=[];for(let fn=0;fn<y;fn++)Xt[fn]=0,xn[fn]=0,un[fn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Xt,enabledAttributes:xn,attributeDivisors:un,object:Ut,attributes:{},index:null}}function re(Ut,Xt,xn,un){const fn=U.attributes,jt=Xt.attributes;let Tn=0;const Lt=xn.getAttributes();for(const dn in Lt)if(Lt[dn].location>=0){const cn=fn[dn];let yt=jt[dn];if(yt===void 0&&(dn==="instanceMatrix"&&Ut.instanceMatrix&&(yt=Ut.instanceMatrix),dn==="instanceColor"&&Ut.instanceColor&&(yt=Ut.instanceColor)),cn===void 0||cn.attribute!==yt||yt&&cn.data!==yt.data)return!0;Tn++}return U.attributesNum!==Tn||U.index!==un}function be(Ut,Xt,xn,un){const fn={},jt=Xt.attributes;let Tn=0;const Lt=xn.getAttributes();for(const dn in Lt)if(Lt[dn].location>=0){let cn=jt[dn];cn===void 0&&(dn==="instanceMatrix"&&Ut.instanceMatrix&&(cn=Ut.instanceMatrix),dn==="instanceColor"&&Ut.instanceColor&&(cn=Ut.instanceColor));const yt={};yt.attribute=cn,cn&&cn.data&&(yt.data=cn.data),fn[dn]=yt,Tn++}U.attributes=fn,U.attributesNum=Tn,U.index=un}function he(){const Ut=U.newAttributes;for(let Xt=0,xn=Ut.length;Xt<xn;Xt++)Ut[Xt]=0}function Se(Ut){Ue(Ut,0)}function Ue(Ut,Xt){const xn=U.newAttributes,un=U.enabledAttributes,fn=U.attributeDivisors;xn[Ut]=1,un[Ut]===0&&(C.enableVertexAttribArray(Ut),un[Ut]=1),fn[Ut]!==Xt&&((f.isWebGL2?C:e.get("ANGLE_instanced_arrays"))[f.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ut,Xt),fn[Ut]=Xt)}function Xe(){const Ut=U.newAttributes,Xt=U.enabledAttributes;for(let xn=0,un=Xt.length;xn<un;xn++)Xt[xn]!==Ut[xn]&&(C.disableVertexAttribArray(xn),Xt[xn]=0)}function et(Ut,Xt,xn,un,fn,jt,Tn){Tn===!0?C.vertexAttribIPointer(Ut,Xt,xn,fn,jt):C.vertexAttribPointer(Ut,Xt,xn,un,fn,jt)}function st(Ut,Xt,xn,un){if(f.isWebGL2===!1&&(Ut.isInstancedMesh||un.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;he();const fn=un.attributes,jt=xn.getAttributes(),Tn=Xt.defaultAttributeValues;for(const Lt in jt){const dn=jt[Lt];if(dn.location>=0){let tr=fn[Lt];if(tr===void 0&&(Lt==="instanceMatrix"&&Ut.instanceMatrix&&(tr=Ut.instanceMatrix),Lt==="instanceColor"&&Ut.instanceColor&&(tr=Ut.instanceColor)),tr!==void 0){const cn=tr.normalized,yt=tr.itemSize,Nr=o.get(tr);if(Nr===void 0)continue;const Ur=Nr.buffer,Dr=Nr.type,Wi=Nr.bytesPerElement,os=f.isWebGL2===!0&&(Dr===C.INT||Dr===C.UNSIGNED_INT||tr.gpuType===Ro);if(tr.isInterleavedBufferAttribute){const oi=tr.data,ot=oi.stride,zn=tr.offset;if(oi.isInstancedInterleavedBuffer){for(let Kt=0;Kt<dn.locationSize;Kt++)Ue(dn.location+Kt,oi.meshPerAttribute);Ut.isInstancedMesh!==!0&&un._maxInstanceCount===void 0&&(un._maxInstanceCount=oi.meshPerAttribute*oi.count)}else for(let Kt=0;Kt<dn.locationSize;Kt++)Se(dn.location+Kt);C.bindBuffer(C.ARRAY_BUFFER,Ur);for(let Kt=0;Kt<dn.locationSize;Kt++)et(dn.location+Kt,yt/dn.locationSize,Dr,cn,ot*Wi,(zn+yt/dn.locationSize*Kt)*Wi,os)}else{if(tr.isInstancedBufferAttribute){for(let oi=0;oi<dn.locationSize;oi++)Ue(dn.location+oi,tr.meshPerAttribute);Ut.isInstancedMesh!==!0&&un._maxInstanceCount===void 0&&(un._maxInstanceCount=tr.meshPerAttribute*tr.count)}else for(let oi=0;oi<dn.locationSize;oi++)Se(dn.location+oi);C.bindBuffer(C.ARRAY_BUFFER,Ur);for(let oi=0;oi<dn.locationSize;oi++)et(dn.location+oi,yt/dn.locationSize,Dr,cn,yt*Wi,yt/dn.locationSize*oi*Wi,os)}}else if(Tn!==void 0){const cn=Tn[Lt];if(cn!==void 0)switch(cn.length){case 2:C.vertexAttrib2fv(dn.location,cn);break;case 3:C.vertexAttrib3fv(dn.location,cn);break;case 4:C.vertexAttrib4fv(dn.location,cn);break;default:C.vertexAttrib1fv(dn.location,cn)}}}}Xe()}function we(){Mn();for(const Ut in I){const Xt=I[Ut];for(const xn in Xt){const un=Xt[xn];for(const fn in un)ie(un[fn].object),delete un[fn];delete Xt[xn]}delete I[Ut]}}function We(Ut){if(I[Ut.id]===void 0)return;const Xt=I[Ut.id];for(const xn in Xt){const un=Xt[xn];for(const fn in un)ie(un[fn].object),delete un[fn];delete Xt[xn]}delete I[Ut.id]}function Yt(Ut){for(const Xt in I){const xn=I[Xt];if(xn[Ut.id]===void 0)continue;const un=xn[Ut.id];for(const fn in un)ie(un[fn].object),delete un[fn];delete xn[Ut.id]}}function Mn(){Gt(),X=!0,U!==D&&(U=D,te(U.object))}function Gt(){D.geometry=null,D.program=null,D.wireframe=!1}return{setup:q,reset:Mn,resetDefaultState:Gt,dispose:we,releaseStatesOfGeometry:We,releaseStatesOfProgram:Yt,initAttributes:he,enableAttribute:Se,disableUnusedAttributes:Xe}}function Cg(C,e,o,f){const y=f.isWebGL2;let M;function B(U){M=U}function I(U,X){C.drawArrays(M,U,X),o.update(X,M,1)}function D(U,X,q){if(q===0)return;let Z,te;if(y)Z=C,te="drawArraysInstanced";else if(Z=e.get("ANGLE_instanced_arrays"),te="drawArraysInstancedANGLE",Z===null){w.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Z[te](M,U,X,q),o.update(X,M,q)}this.setMode=B,this.render=I,this.renderInstances=D}function w_(C,e,o){let f;function y(){if(f!==void 0)return f;if(e.has("EXT_texture_filter_anisotropic")===!0){const et=e.get("EXT_texture_filter_anisotropic");f=C.getParameter(et.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else f=0;return f}function M(et){if(et==="highp"){if(C.getShaderPrecisionFormat(C.VERTEX_SHADER,C.HIGH_FLOAT).precision>0&&C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.HIGH_FLOAT).precision>0)return"highp";et="mediump"}return et==="mediump"&&C.getShaderPrecisionFormat(C.VERTEX_SHADER,C.MEDIUM_FLOAT).precision>0&&C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const B=typeof WebGL2RenderingContext!="undefined"&&C.constructor.name==="WebGL2RenderingContext";let I=o.precision!==void 0?o.precision:"highp";const D=M(I);D!==I&&(w.warn("THREE.WebGLRenderer:",I,"not supported, using",D,"instead."),I=D);const U=B||e.has("WEBGL_draw_buffers"),X=o.logarithmicDepthBuffer===!0,q=C.getParameter(C.MAX_TEXTURE_IMAGE_UNITS),Z=C.getParameter(C.MAX_VERTEX_TEXTURE_IMAGE_UNITS),te=C.getParameter(C.MAX_TEXTURE_SIZE),ie=C.getParameter(C.MAX_CUBE_MAP_TEXTURE_SIZE),fe=C.getParameter(C.MAX_VERTEX_ATTRIBS),$=C.getParameter(C.MAX_VERTEX_UNIFORM_VECTORS),re=C.getParameter(C.MAX_VARYING_VECTORS),be=C.getParameter(C.MAX_FRAGMENT_UNIFORM_VECTORS),he=Z>0,Se=B||e.has("OES_texture_float"),Ue=he&&Se,Xe=B?C.getParameter(C.MAX_SAMPLES):0;return{isWebGL2:B,drawBuffers:U,getMaxAnisotropy:y,getMaxPrecision:M,precision:I,logarithmicDepthBuffer:X,maxTextures:q,maxVertexTextures:Z,maxTextureSize:te,maxCubemapSize:ie,maxAttributes:fe,maxVertexUniforms:$,maxVaryings:re,maxFragmentUniforms:be,vertexTextures:he,floatFragmentTextures:Se,floatVertexTextures:Ue,maxSamples:Xe}}function ay(C){const e=this;let o=null,f=0,y=!1,M=!1;const B=new So,I=new yi,D={value:null,needsUpdate:!1};this.uniform=D,this.numPlanes=0,this.numIntersection=0,this.init=function(q,Z){const te=q.length!==0||Z||f!==0||y;return y=Z,f=q.length,te},this.beginShadows=function(){M=!0,X(null)},this.endShadows=function(){M=!1},this.setGlobalState=function(q,Z){o=X(q,Z,0)},this.setState=function(q,Z,te){const ie=q.clippingPlanes,fe=q.clipIntersection,$=q.clipShadows,re=C.get(q);if(!y||ie===null||ie.length===0||M&&!$)M?X(null):U();else{const be=M?0:f,he=be*4;let Se=re.clippingState||null;D.value=Se,Se=X(ie,Z,he,te);for(let Ue=0;Ue!==he;++Ue)Se[Ue]=o[Ue];re.clippingState=Se,this.numIntersection=fe?this.numPlanes:0,this.numPlanes+=be}};function U(){D.value!==o&&(D.value=o,D.needsUpdate=f>0),e.numPlanes=f,e.numIntersection=0}function X(q,Z,te,ie){const fe=q!==null?q.length:0;let $=null;if(fe!==0){if($=D.value,ie!==!0||$===null){const re=te+fe*4,be=Z.matrixWorldInverse;I.getNormalMatrix(be),($===null||$.length<re)&&($=new Float32Array(re));for(let he=0,Se=te;he!==fe;++he,Se+=4)B.copy(q[he]).applyMatrix4(be,I),B.normal.toArray($,Se),$[Se+3]=B.constant}D.value=$,D.needsUpdate=!0}return e.numPlanes=fe,e.numIntersection=0,$}}function T_(C){let e=new WeakMap;function o(B,I){return I===zi?B.mapping=Ls:I===no&&(B.mapping=as),B}function f(B){if(B&&B.isTexture&&B.isRenderTargetTexture===!1){const I=B.mapping;if(I===zi||I===no)if(e.has(B)){const D=e.get(B).texture;return o(D,B.mapping)}else{const D=B.image;if(D&&D.height>0){const U=new td(D.height/2);return U.fromEquirectangularTexture(C,B),e.set(B,U),B.addEventListener("dispose",y),o(U.texture,B.mapping)}else return null}}return B}function y(B){const I=B.target;I.removeEventListener("dispose",y);const D=e.get(I);D!==void 0&&(e.delete(I),D.dispose())}function M(){e=new WeakMap}return{get:f,dispose:M}}class Dm extends Co{constructor(e=-1,o=1,f=1,y=-1,M=.1,B=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=o,this.top=f,this.bottom=y,this.near=M,this.far=B,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,o,f,y,M,B){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=f,this.view.offsetY=y,this.view.width=M,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,y=(this.top+this.bottom)/2;let M=f-e,B=f+e,I=y+o,D=y-o;if(this.view!==null&&this.view.enabled){const U=(this.right-this.left)/this.view.fullWidth/this.zoom,X=(this.top-this.bottom)/this.view.fullHeight/this.zoom;M+=U*this.view.offsetX,B=M+U*this.view.width,I-=X*this.view.offsetY,D=I-X*this.view.height}this.projectionMatrix.makeOrthographic(M,B,I,D,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const o=super.toJSON(e);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,this.view!==null&&(o.object.view=Object.assign({},this.view)),o}}const uf=4,lc=[.125,.215,.35,.446,.526,.582],lh=20,y1=new Dm,ly=new fr;let v1=null;const ch=(1+Math.sqrt(5))/2,df=1/ch,_1=[new Qe(1,1,1),new Qe(-1,1,1),new Qe(1,1,-1),new Qe(-1,1,-1),new Qe(0,ch,df),new Qe(0,ch,-df),new Qe(df,0,ch),new Qe(-df,0,ch),new Qe(ch,df,0),new Qe(-ch,df,0)];class E1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,o=0,f=.1,y=100){v1=this._renderer.getRenderTarget(),this._setSize(256);const M=this._allocateTargets();return M.depthBuffer=!0,this._sceneToCubeUV(e,f,y,M),o>0&&this._blur(M,0,0,o),this._applyPMREM(M),this._cleanup(M),M}fromEquirectangular(e,o=null){return this._fromTexture(e,o)}fromCubemap(e,o=null){return this._fromTexture(e,o)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dy(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=uy(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(v1),e.scissorTest=!1,Pm(e,0,0,e.width,e.height)}_fromTexture(e,o){e.mapping===Ls||e.mapping===as?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),v1=this._renderer.getRenderTarget();const f=o||this._allocateTargets();return this._textureToCubeUV(e,f),this._applyPMREM(f),this._cleanup(f),f}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,f={magFilter:Zi,minFilter:Zi,generateMipmaps:!1,type:ba,format:Ze,colorSpace:Xl,depthBuffer:!1},y=py(e,o,f);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==o){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=py(e,o,f);const{_lodMax:M}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cy(M)),this._blurMaterial=B_(M,e,o)}return y}_compileMaterial(e){const o=new Bs(this._lodPlanes[0],e);this._renderer.compile(o,y1)}_sceneToCubeUV(e,o,f,y){const I=new Li(90,1,o,f),D=[1,-1,1,1,1,1],U=[1,1,1,-1,-1,-1],X=this._renderer,q=X.autoClear,Z=X.toneMapping;X.getClearColor(ly),X.toneMapping=co,X.autoClear=!1;const te=new nc({name:"PMREM.Background",side:Ve,depthWrite:!1,depthTest:!1}),ie=new Bs(new zl,te);let fe=!1;const $=e.background;$?$.isColor&&(te.color.copy($),e.background=null,fe=!0):(te.color.copy(ly),fe=!0);for(let re=0;re<6;re++){const be=re%3;be===0?(I.up.set(0,D[re],0),I.lookAt(U[re],0,0)):be===1?(I.up.set(0,0,D[re]),I.lookAt(0,U[re],0)):(I.up.set(0,D[re],0),I.lookAt(0,0,U[re]));const he=this._cubeSize;Pm(y,be*he,re>2?he:0,he,he),X.setRenderTarget(y),fe&&X.render(ie,I),X.render(e,I)}ie.geometry.dispose(),ie.material.dispose(),X.toneMapping=Z,X.autoClear=q,e.background=$}_textureToCubeUV(e,o){const f=this._renderer,y=e.mapping===Ls||e.mapping===as;y?(this._cubemapMaterial===null&&(this._cubemapMaterial=dy()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=uy());const M=y?this._cubemapMaterial:this._equirectMaterial,B=new Bs(this._lodPlanes[0],M),I=M.uniforms;I.envMap.value=e;const D=this._cubeSize;Pm(o,0,0,3*D,2*D),f.setRenderTarget(o),f.render(B,y1)}_applyPMREM(e){const o=this._renderer,f=o.autoClear;o.autoClear=!1;for(let y=1;y<this._lodPlanes.length;y++){const M=Math.sqrt(this._sigmas[y]*this._sigmas[y]-this._sigmas[y-1]*this._sigmas[y-1]),B=_1[(y-1)%_1.length];this._blur(e,y-1,y,M,B)}o.autoClear=f}_blur(e,o,f,y,M){const B=this._pingPongRenderTarget;this._halfBlur(e,B,o,f,y,"latitudinal",M),this._halfBlur(B,e,f,f,y,"longitudinal",M)}_halfBlur(e,o,f,y,M,B,I){const D=this._renderer,U=this._blurMaterial;B!=="latitudinal"&&B!=="longitudinal"&&w.error("blur direction must be either latitudinal or longitudinal!");const X=3,q=new Bs(this._lodPlanes[y],U),Z=U.uniforms,te=this._sizeLods[f]-1,ie=isFinite(M)?Math.PI/(2*te):2*Math.PI/(2*lh-1),fe=M/ie,$=isFinite(M)?1+Math.floor(X*fe):lh;$>lh&&w.warn(`sigmaRadians, ${M}, is too large and will clip, as it requested ${$} samples when the maximum is set to ${lh}`);const re=[];let be=0;for(let et=0;et<lh;++et){const st=et/fe,we=Math.exp(-st*st/2);re.push(we),et===0?be+=we:et<$&&(be+=2*we)}for(let et=0;et<re.length;et++)re[et]=re[et]/be;Z.envMap.value=e.texture,Z.samples.value=$,Z.weights.value=re,Z.latitudinal.value=B==="latitudinal",I&&(Z.poleAxis.value=I);const{_lodMax:he}=this;Z.dTheta.value=ie,Z.mipInt.value=he-f;const Se=this._sizeLods[y],Ue=3*Se*(y>he-uf?y-he+uf:0),Xe=4*(this._cubeSize-Se);Pm(o,Ue,Xe,3*Se,2*Se),D.setRenderTarget(o),D.render(q,y1)}}function cy(C){const e=[],o=[],f=[];let y=C;const M=C-uf+1+lc.length;for(let B=0;B<M;B++){const I=Math.pow(2,y);o.push(I);let D=1/I;B>C-uf?D=lc[B-C+uf-1]:B===0&&(D=0),f.push(D);const U=1/(I-2),X=-U,q=1+U,Z=[X,X,q,X,q,q,X,X,q,q,X,q],te=6,ie=6,fe=3,$=2,re=1,be=new Float32Array(fe*ie*te),he=new Float32Array($*ie*te),Se=new Float32Array(re*ie*te);for(let Xe=0;Xe<te;Xe++){const et=Xe%3*2/3-1,st=Xe>2?0:-1,we=[et,st,0,et+2/3,st,0,et+2/3,st+1,0,et,st,0,et+2/3,st+1,0,et,st+1,0];be.set(we,fe*ie*Xe),he.set(Z,$*ie*Xe);const We=[Xe,Xe,Xe,Xe,Xe,Xe];Se.set(We,re*ie*Xe)}const Ue=new xi;Ue.setAttribute("position",new ao(be,fe)),Ue.setAttribute("uv",new ao(he,$)),Ue.setAttribute("faceIndex",new ao(Se,re)),e.push(Ue),y>uf&&y--}return{lodPlanes:e,sizeLods:o,sigmas:f}}function py(C,e,o){const f=new Sa(C,e,o);return f.texture.mapping=ds,f.texture.name="PMREM.cubeUv",f.scissorTest=!0,f}function Pm(C,e,o,f,y){C.viewport.set(e,o,f,y),C.scissor.set(e,o,f,y)}function B_(C,e,o){const f=new Float32Array(lh),y=new Qe(0,1,0);return new Yr({name:"SphericalGaussianBlur",defines:{n:lh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${C}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:f},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:y}},vertexShader:b1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ct,depthTest:!1,depthWrite:!1})}function uy(){return new Yr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:b1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ct,depthTest:!1,depthWrite:!1})}function dy(){return new Yr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:b1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ct,depthTest:!1,depthWrite:!1})}function b1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function R_(C){let e=new WeakMap,o=null;function f(I){if(I&&I.isTexture){const D=I.mapping,U=D===zi||D===no,X=D===Ls||D===as;if(U||X)if(I.isRenderTargetTexture&&I.needsPMREMUpdate===!0){I.needsPMREMUpdate=!1;let q=e.get(I);return o===null&&(o=new E1(C)),q=U?o.fromEquirectangular(I,q):o.fromCubemap(I,q),e.set(I,q),q.texture}else{if(e.has(I))return e.get(I).texture;{const q=I.image;if(U&&q&&q.height>0||X&&q&&y(q)){o===null&&(o=new E1(C));const Z=U?o.fromEquirectangular(I):o.fromCubemap(I);return e.set(I,Z),I.addEventListener("dispose",M),Z.texture}else return null}}}return I}function y(I){let D=0;const U=6;for(let X=0;X<U;X++)I[X]!==void 0&&D++;return D===U}function M(I){const D=I.target;D.removeEventListener("dispose",M);const U=e.get(D);U!==void 0&&(e.delete(D),U.dispose())}function B(){e=new WeakMap,o!==null&&(o.dispose(),o=null)}return{get:f,dispose:B}}function I_(C){const e={};function o(f){if(e[f]!==void 0)return e[f];let y;switch(f){case"WEBGL_depth_texture":y=C.getExtension("WEBGL_depth_texture")||C.getExtension("MOZ_WEBGL_depth_texture")||C.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=C.getExtension("WEBGL_compressed_texture_s3tc")||C.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=C.getExtension("WEBGL_compressed_texture_pvrtc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:y=C.getExtension(f)}return e[f]=y,y}return{has:function(f){return o(f)!==null},init:function(f){f.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(f){const y=o(f);return y===null&&w.warn("THREE.WebGLRenderer: "+f+" extension not supported."),y}}}function F_(C,e,o,f){const y={},M=new WeakMap;function B(q){const Z=q.target;Z.index!==null&&e.remove(Z.index);for(const ie in Z.attributes)e.remove(Z.attributes[ie]);for(const ie in Z.morphAttributes){const fe=Z.morphAttributes[ie];for(let $=0,re=fe.length;$<re;$++)e.remove(fe[$])}Z.removeEventListener("dispose",B),delete y[Z.id];const te=M.get(Z);te&&(e.remove(te),M.delete(Z)),f.releaseStatesOfGeometry(Z),Z.isInstancedBufferGeometry===!0&&delete Z._maxInstanceCount,o.memory.geometries--}function I(q,Z){return y[Z.id]===!0||(Z.addEventListener("dispose",B),y[Z.id]=!0,o.memory.geometries++),Z}function D(q){const Z=q.attributes;for(const ie in Z)e.update(Z[ie],C.ARRAY_BUFFER);const te=q.morphAttributes;for(const ie in te){const fe=te[ie];for(let $=0,re=fe.length;$<re;$++)e.update(fe[$],C.ARRAY_BUFFER)}}function U(q){const Z=[],te=q.index,ie=q.attributes.position;let fe=0;if(te!==null){const be=te.array;fe=te.version;for(let he=0,Se=be.length;he<Se;he+=3){const Ue=be[he+0],Xe=be[he+1],et=be[he+2];Z.push(Ue,Xe,Xe,et,et,Ue)}}else{const be=ie.array;fe=ie.version;for(let he=0,Se=be.length/3-1;he<Se;he+=3){const Ue=he+0,Xe=he+1,et=he+2;Z.push(Ue,Xe,Xe,et,et,Ue)}}const $=new(tg(Z)?er:Qc)(Z,1);$.version=fe;const re=M.get(q);re&&e.remove(re),M.set(q,$)}function X(q){const Z=M.get(q);if(Z){const te=q.index;te!==null&&Z.version<te.version&&U(q)}else U(q);return M.get(q)}return{get:I,update:D,getWireframeAttribute:X}}function O_(C,e,o,f){const y=f.isWebGL2;let M;function B(Z){M=Z}let I,D;function U(Z){I=Z.type,D=Z.bytesPerElement}function X(Z,te){C.drawElements(M,te,I,Z*D),o.update(te,M,1)}function q(Z,te,ie){if(ie===0)return;let fe,$;if(y)fe=C,$="drawElementsInstanced";else if(fe=e.get("ANGLE_instanced_arrays"),$="drawElementsInstancedANGLE",fe===null){w.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}fe[$](M,te,I,Z*D,ie),o.update(te,M,ie)}this.setMode=B,this.setIndex=U,this.render=X,this.renderInstances=q}function D_(C){const e={geometries:0,textures:0},o={frame:0,calls:0,triangles:0,points:0,lines:0};function f(M,B,I){switch(o.calls++,B){case C.TRIANGLES:o.triangles+=I*(M/3);break;case C.LINES:o.lines+=I*(M/2);break;case C.LINE_STRIP:o.lines+=I*(M-1);break;case C.LINE_LOOP:o.lines+=I*M;break;case C.POINTS:o.points+=I*M;break;default:w.error("THREE.WebGLInfo: Unknown draw mode:",B);break}}function y(){o.calls=0,o.triangles=0,o.points=0,o.lines=0}return{memory:e,render:o,programs:null,autoReset:!0,reset:y,update:f}}function P_(C,e){return C[0]-e[0]}function M1(C,e){return Math.abs(e[1])-Math.abs(C[1])}function x1(C,e,o){const f={},y=new Float32Array(8),M=new WeakMap,B=new Mi,I=[];for(let U=0;U<8;U++)I[U]=[U,0];function D(U,X,q){const Z=U.morphTargetInfluences;if(e.isWebGL2===!0){const te=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,ie=te!==void 0?te.length:0;let fe=M.get(X);if(fe===void 0||fe.count!==ie){let Ut=function(){Mn.dispose(),M.delete(X),X.removeEventListener("dispose",Ut)};fe!==void 0&&fe.texture.dispose();const be=X.morphAttributes.position!==void 0,he=X.morphAttributes.normal!==void 0,Se=X.morphAttributes.color!==void 0,Ue=X.morphAttributes.position||[],Xe=X.morphAttributes.normal||[],et=X.morphAttributes.color||[];let st=0;be===!0&&(st=1),he===!0&&(st=2),Se===!0&&(st=3);let we=X.attributes.position.count*st,We=1;we>e.maxTextureSize&&(We=Math.ceil(we/e.maxTextureSize),we=e.maxTextureSize);const Yt=new Float32Array(we*We*4*ie),Mn=new Ns(Yt,we,We,ie);Mn.type=zo,Mn.needsUpdate=!0;const Gt=st*4;for(let Xt=0;Xt<ie;Xt++){const xn=Ue[Xt],un=Xe[Xt],fn=et[Xt],jt=we*We*4*Xt;for(let Tn=0;Tn<xn.count;Tn++){const Lt=Tn*Gt;be===!0&&(B.fromBufferAttribute(xn,Tn),Yt[jt+Lt+0]=B.x,Yt[jt+Lt+1]=B.y,Yt[jt+Lt+2]=B.z,Yt[jt+Lt+3]=0),he===!0&&(B.fromBufferAttribute(un,Tn),Yt[jt+Lt+4]=B.x,Yt[jt+Lt+5]=B.y,Yt[jt+Lt+6]=B.z,Yt[jt+Lt+7]=0),Se===!0&&(B.fromBufferAttribute(fn,Tn),Yt[jt+Lt+8]=B.x,Yt[jt+Lt+9]=B.y,Yt[jt+Lt+10]=B.z,Yt[jt+Lt+11]=fn.itemSize===4?B.w:1)}}fe={count:ie,texture:Mn,size:new gn(we,We)},M.set(X,fe),X.addEventListener("dispose",Ut)}let $=0;for(let be=0;be<Z.length;be++)$+=Z[be];const re=X.morphTargetsRelative?1:1-$;q.getUniforms().setValue(C,"morphTargetBaseInfluence",re),q.getUniforms().setValue(C,"morphTargetInfluences",Z),q.getUniforms().setValue(C,"morphTargetsTexture",fe.texture,o),q.getUniforms().setValue(C,"morphTargetsTextureSize",fe.size)}else{const te=Z===void 0?0:Z.length;let ie=f[X.id];if(ie===void 0||ie.length!==te){ie=[];for(let he=0;he<te;he++)ie[he]=[he,0];f[X.id]=ie}for(let he=0;he<te;he++){const Se=ie[he];Se[0]=he,Se[1]=Z[he]}ie.sort(M1);for(let he=0;he<8;he++)he<te&&ie[he][1]?(I[he][0]=ie[he][0],I[he][1]=ie[he][1]):(I[he][0]=Number.MAX_SAFE_INTEGER,I[he][1]=0);I.sort(P_);const fe=X.morphAttributes.position,$=X.morphAttributes.normal;let re=0;for(let he=0;he<8;he++){const Se=I[he],Ue=Se[0],Xe=Se[1];Ue!==Number.MAX_SAFE_INTEGER&&Xe?(fe&&X.getAttribute("morphTarget"+he)!==fe[Ue]&&X.setAttribute("morphTarget"+he,fe[Ue]),$&&X.getAttribute("morphNormal"+he)!==$[Ue]&&X.setAttribute("morphNormal"+he,$[Ue]),y[he]=Xe,re+=Xe):(fe&&X.hasAttribute("morphTarget"+he)===!0&&X.deleteAttribute("morphTarget"+he),$&&X.hasAttribute("morphNormal"+he)===!0&&X.deleteAttribute("morphNormal"+he),y[he]=0)}const be=X.morphTargetsRelative?1:1-re;q.getUniforms().setValue(C,"morphTargetBaseInfluence",be),q.getUniforms().setValue(C,"morphTargetInfluences",y)}}return{update:D}}function L_(C,e,o,f){let y=new WeakMap;function M(D){const U=f.render.frame,X=D.geometry,q=e.get(D,X);if(y.get(q)!==U&&(e.update(q),y.set(q,U)),D.isInstancedMesh&&(D.hasEventListener("dispose",I)===!1&&D.addEventListener("dispose",I),y.get(D)!==U&&(o.update(D.instanceMatrix,C.ARRAY_BUFFER),D.instanceColor!==null&&o.update(D.instanceColor,C.ARRAY_BUFFER),y.set(D,U))),D.isSkinnedMesh){const Z=D.skeleton;y.get(Z)!==U&&(Z.update(),y.set(Z,U))}return q}function B(){y=new WeakMap}function I(D){const U=D.target;U.removeEventListener("dispose",I),o.remove(U.instanceMatrix),U.instanceColor!==null&&o.remove(U.instanceColor)}return{update:M,dispose:B}}const hy=new $i,fy=new Ns,gy=new jo,my=new Wo,Ay=[],yy=[],vy=new Float32Array(16),_y=new Float32Array(9),Ey=new Float32Array(4);function hf(C,e,o){const f=C[0];if(f<=0||f>0)return C;const y=e*o;let M=Ay[y];if(M===void 0&&(M=new Float32Array(y),Ay[y]=M),e!==0){f.toArray(M,0);for(let B=1,I=0;B!==e;++B)I+=o,C[B].toArray(M,I)}return M}function Is(C,e){if(C.length!==e.length)return!1;for(let o=0,f=C.length;o<f;o++)if(C[o]!==e[o])return!1;return!0}function ma(C,e){for(let o=0,f=e.length;o<f;o++)C[o]=e[o]}function Sg(C,e){let o=yy[e];o===void 0&&(o=new Int32Array(e),yy[e]=o);for(let f=0;f!==e;++f)o[f]=C.allocateTextureUnit();return o}function k_(C,e){const o=this.cache;o[0]!==e&&(C.uniform1f(this.addr,e),o[0]=e)}function z_(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(C.uniform2f(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(Is(o,e))return;C.uniform2fv(this.addr,e),ma(o,e)}}function ff(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(C.uniform3f(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else if(e.r!==void 0)(o[0]!==e.r||o[1]!==e.g||o[2]!==e.b)&&(C.uniform3f(this.addr,e.r,e.g,e.b),o[0]=e.r,o[1]=e.g,o[2]=e.b);else{if(Is(o,e))return;C.uniform3fv(this.addr,e),ma(o,e)}}function G_(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(C.uniform4f(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(Is(o,e))return;C.uniform4fv(this.addr,e),ma(o,e)}}function by(C,e){const o=this.cache,f=e.elements;if(f===void 0){if(Is(o,e))return;C.uniformMatrix2fv(this.addr,!1,e),ma(o,e)}else{if(Is(o,f))return;Ey.set(f),C.uniformMatrix2fv(this.addr,!1,Ey),ma(o,f)}}function N_(C,e){const o=this.cache,f=e.elements;if(f===void 0){if(Is(o,e))return;C.uniformMatrix3fv(this.addr,!1,e),ma(o,e)}else{if(Is(o,f))return;_y.set(f),C.uniformMatrix3fv(this.addr,!1,_y),ma(o,f)}}function U_(C,e){const o=this.cache,f=e.elements;if(f===void 0){if(Is(o,e))return;C.uniformMatrix4fv(this.addr,!1,e),ma(o,e)}else{if(Is(o,f))return;vy.set(f),C.uniformMatrix4fv(this.addr,!1,vy),ma(o,f)}}function gf(C,e){const o=this.cache;o[0]!==e&&(C.uniform1i(this.addr,e),o[0]=e)}function j_(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(C.uniform2i(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(Is(o,e))return;C.uniform2iv(this.addr,e),ma(o,e)}}function ph(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(C.uniform3i(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else{if(Is(o,e))return;C.uniform3iv(this.addr,e),ma(o,e)}}function pM(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(C.uniform4i(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(Is(o,e))return;C.uniform4iv(this.addr,e),ma(o,e)}}function uM(C,e){const o=this.cache;o[0]!==e&&(C.uniform1ui(this.addr,e),o[0]=e)}function dM(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(C.uniform2ui(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(Is(o,e))return;C.uniform2uiv(this.addr,e),ma(o,e)}}function hM(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(C.uniform3ui(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else{if(Is(o,e))return;C.uniform3uiv(this.addr,e),ma(o,e)}}function fM(C,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(C.uniform4ui(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(Is(o,e))return;C.uniform4uiv(this.addr,e),ma(o,e)}}function gM(C,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(C.uniform1i(this.addr,y),f[0]=y),o.setTexture2D(e||hy,y)}function H_(C,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(C.uniform1i(this.addr,y),f[0]=y),o.setTexture3D(e||gy,y)}function W_(C,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(C.uniform1i(this.addr,y),f[0]=y),o.setTextureCube(e||my,y)}function V_(C,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(C.uniform1i(this.addr,y),f[0]=y),o.setTexture2DArray(e||fy,y)}function Ul(C){switch(C){case 5126:return k_;case 35664:return z_;case 35665:return ff;case 35666:return G_;case 35674:return by;case 35675:return N_;case 35676:return U_;case 5124:case 35670:return gf;case 35667:case 35671:return j_;case 35668:case 35672:return ph;case 35669:case 35673:return pM;case 5125:return uM;case 36294:return dM;case 36295:return hM;case 36296:return fM;case 35678:case 36198:case 36298:case 36306:case 35682:return gM;case 35679:case 36299:case 36307:return H_;case 35680:case 36300:case 36308:case 36293:return W_;case 36289:case 36303:case 36311:case 36292:return V_}}function Q_(C,e){C.uniform1fv(this.addr,e)}function My(C,e){const o=hf(e,this.size,2);C.uniform2fv(this.addr,o)}function K_(C,e){const o=hf(e,this.size,3);C.uniform3fv(this.addr,o)}function X_(C,e){const o=hf(e,this.size,4);C.uniform4fv(this.addr,o)}function xy(C,e){const o=hf(e,this.size,4);C.uniformMatrix2fv(this.addr,!1,o)}function Y_(C,e){const o=hf(e,this.size,9);C.uniformMatrix3fv(this.addr,!1,o)}function mM(C,e){const o=hf(e,this.size,16);C.uniformMatrix4fv(this.addr,!1,o)}function AM(C,e){C.uniform1iv(this.addr,e)}function C1(C,e){C.uniform2iv(this.addr,e)}function J_(C,e){C.uniform3iv(this.addr,e)}function yM(C,e){C.uniform4iv(this.addr,e)}function q_(C,e){C.uniform1uiv(this.addr,e)}function Cy(C,e){C.uniform2uiv(this.addr,e)}function Z_(C,e){C.uniform3uiv(this.addr,e)}function $_(C,e){C.uniform4uiv(this.addr,e)}function Sy(C,e,o){const f=this.cache,y=e.length,M=Sg(o,y);Is(f,M)||(C.uniform1iv(this.addr,M),ma(f,M));for(let B=0;B!==y;++B)o.setTexture2D(e[B]||hy,M[B])}function mf(C,e,o){const f=this.cache,y=e.length,M=Sg(o,y);Is(f,M)||(C.uniform1iv(this.addr,M),ma(f,M));for(let B=0;B!==y;++B)o.setTexture3D(e[B]||gy,M[B])}function Lm(C,e,o){const f=this.cache,y=e.length,M=Sg(o,y);Is(f,M)||(C.uniform1iv(this.addr,M),ma(f,M));for(let B=0;B!==y;++B)o.setTextureCube(e[B]||my,M[B])}function vM(C,e,o){const f=this.cache,y=e.length,M=Sg(o,y);Is(f,M)||(C.uniform1iv(this.addr,M),ma(f,M));for(let B=0;B!==y;++B)o.setTexture2DArray(e[B]||fy,M[B])}function e3(C){switch(C){case 5126:return Q_;case 35664:return My;case 35665:return K_;case 35666:return X_;case 35674:return xy;case 35675:return Y_;case 35676:return mM;case 5124:case 35670:return AM;case 35667:case 35671:return C1;case 35668:case 35672:return J_;case 35669:case 35673:return yM;case 5125:return q_;case 36294:return Cy;case 36295:return Z_;case 36296:return $_;case 35678:case 36198:case 36298:case 36306:case 35682:return Sy;case 35679:case 36299:case 36307:return mf;case 35680:case 36300:case 36308:case 36293:return Lm;case 36289:case 36303:case 36311:case 36292:return vM}}class wy{constructor(e,o,f){this.id=e,this.addr=f,this.cache=[],this.setValue=Ul(o.type)}}class t3{constructor(e,o,f){this.id=e,this.addr=f,this.cache=[],this.size=o.size,this.setValue=e3(o.type)}}class n3{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,o,f){const y=this.seq;for(let M=0,B=y.length;M!==B;++M){const I=y[M];I.setValue(e,o[I.id],f)}}}const S1=/(\w+)(\])?(\[|\.)?/g;function km(C,e){C.seq.push(e),C.map[e.id]=e}function w1(C,e,o){const f=C.name,y=f.length;for(S1.lastIndex=0;;){const M=S1.exec(f),B=S1.lastIndex;let I=M[1];const D=M[2]==="]",U=M[3];if(D&&(I=I|0),U===void 0||U==="["&&B+2===y){km(o,U===void 0?new wy(I,C,e):new t3(I,C,e));break}else{let q=o.map[I];q===void 0&&(q=new n3(I),km(o,q)),o=q}}}class yu{constructor(e,o){this.seq=[],this.map={};const f=e.getProgramParameter(o,e.ACTIVE_UNIFORMS);for(let y=0;y<f;++y){const M=e.getActiveUniform(o,y),B=e.getUniformLocation(o,M.name);w1(M,B,this)}}setValue(e,o,f,y){const M=this.map[o];M!==void 0&&M.setValue(e,f,y)}setOptional(e,o,f){const y=o[f];y!==void 0&&this.setValue(e,f,y)}static upload(e,o,f,y){for(let M=0,B=o.length;M!==B;++M){const I=o[M],D=f[I.id];D.needsUpdate!==!1&&I.setValue(e,D.value,y)}}static seqWithValue(e,o){const f=[];for(let y=0,M=e.length;y!==M;++y){const B=e[y];B.id in o&&f.push(B)}return f}}function Rc(C,e,o){const f=C.createShader(e);return C.shaderSource(f,o),C.compileShader(f),f}let vu=0;function Fp(C,e){const o=C.split(`
`),f=[],y=Math.max(e-6,0),M=Math.min(e+6,o.length);for(let B=y;B<M;B++){const I=B+1;f.push(`${I===e?">":" "} ${I}: ${o[B]}`)}return f.join(`
`)}function _u(C){switch(C){case Xl:return["Linear","( value )"];case ai:return["sRGB","( value )"];default:return w.warn("THREE.WebGLProgram: Unsupported color space:",C),["Linear","( value )"]}}function Op(C,e,o){const f=C.getShaderParameter(e,C.COMPILE_STATUS),y=C.getShaderInfoLog(e).trim();if(f&&y==="")return"";const M=/ERROR: 0:(\d+)/.exec(y);if(M){const B=parseInt(M[1]);return o.toUpperCase()+`

`+y+`

`+Fp(C.getShaderSource(e),B)}else return y}function wg(C,e){const o=_u(e);return"vec4 "+C+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function Tg(C,e){let o;switch(e){case to:o="Linear";break;case Cs:o="Reinhard";break;case Ys:o="OptimizedCineon";break;case va:o="ACESFilmic";break;case Ss:o="Custom";break;default:w.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),o="Linear"}return"vec3 "+C+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function Bg(C){return[C.extensionDerivatives||C.envMapCubeUVHeight||C.bumpMap||C.normalMapTangentSpace||C.clearcoatNormalMap||C.flatShading||C.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(C.extensionFragDepth||C.logarithmicDepthBuffer)&&C.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",C.extensionDrawBuffers&&C.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(C.extensionShaderTextureLOD||C.envMap||C.transmission)&&C.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Eu).join(`
`)}function zm(C){const e=[];for(const o in C){const f=C[o];f!==!1&&e.push("#define "+o+" "+f)}return e.join(`
`)}function Rg(C,e){const o={},f=C.getProgramParameter(e,C.ACTIVE_ATTRIBUTES);for(let y=0;y<f;y++){const M=C.getActiveAttrib(e,y),B=M.name;let I=1;M.type===C.FLOAT_MAT2&&(I=2),M.type===C.FLOAT_MAT3&&(I=3),M.type===C.FLOAT_MAT4&&(I=4),o[B]={type:M.type,location:C.getAttribLocation(e,B),locationSize:I}}return o}function Eu(C){return C!==""}function Af(C,e){const o=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return C.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,o).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ty(C,e){return C.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const By=/^[ \t]*#include +<([\w\d./]+)>/gm;function T1(C){return C.replace(By,r3)}const Ry=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function r3(C,e){let o=Ci[e];if(o===void 0){const f=Ry.get(e);if(f!==void 0)o=Ci[f],w.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,f);else throw new Error("Can not resolve #include <"+e+">")}return T1(o)}const i3=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function B1(C){return C.replace(i3,o3)}function o3(C,e,o,f){let y="";for(let M=parseInt(e);M<parseInt(o);M++)y+=f.replace(/\[\s*i\s*\]/g,"[ "+M+" ]").replace(/UNROLLED_LOOP_INDEX/g,M);return y}function R1(C){let e="precision "+C.precision+` float;
precision `+C.precision+" int;";return C.precision==="highp"?e+=`
#define HIGH_PRECISION`:C.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:C.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Iy(C){let e="SHADOWMAP_TYPE_BASIC";return C.shadowMapType===pe?e="SHADOWMAP_TYPE_PCF":C.shadowMapType===ue?e="SHADOWMAP_TYPE_PCF_SOFT":C.shadowMapType===Mt&&(e="SHADOWMAP_TYPE_VSM"),e}function Gm(C){let e="ENVMAP_TYPE_CUBE";if(C.envMap)switch(C.envMapMode){case Ls:case as:e="ENVMAP_TYPE_CUBE";break;case ds:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Nm(C){let e="ENVMAP_MODE_REFLECTION";if(C.envMap)switch(C.envMapMode){case as:e="ENVMAP_MODE_REFRACTION";break}return e}function Um(C){let e="ENVMAP_BLENDING_NONE";if(C.envMap)switch(C.combine){case Or:e="ENVMAP_BLENDING_MULTIPLY";break;case Bo:e="ENVMAP_BLENDING_MIX";break;case Kr:e="ENVMAP_BLENDING_ADD";break}return e}function s3(C){const e=C.envMapCubeUVHeight;if(e===null)return null;const o=Math.log2(e)-2,f=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,o),7*16)),texelHeight:f,maxMip:o}}function Fy(C,e,o,f){const y=C.getContext(),M=o.defines;let B=o.vertexShader,I=o.fragmentShader;const D=Iy(o),U=Gm(o),X=Nm(o),q=Um(o),Z=s3(o),te=o.isWebGL2?"":Bg(o),ie=zm(M),fe=y.createProgram();let $,re,be=o.glslVersion?"#version "+o.glslVersion+`
`:"";o.isRawShaderMaterial?($=["#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie].filter(Eu).join(`
`),$.length>0&&($+=`
`),re=[te,"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie].filter(Eu).join(`
`),re.length>0&&(re+=`
`)):($=[R1(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+X:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.displacementMap?"#define USE_DISPLACEMENTMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaHash?"#define USE_ALPHAHASH":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.mapUv?"#define MAP_UV "+o.mapUv:"",o.alphaMapUv?"#define ALPHAMAP_UV "+o.alphaMapUv:"",o.lightMapUv?"#define LIGHTMAP_UV "+o.lightMapUv:"",o.aoMapUv?"#define AOMAP_UV "+o.aoMapUv:"",o.emissiveMapUv?"#define EMISSIVEMAP_UV "+o.emissiveMapUv:"",o.bumpMapUv?"#define BUMPMAP_UV "+o.bumpMapUv:"",o.normalMapUv?"#define NORMALMAP_UV "+o.normalMapUv:"",o.displacementMapUv?"#define DISPLACEMENTMAP_UV "+o.displacementMapUv:"",o.metalnessMapUv?"#define METALNESSMAP_UV "+o.metalnessMapUv:"",o.roughnessMapUv?"#define ROUGHNESSMAP_UV "+o.roughnessMapUv:"",o.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+o.anisotropyMapUv:"",o.clearcoatMapUv?"#define CLEARCOATMAP_UV "+o.clearcoatMapUv:"",o.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+o.clearcoatNormalMapUv:"",o.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+o.clearcoatRoughnessMapUv:"",o.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+o.iridescenceMapUv:"",o.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+o.iridescenceThicknessMapUv:"",o.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+o.sheenColorMapUv:"",o.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+o.sheenRoughnessMapUv:"",o.specularMapUv?"#define SPECULARMAP_UV "+o.specularMapUv:"",o.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+o.specularColorMapUv:"",o.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+o.specularIntensityMapUv:"",o.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+o.transmissionMapUv:"",o.thicknessMapUv?"#define THICKNESSMAP_UV "+o.thicknessMapUv:"",o.vertexTangents&&o.flatShading===!1?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+D:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Eu).join(`
`),re=[te,R1(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+U:"",o.envMap?"#define "+X:"",o.envMap?"#define "+q:"",Z?"#define CUBEUV_TEXEL_WIDTH "+Z.texelWidth:"",Z?"#define CUBEUV_TEXEL_HEIGHT "+Z.texelHeight:"",Z?"#define CUBEUV_MAX_MIP "+Z.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropy?"#define USE_ANISOTROPY":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescence?"#define USE_IRIDESCENCE":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.alphaHash?"#define USE_ALPHAHASH":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.vertexTangents&&o.flatShading===!1?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+D:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==co?"#define TONE_MAPPING":"",o.toneMapping!==co?Ci.tonemapping_pars_fragment:"",o.toneMapping!==co?Tg("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",Ci.colorspace_pars_fragment,wg("linearToOutputTexel",o.outputColorSpace),o.useDepthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(Eu).join(`
`)),B=T1(B),B=Af(B,o),B=Ty(B,o),I=T1(I),I=Af(I,o),I=Ty(I,o),B=B1(B),I=B1(I),o.isWebGL2&&o.isRawShaderMaterial!==!0&&(be=`#version 300 es
`,$=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+$,re=["#define varying in",o.glslVersion===Il?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===Il?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+re);const he=be+$+B,Se=be+re+I,Ue=Rc(y,y.VERTEX_SHADER,he),Xe=Rc(y,y.FRAGMENT_SHADER,Se);if(y.attachShader(fe,Ue),y.attachShader(fe,Xe),o.index0AttributeName!==void 0?y.bindAttribLocation(fe,0,o.index0AttributeName):o.morphTargets===!0&&y.bindAttribLocation(fe,0,"position"),y.linkProgram(fe),C.debug.checkShaderErrors){const we=y.getProgramInfoLog(fe).trim(),We=y.getShaderInfoLog(Ue).trim(),Yt=y.getShaderInfoLog(Xe).trim();let Mn=!0,Gt=!0;if(y.getProgramParameter(fe,y.LINK_STATUS)===!1)if(Mn=!1,typeof C.debug.onShaderError=="function")C.debug.onShaderError(y,fe,Ue,Xe);else{const Ut=Op(y,Ue,"vertex"),Xt=Op(y,Xe,"fragment");w.error("THREE.WebGLProgram: Shader Error "+y.getError()+" - VALIDATE_STATUS "+y.getProgramParameter(fe,y.VALIDATE_STATUS)+`

Program Info Log: `+we+`
`+Ut+`
`+Xt)}else we!==""?w.warn("THREE.WebGLProgram: Program Info Log:",we):(We===""||Yt==="")&&(Gt=!1);Gt&&(this.diagnostics={runnable:Mn,programLog:we,vertexShader:{log:We,prefix:$},fragmentShader:{log:Yt,prefix:re}})}y.deleteShader(Ue),y.deleteShader(Xe);let et;this.getUniforms=function(){return et===void 0&&(et=new yu(y,fe)),et};let st;return this.getAttributes=function(){return st===void 0&&(st=Rg(y,fe)),st},this.destroy=function(){f.releaseStatesOfProgram(this),y.deleteProgram(fe),this.program=void 0},this.type=o.shaderType,this.name=o.shaderName,this.id=vu++,this.cacheKey=e,this.usedTimes=1,this.program=fe,this.vertexShader=Ue,this.fragmentShader=Xe,this}let Oy=0;class Wa{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const o=e.vertexShader,f=e.fragmentShader,y=this._getShaderStage(o),M=this._getShaderStage(f),B=this._getShaderCacheForMaterial(e);return B.has(y)===!1&&(B.add(y),y.usedTimes++),B.has(M)===!1&&(B.add(M),M.usedTimes++),this}remove(e){const o=this.materialCache.get(e);for(const f of o)f.usedTimes--,f.usedTimes===0&&this.shaderCache.delete(f.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const o=this.materialCache;let f=o.get(e);return f===void 0&&(f=new Set,o.set(e,f)),f}_getShaderStage(e){const o=this.shaderCache;let f=o.get(e);return f===void 0&&(f=new Va(e),o.set(e,f)),f}}class Va{constructor(e){this.id=Oy++,this.code=e,this.usedTimes=0}}function Dp(C,e,o,f,y,M,B){const I=new Yh,D=new Wa,U=[],X=y.isWebGL2,q=y.logarithmicDepthBuffer,Z=y.vertexTextures;let te=y.precision;const ie={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function fe(we){return we===0?"uv":`uv${we}`}function $(we,We,Yt,Mn,Gt){const Ut=Mn.fog,Xt=Gt.geometry,xn=we.isMeshStandardMaterial?Mn.environment:null,un=(we.isMeshStandardMaterial?o:e).get(we.envMap||xn),fn=un&&un.mapping===ds?un.image.height:null,jt=ie[we.type];we.precision!==null&&(te=y.getMaxPrecision(we.precision),te!==we.precision&&w.warn("THREE.WebGLProgram.getParameters:",we.precision,"not supported, using",te,"instead."));const Tn=Xt.morphAttributes.position||Xt.morphAttributes.normal||Xt.morphAttributes.color,Lt=Tn!==void 0?Tn.length:0;let dn=0;Xt.morphAttributes.position!==void 0&&(dn=1),Xt.morphAttributes.normal!==void 0&&(dn=2),Xt.morphAttributes.color!==void 0&&(dn=3);let tr,cn,yt,Nr;if(jt){const Dc=Ha[jt];tr=Dc.vertexShader,cn=Dc.fragmentShader}else tr=we.vertexShader,cn=we.fragmentShader,D.update(we),yt=D.getVertexShaderID(we),Nr=D.getFragmentShaderID(we);const Ur=C.getRenderTarget(),Dr=Gt.isInstancedMesh===!0,Wi=!!we.map,os=!!we.matcap,oi=!!un,ot=!!we.aoMap,zn=!!we.lightMap,Kt=!!we.bumpMap,hn=!!we.normalMap,Cn=!!we.displacementMap,kr=!!we.emissiveMap,mr=!!we.metalnessMap,Cr=!!we.roughnessMap,vi=we.anisotropy>0,Ui=we.clearcoat>0,us=we.iridescence>0,tt=we.sheen>0,De=we.transmission>0,nn=vi&&!!we.anisotropyMap,Un=Ui&&!!we.clearcoatMap,Wn=Ui&&!!we.clearcoatNormalMap,pr=Ui&&!!we.clearcoatRoughnessMap,yn=us&&!!we.iridescenceMap,cr=us&&!!we.iridescenceThicknessMap,on=tt&&!!we.sheenColorMap,Jr=tt&&!!we.sheenRoughnessMap,wr=!!we.specularMap,Nn=!!we.specularColorMap,kn=!!we.specularIntensityMap,Mr=De&&!!we.transmissionMap,Ii=De&&!!we.thicknessMap,Xi=!!we.gradientMap,ht=!!we.alphaMap,ir=we.alphaTest>0,Jt=!!we.alphaHash,Zn=!!we.extensions,$n=!!Xt.attributes.uv1,Vi=!!Xt.attributes.uv2,wo=!!Xt.attributes.uv3;return{isWebGL2:X,shaderID:jt,shaderType:we.type,shaderName:we.name,vertexShader:tr,fragmentShader:cn,defines:we.defines,customVertexShaderID:yt,customFragmentShaderID:Nr,isRawShaderMaterial:we.isRawShaderMaterial===!0,glslVersion:we.glslVersion,precision:te,instancing:Dr,instancingColor:Dr&&Gt.instanceColor!==null,supportsVertexTextures:Z,outputColorSpace:Ur===null?C.outputColorSpace:Ur.isXRRenderTarget===!0?Ur.texture.colorSpace:Xl,map:Wi,matcap:os,envMap:oi,envMapMode:oi&&un.mapping,envMapCubeUVHeight:fn,aoMap:ot,lightMap:zn,bumpMap:Kt,normalMap:hn,displacementMap:Z&&Cn,emissiveMap:kr,normalMapObjectSpace:hn&&we.normalMapType===Xf,normalMapTangentSpace:hn&&we.normalMapType===bi,metalnessMap:mr,roughnessMap:Cr,anisotropy:vi,anisotropyMap:nn,clearcoat:Ui,clearcoatMap:Un,clearcoatNormalMap:Wn,clearcoatRoughnessMap:pr,iridescence:us,iridescenceMap:yn,iridescenceThicknessMap:cr,sheen:tt,sheenColorMap:on,sheenRoughnessMap:Jr,specularMap:wr,specularColorMap:Nn,specularIntensityMap:kn,transmission:De,transmissionMap:Mr,thicknessMap:Ii,gradientMap:Xi,opaque:we.transparent===!1&&we.blending===vt,alphaMap:ht,alphaTest:ir,alphaHash:Jt,combine:we.combine,mapUv:Wi&&fe(we.map.channel),aoMapUv:ot&&fe(we.aoMap.channel),lightMapUv:zn&&fe(we.lightMap.channel),bumpMapUv:Kt&&fe(we.bumpMap.channel),normalMapUv:hn&&fe(we.normalMap.channel),displacementMapUv:Cn&&fe(we.displacementMap.channel),emissiveMapUv:kr&&fe(we.emissiveMap.channel),metalnessMapUv:mr&&fe(we.metalnessMap.channel),roughnessMapUv:Cr&&fe(we.roughnessMap.channel),anisotropyMapUv:nn&&fe(we.anisotropyMap.channel),clearcoatMapUv:Un&&fe(we.clearcoatMap.channel),clearcoatNormalMapUv:Wn&&fe(we.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pr&&fe(we.clearcoatRoughnessMap.channel),iridescenceMapUv:yn&&fe(we.iridescenceMap.channel),iridescenceThicknessMapUv:cr&&fe(we.iridescenceThicknessMap.channel),sheenColorMapUv:on&&fe(we.sheenColorMap.channel),sheenRoughnessMapUv:Jr&&fe(we.sheenRoughnessMap.channel),specularMapUv:wr&&fe(we.specularMap.channel),specularColorMapUv:Nn&&fe(we.specularColorMap.channel),specularIntensityMapUv:kn&&fe(we.specularIntensityMap.channel),transmissionMapUv:Mr&&fe(we.transmissionMap.channel),thicknessMapUv:Ii&&fe(we.thicknessMap.channel),alphaMapUv:ht&&fe(we.alphaMap.channel),vertexTangents:!!Xt.attributes.tangent&&(hn||vi),vertexColors:we.vertexColors,vertexAlphas:we.vertexColors===!0&&!!Xt.attributes.color&&Xt.attributes.color.itemSize===4,vertexUv1s:$n,vertexUv2s:Vi,vertexUv3s:wo,pointsUvs:Gt.isPoints===!0&&!!Xt.attributes.uv&&(Wi||ht),fog:!!Ut,useFog:we.fog===!0,fogExp2:Ut&&Ut.isFogExp2,flatShading:we.flatShading===!0,sizeAttenuation:we.sizeAttenuation===!0,logarithmicDepthBuffer:q,skinning:Gt.isSkinnedMesh===!0,morphTargets:Xt.morphAttributes.position!==void 0,morphNormals:Xt.morphAttributes.normal!==void 0,morphColors:Xt.morphAttributes.color!==void 0,morphTargetsCount:Lt,morphTextureStride:dn,numDirLights:We.directional.length,numPointLights:We.point.length,numSpotLights:We.spot.length,numSpotLightMaps:We.spotLightMap.length,numRectAreaLights:We.rectArea.length,numHemiLights:We.hemi.length,numDirLightShadows:We.directionalShadowMap.length,numPointLightShadows:We.pointShadowMap.length,numSpotLightShadows:We.spotShadowMap.length,numSpotLightShadowsWithMaps:We.numSpotLightShadowsWithMaps,numClippingPlanes:B.numPlanes,numClipIntersection:B.numIntersection,dithering:we.dithering,shadowMapEnabled:C.shadowMap.enabled&&Yt.length>0,shadowMapType:C.shadowMap.type,toneMapping:we.toneMapped?C.toneMapping:co,useLegacyLights:C.useLegacyLights,premultipliedAlpha:we.premultipliedAlpha,doubleSided:we.side===it,flipSided:we.side===Ve,useDepthPacking:we.depthPacking>=0,depthPacking:we.depthPacking||0,index0AttributeName:we.index0AttributeName,extensionDerivatives:Zn&&we.extensions.derivatives===!0,extensionFragDepth:Zn&&we.extensions.fragDepth===!0,extensionDrawBuffers:Zn&&we.extensions.drawBuffers===!0,extensionShaderTextureLOD:Zn&&we.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:X||f.has("EXT_frag_depth"),rendererExtensionDrawBuffers:X||f.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:X||f.has("EXT_shader_texture_lod"),customProgramCacheKey:we.customProgramCacheKey()}}function re(we){const We=[];if(we.shaderID?We.push(we.shaderID):(We.push(we.customVertexShaderID),We.push(we.customFragmentShaderID)),we.defines!==void 0)for(const Yt in we.defines)We.push(Yt),We.push(we.defines[Yt]);return we.isRawShaderMaterial===!1&&(be(We,we),he(We,we),We.push(C.outputColorSpace)),We.push(we.customProgramCacheKey),We.join()}function be(we,We){we.push(We.precision),we.push(We.outputColorSpace),we.push(We.envMapMode),we.push(We.envMapCubeUVHeight),we.push(We.mapUv),we.push(We.alphaMapUv),we.push(We.lightMapUv),we.push(We.aoMapUv),we.push(We.bumpMapUv),we.push(We.normalMapUv),we.push(We.displacementMapUv),we.push(We.emissiveMapUv),we.push(We.metalnessMapUv),we.push(We.roughnessMapUv),we.push(We.anisotropyMapUv),we.push(We.clearcoatMapUv),we.push(We.clearcoatNormalMapUv),we.push(We.clearcoatRoughnessMapUv),we.push(We.iridescenceMapUv),we.push(We.iridescenceThicknessMapUv),we.push(We.sheenColorMapUv),we.push(We.sheenRoughnessMapUv),we.push(We.specularMapUv),we.push(We.specularColorMapUv),we.push(We.specularIntensityMapUv),we.push(We.transmissionMapUv),we.push(We.thicknessMapUv),we.push(We.combine),we.push(We.fogExp2),we.push(We.sizeAttenuation),we.push(We.morphTargetsCount),we.push(We.morphAttributeCount),we.push(We.numDirLights),we.push(We.numPointLights),we.push(We.numSpotLights),we.push(We.numSpotLightMaps),we.push(We.numHemiLights),we.push(We.numRectAreaLights),we.push(We.numDirLightShadows),we.push(We.numPointLightShadows),we.push(We.numSpotLightShadows),we.push(We.numSpotLightShadowsWithMaps),we.push(We.shadowMapType),we.push(We.toneMapping),we.push(We.numClippingPlanes),we.push(We.numClipIntersection),we.push(We.depthPacking)}function he(we,We){I.disableAll(),We.isWebGL2&&I.enable(0),We.supportsVertexTextures&&I.enable(1),We.instancing&&I.enable(2),We.instancingColor&&I.enable(3),We.matcap&&I.enable(4),We.envMap&&I.enable(5),We.normalMapObjectSpace&&I.enable(6),We.normalMapTangentSpace&&I.enable(7),We.clearcoat&&I.enable(8),We.iridescence&&I.enable(9),We.alphaTest&&I.enable(10),We.vertexColors&&I.enable(11),We.vertexAlphas&&I.enable(12),We.vertexUv1s&&I.enable(13),We.vertexUv2s&&I.enable(14),We.vertexUv3s&&I.enable(15),We.vertexTangents&&I.enable(16),We.anisotropy&&I.enable(17),we.push(I.mask),I.disableAll(),We.fog&&I.enable(0),We.useFog&&I.enable(1),We.flatShading&&I.enable(2),We.logarithmicDepthBuffer&&I.enable(3),We.skinning&&I.enable(4),We.morphTargets&&I.enable(5),We.morphNormals&&I.enable(6),We.morphColors&&I.enable(7),We.premultipliedAlpha&&I.enable(8),We.shadowMapEnabled&&I.enable(9),We.useLegacyLights&&I.enable(10),We.doubleSided&&I.enable(11),We.flipSided&&I.enable(12),We.useDepthPacking&&I.enable(13),We.dithering&&I.enable(14),We.transmission&&I.enable(15),We.sheen&&I.enable(16),We.opaque&&I.enable(17),We.pointsUvs&&I.enable(18),we.push(I.mask)}function Se(we){const We=ie[we.type];let Yt;if(We){const Mn=Ha[We];Yt=cu.clone(Mn.uniforms)}else Yt=we.uniforms;return Yt}function Ue(we,We){let Yt;for(let Mn=0,Gt=U.length;Mn<Gt;Mn++){const Ut=U[Mn];if(Ut.cacheKey===We){Yt=Ut,++Yt.usedTimes;break}}return Yt===void 0&&(Yt=new Fy(C,We,we,M),U.push(Yt)),Yt}function Xe(we){if(--we.usedTimes===0){const We=U.indexOf(we);U[We]=U[U.length-1],U.pop(),we.destroy()}}function et(we){D.remove(we)}function st(){D.dispose()}return{getParameters:$,getProgramCacheKey:re,getUniforms:Se,acquireProgram:Ue,releaseProgram:Xe,releaseShaderCache:et,programs:U,dispose:st}}function I1(){let C=new WeakMap;function e(M){let B=C.get(M);return B===void 0&&(B={},C.set(M,B)),B}function o(M){C.delete(M)}function f(M,B,I){C.get(M)[B]=I}function y(){C=new WeakMap}return{get:e,remove:o,update:f,dispose:y}}function F1(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.material.id!==e.material.id?C.material.id-e.material.id:C.z!==e.z?C.z-e.z:C.id-e.id}function Qa(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.z!==e.z?e.z-C.z:C.id-e.id}function O1(){const C=[];let e=0;const o=[],f=[],y=[];function M(){e=0,o.length=0,f.length=0,y.length=0}function B(q,Z,te,ie,fe,$){let re=C[e];return re===void 0?(re={id:q.id,object:q,geometry:Z,material:te,groupOrder:ie,renderOrder:q.renderOrder,z:fe,group:$},C[e]=re):(re.id=q.id,re.object=q,re.geometry=Z,re.material=te,re.groupOrder=ie,re.renderOrder=q.renderOrder,re.z=fe,re.group=$),e++,re}function I(q,Z,te,ie,fe,$){const re=B(q,Z,te,ie,fe,$);te.transmission>0?f.push(re):te.transparent===!0?y.push(re):o.push(re)}function D(q,Z,te,ie,fe,$){const re=B(q,Z,te,ie,fe,$);te.transmission>0?f.unshift(re):te.transparent===!0?y.unshift(re):o.unshift(re)}function U(q,Z){o.length>1&&o.sort(q||F1),f.length>1&&f.sort(Z||Qa),y.length>1&&y.sort(Z||Qa)}function X(){for(let q=e,Z=C.length;q<Z;q++){const te=C[q];if(te.id===null)break;te.id=null,te.object=null,te.geometry=null,te.material=null,te.group=null}}return{opaque:o,transmissive:f,transparent:y,init:M,push:I,unshift:D,finish:X,sort:U}}function jm(){let C=new WeakMap;function e(f,y){const M=C.get(f);let B;return M===void 0?(B=new O1,C.set(f,[B])):y>=M.length?(B=new O1,M.push(B)):B=M[y],B}function o(){C=new WeakMap}return{get:e,dispose:o}}function Hm(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let o;switch(e.type){case"DirectionalLight":o={direction:new Qe,color:new fr};break;case"SpotLight":o={position:new Qe,direction:new Qe,color:new fr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new Qe,color:new fr,distance:0,decay:0};break;case"HemisphereLight":o={direction:new Qe,skyColor:new fr,groundColor:new fr};break;case"RectAreaLight":o={color:new fr,position:new Qe,halfWidth:new Qe,halfHeight:new Qe};break}return C[e.id]=o,o}}}function Pp(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let o;switch(e.type){case"DirectionalLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gn};break;case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gn};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gn,shadowCameraNear:1,shadowCameraFar:1e3};break}return C[e.id]=o,o}}}let Lp=0;function D1(C,e){return(e.castShadow?2:0)-(C.castShadow?2:0)+(e.map?1:0)-(C.map?1:0)}function Dy(C,e){const o=new Hm,f=Pp(),y={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let X=0;X<9;X++)y.probe.push(new Qe);const M=new Qe,B=new li,I=new li;function D(X,q){let Z=0,te=0,ie=0;for(let Yt=0;Yt<9;Yt++)y.probe[Yt].set(0,0,0);let fe=0,$=0,re=0,be=0,he=0,Se=0,Ue=0,Xe=0,et=0,st=0;X.sort(D1);const we=q===!0?Math.PI:1;for(let Yt=0,Mn=X.length;Yt<Mn;Yt++){const Gt=X[Yt],Ut=Gt.color,Xt=Gt.intensity,xn=Gt.distance,un=Gt.shadow&&Gt.shadow.map?Gt.shadow.map.texture:null;if(Gt.isAmbientLight)Z+=Ut.r*Xt*we,te+=Ut.g*Xt*we,ie+=Ut.b*Xt*we;else if(Gt.isLightProbe)for(let fn=0;fn<9;fn++)y.probe[fn].addScaledVector(Gt.sh.coefficients[fn],Xt);else if(Gt.isDirectionalLight){const fn=o.get(Gt);if(fn.color.copy(Gt.color).multiplyScalar(Gt.intensity*we),Gt.castShadow){const jt=Gt.shadow,Tn=f.get(Gt);Tn.shadowBias=jt.bias,Tn.shadowNormalBias=jt.normalBias,Tn.shadowRadius=jt.radius,Tn.shadowMapSize=jt.mapSize,y.directionalShadow[fe]=Tn,y.directionalShadowMap[fe]=un,y.directionalShadowMatrix[fe]=Gt.shadow.matrix,Se++}y.directional[fe]=fn,fe++}else if(Gt.isSpotLight){const fn=o.get(Gt);fn.position.setFromMatrixPosition(Gt.matrixWorld),fn.color.copy(Ut).multiplyScalar(Xt*we),fn.distance=xn,fn.coneCos=Math.cos(Gt.angle),fn.penumbraCos=Math.cos(Gt.angle*(1-Gt.penumbra)),fn.decay=Gt.decay,y.spot[re]=fn;const jt=Gt.shadow;if(Gt.map&&(y.spotLightMap[et]=Gt.map,et++,jt.updateMatrices(Gt),Gt.castShadow&&st++),y.spotLightMatrix[re]=jt.matrix,Gt.castShadow){const Tn=f.get(Gt);Tn.shadowBias=jt.bias,Tn.shadowNormalBias=jt.normalBias,Tn.shadowRadius=jt.radius,Tn.shadowMapSize=jt.mapSize,y.spotShadow[re]=Tn,y.spotShadowMap[re]=un,Xe++}re++}else if(Gt.isRectAreaLight){const fn=o.get(Gt);fn.color.copy(Ut).multiplyScalar(Xt),fn.halfWidth.set(Gt.width*.5,0,0),fn.halfHeight.set(0,Gt.height*.5,0),y.rectArea[be]=fn,be++}else if(Gt.isPointLight){const fn=o.get(Gt);if(fn.color.copy(Gt.color).multiplyScalar(Gt.intensity*we),fn.distance=Gt.distance,fn.decay=Gt.decay,Gt.castShadow){const jt=Gt.shadow,Tn=f.get(Gt);Tn.shadowBias=jt.bias,Tn.shadowNormalBias=jt.normalBias,Tn.shadowRadius=jt.radius,Tn.shadowMapSize=jt.mapSize,Tn.shadowCameraNear=jt.camera.near,Tn.shadowCameraFar=jt.camera.far,y.pointShadow[$]=Tn,y.pointShadowMap[$]=un,y.pointShadowMatrix[$]=Gt.shadow.matrix,Ue++}y.point[$]=fn,$++}else if(Gt.isHemisphereLight){const fn=o.get(Gt);fn.skyColor.copy(Gt.color).multiplyScalar(Xt*we),fn.groundColor.copy(Gt.groundColor).multiplyScalar(Xt*we),y.hemi[he]=fn,he++}}be>0&&(e.isWebGL2||C.has("OES_texture_float_linear")===!0?(y.rectAreaLTC1=sr.LTC_FLOAT_1,y.rectAreaLTC2=sr.LTC_FLOAT_2):C.has("OES_texture_half_float_linear")===!0?(y.rectAreaLTC1=sr.LTC_HALF_1,y.rectAreaLTC2=sr.LTC_HALF_2):w.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),y.ambient[0]=Z,y.ambient[1]=te,y.ambient[2]=ie;const We=y.hash;(We.directionalLength!==fe||We.pointLength!==$||We.spotLength!==re||We.rectAreaLength!==be||We.hemiLength!==he||We.numDirectionalShadows!==Se||We.numPointShadows!==Ue||We.numSpotShadows!==Xe||We.numSpotMaps!==et)&&(y.directional.length=fe,y.spot.length=re,y.rectArea.length=be,y.point.length=$,y.hemi.length=he,y.directionalShadow.length=Se,y.directionalShadowMap.length=Se,y.pointShadow.length=Ue,y.pointShadowMap.length=Ue,y.spotShadow.length=Xe,y.spotShadowMap.length=Xe,y.directionalShadowMatrix.length=Se,y.pointShadowMatrix.length=Ue,y.spotLightMatrix.length=Xe+et-st,y.spotLightMap.length=et,y.numSpotLightShadowsWithMaps=st,We.directionalLength=fe,We.pointLength=$,We.spotLength=re,We.rectAreaLength=be,We.hemiLength=he,We.numDirectionalShadows=Se,We.numPointShadows=Ue,We.numSpotShadows=Xe,We.numSpotMaps=et,y.version=Lp++)}function U(X,q){let Z=0,te=0,ie=0,fe=0,$=0;const re=q.matrixWorldInverse;for(let be=0,he=X.length;be<he;be++){const Se=X[be];if(Se.isDirectionalLight){const Ue=y.directional[Z];Ue.direction.setFromMatrixPosition(Se.matrixWorld),M.setFromMatrixPosition(Se.target.matrixWorld),Ue.direction.sub(M),Ue.direction.transformDirection(re),Z++}else if(Se.isSpotLight){const Ue=y.spot[ie];Ue.position.setFromMatrixPosition(Se.matrixWorld),Ue.position.applyMatrix4(re),Ue.direction.setFromMatrixPosition(Se.matrixWorld),M.setFromMatrixPosition(Se.target.matrixWorld),Ue.direction.sub(M),Ue.direction.transformDirection(re),ie++}else if(Se.isRectAreaLight){const Ue=y.rectArea[fe];Ue.position.setFromMatrixPosition(Se.matrixWorld),Ue.position.applyMatrix4(re),I.identity(),B.copy(Se.matrixWorld),B.premultiply(re),I.extractRotation(B),Ue.halfWidth.set(Se.width*.5,0,0),Ue.halfHeight.set(0,Se.height*.5,0),Ue.halfWidth.applyMatrix4(I),Ue.halfHeight.applyMatrix4(I),fe++}else if(Se.isPointLight){const Ue=y.point[te];Ue.position.setFromMatrixPosition(Se.matrixWorld),Ue.position.applyMatrix4(re),te++}else if(Se.isHemisphereLight){const Ue=y.hemi[$];Ue.direction.setFromMatrixPosition(Se.matrixWorld),Ue.direction.transformDirection(re),$++}}}return{setup:D,setupView:U,state:y}}function ld(C,e){const o=new Dy(C,e),f=[],y=[];function M(){f.length=0,y.length=0}function B(q){f.push(q)}function I(q){y.push(q)}function D(q){o.setup(f,q)}function U(q){o.setupView(f,q)}return{init:M,state:{lightsArray:f,shadowsArray:y,lights:o},setupLights:D,setupLightsView:U,pushLight:B,pushShadow:I}}function Py(C,e){let o=new WeakMap;function f(M,B=0){const I=o.get(M);let D;return I===void 0?(D=new ld(C,e),o.set(M,[D])):B>=I.length?(D=new ld(C,e),I.push(D)):D=I[B],D}function y(){o=new WeakMap}return{get:f,dispose:y}}class P1 extends Ts{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Kf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class L1 extends Ts{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ly=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ky=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zy(C,e,o){let f=new du;const y=new gn,M=new gn,B=new Mi,I=new P1({depthPacking:gc}),D=new L1,U={},X=o.maxTextureSize,q={[nt]:Ve,[Ve]:nt,[it]:it},Z=new Yr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gn},radius:{value:4}},vertexShader:Ly,fragmentShader:ky}),te=Z.clone();te.defines.HORIZONTAL_PASS=1;const ie=new xi;ie.setAttribute("position",new ao(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const fe=new Bs(ie,Z),$=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pe;let re=this.type;this.render=function(Ue,Xe,et){if($.enabled===!1||$.autoUpdate===!1&&$.needsUpdate===!1||Ue.length===0)return;const st=C.getRenderTarget(),we=C.getActiveCubeFace(),We=C.getActiveMipmapLevel(),Yt=C.state;Yt.setBlending(Ct),Yt.buffers.color.setClear(1,1,1,1),Yt.buffers.depth.setTest(!0),Yt.setScissorTest(!1);const Mn=re!==Mt&&this.type===Mt,Gt=re===Mt&&this.type!==Mt;for(let Ut=0,Xt=Ue.length;Ut<Xt;Ut++){const xn=Ue[Ut],un=xn.shadow;if(un===void 0){w.warn("THREE.WebGLShadowMap:",xn,"has no shadow.");continue}if(un.autoUpdate===!1&&un.needsUpdate===!1)continue;y.copy(un.mapSize);const fn=un.getFrameExtents();if(y.multiply(fn),M.copy(un.mapSize),(y.x>X||y.y>X)&&(y.x>X&&(M.x=Math.floor(X/fn.x),y.x=M.x*fn.x,un.mapSize.x=M.x),y.y>X&&(M.y=Math.floor(X/fn.y),y.y=M.y*fn.y,un.mapSize.y=M.y)),un.map===null||Mn===!0||Gt===!0){const Tn=this.type!==Mt?{minFilter:Pi,magFilter:Pi}:{};un.map!==null&&un.map.dispose(),un.map=new Sa(y.x,y.y,Tn),un.map.texture.name=xn.name+".shadowMap",un.camera.updateProjectionMatrix()}C.setRenderTarget(un.map),C.clear();const jt=un.getViewportCount();for(let Tn=0;Tn<jt;Tn++){const Lt=un.getViewport(Tn);B.set(M.x*Lt.x,M.y*Lt.y,M.x*Lt.z,M.y*Lt.w),Yt.viewport(B),un.updateMatrices(xn,Tn),f=un.getFrustum(),Se(Xe,et,un.camera,xn,this.type)}un.isPointLightShadow!==!0&&this.type===Mt&&be(un,et),un.needsUpdate=!1}re=this.type,$.needsUpdate=!1,C.setRenderTarget(st,we,We)};function be(Ue,Xe){const et=e.update(fe);Z.defines.VSM_SAMPLES!==Ue.blurSamples&&(Z.defines.VSM_SAMPLES=Ue.blurSamples,te.defines.VSM_SAMPLES=Ue.blurSamples,Z.needsUpdate=!0,te.needsUpdate=!0),Ue.mapPass===null&&(Ue.mapPass=new Sa(y.x,y.y)),Z.uniforms.shadow_pass.value=Ue.map.texture,Z.uniforms.resolution.value=Ue.mapSize,Z.uniforms.radius.value=Ue.radius,C.setRenderTarget(Ue.mapPass),C.clear(),C.renderBufferDirect(Xe,null,et,Z,fe,null),te.uniforms.shadow_pass.value=Ue.mapPass.texture,te.uniforms.resolution.value=Ue.mapSize,te.uniforms.radius.value=Ue.radius,C.setRenderTarget(Ue.map),C.clear(),C.renderBufferDirect(Xe,null,et,te,fe,null)}function he(Ue,Xe,et,st){let we=null;const We=et.isPointLight===!0?Ue.customDistanceMaterial:Ue.customDepthMaterial;if(We!==void 0)we=We;else if(we=et.isPointLight===!0?D:I,C.localClippingEnabled&&Xe.clipShadows===!0&&Array.isArray(Xe.clippingPlanes)&&Xe.clippingPlanes.length!==0||Xe.displacementMap&&Xe.displacementScale!==0||Xe.alphaMap&&Xe.alphaTest>0||Xe.map&&Xe.alphaTest>0){const Yt=we.uuid,Mn=Xe.uuid;let Gt=U[Yt];Gt===void 0&&(Gt={},U[Yt]=Gt);let Ut=Gt[Mn];Ut===void 0&&(Ut=we.clone(),Gt[Mn]=Ut),we=Ut}if(we.visible=Xe.visible,we.wireframe=Xe.wireframe,st===Mt?we.side=Xe.shadowSide!==null?Xe.shadowSide:Xe.side:we.side=Xe.shadowSide!==null?Xe.shadowSide:q[Xe.side],we.alphaMap=Xe.alphaMap,we.alphaTest=Xe.alphaTest,we.map=Xe.map,we.clipShadows=Xe.clipShadows,we.clippingPlanes=Xe.clippingPlanes,we.clipIntersection=Xe.clipIntersection,we.displacementMap=Xe.displacementMap,we.displacementScale=Xe.displacementScale,we.displacementBias=Xe.displacementBias,we.wireframeLinewidth=Xe.wireframeLinewidth,we.linewidth=Xe.linewidth,et.isPointLight===!0&&we.isMeshDistanceMaterial===!0){const Yt=C.properties.get(we);Yt.light=et}return we}function Se(Ue,Xe,et,st,we){if(Ue.visible===!1)return;if(Ue.layers.test(Xe.layers)&&(Ue.isMesh||Ue.isLine||Ue.isPoints)&&(Ue.castShadow||Ue.receiveShadow&&we===Mt)&&(!Ue.frustumCulled||f.intersectsObject(Ue))){Ue.modelViewMatrix.multiplyMatrices(et.matrixWorldInverse,Ue.matrixWorld);const Mn=e.update(Ue),Gt=Ue.material;if(Array.isArray(Gt)){const Ut=Mn.groups;for(let Xt=0,xn=Ut.length;Xt<xn;Xt++){const un=Ut[Xt],fn=Gt[un.materialIndex];if(fn&&fn.visible){const jt=he(Ue,fn,st,we);C.renderBufferDirect(et,null,Mn,jt,Ue,un)}}}else if(Gt.visible){const Ut=he(Ue,Gt,st,we);C.renderBufferDirect(et,null,Mn,Ut,Ue,null)}}const Yt=Ue.children;for(let Mn=0,Gt=Yt.length;Mn<Gt;Mn++)Se(Yt[Mn],Xe,et,st,we)}}function kp(C,e,o){const f=o.isWebGL2;function y(){let ht=!1;const ir=new Mi;let Jt=null;const Zn=new Mi(0,0,0,0);return{setMask:function($n){Jt!==$n&&!ht&&(C.colorMask($n,$n,$n,$n),Jt=$n)},setLocked:function($n){ht=$n},setClear:function($n,Vi,wo,Aa,Dc){Dc===!0&&($n*=Aa,Vi*=Aa,wo*=Aa),ir.set($n,Vi,wo,Aa),Zn.equals(ir)===!1&&(C.clearColor($n,Vi,wo,Aa),Zn.copy(ir))},reset:function(){ht=!1,Jt=null,Zn.set(-1,0,0,0)}}}function M(){let ht=!1,ir=null,Jt=null,Zn=null;return{setTest:function($n){$n?Ur(C.DEPTH_TEST):Dr(C.DEPTH_TEST)},setMask:function($n){ir!==$n&&!ht&&(C.depthMask($n),ir=$n)},setFunc:function($n){if(Jt!==$n){switch($n){case Rr:C.depthFunc(C.NEVER);break;case Ti:C.depthFunc(C.ALWAYS);break;case Fn:C.depthFunc(C.LESS);break;case Rn:C.depthFunc(C.LEQUAL);break;case Hn:C.depthFunc(C.EQUAL);break;case hr:C.depthFunc(C.GEQUAL);break;case ti:C.depthFunc(C.GREATER);break;case ii:C.depthFunc(C.NOTEQUAL);break;default:C.depthFunc(C.LEQUAL)}Jt=$n}},setLocked:function($n){ht=$n},setClear:function($n){Zn!==$n&&(C.clearDepth($n),Zn=$n)},reset:function(){ht=!1,ir=null,Jt=null,Zn=null}}}function B(){let ht=!1,ir=null,Jt=null,Zn=null,$n=null,Vi=null,wo=null,Aa=null,Dc=null;return{setTest:function(Ms){ht||(Ms?Ur(C.STENCIL_TEST):Dr(C.STENCIL_TEST))},setMask:function(Ms){ir!==Ms&&!ht&&(C.stencilMask(Ms),ir=Ms)},setFunc:function(Ms,Pc,Ka){(Jt!==Ms||Zn!==Pc||$n!==Ka)&&(C.stencilFunc(Ms,Pc,Ka),Jt=Ms,Zn=Pc,$n=Ka)},setOp:function(Ms,Pc,Ka){(Vi!==Ms||wo!==Pc||Aa!==Ka)&&(C.stencilOp(Ms,Pc,Ka),Vi=Ms,wo=Pc,Aa=Ka)},setLocked:function(Ms){ht=Ms},setClear:function(Ms){Dc!==Ms&&(C.clearStencil(Ms),Dc=Ms)},reset:function(){ht=!1,ir=null,Jt=null,Zn=null,$n=null,Vi=null,wo=null,Aa=null,Dc=null}}}const I=new y,D=new M,U=new B,X=new WeakMap,q=new WeakMap;let Z={},te={},ie=new WeakMap,fe=[],$=null,re=!1,be=null,he=null,Se=null,Ue=null,Xe=null,et=null,st=null,we=!1,We=null,Yt=null,Mn=null,Gt=null,Ut=null;const Xt=C.getParameter(C.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let xn=!1,un=0;const fn=C.getParameter(C.VERSION);fn.indexOf("WebGL")!==-1?(un=parseFloat(/^WebGL (\d)/.exec(fn)[1]),xn=un>=1):fn.indexOf("OpenGL ES")!==-1&&(un=parseFloat(/^OpenGL ES (\d)/.exec(fn)[1]),xn=un>=2);let jt=null,Tn={};const Lt=C.getParameter(C.SCISSOR_BOX),dn=C.getParameter(C.VIEWPORT),tr=new Mi().fromArray(Lt),cn=new Mi().fromArray(dn);function yt(ht,ir,Jt,Zn){const $n=new Uint8Array(4),Vi=C.createTexture();C.bindTexture(ht,Vi),C.texParameteri(ht,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(ht,C.TEXTURE_MAG_FILTER,C.NEAREST);for(let wo=0;wo<Jt;wo++)f&&(ht===C.TEXTURE_3D||ht===C.TEXTURE_2D_ARRAY)?C.texImage3D(ir,0,C.RGBA,1,1,Zn,0,C.RGBA,C.UNSIGNED_BYTE,$n):C.texImage2D(ir+wo,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,$n);return Vi}const Nr={};Nr[C.TEXTURE_2D]=yt(C.TEXTURE_2D,C.TEXTURE_2D,1),Nr[C.TEXTURE_CUBE_MAP]=yt(C.TEXTURE_CUBE_MAP,C.TEXTURE_CUBE_MAP_POSITIVE_X,6),f&&(Nr[C.TEXTURE_2D_ARRAY]=yt(C.TEXTURE_2D_ARRAY,C.TEXTURE_2D_ARRAY,1,1),Nr[C.TEXTURE_3D]=yt(C.TEXTURE_3D,C.TEXTURE_3D,1,1)),I.setClear(0,0,0,1),D.setClear(1),U.setClear(0),Ur(C.DEPTH_TEST),D.setFunc(Rn),Cn(!1),kr(H),Ur(C.CULL_FACE),Kt(Ct);function Ur(ht){Z[ht]!==!0&&(C.enable(ht),Z[ht]=!0)}function Dr(ht){Z[ht]!==!1&&(C.disable(ht),Z[ht]=!1)}function Wi(ht,ir){return te[ht]!==ir?(C.bindFramebuffer(ht,ir),te[ht]=ir,f&&(ht===C.DRAW_FRAMEBUFFER&&(te[C.FRAMEBUFFER]=ir),ht===C.FRAMEBUFFER&&(te[C.DRAW_FRAMEBUFFER]=ir)),!0):!1}function os(ht,ir){let Jt=fe,Zn=!1;if(ht)if(Jt=ie.get(ir),Jt===void 0&&(Jt=[],ie.set(ir,Jt)),ht.isWebGLMultipleRenderTargets){const $n=ht.texture;if(Jt.length!==$n.length||Jt[0]!==C.COLOR_ATTACHMENT0){for(let Vi=0,wo=$n.length;Vi<wo;Vi++)Jt[Vi]=C.COLOR_ATTACHMENT0+Vi;Jt.length=$n.length,Zn=!0}}else Jt[0]!==C.COLOR_ATTACHMENT0&&(Jt[0]=C.COLOR_ATTACHMENT0,Zn=!0);else Jt[0]!==C.BACK&&(Jt[0]=C.BACK,Zn=!0);Zn&&(o.isWebGL2?C.drawBuffers(Jt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Jt))}function oi(ht){return $!==ht?(C.useProgram(ht),$=ht,!0):!1}const ot={[qt]:C.FUNC_ADD,[Ft]:C.FUNC_SUBTRACT,[An]:C.FUNC_REVERSE_SUBTRACT};if(f)ot[rr]=C.MIN,ot[xr]=C.MAX;else{const ht=e.get("EXT_blend_minmax");ht!==null&&(ot[rr]=ht.MIN_EXT,ot[xr]=ht.MAX_EXT)}const zn={[Br]:C.ZERO,[Er]:C.ONE,[zr]:C.SRC_COLOR,[eo]:C.SRC_ALPHA,[Ar]:C.SRC_ALPHA_SATURATE,[tn]:C.DST_COLOR,[Yo]:C.DST_ALPHA,[Fi]:C.ONE_MINUS_SRC_COLOR,[Gr]:C.ONE_MINUS_SRC_ALPHA,[Bn]:C.ONE_MINUS_DST_COLOR,[jn]:C.ONE_MINUS_DST_ALPHA};function Kt(ht,ir,Jt,Zn,$n,Vi,wo,Aa){if(ht===Ct){re===!0&&(Dr(C.BLEND),re=!1);return}if(re===!1&&(Ur(C.BLEND),re=!0),ht!==wt){if(ht!==be||Aa!==we){if((he!==qt||Xe!==qt)&&(C.blendEquation(C.FUNC_ADD),he=qt,Xe=qt),Aa)switch(ht){case vt:C.blendFuncSeparate(C.ONE,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA);break;case pt:C.blendFunc(C.ONE,C.ONE);break;case ft:C.blendFuncSeparate(C.ZERO,C.ONE_MINUS_SRC_COLOR,C.ZERO,C.ONE);break;case Pt:C.blendFuncSeparate(C.ZERO,C.SRC_COLOR,C.ZERO,C.SRC_ALPHA);break;default:w.error("THREE.WebGLState: Invalid blending: ",ht);break}else switch(ht){case vt:C.blendFuncSeparate(C.SRC_ALPHA,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA);break;case pt:C.blendFunc(C.SRC_ALPHA,C.ONE);break;case ft:C.blendFuncSeparate(C.ZERO,C.ONE_MINUS_SRC_COLOR,C.ZERO,C.ONE);break;case Pt:C.blendFunc(C.ZERO,C.SRC_COLOR);break;default:w.error("THREE.WebGLState: Invalid blending: ",ht);break}Se=null,Ue=null,et=null,st=null,be=ht,we=Aa}return}$n=$n||ir,Vi=Vi||Jt,wo=wo||Zn,(ir!==he||$n!==Xe)&&(C.blendEquationSeparate(ot[ir],ot[$n]),he=ir,Xe=$n),(Jt!==Se||Zn!==Ue||Vi!==et||wo!==st)&&(C.blendFuncSeparate(zn[Jt],zn[Zn],zn[Vi],zn[wo]),Se=Jt,Ue=Zn,et=Vi,st=wo),be=ht,we=!1}function hn(ht,ir){ht.side===it?Dr(C.CULL_FACE):Ur(C.CULL_FACE);let Jt=ht.side===Ve;ir&&(Jt=!Jt),Cn(Jt),ht.blending===vt&&ht.transparent===!1?Kt(Ct):Kt(ht.blending,ht.blendEquation,ht.blendSrc,ht.blendDst,ht.blendEquationAlpha,ht.blendSrcAlpha,ht.blendDstAlpha,ht.premultipliedAlpha),D.setFunc(ht.depthFunc),D.setTest(ht.depthTest),D.setMask(ht.depthWrite),I.setMask(ht.colorWrite);const Zn=ht.stencilWrite;U.setTest(Zn),Zn&&(U.setMask(ht.stencilWriteMask),U.setFunc(ht.stencilFunc,ht.stencilRef,ht.stencilFuncMask),U.setOp(ht.stencilFail,ht.stencilZFail,ht.stencilZPass)),Cr(ht.polygonOffset,ht.polygonOffsetFactor,ht.polygonOffsetUnits),ht.alphaToCoverage===!0?Ur(C.SAMPLE_ALPHA_TO_COVERAGE):Dr(C.SAMPLE_ALPHA_TO_COVERAGE)}function Cn(ht){We!==ht&&(ht?C.frontFace(C.CW):C.frontFace(C.CCW),We=ht)}function kr(ht){ht!==E?(Ur(C.CULL_FACE),ht!==Yt&&(ht===H?C.cullFace(C.BACK):ht===ee?C.cullFace(C.FRONT):C.cullFace(C.FRONT_AND_BACK))):Dr(C.CULL_FACE),Yt=ht}function mr(ht){ht!==Mn&&(xn&&C.lineWidth(ht),Mn=ht)}function Cr(ht,ir,Jt){ht?(Ur(C.POLYGON_OFFSET_FILL),(Gt!==ir||Ut!==Jt)&&(C.polygonOffset(ir,Jt),Gt=ir,Ut=Jt)):Dr(C.POLYGON_OFFSET_FILL)}function vi(ht){ht?Ur(C.SCISSOR_TEST):Dr(C.SCISSOR_TEST)}function Ui(ht){ht===void 0&&(ht=C.TEXTURE0+Xt-1),jt!==ht&&(C.activeTexture(ht),jt=ht)}function us(ht,ir,Jt){Jt===void 0&&(jt===null?Jt=C.TEXTURE0+Xt-1:Jt=jt);let Zn=Tn[Jt];Zn===void 0&&(Zn={type:void 0,texture:void 0},Tn[Jt]=Zn),(Zn.type!==ht||Zn.texture!==ir)&&(jt!==Jt&&(C.activeTexture(Jt),jt=Jt),C.bindTexture(ht,ir||Nr[ht]),Zn.type=ht,Zn.texture=ir)}function tt(){const ht=Tn[jt];ht!==void 0&&ht.type!==void 0&&(C.bindTexture(ht.type,null),ht.type=void 0,ht.texture=void 0)}function De(){try{C.compressedTexImage2D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function nn(){try{C.compressedTexImage3D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function Un(){try{C.texSubImage2D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function Wn(){try{C.texSubImage3D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function pr(){try{C.compressedTexSubImage2D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function yn(){try{C.compressedTexSubImage3D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function cr(){try{C.texStorage2D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function on(){try{C.texStorage3D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function Jr(){try{C.texImage2D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function wr(){try{C.texImage3D.apply(C,arguments)}catch(ht){w.error("THREE.WebGLState:",ht)}}function Nn(ht){tr.equals(ht)===!1&&(C.scissor(ht.x,ht.y,ht.z,ht.w),tr.copy(ht))}function kn(ht){cn.equals(ht)===!1&&(C.viewport(ht.x,ht.y,ht.z,ht.w),cn.copy(ht))}function Mr(ht,ir){let Jt=q.get(ir);Jt===void 0&&(Jt=new WeakMap,q.set(ir,Jt));let Zn=Jt.get(ht);Zn===void 0&&(Zn=C.getUniformBlockIndex(ir,ht.name),Jt.set(ht,Zn))}function Ii(ht,ir){const Zn=q.get(ir).get(ht);X.get(ir)!==Zn&&(C.uniformBlockBinding(ir,Zn,ht.__bindingPointIndex),X.set(ir,Zn))}function Xi(){C.disable(C.BLEND),C.disable(C.CULL_FACE),C.disable(C.DEPTH_TEST),C.disable(C.POLYGON_OFFSET_FILL),C.disable(C.SCISSOR_TEST),C.disable(C.STENCIL_TEST),C.disable(C.SAMPLE_ALPHA_TO_COVERAGE),C.blendEquation(C.FUNC_ADD),C.blendFunc(C.ONE,C.ZERO),C.blendFuncSeparate(C.ONE,C.ZERO,C.ONE,C.ZERO),C.colorMask(!0,!0,!0,!0),C.clearColor(0,0,0,0),C.depthMask(!0),C.depthFunc(C.LESS),C.clearDepth(1),C.stencilMask(4294967295),C.stencilFunc(C.ALWAYS,0,4294967295),C.stencilOp(C.KEEP,C.KEEP,C.KEEP),C.clearStencil(0),C.cullFace(C.BACK),C.frontFace(C.CCW),C.polygonOffset(0,0),C.activeTexture(C.TEXTURE0),C.bindFramebuffer(C.FRAMEBUFFER,null),f===!0&&(C.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),C.bindFramebuffer(C.READ_FRAMEBUFFER,null)),C.useProgram(null),C.lineWidth(1),C.scissor(0,0,C.canvas.width,C.canvas.height),C.viewport(0,0,C.canvas.width,C.canvas.height),Z={},jt=null,Tn={},te={},ie=new WeakMap,fe=[],$=null,re=!1,be=null,he=null,Se=null,Ue=null,Xe=null,et=null,st=null,we=!1,We=null,Yt=null,Mn=null,Gt=null,Ut=null,tr.set(0,0,C.canvas.width,C.canvas.height),cn.set(0,0,C.canvas.width,C.canvas.height),I.reset(),D.reset(),U.reset()}return{buffers:{color:I,depth:D,stencil:U},enable:Ur,disable:Dr,bindFramebuffer:Wi,drawBuffers:os,useProgram:oi,setBlending:Kt,setMaterial:hn,setFlipSided:Cn,setCullFace:kr,setLineWidth:mr,setPolygonOffset:Cr,setScissorTest:vi,activeTexture:Ui,bindTexture:us,unbindTexture:tt,compressedTexImage2D:De,compressedTexImage3D:nn,texImage2D:Jr,texImage3D:wr,updateUBOMapping:Mr,uniformBlockBinding:Ii,texStorage2D:cr,texStorage3D:on,texSubImage2D:Un,texSubImage3D:Wn,compressedTexSubImage2D:pr,compressedTexSubImage3D:yn,scissor:Nn,viewport:kn,reset:Xi}}function a3(C,e,o,f,y,M,B){const I=y.isWebGL2,D=y.maxTextures,U=y.maxCubemapSize,X=y.maxTextureSize,q=y.maxSamples,Z=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,te=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),ie=new WeakMap;let fe;const $=new WeakMap;let re=!1;try{re=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(tt){}function be(tt,De){return re?new OffscreenCanvas(tt,De):eu("canvas")}function he(tt,De,nn,Un){let Wn=1;if((tt.width>Un||tt.height>Un)&&(Wn=Un/Math.max(tt.width,tt.height)),Wn<1||De===!0)if(typeof HTMLImageElement!="undefined"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&tt instanceof ImageBitmap){const pr=De?Ca:Math.floor,yn=pr(Wn*tt.width),cr=pr(Wn*tt.height);fe===void 0&&(fe=be(yn,cr));const on=nn?be(yn,cr):fe;return on.width=yn,on.height=cr,on.getContext("2d").drawImage(tt,0,0,yn,cr),w.warn("THREE.WebGLRenderer: Texture has been resized from ("+tt.width+"x"+tt.height+") to ("+yn+"x"+cr+")."),on}else return"data"in tt&&w.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+tt.width+"x"+tt.height+")."),tt;return tt}function Se(tt){return jd(tt.width)&&jd(tt.height)}function Ue(tt){return I?!1:tt.wrapS!==Sr||tt.wrapT!==Sr||tt.minFilter!==Pi&&tt.minFilter!==Zi}function Xe(tt,De){return tt.generateMipmaps&&De&&tt.minFilter!==Pi&&tt.minFilter!==Zi}function et(tt){C.generateMipmap(tt)}function st(tt,De,nn,Un,Wn=!1){if(I===!1)return De;if(tt!==null){if(C[tt]!==void 0)return C[tt];w.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+tt+"'")}let pr=De;return De===C.RED&&(nn===C.FLOAT&&(pr=C.R32F),nn===C.HALF_FLOAT&&(pr=C.R16F),nn===C.UNSIGNED_BYTE&&(pr=C.R8)),De===C.RG&&(nn===C.FLOAT&&(pr=C.RG32F),nn===C.HALF_FLOAT&&(pr=C.RG16F),nn===C.UNSIGNED_BYTE&&(pr=C.RG8)),De===C.RGBA&&(nn===C.FLOAT&&(pr=C.RGBA32F),nn===C.HALF_FLOAT&&(pr=C.RGBA16F),nn===C.UNSIGNED_BYTE&&(pr=Un===ai&&Wn===!1?C.SRGB8_ALPHA8:C.RGBA8),nn===C.UNSIGNED_SHORT_4_4_4_4&&(pr=C.RGBA4),nn===C.UNSIGNED_SHORT_5_5_5_1&&(pr=C.RGB5_A1)),(pr===C.R16F||pr===C.R32F||pr===C.RG16F||pr===C.RG32F||pr===C.RGBA16F||pr===C.RGBA32F)&&e.get("EXT_color_buffer_float"),pr}function we(tt,De,nn){return Xe(tt,nn)===!0||tt.isFramebufferTexture&&tt.minFilter!==Pi&&tt.minFilter!==Zi?Math.log2(Math.max(De.width,De.height))+1:tt.mipmaps!==void 0&&tt.mipmaps.length>0?tt.mipmaps.length:tt.isCompressedTexture&&Array.isArray(tt.image)?De.mipmaps.length:1}function We(tt){return tt===Pi||tt===pa||tt===fs?C.NEAREST:C.LINEAR}function Yt(tt){const De=tt.target;De.removeEventListener("dispose",Yt),Gt(De),De.isVideoTexture&&ie.delete(De)}function Mn(tt){const De=tt.target;De.removeEventListener("dispose",Mn),Xt(De)}function Gt(tt){const De=f.get(tt);if(De.__webglInit===void 0)return;const nn=tt.source,Un=$.get(nn);if(Un){const Wn=Un[De.__cacheKey];Wn.usedTimes--,Wn.usedTimes===0&&Ut(tt),Object.keys(Un).length===0&&$.delete(nn)}f.remove(tt)}function Ut(tt){const De=f.get(tt);C.deleteTexture(De.__webglTexture);const nn=tt.source,Un=$.get(nn);delete Un[De.__cacheKey],B.memory.textures--}function Xt(tt){const De=tt.texture,nn=f.get(tt),Un=f.get(De);if(Un.__webglTexture!==void 0&&(C.deleteTexture(Un.__webglTexture),B.memory.textures--),tt.depthTexture&&tt.depthTexture.dispose(),tt.isWebGLCubeRenderTarget)for(let Wn=0;Wn<6;Wn++)C.deleteFramebuffer(nn.__webglFramebuffer[Wn]),nn.__webglDepthbuffer&&C.deleteRenderbuffer(nn.__webglDepthbuffer[Wn]);else{if(C.deleteFramebuffer(nn.__webglFramebuffer),nn.__webglDepthbuffer&&C.deleteRenderbuffer(nn.__webglDepthbuffer),nn.__webglMultisampledFramebuffer&&C.deleteFramebuffer(nn.__webglMultisampledFramebuffer),nn.__webglColorRenderbuffer)for(let Wn=0;Wn<nn.__webglColorRenderbuffer.length;Wn++)nn.__webglColorRenderbuffer[Wn]&&C.deleteRenderbuffer(nn.__webglColorRenderbuffer[Wn]);nn.__webglDepthRenderbuffer&&C.deleteRenderbuffer(nn.__webglDepthRenderbuffer)}if(tt.isWebGLMultipleRenderTargets)for(let Wn=0,pr=De.length;Wn<pr;Wn++){const yn=f.get(De[Wn]);yn.__webglTexture&&(C.deleteTexture(yn.__webglTexture),B.memory.textures--),f.remove(De[Wn])}f.remove(De),f.remove(tt)}let xn=0;function un(){xn=0}function fn(){const tt=xn;return tt>=D&&w.warn("THREE.WebGLTextures: Trying to use "+tt+" texture units while this GPU supports only "+D),xn+=1,tt}function jt(tt){const De=[];return De.push(tt.wrapS),De.push(tt.wrapT),De.push(tt.wrapR||0),De.push(tt.magFilter),De.push(tt.minFilter),De.push(tt.anisotropy),De.push(tt.internalFormat),De.push(tt.format),De.push(tt.type),De.push(tt.generateMipmaps),De.push(tt.premultiplyAlpha),De.push(tt.flipY),De.push(tt.unpackAlignment),De.push(tt.colorSpace),De.join()}function Tn(tt,De){const nn=f.get(tt);if(tt.isVideoTexture&&Ui(tt),tt.isRenderTargetTexture===!1&&tt.version>0&&nn.__version!==tt.version){const Un=tt.image;if(Un===null)w.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Un.complete===!1)w.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Wi(nn,tt,De);return}}o.bindTexture(C.TEXTURE_2D,nn.__webglTexture,C.TEXTURE0+De)}function Lt(tt,De){const nn=f.get(tt);if(tt.version>0&&nn.__version!==tt.version){Wi(nn,tt,De);return}o.bindTexture(C.TEXTURE_2D_ARRAY,nn.__webglTexture,C.TEXTURE0+De)}function dn(tt,De){const nn=f.get(tt);if(tt.version>0&&nn.__version!==tt.version){Wi(nn,tt,De);return}o.bindTexture(C.TEXTURE_3D,nn.__webglTexture,C.TEXTURE0+De)}function tr(tt,De){const nn=f.get(tt);if(tt.version>0&&nn.__version!==tt.version){os(nn,tt,De);return}o.bindTexture(C.TEXTURE_CUBE_MAP,nn.__webglTexture,C.TEXTURE0+De)}const cn={[hs]:C.REPEAT,[Sr]:C.CLAMP_TO_EDGE,[ji]:C.MIRRORED_REPEAT},yt={[Pi]:C.NEAREST,[pa]:C.NEAREST_MIPMAP_NEAREST,[fs]:C.NEAREST_MIPMAP_LINEAR,[Zi]:C.LINEAR,[ka]:C.LINEAR_MIPMAP_NEAREST,[Jo]:C.LINEAR_MIPMAP_LINEAR},Nr={[Zf]:C.NEVER,[Ud]:C.ALWAYS,[Lu]:C.LESS,[el]:C.LEQUAL,[$f]:C.EQUAL,[pp]:C.GEQUAL,[Yl]:C.GREATER,[ku]:C.NOTEQUAL};function Ur(tt,De,nn){if(nn?(C.texParameteri(tt,C.TEXTURE_WRAP_S,cn[De.wrapS]),C.texParameteri(tt,C.TEXTURE_WRAP_T,cn[De.wrapT]),(tt===C.TEXTURE_3D||tt===C.TEXTURE_2D_ARRAY)&&C.texParameteri(tt,C.TEXTURE_WRAP_R,cn[De.wrapR]),C.texParameteri(tt,C.TEXTURE_MAG_FILTER,yt[De.magFilter]),C.texParameteri(tt,C.TEXTURE_MIN_FILTER,yt[De.minFilter])):(C.texParameteri(tt,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(tt,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),(tt===C.TEXTURE_3D||tt===C.TEXTURE_2D_ARRAY)&&C.texParameteri(tt,C.TEXTURE_WRAP_R,C.CLAMP_TO_EDGE),(De.wrapS!==Sr||De.wrapT!==Sr)&&w.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),C.texParameteri(tt,C.TEXTURE_MAG_FILTER,We(De.magFilter)),C.texParameteri(tt,C.TEXTURE_MIN_FILTER,We(De.minFilter)),De.minFilter!==Pi&&De.minFilter!==Zi&&w.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),De.compareFunction&&(C.texParameteri(tt,C.TEXTURE_COMPARE_MODE,C.COMPARE_REF_TO_TEXTURE),C.texParameteri(tt,C.TEXTURE_COMPARE_FUNC,Nr[De.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Un=e.get("EXT_texture_filter_anisotropic");if(De.magFilter===Pi||De.minFilter!==fs&&De.minFilter!==Jo||De.type===zo&&e.has("OES_texture_float_linear")===!1||I===!1&&De.type===ba&&e.has("OES_texture_half_float_linear")===!1)return;(De.anisotropy>1||f.get(De).__currentAnisotropy)&&(C.texParameterf(tt,Un.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(De.anisotropy,y.getMaxAnisotropy())),f.get(De).__currentAnisotropy=De.anisotropy)}}function Dr(tt,De){let nn=!1;tt.__webglInit===void 0&&(tt.__webglInit=!0,De.addEventListener("dispose",Yt));const Un=De.source;let Wn=$.get(Un);Wn===void 0&&(Wn={},$.set(Un,Wn));const pr=jt(De);if(pr!==tt.__cacheKey){Wn[pr]===void 0&&(Wn[pr]={texture:C.createTexture(),usedTimes:0},B.memory.textures++,nn=!0),Wn[pr].usedTimes++;const yn=Wn[tt.__cacheKey];yn!==void 0&&(Wn[tt.__cacheKey].usedTimes--,yn.usedTimes===0&&Ut(De)),tt.__cacheKey=pr,tt.__webglTexture=Wn[pr].texture}return nn}function Wi(tt,De,nn){let Un=C.TEXTURE_2D;(De.isDataArrayTexture||De.isCompressedArrayTexture)&&(Un=C.TEXTURE_2D_ARRAY),De.isData3DTexture&&(Un=C.TEXTURE_3D);const Wn=Dr(tt,De),pr=De.source;o.bindTexture(Un,tt.__webglTexture,C.TEXTURE0+nn);const yn=f.get(pr);if(pr.version!==yn.__version||Wn===!0){o.activeTexture(C.TEXTURE0+nn),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,De.flipY),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),C.pixelStorei(C.UNPACK_ALIGNMENT,De.unpackAlignment),C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE);const cr=Ue(De)&&Se(De.image)===!1;let on=he(De.image,cr,!1,X);on=us(De,on);const Jr=Se(on)||I,wr=M.convert(De.format,De.colorSpace);let Nn=M.convert(De.type),kn=st(De.internalFormat,wr,Nn,De.colorSpace);Ur(Un,De,Jr);let Mr;const Ii=De.mipmaps,Xi=I&&De.isVideoTexture!==!0,ht=yn.__version===void 0||Wn===!0,ir=we(De,on,Jr);if(De.isDepthTexture)kn=C.DEPTH_COMPONENT,I?De.type===zo?kn=C.DEPTH_COMPONENT32F:De.type===gs?kn=C.DEPTH_COMPONENT24:De.type===Ma?kn=C.DEPTH24_STENCIL8:kn=C.DEPTH_COMPONENT16:De.type===zo&&w.error("WebGLRenderer: Floating point depth texture requires WebGL2."),De.format===Dn&&kn===C.DEPTH_COMPONENT&&De.type!==zs&&De.type!==gs&&(w.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),De.type=gs,Nn=M.convert(De.type)),De.format===Ln&&kn===C.DEPTH_COMPONENT&&(kn=C.DEPTH_STENCIL,De.type!==Ma&&(w.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),De.type=Ma,Nn=M.convert(De.type))),ht&&(Xi?o.texStorage2D(C.TEXTURE_2D,1,kn,on.width,on.height):o.texImage2D(C.TEXTURE_2D,0,kn,on.width,on.height,0,wr,Nn,null));else if(De.isDataTexture)if(Ii.length>0&&Jr){Xi&&ht&&o.texStorage2D(C.TEXTURE_2D,ir,kn,Ii[0].width,Ii[0].height);for(let Jt=0,Zn=Ii.length;Jt<Zn;Jt++)Mr=Ii[Jt],Xi?o.texSubImage2D(C.TEXTURE_2D,Jt,0,0,Mr.width,Mr.height,wr,Nn,Mr.data):o.texImage2D(C.TEXTURE_2D,Jt,kn,Mr.width,Mr.height,0,wr,Nn,Mr.data);De.generateMipmaps=!1}else Xi?(ht&&o.texStorage2D(C.TEXTURE_2D,ir,kn,on.width,on.height),o.texSubImage2D(C.TEXTURE_2D,0,0,0,on.width,on.height,wr,Nn,on.data)):o.texImage2D(C.TEXTURE_2D,0,kn,on.width,on.height,0,wr,Nn,on.data);else if(De.isCompressedTexture)if(De.isCompressedArrayTexture){Xi&&ht&&o.texStorage3D(C.TEXTURE_2D_ARRAY,ir,kn,Ii[0].width,Ii[0].height,on.depth);for(let Jt=0,Zn=Ii.length;Jt<Zn;Jt++)Mr=Ii[Jt],De.format!==Ze?wr!==null?Xi?o.compressedTexSubImage3D(C.TEXTURE_2D_ARRAY,Jt,0,0,0,Mr.width,Mr.height,on.depth,wr,Mr.data,0,0):o.compressedTexImage3D(C.TEXTURE_2D_ARRAY,Jt,kn,Mr.width,Mr.height,on.depth,0,Mr.data,0,0):w.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xi?o.texSubImage3D(C.TEXTURE_2D_ARRAY,Jt,0,0,0,Mr.width,Mr.height,on.depth,wr,Nn,Mr.data):o.texImage3D(C.TEXTURE_2D_ARRAY,Jt,kn,Mr.width,Mr.height,on.depth,0,wr,Nn,Mr.data)}else{Xi&&ht&&o.texStorage2D(C.TEXTURE_2D,ir,kn,Ii[0].width,Ii[0].height);for(let Jt=0,Zn=Ii.length;Jt<Zn;Jt++)Mr=Ii[Jt],De.format!==Ze?wr!==null?Xi?o.compressedTexSubImage2D(C.TEXTURE_2D,Jt,0,0,Mr.width,Mr.height,wr,Mr.data):o.compressedTexImage2D(C.TEXTURE_2D,Jt,kn,Mr.width,Mr.height,0,Mr.data):w.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xi?o.texSubImage2D(C.TEXTURE_2D,Jt,0,0,Mr.width,Mr.height,wr,Nn,Mr.data):o.texImage2D(C.TEXTURE_2D,Jt,kn,Mr.width,Mr.height,0,wr,Nn,Mr.data)}else if(De.isDataArrayTexture)Xi?(ht&&o.texStorage3D(C.TEXTURE_2D_ARRAY,ir,kn,on.width,on.height,on.depth),o.texSubImage3D(C.TEXTURE_2D_ARRAY,0,0,0,0,on.width,on.height,on.depth,wr,Nn,on.data)):o.texImage3D(C.TEXTURE_2D_ARRAY,0,kn,on.width,on.height,on.depth,0,wr,Nn,on.data);else if(De.isData3DTexture)Xi?(ht&&o.texStorage3D(C.TEXTURE_3D,ir,kn,on.width,on.height,on.depth),o.texSubImage3D(C.TEXTURE_3D,0,0,0,0,on.width,on.height,on.depth,wr,Nn,on.data)):o.texImage3D(C.TEXTURE_3D,0,kn,on.width,on.height,on.depth,0,wr,Nn,on.data);else if(De.isFramebufferTexture){if(ht)if(Xi)o.texStorage2D(C.TEXTURE_2D,ir,kn,on.width,on.height);else{let Jt=on.width,Zn=on.height;for(let $n=0;$n<ir;$n++)o.texImage2D(C.TEXTURE_2D,$n,kn,Jt,Zn,0,wr,Nn,null),Jt>>=1,Zn>>=1}}else if(Ii.length>0&&Jr){Xi&&ht&&o.texStorage2D(C.TEXTURE_2D,ir,kn,Ii[0].width,Ii[0].height);for(let Jt=0,Zn=Ii.length;Jt<Zn;Jt++)Mr=Ii[Jt],Xi?o.texSubImage2D(C.TEXTURE_2D,Jt,0,0,wr,Nn,Mr):o.texImage2D(C.TEXTURE_2D,Jt,kn,wr,Nn,Mr);De.generateMipmaps=!1}else Xi?(ht&&o.texStorage2D(C.TEXTURE_2D,ir,kn,on.width,on.height),o.texSubImage2D(C.TEXTURE_2D,0,0,0,wr,Nn,on)):o.texImage2D(C.TEXTURE_2D,0,kn,wr,Nn,on);Xe(De,Jr)&&et(Un),yn.__version=pr.version,De.onUpdate&&De.onUpdate(De)}tt.__version=De.version}function os(tt,De,nn){if(De.image.length!==6)return;const Un=Dr(tt,De),Wn=De.source;o.bindTexture(C.TEXTURE_CUBE_MAP,tt.__webglTexture,C.TEXTURE0+nn);const pr=f.get(Wn);if(Wn.version!==pr.__version||Un===!0){o.activeTexture(C.TEXTURE0+nn),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,De.flipY),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),C.pixelStorei(C.UNPACK_ALIGNMENT,De.unpackAlignment),C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE);const yn=De.isCompressedTexture||De.image[0].isCompressedTexture,cr=De.image[0]&&De.image[0].isDataTexture,on=[];for(let Jt=0;Jt<6;Jt++)!yn&&!cr?on[Jt]=he(De.image[Jt],!1,!0,U):on[Jt]=cr?De.image[Jt].image:De.image[Jt],on[Jt]=us(De,on[Jt]);const Jr=on[0],wr=Se(Jr)||I,Nn=M.convert(De.format,De.colorSpace),kn=M.convert(De.type),Mr=st(De.internalFormat,Nn,kn,De.colorSpace),Ii=I&&De.isVideoTexture!==!0,Xi=pr.__version===void 0||Un===!0;let ht=we(De,Jr,wr);Ur(C.TEXTURE_CUBE_MAP,De,wr);let ir;if(yn){Ii&&Xi&&o.texStorage2D(C.TEXTURE_CUBE_MAP,ht,Mr,Jr.width,Jr.height);for(let Jt=0;Jt<6;Jt++){ir=on[Jt].mipmaps;for(let Zn=0;Zn<ir.length;Zn++){const $n=ir[Zn];De.format!==Ze?Nn!==null?Ii?o.compressedTexSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn,0,0,$n.width,$n.height,Nn,$n.data):o.compressedTexImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn,Mr,$n.width,$n.height,0,$n.data):w.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ii?o.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn,0,0,$n.width,$n.height,Nn,kn,$n.data):o.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn,Mr,$n.width,$n.height,0,Nn,kn,$n.data)}}}else{ir=De.mipmaps,Ii&&Xi&&(ir.length>0&&ht++,o.texStorage2D(C.TEXTURE_CUBE_MAP,ht,Mr,on[0].width,on[0].height));for(let Jt=0;Jt<6;Jt++)if(cr){Ii?o.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0,0,0,on[Jt].width,on[Jt].height,Nn,kn,on[Jt].data):o.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0,Mr,on[Jt].width,on[Jt].height,0,Nn,kn,on[Jt].data);for(let Zn=0;Zn<ir.length;Zn++){const Vi=ir[Zn].image[Jt].image;Ii?o.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn+1,0,0,Vi.width,Vi.height,Nn,kn,Vi.data):o.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn+1,Mr,Vi.width,Vi.height,0,Nn,kn,Vi.data)}}else{Ii?o.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0,0,0,Nn,kn,on[Jt]):o.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0,Mr,Nn,kn,on[Jt]);for(let Zn=0;Zn<ir.length;Zn++){const $n=ir[Zn];Ii?o.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn+1,0,0,Nn,kn,$n.image[Jt]):o.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,Zn+1,Mr,Nn,kn,$n.image[Jt])}}}Xe(De,wr)&&et(C.TEXTURE_CUBE_MAP),pr.__version=Wn.version,De.onUpdate&&De.onUpdate(De)}tt.__version=De.version}function oi(tt,De,nn,Un,Wn){const pr=M.convert(nn.format,nn.colorSpace),yn=M.convert(nn.type),cr=st(nn.internalFormat,pr,yn,nn.colorSpace);f.get(De).__hasExternalTextures||(Wn===C.TEXTURE_3D||Wn===C.TEXTURE_2D_ARRAY?o.texImage3D(Wn,0,cr,De.width,De.height,De.depth,0,pr,yn,null):o.texImage2D(Wn,0,cr,De.width,De.height,0,pr,yn,null)),o.bindFramebuffer(C.FRAMEBUFFER,tt),vi(De)?Z.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,Un,Wn,f.get(nn).__webglTexture,0,Cr(De)):(Wn===C.TEXTURE_2D||Wn>=C.TEXTURE_CUBE_MAP_POSITIVE_X&&Wn<=C.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&C.framebufferTexture2D(C.FRAMEBUFFER,Un,Wn,f.get(nn).__webglTexture,0),o.bindFramebuffer(C.FRAMEBUFFER,null)}function ot(tt,De,nn){if(C.bindRenderbuffer(C.RENDERBUFFER,tt),De.depthBuffer&&!De.stencilBuffer){let Un=C.DEPTH_COMPONENT16;if(nn||vi(De)){const Wn=De.depthTexture;Wn&&Wn.isDepthTexture&&(Wn.type===zo?Un=C.DEPTH_COMPONENT32F:Wn.type===gs&&(Un=C.DEPTH_COMPONENT24));const pr=Cr(De);vi(De)?Z.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,pr,Un,De.width,De.height):C.renderbufferStorageMultisample(C.RENDERBUFFER,pr,Un,De.width,De.height)}else C.renderbufferStorage(C.RENDERBUFFER,Un,De.width,De.height);C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,tt)}else if(De.depthBuffer&&De.stencilBuffer){const Un=Cr(De);nn&&vi(De)===!1?C.renderbufferStorageMultisample(C.RENDERBUFFER,Un,C.DEPTH24_STENCIL8,De.width,De.height):vi(De)?Z.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,Un,C.DEPTH24_STENCIL8,De.width,De.height):C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_STENCIL,De.width,De.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.RENDERBUFFER,tt)}else{const Un=De.isWebGLMultipleRenderTargets===!0?De.texture:[De.texture];for(let Wn=0;Wn<Un.length;Wn++){const pr=Un[Wn],yn=M.convert(pr.format,pr.colorSpace),cr=M.convert(pr.type),on=st(pr.internalFormat,yn,cr,pr.colorSpace),Jr=Cr(De);nn&&vi(De)===!1?C.renderbufferStorageMultisample(C.RENDERBUFFER,Jr,on,De.width,De.height):vi(De)?Z.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,Jr,on,De.width,De.height):C.renderbufferStorage(C.RENDERBUFFER,on,De.width,De.height)}}C.bindRenderbuffer(C.RENDERBUFFER,null)}function zn(tt,De){if(De&&De.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(C.FRAMEBUFFER,tt),!(De.depthTexture&&De.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!f.get(De.depthTexture).__webglTexture||De.depthTexture.image.width!==De.width||De.depthTexture.image.height!==De.height)&&(De.depthTexture.image.width=De.width,De.depthTexture.image.height=De.height,De.depthTexture.needsUpdate=!0),Tn(De.depthTexture,0);const Un=f.get(De.depthTexture).__webglTexture,Wn=Cr(De);if(De.depthTexture.format===Dn)vi(De)?Z.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,Un,0,Wn):C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,Un,0);else if(De.depthTexture.format===Ln)vi(De)?Z.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,Un,0,Wn):C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,Un,0);else throw new Error("Unknown depthTexture format")}function Kt(tt){const De=f.get(tt),nn=tt.isWebGLCubeRenderTarget===!0;if(tt.depthTexture&&!De.__autoAllocateDepthBuffer){if(nn)throw new Error("target.depthTexture not supported in Cube render targets");zn(De.__webglFramebuffer,tt)}else if(nn){De.__webglDepthbuffer=[];for(let Un=0;Un<6;Un++)o.bindFramebuffer(C.FRAMEBUFFER,De.__webglFramebuffer[Un]),De.__webglDepthbuffer[Un]=C.createRenderbuffer(),ot(De.__webglDepthbuffer[Un],tt,!1)}else o.bindFramebuffer(C.FRAMEBUFFER,De.__webglFramebuffer),De.__webglDepthbuffer=C.createRenderbuffer(),ot(De.__webglDepthbuffer,tt,!1);o.bindFramebuffer(C.FRAMEBUFFER,null)}function hn(tt,De,nn){const Un=f.get(tt);De!==void 0&&oi(Un.__webglFramebuffer,tt,tt.texture,C.COLOR_ATTACHMENT0,C.TEXTURE_2D),nn!==void 0&&Kt(tt)}function Cn(tt){const De=tt.texture,nn=f.get(tt),Un=f.get(De);tt.addEventListener("dispose",Mn),tt.isWebGLMultipleRenderTargets!==!0&&(Un.__webglTexture===void 0&&(Un.__webglTexture=C.createTexture()),Un.__version=De.version,B.memory.textures++);const Wn=tt.isWebGLCubeRenderTarget===!0,pr=tt.isWebGLMultipleRenderTargets===!0,yn=Se(tt)||I;if(Wn){nn.__webglFramebuffer=[];for(let cr=0;cr<6;cr++)nn.__webglFramebuffer[cr]=C.createFramebuffer()}else{if(nn.__webglFramebuffer=C.createFramebuffer(),pr)if(y.drawBuffers){const cr=tt.texture;for(let on=0,Jr=cr.length;on<Jr;on++){const wr=f.get(cr[on]);wr.__webglTexture===void 0&&(wr.__webglTexture=C.createTexture(),B.memory.textures++)}}else w.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(I&&tt.samples>0&&vi(tt)===!1){const cr=pr?De:[De];nn.__webglMultisampledFramebuffer=C.createFramebuffer(),nn.__webglColorRenderbuffer=[],o.bindFramebuffer(C.FRAMEBUFFER,nn.__webglMultisampledFramebuffer);for(let on=0;on<cr.length;on++){const Jr=cr[on];nn.__webglColorRenderbuffer[on]=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,nn.__webglColorRenderbuffer[on]);const wr=M.convert(Jr.format,Jr.colorSpace),Nn=M.convert(Jr.type),kn=st(Jr.internalFormat,wr,Nn,Jr.colorSpace,tt.isXRRenderTarget===!0),Mr=Cr(tt);C.renderbufferStorageMultisample(C.RENDERBUFFER,Mr,kn,tt.width,tt.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+on,C.RENDERBUFFER,nn.__webglColorRenderbuffer[on])}C.bindRenderbuffer(C.RENDERBUFFER,null),tt.depthBuffer&&(nn.__webglDepthRenderbuffer=C.createRenderbuffer(),ot(nn.__webglDepthRenderbuffer,tt,!0)),o.bindFramebuffer(C.FRAMEBUFFER,null)}}if(Wn){o.bindTexture(C.TEXTURE_CUBE_MAP,Un.__webglTexture),Ur(C.TEXTURE_CUBE_MAP,De,yn);for(let cr=0;cr<6;cr++)oi(nn.__webglFramebuffer[cr],tt,De,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+cr);Xe(De,yn)&&et(C.TEXTURE_CUBE_MAP),o.unbindTexture()}else if(pr){const cr=tt.texture;for(let on=0,Jr=cr.length;on<Jr;on++){const wr=cr[on],Nn=f.get(wr);o.bindTexture(C.TEXTURE_2D,Nn.__webglTexture),Ur(C.TEXTURE_2D,wr,yn),oi(nn.__webglFramebuffer,tt,wr,C.COLOR_ATTACHMENT0+on,C.TEXTURE_2D),Xe(wr,yn)&&et(C.TEXTURE_2D)}o.unbindTexture()}else{let cr=C.TEXTURE_2D;(tt.isWebGL3DRenderTarget||tt.isWebGLArrayRenderTarget)&&(I?cr=tt.isWebGL3DRenderTarget?C.TEXTURE_3D:C.TEXTURE_2D_ARRAY:w.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(cr,Un.__webglTexture),Ur(cr,De,yn),oi(nn.__webglFramebuffer,tt,De,C.COLOR_ATTACHMENT0,cr),Xe(De,yn)&&et(cr),o.unbindTexture()}tt.depthBuffer&&Kt(tt)}function kr(tt){const De=Se(tt)||I,nn=tt.isWebGLMultipleRenderTargets===!0?tt.texture:[tt.texture];for(let Un=0,Wn=nn.length;Un<Wn;Un++){const pr=nn[Un];if(Xe(pr,De)){const yn=tt.isWebGLCubeRenderTarget?C.TEXTURE_CUBE_MAP:C.TEXTURE_2D,cr=f.get(pr).__webglTexture;o.bindTexture(yn,cr),et(yn),o.unbindTexture()}}}function mr(tt){if(I&&tt.samples>0&&vi(tt)===!1){const De=tt.isWebGLMultipleRenderTargets?tt.texture:[tt.texture],nn=tt.width,Un=tt.height;let Wn=C.COLOR_BUFFER_BIT;const pr=[],yn=tt.stencilBuffer?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,cr=f.get(tt),on=tt.isWebGLMultipleRenderTargets===!0;if(on)for(let Jr=0;Jr<De.length;Jr++)o.bindFramebuffer(C.FRAMEBUFFER,cr.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+Jr,C.RENDERBUFFER,null),o.bindFramebuffer(C.FRAMEBUFFER,cr.__webglFramebuffer),C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0+Jr,C.TEXTURE_2D,null,0);o.bindFramebuffer(C.READ_FRAMEBUFFER,cr.__webglMultisampledFramebuffer),o.bindFramebuffer(C.DRAW_FRAMEBUFFER,cr.__webglFramebuffer);for(let Jr=0;Jr<De.length;Jr++){pr.push(C.COLOR_ATTACHMENT0+Jr),tt.depthBuffer&&pr.push(yn);const wr=cr.__ignoreDepthValues!==void 0?cr.__ignoreDepthValues:!1;if(wr===!1&&(tt.depthBuffer&&(Wn|=C.DEPTH_BUFFER_BIT),tt.stencilBuffer&&(Wn|=C.STENCIL_BUFFER_BIT)),on&&C.framebufferRenderbuffer(C.READ_FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,cr.__webglColorRenderbuffer[Jr]),wr===!0&&(C.invalidateFramebuffer(C.READ_FRAMEBUFFER,[yn]),C.invalidateFramebuffer(C.DRAW_FRAMEBUFFER,[yn])),on){const Nn=f.get(De[Jr]).__webglTexture;C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,Nn,0)}C.blitFramebuffer(0,0,nn,Un,0,0,nn,Un,Wn,C.NEAREST),te&&C.invalidateFramebuffer(C.READ_FRAMEBUFFER,pr)}if(o.bindFramebuffer(C.READ_FRAMEBUFFER,null),o.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),on)for(let Jr=0;Jr<De.length;Jr++){o.bindFramebuffer(C.FRAMEBUFFER,cr.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+Jr,C.RENDERBUFFER,cr.__webglColorRenderbuffer[Jr]);const wr=f.get(De[Jr]).__webglTexture;o.bindFramebuffer(C.FRAMEBUFFER,cr.__webglFramebuffer),C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0+Jr,C.TEXTURE_2D,wr,0)}o.bindFramebuffer(C.DRAW_FRAMEBUFFER,cr.__webglMultisampledFramebuffer)}}function Cr(tt){return Math.min(q,tt.samples)}function vi(tt){const De=f.get(tt);return I&&tt.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&De.__useRenderToTexture!==!1}function Ui(tt){const De=B.render.frame;ie.get(tt)!==De&&(ie.set(tt,De),tt.update())}function us(tt,De){const nn=tt.colorSpace,Un=tt.format,Wn=tt.type;return tt.isCompressedTexture===!0||tt.format===Jl||nn!==Xl&&nn!==mc&&(nn===ai?I===!1?e.has("EXT_sRGB")===!0&&Un===Ze?(tt.format=Jl,tt.minFilter=Zi,tt.generateMipmaps=!1):De=$l.sRGBToLinear(De):(Un!==Ze||Wn!==bo)&&w.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):w.error("THREE.WebGLTextures: Unsupported texture color space:",nn)),De}this.allocateTextureUnit=fn,this.resetTextureUnits=un,this.setTexture2D=Tn,this.setTexture2DArray=Lt,this.setTexture3D=dn,this.setTextureCube=tr,this.rebindTextures=hn,this.setupRenderTarget=Cn,this.updateRenderTargetMipmap=kr,this.updateMultisampleRenderTarget=mr,this.setupDepthRenderbuffer=Kt,this.setupFrameBufferTexture=oi,this.useMultisampledRTT=vi}function Gy(C,e,o){const f=o.isWebGL2;function y(M,B=mc){let I;if(M===bo)return C.UNSIGNED_BYTE;if(M===Za)return C.UNSIGNED_SHORT_4_4_4_4;if(M===fc)return C.UNSIGNED_SHORT_5_5_5_1;if(M===ks)return C.BYTE;if(M===Ea)return C.SHORT;if(M===zs)return C.UNSIGNED_SHORT;if(M===Ro)return C.INT;if(M===gs)return C.UNSIGNED_INT;if(M===zo)return C.FLOAT;if(M===ba)return f?C.HALF_FLOAT:(I=e.get("OES_texture_half_float"),I!==null?I.HALF_FLOAT_OES:null);if(M===Nc)return C.ALPHA;if(M===Ze)return C.RGBA;if(M===St)return C.LUMINANCE;if(M===pn)return C.LUMINANCE_ALPHA;if(M===Dn)return C.DEPTH_COMPONENT;if(M===Ln)return C.DEPTH_STENCIL;if(M===Jl)return I=e.get("EXT_sRGB"),I!==null?I.SRGB_ALPHA_EXT:null;if(M===lr)return C.RED;if(M===je)return C.RED_INTEGER;if(M===Le)return C.RG;if(M===Fe)return C.RG_INTEGER;if(M===at)return C.RGBA_INTEGER;if(M===Oe||M===$e||M===dt||M===_t)if(B===ai)if(I=e.get("WEBGL_compressed_texture_s3tc_srgb"),I!==null){if(M===Oe)return I.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(M===$e)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(M===dt)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(M===_t)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(I=e.get("WEBGL_compressed_texture_s3tc"),I!==null){if(M===Oe)return I.COMPRESSED_RGB_S3TC_DXT1_EXT;if(M===$e)return I.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(M===dt)return I.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(M===_t)return I.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(M===Tt||M===an||M===ln||M===Me)if(I=e.get("WEBGL_compressed_texture_pvrtc"),I!==null){if(M===Tt)return I.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(M===an)return I.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(M===ln)return I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(M===Me)return I.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(M===He)return I=e.get("WEBGL_compressed_texture_etc1"),I!==null?I.COMPRESSED_RGB_ETC1_WEBGL:null;if(M===lt||M===Qt)if(I=e.get("WEBGL_compressed_texture_etc"),I!==null){if(M===lt)return B===ai?I.COMPRESSED_SRGB8_ETC2:I.COMPRESSED_RGB8_ETC2;if(M===Qt)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:I.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(M===wn||M===Gn||M===gr||M===Wr||M===mi||M===Ai||M===Xn||M===Zr||M===Gi||M===Hi||M===Ni||M===Js||M===po||M===ms)if(I=e.get("WEBGL_compressed_texture_astc"),I!==null){if(M===wn)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:I.COMPRESSED_RGBA_ASTC_4x4_KHR;if(M===Gn)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:I.COMPRESSED_RGBA_ASTC_5x4_KHR;if(M===gr)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:I.COMPRESSED_RGBA_ASTC_5x5_KHR;if(M===Wr)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:I.COMPRESSED_RGBA_ASTC_6x5_KHR;if(M===mi)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:I.COMPRESSED_RGBA_ASTC_6x6_KHR;if(M===Ai)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:I.COMPRESSED_RGBA_ASTC_8x5_KHR;if(M===Xn)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:I.COMPRESSED_RGBA_ASTC_8x6_KHR;if(M===Zr)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:I.COMPRESSED_RGBA_ASTC_8x8_KHR;if(M===Gi)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:I.COMPRESSED_RGBA_ASTC_10x5_KHR;if(M===Hi)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:I.COMPRESSED_RGBA_ASTC_10x6_KHR;if(M===Ni)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:I.COMPRESSED_RGBA_ASTC_10x8_KHR;if(M===Js)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:I.COMPRESSED_RGBA_ASTC_10x10_KHR;if(M===po)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:I.COMPRESSED_RGBA_ASTC_12x10_KHR;if(M===ms)return B===ai?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:I.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(M===za)if(I=e.get("EXT_texture_compression_bptc"),I!==null){if(M===za)return B===ai?I.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:I.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(M===ua||M===qo||M===Qi||M===qs)if(I=e.get("EXT_texture_compression_rgtc"),I!==null){if(M===za)return I.COMPRESSED_RED_RGTC1_EXT;if(M===qo)return I.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(M===Qi)return I.COMPRESSED_RED_GREEN_RGTC2_EXT;if(M===qs)return I.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return M===Ma?f?C.UNSIGNED_INT_24_8:(I=e.get("WEBGL_depth_texture"),I!==null?I.UNSIGNED_INT_24_8_WEBGL:null):C[M]!==void 0?C[M]:null}return{convert:y}}class Ny extends Li{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class yf extends Bi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const l3={type:"move"};class uh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Qe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const o=this._hand;if(o)for(const f of e.hand.values())this._getHandJoint(o,f)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,o,f){let y=null,M=null,B=null;const I=this._targetRay,D=this._grip,U=this._hand;if(e&&o.session.visibilityState!=="visible-blurred"){if(U&&e.hand){B=!0;for(const fe of e.hand.values()){const $=o.getJointPose(fe,f),re=this._getHandJoint(U,fe);$!==null&&(re.matrix.fromArray($.transform.matrix),re.matrix.decompose(re.position,re.rotation,re.scale),re.matrixWorldNeedsUpdate=!0,re.jointRadius=$.radius),re.visible=$!==null}const X=U.joints["index-finger-tip"],q=U.joints["thumb-tip"],Z=X.position.distanceTo(q.position),te=.02,ie=.005;U.inputState.pinching&&Z>te+ie?(U.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!U.inputState.pinching&&Z<=te-ie&&(U.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else D!==null&&e.gripSpace&&(M=o.getPose(e.gripSpace,f),M!==null&&(D.matrix.fromArray(M.transform.matrix),D.matrix.decompose(D.position,D.rotation,D.scale),D.matrixWorldNeedsUpdate=!0,M.linearVelocity?(D.hasLinearVelocity=!0,D.linearVelocity.copy(M.linearVelocity)):D.hasLinearVelocity=!1,M.angularVelocity?(D.hasAngularVelocity=!0,D.angularVelocity.copy(M.angularVelocity)):D.hasAngularVelocity=!1));I!==null&&(y=o.getPose(e.targetRaySpace,f),y===null&&M!==null&&(y=M),y!==null&&(I.matrix.fromArray(y.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.matrixWorldNeedsUpdate=!0,y.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(y.linearVelocity)):I.hasLinearVelocity=!1,y.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(y.angularVelocity)):I.hasAngularVelocity=!1,this.dispatchEvent(l3)))}return I!==null&&(I.visible=y!==null),D!==null&&(D.visible=M!==null),U!==null&&(U.visible=B!==null),this}_getHandJoint(e,o){if(e.joints[o.jointName]===void 0){const f=new yf;f.matrixAutoUpdate=!1,f.visible=!1,e.joints[o.jointName]=f,e.add(f)}return e.joints[o.jointName]}}class Uy extends $i{constructor(e,o,f,y,M,B,I,D,U,X){if(X=X!==void 0?X:Dn,X!==Dn&&X!==Ln)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");f===void 0&&X===Dn&&(f=gs),f===void 0&&X===Ln&&(f=Ma),super(null,y,M,B,I,D,X,f,U),this.isDepthTexture=!0,this.image={width:e,height:o},this.magFilter=I!==void 0?I:Pi,this.minFilter=D!==void 0?D:Pi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const o=super.toJSON(e);return this.compareFunction!==null&&(o.compareFunction=this.compareFunction),o}}class c3 extends vl{constructor(e,o){super();const f=this;let y=null,M=1,B=null,I="local-floor",D=1,U=null,X=null,q=null,Z=null,te=null,ie=null;const fe=o.getContextAttributes();let $=null,re=null;const be=[],he=[],Se=new Li;Se.layers.enable(1),Se.viewport=new Mi;const Ue=new Li;Ue.layers.enable(2),Ue.viewport=new Mi;const Xe=[Se,Ue],et=new Ny;et.layers.enable(1),et.layers.enable(2);let st=null,we=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Lt){let dn=be[Lt];return dn===void 0&&(dn=new uh,be[Lt]=dn),dn.getTargetRaySpace()},this.getControllerGrip=function(Lt){let dn=be[Lt];return dn===void 0&&(dn=new uh,be[Lt]=dn),dn.getGripSpace()},this.getHand=function(Lt){let dn=be[Lt];return dn===void 0&&(dn=new uh,be[Lt]=dn),dn.getHandSpace()};function We(Lt){const dn=he.indexOf(Lt.inputSource);if(dn===-1)return;const tr=be[dn];tr!==void 0&&(tr.update(Lt.inputSource,Lt.frame,U||B),tr.dispatchEvent({type:Lt.type,data:Lt.inputSource}))}function Yt(){y.removeEventListener("select",We),y.removeEventListener("selectstart",We),y.removeEventListener("selectend",We),y.removeEventListener("squeeze",We),y.removeEventListener("squeezestart",We),y.removeEventListener("squeezeend",We),y.removeEventListener("end",Yt),y.removeEventListener("inputsourceschange",Mn);for(let Lt=0;Lt<be.length;Lt++){const dn=he[Lt];dn!==null&&(he[Lt]=null,be[Lt].disconnect(dn))}st=null,we=null,e.setRenderTarget($),te=null,Z=null,q=null,y=null,re=null,Tn.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Lt){M=Lt,f.isPresenting===!0&&w.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Lt){I=Lt,f.isPresenting===!0&&w.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return U||B},this.setReferenceSpace=function(Lt){U=Lt},this.getBaseLayer=function(){return Z!==null?Z:te},this.getBinding=function(){return q},this.getFrame=function(){return ie},this.getSession=function(){return y},this.setSession=function(Lt){return ss(this,null,function*(){if(y=Lt,y!==null){if($=e.getRenderTarget(),y.addEventListener("select",We),y.addEventListener("selectstart",We),y.addEventListener("selectend",We),y.addEventListener("squeeze",We),y.addEventListener("squeezestart",We),y.addEventListener("squeezeend",We),y.addEventListener("end",Yt),y.addEventListener("inputsourceschange",Mn),fe.xrCompatible!==!0&&(yield o.makeXRCompatible()),y.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const dn={antialias:y.renderState.layers===void 0?fe.antialias:!0,alpha:!0,depth:fe.depth,stencil:fe.stencil,framebufferScaleFactor:M};te=new XRWebGLLayer(y,o,dn),y.updateRenderState({baseLayer:te}),re=new Sa(te.framebufferWidth,te.framebufferHeight,{format:Ze,type:bo,colorSpace:e.outputColorSpace,stencilBuffer:fe.stencil})}else{let dn=null,tr=null,cn=null;fe.depth&&(cn=fe.stencil?o.DEPTH24_STENCIL8:o.DEPTH_COMPONENT24,dn=fe.stencil?Ln:Dn,tr=fe.stencil?Ma:gs);const yt={colorFormat:o.RGBA8,depthFormat:cn,scaleFactor:M};q=new XRWebGLBinding(y,o),Z=q.createProjectionLayer(yt),y.updateRenderState({layers:[Z]}),re=new Sa(Z.textureWidth,Z.textureHeight,{format:Ze,type:bo,depthTexture:new Uy(Z.textureWidth,Z.textureHeight,tr,void 0,void 0,void 0,void 0,void 0,void 0,dn),stencilBuffer:fe.stencil,colorSpace:e.outputColorSpace,samples:fe.antialias?4:0});const Nr=e.properties.get(re);Nr.__ignoreDepthValues=Z.ignoreDepthValues}re.isXRRenderTarget=!0,this.setFoveation(D),U=null,B=yield y.requestReferenceSpace(I),Tn.setContext(y),Tn.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(y!==null)return y.environmentBlendMode};function Mn(Lt){for(let dn=0;dn<Lt.removed.length;dn++){const tr=Lt.removed[dn],cn=he.indexOf(tr);cn>=0&&(he[cn]=null,be[cn].disconnect(tr))}for(let dn=0;dn<Lt.added.length;dn++){const tr=Lt.added[dn];let cn=he.indexOf(tr);if(cn===-1){for(let Nr=0;Nr<be.length;Nr++)if(Nr>=he.length){he.push(tr),cn=Nr;break}else if(he[Nr]===null){he[Nr]=tr,cn=Nr;break}if(cn===-1)break}const yt=be[cn];yt&&yt.connect(tr)}}const Gt=new Qe,Ut=new Qe;function Xt(Lt,dn,tr){Gt.setFromMatrixPosition(dn.matrixWorld),Ut.setFromMatrixPosition(tr.matrixWorld);const cn=Gt.distanceTo(Ut),yt=dn.projectionMatrix.elements,Nr=tr.projectionMatrix.elements,Ur=yt[14]/(yt[10]-1),Dr=yt[14]/(yt[10]+1),Wi=(yt[9]+1)/yt[5],os=(yt[9]-1)/yt[5],oi=(yt[8]-1)/yt[0],ot=(Nr[8]+1)/Nr[0],zn=Ur*oi,Kt=Ur*ot,hn=cn/(-oi+ot),Cn=hn*-oi;dn.matrixWorld.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.translateX(Cn),Lt.translateZ(hn),Lt.matrixWorld.compose(Lt.position,Lt.quaternion,Lt.scale),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert();const kr=Ur+hn,mr=Dr+hn,Cr=zn-Cn,vi=Kt+(cn-Cn),Ui=Wi*Dr/mr*kr,us=os*Dr/mr*kr;Lt.projectionMatrix.makePerspective(Cr,vi,Ui,us,kr,mr),Lt.projectionMatrixInverse.copy(Lt.projectionMatrix).invert()}function xn(Lt,dn){dn===null?Lt.matrixWorld.copy(Lt.matrix):Lt.matrixWorld.multiplyMatrices(dn.matrixWorld,Lt.matrix),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert()}this.updateCamera=function(Lt){if(y===null)return;et.near=Ue.near=Se.near=Lt.near,et.far=Ue.far=Se.far=Lt.far,(st!==et.near||we!==et.far)&&(y.updateRenderState({depthNear:et.near,depthFar:et.far}),st=et.near,we=et.far);const dn=Lt.parent,tr=et.cameras;xn(et,dn);for(let cn=0;cn<tr.length;cn++)xn(tr[cn],dn);tr.length===2?Xt(et,Se,Ue):et.projectionMatrix.copy(Se.projectionMatrix),un(Lt,et,dn)};function un(Lt,dn,tr){tr===null?Lt.matrix.copy(dn.matrixWorld):(Lt.matrix.copy(tr.matrixWorld),Lt.matrix.invert(),Lt.matrix.multiply(dn.matrixWorld)),Lt.matrix.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.updateMatrixWorld(!0);const cn=Lt.children;for(let yt=0,Nr=cn.length;yt<Nr;yt++)cn[yt].updateMatrixWorld(!0);Lt.projectionMatrix.copy(dn.projectionMatrix),Lt.projectionMatrixInverse.copy(dn.projectionMatrixInverse),Lt.isPerspectiveCamera&&(Lt.fov=vc*2*Math.atan(1/Lt.projectionMatrix.elements[5]),Lt.zoom=1)}this.getCamera=function(){return et},this.getFoveation=function(){if(!(Z===null&&te===null))return D},this.setFoveation=function(Lt){D=Lt,Z!==null&&(Z.fixedFoveation=Lt),te!==null&&te.fixedFoveation!==void 0&&(te.fixedFoveation=Lt)};let fn=null;function jt(Lt,dn){if(X=dn.getViewerPose(U||B),ie=dn,X!==null){const tr=X.views;te!==null&&(e.setRenderTargetFramebuffer(re,te.framebuffer),e.setRenderTarget(re));let cn=!1;tr.length!==et.cameras.length&&(et.cameras.length=0,cn=!0);for(let yt=0;yt<tr.length;yt++){const Nr=tr[yt];let Ur=null;if(te!==null)Ur=te.getViewport(Nr);else{const Wi=q.getViewSubImage(Z,Nr);Ur=Wi.viewport,yt===0&&(e.setRenderTargetTextures(re,Wi.colorTexture,Z.ignoreDepthValues?void 0:Wi.depthStencilTexture),e.setRenderTarget(re))}let Dr=Xe[yt];Dr===void 0&&(Dr=new Li,Dr.layers.enable(yt),Dr.viewport=new Mi,Xe[yt]=Dr),Dr.matrix.fromArray(Nr.transform.matrix),Dr.matrix.decompose(Dr.position,Dr.quaternion,Dr.scale),Dr.projectionMatrix.fromArray(Nr.projectionMatrix),Dr.projectionMatrixInverse.copy(Dr.projectionMatrix).invert(),Dr.viewport.set(Ur.x,Ur.y,Ur.width,Ur.height),yt===0&&(et.matrix.copy(Dr.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale)),cn===!0&&et.cameras.push(Dr)}}for(let tr=0;tr<be.length;tr++){const cn=he[tr],yt=be[tr];cn!==null&&yt!==void 0&&yt.update(cn,dn,U||B)}fn&&fn(Lt,dn),dn.detectedPlanes&&f.dispatchEvent({type:"planesdetected",data:dn}),ie=null}const Tn=new hu;Tn.setAnimationLoop(jt),this.setAnimationLoop=function(Lt){fn=Lt},this.dispose=function(){}}}function p3(C,e){function o($,re){$.matrixAutoUpdate===!0&&$.updateMatrix(),re.value.copy($.matrix)}function f($,re){re.color.getRGB($.fogColor.value,th(C)),re.isFog?($.fogNear.value=re.near,$.fogFar.value=re.far):re.isFogExp2&&($.fogDensity.value=re.density)}function y($,re,be,he,Se){re.isMeshBasicMaterial||re.isMeshLambertMaterial?M($,re):re.isMeshToonMaterial?(M($,re),q($,re)):re.isMeshPhongMaterial?(M($,re),X($,re)):re.isMeshStandardMaterial?(M($,re),Z($,re),re.isMeshPhysicalMaterial&&te($,re,Se)):re.isMeshMatcapMaterial?(M($,re),ie($,re)):re.isMeshDepthMaterial?M($,re):re.isMeshDistanceMaterial?(M($,re),fe($,re)):re.isMeshNormalMaterial?M($,re):re.isLineBasicMaterial?(B($,re),re.isLineDashedMaterial&&I($,re)):re.isPointsMaterial?D($,re,be,he):re.isSpriteMaterial?U($,re):re.isShadowMaterial?($.color.value.copy(re.color),$.opacity.value=re.opacity):re.isShaderMaterial&&(re.uniformsNeedUpdate=!1)}function M($,re){$.opacity.value=re.opacity,re.color&&$.diffuse.value.copy(re.color),re.emissive&&$.emissive.value.copy(re.emissive).multiplyScalar(re.emissiveIntensity),re.map&&($.map.value=re.map,o(re.map,$.mapTransform)),re.alphaMap&&($.alphaMap.value=re.alphaMap,o(re.alphaMap,$.alphaMapTransform)),re.bumpMap&&($.bumpMap.value=re.bumpMap,o(re.bumpMap,$.bumpMapTransform),$.bumpScale.value=re.bumpScale,re.side===Ve&&($.bumpScale.value*=-1)),re.normalMap&&($.normalMap.value=re.normalMap,o(re.normalMap,$.normalMapTransform),$.normalScale.value.copy(re.normalScale),re.side===Ve&&$.normalScale.value.negate()),re.displacementMap&&($.displacementMap.value=re.displacementMap,o(re.displacementMap,$.displacementMapTransform),$.displacementScale.value=re.displacementScale,$.displacementBias.value=re.displacementBias),re.emissiveMap&&($.emissiveMap.value=re.emissiveMap,o(re.emissiveMap,$.emissiveMapTransform)),re.specularMap&&($.specularMap.value=re.specularMap,o(re.specularMap,$.specularMapTransform)),re.alphaTest>0&&($.alphaTest.value=re.alphaTest);const be=e.get(re).envMap;if(be&&($.envMap.value=be,$.flipEnvMap.value=be.isCubeTexture&&be.isRenderTargetTexture===!1?-1:1,$.reflectivity.value=re.reflectivity,$.ior.value=re.ior,$.refractionRatio.value=re.refractionRatio),re.lightMap){$.lightMap.value=re.lightMap;const he=C.useLegacyLights===!0?Math.PI:1;$.lightMapIntensity.value=re.lightMapIntensity*he,o(re.lightMap,$.lightMapTransform)}re.aoMap&&($.aoMap.value=re.aoMap,$.aoMapIntensity.value=re.aoMapIntensity,o(re.aoMap,$.aoMapTransform))}function B($,re){$.diffuse.value.copy(re.color),$.opacity.value=re.opacity,re.map&&($.map.value=re.map,o(re.map,$.mapTransform))}function I($,re){$.dashSize.value=re.dashSize,$.totalSize.value=re.dashSize+re.gapSize,$.scale.value=re.scale}function D($,re,be,he){$.diffuse.value.copy(re.color),$.opacity.value=re.opacity,$.size.value=re.size*be,$.scale.value=he*.5,re.map&&($.map.value=re.map,o(re.map,$.uvTransform)),re.alphaMap&&($.alphaMap.value=re.alphaMap,o(re.alphaMap,$.alphaMapTransform)),re.alphaTest>0&&($.alphaTest.value=re.alphaTest)}function U($,re){$.diffuse.value.copy(re.color),$.opacity.value=re.opacity,$.rotation.value=re.rotation,re.map&&($.map.value=re.map,o(re.map,$.mapTransform)),re.alphaMap&&($.alphaMap.value=re.alphaMap,o(re.alphaMap,$.alphaMapTransform)),re.alphaTest>0&&($.alphaTest.value=re.alphaTest)}function X($,re){$.specular.value.copy(re.specular),$.shininess.value=Math.max(re.shininess,1e-4)}function q($,re){re.gradientMap&&($.gradientMap.value=re.gradientMap)}function Z($,re){$.metalness.value=re.metalness,re.metalnessMap&&($.metalnessMap.value=re.metalnessMap,o(re.metalnessMap,$.metalnessMapTransform)),$.roughness.value=re.roughness,re.roughnessMap&&($.roughnessMap.value=re.roughnessMap,o(re.roughnessMap,$.roughnessMapTransform)),e.get(re).envMap&&($.envMapIntensity.value=re.envMapIntensity)}function te($,re,be){$.ior.value=re.ior,re.sheen>0&&($.sheenColor.value.copy(re.sheenColor).multiplyScalar(re.sheen),$.sheenRoughness.value=re.sheenRoughness,re.sheenColorMap&&($.sheenColorMap.value=re.sheenColorMap,o(re.sheenColorMap,$.sheenColorMapTransform)),re.sheenRoughnessMap&&($.sheenRoughnessMap.value=re.sheenRoughnessMap,o(re.sheenRoughnessMap,$.sheenRoughnessMapTransform))),re.clearcoat>0&&($.clearcoat.value=re.clearcoat,$.clearcoatRoughness.value=re.clearcoatRoughness,re.clearcoatMap&&($.clearcoatMap.value=re.clearcoatMap,o(re.clearcoatMap,$.clearcoatMapTransform)),re.clearcoatRoughnessMap&&($.clearcoatRoughnessMap.value=re.clearcoatRoughnessMap,o(re.clearcoatRoughnessMap,$.clearcoatRoughnessMapTransform)),re.clearcoatNormalMap&&($.clearcoatNormalMap.value=re.clearcoatNormalMap,o(re.clearcoatNormalMap,$.clearcoatNormalMapTransform),$.clearcoatNormalScale.value.copy(re.clearcoatNormalScale),re.side===Ve&&$.clearcoatNormalScale.value.negate())),re.iridescence>0&&($.iridescence.value=re.iridescence,$.iridescenceIOR.value=re.iridescenceIOR,$.iridescenceThicknessMinimum.value=re.iridescenceThicknessRange[0],$.iridescenceThicknessMaximum.value=re.iridescenceThicknessRange[1],re.iridescenceMap&&($.iridescenceMap.value=re.iridescenceMap,o(re.iridescenceMap,$.iridescenceMapTransform)),re.iridescenceThicknessMap&&($.iridescenceThicknessMap.value=re.iridescenceThicknessMap,o(re.iridescenceThicknessMap,$.iridescenceThicknessMapTransform))),re.transmission>0&&($.transmission.value=re.transmission,$.transmissionSamplerMap.value=be.texture,$.transmissionSamplerSize.value.set(be.width,be.height),re.transmissionMap&&($.transmissionMap.value=re.transmissionMap,o(re.transmissionMap,$.transmissionMapTransform)),$.thickness.value=re.thickness,re.thicknessMap&&($.thicknessMap.value=re.thicknessMap,o(re.thicknessMap,$.thicknessMapTransform)),$.attenuationDistance.value=re.attenuationDistance,$.attenuationColor.value.copy(re.attenuationColor)),re.anisotropy>0&&($.anisotropyVector.value.set(re.anisotropy*Math.cos(re.anisotropyRotation),re.anisotropy*Math.sin(re.anisotropyRotation)),re.anisotropyMap&&($.anisotropyMap.value=re.anisotropyMap,o(re.anisotropyMap,$.anisotropyMapTransform))),$.specularIntensity.value=re.specularIntensity,$.specularColor.value.copy(re.specularColor),re.specularColorMap&&($.specularColorMap.value=re.specularColorMap,o(re.specularColorMap,$.specularColorMapTransform)),re.specularIntensityMap&&($.specularIntensityMap.value=re.specularIntensityMap,o(re.specularIntensityMap,$.specularIntensityMapTransform))}function ie($,re){re.matcap&&($.matcap.value=re.matcap)}function fe($,re){const be=e.get(re).light;$.referencePosition.value.setFromMatrixPosition(be.matrixWorld),$.nearDistance.value=be.shadow.camera.near,$.farDistance.value=be.shadow.camera.far}return{refreshFogUniforms:f,refreshMaterialUniforms:y}}function jy(C,e,o,f){let y={},M={},B=[];const I=o.isWebGL2?C.getParameter(C.MAX_UNIFORM_BUFFER_BINDINGS):0;function D(be,he){const Se=he.program;f.uniformBlockBinding(be,Se)}function U(be,he){let Se=y[be.id];Se===void 0&&(ie(be),Se=X(be),y[be.id]=Se,be.addEventListener("dispose",$));const Ue=he.program;f.updateUBOMapping(be,Ue);const Xe=e.render.frame;M[be.id]!==Xe&&(Z(be),M[be.id]=Xe)}function X(be){const he=q();be.__bindingPointIndex=he;const Se=C.createBuffer(),Ue=be.__size,Xe=be.usage;return C.bindBuffer(C.UNIFORM_BUFFER,Se),C.bufferData(C.UNIFORM_BUFFER,Ue,Xe),C.bindBuffer(C.UNIFORM_BUFFER,null),C.bindBufferBase(C.UNIFORM_BUFFER,he,Se),Se}function q(){for(let be=0;be<I;be++)if(B.indexOf(be)===-1)return B.push(be),be;return w.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Z(be){const he=y[be.id],Se=be.uniforms,Ue=be.__cache;C.bindBuffer(C.UNIFORM_BUFFER,he);for(let Xe=0,et=Se.length;Xe<et;Xe++){const st=Se[Xe];if(te(st,Xe,Ue)===!0){const we=st.__offset,We=Array.isArray(st.value)?st.value:[st.value];let Yt=0;for(let Mn=0;Mn<We.length;Mn++){const Gt=We[Mn],Ut=fe(Gt);typeof Gt=="number"?(st.__data[0]=Gt,C.bufferSubData(C.UNIFORM_BUFFER,we+Yt,st.__data)):Gt.isMatrix3?(st.__data[0]=Gt.elements[0],st.__data[1]=Gt.elements[1],st.__data[2]=Gt.elements[2],st.__data[3]=Gt.elements[0],st.__data[4]=Gt.elements[3],st.__data[5]=Gt.elements[4],st.__data[6]=Gt.elements[5],st.__data[7]=Gt.elements[0],st.__data[8]=Gt.elements[6],st.__data[9]=Gt.elements[7],st.__data[10]=Gt.elements[8],st.__data[11]=Gt.elements[0]):(Gt.toArray(st.__data,Yt),Yt+=Ut.storage/Float32Array.BYTES_PER_ELEMENT)}C.bufferSubData(C.UNIFORM_BUFFER,we,st.__data)}}C.bindBuffer(C.UNIFORM_BUFFER,null)}function te(be,he,Se){const Ue=be.value;if(Se[he]===void 0){if(typeof Ue=="number")Se[he]=Ue;else{const Xe=Array.isArray(Ue)?Ue:[Ue],et=[];for(let st=0;st<Xe.length;st++)et.push(Xe[st].clone());Se[he]=et}return!0}else if(typeof Ue=="number"){if(Se[he]!==Ue)return Se[he]=Ue,!0}else{const Xe=Array.isArray(Se[he])?Se[he]:[Se[he]],et=Array.isArray(Ue)?Ue:[Ue];for(let st=0;st<Xe.length;st++){const we=Xe[st];if(we.equals(et[st])===!1)return we.copy(et[st]),!0}}return!1}function ie(be){const he=be.uniforms;let Se=0;const Ue=16;let Xe=0;for(let et=0,st=he.length;et<st;et++){const we=he[et],We={boundary:0,storage:0},Yt=Array.isArray(we.value)?we.value:[we.value];for(let Mn=0,Gt=Yt.length;Mn<Gt;Mn++){const Ut=Yt[Mn],Xt=fe(Ut);We.boundary+=Xt.boundary,We.storage+=Xt.storage}if(we.__data=new Float32Array(We.storage/Float32Array.BYTES_PER_ELEMENT),we.__offset=Se,et>0){Xe=Se%Ue;const Mn=Ue-Xe;Xe!==0&&Mn-We.boundary<0&&(Se+=Ue-Xe,we.__offset=Se)}Se+=We.storage}return Xe=Se%Ue,Xe>0&&(Se+=Ue-Xe),be.__size=Se,be.__cache={},this}function fe(be){const he={boundary:0,storage:0};return typeof be=="number"?(he.boundary=4,he.storage=4):be.isVector2?(he.boundary=8,he.storage=8):be.isVector3||be.isColor?(he.boundary=16,he.storage=12):be.isVector4?(he.boundary=16,he.storage=16):be.isMatrix3?(he.boundary=48,he.storage=48):be.isMatrix4?(he.boundary=64,he.storage=64):be.isTexture?w.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):w.warn("THREE.WebGLRenderer: Unsupported uniform value type.",be),he}function $(be){const he=be.target;he.removeEventListener("dispose",$);const Se=B.indexOf(he.__bindingPointIndex);B.splice(Se,1),C.deleteBuffer(y[he.id]),delete y[he.id],delete M[he.id]}function re(){for(const be in y)C.deleteBuffer(y[be]);B=[],y={},M={}}return{bind:D,update:U,dispose:re}}function u3(){const C=eu("canvas");return C.style.display="block",C}class Hy{constructor(e={}){const{canvas:o=u3(),context:f=null,depth:y=!0,stencil:M=!0,alpha:B=!1,antialias:I=!1,premultipliedAlpha:D=!0,preserveDrawingBuffer:U=!1,powerPreference:X="default",failIfMajorPerformanceCaveat:q=!1}=e;this.isWebGLRenderer=!0;let Z;f!==null?Z=f.getContextAttributes().alpha:Z=B;const te=new Uint32Array(4),ie=new Int32Array(4);let fe=null,$=null;const re=[],be=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ai,this.useLegacyLights=!0,this.toneMapping=co,this.toneMappingExposure=1;const he=this;let Se=!1,Ue=0,Xe=0,et=null,st=-1,we=null;const We=new Mi,Yt=new Mi;let Mn=null;const Gt=new fr(0);let Ut=0,Xt=o.width,xn=o.height,un=1,fn=null,jt=null;const Tn=new Mi(0,0,Xt,xn),Lt=new Mi(0,0,Xt,xn);let dn=!1;const tr=new du;let cn=!1,yt=!1,Nr=null;const Ur=new li,Dr=new gn,Wi=new Qe,os={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function oi(){return et===null?un:1}let ot=f;function zn(Ke,Dt){for(let rn=0;rn<Ke.length;rn++){const Rt=Ke[rn],sn=o.getContext(Rt,Dt);if(sn!==null)return sn}return null}try{const Ke={alpha:!0,depth:y,stencil:M,antialias:I,premultipliedAlpha:D,preserveDrawingBuffer:U,powerPreference:X,failIfMajorPerformanceCaveat:q};if("setAttribute"in o&&o.setAttribute("data-engine",`three.js r${d}`),o.addEventListener("webglcontextlost",ir,!1),o.addEventListener("webglcontextrestored",Jt,!1),o.addEventListener("webglcontextcreationerror",Zn,!1),ot===null){const Dt=["webgl2","webgl","experimental-webgl"];if(he.isWebGL1Renderer===!0&&Dt.shift(),ot=zn(Dt,Ke),ot===null)throw zn(Dt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext!="undefined"&&ot instanceof WebGLRenderingContext&&w.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ot.getShaderPrecisionFormat===void 0&&(ot.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ke){throw w.error("THREE.WebGLRenderer: "+Ke.message),Ke}let Kt,hn,Cn,kr,mr,Cr,vi,Ui,us,tt,De,nn,Un,Wn,pr,yn,cr,on,Jr,wr,Nn,kn,Mr,Ii;function Xi(){Kt=new I_(ot),hn=new w_(ot,Kt,e),Kt.init(hn),kn=new Gy(ot,Kt,hn),Cn=new kp(ot,Kt,hn),kr=new D_(ot),mr=new I1,Cr=new a3(ot,Kt,Cn,mr,hn,kn,kr),vi=new T_(he),Ui=new R_(he),us=new fu(ot,hn),Mr=new S_(ot,Kt,us,hn),tt=new F_(ot,us,kr,Mr),De=new L_(ot,tt,us,kr),Jr=new x1(ot,hn,Cr),yn=new ay(mr),nn=new Dp(he,vi,Ui,Kt,hn,Mr,yn),Un=new p3(he,mr),Wn=new jm,pr=new Py(Kt,hn),on=new C_(he,vi,Ui,Cn,De,Z,D),cr=new zy(he,De,hn),Ii=new jy(ot,kr,hn,Cn),wr=new Cg(ot,Kt,kr,hn),Nn=new O_(ot,Kt,kr,hn),kr.programs=nn.programs,he.capabilities=hn,he.extensions=Kt,he.properties=mr,he.renderLists=Wn,he.shadowMap=cr,he.state=Cn,he.info=kr}Xi();const ht=new c3(he,ot);this.xr=ht,this.getContext=function(){return ot},this.getContextAttributes=function(){return ot.getContextAttributes()},this.forceContextLoss=function(){const Ke=Kt.get("WEBGL_lose_context");Ke&&Ke.loseContext()},this.forceContextRestore=function(){const Ke=Kt.get("WEBGL_lose_context");Ke&&Ke.restoreContext()},this.getPixelRatio=function(){return un},this.setPixelRatio=function(Ke){Ke!==void 0&&(un=Ke,this.setSize(Xt,xn,!1))},this.getSize=function(Ke){return Ke.set(Xt,xn)},this.setSize=function(Ke,Dt,rn=!0){if(ht.isPresenting){w.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Xt=Ke,xn=Dt,o.width=Math.floor(Ke*un),o.height=Math.floor(Dt*un),rn===!0&&(o.style.width=Ke+"px",o.style.height=Dt+"px"),this.setViewport(0,0,Ke,Dt)},this.getDrawingBufferSize=function(Ke){return Ke.set(Xt*un,xn*un).floor()},this.setDrawingBufferSize=function(Ke,Dt,rn){Xt=Ke,xn=Dt,un=rn,o.width=Math.floor(Ke*rn),o.height=Math.floor(Dt*rn),this.setViewport(0,0,Ke,Dt)},this.getCurrentViewport=function(Ke){return Ke.copy(We)},this.getViewport=function(Ke){return Ke.copy(Tn)},this.setViewport=function(Ke,Dt,rn,Rt){Ke.isVector4?Tn.set(Ke.x,Ke.y,Ke.z,Ke.w):Tn.set(Ke,Dt,rn,Rt),Cn.viewport(We.copy(Tn).multiplyScalar(un).floor())},this.getScissor=function(Ke){return Ke.copy(Lt)},this.setScissor=function(Ke,Dt,rn,Rt){Ke.isVector4?Lt.set(Ke.x,Ke.y,Ke.z,Ke.w):Lt.set(Ke,Dt,rn,Rt),Cn.scissor(Yt.copy(Lt).multiplyScalar(un).floor())},this.getScissorTest=function(){return dn},this.setScissorTest=function(Ke){Cn.setScissorTest(dn=Ke)},this.setOpaqueSort=function(Ke){fn=Ke},this.setTransparentSort=function(Ke){jt=Ke},this.getClearColor=function(Ke){return Ke.copy(on.getClearColor())},this.setClearColor=function(){on.setClearColor.apply(on,arguments)},this.getClearAlpha=function(){return on.getClearAlpha()},this.setClearAlpha=function(){on.setClearAlpha.apply(on,arguments)},this.clear=function(Ke=!0,Dt=!0,rn=!0){let Rt=0;if(Ke){let sn=!1;if(et!==null){const Tr=et.texture.format;sn=Tr===at||Tr===Fe||Tr===je}if(sn){const Tr=et.texture.type,ei=Tr===bo||Tr===gs||Tr===zs||Tr===Ma||Tr===Za||Tr===fc,pi=on.getClearColor(),ni=on.getClearAlpha(),ki=pi.r,Si=pi.g,wi=pi.b;ei?(te[0]=ki,te[1]=Si,te[2]=wi,te[3]=ni,ot.clearBufferuiv(ot.COLOR,0,te)):(ie[0]=ki,ie[1]=Si,ie[2]=wi,ie[3]=ni,ot.clearBufferiv(ot.COLOR,0,ie))}else Rt|=ot.COLOR_BUFFER_BIT}Dt&&(Rt|=ot.DEPTH_BUFFER_BIT),rn&&(Rt|=ot.STENCIL_BUFFER_BIT),ot.clear(Rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",ir,!1),o.removeEventListener("webglcontextrestored",Jt,!1),o.removeEventListener("webglcontextcreationerror",Zn,!1),Wn.dispose(),pr.dispose(),mr.dispose(),vi.dispose(),Ui.dispose(),De.dispose(),Mr.dispose(),Ii.dispose(),nn.dispose(),ht.dispose(),ht.removeEventListener("sessionstart",Ms),ht.removeEventListener("sessionend",Pc),Nr&&(Nr.dispose(),Nr=null),Ka.stop()};function ir(Ke){Ke.preventDefault(),w.log("THREE.WebGLRenderer: Context Lost."),Se=!0}function Jt(){w.log("THREE.WebGLRenderer: Context Restored."),Se=!1;const Ke=kr.autoReset,Dt=cr.enabled,rn=cr.autoUpdate,Rt=cr.needsUpdate,sn=cr.type;Xi(),kr.autoReset=Ke,cr.enabled=Dt,cr.autoUpdate=rn,cr.needsUpdate=Rt,cr.type=sn}function Zn(Ke){w.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ke.statusMessage)}function $n(Ke){const Dt=Ke.target;Dt.removeEventListener("dispose",$n),Vi(Dt)}function Vi(Ke){wo(Ke),mr.remove(Ke)}function wo(Ke){const Dt=mr.get(Ke).programs;Dt!==void 0&&(Dt.forEach(function(rn){nn.releaseProgram(rn)}),Ke.isShaderMaterial&&nn.releaseShaderCache(Ke))}this.renderBufferDirect=function(Ke,Dt,rn,Rt,sn,Tr){Dt===null&&(Dt=os);const ei=sn.isMesh&&sn.matrixWorld.determinant()<0,pi=EE(Ke,Dt,rn,Rt,sn);Cn.setMaterial(Rt,ei);let ni=rn.index,ki=1;Rt.wireframe===!0&&(ni=tt.getWireframeAttribute(rn),ki=2);const Si=rn.drawRange,wi=rn.attributes.position;let Fs=Si.start*ki,Vs=(Si.start+Si.count)*ki;Tr!==null&&(Fs=Math.max(Fs,Tr.start*ki),Vs=Math.min(Vs,(Tr.start+Tr.count)*ki)),ni!==null?(Fs=Math.max(Fs,0),Vs=Math.min(Vs,ni.count)):wi!=null&&(Fs=Math.max(Fs,0),Vs=Math.min(Vs,wi.count));const np=Vs-Fs;if(np<0||np===1/0)return;Mr.setup(sn,Rt,pi,rn,ni);let wu,Qs=wr;if(ni!==null&&(wu=us.get(ni),Qs=Nn,Qs.setIndex(wu)),sn.isMesh)Rt.wireframe===!0?(Cn.setLineWidth(Rt.wireframeLinewidth*oi()),Qs.setMode(ot.LINES)):Qs.setMode(ot.TRIANGLES);else if(sn.isLine){let Yi=Rt.linewidth;Yi===void 0&&(Yi=1),Cn.setLineWidth(Yi*oi()),sn.isLineSegments?Qs.setMode(ot.LINES):sn.isLineLoop?Qs.setMode(ot.LINE_LOOP):Qs.setMode(ot.LINE_STRIP)}else sn.isPoints?Qs.setMode(ot.POINTS):sn.isSprite&&Qs.setMode(ot.TRIANGLES);if(sn.isInstancedMesh)Qs.renderInstances(Fs,np,sn.count);else if(rn.isInstancedBufferGeometry){const Yi=rn._maxInstanceCount!==void 0?rn._maxInstanceCount:1/0,Of=Math.min(rn.instanceCount,Yi);Qs.renderInstances(Fs,np,Of)}else Qs.render(Fs,np)},this.compile=function(Ke,Dt){function rn(Rt,sn,Tr){Rt.transparent===!0&&Rt.side===it&&Rt.forceSinglePass===!1?(Rt.side=Ve,Rt.needsUpdate=!0,B0(Rt,sn,Tr),Rt.side=nt,Rt.needsUpdate=!0,B0(Rt,sn,Tr),Rt.side=it):B0(Rt,sn,Tr)}$=pr.get(Ke),$.init(),be.push($),Ke.traverseVisible(function(Rt){Rt.isLight&&Rt.layers.test(Dt.layers)&&($.pushLight(Rt),Rt.castShadow&&$.pushShadow(Rt))}),$.setupLights(he.useLegacyLights),Ke.traverse(function(Rt){const sn=Rt.material;if(sn)if(Array.isArray(sn))for(let Tr=0;Tr<sn.length;Tr++){const ei=sn[Tr];rn(ei,Ke,Rt)}else rn(sn,Ke,Rt)}),be.pop(),$=null};let Aa=null;function Dc(Ke){Aa&&Aa(Ke)}function Ms(){Ka.stop()}function Pc(){Ka.start()}const Ka=new hu;Ka.setAnimationLoop(Dc),typeof self!="undefined"&&Ka.setContext(self),this.setAnimationLoop=function(Ke){Aa=Ke,ht.setAnimationLoop(Ke),Ke===null?Ka.stop():Ka.start()},ht.addEventListener("sessionstart",Ms),ht.addEventListener("sessionend",Pc),this.render=function(Ke,Dt){if(Dt!==void 0&&Dt.isCamera!==!0){w.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Se===!0)return;Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),Dt.parent===null&&Dt.matrixWorldAutoUpdate===!0&&Dt.updateMatrixWorld(),ht.enabled===!0&&ht.isPresenting===!0&&(ht.cameraAutoUpdate===!0&&ht.updateCamera(Dt),Dt=ht.getCamera()),Ke.isScene===!0&&Ke.onBeforeRender(he,Ke,Dt,et),$=pr.get(Ke,be.length),$.init(),be.push($),Ur.multiplyMatrices(Dt.projectionMatrix,Dt.matrixWorldInverse),tr.setFromProjectionMatrix(Ur),yt=this.localClippingEnabled,cn=yn.init(this.clippingPlanes,yt),fe=Wn.get(Ke,re.length),fe.init(),re.push(fe),lm(Ke,Dt,0,he.sortObjects),fe.finish(),he.sortObjects===!0&&fe.sort(fn,jt),this.info.render.frame++,cn===!0&&yn.beginShadows();const rn=$.state.shadowsArray;if(cr.render(rn,Ke,Dt),cn===!0&&yn.endShadows(),this.info.autoReset===!0&&this.info.reset(),on.render(fe,Ke),$.setupLights(he.useLegacyLights),Dt.isArrayCamera){const Rt=Dt.cameras;for(let sn=0,Tr=Rt.length;sn<Tr;sn++){const ei=Rt[sn];Ih(fe,Ke,ei,ei.viewport)}}else Ih(fe,Ke,Dt);et!==null&&(Cr.updateMultisampleRenderTarget(et),Cr.updateRenderTargetMipmap(et)),Ke.isScene===!0&&Ke.onAfterRender(he,Ke,Dt),Mr.resetDefaultState(),st=-1,we=null,be.pop(),be.length>0?$=be[be.length-1]:$=null,re.pop(),re.length>0?fe=re[re.length-1]:fe=null};function lm(Ke,Dt,rn,Rt){if(Ke.visible===!1)return;if(Ke.layers.test(Dt.layers)){if(Ke.isGroup)rn=Ke.renderOrder;else if(Ke.isLOD)Ke.autoUpdate===!0&&Ke.update(Dt);else if(Ke.isLight)$.pushLight(Ke),Ke.castShadow&&$.pushShadow(Ke);else if(Ke.isSprite){if(!Ke.frustumCulled||tr.intersectsSprite(Ke)){Rt&&Wi.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Ur);const ei=De.update(Ke),pi=Ke.material;pi.visible&&fe.push(Ke,ei,pi,rn,Wi.z,null)}}else if((Ke.isMesh||Ke.isLine||Ke.isPoints)&&(!Ke.frustumCulled||tr.intersectsObject(Ke))){const ei=De.update(Ke),pi=Ke.material;if(Rt&&(Ke.boundingSphere!==void 0?(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),Wi.copy(Ke.boundingSphere.center)):(ei.boundingSphere===null&&ei.computeBoundingSphere(),Wi.copy(ei.boundingSphere.center)),Wi.applyMatrix4(Ke.matrixWorld).applyMatrix4(Ur)),Array.isArray(pi)){const ni=ei.groups;for(let ki=0,Si=ni.length;ki<Si;ki++){const wi=ni[ki],Fs=pi[wi.materialIndex];Fs&&Fs.visible&&fe.push(Ke,ei,Fs,rn,Wi.z,wi)}}else pi.visible&&fe.push(Ke,ei,pi,rn,Wi.z,null)}}const Tr=Ke.children;for(let ei=0,pi=Tr.length;ei<pi;ei++)lm(Tr[ei],Dt,rn,Rt)}function Ih(Ke,Dt,rn,Rt){const sn=Ke.opaque,Tr=Ke.transmissive,ei=Ke.transparent;$.setupLightsView(rn),cn===!0&&yn.setGlobalState(he.clippingPlanes,rn),Tr.length>0&&_E(sn,Tr,Dt,rn),Rt&&Cn.viewport(We.copy(Rt)),sn.length>0&&cm(sn,Dt,rn),Tr.length>0&&cm(Tr,Dt,rn),ei.length>0&&cm(ei,Dt,rn),Cn.buffers.depth.setTest(!0),Cn.buffers.depth.setMask(!0),Cn.buffers.color.setMask(!0),Cn.setPolygonOffset(!1)}function _E(Ke,Dt,rn,Rt){const sn=hn.isWebGL2;Nr===null&&(Nr=new Sa(1,1,{generateMipmaps:!0,type:Kt.has("EXT_color_buffer_half_float")?ba:bo,minFilter:Jo,samples:sn?4:0})),he.getDrawingBufferSize(Dr),sn?Nr.setSize(Dr.x,Dr.y):Nr.setSize(Ca(Dr.x),Ca(Dr.y));const Tr=he.getRenderTarget();he.setRenderTarget(Nr),he.getClearColor(Gt),Ut=he.getClearAlpha(),Ut<1&&he.setClearColor(16777215,.5),he.clear();const ei=he.toneMapping;he.toneMapping=co,cm(Ke,rn,Rt),Cr.updateMultisampleRenderTarget(Nr),Cr.updateRenderTargetMipmap(Nr);let pi=!1;for(let ni=0,ki=Dt.length;ni<ki;ni++){const Si=Dt[ni],wi=Si.object,Fs=Si.geometry,Vs=Si.material,np=Si.group;if(Vs.side===it&&wi.layers.test(Rt.layers)){const wu=Vs.side;Vs.side=Ve,Vs.needsUpdate=!0,vA(wi,rn,Rt,Fs,Vs,np),Vs.side=wu,Vs.needsUpdate=!0,pi=!0}}pi===!0&&(Cr.updateMultisampleRenderTarget(Nr),Cr.updateRenderTargetMipmap(Nr)),he.setRenderTarget(Tr),he.setClearColor(Gt,Ut),he.toneMapping=ei}function cm(Ke,Dt,rn){const Rt=Dt.isScene===!0?Dt.overrideMaterial:null;for(let sn=0,Tr=Ke.length;sn<Tr;sn++){const ei=Ke[sn],pi=ei.object,ni=ei.geometry,ki=Rt===null?ei.material:Rt,Si=ei.group;pi.layers.test(rn.layers)&&vA(pi,Dt,rn,ni,ki,Si)}}function vA(Ke,Dt,rn,Rt,sn,Tr){Ke.onBeforeRender(he,Dt,rn,Rt,sn,Tr),Ke.modelViewMatrix.multiplyMatrices(rn.matrixWorldInverse,Ke.matrixWorld),Ke.normalMatrix.getNormalMatrix(Ke.modelViewMatrix),sn.onBeforeRender(he,Dt,rn,Rt,Ke,Tr),sn.transparent===!0&&sn.side===it&&sn.forceSinglePass===!1?(sn.side=Ve,sn.needsUpdate=!0,he.renderBufferDirect(rn,Dt,Rt,sn,Ke,Tr),sn.side=nt,sn.needsUpdate=!0,he.renderBufferDirect(rn,Dt,Rt,sn,Ke,Tr),sn.side=it):he.renderBufferDirect(rn,Dt,Rt,sn,Ke,Tr),Ke.onAfterRender(he,Dt,rn,Rt,sn,Tr)}function B0(Ke,Dt,rn){Dt.isScene!==!0&&(Dt=os);const Rt=mr.get(Ke),sn=$.state.lights,Tr=$.state.shadowsArray,ei=sn.state.version,pi=nn.getParameters(Ke,sn.state,Tr,Dt,rn),ni=nn.getProgramCacheKey(pi);let ki=Rt.programs;Rt.environment=Ke.isMeshStandardMaterial?Dt.environment:null,Rt.fog=Dt.fog,Rt.envMap=(Ke.isMeshStandardMaterial?Ui:vi).get(Ke.envMap||Rt.environment),ki===void 0&&(Ke.addEventListener("dispose",$n),ki=new Map,Rt.programs=ki);let Si=ki.get(ni);if(Si!==void 0){if(Rt.currentProgram===Si&&Rt.lightsStateVersion===ei)return i2(Ke,pi),Si}else pi.uniforms=nn.getUniforms(Ke),Ke.onBuild(rn,pi,he),Ke.onBeforeCompile(pi,he),Si=nn.acquireProgram(pi,ni),ki.set(ni,Si),Rt.uniforms=pi.uniforms;const wi=Rt.uniforms;(!Ke.isShaderMaterial&&!Ke.isRawShaderMaterial||Ke.clipping===!0)&&(wi.clippingPlanes=yn.uniform),i2(Ke,pi),Rt.needsLights=Ff(Ke),Rt.lightsStateVersion=ei,Rt.needsLights&&(wi.ambientLightColor.value=sn.state.ambient,wi.lightProbe.value=sn.state.probe,wi.directionalLights.value=sn.state.directional,wi.directionalLightShadows.value=sn.state.directionalShadow,wi.spotLights.value=sn.state.spot,wi.spotLightShadows.value=sn.state.spotShadow,wi.rectAreaLights.value=sn.state.rectArea,wi.ltc_1.value=sn.state.rectAreaLTC1,wi.ltc_2.value=sn.state.rectAreaLTC2,wi.pointLights.value=sn.state.point,wi.pointLightShadows.value=sn.state.pointShadow,wi.hemisphereLights.value=sn.state.hemi,wi.directionalShadowMap.value=sn.state.directionalShadowMap,wi.directionalShadowMatrix.value=sn.state.directionalShadowMatrix,wi.spotShadowMap.value=sn.state.spotShadowMap,wi.spotLightMatrix.value=sn.state.spotLightMatrix,wi.spotLightMap.value=sn.state.spotLightMap,wi.pointShadowMap.value=sn.state.pointShadowMap,wi.pointShadowMatrix.value=sn.state.pointShadowMatrix);const Fs=Si.getUniforms(),Vs=yu.seqWithValue(Fs.seq,wi);return Rt.currentProgram=Si,Rt.uniformsList=Vs,Si}function i2(Ke,Dt){const rn=mr.get(Ke);rn.outputColorSpace=Dt.outputColorSpace,rn.instancing=Dt.instancing,rn.skinning=Dt.skinning,rn.morphTargets=Dt.morphTargets,rn.morphNormals=Dt.morphNormals,rn.morphColors=Dt.morphColors,rn.morphTargetsCount=Dt.morphTargetsCount,rn.numClippingPlanes=Dt.numClippingPlanes,rn.numIntersection=Dt.numClipIntersection,rn.vertexAlphas=Dt.vertexAlphas,rn.vertexTangents=Dt.vertexTangents,rn.toneMapping=Dt.toneMapping}function EE(Ke,Dt,rn,Rt,sn){Dt.isScene!==!0&&(Dt=os),Cr.resetTextureUnits();const Tr=Dt.fog,ei=Rt.isMeshStandardMaterial?Dt.environment:null,pi=et===null?he.outputColorSpace:et.isXRRenderTarget===!0?et.texture.colorSpace:Xl,ni=(Rt.isMeshStandardMaterial?Ui:vi).get(Rt.envMap||ei),ki=Rt.vertexColors===!0&&!!rn.attributes.color&&rn.attributes.color.itemSize===4,Si=!!rn.attributes.tangent&&(!!Rt.normalMap||Rt.anisotropy>0),wi=!!rn.morphAttributes.position,Fs=!!rn.morphAttributes.normal,Vs=!!rn.morphAttributes.color,np=Rt.toneMapped?he.toneMapping:co,wu=rn.morphAttributes.position||rn.morphAttributes.normal||rn.morphAttributes.color,Qs=wu!==void 0?wu.length:0,Yi=mr.get(Rt),Of=$.state.lights;if(cn===!0&&(yt===!0||Ke!==we)){const uc=Ke===we&&Rt.id===st;yn.setState(Rt,Ke,uc)}let Oa=!1;Rt.version===Yi.__version?(Yi.needsLights&&Yi.lightsStateVersion!==Of.state.version||Yi.outputColorSpace!==pi||sn.isInstancedMesh&&Yi.instancing===!1||!sn.isInstancedMesh&&Yi.instancing===!0||sn.isSkinnedMesh&&Yi.skinning===!1||!sn.isSkinnedMesh&&Yi.skinning===!0||Yi.envMap!==ni||Rt.fog===!0&&Yi.fog!==Tr||Yi.numClippingPlanes!==void 0&&(Yi.numClippingPlanes!==yn.numPlanes||Yi.numIntersection!==yn.numIntersection)||Yi.vertexAlphas!==ki||Yi.vertexTangents!==Si||Yi.morphTargets!==wi||Yi.morphNormals!==Fs||Yi.morphColors!==Vs||Yi.toneMapping!==np||hn.isWebGL2===!0&&Yi.morphTargetsCount!==Qs)&&(Oa=!0):(Oa=!0,Yi.__version=Rt.version);let Tu=Yi.currentProgram;Oa===!0&&(Tu=B0(Rt,Dt,sn));let _A=!1,Vp=!1,pm=!1;const dl=Tu.getUniforms(),wd=Yi.uniforms;if(Cn.useProgram(Tu.program)&&(_A=!0,Vp=!0,pm=!0),Rt.id!==st&&(st=Rt.id,Vp=!0),_A||we!==Ke){if(dl.setValue(ot,"projectionMatrix",Ke.projectionMatrix),hn.logarithmicDepthBuffer&&dl.setValue(ot,"logDepthBufFC",2/(Math.log(Ke.far+1)/Math.LN2)),we!==Ke&&(we=Ke,Vp=!0,pm=!0),Rt.isShaderMaterial||Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshStandardMaterial||Rt.envMap){const uc=dl.map.cameraPosition;uc!==void 0&&uc.setValue(ot,Wi.setFromMatrixPosition(Ke.matrixWorld))}(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial)&&dl.setValue(ot,"isOrthographic",Ke.isOrthographicCamera===!0),(Rt.isMeshPhongMaterial||Rt.isMeshToonMaterial||Rt.isMeshLambertMaterial||Rt.isMeshBasicMaterial||Rt.isMeshStandardMaterial||Rt.isShaderMaterial||Rt.isShadowMaterial||sn.isSkinnedMesh)&&dl.setValue(ot,"viewMatrix",Ke.matrixWorldInverse)}if(sn.isSkinnedMesh){dl.setOptional(ot,sn,"bindMatrix"),dl.setOptional(ot,sn,"bindMatrixInverse");const uc=sn.skeleton;uc&&(hn.floatVertexTextures?(uc.boneTexture===null&&uc.computeBoneTexture(),dl.setValue(ot,"boneTexture",uc.boneTexture,Cr),dl.setValue(ot,"boneTextureSize",uc.boneTextureSize)):w.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const EA=rn.morphAttributes;if((EA.position!==void 0||EA.normal!==void 0||EA.color!==void 0&&hn.isWebGL2===!0)&&Jr.update(sn,rn,Tu),(Vp||Yi.receiveShadow!==sn.receiveShadow)&&(Yi.receiveShadow=sn.receiveShadow,dl.setValue(ot,"receiveShadow",sn.receiveShadow)),Rt.isMeshGouraudMaterial&&Rt.envMap!==null&&(wd.envMap.value=ni,wd.flipEnvMap.value=ni.isCubeTexture&&ni.isRenderTargetTexture===!1?-1:1),Vp&&(dl.setValue(ot,"toneMappingExposure",he.toneMappingExposure),Yi.needsLights&&o2(wd,pm),Tr&&Rt.fog===!0&&Un.refreshFogUniforms(wd,Tr),Un.refreshMaterialUniforms(wd,Rt,un,xn,Nr),yu.upload(ot,Yi.uniformsList,wd,Cr)),Rt.isShaderMaterial&&Rt.uniformsNeedUpdate===!0&&(yu.upload(ot,Yi.uniformsList,wd,Cr),Rt.uniformsNeedUpdate=!1),Rt.isSpriteMaterial&&dl.setValue(ot,"center",sn.center),dl.setValue(ot,"modelViewMatrix",sn.modelViewMatrix),dl.setValue(ot,"normalMatrix",sn.normalMatrix),dl.setValue(ot,"modelMatrix",sn.matrixWorld),Rt.isShaderMaterial||Rt.isRawShaderMaterial){const uc=Rt.uniformsGroups;for(let Fh=0,bE=uc.length;Fh<bE;Fh++)if(hn.isWebGL2){const bA=uc[Fh];Ii.update(bA,Tu),Ii.bind(bA,Tu)}else w.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tu}function o2(Ke,Dt){Ke.ambientLightColor.needsUpdate=Dt,Ke.lightProbe.needsUpdate=Dt,Ke.directionalLights.needsUpdate=Dt,Ke.directionalLightShadows.needsUpdate=Dt,Ke.pointLights.needsUpdate=Dt,Ke.pointLightShadows.needsUpdate=Dt,Ke.spotLights.needsUpdate=Dt,Ke.spotLightShadows.needsUpdate=Dt,Ke.rectAreaLights.needsUpdate=Dt,Ke.hemisphereLights.needsUpdate=Dt}function Ff(Ke){return Ke.isMeshLambertMaterial||Ke.isMeshToonMaterial||Ke.isMeshPhongMaterial||Ke.isMeshStandardMaterial||Ke.isShadowMaterial||Ke.isShaderMaterial&&Ke.lights===!0}this.getActiveCubeFace=function(){return Ue},this.getActiveMipmapLevel=function(){return Xe},this.getRenderTarget=function(){return et},this.setRenderTargetTextures=function(Ke,Dt,rn){mr.get(Ke.texture).__webglTexture=Dt,mr.get(Ke.depthTexture).__webglTexture=rn;const Rt=mr.get(Ke);Rt.__hasExternalTextures=!0,Rt.__hasExternalTextures&&(Rt.__autoAllocateDepthBuffer=rn===void 0,Rt.__autoAllocateDepthBuffer||Kt.has("WEBGL_multisampled_render_to_texture")===!0&&(w.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Rt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ke,Dt){const rn=mr.get(Ke);rn.__webglFramebuffer=Dt,rn.__useDefaultFramebuffer=Dt===void 0},this.setRenderTarget=function(Ke,Dt=0,rn=0){et=Ke,Ue=Dt,Xe=rn;let Rt=!0,sn=null,Tr=!1,ei=!1;if(Ke){const ni=mr.get(Ke);ni.__useDefaultFramebuffer!==void 0?(Cn.bindFramebuffer(ot.FRAMEBUFFER,null),Rt=!1):ni.__webglFramebuffer===void 0?Cr.setupRenderTarget(Ke):ni.__hasExternalTextures&&Cr.rebindTextures(Ke,mr.get(Ke.texture).__webglTexture,mr.get(Ke.depthTexture).__webglTexture);const ki=Ke.texture;(ki.isData3DTexture||ki.isDataArrayTexture||ki.isCompressedArrayTexture)&&(ei=!0);const Si=mr.get(Ke).__webglFramebuffer;Ke.isWebGLCubeRenderTarget?(sn=Si[Dt],Tr=!0):hn.isWebGL2&&Ke.samples>0&&Cr.useMultisampledRTT(Ke)===!1?sn=mr.get(Ke).__webglMultisampledFramebuffer:sn=Si,We.copy(Ke.viewport),Yt.copy(Ke.scissor),Mn=Ke.scissorTest}else We.copy(Tn).multiplyScalar(un).floor(),Yt.copy(Lt).multiplyScalar(un).floor(),Mn=dn;if(Cn.bindFramebuffer(ot.FRAMEBUFFER,sn)&&hn.drawBuffers&&Rt&&Cn.drawBuffers(Ke,sn),Cn.viewport(We),Cn.scissor(Yt),Cn.setScissorTest(Mn),Tr){const ni=mr.get(Ke.texture);ot.framebufferTexture2D(ot.FRAMEBUFFER,ot.COLOR_ATTACHMENT0,ot.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,ni.__webglTexture,rn)}else if(ei){const ni=mr.get(Ke.texture),ki=Dt||0;ot.framebufferTextureLayer(ot.FRAMEBUFFER,ot.COLOR_ATTACHMENT0,ni.__webglTexture,rn||0,ki)}st=-1},this.readRenderTargetPixels=function(Ke,Dt,rn,Rt,sn,Tr,ei){if(!(Ke&&Ke.isWebGLRenderTarget)){w.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pi=mr.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&ei!==void 0&&(pi=pi[ei]),pi){Cn.bindFramebuffer(ot.FRAMEBUFFER,pi);try{const ni=Ke.texture,ki=ni.format,Si=ni.type;if(ki!==Ze&&kn.convert(ki)!==ot.getParameter(ot.IMPLEMENTATION_COLOR_READ_FORMAT)){w.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const wi=Si===ba&&(Kt.has("EXT_color_buffer_half_float")||hn.isWebGL2&&Kt.has("EXT_color_buffer_float"));if(Si!==bo&&kn.convert(Si)!==ot.getParameter(ot.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Si===zo&&(hn.isWebGL2||Kt.has("OES_texture_float")||Kt.has("WEBGL_color_buffer_float")))&&!wi){w.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Dt>=0&&Dt<=Ke.width-Rt&&rn>=0&&rn<=Ke.height-sn&&ot.readPixels(Dt,rn,Rt,sn,kn.convert(ki),kn.convert(Si),Tr)}finally{const ni=et!==null?mr.get(et).__webglFramebuffer:null;Cn.bindFramebuffer(ot.FRAMEBUFFER,ni)}}},this.copyFramebufferToTexture=function(Ke,Dt,rn=0){const Rt=Math.pow(2,-rn),sn=Math.floor(Dt.image.width*Rt),Tr=Math.floor(Dt.image.height*Rt);Cr.setTexture2D(Dt,0),ot.copyTexSubImage2D(ot.TEXTURE_2D,rn,0,0,Ke.x,Ke.y,sn,Tr),Cn.unbindTexture()},this.copyTextureToTexture=function(Ke,Dt,rn,Rt=0){const sn=Dt.image.width,Tr=Dt.image.height,ei=kn.convert(rn.format),pi=kn.convert(rn.type);Cr.setTexture2D(rn,0),ot.pixelStorei(ot.UNPACK_FLIP_Y_WEBGL,rn.flipY),ot.pixelStorei(ot.UNPACK_PREMULTIPLY_ALPHA_WEBGL,rn.premultiplyAlpha),ot.pixelStorei(ot.UNPACK_ALIGNMENT,rn.unpackAlignment),Dt.isDataTexture?ot.texSubImage2D(ot.TEXTURE_2D,Rt,Ke.x,Ke.y,sn,Tr,ei,pi,Dt.image.data):Dt.isCompressedTexture?ot.compressedTexSubImage2D(ot.TEXTURE_2D,Rt,Ke.x,Ke.y,Dt.mipmaps[0].width,Dt.mipmaps[0].height,ei,Dt.mipmaps[0].data):ot.texSubImage2D(ot.TEXTURE_2D,Rt,Ke.x,Ke.y,ei,pi,Dt.image),Rt===0&&rn.generateMipmaps&&ot.generateMipmap(ot.TEXTURE_2D),Cn.unbindTexture()},this.copyTextureToTexture3D=function(Ke,Dt,rn,Rt,sn=0){if(he.isWebGL1Renderer){w.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Tr=Ke.max.x-Ke.min.x+1,ei=Ke.max.y-Ke.min.y+1,pi=Ke.max.z-Ke.min.z+1,ni=kn.convert(Rt.format),ki=kn.convert(Rt.type);let Si;if(Rt.isData3DTexture)Cr.setTexture3D(Rt,0),Si=ot.TEXTURE_3D;else if(Rt.isDataArrayTexture)Cr.setTexture2DArray(Rt,0),Si=ot.TEXTURE_2D_ARRAY;else{w.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ot.pixelStorei(ot.UNPACK_FLIP_Y_WEBGL,Rt.flipY),ot.pixelStorei(ot.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Rt.premultiplyAlpha),ot.pixelStorei(ot.UNPACK_ALIGNMENT,Rt.unpackAlignment);const wi=ot.getParameter(ot.UNPACK_ROW_LENGTH),Fs=ot.getParameter(ot.UNPACK_IMAGE_HEIGHT),Vs=ot.getParameter(ot.UNPACK_SKIP_PIXELS),np=ot.getParameter(ot.UNPACK_SKIP_ROWS),wu=ot.getParameter(ot.UNPACK_SKIP_IMAGES),Qs=rn.isCompressedTexture?rn.mipmaps[0]:rn.image;ot.pixelStorei(ot.UNPACK_ROW_LENGTH,Qs.width),ot.pixelStorei(ot.UNPACK_IMAGE_HEIGHT,Qs.height),ot.pixelStorei(ot.UNPACK_SKIP_PIXELS,Ke.min.x),ot.pixelStorei(ot.UNPACK_SKIP_ROWS,Ke.min.y),ot.pixelStorei(ot.UNPACK_SKIP_IMAGES,Ke.min.z),rn.isDataTexture||rn.isData3DTexture?ot.texSubImage3D(Si,sn,Dt.x,Dt.y,Dt.z,Tr,ei,pi,ni,ki,Qs.data):rn.isCompressedArrayTexture?(w.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ot.compressedTexSubImage3D(Si,sn,Dt.x,Dt.y,Dt.z,Tr,ei,pi,ni,Qs.data)):ot.texSubImage3D(Si,sn,Dt.x,Dt.y,Dt.z,Tr,ei,pi,ni,ki,Qs),ot.pixelStorei(ot.UNPACK_ROW_LENGTH,wi),ot.pixelStorei(ot.UNPACK_IMAGE_HEIGHT,Fs),ot.pixelStorei(ot.UNPACK_SKIP_PIXELS,Vs),ot.pixelStorei(ot.UNPACK_SKIP_ROWS,np),ot.pixelStorei(ot.UNPACK_SKIP_IMAGES,wu),sn===0&&Rt.generateMipmaps&&ot.generateMipmap(Si),Cn.unbindTexture()},this.initTexture=function(Ke){Ke.isCubeTexture?Cr.setTextureCube(Ke,0):Ke.isData3DTexture?Cr.setTexture3D(Ke,0):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?Cr.setTexture2DArray(Ke,0):Cr.setTexture2D(Ke,0),Cn.unbindTexture()},this.resetState=function(){Ue=0,Xe=0,et=null,Cn.reset(),Mr.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zo}get physicallyCorrectLights(){return w.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){w.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return w.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ai?ml:Nd}set outputEncoding(e){w.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ml?ai:Xl}}class Wm extends Hy{}Wm.prototype.isWebGL1Renderer=!0;class cd{constructor(e,o=25e-5){this.isFogExp2=!0,this.name="",this.color=new fr(e),this.density=o}clone(){return new cd(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class pd{constructor(e,o=1,f=1e3){this.isFog=!0,this.name="",this.color=new fr(e),this.near=o,this.far=f}clone(){return new pd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Vm extends Bi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,o){return super.copy(e,o),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const o=super.toJSON(e);return this.fog!==null&&(o.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(o.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(o.object.backgroundIntensity=this.backgroundIntensity),o}}class ud{constructor(e,o){this.isInterleavedBuffer=!0,this.array=e,this.stride=o,this.count=e!==void 0?e.length/o:0,this.usage=up,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ga()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,o,f){e*=this.stride,f*=o.stride;for(let y=0,M=this.stride;y<M;y++)this.array[e+y]=o.array[f+y];return this}set(e,o=0){return this.array.set(e,o),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ga()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const o=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),f=new this.constructor(o,this.stride);return f.setUsage(this.usage),f}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ga()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Sl=new Qe;class zp{constructor(e,o,f,y=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=o,this.offset=f,this.normalized=y}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let o=0,f=this.data.count;o<f;o++)Sl.fromBufferAttribute(this,o),Sl.applyMatrix4(e),this.setXYZ(o,Sl.x,Sl.y,Sl.z);return this}applyNormalMatrix(e){for(let o=0,f=this.count;o<f;o++)Sl.fromBufferAttribute(this,o),Sl.applyNormalMatrix(e),this.setXYZ(o,Sl.x,Sl.y,Sl.z);return this}transformDirection(e){for(let o=0,f=this.count;o<f;o++)Sl.fromBufferAttribute(this,o),Sl.transformDirection(e),this.setXYZ(o,Sl.x,Sl.y,Sl.z);return this}setX(e,o){return this.normalized&&(o=Xr(o,this.array)),this.data.array[e*this.data.stride+this.offset]=o,this}setY(e,o){return this.normalized&&(o=Xr(o,this.array)),this.data.array[e*this.data.stride+this.offset+1]=o,this}setZ(e,o){return this.normalized&&(o=Xr(o,this.array)),this.data.array[e*this.data.stride+this.offset+2]=o,this}setW(e,o){return this.normalized&&(o=Xr(o,this.array)),this.data.array[e*this.data.stride+this.offset+3]=o,this}getX(e){let o=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(o=ha(o,this.array)),o}getY(e){let o=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(o=ha(o,this.array)),o}getZ(e){let o=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(o=ha(o,this.array)),o}getW(e){let o=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(o=ha(o,this.array)),o}setXY(e,o,f){return e=e*this.data.stride+this.offset,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=f,this}setXYZ(e,o,f,y){return e=e*this.data.stride+this.offset,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array),y=Xr(y,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=f,this.data.array[e+2]=y,this}setXYZW(e,o,f,y,M){return e=e*this.data.stride+this.offset,this.normalized&&(o=Xr(o,this.array),f=Xr(f,this.array),y=Xr(y,this.array),M=Xr(M,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=f,this.data.array[e+2]=y,this.data.array[e+3]=M,this}clone(e){if(e===void 0){w.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const o=[];for(let f=0;f<this.count;f++){const y=f*this.data.stride+this.offset;for(let M=0;M<this.itemSize;M++)o.push(this.data.array[y+M])}return new ao(new this.array.constructor(o),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){w.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const o=[];for(let f=0;f<this.count;f++){const y=f*this.data.stride+this.offset;for(let M=0;M<this.itemSize;M++)o.push(this.data.array[y+M])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class k1 extends Ts{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new fr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let dh;const dd=new Qe,hh=new Qe,vf=new Qe,_f=new gn,Ef=new gn,Qm=new li,oa=new Qe,Ig=new Qe,Gp=new Qe,Wy=new gn,Km=new gn,z1=new gn;class Vy extends Bi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",dh===void 0){dh=new xi;const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),f=new ud(o,5);dh.setIndex([0,1,2,0,2,3]),dh.setAttribute("position",new zp(f,3,0,!1)),dh.setAttribute("uv",new zp(f,2,3,!1))}this.geometry=dh,this.material=e!==void 0?e:new k1,this.center=new gn(.5,.5)}raycast(e,o){e.camera===null&&w.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hh.setFromMatrixScale(this.matrixWorld),Qm.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hh.multiplyScalar(-vf.z);const f=this.material.rotation;let y,M;f!==0&&(M=Math.cos(f),y=Math.sin(f));const B=this.center;fh(oa.set(-.5,-.5,0),vf,B,hh,y,M),fh(Ig.set(.5,-.5,0),vf,B,hh,y,M),fh(Gp.set(.5,.5,0),vf,B,hh,y,M),Wy.set(0,0),Km.set(1,0),z1.set(1,1);let I=e.ray.intersectTriangle(oa,Ig,Gp,!1,dd);if(I===null&&(fh(Ig.set(-.5,.5,0),vf,B,hh,y,M),Km.set(0,1),I=e.ray.intersectTriangle(oa,Gp,Ig,!1,dd),I===null))return;const D=e.ray.origin.distanceTo(dd);D<e.near||D>e.far||o.push({distance:D,point:dd.clone(),uv:Ba.getInterpolation(dd,oa,Ig,Gp,Wy,Km,z1,new gn),face:null,object:this})}copy(e,o){return super.copy(e,o),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function fh(C,e,o,f,y,M){_f.subVectors(C,o).addScalar(.5).multiply(f),y!==void 0?(Ef.x=M*_f.x-y*_f.y,Ef.y=y*_f.x+M*_f.y):Ef.copy(_f),C.copy(e),C.x+=Ef.x,C.y+=Ef.y,C.applyMatrix4(Qm)}const Xm=new Qe,G1=new Qe;class Qy extends Bi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const o=e.levels;for(let f=0,y=o.length;f<y;f++){const M=o[f];this.addLevel(M.object.clone(),M.distance,M.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,o=0,f=0){o=Math.abs(o);const y=this.levels;let M;for(M=0;M<y.length&&!(o<y[M].distance);M++);return y.splice(M,0,{distance:o,hysteresis:f,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const o=this.levels;if(o.length>0){let f,y;for(f=1,y=o.length;f<y;f++){let M=o[f].distance;if(o[f].object.visible&&(M-=M*o[f].hysteresis),e<M)break}return o[f-1].object}return null}raycast(e,o){if(this.levels.length>0){Xm.setFromMatrixPosition(this.matrixWorld);const y=e.ray.origin.distanceTo(Xm);this.getObjectForDistance(y).raycast(e,o)}}update(e){const o=this.levels;if(o.length>1){Xm.setFromMatrixPosition(e.matrixWorld),G1.setFromMatrixPosition(this.matrixWorld);const f=Xm.distanceTo(G1)/e.zoom;o[0].object.visible=!0;let y,M;for(y=1,M=o.length;y<M;y++){let B=o[y].distance;if(o[y].object.visible&&(B-=B*o[y].hysteresis),f>=B)o[y-1].object.visible=!1,o[y].object.visible=!0;else break}for(this._currentLevel=y-1;y<M;y++)o[y].object.visible=!1}}toJSON(e){const o=super.toJSON(e);this.autoUpdate===!1&&(o.object.autoUpdate=!1),o.object.levels=[];const f=this.levels;for(let y=0,M=f.length;y<M;y++){const B=f[y];o.object.levels.push({object:B.object.uuid,distance:B.distance,hysteresis:B.hysteresis})}return o}}const Ky=new Qe,N1=new Mi,Xy=new Mi,d3=new Qe,h3=new li,Fg=new Qe,Yy=new Fo,Jy=new li,U1=new vp;class qy extends Bs{constructor(e,o){super(e,o),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new li,this.bindMatrixInverse=new li,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ao),this.boundingBox.makeEmpty();const o=e.getAttribute("position");for(let f=0;f<o.count;f++)Fg.fromBufferAttribute(o,f),this.applyBoneTransform(f,Fg),this.boundingBox.expandByPoint(Fg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fo),this.boundingSphere.makeEmpty();const o=e.getAttribute("position");for(let f=0;f<o.count;f++)Fg.fromBufferAttribute(o,f),this.applyBoneTransform(f,Fg),this.boundingSphere.expandByPoint(Fg)}copy(e,o){return super.copy(e,o),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,o){const f=this.material,y=this.matrixWorld;f!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yy.copy(this.boundingSphere),Yy.applyMatrix4(y),e.ray.intersectsSphere(Yy)!==!1&&(Jy.copy(y).invert(),U1.copy(e.ray).applyMatrix4(Jy),!(this.boundingBox!==null&&U1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,o,U1)))}getVertexPosition(e,o){return super.getVertexPosition(e,o),this.applyBoneTransform(e,o),o}bind(e,o){this.skeleton=e,o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mi,o=this.geometry.attributes.skinWeight;for(let f=0,y=o.count;f<y;f++){e.fromBufferAttribute(o,f);const M=1/e.manhattanLength();M!==1/0?e.multiplyScalar(M):e.set(1,0,0,0),o.setXYZW(f,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():w.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,o){const f=this.skeleton,y=this.geometry;N1.fromBufferAttribute(y.attributes.skinIndex,e),Xy.fromBufferAttribute(y.attributes.skinWeight,e),Ky.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let M=0;M<4;M++){const B=Xy.getComponent(M);if(B!==0){const I=N1.getComponent(M);h3.multiplyMatrices(f.bones[I].matrixWorld,f.boneInverses[I]),o.addScaledVector(d3.copy(Ky).applyMatrix4(h3),B)}}return o.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,o){return w.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,o)}}class j1 extends Bi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class bf extends $i{constructor(e=null,o=1,f=1,y,M,B,I,D,U=Pi,X=Pi,q,Z){super(null,B,I,D,U,X,y,M,q,Z),this.isDataTexture=!0,this.image={data:e,width:o,height:f},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const H1=new li,Zy=new li;class Og{constructor(e=[],o=[]){this.uuid=Ga(),this.bones=e.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),o.length===0)this.calculateInverses();else if(e.length!==o.length){w.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let f=0,y=this.bones.length;f<y;f++)this.boneInverses.push(new li)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,o=this.bones.length;e<o;e++){const f=new li;this.bones[e]&&f.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(f)}}pose(){for(let e=0,o=this.bones.length;e<o;e++){const f=this.bones[e];f&&f.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,o=this.bones.length;e<o;e++){const f=this.bones[e];f&&(f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(f.matrixWorld)):f.matrix.copy(f.matrixWorld),f.matrix.decompose(f.position,f.quaternion,f.scale))}}update(){const e=this.bones,o=this.boneInverses,f=this.boneMatrices,y=this.boneTexture;for(let M=0,B=e.length;M<B;M++){const I=e[M]?e[M].matrixWorld:Zy;H1.multiplyMatrices(I,o[M]),H1.toArray(f,M*16)}y!==null&&(y.needsUpdate=!0)}clone(){return new Og(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=da(e),e=Math.max(e,4);const o=new Float32Array(e*e*4);o.set(this.boneMatrices);const f=new bf(o,e,e,Ze,zo);return f.needsUpdate=!0,this.boneMatrices=o,this.boneTexture=f,this.boneTextureSize=e,this}getBoneByName(e){for(let o=0,f=this.bones.length;o<f;o++){const y=this.bones[o];if(y.name===e)return y}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,o){this.uuid=e.uuid;for(let f=0,y=e.bones.length;f<y;f++){const M=e.bones[f];let B=o[M];B===void 0&&(w.warn("THREE.Skeleton: No bone found with UUID:",M),B=new j1),this.bones.push(B),this.boneInverses.push(new li().fromArray(e.boneInverses[f]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const o=this.bones,f=this.boneInverses;for(let y=0,M=o.length;y<M;y++){const B=o[y];e.bones.push(B.uuid);const I=f[y];e.boneInverses.push(I.toArray())}return e}}class Hs extends ao{constructor(e,o,f,y=1){super(e,o,f),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=y}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Mf=new li,hd=new li,gh=[],W1=new Ao,f3=new li,fd=new Bs,Dg=new Fo;class Ym extends Bs{constructor(e,o,f){super(e,o),this.isInstancedMesh=!0,this.instanceMatrix=new Hs(new Float32Array(f*16),16),this.instanceColor=null,this.count=f,this.boundingBox=null,this.boundingSphere=null;for(let y=0;y<f;y++)this.setMatrixAt(y,f3)}computeBoundingBox(){const e=this.geometry,o=this.count;this.boundingBox===null&&(this.boundingBox=new Ao),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let f=0;f<o;f++)this.getMatrixAt(f,Mf),W1.copy(e.boundingBox).applyMatrix4(Mf),this.boundingBox.union(W1)}computeBoundingSphere(){const e=this.geometry,o=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let f=0;f<o;f++)this.getMatrixAt(f,Mf),Dg.copy(e.boundingSphere).applyMatrix4(Mf),this.boundingSphere.union(Dg)}copy(e,o){return super.copy(e,o),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,o){o.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,o){o.fromArray(this.instanceMatrix.array,e*16)}raycast(e,o){const f=this.matrixWorld,y=this.count;if(fd.geometry=this.geometry,fd.material=this.material,fd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Dg.copy(this.boundingSphere),Dg.applyMatrix4(f),e.ray.intersectsSphere(Dg)!==!1))for(let M=0;M<y;M++){this.getMatrixAt(M,Mf),hd.multiplyMatrices(f,Mf),fd.matrixWorld=hd,fd.raycast(e,gh);for(let B=0,I=gh.length;B<I;B++){const D=gh[B];D.instanceId=M,D.object=this,o.push(D)}gh.length=0}}setColorAt(e,o){this.instanceColor===null&&(this.instanceColor=new Hs(new Float32Array(this.instanceMatrix.count*3),3)),o.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,o){o.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class pl extends Ts{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const $y=new Qe,ev=new Qe,tv=new li,Jm=new vp,qm=new Fo;class bu extends Bi{constructor(e=new xi,o=new pl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const o=e.attributes.position,f=[0];for(let y=1,M=o.count;y<M;y++)$y.fromBufferAttribute(o,y-1),ev.fromBufferAttribute(o,y),f[y]=f[y-1],f[y]+=$y.distanceTo(ev);e.setAttribute("lineDistance",new yr(f,1))}else w.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,o){const f=this.geometry,y=this.matrixWorld,M=e.params.Line.threshold,B=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),qm.copy(f.boundingSphere),qm.applyMatrix4(y),qm.radius+=M,e.ray.intersectsSphere(qm)===!1)return;tv.copy(y).invert(),Jm.copy(e.ray).applyMatrix4(tv);const I=M/((this.scale.x+this.scale.y+this.scale.z)/3),D=I*I,U=new Qe,X=new Qe,q=new Qe,Z=new Qe,te=this.isLineSegments?2:1,ie=f.index,$=f.attributes.position;if(ie!==null){const re=Math.max(0,B.start),be=Math.min(ie.count,B.start+B.count);for(let he=re,Se=be-1;he<Se;he+=te){const Ue=ie.getX(he),Xe=ie.getX(he+1);if(U.fromBufferAttribute($,Ue),X.fromBufferAttribute($,Xe),Jm.distanceSqToSegment(U,X,Z,q)>D)continue;Z.applyMatrix4(this.matrixWorld);const st=e.ray.origin.distanceTo(Z);st<e.near||st>e.far||o.push({distance:st,point:q.clone().applyMatrix4(this.matrixWorld),index:he,face:null,faceIndex:null,object:this})}}else{const re=Math.max(0,B.start),be=Math.min($.count,B.start+B.count);for(let he=re,Se=be-1;he<Se;he+=te){if(U.fromBufferAttribute($,he),X.fromBufferAttribute($,he+1),Jm.distanceSqToSegment(U,X,Z,q)>D)continue;Z.applyMatrix4(this.matrixWorld);const Xe=e.ray.origin.distanceTo(Z);Xe<e.near||Xe>e.far||o.push({distance:Xe,point:q.clone().applyMatrix4(this.matrixWorld),index:he,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const o=this.geometry.morphAttributes,f=Object.keys(o);if(f.length>0){const y=o[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,B=y.length;M<B;M++){const I=y[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=M}}}}}const nv=new Qe,rv=new Qe;class Np extends bu{constructor(e,o){super(e,o),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const o=e.attributes.position,f=[];for(let y=0,M=o.count;y<M;y+=2)nv.fromBufferAttribute(o,y),rv.fromBufferAttribute(o,y+1),f[y]=y===0?0:f[y-1],f[y+1]=f[y]+nv.distanceTo(rv);e.setAttribute("lineDistance",new yr(f,1))}else w.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iv extends bu{constructor(e,o){super(e,o),this.isLineLoop=!0,this.type="LineLoop"}}class V1 extends Ts{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new fr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ov=new li,Mu=new vp,Zm=new Fo,Pg=new Qe;class mh extends Bi{constructor(e=new xi,o=new V1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),this.material=e.material,this.geometry=e.geometry,this}raycast(e,o){const f=this.geometry,y=this.matrixWorld,M=e.params.Points.threshold,B=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),Zm.copy(f.boundingSphere),Zm.applyMatrix4(y),Zm.radius+=M,e.ray.intersectsSphere(Zm)===!1)return;ov.copy(y).invert(),Mu.copy(e.ray).applyMatrix4(ov);const I=M/((this.scale.x+this.scale.y+this.scale.z)/3),D=I*I,U=f.index,q=f.attributes.position;if(U!==null){const Z=Math.max(0,B.start),te=Math.min(U.count,B.start+B.count);for(let ie=Z,fe=te;ie<fe;ie++){const $=U.getX(ie);Pg.fromBufferAttribute(q,$),g3(Pg,$,D,y,e,o,this)}}else{const Z=Math.max(0,B.start),te=Math.min(q.count,B.start+B.count);for(let ie=Z,fe=te;ie<fe;ie++)Pg.fromBufferAttribute(q,ie),g3(Pg,ie,D,y,e,o,this)}}updateMorphTargets(){const o=this.geometry.morphAttributes,f=Object.keys(o);if(f.length>0){const y=o[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,B=y.length;M<B;M++){const I=y[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=M}}}}}function g3(C,e,o,f,y,M,B){const I=Mu.distanceSqToPoint(C);if(I<o){const D=new Qe;Mu.closestPointToPoint(C,D),D.applyMatrix4(f);const U=y.ray.origin.distanceTo(D);if(U<y.near||U>y.far)return;M.push({distance:U,distanceToRay:Math.sqrt(I),point:D,index:e,face:null,object:B})}}class $m extends $i{constructor(e,o,f,y,M,B,I,D,U){super(e,o,f,y,M,B,I,D,U),this.isVideoTexture=!0,this.minFilter=B!==void 0?B:Zi,this.magFilter=M!==void 0?M:Zi,this.generateMipmaps=!1;const X=this;function q(){X.needsUpdate=!0,e.requestVideoFrameCallback(q)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(q)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sv extends $i{constructor(e,o){super({width:e,height:o}),this.isFramebufferTexture=!0,this.magFilter=Pi,this.minFilter=Pi,this.generateMipmaps=!1,this.needsUpdate=!0}}class e0 extends $i{constructor(e,o,f,y,M,B,I,D,U,X,q,Z){super(null,B,I,D,U,X,y,M,q,Z),this.isCompressedTexture=!0,this.image={width:o,height:f},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class m3 extends e0{constructor(e,o,f,y,M,B){super(e,o,f,M,B),this.isCompressedArrayTexture=!0,this.image.depth=y,this.wrapR=Sr}}class A3 extends $i{constructor(e,o,f,y,M,B,I,D,U){super(e,o,f,y,M,B,I,D,U),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ic{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return w.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,o){const f=this.getUtoTmapping(e);return this.getPoint(f,o)}getPoints(e=5){const o=[];for(let f=0;f<=e;f++)o.push(this.getPoint(f/e));return o}getSpacedPoints(e=5){const o=[];for(let f=0;f<=e;f++)o.push(this.getPointAt(f/e));return o}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let f,y=this.getPoint(0),M=0;o.push(0);for(let B=1;B<=e;B++)f=this.getPoint(B/e),M+=f.distanceTo(y),o.push(M),y=f;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,o){const f=this.getLengths();let y=0;const M=f.length;let B;o?B=o:B=e*f[M-1];let I=0,D=M-1,U;for(;I<=D;)if(y=Math.floor(I+(D-I)/2),U=f[y]-B,U<0)I=y+1;else if(U>0)D=y-1;else{D=y;break}if(y=D,f[y]===B)return y/(M-1);const X=f[y],Z=f[y+1]-X,te=(B-X)/Z;return(y+te)/(M-1)}getTangent(e,o){let y=e-1e-4,M=e+1e-4;y<0&&(y=0),M>1&&(M=1);const B=this.getPoint(y),I=this.getPoint(M),D=o||(B.isVector2?new gn:new Qe);return D.copy(I).sub(B).normalize(),D}getTangentAt(e,o){const f=this.getUtoTmapping(e);return this.getTangent(f,o)}computeFrenetFrames(e,o){const f=new Qe,y=[],M=[],B=[],I=new Qe,D=new li;for(let te=0;te<=e;te++){const ie=te/e;y[te]=this.getTangentAt(ie,new Qe)}M[0]=new Qe,B[0]=new Qe;let U=Number.MAX_VALUE;const X=Math.abs(y[0].x),q=Math.abs(y[0].y),Z=Math.abs(y[0].z);X<=U&&(U=X,f.set(1,0,0)),q<=U&&(U=q,f.set(0,1,0)),Z<=U&&f.set(0,0,1),I.crossVectors(y[0],f).normalize(),M[0].crossVectors(y[0],I),B[0].crossVectors(y[0],M[0]);for(let te=1;te<=e;te++){if(M[te]=M[te-1].clone(),B[te]=B[te-1].clone(),I.crossVectors(y[te-1],y[te]),I.length()>Number.EPSILON){I.normalize();const ie=Math.acos(Go(y[te-1].dot(y[te]),-1,1));M[te].applyMatrix4(D.makeRotationAxis(I,ie))}B[te].crossVectors(y[te],M[te])}if(o===!0){let te=Math.acos(Go(M[0].dot(M[e]),-1,1));te/=e,y[0].dot(I.crossVectors(M[0],M[e]))>0&&(te=-te);for(let ie=1;ie<=e;ie++)M[ie].applyMatrix4(D.makeRotationAxis(y[ie],te*ie)),B[ie].crossVectors(y[ie],M[ie])}return{tangents:y,normals:M,binormals:B}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ah extends Ic{constructor(e=0,o=0,f=1,y=1,M=0,B=Math.PI*2,I=!1,D=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=o,this.xRadius=f,this.yRadius=y,this.aStartAngle=M,this.aEndAngle=B,this.aClockwise=I,this.aRotation=D}getPoint(e,o){const f=o||new gn,y=Math.PI*2;let M=this.aEndAngle-this.aStartAngle;const B=Math.abs(M)<Number.EPSILON;for(;M<0;)M+=y;for(;M>y;)M-=y;M<Number.EPSILON&&(B?M=0:M=y),this.aClockwise===!0&&!B&&(M===y?M=-y:M=M-y);const I=this.aStartAngle+e*M;let D=this.aX+this.xRadius*Math.cos(I),U=this.aY+this.yRadius*Math.sin(I);if(this.aRotation!==0){const X=Math.cos(this.aRotation),q=Math.sin(this.aRotation),Z=D-this.aX,te=U-this.aY;D=Z*X-te*q+this.aX,U=Z*q+te*X+this.aY}return f.set(D,U)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class av extends Ah{constructor(e,o,f,y,M,B){super(e,o,f,f,y,M,B),this.isArcCurve=!0,this.type="ArcCurve"}}function t0(){let C=0,e=0,o=0,f=0;function y(M,B,I,D){C=M,e=I,o=-3*M+3*B-2*I-D,f=2*M-2*B+I+D}return{initCatmullRom:function(M,B,I,D,U){y(B,I,U*(I-M),U*(D-B))},initNonuniformCatmullRom:function(M,B,I,D,U,X,q){let Z=(B-M)/U-(I-M)/(U+X)+(I-B)/X,te=(I-B)/X-(D-B)/(X+q)+(D-I)/q;Z*=X,te*=X,y(B,I,Z,te)},calc:function(M){const B=M*M,I=B*M;return C+e*M+o*B+f*I}}}const Q1=new Qe,K1=new t0,lv=new t0,n0=new t0;class cv extends Ic{constructor(e=[],o=!1,f="centripetal",y=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=o,this.curveType=f,this.tension=y}getPoint(e,o=new Qe){const f=o,y=this.points,M=y.length,B=(M-(this.closed?0:1))*e;let I=Math.floor(B),D=B-I;this.closed?I+=I>0?0:(Math.floor(Math.abs(I)/M)+1)*M:D===0&&I===M-1&&(I=M-2,D=1);let U,X;this.closed||I>0?U=y[(I-1)%M]:(Q1.subVectors(y[0],y[1]).add(y[0]),U=Q1);const q=y[I%M],Z=y[(I+1)%M];if(this.closed||I+2<M?X=y[(I+2)%M]:(Q1.subVectors(y[M-1],y[M-2]).add(y[M-1]),X=Q1),this.curveType==="centripetal"||this.curveType==="chordal"){const te=this.curveType==="chordal"?.5:.25;let ie=Math.pow(U.distanceToSquared(q),te),fe=Math.pow(q.distanceToSquared(Z),te),$=Math.pow(Z.distanceToSquared(X),te);fe<1e-4&&(fe=1),ie<1e-4&&(ie=fe),$<1e-4&&($=fe),K1.initNonuniformCatmullRom(U.x,q.x,Z.x,X.x,ie,fe,$),lv.initNonuniformCatmullRom(U.y,q.y,Z.y,X.y,ie,fe,$),n0.initNonuniformCatmullRom(U.z,q.z,Z.z,X.z,ie,fe,$)}else this.curveType==="catmullrom"&&(K1.initCatmullRom(U.x,q.x,Z.x,X.x,this.tension),lv.initCatmullRom(U.y,q.y,Z.y,X.y,this.tension),n0.initCatmullRom(U.z,q.z,Z.z,X.z,this.tension));return f.set(K1.calc(D),lv.calc(D),n0.calc(D)),f}copy(e){super.copy(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(y.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let o=0,f=this.points.length;o<f;o++){const y=this.points[o];e.points.push(y.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(new Qe().fromArray(y))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function pv(C,e,o,f,y){const M=(f-e)*.5,B=(y-o)*.5,I=C*C,D=C*I;return(2*o-2*f+M+B)*D+(-3*o+3*f-2*M-B)*I+M*C+o}function uv(C,e){const o=1-C;return o*o*e}function y3(C,e){return 2*(1-C)*C*e}function v3(C,e){return C*C*e}function yh(C,e,o,f){return uv(C,e)+y3(C,o)+v3(C,f)}function _3(C,e){const o=1-C;return o*o*o*e}function E3(C,e){const o=1-C;return 3*o*o*C*e}function b3(C,e){return 3*(1-C)*C*C*e}function M3(C,e){return C*C*C*e}function Lg(C,e,o,f,y){return _3(C,e)+E3(C,o)+b3(C,f)+M3(C,y)}class kg extends Ic{constructor(e=new gn,o=new gn,f=new gn,y=new gn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=o,this.v2=f,this.v3=y}getPoint(e,o=new gn){const f=o,y=this.v0,M=this.v1,B=this.v2,I=this.v3;return f.set(Lg(e,y.x,M.x,B.x,I.x),Lg(e,y.y,M.y,B.y,I.y)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class X1 extends Ic{constructor(e=new Qe,o=new Qe,f=new Qe,y=new Qe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=o,this.v2=f,this.v3=y}getPoint(e,o=new Qe){const f=o,y=this.v0,M=this.v1,B=this.v2,I=this.v3;return f.set(Lg(e,y.x,M.x,B.x,I.x),Lg(e,y.y,M.y,B.y,I.y),Lg(e,y.z,M.z,B.z,I.z)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zg extends Ic{constructor(e=new gn,o=new gn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=o}getPoint(e,o=new gn){const f=o;return e===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(e).add(this.v1)),f}getPointAt(e,o){return this.getPoint(e,o)}getTangent(e,o=new gn){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,o){return this.getTangent(e,o)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gg extends Ic{constructor(e=new Qe,o=new Qe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=o}getPoint(e,o=new Qe){const f=o;return e===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(e).add(this.v1)),f}getPointAt(e,o){return this.getPoint(e,o)}getTangent(e,o=new Qe){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,o){return this.getTangent(e,o)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ng extends Ic{constructor(e=new gn,o=new gn,f=new gn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=o,this.v2=f}getPoint(e,o=new gn){const f=o,y=this.v0,M=this.v1,B=this.v2;return f.set(yh(e,y.x,M.x,B.x),yh(e,y.y,M.y,B.y)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vh extends Ic{constructor(e=new Qe,o=new Qe,f=new Qe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=o,this.v2=f}getPoint(e,o=new Qe){const f=o,y=this.v0,M=this.v1,B=this.v2;return f.set(yh(e,y.x,M.x,B.x),yh(e,y.y,M.y,B.y),yh(e,y.z,M.z,B.z)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y1 extends Ic{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,o=new gn){const f=o,y=this.points,M=(y.length-1)*e,B=Math.floor(M),I=M-B,D=y[B===0?B:B-1],U=y[B],X=y[B>y.length-2?y.length-1:B+1],q=y[B>y.length-3?y.length-1:B+2];return f.set(pv(I,D.x,U.x,X.x,q.x),pv(I,D.y,U.y,X.y,q.y)),f}copy(e){super.copy(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(y.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let o=0,f=this.points.length;o<f;o++){const y=this.points[o];e.points.push(y.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(new gn().fromArray(y))}return this}}var Ug=Object.freeze({__proto__:null,ArcCurve:av,CatmullRomCurve3:cv,CubicBezierCurve:kg,CubicBezierCurve3:X1,EllipseCurve:Ah,LineCurve:zg,LineCurve3:Gg,QuadraticBezierCurve:Ng,QuadraticBezierCurve3:vh,SplineCurve:Y1});class J1 extends Ic{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);e.equals(o)||this.curves.push(new zg(o,e))}getPoint(e,o){const f=e*this.getLength(),y=this.getCurveLengths();let M=0;for(;M<y.length;){if(y[M]>=f){const B=y[M]-f,I=this.curves[M],D=I.getLength(),U=D===0?0:1-B/D;return I.getPointAt(U,o)}M++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let o=0;for(let f=0,y=this.curves.length;f<y;f++)o+=this.curves[f].getLength(),e.push(o);return this.cacheLengths=e,e}getSpacedPoints(e=40){const o=[];for(let f=0;f<=e;f++)o.push(this.getPoint(f/e));return this.autoClose&&o.push(o[0]),o}getPoints(e=12){const o=[];let f;for(let y=0,M=this.curves;y<M.length;y++){const B=M[y],I=B.isEllipseCurve?e*2:B.isLineCurve||B.isLineCurve3?1:B.isSplineCurve?e*B.points.length:e,D=B.getPoints(I);for(let U=0;U<D.length;U++){const X=D[U];f&&f.equals(X)||(o.push(X),f=X)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(e){super.copy(e),this.curves=[];for(let o=0,f=e.curves.length;o<f;o++){const y=e.curves[o];this.curves.push(y.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let o=0,f=this.curves.length;o<f;o++){const y=this.curves[o];e.curves.push(y.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let o=0,f=e.curves.length;o<f;o++){const y=e.curves[o];this.curves.push(new Ug[y.type]().fromJSON(y))}return this}}class xf extends J1{constructor(e){super(),this.type="Path",this.currentPoint=new gn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let o=1,f=e.length;o<f;o++)this.lineTo(e[o].x,e[o].y);return this}moveTo(e,o){return this.currentPoint.set(e,o),this}lineTo(e,o){const f=new zg(this.currentPoint.clone(),new gn(e,o));return this.curves.push(f),this.currentPoint.set(e,o),this}quadraticCurveTo(e,o,f,y){const M=new Ng(this.currentPoint.clone(),new gn(e,o),new gn(f,y));return this.curves.push(M),this.currentPoint.set(f,y),this}bezierCurveTo(e,o,f,y,M,B){const I=new kg(this.currentPoint.clone(),new gn(e,o),new gn(f,y),new gn(M,B));return this.curves.push(I),this.currentPoint.set(M,B),this}splineThru(e){const o=[this.currentPoint.clone()].concat(e),f=new Y1(o);return this.curves.push(f),this.currentPoint.copy(e[e.length-1]),this}arc(e,o,f,y,M,B){const I=this.currentPoint.x,D=this.currentPoint.y;return this.absarc(e+I,o+D,f,y,M,B),this}absarc(e,o,f,y,M,B){return this.absellipse(e,o,f,f,y,M,B),this}ellipse(e,o,f,y,M,B,I,D){const U=this.currentPoint.x,X=this.currentPoint.y;return this.absellipse(e+U,o+X,f,y,M,B,I,D),this}absellipse(e,o,f,y,M,B,I,D){const U=new Ah(e,o,f,y,M,B,I,D);if(this.curves.length>0){const q=U.getPoint(0);q.equals(this.currentPoint)||this.lineTo(q.x,q.y)}this.curves.push(U);const X=U.getPoint(1);return this.currentPoint.copy(X),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Cf extends xi{constructor(e=[new gn(0,-.5),new gn(.5,0),new gn(0,.5)],o=12,f=0,y=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:o,phiStart:f,phiLength:y},o=Math.floor(o),y=Go(y,0,Math.PI*2);const M=[],B=[],I=[],D=[],U=[],X=1/o,q=new Qe,Z=new gn,te=new Qe,ie=new Qe,fe=new Qe;let $=0,re=0;for(let be=0;be<=e.length-1;be++)switch(be){case 0:$=e[be+1].x-e[be].x,re=e[be+1].y-e[be].y,te.x=re*1,te.y=-$,te.z=re*0,fe.copy(te),te.normalize(),D.push(te.x,te.y,te.z);break;case e.length-1:D.push(fe.x,fe.y,fe.z);break;default:$=e[be+1].x-e[be].x,re=e[be+1].y-e[be].y,te.x=re*1,te.y=-$,te.z=re*0,ie.copy(te),te.x+=fe.x,te.y+=fe.y,te.z+=fe.z,te.normalize(),D.push(te.x,te.y,te.z),fe.copy(ie)}for(let be=0;be<=o;be++){const he=f+be*X*y,Se=Math.sin(he),Ue=Math.cos(he);for(let Xe=0;Xe<=e.length-1;Xe++){q.x=e[Xe].x*Se,q.y=e[Xe].y,q.z=e[Xe].x*Ue,B.push(q.x,q.y,q.z),Z.x=be/o,Z.y=Xe/(e.length-1),I.push(Z.x,Z.y);const et=D[3*Xe+0]*Se,st=D[3*Xe+1],we=D[3*Xe+0]*Ue;U.push(et,st,we)}}for(let be=0;be<o;be++)for(let he=0;he<e.length-1;he++){const Se=he+be*e.length,Ue=Se,Xe=Se+e.length,et=Se+e.length+1,st=Se+1;M.push(Ue,Xe,st),M.push(et,st,Xe)}this.setIndex(M),this.setAttribute("position",new yr(B,3)),this.setAttribute("uv",new yr(I,2)),this.setAttribute("normal",new yr(U,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cf(e.points,e.segments,e.phiStart,e.phiLength)}}class r0 extends Cf{constructor(e=1,o=1,f=4,y=8){const M=new xf;M.absarc(0,-o/2,e,Math.PI*1.5,0),M.absarc(0,o/2,e,0,Math.PI*.5),super(M.getPoints(f),y),this.type="CapsuleGeometry",this.parameters={radius:e,height:o,capSegments:f,radialSegments:y}}static fromJSON(e){return new r0(e.radius,e.length,e.capSegments,e.radialSegments)}}class i0 extends xi{constructor(e=1,o=32,f=0,y=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:o,thetaStart:f,thetaLength:y},o=Math.max(3,o);const M=[],B=[],I=[],D=[],U=new Qe,X=new gn;B.push(0,0,0),I.push(0,0,1),D.push(.5,.5);for(let q=0,Z=3;q<=o;q++,Z+=3){const te=f+q/o*y;U.x=e*Math.cos(te),U.y=e*Math.sin(te),B.push(U.x,U.y,U.z),I.push(0,0,1),X.x=(B[Z]/e+1)/2,X.y=(B[Z+1]/e+1)/2,D.push(X.x,X.y)}for(let q=1;q<=o;q++)M.push(q,q+1,0);this.setIndex(M),this.setAttribute("position",new yr(B,3)),this.setAttribute("normal",new yr(I,3)),this.setAttribute("uv",new yr(D,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class _h extends xi{constructor(e=1,o=1,f=1,y=32,M=1,B=!1,I=0,D=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:o,height:f,radialSegments:y,heightSegments:M,openEnded:B,thetaStart:I,thetaLength:D};const U=this;y=Math.floor(y),M=Math.floor(M);const X=[],q=[],Z=[],te=[];let ie=0;const fe=[],$=f/2;let re=0;be(),B===!1&&(e>0&&he(!0),o>0&&he(!1)),this.setIndex(X),this.setAttribute("position",new yr(q,3)),this.setAttribute("normal",new yr(Z,3)),this.setAttribute("uv",new yr(te,2));function be(){const Se=new Qe,Ue=new Qe;let Xe=0;const et=(o-e)/f;for(let st=0;st<=M;st++){const we=[],We=st/M,Yt=We*(o-e)+e;for(let Mn=0;Mn<=y;Mn++){const Gt=Mn/y,Ut=Gt*D+I,Xt=Math.sin(Ut),xn=Math.cos(Ut);Ue.x=Yt*Xt,Ue.y=-We*f+$,Ue.z=Yt*xn,q.push(Ue.x,Ue.y,Ue.z),Se.set(Xt,et,xn).normalize(),Z.push(Se.x,Se.y,Se.z),te.push(Gt,1-We),we.push(ie++)}fe.push(we)}for(let st=0;st<y;st++)for(let we=0;we<M;we++){const We=fe[we][st],Yt=fe[we+1][st],Mn=fe[we+1][st+1],Gt=fe[we][st+1];X.push(We,Yt,Gt),X.push(Yt,Mn,Gt),Xe+=6}U.addGroup(re,Xe,0),re+=Xe}function he(Se){const Ue=ie,Xe=new gn,et=new Qe;let st=0;const we=Se===!0?e:o,We=Se===!0?1:-1;for(let Mn=1;Mn<=y;Mn++)q.push(0,$*We,0),Z.push(0,We,0),te.push(.5,.5),ie++;const Yt=ie;for(let Mn=0;Mn<=y;Mn++){const Ut=Mn/y*D+I,Xt=Math.cos(Ut),xn=Math.sin(Ut);et.x=we*xn,et.y=$*We,et.z=we*Xt,q.push(et.x,et.y,et.z),Z.push(0,We,0),Xe.x=Xt*.5+.5,Xe.y=xn*.5*We+.5,te.push(Xe.x,Xe.y),ie++}for(let Mn=0;Mn<y;Mn++){const Gt=Ue+Mn,Ut=Yt+Mn;Se===!0?X.push(Ut,Ut+1,Gt):X.push(Ut+1,Ut,Gt),st+=3}U.addGroup(re,st,Se===!0?1:2),re+=st}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _h(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class o0 extends _h{constructor(e=1,o=1,f=32,y=1,M=!1,B=0,I=Math.PI*2){super(0,e,o,f,y,M,B,I),this.type="ConeGeometry",this.parameters={radius:e,height:o,radialSegments:f,heightSegments:y,openEnded:M,thetaStart:B,thetaLength:I}}static fromJSON(e){return new o0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xu extends xi{constructor(e=[],o=[],f=1,y=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:o,radius:f,detail:y};const M=[],B=[];I(y),U(f),X(),this.setAttribute("position",new yr(M,3)),this.setAttribute("normal",new yr(M.slice(),3)),this.setAttribute("uv",new yr(B,2)),y===0?this.computeVertexNormals():this.normalizeNormals();function I(be){const he=new Qe,Se=new Qe,Ue=new Qe;for(let Xe=0;Xe<o.length;Xe+=3)te(o[Xe+0],he),te(o[Xe+1],Se),te(o[Xe+2],Ue),D(he,Se,Ue,be)}function D(be,he,Se,Ue){const Xe=Ue+1,et=[];for(let st=0;st<=Xe;st++){et[st]=[];const we=be.clone().lerp(Se,st/Xe),We=he.clone().lerp(Se,st/Xe),Yt=Xe-st;for(let Mn=0;Mn<=Yt;Mn++)Mn===0&&st===Xe?et[st][Mn]=we:et[st][Mn]=we.clone().lerp(We,Mn/Yt)}for(let st=0;st<Xe;st++)for(let we=0;we<2*(Xe-st)-1;we++){const We=Math.floor(we/2);we%2===0?(Z(et[st][We+1]),Z(et[st+1][We]),Z(et[st][We])):(Z(et[st][We+1]),Z(et[st+1][We+1]),Z(et[st+1][We]))}}function U(be){const he=new Qe;for(let Se=0;Se<M.length;Se+=3)he.x=M[Se+0],he.y=M[Se+1],he.z=M[Se+2],he.normalize().multiplyScalar(be),M[Se+0]=he.x,M[Se+1]=he.y,M[Se+2]=he.z}function X(){const be=new Qe;for(let he=0;he<M.length;he+=3){be.x=M[he+0],be.y=M[he+1],be.z=M[he+2];const Se=$(be)/2/Math.PI+.5,Ue=re(be)/Math.PI+.5;B.push(Se,1-Ue)}ie(),q()}function q(){for(let be=0;be<B.length;be+=6){const he=B[be+0],Se=B[be+2],Ue=B[be+4],Xe=Math.max(he,Se,Ue),et=Math.min(he,Se,Ue);Xe>.9&&et<.1&&(he<.2&&(B[be+0]+=1),Se<.2&&(B[be+2]+=1),Ue<.2&&(B[be+4]+=1))}}function Z(be){M.push(be.x,be.y,be.z)}function te(be,he){const Se=be*3;he.x=e[Se+0],he.y=e[Se+1],he.z=e[Se+2]}function ie(){const be=new Qe,he=new Qe,Se=new Qe,Ue=new Qe,Xe=new gn,et=new gn,st=new gn;for(let we=0,We=0;we<M.length;we+=9,We+=6){be.set(M[we+0],M[we+1],M[we+2]),he.set(M[we+3],M[we+4],M[we+5]),Se.set(M[we+6],M[we+7],M[we+8]),Xe.set(B[We+0],B[We+1]),et.set(B[We+2],B[We+3]),st.set(B[We+4],B[We+5]),Ue.copy(be).add(he).add(Se).divideScalar(3);const Yt=$(Ue);fe(Xe,We+0,be,Yt),fe(et,We+2,he,Yt),fe(st,We+4,Se,Yt)}}function fe(be,he,Se,Ue){Ue<0&&be.x===1&&(B[he]=be.x-1),Se.x===0&&Se.z===0&&(B[he]=Ue/2/Math.PI+.5)}function $(be){return Math.atan2(be.z,-be.x)}function re(be){return Math.atan2(-be.y,Math.sqrt(be.x*be.x+be.z*be.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xu(e.vertices,e.indices,e.radius,e.details)}}class q1 extends xu{constructor(e=1,o=0){const f=(1+Math.sqrt(5))/2,y=1/f,M=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-f,0,-y,f,0,y,-f,0,y,f,-y,-f,0,-y,f,0,y,-f,0,y,f,0,-f,0,-y,f,0,-y,-f,0,y,f,0,y],B=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(M,B,e,o),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new q1(e.radius,e.detail)}}const jg=new Qe,Z1=new Qe,s0=new Qe,a0=new Ba;class cc extends xi{constructor(e=null,o=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:o},e!==null){const y=Math.pow(10,4),M=Math.cos(yc*o),B=e.getIndex(),I=e.getAttribute("position"),D=B?B.count:I.count,U=[0,0,0],X=["a","b","c"],q=new Array(3),Z={},te=[];for(let ie=0;ie<D;ie+=3){B?(U[0]=B.getX(ie),U[1]=B.getX(ie+1),U[2]=B.getX(ie+2)):(U[0]=ie,U[1]=ie+1,U[2]=ie+2);const{a:fe,b:$,c:re}=a0;if(fe.fromBufferAttribute(I,U[0]),$.fromBufferAttribute(I,U[1]),re.fromBufferAttribute(I,U[2]),a0.getNormal(s0),q[0]=`${Math.round(fe.x*y)},${Math.round(fe.y*y)},${Math.round(fe.z*y)}`,q[1]=`${Math.round($.x*y)},${Math.round($.y*y)},${Math.round($.z*y)}`,q[2]=`${Math.round(re.x*y)},${Math.round(re.y*y)},${Math.round(re.z*y)}`,!(q[0]===q[1]||q[1]===q[2]||q[2]===q[0]))for(let be=0;be<3;be++){const he=(be+1)%3,Se=q[be],Ue=q[he],Xe=a0[X[be]],et=a0[X[he]],st=`${Se}_${Ue}`,we=`${Ue}_${Se}`;we in Z&&Z[we]?(s0.dot(Z[we].normal)<=M&&(te.push(Xe.x,Xe.y,Xe.z),te.push(et.x,et.y,et.z)),Z[we]=null):st in Z||(Z[st]={index0:U[be],index1:U[he],normal:s0.clone()})}}for(const ie in Z)if(Z[ie]){const{index0:fe,index1:$}=Z[ie];jg.fromBufferAttribute(I,fe),Z1.fromBufferAttribute(I,$),te.push(jg.x,jg.y,jg.z),te.push(Z1.x,Z1.y,Z1.z)}this.setAttribute("position",new yr(te,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Eh extends xf{constructor(e){super(e),this.uuid=Ga(),this.type="Shape",this.holes=[]}getPointsHoles(e){const o=[];for(let f=0,y=this.holes.length;f<y;f++)o[f]=this.holes[f].getPoints(e);return o}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let o=0,f=e.holes.length;o<f;o++){const y=e.holes[o];this.holes.push(y.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let o=0,f=this.holes.length;o<f;o++){const y=this.holes[o];e.holes.push(y.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let o=0,f=e.holes.length;o<f;o++){const y=e.holes[o];this.holes.push(new xf().fromJSON(y))}return this}}const x3={triangulate:function(C,e,o=2){const f=e&&e.length,y=f?e[0]*o:C.length;let M=Ia(C,0,y,o,!0);const B=[];if(!M||M.next===M.prev)return B;let I,D,U,X,q,Z,te;if(f&&(M=bM(C,e,M,o)),C.length>80*o){I=U=C[0],D=X=C[1];for(let ie=o;ie<y;ie+=o)q=C[ie],Z=C[ie+1],q<I&&(I=q),Z<D&&(D=Z),q>U&&(U=q),Z>X&&(X=Z);te=Math.max(U-I,X-D),te=te!==0?32767/te:0}return wf(M,B,o,I,D,te,0),B}};function Ia(C,e,o,f,y){let M,B;if(y===O3(C,e,o,f)>0)for(M=e;M<o;M+=f)B=gd(M,C[M],C[M+1],B);else for(M=o-f;M>=e;M-=f)B=gd(M,C[M],C[M+1],B);return B&&bh(B,B.next)&&(md(B),B=B.next),B}function Sf(C,e){if(!C)return C;e||(e=C);let o=C,f;do if(f=!1,!o.steiner&&(bh(o,o.next)||ps(o.prev,o,o.next)===0)){if(md(o),o=e=o.prev,o===o.next)break;f=!0}else o=o.next;while(f||o!==e);return e}function wf(C,e,o,f,y,M,B){if(!C)return;!B&&M&&$1(C,f,y,M);let I=C,D,U;for(;C.prev!==C.next;){if(D=C.prev,U=C.next,M?EM(C,f,y,M):_M(C)){e.push(D.i/o|0),e.push(C.i/o|0),e.push(U.i/o|0),md(C),C=U.next,I=U.next;continue}if(C=U,C===I){B?B===1?(C=C3(Sf(C),e,o),wf(C,e,o,f,y,M,2)):B===2&&dv(C,e,o,f,y,M):wf(Sf(C),e,o,f,y,M,1);break}}}function _M(C){const e=C.prev,o=C,f=C.next;if(ps(e,o,f)>=0)return!1;const y=e.x,M=o.x,B=f.x,I=e.y,D=o.y,U=f.y,X=y<M?y<B?y:B:M<B?M:B,q=I<D?I<U?I:U:D<U?D:U,Z=y>M?y>B?y:B:M>B?M:B,te=I>D?I>U?I:U:D>U?D:U;let ie=f.next;for(;ie!==e;){if(ie.x>=X&&ie.x<=Z&&ie.y>=q&&ie.y<=te&&Tf(y,I,M,D,B,U,ie.x,ie.y)&&ps(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function EM(C,e,o,f){const y=C.prev,M=C,B=C.next;if(ps(y,M,B)>=0)return!1;const I=y.x,D=M.x,U=B.x,X=y.y,q=M.y,Z=B.y,te=I<D?I<U?I:U:D<U?D:U,ie=X<q?X<Z?X:Z:q<Z?q:Z,fe=I>D?I>U?I:U:D>U?D:U,$=X>q?X>Z?X:Z:q>Z?q:Z,re=Hg(te,ie,e,o,f),be=Hg(fe,$,e,o,f);let he=C.prevZ,Se=C.nextZ;for(;he&&he.z>=re&&Se&&Se.z<=be;){if(he.x>=te&&he.x<=fe&&he.y>=ie&&he.y<=$&&he!==y&&he!==B&&Tf(I,X,D,q,U,Z,he.x,he.y)&&ps(he.prev,he,he.next)>=0||(he=he.prevZ,Se.x>=te&&Se.x<=fe&&Se.y>=ie&&Se.y<=$&&Se!==y&&Se!==B&&Tf(I,X,D,q,U,Z,Se.x,Se.y)&&ps(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;he&&he.z>=re;){if(he.x>=te&&he.x<=fe&&he.y>=ie&&he.y<=$&&he!==y&&he!==B&&Tf(I,X,D,q,U,Z,he.x,he.y)&&ps(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;Se&&Se.z<=be;){if(Se.x>=te&&Se.x<=fe&&Se.y>=ie&&Se.y<=$&&Se!==y&&Se!==B&&Tf(I,X,D,q,U,Z,Se.x,Se.y)&&ps(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function C3(C,e,o){let f=C;do{const y=f.prev,M=f.next.next;!bh(y,M)&&hv(y,f,f.next,M)&&Vg(y,M)&&Vg(M,y)&&(e.push(y.i/o|0),e.push(f.i/o|0),e.push(M.i/o|0),md(f),md(f.next),f=C=M),f=f.next}while(f!==C);return Sf(f)}function dv(C,e,o,f,y,M){let B=C;do{let I=B.next.next;for(;I!==B.prev;){if(B.i!==I.i&&eA(B,I)){let D=gv(B,I);B=Sf(B,B.next),D=Sf(D,D.next),wf(B,e,o,f,y,M,0),wf(D,e,o,f,y,M,0);return}I=I.next}B=B.next}while(B!==C)}function bM(C,e,o,f){const y=[];let M,B,I,D,U;for(M=0,B=e.length;M<B;M++)I=e[M]*f,D=M<B-1?e[M+1]*f:C.length,U=Ia(C,I,D,f,!1),U===U.next&&(U.steiner=!0),y.push(I3(U));for(y.sort(S3),M=0;M<y.length;M++)o=w3(y[M],o);return o}function S3(C,e){return C.x-e.x}function w3(C,e){const o=T3(C,e);if(!o)return e;const f=gv(o,C);return Sf(f,f.next),Sf(o,o.next)}function T3(C,e){let o=e,f=-1/0,y;const M=C.x,B=C.y;do{if(B<=o.y&&B>=o.next.y&&o.next.y!==o.y){const Z=o.x+(B-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(Z<=M&&Z>f&&(f=Z,y=o.x<o.next.x?o:o.next,Z===M))return y}o=o.next}while(o!==e);if(!y)return null;const I=y,D=y.x,U=y.y;let X=1/0,q;o=y;do M>=o.x&&o.x>=D&&M!==o.x&&Tf(B<U?M:f,B,D,U,B<U?f:M,B,o.x,o.y)&&(q=Math.abs(B-o.y)/(M-o.x),Vg(o,C)&&(q<X||q===X&&(o.x>y.x||o.x===y.x&&B3(y,o)))&&(y=o,X=q)),o=o.next;while(o!==I);return y}function B3(C,e){return ps(C.prev,C,e.prev)<0&&ps(e.next,C,C.next)<0}function $1(C,e,o,f){let y=C;do y.z===0&&(y.z=Hg(y.x,y.y,e,o,f)),y.prevZ=y.prev,y.nextZ=y.next,y=y.next;while(y!==C);y.prevZ.nextZ=null,y.prevZ=null,R3(y)}function R3(C){let e,o,f,y,M,B,I,D,U=1;do{for(o=C,C=null,M=null,B=0;o;){for(B++,f=o,I=0,e=0;e<U&&(I++,f=f.nextZ,!!f);e++);for(D=U;I>0||D>0&&f;)I!==0&&(D===0||!f||o.z<=f.z)?(y=o,o=o.nextZ,I--):(y=f,f=f.nextZ,D--),M?M.nextZ=y:C=y,y.prevZ=M,M=y;o=f}M.nextZ=null,U*=2}while(B>1);return C}function Hg(C,e,o,f,y){return C=(C-o)*y|0,e=(e-f)*y|0,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,C|e<<1}function I3(C){let e=C,o=C;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==C);return o}function Tf(C,e,o,f,y,M,B,I){return(y-B)*(e-I)>=(C-B)*(M-I)&&(C-B)*(f-I)>=(o-B)*(e-I)&&(o-B)*(M-I)>=(y-B)*(f-I)}function eA(C,e){return C.next.i!==e.i&&C.prev.i!==e.i&&!fv(C,e)&&(Vg(C,e)&&Vg(e,C)&&F3(C,e)&&(ps(C.prev,C,e.prev)||ps(C,e.prev,e))||bh(C,e)&&ps(C.prev,C,C.next)>0&&ps(e.prev,e,e.next)>0)}function ps(C,e,o){return(e.y-C.y)*(o.x-e.x)-(e.x-C.x)*(o.y-e.y)}function bh(C,e){return C.x===e.x&&C.y===e.y}function hv(C,e,o,f){const y=Wg(ps(C,e,o)),M=Wg(ps(C,e,f)),B=Wg(ps(o,f,C)),I=Wg(ps(o,f,e));return!!(y!==M&&B!==I||y===0&&l0(C,o,e)||M===0&&l0(C,f,e)||B===0&&l0(o,C,f)||I===0&&l0(o,e,f))}function l0(C,e,o){return e.x<=Math.max(C.x,o.x)&&e.x>=Math.min(C.x,o.x)&&e.y<=Math.max(C.y,o.y)&&e.y>=Math.min(C.y,o.y)}function Wg(C){return C>0?1:C<0?-1:0}function fv(C,e){let o=C;do{if(o.i!==C.i&&o.next.i!==C.i&&o.i!==e.i&&o.next.i!==e.i&&hv(o,o.next,C,e))return!0;o=o.next}while(o!==C);return!1}function Vg(C,e){return ps(C.prev,C,C.next)<0?ps(C,e,C.next)>=0&&ps(C,C.prev,e)>=0:ps(C,e,C.prev)<0||ps(C,C.next,e)<0}function F3(C,e){let o=C,f=!1;const y=(C.x+e.x)/2,M=(C.y+e.y)/2;do o.y>M!=o.next.y>M&&o.next.y!==o.y&&y<(o.next.x-o.x)*(M-o.y)/(o.next.y-o.y)+o.x&&(f=!f),o=o.next;while(o!==C);return f}function gv(C,e){const o=new $c(C.i,C.x,C.y),f=new $c(e.i,e.x,e.y),y=C.next,M=e.prev;return C.next=e,e.prev=C,o.next=y,y.prev=o,f.next=o,o.prev=f,M.next=f,f.prev=M,f}function gd(C,e,o,f){const y=new $c(C,e,o);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function md(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function $c(C,e,o){this.i=C,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O3(C,e,o,f){let y=0;for(let M=e,B=o-f;M<o;M+=f)y+=(C[B]-C[M])*(C[M+1]+C[B+1]),B=M;return y}class Up{static area(e){const o=e.length;let f=0;for(let y=o-1,M=0;M<o;y=M++)f+=e[y].x*e[M].y-e[M].x*e[y].y;return f*.5}static isClockWise(e){return Up.area(e)<0}static triangulateShape(e,o){const f=[],y=[],M=[];Qg(e),c0(f,e);let B=e.length;o.forEach(Qg);for(let D=0;D<o.length;D++)y.push(B),B+=o[D].length,c0(f,o[D]);const I=x3.triangulate(f,y);for(let D=0;D<I.length;D+=3)M.push(I.slice(D,D+3));return M}}function Qg(C){const e=C.length;e>2&&C[e-1].equals(C[0])&&C.pop()}function c0(C,e){for(let o=0;o<e.length;o++)C.push(e[o].x),C.push(e[o].y)}class p0 extends xi{constructor(e=new Eh([new gn(.5,.5),new gn(-.5,.5),new gn(-.5,-.5),new gn(.5,-.5)]),o={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:o},e=Array.isArray(e)?e:[e];const f=this,y=[],M=[];for(let I=0,D=e.length;I<D;I++){const U=e[I];B(U)}this.setAttribute("position",new yr(y,3)),this.setAttribute("uv",new yr(M,2)),this.computeVertexNormals();function B(I){const D=[],U=o.curveSegments!==void 0?o.curveSegments:12,X=o.steps!==void 0?o.steps:1,q=o.depth!==void 0?o.depth:1;let Z=o.bevelEnabled!==void 0?o.bevelEnabled:!0,te=o.bevelThickness!==void 0?o.bevelThickness:.2,ie=o.bevelSize!==void 0?o.bevelSize:te-.1,fe=o.bevelOffset!==void 0?o.bevelOffset:0,$=o.bevelSegments!==void 0?o.bevelSegments:3;const re=o.extrudePath,be=o.UVGenerator!==void 0?o.UVGenerator:D3;let he,Se=!1,Ue,Xe,et,st;re&&(he=re.getSpacedPoints(X),Se=!0,Z=!1,Ue=re.computeFrenetFrames(X,!1),Xe=new Qe,et=new Qe,st=new Qe),Z||($=0,te=0,ie=0,fe=0);const we=I.extractPoints(U);let We=we.shape;const Yt=we.holes;if(!Up.isClockWise(We)){We=We.reverse();for(let ot=0,zn=Yt.length;ot<zn;ot++){const Kt=Yt[ot];Up.isClockWise(Kt)&&(Yt[ot]=Kt.reverse())}}const Gt=Up.triangulateShape(We,Yt),Ut=We;for(let ot=0,zn=Yt.length;ot<zn;ot++){const Kt=Yt[ot];We=We.concat(Kt)}function Xt(ot,zn,Kt){return zn||w.error("THREE.ExtrudeGeometry: vec does not exist"),ot.clone().addScaledVector(zn,Kt)}const xn=We.length,un=Gt.length;function fn(ot,zn,Kt){let hn,Cn,kr;const mr=ot.x-zn.x,Cr=ot.y-zn.y,vi=Kt.x-ot.x,Ui=Kt.y-ot.y,us=mr*mr+Cr*Cr,tt=mr*Ui-Cr*vi;if(Math.abs(tt)>Number.EPSILON){const De=Math.sqrt(us),nn=Math.sqrt(vi*vi+Ui*Ui),Un=zn.x-Cr/De,Wn=zn.y+mr/De,pr=Kt.x-Ui/nn,yn=Kt.y+vi/nn,cr=((pr-Un)*Ui-(yn-Wn)*vi)/(mr*Ui-Cr*vi);hn=Un+mr*cr-ot.x,Cn=Wn+Cr*cr-ot.y;const on=hn*hn+Cn*Cn;if(on<=2)return new gn(hn,Cn);kr=Math.sqrt(on/2)}else{let De=!1;mr>Number.EPSILON?vi>Number.EPSILON&&(De=!0):mr<-Number.EPSILON?vi<-Number.EPSILON&&(De=!0):Math.sign(Cr)===Math.sign(Ui)&&(De=!0),De?(hn=-Cr,Cn=mr,kr=Math.sqrt(us)):(hn=mr,Cn=Cr,kr=Math.sqrt(us/2))}return new gn(hn/kr,Cn/kr)}const jt=[];for(let ot=0,zn=Ut.length,Kt=zn-1,hn=ot+1;ot<zn;ot++,Kt++,hn++)Kt===zn&&(Kt=0),hn===zn&&(hn=0),jt[ot]=fn(Ut[ot],Ut[Kt],Ut[hn]);const Tn=[];let Lt,dn=jt.concat();for(let ot=0,zn=Yt.length;ot<zn;ot++){const Kt=Yt[ot];Lt=[];for(let hn=0,Cn=Kt.length,kr=Cn-1,mr=hn+1;hn<Cn;hn++,kr++,mr++)kr===Cn&&(kr=0),mr===Cn&&(mr=0),Lt[hn]=fn(Kt[hn],Kt[kr],Kt[mr]);Tn.push(Lt),dn=dn.concat(Lt)}for(let ot=0;ot<$;ot++){const zn=ot/$,Kt=te*Math.cos(zn*Math.PI/2),hn=ie*Math.sin(zn*Math.PI/2)+fe;for(let Cn=0,kr=Ut.length;Cn<kr;Cn++){const mr=Xt(Ut[Cn],jt[Cn],hn);Ur(mr.x,mr.y,-Kt)}for(let Cn=0,kr=Yt.length;Cn<kr;Cn++){const mr=Yt[Cn];Lt=Tn[Cn];for(let Cr=0,vi=mr.length;Cr<vi;Cr++){const Ui=Xt(mr[Cr],Lt[Cr],hn);Ur(Ui.x,Ui.y,-Kt)}}}const tr=ie+fe;for(let ot=0;ot<xn;ot++){const zn=Z?Xt(We[ot],dn[ot],tr):We[ot];Se?(et.copy(Ue.normals[0]).multiplyScalar(zn.x),Xe.copy(Ue.binormals[0]).multiplyScalar(zn.y),st.copy(he[0]).add(et).add(Xe),Ur(st.x,st.y,st.z)):Ur(zn.x,zn.y,0)}for(let ot=1;ot<=X;ot++)for(let zn=0;zn<xn;zn++){const Kt=Z?Xt(We[zn],dn[zn],tr):We[zn];Se?(et.copy(Ue.normals[ot]).multiplyScalar(Kt.x),Xe.copy(Ue.binormals[ot]).multiplyScalar(Kt.y),st.copy(he[ot]).add(et).add(Xe),Ur(st.x,st.y,st.z)):Ur(Kt.x,Kt.y,q/X*ot)}for(let ot=$-1;ot>=0;ot--){const zn=ot/$,Kt=te*Math.cos(zn*Math.PI/2),hn=ie*Math.sin(zn*Math.PI/2)+fe;for(let Cn=0,kr=Ut.length;Cn<kr;Cn++){const mr=Xt(Ut[Cn],jt[Cn],hn);Ur(mr.x,mr.y,q+Kt)}for(let Cn=0,kr=Yt.length;Cn<kr;Cn++){const mr=Yt[Cn];Lt=Tn[Cn];for(let Cr=0,vi=mr.length;Cr<vi;Cr++){const Ui=Xt(mr[Cr],Lt[Cr],hn);Se?Ur(Ui.x,Ui.y+he[X-1].y,he[X-1].x+Kt):Ur(Ui.x,Ui.y,q+Kt)}}}cn(),yt();function cn(){const ot=y.length/3;if(Z){let zn=0,Kt=xn*zn;for(let hn=0;hn<un;hn++){const Cn=Gt[hn];Dr(Cn[2]+Kt,Cn[1]+Kt,Cn[0]+Kt)}zn=X+$*2,Kt=xn*zn;for(let hn=0;hn<un;hn++){const Cn=Gt[hn];Dr(Cn[0]+Kt,Cn[1]+Kt,Cn[2]+Kt)}}else{for(let zn=0;zn<un;zn++){const Kt=Gt[zn];Dr(Kt[2],Kt[1],Kt[0])}for(let zn=0;zn<un;zn++){const Kt=Gt[zn];Dr(Kt[0]+xn*X,Kt[1]+xn*X,Kt[2]+xn*X)}}f.addGroup(ot,y.length/3-ot,0)}function yt(){const ot=y.length/3;let zn=0;Nr(Ut,zn),zn+=Ut.length;for(let Kt=0,hn=Yt.length;Kt<hn;Kt++){const Cn=Yt[Kt];Nr(Cn,zn),zn+=Cn.length}f.addGroup(ot,y.length/3-ot,1)}function Nr(ot,zn){let Kt=ot.length;for(;--Kt>=0;){const hn=Kt;let Cn=Kt-1;Cn<0&&(Cn=ot.length-1);for(let kr=0,mr=X+$*2;kr<mr;kr++){const Cr=xn*kr,vi=xn*(kr+1),Ui=zn+hn+Cr,us=zn+Cn+Cr,tt=zn+Cn+vi,De=zn+hn+vi;Wi(Ui,us,tt,De)}}}function Ur(ot,zn,Kt){D.push(ot),D.push(zn),D.push(Kt)}function Dr(ot,zn,Kt){os(ot),os(zn),os(Kt);const hn=y.length/3,Cn=be.generateTopUV(f,y,hn-3,hn-2,hn-1);oi(Cn[0]),oi(Cn[1]),oi(Cn[2])}function Wi(ot,zn,Kt,hn){os(ot),os(zn),os(hn),os(zn),os(Kt),os(hn);const Cn=y.length/3,kr=be.generateSideWallUV(f,y,Cn-6,Cn-3,Cn-2,Cn-1);oi(kr[0]),oi(kr[1]),oi(kr[3]),oi(kr[1]),oi(kr[2]),oi(kr[3])}function os(ot){y.push(D[ot*3+0]),y.push(D[ot*3+1]),y.push(D[ot*3+2])}function oi(ot){M.push(ot.x),M.push(ot.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),o=this.parameters.shapes,f=this.parameters.options;return tA(o,f,e)}static fromJSON(e,o){const f=[];for(let M=0,B=e.shapes.length;M<B;M++){const I=o[e.shapes[M]];f.push(I)}const y=e.options.extrudePath;return y!==void 0&&(e.options.extrudePath=new Ug[y.type]().fromJSON(y)),new p0(f,e.options)}}const D3={generateTopUV:function(C,e,o,f,y){const M=e[o*3],B=e[o*3+1],I=e[f*3],D=e[f*3+1],U=e[y*3],X=e[y*3+1];return[new gn(M,B),new gn(I,D),new gn(U,X)]},generateSideWallUV:function(C,e,o,f,y,M){const B=e[o*3],I=e[o*3+1],D=e[o*3+2],U=e[f*3],X=e[f*3+1],q=e[f*3+2],Z=e[y*3],te=e[y*3+1],ie=e[y*3+2],fe=e[M*3],$=e[M*3+1],re=e[M*3+2];return Math.abs(I-X)<Math.abs(B-U)?[new gn(B,1-D),new gn(U,1-q),new gn(Z,1-ie),new gn(fe,1-re)]:[new gn(I,1-D),new gn(X,1-q),new gn(te,1-ie),new gn($,1-re)]}};function tA(C,e,o){if(o.shapes=[],Array.isArray(C))for(let f=0,y=C.length;f<y;f++){const M=C[f];o.shapes.push(M.uuid)}else o.shapes.push(C.uuid);return o.options=Object.assign({},e),e.extrudePath!==void 0&&(o.options.extrudePath=e.extrudePath.toJSON()),o}class Kg extends xu{constructor(e=1,o=0){const f=(1+Math.sqrt(5))/2,y=[-1,f,0,1,f,0,-1,-f,0,1,-f,0,0,-1,f,0,1,f,0,-1,-f,0,1,-f,f,0,-1,f,0,1,-f,0,-1,-f,0,1],M=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(y,M,e,o),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new Kg(e.radius,e.detail)}}class Xg extends xu{constructor(e=1,o=0){const f=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],y=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(f,y,e,o),this.type="OctahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new Xg(e.radius,e.detail)}}class Yg extends xi{constructor(e=.5,o=1,f=32,y=1,M=0,B=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:o,thetaSegments:f,phiSegments:y,thetaStart:M,thetaLength:B},f=Math.max(3,f),y=Math.max(1,y);const I=[],D=[],U=[],X=[];let q=e;const Z=(o-e)/y,te=new Qe,ie=new gn;for(let fe=0;fe<=y;fe++){for(let $=0;$<=f;$++){const re=M+$/f*B;te.x=q*Math.cos(re),te.y=q*Math.sin(re),D.push(te.x,te.y,te.z),U.push(0,0,1),ie.x=(te.x/o+1)/2,ie.y=(te.y/o+1)/2,X.push(ie.x,ie.y)}q+=Z}for(let fe=0;fe<y;fe++){const $=fe*(f+1);for(let re=0;re<f;re++){const be=re+$,he=be,Se=be+f+1,Ue=be+f+2,Xe=be+1;I.push(he,Se,Xe),I.push(Se,Ue,Xe)}}this.setIndex(I),this.setAttribute("position",new yr(D,3)),this.setAttribute("normal",new yr(U,3)),this.setAttribute("uv",new yr(X,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yg(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class u0 extends xi{constructor(e=new Eh([new gn(0,.5),new gn(-.5,-.5),new gn(.5,-.5)]),o=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:o};const f=[],y=[],M=[],B=[];let I=0,D=0;if(Array.isArray(e)===!1)U(e);else for(let X=0;X<e.length;X++)U(e[X]),this.addGroup(I,D,X),I+=D,D=0;this.setIndex(f),this.setAttribute("position",new yr(y,3)),this.setAttribute("normal",new yr(M,3)),this.setAttribute("uv",new yr(B,2));function U(X){const q=y.length/3,Z=X.extractPoints(o);let te=Z.shape;const ie=Z.holes;Up.isClockWise(te)===!1&&(te=te.reverse());for(let $=0,re=ie.length;$<re;$++){const be=ie[$];Up.isClockWise(be)===!0&&(ie[$]=be.reverse())}const fe=Up.triangulateShape(te,ie);for(let $=0,re=ie.length;$<re;$++){const be=ie[$];te=te.concat(be)}for(let $=0,re=te.length;$<re;$++){const be=te[$];y.push(be.x,be.y,0),M.push(0,0,1),B.push(be.x,be.y)}for(let $=0,re=fe.length;$<re;$++){const be=fe[$],he=be[0]+q,Se=be[1]+q,Ue=be[2]+q;f.push(he,Se,Ue),D+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),o=this.parameters.shapes;return P3(o,e)}static fromJSON(e,o){const f=[];for(let y=0,M=e.shapes.length;y<M;y++){const B=o[e.shapes[y]];f.push(B)}return new u0(f,e.curveSegments)}}function P3(C,e){if(e.shapes=[],Array.isArray(C))for(let o=0,f=C.length;o<f;o++){const y=C[o];e.shapes.push(y.uuid)}else e.shapes.push(C.uuid);return e}class ul extends xi{constructor(e=1,o=32,f=16,y=0,M=Math.PI*2,B=0,I=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:o,heightSegments:f,phiStart:y,phiLength:M,thetaStart:B,thetaLength:I},o=Math.max(3,Math.floor(o)),f=Math.max(2,Math.floor(f));const D=Math.min(B+I,Math.PI);let U=0;const X=[],q=new Qe,Z=new Qe,te=[],ie=[],fe=[],$=[];for(let re=0;re<=f;re++){const be=[],he=re/f;let Se=0;re===0&&B===0?Se=.5/o:re===f&&D===Math.PI&&(Se=-.5/o);for(let Ue=0;Ue<=o;Ue++){const Xe=Ue/o;q.x=-e*Math.cos(y+Xe*M)*Math.sin(B+he*I),q.y=e*Math.cos(B+he*I),q.z=e*Math.sin(y+Xe*M)*Math.sin(B+he*I),ie.push(q.x,q.y,q.z),Z.copy(q).normalize(),fe.push(Z.x,Z.y,Z.z),$.push(Xe+Se,1-he),be.push(U++)}X.push(be)}for(let re=0;re<f;re++)for(let be=0;be<o;be++){const he=X[re][be+1],Se=X[re][be],Ue=X[re+1][be],Xe=X[re+1][be+1];(re!==0||B>0)&&te.push(he,Se,Xe),(re!==f-1||D<Math.PI)&&te.push(Se,Ue,Xe)}this.setIndex(te),this.setAttribute("position",new yr(ie,3)),this.setAttribute("normal",new yr(fe,3)),this.setAttribute("uv",new yr($,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ul(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class d0 extends xu{constructor(e=1,o=0){const f=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],y=[2,1,0,0,3,2,1,3,0,2,3,1];super(f,y,e,o),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new d0(e.radius,e.detail)}}class h0 extends xi{constructor(e=1,o=.4,f=12,y=48,M=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:o,radialSegments:f,tubularSegments:y,arc:M},f=Math.floor(f),y=Math.floor(y);const B=[],I=[],D=[],U=[],X=new Qe,q=new Qe,Z=new Qe;for(let te=0;te<=f;te++)for(let ie=0;ie<=y;ie++){const fe=ie/y*M,$=te/f*Math.PI*2;q.x=(e+o*Math.cos($))*Math.cos(fe),q.y=(e+o*Math.cos($))*Math.sin(fe),q.z=o*Math.sin($),I.push(q.x,q.y,q.z),X.x=e*Math.cos(fe),X.y=e*Math.sin(fe),Z.subVectors(q,X).normalize(),D.push(Z.x,Z.y,Z.z),U.push(ie/y),U.push(te/f)}for(let te=1;te<=f;te++)for(let ie=1;ie<=y;ie++){const fe=(y+1)*te+ie-1,$=(y+1)*(te-1)+ie-1,re=(y+1)*(te-1)+ie,be=(y+1)*te+ie;B.push(fe,$,be),B.push($,re,be)}this.setIndex(B),this.setAttribute("position",new yr(I,3)),this.setAttribute("normal",new yr(D,3)),this.setAttribute("uv",new yr(U,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class f0 extends xi{constructor(e=1,o=.4,f=64,y=8,M=2,B=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:o,tubularSegments:f,radialSegments:y,p:M,q:B},f=Math.floor(f),y=Math.floor(y);const I=[],D=[],U=[],X=[],q=new Qe,Z=new Qe,te=new Qe,ie=new Qe,fe=new Qe,$=new Qe,re=new Qe;for(let he=0;he<=f;++he){const Se=he/f*M*Math.PI*2;be(Se,M,B,e,te),be(Se+.01,M,B,e,ie),$.subVectors(ie,te),re.addVectors(ie,te),fe.crossVectors($,re),re.crossVectors(fe,$),fe.normalize(),re.normalize();for(let Ue=0;Ue<=y;++Ue){const Xe=Ue/y*Math.PI*2,et=-o*Math.cos(Xe),st=o*Math.sin(Xe);q.x=te.x+(et*re.x+st*fe.x),q.y=te.y+(et*re.y+st*fe.y),q.z=te.z+(et*re.z+st*fe.z),D.push(q.x,q.y,q.z),Z.subVectors(q,te).normalize(),U.push(Z.x,Z.y,Z.z),X.push(he/f),X.push(Ue/y)}}for(let he=1;he<=f;he++)for(let Se=1;Se<=y;Se++){const Ue=(y+1)*(he-1)+(Se-1),Xe=(y+1)*he+(Se-1),et=(y+1)*he+Se,st=(y+1)*(he-1)+Se;I.push(Ue,Xe,st),I.push(Xe,et,st)}this.setIndex(I),this.setAttribute("position",new yr(D,3)),this.setAttribute("normal",new yr(U,3)),this.setAttribute("uv",new yr(X,2));function be(he,Se,Ue,Xe,et){const st=Math.cos(he),we=Math.sin(he),We=Ue/Se*he,Yt=Math.cos(We);et.x=Xe*(2+Yt)*.5*st,et.y=Xe*(2+Yt)*we*.5,et.z=Xe*Math.sin(We)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class jp extends xi{constructor(e=new vh(new Qe(-1,-1,0),new Qe(-1,1,0),new Qe(1,1,0)),o=64,f=1,y=8,M=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:o,radius:f,radialSegments:y,closed:M};const B=e.computeFrenetFrames(o,M);this.tangents=B.tangents,this.normals=B.normals,this.binormals=B.binormals;const I=new Qe,D=new Qe,U=new gn;let X=new Qe;const q=[],Z=[],te=[],ie=[];fe(),this.setIndex(ie),this.setAttribute("position",new yr(q,3)),this.setAttribute("normal",new yr(Z,3)),this.setAttribute("uv",new yr(te,2));function fe(){for(let he=0;he<o;he++)$(he);$(M===!1?o:0),be(),re()}function $(he){X=e.getPointAt(he/o,X);const Se=B.normals[he],Ue=B.binormals[he];for(let Xe=0;Xe<=y;Xe++){const et=Xe/y*Math.PI*2,st=Math.sin(et),we=-Math.cos(et);D.x=we*Se.x+st*Ue.x,D.y=we*Se.y+st*Ue.y,D.z=we*Se.z+st*Ue.z,D.normalize(),Z.push(D.x,D.y,D.z),I.x=X.x+f*D.x,I.y=X.y+f*D.y,I.z=X.z+f*D.z,q.push(I.x,I.y,I.z)}}function re(){for(let he=1;he<=o;he++)for(let Se=1;Se<=y;Se++){const Ue=(y+1)*(he-1)+(Se-1),Xe=(y+1)*he+(Se-1),et=(y+1)*he+Se,st=(y+1)*(he-1)+Se;ie.push(Ue,Xe,st),ie.push(Xe,et,st)}}function be(){for(let he=0;he<=o;he++)for(let Se=0;Se<=y;Se++)U.x=he/o,U.y=Se/y,te.push(U.x,U.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new jp(new Ug[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class mv extends xi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const o=[],f=new Set,y=new Qe,M=new Qe;if(e.index!==null){const B=e.attributes.position,I=e.index;let D=e.groups;D.length===0&&(D=[{start:0,count:I.count,materialIndex:0}]);for(let U=0,X=D.length;U<X;++U){const q=D[U],Z=q.start,te=q.count;for(let ie=Z,fe=Z+te;ie<fe;ie+=3)for(let $=0;$<3;$++){const re=I.getX(ie+$),be=I.getX(ie+($+1)%3);y.fromBufferAttribute(B,re),M.fromBufferAttribute(B,be),Av(y,M,f)===!0&&(o.push(y.x,y.y,y.z),o.push(M.x,M.y,M.z))}}}else{const B=e.attributes.position;for(let I=0,D=B.count/3;I<D;I++)for(let U=0;U<3;U++){const X=3*I+U,q=3*I+(U+1)%3;y.fromBufferAttribute(B,X),M.fromBufferAttribute(B,q),Av(y,M,f)===!0&&(o.push(y.x,y.y,y.z),o.push(M.x,M.y,M.z))}}this.setAttribute("position",new yr(o,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Av(C,e,o){const f=`${C.x},${C.y},${C.z}-${e.x},${e.y},${e.z}`,y=`${e.x},${e.y},${e.z}-${C.x},${C.y},${C.z}`;return o.has(f)===!0||o.has(y)===!0?!1:(o.add(f),o.add(y),!0)}var yv=Object.freeze({__proto__:null,BoxGeometry:zl,CapsuleGeometry:r0,CircleGeometry:i0,ConeGeometry:o0,CylinderGeometry:_h,DodecahedronGeometry:q1,EdgesGeometry:cc,ExtrudeGeometry:p0,IcosahedronGeometry:Kg,LatheGeometry:Cf,OctahedronGeometry:Xg,PlaneGeometry:gu,PolyhedronGeometry:xu,RingGeometry:Yg,ShapeGeometry:u0,SphereGeometry:ul,TetrahedronGeometry:d0,TorusGeometry:h0,TorusKnotGeometry:f0,TubeGeometry:jp,WireframeGeometry:mv});class vv extends Ts{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new fr(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class g0 extends Yr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class nA extends Ts{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new fr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bi,this.normalScale=new gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fc extends nA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Go(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(o){this.ior=(1+.4*o)/(1-.4*o)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new fr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new fr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new fr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Bf extends Ts{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new fr(16777215),this.specular=new fr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bi,this.normalScale=new gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Or,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ad extends Ts{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new fr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bi,this.normalScale=new gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class _v extends Ts{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bi,this.normalScale=new gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class rA extends Ts{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new fr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bi,this.normalScale=new gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Or,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ev extends Ts{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new fr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bi,this.normalScale=new gn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bv extends pl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Oc(C,e,o){return iA(C)?new C.constructor(C.subarray(e,o!==void 0?o:C.length)):C.slice(e,o)}function yd(C,e,o){return!C||!o&&C.constructor===e?C:typeof e.BYTES_PER_ELEMENT=="number"?new e(C):Array.prototype.slice.call(C)}function iA(C){return ArrayBuffer.isView(C)&&!(C instanceof DataView)}function Mv(C){function e(y,M){return C[y]-C[M]}const o=C.length,f=new Array(o);for(let y=0;y!==o;++y)f[y]=y;return f.sort(e),f}function lo(C,e,o){const f=C.length,y=new C.constructor(f);for(let M=0,B=0;B!==f;++M){const I=o[M]*e;for(let D=0;D!==e;++D)y[B++]=C[I+D]}return y}function Jg(C,e,o,f){let y=1,M=C[0];for(;M!==void 0&&M[f]===void 0;)M=C[y++];if(M===void 0)return;let B=M[f];if(B!==void 0)if(Array.isArray(B))do B=M[f],B!==void 0&&(e.push(M.time),o.push.apply(o,B)),M=C[y++];while(M!==void 0);else if(B.toArray!==void 0)do B=M[f],B!==void 0&&(e.push(M.time),B.toArray(o,o.length)),M=C[y++];while(M!==void 0);else do B=M[f],B!==void 0&&(e.push(M.time),o.push(B)),M=C[y++];while(M!==void 0)}function L3(C,e,o,f,y=30){const M=C.clone();M.name=e;const B=[];for(let D=0;D<M.tracks.length;++D){const U=M.tracks[D],X=U.getValueSize(),q=[],Z=[];for(let te=0;te<U.times.length;++te){const ie=U.times[te]*y;if(!(ie<o||ie>=f)){q.push(U.times[te]);for(let fe=0;fe<X;++fe)Z.push(U.values[te*X+fe])}}q.length!==0&&(U.times=yd(q,U.times.constructor),U.values=yd(Z,U.values.constructor),B.push(U))}M.tracks=B;let I=1/0;for(let D=0;D<M.tracks.length;++D)I>M.tracks[D].times[0]&&(I=M.tracks[D].times[0]);for(let D=0;D<M.tracks.length;++D)M.tracks[D].shift(-1*I);return M.resetDuration(),M}function k3(C,e=0,o=C,f=30){f<=0&&(f=30);const y=o.tracks.length,M=e/f;for(let B=0;B<y;++B){const I=o.tracks[B],D=I.ValueTypeName;if(D==="bool"||D==="string")continue;const U=C.tracks.find(function(re){return re.name===I.name&&re.ValueTypeName===D});if(U===void 0)continue;let X=0;const q=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(X=q/3);let Z=0;const te=U.getValueSize();U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=te/3);const ie=I.times.length-1;let fe;if(M<=I.times[0]){const re=X,be=q-X;fe=Oc(I.values,re,be)}else if(M>=I.times[ie]){const re=ie*q+X,be=re+q-X;fe=Oc(I.values,re,be)}else{const re=I.createInterpolant(),be=X,he=q-X;re.evaluate(M),fe=Oc(re.resultBuffer,be,he)}D==="quaternion"&&new xo().fromArray(fe).normalize().conjugate().toArray(fe);const $=U.times.length;for(let re=0;re<$;++re){const be=re*te+Z;if(D==="quaternion")xo.multiplyQuaternionsFlat(U.values,be,fe,0,U.values,be);else{const he=te-Z*2;for(let Se=0;Se<he;++Se)U.values[be+Se]-=fe[Se]}}}return C.blendMode=Du,C}const z3={arraySlice:Oc,convertArray:yd,isTypedArray:iA,getKeyframeOrder:Mv,sortedArray:lo,flattenJSON:Jg,subclip:L3,makeClipAdditive:k3};class qg{constructor(e,o,f,y){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=y!==void 0?y:new o.constructor(f),this.sampleValues=o,this.valueSize=f,this.settings=null,this.DefaultSettings_={}}evaluate(e){const o=this.parameterPositions;let f=this._cachedIndex,y=o[f],M=o[f-1];e:{t:{let B;n:{r:if(!(e<y)){for(let I=f+2;;){if(y===void 0){if(e<M)break r;return f=o.length,this._cachedIndex=f,this.copySampleValue_(f-1)}if(f===I)break;if(M=y,y=o[++f],e<y)break t}B=o.length;break n}if(!(e>=M)){const I=o[1];e<I&&(f=2,M=I);for(let D=f-2;;){if(M===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===D)break;if(y=M,M=o[--f-1],e>=M)break t}B=f,f=0;break n}break e}for(;f<B;){const I=f+B>>>1;e<o[I]?B=I:f=I+1}if(y=o[f],M=o[f-1],M===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(y===void 0)return f=o.length,this._cachedIndex=f,this.copySampleValue_(f-1)}this._cachedIndex=f,this.intervalChanged_(f,M,y)}return this.interpolate_(f,M,e,y)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const o=this.resultBuffer,f=this.sampleValues,y=this.valueSize,M=e*y;for(let B=0;B!==y;++B)o[B]=f[M+B];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class xv extends qg{constructor(e,o,f,y){super(e,o,f,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yp,endingEnd:Yp}}intervalChanged_(e,o,f){const y=this.parameterPositions;let M=e-2,B=e+1,I=y[M],D=y[B];if(I===void 0)switch(this.getSettings_().endingStart){case Gs:M=e,I=2*o-f;break;case ap:M=y.length-2,I=o+y[M]-y[M+1];break;default:M=e,I=f}if(D===void 0)switch(this.getSettings_().endingEnd){case Gs:B=e,D=2*f-o;break;case ap:B=1,D=f+y[1]-y[0];break;default:B=e-1,D=o}const U=(f-o)*.5,X=this.valueSize;this._weightPrev=U/(o-I),this._weightNext=U/(D-f),this._offsetPrev=M*X,this._offsetNext=B*X}interpolate_(e,o,f,y){const M=this.resultBuffer,B=this.sampleValues,I=this.valueSize,D=e*I,U=D-I,X=this._offsetPrev,q=this._offsetNext,Z=this._weightPrev,te=this._weightNext,ie=(f-o)/(y-o),fe=ie*ie,$=fe*ie,re=-Z*$+2*Z*fe-Z*ie,be=(1+Z)*$+(-1.5-2*Z)*fe+(-.5+Z)*ie+1,he=(-1-te)*$+(1.5+te)*fe+.5*ie,Se=te*$-te*fe;for(let Ue=0;Ue!==I;++Ue)M[Ue]=re*B[X+Ue]+be*B[U+Ue]+he*B[D+Ue]+Se*B[q+Ue];return M}}class Cv extends qg{constructor(e,o,f,y){super(e,o,f,y)}interpolate_(e,o,f,y){const M=this.resultBuffer,B=this.sampleValues,I=this.valueSize,D=e*I,U=D-I,X=(f-o)/(y-o),q=1-X;for(let Z=0;Z!==I;++Z)M[Z]=B[U+Z]*q+B[D+Z]*X;return M}}class oA extends qg{constructor(e,o,f,y){super(e,o,f,y)}interpolate_(e){return this.copySampleValue_(e-1)}}class ep{constructor(e,o,f,y){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(o===void 0||o.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=yd(o,this.TimeBufferType),this.values=yd(f,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation)}static toJSON(e){const o=e.constructor;let f;if(o.toJSON!==this.toJSON)f=o.toJSON(e);else{f={name:e.name,times:yd(e.times,Array),values:yd(e.values,Array)};const y=e.getInterpolation();y!==e.DefaultInterpolation&&(f.interpolation=y)}return f.type=e.ValueTypeName,f}InterpolantFactoryMethodDiscrete(e){return new oA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let o;switch(e){case Io:o=this.InterpolantFactoryMethodDiscrete;break;case Kl:o=this.InterpolantFactoryMethodLinear;break;case sp:o=this.InterpolantFactoryMethodSmooth;break}if(o===void 0){const f="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(f);return w.warn("THREE.KeyframeTrack:",f),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Io;case this.InterpolantFactoryMethodLinear:return Kl;case this.InterpolantFactoryMethodSmooth:return sp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const o=this.times;for(let f=0,y=o.length;f!==y;++f)o[f]+=e}return this}scale(e){if(e!==1){const o=this.times;for(let f=0,y=o.length;f!==y;++f)o[f]*=e}return this}trim(e,o){const f=this.times,y=f.length;let M=0,B=y-1;for(;M!==y&&f[M]<e;)++M;for(;B!==-1&&f[B]>o;)--B;if(++B,M!==0||B!==y){M>=B&&(B=Math.max(B,1),M=B-1);const I=this.getValueSize();this.times=Oc(f,M,B),this.values=Oc(this.values,M*I,B*I)}return this}validate(){let e=!0;const o=this.getValueSize();o-Math.floor(o)!==0&&(w.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const f=this.times,y=this.values,M=f.length;M===0&&(w.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let B=null;for(let I=0;I!==M;I++){const D=f[I];if(typeof D=="number"&&isNaN(D)){w.error("THREE.KeyframeTrack: Time is not a valid number.",this,I,D),e=!1;break}if(B!==null&&B>D){w.error("THREE.KeyframeTrack: Out of order keys.",this,I,D,B),e=!1;break}B=D}if(y!==void 0&&iA(y))for(let I=0,D=y.length;I!==D;++I){const U=y[I];if(isNaN(U)){w.error("THREE.KeyframeTrack: Value is not a valid number.",this,I,U),e=!1;break}}return e}optimize(){const e=Oc(this.times),o=Oc(this.values),f=this.getValueSize(),y=this.getInterpolation()===sp,M=e.length-1;let B=1;for(let I=1;I<M;++I){let D=!1;const U=e[I],X=e[I+1];if(U!==X&&(I!==1||U!==e[0]))if(y)D=!0;else{const q=I*f,Z=q-f,te=q+f;for(let ie=0;ie!==f;++ie){const fe=o[q+ie];if(fe!==o[Z+ie]||fe!==o[te+ie]){D=!0;break}}}if(D){if(I!==B){e[B]=e[I];const q=I*f,Z=B*f;for(let te=0;te!==f;++te)o[Z+te]=o[q+te]}++B}}if(M>0){e[B]=e[M];for(let I=M*f,D=B*f,U=0;U!==f;++U)o[D+U]=o[I+U];++B}return B!==e.length?(this.times=Oc(e,0,B),this.values=Oc(o,0,B*f)):(this.times=e,this.values=o),this}clone(){const e=Oc(this.times,0),o=Oc(this.values,0),f=this.constructor,y=new f(this.name,e,o);return y.createInterpolant=this.createInterpolant,y}}ep.prototype.TimeBufferType=Float32Array,ep.prototype.ValueBufferType=Float32Array,ep.prototype.DefaultInterpolation=Kl;class vd extends ep{}vd.prototype.ValueTypeName="bool",vd.prototype.ValueBufferType=Array,vd.prototype.DefaultInterpolation=Io,vd.prototype.InterpolantFactoryMethodLinear=void 0,vd.prototype.InterpolantFactoryMethodSmooth=void 0;class sA extends ep{}sA.prototype.ValueTypeName="color";class Zg extends ep{}Zg.prototype.ValueTypeName="number";class Fa extends qg{constructor(e,o,f,y){super(e,o,f,y)}interpolate_(e,o,f,y){const M=this.resultBuffer,B=this.sampleValues,I=this.valueSize,D=(f-o)/(y-o);let U=e*I;for(let X=U+I;U!==X;U+=4)xo.slerpFlat(M,0,B,U-I,B,U,D);return M}}class Cu extends ep{InterpolantFactoryMethodLinear(e){return new Fa(this.times,this.values,this.getValueSize(),e)}}Cu.prototype.ValueTypeName="quaternion",Cu.prototype.DefaultInterpolation=Kl,Cu.prototype.InterpolantFactoryMethodSmooth=void 0;class Mh extends ep{}Mh.prototype.ValueTypeName="string",Mh.prototype.ValueBufferType=Array,Mh.prototype.DefaultInterpolation=Io,Mh.prototype.InterpolantFactoryMethodLinear=void 0,Mh.prototype.InterpolantFactoryMethodSmooth=void 0;class Rf extends ep{}Rf.prototype.ValueTypeName="vector";class $g{constructor(e,o=-1,f,y=lp){this.name=e,this.tracks=f,this.duration=o,this.blendMode=y,this.uuid=Ga(),this.duration<0&&this.resetDuration()}static parse(e){const o=[],f=e.tracks,y=1/(e.fps||1);for(let B=0,I=f.length;B!==I;++B)o.push(N3(f[B]).scale(y));const M=new this(e.name,e.duration,o,e.blendMode);return M.uuid=e.uuid,M}static toJSON(e){const o=[],f=e.tracks,y={name:e.name,duration:e.duration,tracks:o,uuid:e.uuid,blendMode:e.blendMode};for(let M=0,B=f.length;M!==B;++M)o.push(ep.toJSON(f[M]));return y}static CreateFromMorphTargetSequence(e,o,f,y){const M=o.length,B=[];for(let I=0;I<M;I++){let D=[],U=[];D.push((I+M-1)%M,I,(I+1)%M),U.push(0,1,0);const X=Mv(D);D=lo(D,1,X),U=lo(U,1,X),!y&&D[0]===0&&(D.push(M),U.push(U[0])),B.push(new Zg(".morphTargetInfluences["+o[I].name+"]",D,U).scale(1/f))}return new this(e,-1,B)}static findByName(e,o){let f=e;if(!Array.isArray(e)){const y=e;f=y.geometry&&y.geometry.animations||y.animations}for(let y=0;y<f.length;y++)if(f[y].name===o)return f[y];return null}static CreateClipsFromMorphTargetSequences(e,o,f){const y={},M=/^([\w-]*?)([\d]+)$/;for(let I=0,D=e.length;I<D;I++){const U=e[I],X=U.name.match(M);if(X&&X.length>1){const q=X[1];let Z=y[q];Z||(y[q]=Z=[]),Z.push(U)}}const B=[];for(const I in y)B.push(this.CreateFromMorphTargetSequence(I,y[I],o,f));return B}static parseAnimation(e,o){if(!e)return w.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const f=function(q,Z,te,ie,fe){if(te.length!==0){const $=[],re=[];Jg(te,$,re,ie),$.length!==0&&fe.push(new q(Z,$,re))}},y=[],M=e.name||"default",B=e.fps||30,I=e.blendMode;let D=e.length||-1;const U=e.hierarchy||[];for(let q=0;q<U.length;q++){const Z=U[q].keys;if(!(!Z||Z.length===0))if(Z[0].morphTargets){const te={};let ie;for(ie=0;ie<Z.length;ie++)if(Z[ie].morphTargets)for(let fe=0;fe<Z[ie].morphTargets.length;fe++)te[Z[ie].morphTargets[fe]]=-1;for(const fe in te){const $=[],re=[];for(let be=0;be!==Z[ie].morphTargets.length;++be){const he=Z[ie];$.push(he.time),re.push(he.morphTarget===fe?1:0)}y.push(new Zg(".morphTargetInfluence["+fe+"]",$,re))}D=te.length*B}else{const te=".bones["+o[q].name+"]";f(Rf,te+".position",Z,"pos",y),f(Cu,te+".quaternion",Z,"rot",y),f(Rf,te+".scale",Z,"scl",y)}}return y.length===0?null:new this(M,D,y,I)}resetDuration(){const e=this.tracks;let o=0;for(let f=0,y=e.length;f!==y;++f){const M=this.tracks[f];o=Math.max(o,M.times[M.times.length-1])}return this.duration=o,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let o=0;o<this.tracks.length;o++)e=e&&this.tracks[o].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let o=0;o<this.tracks.length;o++)e.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function G3(C){switch(C.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Zg;case"vector":case"vector2":case"vector3":case"vector4":return Rf;case"color":return sA;case"quaternion":return Cu;case"bool":case"boolean":return vd;case"string":return Mh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+C)}function N3(C){if(C.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=G3(C.type);if(C.times===void 0){const o=[],f=[];Jg(C.keys,o,f,"value"),C.times=o,C.values=f}return e.parse!==void 0?e.parse(C):new e(C.name,C.times,C.values,C.interpolation)}const _d={enabled:!1,files:{},add:function(C,e){this.enabled!==!1&&(this.files[C]=e)},get:function(C){if(this.enabled!==!1)return this.files[C]},remove:function(C){delete this.files[C]},clear:function(){this.files={}}};class m0{constructor(e,o,f){const y=this;let M=!1,B=0,I=0,D;const U=[];this.onStart=void 0,this.onLoad=e,this.onProgress=o,this.onError=f,this.itemStart=function(X){I++,M===!1&&y.onStart!==void 0&&y.onStart(X,B,I),M=!0},this.itemEnd=function(X){B++,y.onProgress!==void 0&&y.onProgress(X,B,I),B===I&&(M=!1,y.onLoad!==void 0&&y.onLoad())},this.itemError=function(X){y.onError!==void 0&&y.onError(X)},this.resolveURL=function(X){return D?D(X):X},this.setURLModifier=function(X){return D=X,this},this.addHandler=function(X,q){return U.push(X,q),this},this.removeHandler=function(X){const q=U.indexOf(X);return q!==-1&&U.splice(q,2),this},this.getHandler=function(X){for(let q=0,Z=U.length;q<Z;q+=2){const te=U[q],ie=U[q+1];if(te.global&&(te.lastIndex=0),te.test(X))return ie}return null}}}const Sv=new m0;class jl{constructor(e){this.manager=e!==void 0?e:Sv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,o){const f=this;return new Promise(function(y,M){f.load(e,y,o,M)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}jl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hp={};class A0 extends Error{constructor(e,o){super(e),this.response=o}}class Su extends jl{constructor(e){super(e)}load(e,o,f,y){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=_d.get(e);if(M!==void 0)return this.manager.itemStart(e),setTimeout(()=>{o&&o(M),this.manager.itemEnd(e)},0),M;if(Hp[e]!==void 0){Hp[e].push({onLoad:o,onProgress:f,onError:y});return}Hp[e]=[],Hp[e].push({onLoad:o,onProgress:f,onError:y});const B=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),I=this.mimeType,D=this.responseType;fetch(B).then(U=>{if(U.status===200||U.status===0){if(U.status===0&&w.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||U.body===void 0||U.body.getReader===void 0)return U;const X=Hp[e],q=U.body.getReader(),Z=U.headers.get("Content-Length")||U.headers.get("X-File-Size"),te=Z?parseInt(Z):0,ie=te!==0;let fe=0;const $=new ReadableStream({start(re){be();function be(){q.read().then(({done:he,value:Se})=>{if(he)re.close();else{fe+=Se.byteLength;const Ue=new ProgressEvent("progress",{lengthComputable:ie,loaded:fe,total:te});for(let Xe=0,et=X.length;Xe<et;Xe++){const st=X[Xe];st.onProgress&&st.onProgress(Ue)}re.enqueue(Se),be()}})}}});return new Response($)}else throw new A0(`fetch for "${U.url}" responded with ${U.status}: ${U.statusText}`,U)}).then(U=>{switch(D){case"arraybuffer":return U.arrayBuffer();case"blob":return U.blob();case"document":return U.text().then(X=>new DOMParser().parseFromString(X,I));case"json":return U.json();default:if(I===void 0)return U.text();{const q=/charset="?([^;"\s]*)"?/i.exec(I),Z=q&&q[1]?q[1].toLowerCase():void 0,te=new TextDecoder(Z);return U.arrayBuffer().then(ie=>te.decode(ie))}}}).then(U=>{_d.add(e,U);const X=Hp[e];delete Hp[e];for(let q=0,Z=X.length;q<Z;q++){const te=X[q];te.onLoad&&te.onLoad(U)}}).catch(U=>{const X=Hp[e];if(X===void 0)throw this.manager.itemError(e),U;delete Hp[e];for(let q=0,Z=X.length;q<Z;q++){const te=X[q];te.onError&&te.onError(U)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class wv extends jl{constructor(e){super(e)}load(e,o,f,y){const M=this,B=new Su(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(e,function(I){try{o(M.parse(JSON.parse(I)))}catch(D){y?y(D):w.error(D),M.manager.itemError(e)}},f,y)}parse(e){const o=[];for(let f=0;f<e.length;f++){const y=$g.parse(e[f]);o.push(y)}return o}}class U3 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=this,B=[],I=new e0,D=new Su(this.manager);D.setPath(this.path),D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setWithCredentials(M.withCredentials);let U=0;function X(q){D.load(e[q],function(Z){const te=M.parse(Z,!0);B[q]={width:te.width,height:te.height,format:te.format,mipmaps:te.mipmaps},U+=1,U===6&&(te.mipmapCount===1&&(I.minFilter=Zi),I.image=B,I.format=te.format,I.needsUpdate=!0,o&&o(I))},f,y)}if(Array.isArray(e))for(let q=0,Z=e.length;q<Z;++q)X(q);else D.load(e,function(q){const Z=M.parse(q,!0);if(Z.isCubemap){const te=Z.mipmaps.length/Z.mipmapCount;for(let ie=0;ie<te;ie++){B[ie]={mipmaps:[]};for(let fe=0;fe<Z.mipmapCount;fe++)B[ie].mipmaps.push(Z.mipmaps[ie*Z.mipmapCount+fe]),B[ie].format=Z.format,B[ie].width=Z.width,B[ie].height=Z.height}I.image=B}else I.image.width=Z.width,I.image.height=Z.height,I.mipmaps=Z.mipmaps;Z.mipmapCount===1&&(I.minFilter=Zi),I.format=Z.format,I.needsUpdate=!0,o&&o(I)},f,y);return I}}class em extends jl{constructor(e){super(e)}load(e,o,f,y){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=this,B=_d.get(e);if(B!==void 0)return M.manager.itemStart(e),setTimeout(function(){o&&o(B),M.manager.itemEnd(e)},0),B;const I=eu("img");function D(){X(),_d.add(e,this),o&&o(this),M.manager.itemEnd(e)}function U(q){X(),y&&y(q),M.manager.itemError(e),M.manager.itemEnd(e)}function X(){I.removeEventListener("load",D,!1),I.removeEventListener("error",U,!1)}return I.addEventListener("load",D,!1),I.addEventListener("error",U,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(I.crossOrigin=this.crossOrigin),M.manager.itemStart(e),I.src=e,I}}class y0 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=new Wo;M.colorSpace=ai;const B=new em(this.manager);B.setCrossOrigin(this.crossOrigin),B.setPath(this.path);let I=0;function D(U){B.load(e[U],function(X){M.images[U]=X,I++,I===6&&(M.needsUpdate=!0,o&&o(M))},void 0,y)}for(let U=0;U<e.length;++U)D(U);return M}}class j3 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=this,B=new bf,I=new Su(this.manager);return I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(M.withCredentials),I.load(e,function(D){const U=M.parse(D);U&&(U.image!==void 0?B.image=U.image:U.data!==void 0&&(B.image.width=U.width,B.image.height=U.height,B.image.data=U.data),B.wrapS=U.wrapS!==void 0?U.wrapS:Sr,B.wrapT=U.wrapT!==void 0?U.wrapT:Sr,B.magFilter=U.magFilter!==void 0?U.magFilter:Zi,B.minFilter=U.minFilter!==void 0?U.minFilter:Zi,B.anisotropy=U.anisotropy!==void 0?U.anisotropy:1,U.colorSpace!==void 0?B.colorSpace=U.colorSpace:U.encoding!==void 0&&(B.encoding=U.encoding),U.flipY!==void 0&&(B.flipY=U.flipY),U.format!==void 0&&(B.format=U.format),U.type!==void 0&&(B.type=U.type),U.mipmaps!==void 0&&(B.mipmaps=U.mipmaps,B.minFilter=Jo),U.mipmapCount===1&&(B.minFilter=Zi),U.generateMipmaps!==void 0&&(B.generateMipmaps=U.generateMipmaps),B.needsUpdate=!0,o&&o(B,U))},f,y),B}}class H3 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=new $i,B=new em(this.manager);return B.setCrossOrigin(this.crossOrigin),B.setPath(this.path),B.load(e,function(I){M.image=I,M.needsUpdate=!0,o!==void 0&&o(M)},f,y),M}}class Ed extends Bi{constructor(e,o=1){super(),this.isLight=!0,this.type="Light",this.color=new fr(e),this.intensity=o}dispose(){}copy(e,o){return super.copy(e,o),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const o=super.toJSON(e);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,this.groundColor!==void 0&&(o.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(o.object.distance=this.distance),this.angle!==void 0&&(o.object.angle=this.angle),this.decay!==void 0&&(o.object.decay=this.decay),this.penumbra!==void 0&&(o.object.penumbra=this.penumbra),this.shadow!==void 0&&(o.object.shadow=this.shadow.toJSON()),o}}class tm extends Ed{constructor(e,o,f){super(e,f),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new fr(o)}copy(e,o){return super.copy(e,o),this.groundColor.copy(e.groundColor),this}}const nm=new li,Tv=new Qe,Bv=new Qe;class aA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gn(512,512),this.map=null,this.mapPass=null,this.matrix=new li,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new du,this._frameExtents=new gn(1,1),this._viewportCount=1,this._viewports=[new Mi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const o=this.camera,f=this.matrix;Tv.setFromMatrixPosition(e.matrixWorld),o.position.copy(Tv),Bv.setFromMatrixPosition(e.target.matrixWorld),o.lookAt(Bv),o.updateMatrixWorld(),nm.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nm),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(nm)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class W3 extends aA{constructor(){super(new Li(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const o=this.camera,f=vc*2*e.angle*this.focus,y=this.mapSize.width/this.mapSize.height,M=e.distance||o.far;(f!==o.fov||y!==o.aspect||M!==o.far)&&(o.fov=f,o.aspect=y,o.far=M,o.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Rv extends Ed{constructor(e,o,f=0,y=Math.PI/3,M=0,B=2){super(e,o),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.target=new Bi,this.distance=f,this.angle=y,this.penumbra=M,this.decay=B,this.map=null,this.shadow=new W3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,o){return super.copy(e,o),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lA=new li,rm=new Qe,im=new Qe;class V3 extends aA{constructor(){super(new Li(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gn(4,2),this._viewportCount=6,this._viewports=[new Mi(2,1,1,1),new Mi(0,1,1,1),new Mi(3,1,1,1),new Mi(1,1,1,1),new Mi(3,0,1,1),new Mi(1,0,1,1)],this._cubeDirections=[new Qe(1,0,0),new Qe(-1,0,0),new Qe(0,0,1),new Qe(0,0,-1),new Qe(0,1,0),new Qe(0,-1,0)],this._cubeUps=[new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,0,1),new Qe(0,0,-1)]}updateMatrices(e,o=0){const f=this.camera,y=this.matrix,M=e.distance||f.far;M!==f.far&&(f.far=M,f.updateProjectionMatrix()),rm.setFromMatrixPosition(e.matrixWorld),f.position.copy(rm),im.copy(f.position),im.add(this._cubeDirections[o]),f.up.copy(this._cubeUps[o]),f.lookAt(im),f.updateMatrixWorld(),y.makeTranslation(-rm.x,-rm.y,-rm.z),lA.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lA)}}class xh extends Ed{constructor(e,o,f=0,y=2){super(e,o),this.isPointLight=!0,this.type="PointLight",this.distance=f,this.decay=y,this.shadow=new V3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,o){return super.copy(e,o),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class om extends aA{constructor(){super(new Dm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Iv extends Ed{constructor(e,o){super(e,o),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.target=new Bi,this.shadow=new om}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class v0 extends Ed{constructor(e,o){super(e,o),this.isAmbientLight=!0,this.type="AmbientLight"}}class _0 extends Ed{constructor(e,o,f=10,y=10){super(e,o),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=f,this.height=y}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const o=super.toJSON(e);return o.object.width=this.width,o.object.height=this.height,o}}class Fv{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Qe)}set(e){for(let o=0;o<9;o++)this.coefficients[o].copy(e[o]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,o){const f=e.x,y=e.y,M=e.z,B=this.coefficients;return o.copy(B[0]).multiplyScalar(.282095),o.addScaledVector(B[1],.488603*y),o.addScaledVector(B[2],.488603*M),o.addScaledVector(B[3],.488603*f),o.addScaledVector(B[4],1.092548*(f*y)),o.addScaledVector(B[5],1.092548*(y*M)),o.addScaledVector(B[6],.315392*(3*M*M-1)),o.addScaledVector(B[7],1.092548*(f*M)),o.addScaledVector(B[8],.546274*(f*f-y*y)),o}getIrradianceAt(e,o){const f=e.x,y=e.y,M=e.z,B=this.coefficients;return o.copy(B[0]).multiplyScalar(.886227),o.addScaledVector(B[1],2*.511664*y),o.addScaledVector(B[2],2*.511664*M),o.addScaledVector(B[3],2*.511664*f),o.addScaledVector(B[4],2*.429043*f*y),o.addScaledVector(B[5],2*.429043*y*M),o.addScaledVector(B[6],.743125*M*M-.247708),o.addScaledVector(B[7],2*.429043*f*M),o.addScaledVector(B[8],.429043*(f*f-y*y)),o}add(e){for(let o=0;o<9;o++)this.coefficients[o].add(e.coefficients[o]);return this}addScaledSH(e,o){for(let f=0;f<9;f++)this.coefficients[f].addScaledVector(e.coefficients[f],o);return this}scale(e){for(let o=0;o<9;o++)this.coefficients[o].multiplyScalar(e);return this}lerp(e,o){for(let f=0;f<9;f++)this.coefficients[f].lerp(e.coefficients[f],o);return this}equals(e){for(let o=0;o<9;o++)if(!this.coefficients[o].equals(e.coefficients[o]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,o=0){const f=this.coefficients;for(let y=0;y<9;y++)f[y].fromArray(e,o+y*3);return this}toArray(e=[],o=0){const f=this.coefficients;for(let y=0;y<9;y++)f[y].toArray(e,o+y*3);return e}static getBasisAt(e,o){const f=e.x,y=e.y,M=e.z;o[0]=.282095,o[1]=.488603*y,o[2]=.488603*M,o[3]=.488603*f,o[4]=1.092548*f*y,o[5]=1.092548*y*M,o[6]=.315392*(3*M*M-1),o[7]=1.092548*f*M,o[8]=.546274*(f*f-y*y)}}class E0 extends Ed{constructor(e=new Fv,o=1){super(void 0,o),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const o=super.toJSON(e);return o.object.sh=this.sh.toArray(),o}}class Ch extends jl{constructor(e){super(e),this.textures={}}load(e,o,f,y){const M=this,B=new Su(M.manager);B.setPath(M.path),B.setRequestHeader(M.requestHeader),B.setWithCredentials(M.withCredentials),B.load(e,function(I){try{o(M.parse(JSON.parse(I)))}catch(D){y?y(D):w.error(D),M.manager.itemError(e)}},f,y)}parse(e){const o=this.textures;function f(M){return o[M]===void 0&&w.warn("THREE.MaterialLoader: Undefined texture",M),o[M]}const y=Ch.createMaterialFromType(e.type);if(e.uuid!==void 0&&(y.uuid=e.uuid),e.name!==void 0&&(y.name=e.name),e.color!==void 0&&y.color!==void 0&&y.color.setHex(e.color),e.roughness!==void 0&&(y.roughness=e.roughness),e.metalness!==void 0&&(y.metalness=e.metalness),e.sheen!==void 0&&(y.sheen=e.sheen),e.sheenColor!==void 0&&(y.sheenColor=new fr().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(y.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&y.emissive!==void 0&&y.emissive.setHex(e.emissive),e.specular!==void 0&&y.specular!==void 0&&y.specular.setHex(e.specular),e.specularIntensity!==void 0&&(y.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&y.specularColor!==void 0&&y.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(y.shininess=e.shininess),e.clearcoat!==void 0&&(y.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(y.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(y.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(y.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(y.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(y.transmission=e.transmission),e.thickness!==void 0&&(y.thickness=e.thickness),e.attenuationDistance!==void 0&&(y.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&y.attenuationColor!==void 0&&y.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(y.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(y.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(y.fog=e.fog),e.flatShading!==void 0&&(y.flatShading=e.flatShading),e.blending!==void 0&&(y.blending=e.blending),e.combine!==void 0&&(y.combine=e.combine),e.side!==void 0&&(y.side=e.side),e.shadowSide!==void 0&&(y.shadowSide=e.shadowSide),e.opacity!==void 0&&(y.opacity=e.opacity),e.transparent!==void 0&&(y.transparent=e.transparent),e.alphaTest!==void 0&&(y.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(y.alphaHash=e.alphaHash),e.depthTest!==void 0&&(y.depthTest=e.depthTest),e.depthWrite!==void 0&&(y.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(y.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(y.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(y.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(y.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(y.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(y.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(y.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(y.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(y.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(y.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(y.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(y.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(y.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(y.rotation=e.rotation),e.linewidth!==1&&(y.linewidth=e.linewidth),e.dashSize!==void 0&&(y.dashSize=e.dashSize),e.gapSize!==void 0&&(y.gapSize=e.gapSize),e.scale!==void 0&&(y.scale=e.scale),e.polygonOffset!==void 0&&(y.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(y.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(y.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(y.dithering=e.dithering),e.alphaToCoverage!==void 0&&(y.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(y.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(y.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(y.visible=e.visible),e.toneMapped!==void 0&&(y.toneMapped=e.toneMapped),e.userData!==void 0&&(y.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?y.vertexColors=e.vertexColors>0:y.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const M in e.uniforms){const B=e.uniforms[M];switch(y.uniforms[M]={},B.type){case"t":y.uniforms[M].value=f(B.value);break;case"c":y.uniforms[M].value=new fr().setHex(B.value);break;case"v2":y.uniforms[M].value=new gn().fromArray(B.value);break;case"v3":y.uniforms[M].value=new Qe().fromArray(B.value);break;case"v4":y.uniforms[M].value=new Mi().fromArray(B.value);break;case"m3":y.uniforms[M].value=new yi().fromArray(B.value);break;case"m4":y.uniforms[M].value=new li().fromArray(B.value);break;default:y.uniforms[M].value=B.value}}if(e.defines!==void 0&&(y.defines=e.defines),e.vertexShader!==void 0&&(y.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(y.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(y.glslVersion=e.glslVersion),e.extensions!==void 0)for(const M in e.extensions)y.extensions[M]=e.extensions[M];if(e.lights!==void 0&&(y.lights=e.lights),e.clipping!==void 0&&(y.clipping=e.clipping),e.size!==void 0&&(y.size=e.size),e.sizeAttenuation!==void 0&&(y.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(y.map=f(e.map)),e.matcap!==void 0&&(y.matcap=f(e.matcap)),e.alphaMap!==void 0&&(y.alphaMap=f(e.alphaMap)),e.bumpMap!==void 0&&(y.bumpMap=f(e.bumpMap)),e.bumpScale!==void 0&&(y.bumpScale=e.bumpScale),e.normalMap!==void 0&&(y.normalMap=f(e.normalMap)),e.normalMapType!==void 0&&(y.normalMapType=e.normalMapType),e.normalScale!==void 0){let M=e.normalScale;Array.isArray(M)===!1&&(M=[M,M]),y.normalScale=new gn().fromArray(M)}return e.displacementMap!==void 0&&(y.displacementMap=f(e.displacementMap)),e.displacementScale!==void 0&&(y.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(y.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(y.roughnessMap=f(e.roughnessMap)),e.metalnessMap!==void 0&&(y.metalnessMap=f(e.metalnessMap)),e.emissiveMap!==void 0&&(y.emissiveMap=f(e.emissiveMap)),e.emissiveIntensity!==void 0&&(y.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(y.specularMap=f(e.specularMap)),e.specularIntensityMap!==void 0&&(y.specularIntensityMap=f(e.specularIntensityMap)),e.specularColorMap!==void 0&&(y.specularColorMap=f(e.specularColorMap)),e.envMap!==void 0&&(y.envMap=f(e.envMap)),e.envMapIntensity!==void 0&&(y.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(y.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(y.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(y.lightMap=f(e.lightMap)),e.lightMapIntensity!==void 0&&(y.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(y.aoMap=f(e.aoMap)),e.aoMapIntensity!==void 0&&(y.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(y.gradientMap=f(e.gradientMap)),e.clearcoatMap!==void 0&&(y.clearcoatMap=f(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(y.clearcoatRoughnessMap=f(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(y.clearcoatNormalMap=f(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(y.clearcoatNormalScale=new gn().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(y.iridescenceMap=f(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(y.iridescenceThicknessMap=f(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(y.transmissionMap=f(e.transmissionMap)),e.thicknessMap!==void 0&&(y.thicknessMap=f(e.thicknessMap)),e.anisotropyMap!==void 0&&(y.anisotropyMap=f(e.anisotropyMap)),e.sheenColorMap!==void 0&&(y.sheenColorMap=f(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(y.sheenRoughnessMap=f(e.sheenRoughnessMap)),y}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const o={ShadowMaterial:vv,SpriteMaterial:k1,RawShaderMaterial:g0,ShaderMaterial:Yr,PointsMaterial:V1,MeshPhysicalMaterial:Fc,MeshStandardMaterial:nA,MeshPhongMaterial:Bf,MeshToonMaterial:Ad,MeshNormalMaterial:_v,MeshLambertMaterial:rA,MeshDepthMaterial:P1,MeshDistanceMaterial:L1,MeshBasicMaterial:nc,MeshMatcapMaterial:Ev,LineDashedMaterial:bv,LineBasicMaterial:pl,Material:Ts};return new o[e]}}class sm{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let o="";for(let f=0,y=e.length;f<y;f++)o+=String.fromCharCode(e[f]);try{return decodeURIComponent(escape(o))}catch(f){return o}}static extractUrlBase(e){const o=e.lastIndexOf("/");return o===-1?"./":e.slice(0,o+1)}static resolveURL(e,o){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(o)&&/^\//.test(e)&&(o=o.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:o+e)}}class Wp extends xi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class b0 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=this,B=new Su(M.manager);B.setPath(M.path),B.setRequestHeader(M.requestHeader),B.setWithCredentials(M.withCredentials),B.load(e,function(I){try{o(M.parse(JSON.parse(I)))}catch(D){y?y(D):w.error(D),M.manager.itemError(e)}},f,y)}parse(e){const o={},f={};function y(te,ie){if(o[ie]!==void 0)return o[ie];const $=te.interleavedBuffers[ie],re=M(te,$.buffer),be=Zl($.type,re),he=new ud(be,$.stride);return he.uuid=$.uuid,o[ie]=he,he}function M(te,ie){if(f[ie]!==void 0)return f[ie];const $=te.arrayBuffers[ie],re=new Uint32Array($).buffer;return f[ie]=re,re}const B=e.isInstancedBufferGeometry?new Wp:new xi,I=e.data.index;if(I!==void 0){const te=Zl(I.type,I.array);B.setIndex(new ao(te,1))}const D=e.data.attributes;for(const te in D){const ie=D[te];let fe;if(ie.isInterleavedBufferAttribute){const $=y(e.data,ie.data);fe=new zp($,ie.itemSize,ie.offset,ie.normalized)}else{const $=Zl(ie.type,ie.array),re=ie.isInstancedBufferAttribute?Hs:ao;fe=new re($,ie.itemSize,ie.normalized)}ie.name!==void 0&&(fe.name=ie.name),ie.usage!==void 0&&fe.setUsage(ie.usage),ie.updateRange!==void 0&&(fe.updateRange.offset=ie.updateRange.offset,fe.updateRange.count=ie.updateRange.count),B.setAttribute(te,fe)}const U=e.data.morphAttributes;if(U)for(const te in U){const ie=U[te],fe=[];for(let $=0,re=ie.length;$<re;$++){const be=ie[$];let he;if(be.isInterleavedBufferAttribute){const Se=y(e.data,be.data);he=new zp(Se,be.itemSize,be.offset,be.normalized)}else{const Se=Zl(be.type,be.array);he=new ao(Se,be.itemSize,be.normalized)}be.name!==void 0&&(he.name=be.name),fe.push(he)}B.morphAttributes[te]=fe}e.data.morphTargetsRelative&&(B.morphTargetsRelative=!0);const q=e.data.groups||e.data.drawcalls||e.data.offsets;if(q!==void 0)for(let te=0,ie=q.length;te!==ie;++te){const fe=q[te];B.addGroup(fe.start,fe.count,fe.materialIndex)}const Z=e.data.boundingSphere;if(Z!==void 0){const te=new Qe;Z.center!==void 0&&te.fromArray(Z.center),B.boundingSphere=new Fo(te,Z.radius)}return e.name&&(B.name=e.name),e.userData&&(B.userData=e.userData),B}}class Q3 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=this,B=this.path===""?sm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||B;const I=new Su(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(e,function(D){let U=null;try{U=JSON.parse(D)}catch(q){y!==void 0&&y(q),w.error("THREE:ObjectLoader: Can't parse "+e+".",q.message);return}const X=U.metadata;if(X===void 0||X.type===void 0||X.type.toLowerCase()==="geometry"){y!==void 0&&y(new Error("THREE.ObjectLoader: Can't load "+e)),w.error("THREE.ObjectLoader: Can't load "+e);return}M.parse(U,o)},f,y)}loadAsync(e,o){return ss(this,null,function*(){const f=this,y=this.path===""?sm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||y;const M=new Su(this.manager);M.setPath(this.path),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials);const B=yield M.loadAsync(e,o),I=JSON.parse(B),D=I.metadata;if(D===void 0||D.type===void 0||D.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield f.parseAsync(I)})}parse(e,o){const f=this.parseAnimations(e.animations),y=this.parseShapes(e.shapes),M=this.parseGeometries(e.geometries,y),B=this.parseImages(e.images,function(){o!==void 0&&o(U)}),I=this.parseTextures(e.textures,B),D=this.parseMaterials(e.materials,I),U=this.parseObject(e.object,M,D,I,f),X=this.parseSkeletons(e.skeletons,U);if(this.bindSkeletons(U,X),o!==void 0){let q=!1;for(const Z in B)if(B[Z].data instanceof HTMLImageElement){q=!0;break}q===!1&&o(U)}return U}parseAsync(e){return ss(this,null,function*(){const o=this.parseAnimations(e.animations),f=this.parseShapes(e.shapes),y=this.parseGeometries(e.geometries,f),M=yield this.parseImagesAsync(e.images),B=this.parseTextures(e.textures,M),I=this.parseMaterials(e.materials,B),D=this.parseObject(e.object,y,I,B,o),U=this.parseSkeletons(e.skeletons,D);return this.bindSkeletons(D,U),D})}parseShapes(e){const o={};if(e!==void 0)for(let f=0,y=e.length;f<y;f++){const M=new Eh().fromJSON(e[f]);o[M.uuid]=M}return o}parseSkeletons(e,o){const f={},y={};if(o.traverse(function(M){M.isBone&&(y[M.uuid]=M)}),e!==void 0)for(let M=0,B=e.length;M<B;M++){const I=new Og().fromJSON(e[M],y);f[I.uuid]=I}return f}parseGeometries(e,o){const f={};if(e!==void 0){const y=new b0;for(let M=0,B=e.length;M<B;M++){let I;const D=e[M];switch(D.type){case"BufferGeometry":case"InstancedBufferGeometry":I=y.parse(D);break;default:D.type in yv?I=yv[D.type].fromJSON(D,o):w.warn(`THREE.ObjectLoader: Unsupported geometry type "${D.type}"`)}I.uuid=D.uuid,D.name!==void 0&&(I.name=D.name),D.userData!==void 0&&(I.userData=D.userData),f[D.uuid]=I}}return f}parseMaterials(e,o){const f={},y={};if(e!==void 0){const M=new Ch;M.setTextures(o);for(let B=0,I=e.length;B<I;B++){const D=e[B];f[D.uuid]===void 0&&(f[D.uuid]=M.parse(D)),y[D.uuid]=f[D.uuid]}}return y}parseAnimations(e){const o={};if(e!==void 0)for(let f=0;f<e.length;f++){const y=e[f],M=$g.parse(y);o[M.uuid]=M}return o}parseImages(e,o){const f=this,y={};let M;function B(D){return f.manager.itemStart(D),M.load(D,function(){f.manager.itemEnd(D)},void 0,function(){f.manager.itemError(D),f.manager.itemEnd(D)})}function I(D){if(typeof D=="string"){const U=D,X=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(U)?U:f.resourcePath+U;return B(X)}else return D.data?{data:Zl(D.type,D.data),width:D.width,height:D.height}:null}if(e!==void 0&&e.length>0){const D=new m0(o);M=new em(D),M.setCrossOrigin(this.crossOrigin);for(let U=0,X=e.length;U<X;U++){const q=e[U],Z=q.url;if(Array.isArray(Z)){const te=[];for(let ie=0,fe=Z.length;ie<fe;ie++){const $=Z[ie],re=I($);re!==null&&(re instanceof HTMLImageElement?te.push(re):te.push(new bf(re.data,re.width,re.height)))}y[q.uuid]=new Na(te)}else{const te=I(q.url);y[q.uuid]=new Na(te)}}}return y}parseImagesAsync(e){return ss(this,null,function*(){const o=this,f={};let y;function M(B){return ss(this,null,function*(){if(typeof B=="string"){const I=B,D=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:o.resourcePath+I;return yield y.loadAsync(D)}else return B.data?{data:Zl(B.type,B.data),width:B.width,height:B.height}:null})}if(e!==void 0&&e.length>0){y=new em(this.manager),y.setCrossOrigin(this.crossOrigin);for(let B=0,I=e.length;B<I;B++){const D=e[B],U=D.url;if(Array.isArray(U)){const X=[];for(let q=0,Z=U.length;q<Z;q++){const te=U[q],ie=yield M(te);ie!==null&&(ie instanceof HTMLImageElement?X.push(ie):X.push(new bf(ie.data,ie.width,ie.height)))}f[D.uuid]=new Na(X)}else{const X=yield M(D.url);f[D.uuid]=new Na(X)}}}return f})}parseTextures(e,o){function f(M,B){return typeof M=="number"?M:(w.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",M),B[M])}const y={};if(e!==void 0)for(let M=0,B=e.length;M<B;M++){const I=e[M];I.image===void 0&&w.warn('THREE.ObjectLoader: No "image" specified for',I.uuid),o[I.image]===void 0&&w.warn("THREE.ObjectLoader: Undefined image",I.image);const D=o[I.image],U=D.data;let X;Array.isArray(U)?(X=new Wo,U.length===6&&(X.needsUpdate=!0)):(U&&U.data?X=new bf:X=new $i,U&&(X.needsUpdate=!0)),X.source=D,X.uuid=I.uuid,I.name!==void 0&&(X.name=I.name),I.mapping!==void 0&&(X.mapping=f(I.mapping,Ki)),I.channel!==void 0&&(X.channel=I.channel),I.offset!==void 0&&X.offset.fromArray(I.offset),I.repeat!==void 0&&X.repeat.fromArray(I.repeat),I.center!==void 0&&X.center.fromArray(I.center),I.rotation!==void 0&&(X.rotation=I.rotation),I.wrap!==void 0&&(X.wrapS=f(I.wrap[0],Ov),X.wrapT=f(I.wrap[1],Ov)),I.format!==void 0&&(X.format=I.format),I.internalFormat!==void 0&&(X.internalFormat=I.internalFormat),I.type!==void 0&&(X.type=I.type),I.colorSpace!==void 0&&(X.colorSpace=I.colorSpace),I.encoding!==void 0&&(X.encoding=I.encoding),I.minFilter!==void 0&&(X.minFilter=f(I.minFilter,Dv)),I.magFilter!==void 0&&(X.magFilter=f(I.magFilter,Dv)),I.anisotropy!==void 0&&(X.anisotropy=I.anisotropy),I.flipY!==void 0&&(X.flipY=I.flipY),I.generateMipmaps!==void 0&&(X.generateMipmaps=I.generateMipmaps),I.premultiplyAlpha!==void 0&&(X.premultiplyAlpha=I.premultiplyAlpha),I.unpackAlignment!==void 0&&(X.unpackAlignment=I.unpackAlignment),I.compareFunction!==void 0&&(X.compareFunction=I.compareFunction),I.userData!==void 0&&(X.userData=I.userData),y[I.uuid]=X}return y}parseObject(e,o,f,y,M){let B;function I(Z){return o[Z]===void 0&&w.warn("THREE.ObjectLoader: Undefined geometry",Z),o[Z]}function D(Z){if(Z!==void 0){if(Array.isArray(Z)){const te=[];for(let ie=0,fe=Z.length;ie<fe;ie++){const $=Z[ie];f[$]===void 0&&w.warn("THREE.ObjectLoader: Undefined material",$),te.push(f[$])}return te}return f[Z]===void 0&&w.warn("THREE.ObjectLoader: Undefined material",Z),f[Z]}}function U(Z){return y[Z]===void 0&&w.warn("THREE.ObjectLoader: Undefined texture",Z),y[Z]}let X,q;switch(e.type){case"Scene":B=new Vm,e.background!==void 0&&(Number.isInteger(e.background)?B.background=new fr(e.background):B.background=U(e.background)),e.environment!==void 0&&(B.environment=U(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?B.fog=new pd(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(B.fog=new cd(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(B.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(B.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":B=new Li(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(B.focus=e.focus),e.zoom!==void 0&&(B.zoom=e.zoom),e.filmGauge!==void 0&&(B.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(B.filmOffset=e.filmOffset),e.view!==void 0&&(B.view=Object.assign({},e.view));break;case"OrthographicCamera":B=new Dm(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(B.zoom=e.zoom),e.view!==void 0&&(B.view=Object.assign({},e.view));break;case"AmbientLight":B=new v0(e.color,e.intensity);break;case"DirectionalLight":B=new Iv(e.color,e.intensity);break;case"PointLight":B=new xh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":B=new _0(e.color,e.intensity,e.width,e.height);break;case"SpotLight":B=new Rv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":B=new tm(e.color,e.groundColor,e.intensity);break;case"LightProbe":B=new E0().fromJSON(e);break;case"SkinnedMesh":X=I(e.geometry),q=D(e.material),B=new qy(X,q),e.bindMode!==void 0&&(B.bindMode=e.bindMode),e.bindMatrix!==void 0&&B.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(B.skeleton=e.skeleton);break;case"Mesh":X=I(e.geometry),q=D(e.material),B=new Bs(X,q);break;case"InstancedMesh":X=I(e.geometry),q=D(e.material);const Z=e.count,te=e.instanceMatrix,ie=e.instanceColor;B=new Ym(X,q,Z),B.instanceMatrix=new Hs(new Float32Array(te.array),16),ie!==void 0&&(B.instanceColor=new Hs(new Float32Array(ie.array),ie.itemSize));break;case"LOD":B=new Qy;break;case"Line":B=new bu(I(e.geometry),D(e.material));break;case"LineLoop":B=new iv(I(e.geometry),D(e.material));break;case"LineSegments":B=new Np(I(e.geometry),D(e.material));break;case"PointCloud":case"Points":B=new mh(I(e.geometry),D(e.material));break;case"Sprite":B=new Vy(D(e.material));break;case"Group":B=new yf;break;case"Bone":B=new j1;break;default:B=new Bi}if(B.uuid=e.uuid,e.name!==void 0&&(B.name=e.name),e.matrix!==void 0?(B.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(B.matrixAutoUpdate=e.matrixAutoUpdate),B.matrixAutoUpdate&&B.matrix.decompose(B.position,B.quaternion,B.scale)):(e.position!==void 0&&B.position.fromArray(e.position),e.rotation!==void 0&&B.rotation.fromArray(e.rotation),e.quaternion!==void 0&&B.quaternion.fromArray(e.quaternion),e.scale!==void 0&&B.scale.fromArray(e.scale)),e.up!==void 0&&B.up.fromArray(e.up),e.castShadow!==void 0&&(B.castShadow=e.castShadow),e.receiveShadow!==void 0&&(B.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(B.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(B.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(B.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&B.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(B.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(B.visible=e.visible),e.frustumCulled!==void 0&&(B.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(B.renderOrder=e.renderOrder),e.userData!==void 0&&(B.userData=e.userData),e.layers!==void 0&&(B.layers.mask=e.layers),e.children!==void 0){const Z=e.children;for(let te=0;te<Z.length;te++)B.add(this.parseObject(Z[te],o,f,y,M))}if(e.animations!==void 0){const Z=e.animations;for(let te=0;te<Z.length;te++){const ie=Z[te];B.animations.push(M[ie])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(B.autoUpdate=e.autoUpdate);const Z=e.levels;for(let te=0;te<Z.length;te++){const ie=Z[te],fe=B.getObjectByProperty("uuid",ie.object);fe!==void 0&&B.addLevel(fe,ie.distance,ie.hysteresis)}}return B}bindSkeletons(e,o){Object.keys(o).length!==0&&e.traverse(function(f){if(f.isSkinnedMesh===!0&&f.skeleton!==void 0){const y=o[f.skeleton];y===void 0?w.warn("THREE.ObjectLoader: No skeleton found with UUID:",f.skeleton):f.bind(y,f.bindMatrix)}})}}const Ki={UVMapping:ca,CubeReflectionMapping:Ls,CubeRefractionMapping:as,EquirectangularReflectionMapping:zi,EquirectangularRefractionMapping:no,CubeUVReflectionMapping:ds},Ov={RepeatWrapping:hs,ClampToEdgeWrapping:Sr,MirroredRepeatWrapping:ji},Dv={NearestFilter:Pi,NearestMipmapNearestFilter:pa,NearestMipmapLinearFilter:fs,LinearFilter:Zi,LinearMipmapNearestFilter:ka,LinearMipmapLinearFilter:Jo};class K3 extends jl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&w.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&w.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,o,f,y){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=this,B=_d.get(e);if(B!==void 0)return M.manager.itemStart(e),setTimeout(function(){o&&o(B),M.manager.itemEnd(e)},0),B;const I={};I.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",I.headers=this.requestHeader,fetch(e,I).then(function(D){return D.blob()}).then(function(D){return createImageBitmap(D,Object.assign(M.options,{colorSpaceConversion:"none"}))}).then(function(D){_d.add(e,D),o&&o(D),M.manager.itemEnd(e)}).catch(function(D){y&&y(D),M.manager.itemError(e),M.manager.itemEnd(e)}),M.manager.itemStart(e)}}let M0;class cA{static getContext(){return M0===void 0&&(M0=new(window.AudioContext||window.webkitAudioContext)),M0}static setContext(e){M0=e}}class X3 extends jl{constructor(e){super(e)}load(e,o,f,y){const M=this,B=new Su(this.manager);B.setResponseType("arraybuffer"),B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(e,function(D){try{const U=D.slice(0);cA.getContext().decodeAudioData(U,function(q){o(q)},I)}catch(U){I(U)}},f,y);function I(D){y?y(D):w.error(D),M.manager.itemError(e)}}}class Y3 extends E0{constructor(e,o,f=1){super(void 0,f),this.isHemisphereLightProbe=!0;const y=new fr().set(e),M=new fr().set(o),B=new Qe(y.r,y.g,y.b),I=new Qe(M.r,M.g,M.b),D=Math.sqrt(Math.PI),U=D*Math.sqrt(.75);this.sh.coefficients[0].copy(B).add(I).multiplyScalar(D),this.sh.coefficients[1].copy(B).sub(I).multiplyScalar(U)}}class J3 extends E0{constructor(e,o=1){super(void 0,o),this.isAmbientLightProbe=!0;const f=new fr().set(e);this.sh.coefficients[0].set(f.r,f.g,f.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Pv=new li,Lv=new li,Sh=new li;class q3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Li,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Li,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const o=this._cache;if(o.focus!==e.focus||o.fov!==e.fov||o.aspect!==e.aspect*this.aspect||o.near!==e.near||o.far!==e.far||o.zoom!==e.zoom||o.eyeSep!==this.eyeSep){o.focus=e.focus,o.fov=e.fov,o.aspect=e.aspect*this.aspect,o.near=e.near,o.far=e.far,o.zoom=e.zoom,o.eyeSep=this.eyeSep,Sh.copy(e.projectionMatrix);const y=o.eyeSep/2,M=y*o.near/o.focus,B=o.near*Math.tan(yc*o.fov*.5)/o.zoom;let I,D;Lv.elements[12]=-y,Pv.elements[12]=y,I=-B*o.aspect+M,D=B*o.aspect+M,Sh.elements[0]=2*o.near/(D-I),Sh.elements[8]=(D+I)/(D-I),this.cameraL.projectionMatrix.copy(Sh),I=-B*o.aspect-M,D=B*o.aspect-M,Sh.elements[0]=2*o.near/(D-I),Sh.elements[8]=(D+I)/(D-I),this.cameraR.projectionMatrix.copy(Sh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Lv),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Pv)}}class kv{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=zv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const o=zv();e=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=e}return e}}function zv(){return(typeof performance=="undefined"?Date:performance).now()}const wh=new Qe,Gv=new xo,Nv=new Qe,tp=new Qe;class Uv extends Bi{constructor(){super(),this.type="AudioListener",this.context=cA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new kv}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const o=this.context.listener,f=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wh,Gv,Nv),tp.set(0,0,-1).applyQuaternion(Gv),o.positionX){const y=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(wh.x,y),o.positionY.linearRampToValueAtTime(wh.y,y),o.positionZ.linearRampToValueAtTime(wh.z,y),o.forwardX.linearRampToValueAtTime(tp.x,y),o.forwardY.linearRampToValueAtTime(tp.y,y),o.forwardZ.linearRampToValueAtTime(tp.z,y),o.upX.linearRampToValueAtTime(f.x,y),o.upY.linearRampToValueAtTime(f.y,y),o.upZ.linearRampToValueAtTime(f.z,y)}else o.setPosition(wh.x,wh.y,wh.z),o.setOrientation(tp.x,tp.y,tp.z,f.x,f.y,f.z)}}class jv extends Bi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){w.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,o=this.filters.length;e<o;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,o=this.filters.length;e<o;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(w.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){w.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Th=new Qe,Hv=new xo,Z3=new Qe,bd=new Qe;class $3 extends jv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,o,f){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=f,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Th,Hv,Z3),bd.set(0,0,1).applyQuaternion(Hv);const o=this.panner;if(o.positionX){const f=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(Th.x,f),o.positionY.linearRampToValueAtTime(Th.y,f),o.positionZ.linearRampToValueAtTime(Th.z,f),o.orientationX.linearRampToValueAtTime(bd.x,f),o.orientationY.linearRampToValueAtTime(bd.y,f),o.orientationZ.linearRampToValueAtTime(bd.z,f)}else o.setPosition(Th.x,Th.y,Th.z),o.setOrientation(bd.x,bd.y,bd.z)}}class eE{constructor(e,o=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=o,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const o=this.getFrequencyData();for(let f=0;f<o.length;f++)e+=o[f];return e/o.length}}class pc{constructor(e,o,f){this.binding=e,this.valueSize=f;let y,M,B;switch(o){case"quaternion":y=this._slerp,M=this._slerpAdditive,B=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(f*6),this._workIndex=5;break;case"string":case"bool":y=this._select,M=this._select,B=this._setAdditiveIdentityOther,this.buffer=new Array(f*5);break;default:y=this._lerp,M=this._lerpAdditive,B=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(f*5)}this._mixBufferRegion=y,this._mixBufferRegionAdditive=M,this._setIdentity=B,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,o){const f=this.buffer,y=this.valueSize,M=e*y+y;let B=this.cumulativeWeight;if(B===0){for(let I=0;I!==y;++I)f[M+I]=f[I];B=o}else{B+=o;const I=o/B;this._mixBufferRegion(f,M,0,I,y)}this.cumulativeWeight=B}accumulateAdditive(e){const o=this.buffer,f=this.valueSize,y=f*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(o,y,0,e,f),this.cumulativeWeightAdditive+=e}apply(e){const o=this.valueSize,f=this.buffer,y=e*o+o,M=this.cumulativeWeight,B=this.cumulativeWeightAdditive,I=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,M<1){const D=o*this._origIndex;this._mixBufferRegion(f,y,D,1-M,o)}B>0&&this._mixBufferRegionAdditive(f,y,this._addIndex*o,1,o);for(let D=o,U=o+o;D!==U;++D)if(f[D]!==f[D+o]){I.setValue(f,y);break}}saveOriginalState(){const e=this.binding,o=this.buffer,f=this.valueSize,y=f*this._origIndex;e.getValue(o,y);for(let M=f,B=y;M!==B;++M)o[M]=o[y+M%f];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,o=e+this.valueSize;for(let f=e;f<o;f++)this.buffer[f]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let f=0;f<this.valueSize;f++)this.buffer[o+f]=this.buffer[e+f]}_select(e,o,f,y,M){if(y>=.5)for(let B=0;B!==M;++B)e[o+B]=e[f+B]}_slerp(e,o,f,y){xo.slerpFlat(e,o,e,o,e,f,y)}_slerpAdditive(e,o,f,y,M){const B=this._workIndex*M;xo.multiplyQuaternionsFlat(e,B,e,o,e,f),xo.slerpFlat(e,o,e,o,e,B,y)}_lerp(e,o,f,y,M){const B=1-y;for(let I=0;I!==M;++I){const D=o+I;e[D]=e[D]*B+e[f+I]*y}}_lerpAdditive(e,o,f,y,M){for(let B=0;B!==M;++B){const I=o+B;e[I]=e[I]+e[f+B]*y}}}const Md="\\[\\]\\.:\\/",Wv=new RegExp("["+Md+"]","g"),x0="[^"+Md+"]",pA="[^"+Md.replace("\\.","")+"]",uA=/((?:WC+[\/:])*)/.source.replace("WC",x0),xd=/(WCOD+)?/.source.replace("WCOD",pA),tE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",x0),dA=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",x0),nE=new RegExp("^"+uA+xd+tE+dA+"$"),Bh=["material","materials","bones","map"];class Cd{constructor(e,o,f){const y=f||so.parseTrackName(o);this._targetGroup=e,this._bindings=e.subscribe_(o,y)}getValue(e,o){this.bind();const f=this._targetGroup.nCachedObjects_,y=this._bindings[f];y!==void 0&&y.getValue(e,o)}setValue(e,o){const f=this._bindings;for(let y=this._targetGroup.nCachedObjects_,M=f.length;y!==M;++y)f[y].setValue(e,o)}bind(){const e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,f=e.length;o!==f;++o)e[o].bind()}unbind(){const e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,f=e.length;o!==f;++o)e[o].unbind()}}class so{constructor(e,o,f){this.path=o,this.parsedPath=f||so.parseTrackName(o),this.node=so.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,o,f){return e&&e.isAnimationObjectGroup?new so.Composite(e,o,f):new so(e,o,f)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Wv,"")}static parseTrackName(e){const o=nE.exec(e);if(o===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const f={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},y=f.nodeName&&f.nodeName.lastIndexOf(".");if(y!==void 0&&y!==-1){const M=f.nodeName.substring(y+1);Bh.indexOf(M)!==-1&&(f.nodeName=f.nodeName.substring(0,y),f.objectName=M)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return f}static findNode(e,o){if(o===void 0||o===""||o==="."||o===-1||o===e.name||o===e.uuid)return e;if(e.skeleton){const f=e.skeleton.getBoneByName(o);if(f!==void 0)return f}if(e.children){const f=function(M){for(let B=0;B<M.length;B++){const I=M[B];if(I.name===o||I.uuid===o)return I;const D=f(I.children);if(D)return D}return null},y=f(e.children);if(y)return y}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,o){e[o]=this.targetObject[this.propertyName]}_getValue_array(e,o){const f=this.resolvedProperty;for(let y=0,M=f.length;y!==M;++y)e[o++]=f[y]}_getValue_arrayElement(e,o){e[o]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,o){this.resolvedProperty.toArray(e,o)}_setValue_direct(e,o){this.targetObject[this.propertyName]=e[o]}_setValue_direct_setNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,o){const f=this.resolvedProperty;for(let y=0,M=f.length;y!==M;++y)f[y]=e[o++]}_setValue_array_setNeedsUpdate(e,o){const f=this.resolvedProperty;for(let y=0,M=f.length;y!==M;++y)f[y]=e[o++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,o){const f=this.resolvedProperty;for(let y=0,M=f.length;y!==M;++y)f[y]=e[o++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,o){this.resolvedProperty[this.propertyIndex]=e[o]}_setValue_arrayElement_setNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,o){this.resolvedProperty.fromArray(e,o)}_setValue_fromArray_setNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,o){this.bind(),this.getValue(e,o)}_setValue_unbound(e,o){this.bind(),this.setValue(e,o)}bind(){let e=this.node;const o=this.parsedPath,f=o.objectName,y=o.propertyName;let M=o.propertyIndex;if(e||(e=so.findNode(this.rootNode,o.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){w.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(f){let U=o.objectIndex;switch(f){case"materials":if(!e.material){w.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){w.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){w.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let X=0;X<e.length;X++)if(e[X].name===U){U=X;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){w.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){w.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[f]===void 0){w.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[f]}if(U!==void 0){if(e[U]===void 0){w.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[U]}}const B=e[y];if(B===void 0){const U=o.nodeName;w.error("THREE.PropertyBinding: Trying to update property for track: "+U+"."+y+" but it wasn't found.",e);return}let I=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?I=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(I=this.Versioning.MatrixWorldNeedsUpdate);let D=this.BindingType.Direct;if(M!==void 0){if(y==="morphTargetInfluences"){if(!e.geometry){w.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){w.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[M]!==void 0&&(M=e.morphTargetDictionary[M])}D=this.BindingType.ArrayElement,this.resolvedProperty=B,this.propertyIndex=M}else B.fromArray!==void 0&&B.toArray!==void 0?(D=this.BindingType.HasFromToArray,this.resolvedProperty=B):Array.isArray(B)?(D=this.BindingType.EntireArray,this.resolvedProperty=B):this.propertyName=y;this.getValue=this.GetterByBindingType[D],this.setValue=this.SetterByBindingTypeAndVersioning[D][I]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}so.Composite=Cd,so.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},so.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},so.prototype.GetterByBindingType=[so.prototype._getValue_direct,so.prototype._getValue_array,so.prototype._getValue_arrayElement,so.prototype._getValue_toArray],so.prototype.SetterByBindingTypeAndVersioning=[[so.prototype._setValue_direct,so.prototype._setValue_direct_setNeedsUpdate,so.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[so.prototype._setValue_array,so.prototype._setValue_array_setNeedsUpdate,so.prototype._setValue_array_setMatrixWorldNeedsUpdate],[so.prototype._setValue_arrayElement,so.prototype._setValue_arrayElement_setNeedsUpdate,so.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[so.prototype._setValue_fromArray,so.prototype._setValue_fromArray_setNeedsUpdate,so.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rE{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ga(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let f=0,y=arguments.length;f!==y;++f)e[arguments[f].uuid]=f;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}add(){const e=this._objects,o=this._indicesByUUID,f=this._paths,y=this._parsedPaths,M=this._bindings,B=M.length;let I,D=e.length,U=this.nCachedObjects_;for(let X=0,q=arguments.length;X!==q;++X){const Z=arguments[X],te=Z.uuid;let ie=o[te];if(ie===void 0){ie=D++,o[te]=ie,e.push(Z);for(let fe=0,$=B;fe!==$;++fe)M[fe].push(new so(Z,f[fe],y[fe]))}else if(ie<U){I=e[ie];const fe=--U,$=e[fe];o[$.uuid]=ie,e[ie]=$,o[te]=fe,e[fe]=Z;for(let re=0,be=B;re!==be;++re){const he=M[re],Se=he[fe];let Ue=he[ie];he[ie]=Se,Ue===void 0&&(Ue=new so(Z,f[re],y[re])),he[fe]=Ue}}else e[ie]!==I&&w.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=U}remove(){const e=this._objects,o=this._indicesByUUID,f=this._bindings,y=f.length;let M=this.nCachedObjects_;for(let B=0,I=arguments.length;B!==I;++B){const D=arguments[B],U=D.uuid,X=o[U];if(X!==void 0&&X>=M){const q=M++,Z=e[q];o[Z.uuid]=X,e[X]=Z,o[U]=q,e[q]=D;for(let te=0,ie=y;te!==ie;++te){const fe=f[te],$=fe[q],re=fe[X];fe[X]=$,fe[q]=re}}}this.nCachedObjects_=M}uncache(){const e=this._objects,o=this._indicesByUUID,f=this._bindings,y=f.length;let M=this.nCachedObjects_,B=e.length;for(let I=0,D=arguments.length;I!==D;++I){const U=arguments[I],X=U.uuid,q=o[X];if(q!==void 0)if(delete o[X],q<M){const Z=--M,te=e[Z],ie=--B,fe=e[ie];o[te.uuid]=q,e[q]=te,o[fe.uuid]=Z,e[Z]=fe,e.pop();for(let $=0,re=y;$!==re;++$){const be=f[$],he=be[Z],Se=be[ie];be[q]=he,be[Z]=Se,be.pop()}}else{const Z=--B,te=e[Z];Z>0&&(o[te.uuid]=q),e[q]=te,e.pop();for(let ie=0,fe=y;ie!==fe;++ie){const $=f[ie];$[q]=$[Z],$.pop()}}}this.nCachedObjects_=M}subscribe_(e,o){const f=this._bindingsIndicesByPath;let y=f[e];const M=this._bindings;if(y!==void 0)return M[y];const B=this._paths,I=this._parsedPaths,D=this._objects,U=D.length,X=this.nCachedObjects_,q=new Array(U);y=M.length,f[e]=y,B.push(e),I.push(o),M.push(q);for(let Z=X,te=D.length;Z!==te;++Z){const ie=D[Z];q[Z]=new so(ie,e,o)}return q}unsubscribe_(e){const o=this._bindingsIndicesByPath,f=o[e];if(f!==void 0){const y=this._paths,M=this._parsedPaths,B=this._bindings,I=B.length-1,D=B[I],U=e[I];o[U]=f,B[f]=D,B.pop(),M[f]=M[I],M.pop(),y[f]=y[I],y.pop()}}}class Vv{constructor(e,o,f=null,y=o.blendMode){this._mixer=e,this._clip=o,this._localRoot=f,this.blendMode=y;const M=o.tracks,B=M.length,I=new Array(B),D={endingStart:Yp,endingEnd:Yp};for(let U=0;U!==B;++U){const X=M[U].createInterpolant(null);I[U]=X,X.settings=D}this._interpolantSettings=D,this._interpolants=I,this._propertyBindings=new Array(B),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ir,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,o){return this.loop=e,this.repetitions=o,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,o,f){if(e.fadeOut(o),this.fadeIn(o),f){const y=this._clip.duration,M=e._clip.duration,B=M/y,I=y/M;e.warp(1,B,o),this.warp(I,1,o)}return this}crossFadeTo(e,o,f){return e.crossFadeFrom(this,o,f)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,o,f){const y=this._mixer,M=y.time,B=this.timeScale;let I=this._timeScaleInterpolant;I===null&&(I=y._lendControlInterpolant(),this._timeScaleInterpolant=I);const D=I.parameterPositions,U=I.sampleValues;return D[0]=M,D[1]=M+f,U[0]=e/B,U[1]=o/B,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,o,f,y){if(!this.enabled){this._updateWeight(e);return}const M=this._startTime;if(M!==null){const D=(e-M)*f;D<0||f===0?o=0:(this._startTime=null,o=f*D)}o*=this._updateTimeScale(e);const B=this._updateTime(o),I=this._updateWeight(e);if(I>0){const D=this._interpolants,U=this._propertyBindings;switch(this.blendMode){case Du:for(let X=0,q=D.length;X!==q;++X)D[X].evaluate(B),U[X].accumulateAdditive(I);break;case lp:default:for(let X=0,q=D.length;X!==q;++X)D[X].evaluate(B),U[X].accumulate(y,I)}}}_updateWeight(e){let o=0;if(this.enabled){o=this.weight;const f=this._weightInterpolant;if(f!==null){const y=f.evaluate(e)[0];o*=y,e>f.parameterPositions[1]&&(this.stopFading(),y===0&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(e){let o=0;if(!this.paused){o=this.timeScale;const f=this._timeScaleInterpolant;if(f!==null){const y=f.evaluate(e)[0];o*=y,e>f.parameterPositions[1]&&(this.stopWarping(),o===0?this.paused=!0:this.timeScale=o)}}return this._effectiveTimeScale=o,o}_updateTime(e){const o=this._clip.duration,f=this.loop;let y=this.time+e,M=this._loopCount;const B=f===ro;if(e===0)return M===-1?y:B&&(M&1)===1?o-y:y;if(f===Ql){M===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(y>=o)y=o;else if(y<0)y=0;else{this.time=y;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(M===-1&&(e>=0?(M=0,this._setEndings(!0,this.repetitions===0,B)):this._setEndings(this.repetitions===0,!0,B)),y>=o||y<0){const I=Math.floor(y/o);y-=o*I,M+=Math.abs(I);const D=this.repetitions-M;if(D<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,y=e>0?o:0,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(D===1){const U=e<0;this._setEndings(U,!U,B)}else this._setEndings(!1,!1,B);this._loopCount=M,this.time=y,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:I})}}else this.time=y;if(B&&(M&1)===1)return o-y}return y}_setEndings(e,o,f){const y=this._interpolantSettings;f?(y.endingStart=Gs,y.endingEnd=Gs):(e?y.endingStart=this.zeroSlopeAtStart?Gs:Yp:y.endingStart=ap,o?y.endingEnd=this.zeroSlopeAtEnd?Gs:Yp:y.endingEnd=ap)}_scheduleFading(e,o,f){const y=this._mixer,M=y.time;let B=this._weightInterpolant;B===null&&(B=y._lendControlInterpolant(),this._weightInterpolant=B);const I=B.parameterPositions,D=B.sampleValues;return I[0]=M,D[0]=o,I[1]=M+e,D[1]=f,this}}const hA=new Float32Array(1);class fA extends vl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,o){const f=e._localRoot||this._root,y=e._clip.tracks,M=y.length,B=e._propertyBindings,I=e._interpolants,D=f.uuid,U=this._bindingsByRootAndName;let X=U[D];X===void 0&&(X={},U[D]=X);for(let q=0;q!==M;++q){const Z=y[q],te=Z.name;let ie=X[te];if(ie!==void 0)++ie.referenceCount,B[q]=ie;else{if(ie=B[q],ie!==void 0){ie._cacheIndex===null&&(++ie.referenceCount,this._addInactiveBinding(ie,D,te));continue}const fe=o&&o._propertyBindings[q].binding.parsedPath;ie=new pc(so.create(f,te,fe),Z.ValueTypeName,Z.getValueSize()),++ie.referenceCount,this._addInactiveBinding(ie,D,te),B[q]=ie}I[q].resultBuffer=ie.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const f=(e._localRoot||this._root).uuid,y=e._clip.uuid,M=this._actionsByClip[y];this._bindAction(e,M&&M.knownActions[0]),this._addInactiveAction(e,y,f)}const o=e._propertyBindings;for(let f=0,y=o.length;f!==y;++f){const M=o[f];M.useCount++===0&&(this._lendBinding(M),M.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const o=e._propertyBindings;for(let f=0,y=o.length;f!==y;++f){const M=o[f];--M.useCount===0&&(M.restoreOriginalState(),this._takeBackBinding(M))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const o=e._cacheIndex;return o!==null&&o<this._nActiveActions}_addInactiveAction(e,o,f){const y=this._actions,M=this._actionsByClip;let B=M[o];if(B===void 0)B={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,M[o]=B;else{const I=B.knownActions;e._byClipCacheIndex=I.length,I.push(e)}e._cacheIndex=y.length,y.push(e),B.actionByRoot[f]=e}_removeInactiveAction(e){const o=this._actions,f=o[o.length-1],y=e._cacheIndex;f._cacheIndex=y,o[y]=f,o.pop(),e._cacheIndex=null;const M=e._clip.uuid,B=this._actionsByClip,I=B[M],D=I.knownActions,U=D[D.length-1],X=e._byClipCacheIndex;U._byClipCacheIndex=X,D[X]=U,D.pop(),e._byClipCacheIndex=null;const q=I.actionByRoot,Z=(e._localRoot||this._root).uuid;delete q[Z],D.length===0&&delete B[M],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const o=e._propertyBindings;for(let f=0,y=o.length;f!==y;++f){const M=o[f];--M.referenceCount===0&&this._removeInactiveBinding(M)}}_lendAction(e){const o=this._actions,f=e._cacheIndex,y=this._nActiveActions++,M=o[y];e._cacheIndex=y,o[y]=e,M._cacheIndex=f,o[f]=M}_takeBackAction(e){const o=this._actions,f=e._cacheIndex,y=--this._nActiveActions,M=o[y];e._cacheIndex=y,o[y]=e,M._cacheIndex=f,o[f]=M}_addInactiveBinding(e,o,f){const y=this._bindingsByRootAndName,M=this._bindings;let B=y[o];B===void 0&&(B={},y[o]=B),B[f]=e,e._cacheIndex=M.length,M.push(e)}_removeInactiveBinding(e){const o=this._bindings,f=e.binding,y=f.rootNode.uuid,M=f.path,B=this._bindingsByRootAndName,I=B[y],D=o[o.length-1],U=e._cacheIndex;D._cacheIndex=U,o[U]=D,o.pop(),delete I[M],Object.keys(I).length===0&&delete B[y]}_lendBinding(e){const o=this._bindings,f=e._cacheIndex,y=this._nActiveBindings++,M=o[y];e._cacheIndex=y,o[y]=e,M._cacheIndex=f,o[f]=M}_takeBackBinding(e){const o=this._bindings,f=e._cacheIndex,y=--this._nActiveBindings,M=o[y];e._cacheIndex=y,o[y]=e,M._cacheIndex=f,o[f]=M}_lendControlInterpolant(){const e=this._controlInterpolants,o=this._nActiveControlInterpolants++;let f=e[o];return f===void 0&&(f=new Cv(new Float32Array(2),new Float32Array(2),1,hA),f.__cacheIndex=o,e[o]=f),f}_takeBackControlInterpolant(e){const o=this._controlInterpolants,f=e.__cacheIndex,y=--this._nActiveControlInterpolants,M=o[y];e.__cacheIndex=y,o[y]=e,M.__cacheIndex=f,o[f]=M}clipAction(e,o,f){const y=o||this._root,M=y.uuid;let B=typeof e=="string"?$g.findByName(y,e):e;const I=B!==null?B.uuid:e,D=this._actionsByClip[I];let U=null;if(f===void 0&&(B!==null?f=B.blendMode:f=lp),D!==void 0){const q=D.actionByRoot[M];if(q!==void 0&&q.blendMode===f)return q;U=D.knownActions[0],B===null&&(B=U._clip)}if(B===null)return null;const X=new Vv(this,B,o,f);return this._bindAction(X,U),this._addInactiveAction(X,I,M),X}existingAction(e,o){const f=o||this._root,y=f.uuid,M=typeof e=="string"?$g.findByName(f,e):e,B=M?M.uuid:e,I=this._actionsByClip[B];return I!==void 0&&I.actionByRoot[y]||null}stopAllAction(){const e=this._actions,o=this._nActiveActions;for(let f=o-1;f>=0;--f)e[f].stop();return this}update(e){e*=this.timeScale;const o=this._actions,f=this._nActiveActions,y=this.time+=e,M=Math.sign(e),B=this._accuIndex^=1;for(let U=0;U!==f;++U)o[U]._update(y,e,M,B);const I=this._bindings,D=this._nActiveBindings;for(let U=0;U!==D;++U)I[U].apply(B);return this}setTime(e){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const o=this._actions,f=e.uuid,y=this._actionsByClip,M=y[f];if(M!==void 0){const B=M.knownActions;for(let I=0,D=B.length;I!==D;++I){const U=B[I];this._deactivateAction(U);const X=U._cacheIndex,q=o[o.length-1];U._cacheIndex=null,U._byClipCacheIndex=null,q._cacheIndex=X,o[X]=q,o.pop(),this._removeInactiveBindingsForAction(U)}delete y[f]}}uncacheRoot(e){const o=e.uuid,f=this._actionsByClip;for(const B in f){const I=f[B].actionByRoot,D=I[o];D!==void 0&&(this._deactivateAction(D),this._removeInactiveAction(D))}const y=this._bindingsByRootAndName,M=y[o];if(M!==void 0)for(const B in M){const I=M[B];I.restoreOriginalState(),this._removeInactiveBinding(I)}}uncacheAction(e,o){const f=this.existingAction(e,o);f!==null&&(this._deactivateAction(f),this._removeInactiveAction(f))}}class gA{constructor(e){this.value=e}clone(){return new gA(this.value.clone===void 0?this.value:this.value.clone())}}let iE=0;class oE extends vl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:iE++}),this.name="",this.usage=up,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const o=this.uniforms.indexOf(e);return o!==-1&&this.uniforms.splice(o,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const o=e.uniforms;this.uniforms.length=0;for(let f=0,y=o.length;f<y;f++)this.uniforms.push(o[f].clone());return this}clone(){return new this.constructor().copy(this)}}class sE extends ud{constructor(e,o,f=1){super(e,o),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=f}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const o=super.clone(e);return o.meshPerAttribute=this.meshPerAttribute,o}toJSON(e){const o=super.toJSON(e);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}class Qv{constructor(e,o,f,y,M){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=o,this.itemSize=f,this.elementSize=y,this.count=M,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,o){return this.type=e,this.elementSize=o,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class C0{constructor(e,o,f=0,y=1/0){this.ray=new vp(e,o),this.near=f,this.far=y,this.camera=null,this.layers=new Yh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,o){this.ray.set(e,o)}setFromCamera(e,o){o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):w.error("THREE.Raycaster: Unsupported camera type: "+o.type)}intersectObject(e,o=!0,f=[]){return If(e,this,f,o),f.sort(mA),f}intersectObjects(e,o=!0,f=[]){for(let y=0,M=e.length;y<M;y++)If(e[y],this,f,o);return f.sort(mA),f}}function mA(C,e){return C.distance-e.distance}function If(C,e,o,f){if(C.layers.test(e.layers)&&C.raycast(e,o),f===!0){const y=C.children;for(let M=0,B=y.length;M<B;M++)If(y[M],e,o,!0)}}class aE{constructor(e=1,o=0,f=0){return this.radius=e,this.phi=o,this.theta=f,this}set(e,o,f){return this.radius=e,this.phi=o,this.theta=f,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,f){return this.radius=Math.sqrt(e*e+o*o+f*f),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,f),this.phi=Math.acos(Go(o/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lE{constructor(e=1,o=0,f=0){return this.radius=e,this.theta=o,this.y=f,this}set(e,o,f){return this.radius=e,this.theta=o,this.y=f,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,f){return this.radius=Math.sqrt(e*e+f*f),this.theta=Math.atan2(e,f),this.y=o,this}clone(){return new this.constructor().copy(this)}}const Kv=new gn;class Hl{constructor(e=new gn(1/0,1/0),o=new gn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromPoints(e){this.makeEmpty();for(let o=0,f=e.length;o<f;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){const f=Kv.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(f),this.max.copy(e).add(f),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Kv).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xv=new Qe,am=new Qe;class cE{constructor(e=new Qe,o=new Qe){this.start=e,this.end=o}set(e,o){return this.start.copy(e),this.end.copy(o),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,o){return this.delta(o).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,o){Xv.subVectors(e,this.start),am.subVectors(this.end,this.start);const f=am.dot(am);let M=am.dot(Xv)/f;return o&&(M=Go(M,0,1)),M}closestPointToPoint(e,o,f){const y=this.closestPointToPointParameter(e,o);return this.delta(f).multiplyScalar(y).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Yv=new Qe;class Jv extends Bi{constructor(e,o){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,this.type="SpotLightHelper";const f=new xi,y=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let B=0,I=1,D=32;B<D;B++,I++){const U=B/D*Math.PI*2,X=I/D*Math.PI*2;y.push(Math.cos(U),Math.sin(U),1,Math.cos(X),Math.sin(X),1)}f.setAttribute("position",new yr(y,3));const M=new pl({fog:!1,toneMapped:!1});this.cone=new Np(f,M),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,o=e*Math.tan(this.light.angle);this.cone.scale.set(o,o,e),Yv.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Yv),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Sd=new Qe,S0=new li,AA=new li;class pE extends Np{constructor(e){const o=sa(e),f=new xi,y=[],M=[],B=new fr(0,0,1),I=new fr(0,1,0);for(let U=0;U<o.length;U++){const X=o[U];X.parent&&X.parent.isBone&&(y.push(0,0,0),y.push(0,0,0),M.push(B.r,B.g,B.b),M.push(I.r,I.g,I.b))}f.setAttribute("position",new yr(y,3)),f.setAttribute("color",new yr(M,3));const D=new pl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(f,D),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=o,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const o=this.bones,f=this.geometry,y=f.getAttribute("position");AA.copy(this.root.matrixWorld).invert();for(let M=0,B=0;M<o.length;M++){const I=o[M];I.parent&&I.parent.isBone&&(S0.multiplyMatrices(AA,I.matrixWorld),Sd.setFromMatrixPosition(S0),y.setXYZ(B,Sd.x,Sd.y,Sd.z),S0.multiplyMatrices(AA,I.parent.matrixWorld),Sd.setFromMatrixPosition(S0),y.setXYZ(B+1,Sd.x,Sd.y,Sd.z),B+=2)}f.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function sa(C){const e=[];C.isBone===!0&&e.push(C);for(let o=0;o<C.children.length;o++)e.push.apply(e,sa(C.children[o]));return e}class uE extends Bs{constructor(e,o,f){const y=new ul(o,4,2),M=new nc({wireframe:!0,fog:!1,toneMapped:!1});super(y,M),this.light=e,this.color=f,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const dE=new Qe,qv=new fr,Zv=new fr;class Oo extends Bi{constructor(e,o,f){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="HemisphereLightHelper";const y=new Xg(o);y.rotateY(Math.PI*.5),this.material=new nc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const M=y.getAttribute("position"),B=new Float32Array(M.count*3);y.setAttribute("color",new ao(B,3)),this.add(new Bs(y,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const o=e.geometry.getAttribute("color");qv.copy(this.light.color),Zv.copy(this.light.groundColor);for(let f=0,y=o.count;f<y;f++){const M=f<y/2?qv:Zv;o.setXYZ(f,M.r,M.g,M.b)}o.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(dE.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $v extends Np{constructor(e=10,o=10,f=4473924,y=8947848){f=new fr(f),y=new fr(y);const M=o/2,B=e/o,I=e/2,D=[],U=[];for(let Z=0,te=0,ie=-I;Z<=o;Z++,ie+=B){D.push(-I,0,ie,I,0,ie),D.push(ie,0,-I,ie,0,I);const fe=Z===M?f:y;fe.toArray(U,te),te+=3,fe.toArray(U,te),te+=3,fe.toArray(U,te),te+=3,fe.toArray(U,te),te+=3}const X=new xi;X.setAttribute("position",new yr(D,3)),X.setAttribute("color",new yr(U,3));const q=new pl({vertexColors:!0,toneMapped:!1});super(X,q),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class hE extends Np{constructor(e=10,o=16,f=8,y=64,M=4473924,B=8947848){M=new fr(M),B=new fr(B);const I=[],D=[];if(o>1)for(let q=0;q<o;q++){const Z=q/o*(Math.PI*2),te=Math.sin(Z)*e,ie=Math.cos(Z)*e;I.push(0,0,0),I.push(te,0,ie);const fe=q&1?M:B;D.push(fe.r,fe.g,fe.b),D.push(fe.r,fe.g,fe.b)}for(let q=0;q<f;q++){const Z=q&1?M:B,te=e-e/f*q;for(let ie=0;ie<y;ie++){let fe=ie/y*(Math.PI*2),$=Math.sin(fe)*te,re=Math.cos(fe)*te;I.push($,0,re),D.push(Z.r,Z.g,Z.b),fe=(ie+1)/y*(Math.PI*2),$=Math.sin(fe)*te,re=Math.cos(fe)*te,I.push($,0,re),D.push(Z.r,Z.g,Z.b)}}const U=new xi;U.setAttribute("position",new yr(I,3)),U.setAttribute("color",new yr(D,3));const X=new pl({vertexColors:!0,toneMapped:!1});super(U,X),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const e2=new Qe,Rh=new Qe,t2=new Qe;class fE extends Bi{constructor(e,o,f){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="DirectionalLightHelper",o===void 0&&(o=1);let y=new xi;y.setAttribute("position",new yr([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3));const M=new pl({fog:!1,toneMapped:!1});this.lightPlane=new bu(y,M),this.add(this.lightPlane),y=new xi,y.setAttribute("position",new yr([0,0,0,0,0,1],3)),this.targetLine=new bu(y,M),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),e2.setFromMatrixPosition(this.light.matrixWorld),Rh.setFromMatrixPosition(this.light.target.matrixWorld),t2.subVectors(Rh,e2),this.lightPlane.lookAt(Rh),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Rh),this.targetLine.scale.z=t2.length()}}const ci=new Qe,bs=new Co;class n2 extends Np{constructor(e){const o=new xi,f=new pl({color:16777215,vertexColors:!0,toneMapped:!1}),y=[],M=[],B={};I("n1","n2"),I("n2","n4"),I("n4","n3"),I("n3","n1"),I("f1","f2"),I("f2","f4"),I("f4","f3"),I("f3","f1"),I("n1","f1"),I("n2","f2"),I("n3","f3"),I("n4","f4"),I("p","n1"),I("p","n2"),I("p","n3"),I("p","n4"),I("u1","u2"),I("u2","u3"),I("u3","u1"),I("c","t"),I("p","c"),I("cn1","cn2"),I("cn3","cn4"),I("cf1","cf2"),I("cf3","cf4");function I(ie,fe){D(ie),D(fe)}function D(ie){y.push(0,0,0),M.push(0,0,0),B[ie]===void 0&&(B[ie]=[]),B[ie].push(y.length/3-1)}o.setAttribute("position",new yr(y,3)),o.setAttribute("color",new yr(M,3)),super(o,f),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=B,this.update();const U=new fr(16755200),X=new fr(16711680),q=new fr(43775),Z=new fr(16777215),te=new fr(3355443);this.setColors(U,X,q,Z,te)}setColors(e,o,f,y,M){const I=this.geometry.getAttribute("color");I.setXYZ(0,e.r,e.g,e.b),I.setXYZ(1,e.r,e.g,e.b),I.setXYZ(2,e.r,e.g,e.b),I.setXYZ(3,e.r,e.g,e.b),I.setXYZ(4,e.r,e.g,e.b),I.setXYZ(5,e.r,e.g,e.b),I.setXYZ(6,e.r,e.g,e.b),I.setXYZ(7,e.r,e.g,e.b),I.setXYZ(8,e.r,e.g,e.b),I.setXYZ(9,e.r,e.g,e.b),I.setXYZ(10,e.r,e.g,e.b),I.setXYZ(11,e.r,e.g,e.b),I.setXYZ(12,e.r,e.g,e.b),I.setXYZ(13,e.r,e.g,e.b),I.setXYZ(14,e.r,e.g,e.b),I.setXYZ(15,e.r,e.g,e.b),I.setXYZ(16,e.r,e.g,e.b),I.setXYZ(17,e.r,e.g,e.b),I.setXYZ(18,e.r,e.g,e.b),I.setXYZ(19,e.r,e.g,e.b),I.setXYZ(20,e.r,e.g,e.b),I.setXYZ(21,e.r,e.g,e.b),I.setXYZ(22,e.r,e.g,e.b),I.setXYZ(23,e.r,e.g,e.b),I.setXYZ(24,o.r,o.g,o.b),I.setXYZ(25,o.r,o.g,o.b),I.setXYZ(26,o.r,o.g,o.b),I.setXYZ(27,o.r,o.g,o.b),I.setXYZ(28,o.r,o.g,o.b),I.setXYZ(29,o.r,o.g,o.b),I.setXYZ(30,o.r,o.g,o.b),I.setXYZ(31,o.r,o.g,o.b),I.setXYZ(32,f.r,f.g,f.b),I.setXYZ(33,f.r,f.g,f.b),I.setXYZ(34,f.r,f.g,f.b),I.setXYZ(35,f.r,f.g,f.b),I.setXYZ(36,f.r,f.g,f.b),I.setXYZ(37,f.r,f.g,f.b),I.setXYZ(38,y.r,y.g,y.b),I.setXYZ(39,y.r,y.g,y.b),I.setXYZ(40,M.r,M.g,M.b),I.setXYZ(41,M.r,M.g,M.b),I.setXYZ(42,M.r,M.g,M.b),I.setXYZ(43,M.r,M.g,M.b),I.setXYZ(44,M.r,M.g,M.b),I.setXYZ(45,M.r,M.g,M.b),I.setXYZ(46,M.r,M.g,M.b),I.setXYZ(47,M.r,M.g,M.b),I.setXYZ(48,M.r,M.g,M.b),I.setXYZ(49,M.r,M.g,M.b),I.needsUpdate=!0}update(){const e=this.geometry,o=this.pointMap,f=1,y=1;bs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ws("c",o,e,bs,0,0,-1),Ws("t",o,e,bs,0,0,1),Ws("n1",o,e,bs,-f,-y,-1),Ws("n2",o,e,bs,f,-y,-1),Ws("n3",o,e,bs,-f,y,-1),Ws("n4",o,e,bs,f,y,-1),Ws("f1",o,e,bs,-f,-y,1),Ws("f2",o,e,bs,f,-y,1),Ws("f3",o,e,bs,-f,y,1),Ws("f4",o,e,bs,f,y,1),Ws("u1",o,e,bs,f*.7,y*1.1,-1),Ws("u2",o,e,bs,-f*.7,y*1.1,-1),Ws("u3",o,e,bs,0,y*2,-1),Ws("cf1",o,e,bs,-f,0,1),Ws("cf2",o,e,bs,f,0,1),Ws("cf3",o,e,bs,0,-y,1),Ws("cf4",o,e,bs,0,y,1),Ws("cn1",o,e,bs,-f,0,-1),Ws("cn2",o,e,bs,f,0,-1),Ws("cn3",o,e,bs,0,-y,-1),Ws("cn4",o,e,bs,0,y,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ws(C,e,o,f,y,M,B){ci.set(y,M,B).unproject(f);const I=e[C];if(I!==void 0){const D=o.getAttribute("position");for(let U=0,X=I.length;U<X;U++)D.setXYZ(I[U],ci.x,ci.y,ci.z)}}const w0=new Ao;class gE extends Np{constructor(e,o=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(8*3),M=new xi;M.setIndex(new ao(f,1)),M.setAttribute("position",new ao(y,3)),super(M,new pl({color:o,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&w.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&w0.setFromObject(this.object),w0.isEmpty())return;const o=w0.min,f=w0.max,y=this.geometry.attributes.position,M=y.array;M[0]=f.x,M[1]=f.y,M[2]=f.z,M[3]=o.x,M[4]=f.y,M[5]=f.z,M[6]=o.x,M[7]=o.y,M[8]=f.z,M[9]=f.x,M[10]=o.y,M[11]=f.z,M[12]=f.x,M[13]=f.y,M[14]=o.z,M[15]=o.x,M[16]=f.y,M[17]=o.z,M[18]=o.x,M[19]=o.y,M[20]=o.z,M[21]=f.x,M[22]=o.y,M[23]=o.z,y.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,o){return super.copy(e,o),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class T0 extends Np{constructor(e,o=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],M=new xi;M.setIndex(new ao(f,1)),M.setAttribute("position",new yr(y,3)),super(M,new pl({color:o,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mE extends bu{constructor(e,o=1,f=16776960){const y=f,M=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],B=new xi;B.setAttribute("position",new yr(M,3)),B.computeBoundingSphere(),super(B,new pl({color:y,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=o;const I=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],D=new xi;D.setAttribute("position",new yr(I,3)),D.computeBoundingSphere(),this.add(new Bs(D,new nc({color:y,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const r2=new Qe;let Yn,yA;class AE extends Bi{constructor(e=new Qe(0,0,1),o=new Qe(0,0,0),f=1,y=16776960,M=f*.2,B=M*.2){super(),this.type="ArrowHelper",Yn===void 0&&(Yn=new xi,Yn.setAttribute("position",new yr([0,0,0,0,1,0],3)),yA=new _h(0,.5,1,5,1),yA.translate(0,-.5,0)),this.position.copy(o),this.line=new bu(Yn,new pl({color:y,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bs(yA,new nc({color:y,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(f,M,B)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{r2.set(e.z,0,-e.x).normalize();const o=Math.acos(e.y);this.quaternion.setFromAxisAngle(r2,o)}}setLength(e,o=e*.2,f=o*.2){this.line.scale.set(1,Math.max(1e-4,e-o),1),this.line.updateMatrix(),this.cone.scale.set(f,o,f),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class yE extends Np{constructor(e=1){const o=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],y=new xi;y.setAttribute("position",new yr(o,3)),y.setAttribute("color",new yr(f,3));const M=new pl({vertexColors:!0,toneMapped:!1});super(y,M),this.type="AxesHelper"}setColors(e,o,f){const y=new fr,M=this.geometry.attributes.color.array;return y.set(e),y.toArray(M,0),y.toArray(M,3),y.set(o),y.toArray(M,6),y.toArray(M,9),y.set(f),y.toArray(M,12),y.toArray(M,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vE{constructor(){this.type="ShapePath",this.color=new fr,this.subPaths=[],this.currentPath=null}moveTo(e,o){return this.currentPath=new xf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,o),this}lineTo(e,o){return this.currentPath.lineTo(e,o),this}quadraticCurveTo(e,o,f,y){return this.currentPath.quadraticCurveTo(e,o,f,y),this}bezierCurveTo(e,o,f,y,M,B){return this.currentPath.bezierCurveTo(e,o,f,y,M,B),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function o(re){const be=[];for(let he=0,Se=re.length;he<Se;he++){const Ue=re[he],Xe=new Eh;Xe.curves=Ue.curves,be.push(Xe)}return be}function f(re,be){const he=be.length;let Se=!1;for(let Ue=he-1,Xe=0;Xe<he;Ue=Xe++){let et=be[Ue],st=be[Xe],we=st.x-et.x,We=st.y-et.y;if(Math.abs(We)>Number.EPSILON){if(We<0&&(et=be[Xe],we=-we,st=be[Ue],We=-We),re.y<et.y||re.y>st.y)continue;if(re.y===et.y){if(re.x===et.x)return!0}else{const Yt=We*(re.x-et.x)-we*(re.y-et.y);if(Yt===0)return!0;if(Yt<0)continue;Se=!Se}}else{if(re.y!==et.y)continue;if(st.x<=re.x&&re.x<=et.x||et.x<=re.x&&re.x<=st.x)return!0}}return Se}const y=Up.isClockWise,M=this.subPaths;if(M.length===0)return[];let B,I,D;const U=[];if(M.length===1)return I=M[0],D=new Eh,D.curves=I.curves,U.push(D),U;let X=!y(M[0].getPoints());X=e?!X:X;const q=[],Z=[];let te=[],ie=0,fe;Z[ie]=void 0,te[ie]=[];for(let re=0,be=M.length;re<be;re++)I=M[re],fe=I.getPoints(),B=y(fe),B=e?!B:B,B?(!X&&Z[ie]&&ie++,Z[ie]={s:new Eh,p:fe},Z[ie].s.curves=I.curves,X&&ie++,te[ie]=[]):te[ie].push({h:I,p:fe[0]});if(!Z[0])return o(M);if(Z.length>1){let re=!1,be=0;for(let he=0,Se=Z.length;he<Se;he++)q[he]=[];for(let he=0,Se=Z.length;he<Se;he++){const Ue=te[he];for(let Xe=0;Xe<Ue.length;Xe++){const et=Ue[Xe];let st=!0;for(let we=0;we<Z.length;we++)f(et.p,Z[we].p)&&(he!==we&&be++,st?(st=!1,q[we].push(et)):re=!0);st&&q[he].push(et)}}be>0&&re===!1&&(te=q)}let $;for(let re=0,be=Z.length;re<be;re++){D=Z[re].s,U.push(D),$=te[re];for(let he=0,Se=$.length;he<Se;he++)D.holes.push($[he].h)}return U}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window!="undefined"&&(window.__THREE__?w.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d)}}]);

//# sourceMappingURL=5889.1f3b28e0885e5d7422de.js.map