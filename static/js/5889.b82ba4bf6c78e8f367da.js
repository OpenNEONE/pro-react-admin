var e6=Object.defineProperty,t6=Object.defineProperties;var n6=Object.getOwnPropertyDescriptors;var B_=Object.getOwnPropertySymbols;var H4=Object.prototype.hasOwnProperty,W4=Object.prototype.propertyIsEnumerable;var wm=Math.pow,j4=(u,n,y)=>n in u?e6(u,n,{enumerable:!0,configurable:!0,writable:!0,value:y}):u[n]=y,jn=(u,n)=>{for(var y in n||(n={}))H4.call(n,y)&&j4(u,y,n[y]);if(B_)for(var y of B_(n))W4.call(n,y)&&j4(u,y,n[y]);return u},$o=(u,n)=>t6(u,n6(n));var mn=(u,n)=>{var y={};for(var S in u)H4.call(u,S)&&n.indexOf(S)<0&&(y[S]=u[S]);if(u!=null&&B_)for(var S of B_(u))n.indexOf(S)<0&&W4.call(u,S)&&(y[S]=u[S]);return y};var rs=(u,n,y)=>new Promise((S,d)=>{var m=H=>{try{E(y.next(H))}catch(te){d(te)}},s=H=>{try{E(y.throw(H))}catch(te){d(te)}},E=H=>H.done?S(H.value):Promise.resolve(H.value).then(m,s);E((y=y.apply(u,n)).next())});(self.webpackChunkpro_react_admin=self.webpackChunkpro_react_admin||[]).push([[5889],{51171:function(u,n,y){"use strict";y.r(n),y.d(n,{AccumulativeShadows:function(){return vS},AdaptiveDpr:function(){return v5},AdaptiveEvents:function(){return _5},ArcballControls:function(){return Te},AsciiRenderer:function(){return PE},BBAnchor:function(){return IB},Backdrop:function(){return lR},BakeShadows:function(){return y5},Billboard:function(){return k3},Bounds:function(){return hS},Box:function(){return gI},Bvh:function(){return EB},CameraControls:function(){return Ei},CameraShake:function(){return jI},Capsule:function(){return FI},CatmullRomLine:function(){return N3},Caustics:function(){return dR},Center:function(){return Hb},Circle:function(){return mI},Clone:function(){return hm},Cloud:function(){return LR},CloudInstance:function(){return tx},Clouds:function(){return FS},ComputedAttribute:function(){return uE},Cone:function(){return yI},ContactShadows:function(){return AS},CubeCamera:function(){return f2},CubicBezierLine:function(){return U3},CurveModifier:function(){return WB},CycleRaycast:function(){return mt},Cylinder:function(){return AI},Decal:function(){return Zv},Detailed:function(){return g5},DeviceOrientationControls:function(){return GE},Dodecahedron:function(){return BI},Edges:function(){return Xf},Effects:function(){return kv},Environment:function(){return yS},EnvironmentCube:function(){return qb},EnvironmentMap:function(){return l_},EnvironmentPortal:function(){return mS},Example:function(){return PB},Extrude:function(){return II},FaceControls:function(){return Qh},FaceLandmarker:function(){return Vh},FaceLandmarkerDefaults:function(){return Gs},Facemesh:function(){return zs},FacemeshDatas:function(){return Cs},FacemeshEye:function(){return Cp},FacemeshEyeDefaults:function(){return Va},FirstPersonControls:function(){return Vr},Fisheye:function(){return w5},Float:function(){return HI},FlyControls:function(){return y2},GizmoHelper:function(){return J4},GizmoViewcube:function(){return rw},GizmoViewport:function(){return iw},Gltf:function(){return DE},GradientTexture:function(){return zv},GradientType:function(){return B0},Grid:function(){return sw},Html:function(){return ut},Hud:function(){return fM},Icosahedron:function(){return wI},Image:function(){return aE},Instance:function(){return r4},Instances:function(){return i4},IsObject:function(){return fl},KeyboardControls:function(){return R3},Lathe:function(){return RI},Lightformer:function(){return xR},Line:function(){return Nc},Loader:function(){return Kn},MapControls:function(){return M},MarchingCube:function(){return Yv},MarchingCubes:function(){return fE},MarchingPlane:function(){return Kv},Mask:function(){return C5},Merged:function(){return d5},MeshDiscardMaterial:function(){return uI},MeshDistortMaterial:function(){return XB},MeshPortalMaterial:function(){return I5},MeshReflectorMaterial:function(){return qB},MeshRefractionMaterial:function(){return lI},MeshTransmissionMaterial:function(){return pI},MeshWobbleMaterial:function(){return KB},MotionPathControls:function(){return Q4},Octahedron:function(){return TI},OrbitControls:function(){return I},OrthographicCamera:function(){return By},Outlines:function(){return gy},PerformanceMonitor:function(){return E5},PerspectiveCamera:function(){return kE},PivotControls:function(){return q5},Plane:function(){return _I},Point:function(){return a5},PointMaterial:function(){return dI},PointMaterialImpl:function(){return pS},PointerLockControls:function(){return ai},Points:function(){return l5},PointsBuffer:function(){return QS},Polyhedron:function(){return SI},PositionPoint:function(){return jS},PositionalAudio:function(){return tv},Preload:function(){return m5},PresentationControls:function(){return M3},QuadraticBezierLine:function(){return G3},RandomizedLight:function(){return _S},Reflector:function(){return fR},RenderCubeTexture:function(){return d4},RenderTexture:function(){return u4},Resize:function(){return zI},Ring:function(){return CI},RoundedBox:function(){return PI},Sampler:function(){return pE},ScreenQuad:function(){return kI},ScreenSpace:function(){return z3},Scroll:function(){return Bo},ScrollControls:function(){return lp},Segment:function(){return f5},SegmentObject:function(){return s4},Segments:function(){return h5},Select:function(){return P3},Shadow:function(){return cR},Shape:function(){return OI},Sky:function(){return SR},SoftShadows:function(){return fI},Sparkles:function(){return GR},Sphere:function(){return vI},SpotLight:function(){return bR},SpotLightShadow:function(){return ER},SpriteAnimator:function(){return LB},Stage:function(){return sR},Stars:function(){return BR},Stats:function(){return aT},StatsGl:function(){return cT},Svg:function(){return gE},Tetrahedron:function(){return MI},Text:function(){return q3},Text3D:function(){return Vf},Torus:function(){return bI},TorusKnot:function(){return xI},TrackballControls:function(){return Z},Trail:function(){return my},TransformControls:function(){return xn},Tube:function(){return EI},View:function(){return k5},Wireframe:function(){return i5},accumulativeContext:function(){return Zb},calcPosFromAngles:function(){return wS},calculateScaleFactor:function(){return _4},isWebGL2Available:function(){return Lv},meshBounds:function(){return A5},shaderMaterial:function(){return uc},useAnimations:function(){return xB},useAspect:function(){return uT},useBVH:function(){return _B},useBounds:function(){return fS},useBoxProjectedEnv:function(){return BB},useCamera:function(){return dT},useContextBridge:function(){return bB},useCubeCamera:function(){return h2},useCubeTexture:function(){return bM},useCursor:function(){return Pt},useDepthBuffer:function(){return pT},useDetectGPU:function(){return AT},useEnvironment:function(){return Kb},useFBO:function(){return Vl},useFBX:function(){return ab},useFaceControls:function(){return bm},useFaceLandmarker:function(){return Fy},useFont:function(){return x0},useGLTF:function(){return Hh},useGizmoContext:function(){return v2},useHelper:function(){return CC},useIntersect:function(){return nS},useKTX2:function(){return Ab},useKeyboardControls:function(){return HA},useMask:function(){return S5},useMatcapTexture:function(){return HR},useMotion:function(){return hM},useNormalTexture:function(){return QR},usePerformanceMonitor:function(){return b5},useProgress:function(){return zt},useScroll:function(){return rh},useSelect:function(){return L3},useSurfaceSampler:function(){return uu},useTexture:function(){return dc},useTrail:function(){return zd},useTrailTexture:function(){return DB},useVideoTexture:function(){return yi}});var S=y(87462),d=y(67294),m=y(20745),s=y(99477),E=y(66319);const H=new s.Vector3,te=new s.Vector3,ce=new s.Vector3;function J(i,t,r){const o=H.setFromMatrixPosition(i.matrixWorld);o.project(t);const l=r.width/2,p=r.height/2;return[o.x*l+l,-(o.y*p)+p]}function pe(i,t){const r=H.setFromMatrixPosition(i.matrixWorld),o=te.setFromMatrixPosition(t.matrixWorld),l=r.sub(o),p=t.getWorldDirection(ce);return l.angleTo(p)>Math.PI/2}function de(i,t,r,o){const l=H.setFromMatrixPosition(i.matrixWorld),p=l.clone();p.project(t),r.setFromCamera(p,t);const h=r.intersectObjects(o,!0);if(h.length){const f=h[0].distance;return l.distanceTo(r.ray.origin)<f}return!0}function bt(i,t){if(t instanceof s.OrthographicCamera)return t.zoom;if(t instanceof s.PerspectiveCamera){const r=H.setFromMatrixPosition(i.matrixWorld),o=te.setFromMatrixPosition(t.matrixWorld),l=t.fov*Math.PI/180,p=r.distanceTo(o);return 1/(2*Math.tan(l/2)*p)}else return 1}function nt(i,t,r){if(t instanceof s.PerspectiveCamera||t instanceof s.OrthographicCamera){const o=H.setFromMatrixPosition(i.matrixWorld),l=te.setFromMatrixPosition(t.matrixWorld),p=o.distanceTo(l),h=(r[1]-r[0])/(t.far-t.near),f=r[1]-h*t.far;return Math.round(h*p+f)}}const He=i=>Math.abs(i)<1e-10?0:i;function ot(i,t,r=""){let o="matrix3d(";for(let l=0;l!==16;l++)o+=He(t[l]*i.elements[l])+(l!==15?",":")");return r+o}const gt=(i=>t=>ot(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),St=(i=>(t,r)=>ot(t,i(r),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function vt(i){return i&&typeof i=="object"&&"current"in i}const ut=d.forwardRef((X,K)=>{var oe=X,{children:i,eps:t=.001,style:r,className:o,prepend:l,center:p,fullscreen:h,portal:f,distanceFactor:A,sprite:_=!1,transform:b=!1,occlude:T,onOcclude:B,castShadow:F,receiveShadow:P,material:L,geometry:O,zIndexRange:G=[16777271,0],calculatePosition:D=J,as:k="div",wrapperClass:N,pointerEvents:V="auto"}=oe,Q=mn(oe,["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"]);const{gl:ae,camera:ge,scene:ie,size:_e,raycaster:me,events:we,viewport:ke}=(0,E.z)(),[De]=d.useState(()=>document.createElement(k)),Ne=d.useRef(),Ge=d.useRef(null),Ye=d.useRef(0),Se=d.useRef([0,0]),xe=d.useRef(null),Ee=d.useRef(null),le=(f==null?void 0:f.current)||we.connected||ae.domElement.parentNode,ye=d.useRef(null),Be=d.useRef(!1),be=d.useMemo(()=>T&&T!=="blending"||Array.isArray(T)&&T.length&&vt(T[0]),[T]);d.useLayoutEffect(()=>{const pt=ae.domElement;T&&T==="blending"?(pt.style.zIndex=`${Math.floor(G[0]/2)}`,pt.style.position="absolute",pt.style.pointerEvents="none"):(pt.style.zIndex=null,pt.style.position=null,pt.style.pointerEvents=null)},[T]),d.useLayoutEffect(()=>{if(Ge.current){const pt=Ne.current=m.createRoot(De);if(ie.updateMatrixWorld(),b)De.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const cn=D(Ge.current,ge,_e);De.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${cn[0]}px,${cn[1]}px,0);transform-origin:0 0;`}return le&&(l?le.prepend(De):le.appendChild(De)),()=>{le&&le.removeChild(De),pt.unmount()}}},[le,b]),d.useLayoutEffect(()=>{N&&(De.className=N)},[N]);const je=d.useMemo(()=>b?{position:"absolute",top:0,left:0,width:_e.width,height:_e.height,transformStyle:"preserve-3d",pointerEvents:"none"}:jn(jn({position:"absolute",transform:p?"translate3d(-50%,-50%,0)":"none"},h&&{top:-_e.height/2,left:-_e.width/2,width:_e.width,height:_e.height}),r),[r,p,h,_e,b]),Et=d.useMemo(()=>({position:"absolute",pointerEvents:V}),[V]);d.useLayoutEffect(()=>{if(Be.current=!1,b){var pt;(pt=Ne.current)==null||pt.render(d.createElement("div",{ref:xe,style:je},d.createElement("div",{ref:Ee,style:Et},d.createElement("div",{ref:K,className:o,style:r,children:i}))))}else{var cn;(cn=Ne.current)==null||cn.render(d.createElement("div",{ref:K,style:je,className:o,children:i}))}});const Ft=d.useRef(!0);(0,E.A)(pt=>{if(Ge.current){ge.updateMatrixWorld(),Ge.current.updateWorldMatrix(!0,!1);const cn=b?Se.current:D(Ge.current,ge,_e);if(b||Math.abs(Ye.current-ge.zoom)>t||Math.abs(Se.current[0]-cn[0])>t||Math.abs(Se.current[1]-cn[1])>t){const Bt=pe(Ge.current,ge);let Ct=!1;be&&(Array.isArray(T)?Ct=T.map(pn=>pn.current):T!=="blending"&&(Ct=[ie]));const Ke=Ft.current;if(Ct){const pn=de(Ge.current,ge,me,Ct);Ft.current=pn&&!Bt}else Ft.current=!Bt;Ke!==Ft.current&&(B?B(!Ft.current):De.style.display=Ft.current?"block":"none");const Pe=Math.floor(G[0]/2),wt=T?be?[G[0],Pe]:[Pe-1,0]:G;if(De.style.zIndex=`${nt(Ge.current,ge,wt)}`,b){const[pn,un]=[_e.width/2,_e.height/2],Gt=ge.projectionMatrix.elements[5]*un,{isOrthographicCamera:kn,top:tr,left:xr,bottom:sr,right:bi}=ge,Mi=gt(ge.matrixWorldInverse),yr=kn?`scale(${Gt})translate(${He(-(bi+xr)/2)}px,${He((tr+sr)/2)}px)`:`translateZ(${Gt}px)`;let Or=Ge.current.matrixWorld;_&&(Or=ge.matrixWorldInverse.clone().transpose().copyPosition(Or).scale(Ge.current.scale),Or.elements[3]=Or.elements[7]=Or.elements[11]=0,Or.elements[15]=1),De.style.width=_e.width+"px",De.style.height=_e.height+"px",De.style.perspective=kn?"":`${Gt}px`,xe.current&&Ee.current&&(xe.current.style.transform=`${yr}${Mi}translate(${pn}px,${un}px)`,Ee.current.style.transform=St(Or,1/((A||10)/400)))}else{const pn=A===void 0?1:bt(Ge.current,ge)*A;De.style.transform=`translate3d(${cn[0]}px,${cn[1]}px,0) scale(${pn})`}Se.current=cn,Ye.current=ge.zoom}}if(!be&&ye.current&&!Be.current)if(b){if(xe.current){const cn=xe.current.children[0];if(cn!=null&&cn.clientWidth&&cn!=null&&cn.clientHeight){const{isOrthographicCamera:Bt}=ge;if(Bt||O)Q.scale&&(Array.isArray(Q.scale)?Q.scale instanceof s.Vector3?ye.current.scale.copy(Q.scale.clone().divideScalar(1)):ye.current.scale.set(1/Q.scale[0],1/Q.scale[1],1/Q.scale[2]):ye.current.scale.setScalar(1/Q.scale));else{const Ct=(A||10)/400,Ke=cn.clientWidth*Ct,Pe=cn.clientHeight*Ct;ye.current.scale.set(Ke,Pe,1)}Be.current=!0}}}else{const cn=De.children[0];if(cn!=null&&cn.clientWidth&&cn!=null&&cn.clientHeight){const Bt=1/ke.factor,Ct=cn.clientWidth*Bt,Ke=cn.clientHeight*Bt;ye.current.scale.set(Ct,Ke,1),Be.current=!0}ye.current.lookAt(pt.camera.position)}});const Tt=d.useMemo(()=>({vertexShader:b?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[b]);return d.createElement("group",(0,S.Z)({},Q,{ref:Ge}),T&&!be&&d.createElement("mesh",{castShadow:F,receiveShadow:P,ref:ye},O||d.createElement("planeGeometry",null),L||d.createElement("shaderMaterial",{side:s.DoubleSide,vertexShader:Tt.vertexShader,fragmentShader:Tt.fragmentShader})))});function mt({onChanged:i,portal:t,preventDefault:r=!0,scroll:o=!0,keyCode:l=9}){const p=d.useRef(0),h=(0,E.z)(_=>_.setEvents),f=(0,E.z)(_=>_.get),A=(0,E.z)(_=>_.gl);return d.useEffect(()=>{var _;let b=[],T;const B=f().events.filter,F=(_=t==null?void 0:t.current)!==null&&_!==void 0?_:A.domElement.parentNode,P=()=>F&&i&&i(b,Math.round(p.current)%b.length);h({filter:(k,N)=>{let V=[...k];(V.length!==b.length||!b.every(Q=>V.map(K=>K.object.uuid).includes(Q.object.uuid)))&&(p.current=0,b=V,P()),B&&(V=B(V,N));for(let Q=0;Q<Math.round(p.current)%V.length;Q++){const K=V.shift();V=[...V,K]}return V}});const L=k=>{var N,V;p.current=k(p.current),(N=f().events.handlers)==null||N.onPointerCancel(void 0),(V=f().events.handlers)==null||V.onPointerMove(T),P()},O=k=>{(k.keyCode||k.which===l)&&(r&&k.preventDefault(),b.length>1&&L(N=>N+1))},G=k=>{r&&k.preventDefault();let N=0;k||(k=window.event),k.wheelDelta?N=k.wheelDelta/120:k.detail&&(N=-k.detail/3),b.length>1&&L(V=>Math.abs(V-N))},D=k=>T=k;return document.addEventListener("pointermove",D,{passive:!0}),o&&document.addEventListener("wheel",G),l!==void 0&&document.addEventListener("keydown",O),()=>{h({filter:B}),l!==void 0&&document.removeEventListener("keydown",O),o&&document.removeEventListener("wheel",G),document.removeEventListener("pointermove",D)}},[A,f,h,r,o,l]),null}function Pt(i,t="pointer",r="auto",o=document.body){d.useEffect(()=>{if(i)return o.style.cursor=t,()=>void(o.style.cursor=r)},[i])}var Ot=y(14671);let Jt=0;const zt=(0,Ot.Z)(i=>(s.DefaultLoadingManager.onStart=(t,r,o)=>{i({active:!0,item:t,loaded:r,total:o,progress:(r-Jt)/(o-Jt)*100})},s.DefaultLoadingManager.onLoad=()=>{i({active:!1})},s.DefaultLoadingManager.onError=t=>i(r=>({errors:[...r.errors,t]})),s.DefaultLoadingManager.onProgress=(t,r,o)=>{r===o&&(Jt=o),i({active:!0,item:t,loaded:r,total:o,progress:(r-Jt)/(o-Jt)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),_n=i=>`Loading ${i.toFixed(2)}%`;function Kn({containerStyles:i,innerStyles:t,barStyles:r,dataStyles:o,dataInterpolation:l=_n,initialState:p=h=>h}){const{active:h,progress:f}=zt(),A=d.useRef(0),_=d.useRef(0),b=d.useRef(null),[T,B]=d.useState(p(h));d.useEffect(()=>{let P;return h!==T&&(P=setTimeout(()=>B(h),300)),()=>clearTimeout(P)},[T,h]);const F=d.useCallback(()=>{b.current&&(A.current+=(f-A.current)/2,(A.current>.95*f||f===100)&&(A.current=f),b.current.innerText=l(A.current),A.current<f&&(_.current=requestAnimationFrame(F)))},[l,f]);return d.useEffect(()=>(F(),()=>cancelAnimationFrame(_.current)),[F]),T?d.createElement("div",{style:jn($o(jn({},Cr.container),{opacity:h?1:0}),i)},d.createElement("div",null,d.createElement("div",{style:jn(jn({},Cr.inner),t)},d.createElement("div",{style:jn($o(jn({},Cr.bar),{transform:`scaleX(${f/100})`}),r)}),d.createElement("span",{ref:b,style:jn(jn({},Cr.data),o)})))):null}const Cr={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function zr(i){return function(t){i.forEach(function(r){typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var fr=zr;function Ir(i,t,r){return t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function Vi(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),r.push.apply(r,o)}return r}function vi(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vi(Object(r),!0).forEach(function(o){Ir(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}function hi(i,t){return hi=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},hi(i,t)}function os(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Vn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];var o=t[0],l=t[1],p=t[2],h=t[3];return o*h-l*p}function $t(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];var o=t[0],l=t[1],p=t[2],h=t[3],f=t[4],A=t[5],_=t[6],b=t[7],T=t[8];return o*f*T+l*A*_+p*h*b-p*f*_-l*h*T-o*A*b}function Fn(){for(var i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]}function gr(i,t,r){for(var o=i.clone().transpose(),l=[],p=o.elements.length,h=Math.sqrt(p),f=0;f<p;f++){var A=o.elements[f],_=Math.floor(f/h),b=f%h;_!==t-1&&b!==r-1&&l.push(A)}return $t.apply(void 0,l)}function Wr(i,t){for(var r=[],o=i.toArray(),l=t.toArray(),p=0;p<o.length;p++)r[p]=o[p]+l[p];return new s.Matrix3().fromArray(r)}var Li=Object.freeze({__proto__:null,determinant2:Vn,determinant3:$t,determinant4:Fn,getMinor:gr,matrixSum3:Wr});function Mn(i){if(Array.isArray(i))return i}function Tn(i,t){var r=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var o=[],l=!0,p=!1,h,f;try{for(r=r.call(i);!(l=(h=r.next()).done)&&(o.push(h.value),!(t&&o.length===t));l=!0);}catch(A){p=!0,f=A}finally{try{!l&&r.return!=null&&r.return()}finally{if(p)throw f}}return o}}function Ln(i,t){(t==null||t>i.length)&&(t=i.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=i[r];return o}function pr(i,t){if(i){if(typeof i=="string")return Ln(i,t);var r=Object.prototype.toString.call(i).slice(8,-1);if(r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set")return Array.from(i);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ln(i,t)}}function ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(i,t){return Mn(i)||Tn(i,t)||pr(i,t)||ni()}function ki(i){if(Array.isArray(i))return Ln(i)}function jo(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ri(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ro(i){return ki(i)||jo(i)||pr(i)||ri()}function Zi(i,t,r){return os()?Zi=Reflect.construct:Zi=function(l,p,h){var f=[null];f.push.apply(f,p);var A=Function.bind.apply(l,f),_=new A;return h&&hi(_,h.prototype),_},Zi.apply(null,arguments)}function Ja(i,t){var r=Ar(t[0],2),o=r[0],l=r[1],p=Ar(t[1],2),h=p[0],f=p[1],A=Ar(t[2],2),_=A[0],b=A[1],T=Ar(i,2),B=T[0],F=T[1],P=new s.Matrix4;return P.set(o,l,o*o+l*l,1,h,f,h*h+f*f,1,_,b,_*_+b*b,1,B,F,B*B+F*F,1),P.determinant()<=0}function As(i){var t=Ar(i[0],2),r=t[0],o=t[1],l=Ar(i[1],2),p=l[0],h=l[1],f=Ar(i[2],2),A=f[0],_=f[1];return $t(r,o,1,p,h,1,A,_,1)}function js(i){return As(i)===0}function Zs(i){return As(i)<0}function ua(i){var t=Ar(i[0],2),r=t[0],o=t[1],l=Ar(i[1],2),p=l[0],h=l[1],f=Ar(i[2],2),A=f[0],_=f[1];if(js(i))return null;var b=new s.Matrix4;b.set(1,1,1,1,r*r+o*o,r,o,1,p*p+h*h,p,h,1,A*A+_*_,A,_,1);var T=gr(b,1,1),B=gr(b,1,3),F=gr(b,1,2),P=gr(b,1,4),L=.5*(F/T),O=.5*(B/T),G=L*L+O*O+P/T;return{x:Math.abs(L)===0?0:L,y:Math.abs(O)===0?0:-O,r:Math.sqrt(G)}}function vs(i,t){var r=Array.isArray(t[0])?t[0]:t[0].toArray(),o=Ar(r,2),l=o[0],p=o[1],h=Array.isArray(t[1])?t[1]:t[1].toArray(),f=Ar(h,2),A=f[0],_=f[1],b=Array.isArray(t[2])?t[2]:t[2].toArray(),T=Ar(b,2),B=T[0],F=T[1],P=Ar(i,2),L=P[0],O=P[1];if(js(t))throw new Error("Collinear points don't form a triangle");var G=l-L,D=p-O,k=A-L,N=_-O,V=B-L,Q=F-O,K=$t(G,D,G*G+D*D,k,N,k*k+N*N,V,Q,V*V+Q*Q);return K===0?!0:Zs(t)?K<0:K>0}var ss=new s.Vector2,Xi=new s.Vector2;function $s(i){var t=i.map(function(_){return Array.isArray(_)?Zi(s.Vector2,ro(_)):_}),r=Ar(t,3),o=r[0],l=r[1],p=r[2];if(js(i))return!1;var h=ss.subVectors(l,o),f=Xi.subVectors(p,o),A=f.cross(h);return A>0}var da=Object.freeze({__proto__:null,isPointInTriangle:Ja,triangleDeterminant:As,arePointsCollinear:js,isTriangleClockwise:Zs,getCircumcircle:ua,isPointInCircumcircle:vs,doThreePointsMakeARight:$s});function Oi(i,t,r){return Math.max(t,Math.min(r,i))}function ao(i,t){return Oi(i-Math.floor(i/t)*t,0,t)}function Hs(i,t){var r=ao(t-i,Math.PI*2);return r>Math.PI&&(r-=Math.PI*2),r}function _r(i){return i/180*Math.PI}function ji(i){return i*180/Math.PI}function Rl(i,t){for(var r=t.radius,o=r===void 0?1:r,l=i.length/3,p=2/l,h=Math.PI*(3-2.2360679775),f=0;f<i.length;f+=3){var A=f*p-1+p/2,_=Math.sqrt(1-Math.pow(A,2)),b=f%l*h,T=Math.cos(b)*_,B=Math.sin(b)*_;i[f]=T*o,i[f+1]=A*o,i[f+2]=B*o}}function as(i,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(i.x-t.x)<r&&Math.abs(i.y-t.y)<r&&Math.abs(i.z-t.z)<r}function Ws(i,t){return i.x===t.x?typeof i.z!="undefined"&&i.y===t.y?i.z-t.z:i.y-t.y:i.x-t.x}function $i(i){for(var t=i.sort(Ws),r=[t[0],t[1]],o=2;o<t.length;o++)for(r.push(t[o]);r.length>2&&$s(ro(r.slice(-3)));)r.splice(r.length-2,1);for(var l=[t[t.length-1],t[t.length-2]],p=t.length-3;p>=0;p--)for(l.push(t[p]);l.length>2&&$s(ro(l.slice(-3)));)l.splice(l.length-2,1);l.splice(0,1),l.splice(l.length-1,1);var h=[].concat(r,l);return h}function ls(i,t,r){var o=Ar(t,2),l=o[0],p=o[1],h=Ar(r,2),f=h[0],A=h[1];return f+(i-l)*(A-f)/(p-l)}function Ca(i){return i*i*i*(i*(i*6-15)+10)}function lo(i,t,r){return i*(1-r)+t*r}function Fl(i,t,r){return(r-i)/(t-i)}function Do(i,t,r){var o=Math.sqrt(i*i+t*t+r*r);return[i/o,t/o,r/o]}function _l(i,t,r){var o=i*i,l=t*t,p=r*r,h=i*Math.sqrt(1-(l+p)/2+l*p/3),f=t*Math.sqrt(1-(p+o)/2+p*o/3),A=r*Math.sqrt(1-(o+l)/2+o*l/3);return[h,f,A]}function ea(i,t){var r=new s.Vector3().crossVectors(i,t),o=i.dot(t),l=new s.Matrix3().identity(),p=new s.Matrix3().set(0,-r.z,r.y,r.z,0,-r.x,-r.y,r.x,0),h=new s.Matrix3().multiplyMatrices(p,p).multiplyScalar(1/(1+o)),f=Wr(Wr(l,p),h);return f}function ta(i,t,r){var o=Math.asin(t),l=Math.atan2(i,-r);return[o,l]}function Ho(i,t){var r=Math.sin(i),o=Math.cos(i),l=Math.sin(t)*o,p=-Math.cos(t)*o;return[l,r,p]}function co(i,t){var r=Ar(t,2),o=r[0],l=r[1],p=ea(i.normal,new s.Vector3(0,1,0)),h=Fl(o.clone().applyMatrix3(p).y,l.clone().applyMatrix3(p).y,0);return new s.Vector3().lerpVectors(o,l,h)}function _s(i,t){var r=t.normal.dot(i);return r}function Co(i,t){var r=Ar(i,3),o=r[0],l=r[1],p=r[2],h=Ar(t,2),f=h[0],A=h[1];return p*f*A+l*f+o}function qa(i,t){var r=Ar(t,2),o=r[0],l=r[1],p=o*l,h=i/p,f=i-p*h,A=f/o,_=f%o;return[_,A,h]}function Ol(i,t){return i[0]+t[0]*i[1]}function Sa(i,t){var r=i%t,o=Math.floor(i/t);return[r,o]}var El=Object.freeze({__proto__:null,clamp:Oi,repeat:ao,deltaAngle:Hs,degToRad:_r,radToDeg:ji,fibonacciOnSphere:Rl,vectorEquals:as,lexicographic:Ws,convexHull:$i,remap:ls,fade:Ca,lerp:lo,inverseLerp:Fl,normalize:Do,pointOnCubeToPointOnSphere:_l,rotateVectorOnVector:ea,pointToCoordinate:ta,coordinateToPoint:Ho,planeSegmentIntersection:co,pointToPlaneDistance:_s,getIndexFrom3D:Co,get3DFromIndex:qa,getIndexFrom2D:Ol,get2DFromIndex:Sa});function cs(){return[0,0]}function qc(){return[1,1]}function Zc(i,t){return[i[0]+t[0],i[1]+t[1]]}function rt(i,t){return[i[0]+t,i[1]+t]}function xt(i,t){return[i[0]-t[0],i[1]-t[1]]}function sn(i,t){return[i[0]-t,i[1]-t]}function zn(i,t){return[i[0]*t,i[1]*t]}function In(i,t){return i[0]*t[0]+i[1]*t[1]}function ur(i){return i[0]*i[0]+i[1]*i[1]}function Ue(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function ze(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1]))}var Ie=Object.freeze({__proto__:null,zero:cs,one:qc,add:Zc,addValue:rt,sub:xt,subValue:sn,scale:zn,dot:In,lengthSqr:ur,length:Ue,distance:ze});function it(){return[0,0,0]}function Le(){return[1,1,1]}function tt(i,t){return[i[0]+t[0],i[1]+t[1],i[2]+t[2]]}function dt(i,t){return[i[0]+t,i[1]+t,i[2]+t]}function _t(i,t){return[i[0]-t[0],i[1]-t[1],i[2]-t[2]]}function Me(i,t){return[i[0]-t,i[1]-t,i[2]-t]}function qe(i,t){return[i[0]*t,i[1]*t,i[2]*t]}function at(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]}function lt(i,t){var r=i[1]*t[2]-i[2]*t[1],o=i[2]*t[0]-i[0]*t[2],l=i[0]*t[1]-i[1]*t[0];return[r,o,l]}function Rt(i){return i[0]*i[0]+i[1]*i[1]+i[2]*i[2]}function Xt(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2])}function On(i,t){return Math.sqrt((i[0]-t[0])*(i[0]-t[0])+(i[1]-t[1])*(i[1]-t[1])+(i[2]-t[2])*(i[2]-t[2]))}var Yn=Object.freeze({__proto__:null,zero:it,one:Le,add:tt,addValue:dt,sub:_t,subValue:Me,scale:qe,dot:at,cross:lt,lengthSqr:Rt,length:Xt,distance:On});function vr(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"xyz",o={x:0,y:0,z:0},l=0;l<i.length;l+=t){o.x=i[l],o.y=i[l+1],o.z=i[l+2];var p=r.split(""),h=Ar(p,3),f=h[0],A=h[1],_=h[2];i[l]=o[f],i[l+1]=o[A],t===3&&(i[l+2]=o[_])}return i}function Gr(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return Math.random()},o=t+1,l=new Float32Array(i.length/t*o),p=0;p<i.length;p+=t){var h=p/t*o;l[h]=i[p],l[h+1]=i[p+1],t===2&&(l[h+2]=r(h)),t===3&&(l[h+2]=i[p+2],l[h+3]=r(h))}return l}function Yr(i,t,r,o){for(var l=0;l<i.length;l++)r[l]=lo(i[l],t[l],o)}function oi(i,t){for(var r=t.length,o=0;o<i.length;o+=r)i[o]+=t[0],i[o+1]+=t[1],i[o+2]+=t[2];return i}function Kr(i,t){for(var r={center:[0,0,0],q:new s.Quaternion().identity()},o=new s.Vector3,l=vi(vi({},r),t),p=l.q,h=l.center,f=0;f<i.length;f+=3)o.set(i[f]-h[0],i[f+1]-h[1],i[f+2]-h[2]),o.applyQuaternion(p),i[f]=o.x+h[0],i[f+1]=o.y+h[1],i[f+2]=o.z+h[1];return i}function Cn(i,t,r){for(var o=0,l=0;o<i.length;o+=t,l++)if(t===3){var p=r([i[o],i[o+1],i[o+2]],l);i.set(p,o)}else i.set(r([i[o],i[o+1]],l),o);return i}function Mr(i,t,r,o){for(var l=0,p=0;l<i.length;l+=t,p++)t===2?o=r(o,[i[l],i[l+1]],p):o=r(o,[i[l],i[l+1],i[l+2]],p);return o}function eo(i,t,r){for(var o={center:[0,0,0]},l=vi(vi({},o),r),p=l.center,h=l.distance,f=0;f<i.length;f+=t)i[f]=(i[f]-p[0])*(1+h)+p[0],i[f+1]=(i[f+1]-p[1])*(1+h)+p[1],t===3&&(i[f+2]=(i[f+2]-p[1])*(1+h)+p[2]);return i}function Po(i,t){return Mr(i,t,function(r,o){return t===3?r=tt(r,o):r=Zc(r,o),r},cs())}function es(i,t,r){var o=Int16Array.from({length:i.length/t},function(f,A){return A});o.sort(function(f,A){var _=i.slice(f*t,f*t+t),b=i.slice(A*t,A*t+t);return r(_,b)});for(var l=i.slice(0),p=0;p<o.length;p++){var h=o[p];i.set(l.slice(h*t,h*t+t),p*3)}return i}var wa=Object.freeze({__proto__:null,swizzle:vr,addAxis:Gr,lerp:Yr,translate:oi,rotate:Kr,map:Cn,reduce:Mr,expand:eo,center:Po,sort:es});function ha(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Di=function i(t,r,o){var l=this;ha(this,i),Ir(this,"dot2",function(p,h){return l.x*p+l.y*h}),Ir(this,"dot3",function(p,h,f){return l.x*p+l.y*h+l.z*f}),this.x=t,this.y=r,this.z=o},Ac=[new Di(1,1,0),new Di(-1,1,0),new Di(1,-1,0),new Di(-1,-1,0),new Di(1,0,1),new Di(-1,0,1),new Di(1,0,-1),new Di(-1,0,-1),new Di(0,1,1),new Di(0,-1,1),new Di(0,1,-1),new Di(0,-1,-1)],vc=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],ci=new Array(512),io=new Array(512),Bs=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var r=0;r<256;r++){var o;r&1?o=vc[r]^t&255:o=vc[r]^t>>8&255,ci[r]=ci[r+256]=o,io[r]=io[r+256]=Ac[o%12]}};Bs(0);var So=.5*(Math.sqrt(3)-1),fa=(3-Math.sqrt(3))/6,wo=1/3,ps=1/6,Ta=function(t,r){var o,l,p,h=(t+r)*So,f=Math.floor(t+h),A=Math.floor(r+h),_=(f+A)*fa,b=t-f+_,T=r-A+_,B,F;b>T?(B=1,F=0):(B=0,F=1);var P=b-B+fa,L=T-F+fa,O=b-1+2*fa,G=T-1+2*fa;f&=255,A&=255;var D=io[f+ci[A]],k=io[f+B+ci[A+F]],N=io[f+1+ci[A+1]],V=.5-b*b-T*T;V<0?o=0:(V*=V,o=V*V*D.dot2(b,T));var Q=.5-P*P-L*L;Q<0?l=0:(Q*=Q,l=Q*Q*k.dot2(P,L));var K=.5-O*O-G*G;return K<0?p=0:(K*=K,p=K*K*N.dot2(O,G)),70*(o+l+p)},_c=function(t,r,o){var l,p,h,f,A=(t+r+o)*wo,_=Math.floor(t+A),b=Math.floor(r+A),T=Math.floor(o+A),B=(_+b+T)*ps,F=t-_+B,P=r-b+B,L=o-T+B,O,G,D,k,N,V;F>=P?P>=L?(O=1,G=0,D=0,k=1,N=1,V=0):F>=L?(O=1,G=0,D=0,k=1,N=0,V=1):(O=0,G=0,D=1,k=1,N=0,V=1):P<L?(O=0,G=0,D=1,k=0,N=1,V=1):F<L?(O=0,G=1,D=0,k=0,N=1,V=1):(O=0,G=1,D=0,k=1,N=1,V=0);var Q=F-O+ps,K=P-G+ps,X=L-D+ps,oe=F-k+2*ps,ae=P-N+2*ps,ge=L-V+2*ps,ie=F-1+3*ps,_e=P-1+3*ps,me=L-1+3*ps;_&=255,b&=255,T&=255;var we=io[_+ci[b+ci[T]]],ke=io[_+O+ci[b+G+ci[T+D]]],De=io[_+k+ci[b+N+ci[T+V]]],Ne=io[_+1+ci[b+1+ci[T+1]]],Ge=.6-F*F-P*P-L*L;Ge<0?l=0:(Ge*=Ge,l=Ge*Ge*we.dot3(F,P,L));var Ye=.6-Q*Q-K*K-X*X;Ye<0?p=0:(Ye*=Ye,p=Ye*Ye*ke.dot3(Q,K,X));var Se=.6-oe*oe-ae*ae-ge*ge;Se<0?h=0:(Se*=Se,h=Se*Se*De.dot3(oe,ae,ge));var xe=.6-ie*ie-_e*_e-me*me;return xe<0?f=0:(xe*=xe,f=xe*xe*Ne.dot3(ie,_e,me)),32*(l+p+h+f)},Yl=function(t,r){var o=Math.floor(t),l=Math.floor(r);t=t-o,r=r-l,o=o&255,l=l&255;var p=io[o+ci[l]].dot2(t,r),h=io[o+ci[l+1]].dot2(t,r-1),f=io[o+1+ci[l]].dot2(t-1,r),A=io[o+1+ci[l+1]].dot2(t-1,r-1),_=Ca(t);return lo(lo(p,f,_),lo(h,A,_),Ca(r))},Op=function(t,r,o){var l=Math.floor(t),p=Math.floor(r),h=Math.floor(o);t=t-l,r=r-p,o=o-h,l=l&255,p=p&255,h=h&255;var f=io[l+ci[p+ci[h]]].dot3(t,r,o),A=io[l+ci[p+ci[h+1]]].dot3(t,r,o-1),_=io[l+ci[p+1+ci[h]]].dot3(t,r-1,o),b=io[l+ci[p+1+ci[h+1]]].dot3(t,r-1,o-1),T=io[l+1+ci[p+ci[h]]].dot3(t-1,r,o),B=io[l+1+ci[p+ci[h+1]]].dot3(t-1,r,o-1),F=io[l+1+ci[p+1+ci[h]]].dot3(t-1,r-1,o),P=io[l+1+ci[p+1+ci[h+1]]].dot3(t-1,r-1,o-1),L=Ca(t),O=Ca(r),G=Ca(o);return lo(lo(lo(f,T,L),lo(A,B,L),G),lo(lo(_,F,L),lo(b,P,L),G),O)},Kh=Object.freeze({__proto__:null,seed:Bs,simplex2:Ta,simplex3:_c,perlin2:Yl,perlin3:Op}),qd=Math.PI*2;function fg(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var t=i;i=0;for(var r=0;r<t.length;r++)i=(i+(r+1)*(t.charCodeAt(r)%96))%2147483647}return i===0&&(i=311),i}function Jh(i){var t=fg(i);return function(){var r=t*48271%2147483647;return t=r,r/2147483647}}var rd=function i(t){var r=this;ha(this,i),Ir(this,"seed",0),Ir(this,"init",function(o){r.seed=o,r.value=Jh(o)}),Ir(this,"value",Jh(this.seed)),this.init(t)},$c=new rd(Math.random()),Kl={radius:1,center:[0,0,0]};function Yi(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},Kl),t),l=o.radius,p=o.center,h=0;h<i.length;h+=3){var f=r.value(),A=r.value(),_=Math.acos(2*A-1),b=qd*f;i[h]=Math.sin(_)*Math.cos(b)*l+p[0],i[h+1]=Math.sin(_)*Math.sin(b)*l+p[1],i[h+2]=Math.cos(_)*l+p[2]}return i}function gg(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},Kl),t),l=o.radius,p=o.center,h=0;h<i.length;h+=3){var f=Math.pow(r.value(),.3333333333333333),A=r.value()*2-1,_=r.value()*2-1,b=r.value()*2-1,T=Math.sqrt(A*A+_*_+b*b);A=f*A/T,_=f*_/T,b=f*b/T,i[h]=A*l+p[0],i[h+1]=_*l+p[1],i[h+2]=b*l+p[2]}return i}var Jl={radius:1,center:[0,0]};function mg(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},Jl),t),l=o.radius,p=o.center,h=0;h<i.length;h+=2){var f=l*Math.sqrt(r.value()),A=r.value()*qd;i[h]=Math.sin(A)*f+p[0],i[h+1]=Math.cos(A)*f+p[1]}return i}function Dp(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},Jl),t),l=o.radius,p=o.center,h=0;h<i.length;h+=2){var f=r.value()*qd;i[h]=Math.sin(f)*l+p[0],i[h+1]=Math.cos(f)*l+p[1]}return i}var To={sides:1,center:[0,0]};function ho(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},To),t),l=o.sides,p=o.center,h=typeof l=="number"?l:l[0],f=typeof l=="number"?l:l[1],A=0;A<i.length;A+=2)i[A]=(r.value()-.5)*h+p[0],i[A+1]=(r.value()-.5)*f+p[1];return i}function _u(i,t){return i}function x1(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},qh),t),l=o.sides,p=o.center,h=typeof l=="number"?l:l[0],f=typeof l=="number"?l:l[1],A=typeof l=="number"?l:l[2],_=0;_<i.length;_+=3)i[_]=(r.value()-.5)*h+p[0],i[_+1]=(r.value()-.5)*f+p[1],i[_+2]=(r.value()-.5)*A+p[2];return i}var qh={sides:1,center:[0,0,0]};function Zh(i,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$c,o=vi(vi({},qh),t),l=o.sides,p=o.center,h=typeof l=="number"?l:l[0],f=typeof l=="number"?l:l[1],A=typeof l=="number"?l:l[2],_=0;_<i.length;_+=3)i[_]=(r.value()-.5)*h+p[0],i[_+1]=(r.value()-.5)*f+p[1],i[_+2]=(r.value()-.5)*A+p[2];return i}var yg=Object.freeze({__proto__:null,Generator:rd,onSphere:Yi,inSphere:gg,inCircle:mg,onCircle:Dp,inRect:ho,onRect:_u,inBox:x1,onBox:Zh,noise:Kh}),Ec=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return o/Math.atan(1/r)*Math.atan(Math.sin(2*Math.PI*t*l)/r)},Tm=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)},M1=function(t){return t},bc={in:function(t){return 1-Math.cos(t*Math.PI/2)},out:function(t){return Math.sin(t*Math.PI/2)},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},ep={in:function(t){return t*t*t},out:function(t){return 1-Math.pow(1-t,3)},inOut:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}},$h={in:function(t){return t*t*t*t*t},out:function(t){return 1-Math.pow(1-t,5)},inOut:function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}},Ag={in:function(t){return 1-Math.sqrt(1-Math.pow(t,2))},out:function(t){return Math.sqrt(1-Math.pow(t-1,2))},inOut:function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}},Bm={in:function(t){return t*t*t*t},out:function(t){return 1- --t*t*t*t},inOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}},C1={in:function(t){return t===0?0:Math.pow(2,10*t-10)},out:function(t){return t===1?1:1-Math.pow(2,-10*t)},inOut:function(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}};function fo(i,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Tm,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,A="velocity_"+t;if(i.__damp===void 0&&(i.__damp={}),i.__damp[A]===void 0&&(i.__damp[A]=0),Math.abs(i[t]-r)<=f)return i[t]=r,!1;o=Math.max(1e-4,o);var _=2/o,b=h(_*l),T=i[t]-r,B=r,F=p*o;T=Math.min(Math.max(T,-F),F),r=i[t]-T;var P=(i.__damp[A]+_*T)*l;i.__damp[A]=(i.__damp[A]-_*P)*b;var L=r+(T+P)*b;return B-i[t]>0==L>B&&(L=B,i.__damp[A]=(L-B)/l),i[t]=L,!0}var S1=function(t){return t&&t.isCamera},ef=function(t){return t&&t.isLight},id=new s.Vector3,bl=new s.Quaternion,od=new s.Quaternion,tp=new s.Matrix4,np=new s.Vector3;function tf(i,t,r,o,l,p,h){typeof t=="number"?id.setScalar(t):Array.isArray(t)?id.set(t[0],t[1],t[2]):id.copy(t);var f=i.parent;i.updateWorldMatrix(!0,!1),np.setFromMatrixPosition(i.matrixWorld),S1(i)||ef(i)?tp.lookAt(np,id,i.up):tp.lookAt(id,np,i.up),ad(i.quaternion,od.setFromRotationMatrix(tp),r,o,l,p,h),f&&(tp.extractRotation(f.matrixWorld),bl.setFromRotationMatrix(tp),ad(i.quaternion,od.copy(i.quaternion).premultiply(bl.invert()),r,o,l,p,h))}function rp(i,t,r,o,l,p,h,f){return fo(i,t,i[t]+Hs(i[t],r),o,l,p,h,f)}var Eu=new s.Vector2,Zd,Pp;function sd(i,t,r,o,l,p,h){return typeof t=="number"?Eu.setScalar(t):Array.isArray(t)?Eu.set(t[0],t[1]):Eu.copy(t),Zd=fo(i,"x",Eu.x,r,o,l,p,h),Pp=fo(i,"y",Eu.y,r,o,l,p,h),Zd||Pp}var ga=new s.Vector3,ql,ip,nf;function rf(i,t,r,o,l,p,h){return typeof t=="number"?ga.setScalar(t):Array.isArray(t)?ga.set(t[0],t[1],t[2]):ga.copy(t),ql=fo(i,"x",ga.x,r,o,l,p,h),ip=fo(i,"y",ga.y,r,o,l,p,h),nf=fo(i,"z",ga.z,r,o,l,p,h),ql||ip||nf}var Ga=new s.Vector4,op,$d,eh,Lp;function Zl(i,t,r,o,l,p,h){return typeof t=="number"?Ga.setScalar(t):Array.isArray(t)?Ga.set(t[0],t[1],t[2],t[3]):Ga.copy(t),op=fo(i,"x",Ga.x,r,o,l,p,h),$d=fo(i,"y",Ga.y,r,o,l,p,h),eh=fo(i,"z",Ga.z,r,o,l,p,h),Lp=fo(i,"w",Ga.w,r,o,l,p,h),op||$d||eh||Lp}var xc=new s.Euler,Dl,Is,of;function kp(i,t,r,o,l,p,h){return Array.isArray(t)?xc.set(t[0],t[1],t[2],t[3]):xc.copy(t),Dl=rp(i,"x",xc.x,r,o,l,p,h),Is=rp(i,"y",xc.y,r,o,l,p,h),of=rp(i,"z",xc.z,r,o,l,p,h),Dl||Is||of}var Pl=new s.Color,Ba,go,sp;function sf(i,t,r,o,l,p,h){return t instanceof s.Color?Pl.copy(t):Array.isArray(t)?Pl.setRGB(t[0],t[1],t[2]):Pl.set(t),Ba=fo(i,"r",Pl.r,r,o,l,p,h),go=fo(i,"g",Pl.g,r,o,l,p,h),sp=fo(i,"b",Pl.b,r,o,l,p,h),Ba||go||sp}var Za=new s.Quaternion,Wo=new s.Vector4,xl=new s.Vector4,$l=new s.Vector4,Mc,Cc,zp,vg;function ad(i,t,r,o,l,p,h){var f=i;Array.isArray(t)?Za.set(t[0],t[1],t[2],t[3]):Za.copy(t);var A=i.dot(Za)>0?1:-1;return Za.x*=A,Za.y*=A,Za.z*=A,Za.w*=A,Mc=fo(i,"x",Za.x,r,o,l,p,h),Cc=fo(i,"y",Za.y,r,o,l,p,h),zp=fo(i,"z",Za.z,r,o,l,p,h),vg=fo(i,"w",Za.w,r,o,l,p,h),Wo.set(i.x,i.y,i.z,i.w).normalize(),xl.set(f.__damp.velocity_x,f.__damp.velocity_y,f.__damp.velocity_z,f.__damp.velocity_w),$l.copy(Wo).multiplyScalar(xl.dot(Wo)/Wo.dot(Wo)),f.__damp.velocity_x-=$l.x,f.__damp.velocity_y-=$l.y,f.__damp.velocity_z-=$l.z,f.__damp.velocity_w-=$l.w,i.set(Wo.x,Wo.y,Wo.z,Wo.w),Mc||Cc||zp||vg}var bu=new s.Spherical,$a,el,vo;function ld(i,t,r,o,l,p,h){return Array.isArray(t)?bu.set(t[0],t[1],t[2]):bu.copy(t),$a=fo(i,"radius",bu.radius,r,o,l,p,h),el=rp(i,"phi",bu.phi,r,o,l,p,h),vo=rp(i,"theta",bu.theta,r,o,l,p,h),$a||el||vo}var ma=new s.Matrix4,_g=new s.Vector3,Ia=new s.Quaternion,fi=new s.Vector3,af,yn,pi;function Gp(i,t,r,o,l,p,h){var f=i;return f.__damp===void 0&&(f.__damp={position:new s.Vector3,rotation:new s.Quaternion,scale:new s.Vector3},i.decompose(f.__damp.position,f.__damp.rotation,f.__damp.scale)),Array.isArray(t)?ma.set.apply(ma,ro(t)):ma.copy(t),ma.decompose(_g,Ia,fi),af=rf(f.__damp.position,_g,r,o,l,p,h),yn=ad(f.__damp.rotation,Ia,r,o,l,p,h),pi=rf(f.__damp.scale,fi,r,o,l,p,h),i.compose(f.__damp.position,f.__damp.rotation,f.__damp.scale),af||yn||pi}var ap=Object.freeze({__proto__:null,rsqw:Ec,exp:Tm,linear:M1,sine:bc,cubic:ep,quint:$h,circ:Ag,quart:Bm,expo:C1,damp:fo,dampLookAt:tf,dampAngle:rp,damp2:sd,damp3:rf,damp4:Zl,dampE:kp,dampC:sf,dampQ:ad,dampS:ld,dampM:Gp});function th(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&hi(i,t)}function Ll(i){return Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ll(i)}function cd(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Eg(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cd(i)}function xu(i){var t=os();return function(){var o=Ll(i),l;if(t){var p=Ll(this).constructor;l=Reflect.construct(o,arguments,p)}else l=o.apply(this,arguments);return Eg(this,l)}}var pd=function(i){th(r,i);var t=xu(r);function r(){var o,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.2,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:16;ha(this,r),o=t.call(this);for(var A=l/2-h,_=p/2-h,b=h/l,T=(l-h)/l,B=h/p,F=(p-h)/p,P=[A,_,0,-A,_,0,-A,-_,0,A,-_,0],L=[T,F,b,F,b,B,T,B],O=[3*(f+1)+3,3*(f+1)+4,f+4,f+5,2*(f+1)+4,2,1,2*(f+1)+3,3,4*(f+1)+3,4,0],G=[O[0],O[1],O[2],O[0],O[2],O[3],O[4],O[5],O[6],O[4],O[6],O[7],O[8],O[9],O[10],O[8],O[10],O[11]],D,k,N,V,Q,K,X,oe,ae=0;ae<4;ae++){V=ae<1||ae>2?A:-A,Q=ae<2?_:-_,K=ae<1||ae>2?T:b,X=ae<2?F:B;for(var ge=0;ge<=f;ge++)D=Math.PI/2*(ae+ge/f),k=Math.cos(D),N=Math.sin(D),P.push(V+h*k,Q+h*N,0),L.push(K+b*k,X+B*N),ge<f&&(oe=(f+1)*ae+ge+4,G.push(ae,oe,oe+1))}return o.setIndex(new s.BufferAttribute(new Uint32Array(G),1)),o.setAttribute("position",new s.BufferAttribute(new Float32Array(P),3)),o.setAttribute("uv",new s.BufferAttribute(new Float32Array(L),2)),o}return r}(s.BufferGeometry);function Sc(i){for(var t=[],r=0;r<i.attributes.position.array.length/3;r++){var o=i.attributes.position.array[r*3+0],l=i.attributes.position.array[r*3+1],p=i.attributes.position.array[r*3+2];t.push(Math.atan2(o,p)/Math.PI*.5+.5,l/Math.PI*.5+.5)}return i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new s.Float32BufferAttribute(t,2)),i.attributes.uv.needsUpdate=!0,i}function tl(i){for(var t=[],r=[],o=0;o<i.attributes.position.array.length/3;o++){var l=i.attributes.position.array[o*3+0],p=i.attributes.position.array[o*3+1],h=i.attributes.position.array[o*3+2];r.push(new s.Vector3(l,p,h))}for(var f=r.map(ud),A=0;A<f.length/3;A++)for(var _=new s.Triangle(r[A*3+0],r[A*3+1],r[A*3+2]),b=_.getNormal(new s.Vector3),T=0;T<3;T++){var B=f[A*3+T];if(B.theta===0&&(B.phi===0||B.phi===Math.PI)){var F=B.phi===0?A*3+1:A*3+0;B={r:B.r,phi:B.phi,theta:f[F].theta}}B.theta===Math.PI&&ud(b).theta<Math.PI/2&&(B.theta=-Math.PI);var P=dd(B);t.push(1-P.x,1-P.y)}return i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new s.Float32BufferAttribute(t,2)),i.attributes.uv.needsUpdate=!0,i}function ud(i){var t=Math.sqrt(i.x*i.x+i.z*i.z+i.y*i.y);return{r:t,phi:Math.acos(i.y/t),theta:Math.atan2(i.z,i.x)}}function dd(i){return{y:i.phi/Math.PI,x:(i.theta+Math.PI)/(2*Math.PI)}}function wc(i){i.computeBoundingBox();var t=i.boundingBox.getSize(new s.Vector3),r=Math.min(t.x,t.y,t.z),o=new s.BoxGeometry(r,r,r),l=new s.Mesh(o);l.rotation.set(0,0,0),l.updateWorldMatrix(!0,!1);var p=l.matrix.clone().invert(),h=new s.Box3(new s.Vector3(-r/2,-r/2,-r/2),new s.Vector3(r/2,r/2,r/2));return bg(i,p,h,r),i.attributes.uv.needsUpdate=!0,i}function bg(i,t,r,o){var l=[];l.length=2*i.attributes.position.array.length/3;var p=function(ye,Be,be){ye.applyMatrix4(t),Be.applyMatrix4(t),be.applyMatrix4(t);var je=new s.Vector3;je.crossVectors(Be.clone().sub(ye),Be.clone().sub(be)).normalize(),je.x=Math.abs(je.x),je.y=Math.abs(je.y),je.z=Math.abs(je.z);var Et=new s.Vector2,Ft=new s.Vector2,Tt=new s.Vector2;return je.y>je.x&&je.y>je.z?(Et.x=(ye.x-r.min.x)/o,Et.y=(r.max.z-ye.z)/o,Ft.x=(Be.x-r.min.x)/o,Ft.y=(r.max.z-Be.z)/o,Tt.x=(be.x-r.min.x)/o,Tt.y=(r.max.z-be.z)/o):je.x>je.y&&je.x>je.z?(Et.x=(ye.z-r.min.z)/o,Et.y=(ye.y-r.min.y)/o,Ft.x=(Be.z-r.min.z)/o,Ft.y=(Be.y-r.min.y)/o,Tt.x=(be.z-r.min.z)/o,Tt.y=(be.y-r.min.y)/o):je.z>je.y&&je.z>je.x&&(Et.x=(ye.x-r.min.x)/o,Et.y=(ye.y-r.min.y)/o,Ft.x=(Be.x-r.min.x)/o,Ft.y=(Be.y-r.min.y)/o,Tt.x=(be.x-r.min.x)/o,Tt.y=(be.y-r.min.y)/o),{uv0:Et,uv1:Ft,uv2:Tt}};if(i.index)for(var h=0;h<i.index.array.length;h+=3){var f=i.index.array[h],A=i.index.array[h+1],_=i.index.array[h+2],b=i.attributes.position.array[3*f],T=i.attributes.position.array[3*f+1],B=i.attributes.position.array[3*f+2],F=i.attributes.position.array[3*A],P=i.attributes.position.array[3*A+1],L=i.attributes.position.array[3*A+2],O=i.attributes.position.array[3*_],G=i.attributes.position.array[3*_+1],D=i.attributes.position.array[3*_+2],k=new s.Vector3(b,T,B),N=new s.Vector3(F,P,L),V=new s.Vector3(O,G,D),Q=p(k,N,V);l[2*f]=Q.uv0.x,l[2*f+1]=Q.uv0.y,l[2*A]=Q.uv1.x,l[2*A+1]=Q.uv1.y,l[2*_]=Q.uv2.x,l[2*_+1]=Q.uv2.y}else for(var K=0;K<i.attributes.position.array.length;K+=9){var X=i.attributes.position.array[K],oe=i.attributes.position.array[K+1],ae=i.attributes.position.array[K+2],ge=i.attributes.position.array[K+3],ie=i.attributes.position.array[K+4],_e=i.attributes.position.array[K+5],me=i.attributes.position.array[K+6],we=i.attributes.position.array[K+7],ke=i.attributes.position.array[K+8],De=new s.Vector3(X,oe,ae),Ne=new s.Vector3(ge,ie,_e),Ge=new s.Vector3(me,we,ke),Ye=p(De,Ne,Ge),Se=K/3,xe=Se+1,Ee=Se+2;l[2*Se]=Ye.uv0.x,l[2*Se+1]=Ye.uv0.y,l[2*xe]=Ye.uv1.x,l[2*xe+1]=Ye.uv1.y,l[2*Ee]=Ye.uv2.x,l[2*Ee+1]=Ye.uv2.y}i.attributes.uv&&delete i.attributes.uv,i.setAttribute("uv",new s.Float32BufferAttribute(l,2))}var nh=Object.freeze({__proto__:null,RoundedPlaneGeometry:pd,applyCylindricalUV:Sc,applySphereUV:tl,applyBoxUV:wc});function Im(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=[],o=0,l=0;o<i.length;o+=t,l++)t===3?r[l]=new s.Vector3(i[o],i[o+1],i[o+2]):r[l]=new s.Vector2(i[o],i[o+1]);return r}function nl(i){for(var t=i.length,r=i[0].hasOwnProperty("z")?3:2,o=new Float32Array(t*r),l=0;l<t;l++){var p=l*r;o[p]=i[l].x,o[p+1]=i[l].y,r===3&&(o[p+2]=i[l].z)}return o}var _o=Object.freeze({__proto__:null,bufferToVectors:Im,vectorsToBuffer:nl});const Up=d.createContext(null);function rh(){return d.useContext(Up)}function lp({eps:i=1e-5,enabled:t=!0,infinite:r,horizontal:o,pages:l=1,distance:p=1,damping:h=.25,maxSpeed:f=1/0,style:A={},children:_}){const{get:b,setEvents:T,gl:B,size:F,invalidate:P,events:L}=(0,E.z)(),[O]=d.useState(()=>document.createElement("div")),[G]=d.useState(()=>document.createElement("div")),[D]=d.useState(()=>document.createElement("div")),k=B.domElement.parentNode,N=d.useRef(0),V=d.useMemo(()=>({el:O,eps:i,fill:G,fixed:D,horizontal:o,damping:h,offset:0,delta:0,scroll:N,pages:l,range(X,oe,ae=0){const ge=X-ae,ie=ge+oe+ae*2;return this.offset<ge?0:this.offset>ie?1:(this.offset-ge)/(ie-ge)},curve(X,oe,ae=0){return Math.sin(this.range(X,oe,ae)*Math.PI)},visible(X,oe,ae=0){const ge=X-ae,ie=ge+oe+ae*2;return this.offset>=ge&&this.offset<=ie}}),[i,h,o,l]);d.useEffect(()=>{O.style.position="absolute",O.style.width="100%",O.style.height="100%",O.style[o?"overflowX":"overflowY"]="auto",O.style[o?"overflowY":"overflowX"]="hidden",O.style.top="0px",O.style.left="0px";for(const oe in A)O.style[oe]=A[oe];D.style.position="sticky",D.style.top="0px",D.style.left="0px",D.style.width="100%",D.style.height="100%",D.style.overflow="hidden",O.appendChild(D),G.style.height=o?"100%":`${l*p*100}%`,G.style.width=o?`${l*p*100}%`:"100%",G.style.pointerEvents="none",O.appendChild(G),k.appendChild(O),O[o?"scrollLeft":"scrollTop"]=1;const K=L.connected||B.domElement;requestAnimationFrame(()=>L.connect==null?void 0:L.connect(O));const X=b().events.compute;return T({compute(oe,ae){const{left:ge,top:ie}=k.getBoundingClientRect(),_e=oe.clientX-ge,me=oe.clientY-ie;ae.pointer.set(_e/ae.size.width*2-1,-(me/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),()=>{k.removeChild(O),T({compute:X}),L.connect==null||L.connect(K)}},[l,p,o,O,G,D,k]),d.useEffect(()=>{if(L.connected===O){const K=F[o?"width":"height"],X=O[o?"scrollWidth":"scrollHeight"],oe=X-K;let ae=0,ge=!0,ie=!0;const _e=()=>{if(!(!t||ie)&&(P(),ae=O[o?"scrollLeft":"scrollTop"],N.current=ae/oe,r)){if(!ge){if(ae>=oe){const we=1-V.offset;O[o?"scrollLeft":"scrollTop"]=1,N.current=V.offset=-we,ge=!0}else if(ae<=0){const we=1+V.offset;O[o?"scrollLeft":"scrollTop"]=X,N.current=V.offset=we,ge=!0}}ge&&setTimeout(()=>ge=!1,40)}};O.addEventListener("scroll",_e,{passive:!0}),requestAnimationFrame(()=>ie=!1);const me=we=>O.scrollLeft+=we.deltaY/2;return o&&O.addEventListener("wheel",me,{passive:!0}),()=>{O.removeEventListener("scroll",_e),o&&O.removeEventListener("wheel",me)}}},[O,L,F,r,V,P,o,t]);let Q=0;return(0,E.A)((K,X)=>{Q=V.offset,ap.damp(V,"offset",N.current,h,X,f,void 0,i),ap.damp(V,"delta",Math.abs(Q-V.offset),h,X,f,void 0,i),V.delta>i&&P()}),d.createElement(Up.Provider,{value:V},_)}const hd=d.forwardRef(({children:i},t)=>{const r=d.useRef(null),o=rh(),{width:l,height:p}=(0,E.z)(h=>h.viewport);return(0,E.A)(()=>{r.current.position.x=o.horizontal?-l*(o.pages-1)*o.offset:0,r.current.position.y=o.horizontal?0:p*(o.pages-1)*o.offset}),d.createElement("group",{ref:fr([t,r])},i)}),kl=d.forwardRef((l,o)=>{var p=l,{children:i,style:t}=p,r=mn(p,["children","style"]);const h=rh(),f=d.useRef(null),{width:A,height:_}=(0,E.z)(B=>B.size),b=d.useContext(E.f),T=d.useMemo(()=>m.createRoot(h.fixed),[h.fixed]);return(0,E.A)(()=>{h.delta>h.eps&&(f.current.style.transform=`translate3d(${h.horizontal?-A*(h.pages-1)*h.offset:0}px,${h.horizontal?0:_*(h.pages-1)*-h.offset}px,0)`)}),T.render(d.createElement("div",(0,S.Z)({ref:fr([o,f]),style:$o(jn({},t),{position:"absolute",top:0,left:0,willChange:"transform"})},r),d.createElement(Up.Provider,{value:h},d.createElement(E.f.Provider,{value:b},i)))),null}),Bo=d.forwardRef((o,r)=>{var l=o,{html:i}=l,t=mn(l,["html"]);const p=i?kl:hd;return d.createElement(p,(0,S.Z)({ref:r},t))});var Qr=y(25108);let Rs=Ra();const dr=i=>Qs(i,Rs);let Tc=Ra();dr.write=i=>Qs(i,Tc);let cp=Ra();dr.onStart=i=>Qs(i,cp);let Bc=Ra();dr.onFrame=i=>Qs(i,Bc);let lf=Ra();dr.onFinish=i=>Qs(i,lf);let us=[];dr.setTimeout=(i,t)=>{let r=dr.now()+t,o=()=>{let p=us.findIndex(h=>h.cancel==o);~p&&us.splice(p,1),Vs-=~p?1:0},l={time:r,handler:i,cancel:o};return us.splice(ya(r),0,l),Vs+=1,Ml(),l};let ya=i=>~(~us.findIndex(t=>t.time>i)||~us.length);dr.cancel=i=>{cp.delete(i),Bc.delete(i),lf.delete(i),Rs.delete(i),Tc.delete(i)},dr.sync=i=>{Es=!0,dr.batchedUpdates(i),Es=!1},dr.throttle=i=>{let t;function r(){try{i(...t)}finally{t=null}}function o(...l){t=l,dr.onStart(r)}return o.handler=i,o.cancel=()=>{cp.delete(r),t=null},o};let Qe=typeof window!="undefined"?window.requestAnimationFrame:()=>{};dr.use=i=>Qe=i,dr.now=typeof performance!="undefined"?()=>performance.now():Date.now,dr.batchedUpdates=i=>i(),dr.catch=Qr.error,dr.frameLoop="always",dr.advance=()=>{dr.frameLoop!=="demand"?Qr.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):jp()};let rl=-1,Vs=0,Es=!1;function Qs(i,t){Es?(t.delete(i),i(0)):(t.add(i),Ml())}function Ml(){rl<0&&(rl=0,dr.frameLoop!=="demand"&&Qe(Np))}function pp(){rl=-1}function Np(){~rl&&(Qe(Np),dr.batchedUpdates(jp))}function jp(){let i=rl;rl=dr.now();let t=ya(rl);if(t&&(Ic(us.splice(0,t),r=>r.handler()),Vs-=t),!Vs){pp();return}cp.flush(),Rs.flush(i?Math.min(64,rl-i):16.667),Bc.flush(),Tc.flush(),lf.flush()}function Ra(){let i=new Set,t=i;return{add(r){Vs+=t==i&&!i.has(r)?1:0,i.add(r)},delete(r){return Vs-=t==i&&i.has(r)?1:0,i.delete(r)},flush(r){t.size&&(i=new Set,Vs-=t.size,Ic(t,o=>o(r)&&i.add(o)),Vs+=i.size,t=i)}}}function Ic(i,t){i.forEach(r=>{try{t(r)}catch(o){dr.catch(o)}})}const Hp={count(){return Vs},isRunning(){return rl>=0},clear(){rl=-1,us=[],cp=Ra(),Rs=Ra(),Bc=Ra(),Tc=Ra(),lf=Ra(),Vs=0}};var up=y(25108);function dp(){}const Wp=(i,t,r)=>Object.defineProperty(i,t,{value:r,writable:!0,configurable:!0}),Hn={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function na(i,t){if(Hn.arr(i)){if(!Hn.arr(t)||i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}return i===t}const Hi=(i,t)=>i.forEach(t);function ec(i,t,r){if(Hn.arr(i)){for(let o=0;o<i.length;o++)t.call(r,i[o],`${o}`);return}for(const o in i)i.hasOwnProperty(o)&&t.call(r,i[o],o)}const Fs=i=>Hn.und(i)?[]:Hn.arr(i)?i:[i];function Vp(i,t){if(i.size){const r=Array.from(i);i.clear(),Hi(r,t)}}const Fa=(i,...t)=>Vp(i,r=>r(...t)),zl=()=>typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let fd,Mu,Oa=null,ih=!1,gd=dp;const oh=i=>{i.to&&(Mu=i.to),i.now&&(dr.now=i.now),i.colors!==void 0&&(Oa=i.colors),i.skipAnimation!=null&&(ih=i.skipAnimation),i.createStringInterpolator&&(fd=i.createStringInterpolator),i.requestAnimationFrame&&dr.use(i.requestAnimationFrame),i.batchedUpdates&&(dr.batchedUpdates=i.batchedUpdates),i.willAdvance&&(gd=i.willAdvance),i.frameLoop&&(dr.frameLoop=i.frameLoop)};var Ua=Object.freeze({__proto__:null,get createStringInterpolator(){return fd},get to(){return Mu},get colors(){return Oa},get skipAnimation(){return ih},get willAdvance(){return gd},assign:oh});const ii=new Set;let ra=[],il=[],sh=0;const md={get idle(){return!ii.size&&!ra.length},start(i){sh>i.priority?(ii.add(i),dr.onStart(tc)):(ah(i),dr(cf))},advance:cf,sort(i){if(sh)dr.onFrame(()=>md.sort(i));else{const t=ra.indexOf(i);~t&&(ra.splice(t,1),ol(i))}},clear(){ra=[],ii.clear()}};function tc(){ii.forEach(ah),ii.clear(),dr(cf)}function ah(i){ra.includes(i)||ol(i)}function ol(i){ra.splice(pf(ra,t=>t.priority>i.priority),0,i)}function cf(i){const t=il;for(let r=0;r<ra.length;r++){const o=ra[r];sh=o.priority,o.idle||(gd(o),o.advance(i),o.idle||t.push(o))}return sh=0,il=ra,il.length=0,ra=t,ra.length>0}function pf(i,t){const r=i.findIndex(t);return r<0?i.length:r}const Cu=(i,t,r)=>Math.min(Math.max(r,i),t),uf={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Gl="[-+]?\\d*\\.?\\d+",yd=Gl+"%";function Rc(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}const Fc=new RegExp("rgb"+Rc(Gl,Gl,Gl)),lh=new RegExp("rgba"+Rc(Gl,Gl,Gl,Gl)),sl=new RegExp("hsl"+Rc(Gl,yd,yd)),Rm=new RegExp("hsla"+Rc(Gl,yd,yd,Gl)),ch=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ad=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ph=/^#([0-9a-fA-F]{6})$/,uh=/^#([0-9a-fA-F]{8})$/;function Fm(i){let t;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(t=ph.exec(i))?parseInt(t[1]+"ff",16)>>>0:Oa&&Oa[i]!==void 0?Oa[i]:(t=Fc.exec(i))?(Da(t[1])<<24|Da(t[2])<<16|Da(t[3])<<8|255)>>>0:(t=lh.exec(i))?(Da(t[1])<<24|Da(t[2])<<16|Da(t[3])<<8|Pa(t[4]))>>>0:(t=ch.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=uh.exec(i))?parseInt(t[1],16)>>>0:(t=Ad.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=sl.exec(i))?($r(Oc(t[1]),Io(t[2]),Io(t[3]))|255)>>>0:(t=Rm.exec(i))?($r(Oc(t[1]),Io(t[2]),Io(t[3]))|Pa(t[4]))>>>0:null}function Su(i,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?i+(t-i)*6*r:r<1/2?t:r<2/3?i+(t-i)*(2/3-r)*6:i}function $r(i,t,r){const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o,p=Su(l,o,i+1/3),h=Su(l,o,i),f=Su(l,o,i-1/3);return Math.round(p*255)<<24|Math.round(h*255)<<16|Math.round(f*255)<<8}function Da(i){const t=parseInt(i,10);return t<0?0:t>255?255:t}function Oc(i){return(parseFloat(i)%360+360)%360/360}function Pa(i){const t=parseFloat(i);return t<0?0:t>1?255:Math.round(t*255)}function Io(i){const t=parseFloat(i);return t<0?0:t>100?1:t/100}function Qp(i){let t=Fm(i);if(t===null)return i;t=t||0;let r=(t&4278190080)>>>24,o=(t&16711680)>>>16,l=(t&65280)>>>8,p=(t&255)/255;return`rgba(${r}, ${o}, ${l}, ${p})`}const nc=(i,t,r)=>{if(Hn.fun(i))return i;if(Hn.arr(i))return nc({range:i,output:t,extrapolate:r});if(Hn.str(i.output[0]))return fd(i);const o=i,l=o.output,p=o.range||[0,1],h=o.extrapolateLeft||o.extrapolate||"extend",f=o.extrapolateRight||o.extrapolate||"extend",A=o.easing||(_=>_);return _=>{const b=df(_,p);return xg(_,p[b],p[b+1],l[b],l[b+1],A,h,f,o.map)}};function xg(i,t,r,o,l,p,h,f,A){let _=A?A(i):i;if(_<t){if(h==="identity")return _;h==="clamp"&&(_=t)}if(_>r){if(f==="identity")return _;f==="clamp"&&(_=r)}return o===l?o:t===r?i<=t?o:l:(t===-1/0?_=-_:r===1/0?_=_-t:_=(_-t)/(r-t),_=p(_),o===-1/0?_=-_:l===1/0?_=_+o:_=_*(l-o)+o,_)}function df(i,t){for(var r=1;r<t.length-1&&!(t[r]>=i);++r);return r-1}const hf=(i,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const o=r*i,l=t==="end"?Math.floor(o):Math.ceil(o);return Cu(0,1,l/i)},Xp=1.70158,Yp=Xp*1.525,Aa=Xp+1,Mg=2*Math.PI/3,ia=2*Math.PI/4.5,Kp=i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,al={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>1-(1-i)*(1-i),easeInOutQuad:i=>i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,easeInCubic:i=>i*i*i,easeOutCubic:i=>1-Math.pow(1-i,3),easeInOutCubic:i=>i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,easeInQuart:i=>i*i*i*i,easeOutQuart:i=>1-Math.pow(1-i,4),easeInOutQuart:i=>i<.5?8*i*i*i*i:1-Math.pow(-2*i+2,4)/2,easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>1-Math.pow(1-i,5),easeInOutQuint:i=>i<.5?16*i*i*i*i*i:1-Math.pow(-2*i+2,5)/2,easeInSine:i=>1-Math.cos(i*Math.PI/2),easeOutSine:i=>Math.sin(i*Math.PI/2),easeInOutSine:i=>-(Math.cos(Math.PI*i)-1)/2,easeInExpo:i=>i===0?0:Math.pow(2,10*i-10),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,easeInCirc:i=>1-Math.sqrt(1-Math.pow(i,2)),easeOutCirc:i=>Math.sqrt(1-Math.pow(i-1,2)),easeInOutCirc:i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,easeInBack:i=>Aa*i*i*i-Xp*i*i,easeOutBack:i=>1+Aa*Math.pow(i-1,3)+Xp*Math.pow(i-1,2),easeInOutBack:i=>i<.5?Math.pow(2*i,2)*((Yp+1)*2*i-Yp)/2:(Math.pow(2*i-2,2)*((Yp+1)*(i*2-2)+Yp)+2)/2,easeInElastic:i=>i===0?0:i===1?1:-Math.pow(2,10*i-10)*Math.sin((i*10-10.75)*Mg),easeOutElastic:i=>i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i*10-.75)*Mg)+1,easeInOutElastic:i=>i===0?0:i===1?1:i<.5?-(Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*ia))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*ia)/2+1,easeInBounce:i=>1-Kp(1-i),easeOutBounce:Kp,easeInOutBounce:i=>i<.5?(1-Kp(1-2*i))/2:(1+Kp(2*i-1))/2,steps:hf};function wu(){return wu=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},wu.apply(this,arguments)}const Dc=Symbol.for("FluidValue.get"),rr=Symbol.for("FluidValue.observers"),Ro=i=>!!(i&&i[Dc]),ds=i=>i&&i[Dc]?i[Dc]():i,rc=i=>i[rr]||null;function Cg(i,t){i.eventObserved?i.eventObserved(t):i(t)}function oa(i,t){let r=i[rr];r&&r.forEach(o=>{Cg(o,t)})}class Cl{constructor(t){if(this[Dc]=void 0,this[rr]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");w1(this,t)}}const w1=(i,t)=>Qi(i,Dc,t);function Vo(i,t){if(i[Dc]){let r=i[rr];r||Qi(i,rr,r=new Set),r.has(t)||(r.add(t),i.observerAdded&&i.observerAdded(r.size,t))}return t}function Pc(i,t){let r=i[rr];if(r&&r.has(t)){const o=r.size-1;o?r.delete(t):i[rr]=null,i.observerRemoved&&i.observerRemoved(o,t)}}const Qi=(i,t,r)=>Object.defineProperty(i,t,{value:r,writable:!0,configurable:!0}),ff=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ir=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,dh=new RegExp(`(${ff.source})(%|[a-z]+)`,"i"),Sg=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Tu=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Om=i=>{const[t,r]=hp(i);if(!t||zl())return i;const o=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(o)return o.trim();if(r&&r.startsWith("--")){const l=window.getComputedStyle(document.documentElement).getPropertyValue(r);return l||i}else{if(r&&Tu.test(r))return Om(r);if(r)return r}return i},hp=i=>{const t=Tu.exec(i);if(!t)return[,];const[,r,o]=t;return[r,o]};let Bu;const wr=(i,t,r,o,l)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(o)}, ${l})`,wg=i=>{Bu||(Bu=Oa?new RegExp(`(${Object.keys(Oa).join("|")})(?!\\w)`,"g"):/^\b$/);const t=i.output.map(p=>ds(p).replace(Tu,Om).replace(ir,Qp).replace(Bu,Qp)),r=t.map(p=>p.match(ff).map(Number)),l=r[0].map((p,h)=>r.map(f=>{if(!(h in f))throw Error('The arity of each "output" value must be equal');return f[h]})).map(p=>nc(wu({},i,{output:p})));return p=>{var h;const f=!dh.test(t[0])&&((h=t.find(_=>dh.test(_)))==null?void 0:h.replace(ff,""));let A=0;return t[0].replace(ff,()=>`${l[A++](p)}${f||""}`).replace(Sg,wr)}},gf="react-spring: ",ll=i=>{const t=i;let r=!1;if(typeof t!="function")throw new TypeError(`${gf}once requires a function parameter`);return(...o)=>{r||(t(...o),r=!0)}},mf=ll(up.warn);function Iu(){mf(`${gf}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const cl=ll(up.warn);function Ru(){cl(`${gf}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ts(i){return Hn.str(i)&&(i[0]=="#"||/\d/.test(i)||!zl()&&Tu.test(i)||i in(Oa||{}))}let ui;const Fu=new WeakMap,Lc=i=>i.forEach(({target:t,contentRect:r})=>{var o;return(o=Fu.get(t))==null?void 0:o.forEach(l=>l(r))});function yf(i,t){ui||typeof ResizeObserver!="undefined"&&(ui=new ResizeObserver(Lc));let r=Fu.get(t);return r||(r=new Set,Fu.set(t,r)),r.add(i),ui&&ui.observe(t),()=>{const o=Fu.get(t);o&&(o.delete(i),!o.size&&ui&&ui.unobserve(t))}}const hh=new Set;let ic;const Ou=()=>{const i=()=>{hh.forEach(t=>t({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},Du=i=>(hh.add(i),ic||(ic=Ou()),()=>{hh.delete(i),!hh.size&&ic&&(ic(),ic=void 0)}),Af=(i,{container:t=document.documentElement}={})=>t===document.documentElement?Du(i):yf(i,t),Pu=(i,t,r)=>t-i===0?1:(r-i)/(t-i),Lu={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class ku{constructor(t,r){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=o=>{const l=this.info[o],{length:p,position:h}=Lu[o];l.current=this.container[`scroll${h}`],l.scrollLength=this.container["scroll"+p]-this.container["client"+p],l.progress=Pu(0,l.scrollLength,l.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=r,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const oc=new WeakMap,vd=new WeakMap,Jp=new WeakMap,fh=i=>i===document.documentElement?window:i,gh=(i,{container:t=document.documentElement}={})=>{let r=Jp.get(t);r||(r=new Set,Jp.set(t,r));const o=new ku(i,t);if(r.add(o),!oc.has(t)){const p=()=>{var f;return(f=r)==null||f.forEach(A=>A.advance()),!0};oc.set(t,p);const h=fh(t);window.addEventListener("resize",p,{passive:!0}),t!==document.documentElement&&vd.set(t,Af(p,{container:t})),h.addEventListener("scroll",p,{passive:!0})}const l=oc.get(t);return raf(l),()=>{raf.cancel(l);const p=Jp.get(t);if(!p||(p.delete(o),p.size))return;const h=oc.get(t);if(oc.delete(t),h){var f;fh(t).removeEventListener("scroll",h),window.removeEventListener("resize",h),(f=vd.get(t))==null||f()}}};function mh(i){const t=useRef(null);return t.current===null&&(t.current=i()),t.current}const bs=zl()?d.useEffect:d.useLayoutEffect,Tg=()=>{const i=(0,d.useRef)(!1);return bs(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function yh(){const i=(0,d.useState)()[1],t=Tg();return()=>{t.current&&i(Math.random())}}function kc(i,t){const[r]=(0,d.useState)(()=>({inputs:t,result:i()})),o=(0,d.useRef)(),l=o.current;let p=l;return p?t&&p.inputs&&qp(t,p.inputs)||(p={inputs:t,result:i()}):p=r,(0,d.useEffect)(()=>{o.current=p,l==r&&(r.inputs=r.result=void 0)},[p]),p.result}function qp(i,t){if(i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==t[r])return!1;return!0}const zi=i=>(0,d.useEffect)(i,wi),wi=[];function hs(i){const t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=i}),t.current}const Os=()=>{const[i,t]=useState(null);return bs(()=>{const r=window.matchMedia("(prefers-reduced-motion)"),o=l=>{t(l.matches),oh({skipAnimation:l.matches})};return o(r),r.addEventListener("change",o),()=>{r.removeEventListener("change",o)}},[]),i},xs=Symbol.for("Animated:node"),Sl=i=>!!i&&i[xs]===i,Qo=i=>i&&i[xs],Xo=(i,t)=>Wp(i,xs,t),Yo=i=>i&&i[xs]&&i[xs].getPayload();class Ul{constructor(){this.payload=void 0,Xo(this,this)}getPayload(){return this.payload||[]}}class pl extends Ul{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,Hn.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new pl(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,r){return Hn.num(t)&&(this.lastPosition=t,r&&(t=Math.round(t/r)*r,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Hn.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class fp extends pl{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=nc({output:[t,t]})}static create(t){return new fp(t)}getValue(){let t=this._string;return t==null?this._string=this._toString(this._value):t}setValue(t){if(Hn.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=nc({output:[this.getValue(),t]})),this._value=0,super.reset()}}const Nl={dependencies:null};class va extends Ul{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const r={};return ec(this.source,(o,l)=>{Sl(o)?r[l]=o.getValue(t):Ro(o)?r[l]=ds(o):t||(r[l]=o)}),r}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Hi(this.payload,t=>t.reset())}_makePayload(t){if(t){const r=new Set;return ec(t,this._addToPayload,r),Array.from(r)}}_addToPayload(t){Nl.dependencies&&Ro(t)&&Nl.dependencies.add(t);const r=Yo(t);r&&Hi(r,o=>this.add(o))}}class zu extends va{constructor(t){super(t)}static create(t){return new zu(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const r=this.getPayload();return t.length==r.length?r.map((o,l)=>o.setValue(t[l])).some(Boolean):(super.setValue(t.map(Bg)),!0)}}function Bg(i){return(ts(i)?fp:pl).create(i)}function Zp(i){const t=Qo(i);return t?t.constructor:Hn.arr(i)?zu:ts(i)?fp:pl}function ul(){return ul=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},ul.apply(this,arguments)}const zc=(i,t)=>{const r=!Hn.fun(i)||i.prototype&&i.prototype.isReactComponent;return(0,d.forwardRef)((o,l)=>{const p=(0,d.useRef)(null),h=r&&(0,d.useCallback)(P=>{p.current=gp(l,P)},[l]),[f,A]=Gu(o,t),_=yh(),b=()=>{const P=p.current;if(r&&!P)return;(P?t.applyAnimatedValues(P,f.getValue(!0)):!1)===!1&&_()},T=new sc(b,A),B=(0,d.useRef)();bs(()=>(B.current=T,Hi(A,P=>Vo(P,T)),()=>{B.current&&(Hi(B.current.deps,P=>Pc(P,B.current)),dr.cancel(B.current.update))})),(0,d.useEffect)(b,[]),zi(()=>()=>{const P=B.current;Hi(P.deps,L=>Pc(L,P))});const F=t.getComponentProps(f.getValue());return d.createElement(i,ul({},F,{ref:h}))})};class sc{constructor(t,r){this.update=t,this.deps=r}eventObserved(t){t.type=="change"&&dr.write(this.update)}}function Gu(i,t){const r=new Set;return Nl.dependencies=r,i.style&&(i=ul({},i,{style:t.createAnimatedStyle(i.style)})),i=new va(i),Nl.dependencies=null,[i,r]}function gp(i,t){return i&&(Hn.fun(i)?i(t):i.current=t),t}const Ah=Symbol.for("AnimatedComponent"),mp=(i,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=l=>new va(l),getComponentProps:o=l=>l}={})=>{const l={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:o},p=h=>{const f=vf(h)||"Anonymous";return Hn.str(h)?h=p[h]||(p[h]=zc(h,l)):h=h[Ah]||(h[Ah]=zc(h,l)),h.displayName=`Animated(${f})`,h};return ec(i,(h,f)=>{Hn.arr(i)&&(f=vf(h)),p[f]=p(h)}),{animated:p}},vf=i=>Hn.str(i)?i:i&&Hn.str(i.displayName)?i.displayName:Hn.fun(i)&&i.name||null;var _f=y(25108);function po(){return po=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},po.apply(this,arguments)}function uo(i,...t){return Hn.fun(i)?i(...t):i}const jl=(i,t)=>i===!0||!!(t&&i&&(Hn.fun(i)?i(t):Fs(i).includes(t))),wl=(i,t)=>Hn.obj(i)?t&&i[t]:i,vh=(i,t)=>i.default===!0?i[t]:i.default?i.default[t]:void 0,dl=i=>i,_h=(i,t=dl)=>{let r=Ig;i.default&&i.default!==!0&&(i=i.default,r=Object.keys(i));const o={};for(const l of r){const p=t(i[l],l);Hn.und(p)||(o[l]=p)}return o},Ig=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Rg={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function T1(i){const t={};let r=0;if(ec(i,(o,l)=>{Rg[l]||(t[l]=o,r++)}),r)return t}function Gc(i){const t=T1(i);if(t){const r={to:t};return ec(i,(o,l)=>l in t||(r[l]=o)),r}return po({},i)}function _d(i){return i=ds(i),Hn.arr(i)?i.map(_d):ts(i)?Ua.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function Fg(i){for(const t in i)return!0;return!1}function Eh(i){return Hn.fun(i)||Hn.arr(i)&&Hn.obj(i[0])}function yp(i,t){var r;(r=i.ref)==null||r.delete(i),t==null||t.delete(i)}function Ef(i,t){if(t&&i.ref!==t){var r;(r=i.ref)==null||r.delete(i),t.add(i),i.ref=t}}function B1(i,t,r=1e3){useIsomorphicLayoutEffect(()=>{if(t){let o=0;each(i,(l,p)=>{const h=l.current;if(h.length){let f=r*t[p];isNaN(f)?f=o:o=f,each(h,A=>{each(A.queue,_=>{const b=_.delay;_.delay=T=>f+uo(b||0,T)})}),l.start()}})}else{let o=Promise.resolve();each(i,l=>{const p=l.current;if(p.length){const h=p.map(f=>{const A=f.queue;return f.queue=[],A});o=o.then(()=>(each(p,(f,A)=>each(h[A]||[],_=>f.queue.push(_))),Promise.all(l.start())))}})}})}const Ed=po({},{default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}}.default,{mass:1,damping:1,easing:al.linear,clamp:!1});class I1{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,Ed)}}function R1(i,t,r){r&&(r=po({},r),Og(r,t),t=po({},r,t)),Og(i,t),Object.assign(i,t);for(const h in Ed)i[h]==null&&(i[h]=Ed[h]);let{mass:o,frequency:l,damping:p}=i;return Hn.und(l)||(l<.01&&(l=.01),p<0&&(p=0),i.tension=Math.pow(2*Math.PI/l,2)*o,i.friction=4*Math.PI*p*o/l),i}function Og(i,t){if(!Hn.und(t.decay))i.duration=void 0;else{const r=!Hn.und(t.tension)||!Hn.und(t.friction);(r||!Hn.und(t.frequency)||!Hn.und(t.damping)||!Hn.und(t.mass))&&(i.duration=void 0,i.decay=void 0),r&&(i.frequency=void 0)}}const Dg=[];class Uu{constructor(){this.changed=!1,this.values=Dg,this.toValues=null,this.fromValues=Dg,this.to=void 0,this.from=void 0,this.config=new I1,this.immediate=!1}}function Pm(i,{key:t,props:r,defaultProps:o,state:l,actions:p}){return new Promise((h,f)=>{var A;let _,b,T=jl((A=r.cancel)!=null?A:o==null?void 0:o.cancel,t);if(T)P();else{Hn.und(r.pause)||(l.paused=jl(r.pause,t));let L=o==null?void 0:o.pause;L!==!0&&(L=l.paused||jl(L,t)),_=uo(r.delay||0,t),L?(l.resumeQueue.add(F),p.pause()):(p.resume(),F())}function B(){l.resumeQueue.add(F),l.timeouts.delete(b),b.cancel(),_=b.time-dr.now()}function F(){_>0&&!Ua.skipAnimation?(l.delayed=!0,b=dr.setTimeout(P,_),l.pauseQueue.add(B),l.timeouts.add(b)):P()}function P(){l.delayed&&(l.delayed=!1),l.pauseQueue.delete(B),l.timeouts.delete(b),i<=(l.cancelId||0)&&(T=!0);try{p.start(po({},r,{callId:i,cancel:T}),h)}catch(L){f(L)}}})}const Ap=(i,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?bd(i.get()):t.every(r=>r.noop)?Pg(i.get()):Ko(i.get(),t.every(r=>r.finished)),Pg=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),Ko=(i,t,r=!1)=>({value:i,finished:t,cancelled:r}),bd=i=>({value:i,cancelled:!0,finished:!1});function Lg(i,t,r,o){const{callId:l,parentId:p,onRest:h}=t,{asyncTo:f,promise:A}=r;return!p&&i===f&&!t.reset?A:r.promise=(()=>rs(this,null,function*(){r.asyncId=l,r.asyncTo=i;const _=_h(t,(O,G)=>G==="onRest"?void 0:O);let b,T;const B=new Promise((O,G)=>(b=O,T=G)),F=O=>{const G=l<=(r.cancelId||0)&&bd(o)||l!==r.asyncId&&Ko(o,!1);if(G)throw O.result=G,T(O),O},P=(O,G)=>{const D=new Lm,k=new kg;return(()=>rs(this,null,function*(){if(Ua.skipAnimation)throw bh(r),k.result=Ko(o,!1),T(k),k;F(D);const N=Hn.obj(O)?po({},O):po({},G,{to:O});N.parentId=l,ec(_,(Q,K)=>{Hn.und(N[K])&&(N[K]=Q)});const V=yield o.start(N);return F(D),r.paused&&(yield new Promise(Q=>{r.resumeQueue.add(Q)})),V}))()};let L;if(Ua.skipAnimation)return bh(r),Ko(o,!1);try{let O;Hn.arr(i)?O=(G=>rs(this,null,function*(){for(const D of G)yield P(D)}))(i):O=Promise.resolve(i(P,o.stop.bind(o))),yield Promise.all([O.then(b),B]),L=Ko(o.get(),!0,!1)}catch(O){if(O instanceof Lm)L=O.result;else if(O instanceof kg)L=O.result;else throw O}finally{l==r.asyncId&&(r.asyncId=p,r.asyncTo=p?f:void 0,r.promise=p?A:void 0)}return Hn.fun(h)&&dr.batchedUpdates(()=>{h(L,o,o.item)}),L}))()}function bh(i,t){Vp(i.timeouts,r=>r.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,t&&(i.cancelId=t)}class Lm extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class kg extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const bf=i=>i instanceof hl;let F1=1;class hl extends Cl{constructor(...t){super(...t),this.id=F1++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Qo(this);return t&&t.getValue()}to(...t){return Ua.to(this,t)}interpolate(...t){return Iu(),Ua.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,r=!1){oa(this,{type:"change",parent:this,value:t,idle:r})}_onPriorityChange(t){this.idle||md.sort(this),oa(this,{type:"priority",parent:this,priority:t})}}const vp=Symbol.for("SpringPhase"),km=1,Uc=2,xd=4,_p=i=>(i[vp]&km)>0,ac=i=>(i[vp]&Uc)>0,Nu=i=>(i[vp]&xd)>0,xf=(i,t)=>t?i[vp]|=Uc|km:i[vp]&=~Uc,zm=(i,t)=>t?i[vp]|=xd:i[vp]&=~xd;class zg extends hl{constructor(t,r){if(super(),this.key=void 0,this.animation=new Uu,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Hn.und(t)||!Hn.und(r)){const o=Hn.obj(t)?po({},t):po({},r,{from:t});Hn.und(o.default)&&(o.default=!0),this.start(o)}}get idle(){return!(ac(this)||this._state.asyncTo)||Nu(this)}get goal(){return ds(this.animation.to)}get velocity(){const t=Qo(this);return t instanceof pl?t.lastVelocity||0:t.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return _p(this)}get isAnimating(){return ac(this)}get isPaused(){return Nu(this)}get isDelayed(){return this._state.delayed}advance(t){let r=!0,o=!1;const l=this.animation;let{config:p,toValues:h}=l;const f=Yo(l.to);!f&&Ro(l.to)&&(h=Fs(ds(l.to))),l.values.forEach((b,T)=>{if(b.done)return;const B=b.constructor==fp?1:f?f[T].lastPosition:h[T];let F=l.immediate,P=B;if(!F){if(P=b.lastPosition,p.tension<=0){b.done=!0;return}let L=b.elapsedTime+=t;const O=l.fromValues[T],G=b.v0!=null?b.v0:b.v0=Hn.arr(p.velocity)?p.velocity[T]:p.velocity;let D;const k=p.precision||(O==B?.005:Math.min(1,Math.abs(B-O)*.001));if(Hn.und(p.duration))if(p.decay){const N=p.decay===!0?.998:p.decay,V=Math.exp(-(1-N)*L);P=O+G/(1-N)*(1-V),F=Math.abs(b.lastPosition-P)<=k,D=G*V}else{D=b.lastVelocity==null?G:b.lastVelocity;const N=p.restVelocity||k/10,V=p.clamp?0:p.bounce,Q=!Hn.und(V),K=O==B?b.v0>0:O<B;let X,oe=!1;const ae=1,ge=Math.ceil(t/ae);for(let ie=0;ie<ge&&(X=Math.abs(D)>N,!(!X&&(F=Math.abs(B-P)<=k,F)));++ie){Q&&(oe=P==B||P>B==K,oe&&(D=-D*V,P=B));const _e=-p.tension*1e-6*(P-B),me=-p.friction*.001*D,we=(_e+me)/p.mass;D=D+we*ae,P=P+D*ae}}else{let N=1;p.duration>0&&(this._memoizedDuration!==p.duration&&(this._memoizedDuration=p.duration,b.durationProgress>0&&(b.elapsedTime=p.duration*b.durationProgress,L=b.elapsedTime+=t)),N=(p.progress||0)+L/this._memoizedDuration,N=N>1?1:N<0?0:N,b.durationProgress=N),P=O+p.easing(N)*(B-O),D=(P-b.lastPosition)/t,F=N==1}b.lastVelocity=D,Number.isNaN(P)&&(_f.warn("Got NaN while animating:",this),F=!0)}f&&!f[T].done&&(F=!1),F?b.done=!0:r=!1,b.setValue(P,p.round)&&(o=!0)});const A=Qo(this),_=A.getValue();if(r){const b=ds(l.to);(_!==b||o)&&!p.decay?(A.setValue(b),this._onChange(b)):o&&p.decay&&this._onChange(_),this._stop()}else o&&this._onChange(_)}set(t){return dr.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ac(this)){const{to:t,config:r}=this.animation;dr.batchedUpdates(()=>{this._onStart(),r.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,r){let o;return Hn.und(t)?(o=this.queue||[],this.queue=[]):o=[Hn.obj(t)?t:po({},r,{to:t})],Promise.all(o.map(l=>this._update(l))).then(l=>Ap(this,l))}stop(t){const{to:r}=this.animation;return this._focus(this.get()),bh(this._state,t&&this._lastCallId),dr.batchedUpdates(()=>this._stop(r,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const r=this.key||"";let{to:o,from:l}=t;o=Hn.obj(o)?o[r]:o,(o==null||Eh(o))&&(o=void 0),l=Hn.obj(l)?l[r]:l,l==null&&(l=void 0);const p={to:o,from:l};return _p(this)||(t.reverse&&([o,l]=[l,o]),l=ds(l),Hn.und(l)?Qo(this)||this._set(o):this._set(l)),p}_update(t,r){let o=po({},t);const{key:l,defaultProps:p}=this;o.default&&Object.assign(p,_h(o,(A,_)=>/^on/.test(_)?wl(A,l):A)),x(this,o,"onProps"),w(this,"onProps",o,this);const h=this._prepareNode(o);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const f=this._state;return Pm(++this._lastCallId,{key:l,props:o,defaultProps:p,state:f,actions:{pause:()=>{Nu(this)||(zm(this,!0),Fa(f.pauseQueue),w(this,"onPause",Ko(this,Md(this,this.animation.to)),this))},resume:()=>{Nu(this)&&(zm(this,!1),ac(this)&&this._resume(),Fa(f.resumeQueue),w(this,"onResume",Ko(this,Md(this,this.animation.to)),this))},start:this._merge.bind(this,h)}}).then(A=>{if(o.loop&&A.finished&&!(r&&A.noop)){const _=Gg(o);if(_)return this._update(_,!0)}return A})}_merge(t,r,o){if(r.cancel)return this.stop(!0),o(bd(this));const l=!Hn.und(t.to),p=!Hn.und(t.from);if(l||p)if(r.callId>this._lastToId)this._lastToId=r.callId;else return o(bd(this));const{key:h,defaultProps:f,animation:A}=this,{to:_,from:b}=A;let{to:T=_,from:B=b}=t;p&&!l&&(!r.default||Hn.und(T))&&(T=B),r.reverse&&([T,B]=[B,T]);const F=!na(B,b);F&&(A.from=B),B=ds(B);const P=!na(T,_);P&&this._focus(T);const L=Eh(r.to),{config:O}=A,{decay:G,velocity:D}=O;(l||p)&&(O.velocity=0),r.config&&!L&&R1(O,uo(r.config,h),r.config!==f.config?uo(f.config,h):void 0);let k=Qo(this);if(!k||Hn.und(T))return o(Ko(this,!0));const N=Hn.und(r.reset)?p&&!r.default:!Hn.und(B)&&jl(r.reset,h),V=N?B:this.get(),Q=_d(T),K=Hn.num(Q)||Hn.arr(Q)||ts(Q),X=!L&&(!K||jl(f.immediate||r.immediate,h));if(P){const ie=Zp(T);if(ie!==k.constructor)if(X)k=this._set(Q);else throw Error(`Cannot animate between ${k.constructor.name} and ${ie.name}, as the "to" prop suggests`)}const oe=k.constructor;let ae=Ro(T),ge=!1;if(!ae){const ie=N||!_p(this)&&F;(P||ie)&&(ge=na(_d(V),Q),ae=!ge),(!na(A.immediate,X)&&!X||!na(O.decay,G)||!na(O.velocity,D))&&(ae=!0)}if(ge&&ac(this)&&(A.changed&&!N?ae=!0:ae||this._stop(_)),!L&&((ae||Ro(_))&&(A.values=k.getPayload(),A.toValues=Ro(T)?null:oe==fp?[1]:Fs(Q)),A.immediate!=X&&(A.immediate=X,!X&&!N&&this._set(_)),ae)){const{onRest:ie}=A;Hi(O1,me=>x(this,r,me));const _e=Ko(this,Md(this,_));Fa(this._pendingCalls,_e),this._pendingCalls.add(o),A.changed&&dr.batchedUpdates(()=>{A.changed=!N,ie==null||ie(_e,this),N?uo(f.onRest,_e):A.onStart==null||A.onStart(_e,this)})}N&&this._set(V),L?o(Lg(r.to,r,this._state,this)):ae?this._start():ac(this)&&!P?this._pendingCalls.add(o):o(Pg(V))}_focus(t){const r=this.animation;t!==r.to&&(rc(this)&&this._detach(),r.to=t,rc(this)&&this._attach())}_attach(){let t=0;const{to:r}=this.animation;Ro(r)&&(Vo(r,this),bf(r)&&(t=r.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ro(t)&&Pc(t,this)}_set(t,r=!0){const o=ds(t);if(!Hn.und(o)){const l=Qo(this);if(!l||!na(o,l.getValue())){const p=Zp(o);!l||l.constructor!=p?Xo(this,p.create(o)):l.setValue(o),l&&dr.batchedUpdates(()=>{this._onChange(o,r)})}}return Qo(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,w(this,"onStart",Ko(this,Md(this,t.to)),this))}_onChange(t,r){r||(this._onStart(),uo(this.animation.onChange,t,this)),uo(this.defaultProps.onChange,t,this),super._onChange(t,r)}_start(){const t=this.animation;Qo(this).reset(ds(t.to)),t.immediate||(t.fromValues=t.values.map(r=>r.lastPosition)),ac(this)||(xf(this,!0),Nu(this)||this._resume())}_resume(){Ua.skipAnimation?this.finish():md.start(this)}_stop(t,r){if(ac(this)){xf(this,!1);const o=this.animation;Hi(o.values,p=>{p.done=!0}),o.toValues&&(o.onChange=o.onPause=o.onResume=void 0),oa(this,{type:"idle",parent:this});const l=r?bd(this.get()):Ko(this.get(),Md(this,t!=null?t:o.to));Fa(this._pendingCalls,l),o.changed&&(o.changed=!1,w(this,"onRest",l,this))}}}function Md(i,t){const r=_d(t),o=_d(i.get());return na(o,r)}function Gg(i,t=i.loop,r=i.to){let o=uo(t);if(o){const l=o!==!0&&Gc(o),p=(l||i).reverse,h=!l||l.reset;return Cd(po({},i,{loop:t,default:!1,pause:void 0,to:!p||Eh(r)?r:void 0,from:h?i.from:void 0,reset:h},l))}}function Cd(i){const{to:t,from:r}=i=Gc(i),o=new Set;return Hn.obj(t)&&Gm(t,o),Hn.obj(r)&&Gm(r,o),i.keys=o.size?Array.from(o):null,i}function Ug(i){const t=Cd(i);return Hn.und(t.default)&&(t.default=_h(t)),t}function Gm(i,t){ec(i,(r,o)=>r!=null&&t.add(o))}const O1=["onStart","onRest","onChange","onPause","onResume"];function x(i,t,r){i.animation[r]=t[r]!==vh(t,r)?wl(t[r],i.key):void 0}function w(i,t,...r){var o,l,p,h;(o=(l=i.animation)[t])==null||o.call(l,...r),(p=(h=i.defaultProps)[t])==null||p.call(h,...r)}const U=["onStart","onChange","onRest"];let Y=1;class re{constructor(t,r){this.id=Y++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),r&&(this._flush=r),t&&this.start(po({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((r,o)=>t[o]=r.get()),t}set(t){for(const r in t){const o=t[r];Hn.und(o)||this.springs[r].set(o)}}update(t){return t&&this.queue.push(Cd(t)),this}start(t){let{queue:r}=this;return t?r=Fs(t).map(Cd):this.queue=[],this._flush?this._flush(this,r):(gi(this,r),he(this,r))}stop(t,r){if(t!==!!t&&(r=t),r){const o=this.springs;Hi(Fs(r),l=>o[l].stop(!!t))}else bh(this._state,this._lastAsyncId),this.each(o=>o.stop(!!t));return this}pause(t){if(Hn.und(t))this.start({pause:!0});else{const r=this.springs;Hi(Fs(t),o=>r[o].pause())}return this}resume(t){if(Hn.und(t))this.start({pause:!1});else{const r=this.springs;Hi(Fs(t),o=>r[o].resume())}return this}each(t){ec(this.springs,t)}_onFrame(){const{onStart:t,onChange:r,onRest:o}=this._events,l=this._active.size>0,p=this._changed.size>0;(l&&!this._started||p&&!this._started)&&(this._started=!0,Vp(t,([A,_])=>{_.value=this.get(),A(_,this,this._item)}));const h=!l&&this._started,f=p||h&&o.size?this.get():null;p&&r.size&&Vp(r,([A,_])=>{_.value=f,A(_,this,this._item)}),h&&(this._started=!1,Vp(o,([A,_])=>{_.value=f,A(_,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;dr.onFrame(this._onFrame)}}function he(i,t){return Promise.all(t.map(r=>Je(i,r))).then(r=>Ap(i,r))}function Je(i,t,r){return rs(this,null,function*(){const{keys:o,to:l,from:p,loop:h,onRest:f,onResolve:A}=t,_=Hn.obj(t.default)&&t.default;h&&(t.loop=!1),l===!1&&(t.to=null),p===!1&&(t.from=null);const b=Hn.arr(l)||Hn.fun(l)?l:void 0;b?(t.to=void 0,t.onRest=void 0,_&&(_.onRest=void 0)):Hi(U,L=>{const O=t[L];if(Hn.fun(O)){const G=i._events[L];t[L]=({finished:D,cancelled:k})=>{const N=G.get(O);N?(D||(N.finished=!1),k&&(N.cancelled=!0)):G.set(O,{value:null,finished:D||!1,cancelled:k||!1})},_&&(_[L]=t[L])}});const T=i._state;t.pause===!T.paused?(T.paused=t.pause,Fa(t.pause?T.pauseQueue:T.resumeQueue)):T.paused&&(t.pause=!0);const B=(o||Object.keys(i.springs)).map(L=>i.springs[L].start(t)),F=t.cancel===!0||vh(t,"cancel")===!0;(b||F&&T.asyncId)&&B.push(Pm(++i._lastAsyncId,{props:t,state:T,actions:{pause:dp,resume:dp,start(L,O){F?(bh(T,i._lastAsyncId),O(bd(i))):(L.onRest=f,O(Lg(b,L,T,i)))}}})),T.paused&&(yield new Promise(L=>{T.resumeQueue.add(L)}));const P=Ap(i,yield Promise.all(B));if(h&&P.finished&&!(r&&P.noop)){const L=Gg(t,h,l);if(L)return gi(i,[L]),Je(i,L,!0)}return A&&dr.batchedUpdates(()=>A(P,i,i.item)),P})}function At(i,t){const r=po({},i.springs);return t&&Hi(Fs(t),o=>{Hn.und(o.keys)&&(o=Cd(o)),Hn.obj(o.to)||(o=po({},o,{to:void 0})),br(r,o,l=>Dn(l))}),en(i,r),r}function en(i,t){ec(t,(r,o)=>{i.springs[o]||(i.springs[o]=r,Vo(r,i))})}function Dn(i,t){const r=new zg;return r.key=i,t&&Vo(r,t),r}function br(i,t,r){t.keys&&Hi(t.keys,o=>{(i[o]||(i[o]=r(o)))._prepareNode(t)})}function gi(i,t){Hi(t,r=>{br(i.springs,r,o=>Dn(o,i))})}function Rr(i,t){if(i==null)return{};var r={},o=Object.keys(i),l,p;for(p=0;p<o.length;p++)l=o[p],!(t.indexOf(l)>=0)&&(r[l]=i[l]);return r}const Eo=["children"],Tr=i=>{let{children:t}=i,r=Rr(i,Eo);const o=(0,d.useContext)(Xs),l=r.pause||!!o.pause,p=r.immediate||!!o.immediate;r=kc(()=>({pause:l,immediate:p}),[l,p]);const{Provider:h}=Xs;return d.createElement(h,{value:r},t)},Xs=Hl(Tr,{});Tr.Provider=Xs.Provider,Tr.Consumer=Xs.Consumer;function Hl(i,t){return Object.assign(i,d.createContext(t)),i.Provider._context=i,i.Consumer._context=i,i}const Dt=()=>{const i=[],t=function(l){Ru();const p=[];return Hi(i,(h,f)=>{if(Hn.und(l))p.push(h.start());else{const A=r(l,h,f);A&&p.push(h.start(A))}}),p};t.current=i,t.add=function(o){i.includes(o)||i.push(o)},t.delete=function(o){const l=i.indexOf(o);~l&&i.splice(l,1)},t.pause=function(){return Hi(i,o=>o.pause(...arguments)),this},t.resume=function(){return Hi(i,o=>o.resume(...arguments)),this},t.set=function(o){Hi(i,l=>l.set(o))},t.start=function(o){const l=[];return Hi(i,(p,h)=>{if(Hn.und(o))l.push(p.start());else{const f=this._getProps(o,p,h);f&&l.push(p.start(f))}}),l},t.stop=function(){return Hi(i,o=>o.stop(...arguments)),this},t.update=function(o){return Hi(i,(l,p)=>l.update(this._getProps(o,l,p))),this};const r=function(l,p,h){return Hn.fun(l)?l(h,p):l};return t._getProps=r,t};function Mt(i,t,r){const o=Hn.fun(t)&&t;o&&!r&&(r=[]);const l=(0,d.useMemo)(()=>o||arguments.length==3?Dt():void 0,[]),p=(0,d.useRef)(0),h=yh(),f=(0,d.useMemo)(()=>({ctrls:[],queue:[],flush(G,D){const k=At(G,D);return p.current>0&&!f.queue.length&&!Object.keys(k).some(V=>!G.springs[V])?he(G,D):new Promise(V=>{en(G,k),f.queue.push(()=>{V(he(G,D))}),h()})}}),[]),A=(0,d.useRef)([...f.ctrls]),_=[],b=hs(i)||0;(0,d.useMemo)(()=>{Hi(A.current.slice(i,b),G=>{yp(G,l),G.stop(!0)}),A.current.length=i,T(b,i)},[i]),(0,d.useMemo)(()=>{T(0,Math.min(b,i))},r);function T(G,D){for(let k=G;k<D;k++){const N=A.current[k]||(A.current[k]=new re(null,f.flush)),V=o?o(k,N):t[k];V&&(_[k]=Ug(V))}}const B=A.current.map((G,D)=>At(G,_[D])),F=(0,d.useContext)(Tr),P=hs(F),L=F!==P&&Fg(F);bs(()=>{p.current++,f.ctrls=A.current;const{queue:G}=f;G.length&&(f.queue=[],Hi(G,D=>D())),Hi(A.current,(D,k)=>{l==null||l.add(D),L&&D.start({default:F});const N=_[k];N&&(Ef(D,N.ref),D.ref?D.queue.push(N):D.start(N))})}),zi(()=>()=>{Hi(f.ctrls,G=>G.stop(!0))});const O=B.map(G=>po({},G));return l?[O,l]:O}function Qt(i,t){const r=Hn.fun(i),[[o],l]=Mt(1,r?i:[i],r?t||[]:t);return r||arguments.length==2?[o,l]:o}const lr=()=>Dt(),Dr=()=>useState(lr)[0],Ti=(i,t)=>{const r=useConstant(()=>new zg(i,t));return useOnce(()=>()=>{r.stop()}),r};function _i(i,t,r){const o=is.fun(t)&&t;o&&!r&&(r=[]);let l=!0,p;const h=Mt(i,(A,_)=>{const b=o?o(A,_):t;return p=b.ref,l=l&&b.reverse,b},r||[{}]);if(useIsomorphicLayoutEffect(()=>{each(h[1].current,(A,_)=>{const b=h[1].current[_+(l?1:-1)];if(Ef(A,p),A.ref){b&&A.update({to:b.springs});return}b?A.start({to:b.springs}):A.start()})},r),o||arguments.length==3){var f;const A=(f=p)!=null?f:h[1];return A._getProps=(_,b,T)=>{const B=is.fun(_)?_(T,b):_;if(B){const F=A.current[T+(B.reverse?1:-1)];return F&&(B.to=F.springs),B}},h}return h[0]}let si;(function(i){i.MOUNT="mount",i.ENTER="enter",i.UPDATE="update",i.LEAVE="leave"})(si||(si={}));function sa(i,t,r){const o=is.fun(t)&&t,{reset:l,sort:p,trail:h=0,expires:f=!0,exitBeforeEnter:A=!1,onDestroyed:_,ref:b,config:T}=o?o():t,B=useMemo(()=>o||arguments.length==3?Dt():void 0,[]),F=toArray(i),P=[],L=useRef(null),O=l?null:L.current;useIsomorphicLayoutEffect(()=>{L.current=P}),useOnce(()=>(each(P,me=>{B==null||B.add(me.ctrl),me.ctrl.ref=B}),()=>{each(L.current,me=>{me.expired&&clearTimeout(me.expirationId),yp(me.ctrl,B),me.ctrl.stop(!0)})}));const G=$p(F,o?o():t,O),D=l&&L.current||[];useIsomorphicLayoutEffect(()=>each(D,({ctrl:me,item:we,key:ke})=>{yp(me,B),uo(_,we,ke)}));const k=[];if(O&&each(O,(me,we)=>{me.expired?(clearTimeout(me.expirationId),D.push(me)):(we=k[we]=G.indexOf(me.key),~we&&(P[we]=me))}),each(F,(me,we)=>{P[we]||(P[we]={key:G[we],item:me,phase:si.MOUNT,ctrl:new re},P[we].ctrl.item=me)}),k.length){let me=-1;const{leave:we}=o?o():t;each(k,(ke,De)=>{const Ne=O[De];~ke?(me=P.indexOf(Ne),P[me]=po({},Ne,{item:F[ke]})):we&&P.splice(++me,0,Ne)})}is.fun(p)&&P.sort((me,we)=>p(me.item,we.item));let N=-h;const V=useForceUpdate(),Q=_h(t),K=new Map,X=useRef(new Map),oe=useRef(!1);each(P,(me,we)=>{const ke=me.key,De=me.phase,Ne=o?o():t;let Ge,Ye,Se=uo(Ne.delay||0,ke);if(De==si.MOUNT)Ge=Ne.enter,Ye=si.ENTER;else{const ye=G.indexOf(ke)<0;if(De!=si.LEAVE)if(ye)Ge=Ne.leave,Ye=si.LEAVE;else if(Ge=Ne.update)Ye=si.UPDATE;else return;else if(!ye)Ge=Ne.enter,Ye=si.ENTER;else return}if(Ge=uo(Ge,me.item,we),Ge=is.obj(Ge)?Gc(Ge):{to:Ge},!Ge.config){const ye=T||Q.config;Ge.config=uo(ye,me.item,we,Ye)}N+=h;const xe=po({},Q,{delay:Se+N,ref:b,immediate:Ne.immediate,reset:!1},Ge);if(Ye==si.ENTER&&is.und(xe.from)){const ye=o?o():t,Be=is.und(ye.initial)||O?ye.from:ye.initial;xe.from=uo(Be,me.item,we)}const{onResolve:Ee}=xe;xe.onResolve=ye=>{uo(Ee,ye);const Be=L.current,be=Be.find(je=>je.key===ke);if(be&&!(ye.cancelled&&be.phase!=si.UPDATE)&&be.ctrl.idle){const je=Be.every(Et=>Et.ctrl.idle);if(be.phase==si.LEAVE){const Et=uo(f,be.item);if(Et!==!1){const Ft=Et===!0?0:Et;if(be.expired=!0,!je&&Ft>0){Ft<=2147483647&&(be.expirationId=setTimeout(V,Ft));return}}}je&&Be.some(Et=>Et.expired)&&(X.current.delete(be),A&&(oe.current=!0),V())}};const le=At(me.ctrl,xe);Ye===si.LEAVE&&A?X.current.set(me,{phase:Ye,springs:le,payload:xe}):K.set(me,{phase:Ye,springs:le,payload:xe})});const ae=useContext(Tr),ge=usePrev(ae),ie=ae!==ge&&Fg(ae);useIsomorphicLayoutEffect(()=>{ie&&each(P,me=>{me.ctrl.start({default:ae})})},[ae]),each(K,(me,we)=>{if(X.current.size){const ke=P.findIndex(De=>De.key===we.key);P.splice(ke,1)}}),useIsomorphicLayoutEffect(()=>{each(X.current.size?X.current:K,({phase:me,payload:we},ke)=>{const{ctrl:De}=ke;ke.phase=me,B==null||B.add(De),ie&&me==si.ENTER&&De.start({default:ae}),we&&(Ef(De,we.ref),(De.ref||B)&&!oe.current?De.update(we):(De.start(we),oe.current&&(oe.current=!1)))})},l?void 0:r);const _e=me=>React.createElement(React.Fragment,null,P.map((we,ke)=>{const{springs:De}=K.get(we)||we.ctrl,Ne=me(po({},De),we.item,we,ke);return Ne&&Ne.type?React.createElement(Ne.type,po({},Ne.props,{key:is.str(we.key)||is.num(we.key)?we.key:we.ctrl.id,ref:Ne.ref})):Ne}));return B?[_e,B]:_e}let to=1;function $p(i,{key:t,keys:r=t},o){if(r===null){const l=new Set;return i.map(p=>{const h=o&&o.find(f=>f.item===p&&f.phase!==si.LEAVE&&!l.has(f));return h?(l.add(h),h.key):to++})}return is.und(r)?i:is.fun(r)?i.map(r):toArray(r)}const D1=null,xx=(i={})=>{let{container:t}=i,r=Rr(i,D1);const[o,l]=Qt(()=>po({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onScroll(({x:h,y:f})=>{l.start({scrollX:h.current,scrollXProgress:h.progress,scrollY:f.current,scrollYProgress:f.progress})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(o),h=>h.stop()),p()}},[]),o},I_=null,Mx=i=>{let{container:t}=i,r=Rr(i,I_);const[o,l]=Qt(()=>po({width:0,height:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onResize(({width:h,height:f})=>{l.start({width:h,height:f,immediate:o.width.get()===0||o.height.get()===0})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(o),h=>h.stop()),p()}},[]),o},R_=null,F_=null,O_={any:0,all:1};function Cx(i,t){const[r,o]=useState(!1),l=useRef(),p=is.fun(i)&&i,h=p?p():{},{to:f={},from:A={}}=h,_=Rr(h,R_),b=p?t:i,[T,B]=Qt(()=>po({from:A},_),[]);return useIsomorphicLayoutEffect(()=>{const F=l.current,P=b!=null?b:{},{root:L,once:O,amount:G="any"}=P,D=Rr(P,F_);if(!F||O&&r||typeof IntersectionObserver=="undefined")return;const k=new WeakMap,N=()=>(f&&B.start(f),o(!0),O?void 0:()=>{A&&B.start(A),o(!1)}),V=K=>{K.forEach(X=>{const oe=k.get(X.target);if(X.isIntersecting!==!!oe)if(X.isIntersecting){const ae=N();is.fun(ae)?k.set(X.target,ae):Q.unobserve(X.target)}else oe&&(oe(),k.delete(X.target))})},Q=new IntersectionObserver(V,po({root:L&&L.current||void 0,threshold:typeof G=="number"||Array.isArray(G)?G:O_[G]},D));return Q.observe(F),()=>Q.unobserve(F)},[b]),p?[l,T]:[l,r]}const D_=null;function Sx(i){let{children:t}=i,r=Rr(i,D_);return t(Qt(r))}const P_=null;function wx(i){let{items:t,children:r}=i,o=Rr(i,P_);const l=_i(t.length,o);return t.map((p,h)=>{const f=r(p,h);return is.fun(f)?f(l[h]):f})}const L_=null;function Tx(i){let{items:t,children:r}=i,o=Rr(i,L_);return sa(t,o)(r)}class P1 extends hl{constructor(t,r){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=nc(...r);const o=this._get(),l=Zp(o);Xo(this,l.create(o))}advance(t){const r=this._get(),o=this.get();na(r,o)||(Qo(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&yA(this._active)&&L1(this)}_get(){const t=Hn.arr(this.source)?this.source.map(ds):Fs(ds(this.source));return this.calc(...t)}_start(){this.idle&&!yA(this._active)&&(this.idle=!1,Hi(Yo(this),t=>{t.done=!1}),Ua.skipAnimation?(dr.batchedUpdates(()=>this.advance()),L1(this)):md.start(this))}_attach(){let t=1;Hi(Fs(this.source),r=>{Ro(r)&&Vo(r,this),bf(r)&&(r.idle||this._active.add(r),t=Math.max(t,r.priority+1))}),this.priority=t,this._start()}_detach(){Hi(Fs(this.source),t=>{Ro(t)&&Pc(t,this)}),this._active.clear(),L1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Fs(this.source).reduce((r,o)=>Math.max(r,(bf(o)?o.priority:0)+1),0))}}function k_(i){return i.idle!==!1}function yA(i){return!i.size||Array.from(i).every(k_)}function L1(i){i.idle||(i.idle=!0,Hi(Yo(i),t=>{t.done=!0}),oa(i,{type:"idle",parent:i}))}const Bx=(i,...t)=>new P1(i,t),Ix=(i,...t)=>(deprecateInterpolate(),new P1(i,t));Ua.assign({createStringInterpolator:wg,to:(i,t)=>new P1(i,t)});const Rx=md.advance,z_=["primitive"].concat(Object.keys(s).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));Ua.assign({createStringInterpolator:wg,colors:uf,frameLoop:"demand"}),(0,E.n)(()=>{dr.advance()});const Ox=mp(z_,{applyAnimatedValues:E.j}).animated;function Dx(i,t,r){return Math.max(t,Math.min(i,r))}const fs={toVector(i,t){return i===void 0&&(i=t),Array.isArray(i)?i:[i,i]},add(i,t){return[i[0]+t[0],i[1]+t[1]]},sub(i,t){return[i[0]-t[0],i[1]-t[1]]},addTo(i,t){i[0]+=t[0],i[1]+=t[1]},subTo(i,t){i[0]-=t[0],i[1]-=t[1]}};function G_(i,t,r){return t===0||Math.abs(t)===1/0?Math.pow(i,r*5):i*t*r/(t+r*i)}function U_(i,t,r,o=.15){return o===0?Dx(i,t,r):i<t?-G_(t-i,r-t,o)+t:i>r?+G_(i-r,r-t,o)+r:i}function Px(i,[t,r],[o,l]){const[[p,h],[f,A]]=i;return[U_(t,p,h,o),U_(r,f,A,l)]}function Lx(i,t){if(typeof i!="object"||i===null)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var o=r.call(i,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function kx(i){var t=Lx(i,"string");return typeof t=="symbol"?t:String(t)}function _a(i,t,r){return t=kx(t),t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r,i}function N_(i,t){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),r.push.apply(r,o)}return r}function Ds(i){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(r),!0).forEach(function(o){_a(i,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(r,o))})}return i}const j_={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function H_(i){return i?i[0].toUpperCase()+i.slice(1):""}const zx=["enter","leave"];function Gx(i=!1,t){return i&&!zx.includes(t)}function Ux(i,t="",r=!1){const o=j_[i],l=o&&o[t]||t;return"on"+H_(i)+H_(l)+(Gx(r,l)?"Capture":"")}const Nx=["gotpointercapture","lostpointercapture"];function jx(i){let t=i.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const o=Nx.includes(t)?"capturecapture":"capture",l=!!~t.indexOf(o);return l&&(t=t.replace("capture","")),{device:t,capture:l,passive:r}}function Hx(i,t=""){const r=j_[i],o=r&&r[t]||t;return i+o}function k1(i){return"touches"in i}function W_(i){return k1(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function Wx(i){return Array.from(i.touches).filter(t=>{var r,o;return t.target===i.currentTarget||((r=i.currentTarget)===null||r===void 0||(o=r.contains)===null||o===void 0?void 0:o.call(r,t.target))})}function Vx(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function V_(i){return k1(i)?Vx(i)[0]:i}function AA(i,t){try{const r=t.clientX-i.clientX,o=t.clientY-i.clientY,l=(t.clientX+i.clientX)/2,p=(t.clientY+i.clientY)/2,h=Math.hypot(r,o);return{angle:-(Math.atan2(r,o)*180)/Math.PI,distance:h,origin:[l,p]}}catch(r){}return null}function Qx(i){return Wx(i).map(t=>t.identifier)}function Q_(i,t){const[r,o]=Array.from(i.touches).filter(l=>t.includes(l.identifier));return AA(r,o)}function vA(i){const t=V_(i);return k1(i)?t.identifier:t.pointerId}function Ng(i){const t=V_(i);return[t.clientX,t.clientY]}const X_=40,Y_=800;function K_(i){let{deltaX:t,deltaY:r,deltaMode:o}=i;return o===1?(t*=X_,r*=X_):o===2&&(t*=Y_,r*=Y_),[t,r]}function Xx(i){var t,r;const{scrollX:o,scrollY:l,scrollLeft:p,scrollTop:h}=i.currentTarget;return[(t=o!=null?o:p)!==null&&t!==void 0?t:0,(r=l!=null?l:h)!==null&&r!==void 0?r:0]}function Yx(i){const t={};if("buttons"in i&&(t.buttons=i.buttons),"shiftKey"in i){const{shiftKey:r,altKey:o,metaKey:l,ctrlKey:p}=i;Object.assign(t,{shiftKey:r,altKey:o,metaKey:l,ctrlKey:p})}return t}function xi(i,...t){return typeof i=="function"?i(...t):i}function nr(){}function Ep(...i){return i.length===0?nr:i.length===1?i[0]:function(){let t;for(const r of i)t=r.apply(this,arguments)||t;return t}}function jg(i,t){return Object.assign({},t,i||{})}const J_=32;class _A{constructor(t,r,o){this.ctrl=t,this.args=r,this.key=o,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:o,args:l}=this;r[o]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=l,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,o=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=o.from?xi(o.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:o,shared:l}=this;r.args=this.args;let p=0;if(t&&(r.event=t,o.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,l.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,l.locked=!!document.pointerLockElement,Object.assign(l,Yx(t)),l.down=l.pressed=l.buttons%2===1||l.touches>0,p=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const Q=r._delta.map(Math.abs);fs.addTo(r._distance,Q)}this.axisIntent&&this.axisIntent(t);const[h,f]=r._movement,[A,_]=o.threshold,{_step:b,values:T}=r;if(o.hasCustomTransform?(b[0]===!1&&(b[0]=Math.abs(h)>=A&&T[0]),b[1]===!1&&(b[1]=Math.abs(f)>=_&&T[1])):(b[0]===!1&&(b[0]=Math.abs(h)>=A&&Math.sign(h)*A),b[1]===!1&&(b[1]=Math.abs(f)>=_&&Math.sign(f)*_)),r.intentional=b[0]!==!1||b[1]!==!1,!r.intentional)return;const B=[0,0];if(o.hasCustomTransform){const[Q,K]=T;B[0]=b[0]!==!1?Q-b[0]:0,B[1]=b[1]!==!1?K-b[1]:0}else B[0]=b[0]!==!1?h-b[0]:0,B[1]=b[1]!==!1?f-b[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(B);const F=r.offset,P=r._active&&!r._blocked||r.active;P&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=l[this.ingKey]=r._active,t&&(r.first&&("bounds"in o&&(r._bounds=xi(o.bounds,r)),this.setup&&this.setup()),r.movement=B,this.computeOffset()));const[L,O]=r.offset,[[G,D],[k,N]]=r._bounds;r.overflow=[L<G?-1:L>D?1:0,O<k?-1:O>N?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const V=r._active?o.rubberband||[0,0]:[0,0];if(r.offset=Px(r._bounds,r.offset,V),r.delta=fs.sub(r.offset,F),this.computeMovement(),P&&(!r.last||p>J_)){r.delta=fs.sub(r.offset,F);const Q=r.delta.map(Math.abs);fs.addTo(r.distance,Q),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&p>0&&(r.velocity=[Q[0]/p,Q[1]/p],r.timeDelta=p)}}emit(){const t=this.state,r=this.shared,o=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!o.triggerAllEvents)return;const l=this.handler(Ds(Ds(Ds({},r),t),{},{[this.aliasKey]:t.values}));l!==void 0&&(t.memo=l)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function q_([i,t],r){const o=Math.abs(i),l=Math.abs(t);if(o>l&&o>r)return"x";if(l>o&&l>r)return"y"}class Hg extends _A{constructor(...t){super(...t),_a(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=fs.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=fs.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,o=this.config;if(!r.axis&&t){const l=typeof o.axisThreshold=="object"?o.axisThreshold[W_(t)]:o.axisThreshold;r.axis=q_(r._movement,l)}r._blocked=(o.lockDirection||!!o.axis)&&!r.axis||!!o.axis&&o.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const Z_=i=>i,EA=.15,Wg={enabled(i=!0){return i},eventOptions(i,t,r){return Ds(Ds({},r.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[EA,EA];case!1:return[0,0];default:return fs.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return fs.toVector(i)},transform(i,t,r){const o=i||r.shared.transform;return this.hasCustomTransform=!!o,o||Z_},threshold(i){return fs.toVector(i,0)}},Mf=0,Sd=Ds(Ds({},Wg),{},{axis(i,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(i=Mf){return i},bounds(i={}){if(typeof i=="function")return p=>Sd.bounds(i(p));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:t=-1/0,right:r=1/0,top:o=-1/0,bottom:l=1/0}=i;return[[t,r],[o,l]]}}),wd={ArrowRight:(i,t=1)=>[i*t,0],ArrowLeft:(i,t=1)=>[-1*i*t,0],ArrowUp:(i,t=1)=>[0,-1*i*t],ArrowDown:(i,t=1)=>[0,i*t]};class z1 extends Hg{constructor(...t){super(...t),_a(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const r=t._bounds.getBoundingClientRect(),o=t.currentTarget.getBoundingClientRect(),l={left:r.left-o.left+t.offset[0],right:r.right-o.right+t.offset[0],top:r.top-o.top+t.offset[1],bottom:r.bottom-o.bottom+t.offset[1]};t._bounds=Sd.bounds(l)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const r=this.config,o=this.state;if(t.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):r.pointerButtons!==-1&&r.pointerButtons!==t.buttons))return;const l=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(l&&l.size>1&&o._pointerActive)&&(this.start(t),this.setupPointer(t),o._pointerId=vA(t),o._pointerActive=!0,this.computeValues(Ng(t)),this.computeInitial(),r.preventScrollAxis&&W_(t)!=="mouse"?(o._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const r=this.state,o=this.config;if(!r._pointerActive)return;const l=vA(t);if(r._pointerId!==void 0&&l!==r._pointerId)return;const p=Ng(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=fs.sub(p,r._values),this.computeValues(p)),fs.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(o.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===o.preventScrollAxis||o.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(f){}const r=this.state,o=this.config;if(!r._active||!r._pointerActive)return;const l=vA(t);if(r._pointerId!==void 0&&l!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[p,h]=r._distance;if(r.tap=p<=o.tapsThreshold&&h<=o.tapsThreshold,r.tap&&o.filterTaps)r._force=!0;else{const[f,A]=r._delta,[_,b]=r._movement,[T,B]=o.swipe.velocity,[F,P]=o.swipe.distance,L=o.swipe.duration;if(r.elapsedTime<L){const O=Math.abs(f/r.timeDelta),G=Math.abs(A/r.timeDelta);O>T&&Math.abs(_)>F&&(r.swipe[0]=Math.sign(f)),G>B&&Math.abs(b)>P&&(r.swipe[1]=Math.sign(A))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const r=this.config,o=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,o,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,o,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,o,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,bA(t);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const r=wd[t.key];if(r){const o=this.state,l=t.shiftKey?10:t.altKey?.1:1;this.start(t),o._delta=r(this.config.keyboardDisplacement,l),o._keyboardActive=!0,fs.addTo(o._movement,o._delta),this.compute(t),this.emit()}}keyUp(t){t.key in wd&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function bA(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const xh=typeof window!="undefined"&&window.document&&window.document.createElement;function Mh(){return xh&&"ontouchstart"in window}function Ch(){return Mh()||xh&&window.navigator.maxTouchPoints>1}function xA(){return xh&&"onpointerdown"in window}function G1(){return xh&&"exitPointerLock"in window.document}function $_(){try{return"constructor"in GestureEvent}catch(i){return!1}}const lc={isBrowser:xh,gesture:$_(),touch:Ch(),touchscreen:Ch(),pointer:xA(),pointerLock:G1()},Um=250,e3=180,MA=.5,CA=50,U1=250,t3=10,SA={mouse:0,touch:0,pen:8},n3=Ds(Ds({},Sd),{},{device(i,t,{pointer:{touch:r=!1,lock:o=!1,mouse:l=!1}={}}){return this.pointerLock=o&&lc.pointerLock,lc.touch&&r?"touch":this.pointerLock?"mouse":lc.pointer&&!l?"pointer":lc.touch?"touch":"mouse"},preventScrollAxis(i,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&i?Um:void 0,!(!lc.touchscreen||r===!1))return i||(r!==void 0?"y":void 0)},pointerCapture(i,t,{pointer:{capture:r=!0,buttons:o=1,keys:l=!0}={}}){return this.pointerButtons=o,this.keys=l,!this.pointerLock&&this.device==="pointer"&&r},threshold(i,t,{filterTaps:r=!1,tapsThreshold:o=3,axis:l=void 0}){const p=fs.toVector(i,r?o:l?1:0);return this.filterTaps=r,this.tapsThreshold=o,p},swipe({velocity:i=MA,distance:t=CA,duration:r=U1}={}){return{velocity:this.transform(fs.toVector(i)),distance:this.transform(fs.toVector(t)),duration:r}},delay(i=0){switch(i){case!0:return e3;case!1:return 0;default:return i}},axisThreshold(i){return i?Ds(Ds({},SA),i):SA},keyboardDisplacement(i=t3){return i}});function wA(i){const[t,r]=i.overflow,[o,l]=i._delta,[p,h]=i._direction;(t<0&&o>0&&p<0||t>0&&o<0&&p>0)&&(i._movement[0]=i._movementBound[0]),(r<0&&l>0&&h<0||r>0&&l<0&&h>0)&&(i._movement[1]=i._movementBound[1])}const r3=30,i3=100;class o3 extends _A{constructor(...t){super(...t),_a(this,"ingKey","pinching"),_a(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:o}=this.state;t==="wheel"?this.state.offset=fs.add(r,o):this.state.offset=[(1+r[0])*o[0],r[1]+o[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,o]=t._movement;if(!t.axis){const l=Math.abs(r)*r3-Math.abs(o);l<0?t.axis="angle":l>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,o=this.ctrl.touchIds;if(r._active&&r._touchIds.every(p=>o.has(p))||o.size<2)return;this.start(t),r._touchIds=Array.from(o).slice(0,2);const l=Q_(t,r._touchIds);l&&this.pinchStart(t,l)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,o=r._pointerEvents,l=this.ctrl.pointerIds;if(r._active&&Array.from(o.keys()).every(h=>l.has(h))||(o.size<2&&o.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const p=AA(...Array.from(o.values()));p&&this.pinchStart(t,p)}pinchStart(t,r){const o=this.state;o.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=Q_(t,this.state._touchIds);r&&this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const o=AA(...Array.from(r.values()));o&&this.pinchMove(t,o)}pinchMove(t,r){const o=this.state,l=o._values[1],p=r.angle-l;let h=0;Math.abs(p)>270&&(h+=Math.sign(p)),this.computeValues([r.distance,r.angle-360*h]),o.origin=r.origin,o.turns=h,o._movement=[o._values[0]/o._initial[0]-1,o._values[1]-o._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(o){}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const o=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=fs.sub(r._movement,o),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&!t[r]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const o=this.state;o._delta=[-K_(t)[1]/i3*o.offset[0],0],fs.addTo(o._movement,o._delta),wA(o),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this)),t("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const s3=Ds(Ds({},Wg),{},{device(i,t,{shared:r,pointer:{touch:o=!1}={}}){if(r.target&&!lc.touch&&lc.gesture)return"gesture";if(lc.touch&&o)return"touch";if(lc.touchscreen){if(lc.pointer)return"pointer";if(lc.touch)return"touch"}},bounds(i,t,{scaleBounds:r={},angleBounds:o={}}){const l=h=>{const f=jg(xi(r,h),{min:-1/0,max:1/0});return[f.min,f.max]},p=h=>{const f=jg(xi(o,h),{min:-1/0,max:1/0});return[f.min,f.max]};return typeof r!="function"&&typeof o!="function"?[l(),p()]:h=>[l(h),p(h)]},threshold(i,t,r){return this.lockDirection=r.axis==="lock",fs.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});class a3 extends Hg{constructor(...t){super(...t),_a(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(Ng(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const r=Ng(t),o=this.state;o._delta=fs.sub(r,o._values),fs.addTo(o._movement,o._delta),this.computeValues(r),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const TA=Ds(Ds({},Sd),{},{mouseOnly:(i=!0)=>i});class BA extends Hg{constructor(...t){super(...t),_a(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const r=this.state,o=Xx(t);r._delta=fs.sub(o,r._values),fs.addTo(r._movement,r._delta),this.computeValues(o),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const IA=Sd;class RA extends Hg{constructor(...t){super(...t),_a(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=K_(t),fs.addTo(r._movement,r._delta),wA(r),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const FA=Sd;class OA extends Hg{constructor(...t){super(...t),_a(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(Ng(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const o=Ng(t);r._movement=r._delta=fs.sub(o,r._values),this.computeValues(o),this.compute(t),r.delta=r.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const DA=Ds(Ds({},Sd),{},{mouseOnly:(i=!0)=>i}),Nm=new Map,jm=new Map;function Cf(i){Nm.set(i.key,i.engine),jm.set(i.key,i.resolver)}const Ea={key:"drag",engine:z1,resolver:n3},ba={key:"hover",engine:OA,resolver:DA},Hm={key:"move",engine:a3,resolver:TA},l3={key:"pinch",engine:o3,resolver:s3},c3={key:"scroll",engine:BA,resolver:IA},p3={key:"wheel",engine:RA,resolver:FA};function u3(i,t){if(i==null)return{};var r={},o=Object.keys(i),l,p;for(p=0;p<o.length;p++)l=o[p],!(t.indexOf(l)>=0)&&(r[l]=i[l]);return r}function d3(i,t){if(i==null)return{};var r=u3(i,t),o,l;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);for(l=0;l<p.length;l++)o=p[l],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(i,o)&&(r[o]=i[o])}return r}const h3={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=lc.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:t=!1}={}){return{passive:i,capture:t}},transform(i){return i}},f3=["target","eventOptions","window","enabled","transform"];function Wm(i={},t){const r={};for(const[o,l]of Object.entries(t))switch(typeof l){case"function":r[o]=l.call(r,i[o],o,i);break;case"object":r[o]=Wm(i[o],l);break;case"boolean":l&&(r[o]=i[o]);break}return r}function g3(i,t,r={}){const o=i,{target:l,eventOptions:p,window:h,enabled:f,transform:A}=o,_=d3(o,f3);if(r.shared=Wm({target:l,eventOptions:p,window:h,enabled:f,transform:A},h3),t){const b=jm.get(t);r[t]=Wm(Ds({shared:r.shared},_),b)}else for(const b in _){const T=jm.get(b);T&&(r[b]=Wm(Ds({shared:r.shared},_[b]),T))}return r}class PA{constructor(t,r){_a(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,o,l,p){const h=this._listeners,f=Hx(r,o),A=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},_=Ds(Ds({},A),p);t.addEventListener(f,l,_);const b=()=>{t.removeEventListener(f,l,_),h.delete(b)};return h.add(b),b}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class m3{constructor(){_a(this,"_timeouts",new Map)}add(t,r,o=140,...l){this.remove(t),this._timeouts.set(t,window.setTimeout(r,o,...l))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class y3{constructor(t){_a(this,"gestures",new Set),_a(this,"_targetEventStore",new PA(this)),_a(this,"gestureEventStores",{}),_a(this,"gestureTimeoutStores",{}),_a(this,"handlers",{}),_a(this,"config",{}),_a(this,"pointerIds",new Set),_a(this,"touchIds",new Set),_a(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),A3(this,t)}setEventIds(t){if(k1(t))return this.touchIds=new Set(Qx(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=g3(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,o={};let l;if(!(r.target&&(l=r.target(),!l))){if(r.enabled){for(const h of this.gestures){const f=this.config[h],A=LA(o,f.eventOptions,!!l);if(f.enabled){const _=Nm.get(h);new _(this,t,h).bind(A)}}const p=LA(o,r.eventOptions,!!l);for(const h in this.nativeHandlers)p(h,"",f=>this.nativeHandlers[h](Ds(Ds({},this.state.shared),{},{event:f,args:t})),void 0,!0)}for(const p in o)o[p]=Ep(...o[p]);if(!l)return o;for(const p in o){const{device:h,capture:f,passive:A}=jx(p);this._targetEventStore.add(l,h,"",o[p],{capture:f,passive:A})}}}}function Sf(i,t){i.gestures.add(t),i.gestureEventStores[t]=new PA(i,t),i.gestureTimeoutStores[t]=new m3}function A3(i,t){t.drag&&Sf(i,"drag"),t.wheel&&Sf(i,"wheel"),t.scroll&&Sf(i,"scroll"),t.move&&Sf(i,"move"),t.pinch&&Sf(i,"pinch"),t.hover&&Sf(i,"hover")}const LA=(i,t,r)=>(o,l,p,h={},f=!1)=>{var A,_;const b=(A=h.capture)!==null&&A!==void 0?A:t.capture,T=(_=h.passive)!==null&&_!==void 0?_:t.passive;let B=f?o:Ux(o,l,b);r&&T&&(B+="Passive"),i[B]=i[B]||[],i[B].push(p)},v3=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function _3(i){const t={},r={},o=new Set;for(let l in i)v3.test(l)?(o.add(RegExp.lastMatch),r[l]=i[l]):t[l]=i[l];return[r,t,o]}function wf(i,t,r,o,l,p){if(!i.has(r)||!Nm.has(o))return;const h=r+"Start",f=r+"End",A=_=>{let b;return _.first&&h in t&&t[h](_),r in t&&(b=t[r](_)),_.last&&f in t&&t[f](_),b};l[o]=A,p[o]=p[o]||{}}function E3(i,t){const[r,o,l]=_3(i),p={};return wf(l,r,"onDrag","drag",p,t),wf(l,r,"onWheel","wheel",p,t),wf(l,r,"onScroll","scroll",p,t),wf(l,r,"onPinch","pinch",p,t),wf(l,r,"onMove","move",p,t),wf(l,r,"onHover","hover",p,t),{handlers:p,config:t,nativeHandlers:o}}function Sh(i,t={},r,o){const l=d.useMemo(()=>new y3(i),[]);if(l.applyHandlers(i,o),l.applyConfig(t,r),d.useEffect(l.effect.bind(l)),d.useEffect(()=>l.clean.bind(l),[]),t.target===void 0)return l.bind.bind(l)}function Kx(i,t){return registerAction(dragAction),Sh({drag:i},t||{},"drag")}function Jx(i,t){return registerAction(pinchAction),Sh({pinch:i},t||{},"pinch")}function qx(i,t){return registerAction(wheelAction),Sh({wheel:i},t||{},"wheel")}function Zx(i,t){return registerAction(scrollAction),Sh({scroll:i},t||{},"scroll")}function $x(i,t){return registerAction(moveAction),Sh({move:i},t||{},"move")}function eM(i,t){return registerAction(hoverAction),Sh({hover:i},t||{},"hover")}function b3(i){return i.forEach(Cf),function(r,o){const{handlers:l,nativeHandlers:p,config:h}=E3(r,o||{});return Sh(l,h,void 0,p)}}function x3(i,t){return b3([Ea,l3,c3,p3,Hm,ba])(i,t||{})}function M3({enabled:i=!0,snap:t,global:r,domElement:o,cursor:l=!0,children:p,speed:h=1,rotation:f=[0,0,0],zoom:A=1,polar:_=[0,Math.PI/2],azimuth:b=[-1/0,1/0],config:T={mass:1,tension:170,friction:26}}){const B=(0,E.z)(Q=>Q.events),F=(0,E.z)(Q=>Q.gl),P=o||B.connected||F.domElement,{size:L}=(0,E.z)(),O=d.useMemo(()=>[f[0]+_[0],f[0]+_[1]],[f[0],_[0],_[1]]),G=d.useMemo(()=>[f[1]+b[0],f[1]+b[1]],[f[1],b[0],b[1]]),D=d.useMemo(()=>[s.MathUtils.clamp(f[0],...O),s.MathUtils.clamp(f[1],...G),f[2]],[f[0],f[1],f[2],O,G]),[k,N]=Qt(()=>({scale:1,rotation:D,config:T}));d.useEffect(()=>void N.start({scale:1,rotation:D,config:T}),[D]),d.useEffect(()=>{if(r&&l&&i)return P.style.cursor="grab",F.domElement.style.cursor="",()=>{P.style.cursor="default",F.domElement.style.cursor="default"}},[r,l,P,i]);const V=x3({onHover:({last:Q})=>{l&&!r&&i&&(P.style.cursor=Q?"auto":"grab")},onDrag:({down:Q,delta:[K,X],memo:[oe,ae]=k.rotation.animation.to||D})=>{if(!i)return[X,K];l&&(P.style.cursor=Q?"grabbing":"grab"),K=s.MathUtils.clamp(ae+K/L.width*Math.PI*h,...G),X=s.MathUtils.clamp(oe+X/L.height*Math.PI*h,...O);const ge=t&&!Q&&typeof t!="boolean"?t:T;return N.start({scale:Q&&X>O[1]/2?A:1,rotation:t&&!Q?D:[X,K,0],config:ie=>ie==="scale"?$o(jn({},ge),{friction:ge.friction*3}):ge}),[X,K]}},{target:r?P:void 0});return d.createElement(Ox.group,(0,S.Z)({},V==null?void 0:V(),k),p)}var Wl=y(25108),C3=Object.defineProperty,kA=Object.getOwnPropertySymbols,S3=Object.prototype.hasOwnProperty,w3=Object.prototype.propertyIsEnumerable,zA=(i,t,r)=>t in i?C3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,T3=(i,t)=>{for(var r in t||(t={}))S3.call(t,r)&&zA(i,r,t[r]);if(kA)for(var r of kA(t))w3.call(t,r)&&zA(i,r,t[r]);return i};const tM=(i,t)=>(r,o,l)=>(l.dispatch=p=>(r(h=>i(h,p),!1,p),p),l.dispatchFromDevtools=!0,T3({dispatch:(...p)=>l.dispatch(...p)},t));function nM(i,t){return(r,o,l)=>{var p;let h=!1;typeof t=="string"&&!h&&(Wl.warn("[zustand devtools middleware]: passing `name` as directly will be not allowed in next majorpass the `name` in an object `{ name: ... }` instead"),h=!0);const f=t===void 0?{name:void 0,anonymousActionType:void 0}:typeof t=="string"?{name:t}:t;typeof((p=f==null?void 0:f.serialize)==null?void 0:p.options)!="undefined"&&Wl.warn("[zustand devtools middleware]: `serialize.options` is deprecated, just use `serialize`");let A;try{A=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(L){}if(!A)return typeof window!="undefined"&&Wl.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),i(r,o,l);let _=Object.create(A.connect(f)),b=!1;Object.defineProperty(l,"devtools",{get:()=>(b||(Wl.warn("[zustand devtools middleware] `devtools` property on the store is deprecated it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),b=!0),_),set:L=>{b||(Wl.warn("[zustand devtools middleware] `api.devtools` is deprecated, it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),b=!0),_=L}});let T=!1;Object.defineProperty(_,"prefix",{get:()=>(T||(Wl.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+f.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0),""),set:()=>{T||(Wl.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+f.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0)}});let B=!0;l.setState=(L,O,G)=>{r(L,O),B&&_.send(G===void 0?{type:f.anonymousActionType||"anonymous"}:typeof G=="string"?{type:G}:G,o())};const F=(...L)=>{const O=B;B=!1,r(...L),B=O},P=i(l.setState,o,l);if(_.init(P),l.dispatchFromDevtools&&typeof l.dispatch=="function"){let L=!1;const O=l.dispatch;l.dispatch=(...G)=>{G[0].type==="__setState"&&!L&&(Wl.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),L=!0),O(...G)}}return _.subscribe(L=>{var O;switch(L.type){case"ACTION":if(typeof L.payload!="string"){Wl.error("[zustand devtools middleware] Unsupported action format");return}return N1(L.payload,G=>{if(G.type==="__setState"){F(G.state);return}l.dispatchFromDevtools&&typeof l.dispatch=="function"&&l.dispatch(G)});case"DISPATCH":switch(L.payload.type){case"RESET":return F(P),_.init(l.getState());case"COMMIT":return _.init(l.getState());case"ROLLBACK":return N1(L.state,G=>{F(G),_.init(l.getState())});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return N1(L.state,G=>{F(G)});case"IMPORT_STATE":{const{nextLiftedState:G}=L.payload,D=(O=G.computedStates.slice(-1)[0])==null?void 0:O.state;if(!D)return;F(D),_.send(null,G);return}case"PAUSE_RECORDING":return B=!B}return}}),P}}const N1=(i,t)=>{let r;try{r=JSON.parse(i)}catch(o){Wl.error("[zustand devtools middleware] Could not parse the received json",o)}r!==void 0&&t(r)},B3=i=>(t,r,o)=>{const l=o.subscribe;return o.subscribe=(h,f,A)=>{let _=h;if(f){const b=(A==null?void 0:A.equalityFn)||Object.is;let T=h(o.getState());_=B=>{const F=h(B);if(!b(T,F)){const P=T;f(T=F,P)}},A!=null&&A.fireImmediately&&f(T,T)}return l(_)},i(t,r,o)},rM=(i,t)=>(r,o,l)=>Object.assign({},i,t(r,o,l));var I3=Object.defineProperty,GA=Object.getOwnPropertySymbols,j1=Object.prototype.hasOwnProperty,UA=Object.prototype.propertyIsEnumerable,NA=(i,t,r)=>t in i?I3(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ju=(i,t)=>{for(var r in t||(t={}))j1.call(t,r)&&NA(i,r,t[r]);if(GA)for(var r of GA(t))UA.call(t,r)&&NA(i,r,t[r]);return i};const Vg=i=>t=>{try{const r=i(t);return r instanceof Promise?r:{then(o){return Vg(o)(r)},catch(o){return this}}}catch(r){return{then(o){return this},catch(o){return Vg(o)(r)}}}},iM=(i,t)=>(r,o,l)=>{let p=ju({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:O=>O,version:0,merge:(O,G)=>ju(ju({},G),O)},t);(p.blacklist||p.whitelist)&&Wl.warn(`The ${p.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let h=!1;const f=new Set,A=new Set;let _;try{_=p.getStorage()}catch(O){}if(_)_.removeItem||Wl.warn(`[zustand persist middleware] The given storage for item '${p.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return i((...O)=>{Wl.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),r(...O)},o,l);const b=Vg(p.serialize),T=()=>{const O=p.partialize(ju({},o()));p.whitelist&&Object.keys(O).forEach(k=>{var N;!((N=p.whitelist)!=null&&N.includes(k))&&delete O[k]}),p.blacklist&&p.blacklist.forEach(k=>delete O[k]);let G;const D=b({state:O,version:p.version}).then(k=>_.setItem(p.name,k)).catch(k=>{G=k});if(G)throw G;return D},B=l.setState;l.setState=(O,G)=>{B(O,G),T()};const F=i((...O)=>{r(...O),T()},o,l);let P;const L=()=>{var O;if(!_)return;h=!1,f.forEach(D=>D(o()));const G=((O=p.onRehydrateStorage)==null?void 0:O.call(p,o()))||void 0;return Vg(_.getItem.bind(_))(p.name).then(D=>{if(D)return p.deserialize(D)}).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==p.version){if(p.migrate)return p.migrate(D.state,D.version);Wl.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return D.state}).then(D=>{var k;return P=p.merge(D,(k=o())!=null?k:F),r(P,!0),T()}).then(()=>{G==null||G(P,void 0),h=!0,A.forEach(D=>D(P))}).catch(D=>{G==null||G(void 0,D)})};return l.persist={setOptions:O=>{p=ju(ju({},p),O),O.getStorage&&(_=O.getStorage())},clearStorage:()=>{var O;(O=_==null?void 0:_.removeItem)==null||O.call(_,p.name)},rehydrate:()=>L(),hasHydrated:()=>h,onHydrate:O=>(f.add(O),()=>{f.delete(O)}),onFinishHydration:O=>(A.add(O),()=>{A.delete(O)})},L(),P||F},jA=d.createContext(null);function R3({map:i,children:t,onChange:r,domElement:o}){const l=i.map(A=>A.name+A.keys).join("-"),p=d.useMemo(()=>(0,Ot.Z)(B3(()=>i.reduce((A,_)=>$o(jn({},A),{[_.name]:!1}),{}))),[l]),h=d.useMemo(()=>[p.subscribe,p.getState,p],[l]),f=p.setState;return d.useEffect(()=>{const _=i.map(({name:F,keys:P,up:L})=>({keys:P,up:L,fn:O=>{f({[F]:O}),r&&r(F,O,h[1]())}})).reduce((F,{keys:P,fn:L,up:O=!0})=>(P.forEach(G=>F[G]={fn:L,pressed:!1,up:O}),F),{}),b=({key:F,code:P})=>{const L=_[F]||_[P];if(!L)return;const{fn:O,pressed:G,up:D}=L;L.pressed=!0,(D||!G)&&O(!0)},T=({key:F,code:P})=>{const L=_[F]||_[P];if(!L)return;const{fn:O,up:G}=L;L.pressed=!1,G&&O(!1)},B=o||window;return B.addEventListener("keydown",b,{passive:!0}),B.addEventListener("keyup",T,{passive:!0}),()=>{B.removeEventListener("keydown",b),B.removeEventListener("keyup",T)}},[o,l]),d.createElement(jA.Provider,{value:h,children:t})}function HA(i){const[t,r,o]=d.useContext(jA);return i?o(i):[t,r]}var F3=y(25108);const H1=new s.Frustum,W1=new s.Vector3,Tf=new s.Vector3,bp=new s.Vector3,cc=new s.Vector3,xp=new s.Vector3,eu=new s.Vector3,Hu=new s.Vector3,wh=new s.Vector3,Qg=new s.Vector3,Xg=new s.Vector3,Vm=new s.Vector3,Bf=new s.Vector3,Yg=new s.Vector3,If=new s.Vector3;class O3{constructor(t,r,o){this.camera=t,this.scene=r,this.startPoint=new s.Vector3,this.endPoint=new s.Vector3,this.collection=[],this.deep=o||Number.MAX_VALUE}select(t,r){return this.startPoint=t||this.startPoint,this.endPoint=r||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(H1,this.scene),this.collection}updateFrustum(t,r){if(t=t||this.startPoint,r=r||this.endPoint,t.x===r.x&&(r.x+=Number.EPSILON),t.y===r.y&&(r.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Tf.copy(t),Tf.x=Math.min(t.x,r.x),Tf.y=Math.max(t.y,r.y),r.x=Math.max(t.x,r.x),r.y=Math.min(t.y,r.y),bp.setFromMatrixPosition(this.camera.matrixWorld),cc.copy(Tf),xp.set(r.x,Tf.y,0),eu.copy(r),Hu.set(Tf.x,r.y,0),cc.unproject(this.camera),xp.unproject(this.camera),eu.unproject(this.camera),Hu.unproject(this.camera),Bf.copy(cc).sub(bp),Yg.copy(xp).sub(bp),If.copy(eu).sub(bp),Bf.normalize(),Yg.normalize(),If.normalize(),Bf.multiplyScalar(this.deep),Yg.multiplyScalar(this.deep),If.multiplyScalar(this.deep),Bf.add(bp),Yg.add(bp),If.add(bp);var o=H1.planes;o[0].setFromCoplanarPoints(bp,cc,xp),o[1].setFromCoplanarPoints(bp,xp,eu),o[2].setFromCoplanarPoints(eu,Hu,bp),o[3].setFromCoplanarPoints(Hu,cc,bp),o[4].setFromCoplanarPoints(xp,eu,Hu),o[5].setFromCoplanarPoints(If,Yg,Bf),o[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const l=Math.min(t.x,r.x),p=Math.max(t.y,r.y),h=Math.max(t.x,r.x),f=Math.min(t.y,r.y);cc.set(l,p,-1),xp.set(h,p,-1),eu.set(h,f,-1),Hu.set(l,f,-1),wh.set(l,p,1),Qg.set(h,p,1),Xg.set(h,f,1),Vm.set(l,f,1),cc.unproject(this.camera),xp.unproject(this.camera),eu.unproject(this.camera),Hu.unproject(this.camera),wh.unproject(this.camera),Qg.unproject(this.camera),Xg.unproject(this.camera),Vm.unproject(this.camera);var o=H1.planes;o[0].setFromCoplanarPoints(cc,wh,Qg),o[1].setFromCoplanarPoints(xp,Qg,Xg),o[2].setFromCoplanarPoints(Xg,Vm,Hu),o[3].setFromCoplanarPoints(Vm,wh,cc),o[4].setFromCoplanarPoints(xp,eu,Hu),o[5].setFromCoplanarPoints(Xg,Qg,wh),o[5].normal.multiplyScalar(-1)}else F3.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(t,r){if((r.isMesh||r.isLine||r.isPoints)&&r.material!==void 0&&(r.geometry.boundingSphere===null&&r.geometry.computeBoundingSphere(),W1.copy(r.geometry.boundingSphere.center),W1.applyMatrix4(r.matrixWorld),t.containsPoint(W1)&&this.collection.push(r)),r.children.length>0)for(let o=0;o<r.children.length;o++)this.searchChildInFrustum(t,r.children[o])}}function D3(i,t){if(Object.is(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;const r=Object.keys(i);if(r.length!==Object.keys(t).length)return!1;for(let o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!Object.is(i[r[o]],t[r[o]]))return!1;return!0}const WA=d.createContext([]);function P3(_){var b=_,{box:i,multiple:t,children:r,onChange:o,onChangePointerUp:l,border:p="1px solid #55aaff",backgroundColor:h="rgba(75, 160, 255, 0.1)",filter:f=T=>T}=b,A=mn(b,["box","multiple","children","onChange","onChangePointerUp","border","backgroundColor","filter"]);const[T,B]=d.useState(!1),{setEvents:F,camera:P,raycaster:L,gl:O,controls:G,size:D,get:k}=(0,E.z)(),[N,V]=d.useState(!1),[Q,K]=d.useReducer((ge,{object:ie,shift:_e})=>ie===void 0?[]:Array.isArray(ie)?ie:_e?ge.includes(ie)?ge.filter(me=>me!==ie):[ie,...ge]:ge[0]===ie?[]:[ie],[]);d.useEffect(()=>{T?o==null||o(Q):l==null||l(Q)},[Q,T]);const X=d.useCallback(ge=>{ge.stopPropagation(),K({object:f([ge.object])[0],shift:t&&ge.shiftKey})},[]),oe=d.useCallback(ge=>!N&&K({}),[N]),ae=d.useRef(null);return d.useEffect(()=>{if(!i||!t)return;const ge=new O3(P,ae.current),ie=document.createElement("div");ie.style.pointerEvents="none",ie.style.border=p,ie.style.backgroundColor=h,ie.style.position="fixed";const _e=new s.Vector2,me=new s.Vector2,we=new s.Vector2,ke=k().events.enabled,De=G==null?void 0:G.enabled;let Ne=!1;function Ge(be,je){const{offsetX:Et,offsetY:Ft}=be,{width:Tt,height:pt}=D;je.set(Et/Tt*2-1,-(Ft/pt)*2+1)}function Ye(be){var je;G&&(G.enabled=!1),F({enabled:!1}),B(Ne=!0),(je=O.domElement.parentElement)==null||je.appendChild(ie),ie.style.left=`${be.clientX}px`,ie.style.top=`${be.clientY}px`,ie.style.width="0px",ie.style.height="0px",_e.x=be.clientX,_e.y=be.clientY}function Se(be){we.x=Math.max(_e.x,be.clientX),we.y=Math.max(_e.y,be.clientY),me.x=Math.min(_e.x,be.clientX),me.y=Math.min(_e.y,be.clientY),ie.style.left=`${me.x}px`,ie.style.top=`${me.y}px`,ie.style.width=`${we.x-me.x}px`,ie.style.height=`${we.y-me.y}px`}function xe(){if(Ne){var be;G&&(G.enabled=De),F({enabled:ke}),B(Ne=!1),(be=ie.parentElement)==null||be.removeChild(ie)}}function Ee(be){be.shiftKey&&(Ye(be),Ge(be,ge.startPoint))}let le=[];function ye(be){if(Ne){Se(be),Ge(be,ge.endPoint);const je=ge.select().sort(Et=>Et.uuid).filter(Et=>Et.isMesh);D3(je,le)||(le=je,K({object:f(je)}))}}function Be(be){Ne&&xe()}return document.addEventListener("pointerdown",Ee,{passive:!0}),document.addEventListener("pointermove",ye,{passive:!0,capture:!0}),document.addEventListener("pointerup",Be,{passive:!0}),()=>{document.removeEventListener("pointerdown",Ee),document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",Be)}},[D.width,D.height,L,P,G,O]),d.createElement("group",(0,S.Z)({ref:ae,onClick:X,onPointerOver:()=>V(!0),onPointerOut:()=>V(!1),onPointerMissed:oe},A),d.createElement(WA.Provider,{value:Q},r))}function L3(){return d.useContext(WA)}const k3=d.forwardRef(function(f,h){var A=f,{follow:t=!0,lockX:r=!1,lockY:o=!1,lockZ:l=!1}=A,p=mn(A,["follow","lockX","lockY","lockZ"]);const _=d.useRef();return(0,E.A)(({camera:b})=>{if(!t||!_.current)return;const T=_.current.rotation.clone();b.getWorldQuaternion(_.current.quaternion),r&&(_.current.rotation.x=T.x),o&&(_.current.rotation.y=T.y),l&&(_.current.rotation.z=T.z)}),d.createElement("group",(0,S.Z)({ref:fr([_,h])},p))}),z3=d.forwardRef((l,o)=>{var p=l,{children:i,depth:t=-1}=p,r=mn(p,["children","depth"]);const h=d.useRef(null);return(0,E.A)(({camera:f})=>{h.current.quaternion.copy(f.quaternion),h.current.position.copy(f.position)}),d.createElement("group",(0,S.Z)({ref:fr([o,h])},r),d.createElement("group",{"position-z":-t},i))});var VA=y(25108);const QA=new s.Box3,Qm=new s.Vector3;class Xm extends s.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],r=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],o=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(o),this.setAttribute("position",new s.Float32BufferAttribute(t,3)),this.setAttribute("uv",new s.Float32BufferAttribute(r,2))}applyMatrix4(t){const r=this.attributes.instanceStart,o=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(t),o.applyMatrix4(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const o=new s.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceStart",new s.InterleavedBufferAttribute(o,3,0)),this.setAttribute("instanceEnd",new s.InterleavedBufferAttribute(o,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const o=new s.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceColorStart",new s.InterleavedBufferAttribute(o,3,0)),this.setAttribute("instanceColorEnd",new s.InterleavedBufferAttribute(o,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new s.WireframeGeometry(t.geometry)),this}fromLineSegments(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new s.Box3);const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;t!==void 0&&r!==void 0&&(this.boundingBox.setFromBufferAttribute(t),QA.setFromBufferAttribute(r),this.boundingBox.union(QA))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s.Sphere),this.boundingBox===null&&this.computeBoundingBox();const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(t!==void 0&&r!==void 0){const o=this.boundingSphere.center;this.boundingBox.getCenter(o);let l=0;for(let p=0,h=t.count;p<h;p++)Qm.fromBufferAttribute(t,p),l=Math.max(l,o.distanceToSquared(Qm)),Qm.fromBufferAttribute(r,p),l=Math.max(l,o.distanceToSquared(Qm));this.boundingSphere.radius=Math.sqrt(l),isNaN(this.boundingSphere.radius)&&VA.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return VA.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}class Ym extends s.ShaderMaterial{constructor(t){super({type:"LineMaterial",uniforms:s.UniformsUtils.clone(s.UniformsUtils.merge([s.UniformsLib.common,s.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new s.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(s.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(r){this.uniforms.diffuse.value=r}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(r){r===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(r){this.uniforms.linewidth.value=r}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(r){!!r!="USE_DASH"in this.defines&&(this.needsUpdate=!0),r===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(r){this.uniforms.dashScale.value=r}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(r){this.uniforms.dashSize.value=r}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(r){this.uniforms.dashOffset.value=r}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(r){this.uniforms.gapSize.value=r}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(r){this.uniforms.resolution.value.copy(r)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(r){!!r!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),r===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}var XA=y(25108);const V1=new s.Vector3,YA=new s.Vector3,Na=new s.Vector4,ja=new s.Vector4,tu=new s.Vector4,Q1=new s.Vector3,X1=new s.Matrix4,Ha=new s.Line3,KA=new s.Vector3,Rf=new s.Box3,Ff=new s.Sphere,nu=new s.Vector4;let ru,Y1,JA,Th;function qA(i,t,r){return nu.set(0,0,-t,1).applyMatrix4(i.projectionMatrix),nu.multiplyScalar(1/nu.w),nu.x=Th/r.width,nu.y=Th/r.height,nu.applyMatrix4(i.projectionMatrixInverse),nu.multiplyScalar(1/nu.w),Math.abs(Math.max(nu.x,nu.y))}function xa(i,t){for(let r=0,o=Y1.count;r<o;r++){Ha.start.fromBufferAttribute(Y1,r),Ha.end.fromBufferAttribute(JA,r);const l=new s.Vector3,p=new s.Vector3;ru.distanceSqToSegment(Ha.start,Ha.end,p,l),p.distanceTo(l)<Th*.5&&t.push({point:p,pointOnLine:l,distance:ru.origin.distanceTo(p),object:i,face:null,faceIndex:r,uv:null,uv2:null})}}function ZA(i,t,r){const o=t.projectionMatrix,p=i.material.resolution,h=i.matrixWorld,f=i.geometry,A=f.attributes.instanceStart,_=f.attributes.instanceEnd,b=-t.near;ru.at(1,tu),tu.w=1,tu.applyMatrix4(t.matrixWorldInverse),tu.applyMatrix4(o),tu.multiplyScalar(1/tu.w),tu.x*=p.x/2,tu.y*=p.y/2,tu.z=0,Q1.copy(tu),X1.multiplyMatrices(t.matrixWorldInverse,h);for(let T=0,B=A.count;T<B;T++){if(Na.fromBufferAttribute(A,T),ja.fromBufferAttribute(_,T),Na.w=1,ja.w=1,Na.applyMatrix4(X1),ja.applyMatrix4(X1),Na.z>b&&ja.z>b)continue;if(Na.z>b){const D=Na.z-ja.z,k=(Na.z-b)/D;Na.lerp(ja,k)}else if(ja.z>b){const D=ja.z-Na.z,k=(ja.z-b)/D;ja.lerp(Na,k)}Na.applyMatrix4(o),ja.applyMatrix4(o),Na.multiplyScalar(1/Na.w),ja.multiplyScalar(1/ja.w),Na.x*=p.x/2,Na.y*=p.y/2,ja.x*=p.x/2,ja.y*=p.y/2,Ha.start.copy(Na),Ha.start.z=0,Ha.end.copy(ja),Ha.end.z=0;const P=Ha.closestPointToPointParameter(Q1,!0);Ha.at(P,KA);const L=s.MathUtils.lerp(Na.z,ja.z,P),O=L>=-1&&L<=1,G=Q1.distanceTo(KA)<Th*.5;if(O&&G){Ha.start.fromBufferAttribute(A,T),Ha.end.fromBufferAttribute(_,T),Ha.start.applyMatrix4(h),Ha.end.applyMatrix4(h);const D=new s.Vector3,k=new s.Vector3;ru.distanceSqToSegment(Ha.start,Ha.end,k,D),r.push({point:k,pointOnLine:D,distance:ru.origin.distanceTo(k),object:i,face:null,faceIndex:T,uv:null,uv2:null})}}}class K1 extends s.Mesh{constructor(t=new Xm,r=new Ym({color:Math.random()*16777215})){super(t,r),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,r=t.attributes.instanceStart,o=t.attributes.instanceEnd,l=new Float32Array(2*r.count);for(let h=0,f=0,A=r.count;h<A;h++,f+=2)V1.fromBufferAttribute(r,h),YA.fromBufferAttribute(o,h),l[f]=f===0?0:l[f-1],l[f+1]=l[f]+V1.distanceTo(YA);const p=new s.InstancedInterleavedBuffer(l,2,1);return t.setAttribute("instanceDistanceStart",new s.InterleavedBufferAttribute(p,1,0)),t.setAttribute("instanceDistanceEnd",new s.InterleavedBufferAttribute(p,1,1)),this}raycast(t,r){const o=this.material.worldUnits,l=t.camera;l===null&&!o&&XA.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const p=t.params.Line2!==void 0&&t.params.Line2.threshold||0;ru=t.ray;const h=this.matrixWorld,f=this.geometry,A=this.material;Th=A.linewidth+p,Y1=f.attributes.instanceStart,JA=f.attributes.instanceEnd,f.boundingSphere===null&&f.computeBoundingSphere(),Ff.copy(f.boundingSphere).applyMatrix4(h);let _;if(o)_=Th*.5;else{const T=Math.max(l.near,Ff.distanceToPoint(ru.origin));_=qA(l,T,A.resolution)}if(Ff.radius+=_,ru.intersectsSphere(Ff)===!1)return;f.boundingBox===null&&f.computeBoundingBox(),Rf.copy(f.boundingBox).applyMatrix4(h);let b;if(o)b=Th*.5;else{const T=Math.max(l.near,Rf.distanceToPoint(ru.origin));b=qA(l,T,A.resolution)}Rf.expandByScalar(b),ru.intersectsBox(Rf)!==!1&&(o?xa(this,r):ZA(this,l,r))}}class Bh extends Xm{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const r=t.length-3,o=new Float32Array(2*r);for(let l=0;l<r;l+=3)o[2*l]=t[l],o[2*l+1]=t[l+1],o[2*l+2]=t[l+2],o[2*l+3]=t[l+3],o[2*l+4]=t[l+4],o[2*l+5]=t[l+5];return super.setPositions(o),this}setColors(t){const r=t.length-3,o=new Float32Array(2*r);for(let l=0;l<r;l+=3)o[2*l]=t[l],o[2*l+1]=t[l+1],o[2*l+2]=t[l+2],o[2*l+3]=t[l+3],o[2*l+4]=t[l+4],o[2*l+5]=t[l+5];return super.setColors(o),this}fromLine(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}}class $A extends K1{constructor(t=new Bh,r=new Ym({color:Math.random()*16777215})){super(t,r),this.isLine2=!0,this.type="Line2"}}const Nc=d.forwardRef(function(b,_){var T=b,{points:t,color:r="black",vertexColors:o,linewidth:l,lineWidth:p,segments:h,dashed:f}=T,A=mn(T,["points","color","vertexColors","linewidth","lineWidth","segments","dashed"]);const B=(0,E.z)(O=>O.size),F=d.useMemo(()=>h?new K1:new $A,[h]),[P]=d.useState(()=>new Ym),L=d.useMemo(()=>{const O=h?new Xm:new Bh,G=t.map(D=>{const k=Array.isArray(D);return D instanceof s.Vector3?[D.x,D.y,D.z]:D instanceof s.Vector2?[D.x,D.y,0]:k&&D.length===3?[D[0],D[1],D[2]]:k&&D.length===2?[D[0],D[1],0]:D});if(O.setPositions(G.flat()),o){const D=o.map(k=>k instanceof s.Color?k.toArray():k);O.setColors(D.flat())}return O},[t,h,o]);return d.useLayoutEffect(()=>{F.computeLineDistances()},[t,F]),d.useLayoutEffect(()=>{f?P.defines.USE_DASH="":delete P.defines.USE_DASH,P.needsUpdate=!0},[f,P]),d.useEffect(()=>()=>L.dispose(),[L]),d.createElement("primitive",(0,S.Z)({object:F,ref:_},A),d.createElement("primitive",{object:L,attach:"geometry"}),d.createElement("primitive",(0,S.Z)({object:P,attach:"material",color:r,vertexColors:!!o,resolution:[B.width,B.height],linewidth:l!=null?l:p,dashed:f},A)))}),ev=new s.Vector3,G3=d.forwardRef(function(f,h){var A=f,{start:t=[0,0,0],end:r=[0,0,0],mid:o,segments:l=20}=A,p=mn(A,["start","end","mid","segments"]);const _=d.useRef(null),[b]=d.useState(()=>new s.QuadraticBezierCurve3(void 0,void 0,void 0)),T=d.useCallback((F,P,L,O=20)=>(F instanceof s.Vector3?b.v0.copy(F):b.v0.set(...F),P instanceof s.Vector3?b.v2.copy(P):b.v2.set(...P),L instanceof s.Vector3?b.v1.copy(L):Array.isArray(L)?b.v1.set(...L):b.v1.copy(b.v0.clone().add(b.v2.clone().sub(b.v0)).add(ev.set(0,b.v0.y-b.v2.y,0))),b.getPoints(O)),[]);d.useLayoutEffect(()=>{_.current.setPoints=(F,P,L)=>{const O=T(F,P,L);_.current.geometry&&_.current.geometry.setPositions(O.map(G=>G.toArray()).flat())}},[]);const B=d.useMemo(()=>T(t,r,o,l),[t,r,o,l]);return d.createElement(Nc,(0,S.Z)({ref:fr([_,h]),points:B},p))}),U3=d.forwardRef(function(A,f){var _=A,{start:t,end:r,midA:o,midB:l,segments:p=20}=_,h=mn(_,["start","end","midA","midB","segments"]);const b=d.useMemo(()=>{const T=t instanceof s.Vector3?t:new s.Vector3(...t),B=r instanceof s.Vector3?r:new s.Vector3(...r),F=o instanceof s.Vector3?o:new s.Vector3(...o),P=l instanceof s.Vector3?l:new s.Vector3(...l);return new s.CubicBezierCurve3(T,F,P,B).getPoints(p)},[t,r,o,l,p]);return d.createElement(Nc,(0,S.Z)({ref:f,points:b},h))}),N3=d.forwardRef(function(_,A){var b=_,{points:t,closed:r=!1,curveType:o="centripetal",tension:l=.5,segments:p=20,vertexColors:h}=b,f=mn(b,["points","closed","curveType","tension","segments","vertexColors"]);const T=d.useMemo(()=>{const P=t.map(L=>L instanceof s.Vector3?L:new s.Vector3(...L));return new s.CatmullRomCurve3(P,r,o,l)},[t,r,o,l]),B=d.useMemo(()=>T.getPoints(p),[T,p]),F=d.useMemo(()=>{if(!h||h.length<2)return;if(h.length===p+1)return h;const P=h.map(G=>G instanceof s.Color?G:new s.Color(...G));r&&P.push(P[0].clone());const L=[P[0]],O=p/(P.length-1);for(let G=1;G<p;G++){const D=G%O/O,k=Math.floor(G/O);L.push(P[k].clone().lerp(P[k+1],D))}return L.push(P[P.length-1]),L},[h,p]);return d.createElement(Nc,(0,S.Z)({ref:A,points:B,vertexColors:F},f))}),tv=d.forwardRef((h,p)=>{var f=h,{url:i,distance:t=1,loop:r=!0,autoplay:o}=f,l=mn(f,["url","distance","loop","autoplay"]);const A=d.useRef(),_=(0,E.z)(({camera:B})=>B),[b]=d.useState(()=>new s.AudioListener),T=(0,E.D)(s.AudioLoader,i);return d.useEffect(()=>{const B=A.current;B&&(B.setBuffer(T),B.setRefDistance(t),B.setLoop(r),o&&!B.isPlaying&&B.play())},[T,_,t,r]),d.useEffect(()=>{const B=A.current;return _.add(b),()=>{_.remove(b),B&&(B.isPlaying&&B.stop(),B.source&&B.source._connected&&B.disconnect())}},[]),d.createElement("positionalAudio",(0,S.Z)({ref:fr([A,p]),args:[b]},l))});var Of=y(25108),Km=y(34155);function Jm(){var i=Object.create(null);function t(l,p){var h=l.id,f=l.name,A=l.dependencies;A===void 0&&(A=[]);var _=l.init;_===void 0&&(_=function(){});var b=l.getTransferables;if(b===void 0&&(b=null),!i[h])try{A=A.map(function(B){return B&&B.isWorkerModule&&(t(B,function(F){if(F instanceof Error)throw F}),B=i[B.id].value),B}),_=o("<"+f+">.init",_),b&&(b=o("<"+f+">.getTransferables",b));var T=null;typeof _=="function"?T=_.apply(void 0,A):Of.error("worker module init function failed to rehydrate"),i[h]={id:h,value:T,getTransferables:b},p(T)}catch(B){B&&B.noLog||Of.error(B),p(B)}}function r(l,p){var h,f=l.id,A=l.args;(!i[f]||typeof i[f].value!="function")&&p(new Error("Worker module "+f+": not found or its 'init' did not return a function"));try{var _=(h=i[f]).value.apply(h,A);_&&typeof _.then=="function"?_.then(b,function(T){return p(T instanceof Error?T:new Error(""+T))}):b(_)}catch(T){p(T)}function b(T){try{var B=i[f].getTransferables&&i[f].getTransferables(T);(!B||!Array.isArray(B)||!B.length)&&(B=void 0),p(T,B)}catch(F){Of.error(F),p(F)}}}function o(l,p){var h=void 0;self.troikaDefine=function(A){return h=A};var f=URL.createObjectURL(new Blob(["/** "+l.replace(/\*/g,"")+` **/

troikaDefine(
`+p+`
)`],{type:"application/javascript"}));try{importScripts(f)}catch(A){Of.error(A)}return URL.revokeObjectURL(f),delete self.troikaDefine,h}self.addEventListener("message",function(l){var p=l.data,h=p.messageId,f=p.action,A=p.data;try{f==="registerModule"&&t(A,function(_){_ instanceof Error?postMessage({messageId:h,success:!1,error:_.message}):postMessage({messageId:h,success:!0,result:{isCallable:typeof _=="function"}})}),f==="callModule"&&r(A,function(_,b){_ instanceof Error?postMessage({messageId:h,success:!1,error:_.message}):postMessage({messageId:h,success:!0,result:_},b||void 0)})}catch(_){postMessage({messageId:h,success:!1,error:_.stack})}})}function nv(i){var t=function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return t._getInitResult().then(function(l){if(typeof l=="function")return l.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var r=i.dependencies,o=i.init;r=Array.isArray(r)?r.map(function(p){return p&&p._getInitResult?p._getInitResult():p}):[];var l=Promise.all(r).then(function(p){return o.apply(null,p)});return t._getInitResult=function(){return l},l},t}var Kg=function(){var i=!1;if(typeof window!="undefined"&&typeof window.document!="undefined")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(r){Of.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return Kg=function(){return i},i},Tl=0,Ih=0,Jg=!1,iu=Object.create(null),Wu=Object.create(null),Td=Object.create(null);function ou(i){if((!i||typeof i.init!="function")&&!Jg)throw new Error("requires `options.init` function");var t=i.dependencies,r=i.init,o=i.getTransferables,l=i.workerId;if(!Kg())return nv(i);l==null&&(l="#default");var p="workerModule"+ ++Tl,h=i.name||p,f=null;t=t&&t.map(function(_){return typeof _=="function"&&!_.workerModuleData&&(Jg=!0,_=ou({workerId:l,name:"<"+h+"> function dependency: "+_.name,init:`function(){return (
`+Bd(_)+`
)}`}),Jg=!1),_&&_.workerModuleData&&(_=_.workerModuleData),_});function A(){for(var _=[],b=arguments.length;b--;)_[b]=arguments[b];if(!f){f=qg(l,"registerModule",A.workerModuleData);var T=function(){f=null,Wu[l].delete(T)};(Wu[l]||(Wu[l]=new Set)).add(T)}return f.then(function(B){var F=B.isCallable;if(F)return qg(l,"callModule",{id:p,args:_});throw new Error("Worker module function was called but `init` did not return a callable function")})}return A.workerModuleData={isWorkerModule:!0,id:p,name:h,dependencies:t,init:Bd(r),getTransferables:o&&Bd(o)},A}function Df(i){Wu[i]&&Wu[i].forEach(function(t){t()}),iu[i]&&(iu[i].terminate(),delete iu[i])}function Bd(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function rv(i){var t=iu[i];if(!t){var r=Bd(Jm);t=iu[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+r+")()"],{type:"application/javascript"}))),t.onmessage=function(o){var l=o.data,p=l.messageId,h=Td[p];if(!h)throw new Error("WorkerModule response with empty or unknown messageId");delete Td[p],h(l)}}return t}function qg(i,t,r){return new Promise(function(o,l){var p=++Ih;Td[p]=function(h){h.success?o(h.result):l(new Error("Error in worker "+t+" call: "+h.error))},rv(i).postMessage({messageId:p,action:t,data:r})})}var Id=y(25108);function Zg(){var i=function(t){function r(Ge,Ye,Se,xe,Ee,le,ye,Be){var be=1-ye;Be.x=be*be*Ge+2*be*ye*Se+ye*ye*Ee,Be.y=be*be*Ye+2*be*ye*xe+ye*ye*le}function o(Ge,Ye,Se,xe,Ee,le,ye,Be,be,je){var Et=1-be;je.x=Et*Et*Et*Ge+3*Et*Et*be*Se+3*Et*be*be*Ee+be*be*be*ye,je.y=Et*Et*Et*Ye+3*Et*Et*be*xe+3*Et*be*be*le+be*be*be*Be}function l(Ge,Ye){for(var Se=/([MLQCZ])([^MLQCZ]*)/g,xe,Ee,le,ye,Be;xe=Se.exec(Ge);){var be=xe[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(je){return parseFloat(je)});switch(xe[1]){case"M":ye=Ee=be[0],Be=le=be[1];break;case"L":(be[0]!==ye||be[1]!==Be)&&Ye("L",ye,Be,ye=be[0],Be=be[1]);break;case"Q":{Ye("Q",ye,Be,ye=be[2],Be=be[3],be[0],be[1]);break}case"C":{Ye("C",ye,Be,ye=be[4],Be=be[5],be[0],be[1],be[2],be[3]);break}case"Z":(ye!==Ee||Be!==le)&&Ye("L",ye,Be,Ee,le);break}}}function p(Ge,Ye,Se){Se===void 0&&(Se=16);var xe={x:0,y:0};l(Ge,function(Ee,le,ye,Be,be,je,Et,Ft,Tt){switch(Ee){case"L":Ye(le,ye,Be,be);break;case"Q":{for(var pt=le,cn=ye,Bt=1;Bt<Se;Bt++)r(le,ye,je,Et,Be,be,Bt/(Se-1),xe),Ye(pt,cn,xe.x,xe.y),pt=xe.x,cn=xe.y;break}case"C":{for(var Ct=le,Ke=ye,Pe=1;Pe<Se;Pe++)o(le,ye,je,Et,Ft,Tt,Be,be,Pe/(Se-1),xe),Ye(Ct,Ke,xe.x,xe.y),Ct=xe.x,Ke=xe.y;break}}})}var h="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",f="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",A=new WeakMap,_={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function b(Ge,Ye){var Se=Ge.getContext?Ge.getContext("webgl",_):Ge,xe=A.get(Se);if(!xe){let Et=function(Ct){var Ke=le[Ct];if(!Ke&&(Ke=le[Ct]=Se.getExtension(Ct),!Ke))throw new Error(Ct+" not supported");return Ke},Ft=function(Ct,Ke){var Pe=Se.createShader(Ke);return Se.shaderSource(Pe,Ct),Se.compileShader(Pe),Pe},Tt=function(Ct,Ke,Pe,wt){if(!ye[Ct]){var pn={},un={},Gt=Se.createProgram();Se.attachShader(Gt,Ft(Ke,Se.VERTEX_SHADER)),Se.attachShader(Gt,Ft(Pe,Se.FRAGMENT_SHADER)),Se.linkProgram(Gt),ye[Ct]={program:Gt,transaction:function(tr){Se.useProgram(Gt),tr({setUniform:function(sr,bi){for(var Mi=[],yr=arguments.length-2;yr-- >0;)Mi[yr]=arguments[yr+2];var Or=un[bi]||(un[bi]=Se.getUniformLocation(Gt,bi));Se["uniform"+sr].apply(Se,[Or].concat(Mi))},setAttribute:function(sr,bi,Mi,yr,Or){var Si=pn[sr];Si||(Si=pn[sr]={buf:Se.createBuffer(),loc:Se.getAttribLocation(Gt,sr),data:null}),Se.bindBuffer(Se.ARRAY_BUFFER,Si.buf),Se.vertexAttribPointer(Si.loc,bi,Se.FLOAT,!1,0,0),Se.enableVertexAttribArray(Si.loc),Ee?Se.vertexAttribDivisor(Si.loc,yr):Et("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Si.loc,yr),Or!==Si.data&&(Se.bufferData(Se.ARRAY_BUFFER,Or,Mi),Si.data=Or)}})}}}ye[Ct].transaction(wt)},pt=function(Ct,Ke){be++;try{Se.activeTexture(Se.TEXTURE0+be);var Pe=Be[Ct];Pe||(Pe=Be[Ct]=Se.createTexture(),Se.bindTexture(Se.TEXTURE_2D,Pe),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,Se.NEAREST),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,Se.NEAREST)),Se.bindTexture(Se.TEXTURE_2D,Pe),Ke(Pe,be)}finally{be--}},cn=function(Ct,Ke,Pe){var wt=Se.createFramebuffer();je.push(wt),Se.bindFramebuffer(Se.FRAMEBUFFER,wt),Se.activeTexture(Se.TEXTURE0+Ke),Se.bindTexture(Se.TEXTURE_2D,Ct),Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_2D,Ct,0);try{Pe(wt)}finally{Se.deleteFramebuffer(wt),Se.bindFramebuffer(Se.FRAMEBUFFER,je[--je.length-1]||null)}},Bt=function(){le={},ye={},Be={},be=-1,je.length=0};var Ee=typeof WebGL2RenderingContext!="undefined"&&Se instanceof WebGL2RenderingContext,le={},ye={},Be={},be=-1,je=[];Se.canvas.addEventListener("webglcontextlost",function(Ct){Bt(),Ct.preventDefault()},!1),A.set(Se,xe={gl:Se,isWebGL2:Ee,getExtension:Et,withProgram:Tt,withTexture:pt,withTextureFramebuffer:cn,handleContextLoss:Bt})}Ye(xe)}function T(Ge,Ye,Se,xe,Ee,le,ye,Be){ye===void 0&&(ye=15),Be===void 0&&(Be=null),b(Ge,function(be){var je=be.gl,Et=be.withProgram,Ft=be.withTexture;Ft("copy",function(Tt,pt){je.texImage2D(je.TEXTURE_2D,0,je.RGBA,Ee,le,0,je.RGBA,je.UNSIGNED_BYTE,Ye),Et("copy",h,f,function(cn){var Bt=cn.setUniform,Ct=cn.setAttribute;Ct("aUV",2,je.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Bt("1i","image",pt),je.bindFramebuffer(je.FRAMEBUFFER,Be||null),je.disable(je.BLEND),je.colorMask(ye&8,ye&4,ye&2,ye&1),je.viewport(Se,xe,Ee,le),je.scissor(Se,xe,Ee,le),je.drawArrays(je.TRIANGLES,0,3)})})})}function B(Ge,Ye,Se){var xe=Ge.width,Ee=Ge.height;b(Ge,function(le){var ye=le.gl,Be=new Uint8Array(xe*Ee*4);ye.readPixels(0,0,xe,Ee,ye.RGBA,ye.UNSIGNED_BYTE,Be),Ge.width=Ye,Ge.height=Se,T(ye,Be,0,0,xe,Ee)})}var F=Object.freeze({__proto__:null,withWebGLContext:b,renderImageData:T,resizeWebGLCanvasWithoutClearing:B});function P(Ge,Ye,Se,xe,Ee,le){le===void 0&&(le=1);var ye=new Uint8Array(Ge*Ye),Be=xe[2]-xe[0],be=xe[3]-xe[1],je=[];p(Se,function(Ct,Ke,Pe,wt){je.push({x1:Ct,y1:Ke,x2:Pe,y2:wt,minX:Math.min(Ct,Pe),minY:Math.min(Ke,wt),maxX:Math.max(Ct,Pe),maxY:Math.max(Ke,wt)})}),je.sort(function(Ct,Ke){return Ct.maxX-Ke.maxX});for(var Et=0;Et<Ge;Et++)for(var Ft=0;Ft<Ye;Ft++){var Tt=cn(xe[0]+Be*(Et+.5)/Ge,xe[1]+be*(Ft+.5)/Ye),pt=Math.pow(1-Math.abs(Tt)/Ee,le)/2;Tt<0&&(pt=1-pt),pt=Math.max(0,Math.min(255,Math.round(pt*255))),ye[Ft*Ge+Et]=pt}return ye;function cn(Ct,Ke){for(var Pe=1/0,wt=1/0,pn=je.length;pn--;){var un=je[pn];if(un.maxX+wt<=Ct)break;if(Ct+wt>un.minX&&Ke-wt<un.maxY&&Ke+wt>un.minY){var Gt=G(Ct,Ke,un.x1,un.y1,un.x2,un.y2);Gt<Pe&&(Pe=Gt,wt=Math.sqrt(Pe))}}return Bt(Ct,Ke)&&(wt=-wt),wt}function Bt(Ct,Ke){for(var Pe=0,wt=je.length;wt--;){var pn=je[wt];if(pn.maxX<=Ct)break;var un=pn.y1>Ke!=pn.y2>Ke&&Ct<(pn.x2-pn.x1)*(Ke-pn.y1)/(pn.y2-pn.y1)+pn.x1;un&&(Pe+=pn.y1<pn.y2?1:-1)}return Pe!==0}}function L(Ge,Ye,Se,xe,Ee,le,ye,Be,be,je){le===void 0&&(le=1),Be===void 0&&(Be=0),be===void 0&&(be=0),je===void 0&&(je=0),O(Ge,Ye,Se,xe,Ee,le,ye,null,Be,be,je)}function O(Ge,Ye,Se,xe,Ee,le,ye,Be,be,je,Et){le===void 0&&(le=1),be===void 0&&(be=0),je===void 0&&(je=0),Et===void 0&&(Et=0);for(var Ft=P(Ge,Ye,Se,xe,Ee,le),Tt=new Uint8Array(Ft.length*4),pt=0;pt<Ft.length;pt++)Tt[pt*4+Et]=Ft[pt];T(ye,Tt,be,je,Ge,Ye,1<<3-Et,Be)}function G(Ge,Ye,Se,xe,Ee,le){var ye=Ee-Se,Be=le-xe,be=ye*ye+Be*Be,je=be?Math.max(0,Math.min(1,((Ge-Se)*ye+(Ye-xe)*Be)/be)):0,Et=Ge-(Se+je*ye),Ft=Ye-(xe+je*Be);return Et*Et+Ft*Ft}var D=Object.freeze({__proto__:null,generate:P,generateIntoCanvas:L,generateIntoFramebuffer:O}),k="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",V="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",Q=new Float32Array([0,0,2,0,0,2]),K=null,X=!1,oe={},ae=new WeakMap;function ge(Ge){if(!X&&!we(Ge))throw new Error("WebGL generation not supported")}function ie(Ge,Ye,Se,xe,Ee,le,ye){if(le===void 0&&(le=1),ye===void 0&&(ye=null),!ye&&(ye=K,!ye)){var Be=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document!="undefined"?document.createElement("canvas"):null;if(!Be)throw new Error("OffscreenCanvas or DOM canvas not supported");ye=K=Be.getContext("webgl",{depth:!1})}ge(ye);var be=new Uint8Array(Ge*Ye*4);b(ye,function(Tt){var pt=Tt.gl,cn=Tt.withTexture,Bt=Tt.withTextureFramebuffer;cn("readable",function(Ct,Ke){pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,Ge,Ye,0,pt.RGBA,pt.UNSIGNED_BYTE,null),Bt(Ct,Ke,function(Pe){me(Ge,Ye,Se,xe,Ee,le,pt,Pe,0,0,0),pt.readPixels(0,0,Ge,Ye,pt.RGBA,pt.UNSIGNED_BYTE,be)})})});for(var je=new Uint8Array(Ge*Ye),Et=0,Ft=0;Et<be.length;Et+=4)je[Ft++]=be[Et];return je}function _e(Ge,Ye,Se,xe,Ee,le,ye,Be,be,je){le===void 0&&(le=1),Be===void 0&&(Be=0),be===void 0&&(be=0),je===void 0&&(je=0),me(Ge,Ye,Se,xe,Ee,le,ye,null,Be,be,je)}function me(Ge,Ye,Se,xe,Ee,le,ye,Be,be,je,Et){le===void 0&&(le=1),be===void 0&&(be=0),je===void 0&&(je=0),Et===void 0&&(Et=0),ge(ye);var Ft=[];p(Se,function(Tt,pt,cn,Bt){Ft.push(Tt,pt,cn,Bt)}),Ft=new Float32Array(Ft),b(ye,function(Tt){var pt=Tt.gl,cn=Tt.isWebGL2,Bt=Tt.getExtension,Ct=Tt.withProgram,Ke=Tt.withTexture,Pe=Tt.withTextureFramebuffer,wt=Tt.handleContextLoss;if(Ke("rawDistances",function(pn,un){(Ge!==pn._lastWidth||Ye!==pn._lastHeight)&&pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,pn._lastWidth=Ge,pn._lastHeight=Ye,0,pt.RGBA,pt.UNSIGNED_BYTE,null),Ct("main",k,N,function(Gt){var kn=Gt.setAttribute,tr=Gt.setUniform,xr=!cn&&Bt("ANGLE_instanced_arrays"),sr=!cn&&Bt("EXT_blend_minmax");kn("aUV",2,pt.STATIC_DRAW,0,Q),kn("aLineSegment",4,pt.DYNAMIC_DRAW,1,Ft),tr.apply(void 0,["4f","uGlyphBounds"].concat(xe)),tr("1f","uMaxDistance",Ee),tr("1f","uExponent",le),Pe(pn,un,function(bi){pt.enable(pt.BLEND),pt.colorMask(!0,!0,!0,!0),pt.viewport(0,0,Ge,Ye),pt.scissor(0,0,Ge,Ye),pt.blendFunc(pt.ONE,pt.ONE),pt.blendEquationSeparate(pt.FUNC_ADD,cn?pt.MAX:sr.MAX_EXT),pt.clear(pt.COLOR_BUFFER_BIT),cn?pt.drawArraysInstanced(pt.TRIANGLES,0,3,Ft.length/4):xr.drawArraysInstancedANGLE(pt.TRIANGLES,0,3,Ft.length/4)})}),Ct("post",h,V,function(Gt){Gt.setAttribute("aUV",2,pt.STATIC_DRAW,0,Q),Gt.setUniform("1i","tex",un),pt.bindFramebuffer(pt.FRAMEBUFFER,Be),pt.disable(pt.BLEND),pt.colorMask(Et===0,Et===1,Et===2,Et===3),pt.viewport(be,je,Ge,Ye),pt.scissor(be,je,Ge,Ye),pt.drawArrays(pt.TRIANGLES,0,3)})}),pt.isContextLost())throw wt(),new Error("webgl context lost")})}function we(Ge){var Ye=!Ge||Ge===K?oe:Ge.canvas||Ge,Se=ae.get(Ye);if(Se===void 0){X=!0;var xe=null;try{var Ee=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],le=ie(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Ge);Se=le&&Ee.length===le.length&&le.every(function(ye,Be){return ye===Ee[Be]}),Se||(xe="bad trial run results",Id.info(Ee,le))}catch(ye){Se=!1,xe=ye.message}xe&&Id.warn("WebGL SDF generation not supported:",xe),X=!1,ae.set(Ye,Se)}return Se}var ke=Object.freeze({__proto__:null,generate:ie,generateIntoCanvas:_e,generateIntoFramebuffer:me,isSupported:we});function De(Ge,Ye,Se,xe,Ee,le){Ee===void 0&&(Ee=Math.max(xe[2]-xe[0],xe[3]-xe[1])/2),le===void 0&&(le=1);try{return ie.apply(ke,arguments)}catch(ye){return Id.info("WebGL SDF generation failed, falling back to JS",ye),P.apply(D,arguments)}}function Ne(Ge,Ye,Se,xe,Ee,le,ye,Be,be,je){Ee===void 0&&(Ee=Math.max(xe[2]-xe[0],xe[3]-xe[1])/2),le===void 0&&(le=1),Be===void 0&&(Be=0),be===void 0&&(be=0),je===void 0&&(je=0);try{return _e.apply(ke,arguments)}catch(Et){return Id.info("WebGL SDF generation failed, falling back to JS",Et),L.apply(D,arguments)}}return t.forEachPathCommand=l,t.generate=De,t.generateIntoCanvas=Ne,t.javascript=D,t.pathToLineSegments=p,t.webgl=ke,t.webglUtils=F,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}function iv(){var i=function(t){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},o={},l={};o.L=1,l[1]="L",Object.keys(r).forEach(function(wt,pn){o[wt]=1<<pn+1,l[o[wt]]=wt}),Object.freeze(o);var p=o.LRI|o.RLI|o.FSI,h=o.L|o.R|o.AL,f=o.B|o.S|o.WS|o.ON|o.FSI|o.LRI|o.RLI|o.PDI,A=o.BN|o.RLE|o.LRE|o.RLO|o.LRO|o.PDF,_=o.S|o.WS|o.B|p|o.PDI|A,b=null;function T(){if(!b){b=new Map;var wt=function(un){if(r.hasOwnProperty(un)){var Gt=0;r[un].split(",").forEach(function(kn){var tr=kn.split("+"),xr=tr[0],sr=tr[1];xr=parseInt(xr,36),sr=sr?parseInt(sr,36):0,b.set(Gt+=xr,o[un]);for(var bi=0;bi<sr;bi++)b.set(++Gt,o[un])})}};for(var pn in r)wt(pn)}}function B(wt){return T(),b.get(wt.codePointAt(0))||o.L}function F(wt){return l[B(wt)]}var P={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function L(wt,pn){var un=36,Gt=0,kn=new Map,tr=pn&&new Map,xr;return wt.split(",").forEach(function sr(bi){if(bi.indexOf("+")!==-1)for(var Mi=+bi;Mi--;)sr(xr);else{xr=bi;var yr=bi.split(">"),Or=yr[0],Si=yr[1];Or=String.fromCodePoint(Gt+=parseInt(Or,un)),Si=String.fromCodePoint(Gt+=parseInt(Si,un)),kn.set(Or,Si),pn&&tr.set(Si,Or)}}),{map:kn,reverseMap:tr}}var O,G,D;function k(){if(!O){var wt=L(P.pairs,!0),pn=wt.map,un=wt.reverseMap;O=pn,G=un,D=L(P.canonical,!1).map}}function N(wt){return k(),O.get(wt)||null}function V(wt){return k(),G.get(wt)||null}function Q(wt){return k(),D.get(wt)||null}var K=o.L,X=o.R,oe=o.EN,ae=o.ES,ge=o.ET,ie=o.AN,_e=o.CS,me=o.B,we=o.S,ke=o.ON,De=o.BN,Ne=o.NSM,Ge=o.AL,Ye=o.LRO,Se=o.RLO,xe=o.LRE,Ee=o.RLE,le=o.PDF,ye=o.LRI,Be=o.RLI,be=o.FSI,je=o.PDI;function Et(wt,pn){for(var un=125,Gt=new Uint32Array(wt.length),kn=0;kn<wt.length;kn++)Gt[kn]=B(wt[kn]);var tr=new Map;function xr(Xl,nd){var Jc=Gt[Xl];Gt[Xl]=nd,tr.set(Jc,tr.get(Jc)-1),Jc&f&&tr.set(f,tr.get(f)-1),tr.set(nd,(tr.get(nd)||0)+1),nd&f&&tr.set(f,(tr.get(f)||0)+1)}for(var sr=new Uint8Array(wt.length),bi=new Map,Mi=[],yr=null,Or=0;Or<wt.length;Or++)yr||Mi.push(yr={start:Or,end:wt.length-1,level:pn==="rtl"?1:pn==="ltr"?0:U4(Or,!1)}),Gt[Or]&me&&(yr.end=Or,yr=null);for(var Si=Ee|xe|Se|Ye|p|je|le|me,so=function(Xl){return Xl+(Xl&1?1:2)},li=function(Xl){return Xl+(Xl&1?2:1)},no=0;no<Mi.length;no++){yr=Mi[no];var Hr=[{_level:yr.level,_override:0,_isolate:0}],Xr=void 0,ft=0,an=0,Un=0;tr.clear();for(var ar=yr.start;ar<=yr.end;ar++){var fn=Gt[ar];if(Xr=Hr[Hr.length-1],tr.set(fn,(tr.get(fn)||0)+1),fn&f&&tr.set(f,(tr.get(f)||0)+1),fn&Si)if(fn&(Ee|xe)){sr[ar]=Xr._level;var qi=(fn===Ee?li:so)(Xr._level);qi<=un&&!ft&&!an?Hr.push({_level:qi,_override:0,_isolate:0}):ft||an++}else if(fn&(Se|Ye)){sr[ar]=Xr._level;var ys=(fn===Se?li:so)(Xr._level);ys<=un&&!ft&&!an?Hr.push({_level:ys,_override:fn&Se?X:K,_isolate:0}):ft||an++}else if(fn&p){fn&be&&(fn=U4(ar+1,!0)===1?Be:ye),sr[ar]=Xr._level,Xr._override&&xr(ar,Xr._override);var Kd=(fn===Be?li:so)(Xr._level);Kd<=un&&ft===0&&an===0?(Un++,Hr.push({_level:Kd,_override:0,_isolate:1,_isolInitIndex:ar})):ft++}else if(fn&je){if(ft>0)ft--;else if(Un>0){for(an=0;!Hr[Hr.length-1]._isolate;)Hr.pop();var Tp=Hr[Hr.length-1]._isolInitIndex;Tp!=null&&(bi.set(Tp,ar),bi.set(ar,Tp)),Hr.pop(),Un--}Xr=Hr[Hr.length-1],sr[ar]=Xr._level,Xr._override&&xr(ar,Xr._override)}else fn&le?(ft===0&&(an>0?an--:!Xr._isolate&&Hr.length>1&&(Hr.pop(),Xr=Hr[Hr.length-1])),sr[ar]=Xr._level):fn&me&&(sr[ar]=yr.level);else sr[ar]=Xr._level,Xr._override&&fn!==De&&xr(ar,Xr._override)}for(var Us=[],Ts=null,ko=yr.start;ko<=yr.end;ko++){var Bp=Gt[ko];if(!(Bp&A)){var zo=sr[ko],Go=Bp&p,Ip=Bp===je;Ts&&zo===Ts._level?(Ts._end=ko,Ts._endsWithIsolInit=Go):Us.push(Ts={_start:ko,_end:ko,_level:zo,_startsWithPDI:Ip,_endsWithIsolInit:Go})}}for(var yc=[],yo=0;yo<Us.length;yo++){var Ya=Us[yo];if(!Ya._startsWithPDI||Ya._startsWithPDI&&!bi.has(Ya._start)){for(var Al=[Ts=Ya],ca=void 0;Ts&&Ts._endsWithIsolInit&&(ca=bi.get(Ts._end))!=null;)for(var Zr=yo+1;Zr<Us.length;Zr++)if(Us[Zr]._start===ca){Al.push(Ts=Us[Zr]);break}for(var vl=[],Jd=0;Jd<Al.length;Jd++)for(var Ae=Al[Jd],Fe=Ae._start;Fe<=Ae._end;Fe++)vl.push(Fe);for(var ct=sr[vl[0]],Ht=yr.level,tn=vl[0]-1;tn>=0;tn--)if(!(Gt[tn]&A)){Ht=sr[tn];break}var nn=vl[vl.length-1],Nn=sr[nn],Bn=yr.level;if(!(Gt[nn]&p)){for(var Qn=nn+1;Qn<=yr.end;Qn++)if(!(Gt[Qn]&A)){Bn=sr[Qn];break}}yc.push({_seqIndices:vl,_sosType:Math.max(Ht,ct)%2?X:K,_eosType:Math.max(Bn,Nn)%2?X:K})}}for(var Xn=0;Xn<yc.length;Xn++){var er=yc[Xn],Yt=er._seqIndices,Uo=er._sosType,Lr=er._eosType;if(tr.get(Ne))for(var kr=0;kr<Yt.length;kr++){var Ci=Yt[kr];if(Gt[Ci]&Ne){for(var Fi=Uo,Ao=kr-1;Ao>=0;Ao--)if(!(Gt[Yt[Ao]]&A)){Fi=Gt[Yt[Ao]];break}xr(Ci,Fi&(p|je)?ke:Fi)}}if(tr.get(oe))for(var bo=0;bo<Yt.length;bo++){var pa=Yt[bo];if(Gt[pa]&oe)for(var ka=bo-1;ka>=-1;ka--){var No=ka===-1?Uo:Gt[Yt[ka]];if(No&h){No===Ge&&xr(pa,ie);break}}}if(tr.get(Ge))for(var Kc=0;Kc<Yt.length;Kc++){var Zo=Yt[Kc];Gt[Zo]&Ge&&xr(Zo,X)}if(tr.get(ae)||tr.get(_e))for(var Ns=1;Ns<Yt.length-1;Ns++){var Rp=Yt[Ns];if(Gt[Rp]&(ae|_e)){for(var Au=0,Ql=0,xo=Ns-1;xo>=0&&(Au=Gt[Yt[xo]],!!(Au&A));xo--);for(var za=Ns+1;za<Yt.length&&(Ql=Gt[Yt[za]],!!(Ql&A));za++);Au===Ql&&(Gt[Rp]===ae?Au===oe:Au&(oe|ie))&&xr(Rp,Au)}}if(tr.get(oe))for(var Oo=0;Oo<Yt.length;Oo++){var Mo=Yt[Oo];if(Gt[Mo]&oe){for(var Il=Oo-1;Il>=0&&Gt[Yt[Il]]&(ge|A);Il--)xr(Yt[Il],oe);for(var vu=Oo+1;vu<Yt.length&&Gt[Yt[vu]]&(ge|A);vu++)xr(Yt[vu],oe)}}if(tr.get(ge)||tr.get(ae)||tr.get(_e))for(var Ka=0;Ka<Yt.length;Ka++){var ed=Yt[Ka];if(Gt[ed]&(ge|ae|_e)){xr(ed,ke);for(var E_=Ka-1;E_>=0&&Gt[Yt[E_]]&A;E_--)xr(Yt[E_],ke);for(var b_=Ka+1;b_<Yt.length&&Gt[Yt[b_]]&A;b_++)xr(Yt[b_],ke)}}if(tr.get(oe))for(var fx=0,I4=Uo;fx<Yt.length;fx++){var R4=Yt[fx],gx=Gt[R4];gx&oe?I4===K&&xr(R4,K):gx&h&&(I4=gx)}if(tr.get(f)){var cA=X|oe|ie,F4=cA|K,x_=[];{for(var _1=[],E1=0;E1<Yt.length;E1++)if(Gt[Yt[E1]]&f){var pA=wt[Yt[E1]],O4=void 0;if(N(pA)!==null)if(_1.length<63)_1.push({char:pA,seqIndex:E1});else break;else if((O4=V(pA))!==null)for(var uA=_1.length-1;uA>=0;uA--){var mx=_1[uA].char;if(mx===O4||mx===V(Q(pA))||N(Q(mx))===pA){x_.push([_1[uA].seqIndex,E1]),_1.length=uA;break}}}x_.sort(function(Xl,nd){return Xl[0]-nd[0]})}for(var yx=0;yx<x_.length;yx++){for(var D4=x_[yx],dA=D4[0],M_=D4[1],P4=!1,td=0,Ax=dA+1;Ax<M_;Ax++){var vx=Yt[Ax];if(Gt[vx]&F4){P4=!0;var L4=Gt[vx]&cA?X:K;if(L4===b1(vx)){td=L4;break}}}if(P4&&!td){td=Uo;for(var _x=dA-1;_x>=0;_x--){var C_=Yt[_x];if(Gt[C_]&F4){var k4=Gt[C_]&cA?X:K;k4!==b1(C_)?td=k4:td=b1(C_);break}}}if(td){if(Gt[Yt[dA]]=Gt[Yt[M_]]=td,td!==b1(Yt[dA])){for(var hA=dA+1;hA<Yt.length;hA++)if(!(Gt[Yt[hA]]&A)){B(wt[Yt[hA]])&Ne&&(Gt[Yt[hA]]=td);break}}if(td!==b1(Yt[M_])){for(var fA=M_+1;fA<Yt.length;fA++)if(!(Gt[Yt[fA]]&A)){B(wt[Yt[fA]])&Ne&&(Gt[Yt[fA]]=td);break}}}}for(var dg=0;dg<Yt.length;dg++)if(Gt[Yt[dg]]&f){for(var z4=dg,Ex=dg,bx=Uo,gA=dg-1;gA>=0;gA--)if(Gt[Yt[gA]]&A)z4=gA;else{bx=Gt[Yt[gA]]&cA?X:K;break}for(var G4=Lr,mA=dg+1;mA<Yt.length;mA++)if(Gt[Yt[mA]]&(f|A))Ex=mA;else{G4=Gt[Yt[mA]]&cA?X:K;break}for(var S_=z4;S_<=Ex;S_++)Gt[Yt[S_]]=bx===G4?bx:b1(Yt[S_]);dg=Ex}}}for(var Fp=yr.start;Fp<=yr.end;Fp++){var Z5=sr[Fp],w_=Gt[Fp];if(Z5&1?w_&(K|oe|ie)&&sr[Fp]++:w_&X?sr[Fp]++:w_&(ie|oe)&&(sr[Fp]+=2),w_&A&&(sr[Fp]=Fp===0?yr.level:sr[Fp-1]),Fp===yr.end||B(wt[Fp])&(we|me))for(var T_=Fp;T_>=0&&B(wt[T_])&_;T_--)sr[T_]=yr.level}}return{levels:sr,paragraphs:Mi};function U4(Xl,nd){for(var Jc=Xl;Jc<wt.length;Jc++){var hg=Gt[Jc];if(hg&(X|Ge))return 1;if(hg&(me|K)||nd&&hg===je)return 0;if(hg&p){var N4=$5(Jc);Jc=N4===-1?wt.length:N4}}return 0}function $5(Xl){for(var nd=1,Jc=Xl+1;Jc<wt.length;Jc++){var hg=Gt[Jc];if(hg&me)break;if(hg&je){if(--nd===0)return Jc}else hg&p&&nd++}return-1}function b1(Xl){return sr[Xl]&1?X:K}}var Ft="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Tt;function pt(){if(!Tt){var wt=L(Ft,!0),pn=wt.map,un=wt.reverseMap;un.forEach(function(Gt,kn){pn.set(kn,Gt)}),Tt=pn}}function cn(wt){return pt(),Tt.get(wt)||null}function Bt(wt,pn,un,Gt){var kn=wt.length;un=Math.max(0,un==null?0:+un),Gt=Math.min(kn-1,Gt==null?kn-1:+Gt);for(var tr=new Map,xr=un;xr<=Gt;xr++)if(pn[xr]&1){var sr=cn(wt[xr]);sr!==null&&tr.set(xr,sr)}return tr}function Ct(wt,pn,un,Gt){var kn=wt.length;un=Math.max(0,un==null?0:+un),Gt=Math.min(kn-1,Gt==null?kn-1:+Gt);var tr=[];return pn.paragraphs.forEach(function(xr){var sr=Math.max(un,xr.start),bi=Math.min(Gt,xr.end);if(sr<bi){for(var Mi=pn.levels.slice(sr,bi+1),yr=bi;yr>=sr&&B(wt[yr])&_;yr--)Mi[yr]=xr.level;for(var Or=xr.level,Si=1/0,so=0;so<Mi.length;so++){var li=Mi[so];li>Or&&(Or=li),li<Si&&(Si=li|1)}for(var no=Or;no>=Si;no--)for(var Hr=0;Hr<Mi.length;Hr++)if(Mi[Hr]>=no){for(var Xr=Hr;Hr+1<Mi.length&&Mi[Hr+1]>=no;)Hr++;Hr>Xr&&tr.push([Xr+un,Hr+un])}}}),tr}function Ke(wt,pn,un,Gt){var kn=Pe(wt,pn,un,Gt),tr=[].concat(wt);return kn.forEach(function(xr,sr){tr[sr]=(pn.levels[xr]&1?cn(wt[xr]):null)||wt[xr]}),tr.join("")}function Pe(wt,pn,un,Gt){for(var kn=Ct(wt,pn,un,Gt),tr=[],xr=0;xr<wt.length;xr++)tr[xr]=xr;return kn.forEach(function(sr){for(var bi=sr[0],Mi=sr[1],yr=tr.slice(bi,Mi+1),Or=yr.length;Or--;)tr[Mi-Or]=yr[Or]}),tr}return t.closingToOpeningBracket=V,t.getBidiCharType=B,t.getBidiCharTypeName=F,t.getCanonicalBracket=Q,t.getEmbeddingLevels=Et,t.getMirroredCharacter=cn,t.getMirroredCharactersMap=Bt,t.getReorderSegments=Ct,t.getReorderedIndices=Pe,t.getReorderedString=Ke,t.openingToClosingBracket=N,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}var J1=iv;const q1=/\bvoid\s+main\s*\(\s*\)\s*{/g;function qm(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function r(o,l){let p=s.ShaderChunk[l];return p?qm(p):o}return i.replace(t,r)}const aa=[];for(let i=0;i<256;i++)aa[i]=(i<16?"0":"")+i.toString(16);function Zm(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(aa[i&255]+aa[i>>8&255]+aa[i>>16&255]+aa[i>>24&255]+"-"+aa[t&255]+aa[t>>8&255]+"-"+aa[t>>16&15|64]+aa[t>>24&255]+"-"+aa[r&63|128]+aa[r>>8&255]+"-"+aa[r>>16&255]+aa[r>>24&255]+aa[o&255]+aa[o>>8&255]+aa[o>>16&255]+aa[o>>24&255]).toUpperCase()}const Rd=Object.assign||function(){let i=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let o=arguments[t];if(o)for(let l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i},ov=Date.now(),Z1=new WeakMap,$1=new Map;let sv=1e10;function $m(i,t){const r=cv(t);let o=Z1.get(i);if(o||Z1.set(i,o=Object.create(null)),o[r])return new o[r];const l=`_onBeforeCompile${r}`,p=function(_,b){i.onBeforeCompile.call(this,_,b);const T=this.customProgramCacheKey()+"|"+_.vertexShader+"|"+_.fragmentShader;let B=$1[T];if(!B){const F=av(this,_,t,r);B=$1[T]=F}_.vertexShader=B.vertexShader,_.fragmentShader=B.fragmentShader,Rd(_.uniforms,this.uniforms),t.timeUniform&&(_.uniforms[t.timeUniform]={get value(){return Date.now()-ov}}),this[l]&&this[l](_)},h=function(){return f(t.chained?i:i.clone())},f=function(_){const b=Object.create(_,A);return Object.defineProperty(b,"baseMaterial",{value:i}),Object.defineProperty(b,"id",{value:sv++}),b.uuid=Zm(),b.uniforms=Rd({},_.uniforms,t.uniforms),b.defines=Rd({},_.defines,t.defines),b.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",b.extensions=Rd({},_.extensions,t.extensions),b._listeners=void 0,b},A={constructor:{value:h},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get(){return p},set(_){this[l]=_}},copy:{writable:!0,configurable:!0,value:function(_){return i.copy.call(this,_),!i.isShaderMaterial&&!i.isDerivedMaterial&&(Rd(this.extensions,_.extensions),Rd(this.defines,_.defines),Rd(this.uniforms,s.UniformsUtils.clone(_.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const _=new i.constructor;return f(_).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let _=this._depthMaterial;return _||(_=this._depthMaterial=$m(i.isDerivedMaterial?i.getDepthMaterial():new s.MeshDepthMaterial({depthPacking:s.RGBADepthPacking}),t),_.defines.IS_DEPTH_MATERIAL="",_.uniforms=this.uniforms),_}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let _=this._distanceMaterial;return _||(_=this._distanceMaterial=$m(i.isDerivedMaterial?i.getDistanceMaterial():new s.MeshDistanceMaterial,t),_.defines.IS_DISTANCE_MATERIAL="",_.uniforms=this.uniforms),_}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:_,_distanceMaterial:b}=this;_&&_.dispose(),b&&b.dispose(),i.dispose.call(this)}}};return o[r]=h,new h}function av(i,{vertexShader:t,fragmentShader:r},o,l){let{vertexDefs:p,vertexMainIntro:h,vertexMainOutro:f,vertexTransform:A,fragmentDefs:_,fragmentMainIntro:b,fragmentMainOutro:T,fragmentColorTransform:B,customRewriter:F,timeUniform:P}=o;if(p=p||"",h=h||"",f=f||"",_=_||"",b=b||"",T=T||"",(A||F)&&(t=qm(t)),(B||F)&&(r=r.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),r=qm(r)),F){let L=F({vertexShader:t,fragmentShader:r});t=L.vertexShader,r=L.fragmentShader}if(B){let L=[];r=r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,O=>(L.push(O),"")),T=`${B}
${L.join(`
`)}
${T}`}if(P){const L=`
uniform float ${P};
`;p=L+p,_=L+_}return A&&(t=`vec3 troika_position_${l};
vec3 troika_normal_${l};
vec2 troika_uv_${l};
${t}
`,p=`${p}
void troikaVertexTransform${l}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${A}
}
`,h=`
troika_position_${l} = vec3(position);
troika_normal_${l} = vec3(normal);
troika_uv_${l} = vec2(uv);
troikaVertexTransform${l}(troika_position_${l}, troika_normal_${l}, troika_uv_${l});
${h}
`,t=t.replace(/\b(position|normal|uv)\b/g,(L,O,G,D)=>/\battribute\s+vec[23]\s+$/.test(D.substr(0,G))?O:`troika_${O}_${l}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${l}`))),t=Rh(t,l,p,h,f),r=Rh(r,l,_,b,T),{vertexShader:t,fragmentShader:r}}function Rh(i,t,r,o,l){return(o||l||r)&&(i=i.replace(q1,`
${r}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${o}
  troikaOrigMain${t}();
  ${l}
}`),i}function ey(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let lv=0;const e0=new Map;function cv(i){const t=JSON.stringify(i,ey);let r=e0.get(t);return r==null&&e0.set(t,r=++lv),r}const ty={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function $g(i){let t=ty[i.type];return t?ShaderLib[t]:i}function j3(i){let t=/\buniform\s+(int|float|vec[234]|mat[34])\s+([A-Za-z_][\w]*)/g,r=Object.create(null),o;for(;(o=t.exec(i))!==null;)r[o[2]]=o[1];return r}function oM(i,t=new Matrix4){return typeof t.invert=="function"?t.copy(i).invert():t.getInverse(i),t}const t0=null,Pf=null,Lf=null,pv=null;function n0(i){return $m(i,{chained:!0,uniforms:{pointA:{value:new Vector3},controlA:{value:new Vector3},controlB:{value:new Vector3},pointB:{value:new Vector3},radius:{value:.01},dashing:{value:new Vector3}},vertexDefs:t0,vertexTransform:Pf,fragmentDefs:Lf,fragmentMainIntro:pv})}let ny=null;const uv=new s.MeshStandardMaterial({color:16777215,side:s.DoubleSide});class kf extends null{static getGeometry(){return ny||(ny=new CylinderGeometry(1,1,1,6,64).translate(0,.5,0))}constructor(){super(kf.getGeometry(),uv),this.pointA=new Vector3,this.controlA=new Vector3,this.controlB=new Vector3,this.pointB=new Vector3,this.radius=.01,this.dashArray=new Vector2,this.dashOffset=0,this.frustumCulled=!1}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=uv.clone());return(!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=n0(r),r.addEventListener("dispose",function o(){r.removeEventListener("dispose",o),t.dispose()})),t}set material(t){this._baseMaterial=t}get customDepthMaterial(){return this.material.getDepthMaterial()}get customDistanceMaterial(){return this.material.getDistanceMaterial()}onBeforeRender(){const{uniforms:t}=this.material,{pointA:r,controlA:o,controlB:l,pointB:p,radius:h,dashArray:f,dashOffset:A}=this;t.pointA.value.copy(r),t.controlA.value.copy(o),t.controlB.value.copy(l),t.pointB.value.copy(p),t.radius.value=h,t.dashing.value.set(f.x,f.y,A||0)}raycast(){}}var la=y(25108);function dv(i,t,r){const{defaultFontURL:o}=r,l=Object.create(null),p=1/0,h=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,f="[^\\S\\u00A0]",A=new RegExp(`${f}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function _(D,k){function N(){const V=Q=>{la.error(`Failure loading font ${D}${D===o?"":"; trying fallback"}`,Q),D!==o&&(D=o,N())};try{const Q=new XMLHttpRequest;Q.open("get",D,!0),Q.responseType="arraybuffer",Q.onload=function(){if(Q.status>=400)V(new Error(Q.statusText));else if(Q.status>0)try{const K=i(Q.response);k(K)}catch(K){V(K)}},Q.onerror=V,Q.send()}catch(Q){V(Q)}}N()}function b(D,k){D||(D=o);let N=l[D];N?N.pending?N.pending.push(k):k(N):(l[D]={pending:[k]},_(D,V=>{let Q=l[D].pending;l[D]=V,Q.forEach(K=>K(V))}))}function T({text:D="",font:k=o,sdfGlyphSize:N=64,fontSize:V=1,letterSpacing:Q=0,lineHeight:K="normal",maxWidth:X=p,direction:oe,textAlign:ae="left",textIndent:ge=0,whiteSpace:ie="normal",overflowWrap:_e="normal",anchorX:me=0,anchorY:we=0,includeCaretPositions:ke=!1,chunkedBoundsSize:De=8192,colorRanges:Ne=null},Ge,Ye=!1){const Se=L(),xe={fontLoad:0,typesetting:0};D.indexOf("\r")>-1&&(la.info("Typesetter: got text with \\r chars; normalizing to \\n"),D=D.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),V=+V,Q=+Q,X=+X,K=K||"normal",ge=+ge,b(k,Ee=>{const le=isFinite(X);let ye=null,Be=null,be=null,je=null,Et=null,Ft=null,Tt=null,pt=0,cn=0,Bt=ie!=="nowrap";const{ascender:Ct,descender:Ke,unitsPerEm:Pe,lineGap:wt,capHeight:pn,xHeight:un}=Ee;xe.fontLoad=L()-Se;const Gt=L(),kn=V/Pe;K==="normal"&&(K=(Ct-Ke+wt)/Pe),K=K*V;const tr=(K-(Ct-Ke)*kn)/2,xr=-(Ct*kn+tr),sr=Math.min(K,(Ct-Ke)*kn),bi=(Ct+Ke)/2*kn-sr/2;let Mi=ge,yr=new O;const Or=[yr];Ee.forEachGlyph(D,V,Q,(li,no,Hr)=>{const Xr=D.charAt(Hr),ft=li.advanceWidth*kn,an=yr.count;let Un;if("isEmpty"in li||(li.isWhitespace=!!Xr&&new RegExp(f).test(Xr),li.canBreakAfter=!!Xr&&A.test(Xr),li.isEmpty=li.xMin===li.xMax||li.yMin===li.yMax||h.test(Xr)),!li.isWhitespace&&!li.isEmpty&&cn++,Bt&&le&&!li.isWhitespace&&no+ft+Mi>X&&an){if(yr.glyphAt(an-1).glyphObj.canBreakAfter)Un=new O,Mi=-no;else for(let fn=an;fn--;)if(fn===0&&_e==="break-word"){Un=new O,Mi=-no;break}else if(yr.glyphAt(fn).glyphObj.canBreakAfter){Un=yr.splitAt(fn+1);const qi=Un.glyphAt(0).x;Mi-=qi;for(let ys=Un.count;ys--;)Un.glyphAt(ys).x-=qi;break}Un&&(yr.isSoftWrapped=!0,yr=Un,Or.push(yr),pt=X)}let ar=yr.glyphAt(yr.count);ar.glyphObj=li,ar.x=no+Mi,ar.width=ft,ar.charIndex=Hr,Xr===`
`&&(yr=new O,Or.push(yr),Mi=-(no+ft+Q*V)+ge)}),Or.forEach(li=>{for(let no=li.count;no--;){let{glyphObj:Hr,x:Xr,width:ft}=li.glyphAt(no);if(!Hr.isWhitespace){li.width=Xr+ft,li.width>pt&&(pt=li.width);return}}});let Si=0,so=0;if(me&&(typeof me=="number"?Si=-me:typeof me=="string"&&(Si=-pt*(me==="left"?0:me==="center"?.5:me==="right"?1:F(me)))),we){if(typeof we=="number")so=-we;else if(typeof we=="string"){let li=Or.length*K;so=we==="top"?0:we==="top-baseline"?-xr:we==="top-cap"?-xr-pn*kn:we==="top-ex"?-xr-un*kn:we==="middle"?li/2:we==="bottom"?li:we==="bottom-baseline"?li-tr+Ke*kn:F(we)*li}}if(!Ye){const li=t.getEmbeddingLevels(D,oe);ye=new Uint16Array(cn),Be=new Float32Array(cn*2),be={},Ft=[p,p,-p,-p],Tt=[];let no=xr;ke&&(Et=new Float32Array(D.length*3)),Ne&&(je=new Uint8Array(cn*3));let Hr=0,Xr=-1,ft=-1,an,Un;if(Or.forEach((ar,fn)=>{let{count:qi,width:ys}=ar;if(qi>0){let Kd=0;for(let zo=qi;zo--&&ar.glyphAt(zo).glyphObj.isWhitespace;)Kd++;let Tp=0,Us=0;if(ae==="center")Tp=(pt-ys)/2;else if(ae==="right")Tp=pt-ys;else if(ae==="justify"&&ar.isSoftWrapped){let zo=0;for(let Go=qi-Kd;Go--;)ar.glyphAt(Go).glyphObj.isWhitespace&&zo++;Us=(pt-ys)/zo}if(Us||Tp){let zo=0;for(let Go=0;Go<qi;Go++){let Ip=ar.glyphAt(Go);const yc=Ip.glyphObj;Ip.x+=Tp+zo,Us!==0&&yc.isWhitespace&&Go<qi-Kd&&(zo+=Us,Ip.width+=Us)}}const Ts=t.getReorderSegments(D,li,ar.glyphAt(0).charIndex,ar.glyphAt(ar.count-1).charIndex);for(let zo=0;zo<Ts.length;zo++){const[Go,Ip]=Ts[zo];let yc=1/0,yo=-1/0;for(let Ya=0;Ya<qi;Ya++)if(ar.glyphAt(Ya).charIndex>=Go){let Al=Ya,ca=Ya;for(;ca<qi;ca++){let Zr=ar.glyphAt(ca);if(Zr.charIndex>Ip)break;ca<qi-Kd&&(yc=Math.min(yc,Zr.x),yo=Math.max(yo,Zr.x+Zr.width))}for(let Zr=Al;Zr<ca;Zr++){const vl=ar.glyphAt(Zr);vl.x=yo-(vl.x+vl.width-yc)}break}}let ko;const Bp=zo=>ko=zo;for(let zo=0;zo<qi;zo++){let Go=ar.glyphAt(zo);ko=Go.glyphObj;const Ip=ko.index,yc=li.levels[Go.charIndex]&1;if(yc){const yo=t.getMirroredCharacter(D[Go.charIndex]);yo&&Ee.forEachGlyph(yo,0,0,Bp)}if(ke){const{charIndex:yo}=Go,Ya=Go.x+Si,Al=Go.x+Go.width+Si;Et[yo*3]=yc?Al:Ya,Et[yo*3+1]=yc?Ya:Al,Et[yo*3+2]=no+bi+so;const ca=yo-Xr;ca>1&&P(Et,Xr,ca),Xr=yo}if(Ne){const{charIndex:yo}=Go;for(;yo>ft;)ft++,Ne.hasOwnProperty(ft)&&(Un=Ne[ft])}if(!ko.isWhitespace&&!ko.isEmpty){const yo=Hr++;be[Ip]||(be[Ip]={path:ko.path,pathBounds:[ko.xMin,ko.yMin,ko.xMax,ko.yMax]});const Ya=Go.x+Si,Al=no+so;Be[yo*2]=Ya,Be[yo*2+1]=Al;const ca=Ya+ko.xMin*kn,Zr=Al+ko.yMin*kn,vl=Ya+ko.xMax*kn,Jd=Al+ko.yMax*kn;ca<Ft[0]&&(Ft[0]=ca),Zr<Ft[1]&&(Ft[1]=Zr),vl>Ft[2]&&(Ft[2]=vl),Jd>Ft[3]&&(Ft[3]=Jd),yo%De===0&&(an={start:yo,end:yo,rect:[p,p,-p,-p]},Tt.push(an)),an.end++;const Ae=an.rect;if(ca<Ae[0]&&(Ae[0]=ca),Zr<Ae[1]&&(Ae[1]=Zr),vl>Ae[2]&&(Ae[2]=vl),Jd>Ae[3]&&(Ae[3]=Jd),ye[yo]=Ip,Ne){const Fe=yo*3;je[Fe]=Un>>16&255,je[Fe+1]=Un>>8&255,je[Fe+2]=Un&255}}}}no-=K}),Et){const ar=D.length-Xr;ar>1&&P(Et,Xr,ar)}}xe.typesetting=L()-Gt,Ge({glyphIds:ye,glyphPositions:Be,glyphData:be,caretPositions:Et,caretHeight:sr,glyphColors:je,chunkedBounds:Tt,fontSize:V,unitsPerEm:Pe,ascender:Ct*kn,descender:Ke*kn,capHeight:pn*kn,xHeight:un*kn,lineHeight:K,topBaseline:xr,blockBounds:[Si,so-Or.length*K,Si+pt,so],visibleBounds:Ft,timings:xe})})}function B(D,k){T(D,N=>{const[V,Q,K,X]=N.blockBounds;k({width:K-V,height:X-Q})},{metricsOnly:!0})}function F(D){let k=D.match(/^([\d.]+)%$/),N=k?parseFloat(k[1]):NaN;return isNaN(N)?0:N/100}function P(D,k,N){const V=D[k*3],Q=D[k*3+1],K=D[k*3+2],X=(Q-V)/N;for(let oe=0;oe<N;oe++){const ae=(k+oe)*3;D[ae]=V+X*oe,D[ae+1]=V+X*(oe+1),D[ae+2]=K}}function L(){return(self.performance||Date).now()}function O(){this.data=[]}const G=["glyphObj","x","width","charIndex"];return O.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/G.length)},glyphAt(D){let k=O.flyweight;return k.data=this.data,k.index=D,k},splitAt(D){let k=new O;return k.data=this.data.splice(D*G.length),k}},O.flyweight=G.reduce((D,k,N,V)=>(Object.defineProperty(D,k,{get(){return this.data[this.index*G.length+N]},set(Q){this.data[this.index*G.length+N]=Q}}),D),{data:null,index:0}),{typeset:T,measure:B,loadFont:b}}const Ys=()=>(self.performance||Date).now(),em=Zg();let ry;function hv(i,t,r,o,l,p,h,f,A,_,b=!0){return b?fv(i,t,r,o,l,p,h,f,A,_).then(null,T=>(ry||(la.warn("WebGL SDF generation failed, falling back to JS",T),ry=!0),o0(i,t,r,o,l,p,h,f,A,_))):o0(i,t,r,o,l,p,h,f,A,_)}const zf=[],r0=5;let su=0;function iy(){const i=Ys();for(;zf.length&&Ys()-i<r0;)zf.shift()();su=zf.length?setTimeout(iy,0):0}const fv=(...i)=>new Promise((t,r)=>{zf.push(()=>{const o=Ys();try{em.webgl.generateIntoCanvas(...i),t({timing:Ys()-o})}catch(l){r(l)}}),su||(su=setTimeout(iy,0))}),au=4,gv=2e3,i0={};let mv=0;function o0(i,t,r,o,l,p,h,f,A,_){const b="TroikaTextSDFGenerator_JS_"+mv++%au;let T=i0[b];return T||(T=i0[b]={workerModule:ou({name:b,workerId:b,dependencies:[Zg,Ys],init(B,F){const P=B().javascript.generate;return function(...L){const O=F();return{textureData:P(...L),timing:F()-O}}},getTransferables(B){return[B.textureData.buffer]}}),requests:0,idleTimer:null}),T.requests++,clearTimeout(T.idleTimer),T.workerModule(i,t,r,o,l,p).then(({textureData:B,timing:F})=>{const P=Ys(),L=new Uint8Array(B.length*4);for(let O=0;O<B.length;O++)L[O*4+_]=B[O];return em.webglUtils.renderImageData(h,L,f,A,i,t,1<<3-_),F+=Ys()-P,--T.requests===0&&(T.idleTimer=setTimeout(()=>{Df(b)},gv)),{timing:F}})}function s0(i){i._warm||(em.webgl.isSupported(i),i._warm=!0)}const a0=em.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function yv(){return typeof window=="undefined"&&(self.window=self),function(i){var t={parse:function(l){var p=t._bin,h=new Uint8Array(l);if(p.readASCII(h,0,4)=="ttcf"){var f=4;p.readUshort(h,f),f+=2,p.readUshort(h,f),f+=2;var A=p.readUint(h,f);f+=4;for(var _=[],b=0;b<A;b++){var T=p.readUint(h,f);f+=4,_.push(t._readFont(h,T))}return _}return[t._readFont(h,0)]},_readFont:function(l,p){var h=t._bin,f=p;h.readFixed(l,p),p+=4;var A=h.readUshort(l,p);p+=2,h.readUshort(l,p),p+=2,h.readUshort(l,p),p+=2,h.readUshort(l,p),p+=2;for(var _=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],b={_data:l,_offset:f},T={},B=0;B<A;B++){var F=h.readASCII(l,p,4);p+=4,h.readUint(l,p),p+=4;var P=h.readUint(l,p);p+=4;var L=h.readUint(l,p);p+=4,T[F]={offset:P,length:L}}for(B=0;B<_.length;B++){var O=_[B];T[O]&&(b[O.trim()]=t[O.trim()].parse(l,T[O].offset,T[O].length,b))}return b},_tabOffset:function(l,p,h){for(var f=t._bin,A=f.readUshort(l,h+4),_=h+12,b=0;b<A;b++){var T=f.readASCII(l,_,4);_+=4,f.readUint(l,_),_+=4;var B=f.readUint(l,_);if(_+=4,f.readUint(l,_),_+=4,T==p)return B}return 0}};t._bin={readFixed:function(l,p){return(l[p]<<8|l[p+1])+(l[p+2]<<8|l[p+3])/65540},readF2dot14:function(l,p){return t._bin.readShort(l,p)/16384},readInt:function(l,p){return t._bin._view(l).getInt32(p)},readInt8:function(l,p){return t._bin._view(l).getInt8(p)},readShort:function(l,p){return t._bin._view(l).getInt16(p)},readUshort:function(l,p){return t._bin._view(l).getUint16(p)},readUshorts:function(l,p,h){for(var f=[],A=0;A<h;A++)f.push(t._bin.readUshort(l,p+2*A));return f},readUint:function(l,p){return t._bin._view(l).getUint32(p)},readUint64:function(l,p){return 4294967296*t._bin.readUint(l,p)+t._bin.readUint(l,p+4)},readASCII:function(l,p,h){for(var f="",A=0;A<h;A++)f+=String.fromCharCode(l[p+A]);return f},readUnicode:function(l,p,h){for(var f="",A=0;A<h;A++){var _=l[p++]<<8|l[p++];f+=String.fromCharCode(_)}return f},_tdec:typeof window!="undefined"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(l,p,h){var f=t._bin._tdec;return f&&p==0&&h==l.length?f.decode(l):t._bin.readASCII(l,p,h)},readBytes:function(l,p,h){for(var f=[],A=0;A<h;A++)f.push(l[p+A]);return f},readASCIIArray:function(l,p,h){for(var f=[],A=0;A<h;A++)f.push(String.fromCharCode(l[p+A]));return f},_view:function(l){return l._dataView||(l._dataView=l.buffer?new DataView(l.buffer,l.byteOffset,l.byteLength):new DataView(new Uint8Array(l).buffer))}},t._lctf={},t._lctf.parse=function(l,p,h,f,A){var _=t._bin,b={},T=p;_.readFixed(l,p),p+=4;var B=_.readUshort(l,p);p+=2;var F=_.readUshort(l,p);p+=2;var P=_.readUshort(l,p);return p+=2,b.scriptList=t._lctf.readScriptList(l,T+B),b.featureList=t._lctf.readFeatureList(l,T+F),b.lookupList=t._lctf.readLookupList(l,T+P,A),b},t._lctf.readLookupList=function(l,p,h){var f=t._bin,A=p,_=[],b=f.readUshort(l,p);p+=2;for(var T=0;T<b;T++){var B=f.readUshort(l,p);p+=2;var F=t._lctf.readLookupTable(l,A+B,h);_.push(F)}return _},t._lctf.readLookupTable=function(l,p,h){var f=t._bin,A=p,_={tabs:[]};_.ltype=f.readUshort(l,p),p+=2,_.flag=f.readUshort(l,p),p+=2;var b=f.readUshort(l,p);p+=2;for(var T=_.ltype,B=0;B<b;B++){var F=f.readUshort(l,p);p+=2;var P=h(l,T,A+F,_);_.tabs.push(P)}return _},t._lctf.numOfOnes=function(l){for(var p=0,h=0;h<32;h++)l>>>h&1&&p++;return p},t._lctf.readClassDef=function(l,p){var h=t._bin,f=[],A=h.readUshort(l,p);if(p+=2,A==1){var _=h.readUshort(l,p);p+=2;var b=h.readUshort(l,p);p+=2;for(var T=0;T<b;T++)f.push(_+T),f.push(_+T),f.push(h.readUshort(l,p)),p+=2}if(A==2){var B=h.readUshort(l,p);for(p+=2,T=0;T<B;T++)f.push(h.readUshort(l,p)),p+=2,f.push(h.readUshort(l,p)),p+=2,f.push(h.readUshort(l,p)),p+=2}return f},t._lctf.getInterval=function(l,p){for(var h=0;h<l.length;h+=3){var f=l[h],A=l[h+1];if(l[h+2],f<=p&&p<=A)return h}return-1},t._lctf.readCoverage=function(l,p){var h=t._bin,f={};f.fmt=h.readUshort(l,p),p+=2;var A=h.readUshort(l,p);return p+=2,f.fmt==1&&(f.tab=h.readUshorts(l,p,A)),f.fmt==2&&(f.tab=h.readUshorts(l,p,3*A)),f},t._lctf.coverageIndex=function(l,p){var h=l.tab;if(l.fmt==1)return h.indexOf(p);if(l.fmt==2){var f=t._lctf.getInterval(h,p);if(f!=-1)return h[f+2]+(p-h[f])}return-1},t._lctf.readFeatureList=function(l,p){var h=t._bin,f=p,A=[],_=h.readUshort(l,p);p+=2;for(var b=0;b<_;b++){var T=h.readASCII(l,p,4);p+=4;var B=h.readUshort(l,p);p+=2;var F=t._lctf.readFeatureTable(l,f+B);F.tag=T.trim(),A.push(F)}return A},t._lctf.readFeatureTable=function(l,p){var h=t._bin,f=p,A={},_=h.readUshort(l,p);p+=2,_>0&&(A.featureParams=f+_);var b=h.readUshort(l,p);p+=2,A.tab=[];for(var T=0;T<b;T++)A.tab.push(h.readUshort(l,p+2*T));return A},t._lctf.readScriptList=function(l,p){var h=t._bin,f=p,A={},_=h.readUshort(l,p);p+=2;for(var b=0;b<_;b++){var T=h.readASCII(l,p,4);p+=4;var B=h.readUshort(l,p);p+=2,A[T.trim()]=t._lctf.readScriptTable(l,f+B)}return A},t._lctf.readScriptTable=function(l,p){var h=t._bin,f=p,A={},_=h.readUshort(l,p);p+=2,A.default=t._lctf.readLangSysTable(l,f+_);var b=h.readUshort(l,p);p+=2;for(var T=0;T<b;T++){var B=h.readASCII(l,p,4);p+=4;var F=h.readUshort(l,p);p+=2,A[B.trim()]=t._lctf.readLangSysTable(l,f+F)}return A},t._lctf.readLangSysTable=function(l,p){var h=t._bin,f={};h.readUshort(l,p),p+=2,f.reqFeature=h.readUshort(l,p),p+=2;var A=h.readUshort(l,p);return p+=2,f.features=h.readUshorts(l,p,A),f},t.CFF={},t.CFF.parse=function(l,p,h){var f=t._bin;(l=new Uint8Array(l.buffer,p,h))[p=0],l[++p],l[++p],l[++p],p++;var A=[];p=t.CFF.readIndex(l,p,A);for(var _=[],b=0;b<A.length-1;b++)_.push(f.readASCII(l,p+A[b],A[b+1]-A[b]));p+=A[A.length-1];var T=[];p=t.CFF.readIndex(l,p,T);var B=[];for(b=0;b<T.length-1;b++)B.push(t.CFF.readDict(l,p+T[b],p+T[b+1]));p+=T[T.length-1];var F=B[0],P=[];p=t.CFF.readIndex(l,p,P);var L=[];for(b=0;b<P.length-1;b++)L.push(f.readASCII(l,p+P[b],P[b+1]-P[b]));if(p+=P[P.length-1],t.CFF.readSubrs(l,p,F),F.CharStrings){p=F.CharStrings,P=[],p=t.CFF.readIndex(l,p,P);var O=[];for(b=0;b<P.length-1;b++)O.push(f.readBytes(l,p+P[b],P[b+1]-P[b]));F.CharStrings=O}if(F.ROS){p=F.FDArray;var G=[];for(p=t.CFF.readIndex(l,p,G),F.FDArray=[],b=0;b<G.length-1;b++){var D=t.CFF.readDict(l,p+G[b],p+G[b+1]);t.CFF._readFDict(l,D,L),F.FDArray.push(D)}p+=G[G.length-1],p=F.FDSelect,F.FDSelect=[];var k=l[p];if(p++,k!=3)throw k;var N=f.readUshort(l,p);for(p+=2,b=0;b<N+1;b++)F.FDSelect.push(f.readUshort(l,p),l[p+2]),p+=3}return F.Encoding&&(F.Encoding=t.CFF.readEncoding(l,F.Encoding,F.CharStrings.length)),F.charset&&(F.charset=t.CFF.readCharset(l,F.charset,F.CharStrings.length)),t.CFF._readFDict(l,F,L),F},t.CFF._readFDict=function(l,p,h){var f;for(var A in p.Private&&(f=p.Private[1],p.Private=t.CFF.readDict(l,f,f+p.Private[0]),p.Private.Subrs&&t.CFF.readSubrs(l,f+p.Private.Subrs,p.Private)),p)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(A)!=-1&&(p[A]=h[p[A]-426+35])},t.CFF.readSubrs=function(l,p,h){var f=t._bin,A=[];p=t.CFF.readIndex(l,p,A);var _,b=A.length;_=b<1240?107:b<33900?1131:32768,h.Bias=_,h.Subrs=[];for(var T=0;T<A.length-1;T++)h.Subrs.push(f.readBytes(l,p+A[T],A[T+1]-A[T]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(l,p){for(var h=0;h<l.charset.length;h++)if(l.charset[h]==p)return h;return-1},t.CFF.glyphBySE=function(l,p){return p<0||p>255?-1:t.CFF.glyphByUnicode(l,t.CFF.tableSE[p])},t.CFF.readEncoding=function(l,p,h){t._bin;var f=[".notdef"],A=l[p];if(p++,A!=0)throw"error: unknown encoding format: "+A;var _=l[p];p++;for(var b=0;b<_;b++)f.push(l[p+b]);return f},t.CFF.readCharset=function(l,p,h){var f=t._bin,A=[".notdef"],_=l[p];if(p++,_==0)for(var b=0;b<h;b++){var T=f.readUshort(l,p);p+=2,A.push(T)}else{if(_!=1&&_!=2)throw"error: format: "+_;for(;A.length<h;){T=f.readUshort(l,p),p+=2;var B=0;for(_==1?(B=l[p],p++):(B=f.readUshort(l,p),p+=2),b=0;b<=B;b++)A.push(T),T++}}return A},t.CFF.readIndex=function(l,p,h){var f=t._bin,A=f.readUshort(l,p)+1,_=l[p+=2];if(p++,_==1)for(var b=0;b<A;b++)h.push(l[p+b]);else if(_==2)for(b=0;b<A;b++)h.push(f.readUshort(l,p+2*b));else if(_==3)for(b=0;b<A;b++)h.push(16777215&f.readUint(l,p+3*b-1));else if(A!=1)throw"unsupported offset size: "+_+", count: "+A;return(p+=A*_)-1},t.CFF.getCharString=function(l,p,h){var f=t._bin,A=l[p],_=l[p+1];l[p+2],l[p+3],l[p+4];var b=1,T=null,B=null;A<=20&&(T=A,b=1),A==12&&(T=100*A+_,b=2),21<=A&&A<=27&&(T=A,b=1),A==28&&(B=f.readShort(l,p+1),b=3),29<=A&&A<=31&&(T=A,b=1),32<=A&&A<=246&&(B=A-139,b=1),247<=A&&A<=250&&(B=256*(A-247)+_+108,b=2),251<=A&&A<=254&&(B=256*-(A-251)-_-108,b=2),A==255&&(B=f.readInt(l,p+1)/65535,b=5),h.val=B!=null?B:"o"+T,h.size=b},t.CFF.readCharString=function(l,p,h){for(var f=p+h,A=t._bin,_=[];p<f;){var b=l[p],T=l[p+1];l[p+2],l[p+3],l[p+4];var B=1,F=null,P=null;b<=20&&(F=b,B=1),b==12&&(F=100*b+T,B=2),b!=19&&b!=20||(F=b,B=2),21<=b&&b<=27&&(F=b,B=1),b==28&&(P=A.readShort(l,p+1),B=3),29<=b&&b<=31&&(F=b,B=1),32<=b&&b<=246&&(P=b-139,B=1),247<=b&&b<=250&&(P=256*(b-247)+T+108,B=2),251<=b&&b<=254&&(P=256*-(b-251)-T-108,B=2),b==255&&(P=A.readInt(l,p+1)/65535,B=5),_.push(P!=null?P:"o"+F),p+=B}return _},t.CFF.readDict=function(l,p,h){for(var f=t._bin,A={},_=[];p<h;){var b=l[p],T=l[p+1];l[p+2],l[p+3],l[p+4];var B=1,F=null,P=null;if(b==28&&(P=f.readShort(l,p+1),B=3),b==29&&(P=f.readInt(l,p+1),B=5),32<=b&&b<=246&&(P=b-139,B=1),247<=b&&b<=250&&(P=256*(b-247)+T+108,B=2),251<=b&&b<=254&&(P=256*-(b-251)-T-108,B=2),b==255)throw P=f.readInt(l,p+1)/65535,B=5,"unknown number";if(b==30){var L=[];for(B=1;;){var O=l[p+B];B++;var G=O>>4,D=15&O;if(G!=15&&L.push(G),D!=15&&L.push(D),D==15)break}for(var k="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],V=0;V<L.length;V++)k+=N[L[V]];P=parseFloat(k)}b<=21&&(F=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][b],B=1,b==12&&(F=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][T],B=2)),F!=null?(A[F]=_.length==1?_[0]:_,_=[]):_.push(P),p+=B}return A},t.cmap={},t.cmap.parse=function(l,p,h){l=new Uint8Array(l.buffer,p,h),p=0;var f=t._bin,A={};f.readUshort(l,p),p+=2;var _=f.readUshort(l,p);p+=2;var b=[];A.tables=[];for(var T=0;T<_;T++){var B=f.readUshort(l,p);p+=2;var F=f.readUshort(l,p);p+=2;var P=f.readUint(l,p);p+=4;var L="p"+B+"e"+F,O=b.indexOf(P);if(O==-1){var G;O=A.tables.length,b.push(P);var D=f.readUshort(l,P);D==0?G=t.cmap.parse0(l,P):D==4?G=t.cmap.parse4(l,P):D==6?G=t.cmap.parse6(l,P):D==12?G=t.cmap.parse12(l,P):la.debug("unknown format: "+D,B,F,P),A.tables.push(G)}if(A[L]!=null)throw"multiple tables for one platform+encoding";A[L]=O}return A},t.cmap.parse0=function(l,p){var h=t._bin,f={};f.format=h.readUshort(l,p),p+=2;var A=h.readUshort(l,p);p+=2,h.readUshort(l,p),p+=2,f.map=[];for(var _=0;_<A-6;_++)f.map.push(l[p+_]);return f},t.cmap.parse4=function(l,p){var h=t._bin,f=p,A={};A.format=h.readUshort(l,p),p+=2;var _=h.readUshort(l,p);p+=2,h.readUshort(l,p),p+=2;var b=h.readUshort(l,p);p+=2;var T=b/2;A.searchRange=h.readUshort(l,p),p+=2,A.entrySelector=h.readUshort(l,p),p+=2,A.rangeShift=h.readUshort(l,p),p+=2,A.endCount=h.readUshorts(l,p,T),p+=2*T,p+=2,A.startCount=h.readUshorts(l,p,T),p+=2*T,A.idDelta=[];for(var B=0;B<T;B++)A.idDelta.push(h.readShort(l,p)),p+=2;for(A.idRangeOffset=h.readUshorts(l,p,T),p+=2*T,A.glyphIdArray=[];p<f+_;)A.glyphIdArray.push(h.readUshort(l,p)),p+=2;return A},t.cmap.parse6=function(l,p){var h=t._bin,f={};f.format=h.readUshort(l,p),p+=2,h.readUshort(l,p),p+=2,h.readUshort(l,p),p+=2,f.firstCode=h.readUshort(l,p),p+=2;var A=h.readUshort(l,p);p+=2,f.glyphIdArray=[];for(var _=0;_<A;_++)f.glyphIdArray.push(h.readUshort(l,p)),p+=2;return f},t.cmap.parse12=function(l,p){var h=t._bin,f={};f.format=h.readUshort(l,p),p+=2,p+=2,h.readUint(l,p),p+=4,h.readUint(l,p),p+=4;var A=h.readUint(l,p);p+=4,f.groups=[];for(var _=0;_<A;_++){var b=p+12*_,T=h.readUint(l,b+0),B=h.readUint(l,b+4),F=h.readUint(l,b+8);f.groups.push([T,B,F])}return f},t.glyf={},t.glyf.parse=function(l,p,h,f){for(var A=[],_=0;_<f.maxp.numGlyphs;_++)A.push(null);return A},t.glyf._parseGlyf=function(l,p){var h=t._bin,f=l._data,A=t._tabOffset(f,"glyf",l._offset)+l.loca[p];if(l.loca[p]==l.loca[p+1])return null;var _={};if(_.noc=h.readShort(f,A),A+=2,_.xMin=h.readShort(f,A),A+=2,_.yMin=h.readShort(f,A),A+=2,_.xMax=h.readShort(f,A),A+=2,_.yMax=h.readShort(f,A),A+=2,_.xMin>=_.xMax||_.yMin>=_.yMax)return null;if(_.noc>0){_.endPts=[];for(var b=0;b<_.noc;b++)_.endPts.push(h.readUshort(f,A)),A+=2;var T=h.readUshort(f,A);if(A+=2,f.length-A<T)return null;_.instructions=h.readBytes(f,A,T),A+=T;var B=_.endPts[_.noc-1]+1;for(_.flags=[],b=0;b<B;b++){var F=f[A];if(A++,_.flags.push(F),(8&F)!=0){var P=f[A];A++;for(var L=0;L<P;L++)_.flags.push(F),b++}}for(_.xs=[],b=0;b<B;b++){var O=(2&_.flags[b])!=0,G=(16&_.flags[b])!=0;O?(_.xs.push(G?f[A]:-f[A]),A++):G?_.xs.push(0):(_.xs.push(h.readShort(f,A)),A+=2)}for(_.ys=[],b=0;b<B;b++)O=(4&_.flags[b])!=0,G=(32&_.flags[b])!=0,O?(_.ys.push(G?f[A]:-f[A]),A++):G?_.ys.push(0):(_.ys.push(h.readShort(f,A)),A+=2);var D=0,k=0;for(b=0;b<B;b++)D+=_.xs[b],k+=_.ys[b],_.xs[b]=D,_.ys[b]=k}else{var N;_.parts=[];do{N=h.readUshort(f,A),A+=2;var V={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(_.parts.push(V),V.glyphIndex=h.readUshort(f,A),A+=2,1&N){var Q=h.readShort(f,A);A+=2;var K=h.readShort(f,A);A+=2}else Q=h.readInt8(f,A),A++,K=h.readInt8(f,A),A++;2&N?(V.m.tx=Q,V.m.ty=K):(V.p1=Q,V.p2=K),8&N?(V.m.a=V.m.d=h.readF2dot14(f,A),A+=2):64&N?(V.m.a=h.readF2dot14(f,A),A+=2,V.m.d=h.readF2dot14(f,A),A+=2):128&N&&(V.m.a=h.readF2dot14(f,A),A+=2,V.m.b=h.readF2dot14(f,A),A+=2,V.m.c=h.readF2dot14(f,A),A+=2,V.m.d=h.readF2dot14(f,A),A+=2)}while(32&N);if(256&N){var X=h.readUshort(f,A);for(A+=2,_.instr=[],b=0;b<X;b++)_.instr.push(f[A]),A++}}return _},t.GPOS={},t.GPOS.parse=function(l,p,h,f){return t._lctf.parse(l,p,h,f,t.GPOS.subt)},t.GPOS.subt=function(l,p,h,f){var A=t._bin,_=h,b={};if(b.fmt=A.readUshort(l,h),h+=2,p==1||p==2||p==3||p==7||p==8&&b.fmt<=2){var T=A.readUshort(l,h);h+=2,b.coverage=t._lctf.readCoverage(l,T+_)}if(p==1&&b.fmt==1){var B=A.readUshort(l,h);h+=2;var F=t._lctf.numOfOnes(B);B!=0&&(b.pos=t.GPOS.readValueRecord(l,h,B))}else if(p==2&&b.fmt>=1&&b.fmt<=2){B=A.readUshort(l,h),h+=2;var P=A.readUshort(l,h);h+=2,F=t._lctf.numOfOnes(B);var L=t._lctf.numOfOnes(P);if(b.fmt==1){b.pairsets=[];var O=A.readUshort(l,h);h+=2;for(var G=0;G<O;G++){var D=_+A.readUshort(l,h);h+=2;var k=A.readUshort(l,D);D+=2;for(var N=[],V=0;V<k;V++){var Q=A.readUshort(l,D);D+=2,B!=0&&(ie=t.GPOS.readValueRecord(l,D,B),D+=2*F),P!=0&&(_e=t.GPOS.readValueRecord(l,D,P),D+=2*L),N.push({gid2:Q,val1:ie,val2:_e})}b.pairsets.push(N)}}if(b.fmt==2){var K=A.readUshort(l,h);h+=2;var X=A.readUshort(l,h);h+=2;var oe=A.readUshort(l,h);h+=2;var ae=A.readUshort(l,h);for(h+=2,b.classDef1=t._lctf.readClassDef(l,_+K),b.classDef2=t._lctf.readClassDef(l,_+X),b.matrix=[],G=0;G<oe;G++){var ge=[];for(V=0;V<ae;V++){var ie=null,_e=null;B!=0&&(ie=t.GPOS.readValueRecord(l,h,B),h+=2*F),P!=0&&(_e=t.GPOS.readValueRecord(l,h,P),h+=2*L),ge.push({val1:ie,val2:_e})}b.matrix.push(ge)}}}else{if(p==9&&b.fmt==1){var me=A.readUshort(l,h);h+=2;var we=A.readUint(l,h);if(h+=4,f.ltype==9)f.ltype=me;else if(f.ltype!=me)throw"invalid extension substitution";return t.GPOS.subt(l,f.ltype,_+we)}la.debug("unsupported GPOS table LookupType",p,"format",b.fmt)}return b},t.GPOS.readValueRecord=function(l,p,h){var f=t._bin,A=[];return A.push(1&h?f.readShort(l,p):0),p+=1&h?2:0,A.push(2&h?f.readShort(l,p):0),p+=2&h?2:0,A.push(4&h?f.readShort(l,p):0),p+=4&h?2:0,A.push(8&h?f.readShort(l,p):0),p+=8&h?2:0,A},t.GSUB={},t.GSUB.parse=function(l,p,h,f){return t._lctf.parse(l,p,h,f,t.GSUB.subt)},t.GSUB.subt=function(l,p,h,f){var A=t._bin,_=h,b={};if(b.fmt=A.readUshort(l,h),h+=2,p!=1&&p!=4&&p!=5&&p!=6)return null;if(p==1||p==4||p==5&&b.fmt<=2||p==6&&b.fmt<=2){var T=A.readUshort(l,h);h+=2,b.coverage=t._lctf.readCoverage(l,_+T)}if(p==1&&b.fmt>=1&&b.fmt<=2){if(b.fmt==1)b.delta=A.readShort(l,h),h+=2;else if(b.fmt==2){var B=A.readUshort(l,h);h+=2,b.newg=A.readUshorts(l,h,B),h+=2*b.newg.length}}else if(p==4){b.vals=[],B=A.readUshort(l,h),h+=2;for(var F=0;F<B;F++){var P=A.readUshort(l,h);h+=2,b.vals.push(t.GSUB.readLigatureSet(l,_+P))}}else if(p==5&&b.fmt==2){if(b.fmt==2){var L=A.readUshort(l,h);h+=2,b.cDef=t._lctf.readClassDef(l,_+L),b.scset=[];var O=A.readUshort(l,h);for(h+=2,F=0;F<O;F++){var G=A.readUshort(l,h);h+=2,b.scset.push(G==0?null:t.GSUB.readSubClassSet(l,_+G))}}}else if(p==6&&b.fmt==3){if(b.fmt==3){for(F=0;F<3;F++){B=A.readUshort(l,h),h+=2;for(var D=[],k=0;k<B;k++)D.push(t._lctf.readCoverage(l,_+A.readUshort(l,h+2*k)));h+=2*B,F==0&&(b.backCvg=D),F==1&&(b.inptCvg=D),F==2&&(b.ahedCvg=D)}B=A.readUshort(l,h),h+=2,b.lookupRec=t.GSUB.readSubstLookupRecords(l,h,B)}}else{if(p==7&&b.fmt==1){var N=A.readUshort(l,h);h+=2;var V=A.readUint(l,h);if(h+=4,f.ltype==9)f.ltype=N;else if(f.ltype!=N)throw"invalid extension substitution";return t.GSUB.subt(l,f.ltype,_+V)}la.debug("unsupported GSUB table LookupType",p,"format",b.fmt)}return b},t.GSUB.readSubClassSet=function(l,p){var h=t._bin.readUshort,f=p,A=[],_=h(l,p);p+=2;for(var b=0;b<_;b++){var T=h(l,p);p+=2,A.push(t.GSUB.readSubClassRule(l,f+T))}return A},t.GSUB.readSubClassRule=function(l,p){var h=t._bin.readUshort,f={},A=h(l,p),_=h(l,p+=2);p+=2,f.input=[];for(var b=0;b<A-1;b++)f.input.push(h(l,p)),p+=2;return f.substLookupRecords=t.GSUB.readSubstLookupRecords(l,p,_),f},t.GSUB.readSubstLookupRecords=function(l,p,h){for(var f=t._bin.readUshort,A=[],_=0;_<h;_++)A.push(f(l,p),f(l,p+2)),p+=4;return A},t.GSUB.readChainSubClassSet=function(l,p){var h=t._bin,f=p,A=[],_=h.readUshort(l,p);p+=2;for(var b=0;b<_;b++){var T=h.readUshort(l,p);p+=2,A.push(t.GSUB.readChainSubClassRule(l,f+T))}return A},t.GSUB.readChainSubClassRule=function(l,p){for(var h=t._bin,f={},A=["backtrack","input","lookahead"],_=0;_<A.length;_++){var b=h.readUshort(l,p);p+=2,_==1&&b--,f[A[_]]=h.readUshorts(l,p,b),p+=2*f[A[_]].length}return b=h.readUshort(l,p),p+=2,f.subst=h.readUshorts(l,p,2*b),p+=2*f.subst.length,f},t.GSUB.readLigatureSet=function(l,p){var h=t._bin,f=p,A=[],_=h.readUshort(l,p);p+=2;for(var b=0;b<_;b++){var T=h.readUshort(l,p);p+=2,A.push(t.GSUB.readLigature(l,f+T))}return A},t.GSUB.readLigature=function(l,p){var h=t._bin,f={chain:[]};f.nglyph=h.readUshort(l,p),p+=2;var A=h.readUshort(l,p);p+=2;for(var _=0;_<A-1;_++)f.chain.push(h.readUshort(l,p)),p+=2;return f},t.head={},t.head.parse=function(l,p,h){var f=t._bin,A={};return f.readFixed(l,p),p+=4,A.fontRevision=f.readFixed(l,p),p+=4,f.readUint(l,p),p+=4,f.readUint(l,p),p+=4,A.flags=f.readUshort(l,p),p+=2,A.unitsPerEm=f.readUshort(l,p),p+=2,A.created=f.readUint64(l,p),p+=8,A.modified=f.readUint64(l,p),p+=8,A.xMin=f.readShort(l,p),p+=2,A.yMin=f.readShort(l,p),p+=2,A.xMax=f.readShort(l,p),p+=2,A.yMax=f.readShort(l,p),p+=2,A.macStyle=f.readUshort(l,p),p+=2,A.lowestRecPPEM=f.readUshort(l,p),p+=2,A.fontDirectionHint=f.readShort(l,p),p+=2,A.indexToLocFormat=f.readShort(l,p),p+=2,A.glyphDataFormat=f.readShort(l,p),p+=2,A},t.hhea={},t.hhea.parse=function(l,p,h){var f=t._bin,A={};return f.readFixed(l,p),p+=4,A.ascender=f.readShort(l,p),p+=2,A.descender=f.readShort(l,p),p+=2,A.lineGap=f.readShort(l,p),p+=2,A.advanceWidthMax=f.readUshort(l,p),p+=2,A.minLeftSideBearing=f.readShort(l,p),p+=2,A.minRightSideBearing=f.readShort(l,p),p+=2,A.xMaxExtent=f.readShort(l,p),p+=2,A.caretSlopeRise=f.readShort(l,p),p+=2,A.caretSlopeRun=f.readShort(l,p),p+=2,A.caretOffset=f.readShort(l,p),p+=2,p+=8,A.metricDataFormat=f.readShort(l,p),p+=2,A.numberOfHMetrics=f.readUshort(l,p),p+=2,A},t.hmtx={},t.hmtx.parse=function(l,p,h,f){for(var A=t._bin,_={aWidth:[],lsBearing:[]},b=0,T=0,B=0;B<f.maxp.numGlyphs;B++)B<f.hhea.numberOfHMetrics&&(b=A.readUshort(l,p),p+=2,T=A.readShort(l,p),p+=2),_.aWidth.push(b),_.lsBearing.push(T);return _},t.kern={},t.kern.parse=function(l,p,h,f){var A=t._bin,_=A.readUshort(l,p);if(p+=2,_==1)return t.kern.parseV1(l,p-2,h,f);var b=A.readUshort(l,p);p+=2;for(var T={glyph1:[],rval:[]},B=0;B<b;B++){p+=2,h=A.readUshort(l,p),p+=2;var F=A.readUshort(l,p);p+=2;var P=F>>>8;if((P&=15)!=0)throw"unknown kern table format: "+P;p=t.kern.readFormat0(l,p,T)}return T},t.kern.parseV1=function(l,p,h,f){var A=t._bin;A.readFixed(l,p),p+=4;var _=A.readUint(l,p);p+=4;for(var b={glyph1:[],rval:[]},T=0;T<_;T++){A.readUint(l,p),p+=4;var B=A.readUshort(l,p);p+=2,A.readUshort(l,p),p+=2;var F=B>>>8;if((F&=15)!=0)throw"unknown kern table format: "+F;p=t.kern.readFormat0(l,p,b)}return b},t.kern.readFormat0=function(l,p,h){var f=t._bin,A=-1,_=f.readUshort(l,p);p+=2,f.readUshort(l,p),p+=2,f.readUshort(l,p),p+=2,f.readUshort(l,p),p+=2;for(var b=0;b<_;b++){var T=f.readUshort(l,p);p+=2;var B=f.readUshort(l,p);p+=2;var F=f.readShort(l,p);p+=2,T!=A&&(h.glyph1.push(T),h.rval.push({glyph2:[],vals:[]}));var P=h.rval[h.rval.length-1];P.glyph2.push(B),P.vals.push(F),A=T}return p},t.loca={},t.loca.parse=function(l,p,h,f){var A=t._bin,_=[],b=f.head.indexToLocFormat,T=f.maxp.numGlyphs+1;if(b==0)for(var B=0;B<T;B++)_.push(A.readUshort(l,p+(B<<1))<<1);if(b==1)for(B=0;B<T;B++)_.push(A.readUint(l,p+(B<<2)));return _},t.maxp={},t.maxp.parse=function(l,p,h){var f=t._bin,A={},_=f.readUint(l,p);return p+=4,A.numGlyphs=f.readUshort(l,p),p+=2,_==65536&&(A.maxPoints=f.readUshort(l,p),p+=2,A.maxContours=f.readUshort(l,p),p+=2,A.maxCompositePoints=f.readUshort(l,p),p+=2,A.maxCompositeContours=f.readUshort(l,p),p+=2,A.maxZones=f.readUshort(l,p),p+=2,A.maxTwilightPoints=f.readUshort(l,p),p+=2,A.maxStorage=f.readUshort(l,p),p+=2,A.maxFunctionDefs=f.readUshort(l,p),p+=2,A.maxInstructionDefs=f.readUshort(l,p),p+=2,A.maxStackElements=f.readUshort(l,p),p+=2,A.maxSizeOfInstructions=f.readUshort(l,p),p+=2,A.maxComponentElements=f.readUshort(l,p),p+=2,A.maxComponentDepth=f.readUshort(l,p),p+=2),A},t.name={},t.name.parse=function(l,p,h){var f=t._bin,A={};f.readUshort(l,p),p+=2;var _=f.readUshort(l,p);p+=2,f.readUshort(l,p);for(var b,T=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],B=p+=2,F=0;F<_;F++){var P=f.readUshort(l,p);p+=2;var L=f.readUshort(l,p);p+=2;var O=f.readUshort(l,p);p+=2;var G=f.readUshort(l,p);p+=2;var D=f.readUshort(l,p);p+=2;var k=f.readUshort(l,p);p+=2;var N,V=T[G],Q=B+12*_+k;if(P==0)N=f.readUnicode(l,Q,D/2);else if(P==3&&L==0)N=f.readUnicode(l,Q,D/2);else if(L==0)N=f.readASCII(l,Q,D);else if(L==1)N=f.readUnicode(l,Q,D/2);else if(L==3)N=f.readUnicode(l,Q,D/2);else{if(P!=1)throw"unknown encoding "+L+", platformID: "+P;N=f.readASCII(l,Q,D),la.debug("reading unknown MAC encoding "+L+" as ASCII")}var K="p"+P+","+O.toString(16);A[K]==null&&(A[K]={}),A[K][V!==void 0?V:G]=N,A[K]._lang=O}for(var X in A)if(A[X].postScriptName!=null&&A[X]._lang==1033)return A[X];for(var X in A)if(A[X].postScriptName!=null&&A[X]._lang==0)return A[X];for(var X in A)if(A[X].postScriptName!=null&&A[X]._lang==3084)return A[X];for(var X in A)if(A[X].postScriptName!=null)return A[X];for(var X in A){b=X;break}return la.debug("returning name table with languageID "+A[b]._lang),A[b]},t["OS/2"]={},t["OS/2"].parse=function(l,p,h){var f=t._bin.readUshort(l,p);p+=2;var A={};if(f==0)t["OS/2"].version0(l,p,A);else if(f==1)t["OS/2"].version1(l,p,A);else if(f==2||f==3||f==4)t["OS/2"].version2(l,p,A);else{if(f!=5)throw"unknown OS/2 table version: "+f;t["OS/2"].version5(l,p,A)}return A},t["OS/2"].version0=function(l,p,h){var f=t._bin;return h.xAvgCharWidth=f.readShort(l,p),p+=2,h.usWeightClass=f.readUshort(l,p),p+=2,h.usWidthClass=f.readUshort(l,p),p+=2,h.fsType=f.readUshort(l,p),p+=2,h.ySubscriptXSize=f.readShort(l,p),p+=2,h.ySubscriptYSize=f.readShort(l,p),p+=2,h.ySubscriptXOffset=f.readShort(l,p),p+=2,h.ySubscriptYOffset=f.readShort(l,p),p+=2,h.ySuperscriptXSize=f.readShort(l,p),p+=2,h.ySuperscriptYSize=f.readShort(l,p),p+=2,h.ySuperscriptXOffset=f.readShort(l,p),p+=2,h.ySuperscriptYOffset=f.readShort(l,p),p+=2,h.yStrikeoutSize=f.readShort(l,p),p+=2,h.yStrikeoutPosition=f.readShort(l,p),p+=2,h.sFamilyClass=f.readShort(l,p),p+=2,h.panose=f.readBytes(l,p,10),p+=10,h.ulUnicodeRange1=f.readUint(l,p),p+=4,h.ulUnicodeRange2=f.readUint(l,p),p+=4,h.ulUnicodeRange3=f.readUint(l,p),p+=4,h.ulUnicodeRange4=f.readUint(l,p),p+=4,h.achVendID=[f.readInt8(l,p),f.readInt8(l,p+1),f.readInt8(l,p+2),f.readInt8(l,p+3)],p+=4,h.fsSelection=f.readUshort(l,p),p+=2,h.usFirstCharIndex=f.readUshort(l,p),p+=2,h.usLastCharIndex=f.readUshort(l,p),p+=2,h.sTypoAscender=f.readShort(l,p),p+=2,h.sTypoDescender=f.readShort(l,p),p+=2,h.sTypoLineGap=f.readShort(l,p),p+=2,h.usWinAscent=f.readUshort(l,p),p+=2,h.usWinDescent=f.readUshort(l,p),p+=2},t["OS/2"].version1=function(l,p,h){var f=t._bin;return p=t["OS/2"].version0(l,p,h),h.ulCodePageRange1=f.readUint(l,p),p+=4,h.ulCodePageRange2=f.readUint(l,p),p+=4},t["OS/2"].version2=function(l,p,h){var f=t._bin;return p=t["OS/2"].version1(l,p,h),h.sxHeight=f.readShort(l,p),p+=2,h.sCapHeight=f.readShort(l,p),p+=2,h.usDefault=f.readUshort(l,p),p+=2,h.usBreak=f.readUshort(l,p),p+=2,h.usMaxContext=f.readUshort(l,p),p+=2},t["OS/2"].version5=function(l,p,h){var f=t._bin;return p=t["OS/2"].version2(l,p,h),h.usLowerOpticalPointSize=f.readUshort(l,p),p+=2,h.usUpperOpticalPointSize=f.readUshort(l,p),p+=2},t.post={},t.post.parse=function(l,p,h){var f=t._bin,A={};return A.version=f.readFixed(l,p),p+=4,A.italicAngle=f.readFixed(l,p),p+=4,A.underlinePosition=f.readShort(l,p),p+=2,A.underlineThickness=f.readShort(l,p),p+=2,A},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(l,p){var h=l.cmap,f=-1;if(h.p0e4!=null?f=h.p0e4:h.p3e1!=null?f=h.p3e1:h.p1e0!=null?f=h.p1e0:h.p0e3!=null&&(f=h.p0e3),f==-1)throw"no familiar platform and encoding!";var A=h.tables[f];if(A.format==0)return p>=A.map.length?0:A.map[p];if(A.format==4){for(var _=-1,b=0;b<A.endCount.length;b++)if(p<=A.endCount[b]){_=b;break}return _==-1||A.startCount[_]>p?0:65535&(A.idRangeOffset[_]!=0?A.glyphIdArray[p-A.startCount[_]+(A.idRangeOffset[_]>>1)-(A.idRangeOffset.length-_)]:p+A.idDelta[_])}if(A.format==12){if(p>A.groups[A.groups.length-1][1])return 0;for(b=0;b<A.groups.length;b++){var T=A.groups[b];if(T[0]<=p&&p<=T[1])return T[2]+(p-T[0])}return 0}throw"unknown cmap table format "+A.format},t.U.glyphToPath=function(l,p){var h={cmds:[],crds:[]};if(l.SVG&&l.SVG.entries[p]){var f=l.SVG.entries[p];return f==null?h:(typeof f=="string"&&(f=t.SVG.toPath(f),l.SVG.entries[p]=f),f)}if(l.CFF){var A={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:l.CFF.Private?l.CFF.Private.defaultWidthX:0,open:!1},_=l.CFF,b=l.CFF.Private;if(_.ROS){for(var T=0;_.FDSelect[T+2]<=p;)T+=2;b=_.FDArray[_.FDSelect[T+1]].Private}t.U._drawCFF(l.CFF.CharStrings[p],A,_,b,h)}else l.glyf&&t.U._drawGlyf(p,l,h);return h},t.U._drawGlyf=function(l,p,h){var f=p.glyf[l];f==null&&(f=p.glyf[l]=t.glyf._parseGlyf(p,l)),f!=null&&(f.noc>-1?t.U._simpleGlyph(f,h):t.U._compoGlyph(f,p,h))},t.U._simpleGlyph=function(l,p){for(var h=0;h<l.noc;h++){for(var f=h==0?0:l.endPts[h-1]+1,A=l.endPts[h],_=f;_<=A;_++){var b=_==f?A:_-1,T=_==A?f:_+1,B=1&l.flags[_],F=1&l.flags[b],P=1&l.flags[T],L=l.xs[_],O=l.ys[_];if(_==f)if(B){if(!F){t.U.P.moveTo(p,L,O);continue}t.U.P.moveTo(p,l.xs[b],l.ys[b])}else F?t.U.P.moveTo(p,l.xs[b],l.ys[b]):t.U.P.moveTo(p,(l.xs[b]+L)/2,(l.ys[b]+O)/2);B?F&&t.U.P.lineTo(p,L,O):P?t.U.P.qcurveTo(p,L,O,l.xs[T],l.ys[T]):t.U.P.qcurveTo(p,L,O,(L+l.xs[T])/2,(O+l.ys[T])/2)}t.U.P.closePath(p)}},t.U._compoGlyph=function(l,p,h){for(var f=0;f<l.parts.length;f++){var A={cmds:[],crds:[]},_=l.parts[f];t.U._drawGlyf(_.glyphIndex,p,A);for(var b=_.m,T=0;T<A.crds.length;T+=2){var B=A.crds[T],F=A.crds[T+1];h.crds.push(B*b.a+F*b.b+b.tx),h.crds.push(B*b.c+F*b.d+b.ty)}for(T=0;T<A.cmds.length;T++)h.cmds.push(A.cmds[T])}},t.U._getGlyphClass=function(l,p){var h=t._lctf.getInterval(p,l);return h==-1?0:p[h+2]},t.U.getPairAdjustment=function(l,p,h){var f=!1;if(l.GPOS)for(var A=l.GPOS,_=A.lookupList,b=A.featureList,T=[],B=0;B<b.length;B++){var F=b[B];if(F.tag=="kern"){f=!0;for(var P=0;P<F.tab.length;P++)if(!T[F.tab[P]]){T[F.tab[P]]=!0;for(var L=_[F.tab[P]],O=0;O<L.tabs.length;O++)if(L.tabs[O]!=null){var G,D=L.tabs[O];if((!D.coverage||(G=t._lctf.coverageIndex(D.coverage,p))!=-1)&&L.ltype!=1){if(L.ltype==2){var k=null;if(D.fmt==1){var N=D.pairsets[G];for(B=0;B<N.length;B++)N[B].gid2==h&&(k=N[B])}else if(D.fmt==2){var V=t.U._getGlyphClass(p,D.classDef1),Q=t.U._getGlyphClass(h,D.classDef2);k=D.matrix[V][Q]}if(k){var K=0;return k.val1&&k.val1[2]&&(K+=k.val1[2]),k.val2&&k.val2[0]&&(K+=k.val2[0]),K}}}}}}}if(l.kern&&!f){var X=l.kern.glyph1.indexOf(p);if(X!=-1){var oe=l.kern.rval[X].glyph2.indexOf(h);if(oe!=-1)return l.kern.rval[X].vals[oe]}}return 0},t.U._applySubs=function(l,p,h,f){for(var A=l.length-p-1,_=0;_<h.tabs.length;_++)if(h.tabs[_]!=null){var b,T=h.tabs[_];if(!T.coverage||(b=t._lctf.coverageIndex(T.coverage,l[p]))!=-1){if(h.ltype==1)l[p],T.fmt==1?l[p]=l[p]+T.delta:l[p]=T.newg[b];else if(h.ltype==4)for(var B=T.vals[b],F=0;F<B.length;F++){var P=B[F],L=P.chain.length;if(!(L>A)){for(var O=!0,G=0,D=0;D<L;D++){for(;l[p+G+(1+D)]==-1;)G++;P.chain[D]!=l[p+G+(1+D)]&&(O=!1)}if(O){for(l[p]=P.nglyph,D=0;D<L+G;D++)l[p+D+1]=-1;break}}}else if(h.ltype==5&&T.fmt==2)for(var k=t._lctf.getInterval(T.cDef,l[p]),N=T.cDef[k+2],V=T.scset[N],Q=0;Q<V.length;Q++){var K=V[Q],X=K.input;if(!(X.length>A)){for(O=!0,D=0;D<X.length;D++){var oe=t._lctf.getInterval(T.cDef,l[p+1+D]);if(k==-1&&T.cDef[oe+2]!=X[D]){O=!1;break}}if(O){var ae=K.substLookupRecords;for(F=0;F<ae.length;F+=2)ae[F],ae[F+1]}}}else if(h.ltype==6&&T.fmt==3){if(!t.U._glsCovered(l,T.backCvg,p-T.backCvg.length)||!t.U._glsCovered(l,T.inptCvg,p)||!t.U._glsCovered(l,T.ahedCvg,p+T.inptCvg.length))continue;var ge=T.lookupRec;for(Q=0;Q<ge.length;Q+=2){k=ge[Q];var ie=f[ge[Q+1]];t.U._applySubs(l,p+k,ie,f)}}}}},t.U._glsCovered=function(l,p,h){for(var f=0;f<p.length;f++)if(t._lctf.coverageIndex(p[f],l[h+f])==-1)return!1;return!0},t.U.glyphsToPath=function(l,p,h){for(var f={cmds:[],crds:[]},A=0,_=0;_<p.length;_++){var b=p[_];if(b!=-1){for(var T=_<p.length-1&&p[_+1]!=-1?p[_+1]:0,B=t.U.glyphToPath(l,b),F=0;F<B.crds.length;F+=2)f.crds.push(B.crds[F]+A),f.crds.push(B.crds[F+1]);for(h&&f.cmds.push(h),F=0;F<B.cmds.length;F++)f.cmds.push(B.cmds[F]);h&&f.cmds.push("X"),A+=l.hmtx.aWidth[b],_<p.length-1&&(A+=t.U.getPairAdjustment(l,b,T))}}return f},t.U.P={},t.U.P.moveTo=function(l,p,h){l.cmds.push("M"),l.crds.push(p,h)},t.U.P.lineTo=function(l,p,h){l.cmds.push("L"),l.crds.push(p,h)},t.U.P.curveTo=function(l,p,h,f,A,_,b){l.cmds.push("C"),l.crds.push(p,h,f,A,_,b)},t.U.P.qcurveTo=function(l,p,h,f,A){l.cmds.push("Q"),l.crds.push(p,h,f,A)},t.U.P.closePath=function(l){l.cmds.push("Z")},t.U._drawCFF=function(l,p,h,f,A){for(var _=p.stack,b=p.nStems,T=p.haveWidth,B=p.width,F=p.open,P=0,L=p.x,O=p.y,G=0,D=0,k=0,N=0,V=0,Q=0,K=0,X=0,oe=0,ae=0,ge={val:0,size:0};P<l.length;){t.CFF.getCharString(l,P,ge);var ie=ge.val;if(P+=ge.size,ie=="o1"||ie=="o18")_.length%2!=0&&!T&&(B=_.shift()+f.nominalWidthX),b+=_.length>>1,_.length=0,T=!0;else if(ie=="o3"||ie=="o23")_.length%2!=0&&!T&&(B=_.shift()+f.nominalWidthX),b+=_.length>>1,_.length=0,T=!0;else if(ie=="o4")_.length>1&&!T&&(B=_.shift()+f.nominalWidthX,T=!0),F&&t.U.P.closePath(A),O+=_.pop(),t.U.P.moveTo(A,L,O),F=!0;else if(ie=="o5")for(;_.length>0;)L+=_.shift(),O+=_.shift(),t.U.P.lineTo(A,L,O);else if(ie=="o6"||ie=="o7")for(var _e=_.length,me=ie=="o6",we=0;we<_e;we++){var ke=_.shift();me?L+=ke:O+=ke,me=!me,t.U.P.lineTo(A,L,O)}else if(ie=="o8"||ie=="o24"){_e=_.length;for(var De=0;De+6<=_e;)G=L+_.shift(),D=O+_.shift(),k=G+_.shift(),N=D+_.shift(),L=k+_.shift(),O=N+_.shift(),t.U.P.curveTo(A,G,D,k,N,L,O),De+=6;ie=="o24"&&(L+=_.shift(),O+=_.shift(),t.U.P.lineTo(A,L,O))}else{if(ie=="o11")break;if(ie=="o1234"||ie=="o1235"||ie=="o1236"||ie=="o1237")ie=="o1234"&&(D=O,k=(G=L+_.shift())+_.shift(),ae=N=D+_.shift(),Q=N,X=O,L=(K=(V=(oe=k+_.shift())+_.shift())+_.shift())+_.shift(),t.U.P.curveTo(A,G,D,k,N,oe,ae),t.U.P.curveTo(A,V,Q,K,X,L,O)),ie=="o1235"&&(G=L+_.shift(),D=O+_.shift(),k=G+_.shift(),N=D+_.shift(),oe=k+_.shift(),ae=N+_.shift(),V=oe+_.shift(),Q=ae+_.shift(),K=V+_.shift(),X=Q+_.shift(),L=K+_.shift(),O=X+_.shift(),_.shift(),t.U.P.curveTo(A,G,D,k,N,oe,ae),t.U.P.curveTo(A,V,Q,K,X,L,O)),ie=="o1236"&&(G=L+_.shift(),D=O+_.shift(),k=G+_.shift(),ae=N=D+_.shift(),Q=N,K=(V=(oe=k+_.shift())+_.shift())+_.shift(),X=Q+_.shift(),L=K+_.shift(),t.U.P.curveTo(A,G,D,k,N,oe,ae),t.U.P.curveTo(A,V,Q,K,X,L,O)),ie=="o1237"&&(G=L+_.shift(),D=O+_.shift(),k=G+_.shift(),N=D+_.shift(),oe=k+_.shift(),ae=N+_.shift(),V=oe+_.shift(),Q=ae+_.shift(),K=V+_.shift(),X=Q+_.shift(),Math.abs(K-L)>Math.abs(X-O)?L=K+_.shift():O=X+_.shift(),t.U.P.curveTo(A,G,D,k,N,oe,ae),t.U.P.curveTo(A,V,Q,K,X,L,O));else if(ie=="o14"){if(_.length>0&&!T&&(B=_.shift()+h.nominalWidthX,T=!0),_.length==4){var Ne=_.shift(),Ge=_.shift(),Ye=_.shift(),Se=_.shift(),xe=t.CFF.glyphBySE(h,Ye),Ee=t.CFF.glyphBySE(h,Se);t.U._drawCFF(h.CharStrings[xe],p,h,f,A),p.x=Ne,p.y=Ge,t.U._drawCFF(h.CharStrings[Ee],p,h,f,A)}F&&(t.U.P.closePath(A),F=!1)}else if(ie=="o19"||ie=="o20")_.length%2!=0&&!T&&(B=_.shift()+f.nominalWidthX),b+=_.length>>1,_.length=0,T=!0,P+=b+7>>3;else if(ie=="o21")_.length>2&&!T&&(B=_.shift()+f.nominalWidthX,T=!0),O+=_.pop(),L+=_.pop(),F&&t.U.P.closePath(A),t.U.P.moveTo(A,L,O),F=!0;else if(ie=="o22")_.length>1&&!T&&(B=_.shift()+f.nominalWidthX,T=!0),L+=_.pop(),F&&t.U.P.closePath(A),t.U.P.moveTo(A,L,O),F=!0;else if(ie=="o25"){for(;_.length>6;)L+=_.shift(),O+=_.shift(),t.U.P.lineTo(A,L,O);G=L+_.shift(),D=O+_.shift(),k=G+_.shift(),N=D+_.shift(),L=k+_.shift(),O=N+_.shift(),t.U.P.curveTo(A,G,D,k,N,L,O)}else if(ie=="o26")for(_.length%2&&(L+=_.shift());_.length>0;)G=L,D=O+_.shift(),L=k=G+_.shift(),O=(N=D+_.shift())+_.shift(),t.U.P.curveTo(A,G,D,k,N,L,O);else if(ie=="o27")for(_.length%2&&(O+=_.shift());_.length>0;)D=O,k=(G=L+_.shift())+_.shift(),N=D+_.shift(),L=k+_.shift(),O=N,t.U.P.curveTo(A,G,D,k,N,L,O);else if(ie=="o10"||ie=="o29"){var le=ie=="o10"?f:h;if(_.length==0)la.debug("error: empty stack");else{var ye=_.pop(),Be=le.Subrs[ye+le.Bias];p.x=L,p.y=O,p.nStems=b,p.haveWidth=T,p.width=B,p.open=F,t.U._drawCFF(Be,p,h,f,A),L=p.x,O=p.y,b=p.nStems,T=p.haveWidth,B=p.width,F=p.open}}else if(ie=="o30"||ie=="o31"){var be=_.length,je=(De=0,ie=="o31");for(De+=be-(_e=-3&be);De<_e;)je?(D=O,k=(G=L+_.shift())+_.shift(),O=(N=D+_.shift())+_.shift(),_e-De==5?(L=k+_.shift(),De++):L=k,je=!1):(G=L,D=O+_.shift(),k=G+_.shift(),N=D+_.shift(),L=k+_.shift(),_e-De==5?(O=N+_.shift(),De++):O=N,je=!0),t.U.P.curveTo(A,G,D,k,N,L,O),De+=4}else{if((ie+"").charAt(0)=="o")throw la.debug("Unknown operation: "+ie,l),ie;_.push(ie)}}}p.x=L,p.y=O,p.nStems=b,p.haveWidth=T,p.width=B,p.open=F};var r=t,o={Typr:r};return i.Typr=r,i.default=o,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Av(){return function(i){var t=Uint8Array,r=Uint16Array,o=Uint32Array,l=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(ie,_e){for(var me=new r(31),we=0;we<31;++we)me[we]=_e+=1<<ie[we-1];var ke=new o(me[30]);for(we=1;we<30;++we)for(var De=me[we];De<me[we+1];++De)ke[De]=De-me[we]<<5|we;return[me,ke]},A=f(l,2),_=A[0],b=A[1];_[28]=258,b[258]=28;for(var T=f(p,0)[0],B=new r(32768),F=0;F<32768;++F){var P=(43690&F)>>>1|(21845&F)<<1;P=(61680&(P=(52428&P)>>>2|(13107&P)<<2))>>>4|(3855&P)<<4,B[F]=((65280&P)>>>8|(255&P)<<8)>>>1}var L=function(ie,_e,me){for(var we=ie.length,ke=0,De=new r(_e);ke<we;++ke)++De[ie[ke]-1];var Ne,Ge=new r(_e);for(ke=0;ke<_e;++ke)Ge[ke]=Ge[ke-1]+De[ke-1]<<1;if(me){Ne=new r(1<<_e);var Ye=15-_e;for(ke=0;ke<we;++ke)if(ie[ke])for(var Se=ke<<4|ie[ke],xe=_e-ie[ke],Ee=Ge[ie[ke]-1]++<<xe,le=Ee|(1<<xe)-1;Ee<=le;++Ee)Ne[B[Ee]>>>Ye]=Se}else for(Ne=new r(we),ke=0;ke<we;++ke)ie[ke]&&(Ne[ke]=B[Ge[ie[ke]-1]++]>>>15-ie[ke]);return Ne},O=new t(288);for(F=0;F<144;++F)O[F]=8;for(F=144;F<256;++F)O[F]=9;for(F=256;F<280;++F)O[F]=7;for(F=280;F<288;++F)O[F]=8;var G=new t(32);for(F=0;F<32;++F)G[F]=5;var D=L(O,9,1),k=L(G,5,1),N=function(ie){for(var _e=ie[0],me=1;me<ie.length;++me)ie[me]>_e&&(_e=ie[me]);return _e},V=function(ie,_e,me){var we=_e/8|0;return(ie[we]|ie[we+1]<<8)>>(7&_e)&me},Q=function(ie,_e){var me=_e/8|0;return(ie[me]|ie[me+1]<<8|ie[me+2]<<16)>>(7&_e)},K=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],X=function(ie,_e,me){var we=new Error(_e||K[ie]);if(we.code=ie,Error.captureStackTrace&&Error.captureStackTrace(we,X),!me)throw we;return we},oe=function(ie,_e,me){var we=ie.length;if(!we||me&&!me.l&&we<5)return _e||new t(0);var ke=!_e||me,De=!me||me.i;me||(me={}),_e||(_e=new t(3*we));var Ne,Ge=function(Xr){var ft=_e.length;if(Xr>ft){var an=new t(Math.max(2*ft,Xr));an.set(_e),_e=an}},Ye=me.f||0,Se=me.p||0,xe=me.b||0,Ee=me.l,le=me.d,ye=me.m,Be=me.n,be=8*we;do{if(!Ee){me.f=Ye=V(ie,Se,1);var je=V(ie,Se+1,3);if(Se+=3,!je){var Et=ie[(un=((Ne=Se)/8|0)+(7&Ne&&1)+4)-4]|ie[un-3]<<8,Ft=un+Et;if(Ft>we){De&&X(0);break}ke&&Ge(xe+Et),_e.set(ie.subarray(un,Ft),xe),me.b=xe+=Et,me.p=Se=8*Ft;continue}if(je==1)Ee=D,le=k,ye=9,Be=5;else if(je==2){var Tt=V(ie,Se,31)+257,pt=V(ie,Se+10,15)+4,cn=Tt+V(ie,Se+5,31)+1;Se+=14;for(var Bt=new t(cn),Ct=new t(19),Ke=0;Ke<pt;++Ke)Ct[h[Ke]]=V(ie,Se+3*Ke,7);Se+=3*pt;var Pe=N(Ct),wt=(1<<Pe)-1,pn=L(Ct,Pe,1);for(Ke=0;Ke<cn;){var un,Gt=pn[V(ie,Se,wt)];if(Se+=15&Gt,(un=Gt>>>4)<16)Bt[Ke++]=un;else{var kn=0,tr=0;for(un==16?(tr=3+V(ie,Se,3),Se+=2,kn=Bt[Ke-1]):un==17?(tr=3+V(ie,Se,7),Se+=3):un==18&&(tr=11+V(ie,Se,127),Se+=7);tr--;)Bt[Ke++]=kn}}var xr=Bt.subarray(0,Tt),sr=Bt.subarray(Tt);ye=N(xr),Be=N(sr),Ee=L(xr,ye,1),le=L(sr,Be,1)}else X(1);if(Se>be){De&&X(0);break}}ke&&Ge(xe+131072);for(var bi=(1<<ye)-1,Mi=(1<<Be)-1,yr=Se;;yr=Se){var Or=(kn=Ee[Q(ie,Se)&bi])>>>4;if((Se+=15&kn)>be){De&&X(0);break}if(kn||X(2),Or<256)_e[xe++]=Or;else{if(Or==256){yr=Se,Ee=null;break}var Si=Or-254;if(Or>264){var so=l[Ke=Or-257];Si=V(ie,Se,(1<<so)-1)+_[Ke],Se+=so}var li=le[Q(ie,Se)&Mi],no=li>>>4;if(li||X(3),Se+=15&li,sr=T[no],no>3&&(so=p[no],sr+=Q(ie,Se)&(1<<so)-1,Se+=so),Se>be){De&&X(0);break}ke&&Ge(xe+131072);for(var Hr=xe+Si;xe<Hr;xe+=4)_e[xe]=_e[xe-sr],_e[xe+1]=_e[xe+1-sr],_e[xe+2]=_e[xe+2-sr],_e[xe+3]=_e[xe+3-sr];xe=Hr}}me.l=Ee,me.p=yr,me.b=xe,Ee&&(Ye=1,me.m=ye,me.d=le,me.n=Be)}while(!Ye);return xe==_e.length?_e:function(Xr,ft,an){(ft==null||ft<0)&&(ft=0),(an==null||an>Xr.length)&&(an=Xr.length);var Un=new(Xr instanceof r?r:Xr instanceof o?o:t)(an-ft);return Un.set(Xr.subarray(ft,an)),Un}(_e,0,xe)},ae=new t(0),ge=typeof TextDecoder!="undefined"&&new TextDecoder;try{ge.decode(ae,{stream:!0})}catch(ie){}return i.convert_streams=function(ie){var _e=new DataView(ie),me=0;function we(){var Tt=_e.getUint16(me);return me+=2,Tt}function ke(){var Tt=_e.getUint32(me);return me+=4,Tt}function De(Tt){Et.setUint16(Ft,Tt),Ft+=2}function Ne(Tt){Et.setUint32(Ft,Tt),Ft+=4}for(var Ge={signature:ke(),flavor:ke(),length:ke(),numTables:we(),reserved:we(),totalSfntSize:ke(),majorVersion:we(),minorVersion:we(),metaOffset:ke(),metaLength:ke(),metaOrigLength:ke(),privOffset:ke(),privLength:ke()},Ye=0;Math.pow(2,Ye)<=Ge.numTables;)Ye++;Ye--;for(var Se=16*Math.pow(2,Ye),xe=16*Ge.numTables-Se,Ee=12,le=[],ye=0;ye<Ge.numTables;ye++)le.push({tag:ke(),offset:ke(),compLength:ke(),origLength:ke(),origChecksum:ke()}),Ee+=16;var Be,be=new Uint8Array(12+16*le.length+le.reduce(function(Tt,pt){return Tt+pt.origLength+4},0)),je=be.buffer,Et=new DataView(je),Ft=0;return Ne(Ge.flavor),De(Ge.numTables),De(Se),De(Ye),De(xe),le.forEach(function(Tt){Ne(Tt.tag),Ne(Tt.origChecksum),Ne(Ee),Ne(Tt.origLength),Tt.outOffset=Ee,(Ee+=Tt.origLength)%4!=0&&(Ee+=4-Ee%4)}),le.forEach(function(Tt){var pt,cn=ie.slice(Tt.offset,Tt.offset+Tt.compLength);if(Tt.compLength!=Tt.origLength){var Bt=new Uint8Array(Tt.origLength);pt=new Uint8Array(cn,2),oe(pt,Bt)}else Bt=new Uint8Array(cn);be.set(Bt,Tt.outOffset);var Ct=0;(Ee=Tt.outOffset+Tt.origLength)%4!=0&&(Ct=4-Ee%4),be.set(new Uint8Array(Ct).buffer,Tt.outOffset+Tt.origLength),Be=Ee+Ct}),je.slice(0,Be)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function H3(i,t){const r={M:2,L:2,Q:4,C:6,Z:0},o={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},l=1,p=2,h=4,f=8,A=16,_=32;let b;function T(V){if(!b){const Q={R:p,L:l,D:h,C:A,U:_,T:f};b=new Map;for(let K in o){let X=0;o[K].split(",").forEach(oe=>{let[ae,ge]=oe.split("+");ae=parseInt(ae,36),ge=ge?parseInt(ge,36):0,b.set(X+=ae,Q[K]);for(let ie=ge;ie--;)b.set(++X,Q[K])})}}return b.get(V)||_}const B=1,F=2,P=3,L=4,O=[null,"isol","init","fina","medi"];function G(V){const Q=new Uint8Array(V.length);let K=_,X=B,oe=-1;for(let ae=0;ae<V.length;ae++){const ge=V.codePointAt(ae);let ie=T(ge)|0,_e=B;ie&f||(K&(l|h|A)?ie&(p|h|A)?(_e=P,(X===B||X===P)&&Q[oe]++):ie&(l|_)&&(X===F||X===L)&&Q[oe]--:K&(p|_)&&(X===F||X===L)&&Q[oe]--,X=Q[ae]=_e,K=ie,oe=ae,ge>65535&&ae++)}return Q}function D(V,Q){const K=[];for(let oe=0;oe<Q.length;oe++){const ae=Q.codePointAt(oe);ae>65535&&oe++,K.push(i.U.codeToGlyph(V,ae))}const X=V.GSUB;if(X){const{lookupList:oe,featureList:ae}=X;let ge;const ie=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,_e=[];ae.forEach(me=>{if(ie.test(me.tag))for(let we=0;we<me.tab.length;we++){if(_e[me.tab[we]])continue;_e[me.tab[we]]=!0;const ke=oe[me.tab[we]],De=/^(isol|init|fina|medi)$/.test(me.tag);De&&!ge&&(ge=G(Q));for(let Ne=0;Ne<K.length;Ne++)(!ge||!De||O[ge[Ne]]===me.tag)&&i.U._applySubs(K,Ne,ke,oe)}})}return K}function k(...V){for(let Q=0;Q<V.length;Q++)if(typeof V[Q]=="number")return V[Q]}function N(V){const Q=Object.create(null),K=V["OS/2"],X=V.hhea,oe=V.head.unitsPerEm,ae=k(K&&K.sTypoAscender,X&&X.ascender,oe),ge={unitsPerEm:oe,ascender:ae,descender:k(K&&K.sTypoDescender,X&&X.descender,0),capHeight:k(K&&K.sCapHeight,ae),xHeight:k(K&&K.sxHeight,ae),lineGap:k(K&&K.sTypoLineGap,X&&X.lineGap),forEachGlyph(ie,_e,me,we){let ke=0;const De=1/ge.unitsPerEm*_e,Ne=D(V,ie);let Ge=0,Ye=-1;return Ne.forEach((Se,xe)=>{if(Se!==-1){let Ee=Q[Se];if(!Ee){const{cmds:le,crds:ye}=i.U.glyphToPath(V,Se);let Be="",be=0;for(let pt=0,cn=le.length;pt<cn;pt++){const Bt=r[le[pt]];Be+=le[pt];for(let Ct=1;Ct<=Bt;Ct++)Be+=(Ct>1?",":"")+ye[be++]}let je,Et,Ft,Tt;if(ye.length){je=Et=1/0,Ft=Tt=-1/0;for(let pt=0,cn=ye.length;pt<cn;pt+=2){let Bt=ye[pt],Ct=ye[pt+1];Bt<je&&(je=Bt),Ct<Et&&(Et=Ct),Bt>Ft&&(Ft=Bt),Ct>Tt&&(Tt=Ct)}}else je=Ft=Et=Tt=0;Ee=Q[Se]={index:Se,advanceWidth:V.hmtx.aWidth[Se],xMin:je,yMin:Et,xMax:Ft,yMax:Tt,path:Be,pathCommandCount:le.length}}Ye!==-1&&(ke+=i.U.getPairAdjustment(V,Ye,Se)*De),we.call(null,Ee,ke,Ge),Ee.advanceWidth&&(ke+=Ee.advanceWidth*De),me&&(ke+=me*_e),Ye=Se}Ge+=ie.codePointAt(Ge)>65535?2:1}),ke}};return ge}return function(Q){const K=new Uint8Array(Q,0,4),X=i._bin.readASCII(K,0,4);if(X==="wOFF")Q=t(Q);else if(X==="wOF2")throw new Error("woff2 fonts not supported");return N(i.parse(Q)[0])}}const W3=ou({name:"Typr Font Parser",dependencies:[yv,Av,H3],init(i,t,r){const o=i(),l=t();return r(o,l)}}),lu={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},V3=new s.Color;let vv=!1;function Gf(){return(self.performance||Date).now()}function cu(i){vv?la.warn("configureTextBuilder called after first font request; will be ignored."):p0(lu,i)}const Fh=Object.create(null);function oy(i,t){vv=!0,i=p0({},i);const r=Gf();if(i.font=_v(i.font||lu.defaultFontURL),i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||lu.sdfGlyphSize,i.colorRanges!=null){let T={};for(let B in i.colorRanges)if(i.colorRanges.hasOwnProperty(B)){let F=i.colorRanges[B];typeof F!="number"&&(F=V3.set(F).getHex()),T[B]=F}i.colorRanges=T}Object.freeze(i);const{textureWidth:o,sdfExponent:l}=lu,{sdfGlyphSize:p}=i,h=o/p*4;let f=Fh[p];if(!f){const T=document.createElement("canvas");T.width=o,T.height=p*256/h,f=Fh[p]={glyphCount:0,sdfGlyphSize:p,sdfCanvas:T,sdfTexture:new s.Texture(T,void 0,void 0,void 0,s.LinearFilter,s.LinearFilter),contextLost:!1,glyphsByFont:new Map},f.sdfTexture.generateMipmaps=!1,c0(f)}const{sdfTexture:A,sdfCanvas:_}=f;let b=f.glyphsByFont.get(i.font);b||f.glyphsByFont.set(i.font,b=new Map),Q3(i).then(T=>{const{glyphIds:B,glyphPositions:F,fontSize:P,unitsPerEm:L,timings:O}=T,G=[],D=new Float32Array(B.length*4),k=P/L;let N=0,V=0;const Q=Gf();B.forEach((ge,ie)=>{let _e=b.get(ge);if(!_e){const{path:De,pathBounds:Ne}=T.glyphData[ge],Ge=Math.max(Ne[2]-Ne[0],Ne[3]-Ne[1])/p*(lu.sdfMargin*p+.5),Ye=f.glyphCount++,Se=[Ne[0]-Ge,Ne[1]-Ge,Ne[2]+Ge,Ne[3]+Ge];b.set(ge,_e={path:De,atlasIndex:Ye,sdfViewBox:Se}),G.push(_e)}const{sdfViewBox:me}=_e,we=F[V++],ke=F[V++];D[N++]=we+me[0]*k,D[N++]=ke+me[1]*k,D[N++]=we+me[2]*k,D[N++]=ke+me[3]*k,B[ie]=_e.atlasIndex}),O.quads=(O.quads||0)+(Gf()-Q);const K=Gf();O.sdf={};const X=_.height,oe=Math.ceil(f.glyphCount/h),ae=Math.pow(2,Math.ceil(Math.log2(oe*p)));ae>X&&(la.info(`Increasing SDF texture size ${X}->${ae}`),a0(_,o,ae),A.dispose()),Promise.all(G.map(ge=>l0(ge,f,i.gpuAccelerateSDF).then(({timing:ie})=>{O.sdf[ge.atlasIndex]=ie}))).then(()=>{G.length&&!f.contextLost&&(ay(f),A.needsUpdate=!0),O.sdfTotal=Gf()-K,O.total=Gf()-r,t(Object.freeze({parameters:i,sdfTexture:A,sdfGlyphSize:p,sdfExponent:l,glyphBounds:D,glyphAtlasIndices:B,glyphColors:T.glyphColors,caretPositions:T.caretPositions,caretHeight:T.caretHeight,chunkedBounds:T.chunkedBounds,ascender:T.ascender,descender:T.descender,lineHeight:T.lineHeight,capHeight:T.capHeight,xHeight:T.xHeight,topBaseline:T.topBaseline,blockBounds:T.blockBounds,visibleBounds:T.visibleBounds,timings:T.timings}))})}),Promise.resolve().then(()=>{f.contextLost||s0(_)})}function l0({path:i,atlasIndex:t,sdfViewBox:r},{sdfGlyphSize:o,sdfCanvas:l,contextLost:p},h){if(p)return Promise.resolve({timing:-1});const{textureWidth:f,sdfExponent:A}=lu,_=Math.max(r[2]-r[0],r[3]-r[1]),b=Math.floor(t/4),T=b%(f/o)*o,B=Math.floor(b/(f/o))*o,F=t%4;return hv(o,o,i,r,_,A,l,T,B,F,h)}function c0(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",r=>{la.log("Context Lost",r),r.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",r=>{la.log("Context Restored",r),i.contextLost=!1;const o=[];i.glyphsByFont.forEach(l=>{l.forEach(p=>{o.push(l0(p,i,!0))})}),Promise.all(o).then(()=>{ay(i),i.sdfTexture.needsUpdate=!0})})}function sy({font:i,characters:t,sdfGlyphSize:r},o){let l=Array.isArray(t)?t.join(`
`):""+t;oy({font:i,sdfGlyphSize:r,text:l},o)}function p0(i,t){for(let r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i}let Uf;function _v(i){return Uf||(Uf=typeof document=="undefined"?{}:document.createElement("a")),Uf.href=i,Uf.href}function ay(i){if(typeof createImageBitmap!="function"){la.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:r}=i,{width:o,height:l}=t,p=i.sdfCanvas.getContext("webgl");let h=r.image.data;(!h||h.length!==o*l*4)&&(h=new Uint8Array(o*l*4),r.image={width:o,height:l,data:h},r.flipY=!1,r.isDataTexture=!0),p.readPixels(0,0,o,l,p.RGBA,p.UNSIGNED_BYTE,h)}}const Q3=ou({name:"Typesetter",dependencies:[ou({name:"Typesetter",dependencies:[lu,W3,dv,J1],init(i,t,r,o){const{defaultFontURL:l}=i;return r(t,o(),{defaultFontURL:l})}})],init(i){return function(t){return new Promise(r=>{i.typeset(t,r)})}},getTransferables(i){const t=[i.glyphPositions.buffer,i.glyphIds.buffer];return i.caretPositions&&t.push(i.caretPositions.buffer),i.glyphColors&&t.push(i.glyphColors.buffer),t}});function aM(){Object.keys(Fh).forEach(i=>{const t=Fh[i].sdfCanvas,{width:r,height:o}=t;la.log("%c.",`
      background: url(${t.toDataURL()});
      background-size: ${r}px ${o}px;
      color: transparent;
      font-size: 0;
      line-height: ${o}px;
      padding-left: ${r}px;
    `)})}const Nf={};function X3(i){let t=Nf[i];if(!t){const r=new s.PlaneGeometry(1,1,i,i),o=r.clone(),l=r.attributes,p=o.attributes,h=new s.BufferGeometry,f=l.uv.count;for(let A=0;A<f;A++)p.position.array[A*3]*=-1,p.normal.array[A*3+2]*=-1;["position","normal","uv"].forEach(A=>{h.setAttribute(A,new s.Float32BufferAttribute([...l[A].array,...p[A].array],l[A].itemSize))}),h.setIndex([...r.index.array,...o.index.array.map(A=>A+f)]),h.translate(.5,.5,0),t=Nf[i]=h}return t}const Y3="aTroikaGlyphBounds",Ev="aTroikaGlyphIndex",K3="aTroikaGlyphColor";class tm extends s.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s.Sphere,this.boundingBox=new s.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const r=this.getIndex().count;this.setDrawRange(t===s.BackSide?r/2:0,t===s.DoubleSide?r:r/2)}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let r=X3(t);["position","normal","uv"].forEach(o=>{this.attributes[o]=r.attributes[o].clone()}),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,r,o,l,p){nm(this,Y3,t,4),nm(this,Ev,r,1),nm(this,K3,p,3),this._blockBounds=o,this._chunkedBounds=l,this.instanceCount=r.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:r,boundingBox:o}=this;if(r){const{PI:l,floor:p,min:h,max:f,sin:A,cos:_}=Math,b=l/2,T=l*2,B=Math.abs(r),F=t[0]/B,P=t[2]/B,L=p((F+b)/T)!==p((P+b)/T)?-B:h(A(F)*B,A(P)*B),O=p((F-b)/T)!==p((P-b)/T)?B:f(A(F)*B,A(P)*B),G=p((F+l)/T)!==p((P+l)/T)?B*2:f(B-_(F)*B,B-_(P)*B);o.min.set(L,t[1],r<0?-G:0),o.max.set(O,t[3],r<0?0:G)}else o.min.set(t[0],t[1],0),o.max.set(t[2],t[3],0);o.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let r=this.getAttribute(Ev).count,o=this._chunkedBounds;if(o)for(let l=o.length;l--;){r=o[l].end;let p=o[l].rect;if(p[1]<t.w&&p[3]>t.y&&p[0]<t.z&&p[2]>t.x)break}this.instanceCount=r}}function nm(i,t,r,o){const l=i.getAttribute(t);r?l&&l.array.length===r.length?(l.array.set(r),l.needsUpdate=!0):(i.setAttribute(t,new s.InstancedBufferAttribute(r,o)),delete i._maxInstanceCount,i.dispose()):l&&i.deleteAttribute(t)}const bv=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,u0=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,xv=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ly=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function cy(i){const t=$m(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new s.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new s.Vector4(0,0,0,0)},uTroikaClipRect:{value:new s.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new s.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new s.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new s.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:bv,vertexTransform:u0,fragmentDefs:xv,fragmentColorTransform:ly,customRewriter({vertexShader:r,fragmentShader:o}){let l=/\buniform\s+vec3\s+diffuse\b/;return l.test(o)&&(o=o.replace(l,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),l.test(r)||(r=r.replace(q1,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:r,fragmentShader:o}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const rm=new s.MeshBasicMaterial({color:16777215,side:s.DoubleSide,transparent:!0}),d0=8421504,py=new s.Matrix4,Fd=new s.Vector3,Oh=new s.Vector3,Od=[],h0=new s.Vector3,Dd="+x+y";function im(i){return Array.isArray(i)?i[0]:i}let Vu=()=>{const i=new s.Mesh(new s.PlaneGeometry(1,1),rm);return Vu=()=>i,i},om=()=>{const i=new s.Mesh(new s.PlaneGeometry(1,1,32,1),rm);return om=()=>i,i};const f0={type:"syncstart"},g0={type:"synccomplete"},m0=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],y0=m0.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class uy extends s.Mesh{constructor(){const t=new tm;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=d0,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Dd,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(f0),oy({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},r=>{this._isSyncing=!1,this._textRenderInfo=r,this.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.blockBounds,r.chunkedBounds,r.glyphColors);const o=this._queuedSyncs;o&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{o.forEach(l=>l&&l())})),this.dispatchEvent(g0),t&&t()})))}onBeforeRender(t,r,o,l,p,h){this.sync(),p.isTroikaTextMaterial&&this._prepareForRender(p),p._hadOwnSide=p.hasOwnProperty("side"),this.geometry.setSide(p._actualSide=p.side),p.side=s.FrontSide}onAfterRender(t,r,o,l,p,h){p._hadOwnSide?p.side=p._actualSide:delete p.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=rm.clone());if((!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=cy(r),r.addEventListener("dispose",function o(){r.removeEventListener("dispose",o),t.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let o=t._outlineMtl;return o||(o=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),o.isTextOutlineMaterial=!0,o.depthWrite=!1,o.map=null,t.addEventListener("dispose",function l(){t.removeEventListener("dispose",l),o.dispose()})),[o,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return im(this.material).getDepthMaterial()}get customDistanceMaterial(){return im(this.material).getDistanceMaterial()}_prepareForRender(t){const r=t.isTextOutlineMaterial,o=t.uniforms,l=this.textRenderInfo;if(l){const{sdfTexture:f,blockBounds:A}=l;o.uTroikaSDFTexture.value=f,o.uTroikaSDFTextureSize.value.set(f.image.width,f.image.height),o.uTroikaSDFGlyphSize.value=l.sdfGlyphSize,o.uTroikaSDFExponent.value=l.sdfExponent,o.uTroikaTotalBounds.value.fromArray(A),o.uTroikaUseGlyphColors.value=!r&&!!l.glyphColors;let _=0,b=0,T=0,B,F,P,L=0,O=0;if(r){let{outlineWidth:D,outlineOffsetX:k,outlineOffsetY:N,outlineBlur:V,outlineOpacity:Q}=this;_=this._parsePercent(D)||0,b=Math.max(0,this._parsePercent(V)||0),B=Q,L=this._parsePercent(k)||0,O=this._parsePercent(N)||0}else T=Math.max(0,this._parsePercent(this.strokeWidth)||0),T&&(P=this.strokeColor,o.uTroikaStrokeColor.value.set(P==null?d0:P),F=this.strokeOpacity,F==null&&(F=1)),B=this.fillOpacity;o.uTroikaDistanceOffset.value=_,o.uTroikaPositionOffset.value.set(L,O),o.uTroikaBlurRadius.value=b,o.uTroikaStrokeWidth.value=T,o.uTroikaStrokeOpacity.value=F,o.uTroikaFillOpacity.value=B==null?1:B,o.uTroikaCurveRadius.value=this.curveRadius||0;let G=this.clipRect;if(G&&Array.isArray(G)&&G.length===4)o.uTroikaClipRect.value.fromArray(G);else{const D=(this.fontSize||.1)*100;o.uTroikaClipRect.value.set(A[0]-D,A[1]-D,A[2]+D,A[3]+D)}this.geometry.applyClipRect(o.uTroikaClipRect.value)}o.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const p=r?this.outlineColor||0:this.color;if(p==null)delete t.color;else{const f=t.hasOwnProperty("color")?t.color:t.color=new s.Color;(p!==f._input||typeof p=="object")&&f.set(f._input=p)}let h=this.orientation||Dd;if(h!==t._orientation){let f=o.uTroikaOrient.value;h=h.replace(/[^-+xyz]/g,"");let A=h!==Dd&&h.match(/^([-+])([xyz])([-+])([xyz])$/);if(A){let[,_,b,T,B]=A;Fd.set(0,0,0)[b]=_==="-"?1:-1,Oh.set(0,0,0)[B]=T==="-"?-1:1,py.lookAt(h0,Fd.cross(Oh),Oh),f.setFromMatrix4(py)}else f.identity();t._orientation=h}}_parsePercent(t){if(typeof t=="string"){let r=t.match(/^(-?[\d.]+)%$/),o=r?parseFloat(r[1]):NaN;t=(isNaN(o)?0:o/100)*this.fontSize}return t}localPositionToTextCoords(t,r=new s.Vector2){r.copy(t);const o=this.curveRadius;return o&&(r.x=Math.atan2(t.x,Math.abs(o)-Math.abs(t.z))*Math.abs(o)),r}worldPositionToTextCoords(t,r=new s.Vector2){return Fd.copy(t),this.localPositionToTextCoords(this.worldToLocal(Fd),r)}raycast(t,r){const{textRenderInfo:o,curveRadius:l}=this;if(o){const p=o.blockBounds,h=l?om():Vu(),f=h.geometry,{position:A,uv:_}=f.attributes;for(let b=0;b<_.count;b++){let T=p[0]+_.getX(b)*(p[2]-p[0]);const B=p[1]+_.getY(b)*(p[3]-p[1]);let F=0;l&&(F=l-Math.cos(T/l)*l,T=Math.sin(T/l)*l),A.setXYZ(b,T,B,F)}f.boundingSphere=this.geometry.boundingSphere,f.boundingBox=this.geometry.boundingBox,h.matrixWorld=this.matrixWorld,h.material.side=this.material.side,Od.length=0,h.raycast(t,Od);for(let b=0;b<Od.length;b++)Od[b].object=this,r.push(Od[b])}}copy(t){const r=this.geometry;return super.copy(t),this.geometry=r,y0.forEach(o=>{this[o]=t[o]}),this}clone(){return new this.constructor().copy(this)}}m0.forEach(i=>{const t="_private_"+i;Object.defineProperty(uy.prototype,i,{get(){return this[t]},set(r){r!==this[t]&&(this[t]=r,this._needsSync=!0)}})});function jf(i,t,r){let o=null;const{caretHeight:l}=i,p=sm(i);let h=1/0;return p.forEach((f,A)=>{Math.abs(r-(A+l/2))<Math.abs(r-(h+l/2))&&(h=A)}),p.get(h).forEach(f=>{(!o||Math.abs(t-f.x)<Math.abs(t-o.x))&&(o=f)}),o}const Mv=new WeakMap;function J3(i,t,r){let o;if(i){let l=Mv.get(i);if(l&&l.start===t&&l.end===r)return l.rects;const{caretPositions:p,caretHeight:h}=i;if(r<t){const A=t;t=r,r=A}t=Math.max(t,0),r=Math.min(r,p.length+1),o=[];let f=null;for(let A=t;A<r;A++){const _=p[A*3],b=p[A*3+1],T=Math.min(_,b),B=Math.max(_,b),F=p[A*3+2];(!f||F!==f.bottom||T>f.right||B<f.left)&&(f={left:1/0,right:-1/0,bottom:F,top:F+h},o.push(f)),f.left=Math.min(T,f.left),f.right=Math.max(B,f.right)}o.sort((A,_)=>_.bottom-A.bottom||A.left-_.left);for(let A=o.length-1;A-- >0;){const _=o[A],b=o[A+1];_.bottom===b.bottom&&_.left<=b.right&&_.right>=b.left&&(b.left=Math.min(b.left,_.left),b.right=Math.max(b.right,_.right),o.splice(A,1))}Mv.set(i,{start:t,end:r,rects:o})}return o}const Pd=new WeakMap;function sm(i){let t=Pd.get(i);if(!t){const{caretPositions:r,caretHeight:o}=i;t=new Map;for(let l=0;l<r.length;l+=3){const p=r[l+2];let h=t.get(p);h||t.set(p,h=[]),h.push({x:r[l],y:p,height:o,charIndex:l/3}),l+3>=r.length&&h.push({x:r[l+1],y:p,height:o,charIndex:l/3+1})}}return Pd.set(i,t),t}var jc=y(58139);const q3=d.forwardRef((b,_)=>{var T=b,{sdfGlyphSize:i=64,anchorX:t="center",anchorY:r="middle",font:o,fontSize:l=1,children:p,characters:h,onSync:f}=T,A=mn(T,["sdfGlyphSize","anchorX","anchorY","font","fontSize","children","characters","onSync"]);const B=(0,E.z)(({invalidate:O})=>O),[F]=d.useState(()=>new uy),[P,L]=d.useMemo(()=>{const O=[];let G="";return d.Children.forEach(p,D=>{typeof D=="string"||typeof D=="number"?G+=D:O.push(D)}),[O,G]},[p]);return(0,jc.Rq)(()=>new Promise(O=>sy({font:o,characters:h},O)),["troika-text",o,h]),d.useLayoutEffect(()=>void F.sync(()=>{B(),f&&f(F)})),d.useEffect(()=>()=>F.dispose(),[F]),d.createElement("primitive",(0,S.Z)({object:F,ref:_,font:o,text:L,anchorX:t,anchorY:r,fontSize:l,sdfGlyphSize:i},A),P)});class Z3 extends s.ExtrudeGeometry{constructor(t,r={}){const B=r,{bevelEnabled:o=!1,bevelSize:l=8,bevelThickness:p=10,font:h,height:f=50,size:A=100,lineHeight:_=1,letterSpacing:b=0}=B,T=mn(B,["bevelEnabled","bevelSize","bevelThickness","font","height","size","lineHeight","letterSpacing"]);if(h===void 0)super();else{const F=h.generateShapes(t,A,{lineHeight:_,letterSpacing:b});super(F,$o(jn({},T),{bevelEnabled:o,bevelSize:l,bevelThickness:p,depth:f}))}this.type="TextGeometry"}}var Wa=y(25108);const lM=(i,t)=>{const r=i[0].index!==null,o=new Set(Object.keys(i[0].attributes)),l=new Set(Object.keys(i[0].morphAttributes)),p={},h={},f=i[0].morphTargetsRelative,A=new BufferGeometry;let _=0;if(i.forEach((b,T)=>{let B=0;if(r!==(b.index!==null))return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let F in b.attributes){if(!o.has(F))return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+'. All geometries must have compatible attributes; make sure "'+F+'" attribute exists among all geometries, or in none of them.'),null;p[F]===void 0&&(p[F]=[]),p[F].push(b.attributes[F]),B++}if(B!==o.size)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". Make sure all geometries have the same number of attributes."),null;if(f!==b.morphTargetsRelative)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let F in b.morphAttributes){if(!l.has(F))return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+".  .morphAttributes must be consistent throughout all geometries."),null;h[F]===void 0&&(h[F]=[]),h[F].push(b.morphAttributes[F])}if(A.userData.mergedUserData=A.userData.mergedUserData||[],A.userData.mergedUserData.push(b.userData),t){let F;if(b.index)F=b.index.count;else if(b.attributes.position!==void 0)F=b.attributes.position.count;else return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". The geometry must have either an index or a position attribute"),null;A.addGroup(_,F,T),_+=F}}),r){let b=0;const T=[];i.forEach(B=>{const F=B.index;for(let P=0;P<F.count;++P)T.push(F.getX(P)+b);b+=B.attributes.position.count}),A.setIndex(T)}for(let b in p){const T=Cv(p[b]);if(!T)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" attribute."),null;A.setAttribute(b,T)}for(let b in h){const T=h[b][0].length;if(T===0)break;A.morphAttributes=A.morphAttributes||{},A.morphAttributes[b]=[];for(let B=0;B<T;++B){const F=[];for(let L=0;L<h[b].length;++L)F.push(h[b][L][B]);const P=Cv(F);if(!P)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+b+" morphAttribute."),null;A.morphAttributes[b].push(P)}}return A},Cv=i=>{let t,r,o,l=0;if(i.forEach(p=>{if(t===void 0&&(t=p.array.constructor),t!==p.array.constructor)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=p.itemSize),r!==p.itemSize)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(o===void 0&&(o=p.normalized),o!==p.normalized)return Wa.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;l+=p.array.length}),t&&r){const p=new t(l);let h=0;return i.forEach(f=>{p.set(f.array,h),h+=f.array.length}),new BufferAttribute(p,r,o)}},cM=i=>{let t,r=0,o=0;for(let _=0,b=i.length;_<b;++_){const T=i[_];if(t===void 0&&(t=T.array.constructor),t!==T.array.constructor)return Wa.error("AttributeBuffers of different types cannot be interleaved"),null;r+=T.array.length,o+=T.itemSize}const l=new InterleavedBuffer(new t(r),o);let p=0;const h=[],f=["getX","getY","getZ","getW"],A=["setX","setY","setZ","setW"];for(let _=0,b=i.length;_<b;_++){const T=i[_],B=T.itemSize,F=T.count,P=new InterleavedBufferAttribute(l,B,p,T.normalized);h.push(P),p+=B;for(let L=0;L<F;L++)for(let O=0;O<B;O++){const G=getWithKey(P,A[O]),D=getWithKey(T,f[O]);G(L,D(L))}}return h};function pM(i){let t=0;for(let o in i.attributes){const l=i.getAttribute(o);t+=l.count*l.itemSize*l.array.BYTES_PER_ELEMENT}const r=i.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}function $3(i,t=1e-4){t=Math.max(t,Number.EPSILON);const r={},o=i.getIndex(),l=i.getAttribute("position"),p=o?o.count:l.count;let h=0;const f=Object.keys(i.attributes),A={},_={},b=[],T=["getX","getY","getZ","getW"];for(let L=0,O=f.length;L<O;L++){const G=f[L];A[G]=[];const D=i.morphAttributes[G];D&&(_[G]=new Array(D.length).fill(0).map(()=>[]))}const B=Math.log10(1/t),F=Math.pow(10,B);for(let L=0;L<p;L++){const O=o?o.getX(L):L;let G="";for(let D=0,k=f.length;D<k;D++){const N=f[D],V=i.getAttribute(N),Q=V.itemSize;for(let K=0;K<Q;K++)G+=`${~~(V[T[K]](O)*F)},`}if(G in r)b.push(r[G]);else{for(let D=0,k=f.length;D<k;D++){const N=f[D],V=i.getAttribute(N),Q=i.morphAttributes[N],K=V.itemSize,X=A[N],oe=_[N];for(let ae=0;ae<K;ae++){const ge=T[ae];if(X.push(V[ge](O)),Q)for(let ie=0,_e=Q.length;ie<_e;ie++)oe[ie].push(Q[ie][ge](O))}}r[G]=h,b.push(h),h++}}const P=i.clone();for(let L=0,O=f.length;L<O;L++){const G=f[L],D=i.getAttribute(G),k=new D.array.constructor(A[G]),N=new s.BufferAttribute(k,D.itemSize,D.normalized);if(P.setAttribute(G,N),G in _)for(let V=0;V<_[G].length;V++){const Q=i.morphAttributes[G][V],K=new Q.array.constructor(_[G][V]),X=new s.BufferAttribute(K,Q.itemSize,Q.normalized);P.morphAttributes[G][V]=X}}return P.setIndex(b),P}function Sv(i,t){if(t===s.TrianglesDrawMode)return Wa.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===s.TriangleFanDrawMode||t===s.TriangleStripDrawMode){let r=i.getIndex();if(r===null){const h=[],f=i.getAttribute("position");if(f!==void 0){for(let A=0;A<f.count;A++)h.push(A);i.setIndex(h),r=i.getIndex()}else return Wa.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const o=r.count-2,l=[];if(r)if(t===s.TriangleFanDrawMode)for(let h=1;h<=o;h++)l.push(r.getX(0)),l.push(r.getX(h)),l.push(r.getX(h+1));else for(let h=0;h<o;h++)h%2===0?(l.push(r.getX(h)),l.push(r.getX(h+1)),l.push(r.getX(h+2))):(l.push(r.getX(h+2)),l.push(r.getX(h+1)),l.push(r.getX(h)));l.length/3!==o&&Wa.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const p=i.clone();return p.setIndex(l),p.clearGroups(),p}else return Wa.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}function uM(i){if(i.geometry.isBufferGeometry!==!0)return Wa.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const t=new Vector3,r=new Vector3,o=new Vector3,l=new Vector3,p=new Vector3,h=new Vector3,f=new Vector3,A=new Vector3,_=new Vector3;function b(Ye,Se,xe,Ee,le,ye,Be,be,je){t.fromBufferAttribute(xe,ye),r.fromBufferAttribute(xe,Be),o.fromBufferAttribute(xe,be);const Et=Ye.morphTargetInfluences;if(Se.morphTargets&&Ee&&Et){f.set(0,0,0),A.set(0,0,0),_.set(0,0,0);for(let Ft=0,Tt=Ee.length;Ft<Tt;Ft++){const pt=Et[Ft],cn=Ee[Ft];pt!==0&&(l.fromBufferAttribute(cn,ye),p.fromBufferAttribute(cn,Be),h.fromBufferAttribute(cn,be),le?(f.addScaledVector(l,pt),A.addScaledVector(p,pt),_.addScaledVector(h,pt)):(f.addScaledVector(l.sub(t),pt),A.addScaledVector(p.sub(r),pt),_.addScaledVector(h.sub(o),pt)))}t.add(f),r.add(A),o.add(_)}Ye.isSkinnedMesh&&(Ye.boneTransform(ye,t),Ye.boneTransform(Be,r),Ye.boneTransform(be,o)),je[ye*3+0]=t.x,je[ye*3+1]=t.y,je[ye*3+2]=t.z,je[Be*3+0]=r.x,je[Be*3+1]=r.y,je[Be*3+2]=r.z,je[be*3+0]=o.x,je[be*3+1]=o.y,je[be*3+2]=o.z}const T=i.geometry,B=i.material;let F,P,L;const O=T.index,G=T.attributes.position,D=T.morphAttributes.position,k=T.morphTargetsRelative,N=T.attributes.normal,V=T.morphAttributes.position,Q=T.groups,K=T.drawRange;let X,oe,ae,ge,ie,_e,me,we;const ke=new Float32Array(G.count*G.itemSize),De=new Float32Array(N.count*N.itemSize);if(O!==null)if(Array.isArray(B))for(X=0,ae=Q.length;X<ae;X++)for(ie=Q[X],_e=B[ie.materialIndex],me=Math.max(ie.start,K.start),we=Math.min(ie.start+ie.count,K.start+K.count),oe=me,ge=we;oe<ge;oe+=3)F=O.getX(oe),P=O.getX(oe+1),L=O.getX(oe+2),b(i,_e,G,D,k,F,P,L,ke),b(i,_e,N,V,k,F,P,L,De);else for(me=Math.max(0,K.start),we=Math.min(O.count,K.start+K.count),X=me,ae=we;X<ae;X+=3)F=O.getX(X),P=O.getX(X+1),L=O.getX(X+2),b(i,B,G,D,k,F,P,L,ke),b(i,B,N,V,k,F,P,L,De);else if(G!==void 0)if(Array.isArray(B))for(X=0,ae=Q.length;X<ae;X++)for(ie=Q[X],_e=B[ie.materialIndex],me=Math.max(ie.start,K.start),we=Math.min(ie.start+ie.count,K.start+K.count),oe=me,ge=we;oe<ge;oe+=3)F=oe,P=oe+1,L=oe+2,b(i,_e,G,D,k,F,P,L,ke),b(i,_e,N,V,k,F,P,L,De);else for(me=Math.max(0,K.start),we=Math.min(G.count,K.start+K.count),X=me,ae=we;X<ae;X+=3)F=X,P=X+1,L=X+2,b(i,B,G,D,k,F,P,L,ke),b(i,B,N,V,k,F,P,L,De);const Ne=new Float32BufferAttribute(ke,3),Ge=new Float32BufferAttribute(De,3);return{positionAttribute:G,normalAttribute:N,morphedPositionAttribute:Ne,morphedNormalAttribute:Ge}}function A0(i,t=Math.PI/3){const r=Math.cos(t),o=(1+1e-10)*100,l=[new s.Vector3,new s.Vector3,new s.Vector3],p=new s.Vector3,h=new s.Vector3,f=new s.Vector3,A=new s.Vector3;function _(L){const O=~~(L.x*o),G=~~(L.y*o),D=~~(L.z*o);return`${O},${G},${D}`}const b=i.index?i.toNonIndexed():i,T=b.attributes.position,B={};for(let L=0,O=T.count/3;L<O;L++){const G=3*L,D=l[0].fromBufferAttribute(T,G+0),k=l[1].fromBufferAttribute(T,G+1),N=l[2].fromBufferAttribute(T,G+2);p.subVectors(N,k),h.subVectors(D,k);const V=new s.Vector3().crossVectors(p,h).normalize();for(let Q=0;Q<3;Q++){const K=l[Q],X=_(K);X in B||(B[X]=[]),B[X].push(V)}}const F=new Float32Array(T.count*3),P=new s.BufferAttribute(F,3,!1);for(let L=0,O=T.count/3;L<O;L++){const G=3*L,D=l[0].fromBufferAttribute(T,G+0),k=l[1].fromBufferAttribute(T,G+1),N=l[2].fromBufferAttribute(T,G+2);p.subVectors(N,k),h.subVectors(D,k),f.crossVectors(p,h).normalize();for(let V=0;V<3;V++){const Q=l[V],K=_(Q),X=B[K];A.set(0,0,0);for(let oe=0,ae=X.length;oe<ae;oe++){const ge=X[oe];f.dot(ge)>r&&A.add(ge)}A.normalize(),P.setXYZ(G+V,A.x,A.y,A.z)}}return b.setAttribute("normal",P),b}var eE=y(25108),Hf=Object.defineProperty,tE=(i,t,r)=>t in i?Hf(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,ns=(i,t,r)=>(tE(i,typeof t!="symbol"?t+"":t,r),r);class v0 extends s.Loader{constructor(t){super(t)}load(t,r,o,l){const p=new s.FileLoader(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{if(typeof h!="string")throw new Error("unsupported data type");const f=JSON.parse(h),A=this.parse(f);r&&r(A)},o,l)}loadAsync(t,r){return super.loadAsync(t,r)}parse(t){return new _0(t)}}class _0{constructor(t){ns(this,"data"),this.data=t}generateShapes(t,r=100,o){const l=[],p=jn({letterSpacing:0,lineHeight:1},o),h=E0(t,r,this.data,p);for(let f=0,A=h.length;f<A;f++)Array.prototype.push.apply(l,h[f].toShapes(!1));return l}}ns(_0,"isFont"),ns(_0,"type");function E0(i,t,r,o){const l=Array.from(i),p=t/r.resolution,h=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*p,f=[];let A=0,_=0;for(let b=0;b<l.length;b++){const T=l[b];if(T===`
`)A=0,_-=h*o.lineHeight;else{const B=b0(T,p,A,_,r);B&&(A+=B.offsetX+o.letterSpacing,f.push(B.path))}}return f}function b0(i,t,r,o,l){const p=l.glyphs[i]||l.glyphs["?"];if(!p){eE.error('THREE.Font: character "'+i+'" does not exists in font family '+l.familyName+".");return}const h=new s.ShapePath;let f,A,_,b,T,B,F,P;if(p.o){const L=p._cachedOutline||(p._cachedOutline=p.o.split(" "));for(let O=0,G=L.length;O<G;)switch(L[O++]){case"m":f=parseInt(L[O++])*t+r,A=parseInt(L[O++])*t+o,h.moveTo(f,A);break;case"l":f=parseInt(L[O++])*t+r,A=parseInt(L[O++])*t+o,h.lineTo(f,A);break;case"q":_=parseInt(L[O++])*t+r,b=parseInt(L[O++])*t+o,T=parseInt(L[O++])*t+r,B=parseInt(L[O++])*t+o,h.quadraticCurveTo(T,B,_,b);break;case"b":_=parseInt(L[O++])*t+r,b=parseInt(L[O++])*t+o,T=parseInt(L[O++])*t+r,B=parseInt(L[O++])*t+o,F=parseInt(L[O++])*t+r,P=parseInt(L[O++])*t+o,h.bezierCurveTo(T,B,F,P,_,b);break}}return{offsetX:p.ha*t,path:h}}let dy=null;function Wf(i){return rs(this,null,function*(){dy||(dy=new v0);let t=typeof i=="string"?yield(yield fetch(i)).json():i;return dy.parse(t)})}function x0(i){return(0,jc.Rq)(Wf,[i])}x0.preload=i=>(0,jc.MA)(Wf,[i]),x0.clear=i=>(0,jc.ZH)([i]);const wv=["string","number"],Tv=i=>{let t="";const r=[];return d.Children.forEach(i,o=>{wv.includes(typeof o)?t+=o+"":r.push(o)}),[t,...r]},Vf=d.forwardRef((L,P)=>{var O=L,{font:i,letterSpacing:t=0,lineHeight:r=1,size:o=1,height:l=.2,bevelThickness:p=.1,bevelSize:h=.01,bevelEnabled:f=!1,bevelOffset:A=0,bevelSegments:_=4,curveSegments:b=8,smooth:T,children:B}=O,F=mn(O,["font","letterSpacing","lineHeight","size","height","bevelThickness","bevelSize","bevelEnabled","bevelOffset","bevelSegments","curveSegments","smooth","children"]);d.useMemo(()=>(0,E.e)({RenamedTextGeometry:Z3}),[]);const G=d.useRef(null),D=x0(i),k=(0,d.useMemo)(()=>({font:D,size:o,height:l,bevelThickness:p,bevelSize:h,bevelEnabled:f,bevelSegments:_,bevelOffset:A,curveSegments:b,letterSpacing:t,lineHeight:r}),[D,o,l,p,h,f,_,A,b,t,r]),[N,...V]=(0,d.useMemo)(()=>Tv(B),[B]),Q=d.useMemo(()=>[N,k],[N,k]);return d.useLayoutEffect(()=>{T&&(G.current.geometry=$3(G.current.geometry,T),G.current.geometry.computeVertexNormals())},[Q,T]),d.useImperativeHandle(P,()=>G.current,[]),d.createElement("mesh",(0,S.Z)({},F,{ref:G}),d.createElement("renamedTextGeometry",{args:Q}),V)}),M0={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var nE=y(25108),pu=Object.defineProperty,Bv=(i,t,r)=>t in i?pu(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ld=(i,t,r)=>(Bv(i,typeof t!="symbol"?t+"":t,r),r);class Dh{constructor(){Ld(this,"enabled",!0),Ld(this,"needsSwap",!0),Ld(this,"clear",!1),Ld(this,"renderToScreen",!1)}setSize(t,r){}render(t,r,o,l,p){nE.error("THREE.Pass: .render() must be implemented in derived pass.")}}class Qu{constructor(t){Ld(this,"camera",new s.OrthographicCamera(-1,1,1,-1,0,1)),Ld(this,"geometry",new s.PlaneGeometry(2,2)),Ld(this,"mesh"),this.mesh=new s.Mesh(this.geometry,t)}get material(){return this.mesh.material}set material(t){this.mesh.material=t}dispose(){this.mesh.geometry.dispose()}render(t){t.render(this.mesh,this.camera)}}var rE=Object.defineProperty,C0=(i,t,r)=>t in i?rE(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,kd=(i,t,r)=>(C0(i,typeof t!="symbol"?t+"":t,r),r);class Qf extends Dh{constructor(t,r="tDiffuse"){super(),kd(this,"textureID"),kd(this,"uniforms"),kd(this,"material"),kd(this,"fsQuad"),this.textureID=r,t instanceof s.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):(this.uniforms=s.UniformsUtils.clone(t.uniforms),this.material=new s.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Qu(this.material)}render(t,r,o){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=o.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}var S0=Object.defineProperty,iE=(i,t,r)=>t in i?S0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ph=(i,t,r)=>(iE(i,typeof t!="symbol"?t+"":t,r),r);class am extends Dh{constructor(t,r){super(),Ph(this,"scene"),Ph(this,"camera"),Ph(this,"inverse"),this.scene=t,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,r,o){const l=t.getContext(),p=t.state;p.buffers.color.setMask(!1),p.buffers.depth.setMask(!1),p.buffers.color.setLocked(!0),p.buffers.depth.setLocked(!0);let h,f;this.inverse?(h=0,f=1):(h=1,f=0),p.buffers.stencil.setTest(!0),p.buffers.stencil.setOp(l.REPLACE,l.REPLACE,l.REPLACE),p.buffers.stencil.setFunc(l.ALWAYS,h,4294967295),p.buffers.stencil.setClear(f),p.buffers.stencil.setLocked(!0),t.setRenderTarget(o),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),p.buffers.color.setLocked(!1),p.buffers.depth.setLocked(!1),p.buffers.stencil.setLocked(!1),p.buffers.stencil.setFunc(l.EQUAL,1,4294967295),p.buffers.stencil.setOp(l.KEEP,l.KEEP,l.KEEP),p.buffers.stencil.setLocked(!0)}}class w0 extends Dh{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}var lm=y(25108),T0=Object.defineProperty,Iv=(i,t,r)=>t in i?T0(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,pc=(i,t,r)=>(Iv(i,typeof t!="symbol"?t+"":t,r),r);class Rv{constructor(t,r){if(pc(this,"renderer"),pc(this,"_pixelRatio"),pc(this,"_width"),pc(this,"_height"),pc(this,"renderTarget1"),pc(this,"renderTarget2"),pc(this,"writeBuffer"),pc(this,"readBuffer"),pc(this,"renderToScreen"),pc(this,"passes",[]),pc(this,"copyPass"),pc(this,"clock"),this.renderer=t,r===void 0){const o={minFilter:s.LinearFilter,magFilter:s.LinearFilter,format:s.RGBAFormat},l=t.getSize(new s.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=l.width,this._height=l.height,r=new s.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,o),r.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,M0===void 0&&lm.error("THREE.EffectComposer relies on CopyShader"),Qf===void 0&&lm.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Qf(M0),this.copyPass.material.blending=s.NoBlending,this.clock=new s.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const r=this.passes.indexOf(t);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const r=this.renderer.getRenderTarget();let o=!1;const l=this.passes.length;for(let p=0;p<l;p++){const h=this.passes[p];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(p),h.render(this.renderer,this.writeBuffer,this.readBuffer,t,o),h.needsSwap){if(o){const f=this.renderer.getContext(),A=this.renderer.state.buffers.stencil;A.setFunc(f.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),A.setFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}am!==void 0&&(h instanceof am?o=!0:h instanceof w0&&(o=!1))}}this.renderer.setRenderTarget(r)}reset(t){if(t===void 0){const r=this.renderer.getSize(new s.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,r){this._width=t,this._height=r;const o=this._width*this._pixelRatio,l=this._height*this._pixelRatio;this.renderTarget1.setSize(o,l),this.renderTarget2.setSize(o,l);for(let p=0;p<this.passes.length;p++)this.passes[p].setSize(o,l)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}var Fv=Object.defineProperty,Ov=(i,t,r)=>t in i?Fv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Xu=(i,t,r)=>(Ov(i,typeof t!="symbol"?t+"":t,r),r);class Dv extends Dh{constructor(t,r,o,l,p=0){super(),Xu(this,"scene"),Xu(this,"camera"),Xu(this,"overrideMaterial"),Xu(this,"clearColor"),Xu(this,"clearAlpha"),Xu(this,"clearDepth",!1),Xu(this,"_oldClearColor",new s.Color),this.scene=t,this.camera=r,this.overrideMaterial=o,this.clearColor=l,this.clearAlpha=p,this.clear=!0,this.needsSwap=!1}render(t,r,o){let l=t.autoClear;t.autoClear=!1;let p,h=null;this.overrideMaterial!==void 0&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),p=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:o),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,p),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=h),t.autoClear=l}}const Pv={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},Lv=()=>{try{var i=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&i.getContext("webgl2"))}catch(t){return!1}},kv=d.forwardRef((F,B)=>{var P=F,{children:i,multisamping:t=8,renderIndex:r=1,disableRender:o,disableGamma:l,disableRenderPass:p,depthBuffer:h=!0,stencilBuffer:f=!1,anisotropy:A=1,encoding:_,type:b}=P,T=mn(P,["children","multisamping","renderIndex","disableRender","disableGamma","disableRenderPass","depthBuffer","stencilBuffer","anisotropy","encoding","type"]);d.useMemo(()=>(0,E.e)({EffectComposer:Rv,RenderPass:Dv,ShaderPass:Qf}),[]);const L=d.useRef(),{scene:O,camera:G,gl:D,size:k,viewport:N}=(0,E.z)(),[V]=d.useState(()=>{const K=new s.WebGLRenderTarget(k.width,k.height,{type:b||s.HalfFloatType,format:s.RGBAFormat,depthBuffer:h,stencilBuffer:f,anisotropy:A});return b===s.UnsignedByteType&&_!=null&&("colorSpace"in K?K.texture.colorSpace=_:K.texture.encoding=_),K.samples=t,K});d.useEffect(()=>{var K,X;(K=L.current)==null||K.setSize(k.width,k.height),(X=L.current)==null||X.setPixelRatio(N.dpr)},[D,k,N.dpr]),(0,E.A)(()=>{var K;o||(K=L.current)==null||K.render()},r);const Q=[];return p||Q.push(d.createElement("renderPass",{key:"renderpass",attach:`passes-${Q.length}`,args:[O,G]})),l||Q.push(d.createElement("shaderPass",{attach:`passes-${Q.length}`,key:"gammapass",args:[Pv]})),d.Children.forEach(i,K=>{K&&Q.push(d.cloneElement(K,{key:Q.length,attach:`passes-${Q.length}`}))}),d.createElement("effectComposer",(0,S.Z)({ref:fr([B,L]),args:[D,V]},T),Q)});let B0=function(i){return i.Linear="linear",i.Radial="radial",i}({});function zv(A){var _=A,{stops:i,colors:t,size:r=1024,width:o=16,type:l=B0.Linear,innerCircleRadius:p=0,outerCircleRadius:h="auto"}=_,f=mn(_,["stops","colors","size","width","type","innerCircleRadius","outerCircleRadius"]);const b=(0,E.z)(B=>B.gl),T=d.useMemo(()=>{const B=document.createElement("canvas"),F=B.getContext("2d");B.width=o,B.height=r;let P;if(l===B0.Linear)P=F.createLinearGradient(0,0,0,r);else{const O=B.width/2,G=B.height/2,D=h!=="auto"?Math.abs(Number(h)):Math.sqrt(wm(O,2)+wm(G,2));P=F.createRadialGradient(O,G,Math.abs(p),O,G,D)}let L=i.length;for(;L--;)P.addColorStop(i[L],t[L]);return F.save(),F.fillStyle=P,F.fillRect(0,0,o,r),F.restore(),B},[i]);return d.createElement("canvasTexture",(0,S.Z)({colorSpace:b.outputColorSpace,args:[T],attach:"map"},f))}function uc(i,t,r,o){const l=class extends s.ShaderMaterial{constructor(h={}){const f=Object.entries(i);super({uniforms:f.reduce((A,[_,b])=>{const T=s.UniformsUtils.clone({[_]:{value:b}});return jn(jn({},A),T)},{}),vertexShader:t,fragmentShader:r}),this.key="",f.forEach(([A])=>Object.defineProperty(this,A,{get:()=>this.uniforms[A].value,set:_=>this.uniforms[A].value=_})),Object.assign(this,h),o&&o(this)}};return l.key=s.MathUtils.generateUUID(),l}const fl=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function dc(i,t){const r=(0,E.z)(l=>l.gl),o=(0,E.D)(s.TextureLoader,fl(i)?Object.values(i):i);if((0,d.useLayoutEffect)(()=>{t==null||t(o)},[t]),(0,d.useEffect)(()=>{"initTexture"in r&&(Array.isArray(o)?o:[o]).forEach(r.initTexture)},[r,o]),fl(i)){const l=Object.keys(i),p={};return l.forEach(h=>Object.assign(p,{[h]:o[l.indexOf(h)]})),p}else return o}dc.preload=i=>E.D.preload(s.TextureLoader,i),dc.clear=i=>E.D.clear(s.TextureLoader,i);const gl=(()=>parseInt(s.REVISION.replace(/\D+/g,"")))(),hy=uc({color:new s.Color("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),I0=d.forwardRef((B,T)=>{var F=B,{children:i,color:t,segments:r=1,scale:o=1,zoom:l=1,grayscale:p=0,opacity:h=1,texture:f,toneMapped:A,transparent:_}=F,b=mn(F,["children","color","segments","scale","zoom","grayscale","opacity","texture","toneMapped","transparent"]);(0,E.e)({ImageMaterial:hy});const P=Array.isArray(o)?[o[0],o[1]]:[o,o],L=[f.image.width,f.image.height];return d.createElement("mesh",(0,S.Z)({ref:T,scale:Array.isArray(o)?[...o,1]:o},b),d.createElement("planeGeometry",{args:[1,1,r,r]}),d.createElement("imageMaterial",{color:t,map:f,zoom:l,grayscale:p,opacity:h,scale:P,imageBounds:L,toneMapped:A,transparent:_}),i)}),oE=d.forwardRef((o,r)=>{var l=o,{url:i}=l,t=mn(l,["url"]);const p=dc(i);return d.createElement(I0,(0,S.Z)({},t,{texture:p,ref:r}))}),sE=d.forwardRef((o,r)=>{var l=o,{url:i}=l,t=mn(l,["url"]);return d.createElement(I0,(0,S.Z)({},t,{ref:r}))}),aE=d.forwardRef((i,t)=>{if(i.url)return d.createElement(oE,(0,S.Z)({},i,{ref:t}));if(i.texture)return d.createElement(sE,(0,S.Z)({},i,{ref:t}));throw new Error("<Image /> requires a url or texture")}),Xf=d.forwardRef((f,h)=>{var A=f,{userData:i,children:t,geometry:r,threshold:o=15,color:l="black"}=A,p=mn(A,["userData","children","geometry","threshold","color"]);const _=d.useRef(null);return d.useLayoutEffect(()=>{const b=_.current.parent;if(b){const T=r||b.geometry;(T!==_.current.userData.currentGeom||o!==_.current.userData.currentThreshold)&&(_.current.userData.currentGeom=T,_.current.userData.currentThreshold=o,_.current.geometry=new s.EdgesGeometry(T,o))}}),d.useImperativeHandle(h,()=>_.current),d.createElement("lineSegments",(0,S.Z)({ref:_,raycast:()=>null},p),t||d.createElement("lineBasicMaterial",{color:l}))}),fy=uc({screenspace:!1,color:new s.Color("black"),opacity:1,thickness:.05,size:new s.Vector2},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function gy(T){var B=T,{color:i="black",opacity:t=1,transparent:r=!1,screenspace:o=!1,toneMapped:l=!0,polygonOffset:p=!1,polygonOffsetFactor:h=0,renderOrder:f=0,thickness:A=.05,angle:_=Math.PI}=B,b=mn(B,["color","opacity","transparent","screenspace","toneMapped","polygonOffset","polygonOffsetFactor","renderOrder","thickness","angle"]);var F;const P=d.useRef(null),[L]=d.useState(()=>new fy({side:s.BackSide})),{gl:O}=(0,E.z)(),G=O.getDrawingBufferSize(new s.Vector2);return d.useMemo(()=>(0,E.e)({OutlinesMaterial:fy}),[]),d.useLayoutEffect(()=>{const D=P.current,k=D.parent;if(k&&k.geometry){let N;return k.skeleton?(N=new s.SkinnedMesh,N.material=L,N.bind(k.skeleton,k.bindMatrix),D.add(N)):k.isInstancedMesh?(N=new s.InstancedMesh(k.geometry,L,k.count),N.instanceMatrix=k.instanceMatrix,D.add(N)):(N=new s.Mesh,N.material=L,D.add(N)),N.geometry=_?A0(k.geometry,_):k.geometry,()=>{_&&N.geometry.dispose(),D.remove(N)}}},[_,(F=P.current)==null||(F=F.parent)==null?void 0:F.geometry]),d.useLayoutEffect(()=>{const k=P.current.children[0];k&&(k.renderOrder=f,(0,E.j)(k.material,{transparent:r,thickness:A,color:i,opacity:t,size:G,screenspace:o,toneMapped:l,polygonOffset:p,polygonOffsetFactor:h}))},[_,r,A,i,t,o,l,p,h,G,f]),d.createElement("group",(0,S.Z)({ref:P},b))}var Uv=Object.defineProperty,Mp=(i,t,r)=>t in i?Uv(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ki=(i,t,r)=>(Mp(i,typeof t!="symbol"?t+"":t,r),r);function cm(i,t,r,o,l){let p;if(i=i.subarray||i.slice?i:i.buffer,r=r.subarray||r.slice?r:r.buffer,i=t?i.subarray?i.subarray(t,l&&t+l):i.slice(t,l&&t+l):i,r.set)r.set(i,o);else for(p=0;p<i.length;p++)r[p+o]=i[p];return r}function pm(i){return i instanceof Float32Array?i:i instanceof s.BufferGeometry?i.getAttribute("position").array:i.map(t=>{const r=Array.isArray(t);return t instanceof s.Vector3?[t.x,t.y,t.z]:t instanceof s.Vector2?[t.x,t.y,0]:r&&t.length===3?[t[0],t[1],t[2]]:r&&t.length===2?[t[0],t[1],0]:t}).flat()}class Nv extends s.BufferGeometry{constructor(){super(),Ki(this,"type","MeshLine"),Ki(this,"isMeshLine",!0),Ki(this,"positions",[]),Ki(this,"previous",[]),Ki(this,"next",[]),Ki(this,"side",[]),Ki(this,"width",[]),Ki(this,"indices_array",[]),Ki(this,"uvs",[]),Ki(this,"counters",[]),Ki(this,"widthCallback",null),Ki(this,"_attributes"),Ki(this,"_points",[]),Ki(this,"points"),Ki(this,"matrixWorld",new s.Matrix4),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(t){this.setPoints(t,this.widthCallback)}}})}setMatrixWorld(t){this.matrixWorld=t}setPoints(t,r){if(t=pm(t),this._points=t,this.widthCallback=r!=null?r:null,this.positions=[],this.counters=[],t.length&&t[0]instanceof s.Vector3)for(let o=0;o<t.length;o++){const l=t[o],p=o/(t.length-1);this.positions.push(l.x,l.y,l.z),this.positions.push(l.x,l.y,l.z),this.counters.push(p),this.counters.push(p)}else for(let o=0;o<t.length;o+=3){const l=o/(t.length-1);this.positions.push(t[o],t[o+1],t[o+2]),this.positions.push(t[o],t[o+1],t[o+2]),this.counters.push(l),this.counters.push(l)}this.process()}compareV3(t,r){const o=t*6,l=r*6;return this.positions[o]===this.positions[l]&&this.positions[o+1]===this.positions[l+1]&&this.positions[o+2]===this.positions[l+2]}copyV3(t){const r=t*6;return[this.positions[r],this.positions[r+1],this.positions[r+2]]}process(){const t=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let r,o;this.compareV3(0,t-1)?o=this.copyV3(t-2):o=this.copyV3(0),this.previous.push(o[0],o[1],o[2]),this.previous.push(o[0],o[1],o[2]);for(let l=0;l<t;l++){if(this.side.push(1),this.side.push(-1),this.widthCallback?r=this.widthCallback(l/(t-1)):r=1,this.width.push(r),this.width.push(r),this.uvs.push(l/(t-1),0),this.uvs.push(l/(t-1),1),l<t-1){o=this.copyV3(l),this.previous.push(o[0],o[1],o[2]),this.previous.push(o[0],o[1],o[2]);const p=l*2;this.indices_array.push(p,p+1,p+2),this.indices_array.push(p+2,p+1,p+3)}l>0&&(o=this.copyV3(l),this.next.push(o[0],o[1],o[2]),this.next.push(o[0],o[1],o[2]))}this.compareV3(t-1,0)?o=this.copyV3(1):o=this.copyV3(t-1),this.next.push(o[0],o[1],o[2]),this.next.push(o[0],o[1],o[2]),!this._attributes||this._attributes.position.count!==this.positions.length?this._attributes={position:new s.BufferAttribute(new Float32Array(this.positions),3),previous:new s.BufferAttribute(new Float32Array(this.previous),3),next:new s.BufferAttribute(new Float32Array(this.next),3),side:new s.BufferAttribute(new Float32Array(this.side),1),width:new s.BufferAttribute(new Float32Array(this.width),1),uv:new s.BufferAttribute(new Float32Array(this.uvs),2),index:new s.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new s.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:t,y:r,z:o}){const l=this._attributes.position.array,p=this._attributes.previous.array,h=this._attributes.next.array,f=l.length;cm(l,0,p,0,f),cm(l,6,l,0,f-6),l[f-6]=t,l[f-5]=r,l[f-4]=o,l[f-3]=t,l[f-2]=r,l[f-1]=o,cm(l,6,h,0,f-6),h[f-6]=t,h[f-5]=r,h[f-4]=o,h[f-3]=t,h[f-2]=r,h[f-1]=o,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const Yf=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
  	vCounters = counters;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0);
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <fog_vertex>
  }
`,Lh=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 c = vColor;
    if (useMap == 1.) c *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) c.a *= texture2D(alphaMap, vUV * repeat).a;
    if (c.a < alphaTest) discard;
    if (useDash == 1.) {
      c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    }
    gl_FragColor = c;
    gl_FragColor.a *= step(vCounters, visibility);
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`;class um extends s.ShaderMaterial{constructor(t){super({uniforms:$o(jn({},s.UniformsLib.fog),{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new s.Color(16777215)},opacity:{value:1},resolution:{value:new s.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new s.Vector2(1,1)}}),vertexShader:Yf,fragmentShader:Lh}),Ki(this,"lineWidth"),Ki(this,"map"),Ki(this,"useMap"),Ki(this,"alphaMap"),Ki(this,"useAlphaMap"),Ki(this,"color"),Ki(this,"resolution"),Ki(this,"sizeAttenuation"),Ki(this,"dashArray"),Ki(this,"dashOffset"),Ki(this,"dashRatio"),Ki(this,"useDash"),Ki(this,"visibility"),Ki(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(r){this.uniforms.lineWidth.value=r}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(r){this.uniforms.map.value=r}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(r){this.uniforms.useMap.value=r}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(r){this.uniforms.alphaMap.value=r}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(r){this.uniforms.useAlphaMap.value=r}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(r){this.uniforms.color.value=r}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(r){this.uniforms.resolution.value.copy(r)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(r){this.uniforms.sizeAttenuation.value=r}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(r){this.uniforms.dashArray.value=r,this.useDash=r!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(r){this.uniforms.dashOffset.value=r}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(r){this.uniforms.dashRatio.value=r}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(r){this.uniforms.useDash.value=r}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(r){this.uniforms.visibility.value=r}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(r){this.uniforms.alphaTest.value=r}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(r){this.uniforms.repeat.value.copy(r)}}}),this.setValues(t)}copy(t){return super.copy(t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray=t.dashArray,this.dashOffset=t.dashOffset,this.dashRatio=t.dashRatio,this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this}}function R0(i,t){const r=new THREE.Matrix4,o=new THREE.Ray,l=new THREE.Sphere,p=new THREE.Vector3,h=this.geometry;if(l.copy(h.boundingSphere),l.applyMatrix4(this.matrixWorld),!i.ray.intersectSphere(l,p))return;r.copy(this.matrixWorld).invert(),o.copy(i.ray).applyMatrix4(r);const f=new THREE.Vector3,A=new THREE.Vector3,_=new THREE.Vector3,b=this instanceof THREE.LineSegments?2:1,T=h.index,B=h.attributes;if(T!==null){const F=T.array,P=B.position.array,L=B.width.array;for(let O=0,G=F.length-1;O<G;O+=b){const D=F[O],k=F[O+1];f.fromArray(P,D*3),A.fromArray(P,k*3);const N=L[Math.floor(O/3)]!=null?L[Math.floor(O/3)]:1,V=i.params.Line.threshold+this.material.lineWidth*N/2,Q=V*V;if(o.distanceSqToSegment(f,A,p,_)>Q)continue;p.applyMatrix4(this.matrixWorld);const X=i.ray.origin.distanceTo(p);X<i.near||X>i.far||(t.push({distance:X,point:_.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:void 0,object:this}),O=G)}}}const jv={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},lE=(i,t=1)=>(i.set(i.subarray(t)),i.fill(-1/0,-t),i);function zd(i,t){const{length:r,local:o,decay:l,interval:p,stride:h}=jn(jn({},jv),t),f=d.useRef(),[A]=d.useState(()=>new s.Vector3);d.useLayoutEffect(()=>{i&&(f.current=Float32Array.from({length:r*10*3},(T,B)=>i.position.getComponent(B%3)))},[r,i]);const _=d.useRef(new s.Vector3),b=d.useRef(0);return(0,E.A)(()=>{if(i&&f.current){if(b.current===0){let T;o?T=i.position:(i.getWorldPosition(A),T=A);const B=1*l;for(let F=0;F<B;F++)T.distanceTo(_.current)<h||(lE(f.current,3),f.current.set(T.toArray(),f.current.length-3));_.current.copy(T)}b.current++,b.current=b.current%p}}),f}const my=d.forwardRef((i,t)=>{const{children:r}=i,{width:o,length:l,decay:p,local:h,stride:f,interval:A}=jn(jn({},jv),i),{color:_="hotpink",attenuation:b,target:T}=i,B=(0,E.z)(N=>N.size),F=(0,E.z)(N=>N.scene),P=d.useRef(null),[L,O]=d.useState(null),G=zd(L,{length:l,decay:p,local:h,stride:f,interval:A});d.useEffect(()=>{const N=(T==null?void 0:T.current)||P.current.children.find(V=>V instanceof s.Object3D);N&&O(N)},[G,T]);const D=d.useMemo(()=>new Nv,[]),k=d.useMemo(()=>{var N;const V=new um({lineWidth:.1*o,color:_,sizeAttenuation:1,resolution:new s.Vector2(B.width,B.height)});let Q;if(r)if(Array.isArray(r))Q=r.find(K=>{const X=K;return typeof X.type=="string"&&X.type==="meshLineMaterial"});else{const K=r;typeof K.type=="string"&&K.type==="meshLineMaterial"&&(Q=K)}return typeof((N=Q)==null?void 0:N.props)=="object"&&V.setValues(Q.props),V},[o,_,B,r]);return d.useEffect(()=>{k.uniforms.resolution.value.set(B.width,B.height)},[B]),(0,E.A)(()=>{G.current&&D.setPoints(G.current,b)}),d.createElement("group",null,(0,E.g)(d.createElement("mesh",{ref:t,geometry:D,material:k}),F),d.createElement("group",{ref:P},r))});var Hv=y(25108);const mo=new s.Triangle,Hc=new s.Vector3;class cE{constructor(t){let r=t.geometry;r.index&&(Hv.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.positionAttribute,r=this.weightAttribute,o=new Float32Array(t.count/3);for(let p=0;p<t.count;p+=3){let h=1;r&&(h=r.getX(p)+r.getX(p+1)+r.getX(p+2)),mo.a.fromBufferAttribute(t,p),mo.b.fromBufferAttribute(t,p+1),mo.c.fromBufferAttribute(t,p+2),h*=mo.getArea(),o[p/3]=h}this.distribution=new Float32Array(t.count/3);let l=0;for(let p=0;p<o.length;p++)l+=o[p],this.distribution[p]=l;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,r,o){const l=this.sampleFaceIndex();return this.sampleFace(l,t,r,o)}sampleFaceIndex(){const t=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*t)}binarySearch(t){const r=this.distribution;let o=0,l=r.length-1,p=-1;for(;o<=l;){const h=Math.ceil((o+l)/2);if(h===0||r[h-1]<=t&&r[h]>t){p=h;break}else t<r[h]?l=h-1:o=h+1}return p}sampleFace(t,r,o,l){let p=this.randomFunction(),h=this.randomFunction();return p+h>1&&(p=1-p,h=1-h),mo.a.fromBufferAttribute(this.positionAttribute,t*3),mo.b.fromBufferAttribute(this.positionAttribute,t*3+1),mo.c.fromBufferAttribute(this.positionAttribute,t*3+2),r.set(0,0,0).addScaledVector(mo.a,p).addScaledVector(mo.b,h).addScaledVector(mo.c,1-(p+h)),o!==void 0&&mo.getNormal(o),l!==void 0&&this.colorAttribute!==void 0&&(mo.a.fromBufferAttribute(this.colorAttribute,t*3),mo.b.fromBufferAttribute(this.colorAttribute,t*3+1),mo.c.fromBufferAttribute(this.colorAttribute,t*3+2),Hc.set(0,0,0).addScaledVector(mo.a,p).addScaledVector(mo.b,h).addScaledVector(mo.c,1-(p+h)),l.r=Hc.x,l.g=Hc.y,l.b=Hc.z),this}}function uu(i,t=16,r,o,l){const[p,h]=d.useState(()=>{const f=Array.from({length:t},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new s.InstancedBufferAttribute(Float32Array.from(f),16)});return d.useLayoutEffect(()=>{if(typeof i.current=="undefined")return;const f=new cE(i.current);o&&f.setWeightAttribute(o),f.build();const A=new s.Vector3,_=new s.Vector3,b=new s.Color,T=new s.Object3D;i.current.updateMatrixWorld(!0);for(let B=0;B<t;B++)f.sample(A,_,b),typeof r=="function"?r({dummy:T,sampledMesh:i.current,position:A,normal:_,color:b},B):T.position.copy(A),T.updateMatrix(),l!=null&&l.current&&l.current.setMatrixAt(B,T.matrix),T.matrix.toArray(p.array,B*16);l!=null&&l.current&&(l.current.instanceMatrix.needsUpdate=!0),p.needsUpdate=!0,h(p.clone())},[i,l,o,t,r]),p}function pE(f){var A=f,{children:i,weight:t,transform:r,instances:o,mesh:l,count:p=16}=A,h=mn(A,["children","weight","transform","instances","mesh","count"]);const _=d.useRef(null),b=d.useRef(null),T=d.useRef(null);return d.useLayoutEffect(()=>{var B,F;b.current=(B=o==null?void 0:o.current)!==null&&B!==void 0?B:_.current.children.find(P=>P.hasOwnProperty("instanceMatrix")),T.current=(F=l==null?void 0:l.current)!==null&&F!==void 0?F:_.current.children.find(P=>P.type==="Mesh")},[i,l==null?void 0:l.current,o==null?void 0:o.current]),uu(T,p,r,t,b),d.createElement("group",(0,S.Z)({ref:_},h),i)}const uE=o=>{var l=o,{compute:i,name:t}=l,r=mn(l,["compute","name"]);const[p]=d.useState(()=>new s.BufferAttribute(new Float32Array(0),1)),h=d.useRef(null);return d.useLayoutEffect(()=>{if(h.current){var f;const A=(f=h.current.parent)!==null&&f!==void 0?f:h.current.__r3f.parent,_=i(A);h.current.copy(_)}},[i]),d.createElement("primitive",(0,S.Z)({ref:h,object:p,attach:`attributes-${t}`},r))};var dm=y(25030),Wv=y.n(dm);function Vv(i,t,r={}){const o=new s.Vector3,l=new s.Quaternion,p=new s.Vector3,h=new s.Matrix4,f=new s.Matrix4,A=new s.Matrix4;r.preserveMatrix=r.preserveMatrix!==void 0?r.preserveMatrix:!0,r.preservePosition=r.preservePosition!==void 0?r.preservePosition:!0,r.preserveHipPosition=r.preserveHipPosition!==void 0?r.preserveHipPosition:!1,r.useTargetMatrix=r.useTargetMatrix!==void 0?r.useTargetMatrix:!1,r.hip=r.hip!==void 0?r.hip:"hip",r.names=r.names||{};const _=t.isObject3D?t.skeleton.bones:Kf(t),b=i.isObject3D?i.skeleton.bones:Kf(i);let T,B,F,P,L;if(i.isObject3D?i.skeleton.pose():(r.useTargetMatrix=!0,r.preserveMatrix=!1),r.preservePosition){L=[];for(let O=0;O<b.length;O++)L.push(b[O].position.clone())}if(r.preserveMatrix){i.updateMatrixWorld(),i.matrixWorld.identity();for(let O=0;O<i.children.length;++O)i.children[O].updateMatrixWorld(!0)}if(r.offsets){T=[];for(let O=0;O<b.length;++O)B=b[O],F=r.names[B.name]||B.name,r.offsets[F]&&(B.matrix.multiply(r.offsets[F]),B.matrix.decompose(B.position,B.quaternion,B.scale),B.updateMatrixWorld()),T.push(B.matrixWorld.clone())}for(let O=0;O<b.length;++O){if(B=b[O],F=r.names[B.name]||B.name,P=yy(F,_),A.copy(B.matrixWorld),P){if(P.updateMatrixWorld(),r.useTargetMatrix?f.copy(P.matrixWorld):(f.copy(i.matrixWorld).invert(),f.multiply(P.matrixWorld)),p.setFromMatrixScale(f),f.scale(p.set(1/p.x,1/p.y,1/p.z)),A.makeRotationFromQuaternion(l.setFromRotationMatrix(f)),i.isObject3D){const G=b.indexOf(B),D=T?T[G]:h.copy(i.skeleton.boneInverses[G]).invert();A.multiply(D)}A.copyPosition(f)}B.parent&&B.parent.isBone?(B.matrix.copy(B.parent.matrixWorld).invert(),B.matrix.multiply(A)):B.matrix.copy(A),r.preserveHipPosition&&F===r.hip&&B.matrix.setPosition(o.set(0,B.position.y,0)),B.matrix.decompose(B.position,B.quaternion,B.scale),B.updateMatrixWorld()}if(r.preservePosition)for(let O=0;O<b.length;++O)B=b[O],F=r.names[B.name]||B.name,F!==r.hip&&B.position.copy(L[O]);r.preserveMatrix&&i.updateMatrixWorld(!0)}function dE(i,t,r,o={}){o.useFirstFramePosition=o.useFirstFramePosition!==void 0?o.useFirstFramePosition:!1,o.fps=o.fps!==void 0?o.fps:30,o.names=o.names||[],t.isObject3D||(t=Qv(t));const l=Math.round(r.duration*(o.fps/1e3)*1e3),p=1/o.fps,h=[],f=new s.AnimationMixer(t),A=Kf(i.skeleton),_=[];let b,T,B,F,P;f.clipAction(r).play(),f.update(0),t.updateMatrixWorld();for(let L=0;L<l;++L){const O=L*p;Vv(i,t,o);for(let G=0;G<A.length;++G)P=o.names[A[G].name]||A[G].name,B=yy(P,t.skeleton),B&&(T=A[G],F=_[G]=_[G]||{bone:T},o.hip===P&&(F.pos||(F.pos={times:new Float32Array(l),values:new Float32Array(l*3)}),o.useFirstFramePosition&&(L===0&&(b=T.position.clone()),T.position.sub(b)),F.pos.times[L]=O,T.position.toArray(F.pos.values,L*3)),F.quat||(F.quat={times:new Float32Array(l),values:new Float32Array(l*4)}),F.quat.times[L]=O,T.quaternion.toArray(F.quat.values,L*4));f.update(p),t.updateMatrixWorld()}for(let L=0;L<_.length;++L)F=_[L],F&&(F.pos&&h.push(new s.VectorKeyframeTrack(".bones["+F.bone.name+"].position",F.pos.times,F.pos.values)),h.push(new s.QuaternionKeyframeTrack(".bones["+F.bone.name+"].quaternion",F.quat.times,F.quat.values)));return f.uncacheAction(r),new s.AnimationClip(r.name,-1,h)}function Gd(i){const t=new Map,r=new Map,o=i.clone();return Ay(i,o,function(l,p){t.set(p,l),r.set(l,p)}),o.traverse(function(l){if(!l.isSkinnedMesh)return;const p=l,h=t.get(l),f=h.skeleton.bones;p.skeleton=h.skeleton.clone(),p.bindMatrix.copy(h.bindMatrix),p.skeleton.bones=f.map(function(A){return r.get(A)}),p.bind(p.skeleton,p.bindMatrix)}),o}function yy(i,t){for(let r=0,o=Kf(t);r<o.length;r++)if(i===o[r].name)return o[r]}function Kf(i){return Array.isArray(i)?i:i.bones}function Qv(i){const t=new s.SkeletonHelper(i.bones[0]);return t.skeleton=i,t}function Ay(i,t,r){r(i,t);for(let o=0;o<i.children.length;o++)Ay(i.children[o],t.children[o],r)}const vy={retarget:Vv,retargetClip:dE,clone:Gd};function hE(i,{keys:t=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:r,inject:o,castShadow:l,receiveShadow:p}){let h=Wv()(i,t);return r&&(h.geometry&&r!=="materialsOnly"&&(h.geometry=h.geometry.clone()),h.material&&r!=="geometriesOnly"&&(h.material=h.material.clone())),o&&(typeof o=="function"?h=$o(jn({},h),{children:o(i)}):d.isValidElement(o)?h=$o(jn({},h),{children:o}):h=jn(jn({},h),o)),i instanceof s.Mesh&&(l&&(h.castShadow=!0),p&&(h.receiveShadow=!0)),h}const hm=d.forwardRef((b,_)=>{var T=b,{isChild:i=!1,object:t,children:r,deep:o,castShadow:l,receiveShadow:p,inject:h,keys:f}=T,A=mn(T,["isChild","object","children","deep","castShadow","receiveShadow","inject","keys"]);var B;const F={keys:f,deep:o,inject:h,castShadow:l,receiveShadow:p};if(t=d.useMemo(()=>{if(i===!1&&!Array.isArray(t)){let D=!1;if(t.traverse(k=>{k.isSkinnedMesh&&(D=!0)}),D)return vy.clone(t)}return t},[t,i]),Array.isArray(t))return d.createElement("group",(0,S.Z)({},A,{ref:_}),t.map(D=>d.createElement(hm,(0,S.Z)({key:D.uuid,object:D},F))),r);const G=hE(t,F),{children:P}=G,L=mn(G,["children"]),O=t.type[0].toLowerCase()+t.type.slice(1);return d.createElement(O,(0,S.Z)({},L,A,{ref:_}),((B=t)==null?void 0:B.children).map(D=>D.type==="Bone"?d.createElement("primitive",(0,S.Z)({key:D.uuid,object:D},F)):d.createElement(hm,(0,S.Z)({key:D.uuid,object:D},F,{isChild:!0}))),r,P)});var Xv=y(25108);class fm extends s.Mesh{constructor(t,r,o=!1,l=!1,p=1e4){const h=new s.BufferGeometry;super(h,r),this.isMarchingCubes=!0;const f=this,A=new Float32Array(12*3),_=new Float32Array(12*3),b=new Float32Array(12*3);this.enableUvs=o,this.enableColors=l,this.init=function(D){this.resolution=D,this.isolation=80,this.size=D,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const k=p*3;this.positionArray=new Float32Array(k*3);const N=new s.BufferAttribute(this.positionArray,3);N.setUsage(s.DynamicDrawUsage),h.setAttribute("position",N),this.normalArray=new Float32Array(k*3);const V=new s.BufferAttribute(this.normalArray,3);if(V.setUsage(s.DynamicDrawUsage),h.setAttribute("normal",V),this.enableUvs){this.uvArray=new Float32Array(k*2);const Q=new s.BufferAttribute(this.uvArray,2);Q.setUsage(s.DynamicDrawUsage),h.setAttribute("uv",Q)}if(this.enableColors){this.colorArray=new Float32Array(k*3);const Q=new s.BufferAttribute(this.colorArray,3);Q.setUsage(s.DynamicDrawUsage),h.setAttribute("color",Q)}h.boundingSphere=new s.Sphere(new s.Vector3,1)};function T(D,k,N){return D+(k-D)*N}function B(D,k,N,V,Q,K,X,oe,ae,ge){const ie=(N-X)/(oe-X),_e=f.normal_cache;A[k+0]=V+ie*f.delta,A[k+1]=Q,A[k+2]=K,_[k+0]=T(_e[D+0],_e[D+3],ie),_[k+1]=T(_e[D+1],_e[D+4],ie),_[k+2]=T(_e[D+2],_e[D+5],ie),b[k+0]=T(f.palette[ae*3+0],f.palette[ge*3+0],ie),b[k+1]=T(f.palette[ae*3+1],f.palette[ge*3+1],ie),b[k+2]=T(f.palette[ae*3+2],f.palette[ge*3+2],ie)}function F(D,k,N,V,Q,K,X,oe,ae,ge){const ie=(N-X)/(oe-X),_e=f.normal_cache;A[k+0]=V,A[k+1]=Q+ie*f.delta,A[k+2]=K;const me=D+f.yd*3;_[k+0]=T(_e[D+0],_e[me+0],ie),_[k+1]=T(_e[D+1],_e[me+1],ie),_[k+2]=T(_e[D+2],_e[me+2],ie),b[k+0]=T(f.palette[ae*3+0],f.palette[ge*3+0],ie),b[k+1]=T(f.palette[ae*3+1],f.palette[ge*3+1],ie),b[k+2]=T(f.palette[ae*3+2],f.palette[ge*3+2],ie)}function P(D,k,N,V,Q,K,X,oe,ae,ge){const ie=(N-X)/(oe-X),_e=f.normal_cache;A[k+0]=V,A[k+1]=Q,A[k+2]=K+ie*f.delta;const me=D+f.zd*3;_[k+0]=T(_e[D+0],_e[me+0],ie),_[k+1]=T(_e[D+1],_e[me+1],ie),_[k+2]=T(_e[D+2],_e[me+2],ie),b[k+0]=T(f.palette[ae*3+0],f.palette[ge*3+0],ie),b[k+1]=T(f.palette[ae*3+1],f.palette[ge*3+1],ie),b[k+2]=T(f.palette[ae*3+2],f.palette[ge*3+2],ie)}function L(D){const k=D*3;f.normal_cache[k]===0&&(f.normal_cache[k+0]=f.field[D-1]-f.field[D+1],f.normal_cache[k+1]=f.field[D-f.yd]-f.field[D+f.yd],f.normal_cache[k+2]=f.field[D-f.zd]-f.field[D+f.zd])}function O(D,k,N,V,Q){const K=V+1,X=V+f.yd,oe=V+f.zd,ae=K+f.yd,ge=K+f.zd,ie=V+f.yd+f.zd,_e=K+f.yd+f.zd;let me=0;const we=f.field[V],ke=f.field[K],De=f.field[X],Ne=f.field[ae],Ge=f.field[oe],Ye=f.field[ge],Se=f.field[ie],xe=f.field[_e];we<Q&&(me|=1),ke<Q&&(me|=2),De<Q&&(me|=8),Ne<Q&&(me|=4),Ge<Q&&(me|=16),Ye<Q&&(me|=32),Se<Q&&(me|=128),xe<Q&&(me|=64);const Ee=_y[me];if(Ee===0)return 0;const le=f.delta,ye=D+le,Be=k+le,be=N+le;Ee&1&&(L(V),L(K),B(V*3,0,Q,D,k,N,we,ke,V,K)),Ee&2&&(L(K),L(ae),F(K*3,3,Q,ye,k,N,ke,Ne,K,ae)),Ee&4&&(L(X),L(ae),B(X*3,6,Q,D,Be,N,De,Ne,X,ae)),Ee&8&&(L(V),L(X),F(V*3,9,Q,D,k,N,we,De,V,X)),Ee&16&&(L(oe),L(ge),B(oe*3,12,Q,D,k,be,Ge,Ye,oe,ge)),Ee&32&&(L(ge),L(_e),F(ge*3,15,Q,ye,k,be,Ye,xe,ge,_e)),Ee&64&&(L(ie),L(_e),B(ie*3,18,Q,D,Be,be,Se,xe,ie,_e)),Ee&128&&(L(oe),L(ie),F(oe*3,21,Q,D,k,be,Ge,Se,oe,ie)),Ee&256&&(L(V),L(oe),P(V*3,24,Q,D,k,N,we,Ge,V,oe)),Ee&512&&(L(K),L(ge),P(K*3,27,Q,ye,k,N,ke,Ye,K,ge)),Ee&1024&&(L(ae),L(_e),P(ae*3,30,Q,ye,Be,N,Ne,xe,ae,_e)),Ee&2048&&(L(X),L(ie),P(X*3,33,Q,D,Be,N,De,Se,X,ie)),me<<=4;let je,Et,Ft,Tt=0,pt=0;for(;F0[me+pt]!=-1;)je=me+pt,Et=je+1,Ft=je+2,G(A,_,b,3*F0[je],3*F0[Et],3*F0[Ft]),pt+=3,Tt++;return Tt}function G(D,k,N,V,Q,K){const X=f.count*3;if(f.positionArray[X+0]=D[V],f.positionArray[X+1]=D[V+1],f.positionArray[X+2]=D[V+2],f.positionArray[X+3]=D[Q],f.positionArray[X+4]=D[Q+1],f.positionArray[X+5]=D[Q+2],f.positionArray[X+6]=D[K],f.positionArray[X+7]=D[K+1],f.positionArray[X+8]=D[K+2],f.material.flatShading===!0){const oe=(k[V+0]+k[Q+0]+k[K+0])/3,ae=(k[V+1]+k[Q+1]+k[K+1])/3,ge=(k[V+2]+k[Q+2]+k[K+2])/3;f.normalArray[X+0]=oe,f.normalArray[X+1]=ae,f.normalArray[X+2]=ge,f.normalArray[X+3]=oe,f.normalArray[X+4]=ae,f.normalArray[X+5]=ge,f.normalArray[X+6]=oe,f.normalArray[X+7]=ae,f.normalArray[X+8]=ge}else f.normalArray[X+0]=k[V+0],f.normalArray[X+1]=k[V+1],f.normalArray[X+2]=k[V+2],f.normalArray[X+3]=k[Q+0],f.normalArray[X+4]=k[Q+1],f.normalArray[X+5]=k[Q+2],f.normalArray[X+6]=k[K+0],f.normalArray[X+7]=k[K+1],f.normalArray[X+8]=k[K+2];if(f.enableUvs){const oe=f.count*2;f.uvArray[oe+0]=D[V+0],f.uvArray[oe+1]=D[V+2],f.uvArray[oe+2]=D[Q+0],f.uvArray[oe+3]=D[Q+2],f.uvArray[oe+4]=D[K+0],f.uvArray[oe+5]=D[K+2]}f.enableColors&&(f.colorArray[X+0]=N[V+0],f.colorArray[X+1]=N[V+1],f.colorArray[X+2]=N[V+2],f.colorArray[X+3]=N[Q+0],f.colorArray[X+4]=N[Q+1],f.colorArray[X+5]=N[Q+2],f.colorArray[X+6]=N[K+0],f.colorArray[X+7]=N[K+1],f.colorArray[X+8]=N[K+2]),f.count+=3}this.addBall=function(D,k,N,V,Q,K){const X=Math.sign(V);V=Math.abs(V);const oe=K!=null;let ae=new s.Color(D,k,N);if(oe)try{ae=K instanceof s.Color?K:Array.isArray(K)?new s.Color(Math.min(Math.abs(K[0]),1),Math.min(Math.abs(K[1]),1),Math.min(Math.abs(K[2]),1)):new s.Color(K)}catch(pt){ae=new s.Color(D,k,N)}const ge=this.size*Math.sqrt(V/Q),ie=N*this.size,_e=k*this.size,me=D*this.size;let we=Math.floor(ie-ge);we<1&&(we=1);let ke=Math.floor(ie+ge);ke>this.size-1&&(ke=this.size-1);let De=Math.floor(_e-ge);De<1&&(De=1);let Ne=Math.floor(_e+ge);Ne>this.size-1&&(Ne=this.size-1);let Ge=Math.floor(me-ge);Ge<1&&(Ge=1);let Ye=Math.floor(me+ge);Ye>this.size-1&&(Ye=this.size-1);let Se,xe,Ee,le,ye,Be,be,je,Et,Ft,Tt;for(Ee=we;Ee<ke;Ee++)for(ye=this.size2*Ee,je=Ee/this.size-N,Et=je*je,xe=De;xe<Ne;xe++)for(le=ye+this.size*xe,be=xe/this.size-k,Ft=be*be,Se=Ge;Se<Ye;Se++)if(Be=Se/this.size-D,Tt=V/(1e-6+Be*Be+Ft+Et)-Q,Tt>0){this.field[le+Se]+=Tt*X;const pt=Math.sqrt((Se-me)*(Se-me)+(xe-_e)*(xe-_e)+(Ee-ie)*(Ee-ie))/ge,cn=1-pt*pt*pt*(pt*(pt*6-15)+10);this.palette[(le+Se)*3+0]+=ae.r*cn,this.palette[(le+Se)*3+1]+=ae.g*cn,this.palette[(le+Se)*3+2]+=ae.b*cn}},this.addPlaneX=function(D,k){const N=this.size,V=this.yd,Q=this.zd,K=this.field;let X,oe,ae,ge,ie,_e,me,we=N*Math.sqrt(D/k);for(we>N&&(we=N),X=0;X<we;X++)if(_e=X/N,ge=_e*_e,ie=D/(1e-4+ge)-k,ie>0)for(oe=0;oe<N;oe++)for(me=X+oe*V,ae=0;ae<N;ae++)K[Q*ae+me]+=ie},this.addPlaneY=function(D,k){const N=this.size,V=this.yd,Q=this.zd,K=this.field;let X,oe,ae,ge,ie,_e,me,we,ke=N*Math.sqrt(D/k);for(ke>N&&(ke=N),oe=0;oe<ke;oe++)if(_e=oe/N,ge=_e*_e,ie=D/(1e-4+ge)-k,ie>0)for(me=oe*V,X=0;X<N;X++)for(we=me+X,ae=0;ae<N;ae++)K[Q*ae+we]+=ie},this.addPlaneZ=function(D,k){const N=this.size,V=this.yd,Q=this.zd,K=this.field;let X,oe,ae,ge,ie,_e,me,we,ke=N*Math.sqrt(D/k);for(ke>N&&(ke=N),ae=0;ae<ke;ae++)if(_e=ae/N,ge=_e*_e,ie=D/(1e-4+ge)-k,ie>0)for(me=Q*ae,oe=0;oe<N;oe++)for(we=me+oe*V,X=0;X<N;X++)K[we+X]+=ie},this.setCell=function(D,k,N,V){const Q=this.size2*N+this.size*k+D;this.field[Q]=V},this.getCell=function(D,k,N){const V=this.size2*N+this.size*k+D;return this.field[V]},this.blur=function(D=1){const k=this.field,N=k.slice(),V=this.size,Q=this.size2;for(let K=0;K<V;K++)for(let X=0;X<V;X++)for(let oe=0;oe<V;oe++){const ae=Q*oe+V*X+K;let ge=N[ae],ie=1;for(let _e=-1;_e<=1;_e+=2){const me=_e+K;if(!(me<0||me>=V))for(let we=-1;we<=1;we+=2){const ke=we+X;if(!(ke<0||ke>=V))for(let De=-1;De<=1;De+=2){const Ne=De+oe;if(Ne<0||Ne>=V)continue;const Ge=Q*Ne+V*ke+me,Ye=N[Ge];ie++,ge+=D*(Ye-ge)/ie}}}k[ae]=ge}},this.reset=function(){for(let D=0;D<this.size3;D++)this.normal_cache[D*3]=0,this.field[D]=0,this.palette[D*3]=this.palette[D*3+1]=this.palette[D*3+2]=0},this.update=function(){this.count=0;const D=this.size-2;for(let k=1;k<D;k++){const N=this.size2*k,V=(k-this.halfsize)/this.halfsize;for(let Q=1;Q<D;Q++){const K=N+this.size*Q,X=(Q-this.halfsize)/this.halfsize;for(let oe=1;oe<D;oe++){const ae=(oe-this.halfsize)/this.halfsize,ge=K+oe;O(ae,X,V,ge,this.isolation)}}}this.geometry.setDrawRange(0,this.count),h.getAttribute("position").needsUpdate=!0,h.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(h.getAttribute("uv").needsUpdate=!0),this.enableColors&&(h.getAttribute("color").needsUpdate=!0),this.count/3>p&&Xv.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(t)}}const _y=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),F0=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),O0=d.createContext(null),fE=d.forwardRef((f,h)=>{var A=f,{resolution:i=28,maxPolyCount:t=1e4,enableUvs:r=!1,enableColors:o=!1,children:l}=A,p=mn(A,["resolution","maxPolyCount","enableUvs","enableColors","children"]);const _=d.useRef(null),b=d.useMemo(()=>new fm(i,null,r,o,t),[i,t,r,o]),T=d.useMemo(()=>({getParent:()=>_}),[]);return(0,E.A)(()=>{b.update(),b.reset()},-1),d.createElement(d.Fragment,null,d.createElement("primitive",(0,S.Z)({object:b,ref:fr([_,h])},p),d.createElement(O0.Provider,{value:T},l)))}),Yv=d.forwardRef((p,l)=>{var h=p,{strength:i=.5,subtract:t=12,color:r}=h,o=mn(h,["strength","subtract","color"]);const{getParent:f}=d.useContext(O0),A=d.useMemo(()=>f(),[f]),_=d.useRef(),b=new s.Vector3;return(0,E.A)(T=>{!A.current||!_.current||(_.current.getWorldPosition(b),A.current.addBall(.5+b.x*.5,.5+b.y*.5,.5+b.z*.5,i,t,r))}),d.createElement("group",(0,S.Z)({ref:fr([l,_])},o))}),Kv=d.forwardRef((p,l)=>{var h=p,{planeType:i="x",strength:t=.5,subtract:r=12}=h,o=mn(h,["planeType","strength","subtract"]);const{getParent:f}=d.useContext(O0),A=d.useMemo(()=>f(),[f]),_=d.useRef(),b=d.useMemo(()=>i==="x"?"addPlaneX":i==="y"?"addPlaneY":"addPlaneZ",[i]);return(0,E.A)(()=>{!A.current||!_.current||A.current[b](t,r)}),d.createElement("group",(0,S.Z)({ref:fr([l,_])},o))});var Jv=y(25108);class qv extends s.BufferGeometry{constructor(t,r,o,l){super();const p=[],h=[],f=[],A=new s.Vector3,_=new s.Matrix4;_.makeRotationFromEuler(o),_.setPosition(r);const b=new s.Matrix4;b.copy(_).invert(),T(),this.setAttribute("position",new s.Float32BufferAttribute(p,3)),this.setAttribute("normal",new s.Float32BufferAttribute(h,3)),this.setAttribute("uv",new s.Float32BufferAttribute(f,2));function T(){let L,O=[];const G=new s.Vector3,D=new s.Vector3;if(t.geometry.isGeometry===!0){Jv.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const k=t.geometry,N=k.attributes.position,V=k.attributes.normal;if(k.index!==null){const Q=k.index;for(L=0;L<Q.count;L++)G.fromBufferAttribute(N,Q.getX(L)),D.fromBufferAttribute(V,Q.getX(L)),B(O,G,D)}else for(L=0;L<N.count;L++)G.fromBufferAttribute(N,L),D.fromBufferAttribute(V,L),B(O,G,D);for(O=F(O,A.set(1,0,0)),O=F(O,A.set(-1,0,0)),O=F(O,A.set(0,1,0)),O=F(O,A.set(0,-1,0)),O=F(O,A.set(0,0,1)),O=F(O,A.set(0,0,-1)),L=0;L<O.length;L++){const Q=O[L];f.push(.5+Q.position.x/l.x,.5+Q.position.y/l.y),Q.position.applyMatrix4(_),p.push(Q.position.x,Q.position.y,Q.position.z),h.push(Q.normal.x,Q.normal.y,Q.normal.z)}}function B(L,O,G){O.applyMatrix4(t.matrixWorld),O.applyMatrix4(b),G.transformDirection(t.matrixWorld),L.push(new gm(O.clone(),G.clone()))}function F(L,O){const G=[],D=.5*Math.abs(l.dot(O));for(let k=0;k<L.length;k+=3){let N,V,Q,K=0,X,oe,ae,ge;const ie=L[k+0].position.dot(O)-D,_e=L[k+1].position.dot(O)-D,me=L[k+2].position.dot(O)-D;switch(N=ie>0,V=_e>0,Q=me>0,K=(N?1:0)+(V?1:0)+(Q?1:0),K){case 0:{G.push(L[k]),G.push(L[k+1]),G.push(L[k+2]);break}case 1:{if(N&&(X=L[k+1],oe=L[k+2],ae=P(L[k],X,O,D),ge=P(L[k],oe,O,D)),V){X=L[k],oe=L[k+2],ae=P(L[k+1],X,O,D),ge=P(L[k+1],oe,O,D),G.push(ae),G.push(oe.clone()),G.push(X.clone()),G.push(oe.clone()),G.push(ae.clone()),G.push(ge);break}Q&&(X=L[k],oe=L[k+1],ae=P(L[k+2],X,O,D),ge=P(L[k+2],oe,O,D)),G.push(X.clone()),G.push(oe.clone()),G.push(ae),G.push(ge),G.push(ae.clone()),G.push(oe.clone());break}case 2:{N||(X=L[k].clone(),oe=P(X,L[k+1],O,D),ae=P(X,L[k+2],O,D),G.push(X),G.push(oe),G.push(ae)),V||(X=L[k+1].clone(),oe=P(X,L[k+2],O,D),ae=P(X,L[k],O,D),G.push(X),G.push(oe),G.push(ae)),Q||(X=L[k+2].clone(),oe=P(X,L[k],O,D),ae=P(X,L[k+1],O,D),G.push(X),G.push(oe),G.push(ae));break}}}return G}function P(L,O,G,D){const k=L.position.dot(G)-D,N=O.position.dot(G)-D,V=k/(k-N);return new gm(new s.Vector3(L.position.x+V*(O.position.x-L.position.x),L.position.y+V*(O.position.y-L.position.y),L.position.z+V*(O.position.z-L.position.z)),new s.Vector3(L.normal.x+V*(O.normal.x-L.normal.x),L.normal.y+V*(O.normal.y-L.normal.y),L.normal.z+V*(O.normal.z-L.normal.z)))}}}class gm{constructor(t,r){this.position=t,this.normal=r}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function D0(i){return Array.isArray(i)}function mm(i=[0,0,0]){return D0(i)?i:i instanceof s.Vector3||i instanceof s.Euler?[i.x,i.y,i.z]:[i,i,i]}const Zv=d.forwardRef(function(B,T){var F=B,{debug:t,depthTest:r=!1,polygonOffsetFactor:o=-10,map:l,mesh:p,children:h,position:f,rotation:A,scale:_}=F,b=mn(F,["debug","depthTest","polygonOffsetFactor","map","mesh","children","position","rotation","scale"]);const P=d.useRef(null);d.useImperativeHandle(T,()=>P.current);const L=d.useRef(null);return d.useLayoutEffect(()=>{const O=(p==null?void 0:p.current)||P.current.parent,G=P.current;if(!(O instanceof s.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const D={position:new s.Vector3,rotation:new s.Euler,scale:new s.Vector3(1,1,1)};if(O){(0,E.j)(D,{position:f,scale:_});const k=O.matrixWorld.clone();if(O.matrixWorld.identity(),!A||typeof A=="number"){const N=new s.Object3D;N.position.copy(D.position),N.lookAt(O.position),typeof A=="number"&&N.rotateZ(A),(0,E.j)(D,{rotation:N.rotation})}else(0,E.j)(D,{rotation:A});return G.geometry=new qv(O,D.position,D.rotation,D.scale),L.current&&((0,E.j)(L.current,D),L.current.traverse(N=>N.raycast=()=>null)),O.matrixWorld=k,()=>{G.geometry.dispose()}}},[p,...mm(f),...mm(_),...mm(A)]),d.createElement("mesh",(0,S.Z)({ref:P,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":o,"material-depthTest":r,"material-map":l},b),h,t&&d.createElement("mesh",{ref:L},d.createElement("boxGeometry",null),d.createElement("meshNormalMaterial",{wireframe:!0}),d.createElement("axesHelper",null)))});var kh=y(25108);class ym extends s.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,r,o,l){const p=this,h=new s.FileLoader(p.manager);h.setPath(p.path),h.setRequestHeader(p.requestHeader),h.setWithCredentials(p.withCredentials),h.load(t,function(f){try{r(p.parse(f))}catch(A){l?l(A):kh.error(A),p.manager.itemError(t)}},o,l)}parse(t){const r=this;function o(xe,Ee){if(xe.nodeType!==1)return;const le=N(xe);let ye=!0,Be=null;switch(xe.nodeName){case"svg":break;case"style":p(xe);break;case"g":Ee=P(xe,Ee);break;case"path":Ee=P(xe,Ee),xe.hasAttribute("d")&&(Be=l(xe));break;case"rect":Ee=P(xe,Ee),Be=A(xe);break;case"polygon":Ee=P(xe,Ee),Be=_(xe);break;case"polyline":Ee=P(xe,Ee),Be=b(xe);break;case"circle":Ee=P(xe,Ee),Be=T(xe);break;case"ellipse":Ee=P(xe,Ee),Be=B(xe);break;case"line":Ee=P(xe,Ee),Be=F(xe);break;case"defs":ye=!1;break;case"mask":ye=!1;break;case"use":Ee=P(xe,Ee);const be=xe.href.baseVal.substring(1),je=xe.viewportElement.getElementById(be);je?o(je,Ee):kh.warn("SVGLoader: 'use node' references non-existent node id: "+be);break}if(Be&&(Ee.fill!==void 0&&Ee.fill!=="none"&&Be.color.setStyle(Ee.fill),Q(Be,Ge),ae.push(Be),Be.userData={node:xe,style:Ee}),ye){const be=xe.childNodes;for(let je=0;je<be.length;je++)o(be[je],Ee)}le&&(ie.pop(),ie.length>0?Ge.copy(ie[ie.length-1]):Ge.identity())}function l(xe){const Ee=new s.ShapePath,le=new s.Vector2,ye=new s.Vector2,Be=new s.Vector2;let be=!0,je=!1;const Ft=xe.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let Tt=0,pt=Ft.length;Tt<pt;Tt++){const cn=Ft[Tt],Bt=cn.charAt(0),Ct=cn.substr(1).trim();be===!0&&(je=!0,be=!1);let Ke;switch(Bt){case"M":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=2)le.x=Ke[Pe+0],le.y=Ke[Pe+1],ye.x=le.x,ye.y=le.y,Pe===0?Ee.moveTo(le.x,le.y):Ee.lineTo(le.x,le.y),Pe===0&&Be.copy(le);break;case"H":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe++)le.x=Ke[Pe],ye.x=le.x,ye.y=le.y,Ee.lineTo(le.x,le.y),Pe===0&&je===!0&&Be.copy(le);break;case"V":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe++)le.y=Ke[Pe],ye.x=le.x,ye.y=le.y,Ee.lineTo(le.x,le.y),Pe===0&&je===!0&&Be.copy(le);break;case"L":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=2)le.x=Ke[Pe+0],le.y=Ke[Pe+1],ye.x=le.x,ye.y=le.y,Ee.lineTo(le.x,le.y),Pe===0&&je===!0&&Be.copy(le);break;case"C":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=6)Ee.bezierCurveTo(Ke[Pe+0],Ke[Pe+1],Ke[Pe+2],Ke[Pe+3],Ke[Pe+4],Ke[Pe+5]),ye.x=Ke[Pe+2],ye.y=Ke[Pe+3],le.x=Ke[Pe+4],le.y=Ke[Pe+5],Pe===0&&je===!0&&Be.copy(le);break;case"S":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=4)Ee.bezierCurveTo(L(le.x,ye.x),L(le.y,ye.y),Ke[Pe+0],Ke[Pe+1],Ke[Pe+2],Ke[Pe+3]),ye.x=Ke[Pe+0],ye.y=Ke[Pe+1],le.x=Ke[Pe+2],le.y=Ke[Pe+3],Pe===0&&je===!0&&Be.copy(le);break;case"Q":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=4)Ee.quadraticCurveTo(Ke[Pe+0],Ke[Pe+1],Ke[Pe+2],Ke[Pe+3]),ye.x=Ke[Pe+0],ye.y=Ke[Pe+1],le.x=Ke[Pe+2],le.y=Ke[Pe+3],Pe===0&&je===!0&&Be.copy(le);break;case"T":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=2){const pn=L(le.x,ye.x),un=L(le.y,ye.y);Ee.quadraticCurveTo(pn,un,Ke[Pe+0],Ke[Pe+1]),ye.x=pn,ye.y=un,le.x=Ke[Pe+0],le.y=Ke[Pe+1],Pe===0&&je===!0&&Be.copy(le)}break;case"A":Ke=O(Ct,[3,4],7);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=7){if(Ke[Pe+5]==le.x&&Ke[Pe+6]==le.y)continue;const pn=le.clone();le.x=Ke[Pe+5],le.y=Ke[Pe+6],ye.x=le.x,ye.y=le.y,h(Ee,Ke[Pe],Ke[Pe+1],Ke[Pe+2],Ke[Pe+3],Ke[Pe+4],pn,le),Pe===0&&je===!0&&Be.copy(le)}break;case"m":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=2)le.x+=Ke[Pe+0],le.y+=Ke[Pe+1],ye.x=le.x,ye.y=le.y,Pe===0?Ee.moveTo(le.x,le.y):Ee.lineTo(le.x,le.y),Pe===0&&Be.copy(le);break;case"h":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe++)le.x+=Ke[Pe],ye.x=le.x,ye.y=le.y,Ee.lineTo(le.x,le.y),Pe===0&&je===!0&&Be.copy(le);break;case"v":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe++)le.y+=Ke[Pe],ye.x=le.x,ye.y=le.y,Ee.lineTo(le.x,le.y),Pe===0&&je===!0&&Be.copy(le);break;case"l":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=2)le.x+=Ke[Pe+0],le.y+=Ke[Pe+1],ye.x=le.x,ye.y=le.y,Ee.lineTo(le.x,le.y),Pe===0&&je===!0&&Be.copy(le);break;case"c":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=6)Ee.bezierCurveTo(le.x+Ke[Pe+0],le.y+Ke[Pe+1],le.x+Ke[Pe+2],le.y+Ke[Pe+3],le.x+Ke[Pe+4],le.y+Ke[Pe+5]),ye.x=le.x+Ke[Pe+2],ye.y=le.y+Ke[Pe+3],le.x+=Ke[Pe+4],le.y+=Ke[Pe+5],Pe===0&&je===!0&&Be.copy(le);break;case"s":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=4)Ee.bezierCurveTo(L(le.x,ye.x),L(le.y,ye.y),le.x+Ke[Pe+0],le.y+Ke[Pe+1],le.x+Ke[Pe+2],le.y+Ke[Pe+3]),ye.x=le.x+Ke[Pe+0],ye.y=le.y+Ke[Pe+1],le.x+=Ke[Pe+2],le.y+=Ke[Pe+3],Pe===0&&je===!0&&Be.copy(le);break;case"q":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=4)Ee.quadraticCurveTo(le.x+Ke[Pe+0],le.y+Ke[Pe+1],le.x+Ke[Pe+2],le.y+Ke[Pe+3]),ye.x=le.x+Ke[Pe+0],ye.y=le.y+Ke[Pe+1],le.x+=Ke[Pe+2],le.y+=Ke[Pe+3],Pe===0&&je===!0&&Be.copy(le);break;case"t":Ke=O(Ct);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=2){const pn=L(le.x,ye.x),un=L(le.y,ye.y);Ee.quadraticCurveTo(pn,un,le.x+Ke[Pe+0],le.y+Ke[Pe+1]),ye.x=pn,ye.y=un,le.x=le.x+Ke[Pe+0],le.y=le.y+Ke[Pe+1],Pe===0&&je===!0&&Be.copy(le)}break;case"a":Ke=O(Ct,[3,4],7);for(let Pe=0,wt=Ke.length;Pe<wt;Pe+=7){if(Ke[Pe+5]==0&&Ke[Pe+6]==0)continue;const pn=le.clone();le.x+=Ke[Pe+5],le.y+=Ke[Pe+6],ye.x=le.x,ye.y=le.y,h(Ee,Ke[Pe],Ke[Pe+1],Ke[Pe+2],Ke[Pe+3],Ke[Pe+4],pn,le),Pe===0&&je===!0&&Be.copy(le)}break;case"Z":case"z":Ee.currentPath.autoClose=!0,Ee.currentPath.curves.length>0&&(le.copy(Be),Ee.currentPath.currentPoint.copy(le),be=!0);break;default:kh.warn(cn)}je=!1}return Ee}function p(xe){if(!(!xe.sheet||!xe.sheet.cssRules||!xe.sheet.cssRules.length))for(let Ee=0;Ee<xe.sheet.cssRules.length;Ee++){const le=xe.sheet.cssRules[Ee];if(le.type!==1)continue;const ye=le.selectorText.split(/,/gm).filter(Boolean).map(Be=>Be.trim());for(let Be=0;Be<ye.length;Be++)ge[ye[Be]]=Object.assign(ge[ye[Be]]||{},le.style)}}function h(xe,Ee,le,ye,Be,be,je,Et){if(Ee==0||le==0){xe.lineTo(Et.x,Et.y);return}ye=ye*Math.PI/180,Ee=Math.abs(Ee),le=Math.abs(le);const Ft=(je.x-Et.x)/2,Tt=(je.y-Et.y)/2,pt=Math.cos(ye)*Ft+Math.sin(ye)*Tt,cn=-Math.sin(ye)*Ft+Math.cos(ye)*Tt;let Bt=Ee*Ee,Ct=le*le;const Ke=pt*pt,Pe=cn*cn,wt=Ke/Bt+Pe/Ct;if(wt>1){const yr=Math.sqrt(wt);Ee=yr*Ee,le=yr*le,Bt=Ee*Ee,Ct=le*le}const pn=Bt*Pe+Ct*Ke,un=(Bt*Ct-pn)/pn;let Gt=Math.sqrt(Math.max(0,un));Be===be&&(Gt=-Gt);const kn=Gt*Ee*cn/le,tr=-Gt*le*pt/Ee,xr=Math.cos(ye)*kn-Math.sin(ye)*tr+(je.x+Et.x)/2,sr=Math.sin(ye)*kn+Math.cos(ye)*tr+(je.y+Et.y)/2,bi=f(1,0,(pt-kn)/Ee,(cn-tr)/le),Mi=f((pt-kn)/Ee,(cn-tr)/le,(-pt-kn)/Ee,(-cn-tr)/le)%(Math.PI*2);xe.currentPath.absellipse(xr,sr,Ee,le,bi,bi+Mi,be===0,ye)}function f(xe,Ee,le,ye){const Be=xe*le+Ee*ye,be=Math.sqrt(xe*xe+Ee*Ee)*Math.sqrt(le*le+ye*ye);let je=Math.acos(Math.max(-1,Math.min(1,Be/be)));return xe*ye-Ee*le<0&&(je=-je),je}function A(xe){const Ee=k(xe.getAttribute("x")||0),le=k(xe.getAttribute("y")||0),ye=k(xe.getAttribute("rx")||xe.getAttribute("ry")||0),Be=k(xe.getAttribute("ry")||xe.getAttribute("rx")||0),be=k(xe.getAttribute("width")),je=k(xe.getAttribute("height")),Et=1-.551915024494,Ft=new s.ShapePath;return Ft.moveTo(Ee+ye,le),Ft.lineTo(Ee+be-ye,le),(ye!==0||Be!==0)&&Ft.bezierCurveTo(Ee+be-ye*Et,le,Ee+be,le+Be*Et,Ee+be,le+Be),Ft.lineTo(Ee+be,le+je-Be),(ye!==0||Be!==0)&&Ft.bezierCurveTo(Ee+be,le+je-Be*Et,Ee+be-ye*Et,le+je,Ee+be-ye,le+je),Ft.lineTo(Ee+ye,le+je),(ye!==0||Be!==0)&&Ft.bezierCurveTo(Ee+ye*Et,le+je,Ee,le+je-Be*Et,Ee,le+je-Be),Ft.lineTo(Ee,le+Be),(ye!==0||Be!==0)&&Ft.bezierCurveTo(Ee,le+Be*Et,Ee+ye*Et,le,Ee+ye,le),Ft}function _(xe){function Ee(be,je,Et){const Ft=k(je),Tt=k(Et);Be===0?ye.moveTo(Ft,Tt):ye.lineTo(Ft,Tt),Be++}const le=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,ye=new s.ShapePath;let Be=0;return xe.getAttribute("points").replace(le,Ee),ye.currentPath.autoClose=!0,ye}function b(xe){function Ee(be,je,Et){const Ft=k(je),Tt=k(Et);Be===0?ye.moveTo(Ft,Tt):ye.lineTo(Ft,Tt),Be++}const le=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,ye=new s.ShapePath;let Be=0;return xe.getAttribute("points").replace(le,Ee),ye.currentPath.autoClose=!1,ye}function T(xe){const Ee=k(xe.getAttribute("cx")||0),le=k(xe.getAttribute("cy")||0),ye=k(xe.getAttribute("r")||0),Be=new s.Path;Be.absarc(Ee,le,ye,0,Math.PI*2);const be=new s.ShapePath;return be.subPaths.push(Be),be}function B(xe){const Ee=k(xe.getAttribute("cx")||0),le=k(xe.getAttribute("cy")||0),ye=k(xe.getAttribute("rx")||0),Be=k(xe.getAttribute("ry")||0),be=new s.Path;be.absellipse(Ee,le,ye,Be,0,Math.PI*2);const je=new s.ShapePath;return je.subPaths.push(be),je}function F(xe){const Ee=k(xe.getAttribute("x1")||0),le=k(xe.getAttribute("y1")||0),ye=k(xe.getAttribute("x2")||0),Be=k(xe.getAttribute("y2")||0),be=new s.ShapePath;return be.moveTo(Ee,le),be.lineTo(ye,Be),be.currentPath.autoClose=!1,be}function P(xe,Ee){Ee=Object.assign({},Ee);let le={};if(xe.hasAttribute("class")){const je=xe.getAttribute("class").split(/\s/).filter(Boolean).map(Et=>Et.trim());for(let Et=0;Et<je.length;Et++)le=Object.assign(le,ge["."+je[Et]])}xe.hasAttribute("id")&&(le=Object.assign(le,ge["#"+xe.getAttribute("id")]));function ye(je,Et,Ft){Ft===void 0&&(Ft=function(pt){return pt.startsWith("url")&&kh.warn("SVGLoader: url access in attributes is not implemented."),pt}),xe.hasAttribute(je)&&(Ee[Et]=Ft(xe.getAttribute(je))),le[je]&&(Ee[Et]=Ft(le[je])),xe.style&&xe.style[je]!==""&&(Ee[Et]=Ft(xe.style[je]))}function Be(je){return Math.max(0,Math.min(1,k(je)))}function be(je){return Math.max(0,k(je))}return ye("fill","fill"),ye("fill-opacity","fillOpacity",Be),ye("fill-rule","fillRule"),ye("opacity","opacity",Be),ye("stroke","stroke"),ye("stroke-opacity","strokeOpacity",Be),ye("stroke-width","strokeWidth",be),ye("stroke-linejoin","strokeLineJoin"),ye("stroke-linecap","strokeLineCap"),ye("stroke-miterlimit","strokeMiterLimit",be),ye("visibility","visibility"),Ee}function L(xe,Ee){return xe-(Ee-xe)}function O(xe,Ee,le){if(typeof xe!="string")throw new TypeError("Invalid input: "+typeof xe);const ye={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Be=0,be=1,je=2,Et=3;let Ft=Be,Tt=!0,pt="",cn="";const Bt=[];function Ct(pn,un,Gt){const kn=new SyntaxError('Unexpected character "'+pn+'" at index '+un+".");throw kn.partial=Gt,kn}function Ke(){pt!==""&&(cn===""?Bt.push(Number(pt)):Bt.push(Number(pt)*Math.pow(10,Number(cn)))),pt="",cn=""}let Pe;const wt=xe.length;for(let pn=0;pn<wt;pn++){if(Pe=xe[pn],Array.isArray(Ee)&&Ee.includes(Bt.length%le)&&ye.FLAGS.test(Pe)){Ft=be,pt=Pe,Ke();continue}if(Ft===Be){if(ye.WHITESPACE.test(Pe))continue;if(ye.DIGIT.test(Pe)||ye.SIGN.test(Pe)){Ft=be,pt=Pe;continue}if(ye.POINT.test(Pe)){Ft=je,pt=Pe;continue}ye.COMMA.test(Pe)&&(Tt&&Ct(Pe,pn,Bt),Tt=!0)}if(Ft===be){if(ye.DIGIT.test(Pe)){pt+=Pe;continue}if(ye.POINT.test(Pe)){pt+=Pe,Ft=je;continue}if(ye.EXP.test(Pe)){Ft=Et;continue}ye.SIGN.test(Pe)&&pt.length===1&&ye.SIGN.test(pt[0])&&Ct(Pe,pn,Bt)}if(Ft===je){if(ye.DIGIT.test(Pe)){pt+=Pe;continue}if(ye.EXP.test(Pe)){Ft=Et;continue}ye.POINT.test(Pe)&&pt[pt.length-1]==="."&&Ct(Pe,pn,Bt)}if(Ft===Et){if(ye.DIGIT.test(Pe)){cn+=Pe;continue}if(ye.SIGN.test(Pe)){if(cn===""){cn+=Pe;continue}cn.length===1&&ye.SIGN.test(cn)&&Ct(Pe,pn,Bt)}}ye.WHITESPACE.test(Pe)?(Ke(),Ft=Be,Tt=!1):ye.COMMA.test(Pe)?(Ke(),Ft=Be,Tt=!0):ye.SIGN.test(Pe)?(Ke(),Ft=be,pt=Pe):ye.POINT.test(Pe)?(Ke(),Ft=je,pt=Pe):Ct(Pe,pn,Bt)}return Ke(),Bt}const G=["mm","cm","in","pt","pc","px"],D={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function k(xe){let Ee="px";if(typeof xe=="string"||xe instanceof String)for(let ye=0,Be=G.length;ye<Be;ye++){const be=G[ye];if(xe.endsWith(be)){Ee=be,xe=xe.substring(0,xe.length-be.length);break}}let le;return Ee==="px"&&r.defaultUnit!=="px"?le=D.in[r.defaultUnit]/r.defaultDPI:(le=D[Ee][r.defaultUnit],le<0&&(le=D[Ee].in*r.defaultDPI)),le*parseFloat(xe)}function N(xe){if(!(xe.hasAttribute("transform")||xe.nodeName==="use"&&(xe.hasAttribute("x")||xe.hasAttribute("y"))))return null;const Ee=V(xe);return ie.length>0&&Ee.premultiply(ie[ie.length-1]),Ge.copy(Ee),ie.push(Ee),Ee}function V(xe){const Ee=new s.Matrix3,le=_e;if(xe.nodeName==="use"&&(xe.hasAttribute("x")||xe.hasAttribute("y"))){const ye=k(xe.getAttribute("x")),Be=k(xe.getAttribute("y"));Ee.translate(ye,Be)}if(xe.hasAttribute("transform")){const ye=xe.getAttribute("transform").split(")");for(let Be=ye.length-1;Be>=0;Be--){const be=ye[Be].trim();if(be==="")continue;const je=be.indexOf("("),Et=be.length;if(je>0&&je<Et){const Ft=be.substr(0,je),Tt=O(be.substr(je+1,Et-je-1));switch(le.identity(),Ft){case"translate":if(Tt.length>=1){const pt=Tt[0];let cn=pt;Tt.length>=2&&(cn=Tt[1]),le.translate(pt,cn)}break;case"rotate":if(Tt.length>=1){let pt=0,cn=0,Bt=0;pt=-Tt[0]*Math.PI/180,Tt.length>=3&&(cn=Tt[1],Bt=Tt[2]),me.identity().translate(-cn,-Bt),we.identity().rotate(pt),ke.multiplyMatrices(we,me),me.identity().translate(cn,Bt),le.multiplyMatrices(me,ke)}break;case"scale":if(Tt.length>=1){const pt=Tt[0];let cn=pt;Tt.length>=2&&(cn=Tt[1]),le.scale(pt,cn)}break;case"skewX":Tt.length===1&&le.set(1,Math.tan(Tt[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":Tt.length===1&&le.set(1,0,0,Math.tan(Tt[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":Tt.length===6&&le.set(Tt[0],Tt[2],Tt[4],Tt[1],Tt[3],Tt[5],0,0,1);break}}Ee.premultiply(le)}}return Ee}function Q(xe,Ee){function le(be){Ne.set(be.x,be.y,1).applyMatrix3(Ee),be.set(Ne.x,Ne.y)}const ye=K(Ee),Be=xe.subPaths;for(let be=0,je=Be.length;be<je;be++){const Ft=Be[be].curves;for(let Tt=0;Tt<Ft.length;Tt++){const pt=Ft[Tt];pt.isLineCurve?(le(pt.v1),le(pt.v2)):pt.isCubicBezierCurve?(le(pt.v0),le(pt.v1),le(pt.v2),le(pt.v3)):pt.isQuadraticBezierCurve?(le(pt.v0),le(pt.v1),le(pt.v2)):pt.isEllipseCurve&&(ye&&kh.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),De.set(pt.aX,pt.aY),le(De),pt.aX=De.x,pt.aY=De.y,pt.xRadius*=X(Ee),pt.yRadius*=oe(Ee))}}}function K(xe){return xe.elements[1]!==0||xe.elements[3]!==0}function X(xe){const Ee=xe.elements;return Math.sqrt(Ee[0]*Ee[0]+Ee[1]*Ee[1])}function oe(xe){const Ee=xe.elements;return Math.sqrt(Ee[3]*Ee[3]+Ee[4]*Ee[4])}const ae=[],ge={},ie=[],_e=new s.Matrix3,me=new s.Matrix3,we=new s.Matrix3,ke=new s.Matrix3,De=new s.Vector2,Ne=new s.Vector3,Ge=new s.Matrix3,Ye=new DOMParser().parseFromString(t,"image/svg+xml");return o(Ye.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:ae,xml:Ye.documentElement}}static createShapes(t){const o={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},l={loc:o.ORIGIN,t:0};function p(O,G,D,k){const N=O.x,V=G.x,Q=D.x,K=k.x,X=O.y,oe=G.y,ae=D.y,ge=k.y,ie=(K-Q)*(X-ae)-(ge-ae)*(N-Q),_e=(V-N)*(X-ae)-(oe-X)*(N-Q),me=(ge-ae)*(V-N)-(K-Q)*(oe-X),we=ie/me,ke=_e/me;if(me===0&&ie!==0||we<=0||we>=1||ke<0||ke>1)return null;if(ie===0&&me===0){for(let De=0;De<2;De++)if(h(De===0?D:k,O,G),l.loc==o.ORIGIN){const Ne=De===0?D:k;return{x:Ne.x,y:Ne.y,t:l.t}}else if(l.loc==o.BETWEEN){const Ne=+(N+l.t*(V-N)).toPrecision(10),Ge=+(X+l.t*(oe-X)).toPrecision(10);return{x:Ne,y:Ge,t:l.t}}return null}else{for(let Ge=0;Ge<2;Ge++)if(h(Ge===0?D:k,O,G),l.loc==o.ORIGIN){const Ye=Ge===0?D:k;return{x:Ye.x,y:Ye.y,t:l.t}}const De=+(N+we*(V-N)).toPrecision(10),Ne=+(X+we*(oe-X)).toPrecision(10);return{x:De,y:Ne,t:we}}}function h(O,G,D){const k=D.x-G.x,N=D.y-G.y,V=O.x-G.x,Q=O.y-G.y,K=k*Q-V*N;if(O.x===G.x&&O.y===G.y){l.loc=o.ORIGIN,l.t=0;return}if(O.x===D.x&&O.y===D.y){l.loc=o.DESTINATION,l.t=1;return}if(K<-Number.EPSILON){l.loc=o.LEFT;return}if(K>Number.EPSILON){l.loc=o.RIGHT;return}if(k*V<0||N*Q<0){l.loc=o.BEHIND;return}if(Math.sqrt(k*k+N*N)<Math.sqrt(V*V+Q*Q)){l.loc=o.BEYOND;return}let X;k!==0?X=V/k:X=Q/N,l.loc=o.BETWEEN,l.t=X}function f(O,G){const D=[],k=[];for(let N=1;N<O.length;N++){const V=O[N-1],Q=O[N];for(let K=1;K<G.length;K++){const X=G[K-1],oe=G[K],ae=p(V,Q,X,oe);ae!==null&&D.find(ge=>ge.t<=ae.t+Number.EPSILON&&ge.t>=ae.t-Number.EPSILON)===void 0&&(D.push(ae),k.push(new s.Vector2(ae.x,ae.y)))}}return k}function A(O,G,D){const k=new s.Vector2;G.getCenter(k);const N=[];return D.forEach(V=>{V.boundingBox.containsPoint(k)&&f(O,V.points).forEach(K=>{N.push({identifier:V.identifier,isCW:V.isCW,point:K})})}),N.sort((V,Q)=>V.point.x-Q.point.x),N}function _(O,G,D,k,N){(N==null||N==="")&&(N="nonzero");const V=new s.Vector2;O.boundingBox.getCenter(V);const Q=[new s.Vector2(D,V.y),new s.Vector2(k,V.y)],K=A(Q,O.boundingBox,G);K.sort((_e,me)=>_e.point.x-me.point.x);const X=[],oe=[];K.forEach(_e=>{_e.identifier===O.identifier?X.push(_e):oe.push(_e)});const ae=X[0].point.x,ge=[];let ie=0;for(;ie<oe.length&&oe[ie].point.x<ae;)ge.length>0&&ge[ge.length-1]===oe[ie].identifier?ge.pop():ge.push(oe[ie].identifier),ie++;if(ge.push(O.identifier),N==="evenodd"){const _e=ge.length%2===0,me=ge[ge.length-2];return{identifier:O.identifier,isHole:_e,for:me}}else if(N==="nonzero"){let _e=!0,me=null,we=null;for(let ke=0;ke<ge.length;ke++){const De=ge[ke];_e?(we=G[De].isCW,_e=!1,me=De):we!==G[De].isCW&&(we=G[De].isCW,_e=!0)}return{identifier:O.identifier,isHole:_e,for:me}}else kh.warn('fill-rule: "'+N+'" is currently not implemented.')}let b=0,T=999999999,B=-999999999,F=t.subPaths.map(O=>{const G=O.getPoints();let D=-999999999,k=999999999,N=-999999999,V=999999999;for(let Q=0;Q<G.length;Q++){const K=G[Q];K.y>D&&(D=K.y),K.y<k&&(k=K.y),K.x>N&&(N=K.x),K.x<V&&(V=K.x)}return B<=N&&(B=N+1),T>=V&&(T=V-1),{curves:O.curves,points:G,isCW:s.ShapeUtils.isClockWise(G),identifier:b++,boundingBox:new s.Box2(new s.Vector2(V,k),new s.Vector2(N,D))}});F=F.filter(O=>O.points.length>1);const P=F.map(O=>_(O,F,T,B,t.userData.style.fillRule)),L=[];return F.forEach(O=>{if(!P[O.identifier].isHole){const D=new s.Shape;D.curves=O.curves,P.filter(N=>N.isHole&&N.for===O.identifier).forEach(N=>{const V=F[N.identifier],Q=new s.Path;Q.curves=V.curves,D.holes.push(Q)}),L.push(D)}}),L}static getStrokeStyle(t,r,o,l,p){return t=t!==void 0?t:1,r=r!==void 0?r:"#000",o=o!==void 0?o:"miter",l=l!==void 0?l:"butt",p=p!==void 0?p:4,{strokeColor:r,strokeWidth:t,strokeLineJoin:o,strokeLineCap:l,strokeMiterLimit:p}}static pointsToStroke(t,r,o,l){const p=[],h=[],f=[];if(ym.pointsToStrokeWithBuffers(t,r,o,l,p,h,f)===0)return null;const A=new s.BufferGeometry;return A.setAttribute("position",new s.Float32BufferAttribute(p,3)),A.setAttribute("normal",new s.Float32BufferAttribute(h,3)),A.setAttribute("uv",new s.Float32BufferAttribute(f,2)),A}static pointsToStrokeWithBuffers(t,r,o,l,p,h,f,A){const _=new s.Vector2,b=new s.Vector2,T=new s.Vector2,B=new s.Vector2,F=new s.Vector2,P=new s.Vector2,L=new s.Vector2,O=new s.Vector2,G=new s.Vector2,D=new s.Vector2,k=new s.Vector2,N=new s.Vector2,V=new s.Vector2,Q=new s.Vector2,K=new s.Vector2,X=new s.Vector2,oe=new s.Vector2;o=o!==void 0?o:12,l=l!==void 0?l:.001,A=A!==void 0?A:0,t=cn(t);const ae=t.length;if(ae<2)return 0;const ge=t[0].equals(t[ae-1]);let ie,_e=t[0],me;const we=r.strokeWidth/2,ke=1/(ae-1);let De=0,Ne,Ge,Ye,Se,xe=!1,Ee=0,le=A*3,ye=A*2;Be(t[0],t[1],_).multiplyScalar(we),O.copy(t[0]).sub(_),G.copy(t[0]).add(_),D.copy(O),k.copy(G);for(let Bt=1;Bt<ae;Bt++){ie=t[Bt],Bt===ae-1?ge?me=t[1]:me=void 0:me=t[Bt+1];const Ct=_;if(Be(_e,ie,Ct),T.copy(Ct).multiplyScalar(we),N.copy(ie).sub(T),V.copy(ie).add(T),Ne=De+ke,Ge=!1,me!==void 0){Be(ie,me,b),T.copy(b).multiplyScalar(we),Q.copy(ie).sub(T),K.copy(ie).add(T),Ye=!0,T.subVectors(me,_e),Ct.dot(T)<0&&(Ye=!1),Bt===1&&(xe=Ye),T.subVectors(me,ie),T.normalize();const Ke=Math.abs(Ct.dot(T));if(Ke!==0){const Pe=we/Ke;T.multiplyScalar(-Pe),B.subVectors(ie,_e),F.copy(B).setLength(Pe).add(T),X.copy(F).negate();const wt=F.length(),pn=B.length();B.divideScalar(pn),P.subVectors(me,ie);const un=P.length();switch(P.divideScalar(un),B.dot(X)<pn&&P.dot(X)<un&&(Ge=!0),oe.copy(F).add(ie),X.add(ie),Se=!1,Ge?Ye?(K.copy(X),V.copy(X)):(Q.copy(X),N.copy(X)):Et(),r.strokeLineJoin){case"bevel":Ft(Ye,Ge,Ne);break;case"round":Tt(Ye,Ge),Ye?je(ie,N,Q,Ne,0):je(ie,K,V,Ne,1);break;case"miter":case"miter-clip":default:const Gt=we*r.strokeMiterLimit/wt;if(Gt<1)if(r.strokeLineJoin!=="miter-clip"){Ft(Ye,Ge,Ne);break}else Tt(Ye,Ge),Ye?(P.subVectors(oe,N).multiplyScalar(Gt).add(N),L.subVectors(oe,Q).multiplyScalar(Gt).add(Q),be(N,Ne,0),be(P,Ne,0),be(ie,Ne,.5),be(ie,Ne,.5),be(P,Ne,0),be(L,Ne,0),be(ie,Ne,.5),be(L,Ne,0),be(Q,Ne,0)):(P.subVectors(oe,V).multiplyScalar(Gt).add(V),L.subVectors(oe,K).multiplyScalar(Gt).add(K),be(V,Ne,1),be(P,Ne,1),be(ie,Ne,.5),be(ie,Ne,.5),be(P,Ne,1),be(L,Ne,1),be(ie,Ne,.5),be(L,Ne,1),be(K,Ne,1));else Ge?(Ye?(be(G,De,1),be(O,De,0),be(oe,Ne,0),be(G,De,1),be(oe,Ne,0),be(X,Ne,1)):(be(G,De,1),be(O,De,0),be(oe,Ne,1),be(O,De,0),be(X,Ne,0),be(oe,Ne,1)),Ye?Q.copy(oe):K.copy(oe)):Ye?(be(N,Ne,0),be(oe,Ne,0),be(ie,Ne,.5),be(ie,Ne,.5),be(oe,Ne,0),be(Q,Ne,0)):(be(V,Ne,1),be(oe,Ne,1),be(ie,Ne,.5),be(ie,Ne,.5),be(oe,Ne,1),be(K,Ne,1)),Se=!0;break}}else Et()}else Et();!ge&&Bt===ae-1&&pt(t[0],D,k,Ye,!0,De),De=Ne,_e=ie,O.copy(Q),G.copy(K)}if(!ge)pt(ie,N,V,Ye,!1,Ne);else if(Ge&&p){let Bt=oe,Ct=X;xe!==Ye&&(Bt=X,Ct=oe),Ye?(Se||xe)&&(Ct.toArray(p,0*3),Ct.toArray(p,3*3),Se&&Bt.toArray(p,1*3)):(Se||!xe)&&(Ct.toArray(p,1*3),Ct.toArray(p,3*3),Se&&Bt.toArray(p,0*3))}return Ee;function Be(Bt,Ct,Ke){return Ke.subVectors(Ct,Bt),Ke.set(-Ke.y,Ke.x).normalize()}function be(Bt,Ct,Ke){p&&(p[le]=Bt.x,p[le+1]=Bt.y,p[le+2]=0,h&&(h[le]=0,h[le+1]=0,h[le+2]=1),le+=3,f&&(f[ye]=Ct,f[ye+1]=Ke,ye+=2)),Ee+=3}function je(Bt,Ct,Ke,Pe,wt){_.copy(Ct).sub(Bt).normalize(),b.copy(Ke).sub(Bt).normalize();let pn=Math.PI;const un=_.dot(b);Math.abs(un)<1&&(pn=Math.abs(Math.acos(un))),pn/=o,T.copy(Ct);for(let Gt=0,kn=o-1;Gt<kn;Gt++)B.copy(T).rotateAround(Bt,pn),be(T,Pe,wt),be(B,Pe,wt),be(Bt,Pe,.5),T.copy(B);be(B,Pe,wt),be(Ke,Pe,wt),be(Bt,Pe,.5)}function Et(){be(G,De,1),be(O,De,0),be(N,Ne,0),be(G,De,1),be(N,Ne,1),be(V,Ne,0)}function Ft(Bt,Ct,Ke){Ct?Bt?(be(G,De,1),be(O,De,0),be(N,Ne,0),be(G,De,1),be(N,Ne,0),be(X,Ne,1),be(N,Ke,0),be(Q,Ke,0),be(X,Ke,.5)):(be(G,De,1),be(O,De,0),be(V,Ne,1),be(O,De,0),be(X,Ne,0),be(V,Ne,1),be(V,Ke,1),be(K,Ke,0),be(X,Ke,.5)):Bt?(be(N,Ke,0),be(Q,Ke,0),be(ie,Ke,.5)):(be(V,Ke,1),be(K,Ke,0),be(ie,Ke,.5))}function Tt(Bt,Ct){Ct&&(Bt?(be(G,De,1),be(O,De,0),be(N,Ne,0),be(G,De,1),be(N,Ne,0),be(X,Ne,1),be(N,De,0),be(ie,Ne,.5),be(X,Ne,1),be(ie,Ne,.5),be(Q,De,0),be(X,Ne,1)):(be(G,De,1),be(O,De,0),be(V,Ne,1),be(O,De,0),be(X,Ne,0),be(V,Ne,1),be(V,De,1),be(X,Ne,0),be(ie,Ne,.5),be(ie,Ne,.5),be(X,Ne,0),be(K,De,1)))}function pt(Bt,Ct,Ke,Pe,wt,pn){switch(r.strokeLineCap){case"round":wt?je(Bt,Ke,Ct,pn,.5):je(Bt,Ct,Ke,pn,.5);break;case"square":if(wt)_.subVectors(Ct,Bt),b.set(_.y,-_.x),T.addVectors(_,b).add(Bt),B.subVectors(b,_).add(Bt),Pe?(T.toArray(p,1*3),B.toArray(p,0*3),B.toArray(p,3*3)):(T.toArray(p,1*3),T.toArray(p,3*3),B.toArray(p,0*3));else{_.subVectors(Ke,Bt),b.set(_.y,-_.x),T.addVectors(_,b).add(Bt),B.subVectors(b,_).add(Bt);const un=p.length;Pe?(T.toArray(p,un-1*3),B.toArray(p,un-2*3),B.toArray(p,un-4*3)):(T.toArray(p,un-2*3),B.toArray(p,un-1*3),B.toArray(p,un-4*3))}break}}function cn(Bt){let Ct=!1;for(let Pe=1,wt=Bt.length-1;Pe<wt;Pe++)if(Bt[Pe].distanceTo(Bt[Pe+1])<l){Ct=!0;break}if(!Ct)return Bt;const Ke=[];Ke.push(Bt[0]);for(let Pe=1,wt=Bt.length-1;Pe<wt;Pe++)Bt[Pe].distanceTo(Bt[Pe+1])>=l&&Ke.push(Bt[Pe]);return Ke.push(Bt[Bt.length-1]),Ke}}}const gE=(0,d.forwardRef)(function(b,_){var T=b,{src:t,skipFill:r,skipStrokes:o,fillMaterial:l,strokeMaterial:p,fillMeshProps:h,strokeMeshProps:f}=T,A=mn(T,["src","skipFill","skipStrokes","fillMaterial","strokeMaterial","fillMeshProps","strokeMeshProps"]);const B=(0,E.D)(ym,t.startsWith("<svg")?`data:image/svg+xml;utf8,${t}`:t),F=(0,d.useMemo)(()=>o?[]:B.paths.map(P=>{var L;return((L=P.userData)==null?void 0:L.style.stroke)===void 0||P.userData.style.stroke==="none"?null:P.subPaths.map(O=>ym.pointsToStroke(O.getPoints(),P.userData.style))}),[B,o]);return(0,d.useEffect)(()=>()=>F.forEach(P=>P&&P.map(L=>L.dispose())),[F]),d.createElement("object3D",(0,S.Z)({ref:_},A),d.createElement("object3D",{scale:[1,-1,1]},B.paths.map((P,L)=>{var O,G;return d.createElement(d.Fragment,{key:L},!r&&((O=P.userData)==null?void 0:O.style.fill)!==void 0&&P.userData.style.fill!=="none"&&ym.createShapes(P).map((D,k)=>d.createElement("mesh",(0,S.Z)({key:k},h),d.createElement("shapeGeometry",{args:[D]}),d.createElement("meshBasicMaterial",(0,S.Z)({color:P.userData.style.fill,opacity:P.userData.style.fillOpacity,transparent:!0,side:s.DoubleSide,depthWrite:!1},l)))),!o&&((G=P.userData)==null?void 0:G.style.stroke)!==void 0&&P.userData.style.stroke!=="none"&&P.subPaths.map((D,k)=>d.createElement("mesh",(0,S.Z)({key:k,geometry:F[L][k]},f),d.createElement("meshBasicMaterial",(0,S.Z)({color:P.userData.style.stroke,opacity:P.userData.style.strokeOpacity,transparent:!0,side:s.DoubleSide,depthWrite:!1},p)))))})))});var P0=y(25108);const L0=new WeakMap;class mE extends s.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,o,l){const p=new s.FileLoader(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{const f={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(h,f).then(r).catch(l)},o,l)}decodeDracoFile(t,r,o,l){const p={attributeIDs:o||this.defaultAttributeIDs,attributeTypes:l||this.defaultAttributeTypes,useUniqueIDs:!!o};this.decodeGeometry(t,p).then(r)}decodeGeometry(t,r){for(const A in r.attributeTypes){const _=r.attributeTypes[A];_.BYTES_PER_ELEMENT!==void 0&&(r.attributeTypes[A]=_.name)}const o=JSON.stringify(r);if(L0.has(t)){const A=L0.get(t);if(A.key===o)return A.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let l;const p=this.workerNextTaskID++,h=t.byteLength,f=this._getWorker(p,h).then(A=>(l=A,new Promise((_,b)=>{l._callbacks[p]={resolve:_,reject:b},l.postMessage({type:"decode",id:p,taskConfig:r,buffer:t},[t])}))).then(A=>this._createGeometry(A.geometry));return f.catch(()=>!0).then(()=>{l&&p&&this._releaseTask(l,p)}),L0.set(t,{key:o,promise:f}),f}_createGeometry(t){const r=new s.BufferGeometry;t.index&&r.setIndex(new s.BufferAttribute(t.index.array,1));for(let o=0;o<t.attributes.length;o++){const l=t.attributes[o],p=l.name,h=l.array,f=l.itemSize;r.setAttribute(p,new s.BufferAttribute(h,f))}return r}_loadLibrary(t,r){const o=new s.FileLoader(this.manager);return o.setPath(this.decoderPath),o.setResponseType(r),o.setWithCredentials(this.withCredentials),new Promise((l,p)=>{o.load(t,l,void 0,p)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(o=>{const l=o[0];t||(this.decoderConfig.wasmBinary=o[1]);const p=k0.toString(),h=["/* draco decoder */",l,"","/* worker */",p.substring(p.indexOf("{")+1,p.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const l=new Worker(this.workerSourceURL);l._callbacks={},l._taskCosts={},l._taskLoad=0,l.postMessage({type:"init",decoderConfig:this.decoderConfig}),l.onmessage=function(p){const h=p.data;switch(h.type){case"decode":l._callbacks[h.id].resolve(h);break;case"error":l._callbacks[h.id].reject(h);break;default:P0.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(l)}else this.workerPool.sort(function(l,p){return l._taskLoad>p._taskLoad?-1:1});const o=this.workerPool[this.workerPool.length-1];return o._taskCosts[t]=r,o._taskLoad+=r,o})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){P0.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function k0(){let i,t;onmessage=function(h){const f=h.data;switch(f.type){case"init":i=f.decoderConfig,t=new Promise(function(b){i.onModuleLoaded=function(T){b({draco:T})},DracoDecoderModule(i)});break;case"decode":const A=f.buffer,_=f.taskConfig;t.then(b=>{const T=b.draco,B=new T.Decoder,F=new T.DecoderBuffer;F.Init(new Int8Array(A),A.byteLength);try{const P=r(T,B,F,_),L=P.attributes.map(O=>O.array.buffer);P.index&&L.push(P.index.array.buffer),self.postMessage({type:"decode",id:f.id,geometry:P},L)}catch(P){P0.error(P),self.postMessage({type:"error",id:f.id,error:P.message})}finally{T.destroy(F),T.destroy(B)}});break}};function r(h,f,A,_){const b=_.attributeIDs,T=_.attributeTypes;let B,F;const P=f.GetEncodedGeometryType(A);if(P===h.TRIANGULAR_MESH)B=new h.Mesh,F=f.DecodeBufferToMesh(A,B);else if(P===h.POINT_CLOUD)B=new h.PointCloud,F=f.DecodeBufferToPointCloud(A,B);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!F.ok()||B.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+F.error_msg());const L={index:null,attributes:[]};for(const O in b){const G=self[T[O]];let D,k;if(_.useUniqueIDs)k=b[O],D=f.GetAttributeByUniqueId(B,k);else{if(k=f.GetAttributeId(B,h[b[O]]),k===-1)continue;D=f.GetAttribute(B,k)}L.attributes.push(l(h,f,B,O,G,D))}return P===h.TRIANGULAR_MESH&&(L.index=o(h,f,B)),h.destroy(B),L}function o(h,f,A){const b=A.num_faces()*3,T=b*4,B=h._malloc(T);f.GetTrianglesUInt32Array(A,T,B);const F=new Uint32Array(h.HEAPF32.buffer,B,b).slice();return h._free(B),{array:F,itemSize:1}}function l(h,f,A,_,b,T){const B=T.num_components(),P=A.num_points()*B,L=P*b.BYTES_PER_ELEMENT,O=p(h,b),G=h._malloc(L);f.GetAttributeDataArrayForAllPoints(A,T,O,L,G);const D=new b(h.HEAPF32.buffer,G,P).slice();return h._free(G),{name:_,array:D,itemSize:B}}function p(h,f){switch(f){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}let Jf;const Ey=()=>{if(Jf)return Jf;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),o=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let l=i;WebAssembly.validate(r)&&(l=t);let p;const h=WebAssembly.instantiate(f(l),{}).then(T=>{p=T.instance,p.exports.__wasm_call_ctors()});function f(T){const B=new Uint8Array(T.length);for(let P=0;P<T.length;++P){const L=T.charCodeAt(P);B[P]=L>96?L-71:L>64?L-65:L>47?L+4:L>46?63:62}let F=0;for(let P=0;P<T.length;++P)B[F++]=B[P]<60?o[B[P]]:(B[P]-60)*64+B[++P];return B.buffer.slice(0,F)}function A(T,B,F,P,L,O){const G=p.exports.sbrk,D=F+3&-4,k=G(D*P),N=G(L.length),V=new Uint8Array(p.exports.memory.buffer);V.set(L,N);const Q=T(k,F,P,N,L.length);if(Q===0&&O&&O(k,D,P),B.set(V.subarray(k,k+F*P)),G(k-G(0)),Q!==0)throw new Error(`Malformed buffer data: ${Q}`)}const _={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},b={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Jf={ready:h,supported:!0,decodeVertexBuffer(T,B,F,P,L){A(p.exports.meshopt_decodeVertexBuffer,T,B,F,P,p.exports[_[L]])},decodeIndexBuffer(T,B,F,P){A(p.exports.meshopt_decodeIndexBuffer,T,B,F,P)},decodeIndexSequence(T,B,F,P){A(p.exports.meshopt_decodeIndexSequence,T,B,F,P)},decodeGltfBuffer(T,B,F,P,L,O){A(p.exports[b[L]],T,B,F,P,p.exports[_[O]])}},Jf},$v=parseInt(s.REVISION.replace(/\D+/g,""));var Yu=y(25108);class z0 extends s.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new zh(r)}),this.register(function(r){return new _E(r)}),this.register(function(r){return new Nh(r)}),this.register(function(r){return new EE(r)}),this.register(function(r){return new AE(r)}),this.register(function(r){return new Gh(r)}),this.register(function(r){return new vE(r)}),this.register(function(r){return new i2(r)}),this.register(function(r){return new n2(r)}),this.register(function(r){return new Uh(r)}),this.register(function(r){return new r2(r)}),this.register(function(r){return new o2(r)}),this.register(function(r){return new yE(r)}),this.register(function(r){return new bE(r)}),this.register(function(r){return new s2(r)})}load(t,r,o,l){const p=this;let h;this.resourcePath!==""?h=this.resourcePath:this.path!==""?h=this.path:h=s.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);const f=function(_){l?l(_):Yu.error(_),p.manager.itemError(t),p.manager.itemEnd(t)},A=new s.FileLoader(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(t,function(_){try{p.parse(_,h,function(b){r(b),p.manager.itemEnd(t)},f)}catch(b){f(b)}},o,f)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,o,l){let p;const h={},f={};if(typeof t=="string")p=JSON.parse(t);else if(t instanceof ArrayBuffer)if(s.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4)))===G0){try{h[Bi.KHR_BINARY_GLTF]=new xE(t)}catch(b){l&&l(b);return}p=JSON.parse(h[Bi.KHR_BINARY_GLTF].content)}else p=JSON.parse(s.LoaderUtils.decodeText(new Uint8Array(t)));else p=t;if(p.asset===void 0||p.asset.version[0]<2){l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const A=new j0(p,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let _=0;_<this.pluginCallbacks.length;_++){const b=this.pluginCallbacks[_](A);f[b.name]=b,h[b.name]=!0}if(p.extensionsUsed)for(let _=0;_<p.extensionsUsed.length;++_){const b=p.extensionsUsed[_],T=p.extensionsRequired||[];switch(b){case Bi.KHR_MATERIALS_UNLIT:h[b]=new t2;break;case Bi.KHR_DRACO_MESH_COMPRESSION:h[b]=new ME(p,this.dracoLoader);break;case Bi.KHR_TEXTURE_TRANSFORM:h[b]=new CE;break;case Bi.KHR_MESH_QUANTIZATION:h[b]=new SE;break;default:T.indexOf(b)>=0&&f[b]===void 0&&Yu.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}A.setExtensions(h),A.setPlugins(f),A.parse(o,l)}parseAsync(t,r){const o=this;return new Promise(function(l,p){o.parse(t,r,l,p)})}}function e2(){let i={};return{get:function(t){return i[t]},add:function(t,r){i[t]=r},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Bi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class yE{constructor(t){this.parser=t,this.name=Bi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let o=0,l=r.length;o<l;o++){const p=r[o];p.extensions&&p.extensions[this.name]&&p.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,p.extensions[this.name].light)}}_loadLight(t){const r=this.parser,o="light:"+t;let l=r.cache.get(o);if(l)return l;const p=r.json,A=((p.extensions&&p.extensions[this.name]||{}).lights||[])[t];let _;const b=new s.Color(16777215);A.color!==void 0&&b.fromArray(A.color);const T=A.range!==void 0?A.range:0;switch(A.type){case"directional":_=new s.DirectionalLight(b),_.target.position.set(0,0,-1),_.add(_.target);break;case"point":_=new s.PointLight(b),_.distance=T;break;case"spot":_=new s.SpotLight(b),_.distance=T,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,_.angle=A.spot.outerConeAngle,_.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,_.target.position.set(0,0,-1),_.add(_.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return _.position.set(0,0,0),_.decay=2,Ud(_,A),A.intensity!==void 0&&(_.intensity=A.intensity),_.name=r.createUniqueName(A.name||"light_"+t),l=Promise.resolve(_),r.cache.add(o,l),l}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,o=this.parser,p=o.json.nodes[t],f=(p.extensions&&p.extensions[this.name]||{}).light;return f===void 0?null:this._loadLight(f).then(function(A){return o._getNodeRef(r.cache,f,A)})}}class t2{constructor(){this.name=Bi.KHR_MATERIALS_UNLIT}getMaterialType(){return s.MeshBasicMaterial}extendParams(t,r,o){const l=[];t.color=new s.Color(1,1,1),t.opacity=1;const p=r.pbrMetallicRoughness;if(p){if(Array.isArray(p.baseColorFactor)){const h=p.baseColorFactor;t.color.fromArray(h),t.opacity=h[3]}p.baseColorTexture!==void 0&&l.push(o.assignTexture(t,"map",p.baseColorTexture,3001))}return Promise.all(l)}}class n2{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=l.extensions[this.name].emissiveStrength;return p!==void 0&&(r.emissiveIntensity=p),Promise.resolve()}}class zh{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[],h=l.extensions[this.name];if(h.clearcoatFactor!==void 0&&(r.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&p.push(o.assignTexture(r,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&p.push(o.assignTexture(r,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(p.push(o.assignTexture(r,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const f=h.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new s.Vector2(f,f)}return Promise.all(p)}}class r2{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[],h=l.extensions[this.name];return h.iridescenceFactor!==void 0&&(r.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&p.push(o.assignTexture(r,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(r.iridescenceIOR=h.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&p.push(o.assignTexture(r,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(p)}}class AE{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_SHEEN}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[];r.sheenColor=new s.Color(0,0,0),r.sheenRoughness=0,r.sheen=1;const h=l.extensions[this.name];return h.sheenColorFactor!==void 0&&r.sheenColor.fromArray(h.sheenColorFactor),h.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&p.push(o.assignTexture(r,"sheenColorMap",h.sheenColorTexture,3001)),h.sheenRoughnessTexture!==void 0&&p.push(o.assignTexture(r,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(p)}}class Gh{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[],h=l.extensions[this.name];return h.transmissionFactor!==void 0&&(r.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&p.push(o.assignTexture(r,"transmissionMap",h.transmissionTexture)),Promise.all(p)}}class vE{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_VOLUME}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[],h=l.extensions[this.name];r.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&p.push(o.assignTexture(r,"thicknessMap",h.thicknessTexture)),r.attenuationDistance=h.attenuationDistance||1/0;const f=h.attenuationColor||[1,1,1];return r.attenuationColor=new s.Color(f[0],f[1],f[2]),Promise.all(p)}}class i2{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_IOR}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=l.extensions[this.name];return r.ior=p.ior!==void 0?p.ior:1.5,Promise.resolve()}}class Uh{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_SPECULAR}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[],h=l.extensions[this.name];r.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&p.push(o.assignTexture(r,"specularIntensityMap",h.specularTexture));const f=h.specularColorFactor||[1,1,1];return r.specularColor=new s.Color(f[0],f[1],f[2]),h.specularColorTexture!==void 0&&p.push(o.assignTexture(r,"specularColorMap",h.specularColorTexture,3001)),Promise.all(p)}}class o2{constructor(t){this.parser=t,this.name=Bi.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const o=this.parser.json.materials[t];return!o.extensions||!o.extensions[this.name]?null:s.MeshPhysicalMaterial}extendMaterialParams(t,r){const o=this.parser,l=o.json.materials[t];if(!l.extensions||!l.extensions[this.name])return Promise.resolve();const p=[],h=l.extensions[this.name];return h.anisotropyStrength!==void 0&&(r.anisotropy=h.anisotropyStrength),h.anisotropyRotation!==void 0&&(r.anisotropyRotation=h.anisotropyRotation),h.anisotropyTexture!==void 0&&p.push(o.assignTexture(r,"anisotropyMap",h.anisotropyTexture)),Promise.all(p)}}class _E{constructor(t){this.parser=t,this.name=Bi.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,o=r.json,l=o.textures[t];if(!l.extensions||!l.extensions[this.name])return null;const p=l.extensions[this.name],h=r.options.ktx2Loader;if(!h){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,p.source,h)}}class Nh{constructor(t){this.parser=t,this.name=Bi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,o=this.parser,l=o.json,p=l.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],f=l.images[h.source];let A=o.textureLoader;if(f.uri){const _=o.options.manager.getHandler(f.uri);_!==null&&(A=_)}return this.detectSupport().then(function(_){if(_)return o.loadTextureImage(t,h.source,A);if(l.extensionsRequired&&l.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class EE{constructor(t){this.parser=t,this.name=Bi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,o=this.parser,l=o.json,p=l.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],f=l.images[h.source];let A=o.textureLoader;if(f.uri){const _=o.options.manager.getHandler(f.uri);_!==null&&(A=_)}return this.detectSupport().then(function(_){if(_)return o.loadTextureImage(t,h.source,A);if(l.extensionsRequired&&l.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return o.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class bE{constructor(t){this.name=Bi.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,o=r.bufferViews[t];if(o.extensions&&o.extensions[this.name]){const l=o.extensions[this.name],p=this.parser.getDependency("buffer",l.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return p.then(function(f){const A=l.byteOffset||0,_=l.byteLength||0,b=l.count,T=l.byteStride,B=new Uint8Array(f,A,_);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(b,T,B,l.mode,l.filter).then(function(F){return F.buffer}):h.ready.then(function(){const F=new ArrayBuffer(b*T);return h.decodeGltfBuffer(new Uint8Array(F),b,T,B,l.mode,l.filter),F})})}else return null}}class s2{constructor(t){this.name=Bi.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,o=r.nodes[t];if(!o.extensions||!o.extensions[this.name]||o.mesh===void 0)return null;const l=r.meshes[o.mesh];for(const _ of l.primitives)if(_.mode!==Wc.TRIANGLES&&_.mode!==Wc.TRIANGLE_STRIP&&_.mode!==Wc.TRIANGLE_FAN&&_.mode!==void 0)return null;const h=o.extensions[this.name].attributes,f=[],A={};for(const _ in h)f.push(this.parser.getDependency("accessor",h[_]).then(b=>(A[_]=b,A[_])));return f.length<1?null:(f.push(this.parser.createNodeMesh(t)),Promise.all(f).then(_=>{const b=_.pop(),T=b.isGroup?b.children:[b],B=_[0].count,F=[];for(const P of T){const L=new s.Matrix4,O=new s.Vector3,G=new s.Quaternion,D=new s.Vector3(1,1,1),k=new s.InstancedMesh(P.geometry,P.material,B);for(let N=0;N<B;N++)A.TRANSLATION&&O.fromBufferAttribute(A.TRANSLATION,N),A.ROTATION&&G.fromBufferAttribute(A.ROTATION,N),A.SCALE&&D.fromBufferAttribute(A.SCALE,N),k.setMatrixAt(N,L.compose(O,G,D));for(const N in A)N!=="TRANSLATION"&&N!=="ROTATION"&&N!=="SCALE"&&P.geometry.setAttribute(N,A[N]);s.Object3D.prototype.copy.call(k,P),this.parser.assignFinalMaterial(k),F.push(k)}return b.isGroup?(b.clear(),b.add(...F),b):F[0]}))}}const G0="glTF",Am=12,U0={JSON:1313821514,BIN:5130562};class xE{constructor(t){this.name=Bi.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,Am);if(this.header={magic:s.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==G0)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-Am,l=new DataView(t,Am);let p=0;for(;p<o;){const h=l.getUint32(p,!0);p+=4;const f=l.getUint32(p,!0);if(p+=4,f===U0.JSON){const A=new Uint8Array(t,Am+p,h);this.content=s.LoaderUtils.decodeText(A)}else if(f===U0.BIN){const A=Am+p;this.body=t.slice(A,A+h)}p+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ME{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Bi.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const o=this.json,l=this.dracoLoader,p=t.extensions[this.name].bufferView,h=t.extensions[this.name].attributes,f={},A={},_={};for(const b in h){const T=My[b]||b.toLowerCase();f[T]=h[b]}for(const b in t.attributes){const T=My[b]||b.toLowerCase();if(h[b]!==void 0){const B=o.accessors[t.attributes[b]],F=Gi[B.componentType];_[T]=F.name,A[T]=B.normalized===!0}}return r.getDependency("bufferView",p).then(function(b){return new Promise(function(T){l.decodeDracoFile(b,function(B){for(const F in B.attributes){const P=B.attributes[F],L=A[F];L!==void 0&&(P.normalized=L)}T(B)},f,_)})})}}class CE{constructor(){this.name=Bi.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(r.texCoord===void 0||r.texCoord===t.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.texCoord!==void 0&&(t.channel=r.texCoord),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class SE{constructor(){this.name=Bi.KHR_MESH_QUANTIZATION}}class a2 extends s.Interpolant{constructor(t,r,o,l){super(t,r,o,l)}copySampleValue_(t){const r=this.resultBuffer,o=this.sampleValues,l=this.valueSize,p=t*l*3+l;for(let h=0;h!==l;h++)r[h]=o[p+h];return r}interpolate_(t,r,o,l){const p=this.resultBuffer,h=this.sampleValues,f=this.valueSize,A=f*2,_=f*3,b=l-r,T=(o-r)/b,B=T*T,F=B*T,P=t*_,L=P-_,O=-2*F+3*B,G=F-B,D=1-O,k=G-B+T;for(let N=0;N!==f;N++){const V=h[L+N+f],Q=h[L+N+A]*b,K=h[P+N+f],X=h[P+N]*b;p[N]=D*V+k*Q+O*K+G*X}return p}}const wE=new s.Quaternion;class TE extends a2{interpolate_(t,r,o,l){const p=super.interpolate_(t,r,o,l);return wE.fromArray(p).normalize().toArray(p),p}}const Wc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Gi={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},l2={9728:s.NearestFilter,9729:s.LinearFilter,9984:s.NearestMipmapNearestFilter,9985:s.LinearMipmapNearestFilter,9986:s.NearestMipmapLinearFilter,9987:s.LinearMipmapLinearFilter},by={33071:s.ClampToEdgeWrapping,33648:s.MirroredRepeatWrapping,10497:s.RepeatWrapping},xy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},My=$o(jn({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},$v>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),du={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},BE={CUBICSPLINE:void 0,LINEAR:s.InterpolateLinear,STEP:s.InterpolateDiscrete},Cy={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function IE(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new s.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:s.FrontSide})),i.DefaultMaterial}function jh(i,t,r){for(const o in r.extensions)i[o]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[o]=r.extensions[o])}function Ud(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):Yu.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function c2(i,t,r){let o=!1,l=!1,p=!1;for(let _=0,b=t.length;_<b;_++){const T=t[_];if(T.POSITION!==void 0&&(o=!0),T.NORMAL!==void 0&&(l=!0),T.COLOR_0!==void 0&&(p=!0),o&&l&&p)break}if(!o&&!l&&!p)return Promise.resolve(i);const h=[],f=[],A=[];for(let _=0,b=t.length;_<b;_++){const T=t[_];if(o){const B=T.POSITION!==void 0?r.getDependency("accessor",T.POSITION):i.attributes.position;h.push(B)}if(l){const B=T.NORMAL!==void 0?r.getDependency("accessor",T.NORMAL):i.attributes.normal;f.push(B)}if(p){const B=T.COLOR_0!==void 0?r.getDependency("accessor",T.COLOR_0):i.attributes.color;A.push(B)}}return Promise.all([Promise.all(h),Promise.all(f),Promise.all(A)]).then(function(_){const b=_[0],T=_[1],B=_[2];return o&&(i.morphAttributes.position=b),l&&(i.morphAttributes.normal=T),p&&(i.morphAttributes.color=B),i.morphTargetsRelative=!0,i})}function Sy(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let r=0,o=t.weights.length;r<o;r++)i.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(i.morphTargetInfluences.length===r.length){i.morphTargetDictionary={};for(let o=0,l=r.length;o<l;o++)i.morphTargetDictionary[r[o]]=o}else Yu.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function RE(i){let t;const r=i.extensions&&i.extensions[Bi.KHR_DRACO_MESH_COMPRESSION];if(r?t="draco:"+r.bufferView+":"+r.indices+":"+wy(r.attributes):t=i.indices+":"+wy(i.attributes)+":"+i.mode,i.targets!==void 0)for(let o=0,l=i.targets.length;o<l;o++)t+=":"+wy(i.targets[o]);return t}function wy(i){let t="";const r=Object.keys(i).sort();for(let o=0,l=r.length;o<l;o++)t+=r[o]+":"+i[r[o]]+";";return t}function N0(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function FE(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const p2=new s.Matrix4;class j0{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new e2,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let o=!1,l=!1,p=-1;typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"&&(o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,l=navigator.userAgent.indexOf("Firefox")>-1,p=l?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap=="undefined"||o||l&&p<98?this.textureLoader=new s.TextureLoader(this.options.manager):this.textureLoader=new s.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new s.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const o=this,l=this.json,p=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(h){const f={scene:h[0][l.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:l.asset,parser:o,userData:{}};jh(p,f,l),Ud(f,l),Promise.all(o._invokeAll(function(A){return A.afterRoot&&A.afterRoot(f)})).then(function(){t(f)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],o=this.json.meshes||[];for(let l=0,p=r.length;l<p;l++){const h=r[l].joints;for(let f=0,A=h.length;f<A;f++)t[h[f]].isBone=!0}for(let l=0,p=t.length;l<p;l++){const h=t[l];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(o[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,o){if(t.refs[r]<=1)return o;const l=o.clone(),p=(h,f)=>{const A=this.associations.get(h);A!=null&&this.associations.set(f,A);for(const[_,b]of h.children.entries())p(b,f.children[_])};return p(o,l),l.name+="_instance_"+t.uses[r]++,l}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let o=0;o<r.length;o++){const l=t(r[o]);if(l)return l}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const o=[];for(let l=0;l<r.length;l++){const p=t(r[l]);p&&o.push(p)}return o}getDependency(t,r){const o=t+":"+r;let l=this.cache.get(o);if(!l){switch(t){case"scene":l=this.loadScene(r);break;case"node":l=this._invokeOne(function(p){return p.loadNode&&p.loadNode(r)});break;case"mesh":l=this._invokeOne(function(p){return p.loadMesh&&p.loadMesh(r)});break;case"accessor":l=this.loadAccessor(r);break;case"bufferView":l=this._invokeOne(function(p){return p.loadBufferView&&p.loadBufferView(r)});break;case"buffer":l=this.loadBuffer(r);break;case"material":l=this._invokeOne(function(p){return p.loadMaterial&&p.loadMaterial(r)});break;case"texture":l=this._invokeOne(function(p){return p.loadTexture&&p.loadTexture(r)});break;case"skin":l=this.loadSkin(r);break;case"animation":l=this._invokeOne(function(p){return p.loadAnimation&&p.loadAnimation(r)});break;case"camera":l=this.loadCamera(r);break;default:if(l=this._invokeOne(function(p){return p!=this&&p.getDependency&&p.getDependency(t,r)}),!l)throw new Error("Unknown type: "+t);break}this.cache.add(o,l)}return l}getDependencies(t){let r=this.cache.get(t);if(!r){const o=this,l=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(l.map(function(p,h){return o.getDependency(t,h)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],o=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[Bi.KHR_BINARY_GLTF].body);const l=this.options;return new Promise(function(p,h){o.load(s.LoaderUtils.resolveURL(r.uri,l.path),p,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(o){const l=r.byteLength||0,p=r.byteOffset||0;return o.slice(p,p+l)})}loadAccessor(t){const r=this,o=this.json,l=this.json.accessors[t];if(l.bufferView===void 0&&l.sparse===void 0){const h=xy[l.type],f=Gi[l.componentType],A=l.normalized===!0,_=new f(l.count*h);return Promise.resolve(new s.BufferAttribute(_,h,A))}const p=[];return l.bufferView!==void 0?p.push(this.getDependency("bufferView",l.bufferView)):p.push(null),l.sparse!==void 0&&(p.push(this.getDependency("bufferView",l.sparse.indices.bufferView)),p.push(this.getDependency("bufferView",l.sparse.values.bufferView))),Promise.all(p).then(function(h){const f=h[0],A=xy[l.type],_=Gi[l.componentType],b=_.BYTES_PER_ELEMENT,T=b*A,B=l.byteOffset||0,F=l.bufferView!==void 0?o.bufferViews[l.bufferView].byteStride:void 0,P=l.normalized===!0;let L,O;if(F&&F!==T){const G=Math.floor(B/F),D="InterleavedBuffer:"+l.bufferView+":"+l.componentType+":"+G+":"+l.count;let k=r.cache.get(D);k||(L=new _(f,G*F,l.count*F/b),k=new s.InterleavedBuffer(L,F/b),r.cache.add(D,k)),O=new s.InterleavedBufferAttribute(k,A,B%F/b,P)}else f===null?L=new _(l.count*A):L=new _(f,B,l.count*A),O=new s.BufferAttribute(L,A,P);if(l.sparse!==void 0){const G=xy.SCALAR,D=Gi[l.sparse.indices.componentType],k=l.sparse.indices.byteOffset||0,N=l.sparse.values.byteOffset||0,V=new D(h[1],k,l.sparse.count*G),Q=new _(h[2],N,l.sparse.count*A);f!==null&&(O=new s.BufferAttribute(O.array.slice(),O.itemSize,O.normalized));for(let K=0,X=V.length;K<X;K++){const oe=V[K];if(O.setX(oe,Q[K*A]),A>=2&&O.setY(oe,Q[K*A+1]),A>=3&&O.setZ(oe,Q[K*A+2]),A>=4&&O.setW(oe,Q[K*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return O})}loadTexture(t){const r=this.json,o=this.options,p=r.textures[t].source,h=r.images[p];let f=this.textureLoader;if(h.uri){const A=o.manager.getHandler(h.uri);A!==null&&(f=A)}return this.loadTextureImage(t,p,f)}loadTextureImage(t,r,o){const l=this,p=this.json,h=p.textures[t],f=p.images[r],A=(f.uri||f.bufferView)+":"+h.sampler;if(this.textureCache[A])return this.textureCache[A];const _=this.loadImageSource(r,o).then(function(b){b.flipY=!1,b.name=h.name||f.name||"",b.name===""&&typeof f.uri=="string"&&f.uri.startsWith("data:image/")===!1&&(b.name=f.uri);const B=(p.samplers||{})[h.sampler]||{};return b.magFilter=l2[B.magFilter]||s.LinearFilter,b.minFilter=l2[B.minFilter]||s.LinearMipmapLinearFilter,b.wrapS=by[B.wrapS]||s.RepeatWrapping,b.wrapT=by[B.wrapT]||s.RepeatWrapping,l.associations.set(b,{textures:t}),b}).catch(function(){return null});return this.textureCache[A]=_,_}loadImageSource(t,r){const o=this,l=this.json,p=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(T=>T.clone());const h=l.images[t],f=self.URL||self.webkitURL;let A=h.uri||"",_=!1;if(h.bufferView!==void 0)A=o.getDependency("bufferView",h.bufferView).then(function(T){_=!0;const B=new Blob([T],{type:h.mimeType});return A=f.createObjectURL(B),A});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const b=Promise.resolve(A).then(function(T){return new Promise(function(B,F){let P=B;r.isImageBitmapLoader===!0&&(P=function(L){const O=new s.Texture(L);O.needsUpdate=!0,B(O)}),r.load(s.LoaderUtils.resolveURL(T,p.path),P,void 0,F)})}).then(function(T){return _===!0&&f.revokeObjectURL(A),T.userData.mimeType=h.mimeType||FE(h.uri),T}).catch(function(T){throw Yu.error("THREE.GLTFLoader: Couldn't load texture",A),T});return this.sourceCache[t]=b,b}assignTexture(t,r,o,l){const p=this;return this.getDependency("texture",o.index).then(function(h){if(!h)return null;if(o.texCoord!==void 0&&o.texCoord>0&&(h=h.clone(),h.channel=o.texCoord),p.extensions[Bi.KHR_TEXTURE_TRANSFORM]){const f=o.extensions!==void 0?o.extensions[Bi.KHR_TEXTURE_TRANSFORM]:void 0;if(f){const A=p.associations.get(h);h=p.extensions[Bi.KHR_TEXTURE_TRANSFORM].extendTexture(h,f),p.associations.set(h,A)}}return l!==void 0&&("colorSpace"in h?h.colorSpace=l===3001?"srgb":"srgb-linear":h.encoding=l),t[r]=h,h})}assignFinalMaterial(t){const r=t.geometry;let o=t.material;const l=r.attributes.tangent===void 0,p=r.attributes.color!==void 0,h=r.attributes.normal===void 0;if(t.isPoints){const f="PointsMaterial:"+o.uuid;let A=this.cache.get(f);A||(A=new s.PointsMaterial,s.Material.prototype.copy.call(A,o),A.color.copy(o.color),A.map=o.map,A.sizeAttenuation=!1,this.cache.add(f,A)),o=A}else if(t.isLine){const f="LineBasicMaterial:"+o.uuid;let A=this.cache.get(f);A||(A=new s.LineBasicMaterial,s.Material.prototype.copy.call(A,o),A.color.copy(o.color),A.map=o.map,this.cache.add(f,A)),o=A}if(l||p||h){let f="ClonedMaterial:"+o.uuid+":";l&&(f+="derivative-tangents:"),p&&(f+="vertex-colors:"),h&&(f+="flat-shading:");let A=this.cache.get(f);A||(A=o.clone(),p&&(A.vertexColors=!0),h&&(A.flatShading=!0),l&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(f,A),this.associations.set(A,this.associations.get(o))),o=A}t.material=o}getMaterialType(){return s.MeshStandardMaterial}loadMaterial(t){const r=this,o=this.json,l=this.extensions,p=o.materials[t];let h;const f={},A=p.extensions||{},_=[];if(A[Bi.KHR_MATERIALS_UNLIT]){const T=l[Bi.KHR_MATERIALS_UNLIT];h=T.getMaterialType(),_.push(T.extendParams(f,p,r))}else{const T=p.pbrMetallicRoughness||{};if(f.color=new s.Color(1,1,1),f.opacity=1,Array.isArray(T.baseColorFactor)){const B=T.baseColorFactor;f.color.fromArray(B),f.opacity=B[3]}T.baseColorTexture!==void 0&&_.push(r.assignTexture(f,"map",T.baseColorTexture,3001)),f.metalness=T.metallicFactor!==void 0?T.metallicFactor:1,f.roughness=T.roughnessFactor!==void 0?T.roughnessFactor:1,T.metallicRoughnessTexture!==void 0&&(_.push(r.assignTexture(f,"metalnessMap",T.metallicRoughnessTexture)),_.push(r.assignTexture(f,"roughnessMap",T.metallicRoughnessTexture))),h=this._invokeOne(function(B){return B.getMaterialType&&B.getMaterialType(t)}),_.push(Promise.all(this._invokeAll(function(B){return B.extendMaterialParams&&B.extendMaterialParams(t,f)})))}p.doubleSided===!0&&(f.side=s.DoubleSide);const b=p.alphaMode||Cy.OPAQUE;if(b===Cy.BLEND?(f.transparent=!0,f.depthWrite=!1):(f.transparent=!1,b===Cy.MASK&&(f.alphaTest=p.alphaCutoff!==void 0?p.alphaCutoff:.5)),p.normalTexture!==void 0&&h!==s.MeshBasicMaterial&&(_.push(r.assignTexture(f,"normalMap",p.normalTexture)),f.normalScale=new s.Vector2(1,1),p.normalTexture.scale!==void 0)){const T=p.normalTexture.scale;f.normalScale.set(T,T)}return p.occlusionTexture!==void 0&&h!==s.MeshBasicMaterial&&(_.push(r.assignTexture(f,"aoMap",p.occlusionTexture)),p.occlusionTexture.strength!==void 0&&(f.aoMapIntensity=p.occlusionTexture.strength)),p.emissiveFactor!==void 0&&h!==s.MeshBasicMaterial&&(f.emissive=new s.Color().fromArray(p.emissiveFactor)),p.emissiveTexture!==void 0&&h!==s.MeshBasicMaterial&&_.push(r.assignTexture(f,"emissiveMap",p.emissiveTexture,3001)),Promise.all(_).then(function(){const T=new h(f);return p.name&&(T.name=p.name),Ud(T,p),r.associations.set(T,{materials:t}),p.extensions&&jh(l,T,p),T})}createUniqueName(t){const r=s.PropertyBinding.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,o=this.extensions,l=this.primitiveCache;function p(f){return o[Bi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(f,r).then(function(A){return Ty(A,f,r)})}const h=[];for(let f=0,A=t.length;f<A;f++){const _=t[f],b=RE(_),T=l[b];if(T)h.push(T.promise);else{let B;_.extensions&&_.extensions[Bi.KHR_DRACO_MESH_COMPRESSION]?B=p(_):B=Ty(new s.BufferGeometry,_,r),l[b]={primitive:_,promise:B},h.push(B)}}return Promise.all(h)}loadMesh(t){const r=this,o=this.json,l=this.extensions,p=o.meshes[t],h=p.primitives,f=[];for(let A=0,_=h.length;A<_;A++){const b=h[A].material===void 0?IE(this.cache):this.getDependency("material",h[A].material);f.push(b)}return f.push(r.loadGeometries(h)),Promise.all(f).then(function(A){const _=A.slice(0,A.length-1),b=A[A.length-1],T=[];for(let F=0,P=b.length;F<P;F++){const L=b[F],O=h[F];let G;const D=_[F];if(O.mode===Wc.TRIANGLES||O.mode===Wc.TRIANGLE_STRIP||O.mode===Wc.TRIANGLE_FAN||O.mode===void 0)G=p.isSkinnedMesh===!0?new s.SkinnedMesh(L,D):new s.Mesh(L,D),G.isSkinnedMesh===!0&&G.normalizeSkinWeights(),O.mode===Wc.TRIANGLE_STRIP?G.geometry=Sv(G.geometry,s.TriangleStripDrawMode):O.mode===Wc.TRIANGLE_FAN&&(G.geometry=Sv(G.geometry,s.TriangleFanDrawMode));else if(O.mode===Wc.LINES)G=new s.LineSegments(L,D);else if(O.mode===Wc.LINE_STRIP)G=new s.Line(L,D);else if(O.mode===Wc.LINE_LOOP)G=new s.LineLoop(L,D);else if(O.mode===Wc.POINTS)G=new s.Points(L,D);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(G.geometry.morphAttributes).length>0&&Sy(G,p),G.name=r.createUniqueName(p.name||"mesh_"+t),Ud(G,p),O.extensions&&jh(l,G,O),r.assignFinalMaterial(G),T.push(G)}for(let F=0,P=T.length;F<P;F++)r.associations.set(T[F],{meshes:t,primitives:F});if(T.length===1)return p.extensions&&jh(l,T[0],p),T[0];const B=new s.Group;p.extensions&&jh(l,B,p),r.associations.set(B,{meshes:t});for(let F=0,P=T.length;F<P;F++)B.add(T[F]);return B})}loadCamera(t){let r;const o=this.json.cameras[t],l=o[o.type];if(!l){Yu.warn("THREE.GLTFLoader: Missing camera parameters.");return}return o.type==="perspective"?r=new s.PerspectiveCamera(s.MathUtils.radToDeg(l.yfov),l.aspectRatio||1,l.znear||1,l.zfar||2e6):o.type==="orthographic"&&(r=new s.OrthographicCamera(-l.xmag,l.xmag,l.ymag,-l.ymag,l.znear,l.zfar)),o.name&&(r.name=this.createUniqueName(o.name)),Ud(r,o),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],o=[];for(let l=0,p=r.joints.length;l<p;l++)o.push(this._loadNodeShallow(r.joints[l]));return r.inverseBindMatrices!==void 0?o.push(this.getDependency("accessor",r.inverseBindMatrices)):o.push(null),Promise.all(o).then(function(l){const p=l.pop(),h=l,f=[],A=[];for(let _=0,b=h.length;_<b;_++){const T=h[_];if(T){f.push(T);const B=new s.Matrix4;p!==null&&B.fromArray(p.array,_*16),A.push(B)}else Yu.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[_])}return new s.Skeleton(f,A)})}loadAnimation(t){const o=this.json.animations[t],l=o.name?o.name:"animation_"+t,p=[],h=[],f=[],A=[],_=[];for(let b=0,T=o.channels.length;b<T;b++){const B=o.channels[b],F=o.samplers[B.sampler],P=B.target,L=P.node,O=o.parameters!==void 0?o.parameters[F.input]:F.input,G=o.parameters!==void 0?o.parameters[F.output]:F.output;P.node!==void 0&&(p.push(this.getDependency("node",L)),h.push(this.getDependency("accessor",O)),f.push(this.getDependency("accessor",G)),A.push(F),_.push(P))}return Promise.all([Promise.all(p),Promise.all(h),Promise.all(f),Promise.all(A),Promise.all(_)]).then(function(b){const T=b[0],B=b[1],F=b[2],P=b[3],L=b[4],O=[];for(let G=0,D=T.length;G<D;G++){const k=T[G],N=B[G],V=F[G],Q=P[G],K=L[G];if(k===void 0)continue;k.updateMatrix();let X;switch(du[K.path]){case du.weights:X=s.NumberKeyframeTrack;break;case du.rotation:X=s.QuaternionKeyframeTrack;break;case du.position:case du.scale:default:X=s.VectorKeyframeTrack;break}const oe=k.name?k.name:k.uuid,ae=Q.interpolation!==void 0?BE[Q.interpolation]:s.InterpolateLinear,ge=[];du[K.path]===du.weights?k.traverse(function(_e){_e.morphTargetInfluences&&ge.push(_e.name?_e.name:_e.uuid)}):ge.push(oe);let ie=V.array;if(V.normalized){const _e=N0(ie.constructor),me=new Float32Array(ie.length);for(let we=0,ke=ie.length;we<ke;we++)me[we]=ie[we]*_e;ie=me}for(let _e=0,me=ge.length;_e<me;_e++){const we=new X(ge[_e]+"."+du[K.path],N.array,ie,ae);Q.interpolation==="CUBICSPLINE"&&(we.createInterpolant=function(De){const Ne=this instanceof s.QuaternionKeyframeTrack?TE:a2;return new Ne(this.times,this.values,this.getValueSize()/3,De)},we.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),O.push(we)}}return new s.AnimationClip(l,void 0,O)})}createNodeMesh(t){const r=this.json,o=this,l=r.nodes[t];return l.mesh===void 0?null:o.getDependency("mesh",l.mesh).then(function(p){const h=o._getNodeRef(o.meshCache,l.mesh,p);return l.weights!==void 0&&h.traverse(function(f){if(f.isMesh)for(let A=0,_=l.weights.length;A<_;A++)f.morphTargetInfluences[A]=l.weights[A]}),h})}loadNode(t){const r=this.json,o=this,l=r.nodes[t],p=o._loadNodeShallow(t),h=[],f=l.children||[];for(let _=0,b=f.length;_<b;_++)h.push(o.getDependency("node",f[_]));const A=l.skin===void 0?Promise.resolve(null):o.getDependency("skin",l.skin);return Promise.all([p,Promise.all(h),A]).then(function(_){const b=_[0],T=_[1],B=_[2];B!==null&&b.traverse(function(F){F.isSkinnedMesh&&F.bind(B,p2)});for(let F=0,P=T.length;F<P;F++)b.add(T[F]);return b})}_loadNodeShallow(t){const r=this.json,o=this.extensions,l=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const p=r.nodes[t],h=p.name?l.createUniqueName(p.name):"",f=[],A=l._invokeOne(function(_){return _.createNodeMesh&&_.createNodeMesh(t)});return A&&f.push(A),p.camera!==void 0&&f.push(l.getDependency("camera",p.camera).then(function(_){return l._getNodeRef(l.cameraCache,p.camera,_)})),l._invokeAll(function(_){return _.createNodeAttachment&&_.createNodeAttachment(t)}).forEach(function(_){f.push(_)}),this.nodeCache[t]=Promise.all(f).then(function(_){let b;if(p.isBone===!0?b=new s.Bone:_.length>1?b=new s.Group:_.length===1?b=_[0]:b=new s.Object3D,b!==_[0])for(let T=0,B=_.length;T<B;T++)b.add(_[T]);if(p.name&&(b.userData.name=p.name,b.name=h),Ud(b,p),p.extensions&&jh(o,b,p),p.matrix!==void 0){const T=new s.Matrix4;T.fromArray(p.matrix),b.applyMatrix4(T)}else p.translation!==void 0&&b.position.fromArray(p.translation),p.rotation!==void 0&&b.quaternion.fromArray(p.rotation),p.scale!==void 0&&b.scale.fromArray(p.scale);return l.associations.has(b)||l.associations.set(b,{}),l.associations.get(b).nodes=t,b}),this.nodeCache[t]}loadScene(t){const r=this.extensions,o=this.json.scenes[t],l=this,p=new s.Group;o.name&&(p.name=l.createUniqueName(o.name)),Ud(p,o),o.extensions&&jh(r,p,o);const h=o.nodes||[],f=[];for(let A=0,_=h.length;A<_;A++)f.push(l.getDependency("node",h[A]));return Promise.all(f).then(function(A){for(let b=0,T=A.length;b<T;b++)p.add(A[b]);const _=b=>{const T=new Map;for(const[B,F]of l.associations)(B instanceof s.Material||B instanceof s.Texture)&&T.set(B,F);return b.traverse(B=>{const F=l.associations.get(B);F!=null&&T.set(B,F)}),T};return l.associations=_(p),p})}}function OE(i,t,r){const o=t.attributes,l=new s.Box3;if(o.POSITION!==void 0){const f=r.json.accessors[o.POSITION],A=f.min,_=f.max;if(A!==void 0&&_!==void 0){if(l.set(new s.Vector3(A[0],A[1],A[2]),new s.Vector3(_[0],_[1],_[2])),f.normalized){const b=N0(Gi[f.componentType]);l.min.multiplyScalar(b),l.max.multiplyScalar(b)}}else{Yu.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const p=t.targets;if(p!==void 0){const f=new s.Vector3,A=new s.Vector3;for(let _=0,b=p.length;_<b;_++){const T=p[_];if(T.POSITION!==void 0){const B=r.json.accessors[T.POSITION],F=B.min,P=B.max;if(F!==void 0&&P!==void 0){if(A.setX(Math.max(Math.abs(F[0]),Math.abs(P[0]))),A.setY(Math.max(Math.abs(F[1]),Math.abs(P[1]))),A.setZ(Math.max(Math.abs(F[2]),Math.abs(P[2]))),B.normalized){const L=N0(Gi[B.componentType]);A.multiplyScalar(L)}f.max(A)}else Yu.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(f)}i.boundingBox=l;const h=new s.Sphere;l.getCenter(h.center),h.radius=l.min.distanceTo(l.max)/2,i.boundingSphere=h}function Ty(i,t,r){const o=t.attributes,l=[];function p(h,f){return r.getDependency("accessor",h).then(function(A){i.setAttribute(f,A)})}for(const h in o){const f=My[h]||h.toLowerCase();f in i.attributes||l.push(p(o[h],f))}if(t.indices!==void 0&&!i.index){const h=r.getDependency("accessor",t.indices).then(function(f){i.setIndex(f)});l.push(h)}return Ud(i,t),OE(i,t,r),Promise.all(l).then(function(){return t.targets!==void 0?c2(i,t.targets,r):i})}let H0=null,Ku="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function vm(i,t,r){return o=>{r&&r(o),i&&(H0||(H0=new mE),H0.setDecoderPath(typeof i=="string"?i:Ku),o.setDRACOLoader(H0)),t&&o.setMeshoptDecoder(typeof Ey=="function"?Ey():Ey)}}function Hh(i,t=!0,r=!0,o){return(0,E.D)(z0,i,vm(t,r,o))}Hh.preload=(i,t=!0,r=!0,o)=>E.D.preload(z0,i,vm(t,r,o)),Hh.clear=i=>E.D.clear(z0,i),Hh.setDecoderPath=i=>{Ku=i};const DE=d.forwardRef((o,r)=>{var l=o,{src:i}=l,t=mn(l,["src"]);const{scene:p}=Hh(i);return d.createElement(hm,(0,S.Z)({ref:r},t,{object:p}))});class u2{constructor(t,r=" .:-=+*#%@",o={}){const l=o.resolution||.15,p=o.scale||1,h=o.color||!1,f=o.alpha||!1,A=o.block||!1,_=o.invert||!1,b=o.strResolution||"low";let T,B;const F=document.createElement("div");F.style.cursor="default";const P=document.createElement("table");F.appendChild(P);let L,O,G;this.setSize=function(me,we){T=me,B=we,t.setSize(me,we),D()},this.render=function(me,we){t.render(me,we),_e(P)},this.domElement=F;function D(){L=Math.floor(T*l),O=Math.floor(B*l),K.width=L,K.height=O,G=t.domElement,G.style.backgroundColor&&(P.rows[0].cells[0].style.backgroundColor=G.style.backgroundColor,P.rows[0].cells[0].style.color=G.style.color),P.cellSpacing=0,P.cellPadding=0;const me=P.style;me.whiteSpace="pre",me.margin="0px",me.padding="0px",me.letterSpacing=ie+"px",me.fontFamily=V,me.fontSize=ae+"px",me.lineHeight=ge+"px",me.textAlign="left",me.textDecoration="none"}const k=" .,:;i1tfLCG08@".split(""),N=" CGO08@".split(""),V="courier new, monospace",Q=t.domElement,K=document.createElement("canvas");if(!K.getContext)return;const X=K.getContext("2d");if(!X.getImageData)return;let oe=h?N:k;r&&(oe=r);const ae=2/l*p,ge=2/l*p;let ie=0;if(b=="low")switch(p){case 1:ie=-1;break;case 2:case 3:ie=-2.1;break;case 4:ie=-3.1;break;case 5:ie=-4.15;break}if(b=="medium")switch(p){case 1:ie=0;break;case 2:ie=-1;break;case 3:ie=-1.04;break;case 4:case 5:ie=-2.1;break}if(b=="high")switch(p){case 1:case 2:ie=0;break;case 3:case 4:case 5:ie=-1;break}function _e(me){X.clearRect(0,0,L,O),X.drawImage(Q,0,0,L,O);const we=X.getImageData(0,0,L,O).data;let ke="";for(let De=0;De<O;De+=2){for(let Ne=0;Ne<L;Ne++){const Ge=(De*L+Ne)*4,Ye=we[Ge],Se=we[Ge+1],xe=we[Ge+2],Ee=we[Ge+3];let le,ye;ye=(.3*Ye+.59*Se+.11*xe)/255,Ee==0&&(ye=1),le=Math.floor((1-ye)*(oe.length-1)),_&&(le=oe.length-le-1);let Be=oe[le];(Be===void 0||Be==" ")&&(Be="&nbsp;"),h?ke+="<span style='color:rgb("+Ye+","+Se+","+xe+");"+(A?"background-color:rgb("+Ye+","+Se+","+xe+");":"")+(f?"opacity:"+Ee/255+";":"")+"'>"+Be+"</span>":ke+=Be}ke+="<br/>"}me.innerHTML=`<tr><td style="display:block;width:${T}px;height:${B}px;overflow:hidden">${ke}</td></tr>`}}}function PE({renderIndex:i=1,bgColor:t="black",fgColor:r="white",characters:o=" .:-+*=%@#",invert:l=!0,color:p=!1,resolution:h=.15}){const{size:f,gl:A,scene:_,camera:b}=(0,E.z)(),T=d.useMemo(()=>{const B=new u2(A,o,{invert:l,color:p,resolution:h});return B.domElement.style.position="absolute",B.domElement.style.top="0px",B.domElement.style.left="0px",B.domElement.style.pointerEvents="none",B},[o,l,p,h]);return d.useLayoutEffect(()=>{T.domElement.style.color=r,T.domElement.style.backgroundColor=t},[r,t]),d.useEffect(()=>(A.domElement.style.opacity="0",A.domElement.parentNode.appendChild(T.domElement),()=>{A.domElement.style.opacity="1",A.domElement.parentNode.removeChild(T.domElement)}),[T]),d.useEffect(()=>{T.setSize(f.width,f.height)},[T,f]),(0,E.A)(B=>{T.render(_,b)},i),d.createElement(d.Fragment,null)}function Vl(i,t,r){const o=(0,E.z)(F=>F.size),l=(0,E.z)(F=>F.viewport),p=typeof i=="number"?i:o.width*l.dpr,h=typeof t=="number"?t:o.height*l.dpr,B=(typeof i=="number"?r:i)||{},{samples:A=0,depth:_}=B,b=mn(B,["samples","depth"]),T=d.useMemo(()=>{const F=new s.WebGLRenderTarget(p,h,jn({minFilter:s.LinearFilter,magFilter:s.LinearFilter,type:s.HalfFloatType},b));return _&&(F.depthTexture=new s.DepthTexture(p,h,s.FloatType)),F.samples=A,F},[]);return d.useLayoutEffect(()=>{T.setSize(p,h),A&&(T.samples=A)},[A,T,p,h]),d.useEffect(()=>()=>T.dispose(),[]),T}const d2=i=>typeof i=="function",By=d.forwardRef((f,h)=>{var A=f,{envMap:i,resolution:t=256,frames:r=1/0,children:o,makeDefault:l}=A,p=mn(A,["envMap","resolution","frames","children","makeDefault"]);const _=(0,E.z)(({set:D})=>D),b=(0,E.z)(({camera:D})=>D),T=(0,E.z)(({size:D})=>D),B=d.useRef(null),F=d.useRef(null),P=Vl(t);d.useLayoutEffect(()=>{p.manual||B.current.updateProjectionMatrix()},[T,p]),d.useLayoutEffect(()=>{B.current.updateProjectionMatrix()}),d.useLayoutEffect(()=>{if(l){const D=b;return _(()=>({camera:B.current})),()=>_(()=>({camera:D}))}},[B,l,_]);let L=0,O=null;const G=d2(o);return(0,E.A)(D=>{G&&(r===1/0||L<r)&&(F.current.visible=!1,D.gl.setRenderTarget(P),O=D.scene.background,i&&(D.scene.background=i),D.gl.render(D.scene,B.current),D.scene.background=O,D.gl.setRenderTarget(null),F.current.visible=!0,L++)}),d.createElement(d.Fragment,null,d.createElement("orthographicCamera",(0,S.Z)({left:T.width/-2,right:T.width/2,top:T.height/2,bottom:T.height/-2,ref:fr([B,h])},p),!G&&o),d.createElement("group",{ref:F},G&&o(P.texture)))}),LE=i=>typeof i=="function",kE=d.forwardRef((f,h)=>{var A=f,{envMap:i,resolution:t=256,frames:r=1/0,makeDefault:o,children:l}=A,p=mn(A,["envMap","resolution","frames","makeDefault","children"]);const _=(0,E.z)(({set:D})=>D),b=(0,E.z)(({camera:D})=>D),T=(0,E.z)(({size:D})=>D),B=d.useRef(null),F=d.useRef(null),P=Vl(t);d.useLayoutEffect(()=>{p.manual||(B.current.aspect=T.width/T.height)},[T,p]),d.useLayoutEffect(()=>{B.current.updateProjectionMatrix()});let L=0,O=null;const G=LE(l);return(0,E.A)(D=>{G&&(r===1/0||L<r)&&(F.current.visible=!1,D.gl.setRenderTarget(P),O=D.scene.background,i&&(D.scene.background=i),D.gl.render(D.scene,B.current),D.scene.background=O,D.gl.setRenderTarget(null),F.current.visible=!0,L++)}),d.useLayoutEffect(()=>{if(o){const D=b;return _(()=>({camera:B.current})),()=>_(()=>({camera:D}))}},[B,o,_]),d.createElement(d.Fragment,null,d.createElement("perspectiveCamera",(0,S.Z)({ref:fr([B,h])},p),!G&&l),d.createElement("group",{ref:F},G&&l(P.texture)))});function h2({resolution:i=256,near:t=.1,far:r=1e3,envMap:o,fog:l}={}){const p=(0,E.z)(({gl:B})=>B),h=(0,E.z)(({scene:B})=>B),f=(0,d.useMemo)(()=>{const B=new s.WebGLCubeRenderTarget(i);return B.texture.type=s.HalfFloatType,B},[i]);(0,d.useEffect)(()=>()=>{f.dispose()},[f]);const A=(0,d.useMemo)(()=>new s.CubeCamera(t,r,f),[t,r,f]);let _,b;const T=d.useCallback(()=>{_=h.fog,b=h.background,h.background=o||b,h.fog=l||_,A.update(p,h),h.fog=_,h.background=b},[p,h,A]);return{fbo:f,camera:A,update:T}}function f2(A){var _=A,{children:i,frames:t=1/0,resolution:r,near:o,far:l,envMap:p,fog:h}=_,f=mn(_,["children","frames","resolution","near","far","envMap","fog"]);const b=d.useRef(null),{fbo:T,camera:B,update:F}=h2({resolution:r,near:o,far:l,envMap:p,fog:h});let P=0;return(0,E.A)(()=>{b.current&&(t===1/0||P<t)&&(b.current.visible=!1,F(),b.current.visible=!0,P++)}),d.createElement("group",f,d.createElement("primitive",{object:B}),d.createElement("group",{ref:b},i(T.texture)))}var W0=y(25108),g2=Object.defineProperty,zE=(i,t,r)=>t in i?g2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Ps=(i,t,r)=>(zE(i,typeof t!="symbol"?t+"":t,r),r);class Ls extends s.EventDispatcher{constructor(t){super(),Ps(this,"object"),Ps(this,"changeEvent",{type:"change"}),Ps(this,"EPS",1e-6),Ps(this,"enabled",!0),Ps(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),Ps(this,"screenOrientation",0),Ps(this,"alphaOffset",0),Ps(this,"onDeviceOrientationChangeEvent",r=>{this.deviceOrientation=r}),Ps(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),Ps(this,"zee",new s.Vector3(0,0,1)),Ps(this,"euler",new s.Euler),Ps(this,"q0",new s.Quaternion),Ps(this,"q1",new s.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5))),Ps(this,"setObjectQuaternion",(r,o,l,p,h)=>{this.euler.set(l,o,-p,"YXZ"),r.setFromEuler(this.euler),r.multiply(this.q1),r.multiply(this.q0.setFromAxisAngle(this.zee,-h))}),Ps(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(r=>{r=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(r=>{W0.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",r)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),Ps(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),Ps(this,"lastQuaternion",new s.Quaternion),Ps(this,"update",()=>{if(this.enabled===!1)return;const r=this.deviceOrientation;if(r){const o=r.alpha?s.MathUtils.degToRad(r.alpha)+this.alphaOffset:0,l=r.beta?s.MathUtils.degToRad(r.beta):0,p=r.gamma?s.MathUtils.degToRad(r.gamma):0,h=this.screenOrientation?s.MathUtils.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,o,l,p,h),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),Ps(this,"dispose",()=>this.disconnect()),this.object=t,this.object.rotation.reorder("YXZ"),this.connect()}}const GE=d.forwardRef((i,t)=>{const B=i,{camera:r,onChange:o,makeDefault:l}=B,p=mn(B,["camera","onChange","makeDefault"]),h=(0,E.z)(F=>F.camera),f=(0,E.z)(F=>F.invalidate),A=(0,E.z)(F=>F.get),_=(0,E.z)(F=>F.set),b=r||h,T=d.useMemo(()=>new Ls(b),[b]);return d.useEffect(()=>{const F=P=>{f(),o&&o(P)};return T==null||T.addEventListener==null||T.addEventListener("change",F),()=>T==null||T.removeEventListener==null?void 0:T.removeEventListener("change",F)},[o,T,f]),(0,E.A)(()=>T==null?void 0:T.update(),-1),d.useEffect(()=>{const F=T;return F==null||F.connect(),()=>F==null?void 0:F.dispose()},[T]),d.useEffect(()=>{if(l){const F=A().controls;return _({controls:T}),()=>_({controls:F})}},[l,T]),T?d.createElement("primitive",(0,S.Z)({ref:t,object:T},p)):null});var Ks=Object.defineProperty,V0=(i,t,r)=>t in i?Ks(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Lo=(i,t,r)=>(V0(i,typeof t!="symbol"?t+"":t,r),r);function m2(i){i.preventDefault()}class UE extends s.EventDispatcher{constructor(t,r){super(),Lo(this,"object"),Lo(this,"domElement",null),Lo(this,"movementSpeed",1),Lo(this,"rollSpeed",.005),Lo(this,"dragToLook",!1),Lo(this,"autoForward",!1),Lo(this,"changeEvent",{type:"change"}),Lo(this,"EPS",1e-6),Lo(this,"tmpQuaternion",new s.Quaternion),Lo(this,"mouseStatus",0),Lo(this,"movementSpeedMultiplier",1),Lo(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),Lo(this,"moveVector",new s.Vector3(0,0,0)),Lo(this,"rotationVector",new s.Vector3(0,0,0)),Lo(this,"keydown",o=>{if(!o.altKey){switch(o.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),Lo(this,"keyup",o=>{switch(o.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),Lo(this,"pointerdown",o=>{if(this.dragToLook)this.mouseStatus++;else{switch(o.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),Lo(this,"pointermove",o=>{if(!this.dragToLook||this.mouseStatus>0){const l=this.getContainerDimensions(),p=l.size[0]/2,h=l.size[1]/2;this.moveState.yawLeft=-(o.pageX-l.offset[0]-p)/p,this.moveState.pitchDown=(o.pageY-l.offset[1]-h)/h,this.updateRotationVector()}}),Lo(this,"pointerup",o=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(o.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),Lo(this,"lastQuaternion",new s.Quaternion),Lo(this,"lastPosition",new s.Vector3),Lo(this,"update",o=>{const l=o*this.movementSpeed,p=o*this.rollSpeed;this.object.translateX(this.moveVector.x*l),this.object.translateY(this.moveVector.y*l),this.object.translateZ(this.moveVector.z*l),this.tmpQuaternion.set(this.rotationVector.x*p,this.rotationVector.y*p,this.rotationVector.z*p,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),Lo(this,"updateMovementVector",()=>{const o=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-o+this.moveState.back}),Lo(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),Lo(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),Lo(this,"connect",o=>{this.domElement=o,o&&!(o instanceof Document)&&o.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",m2),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),Lo(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",m2),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=t,r!==void 0&&this.connect(r),this.updateMovementVector(),this.updateRotationVector()}}const y2=d.forwardRef((o,r)=>{var l=o,{domElement:i}=l,t=mn(l,["domElement"]);const O=t,{onChange:p,makeDefault:h}=O,f=mn(O,["onChange","makeDefault"]),A=(0,E.z)(G=>G.invalidate),_=(0,E.z)(G=>G.camera),b=(0,E.z)(G=>G.gl),T=(0,E.z)(G=>G.events),B=(0,E.z)(G=>G.get),F=(0,E.z)(G=>G.set),P=i||T.connected||b.domElement,L=d.useMemo(()=>new UE(_),[_]);return d.useEffect(()=>(L.connect(P),()=>void L.dispose()),[P,L,A]),d.useEffect(()=>{const G=D=>{A(),p&&p(D)};return L.addEventListener==null||L.addEventListener("change",G),()=>L.removeEventListener==null?void 0:L.removeEventListener("change",G)},[p,A]),d.useEffect(()=>{if(h){const G=B().controls;return F({controls:L}),()=>F({controls:G})}},[h,L]),(0,E.A)((G,D)=>L.update(D)),d.createElement("primitive",(0,S.Z)({ref:r,object:L,args:[_,P]},f))});var Nd=y(25108),Iy=Object.defineProperty,NE=(i,t,r)=>t in i?Iy(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,di=(i,t,r)=>(NE(i,typeof t!="symbol"?t+"":t,r),r);const Q0=new s.Ray,C=new s.Plane,e=Math.cos(70*(Math.PI/180)),c=(i,t)=>(i%t+t)%t;class g extends s.EventDispatcher{constructor(t,r){super(),di(this,"object"),di(this,"domElement"),di(this,"enabled",!0),di(this,"target",new s.Vector3),di(this,"minDistance",0),di(this,"maxDistance",1/0),di(this,"minZoom",0),di(this,"maxZoom",1/0),di(this,"minPolarAngle",0),di(this,"maxPolarAngle",Math.PI),di(this,"minAzimuthAngle",-1/0),di(this,"maxAzimuthAngle",1/0),di(this,"enableDamping",!1),di(this,"dampingFactor",.05),di(this,"enableZoom",!0),di(this,"zoomSpeed",1),di(this,"enableRotate",!0),di(this,"rotateSpeed",1),di(this,"enablePan",!0),di(this,"panSpeed",1),di(this,"screenSpacePanning",!0),di(this,"keyPanSpeed",7),di(this,"zoomToCursor",!1),di(this,"autoRotate",!1),di(this,"autoRotateSpeed",2),di(this,"reverseOrbit",!1),di(this,"reverseHorizontalOrbit",!1),di(this,"reverseVerticalOrbit",!1),di(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),di(this,"mouseButtons",{LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN}),di(this,"touches",{ONE:s.TOUCH.ROTATE,TWO:s.TOUCH.DOLLY_PAN}),di(this,"target0"),di(this,"position0"),di(this,"zoom0"),di(this,"_domElementKeyEvents",null),di(this,"getPolarAngle"),di(this,"getAzimuthalAngle"),di(this,"setPolarAngle"),di(this,"setAzimuthalAngle"),di(this,"getDistance"),di(this,"listenToKeyEvents"),di(this,"stopListenToKeyEvents"),di(this,"saveState"),di(this,"reset"),di(this,"update"),di(this,"connect"),di(this,"dispose"),this.object=t,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>b.phi,this.getAzimuthalAngle=()=>b.theta,this.setPolarAngle=ft=>{let an=c(ft,2*Math.PI),Un=b.phi;Un<0&&(Un+=2*Math.PI),an<0&&(an+=2*Math.PI);let ar=Math.abs(an-Un);2*Math.PI-ar<ar&&(an<Un?an+=2*Math.PI:Un+=2*Math.PI),T.phi=an-Un,o.update()},this.setAzimuthalAngle=ft=>{let an=c(ft,2*Math.PI),Un=b.theta;Un<0&&(Un+=2*Math.PI),an<0&&(an+=2*Math.PI);let ar=Math.abs(an-Un);2*Math.PI-ar<ar&&(an<Un?an+=2*Math.PI:Un+=2*Math.PI),T.theta=an-Un,o.update()},this.getDistance=()=>o.object.position.distanceTo(o.target),this.listenToKeyEvents=ft=>{ft.addEventListener("keydown",yr),this._domElementKeyEvents=ft},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",yr),this._domElementKeyEvents=null},this.saveState=()=>{o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=()=>{o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(l),o.update(),A=f.NONE},this.update=(()=>{const ft=new s.Vector3,an=new s.Vector3(0,1,0),Un=new s.Quaternion().setFromUnitVectors(t.up,an),ar=Un.clone().invert(),fn=new s.Vector3,qi=new s.Quaternion,ys=2*Math.PI;return function(){const Tp=o.object.position;Un.setFromUnitVectors(t.up,an),ar.copy(Un).invert(),ft.copy(Tp).sub(o.target),ft.applyQuaternion(Un),b.setFromVector3(ft),o.autoRotate&&A===f.NONE&&me(ie()),o.enableDamping?(b.theta+=T.theta*o.dampingFactor,b.phi+=T.phi*o.dampingFactor):(b.theta+=T.theta,b.phi+=T.phi);let Us=o.minAzimuthAngle,Ts=o.maxAzimuthAngle;isFinite(Us)&&isFinite(Ts)&&(Us<-Math.PI?Us+=ys:Us>Math.PI&&(Us-=ys),Ts<-Math.PI?Ts+=ys:Ts>Math.PI&&(Ts-=ys),Us<=Ts?b.theta=Math.max(Us,Math.min(Ts,b.theta)):b.theta=b.theta>(Us+Ts)/2?Math.max(Us,b.theta):Math.min(Ts,b.theta)),b.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,b.phi)),b.makeSafe(),o.enableDamping===!0?o.target.addScaledVector(F,o.dampingFactor):o.target.add(F),o.zoomToCursor&&oe||o.object.isOrthographicCamera?b.radius=xe(b.radius):b.radius=xe(b.radius*B),ft.setFromSpherical(b),ft.applyQuaternion(ar),Tp.copy(o.target).add(ft),o.object.lookAt(o.target),o.enableDamping===!0?(T.theta*=1-o.dampingFactor,T.phi*=1-o.dampingFactor,F.multiplyScalar(1-o.dampingFactor)):(T.set(0,0,0),F.set(0,0,0));let ko=!1;if(o.zoomToCursor&&oe){let Bp=null;if(o.object instanceof s.PerspectiveCamera&&o.object.isPerspectiveCamera){const zo=ft.length();Bp=xe(zo*B);const Go=zo-Bp;o.object.position.addScaledVector(K,Go),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){const zo=new s.Vector3(X.x,X.y,0);zo.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/B)),o.object.updateProjectionMatrix(),ko=!0;const Go=new s.Vector3(X.x,X.y,0);Go.unproject(o.object),o.object.position.sub(Go).add(zo),o.object.updateMatrixWorld(),Bp=ft.length()}else Nd.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),o.zoomToCursor=!1;Bp!==null&&(o.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(Bp).add(o.object.position):(Q0.origin.copy(o.object.position),Q0.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(Q0.direction))<e?t.lookAt(o.target):(C.setFromNormalAndCoplanarPoint(o.object.up,o.target),Q0.intersectPlane(C,o.target))))}else o.object instanceof s.OrthographicCamera&&o.object.isOrthographicCamera&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/B)),o.object.updateProjectionMatrix(),ko=!0);return B=1,oe=!1,ko||fn.distanceToSquared(o.object.position)>_||8*(1-qi.dot(o.object.quaternion))>_?(o.dispatchEvent(l),fn.copy(o.object.position),qi.copy(o.object.quaternion),ko=!1,!0):!1}})(),this.connect=ft=>{ft===document&&Nd.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.domElement=ft,o.domElement.style.touchAction="none",o.domElement.addEventListener("contextmenu",so),o.domElement.addEventListener("pointerdown",Gt),o.domElement.addEventListener("pointercancel",xr),o.domElement.addEventListener("wheel",Mi)},this.dispose=()=>{var ft,an,Un,ar,fn,qi;(ft=o.domElement)==null||ft.removeEventListener("contextmenu",so),(an=o.domElement)==null||an.removeEventListener("pointerdown",Gt),(Un=o.domElement)==null||Un.removeEventListener("pointercancel",xr),(ar=o.domElement)==null||ar.removeEventListener("wheel",Mi),(fn=o.domElement)==null||fn.ownerDocument.removeEventListener("pointermove",kn),(qi=o.domElement)==null||qi.ownerDocument.removeEventListener("pointerup",tr),o._domElementKeyEvents!==null&&o._domElementKeyEvents.removeEventListener("keydown",yr)};const o=this,l={type:"change"},p={type:"start"},h={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let A=f.NONE;const _=1e-6,b=new s.Spherical,T=new s.Spherical;let B=1;const F=new s.Vector3,P=new s.Vector2,L=new s.Vector2,O=new s.Vector2,G=new s.Vector2,D=new s.Vector2,k=new s.Vector2,N=new s.Vector2,V=new s.Vector2,Q=new s.Vector2,K=new s.Vector3,X=new s.Vector2;let oe=!1;const ae=[],ge={};function ie(){return 2*Math.PI/60/60*o.autoRotateSpeed}function _e(){return Math.pow(.95,o.zoomSpeed)}function me(ft){o.reverseOrbit||o.reverseHorizontalOrbit?T.theta+=ft:T.theta-=ft}function we(ft){o.reverseOrbit||o.reverseVerticalOrbit?T.phi+=ft:T.phi-=ft}const ke=(()=>{const ft=new s.Vector3;return function(Un,ar){ft.setFromMatrixColumn(ar,0),ft.multiplyScalar(-Un),F.add(ft)}})(),De=(()=>{const ft=new s.Vector3;return function(Un,ar){o.screenSpacePanning===!0?ft.setFromMatrixColumn(ar,1):(ft.setFromMatrixColumn(ar,0),ft.crossVectors(o.object.up,ft)),ft.multiplyScalar(Un),F.add(ft)}})(),Ne=(()=>{const ft=new s.Vector3;return function(Un,ar){const fn=o.domElement;if(fn&&o.object instanceof s.PerspectiveCamera&&o.object.isPerspectiveCamera){const qi=o.object.position;ft.copy(qi).sub(o.target);let ys=ft.length();ys*=Math.tan(o.object.fov/2*Math.PI/180),ke(2*Un*ys/fn.clientHeight,o.object.matrix),De(2*ar*ys/fn.clientHeight,o.object.matrix)}else fn&&o.object instanceof s.OrthographicCamera&&o.object.isOrthographicCamera?(ke(Un*(o.object.right-o.object.left)/o.object.zoom/fn.clientWidth,o.object.matrix),De(ar*(o.object.top-o.object.bottom)/o.object.zoom/fn.clientHeight,o.object.matrix)):(Nd.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}})();function Ge(ft){o.object instanceof s.PerspectiveCamera&&o.object.isPerspectiveCamera||o.object instanceof s.OrthographicCamera&&o.object.isOrthographicCamera?B/=ft:(Nd.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function Ye(ft){o.object instanceof s.PerspectiveCamera&&o.object.isPerspectiveCamera||o.object instanceof s.OrthographicCamera&&o.object.isOrthographicCamera?B*=ft:(Nd.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function Se(ft){if(!o.zoomToCursor||!o.domElement)return;oe=!0;const an=o.domElement.getBoundingClientRect(),Un=ft.clientX-an.left,ar=ft.clientY-an.top,fn=an.width,qi=an.height;X.x=Un/fn*2-1,X.y=-(ar/qi)*2+1,K.set(X.x,X.y,1).unproject(o.object).sub(o.object.position).normalize()}function xe(ft){return Math.max(o.minDistance,Math.min(o.maxDistance,ft))}function Ee(ft){P.set(ft.clientX,ft.clientY)}function le(ft){Se(ft),N.set(ft.clientX,ft.clientY)}function ye(ft){G.set(ft.clientX,ft.clientY)}function Be(ft){L.set(ft.clientX,ft.clientY),O.subVectors(L,P).multiplyScalar(o.rotateSpeed);const an=o.domElement;an&&(me(2*Math.PI*O.x/an.clientHeight),we(2*Math.PI*O.y/an.clientHeight)),P.copy(L),o.update()}function be(ft){V.set(ft.clientX,ft.clientY),Q.subVectors(V,N),Q.y>0?Ge(_e()):Q.y<0&&Ye(_e()),N.copy(V),o.update()}function je(ft){D.set(ft.clientX,ft.clientY),k.subVectors(D,G).multiplyScalar(o.panSpeed),Ne(k.x,k.y),G.copy(D),o.update()}function Et(ft){Se(ft),ft.deltaY<0?Ye(_e()):ft.deltaY>0&&Ge(_e()),o.update()}function Ft(ft){let an=!1;switch(ft.code){case o.keys.UP:Ne(0,o.keyPanSpeed),an=!0;break;case o.keys.BOTTOM:Ne(0,-o.keyPanSpeed),an=!0;break;case o.keys.LEFT:Ne(o.keyPanSpeed,0),an=!0;break;case o.keys.RIGHT:Ne(-o.keyPanSpeed,0),an=!0;break}an&&(ft.preventDefault(),o.update())}function Tt(){if(ae.length==1)P.set(ae[0].pageX,ae[0].pageY);else{const ft=.5*(ae[0].pageX+ae[1].pageX),an=.5*(ae[0].pageY+ae[1].pageY);P.set(ft,an)}}function pt(){if(ae.length==1)G.set(ae[0].pageX,ae[0].pageY);else{const ft=.5*(ae[0].pageX+ae[1].pageX),an=.5*(ae[0].pageY+ae[1].pageY);G.set(ft,an)}}function cn(){const ft=ae[0].pageX-ae[1].pageX,an=ae[0].pageY-ae[1].pageY,Un=Math.sqrt(ft*ft+an*an);N.set(0,Un)}function Bt(){o.enableZoom&&cn(),o.enablePan&&pt()}function Ct(){o.enableZoom&&cn(),o.enableRotate&&Tt()}function Ke(ft){if(ae.length==1)L.set(ft.pageX,ft.pageY);else{const Un=Xr(ft),ar=.5*(ft.pageX+Un.x),fn=.5*(ft.pageY+Un.y);L.set(ar,fn)}O.subVectors(L,P).multiplyScalar(o.rotateSpeed);const an=o.domElement;an&&(me(2*Math.PI*O.x/an.clientHeight),we(2*Math.PI*O.y/an.clientHeight)),P.copy(L)}function Pe(ft){if(ae.length==1)D.set(ft.pageX,ft.pageY);else{const an=Xr(ft),Un=.5*(ft.pageX+an.x),ar=.5*(ft.pageY+an.y);D.set(Un,ar)}k.subVectors(D,G).multiplyScalar(o.panSpeed),Ne(k.x,k.y),G.copy(D)}function wt(ft){const an=Xr(ft),Un=ft.pageX-an.x,ar=ft.pageY-an.y,fn=Math.sqrt(Un*Un+ar*ar);V.set(0,fn),Q.set(0,Math.pow(V.y/N.y,o.zoomSpeed)),Ge(Q.y),N.copy(V)}function pn(ft){o.enableZoom&&wt(ft),o.enablePan&&Pe(ft)}function un(ft){o.enableZoom&&wt(ft),o.enableRotate&&Ke(ft)}function Gt(ft){var an,Un;o.enabled!==!1&&(ae.length===0&&((an=o.domElement)==null||an.ownerDocument.addEventListener("pointermove",kn),(Un=o.domElement)==null||Un.ownerDocument.addEventListener("pointerup",tr)),li(ft),ft.pointerType==="touch"?Or(ft):sr(ft))}function kn(ft){o.enabled!==!1&&(ft.pointerType==="touch"?Si(ft):bi(ft))}function tr(ft){var an,Un,ar;no(ft),ae.length===0&&((an=o.domElement)==null||an.releasePointerCapture(ft.pointerId),(Un=o.domElement)==null||Un.ownerDocument.removeEventListener("pointermove",kn),(ar=o.domElement)==null||ar.ownerDocument.removeEventListener("pointerup",tr)),o.dispatchEvent(h),A=f.NONE}function xr(ft){no(ft)}function sr(ft){let an;switch(ft.button){case 0:an=o.mouseButtons.LEFT;break;case 1:an=o.mouseButtons.MIDDLE;break;case 2:an=o.mouseButtons.RIGHT;break;default:an=-1}switch(an){case s.MOUSE.DOLLY:if(o.enableZoom===!1)return;le(ft),A=f.DOLLY;break;case s.MOUSE.ROTATE:if(ft.ctrlKey||ft.metaKey||ft.shiftKey){if(o.enablePan===!1)return;ye(ft),A=f.PAN}else{if(o.enableRotate===!1)return;Ee(ft),A=f.ROTATE}break;case s.MOUSE.PAN:if(ft.ctrlKey||ft.metaKey||ft.shiftKey){if(o.enableRotate===!1)return;Ee(ft),A=f.ROTATE}else{if(o.enablePan===!1)return;ye(ft),A=f.PAN}break;default:A=f.NONE}A!==f.NONE&&o.dispatchEvent(p)}function bi(ft){if(o.enabled!==!1)switch(A){case f.ROTATE:if(o.enableRotate===!1)return;Be(ft);break;case f.DOLLY:if(o.enableZoom===!1)return;be(ft);break;case f.PAN:if(o.enablePan===!1)return;je(ft);break}}function Mi(ft){o.enabled===!1||o.enableZoom===!1||A!==f.NONE&&A!==f.ROTATE||(ft.preventDefault(),o.dispatchEvent(p),Et(ft),o.dispatchEvent(h))}function yr(ft){o.enabled===!1||o.enablePan===!1||Ft(ft)}function Or(ft){switch(Hr(ft),ae.length){case 1:switch(o.touches.ONE){case s.TOUCH.ROTATE:if(o.enableRotate===!1)return;Tt(),A=f.TOUCH_ROTATE;break;case s.TOUCH.PAN:if(o.enablePan===!1)return;pt(),A=f.TOUCH_PAN;break;default:A=f.NONE}break;case 2:switch(o.touches.TWO){case s.TOUCH.DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;Bt(),A=f.TOUCH_DOLLY_PAN;break;case s.TOUCH.DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;Ct(),A=f.TOUCH_DOLLY_ROTATE;break;default:A=f.NONE}break;default:A=f.NONE}A!==f.NONE&&o.dispatchEvent(p)}function Si(ft){switch(Hr(ft),A){case f.TOUCH_ROTATE:if(o.enableRotate===!1)return;Ke(ft),o.update();break;case f.TOUCH_PAN:if(o.enablePan===!1)return;Pe(ft),o.update();break;case f.TOUCH_DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;pn(ft),o.update();break;case f.TOUCH_DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;un(ft),o.update();break;default:A=f.NONE}}function so(ft){o.enabled!==!1&&ft.preventDefault()}function li(ft){ae.push(ft)}function no(ft){delete ge[ft.pointerId];for(let an=0;an<ae.length;an++)if(ae[an].pointerId==ft.pointerId){ae.splice(an,1);return}}function Hr(ft){let an=ge[ft.pointerId];an===void 0&&(an=new s.Vector2,ge[ft.pointerId]=an),an.set(ft.pageX,ft.pageY)}function Xr(ft){const an=ft.pointerId===ae[0].pointerId?ae[1]:ae[0];return ge[an.pointerId]}r!==void 0&&this.connect(r),this.update()}}class v extends g{constructor(t,r){super(t,r),this.screenSpacePanning=!1,this.mouseButtons.LEFT=s.MOUSE.PAN,this.mouseButtons.RIGHT=s.MOUSE.ROTATE,this.touches.ONE=s.TOUCH.PAN,this.touches.TWO=s.TOUCH.DOLLY_ROTATE}}const M=d.forwardRef((i={enableDamping:!0},t)=>{const D=i,{domElement:r,camera:o,makeDefault:l,onChange:p,onStart:h,onEnd:f}=D,A=mn(D,["domElement","camera","makeDefault","onChange","onStart","onEnd"]),_=(0,E.z)(k=>k.invalidate),b=(0,E.z)(k=>k.camera),T=(0,E.z)(k=>k.gl),B=(0,E.z)(k=>k.events),F=(0,E.z)(k=>k.set),P=(0,E.z)(k=>k.get),L=r||B.connected||T.domElement,O=o||b,G=d.useMemo(()=>new v(O),[O]);return d.useEffect(()=>{G.connect(L);const k=N=>{_(),p&&p(N)};return G.addEventListener("change",k),h&&G.addEventListener("start",h),f&&G.addEventListener("end",f),()=>{G.dispose(),G.removeEventListener("change",k),h&&G.removeEventListener("start",h),f&&G.removeEventListener("end",f)}},[p,h,f,G,_,L]),d.useEffect(()=>{if(l){const k=P().controls;return F({controls:G}),()=>F({controls:k})}},[l,G]),(0,E.A)(()=>G.update(),-1),d.createElement("primitive",(0,S.Z)({ref:t,object:G,enableDamping:!0},A))}),I=d.forwardRef((T,b)=>{var B=T,{makeDefault:i,camera:t,regress:r,domElement:o,enableDamping:l=!0,keyEvents:p=!1,onChange:h,onStart:f,onEnd:A}=B,_=mn(B,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);const F=(0,E.z)(X=>X.invalidate),P=(0,E.z)(X=>X.camera),L=(0,E.z)(X=>X.gl),O=(0,E.z)(X=>X.events),G=(0,E.z)(X=>X.setEvents),D=(0,E.z)(X=>X.set),k=(0,E.z)(X=>X.get),N=(0,E.z)(X=>X.performance),V=t||P,Q=o||O.connected||L.domElement,K=d.useMemo(()=>new g(V),[V]);return(0,E.A)(()=>{K.enabled&&K.update()},-1),d.useEffect(()=>(p&&K.connect(p===!0?Q:p),K.connect(Q),()=>void K.dispose()),[p,Q,r,K,F]),d.useEffect(()=>{const X=ge=>{F(),r&&N.regress(),h&&h(ge)},oe=ge=>{f&&f(ge)},ae=ge=>{A&&A(ge)};return K.addEventListener("change",X),K.addEventListener("start",oe),K.addEventListener("end",ae),()=>{K.removeEventListener("start",oe),K.removeEventListener("end",ae),K.removeEventListener("change",X)}},[h,f,A,K,F,G]),d.useEffect(()=>{if(i){const X=k().controls;return D({controls:K}),()=>D({controls:X})}},[i,K]),d.createElement("primitive",(0,S.Z)({ref:b,object:K,enableDamping:l},_))});var R=y(25108),z=Object.defineProperty,j=(i,t,r)=>t in i?z(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,W=(i,t,r)=>(j(i,typeof t!="symbol"?t+"":t,r),r);class q extends s.EventDispatcher{constructor(t,r){super(),W(this,"enabled",!0),W(this,"screen",{left:0,top:0,width:0,height:0}),W(this,"rotateSpeed",1),W(this,"zoomSpeed",1.2),W(this,"panSpeed",.3),W(this,"noRotate",!1),W(this,"noZoom",!1),W(this,"noPan",!1),W(this,"staticMoving",!1),W(this,"dynamicDampingFactor",.2),W(this,"minDistance",0),W(this,"maxDistance",1/0),W(this,"keys",["KeyA","KeyS","KeyD"]),W(this,"mouseButtons",{LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN}),W(this,"object"),W(this,"domElement"),W(this,"cursorZoom",!1),W(this,"target",new s.Vector3),W(this,"mousePosition",new s.Vector2),W(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),W(this,"EPS",1e-6),W(this,"lastZoom",1),W(this,"lastPosition",new s.Vector3),W(this,"cursorVector",new s.Vector3),W(this,"targetVector",new s.Vector3),W(this,"_state",this.STATE.NONE),W(this,"_keyState",this.STATE.NONE),W(this,"_eye",new s.Vector3),W(this,"_movePrev",new s.Vector2),W(this,"_moveCurr",new s.Vector2),W(this,"_lastAxis",new s.Vector3),W(this,"_lastAngle",0),W(this,"_zoomStart",new s.Vector2),W(this,"_zoomEnd",new s.Vector2),W(this,"_touchZoomDistanceStart",0),W(this,"_touchZoomDistanceEnd",0),W(this,"_panStart",new s.Vector2),W(this,"_panEnd",new s.Vector2),W(this,"target0"),W(this,"position0"),W(this,"up0"),W(this,"zoom0"),W(this,"changeEvent",{type:"change"}),W(this,"startEvent",{type:"start"}),W(this,"endEvent",{type:"end"}),W(this,"onScreenVector",new s.Vector2),W(this,"getMouseOnScreen",(o,l)=>(this.onScreenVector.set((o-this.screen.left)/this.screen.width,(l-this.screen.top)/this.screen.height),this.onScreenVector)),W(this,"onCircleVector",new s.Vector2),W(this,"getMouseOnCircle",(o,l)=>(this.onCircleVector.set((o-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-l))/this.screen.width),this.onCircleVector)),W(this,"axis",new s.Vector3),W(this,"quaternion",new s.Quaternion),W(this,"eyeDirection",new s.Vector3),W(this,"objectUpDirection",new s.Vector3),W(this,"objectSidewaysDirection",new s.Vector3),W(this,"moveDirection",new s.Vector3),W(this,"angle",0),W(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),W(this,"zoomCamera",()=>{let o;if(this._state===this.STATE.TOUCH_ZOOM_PAN)o=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(o):this.object.isOrthographicCamera?(this.object.zoom/=o,this.object.updateProjectionMatrix()):R.warn("THREE.TrackballControls: Unsupported camera type");else{if(o=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(o-1)>this.EPS&&o>0&&(this.object.isPerspectiveCamera?(o>1&&this._eye.length()>=this.maxDistance-this.EPS&&(o=1),this._eye.multiplyScalar(o)):this.object.isOrthographicCamera?(o>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(o=1),this.object.zoom/=o):R.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let l=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(l,this.target,o)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),W(this,"mouseChange",new s.Vector2),W(this,"objectUp",new s.Vector3),W(this,"pan",new s.Vector3),W(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const o=this.object,l=(o.right-o.left)/this.object.zoom,p=(o.top-o.bottom)/this.object.zoom;this.mouseChange.x*=l,this.mouseChange.y*=p}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),W(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),W(this,"handleResize",()=>{if(!this.domElement)return;const o=this.domElement.getBoundingClientRect(),l=this.domElement.ownerDocument.documentElement;this.screen.left=o.left+window.pageXOffset-l.clientLeft,this.screen.top=o.top+window.pageYOffset-l.clientTop,this.screen.width=o.width,this.screen.height=o.height}),W(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):R.warn("THREE.TrackballControls: Unsupported camera type")}),W(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),W(this,"keydown",o=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(o.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:o.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:o.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),W(this,"onPointerDown",o=>{if(this.enabled!==!1)switch(o.pointerType){case"mouse":case"pen":this.onMouseDown(o);break}}),W(this,"onPointerMove",o=>{if(this.enabled!==!1)switch(o.pointerType){case"mouse":case"pen":this.onMouseMove(o);break}}),W(this,"onPointerUp",o=>{if(this.enabled!==!1)switch(o.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),W(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),W(this,"onMouseDown",o=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(o.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break;default:this._state=this.STATE.NONE}const l=this._keyState!==this.STATE.NONE?this._keyState:this._state;l===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(o.pageX,o.pageY)),this._movePrev.copy(this._moveCurr)):l===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(o.pageX,o.pageY)),this._zoomEnd.copy(this._zoomStart)):l===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(o.pageX,o.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),W(this,"onMouseMove",o=>{if(this.enabled===!1)return;const l=this._keyState!==this.STATE.NONE?this._keyState:this._state;l===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(o.pageX,o.pageY))):l===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(o.pageX,o.pageY)):l===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(o.pageX,o.pageY))}),W(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),W(this,"mousewheel",o=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(o.preventDefault(),o.deltaMode){case 2:this._zoomStart.y-=o.deltaY*.025;break;case 1:this._zoomStart.y-=o.deltaY*.01;break;default:this._zoomStart.y-=o.deltaY*25e-5;break}this.mousePosition.x=o.offsetX/this.screen.width*2-1,this.mousePosition.y=-(o.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),W(this,"touchstart",o=>{if(this.enabled!==!1){switch(o.preventDefault(),o.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(o.touches[0].pageX,o.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const l=o.touches[0].pageX-o.touches[1].pageX,p=o.touches[0].pageY-o.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(l*l+p*p);const h=(o.touches[0].pageX+o.touches[1].pageX)/2,f=(o.touches[0].pageY+o.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(h,f)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),W(this,"touchmove",o=>{if(this.enabled!==!1)switch(o.preventDefault(),o.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(o.touches[0].pageX,o.touches[0].pageY));break;default:const l=o.touches[0].pageX-o.touches[1].pageX,p=o.touches[0].pageY-o.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(l*l+p*p);const h=(o.touches[0].pageX+o.touches[1].pageX)/2,f=(o.touches[0].pageY+o.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(h,f));break}}),W(this,"touchend",o=>{if(this.enabled!==!1){switch(o.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(o.touches[0].pageX,o.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),W(this,"contextmenu",o=>{this.enabled!==!1&&o.preventDefault()}),W(this,"connect",o=>{o===document&&R.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=o,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),W(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,r!==void 0&&this.connect(r),this.update()}}const Z=d.forwardRef((_,A)=>{var b=_,{makeDefault:i,camera:t,domElement:r,regress:o,onChange:l,onStart:p,onEnd:h}=b,f=mn(b,["makeDefault","camera","domElement","regress","onChange","onStart","onEnd"]);const{invalidate:T,camera:B,gl:F,events:P,set:L,get:O,performance:G,viewport:D}=(0,E.z)(),k=t||B,N=r||P.connected||F.domElement,V=d.useMemo(()=>new q(k),[k]);return(0,E.A)(()=>{V.enabled&&V.update()},-1),d.useEffect(()=>(V.connect(N),()=>void V.dispose()),[N,o,V,T]),d.useEffect(()=>{const Q=K=>{T(),o&&G.regress(),l&&l(K)};return V.addEventListener("change",Q),p&&V.addEventListener("start",p),h&&V.addEventListener("end",h),()=>{p&&V.removeEventListener("start",p),h&&V.removeEventListener("end",h),V.removeEventListener("change",Q)}},[l,p,h,V,T]),d.useEffect(()=>{V.handleResize()},[D]),d.useEffect(()=>{if(i){const Q=O().controls;return L({controls:V}),()=>L({controls:Q})}},[i,V]),d.createElement("primitive",(0,S.Z)({ref:A,object:V},f))});var ne=y(25108),se=Object.defineProperty,fe=(i,t,r)=>t in i?se(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$=(i,t,r)=>(fe(i,typeof t!="symbol"?t+"":t,r),r);const ee={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},ve={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},ue={x:0,y:0},Ce={camera:new s.Matrix4,gizmos:new s.Matrix4},Oe={type:"change"},We={type:"start"},Ze={type:"end"};class ht extends s.EventDispatcher{constructor(t,r=null,o=null){super(),$(this,"camera"),$(this,"domElement"),$(this,"scene"),$(this,"mouseActions"),$(this,"_mouseOp"),$(this,"_v2_1"),$(this,"_v3_1"),$(this,"_v3_2"),$(this,"_m4_1"),$(this,"_m4_2"),$(this,"_quat"),$(this,"_translationMatrix"),$(this,"_rotationMatrix"),$(this,"_scaleMatrix"),$(this,"_rotationAxis"),$(this,"_cameraMatrixState"),$(this,"_cameraProjectionState"),$(this,"_fovState"),$(this,"_upState"),$(this,"_zoomState"),$(this,"_nearPos"),$(this,"_farPos"),$(this,"_gizmoMatrixState"),$(this,"_up0"),$(this,"_zoom0"),$(this,"_fov0"),$(this,"_initialNear"),$(this,"_nearPos0"),$(this,"_initialFar"),$(this,"_farPos0"),$(this,"_cameraMatrixState0"),$(this,"_gizmoMatrixState0"),$(this,"_button"),$(this,"_touchStart"),$(this,"_touchCurrent"),$(this,"_input"),$(this,"_switchSensibility"),$(this,"_startFingerDistance"),$(this,"_currentFingerDistance"),$(this,"_startFingerRotation"),$(this,"_currentFingerRotation"),$(this,"_devPxRatio"),$(this,"_downValid"),$(this,"_nclicks"),$(this,"_downEvents"),$(this,"_clickStart"),$(this,"_maxDownTime"),$(this,"_maxInterval"),$(this,"_posThreshold"),$(this,"_movementThreshold"),$(this,"_currentCursorPosition"),$(this,"_startCursorPosition"),$(this,"_grid"),$(this,"_gridPosition"),$(this,"_gizmos"),$(this,"_curvePts"),$(this,"_timeStart"),$(this,"_animationId"),$(this,"focusAnimationTime"),$(this,"_timePrev"),$(this,"_timeCurrent"),$(this,"_anglePrev"),$(this,"_angleCurrent"),$(this,"_cursorPosPrev"),$(this,"_cursorPosCurr"),$(this,"_wPrev"),$(this,"_wCurr"),$(this,"adjustNearFar"),$(this,"scaleFactor"),$(this,"dampingFactor"),$(this,"wMax"),$(this,"enableAnimations"),$(this,"enableGrid"),$(this,"cursorZoom"),$(this,"minFov"),$(this,"maxFov"),$(this,"enabled"),$(this,"enablePan"),$(this,"enableRotate"),$(this,"enableZoom"),$(this,"minDistance"),$(this,"maxDistance"),$(this,"minZoom"),$(this,"maxZoom"),$(this,"target"),$(this,"_currentTarget"),$(this,"_tbRadius"),$(this,"_state"),$(this,"onWindowResize",()=>{const l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const _=this.calculateTbRadius(this.camera);_!==void 0&&(this._tbRadius=_)}const p=this._tbRadius/l,f=new s.EllipseCurve(0,0,p,p).getPoints(this._curvePts),A=new s.BufferGeometry().setFromPoints(f);for(const _ in this._gizmos.children){const b=this._gizmos.children[_];b.geometry=A}this.dispatchEvent(Oe)}),$(this,"onContextMenu",l=>{if(this.enabled){for(let p=0;p<this.mouseActions.length;p++)if(this.mouseActions[p].mouse==2){l.preventDefault();break}}}),$(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=ve.NONE}),$(this,"onPointerDown",l=>{if(l.button==0&&l.isPrimary?(this._downValid=!0,this._downEvents.push(l)):this._downValid=!1,l.pointerType=="touch"&&this._input!=ve.CURSOR)switch(this._touchStart.push(l),this._touchCurrent.push(l),this._input){case ve.NONE:this._input=ve.ONE_FINGER,this.onSinglePanStart(l,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case ve.ONE_FINGER:case ve.ONE_FINGER_SWITCHED:this._input=ve.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case ve.TWO_FINGER:this._input=ve.MULT_FINGER,this.onTriplePanStart();break}else if(l.pointerType!="touch"&&this._input==ve.NONE){let p=null;l.ctrlKey||l.metaKey?p="CTRL":l.shiftKey&&(p="SHIFT"),this._mouseOp=this.getOpFromAction(l.button,p),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=ve.CURSOR,this._button=l.button,this.onSinglePanStart(l,this._mouseOp))}}),$(this,"onPointerMove",l=>{if(l.pointerType=="touch"&&this._input!=ve.CURSOR)switch(this._input){case ve.ONE_FINGER:this.updateTouchEvent(l),this.onSinglePanMove(l,ee.ROTATE);break;case ve.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],l)*this._devPxRatio>=this._switchSensibility){this._input=ve.ONE_FINGER,this.updateTouchEvent(l),this.onSinglePanStart(l,"ROTATE");break}break;case ve.TWO_FINGER:this.updateTouchEvent(l),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case ve.MULT_FINGER:this.updateTouchEvent(l),this.onTriplePanMove();break}else if(l.pointerType!="touch"&&this._input==ve.CURSOR){let p=null;l.ctrlKey||l.metaKey?p="CTRL":l.shiftKey&&(p="SHIFT");const h=this.getOpStateFromAction(this._button,p);h&&this.onSinglePanMove(l,h)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],l)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),$(this,"onPointerUp",l=>{if(l.pointerType=="touch"&&this._input!=ve.CURSOR){const p=this._touchCurrent.length;for(let h=0;h<p;h++)if(this._touchCurrent[h].pointerId==l.pointerId){this._touchCurrent.splice(h,1),this._touchStart.splice(h,1);break}switch(this._input){case ve.ONE_FINGER:case ve.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=ve.NONE,this.onSinglePanEnd();break;case ve.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=ve.ONE_FINGER_SWITCHED;break;case ve.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=ve.NONE,this.onTriplePanEnd());break}}else l.pointerType!="touch"&&this._input==ve.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=ve.NONE,this.onSinglePanEnd(),this._button=-1);if(l.isPrimary)if(this._downValid)if(l.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const h=l.timeStamp-this._clickStart,f=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;h<=this._maxInterval&&f<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(l)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),$(this,"onWheel",l=>{var p,h;if(this.enabled&&this.enableZoom&&this.domElement){let f=null;l.ctrlKey||l.metaKey?f="CTRL":l.shiftKey&&(f="SHIFT");const A=this.getOpFromAction("WHEEL",f);if(A){l.preventDefault(),this.dispatchEvent(We);const _=125;let b=l.deltaY/_,T=1;switch(b>0?T=1/this.scaleFactor:b<0&&(T=this.scaleFactor),A){case"ZOOM":if(this.updateTbState(ee.SCALE,!0),b>0?T=1/Math.pow(this.scaleFactor,b):b<0&&(T=Math.pow(this.scaleFactor,-b)),this.cursorZoom&&this.enablePan){let B;this.camera instanceof s.OrthographicCamera&&(B=(p=this.unprojectOnTbPlane(this.camera,l.clientX,l.clientY,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof s.PerspectiveCamera&&(B=(h=this.unprojectOnTbPlane(this.camera,l.clientX,l.clientY,this.domElement))==null?void 0:h.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),B!==void 0&&this.applyTransformMatrix(this.applyScale(T,B))}else this.applyTransformMatrix(this.applyScale(T,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Oe),this.dispatchEvent(Ze);break;case"FOV":if(this.camera instanceof s.PerspectiveCamera){this.updateTbState(ee.FOV,!0),l.deltaX!=0&&(b=l.deltaX/_,T=1,b>0?T=1/Math.pow(this.scaleFactor,b):b<0&&(T=Math.pow(this.scaleFactor,-b))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const B=this._v3_1.distanceTo(this._gizmos.position);let F=B/T;F=s.MathUtils.clamp(F,this.minDistance,this.maxDistance);const P=B*Math.tan(s.MathUtils.DEG2RAD*this.camera.fov*.5);let L=s.MathUtils.RAD2DEG*(Math.atan(P/F)*2);L>this.maxFov?L=this.maxFov:L<this.minFov&&(L=this.minFov);const O=P/Math.tan(s.MathUtils.DEG2RAD*(L/2));T=B/O,this.setFov(L),this.applyTransformMatrix(this.applyScale(T,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Oe),this.dispatchEvent(Ze);break}}}}),$(this,"onSinglePanStart",(l,p)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(We),this.setCenter(l.clientX,l.clientY),p){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Oe)),this.camera){this.updateTbState(ee.PAN,!0);const h=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement);h!==void 0&&this._startCursorPosition.copy(h),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(Oe))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(ee.ROTATE,!0);const h=this.unprojectOnTbSurface(this.camera,ue.x,ue.y,this.domElement,this._tbRadius);h!==void 0&&this._startCursorPosition.copy(h),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(Oe);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof s.PerspectiveCamera&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Oe)),this.updateTbState(ee.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(Oe)),this.updateTbState(ee.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),$(this,"onSinglePanMove",(l,p)=>{if(this.enabled&&this.domElement){const h=p!=this._state;switch(this.setCenter(l.clientX,l.clientY),p){case ee.PAN:if(this.enablePan&&this.camera)if(h){this.dispatchEvent(Ze),this.dispatchEvent(We),this.updateTbState(p,!0);const f=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement);f!==void 0&&this._startCursorPosition.copy(f),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const f=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement);f!==void 0&&this._currentCursorPosition.copy(f),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case ee.ROTATE:if(this.enableRotate&&this.camera)if(h){this.dispatchEvent(Ze),this.dispatchEvent(We),this.updateTbState(p,!0);const f=this.unprojectOnTbSurface(this.camera,ue.x,ue.y,this.domElement,this._tbRadius);f!==void 0&&this._startCursorPosition.copy(f),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const f=this.unprojectOnTbSurface(this.camera,ue.x,ue.y,this.domElement,this._tbRadius);f!==void 0&&this._currentCursorPosition.copy(f);const A=this._startCursorPosition.distanceTo(this._currentCursorPosition),_=this._startCursorPosition.angleTo(this._currentCursorPosition),b=Math.max(A/this._tbRadius,_);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),b)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=b,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case ee.SCALE:if(this.enableZoom)if(h)this.dispatchEvent(Ze),this.dispatchEvent(We),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5);const A=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;A<0?_=1/Math.pow(this.scaleFactor,-A*8):A>0&&(_=Math.pow(this.scaleFactor,A*8)),this.applyTransformMatrix(this.applyScale(_,this._gizmos.position))}break;case ee.FOV:if(this.enableZoom&&this.camera instanceof s.PerspectiveCamera)if(h)this.dispatchEvent(Ze),this.dispatchEvent(We),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5);const A=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;A<0?_=1/Math.pow(this.scaleFactor,-A*8):A>0&&(_=Math.pow(this.scaleFactor,A*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const b=this._v3_1.distanceTo(this._gizmos.position);let T=b/_;T=s.MathUtils.clamp(T,this.minDistance,this.maxDistance);const B=b*Math.tan(s.MathUtils.DEG2RAD*this._fovState*.5);let F=s.MathUtils.RAD2DEG*(Math.atan(B/T)*2);F=s.MathUtils.clamp(F,this.minFov,this.maxFov);const P=B/Math.tan(s.MathUtils.DEG2RAD*(F/2));_=b/P,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(_,this._v3_2,!1));const L=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(P/b);this._m4_1.makeTranslation(L.x,L.y,L.z)}break}this.dispatchEvent(Oe)}}),$(this,"onSinglePanEnd",()=>{if(this._state==ee.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const p=Math.abs((this._wPrev+this._wCurr)/2),h=this;this._animationId=window.requestAnimationFrame(function(f){h.updateTbState(ee.ANIMATION_ROTATE,!0);const A=h.calculateRotationAxis(h._cursorPosPrev,h._cursorPosCurr);h.onRotationAnim(f,A,Math.min(p,h.wMax))})}else this.updateTbState(ee.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Oe);else this.updateTbState(ee.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Oe)}else(this._state==ee.PAN||this._state==ee.IDLE)&&(this.updateTbState(ee.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(Oe));this.dispatchEvent(Ze)}),$(this,"onDoubleTap",l=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(We),this.setCenter(l.clientX,l.clientY);const p=this.unprojectOnObj(this.getCursorNDC(ue.x,ue.y,this.domElement),this.camera);if(p&&this.enableAnimations){const h=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(f){h.updateTbState(ee.ANIMATION_FOCUS,!0),h.onFocusAnim(f,p,h._cameraMatrixState,h._gizmoMatrixState)})}else p&&!this.enableAnimations&&(this.updateTbState(ee.FOCUS,!0),this.focus(p,this.scaleFactor),this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Oe))}this.dispatchEvent(Ze)}),$(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(We),this.updateTbState(ee.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const l=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement,!0);l!==void 0&&this._startCursorPosition.copy(l),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),$(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=ee.PAN&&(this.updateTbState(ee.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const l=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement,!0);l!==void 0&&this._currentCursorPosition.copy(l),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(Oe)}}),$(this,"onDoublePanEnd",()=>{this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Ze)}),$(this,"onRotateStart",()=>{var l;this.enabled&&this.enableRotate&&(this.dispatchEvent(We),this.updateTbState(ee.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(l=this.camera)==null||l.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),$(this,"onRotateMove",()=>{var l;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let p;this._state!=ee.ZROTATE&&(this.updateTbState(ee.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),p=(l=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement))==null?void 0:l.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):p=new s.Vector3().setFromMatrixPosition(this._gizmoMatrixState);const h=s.MathUtils.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);p!==void 0&&this.applyTransformMatrix(this.zRotate(p,h)),this.dispatchEvent(Oe)}}),$(this,"onRotateEnd",()=>{this.updateTbState(ee.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Ze)}),$(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(We),this.updateTbState(ee.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),$(this,"onPinchMove",()=>{var l,p;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const h=12;this._state!=ee.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(ee.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),h*this._devPxRatio);const f=this._currentFingerDistance/this._startFingerDistance;let A;this.enablePan?this.camera instanceof s.OrthographicCamera?A=(l=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement))==null?void 0:l.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof s.PerspectiveCamera&&(A=(p=this.unprojectOnTbPlane(this.camera,ue.x,ue.y,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):A=this._gizmos.position,A!==void 0&&this.applyTransformMatrix(this.applyScale(f,A)),this.dispatchEvent(Oe)}}),$(this,"onPinchEnd",()=>{this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Ze)}),$(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(We),this.updateTbState(ee.SCALE,!0);let l=0,p=0;const h=this._touchCurrent.length;for(let f=0;f<h;f++)l+=this._touchCurrent[f].clientX,p+=this._touchCurrent[f].clientY;this.setCenter(l/h,p/h),this._startCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),$(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let l=0,p=0;const h=this._touchCurrent.length;for(let O=0;O<h;O++)l+=this._touchCurrent[O].clientX,p+=this._touchCurrent[O].clientY;this.setCenter(l/h,p/h);const f=8;this._currentCursorPosition.setY(this.getCursorNDC(ue.x,ue.y,this.domElement).y*.5);const A=this._currentCursorPosition.y-this._startCursorPosition.y;let _=1;A<0?_=1/Math.pow(this.scaleFactor,-A*f):A>0&&(_=Math.pow(this.scaleFactor,A*f)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const b=this._v3_1.distanceTo(this._gizmos.position);let T=b/_;T=s.MathUtils.clamp(T,this.minDistance,this.maxDistance);const B=b*Math.tan(s.MathUtils.DEG2RAD*this._fovState*.5);let F=s.MathUtils.RAD2DEG*(Math.atan(B/T)*2);F=s.MathUtils.clamp(F,this.minFov,this.maxFov);const P=B/Math.tan(s.MathUtils.DEG2RAD*(F/2));_=b/P,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(_,this._v3_2,!1));const L=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(P/b);this._m4_1.makeTranslation(L.x,L.y,L.z),this.dispatchEvent(Oe)}}),$(this,"onTriplePanEnd",()=>{this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Ze)}),$(this,"setCenter",(l,p)=>{ue.x=l,ue.y=p}),$(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),$(this,"setMouseAction",(l,p,h=null)=>{const f=["PAN","ROTATE","ZOOM","FOV"],A=[0,1,2,"WHEEL"],_=["CTRL","SHIFT",null];let b;if(!f.includes(l)||!A.includes(p)||!_.includes(h)||p=="WHEEL"&&l!="ZOOM"&&l!="FOV")return!1;switch(l){case"PAN":b=ee.PAN;break;case"ROTATE":b=ee.ROTATE;break;case"ZOOM":b=ee.SCALE;break;case"FOV":b=ee.FOV;break}const T={operation:l,mouse:p,key:h,state:b};for(let B=0;B<this.mouseActions.length;B++)if(this.mouseActions[B].mouse==T.mouse&&this.mouseActions[B].key==T.key)return this.mouseActions.splice(B,1,T),!0;return this.mouseActions.push(T),!0}),$(this,"getOpFromAction",(l,p)=>{let h;for(let f=0;f<this.mouseActions.length;f++)if(h=this.mouseActions[f],h.mouse==l&&h.key==p)return h.operation;if(p){for(let f=0;f<this.mouseActions.length;f++)if(h=this.mouseActions[f],h.mouse==l&&h.key==null)return h.operation}return null}),$(this,"getOpStateFromAction",(l,p)=>{let h;for(let f=0;f<this.mouseActions.length;f++)if(h=this.mouseActions[f],h.mouse==l&&h.key==p)return h.state;if(p){for(let f=0;f<this.mouseActions.length;f++)if(h=this.mouseActions[f],h.mouse==l&&h.key==null)return h.state}return null}),$(this,"getAngle",(l,p)=>Math.atan2(p.clientY-l.clientY,p.clientX-l.clientX)*180/Math.PI),$(this,"updateTouchEvent",l=>{for(let p=0;p<this._touchCurrent.length;p++)if(this._touchCurrent[p].pointerId==l.pointerId){this._touchCurrent.splice(p,1,l);break}}),$(this,"calculateAngularSpeed",(l,p,h,f)=>{const A=p-l,_=(f-h)/1e3;return _==0?0:A/_}),$(this,"calculatePointersDistance",(l,p)=>Math.sqrt(Math.pow(p.clientX-l.clientX,2)+Math.pow(p.clientY-l.clientY,2))),$(this,"calculateRotationAxis",(l,p)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(l,p).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),$(this,"calculateTbRadius",l=>{const h=l.position.distanceTo(this._gizmos.position);if(l instanceof s.PerspectiveCamera){const f=s.MathUtils.DEG2RAD*l.fov*.5,A=Math.atan(l.aspect*Math.tan(f));return Math.tan(Math.min(f,A))*h*.67}else if(l instanceof s.OrthographicCamera)return Math.min(l.top,l.right)*.67}),$(this,"focus",(l,p,h=1)=>{if(this.camera){const f=l.clone();f.sub(this._gizmos.position).multiplyScalar(h),this._translationMatrix.makeTranslation(f.x,f.y,f.z);const A=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const _=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(p,this._gizmos.position)),this._gizmoMatrixState.copy(A),this._cameraMatrixState.copy(_)}}),$(this,"drawGrid",()=>{if(this.scene){let h,f,A,_;if(this.camera instanceof s.OrthographicCamera){const b=this.camera.right-this.camera.left,T=this.camera.bottom-this.camera.top;A=Math.max(b,T),_=A/20,h=A/this.camera.zoom*3,f=h/_*this.camera.zoom}else if(this.camera instanceof s.PerspectiveCamera){const b=this.camera.position.distanceTo(this._gizmos.position),T=s.MathUtils.DEG2RAD*this.camera.fov*.5,B=Math.atan(this.camera.aspect*Math.tan(T));A=Math.tan(Math.max(T,B))*b*2,_=A/20,h=A*3,f=h/_}this._grid==null&&this.camera&&(this._grid=new s.GridHelper(h,f,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),$(this,"connect",l=>{l===document&&ne.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=l,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),$(this,"dispose",()=>{var l,p,h,f,A;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(l=this.domElement)==null||l.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointercancel",this.onPointerCancel),(h=this.domElement)==null||h.removeEventListener("wheel",this.onWheel),(f=this.domElement)==null||f.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(A=this.scene)==null||A.remove(this._gizmos),this.disposeGrid()}),$(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),$(this,"easeOutCubic",l=>1-Math.pow(1-l,3)),$(this,"activateGizmos",l=>{for(const p of this._gizmos.children)p.material.setValues({opacity:l?1:.6})}),$(this,"getCursorNDC",(l,p,h)=>{const f=h.getBoundingClientRect();return this._v2_1.setX((l-f.left)/f.width*2-1),this._v2_1.setY((f.bottom-p)/f.height*2-1),this._v2_1.clone()}),$(this,"getCursorPosition",(l,p,h)=>(this._v2_1.copy(this.getCursorNDC(l,p,h)),this.camera instanceof s.OrthographicCamera&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),$(this,"setCamera",l=>{if(l){l.lookAt(this.target),l.updateMatrix(),l instanceof s.PerspectiveCamera&&(this._fov0=l.fov,this._fovState=l.fov),this._cameraMatrixState0.copy(l.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(l.projectionMatrix),this._zoom0=l.zoom,this._zoomState=this._zoom0,this._initialNear=l.near,this._nearPos0=l.position.distanceTo(this.target)-l.near,this._nearPos=this._initialNear,this._initialFar=l.far,this._farPos0=l.position.distanceTo(this.target)-l.far,this._farPos=this._initialFar,this._up0.copy(l.up),this._upState.copy(l.up),this.camera=l,this.camera.updateProjectionMatrix();const p=this.calculateTbRadius(l);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius)}}),$(this,"makeGizmos",(l,p)=>{const f=new s.EllipseCurve(0,0,p,p).getPoints(this._curvePts),A=new s.BufferGeometry().setFromPoints(f),_=new s.LineBasicMaterial({color:16744576,fog:!1,transparent:!0,opacity:.6}),b=new s.LineBasicMaterial({color:8454016,fog:!1,transparent:!0,opacity:.6}),T=new s.LineBasicMaterial({color:8421631,fog:!1,transparent:!0,opacity:.6}),B=new s.Line(A,_),F=new s.Line(A,b),P=new s.Line(A,T),L=Math.PI*.5;if(B.rotation.x=L,F.rotation.y=L,this._gizmoMatrixState0.identity().setPosition(l),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const O=1/this.camera.zoom;this._scaleMatrix.makeScale(O,O,O),this._translationMatrix.makeTranslation(-l.x,-l.y,-l.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(l.x,l.y,l.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(B),this._gizmos.add(F),this._gizmos.add(P)}),$(this,"onFocusAnim",(l,p,h,f)=>{if(this._timeStart==-1&&(this._timeStart=l),this._state==ee.ANIMATION_FOCUS){const _=(l-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(f),_>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,this.scaleFactor),this._timeStart=-1,this.updateTbState(ee.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Oe);else{const b=this.easeOutCubic(_),T=1-b+this.scaleFactor*b;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,T,b),this.dispatchEvent(Oe);const B=this;this._animationId=window.requestAnimationFrame(function(F){B.onFocusAnim(F,p,h,f.clone())})}}else this._animationId=-1,this._timeStart=-1}),$(this,"onRotationAnim",(l,p,h)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=l),this._state==ee.ANIMATION_ROTATE){const f=(l-this._timeStart)/1e3;if(h+-this.dampingFactor*f>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(f,2)+h*f+0,this.applyTransformMatrix(this.rotate(p,this._angleCurrent)),this.dispatchEvent(Oe);const _=this;this._animationId=window.requestAnimationFrame(function(b){_.onRotationAnim(b,p,h)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(ee.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Oe)}else this._animationId=-1,this._timeStart=-1,this._state!=ee.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(Oe))}),$(this,"pan",(l,p,h=!1)=>{if(this.camera){const f=l.clone().sub(p);if(this.camera instanceof s.OrthographicCamera&&f.multiplyScalar(1/this.camera.zoom),this.camera instanceof s.PerspectiveCamera&&h){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const A=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);f.multiplyScalar(1/A)}this._v3_1.set(f.x,f.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return Ce}),$(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof s.PerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const l=this.calculateTbRadius(this.camera);l!==void 0&&(this._tbRadius=l),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Oe)}}),$(this,"rotate",(l,p)=>{const h=this._gizmos.position;return this._translationMatrix.makeTranslation(-h.x,-h.y,-h.z),this._rotationMatrix.makeRotationAxis(l,-p),this._m4_1.makeTranslation(h.x,h.y,h.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),Ce}),$(this,"copyState",()=>{if(this.camera){const l=JSON.stringify(this.camera instanceof s.OrthographicCamera?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(l)}}),$(this,"pasteState",()=>{const l=this;navigator.clipboard.readText().then(function(h){l.setStateFromJSON(h)})}),$(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof s.PerspectiveCamera&&(this._fov0=this.camera.fov))}),$(this,"applyScale",(l,p,h=!0)=>{if(!this.camera)return;const f=p.clone();let A=1/l;if(this.camera instanceof s.OrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=l,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,A=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,A=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(A,A,A),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),f.sub(this._v3_1);const _=f.clone().multiplyScalar(A);return f.sub(_),this._m4_1.makeTranslation(f.x,f.y,f.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),Ce}if(this.camera instanceof s.PerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let _=this._v3_1.distanceTo(f),b=_-_*A;const T=_-b;T<this.minDistance?(A=this.minDistance/_,b=_-_*A):T>this.maxDistance&&(A=this.maxDistance/_,b=_-_*A);let B=f.clone().sub(this._v3_1).normalize().multiplyScalar(b);if(this._m4_1.makeTranslation(B.x,B.y,B.z),h){const F=this._v3_2;_=F.distanceTo(f),b=_-_*A,B=f.clone().sub(this._v3_2).normalize().multiplyScalar(b),this._translationMatrix.makeTranslation(F.x,F.y,F.z),this._scaleMatrix.makeScale(A,A,A),this._m4_2.makeTranslation(B.x,B.y,B.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-F.x,-F.y,-F.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return Ce}}),$(this,"setFov",l=>{this.camera instanceof s.PerspectiveCamera&&(this.camera.fov=s.MathUtils.clamp(l,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),$(this,"setTarget",(l,p,h)=>{if(this.camera){this.target.set(l,p,h),this._gizmos.position.set(l,p,h);const f=this.calculateTbRadius(this.camera);f!==void 0&&(this._tbRadius=f),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),$(this,"zRotate",(l,p)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,p),this._translationMatrix.makeTranslation(-l.x,-l.y,-l.z),this._m4_1.makeTranslation(l.x,l.y,l.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(l),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,p),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),Ce)),$(this,"unprojectOnObj",(l,p)=>{if(!this.scene)return null;const h=new s.Raycaster;h.near=p.near,h.far=p.far,h.setFromCamera(l,p);const f=h.intersectObjects(this.scene.children,!0);for(let A=0;A<f.length;A++)if(f[A].object.uuid!=this._gizmos.uuid&&f[A].face)return f[A].point.clone();return null}),$(this,"unprojectOnTbSurface",(l,p,h,f,A)=>{if(l instanceof s.OrthographicCamera){this._v2_1.copy(this.getCursorPosition(p,h,f)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const _=Math.pow(this._v2_1.x,2),b=Math.pow(this._v2_1.y,2),T=Math.pow(this._tbRadius,2);return _+b<=T*.5?this._v3_1.setZ(Math.sqrt(T-(_+b))):this._v3_1.setZ(T*.5/Math.sqrt(_+b)),this._v3_1}if(l instanceof s.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,f)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(l.projectionMatrixInverse);const _=this._v3_1.clone().normalize(),b=l.position.distanceTo(this._gizmos.position),T=Math.pow(A,2),B=this._v3_1.z,F=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(F==0)return _.set(this._v3_1.x,this._v3_1.y,A),_;const P=B/F,L=b;let O=Math.pow(P,2)+1,G=2*P*L,D=Math.pow(L,2)-T,k=Math.pow(G,2)-4*O*D;if(k>=0&&(this._v2_1.setX((-G-Math.sqrt(k))/(2*O)),this._v2_1.setY(P*this._v2_1.x+L),s.MathUtils.RAD2DEG*this._v2_1.angle()>=45)){const Q=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(b-this._v2_1.y,2));return _.multiplyScalar(Q),_.z+=b,_}O=P,G=L,D=-T*.5,k=Math.pow(G,2)-4*O*D,this._v2_1.setX((-G-Math.sqrt(k))/(2*O)),this._v2_1.setY(P*this._v2_1.x+L);const N=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(b-this._v2_1.y,2));return _.multiplyScalar(N),_.z+=b,_}}),$(this,"unprojectOnTbPlane",(l,p,h,f,A=!1)=>{if(l instanceof s.OrthographicCamera)return this._v2_1.copy(this.getCursorPosition(p,h,f)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(l instanceof s.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,f)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(l.projectionMatrixInverse);const _=this._v3_1.clone().normalize(),b=this._v3_1.z,T=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let B;if(A?B=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):B=l.position.distanceTo(this._gizmos.position),T==0)return _.set(0,0,0),_;const F=b/T,P=B,L=-P/F,O=Math.sqrt(Math.pow(P,2)+Math.pow(L,2));return _.multiplyScalar(O),_.z=0,_}}),$(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof s.OrthographicCamera&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof s.PerspectiveCamera&&(this._fovState=this.camera.fov))}),$(this,"updateTbState",(l,p)=>{this._state=l,p&&this.updateMatrixState()}),$(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const p=this.calculateTbRadius(this.camera);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof s.OrthographicCamera&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const p=s.MathUtils.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(p/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof s.PerspectiveCamera){const p=this.camera.position.distanceTo(this._gizmos.position);if(p>this.maxDistance+1e-6||p<this.minDistance-1e-6){const A=s.MathUtils.clamp(p,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(A/p,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=s.MathUtils.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const h=this._tbRadius,f=this.calculateTbRadius(this.camera);if(f!==void 0&&(this._tbRadius=f),h<this._tbRadius-1e-6||h>this._tbRadius+1e-6){const A=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,_=this._tbRadius/A,T=new s.EllipseCurve(0,0,_,_).getPoints(this._curvePts),B=new s.BufferGeometry().setFromPoints(T);for(const F in this._gizmos.children){const P=this._gizmos.children[F];P.geometry=B}}}this.camera.lookAt(this._gizmos.position)}}),$(this,"setStateFromJSON",l=>{const p=JSON.parse(l);if(p.arcballState&&this.camera){this._cameraMatrixState.fromArray(p.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(p.arcballState.cameraUp),this.camera.near=p.arcballState.cameraNear,this.camera.far=p.arcballState.cameraFar,this.camera.zoom=p.arcballState.cameraZoom,this.camera instanceof s.PerspectiveCamera&&(this.camera.fov=p.arcballState.cameraFov),this._gizmoMatrixState.fromArray(p.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const h=this.calculateTbRadius(this.camera);h!==void 0&&(this._tbRadius=h);const f=new s.Matrix4().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(f),this.camera.lookAt(this._gizmos.position),this.updateTbState(ee.IDLE,!1),this.dispatchEvent(Oe)}}),this.camera=null,this.domElement=r,this.scene=o,this.mouseActions=[],this._mouseOp=null,this._v2_1=new s.Vector2,this._v3_1=new s.Vector3,this._v3_2=new s.Vector3,this._m4_1=new s.Matrix4,this._m4_2=new s.Matrix4,this._quat=new s.Quaternion,this._translationMatrix=new s.Matrix4,this._rotationMatrix=new s.Matrix4,this._scaleMatrix=new s.Matrix4,this._rotationAxis=new s.Vector3,this._cameraMatrixState=new s.Matrix4,this._cameraProjectionState=new s.Matrix4,this._fovState=1,this._upState=new s.Vector3,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new s.Matrix4,this._up0=new s.Vector3,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new s.Matrix4,this._gizmoMatrixState0=new s.Matrix4,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=ve.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new s.Vector3,this._startCursorPosition=new s.Vector3,this._grid=null,this._gridPosition=new s.Vector3,this._gizmos=new s.Group,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new s.Vector3,this._cursorPosCurr=new s.Vector3,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new s.Vector3(0,0,0),this._currentTarget=new s.Vector3(0,0,0),this._tbRadius=1,this._state=ee.IDLE,this.setCamera(t),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(t){if(t!=null&&t.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==ee.ROTATE||this._state==ee.ZROTATE||this._state==ee.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),t!=null&&t.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==ee.SCALE||this._state==ee.FOCUS||this._state==ee.ANIMATION_FOCUS)&&this.camera){const r=this.calculateTbRadius(this.camera);if(r!==void 0&&(this._tbRadius=r),this.adjustNearFar){const o=this.camera.position.distanceTo(this._gizmos.position),l=new s.Box3;l.setFromObject(this._gizmos);const p=new s.Sphere;l.getBoundingSphere(p);const h=Math.max(this._nearPos0,p.radius+p.center.length()),f=o-this._initialNear,A=Math.min(h,f);this.camera.near=o-A;const _=Math.min(this._farPos0,-p.radius+p.center.length()),b=o-this._initialFar,T=Math.min(_,b);this.camera.far=o-T,this.camera.updateProjectionMatrix()}else{let o=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,o=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,o=!0),o&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(Oe)}setTransformationMatrices(t=null,r=null){t?Ce.camera?Ce.camera.copy(t):Ce.camera=t.clone():Ce.camera=null,r?Ce.gizmos?Ce.gizmos.copy(r):Ce.gizmos=r.clone():Ce.gizmos=null}}const Te=(0,d.forwardRef)((_,A)=>{var b=_,{camera:i,makeDefault:t,regress:r,domElement:o,onChange:l,onStart:p,onEnd:h}=b,f=mn(b,["camera","makeDefault","regress","domElement","onChange","onStart","onEnd"]);const T=(0,E.z)(V=>V.invalidate),B=(0,E.z)(V=>V.camera),F=(0,E.z)(V=>V.gl),P=(0,E.z)(V=>V.events),L=(0,E.z)(V=>V.set),O=(0,E.z)(V=>V.get),G=(0,E.z)(V=>V.performance),D=i||B,k=o||P.connected||F.domElement,N=(0,d.useMemo)(()=>new ht(D),[D]);return(0,E.A)(()=>{N.enabled&&N.update()},-1),(0,d.useEffect)(()=>(N.connect(k),()=>void N.dispose()),[k,r,N,T]),(0,d.useEffect)(()=>{const V=Q=>{T(),r&&G.regress(),l&&l(Q)};return N.addEventListener("change",V),p&&N.addEventListener("start",p),h&&N.addEventListener("end",h),()=>{N.removeEventListener("change",V),p&&N.removeEventListener("start",p),h&&N.removeEventListener("end",h)}},[l,p,h]),(0,d.useEffect)(()=>{if(t){const V=O().controls;return L({controls:N}),()=>L({controls:V})}},[t,N]),d.createElement("primitive",(0,S.Z)({ref:A,object:N},f))});var Ve=y(76427),qt=y.n(Ve),vn=y(25108),jt=Object.defineProperty,Wt=(i,t,r)=>t in i?jt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$e=(i,t,r)=>(Wt(i,typeof t!="symbol"?t+"":t,r),r);class En extends s.Object3D{constructor(t,r){super(),$e(this,"isTransformControls",!0),$e(this,"visible",!1),$e(this,"domElement"),$e(this,"raycaster",new s.Raycaster),$e(this,"gizmo"),$e(this,"plane"),$e(this,"tempVector",new s.Vector3),$e(this,"tempVector2",new s.Vector3),$e(this,"tempQuaternion",new s.Quaternion),$e(this,"unit",{X:new s.Vector3(1,0,0),Y:new s.Vector3(0,1,0),Z:new s.Vector3(0,0,1)}),$e(this,"pointStart",new s.Vector3),$e(this,"pointEnd",new s.Vector3),$e(this,"offset",new s.Vector3),$e(this,"rotationAxis",new s.Vector3),$e(this,"startNorm",new s.Vector3),$e(this,"endNorm",new s.Vector3),$e(this,"rotationAngle",0),$e(this,"cameraPosition",new s.Vector3),$e(this,"cameraQuaternion",new s.Quaternion),$e(this,"cameraScale",new s.Vector3),$e(this,"parentPosition",new s.Vector3),$e(this,"parentQuaternion",new s.Quaternion),$e(this,"parentQuaternionInv",new s.Quaternion),$e(this,"parentScale",new s.Vector3),$e(this,"worldPositionStart",new s.Vector3),$e(this,"worldQuaternionStart",new s.Quaternion),$e(this,"worldScaleStart",new s.Vector3),$e(this,"worldPosition",new s.Vector3),$e(this,"worldQuaternion",new s.Quaternion),$e(this,"worldQuaternionInv",new s.Quaternion),$e(this,"worldScale",new s.Vector3),$e(this,"eye",new s.Vector3),$e(this,"positionStart",new s.Vector3),$e(this,"quaternionStart",new s.Quaternion),$e(this,"scaleStart",new s.Vector3),$e(this,"camera"),$e(this,"object"),$e(this,"enabled",!0),$e(this,"axis",null),$e(this,"mode","translate"),$e(this,"translationSnap",null),$e(this,"rotationSnap",null),$e(this,"scaleSnap",null),$e(this,"space","world"),$e(this,"size",1),$e(this,"dragging",!1),$e(this,"showX",!0),$e(this,"showY",!0),$e(this,"showZ",!0),$e(this,"changeEvent",{type:"change"}),$e(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),$e(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),$e(this,"objectChangeEvent",{type:"objectChange"}),$e(this,"intersectObjectWithRay",(l,p,h)=>{const f=p.intersectObject(l,!0);for(let A=0;A<f.length;A++)if(f[A].object.visible||h)return f[A];return!1}),$e(this,"attach",l=>(this.object=l,this.visible=!0,this)),$e(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),$e(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),$e(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?vn.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),$e(this,"pointerHover",l=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(l,this.camera);const p=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);p?this.axis=p.object.name:this.axis=null}),$e(this,"pointerDown",l=>{if(!(this.object===void 0||this.dragging===!0||l.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(l,this.camera);const p=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(p){let h=this.space;if(this.mode==="scale"?h="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(h="world"),h==="local"&&this.mode==="rotate"){const f=this.rotationSnap;this.axis==="X"&&f&&(this.object.rotation.x=Math.round(this.object.rotation.x/f)*f),this.axis==="Y"&&f&&(this.object.rotation.y=Math.round(this.object.rotation.y/f)*f),this.axis==="Z"&&f&&(this.object.rotation.z=Math.round(this.object.rotation.z/f)*f)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(p.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),$e(this,"pointerMove",l=>{const p=this.axis,h=this.mode,f=this.object;let A=this.space;if(h==="scale"?A="local":(p==="E"||p==="XYZE"||p==="XYZ")&&(A="world"),f===void 0||p===null||this.dragging===!1||l.button!==-1)return;this.raycaster.setFromCamera(l,this.camera);const _=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(_){if(this.pointEnd.copy(_.point).sub(this.worldPositionStart),h==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),A==="local"&&p!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),p.indexOf("X")===-1&&(this.offset.x=0),p.indexOf("Y")===-1&&(this.offset.y=0),p.indexOf("Z")===-1&&(this.offset.z=0),A==="local"&&p!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),f.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(A==="local"&&(f.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),p.search("X")!==-1&&(f.position.x=Math.round(f.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(f.position.y=Math.round(f.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(f.position.z=Math.round(f.position.z/this.translationSnap)*this.translationSnap),f.position.applyQuaternion(this.quaternionStart)),A==="world"&&(f.parent&&f.position.add(this.tempVector.setFromMatrixPosition(f.parent.matrixWorld)),p.search("X")!==-1&&(f.position.x=Math.round(f.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(f.position.y=Math.round(f.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(f.position.z=Math.round(f.position.z/this.translationSnap)*this.translationSnap),f.parent&&f.position.sub(this.tempVector.setFromMatrixPosition(f.parent.matrixWorld))));else if(h==="scale"){if(p.search("XYZ")!==-1){let b=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(b*=-1),this.tempVector2.set(b,b,b)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),p.search("X")===-1&&(this.tempVector2.x=1),p.search("Y")===-1&&(this.tempVector2.y=1),p.search("Z")===-1&&(this.tempVector2.z=1);f.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(p.search("X")!==-1&&(this.object.scale.x=Math.round(f.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Y")!==-1&&(f.scale.y=Math.round(f.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Z")!==-1&&(f.scale.z=Math.round(f.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(h==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const b=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));p==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):p==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*b):(p==="X"||p==="Y"||p==="Z")&&(this.rotationAxis.copy(this.unit[p]),this.tempVector.copy(this.unit[p]),A==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*b),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),A==="local"&&p!=="E"&&p!=="XYZE"?(f.quaternion.copy(this.quaternionStart),f.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),f.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),f.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),$e(this,"pointerUp",l=>{l.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),$e(this,"getPointer",l=>{var p,h;if(this.domElement&&((p=this.domElement.ownerDocument)!=null&&p.pointerLockElement))return{x:0,y:0,button:l.button};{const f=l.changedTouches?l.changedTouches[0]:l,A=(h=this.domElement)==null?void 0:h.getBoundingClientRect();return{x:(f.clientX-A.left)/A.width*2-1,y:-(f.clientY-A.top)/A.height*2+1,button:l.button}}}),$e(this,"onPointerHover",l=>{if(this.enabled)switch(l.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(l));break}}),$e(this,"onPointerDown",l=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(l)),this.pointerDown(this.getPointer(l)))}),$e(this,"onPointerMove",l=>{this.enabled&&this.pointerMove(this.getPointer(l))}),$e(this,"onPointerUp",l=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(l)))}),$e(this,"getMode",()=>this.mode),$e(this,"setMode",l=>{this.mode=l}),$e(this,"setTranslationSnap",l=>{this.translationSnap=l}),$e(this,"setRotationSnap",l=>{this.rotationSnap=l}),$e(this,"setScaleSnap",l=>{this.scaleSnap=l}),$e(this,"setSize",l=>{this.size=l}),$e(this,"setSpace",l=>{this.space=l}),$e(this,"update",()=>{vn.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),$e(this,"connect",l=>{l===document&&vn.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=l,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),$e(this,"dispose",()=>{var l,p,h,f,A,_;(l=this.domElement)==null||l.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointermove",this.onPointerHover),(f=(h=this.domElement)==null?void 0:h.ownerDocument)==null||f.removeEventListener("pointermove",this.onPointerMove),(_=(A=this.domElement)==null?void 0:A.ownerDocument)==null||_.removeEventListener("pointerup",this.onPointerUp),this.traverse(b=>{const T=b;T.geometry&&T.geometry.dispose(),T.material&&T.material.dispose()})}),this.domElement=r,this.camera=t,this.gizmo=new ln,this.add(this.gizmo),this.plane=new gn,this.add(this.plane);const o=(l,p)=>{let h=p;Object.defineProperty(this,l,{get:function(){return h!==void 0?h:p},set:function(f){h!==f&&(h=f,this.plane[l]=f,this.gizmo[l]=f,this.dispatchEvent({type:l+"-changed",value:f}),this.dispatchEvent(this.changeEvent))}}),this[l]=p,this.plane[l]=p,this.gizmo[l]=p};o("camera",this.camera),o("object",this.object),o("enabled",this.enabled),o("axis",this.axis),o("mode",this.mode),o("translationSnap",this.translationSnap),o("rotationSnap",this.rotationSnap),o("scaleSnap",this.scaleSnap),o("space",this.space),o("size",this.size),o("dragging",this.dragging),o("showX",this.showX),o("showY",this.showY),o("showZ",this.showZ),o("worldPosition",this.worldPosition),o("worldPositionStart",this.worldPositionStart),o("worldQuaternion",this.worldQuaternion),o("worldQuaternionStart",this.worldQuaternionStart),o("cameraPosition",this.cameraPosition),o("cameraQuaternion",this.cameraQuaternion),o("pointStart",this.pointStart),o("pointEnd",this.pointEnd),o("rotationAxis",this.rotationAxis),o("rotationAngle",this.rotationAngle),o("eye",this.eye),r!==void 0&&this.connect(r)}}class ln extends s.Object3D{constructor(){super(),$e(this,"isTransformControlsGizmo",!0),$e(this,"type","TransformControlsGizmo"),$e(this,"tempVector",new s.Vector3(0,0,0)),$e(this,"tempEuler",new s.Euler),$e(this,"alignVector",new s.Vector3(0,1,0)),$e(this,"zeroVector",new s.Vector3(0,0,0)),$e(this,"lookAtMatrix",new s.Matrix4),$e(this,"tempQuaternion",new s.Quaternion),$e(this,"tempQuaternion2",new s.Quaternion),$e(this,"identityQuaternion",new s.Quaternion),$e(this,"unitX",new s.Vector3(1,0,0)),$e(this,"unitY",new s.Vector3(0,1,0)),$e(this,"unitZ",new s.Vector3(0,0,1)),$e(this,"gizmo"),$e(this,"picker"),$e(this,"helper"),$e(this,"rotationAxis",new s.Vector3),$e(this,"cameraPosition",new s.Vector3),$e(this,"worldPositionStart",new s.Vector3),$e(this,"worldQuaternionStart",new s.Quaternion),$e(this,"worldPosition",new s.Vector3),$e(this,"worldQuaternion",new s.Quaternion),$e(this,"eye",new s.Vector3),$e(this,"camera",null),$e(this,"enabled",!0),$e(this,"axis",null),$e(this,"mode","translate"),$e(this,"space","world"),$e(this,"size",1),$e(this,"dragging",!1),$e(this,"showX",!0),$e(this,"showY",!0),$e(this,"showZ",!0),$e(this,"updateMatrixWorld",()=>{let Ye=this.space;this.mode==="scale"&&(Ye="local");const Se=Ye==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let xe=[];xe=xe.concat(this.picker[this.mode].children),xe=xe.concat(this.gizmo[this.mode].children),xe=xe.concat(this.helper[this.mode].children);for(let Ee=0;Ee<xe.length;Ee++){const le=xe[Ee];le.visible=!0,le.rotation.set(0,0,0),le.position.copy(this.worldPosition);let ye;if(this.camera.isOrthographicCamera?ye=(this.camera.top-this.camera.bottom)/this.camera.zoom:ye=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),le.scale.set(1,1,1).multiplyScalar(ye*this.size/7),le.tag==="helper"){le.visible=!1,le.name==="AXIS"?(le.position.copy(this.worldPositionStart),le.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),le.quaternion.copy(Se).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Se).dot(this.eye))>.9&&(le.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),le.quaternion.copy(Se).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Se).dot(this.eye))>.9&&(le.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),le.quaternion.copy(Se).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Se).dot(this.eye))>.9&&(le.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),le.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),le.quaternion.multiply(this.tempQuaternion),le.visible=this.dragging),this.axis==="E"&&(le.visible=!1)):le.name==="START"?(le.position.copy(this.worldPositionStart),le.visible=this.dragging):le.name==="END"?(le.position.copy(this.worldPosition),le.visible=this.dragging):le.name==="DELTA"?(le.position.copy(this.worldPositionStart),le.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),le.scale.copy(this.tempVector),le.visible=this.dragging):(le.quaternion.copy(Se),this.dragging?le.position.copy(this.worldPositionStart):le.position.copy(this.worldPosition),this.axis&&(le.visible=this.axis.search(le.name)!==-1));continue}le.quaternion.copy(Se),this.mode==="translate"||this.mode==="scale"?((le.name==="X"||le.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Se).dot(this.eye))>.99&&(le.scale.set(1e-10,1e-10,1e-10),le.visible=!1),(le.name==="Y"||le.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Se).dot(this.eye))>.99&&(le.scale.set(1e-10,1e-10,1e-10),le.visible=!1),(le.name==="Z"||le.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Se).dot(this.eye))>.99&&(le.scale.set(1e-10,1e-10,1e-10),le.visible=!1),le.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Se).dot(this.eye))<.2&&(le.scale.set(1e-10,1e-10,1e-10),le.visible=!1),le.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Se).dot(this.eye))<.2&&(le.scale.set(1e-10,1e-10,1e-10),le.visible=!1),le.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Se).dot(this.eye))<.2&&(le.scale.set(1e-10,1e-10,1e-10),le.visible=!1),le.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(Se).dot(this.eye)<0?le.tag==="fwd"?le.visible=!1:le.scale.x*=-1:le.tag==="bwd"&&(le.visible=!1)),le.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(Se).dot(this.eye)<0?le.tag==="fwd"?le.visible=!1:le.scale.y*=-1:le.tag==="bwd"&&(le.visible=!1)),le.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(Se).dot(this.eye)<0?le.tag==="fwd"?le.visible=!1:le.scale.z*=-1:le.tag==="bwd"&&(le.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(Se),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(Se).invert()),le.name.search("E")!==-1&&le.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),le.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),le.quaternion.copy(this.tempQuaternion)),le.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),le.quaternion.copy(this.tempQuaternion)),le.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),le.quaternion.copy(this.tempQuaternion))),le.visible=le.visible&&(le.name.indexOf("X")===-1||this.showX),le.visible=le.visible&&(le.name.indexOf("Y")===-1||this.showY),le.visible=le.visible&&(le.name.indexOf("Z")===-1||this.showZ),le.visible=le.visible&&(le.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),le.material.tempOpacity=le.material.tempOpacity||le.material.opacity,le.material.tempColor=le.material.tempColor||le.material.color.clone(),le.material.color.copy(le.material.tempColor),le.material.opacity=le.material.tempOpacity,this.enabled?this.axis&&(le.name===this.axis?(le.material.opacity=1,le.material.color.lerp(new s.Color(1,1,1),.5)):this.axis.split("").some(function(Be){return le.name===Be})?(le.material.opacity=1,le.material.color.lerp(new s.Color(1,1,1),.5)):(le.material.opacity*=.25,le.material.color.lerp(new s.Color(1,1,1),.5))):(le.material.opacity*=.5,le.material.color.lerp(new s.Color(1,1,1),.5))}super.updateMatrixWorld()});const t=new s.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:s.DoubleSide,fog:!1,toneMapped:!1}),r=new s.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),o=t.clone();o.opacity=.15;const l=t.clone();l.opacity=.33;const p=t.clone();p.color.set(16711680);const h=t.clone();h.color.set(65280);const f=t.clone();f.color.set(255);const A=t.clone();A.opacity=.25;const _=A.clone();_.color.set(16776960);const b=A.clone();b.color.set(65535);const T=A.clone();T.color.set(16711935),t.clone().color.set(16776960);const F=r.clone();F.color.set(16711680);const P=r.clone();P.color.set(65280);const L=r.clone();L.color.set(255);const O=r.clone();O.color.set(65535);const G=r.clone();G.color.set(16711935);const D=r.clone();D.color.set(16776960);const k=r.clone();k.color.set(7895160);const N=D.clone();N.opacity=.25;const V=new s.CylinderGeometry(0,.05,.2,12,1,!1),Q=new s.BoxGeometry(.125,.125,.125),K=new s.BufferGeometry;K.setAttribute("position",new s.Float32BufferAttribute([0,0,0,1,0,0],3));const X=(Ye,Se)=>{const xe=new s.BufferGeometry,Ee=[];for(let le=0;le<=64*Se;++le)Ee.push(0,Math.cos(le/32*Math.PI)*Ye,Math.sin(le/32*Math.PI)*Ye);return xe.setAttribute("position",new s.Float32BufferAttribute(Ee,3)),xe},oe=()=>{const Ye=new s.BufferGeometry;return Ye.setAttribute("position",new s.Float32BufferAttribute([0,0,0,1,1,1],3)),Ye},ae={X:[[new s.Mesh(V,p),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new s.Mesh(V,p),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new s.Line(K,F)]],Y:[[new s.Mesh(V,h),[0,1,0],null,null,"fwd"],[new s.Mesh(V,h),[0,1,0],[Math.PI,0,0],null,"bwd"],[new s.Line(K,P),null,[0,0,Math.PI/2]]],Z:[[new s.Mesh(V,f),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new s.Mesh(V,f),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new s.Line(K,L),null,[0,-Math.PI/2,0]]],XYZ:[[new s.Mesh(new s.OctahedronGeometry(.1,0),A.clone()),[0,0,0],[0,0,0]]],XY:[[new s.Mesh(new s.PlaneGeometry(.295,.295),_.clone()),[.15,.15,0]],[new s.Line(K,D),[.18,.3,0],null,[.125,1,1]],[new s.Line(K,D),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new s.Mesh(new s.PlaneGeometry(.295,.295),b.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new s.Line(K,O),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new s.Line(K,O),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new s.Mesh(new s.PlaneGeometry(.295,.295),T.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new s.Line(K,G),[.18,0,.3],null,[.125,1,1]],[new s.Line(K,G),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},ge={X:[[new s.Mesh(new s.CylinderGeometry(.2,0,1,4,1,!1),o),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new s.Mesh(new s.CylinderGeometry(.2,0,1,4,1,!1),o),[0,.6,0]]],Z:[[new s.Mesh(new s.CylinderGeometry(.2,0,1,4,1,!1),o),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new s.Mesh(new s.OctahedronGeometry(.2,0),o)]],XY:[[new s.Mesh(new s.PlaneGeometry(.4,.4),o),[.2,.2,0]]],YZ:[[new s.Mesh(new s.PlaneGeometry(.4,.4),o),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new s.Mesh(new s.PlaneGeometry(.4,.4),o),[.2,0,.2],[-Math.PI/2,0,0]]]},ie={START:[[new s.Mesh(new s.OctahedronGeometry(.01,2),l),null,null,null,"helper"]],END:[[new s.Mesh(new s.OctahedronGeometry(.01,2),l),null,null,null,"helper"]],DELTA:[[new s.Line(oe(),l),null,null,null,"helper"]],X:[[new s.Line(K,l.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new s.Line(K,l.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new s.Line(K,l.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_e={X:[[new s.Line(X(1,.5),F)],[new s.Mesh(new s.OctahedronGeometry(.04,0),p),[0,0,.99],null,[1,3,1]]],Y:[[new s.Line(X(1,.5),P),null,[0,0,-Math.PI/2]],[new s.Mesh(new s.OctahedronGeometry(.04,0),h),[0,0,.99],null,[3,1,1]]],Z:[[new s.Line(X(1,.5),L),null,[0,Math.PI/2,0]],[new s.Mesh(new s.OctahedronGeometry(.04,0),f),[.99,0,0],null,[1,3,1]]],E:[[new s.Line(X(1.25,1),N),null,[0,Math.PI/2,0]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),N),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),N),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),N),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new s.Mesh(new s.CylinderGeometry(.03,0,.15,4,1,!1),N),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new s.Line(X(1,1),k),null,[0,Math.PI/2,0]]]},me={AXIS:[[new s.Line(K,l.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},we={X:[[new s.Mesh(new s.TorusGeometry(1,.1,4,24),o),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new s.Mesh(new s.TorusGeometry(1,.1,4,24),o),[0,0,0],[Math.PI/2,0,0]]],Z:[[new s.Mesh(new s.TorusGeometry(1,.1,4,24),o),[0,0,0],[0,0,-Math.PI/2]]],E:[[new s.Mesh(new s.TorusGeometry(1.25,.1,2,24),o)]],XYZE:[[new s.Mesh(new s.SphereGeometry(.7,10,8),o)]]},ke={X:[[new s.Mesh(Q,p),[.8,0,0],[0,0,-Math.PI/2]],[new s.Line(K,F),null,null,[.8,1,1]]],Y:[[new s.Mesh(Q,h),[0,.8,0]],[new s.Line(K,P),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new s.Mesh(Q,f),[0,0,.8],[Math.PI/2,0,0]],[new s.Line(K,L),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new s.Mesh(Q,_),[.85,.85,0],null,[2,2,.2]],[new s.Line(K,D),[.855,.98,0],null,[.125,1,1]],[new s.Line(K,D),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new s.Mesh(Q,b),[0,.85,.85],null,[.2,2,2]],[new s.Line(K,O),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new s.Line(K,O),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new s.Mesh(Q,T),[.85,0,.85],null,[2,.2,2]],[new s.Line(K,G),[.855,0,.98],null,[.125,1,1]],[new s.Line(K,G),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new s.Mesh(new s.BoxGeometry(.125,.125,.125),A.clone()),[1.1,0,0]]],XYZY:[[new s.Mesh(new s.BoxGeometry(.125,.125,.125),A.clone()),[0,1.1,0]]],XYZZ:[[new s.Mesh(new s.BoxGeometry(.125,.125,.125),A.clone()),[0,0,1.1]]]},De={X:[[new s.Mesh(new s.CylinderGeometry(.2,0,.8,4,1,!1),o),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new s.Mesh(new s.CylinderGeometry(.2,0,.8,4,1,!1),o),[0,.5,0]]],Z:[[new s.Mesh(new s.CylinderGeometry(.2,0,.8,4,1,!1),o),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new s.Mesh(Q,o),[.85,.85,0],null,[3,3,.2]]],YZ:[[new s.Mesh(Q,o),[0,.85,.85],null,[.2,3,3]]],XZ:[[new s.Mesh(Q,o),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new s.Mesh(new s.BoxGeometry(.2,.2,.2),o),[1.1,0,0]]],XYZY:[[new s.Mesh(new s.BoxGeometry(.2,.2,.2),o),[0,1.1,0]]],XYZZ:[[new s.Mesh(new s.BoxGeometry(.2,.2,.2),o),[0,0,1.1]]]},Ne={X:[[new s.Line(K,l.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new s.Line(K,l.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new s.Line(K,l.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Ge=Ye=>{const Se=new s.Object3D;for(let xe in Ye)for(let Ee=Ye[xe].length;Ee--;){const le=Ye[xe][Ee][0].clone(),ye=Ye[xe][Ee][1],Be=Ye[xe][Ee][2],be=Ye[xe][Ee][3],je=Ye[xe][Ee][4];le.name=xe,le.tag=je,ye&&le.position.set(ye[0],ye[1],ye[2]),Be&&le.rotation.set(Be[0],Be[1],Be[2]),be&&le.scale.set(be[0],be[1],be[2]),le.updateMatrix();const Et=le.geometry.clone();Et.applyMatrix4(le.matrix),le.geometry=Et,le.renderOrder=1/0,le.position.set(0,0,0),le.rotation.set(0,0,0),le.scale.set(1,1,1),Se.add(le)}return Se};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Ge(ae)),this.add(this.gizmo.rotate=Ge(_e)),this.add(this.gizmo.scale=Ge(ke)),this.add(this.picker.translate=Ge(ge)),this.add(this.picker.rotate=Ge(we)),this.add(this.picker.scale=Ge(De)),this.add(this.helper.translate=Ge(ie)),this.add(this.helper.rotate=Ge(me)),this.add(this.helper.scale=Ge(Ne)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class gn extends s.Mesh{constructor(){super(new s.PlaneGeometry(1e5,1e5,2,2),new s.MeshBasicMaterial({visible:!1,wireframe:!0,side:s.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),$e(this,"isTransformControlsPlane",!0),$e(this,"type","TransformControlsPlane"),$e(this,"unitX",new s.Vector3(1,0,0)),$e(this,"unitY",new s.Vector3(0,1,0)),$e(this,"unitZ",new s.Vector3(0,0,1)),$e(this,"tempVector",new s.Vector3),$e(this,"dirVector",new s.Vector3),$e(this,"alignVector",new s.Vector3),$e(this,"tempMatrix",new s.Matrix4),$e(this,"identityQuaternion",new s.Quaternion),$e(this,"cameraQuaternion",new s.Quaternion),$e(this,"worldPosition",new s.Vector3),$e(this,"worldQuaternion",new s.Quaternion),$e(this,"eye",new s.Vector3),$e(this,"axis",null),$e(this,"mode","translate"),$e(this,"space","world"),$e(this,"updateMatrixWorld",()=>{let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),this.unitX.set(1,0,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}const xn=d.forwardRef((b,_)=>{var T=b,{children:i,domElement:t,onChange:r,onMouseDown:o,onMouseUp:l,onObjectChange:p,object:h,makeDefault:f}=T,A=mn(T,["children","domElement","onChange","onMouseDown","onMouseUp","onObjectChange","object","makeDefault"]);const B=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],ke=A,{camera:F}=ke,P=mn(ke,["camera"]),L=Wv()(P,B),O=qt()(P,B),G=(0,E.z)(De=>De.controls),D=(0,E.z)(De=>De.gl),k=(0,E.z)(De=>De.events),N=(0,E.z)(De=>De.camera),V=(0,E.z)(De=>De.invalidate),Q=(0,E.z)(De=>De.get),K=(0,E.z)(De=>De.set),X=F||N,oe=t||k.connected||D.domElement,ae=d.useMemo(()=>new En(X,oe),[X,oe]),ge=d.useRef();d.useLayoutEffect(()=>(h?ae.attach(h instanceof s.Object3D?h:h.current):ge.current instanceof s.Object3D&&ae.attach(ge.current),()=>void ae.detach()),[h,i,ae]),d.useEffect(()=>{if(G){const De=Ne=>G.enabled=!Ne.value;return ae.addEventListener("dragging-changed",De),()=>ae.removeEventListener("dragging-changed",De)}},[ae,G]);const ie=d.useRef(),_e=d.useRef(),me=d.useRef(),we=d.useRef();return d.useLayoutEffect(()=>void(ie.current=r),[r]),d.useLayoutEffect(()=>void(_e.current=o),[o]),d.useLayoutEffect(()=>void(me.current=l),[l]),d.useLayoutEffect(()=>void(we.current=p),[p]),d.useEffect(()=>{const De=Se=>{V(),ie.current==null||ie.current(Se)},Ne=Se=>_e.current==null?void 0:_e.current(Se),Ge=Se=>me.current==null?void 0:me.current(Se),Ye=Se=>we.current==null?void 0:we.current(Se);return ae.addEventListener("change",De),ae.addEventListener("mouseDown",Ne),ae.addEventListener("mouseUp",Ge),ae.addEventListener("objectChange",Ye),()=>{ae.removeEventListener("change",De),ae.removeEventListener("mouseDown",Ne),ae.removeEventListener("mouseUp",Ge),ae.removeEventListener("objectChange",Ye)}},[V,ae]),d.useEffect(()=>{if(f){const De=Q().controls;return K({controls:ae}),()=>K({controls:De})}},[f,ae]),ae?d.createElement(d.Fragment,null,d.createElement("primitive",(0,S.Z)({ref:_,object:ae},L)),d.createElement("group",(0,S.Z)({ref:ge},O),i)):null});var Sn=y(25108),Ut=Object.defineProperty,dn=(i,t,r)=>t in i?Ut(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Pn=(i,t,r)=>(dn(i,typeof t!="symbol"?t+"":t,r),r);const cr=new s.Euler(0,0,0,"YXZ"),Er=new s.Vector3,ei={type:"change"},Jr={type:"lock"},qr={type:"unlock"},oo=Math.PI/2;class gs extends s.EventDispatcher{constructor(t,r){super(),Pn(this,"camera"),Pn(this,"domElement"),Pn(this,"isLocked"),Pn(this,"minPolarAngle"),Pn(this,"maxPolarAngle"),Pn(this,"pointerSpeed"),Pn(this,"onMouseMove",o=>{if(!this.domElement||this.isLocked===!1)return;const l=o.movementX||o.mozMovementX||o.webkitMovementX||0,p=o.movementY||o.mozMovementY||o.webkitMovementY||0;cr.setFromQuaternion(this.camera.quaternion),cr.y-=l*.002*this.pointerSpeed,cr.x-=p*.002*this.pointerSpeed,cr.x=Math.max(oo-this.maxPolarAngle,Math.min(oo-this.minPolarAngle,cr.x)),this.camera.quaternion.setFromEuler(cr),this.dispatchEvent(ei)}),Pn(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Jr),this.isLocked=!0):(this.dispatchEvent(qr),this.isLocked=!1))}),Pn(this,"onPointerlockError",()=>{Sn.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),Pn(this,"connect",o=>{this.domElement=o||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),Pn(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),Pn(this,"dispose",()=>{this.disconnect()}),Pn(this,"getObject",()=>this.camera),Pn(this,"direction",new s.Vector3(0,0,-1)),Pn(this,"getDirection",o=>o.copy(this.direction).applyQuaternion(this.camera.quaternion)),Pn(this,"moveForward",o=>{Er.setFromMatrixColumn(this.camera.matrix,0),Er.crossVectors(this.camera.up,Er),this.camera.position.addScaledVector(Er,o)}),Pn(this,"moveRight",o=>{Er.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Er,o)}),Pn(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),Pn(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=t,this.domElement=r,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,r&&this.connect(r)}}const ai=d.forwardRef((_,A)=>{var b=_,{domElement:i,selector:t,onChange:r,onLock:o,onUnlock:l,enabled:p=!0,makeDefault:h}=b,f=mn(b,["domElement","selector","onChange","onLock","onUnlock","enabled","makeDefault"]);const K=f,{camera:T}=K,B=mn(K,["camera"]),F=(0,E.z)(X=>X.setEvents),P=(0,E.z)(X=>X.gl),L=(0,E.z)(X=>X.camera),O=(0,E.z)(X=>X.invalidate),G=(0,E.z)(X=>X.events),D=(0,E.z)(X=>X.get),k=(0,E.z)(X=>X.set),N=T||L,V=i||G.connected||P.domElement,Q=d.useMemo(()=>new gs(N),[N]);return d.useEffect(()=>{if(p){Q.connect(V);const X=D().events.compute;return F({compute(oe,ae){const ge=ae.size.width/2,ie=ae.size.height/2;ae.pointer.set(ge/ae.size.width*2-1,-(ie/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),()=>{Q.disconnect(),F({compute:X})}}},[p,Q]),d.useEffect(()=>{const X=ge=>{O(),r&&r(ge)};Q.addEventListener("change",X),o&&Q.addEventListener("lock",o),l&&Q.addEventListener("unlock",l);const oe=()=>Q.lock(),ae=t?Array.from(document.querySelectorAll(t)):[document];return ae.forEach(ge=>ge&&ge.addEventListener("click",oe)),()=>{Q.removeEventListener("change",X),o&&Q.addEventListener("lock",o),l&&Q.addEventListener("unlock",l),ae.forEach(ge=>ge?ge.removeEventListener("click",oe):void 0)}},[r,o,l,t,Q,O]),d.useEffect(()=>{if(h){const X=D().controls;return k({controls:Q}),()=>k({controls:X})}},[h,Q]),d.createElement("primitive",(0,S.Z)({ref:A,object:Q},B))});var st=Object.defineProperty,Jn=(i,t,r)=>t in i?st(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Lt=(i,t,r)=>(Jn(i,typeof t!="symbol"?t+"":t,r),r);const Wn=new s.Vector3;class bn extends s.EventDispatcher{constructor(t,r){super(),Lt(this,"object"),Lt(this,"domElement"),Lt(this,"enabled",!0),Lt(this,"movementSpeed",1),Lt(this,"lookSpeed",.005),Lt(this,"lookVertical",!0),Lt(this,"autoForward",!1),Lt(this,"activeLook",!0),Lt(this,"heightSpeed",!1),Lt(this,"heightCoef",1),Lt(this,"heightMin",0),Lt(this,"heightMax",1),Lt(this,"constrainVertical",!1),Lt(this,"verticalMin",0),Lt(this,"verticalMax",Math.PI),Lt(this,"mouseDragOn",!1),Lt(this,"autoSpeedFactor",0),Lt(this,"mouseX",0),Lt(this,"mouseY",0),Lt(this,"moveForward",!1),Lt(this,"moveBackward",!1),Lt(this,"moveLeft",!1),Lt(this,"moveRight",!1),Lt(this,"moveUp",!1),Lt(this,"moveDown",!1),Lt(this,"viewHalfX",0),Lt(this,"viewHalfY",0),Lt(this,"lat",0),Lt(this,"lon",0),Lt(this,"lookDirection",new s.Vector3),Lt(this,"spherical",new s.Spherical),Lt(this,"target",new s.Vector3),Lt(this,"connect",o=>{o.setAttribute("tabindex","-1"),o.style.touchAction="none",o.addEventListener("contextmenu",this.contextmenu),o.addEventListener("mousemove",this.onMouseMove),o.addEventListener("mousedown",this.onMouseDown),o.addEventListener("mouseup",this.onMouseUp),this.domElement=o,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),Lt(this,"dispose",()=>{var o,l,p,h;(o=this.domElement)==null||o.removeEventListener("contextmenu",this.contextmenu),(l=this.domElement)==null||l.removeEventListener("mousedown",this.onMouseDown),(p=this.domElement)==null||p.removeEventListener("mousemove",this.onMouseMove),(h=this.domElement)==null||h.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),Lt(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),Lt(this,"onMouseDown",o=>{var l;if((l=this.domElement)==null||l.focus(),this.activeLook)switch(o.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),Lt(this,"onMouseUp",o=>{if(this.activeLook)switch(o.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),Lt(this,"onMouseMove",o=>{this.domElement&&(this.mouseX=o.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=o.pageY-this.domElement.offsetTop-this.viewHalfY)}),Lt(this,"onKeyDown",o=>{switch(o.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),Lt(this,"onKeyUp",o=>{switch(o.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),Lt(this,"lookAt",(o,l,p)=>(o instanceof s.Vector3?this.target.copy(o):l&&p&&this.target.set(o,l,p),this.object.lookAt(this.target),this.setOrientation(),this)),Lt(this,"update",o=>{if(!this.enabled)return;if(this.heightSpeed){const T=s.MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=o*(T*this.heightCoef)}else this.autoSpeedFactor=0;const l=o*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(l+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(l),this.moveLeft&&this.object.translateX(-l),this.moveRight&&this.object.translateX(l),this.moveUp&&this.object.translateY(l),this.moveDown&&this.object.translateY(-l);let p=o*this.lookSpeed;this.activeLook||(p=0);let h=1;this.constrainVertical&&(h=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*p,this.lookVertical&&(this.lat-=this.mouseY*p*h),this.lat=Math.max(-85,Math.min(85,this.lat));let f=s.MathUtils.degToRad(90-this.lat);const A=s.MathUtils.degToRad(this.lon);this.constrainVertical&&(f=s.MathUtils.mapLinear(f,0,Math.PI,this.verticalMin,this.verticalMax));const _=this.object.position;Wn.setFromSphericalCoords(1,f,A).add(_),this.object.lookAt(Wn)}),Lt(this,"contextmenu",o=>o.preventDefault()),Lt(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-s.MathUtils.radToDeg(this.spherical.phi),this.lon=s.MathUtils.radToDeg(this.spherical.theta)}),this.object=t,this.domElement=r,this.setOrientation(),r&&this.connect(r)}}const Vr=d.forwardRef((l,o)=>{var p=l,{domElement:i,makeDefault:t}=p,r=mn(p,["domElement","makeDefault"]);const h=(0,E.z)(F=>F.camera),f=(0,E.z)(F=>F.gl),A=(0,E.z)(F=>F.events),_=(0,E.z)(F=>F.get),b=(0,E.z)(F=>F.set),T=i||A.connected||f.domElement,[B]=d.useState(()=>new bn(h,T));return d.useEffect(()=>{if(t){const F=_().controls;return b({controls:B}),()=>b({controls:F})}},[t,B]),(0,E.A)((F,P)=>{B.update(P)},-1),B?d.createElement("primitive",(0,S.Z)({ref:o,object:B},r)):null});var hr=y(25108);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const An={LEFT:1,RIGHT:2,MIDDLE:4},It=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Ii={NONE:0,IN:1,OUT:-1};function Fo(i){return i.isPerspectiveCamera}function et(i){return i.isOrthographicCamera}const Re=Math.PI*2,Vt=Math.PI/2,Gn=1e-5,wn=Math.PI/180;function Rn(i,t,r){return Math.max(t,Math.min(r,i))}function qn(i,t=Gn){return Math.abs(i)<t}function hn(i,t,r=Gn){return qn(i-t,r)}function Kt(i,t){return Math.round(i/t)*t}function Ur(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Pr(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function Nr(i,t,r,o,l=1/0,p){o=Math.max(1e-4,o);const h=2/o,f=h*p,A=1/(1+f+.48*f*f+.235*f*f*f);let _=i-t;const b=t,T=l*o;_=Rn(_,-T,T),t=i-_;const B=(r.value+h*_)*p;r.value=(r.value-h*B)*A;let F=t+(_+B)*A;return b-i>0==F>b&&(F=b,r.value=(F-b)/p),F}function Fr(i,t,r,o,l=1/0,p,h){o=Math.max(1e-4,o);const f=2/o,A=f*p,_=1/(1+A+.48*A*A+.235*A*A*A);let b=t.x,T=t.y,B=t.z,F=i.x-b,P=i.y-T,L=i.z-B;const O=b,G=T,D=B,k=l*o,N=k*k,V=F*F+P*P+L*L;if(V>N){const we=Math.sqrt(V);F=F/we*k,P=P/we*k,L=L/we*k}b=i.x-F,T=i.y-P,B=i.z-L;const Q=(r.x+f*F)*p,K=(r.y+f*P)*p,X=(r.z+f*L)*p;r.x=(r.x-f*Q)*_,r.y=(r.y-f*K)*_,r.z=(r.z-f*X)*_,h.x=b+(F+Q)*_,h.y=T+(P+K)*_,h.z=B+(L+X)*_;const oe=O-i.x,ae=G-i.y,ge=D-i.z,ie=h.x-O,_e=h.y-G,me=h.z-D;return oe*ie+ae*_e+ge*me>0&&(h.x=O,h.y=G,h.z=D,r.x=(h.x-O)/p,r.y=(h.y-G)/p,r.z=(h.z-D)/p),h}function Br(i,t){t.set(0,0),i.forEach(r=>{t.x+=r.clientX,t.y+=r.clientY}),t.x/=i.length,t.y/=i.length}function Pi(i,t){return et(i)?(hr.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class Jo{constructor(){this._listeners={}}addEventListener(t,r){const o=this._listeners;o[t]===void 0&&(o[t]=[]),o[t].indexOf(r)===-1&&o[t].push(r)}hasEventListener(t,r){const o=this._listeners;return o[t]!==void 0&&o[t].indexOf(r)!==-1}removeEventListener(t,r){const l=this._listeners[t];if(l!==void 0){const p=l.indexOf(r);p!==-1&&l.splice(p,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const o=this._listeners[t.type];if(o!==void 0){t.target=this;const l=o.slice(0);for(let p=0,h=l.length;p<h;p++)l[p].call(this,t)}}}const yt="2.7.0",or=1/8,Zt=typeof window!="undefined",Zn=Zt&&/Mac/.test(navigator.platform),mr=!(Zt&&"PointerEvent"in window);let $n,ms,Ms,hu,Ui,ti,mi,Wh,qf,fu,hc,jd,_m,Ry,Vc,Em,Zf,Xe,kt,on,Nt,rn,Sr;class jr extends Jo{static install(t){$n=t.THREE,ms=Object.freeze(new $n.Vector3(0,0,0)),Ms=Object.freeze(new $n.Vector3(0,1,0)),hu=Object.freeze(new $n.Vector3(0,0,1)),Ui=new $n.Vector2,ti=new $n.Vector3,mi=new $n.Vector3,Wh=new $n.Vector3,qf=new $n.Vector3,fu=new $n.Vector3,hc=new $n.Vector3,jd=new $n.Vector3,_m=new $n.Vector3,Ry=new $n.Vector3,Vc=new $n.Spherical,Em=new $n.Spherical,Zf=new $n.Box3,Xe=new $n.Box3,kt=new $n.Sphere,on=new $n.Quaternion,Nt=new $n.Quaternion,rn=new $n.Matrix4,Sr=new $n.Raycaster}static get ACTION(){return It}constructor(t,r){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=It.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Ii.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new $n.Vector3,this._focalOffsetVelocity=new $n.Vector3,this._zoomVelocity={value:0},this._truckInternal=(N,V,Q)=>{let K,X;if(Fo(this._camera)){const oe=ti.copy(this._camera.position).sub(this._target),ae=this._camera.getEffectiveFOV()*wn,ge=oe.length()*Math.tan(ae*.5);K=this.truckSpeed*N*ge/this._elementRect.height,X=this.truckSpeed*V*ge/this._elementRect.height}else if(et(this._camera)){const oe=this._camera;K=N*(oe.right-oe.left)/oe.zoom/this._elementRect.width,X=V*(oe.top-oe.bottom)/oe.zoom/this._elementRect.height}else return;this.verticalDragToForward?(Q?this.setFocalOffset(this._focalOffsetEnd.x+K,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(K,0,!0),this.forward(-X,!0)):Q?this.setFocalOffset(this._focalOffsetEnd.x+K,this._focalOffsetEnd.y+X,this._focalOffsetEnd.z,!0):this.truck(K,X,!0)},this._rotateInternal=(N,V)=>{const Q=Re*this.azimuthRotateSpeed*N/this._elementRect.height,K=Re*this.polarRotateSpeed*V/this._elementRect.height;this.rotate(Q,K,!0)},this._dollyInternal=(N,V,Q)=>{const K=Math.pow(.95,-N*this.dollySpeed),X=this._sphericalEnd.radius,oe=this._sphericalEnd.radius*K,ae=$n.MathUtils.clamp(oe,this.minDistance,this.maxDistance),ge=ae-oe;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(oe,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(ge,!0),this._dollyToNoClamp(ae,!0)):this._dollyToNoClamp(ae,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?oe:ae)-X,this._dollyControlCoord.set(V,Q)),this._lastDollyDirection=Math.sign(-N)},this._zoomInternal=(N,V,Q)=>{const K=Math.pow(.95,N*this.dollySpeed),X=this._zoom,oe=this._zoom*K;this.zoomTo(oe,!0),this.dollyToCursor&&(this._changedZoom+=oe-X,this._dollyControlCoord.set(V,Q))},typeof $n=="undefined"&&hr.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new $n.Quaternion().setFromUnitVectors(this._camera.up,Ms),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=It.NONE,this._target=new $n.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new $n.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new $n.Spherical().setFromVector3(ti.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new $n.Vector3,new $n.Vector3,new $n.Vector3,new $n.Vector3],this._updateNearPlaneCorners(),this._boundary=new $n.Box3(new $n.Vector3(-1/0,-1/0,-1/0),new $n.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new $n.Vector2,this.mouseButtons={left:It.ROTATE,middle:It.DOLLY,right:It.TRUCK,wheel:Fo(this._camera)?It.DOLLY:et(this._camera)?It.ZOOM:It.NONE},this.touches={one:It.TOUCH_ROTATE,two:Fo(this._camera)?It.TOUCH_DOLLY_TRUCK:et(this._camera)?It.TOUCH_ZOOM_TRUCK:It.NONE,three:It.TOUCH_TRUCK};const o=new $n.Vector2,l=new $n.Vector2,p=new $n.Vector2,h=N=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const K=this._domElement.getBoundingClientRect(),X=N.clientX/K.width,oe=N.clientY/K.height;if(X<this._interactiveArea.left||X>this._interactiveArea.right||oe<this._interactiveArea.top||oe>this._interactiveArea.bottom)return}const V=N.pointerType!=="mouse"?null:(N.buttons&An.LEFT)===An.LEFT?An.LEFT:(N.buttons&An.MIDDLE)===An.MIDDLE?An.MIDDLE:(N.buttons&An.RIGHT)===An.RIGHT?An.RIGHT:null;if(V!==null){const K=this._findPointerByMouseButton(V);K&&this._disposePointer(K)}if((N.buttons&An.LEFT)===An.LEFT&&this._lockedPointer)return;const Q={pointerId:N.pointerId,clientX:N.clientX,clientY:N.clientY,deltaX:0,deltaY:0,mouseButton:V};this._activePointers.push(Q),this._domElement.ownerDocument.removeEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.addEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",b),this._isDragging=!0,L(N)},f=N=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const K=this._domElement.getBoundingClientRect(),X=N.clientX/K.width,oe=N.clientY/K.height;if(X<this._interactiveArea.left||X>this._interactiveArea.right||oe<this._interactiveArea.top||oe>this._interactiveArea.bottom)return}const V=(N.buttons&An.LEFT)===An.LEFT?An.LEFT:(N.buttons&An.MIDDLE)===An.MIDDLE?An.MIDDLE:(N.buttons&An.RIGHT)===An.RIGHT?An.RIGHT:null;if(V!==null){const K=this._findPointerByMouseButton(V);K&&this._disposePointer(K)}const Q={pointerId:1,clientX:N.clientX,clientY:N.clientY,deltaX:0,deltaY:0,mouseButton:(N.buttons&An.LEFT)===An.LEFT?An.LEFT:(N.buttons&An.MIDDLE)===An.LEFT?An.MIDDLE:(N.buttons&An.RIGHT)===An.LEFT?An.RIGHT:null};this._activePointers.push(Q),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.addEventListener("mousemove",_),this._domElement.ownerDocument.addEventListener("mouseup",T),this._isDragging=!0,L(N)},A=N=>{N.cancelable&&N.preventDefault();const V=N.pointerId,Q=this._lockedPointer||this._findPointerById(V);if(Q){if(Q.clientX=N.clientX,Q.clientY=N.clientY,Q.deltaX=N.movementX,Q.deltaY=N.movementY,this._state=0,N.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(N.buttons&An.LEFT)===An.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(N.buttons&An.MIDDLE)===An.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(N.buttons&An.RIGHT)===An.RIGHT&&(this._state=this._state|this.mouseButtons.right);O()}},_=N=>{const V=this._lockedPointer||this._findPointerById(1);V&&(V.clientX=N.clientX,V.clientY=N.clientY,V.deltaX=N.movementX,V.deltaY=N.movementY,this._state=0,(this._lockedPointer||(N.buttons&An.LEFT)===An.LEFT)&&(this._state=this._state|this.mouseButtons.left),(N.buttons&An.MIDDLE)===An.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(N.buttons&An.RIGHT)===An.RIGHT&&(this._state=this._state|this.mouseButtons.right),O())},b=N=>{const V=this._findPointerById(N.pointerId);if(!(V&&V===this._lockedPointer)){if(V&&this._disposePointer(V),N.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=It.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=It.NONE;G()}},T=()=>{const N=this._findPointerById(1);N&&N===this._lockedPointer||(N&&this._disposePointer(N),this._state=It.NONE,G())};let B=-1;const F=N=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===It.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const oe=this._domElement.getBoundingClientRect(),ae=N.clientX/oe.width,ge=N.clientY/oe.height;if(ae<this._interactiveArea.left||ae>this._interactiveArea.right||ge<this._interactiveArea.top||ge>this._interactiveArea.bottom)return}if(N.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===It.ROTATE||this.mouseButtons.wheel===It.TRUCK){const oe=performance.now();B-oe<1e3&&this._getClientRect(this._elementRect),B=oe}const V=Zn?-1:-3,Q=N.deltaMode===1?N.deltaY/V:N.deltaY/(V*10),K=this.dollyToCursor?(N.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,X=this.dollyToCursor?(N.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case It.ROTATE:{this._rotateInternal(N.deltaX,N.deltaY),this._isUserControllingRotate=!0;break}case It.TRUCK:{this._truckInternal(N.deltaX,N.deltaY,!1),this._isUserControllingTruck=!0;break}case It.OFFSET:{this._truckInternal(N.deltaX,N.deltaY,!0),this._isUserControllingOffset=!0;break}case It.DOLLY:{this._dollyInternal(-Q,K,X),this._isUserControllingDolly=!0;break}case It.ZOOM:{this._zoomInternal(-Q,K,X),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},P=N=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===jr.ACTION.NONE){const V=N instanceof PointerEvent?N.pointerId:(N instanceof MouseEvent,0),Q=this._findPointerById(V);Q&&this._disposePointer(Q),this._domElement.ownerDocument.removeEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("mouseup",T);return}N.preventDefault()}},L=N=>{if(!this._enabled)return;if(Br(this._activePointers,Ui),this._getClientRect(this._elementRect),o.copy(Ui),l.copy(Ui),this._activePointers.length>=2){const Q=Ui.x-this._activePointers[1].clientX,K=Ui.y-this._activePointers[1].clientY,X=Math.sqrt(Q*Q+K*K);p.set(0,X);const oe=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,ae=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;l.set(oe,ae)}if(this._state=0,!N)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in N&&N.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(N.buttons&An.LEFT)===An.LEFT&&(this._state=this._state|this.mouseButtons.left),(N.buttons&An.MIDDLE)===An.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(N.buttons&An.RIGHT)===An.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&It.ROTATE)===It.ROTATE||(this._state&It.TOUCH_ROTATE)===It.TOUCH_ROTATE||(this._state&It.TOUCH_DOLLY_ROTATE)===It.TOUCH_DOLLY_ROTATE||(this._state&It.TOUCH_ZOOM_ROTATE)===It.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&It.TRUCK)===It.TRUCK||(this._state&It.TOUCH_TRUCK)===It.TOUCH_TRUCK||(this._state&It.TOUCH_DOLLY_TRUCK)===It.TOUCH_DOLLY_TRUCK||(this._state&It.TOUCH_ZOOM_TRUCK)===It.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&It.DOLLY)===It.DOLLY||(this._state&It.TOUCH_DOLLY)===It.TOUCH_DOLLY||(this._state&It.TOUCH_DOLLY_TRUCK)===It.TOUCH_DOLLY_TRUCK||(this._state&It.TOUCH_DOLLY_OFFSET)===It.TOUCH_DOLLY_OFFSET||(this._state&It.TOUCH_DOLLY_ROTATE)===It.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&It.ZOOM)===It.ZOOM||(this._state&It.TOUCH_ZOOM)===It.TOUCH_ZOOM||(this._state&It.TOUCH_ZOOM_TRUCK)===It.TOUCH_ZOOM_TRUCK||(this._state&It.TOUCH_ZOOM_OFFSET)===It.TOUCH_ZOOM_OFFSET||(this._state&It.TOUCH_ZOOM_ROTATE)===It.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&It.OFFSET)===It.OFFSET||(this._state&It.TOUCH_OFFSET)===It.TOUCH_OFFSET||(this._state&It.TOUCH_DOLLY_OFFSET)===It.TOUCH_DOLLY_OFFSET||(this._state&It.TOUCH_ZOOM_OFFSET)===It.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},O=()=>{if(!this._enabled)return;Br(this._activePointers,Ui);const V=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,Q=V?-V.deltaX:l.x-Ui.x,K=V?-V.deltaY:l.y-Ui.y;if(l.copy(Ui),((this._state&It.ROTATE)===It.ROTATE||(this._state&It.TOUCH_ROTATE)===It.TOUCH_ROTATE||(this._state&It.TOUCH_DOLLY_ROTATE)===It.TOUCH_DOLLY_ROTATE||(this._state&It.TOUCH_ZOOM_ROTATE)===It.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(Q,K),this._isUserControllingRotate=!0),(this._state&It.DOLLY)===It.DOLLY||(this._state&It.ZOOM)===It.ZOOM){const X=this.dollyToCursor?(o.x-this._elementRect.x)/this._elementRect.width*2-1:0,oe=this.dollyToCursor?(o.y-this._elementRect.y)/this._elementRect.height*-2+1:0,ae=this.dollyDragInverted?-1:1;(this._state&It.DOLLY)===It.DOLLY?(this._dollyInternal(ae*K*or,X,oe),this._isUserControllingDolly=!0):(this._zoomInternal(ae*K*or,X,oe),this._isUserControllingZoom=!0)}if((this._state&It.TOUCH_DOLLY)===It.TOUCH_DOLLY||(this._state&It.TOUCH_ZOOM)===It.TOUCH_ZOOM||(this._state&It.TOUCH_DOLLY_TRUCK)===It.TOUCH_DOLLY_TRUCK||(this._state&It.TOUCH_ZOOM_TRUCK)===It.TOUCH_ZOOM_TRUCK||(this._state&It.TOUCH_DOLLY_OFFSET)===It.TOUCH_DOLLY_OFFSET||(this._state&It.TOUCH_ZOOM_OFFSET)===It.TOUCH_ZOOM_OFFSET||(this._state&It.TOUCH_DOLLY_ROTATE)===It.TOUCH_DOLLY_ROTATE||(this._state&It.TOUCH_ZOOM_ROTATE)===It.TOUCH_ZOOM_ROTATE){const X=Ui.x-this._activePointers[1].clientX,oe=Ui.y-this._activePointers[1].clientY,ae=Math.sqrt(X*X+oe*oe),ge=p.y-ae;p.set(0,ae);const ie=this.dollyToCursor?(l.x-this._elementRect.x)/this._elementRect.width*2-1:0,_e=this.dollyToCursor?(l.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&It.TOUCH_DOLLY)===It.TOUCH_DOLLY||(this._state&It.TOUCH_DOLLY_ROTATE)===It.TOUCH_DOLLY_ROTATE||(this._state&It.TOUCH_DOLLY_TRUCK)===It.TOUCH_DOLLY_TRUCK||(this._state&It.TOUCH_DOLLY_OFFSET)===It.TOUCH_DOLLY_OFFSET?(this._dollyInternal(ge*or,ie,_e),this._isUserControllingDolly=!0):(this._zoomInternal(ge*or,ie,_e),this._isUserControllingZoom=!0)}((this._state&It.TRUCK)===It.TRUCK||(this._state&It.TOUCH_TRUCK)===It.TOUCH_TRUCK||(this._state&It.TOUCH_DOLLY_TRUCK)===It.TOUCH_DOLLY_TRUCK||(this._state&It.TOUCH_ZOOM_TRUCK)===It.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(Q,K,!1),this._isUserControllingTruck=!0),((this._state&It.OFFSET)===It.OFFSET||(this._state&It.TOUCH_OFFSET)===It.TOUCH_OFFSET||(this._state&It.TOUCH_DOLLY_OFFSET)===It.TOUCH_DOLLY_OFFSET||(this._state&It.TOUCH_ZOOM_OFFSET)===It.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(Q,K,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},G=()=>{Br(this._activePointers,Ui),l.copy(Ui),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mouseup",T),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",D),this._domElement.ownerDocument.addEventListener("pointerlockerror",k),this._domElement.ownerDocument.addEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",b),L())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",D),this._domElement.ownerDocument.removeEventListener("pointerlockerror",k))};const D=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},k=()=>{this.unlockPointer()};this._addAllEventListeners=N=>{this._domElement=N,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",h),mr&&this._domElement.addEventListener("mousedown",f),this._domElement.addEventListener("pointercancel",b),this._domElement.addEventListener("wheel",F,{passive:!1}),this._domElement.addEventListener("contextmenu",P)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",h),this._domElement.removeEventListener("mousedown",f),this._domElement.removeEventListener("pointercancel",b),this._domElement.removeEventListener("wheel",F,{passive:!1}),this._domElement.removeEventListener("contextmenu",P),this._domElement.ownerDocument.removeEventListener("pointermove",A,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",_),this._domElement.ownerDocument.removeEventListener("pointerup",b),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.removeEventListener("pointerlockchange",D),this._domElement.ownerDocument.removeEventListener("pointerlockerror",k))},this.cancel=()=>{this._state!==It.NONE&&(this._state=It.NONE,this._activePointers.length=0,G())},r&&this.connect(r),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=Rn(t.width,0,1),this._interactiveArea.height=Rn(t.height,0,1),this._interactiveArea.x=Rn(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Rn(t.x,0,1-this._interactiveArea.height)}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}rotate(t,r,o=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,o)}rotateAzimuthTo(t,r=!1){return this.rotateTo(t,this._sphericalEnd.phi,r)}rotatePolarTo(t,r=!1){return this.rotateTo(this._sphericalEnd.theta,t,r)}rotateTo(t,r,o=!1){this._isUserControllingRotate=!1;const l=Rn(t,this.minAzimuthAngle,this.maxAzimuthAngle),p=Rn(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=l,this._sphericalEnd.phi=p,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,o||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const h=!o||hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(h)}dolly(t,r=!1){return this.dollyTo(this._sphericalEnd.radius-t,r)}dollyTo(t,r=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Ii.NONE,this._changedDolly=0,this._dollyToNoClamp(Rn(t,this.minDistance,this.maxDistance),r)}_dollyToNoClamp(t,r=!1){const o=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const h=this._collisionTest(),f=hn(h,this._spherical.radius);if(!(o>t)&&f)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,h)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,r||(this._spherical.radius=this._sphericalEnd.radius);const p=!r||hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}dollyInFixed(t,r=!1){this._targetEnd.add(this._getCameraDirection(qf).multiplyScalar(t)),r||this._target.copy(this._targetEnd);const o=!r||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}zoom(t,r=!1){return this.zoomTo(this._zoomEnd+t,r)}zoomTo(t,r=!1){this._isUserControllingZoom=!1,this._zoomEnd=Rn(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,r||(this._zoom=this._zoomEnd);const o=!r||hn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(o)}pan(t,r,o=!1){return hr.warn("`pan` has been renamed to `truck`"),this.truck(t,r,o)}truck(t,r,o=!1){this._camera.updateMatrix(),fu.setFromMatrixColumn(this._camera.matrix,0),hc.setFromMatrixColumn(this._camera.matrix,1),fu.multiplyScalar(t),hc.multiplyScalar(-r);const l=ti.copy(fu).add(hc),p=mi.copy(this._targetEnd).add(l);return this.moveTo(p.x,p.y,p.z,o)}forward(t,r=!1){ti.setFromMatrixColumn(this._camera.matrix,0),ti.crossVectors(this._camera.up,ti),ti.multiplyScalar(t);const o=mi.copy(this._targetEnd).add(ti);return this.moveTo(o.x,o.y,o.z,r)}elevate(t,r=!1){return ti.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+ti.x,this._targetEnd.y+ti.y,this._targetEnd.z+ti.z,r)}moveTo(t,r,o,l=!1){this._isUserControllingTruck=!1;const p=ti.set(t,r,o).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,p,this.boundaryFriction),this._needsUpdate=!0,l||this._target.copy(this._targetEnd);const h=!l||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(h)}lookInDirectionOf(t,r,o,l=!1){const f=ti.set(t,r,o).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(f.x,f.y,f.z,l)}fitToBox(t,r,{cover:o=!1,paddingLeft:l=0,paddingRight:p=0,paddingBottom:h=0,paddingTop:f=0}={}){const A=[],_=t.isBox3?Zf.copy(t):Zf.setFromObject(t);_.isEmpty()&&(hr.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const b=Kt(this._sphericalEnd.theta,Vt),T=Kt(this._sphericalEnd.phi,Vt);A.push(this.rotateTo(b,T,r));const B=ti.setFromSpherical(this._sphericalEnd).normalize(),F=on.setFromUnitVectors(B,hu),P=hn(Math.abs(B.y),1);P&&F.multiply(Nt.setFromAxisAngle(Ms,b)),F.multiply(this._yAxisUpSpaceInverse);const L=Xe.makeEmpty();mi.copy(_.min).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.min).setX(_.max.x).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.min).setY(_.max.y).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.max).setZ(_.min.z).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.min).setZ(_.max.z).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.max).setY(_.min.y).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.max).setX(_.min.x).applyQuaternion(F),L.expandByPoint(mi),mi.copy(_.max).applyQuaternion(F),L.expandByPoint(mi),L.min.x-=l,L.min.y-=h,L.max.x+=p,L.max.y+=f,F.setFromUnitVectors(hu,B),P&&F.premultiply(Nt.invert()),F.premultiply(this._yAxisUpSpace);const O=L.getSize(ti),G=L.getCenter(mi).applyQuaternion(F);if(Fo(this._camera)){const D=this.getDistanceToFitBox(O.x,O.y,O.z,o);A.push(this.moveTo(G.x,G.y,G.z,r)),A.push(this.dollyTo(D,r)),A.push(this.setFocalOffset(0,0,0,r))}else if(et(this._camera)){const D=this._camera,k=D.right-D.left,N=D.top-D.bottom,V=o?Math.max(k/O.x,N/O.y):Math.min(k/O.x,N/O.y);A.push(this.moveTo(G.x,G.y,G.z,r)),A.push(this.zoomTo(V,r)),A.push(this.setFocalOffset(0,0,0,r))}return Promise.all(A)}fitToSphere(t,r){const o=[],p=t instanceof $n.Sphere?kt.copy(t):jr.createBoundingSphere(t,kt);if(o.push(this.moveTo(p.center.x,p.center.y,p.center.z,r)),Fo(this._camera)){const h=this.getDistanceToFitSphere(p.radius);o.push(this.dollyTo(h,r))}else if(et(this._camera)){const h=this._camera.right-this._camera.left,f=this._camera.top-this._camera.bottom,A=2*p.radius,_=Math.min(h/A,f/A);o.push(this.zoomTo(_,r))}return o.push(this.setFocalOffset(0,0,0,r)),Promise.all(o)}setLookAt(t,r,o,l,p,h,f=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ii.NONE,this._changedDolly=0;const A=mi.set(l,p,h),_=ti.set(t,r,o);this._targetEnd.copy(A),this._sphericalEnd.setFromVector3(_.sub(A).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const b=!f||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold)&&hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}lerpLookAt(t,r,o,l,p,h,f,A,_,b,T,B,F,P=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Ii.NONE,this._changedDolly=0;const L=ti.set(l,p,h),O=mi.set(t,r,o);Vc.setFromVector3(O.sub(L).applyQuaternion(this._yAxisUpSpace));const G=Wh.set(b,T,B),D=mi.set(f,A,_);Em.setFromVector3(D.sub(G).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(L.lerp(G,F));const k=Em.theta-Vc.theta,N=Em.phi-Vc.phi,V=Em.radius-Vc.radius;this._sphericalEnd.set(Vc.radius+V*F,Vc.phi+N*F,Vc.theta+k*F),this.normalizeRotations(),this._needsUpdate=!0,P||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const Q=!P||hn(this._target.x,this._targetEnd.x,this.restThreshold)&&hn(this._target.y,this._targetEnd.y,this.restThreshold)&&hn(this._target.z,this._targetEnd.z,this.restThreshold)&&hn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&hn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&hn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(Q)}setPosition(t,r,o,l=!1){return this.setLookAt(t,r,o,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,l)}setTarget(t,r,o,l=!1){const p=this.getPosition(ti),h=this.setLookAt(p.x,p.y,p.z,t,r,o,l);return this._sphericalEnd.phi=Rn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),h}setFocalOffset(t,r,o,l=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,r,o),this._needsUpdate=!0,l||this._focalOffset.copy(this._focalOffsetEnd);const p=!l||hn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&hn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&hn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(p)}setOrbitPoint(t,r,o){this._camera.updateMatrixWorld(),fu.setFromMatrixColumn(this._camera.matrixWorldInverse,0),hc.setFromMatrixColumn(this._camera.matrixWorldInverse,1),jd.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const l=ti.set(t,r,o),p=l.distanceTo(this._camera.position),h=l.sub(this._camera.position);fu.multiplyScalar(h.x),hc.multiplyScalar(h.y),jd.multiplyScalar(h.z),ti.copy(fu).add(hc).add(jd),ti.z=ti.z+p,this.dollyTo(p,!1),this.setFocalOffset(-ti.x,ti.y,-ti.z,!1),this.moveTo(t,r,o,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,r,o,l){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new $n.Vector4,typeof t=="number"?this._viewport.set(t,r,o,l):this._viewport.copy(t)}getDistanceToFitBox(t,r,o,l=!1){if(Pi(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const p=t/r,h=this._camera.getEffectiveFOV()*wn,f=this._camera.aspect;return((l?p>f:p<f)?r:t/f)*.5/Math.tan(h*.5)+o*.5}getDistanceToFitSphere(t){if(Pi(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const r=this._camera.getEffectiveFOV()*wn,o=Math.atan(Math.tan(r*.5)*this._camera.aspect)*2,l=1<this._camera.aspect?r:o;return t/Math.sin(l*.5)}getTarget(t,r=!0){return(t&&t.isVector3?t:new $n.Vector3).copy(r?this._targetEnd:this._target)}getPosition(t,r=!0){return(t&&t.isVector3?t:new $n.Vector3).setFromSpherical(r?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r?this._targetEnd:this._target)}getSpherical(t,r=!0){return(t&&t instanceof $n.Spherical?t:new $n.Spherical).copy(r?this._sphericalEnd:this._spherical)}getFocalOffset(t,r=!0){return(t&&t.isVector3?t:new $n.Vector3).copy(r?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Re,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Re),this._spherical.theta+=Re*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Re)}reset(t=!1){if(!hn(this._camera.up.x,this._cameraUp0.x)||!hn(this._camera.up.y,this._cameraUp0.y)||!hn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const o=this.getPosition(ti);this.updateCameraUp(),this.setPosition(o.x,o.y,o.z)}const r=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(r)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Ms),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=ti.subVectors(this._target,this._camera.position).normalize(),r=mi.crossVectors(t,this._camera.up);this._camera.up.crossVectors(r,t),this._camera.updateMatrixWorld();const o=this.getPosition(ti);this.updateCameraUp(),this.setPosition(o.x,o.y,o.z)}update(t){const r=this._sphericalEnd.theta-this._spherical.theta,o=this._sphericalEnd.phi-this._spherical.phi,l=this._sphericalEnd.radius-this._spherical.radius,p=_m.subVectors(this._targetEnd,this._target),h=Ry.subVectors(this._focalOffsetEnd,this._focalOffset),f=this._zoomEnd-this._zoom;if(qn(r))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Nr(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,T,1/0,t),this._needsUpdate=!0}if(qn(o))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Nr(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,T,1/0,t),this._needsUpdate=!0}if(qn(l))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const T=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Nr(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,T,this.maxSpeed,t),this._needsUpdate=!0}if(qn(p.x)&&qn(p.y)&&qn(p.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const T=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Fr(this._target,this._targetEnd,this._targetVelocity,T,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(qn(h.x)&&qn(h.y)&&qn(h.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const T=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Fr(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,T,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(qn(f))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const T=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Nr(this._zoom,this._zoomEnd,this._zoomVelocity,T,1/0,t)}if(this.dollyToCursor){if(Fo(this._camera)&&this._changedDolly!==0){const T=this._spherical.radius-this._lastDistance,B=this._camera,F=this._getCameraDirection(qf),P=ti.copy(F).cross(B.up).normalize();P.lengthSq()===0&&(P.x=1);const L=mi.crossVectors(P,F),O=this._sphericalEnd.radius*Math.tan(B.getEffectiveFOV()*wn*.5),D=(this._sphericalEnd.radius-T-this._sphericalEnd.radius)/this._sphericalEnd.radius,k=Wh.copy(this._targetEnd).add(P.multiplyScalar(this._dollyControlCoord.x*O*B.aspect)).add(L.multiplyScalar(this._dollyControlCoord.y*O)),N=ti.copy(this._targetEnd).lerp(k,D),V=this._lastDollyDirection===Ii.IN&&this._spherical.radius<=this.minDistance,Q=this._lastDollyDirection===Ii.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(V||Q)){this._sphericalEnd.radius-=T,this._spherical.radius-=T;const X=mi.copy(F).multiplyScalar(-T);N.add(X)}this._boundary.clampPoint(N,N);const K=mi.subVectors(N,this._targetEnd);this._targetEnd.copy(N),this._target.add(K),this._changedDolly-=T,qn(this._changedDolly)&&(this._changedDolly=0)}else if(et(this._camera)&&this._changedZoom!==0){const T=this._zoom-this._lastZoom,B=this._camera,F=ti.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(B.near+B.far)/(B.near-B.far)).unproject(B),P=mi.set(0,0,-1).applyQuaternion(B.quaternion),L=Wh.copy(F).add(P.multiplyScalar(-F.dot(B.up))),G=-(this._zoom-T-this._zoom)/this._zoom,D=this._getCameraDirection(qf),k=this._targetEnd.dot(D),N=ti.copy(this._targetEnd).lerp(L,G),V=N.dot(D),Q=D.multiplyScalar(V-k);N.sub(Q),this._boundary.clampPoint(N,N);const K=mi.subVectors(N,this._targetEnd);this._targetEnd.copy(N),this._target.add(K),this._changedZoom-=T,qn(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const A=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,A),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!qn(this._focalOffset.x)||!qn(this._focalOffset.y)||!qn(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),fu.setFromMatrixColumn(this._camera.matrix,0),hc.setFromMatrixColumn(this._camera.matrix,1),jd.setFromMatrixColumn(this._camera.matrix,2),fu.multiplyScalar(this._focalOffset.x),hc.multiplyScalar(-this._focalOffset.y),jd.multiplyScalar(this._focalOffset.z),ti.copy(fu).add(hc).add(jd),this._camera.position.add(ti)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),ti.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const b=this._needsUpdate;return b&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):b?(this.dispatchEvent({type:"update"}),qn(r,this.restThreshold)&&qn(o,this.restThreshold)&&qn(l,this.restThreshold)&&qn(p.x,this.restThreshold)&&qn(p.y,this.restThreshold)&&qn(p.z,this.restThreshold)&&qn(h.x,this.restThreshold)&&qn(h.y,this.restThreshold)&&qn(h.z,this.restThreshold)&&qn(f,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!b&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=b,this._needsUpdate=!1,b}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Ur(this.maxDistance),minZoom:this.minZoom,maxZoom:Ur(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Ur(this.maxPolarAngle),minAzimuthAngle:Ur(this.minAzimuthAngle),maxAzimuthAngle:Ur(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:ti.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,r=!1){const o=JSON.parse(t);this.enabled=o.enabled,this.minDistance=o.minDistance,this.maxDistance=Pr(o.maxDistance),this.minZoom=o.minZoom,this.maxZoom=Pr(o.maxZoom),this.minPolarAngle=o.minPolarAngle,this.maxPolarAngle=Pr(o.maxPolarAngle),this.minAzimuthAngle=Pr(o.minAzimuthAngle),this.maxAzimuthAngle=Pr(o.maxAzimuthAngle),this.smoothTime=o.smoothTime,this.draggingSmoothTime=o.draggingSmoothTime,this.dollySpeed=o.dollySpeed,this.truckSpeed=o.truckSpeed,this.dollyToCursor=o.dollyToCursor,this.verticalDragToForward=o.verticalDragToForward,this._target0.fromArray(o.target0),this._position0.fromArray(o.position0),this._zoom0=o.zoom0,this._focalOffset0.fromArray(o.focalOffset0),this.moveTo(o.target[0],o.target[1],o.target[2],r),Vc.setFromVector3(ti.fromArray(o.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Vc.theta,Vc.phi,r),this.dollyTo(Vc.radius,r),this.zoomTo(o.zoom,r),this.setFocalOffset(o.focalOffset[0],o.focalOffset[1],o.focalOffset[2],r),this._needsUpdate=!0}connect(t){if(this._domElement){hr.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",yt),this._addAllEventListeners(t)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(r=>r.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(r=>r.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,r,o){const l=r.lengthSq();if(l===0)return t;const p=mi.copy(r).add(t),f=this._boundary.clampPoint(p,Wh).sub(p),A=f.lengthSq();if(A===0)return t.add(r);if(A===l)return t;if(o===0)return t.add(r).add(f);{const _=1+o*A/r.dot(f);return t.add(mi.copy(r).multiplyScalar(_)).add(f.multiplyScalar(1-o))}}_updateNearPlaneCorners(){if(Fo(this._camera)){const t=this._camera,r=t.near,o=t.getEffectiveFOV()*wn,l=Math.tan(o*.5)*r,p=l*t.aspect;this._nearPlaneCorners[0].set(-p,-l,0),this._nearPlaneCorners[1].set(p,-l,0),this._nearPlaneCorners[2].set(p,l,0),this._nearPlaneCorners[3].set(-p,l,0)}else if(et(this._camera)){const t=this._camera,r=1/t.zoom,o=t.left*r,l=t.right*r,p=t.top*r,h=t.bottom*r;this._nearPlaneCorners[0].set(o,p,0),this._nearPlaneCorners[1].set(l,p,0),this._nearPlaneCorners[2].set(l,h,0),this._nearPlaneCorners[3].set(o,h,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||Pi(this._camera,"_collisionTest"))return t;const o=this._getTargetDirection(qf);rn.lookAt(ms,o,this._camera.up);for(let l=0;l<4;l++){const p=mi.copy(this._nearPlaneCorners[l]);p.applyMatrix4(rn);const h=Wh.addVectors(this._target,p);Sr.set(h,o),Sr.far=this._spherical.radius+1;const f=Sr.intersectObjects(this.colliderMeshes);f.length!==0&&f[0].distance<t&&(t=f[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=r.width,t.height=r.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(r=>{const o=()=>{this.removeEventListener("rest",o),r()};this.addEventListener("rest",o)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return hr.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){hr.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return hr.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){hr.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,r=new $n.Sphere){const o=r,l=o.center;Zf.makeEmpty(),t.traverseVisible(h=>{h.isMesh&&Zf.expandByObject(h)}),Zf.getCenter(l);let p=0;return t.traverseVisible(h=>{if(!h.isMesh)return;const f=h,A=f.geometry.clone();A.applyMatrix4(f.matrixWorld);const b=A.attributes.position;for(let T=0,B=b.count;T<B;T++)ti.fromBufferAttribute(b,T),p=Math.max(p,l.distanceToSquared(ti))}),o.radius=Math.sqrt(p),o}}const Ei=(0,d.forwardRef)((i,t)=>{(0,d.useMemo)(()=>{const Q={Box3:s.Box3,MathUtils:{clamp:s.MathUtils.clamp},Matrix4:s.Matrix4,Quaternion:s.Quaternion,Raycaster:s.Raycaster,Sphere:s.Sphere,Spherical:s.Spherical,Vector2:s.Vector2,Vector3:s.Vector3,Vector4:s.Vector4};jr.install({THREE:Q}),(0,E.e)({CameraControlsImpl:jr})},[]);const V=i,{camera:r,domElement:o,makeDefault:l,onStart:p,onEnd:h,onChange:f,regress:A}=V,_=mn(V,["camera","domElement","makeDefault","onStart","onEnd","onChange","regress"]),b=(0,E.z)(Q=>Q.camera),T=(0,E.z)(Q=>Q.gl),B=(0,E.z)(Q=>Q.invalidate),F=(0,E.z)(Q=>Q.events),P=(0,E.z)(Q=>Q.setEvents),L=(0,E.z)(Q=>Q.set),O=(0,E.z)(Q=>Q.get),G=(0,E.z)(Q=>Q.performance),D=r||b,k=o||F.connected||T.domElement,N=(0,d.useMemo)(()=>new jr(D),[D]);return(0,E.A)((Q,K)=>{N.enabled&&N.update(K)},-1),(0,d.useEffect)(()=>(N.connect(k),()=>void N.disconnect()),[k,N]),(0,d.useEffect)(()=>{const Q=oe=>{B(),A&&G.regress(),f&&f(oe)},K=oe=>{p&&p(oe)},X=oe=>{h&&h(oe)};return N.addEventListener("update",Q),N.addEventListener("controlstart",K),N.addEventListener("controlend",X),N.addEventListener("control",Q),N.addEventListener("transitionstart",Q),N.addEventListener("wake",Q),()=>{N.removeEventListener("update",Q),N.removeEventListener("controlstart",K),N.removeEventListener("controlend",X),N.removeEventListener("control",Q),N.removeEventListener("transitionstart",Q),N.removeEventListener("wake",Q)}},[N,p,h,B,P,A,f]),(0,d.useEffect)(()=>{if(l){const Q=O().controls;return L({controls:N}),()=>L({controls:Q})}},[l,N]),d.createElement("primitive",(0,S.Z)({ref:t,object:N},_))});function yi(i,t){const b=jn({unsuspend:"loadedmetadata",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,playsInline:!0},t),{unsuspend:r,start:o,crossOrigin:l,muted:p,loop:h}=b,f=mn(b,["unsuspend","start","crossOrigin","muted","loop"]),A=(0,E.z)(T=>T.gl),_=(0,jc.Rq)(()=>new Promise((T,B)=>{const F=Object.assign(document.createElement("video"),jn({src:typeof i=="string"&&i||void 0,srcObject:i instanceof MediaStream&&i||void 0,crossOrigin:l,loop:h,muted:p},f)),P=new s.VideoTexture(F);"colorSpace"in P?P.colorSpace=A.outputColorSpace:P.encoding=A.outputEncoding,F.addEventListener(r,()=>T(P))}),[i]);return(0,d.useEffect)(()=>void(o&&_.image.play()),[_,o]),_}var Ni=y(25108);const Ai=new s.Vector3(0,0,-1),Ri=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Vector3,o=new s.Vector3,l=new s.Vector3;return function(p,h,f,A){return i.copy(p),t.copy(h),r.copy(f),o.copy(t).sub(i),l.copy(r).sub(i),A.crossVectors(l,o).normalize()}}();function ks(i,t){return i.clone().add(t).multiplyScalar(.5)}const zs=d.forwardRef((G,O)=>{var D=G,{points:i=Cs.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:t,facialTransformationMatrix:r,faceBlendshapes:o,offset:l,offsetScalar:p=80,width:h,height:f,depth:A=1,verticalTri:_=[159,386,152],origin:b,eyes:T=!0,eyesAsOrigin:B=!1,debug:F=!1,children:P}=D,L=mn(D,["points","face","facialTransformationMatrix","faceBlendshapes","offset","offsetScalar","width","height","depth","verticalTri","origin","eyes","eyesAsOrigin","debug","children"]);var k;t&&(i=t.keypoints,Ni.warn("Facemesh `face` prop is deprecated: use `points` instead"));const N=d.useRef(null),V=d.useRef(null),Q=d.useRef(null),K=d.useRef(null),X=d.useRef(null),oe=d.useRef(null),ae=d.useRef(null),[ge]=d.useState(()=>new s.Vector3),[ie]=d.useState(()=>new s.Object3D),[_e]=d.useState(()=>new s.Quaternion),[me]=d.useState(()=>new s.Vector3),{invalidate:we}=(0,E.z)();d.useEffect(()=>{var Se;(Se=X.current)==null||Se.geometry.setIndex(Cs.TRIANGULATION)},[]);const[ke]=d.useState(()=>new s.Vector3);d.useEffect(()=>{var Se,xe;const Ee=(Se=X.current)==null?void 0:Se.geometry;if(!Ee)return;if(Ee.setFromPoints(i),Ee.setDrawRange(0,Cs.TRIANGULATION.length),r)if(ie.matrix.fromArray(r.data),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.rotation.y*=-1,ie.rotation.z*=-1,_e.setFromEuler(ie.rotation),l){var le;ie.position.y*=-1,ie.position.z*=-1,(le=N.current)==null||le.position.copy(ie.position.divideScalar(p))}else{var ye;(ye=N.current)==null||ye.position.set(0,0,0)}else Ri(i[_[0]],i[_[1]],i[_[2]],ge),_e.setFromUnitVectors(Ai,ge);const Be=_e.clone().invert();if(Ee.computeBoundingBox(),F&&we(),Ee.center(),Ee.applyQuaternion(Be),(xe=K.current)==null||xe.setRotationFromQuaternion(_e),T){if(!o)Ni.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(oe.current&&ae.current&&Q.current)if(B){const be=oe.current._computeSphere(Ee),je=ae.current._computeSphere(Ee);b=ks(be.center,je.center).negate(),oe.current._update(Ee,o,be),ae.current._update(Ee,o,je)}else oe.current._update(Ee,o),ae.current._update(Ee,o)}if(Q.current){if(b!==void 0)if(typeof b=="number"){const be=Ee.getAttribute("position");me.set(-be.getX(b),-be.getY(b),-be.getZ(b))}else b.isVector3&&me.copy(b);else me.setScalar(0);Q.current.position.copy(me)}if(V.current){let be=1;(h||f||A)&&(Ee.boundingBox.getSize(ke),h&&(be=h/ke.x),f&&(be=f/ke.y),A&&(be=A/ke.z)),V.current.scale.setScalar(be!==1?be:1)}Ee.computeVertexNormals(),Ee.attributes.position.needsUpdate=!0},[i,r,o,ie,l,p,h,f,A,_,b,T,F,we,ge,_e,ke,me]);const De=d.useMemo(()=>({outerRef:K,meshRef:X,eyeRightRef:oe,eyeLeftRef:ae}),[]);d.useImperativeHandle(O,()=>De,[De]);const[Ne]=d.useState(()=>new s.Vector3),Ge=(k=X.current)==null?void 0:k.geometry.boundingBox,Ye=(Ge==null?void 0:Ge.getSize(Ne).z)||1;return d.createElement("group",L,d.createElement("group",{ref:N},d.createElement("group",{ref:K},d.createElement("group",{ref:V},F?d.createElement(d.Fragment,null,d.createElement("axesHelper",{args:[Ye]}),d.createElement(Nc,{points:[[0,0,0],[0,0,-Ye]],color:65535})):null,d.createElement("group",{ref:Q},T&&o&&d.createElement("group",{name:"eyes"},d.createElement(Cp,{side:"left",ref:oe,debug:F}),d.createElement(Cp,{side:"right",ref:ae,debug:F})),d.createElement("mesh",{ref:X,name:"face"},P,F?d.createElement(d.Fragment,null,Ge&&d.createElement("box3Helper",{args:[Ge]})):null))))))}),Va={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},Cp=d.forwardRef(({side:i,debug:t=!0},r)=>{const o=d.useRef(null),l=d.useRef(null),[p]=d.useState(()=>new s.Sphere),h=d.useCallback(T=>{const B=T.getAttribute("position"),P=Va.contourLandmarks[i].map(L=>new s.Vector3(B.getX(L),B.getY(L),B.getZ(L)));return p.center.set(0,0,0),P.forEach(L=>p.center.add(L)),p.center.divideScalar(P.length),p.radius=P[0].sub(P[1]).length()/2,p},[p,i]),[f]=d.useState(()=>new s.Euler),A=d.useCallback((T,B,F)=>{if(o.current){var P;(P=F)!==null&&P!==void 0||(F=h(T)),o.current.position.copy(F.center),o.current.scale.setScalar(F.radius)}if(B&&l.current){const L=Va.blendshapes[i],O=B.categories[L[0]].score,G=B.categories[L[1]].score,D=B.categories[L[2]].score,k=B.categories[L[3]].score,N=Va.fov.horizontal*s.MathUtils.DEG2RAD,V=Va.fov.vertical*s.MathUtils.DEG2RAD,Q=N*.5*(k-D),K=V*.5*(O-G)*(i==="left"?1:-1);f.set(Q,K,0),l.current.setRotationFromEuler(f)}},[h,i,f]),_=d.useMemo(()=>({eyeMeshRef:o,irisDirRef:l,_computeSphere:h,_update:A}),[h,A]);d.useImperativeHandle(r,()=>_,[_]);const b=Va.color[i];return d.createElement("group",null,d.createElement("group",{ref:o},t&&d.createElement("axesHelper",null),d.createElement("group",{ref:l},d.createElement(d.Fragment,null,t&&d.createElement(Nc,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:b})))))}),Cs={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}};var Wi=y(10203);const X0=(0,d.createContext)({}),Gs={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function Vh({basePath:i=Gs.basePath,options:t=Gs.options,children:r}){const o=JSON.stringify(t),l=(0,jc.Rq)(()=>rs(this,null,function*(){return yield Wi.n.forVisionTasks(i).then(p=>Wi.jr.createFromOptions(p,t))}),[i,o]);return(0,d.useEffect)(()=>()=>{l==null||l.close(),(0,jc.ZH)([i,o])},[l,i,o]),d.createElement(X0.Provider,{value:l},r)}function Fy(){return(0,d.useContext)(X0)}function $f(i,t){return i.clone().add(t).multiplyScalar(.5)}function Hd(i,t,r){const o=i.localToWorld(t);return r.worldToLocal(o)}const ml=(0,d.createContext)({}),Qh=(0,d.forwardRef)(({camera:i,autostart:t=!0,webcam:r=!0,webcamVideoTextureSrc:o,manualUpdate:l=!1,manualDetect:p=!1,onVideoFrame:h,smoothTime:f=.25,offset:A=!0,offsetScalar:_=80,eyes:b=!1,eyesAsOrigin:T=!0,depth:B=.15,debug:F=!1,facemesh:P,makeDefault:L},O)=>{var G,D;const k=(0,E.z)(Be=>Be.scene),N=(0,E.z)(Be=>Be.camera),V=(0,E.z)(Be=>Be.set),Q=(0,E.z)(Be=>Be.get),K=i||N,X=(0,d.useRef)(null),oe=(0,d.useRef)(null),[ae]=(0,d.useState)(()=>new s.Object3D),[ge]=(0,d.useState)(()=>new s.Vector3),[ie]=(0,d.useState)(()=>new s.Vector3),[_e]=(0,d.useState)(()=>new s.Vector3),[me]=(0,d.useState)(()=>new s.Vector3),we=(0,d.useCallback)(()=>{ae.parent=K.parent;const Be=oe.current;if(Be){const{outerRef:be,eyeRightRef:je,eyeLeftRef:Et}=Be;if(je.current&&Et.current){const{irisDirRef:Ft}=je.current,{irisDirRef:Tt}=Et.current;Ft.current&&Tt.current&&be.current&&(ge.copy(Hd(Ft.current,new s.Vector3(0,0,0),be.current)),ie.copy(Hd(Tt.current,new s.Vector3(0,0,0),be.current)),ae.position.copy(Hd(be.current,$f(ge,ie),K.parent||k)),_e.copy(Hd(Ft.current,new s.Vector3(0,0,1),be.current)),me.copy(Hd(Tt.current,new s.Vector3(0,0,1),be.current)),ae.lookAt(be.current.localToWorld($f(_e,me))))}else be.current&&(ae.position.copy(Hd(be.current,new s.Vector3(0,0,0),K.parent||k)),ae.lookAt(be.current.localToWorld(new s.Vector3(0,0,1))))}return ae},[K,ie,me,ge,_e,k,ae]),[ke]=(0,d.useState)(()=>new s.Object3D),De=(0,d.useCallback)(function(Be,be){if(K){var je;(je=be)!==null&&je!==void 0||(be=we()),f>0?(ap.damp3(ke.position,be.position,f,Be,void 0,void 0,1e-9),ap.dampE(ke.rotation,be.rotation,f,Be,void 0,void 0,1e-9)):(ke.position.copy(be.position),ke.rotation.copy(be.rotation)),K.position.copy(ke.position),K.rotation.copy(ke.rotation)}},[K,we,f,ke.position,ke.rotation]),[Ne,Ge]=(0,d.useState)(),Ye=Fy(),Se=(0,d.useCallback)((Be,be)=>{const je=Ye==null?void 0:Ye.detectForVideo(Be,be);Ge(je)},[Ye]);(0,E.A)((Be,be)=>{l||De(be)});const xe=(0,d.useMemo)(()=>Object.assign(Object.create(s.EventDispatcher.prototype),{detect:Se,computeTarget:we,update:De,facemeshApiRef:oe,webcamApiRef:X,play:()=>{var Be;(Be=X.current)==null||(Be=Be.videoTextureApiRef.current)==null||Be.texture.source.data.play()},pause:()=>{var Be;(Be=X.current)==null||(Be=Be.videoTextureApiRef.current)==null||Be.texture.source.data.pause()}}),[Se,we,De]);(0,d.useImperativeHandle)(O,()=>xe,[xe]),(0,d.useEffect)(()=>{const Be=be=>{p||Se(be.texture.source.data,be.time),h&&h(be)};return xe.addEventListener("videoFrame",Be),()=>{xe.removeEventListener("videoFrame",Be)}},[xe,Se,Ye,p,h]),(0,d.useEffect)(()=>{if(L){const Be=Q().controls;return V({controls:xe}),()=>V({controls:Be})}},[L,xe,Q,V]);const Ee=Ne==null?void 0:Ne.faceLandmarks[0],le=Ne==null||(G=Ne.facialTransformationMatrixes)==null?void 0:G[0],ye=Ne==null||(D=Ne.faceBlendshapes)==null?void 0:D[0];return d.createElement(ml.Provider,{value:xe},r&&d.createElement(d.Suspense,{fallback:null},d.createElement(fc,{ref:X,autostart:t,videoTextureSrc:o})),d.createElement(zs,(0,S.Z)({ref:oe},P,{points:Ee,depth:B,facialTransformationMatrix:le,faceBlendshapes:ye,eyes:b,eyesAsOrigin:T,offset:A,offsetScalar:_,debug:F,"rotation-z":Math.PI,visible:F}),d.createElement("meshBasicMaterial",{side:s.DoubleSide})))}),bm=()=>(0,d.useContext)(ml),fc=(0,d.forwardRef)(({videoTextureSrc:i,autostart:t=!0},r)=>{const o=(0,d.useRef)(null),l=bm(),p=(0,jc.Rq)(()=>rs(this,null,function*(){return i?Promise.resolve(null):yield navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})}),[i]);(0,d.useEffect)(()=>(l.dispatchEvent({type:"stream",stream:p}),()=>{p==null||p.getTracks().forEach(f=>f.stop()),(0,jc.ZH)([i])}),[p,l,i]);const h=(0,d.useMemo)(()=>({videoTextureApiRef:o}),[]);return(0,d.useImperativeHandle)(r,()=>h,[h]),d.createElement(d.Suspense,{fallback:null},d.createElement(Oy,{ref:o,src:i||p,start:t}))}),Oy=(0,d.forwardRef)(({src:i,start:t},r)=>{const o=yi(i,{start:t}),l=o.source.data,p=bm(),h=(0,d.useCallback)(A=>{p.dispatchEvent({type:"videoFrame",texture:o,time:A})},[o,p]);jE(l,h);const f=(0,d.useMemo)(()=>({texture:o}),[o]);return(0,d.useImperativeHandle)(r,()=>f,[f]),d.createElement(d.Fragment,null)}),jE=(i,t)=>{(0,d.useEffect)(()=>{if(!i||!i.requestVideoFrameCallback)return;let r;function o(...l){t(...l),r=i.requestVideoFrameCallback(o)}return i.requestVideoFrameCallback(o),()=>i.cancelVideoFrameCallback(r)},[i,t])},A2=i=>(i==null?void 0:i.current)instanceof s.Object3D,dM=d.createContext(null);function hM(){return d.useContext(dM)}function V4({points:i=50}){const{path:t}=hM(),[r,o]=d.useState([]),[l]=d.useState(()=>new s.MeshBasicMaterial({color:"black"})),[p]=d.useState(()=>new s.SphereGeometry(.025,16,16)),h=d.useRef([]);return d.useEffect(()=>{t.curves!==h.current&&(o(t.getPoints(i)),h.current=t.curves)}),d.createElement(d.Fragment,null,r.map((f,A)=>d.createElement("mesh",{key:A,material:l,geometry:p,position:[f.x,f.y,f.z]})))}const Q4=d.forwardRef((F,B)=>{var P=F,{children:i,curves:t=[],object:r,debug:o=!1,smooth:l=!1,focus:p,offset:h=void 0,eps:f=1e-5,damping:A=.1,focusDamping:_=.1,maxSpeed:b=1/0}=P,T=mn(P,["children","curves","object","debug","smooth","focus","offset","eps","damping","focusDamping","maxSpeed"]);const{camera:L}=(0,E.z)(),O=d.useRef(),[G]=d.useState(()=>new s.CurvePath),D=d.useRef(h!=null?h:0),k=d.useMemo(()=>({focus:p,object:(r==null?void 0:r.current)instanceof s.Object3D?r:{current:L},path:G,current:D.current,offset:D.current,point:new s.Vector3,tangent:new s.Vector3,next:new s.Vector3}),[p,r]);d.useLayoutEffect(()=>{var Q;G.curves=[];const K=t.length>0?t:(Q=O.current)==null?void 0:Q.__r3f.objects;for(var X=0;X<K.length;X++)G.add(K[X]);if(l){const oe=G.getPoints(typeof l=="number"?l:1),ae=new s.CatmullRomCurve3(oe);G.curves=[ae]}G.updateArcLengths()}),d.useImperativeHandle(B,()=>O.current,[]),d.useLayoutEffect(()=>{D.current=El.repeat(D.current,1)},[h]);let N=0;const[V]=d.useState(()=>new s.Vector3);return(0,E.A)((Q,K)=>{if(N=k.offset,ap.damp(D,"current",h!==void 0?h:k.current,A,K,b,void 0,f),k.offset=El.repeat(D.current,1),G.getCurveLengths().length>0){G.getPointAt(k.offset,k.point),G.getTangentAt(k.offset,k.tangent).normalize(),G.getPointAt(El.repeat(D.current-(N-k.offset),1),k.next);const X=(r==null?void 0:r.current)instanceof s.Object3D?r.current:L;X.position.copy(k.point),p&&ap.dampLookAt(X,A2(p)?p.current.getWorldPosition(V):p,_,K,b,void 0,f)}}),d.createElement("group",(0,S.Z)({ref:O},T),d.createElement(dM.Provider,{value:k},i,o&&d.createElement(V4,null)))});function X4({defaultScene:i,defaultCamera:t,renderPriority:r=1}){const{gl:o,scene:l,camera:p}=(0,E.z)();let h;return(0,E.A)(()=>{h=o.autoClear,r===1&&(o.autoClear=!0,o.render(i,t)),o.autoClear=!1,o.clearDepth(),o.render(l,p),o.autoClear=h},r),d.createElement("group",{onPointerOver:()=>null})}function fM({children:i,renderPriority:t=1}){const{scene:r,camera:o}=(0,E.z)(),[l]=d.useState(()=>new s.Scene);return d.createElement(d.Fragment,null,(0,E.g)(d.createElement(d.Fragment,null,i,d.createElement(X4,{defaultScene:r,defaultCamera:o,renderPriority:t})),l,{events:{priority:t+1}}))}const gM=d.createContext({}),v2=()=>d.useContext(gM),Y4=2*Math.PI,HE=new s.Object3D,mM=new s.Matrix4,[Y0,WE]=[new s.Quaternion,new s.Quaternion],yM=new s.Vector3,AM=new s.Vector3,K4=i=>"minPolarAngle"in i,J4=({alignment:i="bottom-right",margin:t=[80,80],renderPriority:r=1,onUpdate:o,onTarget:l,children:p})=>{const h=(0,E.z)(Q=>Q.size),f=(0,E.z)(Q=>Q.camera),A=(0,E.z)(Q=>Q.controls),_=(0,E.z)(Q=>Q.invalidate),b=d.useRef(null),T=d.useRef(null),B=d.useRef(!1),F=d.useRef(0),P=d.useRef(new s.Vector3(0,0,0)),L=d.useRef(new s.Vector3(0,0,0));d.useEffect(()=>{L.current.copy(f.up)},[f]);const O=d.useCallback(Q=>{B.current=!0,(A||l)&&(P.current=(A==null?void 0:A.target)||(l==null?void 0:l())),F.current=f.position.distanceTo(yM),Y0.copy(f.quaternion),AM.copy(Q).multiplyScalar(F.current).add(yM),HE.lookAt(AM),HE.up.copy(f.up),WE.copy(HE.quaternion),_()},[A,f,l,_]);(0,E.A)((Q,K)=>{if(T.current&&b.current){var X;if(B.current)if(Y0.angleTo(WE)<.01)B.current=!1,K4(A)&&f.up.copy(L.current);else{const oe=K*Y4;Y0.rotateTowards(WE,oe),f.position.set(0,0,1).applyQuaternion(Y0).multiplyScalar(F.current).add(P.current),f.up.set(0,1,0).applyQuaternion(Y0).normalize(),f.quaternion.copy(Y0),o?o():A&&A.update(),_()}mM.copy(f.matrix).invert(),(X=b.current)==null||X.quaternion.setFromRotationMatrix(mM)}});const G=d.useMemo(()=>({tweenCamera:O}),[O]),[D,k]=t,N=i.endsWith("-center")?0:i.endsWith("-left")?-h.width/2+D:h.width/2-D,V=i.startsWith("center-")?0:i.startsWith("top-")?h.height/2-k:-h.height/2+k;return d.createElement(fM,{renderPriority:r},d.createElement(gM.Provider,{value:G},d.createElement(By,{makeDefault:!0,ref:T,position:[0,0,200]}),d.createElement("group",{ref:b,position:[N,V,0]},p)))},Dy={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},q4=["Right","Left","Top","Bottom","Front","Back"],vM=i=>new s.Vector3(...i).multiplyScalar(.38),Z4=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(vM),$4=[.25,.25,.25],_M=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(vM),ew=_M.map(i=>i.toArray().map(t=>t==0?.5:.25)),tw=({hover:i,index:t,font:r="20px Inter var, Arial, sans-serif",faces:o=q4,color:l=Dy.bg,hoverColor:p=Dy.hover,textColor:h=Dy.text,strokeColor:f=Dy.stroke,opacity:A=1})=>{const _=(0,E.z)(T=>T.gl),b=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const B=T.getContext("2d");return B.fillStyle=l,B.fillRect(0,0,T.width,T.height),B.strokeStyle=f,B.strokeRect(0,0,T.width,T.height),B.font=r,B.textAlign="center",B.fillStyle=h,B.fillText(o[t].toUpperCase(),64,76),new s.CanvasTexture(T)},[t,o,r,l,h,f]);return d.createElement("meshBasicMaterial",{map:b,"map-anisotropy":_.capabilities.getMaxAnisotropy()||1,attach:`material-${t}`,color:i?p:"white",transparent:!0,opacity:A})},nw=i=>{const{tweenCamera:t}=v2(),[r,o]=d.useState(null),l=f=>{f.stopPropagation(),o(null)},p=f=>{f.stopPropagation(),t(f.face.normal)},h=f=>{f.stopPropagation(),o(Math.floor(f.faceIndex/2))};return d.createElement("mesh",{onPointerOut:l,onPointerMove:h,onClick:i.onClick||p},[...Array(6)].map((f,A)=>d.createElement(tw,(0,S.Z)({key:A,index:A,hover:r===A},i))),d.createElement("boxGeometry",null))},EM=({onClick:i,dimensions:t,position:r,hoverColor:o=Dy.hover})=>{const{tweenCamera:l}=v2(),[p,h]=d.useState(!1),f=b=>{b.stopPropagation(),h(!1)},A=b=>{b.stopPropagation(),h(!0)},_=b=>{b.stopPropagation(),l(r)};return d.createElement("mesh",{scale:1.01,position:r,onPointerOver:A,onPointerOut:f,onClick:i||_},d.createElement("meshBasicMaterial",{color:p?o:"white",transparent:!0,opacity:.6,visible:p}),d.createElement("boxGeometry",{args:t}))},rw=i=>d.createElement("group",{scale:[60,60,60]},d.createElement(nw,i),_M.map((t,r)=>d.createElement(EM,(0,S.Z)({key:r,position:t,dimensions:ew[r]},i))),Z4.map((t,r)=>d.createElement(EM,(0,S.Z)({key:r,position:t,dimensions:$4},i))));function VE({scale:i=[.8,.05,.05],color:t,rotation:r}){return d.createElement("group",{rotation:r},d.createElement("mesh",{position:[.4,0,0]},d.createElement("boxGeometry",{args:i}),d.createElement("meshBasicMaterial",{color:t,toneMapped:!1})))}function K0(A){var _=A,{onClick:i,font:t,disabled:r,arcStyle:o,label:l,labelColor:p,axisHeadScale:h=1}=_,f=mn(_,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);const b=(0,E.z)(G=>G.gl),T=d.useMemo(()=>{const G=document.createElement("canvas");G.width=64,G.height=64;const D=G.getContext("2d");return D.beginPath(),D.arc(32,32,16,0,2*Math.PI),D.closePath(),D.fillStyle=o,D.fill(),l&&(D.font=t,D.textAlign="center",D.fillStyle=p,D.fillText(l,32,41)),new s.CanvasTexture(G)},[o,l,p,t]),[B,F]=d.useState(!1),P=(l?1:.75)*(B?1.2:1)*h,L=G=>{G.stopPropagation(),F(!0)},O=G=>{G.stopPropagation(),F(!1)};return d.createElement("sprite",(0,S.Z)({scale:P,onPointerOver:r?void 0:L,onPointerOut:r?void 0:i||O},f),d.createElement("spriteMaterial",{map:T,"map-anisotropy":b.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:l?1:.75,toneMapped:!1}))}const iw=T=>{var B=T,{hideNegativeAxes:i,hideAxisHeads:t,disabled:r,font:o="18px Inter var, Arial, sans-serif",axisColors:l=["#ff2060","#20df80","#2080ff"],axisHeadScale:p=1,axisScale:h,labels:f=["X","Y","Z"],labelColor:A="#000",onClick:_}=B,b=mn(B,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);const[F,P,L]=l,{tweenCamera:O}=v2(),G={font:o,disabled:r,labelColor:A,onClick:_,axisHeadScale:p,onPointerDown:r?void 0:D=>{O(D.object.position),D.stopPropagation()}};return d.createElement("group",(0,S.Z)({scale:40},b),d.createElement(VE,{color:F,rotation:[0,0,0],scale:h}),d.createElement(VE,{color:P,rotation:[0,0,Math.PI/2],scale:h}),d.createElement(VE,{color:L,rotation:[0,-Math.PI/2,0],scale:h}),!t&&d.createElement(d.Fragment,null,d.createElement(K0,(0,S.Z)({arcStyle:F,position:[1,0,0],label:f[0]},G)),d.createElement(K0,(0,S.Z)({arcStyle:P,position:[0,1,0],label:f[1]},G)),d.createElement(K0,(0,S.Z)({arcStyle:L,position:[0,0,1],label:f[2]},G)),!i&&d.createElement(d.Fragment,null,d.createElement(K0,(0,S.Z)({arcStyle:F,position:[-1,0,0]},G)),d.createElement(K0,(0,S.Z)({arcStyle:P,position:[0,-1,0]},G)),d.createElement(K0,(0,S.Z)({arcStyle:L,position:[0,0,-1]},G)))))},ow=uc({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new s.Color,sectionColor:new s.Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new s.Vector3,worldPlanePosition:new s.Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      float dist = distance(worldCamProjPosition, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),sw=d.forwardRef((P,F)=>{var L=P,{args:i,cellColor:t="#000000",sectionColor:r="#2080ff",cellSize:o=.5,sectionSize:l=1,followCamera:p=!1,infiniteGrid:h=!1,fadeDistance:f=100,fadeStrength:A=1,cellThickness:_=.5,sectionThickness:b=1,side:T=s.BackSide}=L,B=mn(L,["args","cellColor","sectionColor","cellSize","sectionSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","side"]);(0,E.e)({GridMaterial:ow});const O=d.useRef(null),G=new s.Plane,D=new s.Vector3(0,1,0),k=new s.Vector3(0,0,0);(0,E.A)(Q=>{G.setFromNormalAndCoplanarPoint(D,k).applyMatrix4(O.current.matrixWorld);const K=O.current.material,X=K.uniforms.worldCamProjPosition,oe=K.uniforms.worldPlanePosition;G.projectPoint(Q.camera.position,X.value),oe.value.set(0,0,0).applyMatrix4(O.current.matrixWorld)});const N={cellSize:o,sectionSize:l,cellColor:t,sectionColor:r,cellThickness:_,sectionThickness:b},V={fadeDistance:f,fadeStrength:A,infiniteGrid:h,followCamera:p};return d.createElement("mesh",(0,S.Z)({ref:fr([O,F]),frustumCulled:!1},B),d.createElement("gridMaterial",(0,S.Z)({transparent:!0,"extensions-derivatives":!0,side:T},N,V)),d.createElement("planeGeometry",{args:i}))});function bM(i,{path:t}){const[r]=(0,E.D)(s.CubeTextureLoader,[i],o=>o.setPath(t));return r}bM.preload=(i,{path:t})=>E.D.preload(s.CubeTextureLoader,[i],r=>r.setPath(t));var xM={},aw=function(i,t,r,o,l){var p=new Worker(xM[t]||(xM[t]=URL.createObjectURL(new Blob([i],{type:"text/javascript"}))));return p.onerror=function(h){return l(h.error,null)},p.onmessage=function(h){return l(null,h.data)},p.postMessage(r,o),p},qo=Uint8Array,yl=Uint16Array,eg=Uint32Array,J0=new qo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),q0=new qo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Py=new qo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MM=function(i,t){for(var r=new yl(31),o=0;o<31;++o)r[o]=t+=1<<i[o-1];for(var l=new eg(r[30]),o=1;o<30;++o)for(var p=r[o];p<r[o+1];++p)l[p]=p-r[o]<<5|o;return[r,l]},CM=MM(J0,2),QE=CM[0],_2=CM[1];QE[28]=258,_2[258]=28;for(var SM=MM(q0,0),wM=SM[0],XE=SM[1],Ly=new yl(32768),Ss=0;Ss<32768;++Ss){var tg=(Ss&43690)>>>1|(Ss&21845)<<1;tg=(tg&52428)>>>2|(tg&13107)<<2,tg=(tg&61680)>>>4|(tg&3855)<<4,Ly[Ss]=((tg&65280)>>>8|(tg&255)<<8)>>>1}for(var Wd=function(i,t,r){for(var o=i.length,l=0,p=new yl(t);l<o;++l)++p[i[l]-1];var h=new yl(t);for(l=0;l<t;++l)h[l]=h[l-1]+p[l-1]<<1;var f;if(r){f=new yl(1<<t);var A=15-t;for(l=0;l<o;++l)if(i[l])for(var _=l<<4|i[l],b=t-i[l],T=h[i[l]-1]++<<b,B=T|(1<<b)-1;T<=B;++T)f[Ly[T]>>>A]=_}else for(f=new yl(o),l=0;l<o;++l)i[l]&&(f[l]=Ly[h[i[l]-1]++]>>>15-i[l]);return f},ng=new qo(288),Ss=0;Ss<144;++Ss)ng[Ss]=8;for(var Ss=144;Ss<256;++Ss)ng[Ss]=9;for(var Ss=256;Ss<280;++Ss)ng[Ss]=7;for(var Ss=280;Ss<288;++Ss)ng[Ss]=8;for(var ky=new qo(32),Ss=0;Ss<32;++Ss)ky[Ss]=5;var TM=null,BM=Wd(ng,9,1),IM=null,RM=Wd(ky,5,1),E2=function(i){for(var t=i[0],r=1;r<i.length;++r)i[r]>t&&(t=i[r]);return t},gu=function(i,t,r){var o=t/8|0;return(i[o]|i[o+1]<<8)>>(t&7)&r},b2=function(i,t){var r=t/8|0;return(i[r]|i[r+1]<<8|i[r+2]<<16)>>(t&7)},zy=function(i){return(i/8|0)+(i&7&&1)},rg=function(i,t,r){(t==null||t<0)&&(t=0),(r==null||r>i.length)&&(r=i.length);var o=new(i instanceof yl?yl:i instanceof eg?eg:qo)(r-t);return o.set(i.subarray(t,r)),o},x2=function(i,t,r){var o=i.length;if(!o||r&&!r.l&&o<5)return t||new qo(0);var l=!t||r,p=!r||r.i;r||(r={}),t||(t=new qo(o*3));var h=function(Be){var be=t.length;if(Be>be){var je=new qo(Math.max(be*2,Be));je.set(t),t=je}},f=r.f||0,A=r.p||0,_=r.b||0,b=r.l,T=r.d,B=r.m,F=r.n,P=o*8;do{if(!b){r.f=f=gu(i,A,1);var L=gu(i,A+1,3);if(A+=3,L)if(L==1)b=BM,T=RM,B=9,F=5;else if(L==2){var k=gu(i,A,31)+257,N=gu(i,A+10,15)+4,V=k+gu(i,A+5,31)+1;A+=14;for(var Q=new qo(V),K=new qo(19),X=0;X<N;++X)K[Py[X]]=gu(i,A+X*3,7);A+=N*3;for(var oe=E2(K),ae=(1<<oe)-1,ge=Wd(K,oe,1),X=0;X<V;){var ie=ge[gu(i,A,ae)];A+=ie&15;var O=ie>>>4;if(O<16)Q[X++]=O;else{var _e=0,me=0;for(O==16?(me=3+gu(i,A,3),A+=2,_e=Q[X-1]):O==17?(me=3+gu(i,A,7),A+=3):O==18&&(me=11+gu(i,A,127),A+=7);me--;)Q[X++]=_e}}var we=Q.subarray(0,k),ke=Q.subarray(k);B=E2(we),F=E2(ke),b=Wd(we,B,1),T=Wd(ke,F,1)}else throw"invalid block type";else{var O=zy(A)+4,G=i[O-4]|i[O-3]<<8,D=O+G;if(D>o){if(p)throw"unexpected EOF";break}l&&h(_+G),t.set(i.subarray(O,D),_),r.b=_+=G,r.p=A=D*8;continue}if(A>P){if(p)throw"unexpected EOF";break}}l&&h(_+131072);for(var De=(1<<B)-1,Ne=(1<<F)-1,Ge=A;;Ge=A){var _e=b[b2(i,A)&De],Ye=_e>>>4;if(A+=_e&15,A>P){if(p)throw"unexpected EOF";break}if(!_e)throw"invalid length/literal";if(Ye<256)t[_++]=Ye;else if(Ye==256){Ge=A,b=null;break}else{var Se=Ye-254;if(Ye>264){var X=Ye-257,xe=J0[X];Se=gu(i,A,(1<<xe)-1)+QE[X],A+=xe}var Ee=T[b2(i,A)&Ne],le=Ee>>>4;if(!Ee)throw"invalid distance";A+=Ee&15;var ke=wM[le];if(le>3){var xe=q0[le];ke+=b2(i,A)&(1<<xe)-1,A+=xe}if(A>P){if(p)throw"unexpected EOF";break}l&&h(_+131072);for(var ye=_+Se;_<ye;_+=4)t[_]=t[_-ke],t[_+1]=t[_+1-ke],t[_+2]=t[_+2-ke],t[_+3]=t[_+3-ke];_=ye}}r.l=b,r.p=Ge,r.b=_,b&&(f=1,r.m=B,r.d=T,r.n=F)}while(!f);return _==t.length?t:rg(t,0,_)},Vd=function(i,t,r){r<<=t&7;var o=t/8|0;i[o]|=r,i[o+1]|=r>>>8},Z0=function(i,t,r){r<<=t&7;var o=t/8|0;i[o]|=r,i[o+1]|=r>>>8,i[o+2]|=r>>>16},M2=function(i,t){for(var r=[],o=0;o<i.length;++o)i[o]&&r.push({s:o,f:i[o]});var l=r.length,p=r.slice();if(!l)return[S2,0];if(l==1){var h=new qo(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(V,Q){return V.f-Q.f}),r.push({s:-1,f:25001});var f=r[0],A=r[1],_=0,b=1,T=2;for(r[0]={s:-1,f:f.f+A.f,l:f,r:A};b!=l-1;)f=r[r[_].f<r[T].f?_++:T++],A=r[_!=b&&r[_].f<r[T].f?_++:T++],r[b++]={s:-1,f:f.f+A.f,l:f,r:A};for(var B=p[0].s,o=1;o<l;++o)p[o].s>B&&(B=p[o].s);var F=new yl(B+1),P=C2(r[b-1],F,0);if(P>t){var o=0,L=0,O=P-t,G=1<<O;for(p.sort(function(Q,K){return F[K.s]-F[Q.s]||Q.f-K.f});o<l;++o){var D=p[o].s;if(F[D]>t)L+=G-(1<<P-F[D]),F[D]=t;else break}for(L>>>=O;L>0;){var k=p[o].s;F[k]<t?L-=1<<t-F[k]++-1:++o}for(;o>=0&&L;--o){var N=p[o].s;F[N]==t&&(--F[N],++L)}P=t}return[new qo(F),P]},C2=function(i,t,r){return i.s==-1?Math.max(C2(i.l,t,r+1),C2(i.r,t,r+1)):t[i.s]=r},YE=function(i){for(var t=i.length;t&&!i[--t];);for(var r=new yl(++t),o=0,l=i[0],p=1,h=function(A){r[o++]=A},f=1;f<=t;++f)if(i[f]==l&&f!=t)++p;else{if(!l&&p>2){for(;p>138;p-=138)h(32754);p>2&&(h(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(h(l),--p;p>6;p-=6)h(8304);p>2&&(h(p-3<<5|8208),p=0)}for(;p--;)h(l);p=1,l=i[f]}return[r.subarray(0,o),t]},$0=function(i,t){for(var r=0,o=0;o<t.length;++o)r+=i[o]*t[o];return r},Gy=function(i,t,r){var o=r.length,l=zy(t+2);i[l]=o&255,i[l+1]=o>>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var p=0;p<o;++p)i[l+p+4]=r[p];return(l+4+o)*8},KE=function(i,t,r,o,l,p,h,f,A,_,b){Vd(t,b++,r),++l[256];for(var T=M2(l,15),B=T[0],F=T[1],P=M2(p,15),L=P[0],O=P[1],G=YE(B),D=G[0],k=G[1],N=YE(L),V=N[0],Q=N[1],K=new yl(19),X=0;X<D.length;++X)K[D[X]&31]++;for(var X=0;X<V.length;++X)K[V[X]&31]++;for(var oe=M2(K,7),ae=oe[0],ge=oe[1],ie=19;ie>4&&!ae[Py[ie-1]];--ie);var _e=_+5<<3,me=$0(l,ng)+$0(p,ky)+h,we=$0(l,B)+$0(p,L)+h+14+3*ie+$0(K,ae)+(2*K[16]+3*K[17]+7*K[18]);if(_e<=me&&_e<=we)return Gy(t,b,i.subarray(A,A+_));var ke,De,Ne,Ge;if(Vd(t,b,1+(we<me)),b+=2,we<me){ke=Wd(B,F,0),De=B,Ne=Wd(L,O,0),Ge=L;var Ye=Wd(ae,ge,0);Vd(t,b,k-257),Vd(t,b+5,Q-1),Vd(t,b+10,ie-4),b+=14;for(var X=0;X<ie;++X)Vd(t,b+3*X,ae[Py[X]]);b+=3*ie;for(var Se=[D,V],xe=0;xe<2;++xe)for(var Ee=Se[xe],X=0;X<Ee.length;++X){var le=Ee[X]&31;Vd(t,b,Ye[le]),b+=ae[le],le>15&&(Vd(t,b,Ee[X]>>>5&127),b+=Ee[X]>>>12)}}else ke=TM,De=ng,Ne=IM,Ge=ky;for(var X=0;X<f;++X)if(o[X]>255){var le=o[X]>>>18&31;Z0(t,b,ke[le+257]),b+=De[le+257],le>7&&(Vd(t,b,o[X]>>>23&31),b+=J0[le]);var ye=o[X]&31;Z0(t,b,Ne[ye]),b+=Ge[ye],ye>3&&(Z0(t,b,o[X]>>>5&8191),b+=q0[ye])}else Z0(t,b,ke[o[X]]),b+=De[o[X]];return Z0(t,b,ke[256]),b+De[256]},FM=new eg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),S2=new qo(0),OM=function(i,t,r,o,l,p){var h=i.length,f=new qo(o+h+5*(1+Math.ceil(h/7e3))+l),A=f.subarray(o,f.length-l),_=0;if(!t||h<8)for(var b=0;b<=h;b+=65535){var T=b+65535;T<h?_=Gy(A,_,i.subarray(b,T)):(A[b]=p,_=Gy(A,_,i.subarray(b,h)))}else{for(var B=FM[t-1],F=B>>>13,P=B&8191,L=(1<<r)-1,O=new yl(32768),G=new yl(L+1),D=Math.ceil(r/3),k=2*D,N=function(Bt){return(i[Bt]^i[Bt+1]<<D^i[Bt+2]<<k)&L},V=new eg(25e3),Q=new yl(288),K=new yl(32),X=0,oe=0,b=0,ae=0,ge=0,ie=0;b<h;++b){var _e=N(b),me=b&32767,we=G[_e];if(O[me]=we,G[_e]=me,ge<=b){var ke=h-b;if((X>7e3||ae>24576)&&ke>423){_=KE(i,A,0,V,Q,K,oe,ae,ie,b-ie,_),ae=X=oe=0,ie=b;for(var De=0;De<286;++De)Q[De]=0;for(var De=0;De<30;++De)K[De]=0}var Ne=2,Ge=0,Ye=P,Se=me-we&32767;if(ke>2&&_e==N(b-Se))for(var xe=Math.min(F,ke)-1,Ee=Math.min(32767,b),le=Math.min(258,ke);Se<=Ee&&--Ye&&me!=we;){if(i[b+Ne]==i[b+Ne-Se]){for(var ye=0;ye<le&&i[b+ye]==i[b+ye-Se];++ye);if(ye>Ne){if(Ne=ye,Ge=Se,ye>xe)break;for(var Be=Math.min(Se,ye-2),be=0,De=0;De<Be;++De){var je=b-Se+De+32768&32767,Et=O[je],Ft=je-Et+32768&32767;Ft>be&&(be=Ft,we=je)}}}me=we,we=O[me],Se+=me-we+32768&32767}if(Ge){V[ae++]=268435456|_2[Ne]<<18|XE[Ge];var Tt=_2[Ne]&31,pt=XE[Ge]&31;oe+=J0[Tt]+q0[pt],++Q[257+Tt],++K[pt],ge=b+Ne,++X}else V[ae++]=i[b],++Q[i[b]]}}_=KE(i,A,p,V,Q,K,oe,ae,ie,b-ie,_),!p&&_&7&&(_=Gy(A,_+1,S2))}return rg(f,0,o+zy(_)+l)},DM=null,w2=function(){var i=-1;return{p:function(t){for(var r=i,o=0;o<t.length;++o)r=DM[r&255^t[o]]^r>>>8;i=r},d:function(){return~i}}},PM=function(){var i=1,t=0;return{p:function(r){for(var o=i,l=t,p=r.length,h=0;h!=p;){for(var f=Math.min(h+2655,p);h<f;++h)l+=o+=r[h];o=(o&65535)+15*(o>>16),l=(l&65535)+15*(l>>16)}i=o,t=l},d:function(){return i%=65521,t%=65521,(i&255)<<24|i>>>8<<16|(t&255)<<8|t>>>8}}},T2=function(i,t,r,o,l){return OM(i,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):12+t.mem,r,o,!l)},B2=function(i,t){var r={};for(var o in i)r[o]=i[o];for(var o in t)r[o]=t[o];return r},LM=function(i,t,r){for(var o=i(),l=i.toString(),p=l.slice(l.indexOf("[")+1,l.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<o.length;++h){var f=o[h],A=p[h];if(typeof f=="function"){t+=";"+A+"=";var _=f.toString();if(f.prototype)if(_.indexOf("[native code]")!=-1){var b=_.indexOf(" ",8)+1;t+=_.slice(b,_.indexOf("(",b))}else{t+=_;for(var T in f.prototype)t+=";"+A+".prototype."+T+"="+f.prototype[T].toString()}else t+=_}else r[A]=f}return[t,r]},I2=null,lw=function(i){var t=[];for(var r in i)(i[r]instanceof qo||i[r]instanceof yl||i[r]instanceof eg)&&t.push((i[r]=new i[r].constructor(i[r])).buffer);return t},kM=function(i,t,r,o){var l;if(!I2[r]){for(var p="",h={},f=i.length-1,A=0;A<f;++A)l=LM(i[A],p,h),p=l[0],h=l[1];I2[r]=LM(i[f],p,h)}var _=B2({},I2[r][1]);return aw(I2[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,_,lw(_),o)},JE=function(){return[qo,yl,eg,J0,q0,Py,QE,wM,BM,RM,Ly,Wd,E2,gu,b2,zy,rg,x2,Uy,ig,ZE]},qE=function(){return[qo,yl,eg,J0,q0,Py,_2,XE,TM,ng,IM,ky,Ly,FM,S2,Wd,Vd,Z0,M2,C2,YE,$0,Gy,KE,zy,rg,OM,T2,R2,ig]},cw=function(){return[zM,NM,Js,w2,DM]},pw=function(){return[GM,UM]},uw=function(){return[jM,Js,PM]},dw=function(){return[HM]},ig=function(i){return postMessage(i,[i.buffer])},ZE=function(i){return i&&i.size&&new qo(i.size)},e1=function(i,t,r,o,l,p){var h=kM(r,o,l,function(f,A){h.terminate(),p(f,A)});return h.postMessage([i,t],t.consume?[i.buffer]:[]),function(){h.terminate()}},r6=function(i){return i.ondata=function(t,r){return postMessage([t,r],[t.buffer])},function(t){return i.push(t.data[0],t.data[1])}},i6=function(i,t,r,o,l){var p,h=kM(i,o,l,function(f,A){f?(h.terminate(),t.ondata.call(t,f)):(A[1]&&h.terminate(),t.ondata.call(t,f,A[0],A[1]))});h.postMessage(r),t.push=function(f,A){if(p)throw"stream finished";if(!t.ondata)throw"no stream handler";h.postMessage([f,p=A],[f.buffer])},t.terminate=function(){h.terminate()}},Ju=function(i,t){return i[t]|i[t+1]<<8},Bl=function(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16|i[t+3]<<24)>>>0},$E=function(i,t){return Bl(i,t)+Bl(i,t+4)*4294967296},Js=function(i,t,r){for(;r;++t)i[t]=r,r>>>=8},zM=function(i,t){var r=t.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=t.level<2?4:t.level==9?2:0,i[9]=3,t.mtime!=0&&Js(i,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){i[3]=8;for(var o=0;o<=r.length;++o)i[o+10]=r.charCodeAt(o)}},GM=function(i){if(i[0]!=31||i[1]!=139||i[2]!=8)throw"invalid gzip data";var t=i[3],r=10;t&4&&(r+=i[10]|(i[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!i[r++]);return r+(t&2)},UM=function(i){var t=i.length;return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0},NM=function(i){return 10+(i.filename&&i.filename.length+1||0)},jM=function(i,t){var r=t.level,o=r==0?0:r<6?1:r==9?3:2;i[0]=120,i[1]=o<<6|(o?32-2*o:1)},HM=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function o6(i,t){return!t&&typeof i=="function"&&(t=i,i={}),this.ondata=t,i}var s6=null,a6=null;function hw(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return e1(i,t,[qE],function(o){return ig(R2(o.data[0],o.data[1]))},0,r)}function R2(i,t){return T2(i,t||{},0,0)}var l6=null,c6=null;function WM(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return e1(i,t,[JE],function(o){return ig(Uy(o.data[0],ZE(o.data[1])))},1,r)}function Uy(i,t){return x2(i,t)}var p6=null,u6=null;function d6(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return e1(i,t,[qE,cw,function(){return[VM]}],function(o){return ig(VM(o.data[0],o.data[1]))},2,r)}function VM(i,t){t||(t={});var r=w2(),o=i.length;r.p(i);var l=T2(i,t,NM(t),8),p=l.length;return zM(l,t),Js(l,p-8,r.d()),Js(l,p-4,o),l}var h6=null,f6=null;function fw(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return e1(i,t,[JE,pw,function(){return[eb]}],function(o){return ig(eb(o.data[0]))},3,r)}function eb(i,t){return x2(i.subarray(GM(i),-8),t||new qo(UM(i)))}var g6=null,m6=null;function y6(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return e1(i,t,[qE,uw,function(){return[QM]}],function(o){return ig(QM(o.data[0],o.data[1]))},4,r)}function QM(i,t){t||(t={});var r=PM();r.p(i);var o=T2(i,t,2,4);return jM(o,t),Js(o,o.length-4,r.d()),o}var A6=null,v6=null;function gw(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return e1(i,t,[JE,dw,function(){return[og]}],function(o){return ig(og(o.data[0],ZE(o.data[1])))},5,r)}function og(i,t){return x2((HM(i),i.subarray(2,-4)),t)}var _6=null,E6=null;function b6(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return i[0]==31&&i[1]==139&&i[2]==8?fw(i,t,r):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?WM(i,t,r):gw(i,t,r)}function x6(i,t){return i[0]==31&&i[1]==139&&i[2]==8?eb(i,t):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?Uy(i,t):og(i,t)}var tb=function(i,t,r,o){for(var l in i){var p=i[l],h=t+l;p instanceof qo?r[h]=[p,o]:Array.isArray(p)?r[h]=[p[0],B2(o,p[1])]:tb(p,h+"/",r,o)}},XM=typeof TextEncoder!="undefined"&&new TextEncoder,nb=typeof TextDecoder!="undefined"&&new TextDecoder,mw=0;try{nb.decode(S2,{stream:!0}),mw=1}catch(i){}var yw=function(i){for(var t="",r=0;;){var o=i[r++],l=(o>127)+(o>223)+(o>239);if(r+l>i.length)return[t,rg(i,r-1)];l?l==3?(o=((o&15)<<18|(i[r++]&63)<<12|(i[r++]&63)<<6|i[r++]&63)-65536,t+=String.fromCharCode(55296|o>>10,56320|o&1023)):l&1?t+=String.fromCharCode((o&31)<<6|i[r++]&63):t+=String.fromCharCode((o&15)<<12|(i[r++]&63)<<6|i[r++]&63):t+=String.fromCharCode(o)}},M6=null,C6=null;function F2(i,t){if(t){for(var r=new qo(i.length),o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}if(XM)return XM.encode(i);for(var l=i.length,p=new qo(i.length+(i.length>>1)),h=0,f=function(b){p[h++]=b},o=0;o<l;++o){if(h+5>p.length){var A=new qo(h+8+(l-o<<1));A.set(p),p=A}var _=i.charCodeAt(o);_<128||t?f(_):_<2048?(f(192|_>>6),f(128|_&63)):_>55295&&_<57344?(_=65536+(_&1047552)|i.charCodeAt(++o)&1023,f(240|_>>18),f(128|_>>12&63),f(128|_>>6&63),f(128|_&63)):(f(224|_>>12),f(128|_>>6&63),f(128|_&63))}return rg(p,0,h)}function Aw(i,t){if(t){for(var r="",o=0;o<i.length;o+=16384)r+=String.fromCharCode.apply(null,i.subarray(o,o+16384));return r}else{if(nb)return nb.decode(i);var l=yw(i),p=l[0],h=l[1];if(h.length)throw"invalid utf-8 data";return p}}var S6=function(i){return i==1?3:i<6?2:i==9?1:0},YM=function(i,t){return t+30+Ju(i,t+26)+Ju(i,t+28)},KM=function(i,t,r){var o=Ju(i,t+28),l=Aw(i.subarray(t+46,t+46+o),!(Ju(i,t+8)&2048)),p=t+46+o,h=Bl(i,t+20),f=r&&h==4294967295?vw(i,p):[h,Bl(i,t+24),Bl(i,t+42)],A=f[0],_=f[1],b=f[2];return[Ju(i,t+10),A,_,l,p+Ju(i,t+30)+Ju(i,t+32),b]},vw=function(i,t){for(;Ju(i,t)!=1;t+=4+Ju(i,t+2));return[$E(i,t+12),$E(i,t+4),$E(i,t+20)]},Ny=function(i){var t=0;if(i)for(var r in i){var o=i[r].length;if(o>65535)throw"extra field too long";t+=o+4}return t},O2=function(i,t,r,o,l,p,h,f){var A=o.length,_=r.extra,b=f&&f.length,T=Ny(_);Js(i,t,h!=null?33639248:67324752),t+=4,h!=null&&(i[t++]=20,i[t++]=r.os),i[t]=20,t+=2,i[t++]=r.flag<<1|(p==null&&8),i[t++]=l&&8,i[t++]=r.compression&255,i[t++]=r.compression>>8;var B=new Date(r.mtime==null?Date.now():r.mtime),F=B.getFullYear()-1980;if(F<0||F>119)throw"date not in range 1980-2099";if(Js(i,t,F<<25|B.getMonth()+1<<21|B.getDate()<<16|B.getHours()<<11|B.getMinutes()<<5|B.getSeconds()>>>1),t+=4,p!=null&&(Js(i,t,r.crc),Js(i,t+4,p),Js(i,t+8,r.size)),Js(i,t+12,A),Js(i,t+14,T),t+=16,h!=null&&(Js(i,t,b),Js(i,t+6,r.attrs),Js(i,t+10,h),t+=14),i.set(o,t),t+=A,T)for(var P in _){var L=_[P],O=L.length;Js(i,t,+P),Js(i,t+2,O),i.set(L,t+4),t+=4+O}return b&&(i.set(f,t),t+=b),t},JM=function(i,t,r,o,l){Js(i,t,101010256),Js(i,t+8,r),Js(i,t+10,r),Js(i,t+12,o),Js(i,t+16,l)},w6=null,T6=null,B6=null,I6=null;function R6(i,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";var o={};tb(i,"",o,t);var l=Object.keys(o),p=l.length,h=0,f=0,A=p,_=new Array(p),b=[],T=function(){for(var L=0;L<b.length;++L)b[L]()},B=function(){var L=new qo(f+22),O=h,G=f-h;f=0;for(var D=0;D<A;++D){var k=_[D];try{var N=k.c.length;O2(L,f,k,k.f,k.u,N);var V=30+k.f.length+Ny(k.extra),Q=f+V;L.set(k.c,Q),O2(L,h,k,k.f,k.u,N,f,k.m),h+=16+V+(k.m?k.m.length:0),f=Q+N}catch(K){return r(K,null)}}JM(L,h,_.length,G,O),r(null,L)};p||B();for(var F=function(L){var O=l[L],G=o[O],D=G[0],k=G[1],N=w2(),V=D.length;N.p(D);var Q=F2(O),K=Q.length,X=k.comment,oe=X&&F2(X),ae=oe&&oe.length,ge=Ny(k.extra),ie=k.level==0?0:8,_e=function(me,we){if(me)T(),r(me,null);else{var ke=we.length;_[L]=B2(k,{size:V,crc:N.d(),c:we,f:Q,m:oe,u:K!=O.length||oe&&X.length!=ae,compression:ie}),h+=30+K+ge+ke,f+=76+2*(K+ge)+(ae||0)+ke,--p||B()}};if(K>65535&&_e("filename too long",null),!ie)_e(null,D);else if(V<16e4)try{_e(null,R2(D,k))}catch(me){_e(me,null)}else b.push(hw(D,k,_e))},P=0;P<A;++P)F(P);return T}function F6(i,t){t||(t={});var r={},o=[];tb(i,"",r,t);var l=0,p=0;for(var h in r){var f=r[h],A=f[0],_=f[1],b=_.level==0?0:8,T=F2(h),B=T.length,F=_.comment,P=F&&F2(F),L=P&&P.length,O=Ny(_.extra);if(B>65535)throw"filename too long";var G=b?R2(A,_):A,D=G.length,k=w2();k.p(A),o.push(B2(_,{size:A.length,crc:k.d(),c:G,f:T,m:P,u:B!=h.length||P&&F.length!=L,o:l,compression:b})),l+=30+B+O+D,p+=76+2*(B+O)+(L||0)+D}for(var N=new qo(p+22),V=l,Q=p-l,K=0;K<o.length;++K){var T=o[K];O2(N,T.o,T,T.f,T.u,T.c.length);var X=30+T.f.length+Ny(T.extra);N.set(T.c,T.o+X),O2(N,l,T,T.f,T.u,T.c.length,T.o,T.m),l+=16+X+(T.m?T.m.length:0)}return JM(N,l,o.length,Q,V),N}var O6=null,D6=null,P6=null,L6=null;function k6(i,t){if(typeof t!="function")throw"no callback";for(var r=[],o=function(){for(var B=0;B<r.length;++B)r[B]()},l={},p=i.length-22;Bl(i,p)!=101010256;--p)if(!p||i.length-p>65558){t("invalid zip file",null);return}var h=Ju(i,p+8);h||t(null,{});var f=h,A=Bl(i,p+16),_=A==4294967295;if(_){if(p=Bl(i,p-12),Bl(i,p)!=101075792){t("invalid zip file",null);return}f=h=Bl(i,p+32),A=Bl(i,p+48)}for(var b=function(B){var F=KM(i,A,_),P=F[0],L=F[1],O=F[2],G=F[3],D=F[4],k=F[5],N=YM(i,k);A=D;var V=function(K,X){K?(o(),t(K,null)):(l[G]=X,--h||t(null,l))};if(!P)V(null,rg(i,N,N+L));else if(P==8){var Q=i.subarray(N,N+L);if(L<32e4)try{V(null,Uy(Q,new qo(O)))}catch(K){V(K,null)}else r.push(WM(Q,{size:O},V))}else V("unknown compression type "+P,null)},T=0;T<f;++T)b(T);return o}function z6(i){for(var t={},r=i.length-22;Bl(i,r)!=101010256;--r)if(!r||i.length-r>65558)throw"invalid zip file";var o=Ju(i,r+8);if(!o)return{};var l=Bl(i,r+16),p=l==4294967295;if(p){if(r=Bl(i,r-12),Bl(i,r)!=101075792)throw"invalid zip file";o=Bl(i,r+32),l=Bl(i,r+48)}for(var h=0;h<o;++h){var f=KM(i,l,p),A=f[0],_=f[1],b=f[2],T=f[3],B=f[4],F=f[5],P=YM(i,F);if(l=B,!A)t[T]=rg(i,P,P+_);else if(A==8)t[T]=Uy(i.subarray(P,P+_),new qo(b));else throw"unknown compression type "+A}return t}function D2(i,t,r){const o=r.length-i-1;if(t>=r[o])return o-1;if(t<=r[i])return i;let l=i,p=o,h=Math.floor((l+p)/2);for(;t<r[h]||t>=r[h+1];)t<r[h]?p=h:l=h,h=Math.floor((l+p)/2);return h}function rb(i,t,r,o){const l=[],p=[],h=[];l[0]=1;for(let f=1;f<=r;++f){p[f]=t-o[i+1-f],h[f]=o[i+f]-t;let A=0;for(let _=0;_<f;++_){const b=h[_+1],T=p[f-_],B=l[_]/(b+T);l[_]=A+b*B,A=T*B}l[f]=A}return l}function _w(i,t,r,o){const l=D2(i,o,t),p=rb(l,o,i,t),h=new s.Vector4(0,0,0,0);for(let f=0;f<=i;++f){const A=r[l-i+f],_=p[f],b=A.w*_;h.x+=A.x*b,h.y+=A.y*b,h.z+=A.z*b,h.w+=A.w*_}return h}function Ew(i,t,r,o,l){const p=[];for(let T=0;T<=r;++T)p[T]=0;const h=[];for(let T=0;T<=o;++T)h[T]=p.slice(0);const f=[];for(let T=0;T<=r;++T)f[T]=p.slice(0);f[0][0]=1;const A=p.slice(0),_=p.slice(0);for(let T=1;T<=r;++T){A[T]=t-l[i+1-T],_[T]=l[i+T]-t;let B=0;for(let F=0;F<T;++F){const P=_[F+1],L=A[T-F];f[T][F]=P+L;const O=f[F][T-1]/f[T][F];f[F][T]=B+P*O,B=L*O}f[T][T]=B}for(let T=0;T<=r;++T)h[0][T]=f[T][r];for(let T=0;T<=r;++T){let B=0,F=1;const P=[];for(let L=0;L<=r;++L)P[L]=p.slice(0);P[0][0]=1;for(let L=1;L<=o;++L){let O=0;const G=T-L,D=r-L;T>=L&&(P[F][0]=P[B][0]/f[D+1][G],O=P[F][0]*f[G][D]);const k=G>=-1?1:-G,N=T-1<=D?L-1:r-T;for(let Q=k;Q<=N;++Q)P[F][Q]=(P[B][Q]-P[B][Q-1])/f[D+1][G+Q],O+=P[F][Q]*f[G+Q][D];T<=D&&(P[F][L]=-P[B][L-1]/f[D+1][T],O+=P[F][L]*f[T][D]),h[L][T]=O;const V=B;B=F,F=V}}let b=r;for(let T=1;T<=o;++T){for(let B=0;B<=r;++B)h[T][B]*=b;b*=r-T}return h}function bw(i,t,r,o,l){const p=l<i?l:i,h=[],f=D2(i,o,t),A=Ew(f,o,i,p,t),_=[];for(let b=0;b<r.length;++b){const T=r[b].clone(),B=T.w;T.x*=B,T.y*=B,T.z*=B,_[b]=T}for(let b=0;b<=p;++b){const T=_[f-i].clone().multiplyScalar(A[b][0]);for(let B=1;B<=i;++B)T.add(_[f-i+B].clone().multiplyScalar(A[b][B]));h[b]=T}for(let b=p+1;b<=l+1;++b)h[b]=new s.Vector4(0,0,0);return h}function xw(i,t){let r=1;for(let l=2;l<=i;++l)r*=l;let o=1;for(let l=2;l<=t;++l)o*=l;for(let l=2;l<=i-t;++l)o*=l;return r/o}function Mw(i){const t=i.length,r=[],o=[];for(let p=0;p<t;++p){const h=i[p];r[p]=new s.Vector3(h.x,h.y,h.z),o[p]=h.w}const l=[];for(let p=0;p<t;++p){const h=r[p].clone();for(let f=1;f<=p;++f)h.sub(l[p-f].clone().multiplyScalar(xw(p,f)*o[f]));l[p]=h.divideScalar(o[0])}return l}function Cw(i,t,r,o,l){const p=bw(i,t,r,o,l);return Mw(p)}function G6(i,t,r,o,l,p,h,f){const A=D2(i,p,r),_=D2(t,h,o),b=rb(A,p,i,r),T=rb(_,h,t,o),B=[];for(let P=0;P<=t;++P){B[P]=new Vector4(0,0,0,0);for(let L=0;L<=i;++L){const O=l[A-i+L][_-t+P].clone(),G=O.w;O.x*=G,O.y*=G,O.z*=G,B[P].add(O.multiplyScalar(b[L]))}}const F=new Vector4(0,0,0,0);for(let P=0;P<=t;++P)F.add(B[P].multiplyScalar(T[P]));F.divideScalar(F.w),f.set(F.x,F.y,F.z)}class qM extends s.Curve{constructor(t,r,o,l,p){super(),this.degree=t,this.knots=r,this.controlPoints=[],this.startKnot=l||0,this.endKnot=p||this.knots.length-1;for(let h=0;h<o.length;++h){const f=o[h];this.controlPoints[h]=new s.Vector4(f.x,f.y,f.z,f.w)}}getPoint(t,r){const o=r||new s.Vector3,l=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),p=_w(this.degree,this.knots,this.controlPoints,l);return p.w!=1&&p.divideScalar(p.w),o.set(p.x,p.y,p.z)}getTangent(t,r){const o=r||new s.Vector3,l=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),p=Cw(this.degree,this.knots,this.controlPoints,l,1);return o.copy(p[1]).normalize(),o}}var Qa=y(25108);let Ji,Ma,Qc;class ib extends s.Loader{constructor(t){super(t)}load(t,r,o,l){const p=this,h=p.path===""?s.LoaderUtils.extractUrlBase(t):p.path,f=new s.FileLoader(this.manager);f.setPath(p.path),f.setResponseType("arraybuffer"),f.setRequestHeader(p.requestHeader),f.setWithCredentials(p.withCredentials),f.load(t,function(A){try{r(p.parse(A,h))}catch(_){l?l(_):Qa.error(_),p.manager.itemError(t)}},o,l)}parse(t,r){if(Rw(t))Ji=new Iw().parse(t);else{const l=rC(t);if(!Fw(l))throw new Error("THREE.FBXLoader: Unknown format.");if(eC(l)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+eC(l));Ji=new Bw().parse(l)}const o=new s.TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin);return new Sw(o,this.manager).parse(Ji)}}class Sw{constructor(t,r){this.textureLoader=t,this.manager=r}parse(){Ma=this.parseConnections();const t=this.parseImages(),r=this.parseTextures(t),o=this.parseMaterials(r),l=this.parseDeformers(),p=new ww().parse(l);return this.parseScene(l,p,o),Qc}parseConnections(){const t=new Map;return"Connections"in Ji&&Ji.Connections.connections.forEach(function(o){const l=o[0],p=o[1],h=o[2];t.has(l)||t.set(l,{parents:[],children:[]});const f={ID:p,relationship:h};t.get(l).parents.push(f),t.has(p)||t.set(p,{parents:[],children:[]});const A={ID:l,relationship:h};t.get(p).children.push(A)}),t}parseImages(){const t={},r={};if("Video"in Ji.Objects){const o=Ji.Objects.Video;for(const l in o){const p=o[l],h=parseInt(l);if(t[h]=p.RelativeFilename||p.Filename,"Content"in p){const f=p.Content instanceof ArrayBuffer&&p.Content.byteLength>0,A=typeof p.Content=="string"&&p.Content!=="";if(f||A){const _=this.parseImage(o[l]);r[p.RelativeFilename||p.Filename]=_}}}}for(const o in t){const l=t[o];r[l]!==void 0?t[o]=r[l]:t[o]=t[o].split("\\").pop()}return t}parseImage(t){const r=t.Content,o=t.RelativeFilename||t.Filename,l=o.slice(o.lastIndexOf(".")+1).toLowerCase();let p;switch(l){case"bmp":p="image/bmp";break;case"jpg":case"jpeg":p="image/jpeg";break;case"png":p="image/png";break;case"tif":p="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&Qa.warn("FBXLoader: TGA loader not found, skipping ",o),p="image/tga";break;default:Qa.warn('FBXLoader: Image type "'+l+'" is not supported.');return}if(typeof r=="string")return"data:"+p+";base64,"+r;{const h=new Uint8Array(r);return window.URL.createObjectURL(new Blob([h],{type:p}))}}parseTextures(t){const r=new Map;if("Texture"in Ji.Objects){const o=Ji.Objects.Texture;for(const l in o){const p=this.parseTexture(o[l],t);r.set(parseInt(l),p)}}return r}parseTexture(t,r){const o=this.loadTexture(t,r);o.ID=t.id,o.name=t.attrName;const l=t.WrapModeU,p=t.WrapModeV,h=l!==void 0?l.value:0,f=p!==void 0?p.value:0;if(o.wrapS=h===0?s.RepeatWrapping:s.ClampToEdgeWrapping,o.wrapT=f===0?s.RepeatWrapping:s.ClampToEdgeWrapping,"Scaling"in t){const A=t.Scaling.value;o.repeat.x=A[0],o.repeat.y=A[1]}return o}loadTexture(t,r){let o;const l=this.textureLoader.path,p=Ma.get(t.id).children;p!==void 0&&p.length>0&&r[p[0].ID]!==void 0&&(o=r[p[0].ID],(o.indexOf("blob:")===0||o.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let h;const f=t.FileName.slice(-3).toLowerCase();if(f==="tga"){const A=this.manager.getHandler(".tga");A===null?(Qa.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),h=new s.Texture):(A.setPath(this.textureLoader.path),h=A.load(o))}else f==="psd"?(Qa.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),h=new s.Texture):h=this.textureLoader.load(o);return this.textureLoader.setPath(l),h}parseMaterials(t){const r=new Map;if("Material"in Ji.Objects){const o=Ji.Objects.Material;for(const l in o){const p=this.parseMaterial(o[l],t);p!==null&&r.set(parseInt(l),p)}}return r}parseMaterial(t,r){const o=t.id,l=t.attrName;let p=t.ShadingModel;if(typeof p=="object"&&(p=p.value),!Ma.has(o))return null;const h=this.parseParameters(t,r,o);let f;switch(p.toLowerCase()){case"phong":f=new s.MeshPhongMaterial;break;case"lambert":f=new s.MeshLambertMaterial;break;default:Qa.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',p),f=new s.MeshPhongMaterial;break}return f.setValues(h),f.name=l,f}parseParameters(t,r,o){const l={};t.BumpFactor&&(l.bumpScale=t.BumpFactor.value),t.Diffuse?l.color=new s.Color().fromArray(t.Diffuse.value):t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(l.color=new s.Color().fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(l.displacementScale=t.DisplacementFactor.value),t.Emissive?l.emissive=new s.Color().fromArray(t.Emissive.value):t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(l.emissive=new s.Color().fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(l.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(l.opacity=parseFloat(t.Opacity.value)),l.opacity<1&&(l.transparent=!0),t.ReflectionFactor&&(l.reflectivity=t.ReflectionFactor.value),t.Shininess&&(l.shininess=t.Shininess.value),t.Specular?l.specular=new s.Color().fromArray(t.Specular.value):t.SpecularColor&&t.SpecularColor.type==="Color"&&(l.specular=new s.Color().fromArray(t.SpecularColor.value));const p=this;return Ma.get(o).children.forEach(function(h){const f=h.relationship;switch(f){case"Bump":l.bumpMap=p.getTexture(r,h.ID);break;case"Maya|TEX_ao_map":l.aoMap=p.getTexture(r,h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":l.map=p.getTexture(r,h.ID),l.map!==void 0&&("colorSpace"in l.map?l.map.colorSpace="srgb":l.map.encoding=3001);break;case"DisplacementColor":l.displacementMap=p.getTexture(r,h.ID);break;case"EmissiveColor":l.emissiveMap=p.getTexture(r,h.ID),l.emissiveMap!==void 0&&("colorSpace"in l.emissiveMap?l.emissiveMap.colorSpace="srgb":l.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":l.normalMap=p.getTexture(r,h.ID);break;case"ReflectionColor":l.envMap=p.getTexture(r,h.ID),l.envMap!==void 0&&(l.envMap.mapping=s.EquirectangularReflectionMapping,"colorSpace"in l.envMap?l.envMap.colorSpace="srgb":l.envMap.encoding=3001);break;case"SpecularColor":l.specularMap=p.getTexture(r,h.ID),l.specularMap!==void 0&&("colorSpace"in l.specularMap?l.specularMap.colorSpace="srgb":l.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":l.alphaMap=p.getTexture(r,h.ID),l.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:Qa.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",f);break}}),l}getTexture(t,r){return"LayeredTexture"in Ji.Objects&&r in Ji.Objects.LayeredTexture&&(Qa.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=Ma.get(r).children[0].ID),t.get(r)}parseDeformers(){const t={},r={};if("Deformer"in Ji.Objects){const o=Ji.Objects.Deformer;for(const l in o){const p=o[l],h=Ma.get(parseInt(l));if(p.attrType==="Skin"){const f=this.parseSkeleton(h,o);f.ID=l,h.parents.length>1&&Qa.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),f.geometryID=h.parents[0].ID,t[l]=f}else if(p.attrType==="BlendShape"){const f={id:l};f.rawTargets=this.parseMorphTargets(h,o),f.id=l,h.parents.length>1&&Qa.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[l]=f}}}return{skeletons:t,morphTargets:r}}parseSkeleton(t,r){const o=[];return t.children.forEach(function(l){const p=r[l.ID];if(p.attrType!=="Cluster")return;const h={ID:l.ID,indices:[],weights:[],transformLink:new s.Matrix4().fromArray(p.TransformLink.a)};"Indexes"in p&&(h.indices=p.Indexes.a,h.weights=p.Weights.a),o.push(h)}),{rawBones:o,bones:[]}}parseMorphTargets(t,r){const o=[];for(let l=0;l<t.children.length;l++){const p=t.children[l],h=r[p.ID],f={name:h.attrName,initialWeight:h.DeformPercent,id:h.id,fullWeights:h.FullWeights.a};if(h.attrType!=="BlendShapeChannel")return;f.geoID=Ma.get(parseInt(p.ID)).children.filter(function(A){return A.relationship===void 0})[0].ID,o.push(f)}return o}parseScene(t,r,o){Qc=new s.Group;const l=this.parseModels(t.skeletons,r,o),p=Ji.Objects.Model,h=this;l.forEach(function(A){const _=p[A.ID];h.setLookAtProperties(A,_),Ma.get(A.ID).parents.forEach(function(T){const B=l.get(T.ID);B!==void 0&&B.add(A)}),A.parent===null&&Qc.add(A)}),this.bindSkeleton(t.skeletons,r,l),this.createAmbientLight(),Qc.traverse(function(A){if(A.userData.transformData){A.parent&&(A.userData.transformData.parentMatrix=A.parent.matrix,A.userData.transformData.parentMatrixWorld=A.parent.matrixWorld);const _=tC(A.userData.transformData);A.applyMatrix4(_),A.updateWorldMatrix()}});const f=new Tw().parse();Qc.children.length===1&&Qc.children[0].isGroup&&(Qc.children[0].animations=f,Qc=Qc.children[0]),Qc.animations=f}parseModels(t,r,o){const l=new Map,p=Ji.Objects.Model;for(const h in p){const f=parseInt(h),A=p[h],_=Ma.get(f);let b=this.buildSkeleton(_,t,f,A.attrName);if(!b){switch(A.attrType){case"Camera":b=this.createCamera(_);break;case"Light":b=this.createLight(_);break;case"Mesh":b=this.createMesh(_,r,o);break;case"NurbsCurve":b=this.createCurve(_,r);break;case"LimbNode":case"Root":b=new s.Bone;break;case"Null":default:b=new s.Group;break}b.name=A.attrName?s.PropertyBinding.sanitizeNodeName(A.attrName):"",b.ID=f}this.getTransformData(b,A),l.set(f,b)}return l}buildSkeleton(t,r,o,l){let p=null;return t.parents.forEach(function(h){for(const f in r){const A=r[f];A.rawBones.forEach(function(_,b){if(_.ID===h.ID){const T=p;p=new s.Bone,p.matrixWorld.copy(_.transformLink),p.name=l?s.PropertyBinding.sanitizeNodeName(l):"",p.ID=o,A.bones[b]=p,T!==null&&p.add(T)}})}}),p}createCamera(t){let r,o;if(t.children.forEach(function(l){const p=Ji.Objects.NodeAttribute[l.ID];p!==void 0&&(o=p)}),o===void 0)r=new s.Object3D;else{let l=0;o.CameraProjectionType!==void 0&&o.CameraProjectionType.value===1&&(l=1);let p=1;o.NearPlane!==void 0&&(p=o.NearPlane.value/1e3);let h=1e3;o.FarPlane!==void 0&&(h=o.FarPlane.value/1e3);let f=window.innerWidth,A=window.innerHeight;o.AspectWidth!==void 0&&o.AspectHeight!==void 0&&(f=o.AspectWidth.value,A=o.AspectHeight.value);const _=f/A;let b=45;o.FieldOfView!==void 0&&(b=o.FieldOfView.value);const T=o.FocalLength?o.FocalLength.value:null;switch(l){case 0:r=new s.PerspectiveCamera(b,_,p,h),T!==null&&r.setFocalLength(T);break;case 1:r=new s.OrthographicCamera(-f/2,f/2,A/2,-A/2,p,h);break;default:Qa.warn("THREE.FBXLoader: Unknown camera type "+l+"."),r=new s.Object3D;break}}return r}createLight(t){let r,o;if(t.children.forEach(function(l){const p=Ji.Objects.NodeAttribute[l.ID];p!==void 0&&(o=p)}),o===void 0)r=new s.Object3D;else{let l;o.LightType===void 0?l=0:l=o.LightType.value;let p=16777215;o.Color!==void 0&&(p=new s.Color().fromArray(o.Color.value));let h=o.Intensity===void 0?1:o.Intensity.value/100;o.CastLightOnObject!==void 0&&o.CastLightOnObject.value===0&&(h=0);let f=0;o.FarAttenuationEnd!==void 0&&(o.EnableFarAttenuation!==void 0&&o.EnableFarAttenuation.value===0?f=0:f=o.FarAttenuationEnd.value);const A=1;switch(l){case 0:r=new s.PointLight(p,h,f,A);break;case 1:r=new s.DirectionalLight(p,h);break;case 2:let _=Math.PI/3;o.InnerAngle!==void 0&&(_=s.MathUtils.degToRad(o.InnerAngle.value));let b=0;o.OuterAngle!==void 0&&(b=s.MathUtils.degToRad(o.OuterAngle.value),b=Math.max(b,1)),r=new s.SpotLight(p,h,f,_,b,A);break;default:Qa.warn("THREE.FBXLoader: Unknown light type "+o.LightType.value+", defaulting to a PointLight."),r=new s.PointLight(p,h);break}o.CastShadows!==void 0&&o.CastShadows.value===1&&(r.castShadow=!0)}return r}createMesh(t,r,o){let l,p=null,h=null;const f=[];return t.children.forEach(function(A){r.has(A.ID)&&(p=r.get(A.ID)),o.has(A.ID)&&f.push(o.get(A.ID))}),f.length>1?h=f:f.length>0?h=f[0]:(h=new s.MeshPhongMaterial({color:13421772}),f.push(h)),"color"in p.attributes&&f.forEach(function(A){A.vertexColors=!0}),p.FBX_Deformer?(l=new s.SkinnedMesh(p,h),l.normalizeSkinWeights()):l=new s.Mesh(p,h),l}createCurve(t,r){const o=t.children.reduce(function(p,h){return r.has(h.ID)&&(p=r.get(h.ID)),p},null),l=new s.LineBasicMaterial({color:3342591,linewidth:1});return new s.Line(o,l)}getTransformData(t,r){const o={};"InheritType"in r&&(o.inheritType=parseInt(r.InheritType.value)),"RotationOrder"in r?o.eulerOrder=nC(r.RotationOrder.value):o.eulerOrder="ZYX","Lcl_Translation"in r&&(o.translation=r.Lcl_Translation.value),"PreRotation"in r&&(o.preRotation=r.PreRotation.value),"Lcl_Rotation"in r&&(o.rotation=r.Lcl_Rotation.value),"PostRotation"in r&&(o.postRotation=r.PostRotation.value),"Lcl_Scaling"in r&&(o.scale=r.Lcl_Scaling.value),"ScalingOffset"in r&&(o.scalingOffset=r.ScalingOffset.value),"ScalingPivot"in r&&(o.scalingPivot=r.ScalingPivot.value),"RotationOffset"in r&&(o.rotationOffset=r.RotationOffset.value),"RotationPivot"in r&&(o.rotationPivot=r.RotationPivot.value),t.userData.transformData=o}setLookAtProperties(t,r){"LookAtProperty"in r&&Ma.get(t.ID).children.forEach(function(l){if(l.relationship==="LookAtProperty"){const p=Ji.Objects.Model[l.ID];if("Lcl_Translation"in p){const h=p.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(h),Qc.add(t.target)):t.lookAt(new s.Vector3().fromArray(h))}}})}bindSkeleton(t,r,o){const l=this.parsePoseNodes();for(const p in t){const h=t[p];Ma.get(parseInt(h.ID)).parents.forEach(function(A){if(r.has(A.ID)){const _=A.ID;Ma.get(_).parents.forEach(function(T){o.has(T.ID)&&o.get(T.ID).bind(new s.Skeleton(h.bones),l[T.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in Ji.Objects){const r=Ji.Objects.Pose;for(const o in r)if(r[o].attrType==="BindPose"&&r[o].NbPoseNodes>0){const l=r[o].PoseNode;Array.isArray(l)?l.forEach(function(p){t[p.Node]=new s.Matrix4().fromArray(p.Matrix.a)}):t[l.Node]=new s.Matrix4().fromArray(l.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in Ji&&"AmbientColor"in Ji.GlobalSettings){const t=Ji.GlobalSettings.AmbientColor.value,r=t[0],o=t[1],l=t[2];if(r!==0||o!==0||l!==0){const p=new s.Color(r,o,l);Qc.add(new s.AmbientLight(p,1))}}}}class ww{parse(t){const r=new Map;if("Geometry"in Ji.Objects){const o=Ji.Objects.Geometry;for(const l in o){const p=Ma.get(parseInt(l)),h=this.parseGeometry(p,o[l],t);r.set(parseInt(l),h)}}return r}parseGeometry(t,r,o){switch(r.attrType){case"Mesh":return this.parseMeshGeometry(t,r,o);case"NurbsCurve":return this.parseNurbsGeometry(r)}}parseMeshGeometry(t,r,o){const l=o.skeletons,p=[],h=t.parents.map(function(T){return Ji.Objects.Model[T.ID]});if(h.length===0)return;const f=t.children.reduce(function(T,B){return l[B.ID]!==void 0&&(T=l[B.ID]),T},null);t.children.forEach(function(T){o.morphTargets[T.ID]!==void 0&&p.push(o.morphTargets[T.ID])});const A=h[0],_={};"RotationOrder"in A&&(_.eulerOrder=nC(A.RotationOrder.value)),"InheritType"in A&&(_.inheritType=parseInt(A.InheritType.value)),"GeometricTranslation"in A&&(_.translation=A.GeometricTranslation.value),"GeometricRotation"in A&&(_.rotation=A.GeometricRotation.value),"GeometricScaling"in A&&(_.scale=A.GeometricScaling.value);const b=tC(_);return this.genGeometry(r,f,p,b)}genGeometry(t,r,o,l){const p=new s.BufferGeometry;t.attrName&&(p.name=t.attrName);const h=this.parseGeoNode(t,r),f=this.genBuffers(h),A=new s.Float32BufferAttribute(f.vertex,3);if(A.applyMatrix4(l),p.setAttribute("position",A),f.colors.length>0&&p.setAttribute("color",new s.Float32BufferAttribute(f.colors,3)),r&&(p.setAttribute("skinIndex",new s.Uint16BufferAttribute(f.weightsIndices,4)),p.setAttribute("skinWeight",new s.Float32BufferAttribute(f.vertexWeights,4)),p.FBX_Deformer=r),f.normal.length>0){const _=new s.Matrix3().getNormalMatrix(l),b=new s.Float32BufferAttribute(f.normal,3);b.applyNormalMatrix(_),p.setAttribute("normal",b)}if(f.uvs.forEach(function(_,b){let T="uv"+(b+1).toString();b===0&&(T="uv"),p.setAttribute(T,new s.Float32BufferAttribute(f.uvs[b],2))}),h.material&&h.material.mappingType!=="AllSame"){let _=f.materialIndex[0],b=0;if(f.materialIndex.forEach(function(T,B){T!==_&&(p.addGroup(b,B-b,_),_=T,b=B)}),p.groups.length>0){const T=p.groups[p.groups.length-1],B=T.start+T.count;B!==f.materialIndex.length&&p.addGroup(B,f.materialIndex.length-B,_)}p.groups.length===0&&p.addGroup(0,f.materialIndex.length,f.materialIndex[0])}return this.addMorphTargets(p,t,o,l),p}parseGeoNode(t,r){const o={};if(o.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],o.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(o.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(o.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(o.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){o.uv=[];let l=0;for(;t.LayerElementUV[l];)t.LayerElementUV[l].UV&&o.uv.push(this.parseUVs(t.LayerElementUV[l])),l++}return o.weightTable={},r!==null&&(o.skeleton=r,r.rawBones.forEach(function(l,p){l.indices.forEach(function(h,f){o.weightTable[h]===void 0&&(o.weightTable[h]=[]),o.weightTable[h].push({id:p,weight:l.weights[f]})})})),o}genBuffers(t){const r={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let o=0,l=0,p=!1,h=[],f=[],A=[],_=[],b=[],T=[];const B=this;return t.vertexIndices.forEach(function(F,P){let L,O=!1;F<0&&(F=F^-1,O=!0);let G=[],D=[];if(h.push(F*3,F*3+1,F*3+2),t.color){const k=P2(P,o,F,t.color);A.push(k[0],k[1],k[2])}if(t.skeleton){if(t.weightTable[F]!==void 0&&t.weightTable[F].forEach(function(k){D.push(k.weight),G.push(k.id)}),D.length>4){p||(Qa.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),p=!0);const k=[0,0,0,0],N=[0,0,0,0];D.forEach(function(V,Q){let K=V,X=G[Q];N.forEach(function(oe,ae,ge){if(K>oe){ge[ae]=K,K=oe;const ie=k[ae];k[ae]=X,X=ie}})}),G=k,D=N}for(;D.length<4;)D.push(0),G.push(0);for(let k=0;k<4;++k)b.push(D[k]),T.push(G[k])}if(t.normal){const k=P2(P,o,F,t.normal);f.push(k[0],k[1],k[2])}t.material&&t.material.mappingType!=="AllSame"&&(L=P2(P,o,F,t.material)[0]),t.uv&&t.uv.forEach(function(k,N){const V=P2(P,o,F,k);_[N]===void 0&&(_[N]=[]),_[N].push(V[0]),_[N].push(V[1])}),l++,O&&(B.genFace(r,t,h,L,f,A,_,b,T,l),o++,l=0,h=[],f=[],A=[],_=[],b=[],T=[])}),r}genFace(t,r,o,l,p,h,f,A,_,b){for(let T=2;T<b;T++)t.vertex.push(r.vertexPositions[o[0]]),t.vertex.push(r.vertexPositions[o[1]]),t.vertex.push(r.vertexPositions[o[2]]),t.vertex.push(r.vertexPositions[o[(T-1)*3]]),t.vertex.push(r.vertexPositions[o[(T-1)*3+1]]),t.vertex.push(r.vertexPositions[o[(T-1)*3+2]]),t.vertex.push(r.vertexPositions[o[T*3]]),t.vertex.push(r.vertexPositions[o[T*3+1]]),t.vertex.push(r.vertexPositions[o[T*3+2]]),r.skeleton&&(t.vertexWeights.push(A[0]),t.vertexWeights.push(A[1]),t.vertexWeights.push(A[2]),t.vertexWeights.push(A[3]),t.vertexWeights.push(A[(T-1)*4]),t.vertexWeights.push(A[(T-1)*4+1]),t.vertexWeights.push(A[(T-1)*4+2]),t.vertexWeights.push(A[(T-1)*4+3]),t.vertexWeights.push(A[T*4]),t.vertexWeights.push(A[T*4+1]),t.vertexWeights.push(A[T*4+2]),t.vertexWeights.push(A[T*4+3]),t.weightsIndices.push(_[0]),t.weightsIndices.push(_[1]),t.weightsIndices.push(_[2]),t.weightsIndices.push(_[3]),t.weightsIndices.push(_[(T-1)*4]),t.weightsIndices.push(_[(T-1)*4+1]),t.weightsIndices.push(_[(T-1)*4+2]),t.weightsIndices.push(_[(T-1)*4+3]),t.weightsIndices.push(_[T*4]),t.weightsIndices.push(_[T*4+1]),t.weightsIndices.push(_[T*4+2]),t.weightsIndices.push(_[T*4+3])),r.color&&(t.colors.push(h[0]),t.colors.push(h[1]),t.colors.push(h[2]),t.colors.push(h[(T-1)*3]),t.colors.push(h[(T-1)*3+1]),t.colors.push(h[(T-1)*3+2]),t.colors.push(h[T*3]),t.colors.push(h[T*3+1]),t.colors.push(h[T*3+2])),r.material&&r.material.mappingType!=="AllSame"&&(t.materialIndex.push(l),t.materialIndex.push(l),t.materialIndex.push(l)),r.normal&&(t.normal.push(p[0]),t.normal.push(p[1]),t.normal.push(p[2]),t.normal.push(p[(T-1)*3]),t.normal.push(p[(T-1)*3+1]),t.normal.push(p[(T-1)*3+2]),t.normal.push(p[T*3]),t.normal.push(p[T*3+1]),t.normal.push(p[T*3+2])),r.uv&&r.uv.forEach(function(B,F){t.uvs[F]===void 0&&(t.uvs[F]=[]),t.uvs[F].push(f[F][0]),t.uvs[F].push(f[F][1]),t.uvs[F].push(f[F][(T-1)*2]),t.uvs[F].push(f[F][(T-1)*2+1]),t.uvs[F].push(f[F][T*2]),t.uvs[F].push(f[F][T*2+1])})}addMorphTargets(t,r,o,l){if(o.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const p=this;o.forEach(function(h){h.rawTargets.forEach(function(f){const A=Ji.Objects.Geometry[f.geoID];A!==void 0&&p.genMorphGeometry(t,r,A,l,f.name)})})}genMorphGeometry(t,r,o,l,p){const h=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],f=o.Vertices!==void 0?o.Vertices.a:[],A=o.Indexes!==void 0?o.Indexes.a:[],_=t.attributes.position.count*3,b=new Float32Array(_);for(let P=0;P<A.length;P++){const L=A[P]*3;b[L]=f[P*3],b[L+1]=f[P*3+1],b[L+2]=f[P*3+2]}const T={vertexIndices:h,vertexPositions:b},B=this.genBuffers(T),F=new s.Float32BufferAttribute(B.vertex,3);F.name=p||o.attrName,F.applyMatrix4(l),t.morphAttributes.position.push(F)}parseNormals(t){const r=t.MappingInformationType,o=t.ReferenceInformationType,l=t.Normals.a;let p=[];return o==="IndexToDirect"&&("NormalIndex"in t?p=t.NormalIndex.a:"NormalsIndex"in t&&(p=t.NormalsIndex.a)),{dataSize:3,buffer:l,indices:p,mappingType:r,referenceType:o}}parseUVs(t){const r=t.MappingInformationType,o=t.ReferenceInformationType,l=t.UV.a;let p=[];return o==="IndexToDirect"&&(p=t.UVIndex.a),{dataSize:2,buffer:l,indices:p,mappingType:r,referenceType:o}}parseVertexColors(t){const r=t.MappingInformationType,o=t.ReferenceInformationType,l=t.Colors.a;let p=[];return o==="IndexToDirect"&&(p=t.ColorIndex.a),{dataSize:4,buffer:l,indices:p,mappingType:r,referenceType:o}}parseMaterialIndices(t){const r=t.MappingInformationType,o=t.ReferenceInformationType;if(r==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:o};const l=t.Materials.a,p=[];for(let h=0;h<l.length;++h)p.push(h);return{dataSize:1,buffer:l,indices:p,mappingType:r,referenceType:o}}parseNurbsGeometry(t){if(qM===void 0)return Qa.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new s.BufferGeometry;const r=parseInt(t.Order);if(isNaN(r))return Qa.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new s.BufferGeometry;const o=r-1,l=t.KnotVector.a,p=[],h=t.Points.a;for(let T=0,B=h.length;T<B;T+=4)p.push(new s.Vector4().fromArray(h,T));let f,A;if(t.Form==="Closed")p.push(p[0]);else if(t.Form==="Periodic"){f=o,A=l.length-1-f;for(let T=0;T<o;++T)p.push(p[T])}const b=new qM(o,l,p,f,A).getPoints(p.length*12);return new s.BufferGeometry().setFromPoints(b)}}class Tw{parse(){const t=[],r=this.parseClips();if(r!==void 0)for(const o in r){const l=r[o],p=this.addClip(l);t.push(p)}return t}parseClips(){if(Ji.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const r=this.parseAnimationLayers(t);return this.parseAnimStacks(r)}parseAnimationCurveNodes(){const t=Ji.Objects.AnimationCurveNode,r=new Map;for(const o in t){const l=t[o];if(l.attrName.match(/S|R|T|DeformPercent/)!==null){const p={id:l.id,attr:l.attrName,curves:{}};r.set(p.id,p)}}return r}parseAnimationCurves(t){const r=Ji.Objects.AnimationCurve;for(const o in r){const l={id:r[o].id,times:r[o].KeyTime.a.map(Ow),values:r[o].KeyValueFloat.a},p=Ma.get(l.id);if(p!==void 0){const h=p.parents[0].ID,f=p.parents[0].relationship;f.match(/X/)?t.get(h).curves.x=l:f.match(/Y/)?t.get(h).curves.y=l:f.match(/Z/)?t.get(h).curves.z=l:f.match(/d|DeformPercent/)&&t.has(h)&&(t.get(h).curves.morph=l)}}}parseAnimationLayers(t){const r=Ji.Objects.AnimationLayer,o=new Map;for(const l in r){const p=[],h=Ma.get(parseInt(l));h!==void 0&&(h.children.forEach(function(A,_){if(t.has(A.ID)){const b=t.get(A.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(p[_]===void 0){const T=Ma.get(A.ID).parents.filter(function(B){return B.relationship!==void 0})[0].ID;if(T!==void 0){const B=Ji.Objects.Model[T.toString()];if(B===void 0){Qa.warn("THREE.FBXLoader: Encountered a unused curve.",A);return}const F={modelName:B.attrName?s.PropertyBinding.sanitizeNodeName(B.attrName):"",ID:B.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Qc.traverse(function(P){P.ID===B.id&&(F.transform=P.matrix,P.userData.transformData&&(F.eulerOrder=P.userData.transformData.eulerOrder))}),F.transform||(F.transform=new s.Matrix4),"PreRotation"in B&&(F.preRotation=B.PreRotation.value),"PostRotation"in B&&(F.postRotation=B.PostRotation.value),p[_]=F}}p[_]&&(p[_][b.attr]=b)}else if(b.curves.morph!==void 0){if(p[_]===void 0){const T=Ma.get(A.ID).parents.filter(function(G){return G.relationship!==void 0})[0].ID,B=Ma.get(T).parents[0].ID,F=Ma.get(B).parents[0].ID,P=Ma.get(F).parents[0].ID,L=Ji.Objects.Model[P],O={modelName:L.attrName?s.PropertyBinding.sanitizeNodeName(L.attrName):"",morphName:Ji.Objects.Deformer[T].attrName};p[_]=O}p[_][b.attr]=b}}}),o.set(parseInt(l),p))}return o}parseAnimStacks(t){const r=Ji.Objects.AnimationStack,o={};for(const l in r){const p=Ma.get(parseInt(l)).children;p.length>1&&Qa.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const h=t.get(p[0].ID);o[l]={name:r[l].attrName,layer:h}}return o}addClip(t){let r=[];const o=this;return t.layer.forEach(function(l){r=r.concat(o.generateTracks(l))}),new s.AnimationClip(t.name,-1,r)}generateTracks(t){const r=[];let o=new s.Vector3,l=new s.Quaternion,p=new s.Vector3;if(t.transform&&t.transform.decompose(o,l,p),o=o.toArray(),l=new s.Euler().setFromQuaternion(l,t.eulerOrder).toArray(),p=p.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.T.curves,o,"position");h!==void 0&&r.push(h)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const h=this.generateRotationTrack(t.modelName,t.R.curves,l,t.preRotation,t.postRotation,t.eulerOrder);h!==void 0&&r.push(h)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.S.curves,p,"scale");h!==void 0&&r.push(h)}if(t.DeformPercent!==void 0){const h=this.generateMorphTrack(t);h!==void 0&&r.push(h)}return r}generateVectorTrack(t,r,o,l){const p=this.getTimesForAllAxes(r),h=this.getKeyframeTrackValues(p,r,o);return new s.VectorKeyframeTrack(t+"."+l,p,h)}generateRotationTrack(t,r,o,l,p,h){r.x!==void 0&&(this.interpolateRotations(r.x),r.x.values=r.x.values.map(s.MathUtils.degToRad)),r.y!==void 0&&(this.interpolateRotations(r.y),r.y.values=r.y.values.map(s.MathUtils.degToRad)),r.z!==void 0&&(this.interpolateRotations(r.z),r.z.values=r.z.values.map(s.MathUtils.degToRad));const f=this.getTimesForAllAxes(r),A=this.getKeyframeTrackValues(f,r,o);l!==void 0&&(l=l.map(s.MathUtils.degToRad),l.push(h),l=new s.Euler().fromArray(l),l=new s.Quaternion().setFromEuler(l)),p!==void 0&&(p=p.map(s.MathUtils.degToRad),p.push(h),p=new s.Euler().fromArray(p),p=new s.Quaternion().setFromEuler(p).invert());const _=new s.Quaternion,b=new s.Euler,T=[];for(let B=0;B<A.length;B+=3)b.set(A[B],A[B+1],A[B+2],h),_.setFromEuler(b),l!==void 0&&_.premultiply(l),p!==void 0&&_.multiply(p),_.toArray(T,B/3*4);return new s.QuaternionKeyframeTrack(t+".quaternion",f,T)}generateMorphTrack(t){const r=t.DeformPercent.curves.morph,o=r.values.map(function(p){return p/100}),l=Qc.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new s.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+l+"]",r.times,o)}getTimesForAllAxes(t){let r=[];if(t.x!==void 0&&(r=r.concat(t.x.times)),t.y!==void 0&&(r=r.concat(t.y.times)),t.z!==void 0&&(r=r.concat(t.z.times)),r=r.sort(function(o,l){return o-l}),r.length>1){let o=1,l=r[0];for(let p=1;p<r.length;p++){const h=r[p];h!==l&&(r[o]=h,l=h,o++)}r=r.slice(0,o)}return r}getKeyframeTrackValues(t,r,o){const l=o,p=[];let h=-1,f=-1,A=-1;return t.forEach(function(_){if(r.x&&(h=r.x.times.indexOf(_)),r.y&&(f=r.y.times.indexOf(_)),r.z&&(A=r.z.times.indexOf(_)),h!==-1){const b=r.x.values[h];p.push(b),l[0]=b}else p.push(l[0]);if(f!==-1){const b=r.y.values[f];p.push(b),l[1]=b}else p.push(l[1]);if(A!==-1){const b=r.z.values[A];p.push(b),l[2]=b}else p.push(l[2])}),p}interpolateRotations(t){for(let r=1;r<t.values.length;r++){const o=t.values[r-1],l=t.values[r]-o,p=Math.abs(l);if(p>=180){const h=p/180,f=l/h;let A=o+f;const _=t.times[r-1],T=(t.times[r]-_)/h;let B=_+T;const F=[],P=[];for(;B<t.times[r];)F.push(B),B+=T,P.push(A),A+=f;t.times=iC(t.times,r,F),t.values=iC(t.values,r,P)}}}}class Bw{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,r){this.currentProp=t,this.currentPropName=r}parse(t){this.currentIndent=0,this.allNodes=new $M,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const r=this,o=t.split(/[\r\n]+/);return o.forEach(function(l,p){const h=l.match(/^[\s\t]*;/),f=l.match(/^[\s\t]*$/);if(h||f)return;const A=l.match("^\\t{"+r.currentIndent+"}(\\w+):(.*){",""),_=l.match("^\\t{"+r.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=l.match("^\\t{"+(r.currentIndent-1)+"}}");A?r.parseNodeBegin(l,A):_?r.parseNodeProperty(l,_,o[++p]):b?r.popStack():l.match(/^[^\s\t}]/)&&r.parseNodePropertyContinued(l)}),this.allNodes}parseNodeBegin(t,r){const o=r[1].trim().replace(/^"/,"").replace(/"$/,""),l=r[2].split(",").map(function(A){return A.trim().replace(/^"/,"").replace(/"$/,"")}),p={name:o},h=this.parseNodeAttr(l),f=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(o,p):o in f?(o==="PoseNode"?f.PoseNode.push(p):f[o].id!==void 0&&(f[o]={},f[o][f[o].id]=f[o]),h.id!==""&&(f[o][h.id]=p)):typeof h.id=="number"?(f[o]={},f[o][h.id]=p):o!=="Properties70"&&(o==="PoseNode"?f[o]=[p]:f[o]=p),typeof h.id=="number"&&(p.id=h.id),h.name!==""&&(p.attrName=h.name),h.type!==""&&(p.attrType=h.type),this.pushStack(p)}parseNodeAttr(t){let r=t[0];t[0]!==""&&(r=parseInt(t[0]),isNaN(r)&&(r=t[0]));let o="",l="";return t.length>1&&(o=t[1].replace(/^(\w+)::/,""),l=t[2]),{id:r,name:o,type:l}}parseNodeProperty(t,r,o){let l=r[1].replace(/^"/,"").replace(/"$/,"").trim(),p=r[2].replace(/^"/,"").replace(/"$/,"").trim();l==="Content"&&p===","&&(p=o.replace(/"/g,"").replace(/,$/,"").trim());const h=this.getCurrentNode();if(h.name==="Properties70"){this.parseNodeSpecialProperty(t,l,p);return}if(l==="C"){const A=p.split(",").slice(1),_=parseInt(A[0]),b=parseInt(A[1]);let T=p.split(",").slice(3);T=T.map(function(B){return B.trim().replace(/^"/,"")}),l="connections",p=[_,b],Pw(p,T),h[l]===void 0&&(h[l]=[])}l==="Node"&&(h.id=p),l in h&&Array.isArray(h[l])?h[l].push(p):l!=="a"?h[l]=p:h.a=p,this.setCurrentProp(h,l),l==="a"&&p.slice(-1)!==","&&(h.a=sb(p))}parseNodePropertyContinued(t){const r=this.getCurrentNode();r.a+=t,t.slice(-1)!==","&&(r.a=sb(r.a))}parseNodeSpecialProperty(t,r,o){const l=o.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),p=l[0],h=l[1],f=l[2],A=l[3];let _=l[4];switch(h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":_=parseFloat(_);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":_=sb(_);break}this.getPrevNode()[p]={type:h,type2:f,flag:A,value:_},this.setCurrentProp(this.getPrevNode(),p)}}class Iw{parse(t){const r=new ZM(t);r.skip(23);const o=r.getUint32();if(o<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+o);const l=new $M;for(;!this.endOfContent(r);){const p=this.parseNode(r,o);p!==null&&l.add(p.name,p)}return l}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,r){const o={},l=r>=7500?t.getUint64():t.getUint32(),p=r>=7500?t.getUint64():t.getUint32();r>=7500?t.getUint64():t.getUint32();const h=t.getUint8(),f=t.getString(h);if(l===0)return null;const A=[];for(let B=0;B<p;B++)A.push(this.parseProperty(t));const _=A.length>0?A[0]:"",b=A.length>1?A[1]:"",T=A.length>2?A[2]:"";for(o.singleProperty=p===1&&t.getOffset()===l;l>t.getOffset();){const B=this.parseNode(t,r);B!==null&&this.parseSubNode(f,o,B)}return o.propertyList=A,typeof _=="number"&&(o.id=_),b!==""&&(o.attrName=b),T!==""&&(o.attrType=T),f!==""&&(o.name=f),o}parseSubNode(t,r,o){if(o.singleProperty===!0){const l=o.propertyList[0];Array.isArray(l)?(r[o.name]=o,o.a=l):r[o.name]=l}else if(t==="Connections"&&o.name==="C"){const l=[];o.propertyList.forEach(function(p,h){h!==0&&l.push(p)}),r.connections===void 0&&(r.connections=[]),r.connections.push(l)}else if(o.name==="Properties70")Object.keys(o).forEach(function(p){r[p]=o[p]});else if(t==="Properties70"&&o.name==="P"){let l=o.propertyList[0],p=o.propertyList[1];const h=o.propertyList[2],f=o.propertyList[3];let A;l.indexOf("Lcl ")===0&&(l=l.replace("Lcl ","Lcl_")),p.indexOf("Lcl ")===0&&(p=p.replace("Lcl ","Lcl_")),p==="Color"||p==="ColorRGB"||p==="Vector"||p==="Vector3D"||p.indexOf("Lcl_")===0?A=[o.propertyList[4],o.propertyList[5],o.propertyList[6]]:A=o.propertyList[4],r[l]={type:p,type2:h,flag:f,value:A}}else r[o.name]===void 0?typeof o.id=="number"?(r[o.name]={},r[o.name][o.id]=o):r[o.name]=o:o.name==="PoseNode"?(Array.isArray(r[o.name])||(r[o.name]=[r[o.name]]),r[o.name].push(o)):r[o.name][o.id]===void 0&&(r[o.name][o.id]=o)}parseProperty(t){const r=t.getString(1);let o;switch(r){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return o=t.getUint32(),t.getArrayBuffer(o);case"S":return o=t.getUint32(),t.getString(o);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const l=t.getUint32(),p=t.getUint32(),h=t.getUint32();if(p===0)switch(r){case"b":case"c":return t.getBooleanArray(l);case"d":return t.getFloat64Array(l);case"f":return t.getFloat32Array(l);case"i":return t.getInt32Array(l);case"l":return t.getInt64Array(l)}const f=og(new Uint8Array(t.getArrayBuffer(h))),A=new ZM(f.buffer);switch(r){case"b":case"c":return A.getBooleanArray(l);case"d":return A.getFloat64Array(l);case"f":return A.getFloat32Array(l);case"i":return A.getInt32Array(l);case"l":return A.getInt64Array(l)}default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}}class ZM{constructor(t,r){this.dv=new DataView(t),this.offset=0,this.littleEndian=r!==void 0?r:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const r=[];for(let o=0;o<t;o++)r.push(this.getBoolean());return r}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const r=[];for(let o=0;o<t;o++)r.push(this.getInt32());return r}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r&2147483648?(r=~r&4294967295,t=~t&4294967295,t===4294967295&&(r=r+1&4294967295),t=t+1&4294967295,-(r*4294967296+t)):r*4294967296+t}getInt64Array(t){const r=[];for(let o=0;o<t;o++)r.push(this.getInt64());return r}getUint64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const r=[];for(let o=0;o<t;o++)r.push(this.getFloat32());return r}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const r=[];for(let o=0;o<t;o++)r.push(this.getFloat64());return r}getArrayBuffer(t){const r=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}getString(t){let r=[];for(let l=0;l<t;l++)r[l]=this.getUint8();const o=r.indexOf(0);return o>=0&&(r=r.slice(0,o)),s.LoaderUtils.decodeText(new Uint8Array(r))}}class $M{add(t,r){this[t]=r}}function Rw(i){const t="Kaydara FBX Binary  \0";return i.byteLength>=t.length&&t===rC(i,0,t.length)}function Fw(i){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function o(l){const p=i[l-1];return i=i.slice(r+l),r++,p}for(let l=0;l<t.length;++l)if(o(1)===t[l])return!1;return!0}function eC(i){const t=/FBXVersion: (\d+)/,r=i.match(t);if(r)return parseInt(r[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ow(i){return i/46186158e3}const Dw=[];function P2(i,t,r,o){let l;switch(o.mappingType){case"ByPolygonVertex":l=i;break;case"ByPolygon":l=t;break;case"ByVertice":l=r;break;case"AllSame":l=o.indices[0];break;default:Qa.warn("THREE.FBXLoader: unknown attribute mapping type "+o.mappingType)}o.referenceType==="IndexToDirect"&&(l=o.indices[l]);const p=l*o.dataSize,h=p+o.dataSize;return Lw(Dw,o.buffer,p,h)}const ob=new s.Euler,t1=new s.Vector3;function tC(i){const t=new s.Matrix4,r=new s.Matrix4,o=new s.Matrix4,l=new s.Matrix4,p=new s.Matrix4,h=new s.Matrix4,f=new s.Matrix4,A=new s.Matrix4,_=new s.Matrix4,b=new s.Matrix4,T=new s.Matrix4,B=new s.Matrix4,F=i.inheritType?i.inheritType:0;if(i.translation&&t.setPosition(t1.fromArray(i.translation)),i.preRotation){const ae=i.preRotation.map(s.MathUtils.degToRad);ae.push(i.eulerOrder),r.makeRotationFromEuler(ob.fromArray(ae))}if(i.rotation){const ae=i.rotation.map(s.MathUtils.degToRad);ae.push(i.eulerOrder),o.makeRotationFromEuler(ob.fromArray(ae))}if(i.postRotation){const ae=i.postRotation.map(s.MathUtils.degToRad);ae.push(i.eulerOrder),l.makeRotationFromEuler(ob.fromArray(ae)),l.invert()}i.scale&&p.scale(t1.fromArray(i.scale)),i.scalingOffset&&f.setPosition(t1.fromArray(i.scalingOffset)),i.scalingPivot&&h.setPosition(t1.fromArray(i.scalingPivot)),i.rotationOffset&&A.setPosition(t1.fromArray(i.rotationOffset)),i.rotationPivot&&_.setPosition(t1.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(T.copy(i.parentMatrix),b.copy(i.parentMatrixWorld));const P=r.clone().multiply(o).multiply(l),L=new s.Matrix4;L.extractRotation(b);const O=new s.Matrix4;O.copyPosition(b);const G=O.clone().invert().multiply(b),D=L.clone().invert().multiply(G),k=p,N=new s.Matrix4;if(F===0)N.copy(L).multiply(P).multiply(D).multiply(k);else if(F===1)N.copy(L).multiply(D).multiply(P).multiply(k);else{const ge=new s.Matrix4().scale(new s.Vector3().setFromMatrixScale(T)).clone().invert(),ie=D.clone().multiply(ge);N.copy(L).multiply(P).multiply(ie).multiply(k)}const V=_.clone().invert(),Q=h.clone().invert();let K=t.clone().multiply(A).multiply(_).multiply(r).multiply(o).multiply(l).multiply(V).multiply(f).multiply(h).multiply(p).multiply(Q);const X=new s.Matrix4().copyPosition(K),oe=b.clone().multiply(X);return B.copyPosition(oe),K=B.clone().multiply(N),K.premultiply(b.invert()),K}function nC(i){i=i||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(Qa.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[i]}function sb(i){return i.split(",").map(function(r){return parseFloat(r)})}function rC(i,t,r){return t===void 0&&(t=0),r===void 0&&(r=i.byteLength),s.LoaderUtils.decodeText(new Uint8Array(i,t,r))}function Pw(i,t){for(let r=0,o=i.length,l=t.length;r<l;r++,o++)i[o]=t[r]}function Lw(i,t,r,o){for(let l=r,p=0;l<o;l++,p++)i[p]=t[l];return i}function iC(i,t,r){return i.slice(0,t).concat(r).concat(i.slice(t))}function ab(i){return(0,E.D)(ib,i)}ab.preload=i=>E.D.preload(ib,i),ab.clear=i=>E.D.clear(ib,i);class kw{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const r=this.workerCreator();r.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=r}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,r){const o=this.workersResolve[t];if(o&&o(r),this.queue.length){const{resolve:l,msg:p,transfer:h}=this.queue.shift();this.workersResolve[t]=l,this.workers[t].postMessage(p,h)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,r){return new Promise(o=>{const l=this._getIdleWorker();l!==-1?(this._initWorker(l),this.workerStatus|=1<<l,this.workersResolve[l]=o,this.workers[l].postMessage(t,r)):this.queue.push({resolve:o,msg:t,transfer:r})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var zw=y(48764).lW;const oC=0,Gw=2,Uw=0,Nw=0,jw=2,Hw=0,Ww=0,Vw=1,lb=2,Qw=1,Xw=64,sC=0,aC=9,cb=15,lC=16,pb=22,cC=37,ub=43,pC=76,uC=83,dC=97,hC=100,fC=103,gC=109;class Yw{constructor(){this.vkFormat=sC,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=oC,this.levels=[],this.dataFormatDescriptor=[{vendorId:Nw,descriptorType:Uw,descriptorBlockSize:0,versionNumber:jw,colorModel:Hw,colorPrimaries:Qw,transferFunction:lb,flags:Ww,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class jy{constructor(t,r,o,l){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+r,o),this._littleEndian=l,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),o=t+wm(2,32)*r;return this._offset+=8,o}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){const r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,r}_skip(t){return this._offset+=t,this}_scan(t,r){r===void 0&&(r=0);const o=this._offset;let l=0;for(;this._dataView.getUint8(this._offset)!==r&&l<t;)l++,this._offset++;return l<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+o,l)}}const gc=[171,75,84,88,32,50,48,187,13,10,26,10];function mC(i){return typeof TextDecoder!="undefined"?new TextDecoder().decode(i):zw.from(i).toString("utf8")}function Kw(i){const t=new Uint8Array(i.buffer,i.byteOffset,gc.length);if(t[0]!==gc[0]||t[1]!==gc[1]||t[2]!==gc[2]||t[3]!==gc[3]||t[4]!==gc[4]||t[5]!==gc[5]||t[6]!==gc[6]||t[7]!==gc[7]||t[8]!==gc[8]||t[9]!==gc[9]||t[10]!==gc[10]||t[11]!==gc[11])throw new Error("Missing KTX 2.0 identifier.");const r=new Yw,o=17*Uint32Array.BYTES_PER_ELEMENT,l=new jy(i,gc.length,o,!0);r.vkFormat=l._nextUint32(),r.typeSize=l._nextUint32(),r.pixelWidth=l._nextUint32(),r.pixelHeight=l._nextUint32(),r.pixelDepth=l._nextUint32(),r.layerCount=l._nextUint32(),r.faceCount=l._nextUint32();const p=l._nextUint32();r.supercompressionScheme=l._nextUint32();const h=l._nextUint32(),f=l._nextUint32(),A=l._nextUint32(),_=l._nextUint32(),b=l._nextUint64(),T=l._nextUint64(),B=p*3*8,F=new jy(i,gc.length+o,B,!0);for(let Ye=0;Ye<p;Ye++)r.levels.push({levelData:new Uint8Array(i.buffer,i.byteOffset+F._nextUint64(),F._nextUint64()),uncompressedByteLength:F._nextUint64()});const P=new jy(i,h,f,!0),L={vendorId:P._skip(4)._nextUint16(),descriptorType:P._nextUint16(),versionNumber:P._nextUint16(),descriptorBlockSize:P._nextUint16(),colorModel:P._nextUint8(),colorPrimaries:P._nextUint8(),transferFunction:P._nextUint8(),flags:P._nextUint8(),texelBlockDimension:[P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8()],bytesPlane:[P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8()],samples:[]},O=6,G=4,D=(L.descriptorBlockSize/4-O)/G;for(let Ye=0;Ye<D;Ye++){const Se={bitOffset:P._nextUint16(),bitLength:P._nextUint8(),channelType:P._nextUint8(),samplePosition:[P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Se.channelType&Xw?(Se.sampleLower=P._nextInt32(),Se.sampleUpper=P._nextInt32()):(Se.sampleLower=P._nextUint32(),Se.sampleUpper=P._nextUint32()),L.samples[Ye]=Se}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(L);const k=new jy(i,A,_,!0);for(;k._offset<_;){const Ye=k._nextUint32(),Se=k._scan(Ye),xe=mC(Se);if(r.keyValue[xe]=k._nextUint8Array(Ye-Se.byteLength-1),xe.match(/^ktx/i)){const le=mC(r.keyValue[xe]);r.keyValue[xe]=le.substring(0,le.lastIndexOf("\0"))}const Ee=Ye%4?4-Ye%4:0;k._skip(Ee)}if(T<=0)return r;const N=new jy(i,b,T,!0),V=N._nextUint16(),Q=N._nextUint16(),K=N._nextUint32(),X=N._nextUint32(),oe=N._nextUint32(),ae=N._nextUint32(),ge=[];for(let Ye=0;Ye<p;Ye++)ge.push({imageFlags:N._nextUint32(),rgbSliceByteOffset:N._nextUint32(),rgbSliceByteLength:N._nextUint32(),alphaSliceByteOffset:N._nextUint32(),alphaSliceByteLength:N._nextUint32()});const ie=b+N._offset,_e=ie+K,me=_e+X,we=me+oe,ke=new Uint8Array(i.buffer,i.byteOffset+ie,K),De=new Uint8Array(i.buffer,i.byteOffset+_e,X),Ne=new Uint8Array(i.buffer,i.byteOffset+me,oe),Ge=new Uint8Array(i.buffer,i.byteOffset+we,ae);return r.globalData={endpointCount:V,selectorCount:Q,imageDescs:ge,endpointsData:ke,selectorsData:De,tablesData:Ne,extendedData:Ge},r}var Jw=y(48764).lW;let Hy,Xh,db;const hb={env:{emscripten_notify_memory_growth:function(i){db=new Uint8Array(Xh.exports.memory.buffer)}}};class qw{init(){return Hy||(typeof fetch!="undefined"?Hy=fetch("data:application/wasm;base64,"+yC).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,hb)).then(this._init):Hy=WebAssembly.instantiate(Jw.from(yC,"base64"),hb).then(this._init),Hy)}_init(t){Xh=t.instance,hb.env.emscripten_notify_memory_growth(0)}decode(t,r=0){if(!Xh)throw new Error("ZSTDDecoder: Await .init() before decoding.");const o=t.byteLength,l=Xh.exports.malloc(o);db.set(t,l),r=r||Number(Xh.exports.ZSTD_findDecompressedSize(l,o));const p=Xh.exports.malloc(r),h=Xh.exports.ZSTD_decompress(p,r,l,o),f=db.slice(p,p+h);return Xh.exports.free(l),Xh.exports.free(p),f}}const yC="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class Zw extends s.CompressedTexture{constructor(t,r,o,l,p,h){super(t,r,o,p,h),this.isCompressedArrayTexture=!0,this.image.depth=l,this.wrapR=s.ClampToEdgeWrapping}}class $w extends s.Texture{constructor(t=null,r=1,o=1,l=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:o,depth:l},this.magFilter=s.NearestFilter,this.minFilter=s.NearestFilter,this.wrapR=s.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var Wy=y(25108),eT=Object.defineProperty,tT=(i,t,r)=>t in i?eT(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,L2=(i,t,r)=>(tT(i,typeof t!="symbol"?t+"":t,r),r);const fb=new WeakMap;let gb=0,mb;const Vy=class extends s.Loader{constructor(i){super(i),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new kw,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!="undefined"&&Wy.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(i){return this.transcoderPath=i,this}setWorkerLimit(i){return this.workerPool.setWorkerLimit(i),this}detectSupport(i){return this.workerConfig={astcSupported:i.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:i.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:i.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:i.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:i.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:i.extensions.has("WEBGL_compressed_texture_pvrtc")||i.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},i.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const i=new s.FileLoader(this.manager);i.setPath(this.transcoderPath),i.setWithCredentials(this.withCredentials);const t=i.loadAsync("basis_transcoder.js"),r=new s.FileLoader(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const o=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,o]).then(([l,p])=>{const h=Vy.BasisWorker.toString(),f=["/* constants */","let _EngineFormat = "+JSON.stringify(Vy.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Vy.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Vy.BasisFormat),"/* basis_transcoder.js */",l,"/* worker */",h.substring(h.indexOf("{")+1,h.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([f])),this.transcoderBinary=p,this.workerPool.setWorkerCreator(()=>{const A=new Worker(this.workerSourceURL),_=this.transcoderBinary.slice(0);return A.postMessage({type:"init",config:this.workerConfig,transcoderBinary:_},[_]),A})}),gb>0&&Wy.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),gb++}return this.transcoderPending}load(i,t,r,o){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const l=new s.FileLoader(this.manager);l.setResponseType("arraybuffer"),l.setWithCredentials(this.withCredentials),l.load(i,p=>{if(fb.has(p))return fb.get(p).promise.then(t).catch(o);this._createTexture(p).then(h=>t?t(h):null).catch(o)},r,o)}_createTextureFrom(i,t){const{mipmaps:r,width:o,height:l,format:p,type:h,error:f,dfdTransferFn:A,dfdFlags:_}=i;if(h==="error")return Promise.reject(f);const b=t.layerCount>1?new Zw(r,o,l,t.layerCount,p,s.UnsignedByteType):new s.CompressedTexture(r,o,l,p,s.UnsignedByteType);return b.minFilter=r.length===1?s.LinearFilter:s.LinearMipmapLinearFilter,b.magFilter=s.LinearFilter,b.generateMipmaps=!1,b.needsUpdate=!0,"colorSpace"in b?b.colorSpace=A===lb?"srgb":"srgb-linear":b.encoding=A===lb?3001:3e3,b.premultiplyAlpha=!!(_&Vw),b}_createTexture(r){return rs(this,arguments,function*(i,t={}){const o=Kw(new Uint8Array(i));if(o.vkFormat!==sC)return rT(o);const l=t,p=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:i,taskConfig:l},[i])).then(h=>this._createTextureFrom(h.data,o));return fb.set(i,{promise:p}),p})}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),gb--,this}};let xm=Vy;L2(xm,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),L2(xm,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),L2(xm,"EngineFormat",{RGBAFormat:s.RGBAFormat,RGBA_ASTC_4x4_Format:s.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:s.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:s.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:s.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:s.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:s.RGB_ETC1_Format,RGB_ETC2_Format:s.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:s.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:s.RGB_S3TC_DXT1_Format}),L2(xm,"BasisWorker",function(){let i,t,r;const o=_EngineFormat,l=_TranscoderFormat,p=_BasisFormat;self.addEventListener("message",function(P){const L=P.data;switch(L.type){case"init":i=L.config,h(L.transcoderBinary);break;case"transcode":t.then(()=>{try{const{width:O,height:G,hasAlpha:D,mipmaps:k,format:N,dfdTransferFn:V,dfdFlags:Q}=f(L.buffer),K=[];for(let X=0;X<k.length;++X)K.push(k[X].data.buffer);self.postMessage({type:"transcode",id:L.id,width:O,height:G,hasAlpha:D,mipmaps:k,format:N,dfdTransferFn:V,dfdFlags:Q},K)}catch(O){Wy.error(O),self.postMessage({type:"error",id:L.id,error:O.message})}});break}});function h(P){t=new Promise(L=>{r={wasmBinary:P,onRuntimeInitialized:L},BASIS(r)}).then(()=>{r.initializeBasis(),r.KTX2File===void 0&&Wy.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function f(P){const L=new r.KTX2File(new Uint8Array(P));function O(){L.close(),L.delete()}if(!L.isValid())throw O(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const G=L.isUASTC()?p.UASTC_4x4:p.ETC1S,D=L.getWidth(),k=L.getHeight(),N=L.getLayers()||1,V=L.getLevels(),Q=L.getHasAlpha(),K=L.getDFDTransferFunc(),X=L.getDFDFlags(),{transcoderFormat:oe,engineFormat:ae}=T(G,D,k,Q);if(!D||!k||!V)throw O(),new Error("THREE.KTX2Loader:	Invalid texture");if(!L.startTranscoding())throw O(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ge=[];for(let ie=0;ie<V;ie++){const _e=[];let me,we;for(let ke=0;ke<N;ke++){const De=L.getImageLevelInfo(ie,ke,0);me=De.origWidth<4?De.origWidth:De.width,we=De.origHeight<4?De.origHeight:De.height;const Ne=new Uint8Array(L.getImageTranscodedSizeInBytes(ie,ke,0,oe));if(!L.transcodeImage(Ne,ie,ke,0,oe,0,-1,-1))throw O(),new Error("THREE.KTX2Loader: .transcodeImage failed.");_e.push(Ne)}ge.push({data:F(_e),width:me,height:we})}return O(),{width:D,height:k,hasAlpha:Q,mipmaps:ge,format:ae,dfdTransferFn:K,dfdFlags:X}}const A=[{if:"astcSupported",basisFormat:[p.UASTC_4x4],transcoderFormat:[l.ASTC_4x4,l.ASTC_4x4],engineFormat:[o.RGBA_ASTC_4x4_Format,o.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[l.BC7_M5,l.BC7_M5],engineFormat:[o.RGBA_BPTC_Format,o.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[l.BC1,l.BC3],engineFormat:[o.RGB_S3TC_DXT1_Format,o.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[l.ETC1,l.ETC2],engineFormat:[o.RGB_ETC2_Format,o.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[l.ETC1],engineFormat:[o.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[l.PVRTC1_4_RGB,l.PVRTC1_4_RGBA],engineFormat:[o.RGB_PVRTC_4BPPV1_Format,o.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],_=A.sort(function(P,L){return P.priorityETC1S-L.priorityETC1S}),b=A.sort(function(P,L){return P.priorityUASTC-L.priorityUASTC});function T(P,L,O,G){let D,k;const N=P===p.ETC1S?_:b;for(let V=0;V<N.length;V++){const Q=N[V];if(i[Q.if]&&Q.basisFormat.includes(P)&&!(G&&Q.transcoderFormat.length<2)&&!(Q.needsPowerOfTwo&&!(B(L)&&B(O))))return D=Q.transcoderFormat[G?1:0],k=Q.engineFormat[G?1:0],{transcoderFormat:D,engineFormat:k}}return Wy.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),D=l.RGBA32,k=o.RGBAFormat,{transcoderFormat:D,engineFormat:k}}function B(P){return P<=2?!0:(P&P-1)===0&&P!==0}function F(P){let L=0;for(let D=0;D<P.length;D++){const k=P[D];L+=k.byteLength}const O=new Uint8Array(L);let G=0;for(let D=0;D<P.length;D++){const k=P[D];O.set(k,G),G+=k.byteLength}return O}});const AC={[gC]:s.RGBAFormat,[dC]:s.RGBAFormat,[cC]:s.RGBAFormat,[ub]:s.RGBAFormat,[fC]:s.RGFormat,[uC]:s.RGFormat,[lC]:s.RGFormat,[pb]:s.RGFormat,[hC]:s.RedFormat,[pC]:s.RedFormat,[cb]:s.RedFormat,[aC]:s.RedFormat},yb={[gC]:s.FloatType,[dC]:s.HalfFloatType,[cC]:s.UnsignedByteType,[ub]:s.UnsignedByteType,[fC]:s.FloatType,[uC]:s.HalfFloatType,[lC]:s.UnsignedByteType,[pb]:s.UnsignedByteType,[hC]:s.FloatType,[pC]:s.HalfFloatType,[cb]:s.UnsignedByteType,[aC]:s.UnsignedByteType},nT={[ub]:3001,[pb]:3001,[cb]:3001};function rT(i){return rs(this,null,function*(){const{vkFormat:t,pixelWidth:r,pixelHeight:o,pixelDepth:l}=i;if(AC[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const p=i.levels[0];let h,f;if(i.supercompressionScheme===oC)h=p.levelData;else if(i.supercompressionScheme===Gw)mb||(mb=new Promise(_=>rs(this,null,function*(){const b=new qw;yield b.init(),_(b)}))),h=(yield mb).decode(p.levelData,p.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");yb[t]===s.FloatType?f=new Float32Array(h.buffer,h.byteOffset,h.byteLength/Float32Array.BYTES_PER_ELEMENT):yb[t]===s.HalfFloatType?f=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/Uint16Array.BYTES_PER_ELEMENT):f=h;const A=l===0?new s.DataTexture(f,r,o):new $w(f,r,o,l);return A.type=yb[t],A.format=AC[t],A.encoding=nT[t]||3e3,A.needsUpdate=!0,Promise.resolve(A)})}const vC="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function Ab(i,t=`${vC}/basis/`){const r=(0,E.z)(l=>l.gl),o=(0,E.D)(xm,fl(i)?Object.values(i):i,l=>{l.detectSupport(r),l.setTranscoderPath(t)});if((0,d.useEffect)(()=>{(Array.isArray(o)?o:[o]).forEach(r.initTexture)},[r,o]),fl(i)){const l=Object.keys(i),p={};return l.forEach(h=>Object.assign(p,{[h]:o[l.indexOf(h)]})),p}else return o}Ab.preload=(i,t=`${vC}/basis/`)=>E.D.preload(xm,i,r=>{r.setTranscoderPath(t)}),Ab.clear=i=>E.D.clear(xm,i);var iT=y(73466),oT=y.n(iT);function _C(i,t){typeof i=="function"?i(t):i!=null&&(i.current=t)}function sT(i,t=[],r){const[o,l]=d.useState();return d.useLayoutEffect(()=>{const p=i();return l(p),_C(r,p),()=>_C(r,null)},t),o}function aT({showPanel:i=0,className:t,parent:r}){const o=sT(()=>new(oT()),[]);return d.useEffect(()=>{if(o){const l=r&&r.current||document.body;o.showPanel(i),l==null||l.appendChild(o.dom),t&&o.dom.classList.add(...t.split(" ").filter(f=>f));const p=(0,E.n)(()=>o.begin()),h=(0,E.o)(()=>o.end());return()=>{l==null||l.removeChild(o.dom),p(),h()}}},[r,o,t,i]),null}class lT{constructor(t,r,o){this.name=t,this.fg=r,this.bg=o,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(t,r,o,l,p=0){let h=1/0,f=0;this.context&&(h=Math.min(h,t),f=Math.max(o,t),l=Math.max(l,r),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(t.toFixed(p)+" "+this.name+" ("+h.toFixed(p)+"-"+parseFloat(f.toFixed(p))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-r/l)*this.GRAPH_HEIGHT))}}class n1{constructor({logsPerSecond:t=20,samplesLog:r=100,samplesGraph:o=10,precision:l=2,minimal:p=!1,horizontal:h=!0,mode:f=0}={}){this.mode=f,this.horizontal=h,this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",p&&(this.container.style.cssText+="cursor:pointer"),this.canvasGpu=null,this.gl=null,this.query=null,this.minimal=p,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new n1.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new n1.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=r,this.samplesGraph=o,this.precision=l,this.logsPerSecond=t,this.minimal?(this.container.addEventListener("click",A=>{A.preventDefault(),this.showPanel(++this.mode%this.container.children.length)},!1),this.mode=f,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}resizePanel(t,r){t.canvas.style.position="absolute",this.minimal?t.canvas.style.display="none":(t.canvas.style.display="block",this.horizontal?(t.canvas.style.top="0px",t.canvas.style.left=r*t.WIDTH/t.PR+"px"):(t.canvas.style.left="0px",t.canvas.style.top=r*t.HEIGHT/t.PR+"px"))}addPanel(t,r){return t.canvas&&(this.container.appendChild(t.canvas),this.resizePanel(t,r)),t}showPanel(t){for(let r=0;r<this.container.children.length;r++){const o=this.container.children[r];o.style.display=r===t?"block":"none"}this.mode=t}init(t){this.canvasGpu=t,this.canvasGpu&&(this.gl=this.canvasGpu.getContext("webgl2"),this.ext=this.gl?this.gl.getExtension("EXT_disjoint_timer_query_webgl2"):null,this.ext&&(this.gpuPanel=this.addPanel(new n1.Panel("GPU","#ff0","#220"),2)))}begin(){if(this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)){if(this.query){const t=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT_AVAILABLE);if(this.disjoint=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT),t&&!this.disjoint){this.ns=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT);const r=this.ns*1e-6;(t||this.disjoint)&&(this.gl.deleteQuery(this.query),this.query=null),t&&this.addToAverage(r,this.averageGpu)}}this.query||(this.queryCreated=!0,this.query=this.gl.createQuery(),this.query&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.query))}}end(){this.beginTime=this.endInternal(),this.endProfiling("cpu-started","cpu-finished","cpu-duration",this.averageCpu),!(!this.gl||!this.ext)&&this.queryCreated&&this.gl.getQuery(this.ext.TIME_ELAPSED_EXT,this.gl.CURRENT_QUERY)&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT)}endInternal(){this.frames++;const t=(performance||Date).now();if(t>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=t),t>=this.prevTime+1e3){const r=this.frames*1e3/(t-this.prevTime);this.fpsPanel.update(r,r,100,100,0),this.prevTime=t,this.frames=0}return t}addToAverage(t,r){r.logs.push(t),r.logs.length>this.samplesLog&&r.logs.shift(),r.graph.push(t),r.graph.length>this.samplesGraph&&r.graph.shift()}beginProfiling(t){window.performance&&window.performance.mark(t)}endProfiling(t,r,o,l){if(window.performance&&r){window.performance.mark(r);const p=performance.measure(o,t,r);this.addToAverage(p.duration,l)}}updatePanel(t,r){if(r.logs.length>0){let o=0,l=.01;for(let f=0;f<r.logs.length;f++)o+=r.logs[f],r.logs[f]>l&&(l=r.logs[f]);let p=0,h=.01;for(let f=0;f<r.graph.length;f++)p+=r.graph[f],r.graph[f]>h&&(h=r.graph[f]);t&&t.update(o/Math.min(r.logs.length,this.samplesLog),p/Math.min(r.graph.length,this.samplesGraph),l,h,this.precision)}}}n1.Panel=lT;function cT(o){var l=o,{className:i,parent:t}=l,r=mn(l,["className","parent"]);const p=(0,E.z)(f=>f.gl),h=d.useMemo(()=>{const f=new n1(jn({},r));return f.init(p.domElement),f},[p]);return d.useEffect(()=>{if(h){const f=t&&t.current||document.body;f==null||f.appendChild(h.container),i&&h.container.classList.add(...i.split(" ").filter(b=>b));const A=(0,E.n)(()=>h.begin()),_=(0,E.o)(()=>h.end());return()=>{f==null||f.removeChild(h.container),A(),_()}}},[t,h,i]),null}function pT({size:i=256,frames:t=1/0}={}){const r=(0,E.z)(b=>b.viewport.dpr),{width:o,height:l}=(0,E.z)(b=>b.size),p=i||o*r,h=i||l*r,f=d.useMemo(()=>{const b=new s.DepthTexture(p,h);return b.format=s.DepthFormat,b.type=s.UnsignedShortType,{depthTexture:b}},[p,h]);let A=0;const _=Vl(p,h,f);return(0,E.A)(b=>{(t===1/0||A<t)&&(b.gl.setRenderTarget(_),b.gl.render(b.scene,b.camera),b.gl.setRenderTarget(null),A++)}),_.depthTexture}function uT(i,t,r=1){const o=(0,E.z)(h=>h.viewport),l=t*(o.aspect>i/t?o.width/i:o.height/t);return[i*(o.aspect>i/t?o.width/i:o.height/t)*r,l*r,1]}function dT(i,t){const r=(0,E.z)(l=>l.pointer),[o]=d.useState(()=>{const l=new s.Raycaster;return t&&(0,E.j)(l,t,{}),function(p,h){l.setFromCamera(r,i instanceof s.Camera?i:i.current);const f=this.constructor.prototype.raycast.bind(this);f&&f(l,h)}});return o}function vb(i,t,r,o){return new(r||(r=Promise))(function(l,p){function h(_){try{A(o.next(_))}catch(b){p(b)}}function f(_){try{A(o.throw(_))}catch(b){p(b)}}function A(_){var b;_.done?l(_.value):(b=_.value,b instanceof r?b:new r(function(T){T(b)})).then(h,f)}A((o=o.apply(i,t||[])).next())})}const hT=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function EC(i){return i=i.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const bC=typeof window=="undefined",sg=(()=>{if(bC)return;const{userAgent:i,platform:t,maxTouchPoints:r}=window.navigator,o=/(iphone|ipod|ipad)/i.test(i),l=t==="iPad"||t==="MacIntel"&&r>0&&!window.MSStream;return{isIpad:l,isMobile:/android/i.test(i)||o||l,isSafari12:/Version\/12.+Safari/.test(i)}})();function fT(i,t,r){if(!r)return[t];const o=function(_){const b=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,T=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,B=_.createShader(35633),F=_.createShader(35632),P=_.createProgram();if(!(F&&B&&P))return;_.shaderSource(B,b),_.shaderSource(F,T),_.compileShader(B),_.compileShader(F),_.attachShader(P,B),_.attachShader(P,F),_.linkProgram(P),_.detachShader(P,B),_.detachShader(P,F),_.deleteShader(B),_.deleteShader(F),_.useProgram(P);const L=_.createBuffer();_.bindBuffer(34962,L),_.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const O=_.getAttribLocation(P,"aPosition");_.vertexAttribPointer(O,3,5126,!1,0,0),_.enableVertexAttribArray(O),_.clearColor(1,1,1,1),_.clear(16384),_.viewport(0,0,1,1),_.drawArrays(4,0,3);const G=new Uint8Array(4);return _.readPixels(0,0,1,1,6408,5121,G),_.deleteProgram(P),_.deleteBuffer(L),G.join("")}(i),l="801621810",p="8016218135",h="80162181161",f=sg!=null&&sg.isIpad?[["a7",h,12],["a8",p,15],["a8x",p,15],["a9",p,15],["a9x",p,15],["a10",p,15],["a10x",p,15],["a12",l,15],["a12x",l,15],["a12z",l,15],["a14",l,15],["m1",l,15]]:[["a7",h,12],["a8",p,12],["a9",p,15],["a10",p,15],["a11",l,15],["a12",l,15],["a13",l,15],["a14",l,15]];let A;return o==="80162181255"?A=f.filter(([,,_])=>_>=14):(A=f.filter(([,_])=>_===o),A.length||(A=f)),A.map(([_])=>`apple ${_} gpu`)}class xC extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const _b=[],MC=[];function gT(i,t){if(i===t)return 0;const r=i;i.length>t.length&&(i=t,t=r);let o=i.length,l=t.length;for(;o>0&&i.charCodeAt(~-o)===t.charCodeAt(~-l);)o--,l--;let p,h=0;for(;h<o&&i.charCodeAt(h)===t.charCodeAt(h);)h++;if(o-=h,l-=h,o===0)return l;let f,A,_=0,b=0,T=0;for(;b<o;)MC[b]=i.charCodeAt(h+b),_b[b]=++b;for(;T<l;)for(p=t.charCodeAt(h+T),f=T++,_=T,b=0;b<o;b++)A=p===MC[b]?f:f+1,f=_b[b],_=_b[b]=f>_?A>_?_+1:A:A>f?f+1:A;return _}function mT(i){return i!=null}const yT=({mobileTiers:i=[0,15,30,60],desktopTiers:t=[0,15,30,60],override:r={},glContext:o,failIfMajorPerformanceCaveat:l=!1,benchmarksURL:p="https://unpkg.com/detect-gpu@5.0.33/dist/benchmarks"}={})=>vb(void 0,void 0,void 0,function*(){const h={};if(bC)return{tier:0,type:"SSR"};const{isIpad:f=!!(sg!=null&&sg.isIpad),isMobile:A=!!(sg!=null&&sg.isMobile),screenSize:_=window.screen,loadBenchmarks:b=V=>vb(void 0,void 0,void 0,function*(){const Q=yield fetch(`${p}/${V}`).then(K=>K.json());if(parseInt(Q.shift().split(".")[0],10)<4)throw new xC("Detect GPU benchmark data is out of date. Please update to version 4x");return Q})}=r;let{renderer:T}=r;const B=(V,Q,K,X,oe)=>({device:oe,fps:X,gpu:K,isMobile:A,tier:V,type:Q});let F,P="";if(T)T=EC(T),F=[T];else{const V=o||function(K,X=!1){const oe={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:X,powerPreference:"high-performance",stencil:!1};K&&delete oe.powerPreference;const ae=window.document.createElement("canvas"),ge=ae.getContext("webgl",oe)||ae.getContext("experimental-webgl",oe);return ge!=null?ge:void 0}(sg==null?void 0:sg.isSafari12,l);if(!V)return B(0,"WEBGL_UNSUPPORTED");const Q=V.getExtension("WEBGL_debug_renderer_info");if(Q&&(T=V.getParameter(Q.UNMASKED_RENDERER_WEBGL)),!T)return B(1,"FALLBACK");P=T,T=EC(T),F=function(K,X,oe){return X==="apple gpu"?fT(K,X,oe):[X]}(V,T,A)}const L=(yield Promise.all(F.map(function(V){var Q;return vb(this,void 0,void 0,function*(){const K=(Ee=>{const le=A?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const ye of le)if(Ee.includes(ye))return ye})(V);if(!K)return;const X=`${A?"m":"d"}-${K}${f?"-ipad":""}.json`,oe=h[X]=(Q=h[X])!==null&&Q!==void 0?Q:b(X);let ae;try{ae=yield oe}catch(Ee){if(Ee instanceof xC)throw Ee;return}const ge=function(Ee){var le;const ye=(Ee=Ee.replace(/\([^)]+\)/,"")).match(/\d+/)||Ee.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(le=ye==null?void 0:ye.join("").replace(/\W|amd/g,""))!==null&&le!==void 0?le:""}(V);let ie=ae.filter(([,Ee])=>Ee===ge);ie.length||(ie=ae.filter(([Ee])=>Ee.includes(V)));const _e=ie.length;if(_e===0)return;const me=V.split(/[.,()\[\]/\s]/g).sort().filter((Ee,le,ye)=>le===0||Ee!==ye[le-1]).join(" ");let we,[ke,,,,De]=_e>1?ie.map(Ee=>[Ee,gT(me,Ee[2])]).sort(([,Ee],[,le])=>Ee-le)[0][0]:ie[0],Ne=Number.MAX_VALUE;const{devicePixelRatio:Ge}=window,Ye=_.width*Ge*_.height*Ge;for(const Ee of De){const[le,ye]=Ee,Be=le*ye,be=Math.abs(Ye-Be);be<Ne&&(Ne=be,we=Ee)}if(!we)return;const[,,Se,xe]=we;return[Ne,Se,ke,xe]})}))).filter(mT).sort(([V=Number.MAX_VALUE,Q],[K=Number.MAX_VALUE,X])=>V===K?Q-X:V-K);if(!L.length){const V=hT.find(Q=>T.includes(Q));return V?B(0,"BLOCKLISTED",V):B(1,"FALLBACK",`${T} (${P})`)}const[,O,G,D]=L[0];if(O===-1)return B(0,"BLOCKLISTED",G,O,D);const k=A?i:t;let N=0;for(let V=0;V<k.length;V++)O>=k[V]&&(N=V);return B(N,"BENCHMARK",G,O,D)}),AT=i=>(0,jc.Rq)(()=>yT(i),["useDetectGPU"]);function CC(i,t,...r){const o=d.useRef(),l=(0,E.z)(p=>p.scene);return d.useLayoutEffect(()=>{let p;if(i&&i!=null&&i.current&&t&&(o.current=p=new t(i.current,...r)),p)return p.traverse(h=>h.raycast=()=>null),l.add(p),()=>{o.current=void 0,l.remove(p),p.dispose==null||p.dispose()}},[l,t,i,...r]),(0,E.A)(()=>{var p;return void((p=o.current)==null||p.update==null?void 0:p.update())}),o}const SC=0,vT=1,k2=2,U6=0,N6=1,wC=2,Eb=1.25,TC=1,Mm=6*4+4+4,z2=65535,_T=Math.pow(2,-24),bb=Symbol("SKIP_GENERATION");function BC(i,t,r){return i===null||(i.point.applyMatrix4(t.matrixWorld),i.distance=i.point.distanceTo(r.ray.origin),i.object=t,i.distance<r.near||i.distance>r.far)?null:i}function IC(i){return i.index?i.index.count:i.attributes.position.count}function r1(i){return IC(i)/3}function RC(i,t=ArrayBuffer){return i>65535?new Uint32Array(new t(4*i)):new Uint16Array(new t(2*i))}function ET(i,t){if(!i.index){const r=i.attributes.position.count,o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,l=RC(r,o);i.setIndex(new s.BufferAttribute(l,1));for(let p=0;p<r;p++)l[p]=p}}function FC(i){const t=r1(i),r=i.drawRange,o=r.start/3,l=(r.start+r.count)/3,p=Math.max(0,o),h=Math.min(t,l)-p;return[{offset:Math.floor(p),count:Math.floor(h)}]}function OC(i){if(!i.groups||!i.groups.length)return FC(i);const t=[],r=new Set,o=i.drawRange,l=o.start/3,p=(o.start+o.count)/3;for(const f of i.groups){const A=f.start/3,_=(f.start+f.count)/3;r.add(Math.max(l,A)),r.add(Math.min(p,_))}const h=Array.from(r.values()).sort((f,A)=>f-A);for(let f=0;f<h.length-1;f++){const A=h[f],_=h[f+1];t.push({offset:Math.floor(A),count:Math.floor(_-A)})}return t}function bT(i){if(i.groups.length===0)return!1;const t=r1(i),r=OC(i).sort((p,h)=>p.offset-h.offset),o=r[r.length-1];o.count=Math.min(t-o.offset,o.count);let l=0;return r.forEach(({count:p})=>l+=p),t!==l}function qs(i,t,r){return r.min.x=t[i],r.min.y=t[i+1],r.min.z=t[i+2],r.max.x=t[i+3],r.max.y=t[i+4],r.max.z=t[i+5],r}function xT(i){i[0]=i[1]=i[2]=1/0,i[3]=i[4]=i[5]=-1/0}function DC(i){let t=-1,r=-1/0;for(let o=0;o<3;o++){const l=i[o+3]-i[o];l>r&&(r=l,t=o)}return t}function PC(i,t){t.set(i)}function LC(i,t,r){let o,l;for(let p=0;p<3;p++){const h=p+3;o=i[p],l=t[p],r[p]=o<l?o:l,o=i[h],l=t[h],r[h]=o>l?o:l}}function G2(i,t,r){for(let o=0;o<3;o++){const l=t[i+2*o],p=t[i+2*o+1],h=l-p,f=l+p;h<r[o]&&(r[o]=h),f>r[o+3]&&(r[o+3]=f)}}function Qy(i){const t=i[3]-i[0],r=i[4]-i[1],o=i[5]-i[2];return 2*(t*r+r*o+o*t)}function xb(i,t,r,o,l=null){let p=1/0,h=1/0,f=1/0,A=-1/0,_=-1/0,b=-1/0,T=1/0,B=1/0,F=1/0,P=-1/0,L=-1/0,O=-1/0;const G=l!==null;for(let D=t*6,k=(t+r)*6;D<k;D+=6){const N=i[D+0],V=i[D+1],Q=N-V,K=N+V;Q<p&&(p=Q),K>A&&(A=K),G&&N<T&&(T=N),G&&N>P&&(P=N);const X=i[D+2],oe=i[D+3],ae=X-oe,ge=X+oe;ae<h&&(h=ae),ge>_&&(_=ge),G&&X<B&&(B=X),G&&X>L&&(L=X);const ie=i[D+4],_e=i[D+5],me=ie-_e,we=ie+_e;me<f&&(f=me),we>b&&(b=we),G&&ie<F&&(F=ie),G&&ie>O&&(O=ie)}o[0]=p,o[1]=h,o[2]=f,o[3]=A,o[4]=_,o[5]=b,G&&(l[0]=T,l[1]=B,l[2]=F,l[3]=P,l[4]=L,l[5]=O)}function MT(i,t,r,o){let l=1/0,p=1/0,h=1/0,f=-1/0,A=-1/0,_=-1/0;for(let b=t*6,T=(t+r)*6;b<T;b+=6){const B=i[b+0];B<l&&(l=B),B>f&&(f=B);const F=i[b+2];F<p&&(p=F),F>A&&(A=F);const P=i[b+4];P<h&&(h=P),P>_&&(_=P)}o[0]=l,o[1]=p,o[2]=h,o[3]=f,o[4]=A,o[5]=_}function CT(i,t){xT(t);const r=i.attributes.position,o=i.index?i.index.array:null,l=r1(i),p=new Float32Array(l*6),h=r.normalized,f=r.array,A=r.offset||0;let _=3;r.isInterleavedBufferAttribute&&(_=r.data.stride);const b=["getX","getY","getZ"];for(let T=0;T<l;T++){const B=T*3,F=T*6;let P=B+0,L=B+1,O=B+2;o&&(P=o[P],L=o[L],O=o[O]),h||(P=P*_+A,L=L*_+A,O=O*_+A);for(let G=0;G<3;G++){let D,k,N;h?(D=r[b[G]](P),k=r[b[G]](L),N=r[b[G]](O)):(D=f[P+G],k=f[L+G],N=f[O+G]);let V=D;k<V&&(V=k),N<V&&(V=N);let Q=D;k>Q&&(Q=k),N>Q&&(Q=N);const K=(Q-V)/2,X=G*2;p[F+X+0]=V+K,p[F+X+1]=K+(Math.abs(V)+K)*_T,V<t[G]&&(t[G]=V),Q>t[G+3]&&(t[G+3]=Q)}}return p}var ST=y(25108);const Yh=32,wT=(i,t)=>i.candidate-t.candidate,ag=new Array(Yh).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),U2=new Float32Array(6);function TT(i,t,r,o,l,p){let h=-1,f=0;if(p===SC)h=DC(t),h!==-1&&(f=(t[h]+t[h+3])/2);else if(p===vT)h=DC(i),h!==-1&&(f=BT(r,o,l,h));else if(p===k2){const A=Qy(i);let _=Eb*l;const b=o*6,T=(o+l)*6;for(let B=0;B<3;B++){const F=t[B],O=(t[B+3]-F)/Yh;if(l<Yh/4){const G=[...ag];G.length=l;let D=0;for(let N=b;N<T;N+=6,D++){const V=G[D];V.candidate=r[N+2*B],V.count=0;const{bounds:Q,leftCacheBounds:K,rightCacheBounds:X}=V;for(let oe=0;oe<3;oe++)X[oe]=1/0,X[oe+3]=-1/0,K[oe]=1/0,K[oe+3]=-1/0,Q[oe]=1/0,Q[oe+3]=-1/0;G2(N,r,Q)}G.sort(wT);let k=l;for(let N=0;N<k;N++){const V=G[N];for(;N+1<k&&G[N+1].candidate===V.candidate;)G.splice(N+1,1),k--}for(let N=b;N<T;N+=6){const V=r[N+2*B];for(let Q=0;Q<k;Q++){const K=G[Q];V>=K.candidate?G2(N,r,K.rightCacheBounds):(G2(N,r,K.leftCacheBounds),K.count++)}}for(let N=0;N<k;N++){const V=G[N],Q=V.count,K=l-V.count,X=V.leftCacheBounds,oe=V.rightCacheBounds;let ae=0;Q!==0&&(ae=Qy(X)/A);let ge=0;K!==0&&(ge=Qy(oe)/A);const ie=TC+Eb*(ae*Q+ge*K);ie<_&&(h=B,_=ie,f=V.candidate)}}else{for(let k=0;k<Yh;k++){const N=ag[k];N.count=0,N.candidate=F+O+k*O;const V=N.bounds;for(let Q=0;Q<3;Q++)V[Q]=1/0,V[Q+3]=-1/0}for(let k=b;k<T;k+=6){let Q=~~((r[k+2*B]-F)/O);Q>=Yh&&(Q=Yh-1);const K=ag[Q];K.count++,G2(k,r,K.bounds)}const G=ag[Yh-1];PC(G.bounds,G.rightCacheBounds);for(let k=Yh-2;k>=0;k--){const N=ag[k],V=ag[k+1];LC(N.bounds,V.rightCacheBounds,N.rightCacheBounds)}let D=0;for(let k=0;k<Yh-1;k++){const N=ag[k],V=N.count,Q=N.bounds,X=ag[k+1].rightCacheBounds;V!==0&&(D===0?PC(Q,U2):LC(Q,U2,U2)),D+=V;let oe=0,ae=0;D!==0&&(oe=Qy(U2)/A);const ge=l-D;ge!==0&&(ae=Qy(X)/A);const ie=TC+Eb*(oe*D+ae*ge);ie<_&&(h=B,_=ie,f=N.candidate)}}}}else ST.warn(`MeshBVH: Invalid build strategy value ${p} used.`);return{axis:h,pos:f}}function BT(i,t,r,o){let l=0;for(let p=t,h=t+r;p<h;p++)l+=i[p*6+o*2];return l/r}class N2{constructor(){}}function IT(i,t,r,o,l,p){let h=o,f=o+l-1;const A=p.pos,_=p.axis*2;for(;;){for(;h<=f&&r[h*6+_]<A;)h++;for(;h<=f&&r[f*6+_]>=A;)f--;if(h<f){for(let b=0;b<3;b++){let T=t[h*3+b];t[h*3+b]=t[f*3+b],t[f*3+b]=T}for(let b=0;b<6;b++){let T=r[h*6+b];r[h*6+b]=r[f*6+b],r[f*6+b]=T}h++,f--}else return h}}function RT(i,t,r,o,l,p){let h=o,f=o+l-1;const A=p.pos,_=p.axis*2;for(;;){for(;h<=f&&r[h*6+_]<A;)h++;for(;h<=f&&r[f*6+_]>=A;)f--;if(h<f){let b=i[h];i[h]=i[f],i[f]=b;for(let T=0;T<6;T++){let B=r[h*6+T];r[h*6+T]=r[f*6+T],r[f*6+T]=B}h++,f--}else return h}}var Mb=y(25108);function FT(i,t){const r=(i.index?i.index.count:i.attributes.position.count)/3,o=r>wm(2,16),l=o?4:2,p=t?new SharedArrayBuffer(r*l):new ArrayBuffer(r*l),h=o?new Uint32Array(p):new Uint16Array(p);for(let f=0,A=h.length;f<A;f++)h[f]=f;return h}function OT(i,t){const r=i.geometry,o=r.index?r.index.array:null,l=t.maxDepth,p=t.verbose,h=t.maxLeafTris,f=t.strategy,A=t.onProgress,_=r1(r),b=i._indirectBuffer;let T=!1;const B=new Float32Array(6),F=new Float32Array(6),P=CT(r,B),L=t.indirect?RT:IT,O=[],G=t.indirect?FC(r):OC(r);if(G.length===1){const N=G[0],V=new N2;V.boundingData=B,MT(P,N.offset,N.count,F),k(V,N.offset,N.count,F),O.push(V)}else for(let N of G){const V=new N2;V.boundingData=new Float32Array(6),xb(P,N.offset,N.count,V.boundingData,F),k(V,N.offset,N.count,F),O.push(V)}return O;function D(N){A&&A(N/_)}function k(N,V,Q,K=null,X=0){if(!T&&X>=l&&(T=!0,p&&(Mb.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),Mb.warn(r))),Q<=h||X>=l)return D(V+Q),N.offset=V,N.count=Q,N;const oe=TT(N.boundingData,K,P,V,Q,f);if(oe.axis===-1)return D(V+Q),N.offset=V,N.count=Q,N;const ae=L(b,o,P,V,Q,oe);if(ae===V||ae===V+Q)D(V+Q),N.offset=V,N.count=Q;else{N.splitAxis=oe.axis;const ge=new N2,ie=V,_e=ae-V;N.left=ge,ge.boundingData=new Float32Array(6),xb(P,ie,_e,ge.boundingData,F),k(ge,ie,_e,F,X+1);const me=new N2,we=ae,ke=Q-_e;N.right=me,me.boundingData=new Float32Array(6),xb(P,we,ke,me.boundingData,F),k(me,we,ke,F,X+1)}return N}}function DT(i,t){const r=i.geometry;t.indirect&&(i._indirectBuffer=FT(r,t.useSharedArrayBuffer),bT(r)&&!t.verbose&&Mb.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),i._indirectBuffer||ET(r,t);const o=OT(i,t);let l,p,h;const f=[],A=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let T=0;T<o.length;T++){const B=o[T];let F=_(B);const P=new A(Mm*F);l=new Float32Array(P),p=new Uint32Array(P),h=new Uint16Array(P),b(0,B),f.push(P)}i._roots=f;return;function _(T){return T.count?1:1+_(T.left)+_(T.right)}function b(T,B){const F=T/4,P=T/2,L=!!B.count,O=B.boundingData;for(let G=0;G<6;G++)l[F+G]=O[G];if(L){const G=B.offset,D=B.count;return p[F+6]=G,h[P+14]=D,h[P+15]=z2,T+Mm}else{const G=B.left,D=B.right,k=B.splitAxis;let N;if(N=b(T+Mm,G),N/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return p[F+6]=N/4,N=b(N,D),p[F+7]=k,N}}}class Qd{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,r){let o=1/0,l=-1/0;for(let p=0,h=t.length;p<h;p++){const A=t[p][r];o=A<o?A:o,l=A>l?A:l}this.min=o,this.max=l}setFromPoints(t,r){let o=1/0,l=-1/0;for(let p=0,h=r.length;p<h;p++){const f=r[p],A=t.dot(f);o=A<o?A:o,l=A>l?A:l}this.min=o,this.max=l}isSeparated(t){return this.min>t.max||t.min>this.max}}Qd.prototype.setFromBox=function(){const i=new s.Vector3;return function(r,o){const l=o.min,p=o.max;let h=1/0,f=-1/0;for(let A=0;A<=1;A++)for(let _=0;_<=1;_++)for(let b=0;b<=1;b++){i.x=l.x*A+p.x*(1-A),i.y=l.y*_+p.y*(1-_),i.z=l.z*b+p.z*(1-b);const T=r.dot(i);h=Math.min(T,h),f=Math.max(T,f)}this.min=h,this.max=f}}();const j6=function(){const i=new Qd;return function(r,o){const l=r.points,p=r.satAxes,h=r.satBounds,f=o.points,A=o.satAxes,_=o.satBounds;for(let b=0;b<3;b++){const T=h[b],B=p[b];if(i.setFromPoints(B,f),T.isSeparated(i))return!1}for(let b=0;b<3;b++){const T=_[b],B=A[b];if(i.setFromPoints(B,l),T.isSeparated(i))return!1}}}(),PT=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Vector3;return function(l,p,h){const f=l.start,A=i,_=p.start,b=t;r.subVectors(f,_),i.subVectors(l.end,l.start),t.subVectors(p.end,p.start);const T=r.dot(b),B=b.dot(A),F=b.dot(b),P=r.dot(A),O=A.dot(A)*F-B*B;let G,D;O!==0?G=(T*B-P*F)/O:G=0,D=(T+G*B)/F,h.x=G,h.y=D}}(),Cb=function(){const i=new s.Vector2,t=new s.Vector3,r=new s.Vector3;return function(l,p,h,f){PT(l,p,i);let A=i.x,_=i.y;if(A>=0&&A<=1&&_>=0&&_<=1){l.at(A,h),p.at(_,f);return}else if(A>=0&&A<=1){_<0?p.at(0,f):p.at(1,f),l.closestPointToPoint(f,!0,h);return}else if(_>=0&&_<=1){A<0?l.at(0,h):l.at(1,h),p.closestPointToPoint(h,!0,f);return}else{let b;A<0?b=l.start:b=l.end;let T;_<0?T=p.start:T=p.end;const B=t,F=r;if(l.closestPointToPoint(T,!0,t),p.closestPointToPoint(b,!0,r),B.distanceToSquared(T)<=F.distanceToSquared(b)){h.copy(B),f.copy(T);return}else{h.copy(b),f.copy(F);return}}}}(),LT=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Plane,o=new s.Line3;return function(p,h){const{radius:f,center:A}=p,{a:_,b,c:T}=h;if(o.start=_,o.end=b,o.closestPointToPoint(A,!0,i).distanceTo(A)<=f||(o.start=_,o.end=T,o.closestPointToPoint(A,!0,i).distanceTo(A)<=f)||(o.start=b,o.end=T,o.closestPointToPoint(A,!0,i).distanceTo(A)<=f))return!0;const L=h.getPlane(r);if(Math.abs(L.distanceToPoint(A))<=f){const G=L.projectPoint(A,t);if(h.containsPoint(G))return!0}return!1}}();var kT=y(25108);const zT=1e-15;function Sb(i){return Math.abs(i)<zT}class qu extends s.Triangle{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new s.Vector3),this.satBounds=new Array(4).fill().map(()=>new Qd),this.points=[this.a,this.b,this.c],this.sphere=new s.Sphere,this.plane=new s.Plane,this.needsUpdate=!0}intersectsSphere(t){return LT(t,this)}update(){const t=this.a,r=this.b,o=this.c,l=this.points,p=this.satAxes,h=this.satBounds,f=p[0],A=h[0];this.getNormal(f),A.setFromPoints(f,l);const _=p[1],b=h[1];_.subVectors(t,r),b.setFromPoints(_,l);const T=p[2],B=h[2];T.subVectors(r,o),B.setFromPoints(T,l);const F=p[3],P=h[3];F.subVectors(o,t),P.setFromPoints(F,l),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(f,t),this.needsUpdate=!1}}qu.prototype.closestPointToSegment=function(){const i=new s.Vector3,t=new s.Vector3,r=new s.Line3;return function(l,p=null,h=null){const{start:f,end:A}=l,_=this.points;let b,T=1/0;for(let B=0;B<3;B++){const F=(B+1)%3;r.start.copy(_[B]),r.end.copy(_[F]),Cb(r,l,i,t),b=i.distanceToSquared(t),b<T&&(T=b,p&&p.copy(i),h&&h.copy(t))}return this.closestPointToPoint(f,i),b=f.distanceToSquared(i),b<T&&(T=b,p&&p.copy(i),h&&h.copy(f)),this.closestPointToPoint(A,i),b=A.distanceToSquared(i),b<T&&(T=b,p&&p.copy(i),h&&h.copy(A)),Math.sqrt(T)}}(),qu.prototype.intersectsTriangle=function(){const i=new qu,t=new Array(3),r=new Array(3),o=new Qd,l=new Qd,p=new s.Vector3,h=new s.Vector3,f=new s.Vector3,A=new s.Vector3,_=new s.Vector3,b=new s.Line3,T=new s.Line3,B=new s.Line3,F=new s.Vector3;function P(L,O,G){const D=L.points;let k=0,N=-1;for(let V=0;V<3;V++){const{start:Q,end:K}=b;Q.copy(D[V]),K.copy(D[(V+1)%3]),b.delta(h);const X=Sb(O.distanceToPoint(Q));if(Sb(O.normal.dot(h))&&X){G.copy(b),k=2;break}const oe=O.intersectLine(b,F);if(!oe&&X&&F.copy(Q),(oe||X)&&!Sb(F.distanceTo(K))){if(k<=1)(k===1?G.start:G.end).copy(F),X&&(N=k);else if(k>=2){(N===1?G.start:G.end).copy(F),k=2;break}if(k++,k===2&&N===-1)break}}return k}return function(O,G=null,D=!1){this.needsUpdate&&this.update(),O.isExtendedTriangle?O.needsUpdate&&O.update():(i.copy(O),i.update(),O=i);const k=this.plane,N=O.plane;if(Math.abs(k.normal.dot(N.normal))>1-1e-10){const V=this.satBounds,Q=this.satAxes;r[0]=O.a,r[1]=O.b,r[2]=O.c;for(let oe=0;oe<4;oe++){const ae=V[oe],ge=Q[oe];if(o.setFromPoints(ge,r),ae.isSeparated(o))return!1}const K=O.satBounds,X=O.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let oe=0;oe<4;oe++){const ae=K[oe],ge=X[oe];if(o.setFromPoints(ge,t),ae.isSeparated(o))return!1}for(let oe=0;oe<4;oe++){const ae=Q[oe];for(let ge=0;ge<4;ge++){const ie=X[ge];if(p.crossVectors(ae,ie),o.setFromPoints(p,t),l.setFromPoints(p,r),o.isSeparated(l))return!1}}return G&&(D||kT.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),G.start.set(0,0,0),G.end.set(0,0,0)),!0}else{const V=P(this,N,T);if(V===1&&O.containsPoint(T.end))return G&&(G.start.copy(T.end),G.end.copy(T.end)),!0;if(V!==2)return!1;const Q=P(O,k,B);if(Q===1&&this.containsPoint(B.end))return G&&(G.start.copy(B.end),G.end.copy(B.end)),!0;if(Q!==2)return!1;if(T.delta(f),B.delta(A),f.dot(A)<0){let _e=B.start;B.start=B.end,B.end=_e}const K=T.start.dot(f),X=T.end.dot(f),oe=B.start.dot(f),ae=B.end.dot(f),ge=X<oe,ie=K<ae;return K!==ae&&oe!==X&&ge===ie?!1:(G&&(_.subVectors(T.start,B.start),_.dot(f)>0?G.start.copy(T.start):G.start.copy(B.start),_.subVectors(T.end,B.end),_.dot(f)<0?G.end.copy(T.end):G.end.copy(B.end)),!0)}}}(),qu.prototype.distanceToPoint=function(){const i=new s.Vector3;return function(r){return this.closestPointToPoint(r,i),r.distanceTo(i)}}(),qu.prototype.distanceToTriangle=function(){const i=new s.Vector3,t=new s.Vector3,r=["a","b","c"],o=new s.Line3,l=new s.Line3;return function(h,f=null,A=null){const _=f||A?o:null;if(this.intersectsTriangle(h,_))return(f||A)&&(f&&_.getCenter(f),A&&_.getCenter(A)),0;let b=1/0;for(let T=0;T<3;T++){let B;const F=r[T],P=h[F];this.closestPointToPoint(P,i),B=P.distanceToSquared(i),B<b&&(b=B,f&&f.copy(i),A&&A.copy(P));const L=this[F];h.closestPointToPoint(L,i),B=L.distanceToSquared(i),B<b&&(b=B,f&&f.copy(L),A&&A.copy(i))}for(let T=0;T<3;T++){const B=r[T],F=r[(T+1)%3];o.set(this[B],this[F]);for(let P=0;P<3;P++){const L=r[P],O=r[(P+1)%3];l.set(h[L],h[O]),Cb(o,l,i,t);const G=i.distanceToSquared(t);G<b&&(b=G,f&&f.copy(i),A&&A.copy(t))}}return Math.sqrt(b)}}();class mc{constructor(t,r,o){this.isOrientedBox=!0,this.min=new s.Vector3,this.max=new s.Vector3,this.matrix=new s.Matrix4,this.invMatrix=new s.Matrix4,this.points=new Array(8).fill().map(()=>new s.Vector3),this.satAxes=new Array(3).fill().map(()=>new s.Vector3),this.satBounds=new Array(3).fill().map(()=>new Qd),this.alignedSatBounds=new Array(3).fill().map(()=>new Qd),this.needsUpdate=!1,t&&this.min.copy(t),r&&this.max.copy(r),o&&this.matrix.copy(o)}set(t,r,o){this.min.copy(t),this.max.copy(r),this.matrix.copy(o),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}}mc.prototype.update=function(){return function(){const t=this.matrix,r=this.min,o=this.max,l=this.points;for(let _=0;_<=1;_++)for(let b=0;b<=1;b++)for(let T=0;T<=1;T++){const B=1*_|2*b|4*T,F=l[B];F.x=_?o.x:r.x,F.y=b?o.y:r.y,F.z=T?o.z:r.z,F.applyMatrix4(t)}const p=this.satBounds,h=this.satAxes,f=l[0];for(let _=0;_<3;_++){const b=h[_],T=p[_],B=1<<_,F=l[B];b.subVectors(f,F),T.setFromPoints(b,l)}const A=this.alignedSatBounds;A[0].setFromPointsField(l,"x"),A[1].setFromPointsField(l,"y"),A[2].setFromPointsField(l,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}(),mc.prototype.intersectsBox=function(){const i=new Qd;return function(r){this.needsUpdate&&this.update();const o=r.min,l=r.max,p=this.satBounds,h=this.satAxes,f=this.alignedSatBounds;if(i.min=o.x,i.max=l.x,f[0].isSeparated(i)||(i.min=o.y,i.max=l.y,f[1].isSeparated(i))||(i.min=o.z,i.max=l.z,f[2].isSeparated(i)))return!1;for(let A=0;A<3;A++){const _=h[A],b=p[A];if(i.setFromBox(_,r),b.isSeparated(i))return!1}return!0}}(),mc.prototype.intersectsTriangle=function(){const i=new qu,t=new Array(3),r=new Qd,o=new Qd,l=new s.Vector3;return function(h){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(i.copy(h),i.update(),h=i);const f=this.satBounds,A=this.satAxes;t[0]=h.a,t[1]=h.b,t[2]=h.c;for(let B=0;B<3;B++){const F=f[B],P=A[B];if(r.setFromPoints(P,t),F.isSeparated(r))return!1}const _=h.satBounds,b=h.satAxes,T=this.points;for(let B=0;B<3;B++){const F=_[B],P=b[B];if(r.setFromPoints(P,T),F.isSeparated(r))return!1}for(let B=0;B<3;B++){const F=A[B];for(let P=0;P<4;P++){const L=b[P];if(l.crossVectors(F,L),r.setFromPoints(l,t),o.setFromPoints(l,T),r.isSeparated(o))return!1}}return!0}}(),mc.prototype.closestPointToPoint=function(){return function(t,r){return this.needsUpdate&&this.update(),r.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),r}}(),mc.prototype.distanceToPoint=function(){const i=new s.Vector3;return function(r){return this.closestPointToPoint(r,i),r.distanceTo(i)}}(),mc.prototype.distanceToBox=function(){const i=["x","y","z"],t=new Array(12).fill().map(()=>new s.Line3),r=new Array(12).fill().map(()=>new s.Line3),o=new s.Vector3,l=new s.Vector3;return function(h,f=0,A=null,_=null){if(this.needsUpdate&&this.update(),this.intersectsBox(h))return(A||_)&&(h.getCenter(l),this.closestPointToPoint(l,o),h.closestPointToPoint(o,l),A&&A.copy(o),_&&_.copy(l)),0;const b=f*f,T=h.min,B=h.max,F=this.points;let P=1/0;for(let O=0;O<8;O++){const G=F[O];l.copy(G).clamp(T,B);const D=G.distanceToSquared(l);if(D<P&&(P=D,A&&A.copy(G),_&&_.copy(l),D<b))return Math.sqrt(D)}let L=0;for(let O=0;O<3;O++)for(let G=0;G<=1;G++)for(let D=0;D<=1;D++){const k=(O+1)%3,N=(O+2)%3,V=G<<k|D<<N,Q=1<<O|G<<k|D<<N,K=F[V],X=F[Q];t[L].set(K,X);const ae=i[O],ge=i[k],ie=i[N],_e=r[L],me=_e.start,we=_e.end;me[ae]=T[ae],me[ge]=G?T[ge]:B[ge],me[ie]=D?T[ie]:B[ge],we[ae]=B[ae],we[ge]=G?T[ge]:B[ge],we[ie]=D?T[ie]:B[ge],L++}for(let O=0;O<=1;O++)for(let G=0;G<=1;G++)for(let D=0;D<=1;D++){l.x=O?B.x:T.x,l.y=G?B.y:T.y,l.z=D?B.z:T.z,this.closestPointToPoint(l,o);const k=l.distanceToSquared(o);if(k<P&&(P=k,A&&A.copy(o),_&&_.copy(l),k<b))return Math.sqrt(k)}for(let O=0;O<12;O++){const G=t[O];for(let D=0;D<12;D++){const k=r[D];Cb(G,k,o,l);const N=o.distanceToSquared(l);if(N<P&&(P=N,A&&A.copy(o),_&&_.copy(l),N<b))return Math.sqrt(N)}}return Math.sqrt(P)}}();class wb{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}class GT extends wb{constructor(){super(()=>new qu)}}const mu=new GT;function Xc(i,t){return t[i+15]===65535}function Yc(i,t){return t[i+6]}function Sp(i,t){return t[i+14]}function yu(i){return i+8}function wp(i,t){return t[i+6]}function Tb(i,t){return t[i+7]}function H6(i){return i}class UT{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const t=[];let r=null;this.setBuffer=o=>{r&&t.push(r),r=o,this.float32Array=new Float32Array(o),this.uint16Array=new Uint16Array(o),this.uint32Array=new Uint32Array(o)},this.clearBuffer=()=>{r=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,t.length!==0&&this.setBuffer(t.pop())}}}const ws=new UT;let lg,i1;const o1=[],j2=new wb(()=>new s.Box3);function NT(i,t,r,o,l,p){lg=j2.getPrimitive(),i1=j2.getPrimitive(),o1.push(lg,i1),ws.setBuffer(i._roots[t]);const h=Bb(0,i.geometry,r,o,l,p);ws.clearBuffer(),j2.releasePrimitive(lg),j2.releasePrimitive(i1),o1.pop(),o1.pop();const f=o1.length;return f>0&&(i1=o1[f-1],lg=o1[f-2]),h}function Bb(i,t,r,o,l=null,p=0,h=0){const{float32Array:f,uint16Array:A,uint32Array:_}=ws;let b=i*2;if(Xc(b,A)){const B=Yc(i,_),F=Sp(b,A);return qs(i,f,lg),o(B,F,!1,h,p+i,lg)}else{let ae=function(ie){const{uint16Array:_e,uint32Array:me}=ws;let we=ie*2;for(;!Xc(we,_e);)ie=yu(ie),we=ie*2;return Yc(ie,me)},ge=function(ie){const{uint16Array:_e,uint32Array:me}=ws;let we=ie*2;for(;!Xc(we,_e);)ie=wp(ie,me),we=ie*2;return Yc(ie,me)+Sp(we,_e)};const B=yu(i),F=wp(i,_);let P=B,L=F,O,G,D,k;if(l&&(D=lg,k=i1,qs(P,f,D),qs(L,f,k),O=l(D),G=l(k),G<O)){P=F,L=B;const ie=O;O=G,G=ie,D=k}D||(D=lg,qs(P,f,D));const N=Xc(P*2,A),V=r(D,N,O,h+1,p+P);let Q;if(V===wC){const ie=ae(P),me=ge(P)-ie;Q=o(ie,me,!0,h+1,p+P,D)}else Q=V&&Bb(P,t,r,o,l,p,h+1);if(Q)return!0;k=i1,qs(L,f,k);const K=Xc(L*2,A),X=r(k,K,G,h+1,p+L);let oe;if(X===wC){const ie=ae(L),me=ge(L)-ie;oe=o(ie,me,!0,h+1,p+L,k)}else oe=X&&Bb(L,t,r,o,l,p,h+1);return!!oe}}const Xy=new s.Vector3,Ib=new s.Vector3;function jT(i,t,r={},o=0,l=1/0){const p=o*o,h=l*l;let f=1/0,A=null;if(i.shapecast({boundsTraverseOrder:b=>(Xy.copy(t).clamp(b.min,b.max),Xy.distanceToSquared(t)),intersectsBounds:(b,T,B)=>B<f&&B<h,intersectsTriangle:(b,T)=>{b.closestPointToPoint(t,Xy);const B=t.distanceToSquared(Xy);return B<f&&(Ib.copy(Xy),f=B,A=T),B<p}}),f===1/0)return null;const _=Math.sqrt(f);return r.point?r.point.copy(Ib):r.point=Ib.clone(),r.distance=_,r.faceIndex=A,r}const s1=new s.Vector3,a1=new s.Vector3,l1=new s.Vector3,H2=new s.Vector2,W2=new s.Vector2,V2=new s.Vector2,kC=new s.Vector3,zC=new s.Vector3,GC=new s.Vector3,Q2=new s.Vector3;function HT(i,t,r,o,l,p){let h;return p===s.BackSide?h=i.intersectTriangle(o,r,t,!0,l):h=i.intersectTriangle(t,r,o,p!==s.DoubleSide,l),h===null?null:{distance:i.origin.distanceTo(l),point:l.clone()}}function WT(i,t,r,o,l,p,h,f,A){s1.fromBufferAttribute(t,p),a1.fromBufferAttribute(t,h),l1.fromBufferAttribute(t,f);const _=HT(i,s1,a1,l1,Q2,A);if(_){o&&(H2.fromBufferAttribute(o,p),W2.fromBufferAttribute(o,h),V2.fromBufferAttribute(o,f),_.uv=s.Triangle.getInterpolation(Q2,s1,a1,l1,H2,W2,V2,new s.Vector2)),l&&(H2.fromBufferAttribute(l,p),W2.fromBufferAttribute(l,h),V2.fromBufferAttribute(l,f),_.uv1=s.Triangle.getInterpolation(Q2,s1,a1,l1,H2,W2,V2,new s.Vector2)),r&&(kC.fromBufferAttribute(r,p),zC.fromBufferAttribute(r,h),GC.fromBufferAttribute(r,f),_.normal=s.Triangle.getInterpolation(Q2,s1,a1,l1,kC,zC,GC,new s.Vector3),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const b={a:p,b:h,c:f,normal:new s.Vector3,materialIndex:0};s.Triangle.getNormal(s1,a1,l1,b.normal),_.face=b,_.faceIndex=p}return _}function X2(i,t,r,o,l){const p=o*3;let h=p+0,f=p+1,A=p+2;const _=i.index;i.index&&(h=_.getX(h),f=_.getX(f),A=_.getX(A));const{position:b,normal:T,uv:B,uv1:F}=i.attributes,P=WT(r,b,T,B,F,h,f,A,t);return P?(P.faceIndex=o,l&&l.push(P),P):null}function La(i,t,r,o){const l=i.a,p=i.b,h=i.c;let f=t,A=t+1,_=t+2;r&&(f=r.getX(f),A=r.getX(A),_=r.getX(_)),l.x=o.getX(f),l.y=o.getY(f),l.z=o.getZ(f),p.x=o.getX(A),p.y=o.getY(A),p.z=o.getZ(A),h.x=o.getX(_),h.y=o.getY(_),h.z=o.getZ(_)}const Y2=new s.Vector3,K2=new s.Vector3,J2=new s.Vector3,UC=new s.Vector2,NC=new s.Vector2,jC=new s.Vector2;function W6(i,t,r,o){const l=t.getIndex().array,p=t.getAttribute("position"),h=t.getAttribute("uv"),f=l[r*3],A=l[r*3+1],_=l[r*3+2];Y2.fromBufferAttribute(p,f),K2.fromBufferAttribute(p,A),J2.fromBufferAttribute(p,_);let b=0;const T=t.groups,B=r*3;for(let P=0,L=T.length;P<L;P++){const O=T[P],{start:G,count:D}=O;if(B>=G&&B<G+D){b=O.materialIndex;break}}let F=null;return h&&(UC.fromBufferAttribute(h,f),NC.fromBufferAttribute(h,A),jC.fromBufferAttribute(h,_),o&&o.uv?F=o.uv:F=new Vector2,Triangle.getInterpolation(i,Y2,K2,J2,UC,NC,jC,F)),o?(o.face||(o.face={}),o.face.a=f,o.face.b=A,o.face.c=_,o.face.materialIndex=b,o.face.normal||(o.face.normal=new Vector3),Triangle.getNormal(Y2,K2,J2,o.face.normal),F&&(o.uv=F),o):{face:{a:f,b:A,c:_,materialIndex:b,normal:Triangle.getNormal(Y2,K2,J2,new Vector3)},uv:F}}function VT(i,t,r,o,l,p){const{geometry:h,_indirectBuffer:f}=i;for(let A=o,_=o+l;A<_;A++)X2(h,t,r,A,p)}function QT(i,t,r,o,l){const{geometry:p,_indirectBuffer:h}=i;let f=1/0,A=null;for(let _=o,b=o+l;_<b;_++){let T;T=X2(p,t,r,_),T&&T.distance<f&&(A=T,f=T.distance)}return A}function XT(i,t,r,o,l,p,h){const{geometry:f}=r,{index:A}=f,_=f.attributes.position;for(let b=i,T=t+i;b<T;b++){let B;if(B=b,La(h,B*3,A,_),h.needsUpdate=!0,o(h,B,l,p))return!0}return!1}function YT(i,t=null){t&&Array.isArray(t)&&(t=new Set(t));const r=i.geometry,o=r.index?r.index.array:null,l=r.attributes.position;let p,h,f,A,_=0;const b=i._roots;for(let B=0,F=b.length;B<F;B++)p=b[B],h=new Uint32Array(p),f=new Uint16Array(p),A=new Float32Array(p),T(0,_),_+=p.byteLength;function T(B,F,P=!1){const L=B*2;if(f[L+15]===z2){const G=h[B+6],D=f[L+14];let k=1/0,N=1/0,V=1/0,Q=-1/0,K=-1/0,X=-1/0;for(let oe=3*G,ae=3*(G+D);oe<ae;oe++){let ge=o[oe];const ie=l.getX(ge),_e=l.getY(ge),me=l.getZ(ge);ie<k&&(k=ie),ie>Q&&(Q=ie),_e<N&&(N=_e),_e>K&&(K=_e),me<V&&(V=me),me>X&&(X=me)}return A[B+0]!==k||A[B+1]!==N||A[B+2]!==V||A[B+3]!==Q||A[B+4]!==K||A[B+5]!==X?(A[B+0]=k,A[B+1]=N,A[B+2]=V,A[B+3]=Q,A[B+4]=K,A[B+5]=X,!0):!1}else{const G=B+8,D=h[B+6],k=G+F,N=D+F;let V=P,Q=!1,K=!1;t?V||(Q=t.has(k),K=t.has(N),V=!Q&&!K):(Q=!0,K=!0);const X=V||Q,oe=V||K;let ae=!1;X&&(ae=T(G,F,V));let ge=!1;oe&&(ge=T(D,F,V));const ie=ae||ge;if(ie)for(let _e=0;_e<3;_e++){const me=G+_e,we=D+_e,ke=A[me],De=A[me+3],Ne=A[we],Ge=A[we+3];A[B+_e]=ke<Ne?ke:Ne,A[B+_e+3]=De>Ge?De:Ge}return ie}}}const HC=new s.Box3;function cg(i,t,r,o){return qs(i,t,HC),r.intersectBox(HC,o)}const WC=new s.Vector3;function KT(i,t,r,o,l){ws.setBuffer(i._roots[t]),Rb(0,i,r,o,l),ws.clearBuffer()}function Rb(i,t,r,o,l){const{float32Array:p,uint16Array:h,uint32Array:f}=ws,A=i*2;if(Xc(A,h)){const b=Yc(i,f),T=Sp(A,h);VT(t,r,o,b,T,l)}else{const b=yu(i);cg(b,p,o,WC)&&Rb(b,t,r,o,l);const T=wp(i,f);cg(T,p,o,WC)&&Rb(T,t,r,o,l)}}const VC=new s.Vector3,JT=["x","y","z"];function qT(i,t,r,o){ws.setBuffer(i._roots[t]);const l=Fb(0,i,r,o);return ws.clearBuffer(),l}function Fb(i,t,r,o){const{float32Array:l,uint16Array:p,uint32Array:h}=ws;let f=i*2;if(Xc(f,p)){const _=Yc(i,h),b=Sp(f,p);return QT(t,r,o,_,b)}else{const _=Tb(i,h),b=JT[_],B=o.direction[b]>=0;let F,P;B?(F=yu(i),P=wp(i,h)):(F=wp(i,h),P=yu(i));const O=cg(F,l,o,VC)?Fb(F,t,r,o):null;if(O){const k=O.point[b];if(B?k<=l[P+_]:k>=l[P+_+3])return O}const D=cg(P,l,o,VC)?Fb(P,t,r,o):null;return O&&D?O.distance<=D.distance?O:D:O||D||null}}const q2=new s.Box3,c1=new qu,p1=new qu,Yy=new s.Matrix4,QC=new mc,Z2=new mc;function ZT(i,t,r,o){ws.setBuffer(i._roots[t]);const l=Ob(0,i,r,o);return ws.clearBuffer(),l}function Ob(i,t,r,o,l=null){const{float32Array:p,uint16Array:h,uint32Array:f}=ws;let A=i*2;if(l===null&&(r.boundingBox||r.computeBoundingBox(),QC.set(r.boundingBox.min,r.boundingBox.max,o),l=QC),Xc(A,h)){const b=t.geometry,T=b.index,B=b.attributes.position,F=r.index,P=r.attributes.position,L=Yc(i,f),O=Sp(A,h);if(Yy.copy(o).invert(),r.boundsTree)return qs(i,p,Z2),Z2.matrix.copy(Yy),Z2.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:D=>Z2.intersectsBox(D),intersectsTriangle:D=>{D.a.applyMatrix4(o),D.b.applyMatrix4(o),D.c.applyMatrix4(o),D.needsUpdate=!0;for(let k=L*3,N=(O+L)*3;k<N;k+=3)if(La(p1,k,T,B),p1.needsUpdate=!0,D.intersectsTriangle(p1))return!0;return!1}});for(let G=L*3,D=(O+L)*3;G<D;G+=3){La(c1,G,T,B),c1.a.applyMatrix4(Yy),c1.b.applyMatrix4(Yy),c1.c.applyMatrix4(Yy),c1.needsUpdate=!0;for(let k=0,N=F.count;k<N;k+=3)if(La(p1,k,F,P),p1.needsUpdate=!0,c1.intersectsTriangle(p1))return!0}}else{const b=i+8,T=f[i+6];return qs(b,p,q2),!!(l.intersectsBox(q2)&&Ob(b,t,r,o,l)||(qs(T,p,q2),l.intersectsBox(q2)&&Ob(T,t,r,o,l)))}}const $2=new s.Matrix4,Db=new mc,Ky=new mc,$T=new s.Vector3,eB=new s.Vector3,tB=new s.Vector3,nB=new s.Vector3;function rB(i,t,r,o={},l={},p=0,h=1/0){t.boundingBox||t.computeBoundingBox(),Db.set(t.boundingBox.min,t.boundingBox.max,r),Db.needsUpdate=!0;const f=i.geometry,A=f.attributes.position,_=f.index,b=t.attributes.position,T=t.index,B=mu.getPrimitive(),F=mu.getPrimitive();let P=$T,L=eB,O=null,G=null;l&&(O=tB,G=nB);let D=1/0,k=null,N=null;return $2.copy(r).invert(),Ky.matrix.copy($2),i.shapecast({boundsTraverseOrder:V=>Db.distanceToBox(V),intersectsBounds:(V,Q,K)=>K<D&&K<h?(Q&&(Ky.min.copy(V.min),Ky.max.copy(V.max),Ky.needsUpdate=!0),!0):!1,intersectsRange:(V,Q)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:X=>Ky.distanceToBox(X),intersectsBounds:(X,oe,ae)=>ae<D&&ae<h,intersectsRange:(X,oe)=>{for(let ae=X,ge=X+oe;ae<ge;ae++){La(F,3*ae,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ie=V,_e=V+Q;ie<_e;ie++){La(B,3*ie,_,A),B.needsUpdate=!0;const me=B.distanceToTriangle(F,P,O);if(me<D&&(L.copy(P),G&&G.copy(O),D=me,k=ie,N=ae),me<p)return!0}}}});{const K=r1(t);for(let X=0,oe=K;X<oe;X++){La(F,3*X,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ae=V,ge=V+Q;ae<ge;ae++){La(B,3*ae,_,A),B.needsUpdate=!0;const ie=B.distanceToTriangle(F,P,O);if(ie<D&&(L.copy(P),G&&G.copy(O),D=ie,k=ae,N=X),ie<p)return!0}}}}}),mu.releasePrimitive(B),mu.releasePrimitive(F),D===1/0?null:(o.point?o.point.copy(L):o.point=L.clone(),o.distance=D,o.faceIndex=k,l&&(l.point?l.point.copy(G):l.point=G.clone(),l.point.applyMatrix4($2),L.applyMatrix4($2),l.distance=L.sub(l.point).length(),l.faceIndex=N),o)}function iB(i,t,r,o,l,p){const{geometry:h,_indirectBuffer:f}=i;for(let A=o,_=o+l;A<_;A++){let b=f?f[A]:A;X2(h,t,r,b,p)}}function oB(i,t,r,o,l){const{geometry:p,_indirectBuffer:h}=i;let f=1/0,A=null;for(let _=o,b=o+l;_<b;_++){let T;T=X2(p,t,r,h?h[_]:_),T&&T.distance<f&&(A=T,f=T.distance)}return A}function sB(i,t,r,o,l,p,h){const{geometry:f}=r,{index:A}=f,_=f.attributes.position;for(let b=i,T=t+i;b<T;b++){let B;if(B=r.resolveTriangleIndex(b),La(h,B*3,A,_),h.needsUpdate=!0,o(h,B,l,p))return!0}return!1}function aB(i,t=null){t&&Array.isArray(t)&&(t=new Set(t));const r=i.geometry,o=r.index?r.index.array:null,l=r.attributes.position;let p,h,f,A,_=0;const b=i._roots;for(let B=0,F=b.length;B<F;B++)p=b[B],h=new Uint32Array(p),f=new Uint16Array(p),A=new Float32Array(p),T(0,_),_+=p.byteLength;function T(B,F,P=!1){const L=B*2;if(f[L+15]===z2){const G=h[B+6],D=f[L+14];let k=1/0,N=1/0,V=1/0,Q=-1/0,K=-1/0,X=-1/0;for(let oe=G,ae=G+D;oe<ae;oe++){const ge=3*i.resolveTriangleIndex(oe);for(let ie=0;ie<3;ie++){let _e=ge+ie;_e=o?o[_e]:_e;const me=l.getX(_e),we=l.getY(_e),ke=l.getZ(_e);me<k&&(k=me),me>Q&&(Q=me),we<N&&(N=we),we>K&&(K=we),ke<V&&(V=ke),ke>X&&(X=ke)}}return A[B+0]!==k||A[B+1]!==N||A[B+2]!==V||A[B+3]!==Q||A[B+4]!==K||A[B+5]!==X?(A[B+0]=k,A[B+1]=N,A[B+2]=V,A[B+3]=Q,A[B+4]=K,A[B+5]=X,!0):!1}else{const G=B+8,D=h[B+6],k=G+F,N=D+F;let V=P,Q=!1,K=!1;t?V||(Q=t.has(k),K=t.has(N),V=!Q&&!K):(Q=!0,K=!0);const X=V||Q,oe=V||K;let ae=!1;X&&(ae=T(G,F,V));let ge=!1;oe&&(ge=T(D,F,V));const ie=ae||ge;if(ie)for(let _e=0;_e<3;_e++){const me=G+_e,we=D+_e,ke=A[me],De=A[me+3],Ne=A[we],Ge=A[we+3];A[B+_e]=ke<Ne?ke:Ne,A[B+_e+3]=De>Ge?De:Ge}return ie}}}const XC=new s.Vector3;function lB(i,t,r,o,l){ws.setBuffer(i._roots[t]),Pb(0,i,r,o,l),ws.clearBuffer()}function Pb(i,t,r,o,l){const{float32Array:p,uint16Array:h,uint32Array:f}=ws,A=i*2;if(Xc(A,h)){const b=Yc(i,f),T=Sp(A,h);iB(t,r,o,b,T,l)}else{const b=yu(i);cg(b,p,o,XC)&&Pb(b,t,r,o,l);const T=wp(i,f);cg(T,p,o,XC)&&Pb(T,t,r,o,l)}}const YC=new s.Vector3,cB=["x","y","z"];function pB(i,t,r,o){ws.setBuffer(i._roots[t]);const l=Lb(0,i,r,o);return ws.clearBuffer(),l}function Lb(i,t,r,o){const{float32Array:l,uint16Array:p,uint32Array:h}=ws;let f=i*2;if(Xc(f,p)){const _=Yc(i,h),b=Sp(f,p);return oB(t,r,o,_,b)}else{const _=Tb(i,h),b=cB[_],B=o.direction[b]>=0;let F,P;B?(F=yu(i),P=wp(i,h)):(F=wp(i,h),P=yu(i));const O=cg(F,l,o,YC)?Lb(F,t,r,o):null;if(O){const k=O.point[b];if(B?k<=l[P+_]:k>=l[P+_+3])return O}const D=cg(P,l,o,YC)?Lb(P,t,r,o):null;return O&&D?O.distance<=D.distance?O:D:O||D||null}}const e_=new s.Box3,u1=new qu,d1=new qu,Jy=new s.Matrix4,KC=new mc,t_=new mc;function uB(i,t,r,o){ws.setBuffer(i._roots[t]);const l=kb(0,i,r,o);return ws.clearBuffer(),l}function kb(i,t,r,o,l=null){const{float32Array:p,uint16Array:h,uint32Array:f}=ws;let A=i*2;if(l===null&&(r.boundingBox||r.computeBoundingBox(),KC.set(r.boundingBox.min,r.boundingBox.max,o),l=KC),Xc(A,h)){const b=t.geometry,T=b.index,B=b.attributes.position,F=r.index,P=r.attributes.position,L=Yc(i,f),O=Sp(A,h);if(Jy.copy(o).invert(),r.boundsTree)return qs(i,p,t_),t_.matrix.copy(Jy),t_.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:D=>t_.intersectsBox(D),intersectsTriangle:D=>{D.a.applyMatrix4(o),D.b.applyMatrix4(o),D.c.applyMatrix4(o),D.needsUpdate=!0;for(let k=L,N=O+L;k<N;k++)if(La(d1,3*t.resolveTriangleIndex(k),T,B),d1.needsUpdate=!0,D.intersectsTriangle(d1))return!0;return!1}});for(let G=L,D=O+L;G<D;G++){const k=t.resolveTriangleIndex(G);La(u1,3*k,T,B),u1.a.applyMatrix4(Jy),u1.b.applyMatrix4(Jy),u1.c.applyMatrix4(Jy),u1.needsUpdate=!0;for(let N=0,V=F.count;N<V;N+=3)if(La(d1,N,F,P),d1.needsUpdate=!0,u1.intersectsTriangle(d1))return!0}}else{const b=i+8,T=f[i+6];return qs(b,p,e_),!!(l.intersectsBox(e_)&&kb(b,t,r,o,l)||(qs(T,p,e_),l.intersectsBox(e_)&&kb(T,t,r,o,l)))}}const n_=new s.Matrix4,zb=new mc,qy=new mc,dB=new s.Vector3,hB=new s.Vector3,fB=new s.Vector3,gB=new s.Vector3;function mB(i,t,r,o={},l={},p=0,h=1/0){t.boundingBox||t.computeBoundingBox(),zb.set(t.boundingBox.min,t.boundingBox.max,r),zb.needsUpdate=!0;const f=i.geometry,A=f.attributes.position,_=f.index,b=t.attributes.position,T=t.index,B=mu.getPrimitive(),F=mu.getPrimitive();let P=dB,L=hB,O=null,G=null;l&&(O=fB,G=gB);let D=1/0,k=null,N=null;return n_.copy(r).invert(),qy.matrix.copy(n_),i.shapecast({boundsTraverseOrder:V=>zb.distanceToBox(V),intersectsBounds:(V,Q,K)=>K<D&&K<h?(Q&&(qy.min.copy(V.min),qy.max.copy(V.max),qy.needsUpdate=!0),!0):!1,intersectsRange:(V,Q)=>{if(t.boundsTree){const K=t.boundsTree;return K.shapecast({boundsTraverseOrder:X=>qy.distanceToBox(X),intersectsBounds:(X,oe,ae)=>ae<D&&ae<h,intersectsRange:(X,oe)=>{for(let ae=X,ge=X+oe;ae<ge;ae++){const ie=K.resolveTriangleIndex(ae);La(F,3*ie,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let _e=V,me=V+Q;_e<me;_e++){const we=i.resolveTriangleIndex(_e);La(B,3*we,_,A),B.needsUpdate=!0;const ke=B.distanceToTriangle(F,P,O);if(ke<D&&(L.copy(P),G&&G.copy(O),D=ke,k=_e,N=ae),ke<p)return!0}}}})}else{const K=r1(t);for(let X=0,oe=K;X<oe;X++){La(F,3*X,T,b),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ae=V,ge=V+Q;ae<ge;ae++){const ie=i.resolveTriangleIndex(ae);La(B,3*ie,_,A),B.needsUpdate=!0;const _e=B.distanceToTriangle(F,P,O);if(_e<D&&(L.copy(P),G&&G.copy(O),D=_e,k=ae,N=X),_e<p)return!0}}}}}),mu.releasePrimitive(B),mu.releasePrimitive(F),D===1/0?null:(o.point?o.point.copy(L):o.point=L.clone(),o.distance=D,o.faceIndex=k,l&&(l.point?l.point.copy(G):l.point=G.clone(),l.point.applyMatrix4(n_),L.applyMatrix4(n_),l.distance=L.sub(l.point).length(),l.faceIndex=N),o)}function yB(){return typeof SharedArrayBuffer!="undefined"}const Zy=new ws.constructor,r_=new ws.constructor,pg=new wb(()=>new s.Box3),h1=new s.Box3,f1=new s.Box3,Gb=new s.Box3,Ub=new s.Box3;let Nb=!1;function AB(i,t,r,o){if(Nb)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");Nb=!0;const l=i._roots,p=t._roots;let h,f=0,A=0;const _=new s.Matrix4().copy(r).invert();for(let b=0,T=l.length;b<T;b++){Zy.setBuffer(l[b]),A=0;const B=pg.getPrimitive();qs(0,Zy.float32Array,B),B.applyMatrix4(_);for(let F=0,P=p.length;F<P&&(r_.setBuffer(p[b]),h=Zu(0,0,r,_,o,f,A,0,0,B),r_.clearBuffer(),A+=p[F].length,!h);F++);if(pg.releasePrimitive(B),Zy.clearBuffer(),f+=l[b].length,h)break}return Nb=!1,h}function Zu(i,t,r,o,l,p=0,h=0,f=0,A=0,_=null,b=!1){let T,B;b?(T=r_,B=Zy):(T=Zy,B=r_);const F=T.float32Array,P=T.uint32Array,L=T.uint16Array,O=B.float32Array,G=B.uint32Array,D=B.uint16Array,k=i*2,N=t*2,V=Xc(k,L),Q=Xc(N,D);let K=!1;if(Q&&V)b?K=l(Yc(t,G),Sp(t*2,D),Yc(i,P),Sp(i*2,L),A,h+t,f,p+i):K=l(Yc(i,P),Sp(i*2,L),Yc(t,G),Sp(t*2,D),f,p+i,A,h+t);else if(Q){const X=pg.getPrimitive();qs(t,O,X),X.applyMatrix4(r);const oe=yu(i),ae=wp(i,P);qs(oe,F,h1),qs(ae,F,f1);const ge=X.intersectsBox(h1),ie=X.intersectsBox(f1);K=ge&&Zu(t,oe,o,r,l,h,p,A,f+1,X,!b)||ie&&Zu(t,ae,o,r,l,h,p,A,f+1,X,!b),pg.releasePrimitive(X)}else{const X=yu(t),oe=wp(t,G);qs(X,O,Gb),qs(oe,O,Ub);const ae=_.intersectsBox(Gb),ge=_.intersectsBox(Ub);if(ae&&ge)K=Zu(i,X,r,o,l,p,h,f,A+1,_,b)||Zu(i,oe,r,o,l,p,h,f,A+1,_,b);else if(ae)if(V)K=Zu(i,X,r,o,l,p,h,f,A+1,_,b);else{const ie=pg.getPrimitive();ie.copy(Gb).applyMatrix4(r);const _e=yu(i),me=wp(i,P);qs(_e,F,h1),qs(me,F,f1);const we=ie.intersectsBox(h1),ke=ie.intersectsBox(f1);K=we&&Zu(X,_e,o,r,l,h,p,A,f+1,ie,!b)||ke&&Zu(X,me,o,r,l,h,p,A,f+1,ie,!b),pg.releasePrimitive(ie)}else if(ge)if(V)K=Zu(i,oe,r,o,l,p,h,f,A+1,_,b);else{const ie=pg.getPrimitive();ie.copy(Ub).applyMatrix4(r);const _e=yu(i),me=wp(i,P);qs(_e,F,h1),qs(me,F,f1);const we=ie.intersectsBox(h1),ke=ie.intersectsBox(f1);K=we&&Zu(oe,_e,o,r,l,h,p,A,f+1,ie,!b)||ke&&Zu(oe,me,o,r,l,h,p,A,f+1,ie,!b),pg.releasePrimitive(ie)}}return K}const i_=new mc,JC=new s.Box3;class o_{static serialize(t,r={}){r=jn({cloneBuffers:!0},r);const o=t.geometry,l=t._roots,p=t._indirectBuffer,h=o.getIndex();let f;return r.cloneBuffers?f={roots:l.map(A=>A.slice()),index:h.array.slice(),indirectBuffer:p?p.slice():null}:f={roots:l,index:h.array,indirectBuffer:p},f}static deserialize(t,r,o={}){o=jn({setIndex:!0,indirect:!!t.indirectBuffer},o);const{index:l,roots:p,indirectBuffer:h}=t,f=new o_(r,$o(jn({},o),{[bb]:!0}));if(f._roots=p,f._indirectBuffer=h||null,o.setIndex){const A=r.getIndex();if(A===null){const _=new s.BufferAttribute(t.index,1,!1);r.setIndex(_)}else A.array!==l&&(A.array.set(l),A.needsUpdate=!0)}return f}get indirect(){return!!this._indirectBuffer}constructor(t,r={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(r=Object.assign({strategy:SC,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,[bb]:!1},r),r.useSharedArrayBuffer&&!yB())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=t,this._roots=null,this._indirectBuffer=null,r[bb]||(DT(this,r),!t.boundingBox&&r.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new s.Box3)));const{_indirectBuffer:o}=this;this.resolveTriangleIndex=r.indirect?l=>o[l]:l=>l}refit(t=null){return(this.indirect?aB:YT)(this,t)}traverse(t,r=0){const o=this._roots[r],l=new Uint32Array(o),p=new Uint16Array(o);h(0);function h(f,A=0){const _=f*2,b=p[_+15]===z2;if(b){const T=l[f+6],B=p[_+14];t(A,b,new Float32Array(o,f*4,6),T,B)}else{const T=f+Mm/4,B=l[f+6],F=l[f+7];t(A,b,new Float32Array(o,f*4,6),F)||(h(T,A+1),h(B,A+1))}}}raycast(t,r=s.FrontSide){const o=this._roots,l=this.geometry,p=[],h=r.isMaterial,f=Array.isArray(r),A=l.groups,_=h?r.side:r,b=this.indirect?lB:KT;for(let T=0,B=o.length;T<B;T++){const F=f?r[A[T].materialIndex].side:_,P=p.length;if(b(this,T,F,t,p),f){const L=A[T].materialIndex;for(let O=P,G=p.length;O<G;O++)p[O].face.materialIndex=L}}return p}raycastFirst(t,r=s.FrontSide){const o=this._roots,l=this.geometry,p=r.isMaterial,h=Array.isArray(r);let f=null;const A=l.groups,_=p?r.side:r,b=this.indirect?pB:qT;for(let T=0,B=o.length;T<B;T++){const F=h?r[A[T].materialIndex].side:_,P=b(this,T,F,t);P!=null&&(f==null||P.distance<f.distance)&&(f=P,h&&(P.face.materialIndex=A[T].materialIndex))}return f}intersectsGeometry(t,r){let o=!1;const l=this._roots,p=this.indirect?uB:ZT;for(let h=0,f=l.length;h<f&&(o=p(this,h,t,r),!o);h++);return o}shapecast(t){const r=mu.getPrimitive(),o=this.indirect?sB:XT;let{boundsTraverseOrder:l,intersectsBounds:p,intersectsRange:h,intersectsTriangle:f}=t;if(h&&f){const T=h;h=(B,F,P,L,O)=>T(B,F,P,L,O)?!0:o(B,F,this,f,P,L,r)}else h||(f?h=(T,B,F,P)=>o(T,B,this,f,F,P,r):h=(T,B,F)=>F);let A=!1,_=0;const b=this._roots;for(let T=0,B=b.length;T<B;T++){const F=b[T];if(A=NT(this,T,p,h,l,_),A)break;_+=F.byteLength}return mu.releasePrimitive(r),A}bvhcast(t,r,o){let{intersectsRanges:l,intersectsTriangles:p}=o;const h=mu.getPrimitive(),f=this.geometry.index,A=this.geometry.attributes.position,_=this.indirect?P=>{const L=this.resolveTriangleIndex(P);La(h,L*3,f,A)}:P=>{La(h,P*3,f,A)},b=mu.getPrimitive(),T=t.geometry.index,B=t.geometry.attributes.position,F=t.indirect?P=>{const L=t.resolveTriangleIndex(P);La(b,L*3,T,B)}:P=>{La(b,P*3,T,B)};if(p){const P=(L,O,G,D,k,N,V,Q)=>{for(let K=G,X=G+D;K<X;K++){F(K),b.a.applyMatrix4(r),b.b.applyMatrix4(r),b.c.applyMatrix4(r),b.needsUpdate=!0;for(let oe=L,ae=L+O;oe<ae;oe++)if(_(oe),h.needsUpdate=!0,p(h,b,oe,K,k,N,V,Q))return!0}return!1};if(l){const L=l;l=function(O,G,D,k,N,V,Q,K){return L(O,G,D,k,N,V,Q,K)?!0:P(O,G,D,k,N,V,Q,K)}}else l=P}return AB(this,t,r,l)}intersectsBox(t,r){return i_.set(t.min,t.max,r),i_.needsUpdate=!0,this.shapecast({intersectsBounds:o=>i_.intersectsBox(o),intersectsTriangle:o=>i_.intersectsTriangle(o)})}intersectsSphere(t){return this.shapecast({intersectsBounds:r=>t.intersectsBox(r),intersectsTriangle:r=>r.intersectsSphere(t)})}closestPointToGeometry(t,r,o={},l={},p=0,h=1/0){return(this.indirect?mB:rB)(this,t,r,o,l,p,h)}closestPointToPoint(t,r={},o=0,l=1/0){return jT(this,t,r,o,l)}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(o=>{qs(0,new Float32Array(o),JC),t.union(JC)}),t}}const jb=new s.Ray,qC=new s.Matrix4,vB=s.Mesh.prototype.raycast;function ZC(i,t){if(this.geometry.boundsTree){if(this.material===void 0)return;qC.copy(this.matrixWorld).invert(),jb.copy(i.ray).applyMatrix4(qC);const r=this.geometry.boundsTree;if(i.firstHitOnly===!0){const o=BC(r.raycastFirst(jb,this.material),this,i);o&&t.push(o)}else{const o=r.raycast(jb,this.material);for(let l=0,p=o.length;l<p;l++){const h=BC(o[l],this,i);h&&t.push(h)}}}else vB.call(this,i,t)}function $C(i){return this.boundsTree=new o_(this,i),this.boundsTree}function eS(){this.boundsTree=null}const tS=i=>i.isMesh;function _B(i,t){t=jn({strategy:k2,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10},t),d.useEffect(()=>{if(i.current){i.current.raycast=ZC;const r=i.current.geometry;return r.computeBoundsTree=$C,r.disposeBoundsTree=eS,r.computeBoundsTree(t),()=>{r.boundsTree&&r.disposeBoundsTree()}}},[i,JSON.stringify(t)])}const EB=d.forwardRef((b,_)=>{var T=b,{enabled:i=!0,firstHitOnly:t=!1,children:r,strategy:o=k2,verbose:l=!1,setBoundingBox:p=!0,maxDepth:h=40,maxLeafTris:f=10}=T,A=mn(T,["enabled","firstHitOnly","children","strategy","verbose","setBoundingBox","maxDepth","maxLeafTris"]);const B=d.useRef(null),F=(0,E.z)(P=>P.raycaster);return d.useImperativeHandle(_,()=>B.current,[]),d.useEffect(()=>{if(i){const P={strategy:o,verbose:l,setBoundingBox:p,maxDepth:h,maxLeafTris:f},L=B.current;return F.firstHitOnly=t,L.traverse(O=>{tS(O)&&!O.geometry.boundsTree&&O.raycast===s.Mesh.prototype.raycast&&(O.raycast=ZC,O.geometry.computeBoundsTree=$C,O.geometry.disposeBoundsTree=eS,O.geometry.computeBoundsTree(P))}),()=>{delete F.firstHitOnly,L.traverse(O=>{tS(O)&&O.geometry.boundsTree&&(O.geometry.disposeBoundsTree(),O.raycast=s.Mesh.prototype.raycast)})}}}),d.createElement("group",(0,S.Z)({ref:B},A),r)});function bB(...i){const t=d.useRef([]);return t.current=i.map(r=>d.useContext(r)),d.useMemo(()=>({children:r})=>i.reduceRight((o,l,p)=>d.createElement(l.Provider,{value:t.current[p],children:o}),r),[])}function xB(i,t){const r=d.useRef(),[o]=d.useState(()=>t?t instanceof s.Object3D?{current:t}:t:r),[l]=d.useState(()=>new s.AnimationMixer(void 0));d.useLayoutEffect(()=>{t&&(o.current=t instanceof s.Object3D?t:t.current),l._root=o.current});const p=d.useRef({}),h=d.useMemo(()=>{const f={};return i.forEach(A=>Object.defineProperty(f,A.name,{enumerable:!0,get(){if(o.current)return p.current[A.name]||(p.current[A.name]=l.clipAction(A,o.current))},configurable:!0})),{ref:o,clips:i,actions:f,names:i.map(A=>A.name),mixer:l}},[i]);return(0,E.A)((f,A)=>l.update(A)),d.useEffect(()=>{const f=o.current;return()=>{p.current={},l.stopAllAction(),Object.values(h.actions).forEach(A=>{f&&l.uncacheAction(A,f)})}},[i]),h}function nS(i){const t=d.useRef(null),r=d.useRef(!1),o=d.useRef(!1),l=d.useRef(i);return d.useLayoutEffect(()=>void(l.current=i),[i]),d.useEffect(()=>{const p=t.current;if(p){const h=(0,E.n)(()=>(r.current=!1,!0)),f=p.onBeforeRender;p.onBeforeRender=()=>r.current=!0;const A=(0,E.o)(()=>(r.current!==o.current&&(l.current==null||l.current(o.current=r.current)),!0));return()=>{p.onBeforeRender=f,h(),A()}}},[]),t}const MB=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,CB=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,SB=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,wB=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function TB(i,t,r){i.defines.BOX_PROJECTED_ENV_MAP=!0,i.uniforms.envMapPosition={value:t},i.uniforms.envMapSize={value:r},i.vertexShader=`
  varying vec3 vWorldPosition;
  ${i.vertexShader.replace("#include <worldpos_vertex>",MB)}`,i.fragmentShader=`
    ${CB}
    ${i.fragmentShader.replace("#include <envmap_physical_pars_fragment>",s.ShaderChunk.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${SB}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${wB}
        `)}`}function BB(i=new s.Vector3,t=new s.Vector3){const[r]=d.useState(()=>({position:new s.Vector3,size:new s.Vector3}));(0,E.j)(r,{position:i,size:t});const o=d.useRef(null),l=d.useMemo(()=>({ref:o,onBeforeCompile:p=>TB(p,r.position,r.size),customProgramCacheKey:()=>JSON.stringify(r.position.toArray())+JSON.stringify(r.size.toArray())}),[...r.position.toArray(),...r.size.toArray()]);return d.useLayoutEffect(()=>void(o.current.needsUpdate=!0),[r]),l}const rS=new s.Box3,s_=new s.Vector3,IB=r=>{var o=r,{anchor:i}=o,t=mn(o,["anchor"]);const l=d.useRef(null),p=d.useRef(null);return d.useEffect(()=>{var h;(h=l.current)!=null&&(h=h.parent)!=null&&h.parent&&(p.current=l.current.parent,l.current.parent.parent.add(l.current))},[]),(0,E.A)(()=>{p.current&&(rS.setFromObject(p.current),rS.getSize(s_),l.current.position.set(p.current.position.x+s_.x*(Array.isArray(i)?i[0]:i.x)/2,p.current.position.y+s_.y*(Array.isArray(i)?i[1]:i.y)/2,p.current.position.z+s_.z*(Array.isArray(i)?i[2]:i.z)/2))}),d.createElement("group",(0,S.Z)({ref:l},t))};function RB(i,t,r=.9){return t*r+i*(1-r)}const FB=i=>Math.sqrt(1-Math.pow(i-1,2));class OB{constructor({size:t=256,maxAge:r=750,radius:o=.3,intensity:l=.2,interpolate:p=0,smoothing:h=0,minForce:f=.3,blend:A="screen",ease:_=FB}={}){this.size=t,this.maxAge=r,this.radius=o,this.intensity=l,this.ease=_,this.interpolate=p,this.smoothing=h,this.minForce=f,this.blend=A,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new s.Texture(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(t){this.clear(),this.trail.forEach((r,o)=>{r.age+=t*1e3,r.age>this.maxAge&&this.trail.splice(o,1)}),this.trail.length||(this.force=0),this.trail.forEach(r=>{this.drawTouch(r)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(t){const r=this.trail[this.trail.length-1];if(r){const o=r.x-t.x,l=r.y-t.y,p=o*o+l*l,h=Math.max(this.minForce,Math.min(p*1e4,1));if(this.force=RB(h,this.force,this.smoothing),this.interpolate){const f=Math.ceil(p/Math.pow(this.radius*.5/this.interpolate,2));if(f>1)for(let A=1;A<f;A++)this.trail.push({x:r.x-o/f*A,y:r.y-l/f*A,age:0,force:h})}}this.trail.push({x:t.x,y:t.y,age:0,force:this.force})}drawTouch(t){const r={x:t.x*this.size,y:(1-t.y)*this.size};let o=1;t.age<this.maxAge*.3?o=this.ease(t.age/(this.maxAge*.3)):o=this.ease(1-(t.age-this.maxAge*.3)/(this.maxAge*.7)),o*=t.force,this.ctx.globalCompositeOperation=this.blend;const l=this.size*this.radius*o,p=this.ctx.createRadialGradient(r.x,r.y,Math.max(0,l*.25),r.x,r.y,Math.max(0,l));p.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),p.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=p,this.ctx.arc(r.x,r.y,Math.max(0,l),0,Math.PI*2),this.ctx.fill()}}function DB(i={}){const{size:t,maxAge:r,radius:o,intensity:l,interpolate:p,smoothing:h,minForce:f,blend:A,ease:_}=i,b=(0,d.useMemo)(()=>new OB(i),[t,r,o,l,p,h,f,A,_]);(0,E.A)((B,F)=>void b.update(F));const T=(0,d.useCallback)(B=>b.addTouch(B.uv),[b]);return[b.texture,T]}const Hb=d.forwardRef(function(G,O){var D=G,{children:t,disable:r,disableX:o,disableY:l,disableZ:p,left:h,right:f,top:A,bottom:_,front:b,back:T,onCentered:B,precise:F=!0,cacheKey:P=0}=D,L=mn(D,["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"]);const k=d.useRef(null),N=d.useRef(null),V=d.useRef(null);return d.useLayoutEffect(()=>{N.current.matrixWorld.identity();const Q=new s.Box3().setFromObject(V.current,F),K=new s.Vector3,X=new s.Sphere,oe=Q.max.x-Q.min.x,ae=Q.max.y-Q.min.y,ge=Q.max.z-Q.min.z;Q.getCenter(K),Q.getBoundingSphere(X);const ie=A?ae/2:_?-ae/2:0,_e=h?-oe/2:f?oe/2:0,me=b?ge/2:T?-ge/2:0;N.current.position.set(r||o?0:-K.x+_e,r||l?0:-K.y+ie,r||p?0:-K.z+me),typeof B!="undefined"&&B({parent:k.current.parent,container:k.current,width:oe,height:ae,depth:ge,boundingBox:Q,boundingSphere:X,center:K,verticalAlignment:ie,horizontalAlignment:_e,depthAlignment:me})},[P,B,A,h,b,r,o,l,p,F,f,_,T]),d.useImperativeHandle(O,()=>k.current,[]),d.createElement("group",(0,S.Z)({ref:k},L),d.createElement("group",{ref:N},d.createElement("group",{ref:V},t)))}),PB=d.forwardRef((f,h)=>{var A=f,{font:i,color:t="#cbcbcb",bevelSize:r=.04,debug:o=!1,children:l}=A,p=mn(A,["font","color","bevelSize","debug","children"]);const[_,b]=d.useState(0),T=d.useCallback((P=1)=>b(_+P),[_]),B=d.useCallback((P=1)=>b(_-P),[_]),F=d.useMemo(()=>({incr:T,decr:B}),[T,B]);return d.useImperativeHandle(h,()=>F,[F]),d.createElement("group",p,d.createElement(d.Suspense,{fallback:null},d.createElement(Hb,{top:!0,cacheKey:JSON.stringify({counter:_,font:i})},d.createElement(Vf,{bevelEnabled:!0,bevelSize:r,font:i},o?d.createElement("meshNormalMaterial",{wireframe:!0}):d.createElement("meshStandardMaterial",{color:t}),_))),l)}),LB=(Q,V)=>{var K=Q,{startFrame:i,endFrame:t,fps:r,frameName:o,textureDataURL:l,textureImageURL:p,loop:h,numberOfFrames:f,autoPlay:A,animationNames:_,onStart:b,onEnd:T,onLoopEnd:B,onFrame:F,play:P,pause:L,flipX:O,alphaTest:G,children:D,asSprite:k}=K,N=mn(K,["startFrame","endFrame","fps","frameName","textureDataURL","textureImageURL","loop","numberOfFrames","autoPlay","animationNames","onStart","onEnd","onLoopEnd","onFrame","play","pause","flipX","alphaTest","children","asSprite"]);(0,E.z)(Bt=>Bt.viewport);const X=d.useRef(null),[oe,ae]=d.useState(!1),ge=d.useRef(!1),ie=d.useRef(),_e=d.useRef(),me=d.useRef(window.performance.now()),we=d.useRef(),ke=d.useRef(i||0),De=d.useRef(o||""),Ne=1e3/(r||30),[Ge,Ye]=d.useState(new s.Texture),Se=d.useRef(0),[xe,Ee]=d.useState([1,1,1]),le=O?-1:1,[ye,Be]=d.useState(k!=null?k:!0);function be(Bt,Ct,Ke){const Pe=new s.TextureLoader,wt=fetch(Bt).then(un=>un.json()),pn=new Promise(un=>{Pe.load(Ct,un)});Promise.all([wt,pn]).then(un=>{Ke(un[0],un[1])})}const je=(Bt,Ct)=>{const Ke=Ct/Bt;return _e.current&&_e.current.scale.set(1,Ke,1),[1,Ke,1]};d.useEffect(()=>{if(l&&p)be(l,p,Et);else if(p){const Bt=new s.TextureLoader;new Promise(Ct=>{Bt.load(p,Ct)}).then(Ct=>{Et(null,Ct)})}},[]),d.useEffect(()=>{Be(k!=null?k:!0)},[k]),d.useLayoutEffect(()=>{Tt()},[Ge,O]),d.useEffect(()=>{},[L]),d.useEffect(()=>{if(De.current!==o&&o&&(ke.current=0,De.current=o,ge.current=!1,Tt(),X.current)){const{w:Bt,h:Ct}=cn(X.current.frames).sourceSize,Ke=je(Bt,Ct);Ee(Ke)}},[o]);const Et=(Bt,Ct)=>{if(Bt===null){if(Ct&&f){const Ke=Ct.image.width,Pe=Ct.image.height,wt=Ke/f,pn=Pe;if(we.current=Ct,Se.current=f,X.current={frames:[],meta:{version:"1.0",size:{w:Ke,h:Pe},scale:"1"}},parseInt(wt.toString(),10)===wt)for(let un=0;un<f;un++)X.current.frames.push({frame:{x:un*wt,y:0,w:wt,h:pn},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:wt,h:pn},sourceSize:{w:wt,h:Pe}})}}else if(Ct){X.current=Bt,X.current.frames=Array.isArray(Bt.frames)?Bt.frames:Ft(),Se.current=Array.isArray(Bt.frames)?Bt.frames.length:Object.keys(Bt.frames).length,we.current=Ct;const{w:Ke,h:Pe}=cn(Bt.frames).sourceSize,wt=je(Ke,Pe);Ee(wt),ie.current&&(ie.current.map=Ct)}Ct.premultiplyAlpha=!1,Ye(Ct)},Ft=()=>{const Bt={},Ct=X.current,Ke=_;if(Ke)for(let Pe=0;Pe<Ke.length;Pe++){Bt[Ke[Pe]]=[];for(let wt in Ct.frames){const pn=Ct.frames[wt],un=pn.frame,Gt=un.x,kn=un.y,tr=un.w,xr=un.h,sr=pn.sourceSize.w,bi=pn.sourceSize.h;typeof wt=="string"&&wt.toLowerCase().indexOf(Ke[Pe].toLowerCase())!==-1&&Bt[Ke[Pe]].push({x:Gt,y:kn,w:tr,h:xr,frame:un,sourceSize:{w:sr,h:bi}})}}return Bt},Tt=()=>{if(!X.current)return;const{meta:{size:Bt},frames:Ct}=X.current,{w:Ke,h:Pe}=Array.isArray(Ct)?Ct[0].sourceSize:o?Ct[o]?Ct[o][0].sourceSize:{w:0,h:0}:{w:0,h:0};ie.current.map.wrapS=ie.current.map.wrapT=s.RepeatWrapping,ie.current.map.center.set(0,0),ie.current.map.repeat.set(1*le/(Bt.w/Ke),1/(Bt.h/Pe));const pn=1/((Bt.h-1)/Pe);ie.current.map.offset.x=0,ie.current.map.offset.y=1-pn,ae(!0),b&&b({currentFrameName:o,currentFrame:ke.current})},pt=()=>{const Bt=window.performance.now(),Ct=Bt-me.current,{meta:{size:Ke},frames:Pe}=X.current,{w:wt,h:pn}=cn(Pe).sourceSize,un=Array.isArray(Pe)?Pe:o?Pe[o]:[];let Gt=0,kn=0;const tr=t||un.length-1;if(ke.current>tr&&(ke.current=h&&i!=null?i:0,h?B==null||B({currentFrameName:o,currentFrame:ke.current}):(T==null||T({currentFrameName:o,currentFrame:ke.current}),ge.current=!0),!h)||Ct<=Ne)return;me.current=Bt-Ct%Ne,je(wt,pn);const xr=(Ke.w-1)/wt,sr=(Ke.h-1)/pn,{frame:{x:bi,y:Mi},sourceSize:{w:yr,h:Or}}=un[ke.current],Si=1/xr,so=1/sr;Gt=le>0?Si*(bi/yr):Si*(bi/yr)-ie.current.map.repeat.x,kn=Math.abs(1-so)-so*(Mi/Or),ie.current.map.offset.x=Gt,ie.current.map.offset.y=kn,ke.current+=1};(0,E.A)((Bt,Ct)=>{var Ke,Pe;!((Ke=X.current)!=null&&Ke.frames)||!((Pe=ie.current)!=null&&Pe.map)||L||!ge.current&&(A||P)&&(pt(),F&&F({currentFrameName:De.current,currentFrame:ke.current}))});const cn=Bt=>{if(Array.isArray(Bt))return Bt[0];if(typeof Bt=="object"&&Bt!==null){const Ct=Object.keys(Bt);return o?Bt[o][0]:Bt[Ct[0]][0]}else return{w:0,h:0}};return d.createElement("group",N,d.createElement(d.Suspense,{fallback:null},ye&&d.createElement("sprite",{ref:_e,scale:xe},d.createElement("spriteMaterial",{toneMapped:!1,ref:ie,map:Ge,transparent:!0,alphaTest:G!=null?G:0})),!ye&&d.createElement("mesh",{ref:_e,scale:xe},d.createElement("planeGeometry",{args:[1,1]}),d.createElement("meshBasicMaterial",{toneMapped:!1,side:s.DoubleSide,ref:ie,map:Ge,transparent:!0,alphaTest:G!=null?G:0}))),D)};var kB=Object.defineProperty,zB=(i,t,r)=>t in i?kB(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,Cm=(i,t,r)=>(zB(i,typeof t!="symbol"?t+"":t,r),r);const g1=4,m1=1024,Xd=4,GB=(i=1)=>{const t=new Float32Array(m1*Xd*i*g1),r=new s.DataTexture(t,m1,Xd*i,s.RGBAFormat,s.FloatType);return r.wrapS=s.RepeatWrapping,r.wrapT=s.RepeatWrapping,r.magFilter=s.NearestFilter,r.needsUpdate=!0,r},UB=(i,t,r=0)=>{const o=Math.floor(m1*(Xd/4));t.arcLengthDivisions=o/2,t.updateArcLengths();const l=t.getSpacedPoints(o),p=t.computeFrenetFrames(o,!0);for(let h=0;h<o;h++){const f=Math.floor(h/m1),A=h%m1;let _=l[h];a_(i,A,_.x,_.y,_.z,0+f+Xd*r),_=p.tangents[h],a_(i,A,_.x,_.y,_.z,1+f+Xd*r),_=p.normals[h],a_(i,A,_.x,_.y,_.z,2+f+Xd*r),_=p.binormals[h],a_(i,A,_.x,_.y,_.z,3+f+Xd*r)}i.needsUpdate=!0},a_=(i,t,r,o,l,p)=>{const h=i.image,{data:f}=h,A=g1*m1*p;f[t*g1+A+0]=r,f[t*g1+A+1]=o,f[t*g1+A+2]=l,f[t*g1+A+3]=1},NB=i=>({spineTexture:{value:i},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function jB(i,t,r=1){i.__ok||(i.__ok=!0,i.onBeforeCompile=o=>{if(o.__modified)return;o.__modified=!0,Object.assign(o.uniforms,t);const l=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Xd*r}.;
		float textureStacks = ${Xd/4}.;

		${o.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Xd}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);o.vertexShader=l})}class HB{constructor(t,r=1){Cm(this,"curveArray"),Cm(this,"curveLengthArray"),Cm(this,"object3D"),Cm(this,"splineTexure"),Cm(this,"uniforms");const o=t.clone(),l=GB(r),p=NB(l);o.traverse(h=>{(h instanceof s.Mesh||h instanceof s.InstancedMesh)&&(h.material=h.material.clone(),jB(h.material,p,r))}),this.curveArray=new Array(r),this.curveLengthArray=new Array(r),this.object3D=o,this.splineTexure=l,this.uniforms=p}updateCurve(t,r){if(t>=this.curveArray.length)throw Error("Index out of range for Flow");const o=r.getLength();this.uniforms.spineLength.value=o,this.curveLengthArray[t]=o,this.curveArray[t]=r,UB(this.splineTexure,r,t)}moveAlongCurve(t){this.uniforms.pathOffset.value+=t}}const iS=new s.Matrix4;class V6 extends null{constructor(t,r,o,l){const p=new InstancedMesh(o,l,t);p.instanceMatrix.setUsage(DynamicDrawUsage),p.frustumCulled=!1,super(p,r),Cm(this,"offsets"),Cm(this,"whichCurve"),this.offsets=new Array(t).fill(0),this.whichCurve=new Array(t).fill(0)}writeChanges(t){iS.makeTranslation(this.curveLengthArray[this.whichCurve[t]],this.whichCurve[t],this.offsets[t]),this.object3D.setMatrixAt(t,iS),this.object3D.instanceMatrix.needsUpdate=!0}moveIndividualAlongCurve(t,r){this.offsets[t]+=r,this.writeChanges(t)}setCurve(t,r){if(isNaN(r))throw Error("curve index being set is Not a Number (NaN)");this.whichCurve[t]=r,this.writeChanges(t)}}const WB=d.forwardRef(({children:i,curve:t},r)=>{const[o]=d.useState(()=>new s.Scene),[l,p]=d.useState(),h=d.useRef();return d.useEffect(()=>{h.current=new HB(o.children[0]),p(h.current.object3D)},[i]),d.useEffect(()=>{var f;t&&((f=h.current)==null||f.updateCurve(0,t))},[t]),d.useImperativeHandle(r,()=>({moveAlongCurve:f=>{var A;(A=h.current)==null||A.moveAlongCurve(f)}})),d.createElement(d.Fragment,null,(0,E.g)(i,o),l&&d.createElement("primitive",{object:l}))});var VB=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class QB extends s.MeshPhysicalMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${VB}
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}const XB=d.forwardRef((o,r)=>{var l=o,{speed:i=1}=l,t=mn(l,["speed"]);const[p]=d.useState(()=>new QB);return(0,E.A)(h=>p&&(p.time=h.clock.getElapsedTime()*i)),d.createElement("primitive",(0,S.Z)({object:p,ref:r,attach:"material"},t))});class YB extends s.MeshStandardMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._factor={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.factor=this._factor,t.vertexShader=`
      uniform float time;
      uniform float factor;
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(t){this._time.value=t}get factor(){return this._factor.value}set factor(t){this._factor.value=t}}const KB=d.forwardRef((o,r)=>{var l=o,{speed:i=1}=l,t=mn(l,["speed"]);const[p]=d.useState(()=>new YB);return(0,E.A)(h=>p&&(p.time=h.clock.getElapsedTime()*i)),d.createElement("primitive",(0,S.Z)({object:p,ref:r,attach:"material"},t))});class JB extends s.ShaderMaterial{constructor(t=new s.Vector2){super({uniforms:{inputBuffer:new s.Uniform(null),depthBuffer:new s.Uniform(null),resolution:new s.Uniform(new s.Vector2),texelSize:new s.Uniform(new s.Vector2),halfTexelSize:new s.Uniform(new s.Vector2),kernel:new s.Uniform(0),scale:new s.Uniform(1),cameraNear:new s.Uniform(0),cameraFar:new s.Uniform(1),minDepthThreshold:new s.Uniform(0),maxDepthThreshold:new s.Uniform(1),depthScale:new s.Uniform(0),depthToBlurRatioBias:new s.Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:s.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(t,r){this.uniforms.texelSize.value.set(t,r),this.uniforms.halfTexelSize.value.set(t,r).multiplyScalar(.5)}setResolution(t){this.uniforms.resolution.value.copy(t)}}class oS{constructor({gl:t,resolution:r,width:o=500,height:l=500,minDepthThreshold:p=0,maxDepthThreshold:h=1,depthScale:f=0,depthToBlurRatioBias:A=.25}){this.renderToScreen=!1,this.renderTargetA=new s.WebGLRenderTarget(r,r,{minFilter:s.LinearFilter,magFilter:s.LinearFilter,stencilBuffer:!1,depthBuffer:!1,type:s.HalfFloatType}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new JB,this.convolutionMaterial.setTexelSize(1/o,1/l),this.convolutionMaterial.setResolution(new s.Vector2(o,l)),this.scene=new s.Scene,this.camera=new s.Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=p,this.convolutionMaterial.uniforms.maxDepthThreshold.value=h,this.convolutionMaterial.uniforms.depthScale.value=f,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=A,this.convolutionMaterial.defines.USE_DEPTH=f>0;const _=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),b=new Float32Array([0,0,2,0,0,2]),T=new s.BufferGeometry;T.setAttribute("position",new s.BufferAttribute(_,3)),T.setAttribute("uv",new s.BufferAttribute(b,2)),this.screen=new s.Mesh(T,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(t,r,o){const l=this.scene,p=this.camera,h=this.renderTargetA,f=this.renderTargetB;let A=this.convolutionMaterial,_=A.uniforms;_.depthBuffer.value=r.depthTexture;const b=A.kernel;let T=r,B,F,P;for(F=0,P=b.length-1;F<P;++F)B=F&1?f:h,_.kernel.value=b[F],_.inputBuffer.value=T.texture,t.setRenderTarget(B),t.render(l,p),T=B;_.kernel.value=b[F],_.inputBuffer.value=T.texture,t.setRenderTarget(this.renderToScreen?null:o),t.render(l,p)}}class sS extends s.MeshStandardMaterial{constructor(t={}){super(t),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(t)}onBeforeCompile(t){var r;(r=t.defines)!=null&&r.USE_UV||(t.defines.USE_UV=""),t.uniforms.hasBlur=this._hasBlur,t.uniforms.tDiffuse=this._tDiffuse,t.uniforms.tDepth=this._tDepth,t.uniforms.distortionMap=this._distortionMap,t.uniforms.tDiffuseBlur=this._tDiffuseBlur,t.uniforms.textureMatrix=this._textureMatrix,t.uniforms.mirror=this._mirror,t.uniforms.mixBlur=this._mixBlur,t.uniforms.mixStrength=this._blurStrength,t.uniforms.minDepthThreshold=this._minDepthThreshold,t.uniforms.maxDepthThreshold=this._maxDepthThreshold,t.uniforms.depthScale=this._depthScale,t.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,t.uniforms.distortion=this._distortion,t.uniforms.mixContrast=this._mixContrast,t.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${t.vertexShader}`,t.vertexShader=t.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),t.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${t.fragmentShader}`,t.fragmentShader=t.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(t){this._tDiffuse.value=t}get tDepth(){return this._tDepth.value}set tDepth(t){this._tDepth.value=t}get distortionMap(){return this._distortionMap.value}set distortionMap(t){this._distortionMap.value=t}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(t){this._tDiffuseBlur.value=t}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(t){this._textureMatrix.value=t}get hasBlur(){return this._hasBlur.value}set hasBlur(t){this._hasBlur.value=t}get mirror(){return this._mirror.value}set mirror(t){this._mirror.value=t}get mixBlur(){return this._mixBlur.value}set mixBlur(t){this._mixBlur.value=t}get mixStrength(){return this._blurStrength.value}set mixStrength(t){this._blurStrength.value=t}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(t){this._minDepthThreshold.value=t}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(t){this._maxDepthThreshold.value=t}get depthScale(){return this._depthScale.value}set depthScale(t){this._depthScale.value=t}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(t){this._depthToBlurRatioBias.value=t}get distortion(){return this._distortion.value}set distortion(t){this._distortion.value=t}get mixContrast(){return this._mixContrast.value}set mixContrast(t){this._mixContrast.value=t}}const qB=d.forwardRef((L,P)=>{var O=L,{mixBlur:i=0,mixStrength:t=1,resolution:r=256,blur:o=[0,0],minDepthThreshold:l=.9,maxDepthThreshold:p=1,depthScale:h=0,depthToBlurRatioBias:f=.25,mirror:A=0,distortion:_=1,mixContrast:b=1,distortionMap:T,reflectorOffset:B=0}=O,F=mn(O,["mixBlur","mixStrength","resolution","blur","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","distortion","mixContrast","distortionMap","reflectorOffset"]);(0,E.e)({MeshReflectorMaterialImpl:sS});const G=(0,E.z)(({gl:Ee})=>Ee),D=(0,E.z)(({camera:Ee})=>Ee),k=(0,E.z)(({scene:Ee})=>Ee);o=Array.isArray(o)?o:[o,o];const N=o[0]+o[1]>0,V=d.useRef(null),[Q]=d.useState(()=>new s.Plane),[K]=d.useState(()=>new s.Vector3),[X]=d.useState(()=>new s.Vector3),[oe]=d.useState(()=>new s.Vector3),[ae]=d.useState(()=>new s.Matrix4),[ge]=d.useState(()=>new s.Vector3(0,0,-1)),[ie]=d.useState(()=>new s.Vector4),[_e]=d.useState(()=>new s.Vector3),[me]=d.useState(()=>new s.Vector3),[we]=d.useState(()=>new s.Vector4),[ke]=d.useState(()=>new s.Matrix4),[De]=d.useState(()=>new s.PerspectiveCamera),Ne=d.useCallback(()=>{var Ee;const le=V.current.parent||((Ee=V.current)==null?void 0:Ee.__r3f.parent);if(!le||(X.setFromMatrixPosition(le.matrixWorld),oe.setFromMatrixPosition(D.matrixWorld),ae.extractRotation(le.matrixWorld),K.set(0,0,1),K.applyMatrix4(ae),X.addScaledVector(K,B),_e.subVectors(X,oe),_e.dot(K)>0))return;_e.reflect(K).negate(),_e.add(X),ae.extractRotation(D.matrixWorld),ge.set(0,0,-1),ge.applyMatrix4(ae),ge.add(oe),me.subVectors(X,ge),me.reflect(K).negate(),me.add(X),De.position.copy(_e),De.up.set(0,1,0),De.up.applyMatrix4(ae),De.up.reflect(K),De.lookAt(me),De.far=D.far,De.updateMatrixWorld(),De.projectionMatrix.copy(D.projectionMatrix),ke.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ke.multiply(De.projectionMatrix),ke.multiply(De.matrixWorldInverse),ke.multiply(le.matrixWorld),Q.setFromNormalAndCoplanarPoint(K,X),Q.applyMatrix4(De.matrixWorldInverse),ie.set(Q.normal.x,Q.normal.y,Q.normal.z,Q.constant);const ye=De.projectionMatrix;we.x=(Math.sign(ie.x)+ye.elements[8])/ye.elements[0],we.y=(Math.sign(ie.y)+ye.elements[9])/ye.elements[5],we.z=-1,we.w=(1+ye.elements[10])/ye.elements[14],ie.multiplyScalar(2/ie.dot(we)),ye.elements[2]=ie.x,ye.elements[6]=ie.y,ye.elements[10]=ie.z+1,ye.elements[14]=ie.w},[D,B]),[Ge,Ye,Se,xe]=d.useMemo(()=>{const Ee={minFilter:s.LinearFilter,magFilter:s.LinearFilter,type:s.HalfFloatType},le=new s.WebGLRenderTarget(r,r,Ee);le.depthBuffer=!0,le.depthTexture=new s.DepthTexture(r,r),le.depthTexture.format=s.DepthFormat,le.depthTexture.type=s.UnsignedShortType;const ye=new s.WebGLRenderTarget(r,r,Ee),Be=new oS({gl:G,resolution:r,width:o[0],height:o[1],minDepthThreshold:l,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:f}),be={mirror:A,textureMatrix:ke,mixBlur:i,tDiffuse:le.texture,tDepth:le.depthTexture,tDiffuseBlur:ye.texture,hasBlur:N,mixStrength:t,minDepthThreshold:l,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:f,distortion:_,distortionMap:T,mixContrast:b,"defines-USE_BLUR":N?"":void 0,"defines-USE_DEPTH":h>0?"":void 0,"defines-USE_DISTORTION":T?"":void 0};return[le,ye,Be,be]},[G,o,ke,r,A,N,i,t,l,p,h,f,_,T,b]);return(0,E.A)(()=>{var Ee;const le=V.current.parent||((Ee=V.current)==null?void 0:Ee.__r3f.parent);if(!le)return;le.visible=!1;const ye=G.xr.enabled,Be=G.shadowMap.autoUpdate;Ne(),G.xr.enabled=!1,G.shadowMap.autoUpdate=!1,G.setRenderTarget(Ge),G.state.buffers.depth.setMask(!0),G.autoClear||G.clear(),G.render(k,De),N&&Se.render(G,Ge,Ye),G.xr.enabled=ye,G.shadowMap.autoUpdate=Be,le.visible=!0,G.setRenderTarget(null)}),d.createElement("meshReflectorMaterialImpl",(0,S.Z)({attach:"material",key:"key"+xe["defines-USE_BLUR"]+xe["defines-USE_DEPTH"]+xe["defines-USE_DISTORTION"],ref:fr([V,P])},xe,F))});function ZB(i){switch(i){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function $B(i){switch(i){case 1:return s.RedFormat;case 2:return s.RGFormat;case 3:return s.RGBAFormat;case 4:return s.RGBAFormat}}function aS(i){switch(i){case 1:return s.RedIntegerFormat;case 2:return s.RGIntegerFormat;case 3:return s.RGBAIntegerFormat;case 4:return s.RGBAIntegerFormat}}class lS extends s.DataTexture{constructor(){super(),this.minFilter=s.NearestFilter,this.magFilter=s.NearestFilter,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(t){const r=this.overrideItemSize,o=t.itemSize,l=t.count;if(r!==null){if(o*l%r!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");t.itemSize=r,t.count=l*o/r}const p=t.itemSize,h=t.count,f=t.normalized,A=t.array.constructor,_=A.BYTES_PER_ELEMENT;let b=this._forcedType,T=p;if(b===null)switch(A){case Float32Array:b=s.FloatType;break;case Uint8Array:case Uint16Array:case Uint32Array:b=s.UnsignedIntType;break;case Int8Array:case Int16Array:case Int32Array:b=s.IntType;break}let B,F,P,L,O=ZB(p);switch(b){case s.FloatType:P=1,F=$B(p),f&&_===1?(L=A,O+="8",A===Uint8Array?B=s.UnsignedByteType:(B=s.ByteType,O+="_SNORM")):(L=Float32Array,O+="32F",B=s.FloatType);break;case s.IntType:O+=_*8+"I",P=f?Math.pow(2,A.BYTES_PER_ELEMENT*8-1):1,F=aS(p),_===1?(L=Int8Array,B=s.ByteType):_===2?(L=Int16Array,B=s.ShortType):(L=Int32Array,B=s.IntType);break;case s.UnsignedIntType:O+=_*8+"UI",P=f?Math.pow(2,A.BYTES_PER_ELEMENT*8-1):1,F=aS(p),_===1?(L=Uint8Array,B=s.UnsignedByteType):_===2?(L=Uint16Array,B=s.UnsignedShortType):(L=Uint32Array,B=s.UnsignedIntType);break}T===3&&(F===s.RGBAFormat||F===s.RGBAIntegerFormat)&&(T=4);const G=Math.ceil(Math.sqrt(h)),D=T*G*G,k=new L(D),N=t.normalized;t.normalized=!1;for(let V=0;V<h;V++){const Q=T*V;k[Q]=t.getX(V)/P,p>=2&&(k[Q+1]=t.getY(V)/P),p>=3&&(k[Q+2]=t.getZ(V)/P,T===4&&(k[Q+3]=1)),p>=4&&(k[Q+3]=t.getW(V)/P)}t.normalized=N,this.internalFormat=O,this.format=F,this.type=B,this.image.width=G,this.image.height=G,this.image.data=k,this.needsUpdate=!0,this.dispose(),t.itemSize=o,t.count=l}}class eI extends lS{constructor(){super(),this._forcedType=s.UnsignedIntType}}class Q6 extends null{constructor(){super(),this._forcedType=IntType}}class tI extends lS{constructor(){super(),this._forcedType=s.FloatType}}class cS{constructor(){this.index=new eI,this.position=new tI,this.bvhBounds=new s.DataTexture,this.bvhContents=new s.DataTexture,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(t){const{geometry:r}=t;if(rI(t,this.bvhBounds,this.bvhContents),this.position.updateFrom(r.attributes.position),t.indirect){const o=t._indirectBuffer;if(this._cachedIndexAttr===null||this._cachedIndexAttr.count!==o.length)if(r.index)this._cachedIndexAttr=r.index.clone();else{const l=RC(IC(r));this._cachedIndexAttr=new s.BufferAttribute(l,1,!1)}nI(r,o,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(r.index)}dispose(){const{index:t,position:r,bvhBounds:o,bvhContents:l}=this;t&&t.dispose(),r&&r.dispose(),o&&o.dispose(),l&&l.dispose()}}function nI(i,t,r){const o=r.array,l=i.index?i.index.array:null;for(let p=0,h=t.length;p<h;p++){const f=3*p,A=3*t[p];for(let _=0;_<3;_++)o[f+_]=l?l[A+_]:A+_}}function rI(i,t,r){const o=i._roots;if(o.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const l=o[0],p=new Uint16Array(l),h=new Uint32Array(l),f=new Float32Array(l),A=l.byteLength/Mm,_=2*Math.ceil(Math.sqrt(A/2)),b=new Float32Array(4*_*_),T=Math.ceil(Math.sqrt(A)),B=new Uint32Array(2*T*T);for(let F=0;F<A;F++){const P=F*Mm/4,L=P*2,O=P;for(let G=0;G<3;G++)b[8*F+0+G]=f[O+0+G],b[8*F+4+G]=f[O+3+G];if(Xc(L,p)){const G=Sp(L,p),D=Yc(P,h),k=4294901760|G;B[F*2+0]=k,B[F*2+1]=D}else{const G=4*wp(P,h)/Mm,D=Tb(P,h);B[F*2+0]=D,B[F*2+1]=G}}t.image.data=b,t.image.width=_,t.image.height=_,t.format=s.RGBAFormat,t.type=s.FloatType,t.internalFormat="RGBA32F",t.minFilter=s.NearestFilter,t.magFilter=s.NearestFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose(),r.image.data=B,r.image.width=T,r.image.height=T,r.format=s.RGIntegerFormat,r.type=s.UnsignedIntType,r.internalFormat="RG32UI",r.minFilter=s.NearestFilter,r.magFilter=s.NearestFilter,r.generateMipmaps=!1,r.needsUpdate=!0,r.dispose()}const iI=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,oI=`

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

// Raycasting
float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,X6=null,sI=uc({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new cS,color:new s.Color("white"),resolution:new s.Vector2,viewMatrixInverse:new s.Matrix4,projectionMatrixInverse:new s.Matrix4},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${iI}
  ${oI}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
  }`),aI=i=>i&&i.isCubeTexture;function lI(l){var p=l,{aberrationStrength:i=0,fastChroma:t=!0,envMap:r}=p,o=mn(p,["aberrationStrength","fastChroma","envMap"]);(0,E.e)({MeshRefractionMaterial:sI});const h=(0,d.useRef)(),{size:f}=(0,E.z)(),A=(0,d.useMemo)(()=>{var _,b;const T={},B=aI(r),P=((_=B?(b=r.image[0])==null?void 0:b.width:r.image.width)!==null&&_!==void 0?_:1024)/4,L=Math.floor(Math.log2(P)),O=Math.pow(2,L),G=3*Math.max(O,16*7),D=4*O;return B&&(T.ENVMAP_TYPE_CUBEM=""),T.CUBEUV_TEXEL_WIDTH=`${1/G}`,T.CUBEUV_TEXEL_HEIGHT=`${1/D}`,T.CUBEUV_MAX_MIP=`${L}.0`,i>0&&(T.CHROMATIC_ABERRATIONS=""),t&&(T.FAST_CHROMA=""),T},[i,t]);return(0,d.useLayoutEffect)(()=>{var _;const b=(_=h.current)==null||(_=_.__r3f)==null||(_=_.parent)==null?void 0:_.geometry;b&&(h.current.bvh=new cS,h.current.bvh.updateFrom(new o_(b.clone().toNonIndexed(),{lazyGeneration:!1,strategy:k2})))},[]),(0,E.A)(({camera:_})=>{h.current.viewMatrixInverse=_.matrixWorld,h.current.projectionMatrixInverse=_.projectionMatrixInverse}),d.createElement("meshRefractionMaterial",(0,S.Z)({key:JSON.stringify(A),defines:A,ref:h,resolution:[f.width,f.height],aberrationStrength:i,envMap:r},o))}const Wb=uc({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class cI extends s.MeshPhysicalMaterial{constructor(t=6,r=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new s.Color("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=o=>{o.uniforms=jn(jn({},o.uniforms),this.uniforms),this.anisotropy>0&&(o.defines.USE_ANISOTROPY=""),r?o.defines.USE_SAMPLER="":o.defines.USE_TRANSMISSION="",o.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      float seed = 0.0;
      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }

      float rand() {
        float result = random(vec3(gl_FragCoord.xy, seed));
        seed += 1.0;
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+o.fragmentShader,o.fragmentShader=o.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +\u221E, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),o.fragmentShader=o.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand();
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${t}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${t})) , material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${t})), material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${t}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(o=>Object.defineProperty(this,o,{get:()=>this.uniforms[o].value,set:l=>this.uniforms[o].value=l}))}}const pI=d.forwardRef((L,P)=>{var O=L,{buffer:i,transmissionSampler:t=!1,backside:r=!1,side:o=s.FrontSide,transmission:l=1,thickness:p=0,backsideThickness:h=0,samples:f=10,resolution:A,backsideResolution:_,background:b,anisotropy:T,anisotropicBlur:B}=O,F=mn(O,["buffer","transmissionSampler","backside","side","transmission","thickness","backsideThickness","samples","resolution","backsideResolution","background","anisotropy","anisotropicBlur"]);(0,E.e)({MeshTransmissionMaterial:cI});const G=d.useRef(null),[D]=d.useState(()=>new Wb),k=Vl(_||A),N=Vl(A);let V,Q,K;return(0,E.A)(X=>{G.current.time=X.clock.getElapsedTime(),G.current.buffer===N.texture&&!t&&(K=G.current.__r3f.parent,K&&(Q=X.gl.toneMapping,V=X.scene.background,X.gl.toneMapping=s.NoToneMapping,b&&(X.scene.background=b),K.material=D,r&&(X.gl.setRenderTarget(k),X.gl.render(X.scene,X.camera),K.material=G.current,K.material.buffer=k.texture,K.material.thickness=h,K.material.side=s.BackSide),X.gl.setRenderTarget(N),X.gl.render(X.scene,X.camera),K.material=G.current,K.material.thickness=p,K.material.side=o,K.material.buffer=N.texture,X.scene.background=V,X.gl.setRenderTarget(null),X.gl.toneMapping=Q))}),d.useImperativeHandle(P,()=>G.current,[]),d.createElement("meshTransmissionMaterial",(0,S.Z)({args:[f,t],ref:G},F,{buffer:i||N.texture,_transmission:l,anisotropicBlur:B!=null?B:T,transmission:t?l:0,thickness:p,side:o}))}),uI=d.forwardRef((i,t)=>((0,E.e)({DiscardMaterialImpl:Wb}),d.createElement("discardMaterialImpl",(0,S.Z)({ref:t},i)))),Vb=gl>=154?"opaque_fragment":"output_fragment";class pS extends s.PointsMaterial{constructor(t){super(t),this.onBeforeCompile=(r,o)=>{const{isWebGL2:l}=o.capabilities;r.fragmentShader=r.fragmentShader.replace(`#include <${Vb}>`,`
        ${l?`#include <${Vb}>`:`#extension GL_OES_standard_derivatives : enable
#include <${Vb}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const dI=d.forwardRef((i,t)=>{const[r]=d.useState(()=>new pS(null));return d.createElement("primitive",(0,S.Z)({},i,{object:r,ref:t,attach:"material"}))}),hI=({focus:i=0,size:t=25,samples:r=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${t})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${i});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${r}; i ++) {
    offset = (vogelDiskSample(j, ${r}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${r}; i++) {
    vogelSample = vogelDiskSample(j, ${r}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${t}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${r}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function uS(i,t,r){t.traverse(o=>{o.material&&(i.properties.remove(o.material),o.material.dispose==null||o.material.dispose())}),i.info.programs.length=0,i.compile(t,r)}function fI({focus:i=0,samples:t=10,size:r=25}){const o=(0,E.z)(h=>h.gl),l=(0,E.z)(h=>h.scene),p=(0,E.z)(h=>h.camera);return d.useEffect(()=>{const h=s.ShaderChunk.shadowmap_pars_fragment;return s.ShaderChunk.shadowmap_pars_fragment=s.ShaderChunk.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+hI({size:r,samples:t,focus:i})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),uS(o,l,p),()=>{s.ShaderChunk.shadowmap_pars_fragment=h,uS(o,l,p)}},[i,r,t]),null}function Xa(i,t){const r=i+"Geometry";return d.forwardRef((f,h)=>{var A=f,{args:o,children:l}=A,p=mn(A,["args","children"]);const _=d.useRef(null);return d.useImperativeHandle(h,()=>_.current),d.useLayoutEffect(()=>void(t==null?void 0:t(_.current))),d.createElement("mesh",(0,S.Z)({ref:_},p),d.createElement(r,{attach:"geometry",args:o}),l)})}const gI=Xa("box"),mI=Xa("circle"),yI=Xa("cone"),AI=Xa("cylinder"),vI=Xa("sphere"),_I=Xa("plane"),EI=Xa("tube"),bI=Xa("torus"),xI=Xa("torusKnot"),MI=Xa("tetrahedron"),CI=Xa("ring"),SI=Xa("polyhedron"),wI=Xa("icosahedron"),TI=Xa("octahedron"),BI=Xa("dodecahedron"),II=Xa("extrude"),RI=Xa("lathe"),FI=Xa("capsule"),OI=Xa("shape",({geometry:i})=>{const t=i.attributes.position,r=new s.Box3().setFromBufferAttribute(t),o=new s.Vector3;r.getSize(o);const l=[];let p=0,h=0,f=0,A=0;for(let _=0;_<t.count;_++)p=t.getX(_),h=t.getY(_),f=(p-r.min.x)/o.x,A=(h-r.min.y)/o.y,l.push(f,A);i.setAttribute("uv",new s.Float32BufferAttribute(l,2))}),Yd=1e-5;function DI(i,t,r){const o=new s.Shape,l=r-Yd;return o.absarc(Yd,Yd,Yd,-Math.PI/2,-Math.PI,!0),o.absarc(Yd,t-l*2,Yd,Math.PI,Math.PI/2,!0),o.absarc(i-l*2,t-l*2,Yd,Math.PI/2,0,!0),o.absarc(i-l*2,Yd,Yd,0,-Math.PI/2,!0),o}const PI=d.forwardRef(function(B,T){var F=B,{args:[t=1,r=1,o=1]=[],radius:l=.05,steps:p=1,smoothness:h=4,bevelSegments:f=4,creaseAngle:A=.4,children:_}=F,b=mn(F,["args","radius","steps","smoothness","bevelSegments","creaseAngle","children"]);const P=d.useMemo(()=>DI(t,r,l),[t,r,l]),L=d.useMemo(()=>({depth:o-l*2,bevelEnabled:!0,bevelSegments:f*2,steps:p,bevelSize:l-Yd,bevelThickness:l,curveSegments:h}),[o,l,h]),O=d.useRef(null);return d.useLayoutEffect(()=>{O.current&&(O.current.center(),A0(O.current,A))},[P,L]),d.createElement("mesh",(0,S.Z)({ref:T},b),d.createElement("extrudeGeometry",{ref:O,args:[P,L]}),_)});function LI(){const i=new s.BufferGeometry,t=new Float32Array([-1,-1,3,-1,-1,3]);return i.boundingSphere=new s.Sphere,i.boundingSphere.set(new s.Vector3,1/0),i.setAttribute("position",new s.BufferAttribute(t,2)),i}const kI=d.forwardRef(function(l,o){var p=l,{children:t}=p,r=mn(p,["children"]);const h=d.useMemo(LI,[]);return d.createElement("mesh",(0,S.Z)({ref:o,geometry:h,frustumCulled:!1},r),t)}),zI=d.forwardRef((A,f)=>{var _=A,{children:i,width:t,height:r,depth:o,box3:l,precise:p=!0}=_,h=mn(_,["children","width","height","depth","box3","precise"]);const b=d.useRef(null),T=d.useRef(null),B=d.useRef(null);return d.useLayoutEffect(()=>{T.current.matrixWorld.identity();let F=l||new s.Box3().setFromObject(B.current,p);const P=F.max.x-F.min.x,L=F.max.y-F.min.y,O=F.max.z-F.min.z;let G=Math.max(P,L,O);t&&(G=P),r&&(G=L),o&&(G=O),T.current.scale.setScalar(1/G)},[t,r,o,l,p]),d.useImperativeHandle(f,()=>b.current,[]),d.createElement("group",(0,S.Z)({ref:b},h),d.createElement("group",{ref:T},d.createElement("group",{ref:B},i)))}),y1=i=>i&&i.isOrthographicCamera,GI=i=>i&&i.isBox3,dS=d.createContext(null);function hS({children:i,damping:t=6,fit:r,clip:o,observe:l,margin:p=1.2,eps:h=.01,onFit:f}){const A=d.useRef(null),{camera:_,invalidate:b,size:T,controls:B}=(0,E.z)(),F=B,P=d.useRef(f);P.current=f;function L(Q,K){return Math.abs(Q.x-K.x)<h&&Math.abs(Q.y-K.y)<h&&Math.abs(Q.z-K.z)<h}function O(Q,K,X,oe){Q.x=s.MathUtils.damp(Q.x,K.x,X,oe),Q.y=s.MathUtils.damp(Q.y,K.y,X,oe),Q.z=s.MathUtils.damp(Q.z,K.z,X,oe)}const[G]=d.useState(()=>({animating:!1,focus:new s.Vector3,camera:new s.Vector3,zoom:1})),[D]=d.useState(()=>({focus:new s.Vector3,camera:new s.Vector3,zoom:1})),[k]=d.useState(()=>new s.Box3),N=d.useMemo(()=>{function Q(){const K=k.getSize(new s.Vector3),X=k.getCenter(new s.Vector3),oe=Math.max(K.x,K.y,K.z),ae=y1(_)?oe*4:oe/(2*Math.atan(Math.PI*_.fov/360)),ge=y1(_)?oe*4:ae/_.aspect,ie=p*Math.max(ae,ge);return{box:k,size:K,center:X,distance:ie}}return{getSize:Q,refresh(K){if(GI(K))k.copy(K);else{const X=K||A.current;if(!X)return this;X.updateWorldMatrix(!0,!0),k.setFromObject(X)}if(k.isEmpty()){const X=_.position.length()||10;k.setFromCenterAndSize(new s.Vector3,new s.Vector3(X,X,X))}if((F==null?void 0:F.constructor.name)==="OrthographicTrackballControls"){const{distance:X}=Q(),oe=_.position.clone().sub(F.target).normalize().multiplyScalar(X),ae=F.target.clone().add(oe);_.position.copy(ae)}return this},clip(){const{distance:K}=Q();return F&&(F.maxDistance=K*10),_.near=K/100,_.far=K*100,_.updateProjectionMatrix(),F&&F.update(),b(),this},to({position:K,target:X}){G.camera.copy(_.position);const{center:oe}=Q();return D.camera.set(...K),X?D.focus.set(...X):D.focus.copy(oe),t?G.animating=!0:_.position.set(...K),this},fit(){G.camera.copy(_.position),F&&G.focus.copy(F.target);const{center:K,distance:X}=Q(),oe=K.clone().sub(_.position).normalize().multiplyScalar(X);if(D.camera.copy(K).sub(oe),D.focus.copy(K),y1(_)){G.zoom=_.zoom;let ae=0,ge=0;const ie=[new s.Vector3(k.min.x,k.min.y,k.min.z),new s.Vector3(k.min.x,k.max.y,k.min.z),new s.Vector3(k.min.x,k.min.y,k.max.z),new s.Vector3(k.min.x,k.max.y,k.max.z),new s.Vector3(k.max.x,k.max.y,k.max.z),new s.Vector3(k.max.x,k.max.y,k.min.z),new s.Vector3(k.max.x,k.min.y,k.max.z),new s.Vector3(k.max.x,k.min.y,k.min.z)];K.applyMatrix4(_.matrixWorldInverse);for(const we of ie)we.applyMatrix4(_.matrixWorldInverse),ae=Math.max(ae,Math.abs(we.y-K.y)),ge=Math.max(ge,Math.abs(we.x-K.x));ae*=2,ge*=2;const _e=(_.top-_.bottom)/ae,me=(_.right-_.left)/ge;D.zoom=Math.min(_e,me)/p,t||(_.zoom=D.zoom,_.updateProjectionMatrix())}return t?G.animating=!0:(_.position.copy(D.camera),_.lookAt(D.focus),F&&(F.target.copy(D.focus),F.update())),P.current&&P.current(this.getSize()),b(),this}}},[k,_,F,p,t,b]);d.useLayoutEffect(()=>{if(F){const Q=()=>G.animating=!1;return F.addEventListener("start",Q),()=>F.removeEventListener("start",Q)}},[F]);const V=d.useRef(0);return d.useLayoutEffect(()=>{(l||V.current++===0)&&(N.refresh(),r&&N.fit(),o&&N.clip())},[T,o,r,l,_,F]),(0,E.A)((Q,K)=>{if(G.animating){if(O(G.focus,D.focus,t,K),O(G.camera,D.camera,t,K),G.zoom=s.MathUtils.damp(G.zoom,D.zoom,t,K),_.position.copy(G.camera),y1(_)&&(_.zoom=G.zoom,_.updateProjectionMatrix()),F?(F.target.copy(G.focus),F.update()):_.lookAt(G.focus),b(),y1(_)&&!(Math.abs(G.zoom-D.zoom)<h)||!y1(_)&&!L(G.camera,D.camera)||F&&!L(G.focus,D.focus))return;G.animating=!1}}),d.createElement("group",{ref:A},d.createElement(dS.Provider,{value:N},i))}function fS(){return d.useContext(dS)}var UI=Object.defineProperty,NI=(i,t,r)=>t in i?UI(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,$u=(i,t,r)=>(NI(i,typeof t!="symbol"?t+"":t,r),r);class Qb{constructor(t=Math){$u(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),$u(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),$u(this,"p",[]),$u(this,"perm",[]),$u(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),$u(this,"dot",(r,o,l)=>r[0]*o+r[1]*l),$u(this,"dot3",(r,o,l,p)=>r[0]*o+r[1]*l+r[2]*p),$u(this,"dot4",(r,o,l,p,h)=>r[0]*o+r[1]*l+r[2]*p+r[3]*h),$u(this,"noise",(r,o)=>{let l,p,h;const f=.5*(Math.sqrt(3)-1),A=(r+o)*f,_=Math.floor(r+A),b=Math.floor(o+A),T=(3-Math.sqrt(3))/6,B=(_+b)*T,F=_-B,P=b-B,L=r-F,O=o-P;let G=0,D=1;L>O&&(G=1,D=0);const k=L-G+T,N=O-D+T,V=L-1+2*T,Q=O-1+2*T,K=_&255,X=b&255,oe=this.perm[K+this.perm[X]]%12,ae=this.perm[K+G+this.perm[X+D]]%12,ge=this.perm[K+1+this.perm[X+1]]%12;let ie=.5-L*L-O*O;ie<0?l=0:(ie*=ie,l=ie*ie*this.dot(this.grad3[oe],L,O));let _e=.5-k*k-N*N;_e<0?p=0:(_e*=_e,p=_e*_e*this.dot(this.grad3[ae],k,N));let me=.5-V*V-Q*Q;return me<0?h=0:(me*=me,h=me*me*this.dot(this.grad3[ge],V,Q)),70*(l+p+h)}),$u(this,"noise3d",(r,o,l)=>{let p,h,f,A;const _=.3333333333333333,b=(r+o+l)*_,T=Math.floor(r+b),B=Math.floor(o+b),F=Math.floor(l+b),P=1/6,L=(T+B+F)*P,O=T-L,G=B-L,D=F-L,k=r-O,N=o-G,V=l-D;let Q,K,X,oe,ae,ge;k>=N?N>=V?(Q=1,K=0,X=0,oe=1,ae=1,ge=0):k>=V?(Q=1,K=0,X=0,oe=1,ae=0,ge=1):(Q=0,K=0,X=1,oe=1,ae=0,ge=1):N<V?(Q=0,K=0,X=1,oe=0,ae=1,ge=1):k<V?(Q=0,K=1,X=0,oe=0,ae=1,ge=1):(Q=0,K=1,X=0,oe=1,ae=1,ge=0);const ie=k-Q+P,_e=N-K+P,me=V-X+P,we=k-oe+2*P,ke=N-ae+2*P,De=V-ge+2*P,Ne=k-1+3*P,Ge=N-1+3*P,Ye=V-1+3*P,Se=T&255,xe=B&255,Ee=F&255,le=this.perm[Se+this.perm[xe+this.perm[Ee]]]%12,ye=this.perm[Se+Q+this.perm[xe+K+this.perm[Ee+X]]]%12,Be=this.perm[Se+oe+this.perm[xe+ae+this.perm[Ee+ge]]]%12,be=this.perm[Se+1+this.perm[xe+1+this.perm[Ee+1]]]%12;let je=.6-k*k-N*N-V*V;je<0?p=0:(je*=je,p=je*je*this.dot3(this.grad3[le],k,N,V));let Et=.6-ie*ie-_e*_e-me*me;Et<0?h=0:(Et*=Et,h=Et*Et*this.dot3(this.grad3[ye],ie,_e,me));let Ft=.6-we*we-ke*ke-De*De;Ft<0?f=0:(Ft*=Ft,f=Ft*Ft*this.dot3(this.grad3[Be],we,ke,De));let Tt=.6-Ne*Ne-Ge*Ge-Ye*Ye;return Tt<0?A=0:(Tt*=Tt,A=Tt*Tt*this.dot3(this.grad3[be],Ne,Ge,Ye)),32*(p+h+f+A)}),$u(this,"noise4d",(r,o,l,p)=>{const h=this.grad4,f=this.simplex,A=this.perm,_=(Math.sqrt(5)-1)/4,b=(5-Math.sqrt(5))/20;let T,B,F,P,L;const O=(r+o+l+p)*_,G=Math.floor(r+O),D=Math.floor(o+O),k=Math.floor(l+O),N=Math.floor(p+O),V=(G+D+k+N)*b,Q=G-V,K=D-V,X=k-V,oe=N-V,ae=r-Q,ge=o-K,ie=l-X,_e=p-oe,me=ae>ge?32:0,we=ae>ie?16:0,ke=ge>ie?8:0,De=ae>_e?4:0,Ne=ge>_e?2:0,Ge=ie>_e?1:0,Ye=me+we+ke+De+Ne+Ge;let Se,xe,Ee,le,ye,Be,be,je,Et,Ft,Tt,pt;Se=f[Ye][0]>=3?1:0,xe=f[Ye][1]>=3?1:0,Ee=f[Ye][2]>=3?1:0,le=f[Ye][3]>=3?1:0,ye=f[Ye][0]>=2?1:0,Be=f[Ye][1]>=2?1:0,be=f[Ye][2]>=2?1:0,je=f[Ye][3]>=2?1:0,Et=f[Ye][0]>=1?1:0,Ft=f[Ye][1]>=1?1:0,Tt=f[Ye][2]>=1?1:0,pt=f[Ye][3]>=1?1:0;const cn=ae-Se+b,Bt=ge-xe+b,Ct=ie-Ee+b,Ke=_e-le+b,Pe=ae-ye+2*b,wt=ge-Be+2*b,pn=ie-be+2*b,un=_e-je+2*b,Gt=ae-Et+3*b,kn=ge-Ft+3*b,tr=ie-Tt+3*b,xr=_e-pt+3*b,sr=ae-1+4*b,bi=ge-1+4*b,Mi=ie-1+4*b,yr=_e-1+4*b,Or=G&255,Si=D&255,so=k&255,li=N&255,no=A[Or+A[Si+A[so+A[li]]]]%32,Hr=A[Or+Se+A[Si+xe+A[so+Ee+A[li+le]]]]%32,Xr=A[Or+ye+A[Si+Be+A[so+be+A[li+je]]]]%32,ft=A[Or+Et+A[Si+Ft+A[so+Tt+A[li+pt]]]]%32,an=A[Or+1+A[Si+1+A[so+1+A[li+1]]]]%32;let Un=.6-ae*ae-ge*ge-ie*ie-_e*_e;Un<0?T=0:(Un*=Un,T=Un*Un*this.dot4(h[no],ae,ge,ie,_e));let ar=.6-cn*cn-Bt*Bt-Ct*Ct-Ke*Ke;ar<0?B=0:(ar*=ar,B=ar*ar*this.dot4(h[Hr],cn,Bt,Ct,Ke));let fn=.6-Pe*Pe-wt*wt-pn*pn-un*un;fn<0?F=0:(fn*=fn,F=fn*fn*this.dot4(h[Xr],Pe,wt,pn,un));let qi=.6-Gt*Gt-kn*kn-tr*tr-xr*xr;qi<0?P=0:(qi*=qi,P=qi*qi*this.dot4(h[ft],Gt,kn,tr,xr));let ys=.6-sr*sr-bi*bi-Mi*Mi-yr*yr;return ys<0?L=0:(ys*=ys,L=ys*ys*this.dot4(h[an],sr,bi,Mi,yr)),27*(T+B+F+P+L)});for(let r=0;r<256;r++)this.p[r]=Math.floor(t.random()*256);for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}}const jI=d.forwardRef(({intensity:i=1,decay:t,decayRate:r=.65,maxYaw:o=.1,maxPitch:l=.1,maxRoll:p=.1,yawFrequency:h=.1,pitchFrequency:f=.1,rollFrequency:A=.1},_)=>{const b=(0,E.z)(D=>D.camera),T=(0,E.z)(D=>D.controls),B=d.useRef(i),F=d.useRef(b.rotation.clone()),[P]=d.useState(()=>new Qb),[L]=d.useState(()=>new Qb),[O]=d.useState(()=>new Qb),G=()=>{(B.current<0||B.current>1)&&(B.current=B.current<0?0:1)};return d.useImperativeHandle(_,()=>({getIntensity:()=>B.current,setIntensity:D=>{B.current=D,G()}}),[]),d.useEffect(()=>{if(T){const D=()=>void(F.current=b.rotation.clone());return T.addEventListener("change",D),D(),()=>void T.removeEventListener("change",D)}},[b,T]),(0,E.A)((D,k)=>{const N=Math.pow(B.current,2),V=o*N*P.noise(D.clock.elapsedTime*h,1),Q=l*N*L.noise(D.clock.elapsedTime*f,1),K=p*N*O.noise(D.clock.elapsedTime*A,1);b.rotation.set(F.current.x+Q,F.current.y+V,F.current.z+K),t&&B.current>0&&(B.current-=r*k,G())}),null}),HI=d.forwardRef((A,f)=>{var _=A,{children:i,enabled:t=!0,speed:r=1,rotationIntensity:o=1,floatIntensity:l=1,floatingRange:p=[-.1,.1]}=_,h=mn(_,["children","enabled","speed","rotationIntensity","floatIntensity","floatingRange"]);const b=d.useRef(null),T=d.useRef(Math.random()*1e4);return(0,E.A)(B=>{var F,P;if(!t||r===0)return;const L=T.current+B.clock.getElapsedTime();b.current.rotation.x=Math.cos(L/4*r)/8*o,b.current.rotation.y=Math.sin(L/4*r)/8*o,b.current.rotation.z=Math.sin(L/4*r)/20*o;let O=Math.sin(L/4*r)/10;O=s.MathUtils.mapLinear(O,-.1,.1,(F=p==null?void 0:p[0])!==null&&F!==void 0?F:-.1,(P=p==null?void 0:p[1])!==null&&P!==void 0?P:.1),b.current.position.y=O*l,b.current.updateMatrix()}),d.createElement("group",h,d.createElement("group",{ref:fr([b,f]),matrixAutoUpdate:!1},i))}),WI=i=>i&&i.isCubeTexture;class VI extends s.Mesh{constructor(t,r){var o,l;const p=WI(t),f=((l=p?(o=t.image[0])==null?void 0:o.width:t.image.width)!=null?l:1024)/4,A=Math.floor(Math.log2(f)),_=Math.pow(2,A),b=3*Math.max(_,16*7),T=4*_,B=[p?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/b}`,`#define CUBEUV_TEXEL_HEIGHT ${1/T}`,`#define CUBEUV_MAX_MIP ${A}.0`],F=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,P=B.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(s.REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,L={map:{value:t},height:{value:(r==null?void 0:r.height)||15},radius:{value:(r==null?void 0:r.radius)||100}},O=new s.IcosahedronGeometry(1,16),G=new s.ShaderMaterial({uniforms:L,fragmentShader:P,vertexShader:F,side:s.DoubleSide});super(O,G)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var $y=y(25108);class QI extends s.DataTextureLoader{constructor(t){super(t),this.type=s.HalfFloatType}parse(t){const f=function(k,N){switch(k){case 1:$y.error("THREE.RGBELoader Read Error: "+(N||""));break;case 2:$y.error("THREE.RGBELoader Write Error: "+(N||""));break;case 3:$y.error("THREE.RGBELoader Bad File Format: "+(N||""));break;default:case 4:$y.error("THREE.RGBELoader: Error: "+(N||""))}return-1},T=`
`,B=function(k,N,V){N=N||1024;let K=k.pos,X=-1,oe=0,ae="",ge=String.fromCharCode.apply(null,new Uint16Array(k.subarray(K,K+128)));for(;0>(X=ge.indexOf(T))&&oe<N&&K<k.byteLength;)ae+=ge,oe+=ge.length,K+=128,ge+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(K,K+128)));return-1<X?(V!==!1&&(k.pos+=oe+X+1),ae+ge.slice(0,X)):!1},F=function(k){const N=/^#\?(\S+)/,V=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,K=/^\s*FORMAT=(\S+)\s*$/,X=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,oe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ae,ge;if(k.pos>=k.byteLength||!(ae=B(k)))return f(1,"no header found");if(!(ge=ae.match(N)))return f(3,"bad initial token");for(oe.valid|=1,oe.programtype=ge[1],oe.string+=ae+`
`;ae=B(k),ae!==!1;){if(oe.string+=ae+`
`,ae.charAt(0)==="#"){oe.comments+=ae+`
`;continue}if((ge=ae.match(V))&&(oe.gamma=parseFloat(ge[1])),(ge=ae.match(Q))&&(oe.exposure=parseFloat(ge[1])),(ge=ae.match(K))&&(oe.valid|=2,oe.format=ge[1]),(ge=ae.match(X))&&(oe.valid|=4,oe.height=parseInt(ge[1],10),oe.width=parseInt(ge[2],10)),oe.valid&2&&oe.valid&4)break}return oe.valid&2?oe.valid&4?oe:f(3,"missing image size specifier"):f(3,"missing format specifier")},P=function(k,N,V){const Q=N;if(Q<8||Q>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);if(Q!==(k[2]<<8|k[3]))return f(3,"wrong scanline width");const K=new Uint8Array(4*N*V);if(!K.length)return f(4,"unable to allocate buffer space");let X=0,oe=0;const ae=4*Q,ge=new Uint8Array(4),ie=new Uint8Array(ae);let _e=V;for(;_e>0&&oe<k.byteLength;){if(oe+4>k.byteLength)return f(1);if(ge[0]=k[oe++],ge[1]=k[oe++],ge[2]=k[oe++],ge[3]=k[oe++],ge[0]!=2||ge[1]!=2||(ge[2]<<8|ge[3])!=Q)return f(3,"bad rgbe scanline format");let me=0,we;for(;me<ae&&oe<k.byteLength;){we=k[oe++];const De=we>128;if(De&&(we-=128),we===0||me+we>ae)return f(3,"bad scanline data");if(De){const Ne=k[oe++];for(let Ge=0;Ge<we;Ge++)ie[me++]=Ne}else ie.set(k.subarray(oe,oe+we),me),me+=we,oe+=we}const ke=Q;for(let De=0;De<ke;De++){let Ne=0;K[X]=ie[De+Ne],Ne+=Q,K[X+1]=ie[De+Ne],Ne+=Q,K[X+2]=ie[De+Ne],Ne+=Q,K[X+3]=ie[De+Ne],X+=4}_e--}return K},L=function(k,N,V,Q){const K=k[N+3],X=Math.pow(2,K-128)/255;V[Q+0]=k[N+0]*X,V[Q+1]=k[N+1]*X,V[Q+2]=k[N+2]*X,V[Q+3]=1},O=function(k,N,V,Q){const K=k[N+3],X=Math.pow(2,K-128)/255;V[Q+0]=s.DataUtils.toHalfFloat(Math.min(k[N+0]*X,65504)),V[Q+1]=s.DataUtils.toHalfFloat(Math.min(k[N+1]*X,65504)),V[Q+2]=s.DataUtils.toHalfFloat(Math.min(k[N+2]*X,65504)),V[Q+3]=s.DataUtils.toHalfFloat(1)},G=new Uint8Array(t);G.pos=0;const D=F(G);if(D!==-1){const k=D.width,N=D.height,V=P(G.subarray(G.pos),k,N);if(V!==-1){let Q,K,X;switch(this.type){case s.FloatType:X=V.length/4;const oe=new Float32Array(X*4);for(let ge=0;ge<X;ge++)L(V,ge*4,oe,ge*4);Q=oe,K=s.FloatType;break;case s.HalfFloatType:X=V.length/4;const ae=new Uint16Array(X*4);for(let ge=0;ge<X;ge++)O(V,ge*4,ae,ge*4);Q=ae,K=s.HalfFloatType;break;default:$y.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:k,height:N,data:Q,header:D.string,gamma:D.gamma,exposure:D.exposure,type:K}}}return null}setDataType(t){return this.type=t,this}load(t,r,o,l){function p(h,f){switch(h.type){case s.FloatType:case s.HalfFloatType:"colorSpace"in h?h.colorSpace="srgb-linear":h.encoding=3e3,h.minFilter=s.LinearFilter,h.magFilter=s.LinearFilter,h.generateMipmaps=!1,h.flipY=!0;break}r&&r(h,f)}return super.load(t,p,o,l)}}var Xb=y(25108);const eA="colorSpace"in new s.Texture;class XI extends s.DataTextureLoader{constructor(t){super(t),this.type=s.HalfFloatType}parse(t){const oe=Math.pow(2.7182818,2.2);function ae(Ae,Fe){for(var ct=0,Ht=0;Ht<65536;++Ht)(Ht==0||Ae[Ht>>3]&1<<(Ht&7))&&(Fe[ct++]=Ht);for(var tn=ct-1;ct<65536;)Fe[ct++]=0;return tn}function ge(Ae){for(var Fe=0;Fe<16384;Fe++)Ae[Fe]={},Ae[Fe].len=0,Ae[Fe].lit=0,Ae[Fe].p=null}const ie={l:0,c:0,lc:0};function _e(Ae,Fe,ct,Ht,tn){for(;ct<Ae;)Fe=Fe<<8|Xr(Ht,tn),ct+=8;ct-=Ae,ie.l=Fe>>ct&(1<<Ae)-1,ie.c=Fe,ie.lc=ct}const me=new Array(59);function we(Ae){for(var Fe=0;Fe<=58;++Fe)me[Fe]=0;for(var Fe=0;Fe<65537;++Fe)me[Ae[Fe]]+=1;for(var ct=0,Fe=58;Fe>0;--Fe){var Ht=ct+me[Fe]>>1;me[Fe]=ct,ct=Ht}for(var Fe=0;Fe<65537;++Fe){var tn=Ae[Fe];tn>0&&(Ae[Fe]=tn|me[tn]++<<6)}}function ke(Ae,Fe,ct,Ht,tn,nn,Nn){for(var Bn=ct,Qn=0,Xn=0;tn<=nn;tn++){if(Bn.value-ct.value>Ht)return!1;_e(6,Qn,Xn,Ae,Bn);var er=ie.l;if(Qn=ie.c,Xn=ie.lc,Nn[tn]=er,er==63){if(Bn.value-ct.value>Ht)throw"Something wrong with hufUnpackEncTable";_e(8,Qn,Xn,Ae,Bn);var Yt=ie.l+6;if(Qn=ie.c,Xn=ie.lc,tn+Yt>nn+1)throw"Something wrong with hufUnpackEncTable";for(;Yt--;)Nn[tn++]=0;tn--}else if(er>=59){var Yt=er-59+2;if(tn+Yt>nn+1)throw"Something wrong with hufUnpackEncTable";for(;Yt--;)Nn[tn++]=0;tn--}}we(Nn)}function De(Ae){return Ae&63}function Ne(Ae){return Ae>>6}function Ge(Ae,Fe,ct,Ht){for(;Fe<=ct;Fe++){var tn=Ne(Ae[Fe]),nn=De(Ae[Fe]);if(tn>>nn)throw"Invalid table entry";if(nn>14){var Nn=Ht[tn>>nn-14];if(Nn.len)throw"Invalid table entry";if(Nn.lit++,Nn.p){var Bn=Nn.p;Nn.p=new Array(Nn.lit);for(var Qn=0;Qn<Nn.lit-1;++Qn)Nn.p[Qn]=Bn[Qn]}else Nn.p=new Array(1);Nn.p[Nn.lit-1]=Fe}else if(nn)for(var Xn=0,Qn=1<<14-nn;Qn>0;Qn--){var Nn=Ht[(tn<<14-nn)+Xn];if(Nn.len||Nn.p)throw"Invalid table entry";Nn.len=nn,Nn.lit=Fe,Xn++}}return!0}const Ye={c:0,lc:0};function Se(Ae,Fe,ct,Ht){Ae=Ae<<8|Xr(ct,Ht),Fe+=8,Ye.c=Ae,Ye.lc=Fe}const xe={c:0,lc:0};function Ee(Ae,Fe,ct,Ht,tn,nn,Nn,Bn,Qn,Xn){if(Ae==Fe){Ht<8&&(Se(ct,Ht,tn,Nn),ct=Ye.c,Ht=Ye.lc),Ht-=8;var er=ct>>Ht,er=new Uint8Array([er])[0];if(Qn.value+er>Xn)return!1;for(var Yt=Bn[Qn.value-1];er-- >0;)Bn[Qn.value++]=Yt}else if(Qn.value<Xn)Bn[Qn.value++]=Ae;else return!1;xe.c=ct,xe.lc=Ht}function le(Ae){return Ae&65535}function ye(Ae){var Fe=le(Ae);return Fe>32767?Fe-65536:Fe}const Be={a:0,b:0};function be(Ae,Fe){var ct=ye(Ae),Ht=ye(Fe),tn=Ht,nn=ct+(tn&1)+(tn>>1),Nn=nn,Bn=nn-tn;Be.a=Nn,Be.b=Bn}function je(Ae,Fe){var ct=le(Ae),Ht=le(Fe),tn=ct-(Ht>>1)&65535,nn=Ht+tn-32768&65535;Be.a=nn,Be.b=tn}function Et(Ae,Fe,ct,Ht,tn,nn,Nn){for(var Bn=Nn<16384,Qn=ct>tn?tn:ct,Xn=1,er;Xn<=Qn;)Xn<<=1;for(Xn>>=1,er=Xn,Xn>>=1;Xn>=1;){for(var Yt=0,Uo=Yt+nn*(tn-er),Lr=nn*Xn,kr=nn*er,Ci=Ht*Xn,Fi=Ht*er,Ao,bo,pa,ka;Yt<=Uo;Yt+=kr){for(var No=Yt,Kc=Yt+Ht*(ct-er);No<=Kc;No+=Fi){var Zo=No+Ci,Ns=No+Lr,Rp=Ns+Ci;Bn?(be(Ae[No+Fe],Ae[Ns+Fe]),Ao=Be.a,pa=Be.b,be(Ae[Zo+Fe],Ae[Rp+Fe]),bo=Be.a,ka=Be.b,be(Ao,bo),Ae[No+Fe]=Be.a,Ae[Zo+Fe]=Be.b,be(pa,ka),Ae[Ns+Fe]=Be.a,Ae[Rp+Fe]=Be.b):(je(Ae[No+Fe],Ae[Ns+Fe]),Ao=Be.a,pa=Be.b,je(Ae[Zo+Fe],Ae[Rp+Fe]),bo=Be.a,ka=Be.b,je(Ao,bo),Ae[No+Fe]=Be.a,Ae[Zo+Fe]=Be.b,je(pa,ka),Ae[Ns+Fe]=Be.a,Ae[Rp+Fe]=Be.b)}if(ct&Xn){var Ns=No+Lr;Bn?be(Ae[No+Fe],Ae[Ns+Fe]):je(Ae[No+Fe],Ae[Ns+Fe]),Ao=Be.a,Ae[Ns+Fe]=Be.b,Ae[No+Fe]=Ao}}if(tn&Xn)for(var No=Yt,Kc=Yt+Ht*(ct-er);No<=Kc;No+=Fi){var Zo=No+Ci;Bn?be(Ae[No+Fe],Ae[Zo+Fe]):je(Ae[No+Fe],Ae[Zo+Fe]),Ao=Be.a,Ae[Zo+Fe]=Be.b,Ae[No+Fe]=Ao}er=Xn,Xn>>=1}return Yt}function Ft(Ae,Fe,ct,Ht,tn,nn,Nn,Bn,Qn,Xn){for(var er=0,Yt=0,Uo=Bn,Lr=Math.trunc(tn.value+(nn+7)/8);tn.value<Lr;)for(Se(er,Yt,ct,tn),er=Ye.c,Yt=Ye.lc;Yt>=14;){var kr=er>>Yt-14&16383,Ci=Fe[kr];if(Ci.len)Yt-=Ci.len,Ee(Ci.lit,Nn,er,Yt,ct,Ht,tn,Qn,Xn,Uo),er=xe.c,Yt=xe.lc;else{if(!Ci.p)throw"hufDecode issues";var Fi;for(Fi=0;Fi<Ci.lit;Fi++){for(var Ao=De(Ae[Ci.p[Fi]]);Yt<Ao&&tn.value<Lr;)Se(er,Yt,ct,tn),er=Ye.c,Yt=Ye.lc;if(Yt>=Ao&&Ne(Ae[Ci.p[Fi]])==(er>>Yt-Ao&(1<<Ao)-1)){Yt-=Ao,Ee(Ci.p[Fi],Nn,er,Yt,ct,Ht,tn,Qn,Xn,Uo),er=xe.c,Yt=xe.lc;break}}if(Fi==Ci.lit)throw"hufDecode issues"}}var bo=8-nn&7;for(er>>=bo,Yt-=bo;Yt>0;){var Ci=Fe[er<<14-Yt&16383];if(Ci.len)Yt-=Ci.len,Ee(Ci.lit,Nn,er,Yt,ct,Ht,tn,Qn,Xn,Uo),er=xe.c,Yt=xe.lc;else throw"hufDecode issues"}return!0}function Tt(Ae,Fe,ct,Ht,tn,nn){var Nn={value:0},Bn=ct.value,Qn=Hr(Fe,ct),Xn=Hr(Fe,ct);ct.value+=4;var er=Hr(Fe,ct);if(ct.value+=4,Qn<0||Qn>=65537||Xn<0||Xn>=65537)throw"Something wrong with HUF_ENCSIZE";var Yt=new Array(65537),Uo=new Array(16384);ge(Uo);var Lr=Ht-(ct.value-Bn);if(ke(Ae,Fe,ct,Lr,Qn,Xn,Yt),er>8*(Ht-(ct.value-Bn)))throw"Something wrong with hufUncompress";Ge(Yt,Qn,Xn,Uo),Ft(Yt,Uo,Ae,Fe,ct,er,Xn,nn,tn,Nn)}function pt(Ae,Fe,ct){for(var Ht=0;Ht<ct;++Ht)Fe[Ht]=Ae[Fe[Ht]]}function cn(Ae){for(var Fe=1;Fe<Ae.length;Fe++){var ct=Ae[Fe-1]+Ae[Fe]-128;Ae[Fe]=ct}}function Bt(Ae,Fe){for(var ct=0,Ht=Math.floor((Ae.length+1)/2),tn=0,nn=Ae.length-1;!(tn>nn||(Fe[tn++]=Ae[ct++],tn>nn));)Fe[tn++]=Ae[Ht++]}function Ct(Ae){for(var Fe=Ae.byteLength,ct=new Array,Ht=0,tn=new DataView(Ae);Fe>0;){var nn=tn.getInt8(Ht++);if(nn<0){var Nn=-nn;Fe-=Nn+1;for(var Bn=0;Bn<Nn;Bn++)ct.push(tn.getUint8(Ht++))}else{var Nn=nn;Fe-=2;for(var Qn=tn.getUint8(Ht++),Bn=0;Bn<Nn+1;Bn++)ct.push(Qn)}}return ct}function Ke(Ae,Fe,ct,Ht,tn,nn){var Zo=new DataView(nn.buffer),Nn=ct[Ae.idx[0]].width,Bn=ct[Ae.idx[0]].height,Qn=3,Xn=Math.floor(Nn/8),er=Math.ceil(Nn/8),Yt=Math.ceil(Bn/8),Uo=Nn-(er-1)*8,Lr=Bn-(Yt-1)*8,kr={value:0},Ci=new Array(Qn),Fi=new Array(Qn),Ao=new Array(Qn),bo=new Array(Qn),pa=new Array(Qn);for(let xo=0;xo<Qn;++xo)pa[xo]=Fe[Ae.idx[xo]],Ci[xo]=xo<1?0:Ci[xo-1]+er*Yt,Fi[xo]=new Float32Array(64),Ao[xo]=new Uint16Array(64),bo[xo]=new Uint16Array(er*64);for(let xo=0;xo<Yt;++xo){var ka=8;xo==Yt-1&&(ka=Lr);var No=8;for(let Oo=0;Oo<er;++Oo){Oo==er-1&&(No=Uo);for(let Mo=0;Mo<Qn;++Mo)Ao[Mo].fill(0),Ao[Mo][0]=tn[Ci[Mo]++],Pe(kr,Ht,Ao[Mo]),wt(Ao[Mo],Fi[Mo]),pn(Fi[Mo]);un(Fi);for(let Mo=0;Mo<Qn;++Mo)Gt(Fi[Mo],bo[Mo],Oo*64)}let za=0;for(let Oo=0;Oo<Qn;++Oo){const Mo=ct[Ae.idx[Oo]].type;for(let Il=8*xo;Il<8*xo+ka;++Il){za=pa[Oo][Il];for(let vu=0;vu<Xn;++vu){const Ka=vu*64+(Il&7)*8;Zo.setUint16(za+0*2*Mo,bo[Oo][Ka+0],!0),Zo.setUint16(za+1*2*Mo,bo[Oo][Ka+1],!0),Zo.setUint16(za+2*2*Mo,bo[Oo][Ka+2],!0),Zo.setUint16(za+3*2*Mo,bo[Oo][Ka+3],!0),Zo.setUint16(za+4*2*Mo,bo[Oo][Ka+4],!0),Zo.setUint16(za+5*2*Mo,bo[Oo][Ka+5],!0),Zo.setUint16(za+6*2*Mo,bo[Oo][Ka+6],!0),Zo.setUint16(za+7*2*Mo,bo[Oo][Ka+7],!0),za+=8*2*Mo}}if(Xn!=er)for(let Il=8*xo;Il<8*xo+ka;++Il){const vu=pa[Oo][Il]+8*Xn*2*Mo,Ka=Xn*64+(Il&7)*8;for(let ed=0;ed<No;++ed)Zo.setUint16(vu+ed*2*Mo,bo[Oo][Ka+ed],!0)}}}for(var Kc=new Uint16Array(Nn),Zo=new DataView(nn.buffer),Ns=0;Ns<Qn;++Ns){ct[Ae.idx[Ns]].decoded=!0;var Rp=ct[Ae.idx[Ns]].type;if(ct[Ns].type==2)for(var Au=0;Au<Bn;++Au){const xo=pa[Ns][Au];for(var Ql=0;Ql<Nn;++Ql)Kc[Ql]=Zo.getUint16(xo+Ql*2*Rp,!0);for(var Ql=0;Ql<Nn;++Ql)Zo.setFloat32(xo+Ql*2*Rp,fn(Kc[Ql]),!0)}}}function Pe(Ae,Fe,ct){for(var Ht,tn=1;tn<64;)Ht=Fe[Ae.value],Ht==65280?tn=64:Ht>>8==255?tn+=Ht&255:(ct[tn]=Ht,tn++),Ae.value++}function wt(Ae,Fe){Fe[0]=fn(Ae[0]),Fe[1]=fn(Ae[1]),Fe[2]=fn(Ae[5]),Fe[3]=fn(Ae[6]),Fe[4]=fn(Ae[14]),Fe[5]=fn(Ae[15]),Fe[6]=fn(Ae[27]),Fe[7]=fn(Ae[28]),Fe[8]=fn(Ae[2]),Fe[9]=fn(Ae[4]),Fe[10]=fn(Ae[7]),Fe[11]=fn(Ae[13]),Fe[12]=fn(Ae[16]),Fe[13]=fn(Ae[26]),Fe[14]=fn(Ae[29]),Fe[15]=fn(Ae[42]),Fe[16]=fn(Ae[3]),Fe[17]=fn(Ae[8]),Fe[18]=fn(Ae[12]),Fe[19]=fn(Ae[17]),Fe[20]=fn(Ae[25]),Fe[21]=fn(Ae[30]),Fe[22]=fn(Ae[41]),Fe[23]=fn(Ae[43]),Fe[24]=fn(Ae[9]),Fe[25]=fn(Ae[11]),Fe[26]=fn(Ae[18]),Fe[27]=fn(Ae[24]),Fe[28]=fn(Ae[31]),Fe[29]=fn(Ae[40]),Fe[30]=fn(Ae[44]),Fe[31]=fn(Ae[53]),Fe[32]=fn(Ae[10]),Fe[33]=fn(Ae[19]),Fe[34]=fn(Ae[23]),Fe[35]=fn(Ae[32]),Fe[36]=fn(Ae[39]),Fe[37]=fn(Ae[45]),Fe[38]=fn(Ae[52]),Fe[39]=fn(Ae[54]),Fe[40]=fn(Ae[20]),Fe[41]=fn(Ae[22]),Fe[42]=fn(Ae[33]),Fe[43]=fn(Ae[38]),Fe[44]=fn(Ae[46]),Fe[45]=fn(Ae[51]),Fe[46]=fn(Ae[55]),Fe[47]=fn(Ae[60]),Fe[48]=fn(Ae[21]),Fe[49]=fn(Ae[34]),Fe[50]=fn(Ae[37]),Fe[51]=fn(Ae[47]),Fe[52]=fn(Ae[50]),Fe[53]=fn(Ae[56]),Fe[54]=fn(Ae[59]),Fe[55]=fn(Ae[61]),Fe[56]=fn(Ae[35]),Fe[57]=fn(Ae[36]),Fe[58]=fn(Ae[48]),Fe[59]=fn(Ae[49]),Fe[60]=fn(Ae[57]),Fe[61]=fn(Ae[58]),Fe[62]=fn(Ae[62]),Fe[63]=fn(Ae[63])}function pn(Ae){const Fe=.5*Math.cos(.7853975),ct=.5*Math.cos(3.14159/16),Ht=.5*Math.cos(3.14159/8),tn=.5*Math.cos(3*3.14159/16),nn=.5*Math.cos(5*3.14159/16),Nn=.5*Math.cos(3*3.14159/8),Bn=.5*Math.cos(7*3.14159/16);for(var Qn=new Array(4),Xn=new Array(4),er=new Array(4),Yt=new Array(4),Uo=0;Uo<8;++Uo){var Lr=Uo*8;Qn[0]=Ht*Ae[Lr+2],Qn[1]=Nn*Ae[Lr+2],Qn[2]=Ht*Ae[Lr+6],Qn[3]=Nn*Ae[Lr+6],Xn[0]=ct*Ae[Lr+1]+tn*Ae[Lr+3]+nn*Ae[Lr+5]+Bn*Ae[Lr+7],Xn[1]=tn*Ae[Lr+1]-Bn*Ae[Lr+3]-ct*Ae[Lr+5]-nn*Ae[Lr+7],Xn[2]=nn*Ae[Lr+1]-ct*Ae[Lr+3]+Bn*Ae[Lr+5]+tn*Ae[Lr+7],Xn[3]=Bn*Ae[Lr+1]-nn*Ae[Lr+3]+tn*Ae[Lr+5]-ct*Ae[Lr+7],er[0]=Fe*(Ae[Lr+0]+Ae[Lr+4]),er[3]=Fe*(Ae[Lr+0]-Ae[Lr+4]),er[1]=Qn[0]+Qn[3],er[2]=Qn[1]-Qn[2],Yt[0]=er[0]+er[1],Yt[1]=er[3]+er[2],Yt[2]=er[3]-er[2],Yt[3]=er[0]-er[1],Ae[Lr+0]=Yt[0]+Xn[0],Ae[Lr+1]=Yt[1]+Xn[1],Ae[Lr+2]=Yt[2]+Xn[2],Ae[Lr+3]=Yt[3]+Xn[3],Ae[Lr+4]=Yt[3]-Xn[3],Ae[Lr+5]=Yt[2]-Xn[2],Ae[Lr+6]=Yt[1]-Xn[1],Ae[Lr+7]=Yt[0]-Xn[0]}for(var kr=0;kr<8;++kr)Qn[0]=Ht*Ae[16+kr],Qn[1]=Nn*Ae[16+kr],Qn[2]=Ht*Ae[48+kr],Qn[3]=Nn*Ae[48+kr],Xn[0]=ct*Ae[8+kr]+tn*Ae[24+kr]+nn*Ae[40+kr]+Bn*Ae[56+kr],Xn[1]=tn*Ae[8+kr]-Bn*Ae[24+kr]-ct*Ae[40+kr]-nn*Ae[56+kr],Xn[2]=nn*Ae[8+kr]-ct*Ae[24+kr]+Bn*Ae[40+kr]+tn*Ae[56+kr],Xn[3]=Bn*Ae[8+kr]-nn*Ae[24+kr]+tn*Ae[40+kr]-ct*Ae[56+kr],er[0]=Fe*(Ae[kr]+Ae[32+kr]),er[3]=Fe*(Ae[kr]-Ae[32+kr]),er[1]=Qn[0]+Qn[3],er[2]=Qn[1]-Qn[2],Yt[0]=er[0]+er[1],Yt[1]=er[3]+er[2],Yt[2]=er[3]-er[2],Yt[3]=er[0]-er[1],Ae[0+kr]=Yt[0]+Xn[0],Ae[8+kr]=Yt[1]+Xn[1],Ae[16+kr]=Yt[2]+Xn[2],Ae[24+kr]=Yt[3]+Xn[3],Ae[32+kr]=Yt[3]-Xn[3],Ae[40+kr]=Yt[2]-Xn[2],Ae[48+kr]=Yt[1]-Xn[1],Ae[56+kr]=Yt[0]-Xn[0]}function un(Ae){for(var Fe=0;Fe<64;++Fe){var ct=Ae[0][Fe],Ht=Ae[1][Fe],tn=Ae[2][Fe];Ae[0][Fe]=ct+1.5747*tn,Ae[1][Fe]=ct-.1873*Ht-.4682*tn,Ae[2][Fe]=ct+1.8556*Ht}}function Gt(Ae,Fe,ct){for(var Ht=0;Ht<64;++Ht)Fe[ct+Ht]=s.DataUtils.toHalfFloat(kn(Ae[Ht]))}function kn(Ae){return Ae<=1?Math.sign(Ae)*Math.pow(Math.abs(Ae),2.2):Math.sign(Ae)*Math.pow(oe,Math.abs(Ae)-1)}function tr(Ae){return new DataView(Ae.array.buffer,Ae.offset.value,Ae.size)}function xr(Ae){var Fe=Ae.viewer.buffer.slice(Ae.offset.value,Ae.offset.value+Ae.size),ct=new Uint8Array(Ct(Fe)),Ht=new Uint8Array(ct.length);return cn(ct),Bt(ct,Ht),new DataView(Ht.buffer)}function sr(Ae){var Fe=Ae.array.slice(Ae.offset.value,Ae.offset.value+Ae.size),ct=og(Fe),Ht=new Uint8Array(ct.length);return cn(ct),Bt(ct,Ht),new DataView(Ht.buffer)}function bi(Ae){for(var Fe=Ae.viewer,ct={value:Ae.offset.value},Ht=new Uint16Array(Ae.width*Ae.scanlineBlockSize*(Ae.channels*Ae.type)),tn=new Uint8Array(8192),nn=0,Nn=new Array(Ae.channels),Bn=0;Bn<Ae.channels;Bn++)Nn[Bn]={},Nn[Bn].start=nn,Nn[Bn].end=Nn[Bn].start,Nn[Bn].nx=Ae.width,Nn[Bn].ny=Ae.lines,Nn[Bn].size=Ae.type,nn+=Nn[Bn].nx*Nn[Bn].ny*Nn[Bn].size;var Qn=qi(Fe,ct),Xn=qi(Fe,ct);if(Xn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Qn<=Xn)for(var Bn=0;Bn<Xn-Qn+1;Bn++)tn[Bn+Qn]=ft(Fe,ct);var er=new Uint16Array(65536),Yt=ae(tn,er),Uo=Hr(Fe,ct);Tt(Ae.array,Fe,ct,Uo,Ht,nn);for(var Bn=0;Bn<Ae.channels;++Bn)for(var Lr=Nn[Bn],kr=0;kr<Nn[Bn].size;++kr)Et(Ht,Lr.start+kr,Lr.nx,Lr.size,Lr.ny,Lr.nx*Lr.size,Yt);pt(er,Ht,nn);for(var Ci=0,Fi=new Uint8Array(Ht.buffer.byteLength),Ao=0;Ao<Ae.lines;Ao++)for(var bo=0;bo<Ae.channels;bo++){var Lr=Nn[bo],pa=Lr.nx*Lr.size,ka=new Uint8Array(Ht.buffer,Lr.end*2,pa*2);Fi.set(ka,Ci),Ci+=pa*2,Lr.end+=pa}return new DataView(Fi.buffer)}function Mi(Ae){var Fe=Ae.array.slice(Ae.offset.value,Ae.offset.value+Ae.size),ct=og(Fe);const Ht=Ae.lines*Ae.channels*Ae.width,tn=Ae.type==1?new Uint16Array(Ht):new Uint32Array(Ht);let nn=0,Nn=0;const Bn=new Array(4);for(let Qn=0;Qn<Ae.lines;Qn++)for(let Xn=0;Xn<Ae.channels;Xn++){let er=0;switch(Ae.type){case 1:Bn[0]=nn,Bn[1]=Bn[0]+Ae.width,nn=Bn[1]+Ae.width;for(let Yt=0;Yt<Ae.width;++Yt){const Uo=ct[Bn[0]++]<<8|ct[Bn[1]++];er+=Uo,tn[Nn]=er,Nn++}break;case 2:Bn[0]=nn,Bn[1]=Bn[0]+Ae.width,Bn[2]=Bn[1]+Ae.width,nn=Bn[2]+Ae.width;for(let Yt=0;Yt<Ae.width;++Yt){const Uo=ct[Bn[0]++]<<24|ct[Bn[1]++]<<16|ct[Bn[2]++]<<8;er+=Uo,tn[Nn]=er,Nn++}break}}return new DataView(tn.buffer)}function yr(Ae){var Fe=Ae.viewer,ct={value:Ae.offset.value},Ht=new Uint8Array(Ae.width*Ae.lines*(Ae.channels*Ae.type*2)),tn={version:an(Fe,ct),unknownUncompressedSize:an(Fe,ct),unknownCompressedSize:an(Fe,ct),acCompressedSize:an(Fe,ct),dcCompressedSize:an(Fe,ct),rleCompressedSize:an(Fe,ct),rleUncompressedSize:an(Fe,ct),rleRawSize:an(Fe,ct),totalAcUncompressedCount:an(Fe,ct),totalDcUncompressedCount:an(Fe,ct),acCompression:an(Fe,ct)};if(tn.version<2)throw"EXRLoader.parse: "+ca.compression+" version "+tn.version+" is unsupported";for(var nn=new Array,Nn=qi(Fe,ct)-2;Nn>0;){var Bn=Or(Fe.buffer,ct),Qn=ft(Fe,ct),Xn=Qn>>2&3,er=(Qn>>4)-1,Yt=new Int8Array([er])[0],Uo=ft(Fe,ct);nn.push({name:Bn,index:Yt,type:Uo,compression:Xn}),Nn-=Bn.length+3}for(var Lr=ca.channels,kr=new Array(Ae.channels),Ci=0;Ci<Ae.channels;++Ci){var Fi=kr[Ci]={},Ao=Lr[Ci];Fi.name=Ao.name,Fi.compression=0,Fi.decoded=!1,Fi.type=Ao.pixelType,Fi.pLinear=Ao.pLinear,Fi.width=Ae.width,Fi.height=Ae.lines}for(var bo={idx:new Array(3)},pa=0;pa<Ae.channels;++pa)for(var Fi=kr[pa],Ci=0;Ci<nn.length;++Ci){var ka=nn[Ci];Fi.name==ka.name&&(Fi.compression=ka.compression,ka.index>=0&&(bo.idx[ka.index]=pa),Fi.offset=pa)}if(tn.acCompressedSize>0)switch(tn.acCompression){case 0:var Zo=new Uint16Array(tn.totalAcUncompressedCount);Tt(Ae.array,Fe,ct,tn.acCompressedSize,Zo,tn.totalAcUncompressedCount);break;case 1:var No=Ae.array.slice(ct.value,ct.value+tn.totalAcUncompressedCount),Kc=og(No),Zo=new Uint16Array(Kc.buffer);ct.value+=tn.totalAcUncompressedCount;break}if(tn.dcCompressedSize>0){var Ns={array:Ae.array,offset:ct,size:tn.dcCompressedSize},Rp=new Uint16Array(sr(Ns).buffer);ct.value+=tn.dcCompressedSize}if(tn.rleRawSize>0){var No=Ae.array.slice(ct.value,ct.value+tn.rleCompressedSize),Kc=og(No),Au=Ct(Kc.buffer);ct.value+=tn.rleCompressedSize}for(var Ql=0,xo=new Array(kr.length),Ci=0;Ci<xo.length;++Ci)xo[Ci]=new Array;for(var za=0;za<Ae.lines;++za)for(var Oo=0;Oo<kr.length;++Oo)xo[Oo].push(Ql),Ql+=kr[Oo].width*Ae.type*2;Ke(bo,xo,kr,Zo,Rp,Ht);for(var Ci=0;Ci<kr.length;++Ci){var Fi=kr[Ci];if(!Fi.decoded)switch(Fi.compression){case 2:for(var Mo=0,Il=0,za=0;za<Ae.lines;++za){for(var vu=xo[Ci][Mo],Ka=0;Ka<Fi.width;++Ka){for(var ed=0;ed<2*Fi.type;++ed)Ht[vu++]=Au[Il+ed*Fi.width*Fi.height];Il++}Mo++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ht.buffer)}function Or(Ae,Fe){for(var ct=new Uint8Array(Ae),Ht=0;ct[Fe.value+Ht]!=0;)Ht+=1;var tn=new TextDecoder().decode(ct.slice(Fe.value,Fe.value+Ht));return Fe.value=Fe.value+Ht+1,tn}function Si(Ae,Fe,ct){var Ht=new TextDecoder().decode(new Uint8Array(Ae).slice(Fe.value,Fe.value+ct));return Fe.value=Fe.value+ct,Ht}function so(Ae,Fe){var ct=no(Ae,Fe),Ht=Hr(Ae,Fe);return[ct,Ht]}function li(Ae,Fe){var ct=Hr(Ae,Fe),Ht=Hr(Ae,Fe);return[ct,Ht]}function no(Ae,Fe){var ct=Ae.getInt32(Fe.value,!0);return Fe.value=Fe.value+4,ct}function Hr(Ae,Fe){var ct=Ae.getUint32(Fe.value,!0);return Fe.value=Fe.value+4,ct}function Xr(Ae,Fe){var ct=Ae[Fe.value];return Fe.value=Fe.value+1,ct}function ft(Ae,Fe){var ct=Ae.getUint8(Fe.value);return Fe.value=Fe.value+1,ct}const an=function(Ae,Fe){let ct;return"getBigInt64"in DataView.prototype?ct=Number(Ae.getBigInt64(Fe.value,!0)):ct=Ae.getUint32(Fe.value+4,!0)+Number(Ae.getUint32(Fe.value,!0)<<32),Fe.value+=8,ct};function Un(Ae,Fe){var ct=Ae.getFloat32(Fe.value,!0);return Fe.value+=4,ct}function ar(Ae,Fe){return s.DataUtils.toHalfFloat(Un(Ae,Fe))}function fn(Ae){var Fe=(Ae&31744)>>10,ct=Ae&1023;return(Ae>>15?-1:1)*(Fe?Fe===31?ct?NaN:1/0:Math.pow(2,Fe-15)*(1+ct/1024):6103515625e-14*(ct/1024))}function qi(Ae,Fe){var ct=Ae.getUint16(Fe.value,!0);return Fe.value+=2,ct}function ys(Ae,Fe){return fn(qi(Ae,Fe))}function Kd(Ae,Fe,ct,Ht){for(var tn=ct.value,nn=[];ct.value<tn+Ht-1;){var Nn=Or(Fe,ct),Bn=no(Ae,ct),Qn=ft(Ae,ct);ct.value+=3;var Xn=no(Ae,ct),er=no(Ae,ct);nn.push({name:Nn,pixelType:Bn,pLinear:Qn,xSampling:Xn,ySampling:er})}return ct.value+=1,nn}function Tp(Ae,Fe){var ct=Un(Ae,Fe),Ht=Un(Ae,Fe),tn=Un(Ae,Fe),nn=Un(Ae,Fe),Nn=Un(Ae,Fe),Bn=Un(Ae,Fe),Qn=Un(Ae,Fe),Xn=Un(Ae,Fe);return{redX:ct,redY:Ht,greenX:tn,greenY:nn,blueX:Nn,blueY:Bn,whiteX:Qn,whiteY:Xn}}function Us(Ae,Fe){var ct=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ht=ft(Ae,Fe);return ct[Ht]}function Ts(Ae,Fe){var ct=Hr(Ae,Fe),Ht=Hr(Ae,Fe),tn=Hr(Ae,Fe),nn=Hr(Ae,Fe);return{xMin:ct,yMin:Ht,xMax:tn,yMax:nn}}function ko(Ae,Fe){var ct=["INCREASING_Y"],Ht=ft(Ae,Fe);return ct[Ht]}function Bp(Ae,Fe){var ct=Un(Ae,Fe),Ht=Un(Ae,Fe);return[ct,Ht]}function zo(Ae,Fe){var ct=Un(Ae,Fe),Ht=Un(Ae,Fe),tn=Un(Ae,Fe);return[ct,Ht,tn]}function Go(Ae,Fe,ct,Ht,tn){if(Ht==="string"||Ht==="stringvector"||Ht==="iccProfile")return Si(Fe,ct,tn);if(Ht==="chlist")return Kd(Ae,Fe,ct,tn);if(Ht==="chromaticities")return Tp(Ae,ct);if(Ht==="compression")return Us(Ae,ct);if(Ht==="box2i")return Ts(Ae,ct);if(Ht==="lineOrder")return ko(Ae,ct);if(Ht==="float")return Un(Ae,ct);if(Ht==="v2f")return Bp(Ae,ct);if(Ht==="v3f")return zo(Ae,ct);if(Ht==="int")return no(Ae,ct);if(Ht==="rational")return so(Ae,ct);if(Ht==="timecode")return li(Ae,ct);if(Ht==="preview")return ct.value+=tn,"skipped";ct.value+=tn}function Ip(Ae,Fe,ct){const Ht={};if(Ae.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ht.version=Ae.getUint8(4);const tn=Ae.getUint8(5);Ht.spec={singleTile:!!(tn&2),longName:!!(tn&4),deepFormat:!!(tn&8),multiPart:!!(tn&16)},ct.value=8;for(var nn=!0;nn;){var Nn=Or(Fe,ct);if(Nn==0)nn=!1;else{var Bn=Or(Fe,ct),Qn=Hr(Ae,ct),Xn=Go(Ae,Fe,ct,Bn,Qn);Xn===void 0?Xb.warn(`EXRLoader.parse: skipped unknown header attribute type '${Bn}'.`):Ht[Nn]=Xn}}if(tn!=0)throw Xb.error("EXRHeader:",Ht),"THREE.EXRLoader: provided file is currently unsupported.";return Ht}function yc(Ae,Fe,ct,Ht,tn){const nn={size:0,viewer:Fe,array:ct,offset:Ht,width:Ae.dataWindow.xMax-Ae.dataWindow.xMin+1,height:Ae.dataWindow.yMax-Ae.dataWindow.yMin+1,channels:Ae.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Ae.channels[0].pixelType,uncompress:null,getter:null,format:null,[eA?"colorSpace":"encoding"]:null};switch(Ae.compression){case"NO_COMPRESSION":nn.lines=1,nn.uncompress=tr;break;case"RLE_COMPRESSION":nn.lines=1,nn.uncompress=xr;break;case"ZIPS_COMPRESSION":nn.lines=1,nn.uncompress=sr;break;case"ZIP_COMPRESSION":nn.lines=16,nn.uncompress=sr;break;case"PIZ_COMPRESSION":nn.lines=32,nn.uncompress=bi;break;case"PXR24_COMPRESSION":nn.lines=16,nn.uncompress=Mi;break;case"DWAA_COMPRESSION":nn.lines=32,nn.uncompress=yr;break;case"DWAB_COMPRESSION":nn.lines=256,nn.uncompress=yr;break;default:throw"EXRLoader.parse: "+Ae.compression+" is unsupported"}if(nn.scanlineBlockSize=nn.lines,nn.type==1)switch(tn){case s.FloatType:nn.getter=ys,nn.inputSize=2;break;case s.HalfFloatType:nn.getter=qi,nn.inputSize=2;break}else if(nn.type==2)switch(tn){case s.FloatType:nn.getter=Un,nn.inputSize=4;break;case s.HalfFloatType:nn.getter=ar,nn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+nn.type+" for "+Ae.compression+".";nn.blockCount=(Ae.dataWindow.yMax+1)/nn.scanlineBlockSize;for(var Nn=0;Nn<nn.blockCount;Nn++)an(Fe,Ht);nn.outputChannels=nn.channels==3?4:nn.channels;const Bn=nn.width*nn.height*nn.outputChannels;switch(tn){case s.FloatType:nn.byteArray=new Float32Array(Bn),nn.channels<nn.outputChannels&&nn.byteArray.fill(1,0,Bn);break;case s.HalfFloatType:nn.byteArray=new Uint16Array(Bn),nn.channels<nn.outputChannels&&nn.byteArray.fill(15360,0,Bn);break;default:Xb.error("THREE.EXRLoader: unsupported type: ",tn);break}return nn.bytesPerLine=nn.width*nn.inputSize*nn.channels,nn.outputChannels==4?nn.format=s.RGBAFormat:nn.format=s.RedFormat,eA?nn.colorSpace="srgb-linear":nn.encoding=3e3,nn}const yo=new DataView(t),Ya=new Uint8Array(t),Al={value:0},ca=Ip(yo,t,Al),Zr=yc(ca,yo,Ya,Al,this.type),vl={value:0},Jd={R:0,G:1,B:2,A:3,Y:0};for(let Ae=0;Ae<Zr.height/Zr.scanlineBlockSize;Ae++){const Fe=Hr(yo,Al);Zr.size=Hr(yo,Al),Zr.lines=Fe+Zr.scanlineBlockSize>Zr.height?Zr.height-Fe:Zr.scanlineBlockSize;const Ht=Zr.size<Zr.lines*Zr.bytesPerLine?Zr.uncompress(Zr):tr(Zr);Al.value+=Zr.size;for(let tn=0;tn<Zr.scanlineBlockSize;tn++){const nn=tn+Ae*Zr.scanlineBlockSize;if(nn>=Zr.height)break;for(let Nn=0;Nn<Zr.channels;Nn++){const Bn=Jd[ca.channels[Nn].name];for(let Qn=0;Qn<Zr.width;Qn++){vl.value=(tn*(Zr.channels*Zr.width)+Nn*Zr.width+Qn)*Zr.inputSize;const Xn=(Zr.height-1-nn)*(Zr.width*Zr.outputChannels)+Qn*Zr.outputChannels+Bn;Zr.byteArray[Xn]=Zr.getter(Ht,vl)}}}}return{header:ca,width:Zr.width,height:Zr.height,data:Zr.byteArray,format:Zr.format,[eA?"colorSpace":"encoding"]:Zr[eA?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,r,o,l){function p(h,f){eA?h.colorSpace=f.colorSpace:h.encoding=f.encoding,h.minFilter=s.LinearFilter,h.magFilter=s.LinearFilter,h.generateMipmaps=!1,h.flipY=!1,r&&r(h,f)}return super.load(t,p,o,l)}}const Yb={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},YI="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",gS=i=>Array.isArray(i);function Kb({files:i=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r=void 0,encoding:o=void 0,extensions:l}={}){var p;let h=null,f=!1,A;if(r){if(!(r in Yb))throw new Error("Preset must be one of: "+Object.keys(Yb).join(", "));i=Yb[r],t=YI}if(f=gS(i),A=gS(i)?"cube":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":(p=i.split(".").pop())==null||(p=p.split("?"))==null||(p=p.shift())==null?void 0:p.toLowerCase(),h=f?s.CubeTextureLoader:A==="hdr"?QI:A==="exr"?XI:null,!h)throw new Error("useEnvironment: Unrecognized file extension: "+i);const _=(0,E.D)(h,f?[i]:i,F=>{F.setPath==null||F.setPath(t),l&&l(F)}),b=f?_[0]:_;b.mapping=f?s.CubeReflectionMapping:s.EquirectangularReflectionMapping;const T=3001,B=3e3;return"colorSpace"in b?b.colorSpace=(o!=null?o:f)?"srgb":"srgb-linear":b.encoding=(o!=null?o:f)?T:B,b}const KI=i=>i.current&&i.current.isScene,JI=i=>KI(i)?i.current:i;function Jb(i,t,r,o,l=0){const p=JI(t||r),h=p.background,f=p.environment,A=p.backgroundBlurriness||0;return i!=="only"&&(p.environment=o),i&&(p.background=o),i&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=l),()=>{i!=="only"&&(p.environment=f),i&&(p.background=h),i&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=A)}}function l_({scene:i,background:t=!1,blur:r,map:o}){const l=(0,E.z)(p=>p.scene);return d.useLayoutEffect(()=>{if(o)return Jb(t,i,l,o,r)},[l,i,o,t,r]),null}function qb(l){var p=l,{background:i=!1,scene:t,blur:r}=p,o=mn(p,["background","scene","blur"]);const h=Kb(o),f=(0,E.z)(A=>A.scene);return d.useLayoutEffect(()=>Jb(i,t,f,h,r),[h,i,t,f,r]),null}function mS({children:i,near:t=1,far:r=1e3,resolution:o=256,frames:l=1,map:p,background:h=!1,blur:f,scene:A,files:_,path:b,preset:T=void 0,extensions:B}){const F=(0,E.z)(k=>k.gl),P=(0,E.z)(k=>k.scene),L=d.useRef(null),[O]=d.useState(()=>new s.Scene),G=d.useMemo(()=>{const k=new s.WebGLCubeRenderTarget(o);return k.texture.type=s.HalfFloatType,k},[o]);d.useLayoutEffect(()=>(l===1&&L.current.update(F,O),Jb(h,A,P,G.texture,f)),[i,O,G.texture,A,P,h,l,F]);let D=1;return(0,E.A)(()=>{(l===1/0||D<l)&&(L.current.update(F,O),D++)}),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(d.Fragment,null,i,d.createElement("cubeCamera",{ref:L,args:[t,r,G]}),_||T?d.createElement(qb,{background:!0,files:_,preset:T,path:b,extensions:B}):p?d.createElement(l_,{background:!0,map:p,extensions:B}):null),O))}function qI(i){var t,r,o,l;const p=Kb(i),h=i.map||p;d.useMemo(()=>(0,E.e)({GroundProjectedEnvImpl:VI}),[]);const f=d.useMemo(()=>[h],[h]),A=(t=i.ground)==null?void 0:t.height,_=(r=i.ground)==null?void 0:r.radius,b=(o=(l=i.ground)==null?void 0:l.scale)!==null&&o!==void 0?o:1e3;return d.createElement(d.Fragment,null,d.createElement(l_,(0,S.Z)({},i,{map:h})),d.createElement("groundProjectedEnvImpl",{args:f,scale:b,height:A,radius:_}))}function yS(i){return i.ground?d.createElement(qI,i):i.map?d.createElement(l_,i):i.children?d.createElement(mS,i):d.createElement(qb,i)}const ZI={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},$I={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},AS=d.forwardRef((L,P)=>{var O=L,{scale:i=10,frames:t=1/0,opacity:r=1,width:o=1,height:l=1,blur:p=1,near:h=0,far:f=10,resolution:A=512,smooth:_=!0,color:b="#000000",depthWrite:T=!1,renderOrder:B}=O,F=mn(O,["scale","frames","opacity","width","height","blur","near","far","resolution","smooth","color","depthWrite","renderOrder"]);const G=d.useRef(null),D=(0,E.z)(ke=>ke.scene),k=(0,E.z)(ke=>ke.gl),N=d.useRef(null);o=o*(Array.isArray(i)?i[0]:i||1),l=l*(Array.isArray(i)?i[1]:i||1);const[V,Q,K,X,oe,ae,ge]=d.useMemo(()=>{const ke=new s.WebGLRenderTarget(A,A),De=new s.WebGLRenderTarget(A,A);De.texture.generateMipmaps=ke.texture.generateMipmaps=!1;const Ne=new s.PlaneGeometry(o,l).rotateX(Math.PI/2),Ge=new s.Mesh(Ne),Ye=new s.MeshDepthMaterial;Ye.depthTest=Ye.depthWrite=!1,Ye.onBeforeCompile=Ee=>{Ee.uniforms=$o(jn({},Ee.uniforms),{ucolor:{value:new s.Color(b)}}),Ee.fragmentShader=Ee.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Ee.fragmentShader=Ee.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Se=new s.ShaderMaterial(ZI),xe=new s.ShaderMaterial($I);return xe.depthTest=Se.depthTest=!1,[ke,Ne,Ye,Ge,Se,xe,De]},[A,o,l,i,b]),ie=ke=>{X.visible=!0,X.material=oe,oe.uniforms.tDiffuse.value=V.texture,oe.uniforms.h.value=ke*1/256,k.setRenderTarget(ge),k.render(X,N.current),X.material=ae,ae.uniforms.tDiffuse.value=ge.texture,ae.uniforms.v.value=ke*1/256,k.setRenderTarget(V),k.render(X,N.current),X.visible=!1};let _e=0,me,we;return(0,E.A)(()=>{N.current&&(t===1/0||_e<t)&&(_e++,me=D.background,we=D.overrideMaterial,G.current.visible=!1,D.background=null,D.overrideMaterial=K,k.setRenderTarget(V),k.render(D,N.current),ie(p),_&&ie(p*.4),k.setRenderTarget(null),G.current.visible=!0,D.overrideMaterial=we,D.background=me)}),d.useImperativeHandle(P,()=>G.current,[]),d.createElement("group",(0,S.Z)({"rotation-x":Math.PI/2},F,{ref:G}),d.createElement("mesh",{renderOrder:B,geometry:Q,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},d.createElement("meshBasicMaterial",{transparent:!0,map:V.texture,opacity:r,depthWrite:T})),d.createElement("orthographicCamera",{ref:N,args:[-o/2,o/2,l/2,-l/2,h,f]}))});function eR(i){return i.isLight}function tR(i){return!!i.geometry}const Zb=d.createContext(null),nR=uc({color:new s.Color,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),vS=d.forwardRef((P,F)=>{var L=P,{children:i,temporal:t,frames:r=40,limit:o=1/0,blend:l=20,scale:p=10,opacity:h=1,alphaTest:f=.75,color:A="black",colorBlend:_=2,resolution:b=1024,toneMapped:T=!0}=L,B=mn(L,["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"]);(0,E.e)({SoftShadowMaterial:nR});const O=(0,E.z)(X=>X.gl),G=(0,E.z)(X=>X.scene),D=(0,E.z)(X=>X.camera),k=(0,E.z)(X=>X.invalidate),N=d.useRef(null),V=d.useRef(null),[Q]=d.useState(()=>new rR(O,G,b));d.useLayoutEffect(()=>{Q.configure(N.current)},[]);const K=d.useMemo(()=>({lights:new Map,temporal:!!t,frames:Math.max(2,r),blend:Math.max(2,r===1/0?l:r),count:0,getMesh:()=>N.current,reset:()=>{Q.clear();const X=N.current.material;X.opacity=0,X.alphaTest=0,K.count=0},update:(X=1)=>{const oe=N.current.material;K.temporal?(oe.opacity=Math.min(h,oe.opacity+h/K.blend),oe.alphaTest=Math.min(f,oe.alphaTest+f/K.blend)):(oe.opacity=h,oe.alphaTest=f),V.current.visible=!0,Q.prepare();for(let ae=0;ae<X;ae++)K.lights.forEach(ge=>ge.update()),Q.update(D,K.blend);V.current.visible=!1,Q.finish()}}),[Q,D,G,t,r,l,h,f]);return d.useLayoutEffect(()=>{K.reset(),!K.temporal&&K.frames!==1/0&&K.update(K.blend)}),d.useImperativeHandle(F,()=>K,[K]),(0,E.A)(()=>{(K.temporal||K.frames===1/0)&&K.count<K.frames&&K.count<o&&(k(),K.update(),K.count++)}),d.createElement("group",B,d.createElement("group",{traverse:()=>null,ref:V},d.createElement(Zb.Provider,{value:K},i)),d.createElement("mesh",{receiveShadow:!0,ref:N,scale:p,rotation:[-Math.PI/2,0,0]},d.createElement("planeGeometry",null),d.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:T,color:A,blend:_,map:Q.progressiveLightMap2.texture})))}),_S=d.forwardRef((P,F)=>{var L=P,{castShadow:i=!0,bias:t=.001,mapSize:r=512,size:o=5,near:l=.5,far:p=500,frames:h=1,position:f=[0,0,0],radius:A=1,amount:_=8,intensity:b=gl>=155?Math.PI:1,ambient:T=.5}=L,B=mn(L,["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"]);const O=d.useRef(null),G=new s.Vector3(...f).length(),D=d.useContext(Zb),k=d.useCallback(()=>{let V;if(O.current)for(let Q=0;Q<O.current.children.length;Q++)if(V=O.current.children[Q],Math.random()>T)V.position.set(f[0]+s.MathUtils.randFloatSpread(A),f[1]+s.MathUtils.randFloatSpread(A),f[2]+s.MathUtils.randFloatSpread(A));else{let K=Math.acos(2*Math.random()-1)-Math.PI/2,X=2*Math.PI*Math.random();V.position.set(Math.cos(K)*Math.cos(X)*G,Math.abs(Math.cos(K)*Math.sin(X)*G),Math.sin(K)*G)}},[A,T,G,...f]),N=d.useMemo(()=>({update:k}),[k]);return d.useImperativeHandle(F,()=>N,[N]),d.useLayoutEffect(()=>{const V=O.current;return D&&D.lights.set(V.uuid,N),()=>void D.lights.delete(V.uuid)},[D,N]),d.createElement("group",(0,S.Z)({ref:O},B),Array.from({length:_},(V,Q)=>d.createElement("directionalLight",{key:Q,castShadow:i,"shadow-bias":t,"shadow-mapSize":[r,r],intensity:b/_},d.createElement("orthographicCamera",{attach:"shadow-camera",args:[-o,o,o,-o,l,p]}))))});class rR{constructor(t,r,o=1024){this.renderer=t,this.res=o,this.scene=r,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new s.Color,this.clearAlpha=0;const l={type:s.HalfFloatType,magFilter:s.NearestFilter,minFilter:s.NearestFilter};this.progressiveLightMap1=new s.WebGLRenderTarget(this.res,this.res,l),this.progressiveLightMap2=new s.WebGLRenderTarget(this.res,this.res,l),this.discardMat=new Wb,this.targetMat=new s.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=p=>{p.vertexShader=`varying vec2 vUv;
`+p.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const h=p.fragmentShader.indexOf("void main() {");p.fragmentShader=`varying vec2 vUv;
`+p.fragmentShader.slice(0,h)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+p.fragmentShader.slice(h-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,p.uniforms.previousShadowMap=this.previousShadowMap,p.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(t=>{tR(t)?this.meshes.push({object:t,material:t.material}):eR(t)&&this.lights.push({object:t,intensity:t.intensity})})}prepare(){this.lights.forEach(t=>t.object.intensity=0),this.meshes.forEach(t=>t.object.material=this.discardMat)}finish(){this.lights.forEach(t=>t.object.intensity=t.intensity),this.meshes.forEach(t=>t.object.material=t.material)}configure(t){this.object=t}update(t,r=100){if(!this.object)return;this.averagingWindow.value=r,this.object.material=this.targetMat;const o=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,l=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,p=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(o),this.previousShadowMap.value=l.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.scene.background=p}}const iR={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function oR({radius:i,adjustCamera:t}){const r=fS();return d.useEffect(()=>{t&&r.refresh().clip().fit()},[i,t]),null}function sR(A){var _=A,{children:i,center:t,adjustCamera:r=!0,intensity:o=.5,shadows:l="contact",environment:p="city",preset:h="rembrandt"}=_,f=mn(_,["children","center","adjustCamera","intensity","shadows","environment","preset"]);var b,T,B,F,P,L,O,G;const D=typeof h=="string"?iR[h]:h,[{radius:k,height:N},V]=d.useState({radius:0,width:0,height:0,depth:0}),Q=(b=l==null?void 0:l.bias)!==null&&b!==void 0?b:-1e-4,K=(T=l==null?void 0:l.normalBias)!==null&&T!==void 0?T:0,X=(B=l==null?void 0:l.size)!==null&&B!==void 0?B:1024,oe=(F=l==null?void 0:l.offset)!==null&&F!==void 0?F:0,ae=l==="contact"||(l==null?void 0:l.type)==="contact",ge=l==="accumulative"||(l==null?void 0:l.type)==="accumulative",ie=jn({},typeof l=="object"?l:{}),_e=p?typeof p=="string"?{preset:p}:p:null,me=d.useCallback(we=>{const{width:ke,height:De,depth:Ne,boundingSphere:Ge}=we;V({radius:Ge.radius,width:ke,height:De,depth:Ne}),t!=null&&t.onCentered&&t.onCentered(we)},[]);return d.createElement(d.Fragment,null,d.createElement("ambientLight",{intensity:o/3}),d.createElement("spotLight",{penumbra:1,position:[D.main[0]*k,D.main[1]*k,D.main[2]*k],intensity:o*2,castShadow:!!l,"shadow-bias":Q,"shadow-normalBias":K,"shadow-mapSize":X}),d.createElement("pointLight",{position:[D.fill[0]*k,D.fill[1]*k,D.fill[2]*k],intensity:o}),d.createElement(hS,(0,S.Z)({fit:!!r,clip:!!r,margin:Number(r),observe:!0},f),d.createElement(oR,{radius:k,adjustCamera:r}),d.createElement(Hb,(0,S.Z)({},t,{position:[0,oe/2,0],onCentered:me}),i)),d.createElement("group",{position:[0,-N/2-oe/2,0]},ae&&d.createElement(AS,(0,S.Z)({scale:k*4,far:k,blur:2},ie)),ge&&d.createElement(vS,(0,S.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:k*4},ie),d.createElement(_S,{amount:(P=ie.amount)!==null&&P!==void 0?P:8,radius:(L=ie.radius)!==null&&L!==void 0?L:k,ambient:(O=ie.ambient)!==null&&O!==void 0?O:.5,intensity:(G=ie.intensity)!==null&&G!==void 0?G:1,position:[D.main[0]*k,D.main[1]*k,D.main[2]*k],size:k*4,bias:-Q,mapSize:X}))),p&&d.createElement(yS,_e))}const aR=i=>i===0?0:Math.pow(2,10*i-10);function lR(p){var h=p,{children:i,floor:t=.25,segments:r=20,receiveShadow:o}=h,l=mn(h,["children","floor","segments","receiveShadow"]);const f=d.useRef(null);return d.useLayoutEffect(()=>{let A=0;const _=r/r/2,b=f.current.attributes.position;for(let T=0;T<r+1;T++)for(let B=0;B<r+1;B++)b.setXYZ(A++,T/r-_+(T===0?-t:0),B/r-_,aR(T/r));b.needsUpdate=!0,f.current.computeVertexNormals()},[r,t]),d.createElement("group",l,d.createElement("mesh",{receiveShadow:o,rotation:[-Math.PI/2,0,Math.PI/2]},d.createElement("planeGeometry",{ref:f,args:[1,1,r,r]}),i))}const cR=d.forwardRef((A,f)=>{var _=A,{fog:i=!1,renderOrder:t,depthWrite:r=!1,colorStop:o=0,color:l="black",opacity:p=.5}=_,h=mn(_,["fog","renderOrder","depthWrite","colorStop","color","opacity"]);const b=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const B=T.getContext("2d"),F=B.createRadialGradient(T.width/2,T.height/2,0,T.width/2,T.height/2,T.width/2);return F.addColorStop(o,new s.Color(l).getStyle()),F.addColorStop(1,"rgba(0,0,0,0)"),B.fillStyle=F,B.fillRect(0,0,T.width,T.height),T},[l,o]);return d.createElement("mesh",(0,S.Z)({renderOrder:t,ref:f,"rotation-x":-Math.PI/2},h),d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,opacity:p,fog:i,depthWrite:r,side:s.DoubleSide},d.createElement("canvasTexture",{attach:"map",args:[b]})))});function ES(i=s.FrontSide){const t={value:new s.Matrix4};return Object.assign(new s.MeshNormalMaterial({side:i}),{viewMatrix:t,onBeforeCompile:r=>{r.uniforms.viewMatrix=t,r.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+r.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const pR=uc({causticsTexture:null,causticsTextureB:null,color:new s.Color,lightProjMatrix:new s.Matrix4,lightViewMatrix:new s.Matrix4},`varying vec3 vWorldPosition;   
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture; 
  uniform sampler2D causticsTextureB; 
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics  
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5; 
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),uR=uc({cameraMatrixWorld:new s.Matrix4,cameraProjectionMatrixInv:new s.Matrix4,normalTexture:null,depthTexture:null,lightDir:new s.Vector3(0,1,0),lightPlaneNormal:new s.Vector3(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new s.Matrix4,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`  
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }                  
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),bS={depth:!0,minFilter:s.LinearFilter,magFilter:s.LinearFilter,type:s.UnsignedByteType},xS={minFilter:s.LinearMipmapLinearFilter,magFilter:s.LinearFilter,type:s.FloatType,generateMipmaps:!0},dR=d.forwardRef((P,F)=>{var L=P,{debug:i,children:t,frames:r=1,ior:o=1.1,color:l="white",causticsOnly:p=!1,backside:h=!1,backsideIOR:f=1.1,worldRadius:A=.3125,intensity:_=.05,resolution:b=2024,lightSource:T=[5,5,5]}=L,B=mn(L,["debug","children","frames","ior","color","causticsOnly","backside","backsideIOR","worldRadius","intensity","resolution","lightSource"]);(0,E.e)({CausticsProjectionMaterial:pR});const O=d.useRef(null),G=d.useRef(null),D=d.useRef(null),k=d.useRef(null),N=(0,E.z)(je=>je.gl),V=CC(i&&G,s.CameraHelper),Q=Vl(b,b,bS),K=Vl(b,b,bS),X=Vl(b,b,xS),oe=Vl(b,b,xS),[ae]=d.useState(()=>ES()),[ge]=d.useState(()=>ES(s.BackSide)),[ie]=d.useState(()=>new uR),[_e]=d.useState(()=>new Qu(ie));d.useLayoutEffect(()=>{O.current.updateWorldMatrix(!1,!0)});let me=0;const we=new s.Vector3,ke=new s.Frustum,De=new s.Matrix4,Ne=new s.Plane,Ge=new s.Vector3,Ye=new s.Vector3,Se=new s.Box3,xe=new s.Vector3,Ee=[],le=[],ye=[],Be=[],be=new s.Vector3;for(let je=0;je<8;je++)Ee.push(new s.Vector3),le.push(new s.Vector3),ye.push(new s.Vector3),Be.push(new s.Vector3);return(0,E.A)(()=>{if(r===1/0||me++<r){var je,Et;Array.isArray(T)?Ge.fromArray(T).normalize():Ge.copy(O.current.worldToLocal(T.current.getWorldPosition(we)).normalize()),Ye.copy(Ge).multiplyScalar(-1),(je=D.current.parent)==null||je.matrixWorld.identity(),Se.setFromObject(D.current,!0),Ee[0].set(Se.min.x,Se.min.y,Se.min.z),Ee[1].set(Se.min.x,Se.min.y,Se.max.z),Ee[2].set(Se.min.x,Se.max.y,Se.min.z),Ee[3].set(Se.min.x,Se.max.y,Se.max.z),Ee[4].set(Se.max.x,Se.min.y,Se.min.z),Ee[5].set(Se.max.x,Se.min.y,Se.max.z),Ee[6].set(Se.max.x,Se.max.y,Se.min.z),Ee[7].set(Se.max.x,Se.max.y,Se.max.z);for(let Gt=0;Gt<8;Gt++)le[Gt].copy(Ee[Gt]);Se.getCenter(xe),Ee.map(Gt=>Gt.sub(xe));const Ft=Ne.set(Ye,0);Ee.map((Gt,kn)=>Ft.projectPoint(Gt,ye[kn]));const Tt=ye.reduce((Gt,kn)=>Gt.add(kn),we.set(0,0,0)).divideScalar(ye.length),pt=ye.map(Gt=>Gt.distanceTo(Tt)).reduce((Gt,kn)=>Math.max(Gt,kn)),cn=Ee.map(Gt=>Gt.dot(Ge)).reduce((Gt,kn)=>Math.max(Gt,kn));G.current.position.copy(be.copy(Ge).multiplyScalar(cn).add(xe)),G.current.lookAt(D.current.localToWorld(xe));const Bt=De.lookAt(G.current.position,xe,we.set(0,1,0));G.current.left=-pt,G.current.right=pt,G.current.top=pt,G.current.bottom=-pt;const Ct=we.set(0,pt,0).applyMatrix4(Bt),Ke=(G.current.position.y+Ct.y)/Ge.y;G.current.near=.1,G.current.far=Ke,G.current.updateProjectionMatrix(),G.current.updateMatrixWorld();const Pe=le.map((Gt,kn)=>Gt.add(Be[kn].copy(Ge).multiplyScalar(-Gt.y/Ge.y))),wt=Pe.reduce((Gt,kn)=>Gt.add(kn),we.set(0,0,0)).divideScalar(Pe.length),pn=2*Pe.map(Gt=>Math.hypot(Gt.x-wt.x,Gt.z-wt.z)).reduce((Gt,kn)=>Math.max(Gt,kn));k.current.scale.setScalar(pn),k.current.position.copy(wt),i&&((Et=V.current)==null||Et.update()),ge.viewMatrix.value=ae.viewMatrix.value=G.current.matrixWorldInverse;const un=ke.setFromProjectionMatrix(De.multiplyMatrices(G.current.projectionMatrix,G.current.matrixWorldInverse)).planes[4];ie.cameraMatrixWorld=G.current.matrixWorld,ie.cameraProjectionMatrixInv=G.current.projectionMatrixInverse,ie.lightDir=Ye,ie.lightPlaneNormal=un.normal,ie.lightPlaneConstant=un.constant,ie.near=G.current.near,ie.far=G.current.far,ie.resolution=b,ie.size=pt,ie.intensity=_,ie.worldRadius=A,D.current.visible=!0,N.setRenderTarget(Q),N.clear(),D.current.overrideMaterial=ae,N.render(D.current,G.current),N.setRenderTarget(K),N.clear(),h&&(D.current.overrideMaterial=ge,N.render(D.current,G.current)),D.current.overrideMaterial=null,ie.ior=o,k.current.material.lightProjMatrix=G.current.projectionMatrix,k.current.material.lightViewMatrix=G.current.matrixWorldInverse,ie.normalTexture=Q.texture,ie.depthTexture=Q.depthTexture,N.setRenderTarget(X),N.clear(),_e.render(N),ie.ior=f,ie.normalTexture=K.texture,ie.depthTexture=K.depthTexture,N.setRenderTarget(oe),N.clear(),h&&_e.render(N),N.setRenderTarget(null),p&&(D.current.visible=!1)}}),d.useImperativeHandle(F,()=>O.current,[]),d.createElement("group",(0,S.Z)({ref:O},B),d.createElement("scene",{ref:D},d.createElement("orthographicCamera",{ref:G,up:[0,1,0]}),t),d.createElement("mesh",{renderOrder:2,ref:k,"rotation-x":-Math.PI/2},d.createElement("planeGeometry",null),d.createElement("causticsProjectionMaterial",{transparent:!0,color:l,causticsTexture:X.texture,causticsTextureB:oe.texture,blending:s.CustomBlending,blendSrc:s.OneFactor,blendDst:s.SrcAlphaFactor,depthWrite:!1}),i&&d.createElement(Xf,null,d.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))});var hR=y(25108);const fR=d.forwardRef((G,O)=>{var D=G,{mixBlur:i=0,mixStrength:t=.5,resolution:r=256,blur:o=[0,0],args:l=[1,1],minDepthThreshold:p=.9,maxDepthThreshold:h=1,depthScale:f=0,depthToBlurRatioBias:A=.25,mirror:_=0,children:b,debug:T=0,distortion:B=1,mixContrast:F=1,distortionMap:P}=D,L=mn(D,["mixBlur","mixStrength","resolution","blur","args","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","children","debug","distortion","mixContrast","distortionMap"]);(0,E.e)({MeshReflectorMaterial:sS}),d.useEffect(()=>{hR.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const k=(0,E.z)(({gl:ye})=>ye),N=(0,E.z)(({camera:ye})=>ye),V=(0,E.z)(({scene:ye})=>ye);o=Array.isArray(o)?o:[o,o];const Q=o[0]+o[1]>0,K=d.useRef(null),[X]=d.useState(()=>new s.Plane),[oe]=d.useState(()=>new s.Vector3),[ae]=d.useState(()=>new s.Vector3),[ge]=d.useState(()=>new s.Vector3),[ie]=d.useState(()=>new s.Matrix4),[_e]=d.useState(()=>new s.Vector3(0,0,-1)),[me]=d.useState(()=>new s.Vector4),[we]=d.useState(()=>new s.Vector3),[ke]=d.useState(()=>new s.Vector3),[De]=d.useState(()=>new s.Vector4),[Ne]=d.useState(()=>new s.Matrix4),[Ge]=d.useState(()=>new s.PerspectiveCamera),Ye=d.useCallback(()=>{if(ae.setFromMatrixPosition(K.current.matrixWorld),ge.setFromMatrixPosition(N.matrixWorld),ie.extractRotation(K.current.matrixWorld),oe.set(0,0,1),oe.applyMatrix4(ie),we.subVectors(ae,ge),we.dot(oe)>0)return;we.reflect(oe).negate(),we.add(ae),ie.extractRotation(N.matrixWorld),_e.set(0,0,-1),_e.applyMatrix4(ie),_e.add(ge),ke.subVectors(ae,_e),ke.reflect(oe).negate(),ke.add(ae),Ge.position.copy(we),Ge.up.set(0,1,0),Ge.up.applyMatrix4(ie),Ge.up.reflect(oe),Ge.lookAt(ke),Ge.far=N.far,Ge.updateMatrixWorld(),Ge.projectionMatrix.copy(N.projectionMatrix),Ne.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ne.multiply(Ge.projectionMatrix),Ne.multiply(Ge.matrixWorldInverse),Ne.multiply(K.current.matrixWorld),X.setFromNormalAndCoplanarPoint(oe,ae),X.applyMatrix4(Ge.matrixWorldInverse),me.set(X.normal.x,X.normal.y,X.normal.z,X.constant);const ye=Ge.projectionMatrix;De.x=(Math.sign(me.x)+ye.elements[8])/ye.elements[0],De.y=(Math.sign(me.y)+ye.elements[9])/ye.elements[5],De.z=-1,De.w=(1+ye.elements[10])/ye.elements[14],me.multiplyScalar(2/me.dot(De)),ye.elements[2]=me.x,ye.elements[6]=me.y,ye.elements[10]=me.z+1,ye.elements[14]=me.w},[]),[Se,xe,Ee,le]=d.useMemo(()=>{const ye={type:s.HalfFloatType,minFilter:s.LinearFilter,magFilter:s.LinearFilter},Be=new s.WebGLRenderTarget(r,r,ye);Be.depthBuffer=!0,Be.depthTexture=new s.DepthTexture(r,r),Be.depthTexture.format=s.DepthFormat,Be.depthTexture.type=s.UnsignedShortType;const be=new s.WebGLRenderTarget(r,r,ye),je=new oS({gl:k,resolution:r,width:o[0],height:o[1],minDepthThreshold:p,maxDepthThreshold:h,depthScale:f,depthToBlurRatioBias:A}),Et={mirror:_,textureMatrix:Ne,mixBlur:i,tDiffuse:Be.texture,tDepth:Be.depthTexture,tDiffuseBlur:be.texture,hasBlur:Q,mixStrength:t,minDepthThreshold:p,maxDepthThreshold:h,depthScale:f,depthToBlurRatioBias:A,transparent:!0,debug:T,distortion:B,distortionMap:P,mixContrast:F,"defines-USE_BLUR":Q?"":void 0,"defines-USE_DEPTH":f>0?"":void 0,"defines-USE_DISTORTION":P?"":void 0};return[Be,be,je,Et]},[k,o,Ne,r,_,Q,i,t,p,h,f,A,T,B,P,F]);return(0,E.A)(()=>{if(!(K!=null&&K.current))return;K.current.visible=!1;const ye=k.xr.enabled,Be=k.shadowMap.autoUpdate;Ye(),k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.setRenderTarget(Se),k.state.buffers.depth.setMask(!0),k.autoClear||k.clear(),k.render(V,Ge),Q&&Ee.render(k,Se,xe),k.xr.enabled=ye,k.shadowMap.autoUpdate=Be,K.current.visible=!0,k.setRenderTarget(null)}),d.createElement("mesh",(0,S.Z)({ref:fr([K,O])},L),d.createElement("planeGeometry",{args:l}),b?b("meshReflectorMaterial",le):d.createElement("meshReflectorMaterial",le))});class gR extends s.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new s.Vector3(0,0,0)},lightColor:{value:new s.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new s.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}var mR=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const yR=i=>i==null?void 0:i.isSpotLight;function AR({opacity:i=1,radiusTop:t,radiusBottom:r,depthBuffer:o,color:l="white",distance:p=5,angle:h=.15,attenuation:f=5,anglePower:A=5}){const _=d.useRef(null),b=(0,E.z)(O=>O.size),T=(0,E.z)(O=>O.camera),B=(0,E.z)(O=>O.viewport.dpr),[F]=d.useState(()=>new gR),[P]=d.useState(()=>new s.Vector3);t=t===void 0?.1:t,r=r===void 0?h*7:r,(0,E.A)(()=>{F.uniforms.spotPosition.value.copy(_.current.getWorldPosition(P)),_.current.lookAt(_.current.parent.target.getWorldPosition(P))});const L=d.useMemo(()=>{const O=new s.CylinderGeometry(t,r,p,128,64,!0);return O.applyMatrix4(new s.Matrix4().makeTranslation(0,-p/2,0)),O.applyMatrix4(new s.Matrix4().makeRotationX(-Math.PI/2)),O},[p,t,r]);return d.createElement(d.Fragment,null,d.createElement("mesh",{ref:_,geometry:L,raycast:()=>null},d.createElement("primitive",{object:F,attach:"material","uniforms-opacity-value":i,"uniforms-lightColor-value":l,"uniforms-attenuation-value":f,"uniforms-anglePower-value":A,"uniforms-depth-value":o,"uniforms-cameraNear-value":T.near,"uniforms-cameraFar-value":T.far,"uniforms-resolution-value":o?[b.width*B,b.height*B]:[0,0]})))}function MS(i,t,r,o,l){const[[p,h]]=d.useState(()=>[new s.Vector3,new s.Vector3]);d.useLayoutEffect(()=>{if(yR(i.current))i.current.shadow.mapSize.set(r,o),i.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[i,r,o]),(0,E.A)(()=>{if(!i.current)return;const f=i.current.position,A=i.current.target.position;h.copy(A).sub(f);var _=h.length();h.normalize().multiplyScalar(_*l),p.copy(f).add(h),t.current.position.copy(p),t.current.lookAt(i.current.target.position)})}function vR(_){var b=_,{distance:i=.4,alphaTest:t=.5,map:r,shader:o=mR,width:l=512,height:p=512,scale:h=1,children:f}=b,A=mn(b,["distance","alphaTest","map","shader","width","height","scale","children"]);const T=d.useRef(null),B=A.spotlightRef,F=A.debug;MS(B,T,l,p,i);const P=d.useMemo(()=>new s.WebGLRenderTarget(l,p,{format:s.RGBAFormat,encoding:s.LinearEncoding,stencilBuffer:!1}),[l,p]),L=d.useRef({uShadowMap:{value:r},uTime:{value:0}});d.useEffect(()=>void(L.current.uShadowMap.value=r),[r]);const O=d.useMemo(()=>new Qu(new s.ShaderMaterial({uniforms:L.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:o})),[o]);return d.useEffect(()=>()=>{O.material.dispose(),O.dispose()},[O]),d.useEffect(()=>()=>P.dispose(),[P]),(0,E.A)(({gl:G},D)=>{L.current.uTime.value+=D,G.setRenderTarget(P),O.render(G),G.setRenderTarget(null)}),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:T,scale:h,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:s.DoubleSide,alphaTest:t,alphaMap:P.texture,"alphaMap-wrapS":s.RepeatWrapping,"alphaMap-wrapT":s.RepeatWrapping,opacity:F?1:0},f)))}function _R(A){var _=A,{distance:i=.4,alphaTest:t=.5,map:r,width:o=512,height:l=512,scale:p,children:h}=_,f=mn(_,["distance","alphaTest","map","width","height","scale","children"]);const b=d.useRef(null),T=f.spotlightRef,B=f.debug;return MS(T,b,o,l,i),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:b,scale:p,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:s.DoubleSide,alphaTest:t,alphaMap:r,"alphaMap-wrapS":s.RepeatWrapping,"alphaMap-wrapT":s.RepeatWrapping,opacity:B?1:0},h)))}function ER(i){return i.shader?d.createElement(vR,i):d.createElement(_R,i)}const bR=d.forwardRef((P,F)=>{var L=P,{opacity:i=1,radiusTop:t,radiusBottom:r,depthBuffer:o,color:l="white",distance:p=5,angle:h=.15,attenuation:f=5,anglePower:A=5,volumetric:_=!0,debug:b=!1,children:T}=L,B=mn(L,["opacity","radiusTop","radiusBottom","depthBuffer","color","distance","angle","attenuation","anglePower","volumetric","debug","children"]);const O=d.useRef(null);return d.createElement("group",null,b&&O.current&&d.createElement("spotLightHelper",{args:[O.current]}),d.createElement("spotLight",(0,S.Z)({ref:fr([F,O]),angle:h,color:l,distance:p,castShadow:!0},B),_&&d.createElement(AR,{debug:b,opacity:i,radiusTop:t,radiusBottom:r,depthBuffer:o,color:l,distance:p,angle:h,attenuation:f,anglePower:A})),T&&d.cloneElement(T,{spotlightRef:O,debug:b}))}),xR=d.forwardRef((T,b)=>{var B=T,{args:i,map:t,toneMapped:r=!1,color:o="white",form:l="rect",intensity:p=1,scale:h=1,target:f,children:A}=B,_=mn(B,["args","map","toneMapped","color","form","intensity","scale","target","children"]);const F=d.useRef(null);return d.useLayoutEffect(()=>{!A&&!_.material&&((0,E.j)(F.current.material,{color:o}),F.current.material.color.multiplyScalar(p))},[o,p,A,_.material]),d.useLayoutEffect(()=>{f&&F.current.lookAt(Array.isArray(f)?new s.Vector3(...f):f)},[f]),h=Array.isArray(h)&&h.length===2?[h[0],h[1],1]:h,d.createElement("mesh",(0,S.Z)({ref:fr([F,b]),scale:h},_),l==="circle"?d.createElement("ringGeometry",{args:[0,1,64]}):l==="ring"?d.createElement("ringGeometry",{args:[.5,1,64]}):l==="rect"?d.createElement("planeGeometry",null):d.createElement(l,{args:i}),A||(_.material?null:d.createElement("meshBasicMaterial",{toneMapped:r,map:t,side:s.DoubleSide})))});var MR=Object.defineProperty,CR=(i,t,r)=>t in i?MR(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,CS=(i,t,r)=>(CR(i,typeof t!="symbol"?t+"":t,r),r);const c_={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new s.Vector3},up:{value:new s.Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${$v>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},SS=new s.ShaderMaterial({name:"SkyShader",fragmentShader:c_.fragmentShader,vertexShader:c_.vertexShader,uniforms:s.UniformsUtils.clone(c_.uniforms),side:s.BackSide,depthWrite:!1});class $b extends s.Mesh{constructor(){super(new s.BoxGeometry(1,1,1),SS)}}CS($b,"SkyShader",c_),CS($b,"material",SS);function wS(i,t,r=new s.Vector3){const o=Math.PI*(i-.5),l=2*Math.PI*(t-.5);return r.x=Math.cos(l),r.y=Math.sin(o),r.z=Math.sin(l),r}const SR=d.forwardRef((b,_)=>{var T=b,{inclination:i=.6,azimuth:t=.1,distance:r=1e3,mieCoefficient:o=.005,mieDirectionalG:l=.8,rayleigh:p=.5,turbidity:h=10,sunPosition:f=wS(i,t)}=T,A=mn(T,["inclination","azimuth","distance","mieCoefficient","mieDirectionalG","rayleigh","turbidity","sunPosition"]);const B=d.useMemo(()=>new s.Vector3().setScalar(r),[r]),[F]=d.useState(()=>new $b);return d.createElement("primitive",(0,S.Z)({object:F,ref:_,"material-uniforms-mieCoefficient-value":o,"material-uniforms-mieDirectionalG-value":l,"material-uniforms-rayleigh-value":p,"material-uniforms-sunPosition-value":f,"material-uniforms-turbidity-value":h,scale:B},A))});class wR extends s.ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const TR=i=>new s.Vector3().setFromSpherical(new s.Spherical(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),BR=d.forwardRef(({radius:i=100,depth:t=50,count:r=5e3,saturation:o=0,factor:l=4,fade:p=!1,speed:h=1},f)=>{const A=d.useRef(),[_,b,T]=d.useMemo(()=>{const F=[],P=[],L=Array.from({length:r},()=>(.5+.5*Math.random())*l),O=new s.Color;let G=i+t;const D=t/r;for(let k=0;k<r;k++)G-=D*Math.random(),F.push(...TR(G).toArray()),O.setHSL(k/r,o,.9),P.push(O.r,O.g,O.b);return[new Float32Array(F),new Float32Array(P),new Float32Array(L)]},[r,t,l,i,o]);(0,E.A)(F=>A.current&&(A.current.uniforms.time.value=F.clock.getElapsedTime()*h));const[B]=d.useState(()=>new wR);return d.createElement("points",{ref:f},d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[_,3]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[b,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[T,1]})),d.createElement("primitive",{ref:A,object:B,attach:"material",blending:s.AdditiveBlending,"uniforms-fade-value":p,depthWrite:!1,transparent:!0,vertexColors:!0}))});var TS={randomUUID:typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let p_;const IR=new Uint8Array(16);function RR(){if(!p_&&(p_=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!p_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return p_(IR)}var FR=y(3958);function OR(i,t,r){if(TS.randomUUID&&!t&&!i)return TS.randomUUID();i=i||{};const o=i.random||(i.rng||RR)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let l=0;l<16;++l)t[r+l]=o[l];return t}return(0,FR.S)(o)}var DR=OR;const PR="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",BS=new s.Matrix4,u_=new s.Vector3,d_=new s.Quaternion,IS=new s.Vector3,RS=new s.Quaternion,tA=new s.Vector3,ex=d.createContext(null),FS=d.forwardRef((f,h)=>{var A=f,{children:i,material:t=s.MeshLambertMaterial,texture:r=PR,range:o,limit:l=200}=A,p=mn(A,["children","material","texture","range","limit"]);var _,b;const T=d.useMemo(()=>class extends t{constructor(){super(),this.onBeforeCompile=oe=>{oe.vertexShader=`attribute float opacity;
               varying float vOpacity;
              `+oe.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = opacity;
                `),oe.fragmentShader=`varying float vOpacity;
              `+oe.fragmentShader.replace("#include <opaque_fragment>",`#include <opaque_fragment>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[t]);(0,E.e)({CloudMaterial:T});const B=d.useRef(null),F=d.useRef([]),P=d.useMemo(()=>new Float32Array(Array.from({length:l},()=>1)),[l]),L=d.useMemo(()=>new Float32Array(Array.from({length:l},()=>[1,1,1]).flat()),[l]),O=dc(r);let G=0,D=0,k;const N=new s.Quaternion,V=new s.Vector3(0,0,1),Q=new s.Vector3;(0,E.A)((oe,ae)=>{for(G=oe.clock.getElapsedTime(),BS.copy(B.current.matrixWorld).invert(),oe.camera.matrixWorld.decompose(IS,RS,tA),D=0;D<F.current.length;D++)k=F.current[D],k.ref.current.matrixWorld.decompose(u_,d_,tA),u_.add(Q.copy(k.position).applyQuaternion(d_).multiply(tA)),d_.copy(RS).multiply(N.setFromAxisAngle(V,k.rotation+=ae*k.rotationFactor)),tA.multiplyScalar(k.volume+(1+Math.sin(G*k.density*k.speed))/2*k.growth),k.matrix.compose(u_,d_,tA).premultiply(BS),k.dist=u_.distanceTo(IS);for(F.current.sort((ge,ie)=>ie.dist-ge.dist),D=0;D<F.current.length;D++)k=F.current[D],P[D]=k.opacity*(k.dist<k.fade-1?k.dist/k.fade:1),B.current.setMatrixAt(D,k.matrix),B.current.setColorAt(D,k.color);B.current.geometry.attributes.opacity.needsUpdate=!0,B.current.instanceMatrix.needsUpdate=!0,B.current.instanceColor&&(B.current.instanceColor.needsUpdate=!0)}),d.useLayoutEffect(()=>{const oe=Math.min(l,o!==void 0?o:l,F.current.length);B.current.count=oe,B.current.instanceMatrix.updateRange.count=oe*16,B.current.instanceColor&&(B.current.instanceColor.updateRange.count=oe*3),B.current.geometry.attributes.opacity.updateRange.count=oe});let K=[(_=O.image.width)!==null&&_!==void 0?_:1,(b=O.image.height)!==null&&b!==void 0?b:1],X=Math.max(K[0],K[1]);return K=[K[0]/X,K[1]/X],d.createElement("group",(0,S.Z)({ref:h},p),d.createElement(ex.Provider,{value:F},i,d.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:B,args:[null,null,l]},d.createElement("instancedBufferAttribute",{usage:s.DynamicDrawUsage,attach:"instanceColor",args:[L,3]}),d.createElement("planeGeometry",{args:[...K]},d.createElement("instancedBufferAttribute",{usage:s.DynamicDrawUsage,attach:"attributes-opacity",args:[P,1]})),d.createElement("cloudMaterial",{key:t.name,map:O,transparent:!0,depthWrite:!1}))))}),tx=d.forwardRef((P,F)=>{var L=P,{opacity:i=1,speed:t=0,bounds:r=[5,1,1],segments:o=20,color:l="#ffffff",fade:p=10,volume:h=6,smallestVolume:f=.25,distribute:A=null,growth:_=4,concentrate:b="inside",seed:T=Math.random()}=L,B=mn(L,["opacity","speed","bounds","segments","color","fade","volume","smallestVolume","distribute","growth","concentrate","seed"]);function O(){const V=Math.sin(T++)*1e4;return V-Math.floor(V)}const G=d.useContext(ex),D=d.useRef(null),[k]=d.useState(()=>DR()),N=d.useMemo(()=>[...new Array(o)].map((V,Q)=>({segments:o,bounds:new s.Vector3(1,1,1),position:new s.Vector3,uuid:k,index:Q,ref:D,dist:0,matrix:new s.Matrix4,color:new s.Color,rotation:Q*(Math.PI/o)})),[o,k]);return d.useLayoutEffect(()=>{N.forEach((V,Q)=>{var K;(0,E.j)(V,{volume:h,color:l,speed:t,growth:_,opacity:i,fade:p,bounds:r,density:Math.max(.5,O()),rotationFactor:Math.max(.2,.5*O())*t});const X=A==null?void 0:A(V,Q);(X||o>1)&&V.position.copy(V.bounds).multiply((K=X==null?void 0:X.point)!==null&&K!==void 0?K:{x:O()*2-1,y:O()*2-1,z:O()*2-1});const oe=Math.abs(V.position.x),ae=Math.abs(V.position.y),ge=Math.abs(V.position.z),ie=Math.max(oe,ae,ge);V.length=1,oe===ie&&(V.length-=oe/V.bounds.x),ae===ie&&(V.length-=ae/V.bounds.y),ge===ie&&(V.length-=ge/V.bounds.z),V.volume=((X==null?void 0:X.volume)!==void 0?X.volume:Math.max(Math.max(0,f),b==="random"?O():b==="inside"?V.length:1-V.length))*h})},[b,r,p,l,i,_,h,T,o,t]),d.useLayoutEffect(()=>{const V=N;return G.current=[...G.current,...V],()=>{G.current=G.current.filter(Q=>Q.uuid!==k)}},[N]),d.useImperativeHandle(F,()=>D.current,[]),d.createElement("group",(0,S.Z)({ref:D},B))}),LR=d.forwardRef((i,t)=>d.useContext(ex)?d.createElement(tx,(0,S.Z)({ref:t},i)):d.createElement(FS,null,d.createElement(tx,(0,S.Z)({ref:t},i)))),kR=uc({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),OS=i=>i&&i.constructor===Float32Array,zR=i=>[i.r,i.g,i.b],DS=i=>i instanceof s.Vector2||i instanceof s.Vector3||i instanceof s.Vector4,PS=i=>Array.isArray(i)?i:DS(i)?i.toArray():[i,i,i];function nA(i,t,r){return d.useMemo(()=>{if(t!==void 0){if(OS(t))return t;if(t instanceof s.Color){const o=Array.from({length:i*3},()=>zR(t)).flat();return Float32Array.from(o)}else if(DS(t)||Array.isArray(t)){const o=Array.from({length:i*3},()=>PS(t)).flat();return Float32Array.from(o)}return Float32Array.from({length:i},()=>t)}return Float32Array.from({length:i},r)},[t])}const GR=d.forwardRef((b,_)=>{var T=b,{noise:i=1,count:t=100,speed:r=1,opacity:o=1,scale:l=1,size:p,color:h,children:f}=T,A=mn(T,["noise","count","speed","opacity","scale","size","color","children"]);d.useMemo(()=>(0,E.e)({SparklesImplMaterial:kR}),[]);const B=d.useRef(null),F=(0,E.z)(V=>V.viewport.dpr),P=PS(l),L=d.useMemo(()=>Float32Array.from(Array.from({length:t},()=>P.map(s.MathUtils.randFloatSpread)).flat()),[t,...P]),O=nA(t,p,Math.random),G=nA(t,o),D=nA(t,r),k=nA(t*3,i),N=nA(h===void 0?t*3:t,OS(h)?h:new s.Color(h),()=>1);return(0,E.A)(V=>{B.current&&B.current.material&&(B.current.material.time=V.clock.elapsedTime)}),d.useImperativeHandle(_,()=>B.current,[]),d.createElement("points",(0,S.Z)({key:`particle-${t}-${JSON.stringify(l)}`},A,{ref:B}),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[L,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[O,1]}),d.createElement("bufferAttribute",{attach:"attributes-opacity",args:[G,1]}),d.createElement("bufferAttribute",{attach:"attributes-speed",args:[D,1]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[N,3]}),d.createElement("bufferAttribute",{attach:"attributes-noise",args:[k,3]})),f||d.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:F,depthWrite:!1}))});function UR(i){switch(i){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const NR="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",jR="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function HR(i=0,t=1024,r){const o=(0,jc.Rq)(()=>fetch(NR).then(b=>b.json()),["matcapList"]),l=o[0],p=d.useMemo(()=>Object.keys(o).length,[]),f=`${d.useMemo(()=>typeof i=="string"?i:typeof i=="number"?o[i]:null,[i])||l}${UR(t)}.png`,A=`${jR}/${t}/${f}`;return[dc(A,r),A,p]}const WR="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",VR="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function QR(i=0,t={},r){const{repeat:o=[1,1],anisotropy:l=1,offset:p=[0,0]}=t,h=(0,jc.Rq)(()=>fetch(VR).then(B=>B.json()),["normalsList"]),f=d.useMemo(()=>Object.keys(h).length,[]),A=h[0],_=h[i]||A,b=`${WR}/normals/${_}`,T=dc(b,r);return d.useLayoutEffect(()=>{T&&(T.wrapS=T.wrapT=s.RepeatWrapping,T.repeat=new s.Vector2(o[0],o[1]),T.offset=new s.Vector2(p[0],p[1]),T.anisotropy=l)},[T,l,o,p]),[T,b,f]}const ug={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new s.Color("#ff0000"),backfaceStroke:new s.Color("#0000ff"),fill:new s.Color("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},XR=uc(ug.uniforms,ug.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,ug.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function YR(i,t){i.onBeforeCompile=r=>{r.uniforms=jn(jn({},r.uniforms),t),r.vertexShader=r.vertexShader.replace("void main() {",`
		  ${ug.vertex}
		  void main() {
			initWireframe();
		`),r.fragmentShader=r.fragmentShader.replace("void main() {",`
		  ${ug.fragment}
		  void main() {
		`),r.fragmentShader=r.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},i.side=s.DoubleSide,i.transparent=!0}function KR(i,t){d.useEffect(()=>{var r;return void(i.fillOpacity.value=(r=t.fillOpacity)!==null&&r!==void 0?r:i.fillOpacity.value)},[t.fillOpacity]),d.useEffect(()=>{var r;return void(i.fillMix.value=(r=t.fillMix)!==null&&r!==void 0?r:i.fillMix.value)},[t.fillMix]),d.useEffect(()=>{var r;return void(i.strokeOpacity.value=(r=t.strokeOpacity)!==null&&r!==void 0?r:i.strokeOpacity.value)},[t.strokeOpacity]),d.useEffect(()=>{var r;return void(i.thickness.value=(r=t.thickness)!==null&&r!==void 0?r:i.thickness.value)},[t.thickness]),d.useEffect(()=>void(i.colorBackfaces.value=!!t.colorBackfaces),[t.colorBackfaces]),d.useEffect(()=>void(i.dash.value=!!t.dash),[t.dash]),d.useEffect(()=>void(i.dashInvert.value=!!t.dashInvert),[t.dashInvert]),d.useEffect(()=>{var r;return void(i.dashRepeats.value=(r=t.dashRepeats)!==null&&r!==void 0?r:i.dashRepeats.value)},[t.dashRepeats]),d.useEffect(()=>{var r;return void(i.dashLength.value=(r=t.dashLength)!==null&&r!==void 0?r:i.dashLength.value)},[t.dashLength]),d.useEffect(()=>void(i.squeeze.value=!!t.squeeze),[t.squeeze]),d.useEffect(()=>{var r;return void(i.squeezeMin.value=(r=t.squeezeMin)!==null&&r!==void 0?r:i.squeezeMin.value)},[t.squeezeMin]),d.useEffect(()=>{var r;return void(i.squeezeMax.value=(r=t.squeezeMax)!==null&&r!==void 0?r:i.squeezeMax.value)},[t.squeezeMax]),d.useEffect(()=>void(i.stroke.value=t.stroke?new s.Color(t.stroke):i.stroke.value),[t.stroke]),d.useEffect(()=>void(i.fill.value=t.fill?new s.Color(t.fill):i.fill.value),[t.fill]),d.useEffect(()=>void(i.backfaceStroke.value=t.backfaceStroke?new s.Color(t.backfaceStroke):i.backfaceStroke.value),[t.backfaceStroke])}var JR=y(25108);function qR(i){return!!(i!=null&&i.geometry)}function ZR(i){return!!(i!=null&&i.isBufferGeometry)}function $R(i){return!!(i!=null&&i.current)}function LS(i){return(i==null?void 0:i.current)!==void 0}function kS(i){return i.type==="WireframeGeometry"}function e5(){const i={};for(const t in ug.uniforms)i[t]={value:ug.uniforms[t]};return i}function t5(i,t){const o=i.getAttribute("position").count,l=[];for(let p=0;p<o;p++){const h=p%2===0,f=t?1:0;h?l.push(0,0,1,0,1,0,1,0,f):l.push(0,1,0,0,0,1,1,0,f)}return new s.BufferAttribute(Float32Array.from(l),3)}function zS(i){const t=$R(i)?i.current:i;if(ZR(t))return t;{if(kS(t))throw new Error("Wireframe: WireframeGeometry is not supported.");const r=t.parent;if(qR(r)){if(kS(r.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return r.geometry}}}function GS(i,t){if(i.index){JR.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const o=i.toNonIndexed();i.copy(o),i.setIndex(null)}const r=t5(i,t);i.setAttribute("barycentric",r)}function n5(o){var l=o,{geometry:i,simplify:t=!1}=l,r=mn(l,["geometry","simplify"]);(0,E.e)({MeshWireframeMaterial:XR});const[p,h]=d.useState(null);d.useLayoutEffect(()=>{const A=zS(i);if(!A)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");GS(A,t),LS(i)&&h(A)},[t,i]);const f=LS(i)?p:i;return d.createElement(d.Fragment,null,f&&d.createElement("mesh",{geometry:f},d.createElement("meshWireframeMaterial",(0,S.Z)({attach:"material",transparent:!0,side:s.DoubleSide,polygonOffset:!0,polygonOffsetFactor:-4},r,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function r5(r){var o=r,{simplify:i=!1}=o,t=mn(o,["simplify"]);const l=d.useRef(null),p=d.useMemo(()=>e5(),[ug.uniforms]);return KR(p,t),d.useLayoutEffect(()=>{const h=zS(l);if(!h)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const f=h.clone();return GS(h,i),()=>{h.copy(f),f.dispose()}},[i]),d.useLayoutEffect(()=>{const h=l.current.parent,f=h.material.clone();return YR(h.material,p),()=>{h.material.dispose(),h.material=f}},[]),d.createElement("object3D",{ref:l})}function i5(r){var o=r,{geometry:i}=o,t=mn(o,["geometry"]);return i?d.createElement(n5,(0,S.Z)({geometry:i},t)):d.createElement(r5,t)}const US=new s.Matrix4,nx=new s.Ray,NS=new s.Sphere,o5=new s.Vector3;class jS extends s.Group{constructor(){super(),this.size=0,this.color=new s.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){var o,l;const p=this.instance.current;if(!p||!p.geometry)return;const h=p.userData.instances.indexOf(this.instanceKey);if(h===-1||h>p.geometry.drawRange.count)return;const f=(o=(l=t.params.Points)==null?void 0:l.threshold)!==null&&o!==void 0?o:1;if(NS.set(this.getWorldPosition(o5),f),t.ray.intersectsSphere(NS)===!1)return;US.copy(p.matrixWorld).invert(),nx.copy(t.ray).applyMatrix4(US);const A=f/((this.scale.x+this.scale.y+this.scale.z)/3),_=A*A,b=nx.distanceSqToPoint(this.position);if(b<_){const T=new s.Vector3;nx.closestPointToPoint(this.position,T),T.applyMatrix4(this.matrixWorld);const B=t.ray.origin.distanceTo(T);if(B<t.near||B>t.far)return;r.push({distance:B,distanceToRay:Math.sqrt(b),point:T,index:h,face:null,object:this})}}}let Sm,rA;const HS=d.createContext(null),WS=new s.Matrix4,VS=new s.Vector3,s5=d.forwardRef((p,l)=>{var h=p,{children:i,range:t,limit:r=1e3}=h,o=mn(h,["children","range","limit"]);const f=d.useRef(null),[A,_]=d.useState([]),[[b,T,B]]=d.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);d.useEffect(()=>{f.current.geometry.attributes.position.needsUpdate=!0}),(0,E.A)(()=>{for(f.current.updateMatrix(),f.current.updateMatrixWorld(),WS.copy(f.current.matrixWorld).invert(),f.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,A.length),Sm=0;Sm<A.length;Sm++)rA=A[Sm].current,rA.getWorldPosition(VS).applyMatrix4(WS),VS.toArray(b,Sm*3),f.current.geometry.attributes.position.needsUpdate=!0,rA.matrixWorldNeedsUpdate=!0,rA.color.toArray(T,Sm*3),f.current.geometry.attributes.color.needsUpdate=!0,B.set([rA.size],Sm),f.current.geometry.attributes.size.needsUpdate=!0});const F=d.useMemo(()=>({getParent:()=>f,subscribe:P=>(_(L=>[...L,P]),()=>_(L=>L.filter(O=>O.current!==P.current)))}),[]);return d.createElement("points",(0,S.Z)({userData:{instances:A},matrixAutoUpdate:!1,ref:fr([l,f]),raycast:()=>null},o),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:b.length/3,array:b,itemSize:3,usage:s.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-color",count:T.length/3,array:T,itemSize:3,usage:s.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-size",count:B.length,array:B,itemSize:1,usage:s.DynamicDrawUsage})),d.createElement(HS.Provider,{value:F},i))}),a5=d.forwardRef((o,r)=>{var l=o,{children:i}=l,t=mn(l,["children"]);d.useMemo(()=>(0,E.e)({PositionPoint:jS}),[]);const p=d.useRef(),{subscribe:h,getParent:f}=d.useContext(HS);return d.useLayoutEffect(()=>h(p),[]),d.createElement("positionPoint",(0,S.Z)({instance:f(),instanceKey:p,ref:fr([r,p])},t),i)}),QS=d.forwardRef((f,h)=>{var A=f,{children:i,positions:t,colors:r,sizes:o,stride:l=3}=A,p=mn(A,["children","positions","colors","sizes","stride"]);const _=d.useRef(null);return(0,E.A)(()=>{const b=_.current.geometry.attributes;b.position.needsUpdate=!0,r&&(b.color.needsUpdate=!0),o&&(b.size.needsUpdate=!0)}),d.createElement("points",(0,S.Z)({ref:fr([h,_])},p),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:t.length/l,array:t,itemSize:l,usage:s.DynamicDrawUsage}),r&&d.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/l,array:r,itemSize:3,usage:s.DynamicDrawUsage}),o&&d.createElement("bufferAttribute",{attach:"attributes-size",count:o.length/l,array:o,itemSize:1,usage:s.DynamicDrawUsage})),i)}),l5=d.forwardRef((i,t)=>i.positions instanceof Float32Array?d.createElement(QS,(0,S.Z)({},i,{ref:t})):d.createElement(s5,(0,S.Z)({},i,{ref:t})));var c5=y(45697),iA=y.n(c5);function XS(i){return YS(i.children,i.components)}XS.propTypes={children:iA().func.isRequired,components:iA().arrayOf(iA().oneOfType([iA().element,iA().func])).isRequired};function YS(i,t,r){if(r=r||[],!t[0])return i(r);function o(l){return YS(i,t.slice(1),r.concat([l]))}return typeof t[0]=="function"?t[0]({results:r,render:o}):(0,d.cloneElement)(t[0],{children:o})}const KS=new s.Matrix4,JS=new s.Matrix4,h_=[],oA=new s.Mesh;class p5 extends s.Group{constructor(){super(),this.color=new s.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){const o=this.instance.current;if(!o||!o.geometry||!o.material)return;oA.geometry=o.geometry;const l=o.matrixWorld,p=o.userData.instances.indexOf(this.instanceKey);if(!(p===-1||p>o.count)){o.getMatrixAt(p,KS),JS.multiplyMatrices(l,KS),oA.matrixWorld=JS,o.material instanceof s.Material?oA.material.side=o.material.side:oA.material.side=o.material[0].side,oA.raycast(t,h_);for(let h=0,f=h_.length;h<f;h++){const A=h_[h];A.instanceId=p,A.object=this,r.push(A)}h_.length=0}}}const qS=d.createContext(null),ZS=new s.Matrix4,$S=new s.Matrix4,u5=new s.Matrix4,e4=new s.Vector3,t4=new s.Quaternion,n4=new s.Vector3,r4=d.forwardRef((l,o)=>{var p=l,{context:i,children:t}=p,r=mn(p,["context","children"]);d.useMemo(()=>(0,E.e)({PositionMesh:p5}),[]);const h=d.useRef(),{subscribe:f,getParent:A}=d.useContext(i||qS);return d.useLayoutEffect(()=>f(h),[]),d.createElement("positionMesh",(0,S.Z)({instance:A(),instanceKey:h,ref:fr([o,h])},r),t)}),i4=d.forwardRef((h,p)=>{var f=h,{children:i,range:t,limit:r=1e3,frames:o=1/0}=f,l=mn(f,["children","range","limit","frames"]);const[{context:A,instance:_}]=d.useState(()=>{const D=d.createContext(null);return{context:D,instance:d.forwardRef((k,N)=>d.createElement(r4,(0,S.Z)({context:D},k,{ref:N})))}}),b=d.useRef(null),[T,B]=d.useState([]),[[F,P]]=d.useState(()=>{const D=new Float32Array(r*16);for(let k=0;k<r;k++)u5.identity().toArray(D,k*16);return[D,new Float32Array([...new Array(r*3)].map(()=>1))]});d.useEffect(()=>{b.current.instanceMatrix.needsUpdate=!0});let L=0,O=0;(0,E.A)(()=>{if(o===1/0||L<o){b.current.updateMatrix(),b.current.updateMatrixWorld(),ZS.copy(b.current.matrixWorld).invert(),O=Math.min(r,t!==void 0?t:r,T.length),b.current.count=O,b.current.instanceMatrix.updateRange.count=O*16,b.current.instanceColor.updateRange.count=O*3;for(let D=0;D<T.length;D++){const k=T[D].current;k.matrixWorld.decompose(e4,t4,n4),$S.compose(e4,t4,n4).premultiply(ZS),$S.toArray(F,D*16),b.current.instanceMatrix.needsUpdate=!0,k.color.toArray(P,D*3),b.current.instanceColor.needsUpdate=!0}L++}});const G=d.useMemo(()=>({getParent:()=>b,subscribe:D=>(B(k=>[...k,D]),()=>B(k=>k.filter(N=>N.current!==D.current)))}),[]);return d.createElement("instancedMesh",(0,S.Z)({userData:{instances:T},matrixAutoUpdate:!1,ref:fr([p,b]),args:[null,null,0],raycast:()=>null},l),d.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:F.length/16,array:F,itemSize:16,usage:s.DynamicDrawUsage}),d.createElement("instancedBufferAttribute",{attach:"instanceColor",count:P.length/3,array:P,itemSize:3,usage:s.DynamicDrawUsage}),typeof i=="function"?d.createElement(A.Provider,{value:G},i(_)):d.createElement(qS.Provider,{value:G},i))}),d5=d.forwardRef(function(p,l){var h=p,{meshes:t,children:r}=h,o=mn(h,["meshes","children"]);const f=Array.isArray(t);if(!f)for(const A of Object.keys(t))t[A].isMesh||delete t[A];return d.createElement("group",{ref:l},d.createElement(XS,{components:(f?t:Object.values(t)).map(({geometry:A,material:_})=>d.createElement(i4,(0,S.Z)({key:A.uuid,geometry:A,material:_},o)))},A=>f?r(...A):r(Object.keys(t).filter(_=>t[_].isMesh).reduce((_,b,T)=>$o(jn({},_),{[b]:A[T]}),{}))))}),o4=d.createContext(null),h5=d.forwardRef((i,t)=>{d.useMemo(()=>(0,E.e)({SegmentObject:s4}),[]);const L=i,{limit:r=1e3,lineWidth:o=1,children:l}=L,p=mn(L,["limit","lineWidth","children"]),[h,f]=d.useState([]),[A]=d.useState(()=>new $A),[_]=d.useState(()=>new Ym),[b]=d.useState(()=>new Xm),[T]=d.useState(()=>new s.Vector2(512,512)),[B]=d.useState(()=>Array(r*6).fill(0)),[F]=d.useState(()=>Array(r*6).fill(0)),P=d.useMemo(()=>({subscribe:O=>(f(G=>[...G,O]),()=>f(G=>G.filter(D=>D.current!==O.current)))}),[]);return(0,E.A)(()=>{for(let G=0;G<r;G++){var O;const D=(O=h[G])==null?void 0:O.current;D&&(B[G*6+0]=D.start.x,B[G*6+1]=D.start.y,B[G*6+2]=D.start.z,B[G*6+3]=D.end.x,B[G*6+4]=D.end.y,B[G*6+5]=D.end.z,F[G*6+0]=D.color.r,F[G*6+1]=D.color.g,F[G*6+2]=D.color.b,F[G*6+3]=D.color.r,F[G*6+4]=D.color.g,F[G*6+5]=D.color.b)}b.setColors(F),b.setPositions(B),A.computeLineDistances()}),d.createElement("primitive",{object:A,ref:t},d.createElement("primitive",{object:b,attach:"geometry"}),d.createElement("primitive",(0,S.Z)({object:_,attach:"material",vertexColors:!0,resolution:T,linewidth:o},p)),d.createElement(o4.Provider,{value:P},l))});class s4{constructor(){this.color=new s.Color("white"),this.start=new s.Vector3(0,0,0),this.end=new s.Vector3(0,0,0)}}const a4=i=>i instanceof s.Vector3?i:new s.Vector3(...typeof i=="number"?[i,i,i]:i),f5=d.forwardRef(({color:i,start:t,end:r},o)=>{const l=d.useContext(o4);if(!l)throw"Segment must used inside Segments component.";const p=d.useRef(null);return d.useLayoutEffect(()=>l.subscribe(p),[]),d.createElement("segmentObject",{ref:fr([p,o]),color:i,start:a4(t),end:a4(r)})}),g5=d.forwardRef((p,l)=>{var h=p,{children:i,hysteresis:t=0,distances:r}=h,o=mn(h,["children","hysteresis","distances"]);const f=d.useRef(null);return d.useLayoutEffect(()=>{const{current:A}=f;A.levels.length=0,A.children.forEach((_,b)=>A.levels.push({object:_,hysteresis:t,distance:r[b]}))}),(0,E.A)(A=>{var _;return(_=f.current)==null?void 0:_.update(A.camera)}),d.createElement("lOD",(0,S.Z)({ref:fr([f,l])},o),i)});function m5({all:i,scene:t,camera:r}){const o=(0,E.z)(({gl:h})=>h),l=(0,E.z)(({camera:h})=>h),p=(0,E.z)(({scene:h})=>h);return d.useLayoutEffect(()=>{const h=[];i&&(t||p).traverse(_=>{_.visible===!1&&(h.push(_),_.visible=!0)}),o.compile(t||p,r||l);const f=new s.WebGLCubeRenderTarget(128);new s.CubeCamera(.01,1e5,f).update(o,t||p),f.dispose(),h.forEach(_=>_.visible=!1)},[]),null}function y5(){const i=(0,E.z)(t=>t.gl);return(0,d.useEffect)(()=>(i.shadowMap.autoUpdate=!1,i.shadowMap.needsUpdate=!0,()=>{i.shadowMap.autoUpdate=i.shadowMap.needsUpdate=!0}),[i.shadowMap]),null}const l4=new s.Matrix4,c4=new s.Ray,rx=new s.Sphere,ix=new s.Vector3;function A5(i,t){const r=this.geometry,o=this.material,l=this.matrixWorld;o!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),rx.copy(r.boundingSphere),rx.applyMatrix4(l),i.ray.intersectsSphere(rx)!==!1&&(l4.copy(l).invert(),c4.copy(i.ray).applyMatrix4(l4),!(r.boundingBox!==null&&c4.intersectBox(r.boundingBox,ix)===null)&&t.push({distance:ix.distanceTo(i.ray.origin),point:ix.clone(),object:this})))}function v5({pixelated:i}){const t=(0,E.z)(h=>h.gl),r=(0,E.z)(h=>h.internal.active),o=(0,E.z)(h=>h.performance.current),l=(0,E.z)(h=>h.viewport.initialDpr),p=(0,E.z)(h=>h.setDpr);return d.useEffect(()=>{const h=t.domElement;return()=>{r&&p(l),i&&h&&(h.style.imageRendering="auto")}},[]),d.useEffect(()=>{p(o*l),i&&t.domElement&&(t.domElement.style.imageRendering=o===1?"auto":"pixelated")},[o]),null}function _5(){const i=(0,E.z)(o=>o.get),t=(0,E.z)(o=>o.setEvents),r=(0,E.z)(o=>o.performance.current);return d.useEffect(()=>{const o=i().events.enabled;return()=>t({enabled:o})},[]),d.useEffect(()=>t({enabled:r===1}),[r]),null}const p4=(0,d.createContext)(null);function E5({iterations:i=10,ms:t=250,threshold:r=.75,step:o=.1,factor:l=.5,flipflops:p=1/0,bounds:h=B=>B>100?[60,100]:[40,60],onIncline:f,onDecline:A,onChange:_,onFallback:b,children:T}){const B=Math.pow(10,0),[F,P]=(0,d.useState)(()=>({fps:0,index:0,factor:l,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:O=>{const G=Symbol();return F.subscriptions.set(G,O.current),()=>void F.subscriptions.delete(G)}}));let L=0;return(0,E.A)(()=>{const{frames:O,averages:G}=F;if(!F.fallback&&G.length<i){O.push(performance.now());const D=O[O.length-1]-O[0];if(D>=t){if(F.fps=Math.round(O.length/D*1e3*B)/B,F.refreshrate=Math.max(F.refreshrate,F.fps),G[F.index++%i]=F.fps,G.length===i){const[k,N]=h(F.refreshrate),V=G.filter(K=>K>=N),Q=G.filter(K=>K<k);V.length>i*r&&(F.factor=Math.min(1,F.factor+o),F.flipped++,f&&f(F),F.subscriptions.forEach(K=>K.onIncline&&K.onIncline(F))),Q.length>i*r&&(F.factor=Math.max(0,F.factor-o),F.flipped++,A&&A(F),F.subscriptions.forEach(K=>K.onDecline&&K.onDecline(F))),L!==F.factor&&(L=F.factor,_&&_(F),F.subscriptions.forEach(K=>K.onChange&&K.onChange(F))),F.flipped>p&&!F.fallback&&(F.fallback=!0,b&&b(F),F.subscriptions.forEach(K=>K.onFallback&&K.onFallback(F))),F.averages=[]}F.frames=[]}}}),d.createElement(p4.Provider,{value:F},T)}function b5({onIncline:i,onDecline:t,onChange:r,onFallback:o}){const l=(0,d.useContext)(p4),p=(0,d.useRef)({onIncline:i,onDecline:t,onChange:r,onFallback:o});(0,d.useLayoutEffect)(()=>{p.current.onIncline=i,p.current.onDecline=t,p.current.onChange=r,p.current.onFallback=o},[i,t,r,o]),(0,d.useLayoutEffect)(()=>l.subscribe(p),[l])}const u4=d.forwardRef((F,B)=>{var P=F,{children:i,compute:t,width:r,height:o,samples:l=8,renderPriority:p=0,eventPriority:h=0,frames:f=1/0,stencilBuffer:A=!1,depthBuffer:_=!0,generateMipmaps:b=!1}=P,T=mn(P,["children","compute","width","height","samples","renderPriority","eventPriority","frames","stencilBuffer","depthBuffer","generateMipmaps"]);const{size:L,viewport:O}=(0,E.z)(),G=Vl((r||L.width)*O.dpr,(o||L.height)*O.dpr,{samples:l,stencilBuffer:A,depthBuffer:_,generateMipmaps:b}),[D]=d.useState(()=>new s.Scene),k=d.useCallback((N,V,Q)=>{var K,X;let oe=(K=G.texture)==null?void 0:K.__r3f.parent;for(;oe&&!(oe instanceof s.Object3D);)oe=oe.__r3f.parent;if(!oe)return!1;Q.raycaster.camera||Q.events.compute(N,Q,(X=Q.previousRoot)==null?void 0:X.getState());const[ae]=Q.raycaster.intersectObject(oe);if(!ae)return!1;const ge=ae.uv;if(!ge)return!1;V.raycaster.setFromCamera(V.pointer.set(ge.x*2-1,ge.y*2-1),V.camera)},[]);return d.useImperativeHandle(B,()=>G.texture,[G]),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(x5,{renderPriority:p,frames:f,fbo:G},i,d.createElement("group",{onPointerOver:()=>null})),D,{events:{compute:t||k,priority:h}}),d.createElement("primitive",(0,S.Z)({object:G.texture},T)))});function x5({frames:i,renderPriority:t,children:r,fbo:o}){let l=0,p;return(0,E.A)(h=>{(i===1/0||l<i)&&(p=h.gl.autoClear,h.gl.autoClear=!0,h.gl.setRenderTarget(o),h.gl.render(h.scene,h.camera),h.gl.setRenderTarget(null),h.gl.autoClear=p,l++)},t),d.createElement(d.Fragment,null,r)}const d4=d.forwardRef((N,k)=>{var V=N,{children:i,compute:t,renderPriority:r=-1,eventPriority:o=0,frames:l=1/0,stencilBuffer:p=!1,depthBuffer:h=!0,generateMipmaps:f=!1,resolution:A=896,near:_=.1,far:b=1e3,flip:T=!1,position:B,rotation:F,scale:P,quaternion:L,matrix:O,matrixAutoUpdate:G}=V,D=mn(V,["children","compute","renderPriority","eventPriority","frames","stencilBuffer","depthBuffer","generateMipmaps","resolution","near","far","flip","position","rotation","scale","quaternion","matrix","matrixAutoUpdate"]);const{size:Q,viewport:K}=(0,E.z)(),X=d.useRef(null),oe=d.useMemo(()=>{const ge=new s.WebGLCubeRenderTarget(Math.max((A||Q.width)*K.dpr,(A||Q.height)*K.dpr),{stencilBuffer:p,depthBuffer:h,generateMipmaps:f});return ge.texture.isRenderTargetTexture=!T,ge.texture.flipY=!0,ge.texture.type=s.HalfFloatType,ge},[A,T]);d.useEffect(()=>()=>oe.dispose(),[oe]);const[ae]=d.useState(()=>new s.Scene);return d.useImperativeHandle(k,()=>({scene:ae,fbo:oe,camera:X.current}),[oe]),d.createElement(d.Fragment,null,(0,E.g)(d.createElement(M5,{renderPriority:r,frames:l,camera:X},i,d.createElement("group",{onPointerOver:()=>null})),ae,{events:{compute:t,priority:o}}),d.createElement("primitive",(0,S.Z)({object:oe.texture},D)),d.createElement("cubeCamera",{ref:X,args:[_,b,oe],position:B,rotation:F,scale:P,quaternion:L,matrix:O,matrixAutoUpdate:G}))});function M5({frames:i,renderPriority:t,children:r,camera:o}){let l=0;return(0,E.A)(p=>{(i===1/0||l<i)&&(o.current.update(p.gl,p.scene),l++)},t),d.createElement(d.Fragment,null,r)}const C5=d.forwardRef((p,l)=>{var h=p,{id:i=1,colorWrite:t=!1,depthWrite:r=!1}=h,o=mn(h,["id","colorWrite","depthWrite"]);const f=d.useRef(null),A=d.useMemo(()=>({colorWrite:t,depthWrite:r,stencilWrite:!0,stencilRef:i,stencilFunc:s.AlwaysStencilFunc,stencilFail:s.ReplaceStencilOp,stencilZFail:s.ReplaceStencilOp,stencilZPass:s.ReplaceStencilOp}),[i,t,r]);return d.useLayoutEffect(()=>{Object.assign(f.current.material,A)}),d.useImperativeHandle(l,()=>f.current,[]),d.createElement("mesh",(0,S.Z)({ref:f,renderOrder:-i},o))});function S5(i,t=!1){return{stencilWrite:!0,stencilRef:i,stencilFunc:t?s.NotEqualStencilFunc:s.EqualStencilFunc,stencilFail:s.KeepStencilOp,stencilZFail:s.KeepStencilOp,stencilZPass:s.KeepStencilOp}}function w5(h){var f=h,{renderPriority:i=1,zoom:t=0,segments:r=64,children:o,resolution:l=896}=f,p=mn(f,["renderPriority","zoom","segments","children","resolution"]);const A=d.useRef(null),_=d.useRef(null),{width:b,height:T}=(0,E.z)(D=>D.size),[B]=d.useState(()=>new s.OrthographicCamera);d.useLayoutEffect(()=>{B.position.set(0,0,100),B.zoom=100,B.left=b/-2,B.right=b/2,B.top=T/2,B.bottom=T/-2,B.updateProjectionMatrix()},[b,T]);const F=Math.sqrt(b*b+T*T)/100*(.5+t/2),P=new s.Vector3,L=new s.Sphere(new s.Vector3,F),O=new s.Matrix3,G=d.useCallback((D,k,N)=>{if(k.pointer.set(D.offsetX/k.size.width*2-1,-(D.offsetY/k.size.height)*2+1),k.raycaster.setFromCamera(k.pointer,B),k.raycaster.ray.intersectSphere(L,P))P.normalize();else return;O.getNormalMatrix(_.current.camera.matrixWorld),_.current.camera.getWorldPosition(k.raycaster.ray.origin),k.raycaster.ray.direction.set(0,0,1).reflect(P),k.raycaster.ray.direction.x*=-1,k.raycaster.ray.direction.applyNormalMatrix(O).multiplyScalar(-1)},[]);return(0,E.A)(D=>{i&&D.gl.render(A.current,B)},i),d.createElement(d.Fragment,null,d.createElement("mesh",(0,S.Z)({ref:A},p,{scale:F}),d.createElement("sphereGeometry",{args:[1,r,r]}),d.createElement("meshBasicMaterial",null,d.createElement(d4,{compute:G,attach:"envMap",flip:!0,resolution:l,ref:_},o,d.createElement(T5,{api:_})))))}function T5({api:i}){const t=new s.Vector3,r=new s.Quaternion,o=new s.Vector3,l=new s.Euler(0,Math.PI,0);return(0,E.A)(p=>{p.camera.matrixWorld.decompose(t,r,o),i.current.camera.position.copy(t),i.current.camera.quaternion.setFromEuler(l).premultiply(r)}),null}const B5=uc({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new s.Vector2},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),I5=d.forwardRef((_,A)=>{var b=_,{children:i,events:t=void 0,blur:r=0,eventPriority:o=0,renderPriority:l=0,worldUnits:p=!1,resolution:h=512}=b,f=mn(b,["children","events","blur","eventPriority","renderPriority","worldUnits","resolution"]);(0,E.e)({PortalMaterialImpl:B5});const T=d.useRef(null),{scene:B,gl:F,size:P,viewport:L,setEvents:O}=(0,E.z)(),G=Vl(h,h),[D,k]=d.useState(0);(0,E.A)(()=>{const X=T.current.blend>0?Math.max(1,l):0;D!==X&&k(X)}),d.useEffect(()=>{t!==void 0&&O({enabled:!t})},[t]);const[N,V]=d.useState(!0),Q=nS(V);d.useLayoutEffect(()=>{var X;Q.current=(X=T.current)==null?void 0:X.__r3f.parent},[]),d.useLayoutEffect(()=>{if(Q.current&&r&&T.current.sdf===null){const X=new s.Mesh(Q.current.geometry,new s.MeshBasicMaterial),oe=new s.Box3().setFromBufferAttribute(X.geometry.attributes.position),ae=new s.OrthographicCamera(oe.min.x*(1+2/h),oe.max.x*(1+2/h),oe.max.y*(1+2/h),oe.min.y*(1+2/h),.1,1e3);ae.position.set(0,0,1),ae.lookAt(0,0,0),F.setRenderTarget(G),F.render(X,ae);const ie=F5(h,h,F)(G.texture),_e=new Float32Array(h*h);F.readRenderTargetPixels(ie,0,0,h,h,_e);let me=1/0;for(let we=0;we<_e.length;we++)_e[we]<me&&(me=_e[we]);me=-me,T.current.size=me,T.current.sdf=ie.texture,F.setRenderTarget(null)}},[h,r]),d.useImperativeHandle(A,()=>T.current);const K=d.useCallback((X,oe,ae)=>{var ge;if(!Q.current)return!1;if(oe.pointer.set(X.offsetX/oe.size.width*2-1,-(X.offsetY/oe.size.height)*2+1),oe.raycaster.setFromCamera(oe.pointer,oe.camera),((ge=T.current)==null?void 0:ge.blend)===0){const[ie]=oe.raycaster.intersectObject(Q.current);if(!ie)return oe.raycaster.camera=void 0,!1}},[]);return d.createElement("portalMaterialImpl",(0,S.Z)({ref:T,blur:r,blend:0,resolution:[P.width*L.dpr,P.height*L.dpr],toneMapped:!1,attach:"material"},f),d.createElement(u4,{attach:"map",frames:N?1/0:0,eventPriority:o,renderPriority:l,compute:K},i,d.createElement(R5,{events:t,rootScene:B,priority:D,material:T,worldUnits:p})))});function R5({events:i=void 0,rootScene:t,material:r,priority:o,worldUnits:l}){const p=(0,E.z)(T=>T.scene),h=(0,E.z)(T=>T.setEvents),f=Vl(),A=Vl();d.useLayoutEffect(()=>{p.matrixAutoUpdate=!1},[]),d.useEffect(()=>{i!==void 0&&h({enabled:i})},[i]);const[_,b]=d.useMemo(()=>{const T={value:0};return[new Qu(new s.ShaderMaterial({uniforms:{a:{value:f.texture},b:{value:A.texture},blend:T},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <${gl>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),T]},[]);return(0,E.A)(T=>{var B;let F=r==null||(B=r.current)==null?void 0:B.__r3f.parent;if(F){if(l)p.matrixWorld.identity();else{var P;o&&((P=r.current)==null?void 0:P.blend)===1&&F.updateWorldMatrix(!0,!1),p.matrixWorld.copy(F.matrixWorld)}if(o){var L,O,G;((L=r.current)==null?void 0:L.blend)>0&&((O=r.current)==null?void 0:O.blend)<1?(b.value=r.current.blend,T.gl.setRenderTarget(f),T.gl.render(p,T.camera),T.gl.setRenderTarget(A),T.gl.render(t,T.camera),T.gl.setRenderTarget(null),_.render(T.gl)):((G=r.current)==null?void 0:G.blend)===1&&T.gl.render(p,T.camera)}}},o),d.createElement(d.Fragment,null)}const F5=(i,t,r)=>{let o=new s.WebGLRenderTarget(i,t,{minFilter:s.LinearMipmapLinearFilter,magFilter:s.LinearFilter,type:s.FloatType,format:s.RedFormat,generateMipmaps:!0}),l=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),p=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),h=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),f=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter}),A=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter,type:s.FloatType,format:s.RedFormat}),_=new s.WebGLRenderTarget(i,t,{minFilter:s.NearestFilter,magFilter:s.NearestFilter,type:s.FloatType,format:s.RedFormat});const b=new Qu(new s.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),T=new Qu(new s.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),B=new Qu(new s.ShaderMaterial({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/i}, ${1/t}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),F=new Qu(new s.ShaderMaterial({uniforms:{tex:{value:null},size:{value:new s.Vector2(i,t)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),P=new Qu(new s.ShaderMaterial({uniforms:{inside:{value:_.texture},outside:{value:A.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return L=>{let O=o;L.minFilter=s.NearestFilter,L.magFilter=s.NearestFilter,b.material.uniforms.tex.value=L,r.setRenderTarget(l),b.render(r);const G=Math.ceil(Math.log(Math.max(i,t))/Math.log(2));let D=l,k=null;for(let N=0;N<G;N++){const V=Math.pow(2,G-N-1);k=D===l?h:l,B.material.uniforms.level.value=N,B.material.uniforms.maxSteps.value=G,B.material.uniforms.offset.value=V,B.material.uniforms.tex.value=D.texture,r.setRenderTarget(k),B.render(r),D=k}r.setRenderTarget(A),F.material.uniforms.tex.value=k.texture,F.render(r),T.material.uniforms.tex.value=L,r.setRenderTarget(p),T.render(r),D=p;for(let N=0;N<G;N++){const V=Math.pow(2,G-N-1);k=D===p?f:p,B.material.uniforms.level.value=N,B.material.uniforms.maxSteps.value=G,B.material.uniforms.offset.value=V,B.material.uniforms.tex.value=D.texture,r.setRenderTarget(k),B.render(r),D=k}return r.setRenderTarget(_),F.material.uniforms.tex.value=k.texture,F.render(r),r.setRenderTarget(O),P.material.uniforms.tex.value=L,P.render(r),r.setRenderTarget(null),O}};var O5=y(25108);const D5=i=>i&&i.isOrthographicCamera,h4=new s.Color;function f4(i){return"top"in i}function P5(i,t){const{right:r,top:o,left:l,bottom:p,width:h,height:f}=t,A=t.bottom<0||o>i.height||r<0||t.left>i.width;if(f4(i)){const T=i.top+i.height-p,B=l-i.left;return{position:{width:h,height:f,left:B,top:o,bottom:T,right:r},isOffscreen:A}}const _=i.height-p;return{position:{width:h,height:f,top:o,left:l,bottom:_,right:r},isOffscreen:A}}function L5({canvasSize:i,scene:t,index:r,children:o,frames:l,rect:p,track:h}){const f=(0,E.z)(B=>B.get),A=(0,E.z)(B=>B.camera),_=(0,E.z)(B=>B.scene),b=(0,E.z)(B=>B.setEvents);let T=0;return(0,E.A)(B=>{if(l===1/0||T<=l){var F;p.current=(F=h.current)==null?void 0:F.getBoundingClientRect(),T++}if(p.current){const{position:{left:P,bottom:L,width:O,height:G},isOffscreen:D}=P5(i,p.current),k=O/G;D5(A)?(A.left!==O/-2||A.right!==O/2||A.top!==G/2||A.bottom!==G/-2)&&(Object.assign(A,{left:O/-2,right:O/2,top:G/2,bottom:G/-2}),A.updateProjectionMatrix()):A.aspect!==k&&(A.aspect=k,A.updateProjectionMatrix()),B.gl.setViewport(P,L,O,G),B.gl.setScissor(P,L,O,G),B.gl.setScissorTest(!0),D?(B.gl.getClearColor(h4),B.gl.setClearColor(h4,B.gl.getClearAlpha()),B.gl.clear(!0,!0)):B.gl.render(o?_:t,A),B.gl.setScissorTest(!0)}},r),d.useEffect(()=>{const B=f().events.connected;return b({connected:h.current}),()=>b({connected:B})},[]),d.useEffect(()=>{f4(i)||O5.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),d.createElement(d.Fragment,null,o)}const k5=({track:i,index:t=1,frames:r=1/0,children:o})=>{var l,p;const h=d.useRef(null),{size:f,scene:A}=(0,E.z)(),[_]=d.useState(()=>new s.Scene),b=d.useCallback((F,P)=>{if(h.current&&i.current&&F.target===i.current){const{width:L,height:O,left:G,top:D}=h.current,k=F.clientX-G,N=F.clientY-D;P.pointer.set(k/L*2-1,-(N/O)*2+1),P.raycaster.setFromCamera(P.pointer,P.camera)}},[h,i]),[T,B]=d.useReducer(()=>!0,!1);return d.useEffect(()=>{var F;h.current=(F=i.current)==null?void 0:F.getBoundingClientRect(),B()},[i]),d.createElement(d.Fragment,null,T&&(0,E.g)(d.createElement(L5,{canvasSize:f,frames:r,scene:A,track:i,rect:h,index:t},o,d.createElement("group",{onPointerOver:()=>null})),_,{events:{compute:b,priority:t},size:{width:(l=h.current)==null?void 0:l.width,height:(p=h.current)==null?void 0:p.height}}))},f_=d.createContext(null),g_=new s.Vector3,g4=new s.Vector3,z5=(i,t,r,o)=>{const l=t.dot(t),p=t.dot(i)-t.dot(r),h=t.dot(o);return h===0?-p/l:(g_.copy(o).multiplyScalar(l/h).sub(t),g4.copy(o).multiplyScalar(p/h).add(r).sub(i),-g_.dot(g4)/g_.dot(g_))},G5=new s.Vector3(0,1,0),m4=new s.Matrix4,ox=({direction:i,axis:t})=>{const{translation:r,translationLimits:o,annotations:l,annotationsClass:p,depthTest:h,scale:f,lineWidth:A,fixed:_,axisColors:b,hoveredColor:T,opacity:B,onDragStart:F,onDrag:P,onDragEnd:L,userData:O}=d.useContext(f_),G=(0,E.z)(De=>De.controls),D=d.useRef(null),k=d.useRef(null),N=d.useRef(null),V=d.useRef(0),[Q,K]=d.useState(!1),X=d.useCallback(De=>{l&&(D.current.innerText=`${r.current[t].toFixed(2)}`,D.current.style.display="block"),De.stopPropagation();const Ne=new s.Matrix4().extractRotation(k.current.matrixWorld),Ge=De.point.clone(),Ye=new s.Vector3().setFromMatrixPosition(k.current.matrixWorld),Se=i.clone().applyMatrix4(Ne).normalize();N.current={clickPoint:Ge,dir:Se},V.current=r.current[t],F({component:"Arrow",axis:t,origin:Ye,directions:[Se]}),G&&(G.enabled=!1),De.target.setPointerCapture(De.pointerId)},[l,i,G,F,r,t]),oe=d.useCallback(De=>{if(De.stopPropagation(),Q||K(!0),N.current){const{clickPoint:Ne,dir:Ge}=N.current,[Ye,Se]=(o==null?void 0:o[t])||[void 0,void 0];let xe=z5(Ne,Ge,De.ray.origin,De.ray.direction);Ye!==void 0&&(xe=Math.max(xe,Ye-V.current)),Se!==void 0&&(xe=Math.min(xe,Se-V.current)),r.current[t]=V.current+xe,l&&(D.current.innerText=`${r.current[t].toFixed(2)}`),m4.makeTranslation(Ge.x*xe,Ge.y*xe,Ge.z*xe),P(m4)}},[l,P,Q,r,o,t]),ae=d.useCallback(De=>{l&&(D.current.style.display="none"),De.stopPropagation(),N.current=null,L(),G&&(G.enabled=!0),De.target.releasePointerCapture(De.pointerId)},[l,G,L]),ge=d.useCallback(De=>{De.stopPropagation(),K(!1)},[]),{cylinderLength:ie,coneWidth:_e,coneLength:me,matrixL:we}=d.useMemo(()=>{const De=_?A/f*1.6:f/20,Ne=_?.2:f/5,Ge=_?1-Ne:f-Ne,Ye=new s.Quaternion().setFromUnitVectors(G5,i.clone().normalize()),Se=new s.Matrix4().makeRotationFromQuaternion(Ye);return{cylinderLength:Ge,coneWidth:De,coneLength:Ne,matrixL:Se}},[i,f,A,_]),ke=Q?T:b[t];return d.createElement("group",{ref:k},d.createElement("group",{matrix:we,matrixAutoUpdate:!1,onPointerDown:X,onPointerMove:oe,onPointerUp:ae,onPointerOut:ge},l&&d.createElement(ut,{position:[0,-me,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:D})),d.createElement("mesh",{visible:!1,position:[0,(ie+me)/2,0],userData:O},d.createElement("cylinderGeometry",{args:[_e*1.4,_e*1.4,ie+me,8,1]})),d.createElement(Nc,{transparent:!0,raycast:()=>null,depthTest:h,points:[0,0,0,0,ie,0],lineWidth:A,color:ke,opacity:B,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),d.createElement("mesh",{raycast:()=>null,position:[0,ie+me/2,0],renderOrder:500},d.createElement("coneGeometry",{args:[_e,me,24,1]}),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:h,color:ke,opacity:B,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},U5=(i,t,r)=>{const o=Math.abs(i.x)>=Math.abs(i.y)&&Math.abs(i.x)>=Math.abs(i.z)?0:Math.abs(i.y)>=Math.abs(i.x)&&Math.abs(i.y)>=Math.abs(i.z)?1:2,l=[0,1,2].sort((P,L)=>Math.abs(t.getComponent(L))-Math.abs(t.getComponent(P))),p=o===l[0]?l[1]:l[0],h=i.getComponent(o),f=i.getComponent(p),A=t.getComponent(o),_=t.getComponent(p),b=r.getComponent(o),B=(r.getComponent(p)-b*(f/h))/(_-A*(f/h));return[(b-B*A)/h,B]},m_=new s.Ray,y_=new s.Vector3,y4=new s.Matrix4,sx=({dir1:i,dir2:t,axis:r})=>{const{translation:o,translationLimits:l,annotations:p,annotationsClass:h,depthTest:f,scale:A,lineWidth:_,fixed:b,axisColors:T,hoveredColor:B,opacity:F,onDragStart:P,onDrag:L,onDragEnd:O,userData:G}=d.useContext(f_),D=(0,E.z)(Ge=>Ge.controls),k=d.useRef(null),N=d.useRef(null),V=d.useRef(null),Q=d.useRef(0),K=d.useRef(0),[X,oe]=d.useState(!1),ae=d.useCallback(Ge=>{p&&(k.current.innerText=`${o.current[(r+1)%3].toFixed(2)}, ${o.current[(r+2)%3].toFixed(2)}`,k.current.style.display="block"),Ge.stopPropagation();const Ye=Ge.point.clone(),Se=new s.Vector3().setFromMatrixPosition(N.current.matrixWorld),xe=new s.Vector3().setFromMatrixColumn(N.current.matrixWorld,0).normalize(),Ee=new s.Vector3().setFromMatrixColumn(N.current.matrixWorld,1).normalize(),le=new s.Vector3().setFromMatrixColumn(N.current.matrixWorld,2).normalize(),ye=new s.Plane().setFromNormalAndCoplanarPoint(le,Se);V.current={clickPoint:Ye,e1:xe,e2:Ee,plane:ye},Q.current=o.current[(r+1)%3],K.current=o.current[(r+2)%3],P({component:"Slider",axis:r,origin:Se,directions:[xe,Ee,le]}),D&&(D.enabled=!1),Ge.target.setPointerCapture(Ge.pointerId)},[p,D,P,r]),ge=d.useCallback(Ge=>{if(Ge.stopPropagation(),X||oe(!0),V.current){const{clickPoint:Ye,e1:Se,e2:xe,plane:Ee}=V.current,[le,ye]=(l==null?void 0:l[(r+1)%3])||[void 0,void 0],[Be,be]=(l==null?void 0:l[(r+2)%3])||[void 0,void 0];m_.copy(Ge.ray),m_.intersectPlane(Ee,y_),m_.direction.negate(),m_.intersectPlane(Ee,y_),y_.sub(Ye);let[je,Et]=U5(Se,xe,y_);le!==void 0&&(je=Math.max(je,le-Q.current)),ye!==void 0&&(je=Math.min(je,ye-Q.current)),Be!==void 0&&(Et=Math.max(Et,Be-K.current)),be!==void 0&&(Et=Math.min(Et,be-K.current)),o.current[(r+1)%3]=Q.current+je,o.current[(r+2)%3]=K.current+Et,p&&(k.current.innerText=`${o.current[(r+1)%3].toFixed(2)}, ${o.current[(r+2)%3].toFixed(2)}`),y4.makeTranslation(je*Se.x+Et*xe.x,je*Se.y+Et*xe.y,je*Se.z+Et*xe.z),L(y4)}},[p,L,X,o,l,r]),ie=d.useCallback(Ge=>{p&&(k.current.style.display="none"),Ge.stopPropagation(),V.current=null,O(),D&&(D.enabled=!0),Ge.target.releasePointerCapture(Ge.pointerId)},[p,D,O]),_e=d.useCallback(Ge=>{Ge.stopPropagation(),oe(!1)},[]),me=d.useMemo(()=>{const Ge=i.clone().normalize(),Ye=t.clone().normalize();return new s.Matrix4().makeBasis(Ge,Ye,Ge.clone().cross(Ye))},[i,t]),we=b?1/7:A/7,ke=b?.225:A*.225,De=X?B:T[r],Ne=d.useMemo(()=>[new s.Vector3(0,0,0),new s.Vector3(0,ke,0),new s.Vector3(ke,ke,0),new s.Vector3(ke,0,0),new s.Vector3(0,0,0)],[ke]);return d.createElement("group",{ref:N,matrix:me,matrixAutoUpdate:!1},p&&d.createElement(ut,{position:[0,0,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:h,ref:k})),d.createElement("group",{position:[we*1.7,we*1.7,0]},d.createElement("mesh",{visible:!0,onPointerDown:ae,onPointerMove:ge,onPointerUp:ie,onPointerOut:_e,scale:ke,userData:G},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:f,color:De,polygonOffset:!0,polygonOffsetFactor:-10,side:s.DoubleSide,fog:!1})),d.createElement(Nc,{position:[-ke/2,-ke/2,0],transparent:!0,depthTest:f,points:Ne,lineWidth:_,color:De,opacity:F,polygonOffset:!0,polygonOffsetFactor:-10,userData:G,fog:!1})))};var N5=y(7378),j5=y.n(N5);const ax=new s.Vector3,lx=new s.Vector3,cx=i=>i*180/Math.PI,H5=i=>i*Math.PI/180,W5=(i,t,r,o,l)=>{ax.copy(i).sub(r),lx.copy(t).sub(r);const p=o.dot(o),h=l.dot(l),f=ax.dot(o)/p,A=ax.dot(l)/h,_=lx.dot(o)/p,b=lx.dot(l)/h,T=Math.atan2(A,f);return Math.atan2(b,_)-T},V5=(i,t)=>{let r=Math.floor(i/t);return r=r<0?r+1:r,i-r*t},A4=i=>{let t=V5(i,2*Math.PI);return Math.abs(t)<1e-6?0:(t<0&&(t+=2*Math.PI),t)},A_=new s.Matrix4,v4=new s.Vector3,v_=new s.Ray,px=new s.Vector3,ux=({dir1:i,dir2:t,axis:r})=>{const{rotationLimits:o,annotations:l,annotationsClass:p,depthTest:h,scale:f,lineWidth:A,fixed:_,axisColors:b,hoveredColor:T,opacity:B,onDragStart:F,onDrag:P,onDragEnd:L,userData:O}=d.useContext(f_),G=(0,E.z)(ke=>ke.controls),D=d.useRef(null),k=d.useRef(null),N=d.useRef(0),V=d.useRef(0),Q=d.useRef(null),[K,X]=d.useState(!1),oe=d.useCallback(ke=>{l&&(D.current.innerText=`${cx(V.current).toFixed(0)}\xBA`,D.current.style.display="block"),ke.stopPropagation();const De=ke.point.clone(),Ne=new s.Vector3().setFromMatrixPosition(k.current.matrixWorld),Ge=new s.Vector3().setFromMatrixColumn(k.current.matrixWorld,0).normalize(),Ye=new s.Vector3().setFromMatrixColumn(k.current.matrixWorld,1).normalize(),Se=new s.Vector3().setFromMatrixColumn(k.current.matrixWorld,2).normalize(),xe=new s.Plane().setFromNormalAndCoplanarPoint(Se,Ne);Q.current={clickPoint:De,origin:Ne,e1:Ge,e2:Ye,normal:Se,plane:xe},F({component:"Rotator",axis:r,origin:Ne,directions:[Ge,Ye,Se]}),G&&(G.enabled=!1),ke.target.setPointerCapture(ke.pointerId)},[l,G,F,r]),ae=d.useCallback(ke=>{if(ke.stopPropagation(),K||X(!0),Q.current){const{clickPoint:De,origin:Ne,e1:Ge,e2:Ye,normal:Se,plane:xe}=Q.current,[Ee,le]=(o==null?void 0:o[r])||[void 0,void 0];v_.copy(ke.ray),v_.intersectPlane(xe,px),v_.direction.negate(),v_.intersectPlane(xe,px);let ye=W5(De,px,Ne,Ge,Ye),Be=cx(ye);ke.shiftKey&&(Be=Math.round(Be/10)*10,ye=H5(Be)),Ee!==void 0&&le!==void 0&&le-Ee<2*Math.PI?(ye=A4(ye),ye=ye>Math.PI?ye-2*Math.PI:ye,ye=j5()(ye,Ee-N.current,le-N.current),V.current=N.current+ye):(V.current=A4(N.current+ye),V.current=V.current>Math.PI?V.current-2*Math.PI:V.current),l&&(Be=cx(V.current),D.current.innerText=`${Be.toFixed(0)}\xBA`),A_.makeRotationAxis(Se,ye),v4.copy(Ne).applyMatrix4(A_).sub(Ne).negate(),A_.setPosition(v4),P(A_)}},[l,P,K,o,r]),ge=d.useCallback(ke=>{l&&(D.current.style.display="none"),ke.stopPropagation(),N.current=V.current,Q.current=null,L(),G&&(G.enabled=!0),ke.target.releasePointerCapture(ke.pointerId)},[l,G,L]),ie=d.useCallback(ke=>{ke.stopPropagation(),X(!1)},[]),_e=d.useMemo(()=>{const ke=i.clone().normalize(),De=t.clone().normalize();return new s.Matrix4().makeBasis(ke,De,ke.clone().cross(De))},[i,t]),me=_?.65:f*.65,we=d.useMemo(()=>{const De=[];for(let Ne=0;Ne<=32;Ne++){const Ge=Ne*(Math.PI/2)/32;De.push(new s.Vector3(Math.cos(Ge)*me,Math.sin(Ge)*me,0))}return De},[me]);return d.createElement("group",{ref:k,onPointerDown:oe,onPointerMove:ae,onPointerUp:ge,onPointerOut:ie,matrix:_e,matrixAutoUpdate:!1},l&&d.createElement(ut,{position:[me,me,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:D})),d.createElement(Nc,{points:we,lineWidth:A*4,visible:!1,userData:O}),d.createElement(Nc,{transparent:!0,raycast:()=>null,depthTest:h,points:we,lineWidth:A,color:K?T:b[r],opacity:B,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},Q5=new s.Vector3,X5=new s.Vector3,Y5=new s.Vector3,K5=(i,t,r)=>{const o=r.width/2,l=r.height/2;t.updateMatrixWorld(!1);const p=i.project(t);return p.x=p.x*o+o,p.y=-(p.y*l)+l,p},J5=(i,t,r,o=1)=>{const l=Q5.set(i.x/r.width*2-1,-(i.y/r.height)*2+1,o);return l.unproject(t),l},_4=(i,t,r,o)=>{const l=K5(Y5.copy(i),r,o);let p=0;for(let h=0;h<2;++h){const f=X5.copy(l).setComponent(h,l.getComponent(h)+t),A=J5(f,r,o,f.z);p=Math.max(p,i.distanceTo(A))}return p},E4=new s.Matrix4,b4=new s.Matrix4,x4=new s.Matrix4,__=new s.Matrix4,dx=new s.Matrix4,A1=new s.Matrix4,M4=new s.Matrix4,C4=new s.Matrix4,v1=new s.Box3,hx=new s.Box3,S4=new s.Vector3,w4=new s.Vector3,T4=new s.Vector3,B4=new s.Vector3,sA=new s.Vector3(1,0,0),aA=new s.Vector3(0,1,0),lA=new s.Vector3(0,0,1),q5=d.forwardRef((ie,ge)=>{var _e=ie,{matrix:i,onDragStart:t,onDrag:r,onDragEnd:o,autoTransform:l=!0,anchor:p,disableAxes:h=!1,disableSliders:f=!1,disableRotations:A=!1,activeAxes:_=[!0,!0,!0],offset:b=[0,0,0],rotation:T=[0,0,0],scale:B=1,lineWidth:F=4,fixed:P=!1,translationLimits:L,rotationLimits:O,depthTest:G=!0,axisColors:D=["#ff2060","#20df80","#2080ff"],hoveredColor:k="#ffff40",annotations:N=!1,annotationsClass:V,opacity:Q=1,visible:K=!0,userData:X,children:oe}=_e,ae=mn(_e,["matrix","onDragStart","onDrag","onDragEnd","autoTransform","anchor","disableAxes","disableSliders","disableRotations","activeAxes","offset","rotation","scale","lineWidth","fixed","translationLimits","rotationLimits","depthTest","axisColors","hoveredColor","annotations","annotationsClass","opacity","visible","userData","children"]);const me=(0,E.z)(xe=>xe.invalidate),we=d.useRef(null),ke=d.useRef(null),De=d.useRef(null),Ne=d.useRef(null),Ge=d.useRef([0,0,0]);d.useLayoutEffect(()=>{p&&(Ne.current.updateWorldMatrix(!0,!0),__.copy(Ne.current.matrixWorld).invert(),v1.makeEmpty(),Ne.current.traverse(xe=>{xe.geometry&&(xe.geometry.boundingBox||xe.geometry.computeBoundingBox(),A1.copy(xe.matrixWorld).premultiply(__),hx.copy(xe.geometry.boundingBox),hx.applyMatrix4(A1),v1.union(hx))}),S4.copy(v1.max).add(v1.min).multiplyScalar(.5),w4.copy(v1.max).sub(v1.min).multiplyScalar(.5),T4.copy(w4).multiply(new s.Vector3(...p)).add(S4),B4.set(...b).add(T4),De.current.position.copy(B4),me())});const Ye=d.useMemo(()=>({onDragStart:xe=>{E4.copy(ke.current.matrix),b4.copy(ke.current.matrixWorld),t&&t(xe),me()},onDrag:xe=>{x4.copy(we.current.matrixWorld),__.copy(x4).invert(),dx.copy(b4).premultiply(xe),A1.copy(dx).premultiply(__),M4.copy(E4).invert(),C4.copy(A1).multiply(M4),l&&ke.current.matrix.copy(A1),r&&r(A1,C4,dx,xe),me()},onDragEnd:()=>{o&&o(),me()},translation:Ge,translationLimits:L,rotationLimits:O,axisColors:D,hoveredColor:k,opacity:Q,scale:B,lineWidth:F,fixed:P,depthTest:G,userData:X,annotations:N,annotationsClass:V}),[t,r,o,Ge,L,O,G,B,F,P,...D,k,Q,X,l,N,V]),Se=new s.Vector3;return(0,E.A)(xe=>{if(P){const Be=_4(De.current.getWorldPosition(Se),B,xe.camera,xe.size);if(De.current){var Ee,le,ye;(((Ee=De.current)==null?void 0:Ee.scale.x)!==Be||((le=De.current)==null?void 0:le.scale.y)!==Be||((ye=De.current)==null?void 0:ye.scale.z)!==Be)&&(De.current.scale.setScalar(Be),xe.invalidate())}}}),d.useImperativeHandle(ge,()=>ke.current,[]),d.useLayoutEffect(()=>{i&&i instanceof s.Matrix4&&(ke.current.matrix=i)},[i]),d.createElement(f_.Provider,{value:Ye},d.createElement("group",{ref:we},d.createElement("group",(0,S.Z)({ref:ke,matrix:i,matrixAutoUpdate:!1},ae),d.createElement("group",{visible:K,ref:De,position:b,rotation:T},!h&&_[0]&&d.createElement(ox,{axis:0,direction:sA}),!h&&_[1]&&d.createElement(ox,{axis:1,direction:aA}),!h&&_[2]&&d.createElement(ox,{axis:2,direction:lA}),!f&&_[0]&&_[1]&&d.createElement(sx,{axis:2,dir1:sA,dir2:aA}),!f&&_[0]&&_[2]&&d.createElement(sx,{axis:1,dir1:lA,dir2:sA}),!f&&_[2]&&_[1]&&d.createElement(sx,{axis:0,dir1:aA,dir2:lA}),!A&&_[0]&&_[1]&&d.createElement(ux,{axis:2,dir1:sA,dir2:aA}),!A&&_[0]&&_[2]&&d.createElement(ux,{axis:1,dir1:lA,dir2:sA}),!A&&_[2]&&_[1]&&d.createElement(ux,{axis:0,dir1:aA,dir2:lA})),d.createElement("group",{ref:Ne},oe))))})},66319:function(u,n,y){"use strict";y.d(n,{A:function(){return $i},B:function(){return Jt},C:function(){return ls},D:function(){return Fl},E:function(){return zt},a:function(){return Pt},b:function(){return qa},c:function(){return jo},d:function(){return El},e:function(){return nt},f:function(){return Zi},g:function(){return cs},h:function(){return ta},i:function(){return mt},j:function(){return Ho},k:function(){return vi},l:function(){return _l},m:function(){return ea},n:function(){return ss},o:function(){return Xi},p:function(){return $s},q:function(){return Oi},r:function(){return Ol},s:function(){return fr},t:function(){return de},u:function(){return Ot},v:function(){return Zc},w:function(){return Do},x:function(){return Rl},y:function(){return as},z:function(){return Ws}});var S=y(99477),d=y(67294),m=y(32576),s=y(14671),E=y(76525),H=y.n(E),te=y(63840),ce=y(58139),J=y(25108),pe=y(34155),de=Object.freeze({__proto__:null});const bt={},nt=rt=>void Object.assign(bt,rt);function He(rt,xt){function sn(Le,qe,Me){var at=qe,{args:tt=[],attach:dt}=at,_t=mn(at,["args","attach"]);let lt=`${Le[0].toUpperCase()}${Le.slice(1)}`,Rt;if(Le==="primitive"){if(_t.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const Xt=_t.object;Rt=hi(Xt,{type:Le,root:Me,attach:dt,primitive:!0})}else{const Xt=bt[lt];if(!Xt)throw new Error(`R3F: ${lt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(tt))throw new Error("R3F: The args prop must be an array!");Rt=hi(new Xt(...tt),{type:Le,root:Me,attach:dt,memoizedProps:{args:tt}})}return Rt.__r3f.attach===void 0&&(Rt instanceof S.BufferGeometry?Rt.__r3f.attach="geometry":Rt instanceof S.Material&&(Rt.__r3f.attach="material")),lt!=="inject"&&Li(Rt,_t),Rt}function zn(Le,tt){let dt=!1;if(tt){var _t,Me;(_t=tt.__r3f)!=null&&_t.attach?$t(Le,tt,tt.__r3f.attach):tt.isObject3D&&Le.isObject3D&&(Le.add(tt),dt=!0),dt||(Me=Le.__r3f)==null||Me.objects.push(tt),tt.__r3f||hi(tt,{}),tt.__r3f.parent=Le,Tn(tt),Mn(tt)}}function In(Le,tt,dt){let _t=!1;if(tt){var Me,qe;if((Me=tt.__r3f)!=null&&Me.attach)$t(Le,tt,tt.__r3f.attach);else if(tt.isObject3D&&Le.isObject3D){tt.parent=Le,tt.dispatchEvent({type:"added"});const at=Le.children.filter(Rt=>Rt!==tt),lt=at.indexOf(dt);Le.children=[...at.slice(0,lt),tt,...at.slice(lt)],_t=!0}_t||(qe=Le.__r3f)==null||qe.objects.push(tt),tt.__r3f||hi(tt,{}),tt.__r3f.parent=Le,Tn(tt),Mn(tt)}}function ur(Le,tt,dt=!1){Le&&[...Le].forEach(_t=>Ue(tt,_t,dt))}function Ue(Le,tt,dt){if(tt){var _t,Me,qe;if(tt.__r3f&&(tt.__r3f.parent=null),(_t=Le.__r3f)!=null&&_t.objects&&(Le.__r3f.objects=Le.__r3f.objects.filter(On=>On!==tt)),(Me=tt.__r3f)!=null&&Me.attach)Fn(Le,tt,tt.__r3f.attach);else if(tt.isObject3D&&Le.isObject3D){var at;Le.remove(tt),(at=tt.__r3f)!=null&&at.root&&ki(tt.__r3f.root,tt)}const Rt=(qe=tt.__r3f)==null?void 0:qe.primitive,Xt=dt===void 0?tt.dispose!==null&&!Rt:dt;if(!Rt){var lt;ur((lt=tt.__r3f)==null?void 0:lt.objects,tt,Xt),ur(tt.children,tt,Xt)}delete tt.__r3f,Xt&&tt.dispose&&tt.type!=="Scene"&&(0,te.unstable_scheduleCallback)(te.unstable_IdlePriority,()=>{try{tt.dispose()}catch(On){}}),Mn(Le)}}function ze(Le,tt,dt,_t){var Me;const qe=(Me=Le.__r3f)==null?void 0:Me.parent;if(!qe)return;const at=sn(tt,dt,Le.__r3f.root);if(Le.children){for(const lt of Le.children)lt.__r3f&&zn(at,lt);Le.children=Le.children.filter(lt=>!lt.__r3f)}Le.__r3f.objects.forEach(lt=>zn(at,lt)),Le.__r3f.objects=[],Le.__r3f.autoRemovedBeforeAppend||Ue(qe,Le),at.parent&&(at.__r3f.autoRemovedBeforeAppend=!0),zn(qe,at),at.raycast&&at.__r3f.eventCount&&at.__r3f.root.getState().internal.interaction.push(at),[_t,_t.alternate].forEach(lt=>{lt!==null&&(lt.stateNode=at,lt.ref&&(typeof lt.ref=="function"?lt.ref(at):lt.ref.current=at))})}const Ie=()=>J.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:H()({createInstance:sn,removeChild:Ue,appendChild:zn,appendInitialChild:zn,insertBefore:In,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(Le,tt)=>{if(!tt)return;const dt=Le.getState().scene;dt.__r3f&&(dt.__r3f.root=Le,zn(dt,tt))},removeChildFromContainer:(Le,tt)=>{tt&&Ue(Le.getState().scene,tt)},insertInContainerBefore:(Le,tt,dt)=>{if(!tt||!dt)return;const _t=Le.getState().scene;_t.__r3f&&In(_t,tt,dt)},getRootHostContext:()=>null,getChildHostContext:Le=>Le,finalizeInitialChildren(Le){var tt;return!!((tt=Le==null?void 0:Le.__r3f)!=null?tt:{}).handlers},prepareUpdate(Le,tt,dt,_t){var Me;if(((Me=Le==null?void 0:Le.__r3f)!=null?Me:{}).primitive&&_t.object&&_t.object!==Le)return[!0];{const at=_t,{args:Rt=[],children:Xt}=at,On=mn(at,["args","children"]),lt=dt,{args:Yn=[],children:vr}=lt,Gr=mn(lt,["args","children"]);if(!Array.isArray(Rt))throw new Error("R3F: the args prop must be an array!");if(Rt.some((oi,Kr)=>oi!==Yn[Kr]))return[!0];const Yr=gr(Le,On,Gr,!0);return Yr.changes.length?[!1,Yr]:null}},commitUpdate(Le,[tt,dt],_t,Me,qe,at){tt?ze(Le,_t,qe,at):Li(Le,dt)},commitMount(Le,tt,dt,_t){var Me;const qe=(Me=Le.__r3f)!=null?Me:{};Le.raycast&&qe.handlers&&qe.eventCount&&Le.__r3f.root.getState().internal.interaction.push(Le)},getPublicInstance:Le=>Le,prepareForCommit:()=>null,preparePortalMount:Le=>hi(Le.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(Le){var tt;const{attach:dt,parent:_t}=(tt=Le.__r3f)!=null?tt:{};dt&&_t&&Fn(_t,Le,dt),Le.isObject3D&&(Le.visible=!1),Mn(Le)},unhideInstance(Le,tt){var dt;const{attach:_t,parent:Me}=(dt=Le.__r3f)!=null?dt:{};_t&&Me&&$t(Me,Le,_t),(Le.isObject3D&&tt.visible==null||tt.visible)&&(Le.visible=!0),Mn(Le)},createTextInstance:Ie,hideTextInstance:Ie,unhideTextInstance:Ie,getCurrentEventPriority:()=>xt?xt():m.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&Ir.fun(performance.now)?performance.now:Ir.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ir.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ir.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Li}}var ot,gt;const St=rt=>"colorSpace"in rt||"outputColorSpace"in rt,vt=()=>{var rt;return(rt=bt.ColorManagement)!=null?rt:null},ut=rt=>rt&&rt.isOrthographicCamera,mt=rt=>rt&&rt.hasOwnProperty("current"),Pt=typeof window!="undefined"&&((ot=window.document)!=null&&ot.createElement||((gt=window.navigator)==null?void 0:gt.product)==="ReactNative")?d.useLayoutEffect:d.useEffect;function Ot(rt){const xt=d.useRef(rt);return Pt(()=>void(xt.current=rt),[rt]),xt}function Jt({set:rt}){return Pt(()=>(rt(new Promise(()=>null)),()=>rt(!1)),[rt]),null}class zt extends d.Component{constructor(...xt){super(...xt),this.state={error:!1}}componentDidCatch(xt){this.props.set(xt)}render(){return this.state.error?null:this.props.children}}zt.getDerivedStateFromError=()=>({error:!0});const _n="__default",Kn=new Map,Cr=rt=>rt&&!!rt.memoized&&!!rt.changes;function zr(rt){var xt;const sn=typeof window!="undefined"?(xt=window.devicePixelRatio)!=null?xt:2:1;return Array.isArray(rt)?Math.min(Math.max(rt[0],sn),rt[1]):rt}const fr=rt=>{var xt;return(xt=rt.__r3f)==null?void 0:xt.root.getState()},Ir={obj:rt=>rt===Object(rt)&&!Ir.arr(rt)&&typeof rt!="function",fun:rt=>typeof rt=="function",str:rt=>typeof rt=="string",num:rt=>typeof rt=="number",boo:rt=>typeof rt=="boolean",und:rt=>rt===void 0,arr:rt=>Array.isArray(rt),equ(rt,xt,{arrays:sn="shallow",objects:zn="reference",strict:In=!0}={}){if(typeof rt!=typeof xt||!!rt!=!!xt)return!1;if(Ir.str(rt)||Ir.num(rt))return rt===xt;const ur=Ir.obj(rt);if(ur&&zn==="reference")return rt===xt;const Ue=Ir.arr(rt);if(Ue&&sn==="reference")return rt===xt;if((Ue||ur)&&rt===xt)return!0;let ze;for(ze in rt)if(!(ze in xt))return!1;if(ur&&sn==="shallow"&&zn==="shallow"){for(ze in In?xt:rt)if(!Ir.equ(rt[ze],xt[ze],{strict:In,objects:"reference"}))return!1}else for(ze in In?xt:rt)if(rt[ze]!==xt[ze])return!1;if(Ir.und(ze)){if(Ue&&rt.length===0&&xt.length===0||ur&&Object.keys(rt).length===0&&Object.keys(xt).length===0)return!0;if(rt!==xt)return!1}return!0}};function Vi(rt){const xt={nodes:{},materials:{}};return rt&&rt.traverse(sn=>{sn.name&&(xt.nodes[sn.name]=sn),sn.material&&!xt.materials[sn.material.name]&&(xt.materials[sn.material.name]=sn.material)}),xt}function vi(rt){rt.dispose&&rt.type!=="Scene"&&rt.dispose();for(const xt in rt)xt.dispose==null||xt.dispose(),delete rt[xt]}function hi(rt,xt){const sn=rt;return sn.__r3f=jn({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},xt),rt}function os(rt,xt){let sn=rt;if(xt.includes("-")){const zn=xt.split("-"),In=zn.pop();return sn=zn.reduce((ur,Ue)=>ur[Ue],rt),{target:sn,key:In}}else return{target:sn,key:xt}}const Vn=/-\d+$/;function $t(rt,xt,sn){if(Ir.str(sn)){if(Vn.test(sn)){const ur=sn.replace(Vn,""),{target:Ue,key:ze}=os(rt,ur);Array.isArray(Ue[ze])||(Ue[ze]=[])}const{target:zn,key:In}=os(rt,sn);xt.__r3f.previousAttach=zn[In],zn[In]=xt}else xt.__r3f.previousAttach=sn(rt,xt)}function Fn(rt,xt,sn){var zn,In;if(Ir.str(sn)){const{target:ur,key:Ue}=os(rt,sn),ze=xt.__r3f.previousAttach;ze===void 0?delete ur[Ue]:ur[Ue]=ze}else(zn=xt.__r3f)==null||zn.previousAttach==null||zn.previousAttach(rt,xt);(In=xt.__r3f)==null||delete In.previousAttach}function gr(rt,Le,dt={},it=!1){var tt=Le,{children:xt,key:sn,ref:zn}=tt,In=mn(tt,["children","key","ref"]);var _t=dt,{children:ur,key:Ue,ref:ze}=_t,Ie=mn(_t,["children","key","ref"]);var Me;const qe=(Me=rt==null?void 0:rt.__r3f)!=null?Me:{},at=Object.entries(In),lt=[];if(it){const Xt=Object.keys(Ie);for(let On=0;On<Xt.length;On++)In.hasOwnProperty(Xt[On])||at.unshift([Xt[On],_n+"remove"])}at.forEach(([Xt,On])=>{var Yn;if((Yn=rt.__r3f)!=null&&Yn.primitive&&Xt==="object"||Ir.equ(On,Ie[Xt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(Xt))return lt.push([Xt,On,!0,[]]);let vr=[];Xt.includes("-")&&(vr=Xt.split("-")),lt.push([Xt,On,!1,vr]);for(const Gr in In){const Yr=In[Gr];Gr.startsWith(`${Xt}-`)&&lt.push([Gr,Yr,!1,Gr.split("-")])}});const Rt=jn({},In);return qe.memoizedProps&&qe.memoizedProps.args&&(Rt.args=qe.memoizedProps.args),qe.memoizedProps&&qe.memoizedProps.attach&&(Rt.attach=qe.memoizedProps.attach),{memoized:Rt,changes:lt}}const Wr=typeof pe!="undefined"&&!1;function Li(rt,xt){var sn,zn,In;const ur=(sn=rt.__r3f)!=null?sn:{},Ue=ur.root,ze=(zn=Ue==null||Ue.getState==null?void 0:Ue.getState())!=null?zn:{},{memoized:Ie,changes:it}=Cr(xt)?xt:gr(rt,xt),Le=ur.eventCount;rt.__r3f&&(rt.__r3f.memoizedProps=Ie);for(let dt=0;dt<it.length;dt++){let[_t,Me,qe,at]=it[dt];if(St(rt)){const On="srgb",Yn="srgb-linear";_t==="encoding"?(_t="colorSpace",Me=Me===3001?On:Yn):_t==="outputEncoding"&&(_t="outputColorSpace",Me=Me===3001?On:Yn)}let lt=rt,Rt=lt[_t];if(at.length&&(Rt=at.reduce((Xt,On)=>Xt[On],rt),!(Rt&&Rt.set))){const[Xt,...On]=at.reverse();lt=On.reverse().reduce((Yn,vr)=>Yn[vr],rt),_t=Xt}if(Me===_n+"remove")if(lt.constructor){let Xt=Kn.get(lt.constructor);Xt||(Xt=new lt.constructor,Kn.set(lt.constructor,Xt)),Me=Xt[_t]}else Me=0;if(qe)Me?ur.handlers[_t]=Me:delete ur.handlers[_t],ur.eventCount=Object.keys(ur.handlers).length;else if(Rt&&Rt.set&&(Rt.copy||Rt instanceof S.Layers)){if(Array.isArray(Me))Rt.fromArray?Rt.fromArray(Me):Rt.set(...Me);else if(Rt.copy&&Me&&Me.constructor&&(Wr?Rt.constructor.name===Me.constructor.name:Rt.constructor===Me.constructor))Rt.copy(Me);else if(Me!==void 0){const Xt=Rt instanceof S.Color;!Xt&&Rt.setScalar?Rt.setScalar(Me):Rt instanceof S.Layers&&Me instanceof S.Layers?Rt.mask=Me.mask:Rt.set(Me),!vt()&&!ze.linear&&Xt&&Rt.convertSRGBToLinear()}}else if(lt[_t]=Me,lt[_t]instanceof S.Texture&&lt[_t].format===S.RGBAFormat&&lt[_t].type===S.UnsignedByteType){const Xt=lt[_t];St(Xt)&&St(ze.gl)?Xt.colorSpace=ze.gl.outputColorSpace:Xt.encoding=ze.gl.outputEncoding}Mn(rt)}if(ur.parent&&ze.internal&&rt.raycast&&Le!==ur.eventCount){const dt=ze.internal.interaction.indexOf(rt);dt>-1&&ze.internal.interaction.splice(dt,1),ur.eventCount&&ze.internal.interaction.push(rt)}return!(it.length===1&&it[0][0]==="onUpdate")&&it.length&&(In=rt.__r3f)!=null&&In.parent&&Tn(rt),rt}function Mn(rt){var xt,sn;const zn=(xt=rt.__r3f)==null||(sn=xt.root)==null||sn.getState==null?void 0:sn.getState();zn&&zn.internal.frames===0&&zn.invalidate()}function Tn(rt){rt.onUpdate==null||rt.onUpdate(rt)}function Ln(rt,xt){rt.manual||(ut(rt)?(rt.left=xt.width/-2,rt.right=xt.width/2,rt.top=xt.height/2,rt.bottom=xt.height/-2):rt.aspect=xt.width/xt.height,rt.updateProjectionMatrix(),rt.updateMatrixWorld())}function pr(rt){return(rt.eventObject||rt.object).uuid+"/"+rt.index+rt.instanceId}function ni(){var rt;const xt=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!xt)return m.DefaultEventPriority;switch((rt=xt.event)==null?void 0:rt.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return m.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return m.ContinuousEventPriority;default:return m.DefaultEventPriority}}function Ar(rt,xt,sn,zn){const In=sn.get(xt);In&&(sn.delete(xt),sn.size===0&&(rt.delete(zn),In.target.releasePointerCapture(zn)))}function ki(rt,xt){const{internal:sn}=rt.getState();sn.interaction=sn.interaction.filter(zn=>zn!==xt),sn.initialHits=sn.initialHits.filter(zn=>zn!==xt),sn.hovered.forEach((zn,In)=>{(zn.eventObject===xt||zn.object===xt)&&sn.hovered.delete(In)}),sn.capturedMap.forEach((zn,In)=>{Ar(sn.capturedMap,xt,zn,In)})}function jo(rt){function xt(Ie){const{internal:it}=rt.getState(),Le=Ie.offsetX-it.initialClick[0],tt=Ie.offsetY-it.initialClick[1];return Math.round(Math.sqrt(Le*Le+tt*tt))}function sn(Ie){return Ie.filter(it=>["Move","Over","Enter","Out","Leave"].some(Le=>{var tt;return(tt=it.__r3f)==null?void 0:tt.handlers["onPointer"+Le]}))}function zn(Ie,it){const Le=rt.getState(),tt=new Set,dt=[],_t=it?it(Le.internal.interaction):Le.internal.interaction;for(let lt=0;lt<_t.length;lt++){const Rt=fr(_t[lt]);Rt&&(Rt.raycaster.camera=void 0)}Le.previousRoot||Le.events.compute==null||Le.events.compute(Ie,Le);function Me(lt){const Rt=fr(lt);if(!Rt||!Rt.events.enabled||Rt.raycaster.camera===null)return[];if(Rt.raycaster.camera===void 0){var Xt;Rt.events.compute==null||Rt.events.compute(Ie,Rt,(Xt=Rt.previousRoot)==null?void 0:Xt.getState()),Rt.raycaster.camera===void 0&&(Rt.raycaster.camera=null)}return Rt.raycaster.camera?Rt.raycaster.intersectObject(lt,!0):[]}let qe=_t.flatMap(Me).sort((lt,Rt)=>{const Xt=fr(lt.object),On=fr(Rt.object);return!Xt||!On?lt.distance-Rt.distance:On.events.priority-Xt.events.priority||lt.distance-Rt.distance}).filter(lt=>{const Rt=pr(lt);return tt.has(Rt)?!1:(tt.add(Rt),!0)});Le.events.filter&&(qe=Le.events.filter(qe,Le));for(const lt of qe){let Rt=lt.object;for(;Rt;){var at;(at=Rt.__r3f)!=null&&at.eventCount&&dt.push($o(jn({},lt),{eventObject:Rt})),Rt=Rt.parent}}if("pointerId"in Ie&&Le.internal.capturedMap.has(Ie.pointerId))for(let lt of Le.internal.capturedMap.get(Ie.pointerId).values())tt.has(pr(lt.intersection))||dt.push(lt.intersection);return dt}function In(Ie,it,Le,tt){const dt=rt.getState();if(Ie.length){const _t={stopped:!1};for(const Me of Ie){const qe=fr(Me.object)||dt,{raycaster:at,pointer:lt,camera:Rt,internal:Xt}=qe,On=new S.Vector3(lt.x,lt.y,0).unproject(Rt),Yn=Kr=>{var Cn,Mr;return(Cn=(Mr=Xt.capturedMap.get(Kr))==null?void 0:Mr.has(Me.eventObject))!=null?Cn:!1},vr=Kr=>{const Cn={intersection:Me,target:it.target};Xt.capturedMap.has(Kr)?Xt.capturedMap.get(Kr).set(Me.eventObject,Cn):Xt.capturedMap.set(Kr,new Map([[Me.eventObject,Cn]])),it.target.setPointerCapture(Kr)},Gr=Kr=>{const Cn=Xt.capturedMap.get(Kr);Cn&&Ar(Xt.capturedMap,Me.eventObject,Cn,Kr)};let Yr={};for(let Kr in it){let Cn=it[Kr];typeof Cn!="function"&&(Yr[Kr]=Cn)}let oi=$o(jn(jn({},Me),Yr),{pointer:lt,intersections:Ie,stopped:_t.stopped,delta:Le,unprojectedPoint:On,ray:at.ray,camera:Rt,stopPropagation(){const Kr="pointerId"in it&&Xt.capturedMap.get(it.pointerId);if((!Kr||Kr.has(Me.eventObject))&&(oi.stopped=_t.stopped=!0,Xt.hovered.size&&Array.from(Xt.hovered.values()).find(Cn=>Cn.eventObject===Me.eventObject))){const Cn=Ie.slice(0,Ie.indexOf(Me));ur([...Cn,Me])}},target:{hasPointerCapture:Yn,setPointerCapture:vr,releasePointerCapture:Gr},currentTarget:{hasPointerCapture:Yn,setPointerCapture:vr,releasePointerCapture:Gr},nativeEvent:it});if(tt(oi),_t.stopped===!0)break}}return Ie}function ur(Ie){const{internal:it}=rt.getState();for(const Le of it.hovered.values())if(!Ie.length||!Ie.find(tt=>tt.object===Le.object&&tt.index===Le.index&&tt.instanceId===Le.instanceId)){const dt=Le.eventObject.__r3f,_t=dt==null?void 0:dt.handlers;if(it.hovered.delete(pr(Le)),dt!=null&&dt.eventCount){const Me=$o(jn({},Le),{intersections:Ie});_t.onPointerOut==null||_t.onPointerOut(Me),_t.onPointerLeave==null||_t.onPointerLeave(Me)}}}function Ue(Ie,it){for(let Le=0;Le<it.length;Le++){const tt=it[Le].__r3f;tt==null||tt.handlers.onPointerMissed==null||tt.handlers.onPointerMissed(Ie)}}function ze(Ie){switch(Ie){case"onPointerLeave":case"onPointerCancel":return()=>ur([]);case"onLostPointerCapture":return it=>{const{internal:Le}=rt.getState();"pointerId"in it&&Le.capturedMap.has(it.pointerId)&&requestAnimationFrame(()=>{Le.capturedMap.has(it.pointerId)&&(Le.capturedMap.delete(it.pointerId),ur([]))})}}return function(Le){const{onPointerMissed:tt,internal:dt}=rt.getState();dt.lastEvent.current=Le;const _t=Ie==="onPointerMove",Me=Ie==="onClick"||Ie==="onContextMenu"||Ie==="onDoubleClick",at=zn(Le,_t?sn:void 0),lt=Me?xt(Le):0;Ie==="onPointerDown"&&(dt.initialClick=[Le.offsetX,Le.offsetY],dt.initialHits=at.map(Xt=>Xt.eventObject)),Me&&!at.length&&lt<=2&&(Ue(Le,dt.interaction),tt&&tt(Le)),_t&&ur(at);function Rt(Xt){const On=Xt.eventObject,Yn=On.__r3f,vr=Yn==null?void 0:Yn.handlers;if(Yn!=null&&Yn.eventCount)if(_t){if(vr.onPointerOver||vr.onPointerEnter||vr.onPointerOut||vr.onPointerLeave){const Gr=pr(Xt),Yr=dt.hovered.get(Gr);Yr?Yr.stopped&&Xt.stopPropagation():(dt.hovered.set(Gr,Xt),vr.onPointerOver==null||vr.onPointerOver(Xt),vr.onPointerEnter==null||vr.onPointerEnter(Xt))}vr.onPointerMove==null||vr.onPointerMove(Xt)}else{const Gr=vr[Ie];Gr?(!Me||dt.initialHits.includes(On))&&(Ue(Le,dt.interaction.filter(Yr=>!dt.initialHits.includes(Yr))),Gr(Xt)):Me&&dt.initialHits.includes(On)&&Ue(Le,dt.interaction.filter(Yr=>!dt.initialHits.includes(Yr)))}}In(at,Le,lt,Rt)}}return{handlePointer:ze}}const ri=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],ro=rt=>!!(rt!=null&&rt.render),Zi=d.createContext(null),Ja=(rt,xt)=>{const sn=(0,s.Z)((ze,Ie)=>{const it=new S.Vector3,Le=new S.Vector3,tt=new S.Vector3;function dt(lt=Ie().camera,Rt=Le,Xt=Ie().size){const{width:On,height:Yn,top:vr,left:Gr}=Xt,Yr=On/Yn;Rt instanceof S.Vector3?tt.copy(Rt):tt.set(...Rt);const oi=lt.getWorldPosition(it).distanceTo(tt);if(ut(lt))return{width:On/lt.zoom,height:Yn/lt.zoom,top:vr,left:Gr,factor:1,distance:oi,aspect:Yr};{const Kr=lt.fov*Math.PI/180,Cn=2*Math.tan(Kr/2)*oi,Mr=Cn*(On/Yn);return{width:Mr,height:Cn,top:vr,left:Gr,factor:On/Mr,distance:oi,aspect:Yr}}}let _t;const Me=lt=>ze(Rt=>({performance:$o(jn({},Rt.performance),{current:lt})})),qe=new S.Vector2;return{set:ze,get:Ie,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(lt=1)=>rt(Ie(),lt),advance:(lt,Rt)=>xt(lt,Rt,Ie()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new S.Clock,pointer:qe,mouse:qe,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const lt=Ie();_t&&clearTimeout(_t),lt.performance.current!==lt.performance.min&&Me(lt.performance.min),_t=setTimeout(()=>Me(Ie().performance.max),lt.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:dt},setEvents:lt=>ze(Rt=>$o(jn({},Rt),{events:jn(jn({},Rt.events),lt)})),setSize:(lt,Rt,Xt,On,Yn)=>{const vr=Ie().camera,Gr={width:lt,height:Rt,top:On||0,left:Yn||0,updateStyle:Xt};ze(Yr=>({size:Gr,viewport:jn(jn({},Yr.viewport),dt(vr,Le,Gr))}))},setDpr:lt=>ze(Rt=>{const Xt=zr(lt);return{viewport:$o(jn({},Rt.viewport),{dpr:Xt,initialDpr:Rt.viewport.initialDpr||Xt})}}),setFrameloop:(lt="always")=>{const Rt=Ie().clock;Rt.stop(),Rt.elapsedTime=0,lt!=="never"&&(Rt.start(),Rt.elapsedTime=0),ze(()=>({frameloop:lt}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:d.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(lt,Rt,Xt)=>{const On=Ie().internal;return On.priority=On.priority+(Rt>0?1:0),On.subscribers.push({ref:lt,priority:Rt,store:Xt}),On.subscribers=On.subscribers.sort((Yn,vr)=>Yn.priority-vr.priority),()=>{const Yn=Ie().internal;Yn!=null&&Yn.subscribers&&(Yn.priority=Yn.priority-(Rt>0?1:0),Yn.subscribers=Yn.subscribers.filter(vr=>vr.ref!==lt))}}}}}),zn=sn.getState();let In=zn.size,ur=zn.viewport.dpr,Ue=zn.camera;return sn.subscribe(()=>{const{camera:ze,size:Ie,viewport:it,gl:Le,set:tt}=sn.getState();if(Ie!==In||it.dpr!==ur){var dt;In=Ie,ur=it.dpr,Ln(ze,Ie),Le.setPixelRatio(it.dpr);const _t=(dt=Ie.updateStyle)!=null?dt:typeof HTMLCanvasElement!="undefined"&&Le.domElement instanceof HTMLCanvasElement;Le.setSize(Ie.width,Ie.height,_t)}ze!==Ue&&(Ue=ze,tt(_t=>({viewport:jn(jn({},_t.viewport),_t.viewport.getCurrentViewport(ze))})))}),sn.subscribe(ze=>rt(ze)),sn};function As(rt,xt){const sn={callback:rt};return xt.add(sn),()=>void xt.delete(sn)}let js,Zs=new Set,ua=new Set,vs=new Set;const ss=rt=>As(rt,Zs),Xi=rt=>As(rt,ua),$s=rt=>As(rt,vs);function da(rt,xt){if(rt.size)for(const{callback:sn}of rt.values())sn(xt)}function Oi(rt,xt){switch(rt){case"before":return da(Zs,xt);case"after":return da(ua,xt);case"tail":return da(vs,xt)}}let ao,Hs;function _r(rt,xt,sn){let zn=xt.clock.getDelta();for(xt.frameloop==="never"&&typeof rt=="number"&&(zn=rt-xt.clock.elapsedTime,xt.clock.oldTime=xt.clock.elapsedTime,xt.clock.elapsedTime=rt),ao=xt.internal.subscribers,js=0;js<ao.length;js++)Hs=ao[js],Hs.ref.current(Hs.store.getState(),zn,sn);return!xt.internal.priority&&xt.gl.render&&xt.gl.render(xt.scene,xt.camera),xt.internal.frames=Math.max(0,xt.internal.frames-1),xt.frameloop==="always"?1:xt.internal.frames}function ji(rt){let xt=!1,sn,zn,In;function ur(Ie){zn=requestAnimationFrame(ur),xt=!0,sn=0,Oi("before",Ie);for(const Le of rt.values()){var it;In=Le.store.getState(),In.internal.active&&(In.frameloop==="always"||In.internal.frames>0)&&!((it=In.gl.xr)!=null&&it.isPresenting)&&(sn+=_r(Ie,In))}if(Oi("after",Ie),sn===0)return Oi("tail",Ie),xt=!1,cancelAnimationFrame(zn)}function Ue(Ie,it=1){var Le;if(!Ie)return rt.forEach(tt=>Ue(tt.store.getState()),it);(Le=Ie.gl.xr)!=null&&Le.isPresenting||!Ie.internal.active||Ie.frameloop==="never"||(Ie.internal.frames=Math.min(60,Ie.internal.frames+it),xt||(xt=!0,requestAnimationFrame(ur)))}function ze(Ie,it=!0,Le,tt){if(it&&Oi("before",Ie),Le)_r(Ie,Le,tt);else for(const dt of rt.values())_r(Ie,dt.store.getState());it&&Oi("after",Ie)}return{loop:ur,invalidate:Ue,advance:ze}}function Rl(rt){const xt=d.useRef(null);return Pt(()=>void(xt.current=rt.current.__r3f),[rt]),xt}function as(){const rt=d.useContext(Zi);if(!rt)throw new Error("R3F: Hooks can only be used within the Canvas component!");return rt}function Ws(rt=sn=>sn,xt){return as()(rt,xt)}function $i(rt,xt=0){const sn=as(),zn=sn.getState().internal.subscribe,In=Ot(rt);return Pt(()=>zn(In,xt,sn),[xt,zn,sn]),null}function ls(rt){return d.useMemo(()=>Vi(rt),[rt])}const Ca=new WeakMap;function lo(rt,xt){return function(sn,...zn){let In=Ca.get(sn);return In||(In=new sn,Ca.set(sn,In)),rt&&rt(In),Promise.all(zn.map(ur=>new Promise((Ue,ze)=>In.load(ur,Ie=>{Ie.scene&&Object.assign(Ie,Vi(Ie.scene)),Ue(Ie)},xt,Ie=>ze(new Error(`Could not load ${ur}: ${Ie==null?void 0:Ie.message}`)))))).finally(()=>In.dispose==null?void 0:In.dispose())}}function Fl(rt,xt,sn,zn){const In=Array.isArray(xt)?xt:[xt],ur=(0,ce.Rq)(lo(sn,zn),[rt,...In],{equal:Ir.equ});return Array.isArray(xt)?ur:ur[0]}Fl.preload=function(rt,xt,sn){const zn=Array.isArray(xt)?xt:[xt];return(0,ce.MA)(lo(sn),[rt,...zn])},Fl.clear=function(rt,xt){const sn=Array.isArray(xt)?xt:[xt];return(0,ce.ZH)([rt,...sn])};const Do=new Map,{invalidate:_l,advance:ea}=ji(Do),{reconciler:ta,applyProps:Ho}=He(Do,ni),co={objects:"shallow",strict:!1},_s=(rt,xt)=>{const sn=typeof rt=="function"?rt(xt):rt;return ro(sn)?sn:new S.WebGLRenderer(jn({powerPreference:"high-performance",canvas:xt,antialias:!0,alpha:!0},rt))};function Co(rt,xt){if(xt)return xt;if(typeof HTMLCanvasElement!="undefined"&&rt instanceof HTMLCanvasElement&&rt.parentElement){const{width:sn,height:zn,top:In,left:ur}=rt.parentElement.getBoundingClientRect();return{width:sn,height:zn,top:In,left:ur}}else if(typeof OffscreenCanvas!="undefined"&&rt instanceof OffscreenCanvas)return{width:rt.width,height:rt.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function qa(rt){const xt=Do.get(rt),sn=xt==null?void 0:xt.fiber,zn=xt==null?void 0:xt.store;xt&&J.warn("R3F.createRoot should only be called once!");const In=typeof reportError=="function"?reportError:J.error,ur=zn||Ja(_l,ea),Ue=sn||ta.createContainer(ur,m.ConcurrentRoot,null,!1,null,"",In,null);xt||Do.set(rt,{fiber:Ue,store:ur});let ze,Ie=!1,it;return{configure(Le={}){let{gl:tt,size:dt,scene:_t,events:Me,onCreated:qe,shadows:at=!1,linear:lt=!1,flat:Rt=!1,legacy:Xt=!1,orthographic:On=!1,frameloop:Yn="always",dpr:vr=[1,2],performance:Gr,raycaster:Yr,camera:oi,onPointerMissed:Kr}=Le,Cn=ur.getState(),Mr=Cn.gl;Cn.gl||Cn.set({gl:Mr=_s(tt,rt)});let eo=Cn.raycaster;eo||Cn.set({raycaster:eo=new S.Raycaster});const io=Yr||{},{params:Po}=io,es=mn(io,["params"]);if(Ir.equ(es,eo,co)||Ho(eo,jn({},es)),Ir.equ(Po,eo.params,co)||Ho(eo,{params:jn(jn({},eo.params),Po)}),!Cn.camera||Cn.camera===it&&!Ir.equ(it,oi,co)){it=oi;const Bs=oi instanceof S.Camera,So=Bs?oi:On?new S.OrthographicCamera(0,0,0,0,.1,1e3):new S.PerspectiveCamera(75,0,.1,1e3);Bs||(So.position.z=5,oi&&Ho(So,oi),!Cn.camera&&!(oi!=null&&oi.rotation)&&So.lookAt(0,0,0)),Cn.set({camera:So})}if(!Cn.scene){let Bs;_t instanceof S.Scene?Bs=_t:(Bs=new S.Scene,_t&&Ho(Bs,_t)),Cn.set({scene:hi(Bs)})}if(!Cn.xr){var wa;const Bs=(wo,ps)=>{const Ta=ur.getState();Ta.frameloop!=="never"&&ea(wo,!0,Ta,ps)},So=()=>{const wo=ur.getState();wo.gl.xr.enabled=wo.gl.xr.isPresenting,wo.gl.xr.setAnimationLoop(wo.gl.xr.isPresenting?Bs:null),wo.gl.xr.isPresenting||_l(wo)},fa={connect(){const wo=ur.getState().gl;wo.xr.addEventListener("sessionstart",So),wo.xr.addEventListener("sessionend",So)},disconnect(){const wo=ur.getState().gl;wo.xr.removeEventListener("sessionstart",So),wo.xr.removeEventListener("sessionend",So)}};typeof((wa=Mr.xr)==null?void 0:wa.addEventListener)=="function"&&fa.connect(),Cn.set({xr:fa})}if(Mr.shadowMap){const Bs=Mr.shadowMap.enabled,So=Mr.shadowMap.type;if(Mr.shadowMap.enabled=!!at,Ir.boo(at))Mr.shadowMap.type=S.PCFSoftShadowMap;else if(Ir.str(at)){var ha;const fa={basic:S.BasicShadowMap,percentage:S.PCFShadowMap,soft:S.PCFSoftShadowMap,variance:S.VSMShadowMap};Mr.shadowMap.type=(ha=fa[at])!=null?ha:S.PCFSoftShadowMap}else Ir.obj(at)&&Object.assign(Mr.shadowMap,at);(Bs!==Mr.shadowMap.enabled||So!==Mr.shadowMap.type)&&(Mr.shadowMap.needsUpdate=!0)}const Di=vt();Di&&("enabled"in Di?Di.enabled=!Xt:"legacyMode"in Di&&(Di.legacyMode=Xt)),Ho(Mr,{outputEncoding:lt?3e3:3001,toneMapping:Rt?S.NoToneMapping:S.ACESFilmicToneMapping}),Cn.legacy!==Xt&&Cn.set(()=>({legacy:Xt})),Cn.linear!==lt&&Cn.set(()=>({linear:lt})),Cn.flat!==Rt&&Cn.set(()=>({flat:Rt})),tt&&!Ir.fun(tt)&&!ro(tt)&&!Ir.equ(tt,Mr,co)&&Ho(Mr,tt),Me&&!Cn.events.handlers&&Cn.set({events:Me(ur)});const ci=Co(rt,dt);return Ir.equ(ci,Cn.size,co)||Cn.setSize(ci.width,ci.height,ci.updateStyle,ci.top,ci.left),vr&&Cn.viewport.dpr!==zr(vr)&&Cn.setDpr(vr),Cn.frameloop!==Yn&&Cn.setFrameloop(Yn),Cn.onPointerMissed||Cn.set({onPointerMissed:Kr}),Gr&&!Ir.equ(Gr,Cn.performance,co)&&Cn.set(Bs=>({performance:jn(jn({},Bs.performance),Gr)})),ze=qe,Ie=!0,this},render(Le){return Ie||this.configure(),ta.updateContainer(d.createElement(Sa,{store:ur,children:Le,onCreated:ze,rootElement:rt}),Ue,null,()=>{}),ur},unmount(){El(rt)}}}function Ol(rt,xt,sn){J.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const zn=qa(xt);return zn.configure(sn),zn.render(rt)}function Sa({store:rt,children:xt,onCreated:sn,rootElement:zn}){return Pt(()=>{const In=rt.getState();In.set(ur=>({internal:$o(jn({},ur.internal),{active:!0})})),sn&&sn(In),rt.getState().events.connected||In.events.connect==null||In.events.connect(zn)},[]),d.createElement(Zi.Provider,{value:rt},xt)}function El(rt,xt){const sn=Do.get(rt),zn=sn==null?void 0:sn.fiber;if(zn){const In=sn==null?void 0:sn.store.getState();In&&(In.internal.active=!1),ta.updateContainer(null,zn,null,()=>{In&&setTimeout(()=>{try{var ur,Ue,ze,Ie;In.events.disconnect==null||In.events.disconnect(),(ur=In.gl)==null||(Ue=ur.renderLists)==null||Ue.dispose==null||Ue.dispose(),(ze=In.gl)==null||ze.forceContextLoss==null||ze.forceContextLoss(),(Ie=In.gl)!=null&&Ie.xr&&In.xr.disconnect(),vi(In),Do.delete(rt),xt&&xt(rt)}catch(it){}},500)})}}function cs(rt,xt,sn){return d.createElement(qc,{key:xt.uuid,children:rt,container:xt,state:sn})}function qc({state:rt={},children:xt,container:sn}){const tt=rt,{events:zn,size:In}=tt,ur=mn(tt,["events","size"]),Ue=as(),[ze]=d.useState(()=>new S.Raycaster),[Ie]=d.useState(()=>new S.Vector2),it=d.useCallback((dt,_t)=>{const Me=jn({},dt);Object.keys(dt).forEach(at=>{(ri.includes(at)||dt[at]!==_t[at]&&_t[at])&&delete Me[at]});let qe;if(_t&&In){const at=_t.camera;qe=dt.viewport.getCurrentViewport(at,new S.Vector3,In),at!==dt.camera&&Ln(at,In)}return jn($o(jn({},Me),{scene:sn,raycaster:ze,pointer:Ie,mouse:Ie,previousRoot:Ue,events:jn(jn(jn({},dt.events),_t==null?void 0:_t.events),zn),size:jn(jn({},dt.size),In),viewport:jn(jn({},dt.viewport),qe)}),ur)},[rt]),[Le]=d.useState(()=>{const dt=Ue.getState();return(0,s.Z)((Me,qe)=>$o(jn($o(jn({},dt),{scene:sn,raycaster:ze,pointer:Ie,mouse:Ie,previousRoot:Ue,events:jn(jn({},dt.events),zn),size:jn(jn({},dt.size),In)}),ur),{set:Me,get:qe,setEvents:at=>Me(lt=>$o(jn({},lt),{events:jn(jn({},lt.events),at)}))}))});return d.useEffect(()=>{const dt=Ue.subscribe(_t=>Le.setState(Me=>it(_t,Me)));return()=>{dt(),Le.destroy()}},[]),d.useEffect(()=>{Le.setState(dt=>it(Ue.getState(),dt))},[it]),d.createElement(d.Fragment,null,ta.createPortal(d.createElement(Zi.Provider,{value:Le},xt),Le,null))}ta.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:d.version});const Zc=d.unstable_act},45953:function(u,n,y){"use strict";y.r(n),y.d(n,{Canvas:function(){return Li},ReactThreeFiber:function(){return S.t},_roots:function(){return S.w},act:function(){return S.v},addAfterEffect:function(){return S.o},addEffect:function(){return S.n},addTail:function(){return S.p},advance:function(){return S.m},applyProps:function(){return S.j},context:function(){return S.f},createEvents:function(){return S.c},createPortal:function(){return S.g},createRoot:function(){return S.b},dispose:function(){return S.k},events:function(){return gr},extend:function(){return S.e},flushGlobalEffects:function(){return S.q},getRootState:function(){return S.s},invalidate:function(){return S.l},reconciler:function(){return S.h},render:function(){return S.r},unmountComponentAtNode:function(){return S.d},useFrame:function(){return S.A},useGraph:function(){return S.C},useInstanceHandle:function(){return S.x},useLoader:function(){return S.D},useStore:function(){return S.y},useThree:function(){return S.z}});var S=y(66319),d=y(87462),m=y(67294),s=y(99477),E=y(20296),H=y.n(E);function te(Mn){let{debounce:Tn,scroll:Ln,polyfill:pr,offsetSize:ni}=Mn===void 0?{debounce:0,scroll:!1,offsetSize:!1}:Mn;const Ar=pr||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!Ar)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ki,jo]=(0,m.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),ri=(0,m.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ki}),ro=Tn?typeof Tn=="number"?Tn:Tn.scroll:null,Zi=Tn?typeof Tn=="number"?Tn:Tn.resize:null,Ja=(0,m.useRef)(!1);(0,m.useEffect)(()=>(Ja.current=!0,()=>void(Ja.current=!1)));const[As,js,Zs]=(0,m.useMemo)(()=>{const Xi=()=>{if(!ri.current.element)return;const{left:$s,top:da,width:Oi,height:ao,bottom:Hs,right:_r,x:ji,y:Rl}=ri.current.element.getBoundingClientRect(),as={left:$s,top:da,width:Oi,height:ao,bottom:Hs,right:_r,x:ji,y:Rl};ri.current.element instanceof HTMLElement&&ni&&(as.height=ri.current.element.offsetHeight,as.width=ri.current.element.offsetWidth),Object.freeze(as),Ja.current&&!bt(ri.current.lastBounds,as)&&jo(ri.current.lastBounds=as)};return[Xi,Zi?H()(Xi,Zi):Xi,ro?H()(Xi,ro):Xi]},[jo,ni,ro,Zi]);function ua(){ri.current.scrollContainers&&(ri.current.scrollContainers.forEach(Xi=>Xi.removeEventListener("scroll",Zs,!0)),ri.current.scrollContainers=null),ri.current.resizeObserver&&(ri.current.resizeObserver.disconnect(),ri.current.resizeObserver=null)}function vs(){ri.current.element&&(ri.current.resizeObserver=new Ar(Zs),ri.current.resizeObserver.observe(ri.current.element),Ln&&ri.current.scrollContainers&&ri.current.scrollContainers.forEach(Xi=>Xi.addEventListener("scroll",Zs,{capture:!0,passive:!0})))}const ss=Xi=>{!Xi||Xi===ri.current.element||(ua(),ri.current.element=Xi,ri.current.scrollContainers=pe(Xi),vs())};return J(Zs,!!Ln),ce(js),(0,m.useEffect)(()=>{ua(),vs()},[Ln,Zs,js]),(0,m.useEffect)(()=>ua,[]),[ss,ki,As]}function ce(Mn){(0,m.useEffect)(()=>{const Tn=Mn;return window.addEventListener("resize",Tn),()=>void window.removeEventListener("resize",Tn)},[Mn])}function J(Mn,Tn){(0,m.useEffect)(()=>{if(Tn){const Ln=Mn;return window.addEventListener("scroll",Ln,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",Ln,!0)}},[Mn,Tn])}function pe(Mn){const Tn=[];if(!Mn||Mn===document.body)return Tn;const{overflow:Ln,overflowX:pr,overflowY:ni}=window.getComputedStyle(Mn);return[Ln,pr,ni].some(Ar=>Ar==="auto"||Ar==="scroll")&&Tn.push(Mn),[...Tn,...pe(Mn.parentElement)]}const de=["x","y","top","bottom","left","right","width","height"],bt=(Mn,Tn)=>de.every(Ln=>Mn[Ln]===Tn[Ln]);var nt=Object.defineProperty,He=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,ut=(Mn,Tn,Ln)=>Tn in Mn?nt(Mn,Tn,{enumerable:!0,configurable:!0,writable:!0,value:Ln}):Mn[Tn]=Ln,mt=(Mn,Tn)=>{for(var Ln in Tn||(Tn={}))St.call(Tn,Ln)&&ut(Mn,Ln,Tn[Ln]);if(gt)for(var Ln of gt(Tn))vt.call(Tn,Ln)&&ut(Mn,Ln,Tn[Ln]);return Mn},Pt=(Mn,Tn)=>He(Mn,ot(Tn));function Ot(Mn,Tn,Ln){if(!Mn)return;if(Ln(Mn)===!0)return Mn;let pr=Tn?Mn.return:Mn.child;for(;pr;){const ni=Ot(pr,Tn,Ln);if(ni)return ni;pr=Tn?null:pr.sibling}}function Jt(Mn){try{return Object.defineProperties(Mn,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(Tn){return Mn}}const zt=Jt(m.createContext(null));class _n extends m.Component{render(){return m.createElement(zt.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Kn,ReactCurrentDispatcher:Cr}=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function zr(){const Mn=m.useContext(zt);if(Mn===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const Tn=m.useId();return m.useMemo(()=>{for(const pr of[Kn==null?void 0:Kn.current,Mn,Mn==null?void 0:Mn.alternate]){if(!pr)continue;const ni=Ot(pr,!1,Ar=>{let ki=Ar.memoizedState;for(;ki;){if(ki.memoizedState===Tn)return!0;ki=ki.next}});if(ni)return ni}},[Mn,Tn])}function fr(){const Mn=zr(),Tn=React.useMemo(()=>Ot(Mn,!0,Ln=>{var pr;return((pr=Ln.stateNode)==null?void 0:pr.containerInfo)!=null}),[Mn]);return Tn==null?void 0:Tn.stateNode.containerInfo}function Ir(Mn){const Tn=zr(),Ln=React.useRef();return React.useLayoutEffect(()=>{var pr;Ln.current=(pr=Ot(Tn,!1,ni=>typeof ni.type=="string"&&(Mn===void 0||ni.type===Mn)))==null?void 0:pr.stateNode},[Tn]),Ln}function Vi(Mn){const Tn=zr(),Ln=React.useRef();return React.useLayoutEffect(()=>{var pr;Ln.current=(pr=Ot(Tn,!0,ni=>typeof ni.type=="string"&&(Mn===void 0||ni.type===Mn)))==null?void 0:pr.stateNode},[Tn]),Ln}function vi(){var Mn,Tn;const Ln=zr(),[pr]=m.useState(()=>new Map);pr.clear();let ni=Ln;for(;ni;){const Ar=(Mn=ni.type)==null?void 0:Mn._context;Ar&&Ar!==zt&&!pr.has(Ar)&&pr.set(Ar,(Tn=Cr==null?void 0:Cr.current)==null?void 0:Tn.readContext(Jt(Ar))),ni=ni.return}return pr}function hi(){const Mn=vi();return m.useMemo(()=>Array.from(Mn.keys()).reduce((Tn,Ln)=>pr=>m.createElement(Tn,null,m.createElement(Ln.Provider,Pt(mt({},pr),{value:Mn.get(Ln)}))),Tn=>m.createElement(_n,mt({},Tn))),[Mn])}var os=y(32576),Vn=y(76525),$t=y(63840);const Fn={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function gr(Mn){const{handlePointer:Tn}=(0,S.c)(Mn);return{priority:1,enabled:!0,compute(Ln,pr,ni){pr.pointer.set(Ln.offsetX/pr.size.width*2-1,-(Ln.offsetY/pr.size.height)*2+1),pr.raycaster.setFromCamera(pr.pointer,pr.camera)},connected:void 0,handlers:Object.keys(Fn).reduce((Ln,pr)=>$o(jn({},Ln),{[pr]:Tn(pr)}),{}),update:()=>{var Ln;const{events:pr,internal:ni}=Mn.getState();(Ln=ni.lastEvent)!=null&&Ln.current&&pr.handlers&&pr.handlers.onPointerMove(ni.lastEvent.current)},connect:Ln=>{var pr;const{set:ni,events:Ar}=Mn.getState();Ar.disconnect==null||Ar.disconnect(),ni(ki=>({events:$o(jn({},ki.events),{connected:Ln})})),Object.entries((pr=Ar.handlers)!=null?pr:[]).forEach(([ki,jo])=>{const[ri,ro]=Fn[ki];Ln.addEventListener(ri,jo,{passive:ro})})},disconnect:()=>{const{set:Ln,events:pr}=Mn.getState();if(pr.connected){var ni;Object.entries((ni=pr.handlers)!=null?ni:[]).forEach(([Ar,ki])=>{if(pr&&pr.connected instanceof HTMLElement){const[jo]=Fn[Ar];pr.connected.removeEventListener(jo,ki)}}),Ln(Ar=>({events:$o(jn({},Ar.events),{connected:void 0})}))}}}}const Wr=m.forwardRef(function(_r,Hs){var ji=_r,{children:Tn,fallback:Ln,resize:pr,style:ni,gl:Ar,events:ki=gr,eventSource:jo,eventPrefix:ri,shadows:ro,linear:Zi,flat:Ja,legacy:As,orthographic:js,frameloop:Zs,dpr:ua,performance:vs,raycaster:ss,camera:Xi,scene:$s,onPointerMissed:da,onCreated:Oi}=ji,ao=mn(ji,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"]);m.useMemo(()=>(0,S.e)(s),[]);const Rl=hi(),[as,Ws]=te(jn({scroll:!0,debounce:{scroll:50,resize:0}},pr)),$i=m.useRef(null),ls=m.useRef(null);m.useImperativeHandle(Hs,()=>$i.current);const Ca=(0,S.u)(da),[lo,Fl]=m.useState(!1),[Do,_l]=m.useState(!1);if(lo)throw lo;if(Do)throw Do;const ea=m.useRef(null);(0,S.a)(()=>{const Ho=$i.current;Ws.width>0&&Ws.height>0&&Ho&&(ea.current||(ea.current=(0,S.b)(Ho)),ea.current.configure({gl:Ar,events:ki,shadows:ro,linear:Zi,flat:Ja,legacy:As,orthographic:js,frameloop:Zs,dpr:ua,performance:vs,raycaster:ss,camera:Xi,scene:$s,size:Ws,onPointerMissed:(...co)=>Ca.current==null?void 0:Ca.current(...co),onCreated:co=>{co.events.connect==null||co.events.connect(jo?(0,S.i)(jo)?jo.current:jo:ls.current),ri&&co.setEvents({compute:(_s,Co)=>{const qa=_s[ri+"X"],Ol=_s[ri+"Y"];Co.pointer.set(qa/Co.size.width*2-1,-(Ol/Co.size.height)*2+1),Co.raycaster.setFromCamera(Co.pointer,Co.camera)}}),Oi==null||Oi(co)}}),ea.current.render(m.createElement(Rl,null,m.createElement(S.E,{set:_l},m.createElement(m.Suspense,{fallback:m.createElement(S.B,{set:Fl})},Tn)))))}),m.useEffect(()=>{const Ho=$i.current;if(Ho)return()=>(0,S.d)(Ho)},[]);const ta=jo?"none":"auto";return m.createElement("div",(0,d.Z)({ref:ls,style:jn({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ta},ni)},ao),m.createElement("div",{ref:as,style:{width:"100%",height:"100%"}},m.createElement("canvas",{ref:$i,style:{display:"block"}},Ln)))}),Li=m.forwardRef(function(Tn,Ln){return m.createElement(_n,null,m.createElement(Wr,(0,d.Z)({},Tn,{ref:Ln})))})},88208:function(u,n,y){"use strict";var S=y(87537),d=y.n(S),m=y(23645),s=y.n(m),E=s()(d());E.push([u.id,`/* stylelint-disable property-no-vendor-prefix */
.liner--GyAEo {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
}
`,"",{version:3,sources:["webpack://./src/pages/three/index.module.less"],names:[],mappings:"AAAA,gDAAgD;AAChD;EACE,oDAAoD;EACpD,6BAA6B;EAC7B,oCAAoC;EACpC,eAAe;EACf,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,wCAAgC;UAAhC,gCAAgC;AAClC",sourcesContent:[`/* stylelint-disable property-no-vendor-prefix */
.liner {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
`],sourceRoot:""}]),E.locals={liner:"liner--GyAEo"},n.Z=E},20296:function(u){function n(y,S,d){var m,s,E,H,te;S==null&&(S=100);function ce(){var pe=Date.now()-H;pe<S&&pe>=0?m=setTimeout(ce,S-pe):(m=null,d||(te=y.apply(E,s),E=s=null))}var J=function(){E=this,s=arguments,H=Date.now();var pe=d&&!m;return m||(m=setTimeout(ce,S)),pe&&(te=y.apply(E,s),E=s=null),te};return J.clear=function(){m&&(clearTimeout(m),m=null)},J.flush=function(){m&&(te=y.apply(E,s),E=s=null,clearTimeout(m),m=null)},J}n.debounce=n,u.exports=n},75889:function(u,n,y){"use strict";var S=y(64836),d=y(18698);Object.defineProperty(n,"__esModule",{value:!0}),n.default=bt;var m=S(y(10434)),s=S(y(27424)),E=de(y(67294)),H=y(45953),te=y(51171),ce=de(y(68273)),J=S(y(90209));function pe(He){if(typeof WeakMap!="function")return null;var ot=new WeakMap,gt=new WeakMap;return(pe=function(vt){return vt?gt:ot})(He)}function de(He,ot){if(!ot&&He&&He.__esModule)return He;if(He===null||d(He)!=="object"&&typeof He!="function")return{default:He};var gt=pe(ot);if(gt&&gt.has(He))return gt.get(He);var St={},vt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ut in He)if(ut!=="default"&&Object.prototype.hasOwnProperty.call(He,ut)){var mt=vt?Object.getOwnPropertyDescriptor(He,ut):null;mt&&(mt.get||mt.set)?Object.defineProperty(St,ut,mt):St[ut]=He[ut]}return St.default=He,gt&&gt.set(He,St),St}function bt(){return E.default.createElement("div",{style:{width:"100%",height:"calc(100vh - 232px)",background:"#12071f"}},E.default.createElement("h2",{className:J.default.liner},"React Three Fiber"),E.default.createElement(H.Canvas,{camera:{position:[0,0,1]}},E.default.createElement(nt,null)))}function nt(He){var ot=(0,E.useRef)(),gt=(0,E.useState)(function(){return ce.inSphere(new Float32Array(5e3),{radius:1.5})}),St=(0,s.default)(gt,1),vt=St[0];return(0,H.useFrame)(function(ut,mt){ot.current.rotation.x-=mt/10,ot.current.rotation.y-=mt/15}),E.default.createElement("group",null,E.default.createElement(te.Points,(0,m.default)({ref:ot,positions:vt,stride:3,frustumCulled:!1},He),E.default.createElement(te.PointMaterial,{transparent:!0,color:"#ffa0e0",size:.005,sizeAttenuation:!0,depthWrite:!1})))}},7378:function(u){var n=NaN,y="[object Symbol]",S=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,s=/^0o[0-7]+$/i,E=parseInt,H=Object.prototype,te=H.toString;function ce(He,ot,gt){return He===He&&(gt!==void 0&&(He=He<=gt?He:gt),ot!==void 0&&(He=He>=ot?He:ot)),He}function J(He){var ot=typeof He;return!!He&&(ot=="object"||ot=="function")}function pe(He){return!!He&&typeof He=="object"}function de(He){return typeof He=="symbol"||pe(He)&&te.call(He)==y}function bt(He){if(typeof He=="number")return He;if(de(He))return n;if(J(He)){var ot=typeof He.valueOf=="function"?He.valueOf():He;He=J(ot)?ot+"":ot}if(typeof He!="string")return He===0?He:+He;He=He.replace(S,"");var gt=m.test(He);return gt||s.test(He)?E(He.slice(2),gt?2:8):d.test(He)?n:+He}function nt(He,ot,gt){return gt===void 0&&(gt=ot,ot=void 0),gt!==void 0&&(gt=bt(gt),gt=gt===gt?gt:0),ot!==void 0&&(ot=bt(ot),ot=ot===ot?ot:0),ce(bt(He),ot,gt)}u.exports=nt},76427:function(u,n,y){var S=200,d="__lodash_hash_undefined__",m=1/0,s=9007199254740991,E="[object Arguments]",H="[object Function]",te="[object GeneratorFunction]",ce="[object Symbol]",J=/[\\^$.*+?()[\]{}|]/g,pe=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,bt=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,nt=typeof self=="object"&&self&&self.Object===Object&&self,He=bt||nt||Function("return this")();function ot(Me,qe,at){switch(at.length){case 0:return Me.call(qe);case 1:return Me.call(qe,at[0]);case 2:return Me.call(qe,at[0],at[1]);case 3:return Me.call(qe,at[0],at[1],at[2])}return Me.apply(qe,at)}function gt(Me,qe){var at=Me?Me.length:0;return!!at&&Pt(Me,qe,0)>-1}function St(Me,qe,at){for(var lt=-1,Rt=Me?Me.length:0;++lt<Rt;)if(at(qe,Me[lt]))return!0;return!1}function vt(Me,qe){for(var at=-1,lt=Me?Me.length:0,Rt=Array(lt);++at<lt;)Rt[at]=qe(Me[at],at,Me);return Rt}function ut(Me,qe){for(var at=-1,lt=qe.length,Rt=Me.length;++at<lt;)Me[Rt+at]=qe[at];return Me}function mt(Me,qe,at,lt){for(var Rt=Me.length,Xt=at+(lt?1:-1);lt?Xt--:++Xt<Rt;)if(qe(Me[Xt],Xt,Me))return Xt;return-1}function Pt(Me,qe,at){if(qe!==qe)return mt(Me,Ot,at);for(var lt=at-1,Rt=Me.length;++lt<Rt;)if(Me[lt]===qe)return lt;return-1}function Ot(Me){return Me!==Me}function Jt(Me,qe){for(var at=-1,lt=Array(Me);++at<Me;)lt[at]=qe(at);return lt}function zt(Me){return function(qe){return Me(qe)}}function _n(Me,qe){return Me.has(qe)}function Kn(Me,qe){return Me==null?void 0:Me[qe]}function Cr(Me){var qe=!1;if(Me!=null&&typeof Me.toString!="function")try{qe=!!(Me+"")}catch(at){}return qe}function zr(Me,qe){return function(at){return Me(qe(at))}}var fr=Array.prototype,Ir=Function.prototype,Vi=Object.prototype,vi=He["__core-js_shared__"],hi=function(){var Me=/[^.]+$/.exec(vi&&vi.keys&&vi.keys.IE_PROTO||"");return Me?"Symbol(src)_1."+Me:""}(),os=Ir.toString,Vn=Vi.hasOwnProperty,$t=Vi.toString,Fn=RegExp("^"+os.call(Vn).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=He.Symbol,Wr=zr(Object.getPrototypeOf,Object),Li=Vi.propertyIsEnumerable,Mn=fr.splice,Tn=gr?gr.isConcatSpreadable:void 0,Ln=Object.getOwnPropertySymbols,pr=Math.max,ni=co(He,"Map"),Ar=co(Object,"create");function ki(Me){var qe=-1,at=Me?Me.length:0;for(this.clear();++qe<at;){var lt=Me[qe];this.set(lt[0],lt[1])}}function jo(){this.__data__=Ar?Ar(null):{}}function ri(Me){return this.has(Me)&&delete this.__data__[Me]}function ro(Me){var qe=this.__data__;if(Ar){var at=qe[Me];return at===d?void 0:at}return Vn.call(qe,Me)?qe[Me]:void 0}function Zi(Me){var qe=this.__data__;return Ar?qe[Me]!==void 0:Vn.call(qe,Me)}function Ja(Me,qe){var at=this.__data__;return at[Me]=Ar&&qe===void 0?d:qe,this}ki.prototype.clear=jo,ki.prototype.delete=ri,ki.prototype.get=ro,ki.prototype.has=Zi,ki.prototype.set=Ja;function As(Me){var qe=-1,at=Me?Me.length:0;for(this.clear();++qe<at;){var lt=Me[qe];this.set(lt[0],lt[1])}}function js(){this.__data__=[]}function Zs(Me){var qe=this.__data__,at=Ws(qe,Me);if(at<0)return!1;var lt=qe.length-1;return at==lt?qe.pop():Mn.call(qe,at,1),!0}function ua(Me){var qe=this.__data__,at=Ws(qe,Me);return at<0?void 0:qe[at][1]}function vs(Me){return Ws(this.__data__,Me)>-1}function ss(Me,qe){var at=this.__data__,lt=Ws(at,Me);return lt<0?at.push([Me,qe]):at[lt][1]=qe,this}As.prototype.clear=js,As.prototype.delete=Zs,As.prototype.get=ua,As.prototype.has=vs,As.prototype.set=ss;function Xi(Me){var qe=-1,at=Me?Me.length:0;for(this.clear();++qe<at;){var lt=Me[qe];this.set(lt[0],lt[1])}}function $s(){this.__data__={hash:new ki,map:new(ni||As),string:new ki}}function da(Me){return Ho(this,Me).delete(Me)}function Oi(Me){return Ho(this,Me).get(Me)}function ao(Me){return Ho(this,Me).has(Me)}function Hs(Me,qe){return Ho(this,Me).set(Me,qe),this}Xi.prototype.clear=$s,Xi.prototype.delete=da,Xi.prototype.get=Oi,Xi.prototype.has=ao,Xi.prototype.set=Hs;function _r(Me){var qe=-1,at=Me?Me.length:0;for(this.__data__=new Xi;++qe<at;)this.add(Me[qe])}function ji(Me){return this.__data__.set(Me,d),this}function Rl(Me){return this.__data__.has(Me)}_r.prototype.add=_r.prototype.push=ji,_r.prototype.has=Rl;function as(Me,qe){var at=zn(Me)||sn(Me)?Jt(Me.length,String):[],lt=at.length,Rt=!!lt;for(var Xt in Me)(qe||Vn.call(Me,Xt))&&!(Rt&&(Xt=="length"||Ol(Xt,lt)))&&at.push(Xt);return at}function Ws(Me,qe){for(var at=Me.length;at--;)if(xt(Me[at][0],qe))return at;return-1}function $i(Me,qe,at,lt){var Rt=-1,Xt=gt,On=!0,Yn=Me.length,vr=[],Gr=qe.length;if(!Yn)return vr;at&&(qe=vt(qe,zt(at))),lt?(Xt=St,On=!1):qe.length>=S&&(Xt=_n,On=!1,qe=new _r(qe));e:for(;++Rt<Yn;){var Yr=Me[Rt],oi=at?at(Yr):Yr;if(Yr=lt||Yr!==0?Yr:0,On&&oi===oi){for(var Kr=Gr;Kr--;)if(qe[Kr]===oi)continue e;vr.push(Yr)}else Xt(qe,oi,lt)||vr.push(Yr)}return vr}function ls(Me,qe,at,lt,Rt){var Xt=-1,On=Me.length;for(at||(at=qa),Rt||(Rt=[]);++Xt<On;){var Yn=Me[Xt];qe>0&&at(Yn)?qe>1?ls(Yn,qe-1,at,lt,Rt):ut(Rt,Yn):lt||(Rt[Rt.length]=Yn)}return Rt}function Ca(Me,qe,at){var lt=qe(Me);return zn(Me)?lt:ut(lt,at(Me))}function lo(Me){if(!Ie(Me)||El(Me))return!1;var qe=Ue(Me)||Cr(Me)?Fn:pe;return qe.test(rt(Me))}function Fl(Me){if(!Ie(Me))return qc(Me);var qe=cs(Me),at=[];for(var lt in Me)lt=="constructor"&&(qe||!Vn.call(Me,lt))||at.push(lt);return at}function Do(Me,qe){return Me=Object(Me),_l(Me,qe,function(at,lt){return lt in Me})}function _l(Me,qe,at){for(var lt=-1,Rt=qe.length,Xt={};++lt<Rt;){var On=qe[lt],Yn=Me[On];at(Yn,On)&&(Xt[On]=Yn)}return Xt}function ea(Me,qe){return qe=pr(qe===void 0?Me.length-1:qe,0),function(){for(var at=arguments,lt=-1,Rt=pr(at.length-qe,0),Xt=Array(Rt);++lt<Rt;)Xt[lt]=at[qe+lt];lt=-1;for(var On=Array(qe+1);++lt<qe;)On[lt]=at[lt];return On[qe]=Xt,ot(Me,this,On)}}function ta(Me){return Ca(Me,tt,Co)}function Ho(Me,qe){var at=Me.__data__;return Sa(qe)?at[typeof qe=="string"?"string":"hash"]:at.map}function co(Me,qe){var at=Kn(Me,qe);return lo(at)?at:void 0}var _s=Ln?zr(Ln,Object):_t,Co=Ln?function(Me){for(var qe=[];Me;)ut(qe,_s(Me)),Me=Wr(Me);return qe}:_t;function qa(Me){return zn(Me)||sn(Me)||!!(Tn&&Me&&Me[Tn])}function Ol(Me,qe){return qe=qe==null?s:qe,!!qe&&(typeof Me=="number"||de.test(Me))&&Me>-1&&Me%1==0&&Me<qe}function Sa(Me){var qe=typeof Me;return qe=="string"||qe=="number"||qe=="symbol"||qe=="boolean"?Me!=="__proto__":Me===null}function El(Me){return!!hi&&hi in Me}function cs(Me){var qe=Me&&Me.constructor,at=typeof qe=="function"&&qe.prototype||Vi;return Me===at}function qc(Me){var qe=[];if(Me!=null)for(var at in Object(Me))qe.push(at);return qe}function Zc(Me){if(typeof Me=="string"||Le(Me))return Me;var qe=Me+"";return qe=="0"&&1/Me==-m?"-0":qe}function rt(Me){if(Me!=null){try{return os.call(Me)}catch(qe){}try{return Me+""}catch(qe){}}return""}function xt(Me,qe){return Me===qe||Me!==Me&&qe!==qe}function sn(Me){return ur(Me)&&Vn.call(Me,"callee")&&(!Li.call(Me,"callee")||$t.call(Me)==E)}var zn=Array.isArray;function In(Me){return Me!=null&&ze(Me.length)&&!Ue(Me)}function ur(Me){return it(Me)&&In(Me)}function Ue(Me){var qe=Ie(Me)?$t.call(Me):"";return qe==H||qe==te}function ze(Me){return typeof Me=="number"&&Me>-1&&Me%1==0&&Me<=s}function Ie(Me){var qe=typeof Me;return!!Me&&(qe=="object"||qe=="function")}function it(Me){return!!Me&&typeof Me=="object"}function Le(Me){return typeof Me=="symbol"||it(Me)&&$t.call(Me)==ce}function tt(Me){return In(Me)?as(Me,!0):Fl(Me)}var dt=ea(function(Me,qe){return Me==null?{}:(qe=vt(ls(qe,1),Zc),Do(Me,$i(ta(Me),qe)))});function _t(){return[]}u.exports=dt},25030:function(u,n,y){var S=1/0,d=9007199254740991,m="[object Arguments]",s="[object Function]",E="[object GeneratorFunction]",H="[object Symbol]",te=typeof y.g=="object"&&y.g&&y.g.Object===Object&&y.g,ce=typeof self=="object"&&self&&self.Object===Object&&self,J=te||ce||Function("return this")();function pe($t,Fn,gr){switch(gr.length){case 0:return $t.call(Fn);case 1:return $t.call(Fn,gr[0]);case 2:return $t.call(Fn,gr[0],gr[1]);case 3:return $t.call(Fn,gr[0],gr[1],gr[2])}return $t.apply(Fn,gr)}function de($t,Fn){for(var gr=-1,Wr=$t?$t.length:0,Li=Array(Wr);++gr<Wr;)Li[gr]=Fn($t[gr],gr,$t);return Li}function bt($t,Fn){for(var gr=-1,Wr=Fn.length,Li=$t.length;++gr<Wr;)$t[Li+gr]=Fn[gr];return $t}var nt=Object.prototype,He=nt.hasOwnProperty,ot=nt.toString,gt=J.Symbol,St=nt.propertyIsEnumerable,vt=gt?gt.isConcatSpreadable:void 0,ut=Math.max;function mt($t,Fn,gr,Wr,Li){var Mn=-1,Tn=$t.length;for(gr||(gr=zt),Li||(Li=[]);++Mn<Tn;){var Ln=$t[Mn];Fn>0&&gr(Ln)?Fn>1?mt(Ln,Fn-1,gr,Wr,Li):bt(Li,Ln):Wr||(Li[Li.length]=Ln)}return Li}function Pt($t,Fn){return $t=Object($t),Ot($t,Fn,function(gr,Wr){return Wr in $t})}function Ot($t,Fn,gr){for(var Wr=-1,Li=Fn.length,Mn={};++Wr<Li;){var Tn=Fn[Wr],Ln=$t[Tn];gr(Ln,Tn)&&(Mn[Tn]=Ln)}return Mn}function Jt($t,Fn){return Fn=ut(Fn===void 0?$t.length-1:Fn,0),function(){for(var gr=arguments,Wr=-1,Li=ut(gr.length-Fn,0),Mn=Array(Li);++Wr<Li;)Mn[Wr]=gr[Fn+Wr];Wr=-1;for(var Tn=Array(Fn+1);++Wr<Fn;)Tn[Wr]=gr[Wr];return Tn[Fn]=Mn,pe($t,this,Tn)}}function zt($t){return Cr($t)||Kn($t)||!!(vt&&$t&&$t[vt])}function _n($t){if(typeof $t=="string"||os($t))return $t;var Fn=$t+"";return Fn=="0"&&1/$t==-S?"-0":Fn}function Kn($t){return fr($t)&&He.call($t,"callee")&&(!St.call($t,"callee")||ot.call($t)==m)}var Cr=Array.isArray;function zr($t){return $t!=null&&Vi($t.length)&&!Ir($t)}function fr($t){return hi($t)&&zr($t)}function Ir($t){var Fn=vi($t)?ot.call($t):"";return Fn==s||Fn==E}function Vi($t){return typeof $t=="number"&&$t>-1&&$t%1==0&&$t<=d}function vi($t){var Fn=typeof $t;return!!$t&&(Fn=="object"||Fn=="function")}function hi($t){return!!$t&&typeof $t=="object"}function os($t){return typeof $t=="symbol"||hi($t)&&ot.call($t)==H}var Vn=Jt(function($t,Fn){return $t==null?{}:Pt($t,de(mt(Fn,1),_n))});u.exports=Vn},68273:function(u,n,y){"use strict";y.r(n),y.d(n,{FlashGen:function(){return ta},Generator:function(){return _s},inBox:function(){return sn},inCircle:function(){return cs},inRect:function(){return rt},inSphere:function(){return Sa},noise:function(){return _l},onBox:function(){return In},onCircle:function(){return qc},onRect:function(){return xt},onSphere:function(){return Ol}});function S(Ue,ze,Ie){return ze in Ue?Object.defineProperty(Ue,ze,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Ue[ze]=Ie,Ue}function d(Ue,ze){var Ie=Object.keys(Ue);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(Ue);ze&&(it=it.filter(function(Le){return Object.getOwnPropertyDescriptor(Ue,Le).enumerable})),Ie.push.apply(Ie,it)}return Ie}function m(Ue){for(var ze=1;ze<arguments.length;ze++){var Ie=arguments[ze]!=null?arguments[ze]:{};ze%2?d(Object(Ie),!0).forEach(function(it){S(Ue,it,Ie[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ue,Object.getOwnPropertyDescriptors(Ie)):d(Object(Ie)).forEach(function(it){Object.defineProperty(Ue,it,Object.getOwnPropertyDescriptor(Ie,it))})}return Ue}function s(Ue,ze){if(!(Ue instanceof ze))throw new TypeError("Cannot call a class as a function")}function E(Ue,ze){return E=Object.setPrototypeOf||function(it,Le){return it.__proto__=Le,it},E(Ue,ze)}function H(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ue){return!1}}var te=y(99477);function ce(){for(var Ue=arguments.length,ze=new Array(Ue),Ie=0;Ie<Ue;Ie++)ze[Ie]=arguments[Ie];var it=ze[0],Le=ze[1],tt=ze[2],dt=ze[3];return it*dt-Le*tt}function J(){for(var Ue=arguments.length,ze=new Array(Ue),Ie=0;Ie<Ue;Ie++)ze[Ie]=arguments[Ie];var it=ze[0],Le=ze[1],tt=ze[2],dt=ze[3],_t=ze[4],Me=ze[5],qe=ze[6],at=ze[7],lt=ze[8];return it*_t*lt+Le*Me*qe+tt*dt*at-tt*_t*qe-Le*dt*lt-it*Me*at}function pe(){for(var Ue=arguments.length,ze=new Array(Ue),Ie=0;Ie<Ue;Ie++)ze[Ie]=arguments[Ie];ze[0],ze[1],ze[2],ze[3],ze[4],ze[5],ze[6],ze[7],ze[8],ze[9],ze[10],ze[11],ze[12],ze[13],ze[14]}function de(Ue,ze,Ie){for(var it=Ue.clone().transpose(),Le=[],tt=it.elements.length,dt=Math.sqrt(tt),_t=0;_t<tt;_t++){var Me=it.elements[_t],qe=Math.floor(_t/dt),at=_t%dt;qe!==ze-1&&at!==Ie-1&&Le.push(Me)}return J.apply(void 0,Le)}function bt(Ue,ze){for(var Ie=[],it=Ue.toArray(),Le=ze.toArray(),tt=0;tt<it.length;tt++)Ie[tt]=it[tt]+Le[tt];return new te.Matrix3().fromArray(Ie)}var nt=Object.freeze({__proto__:null,determinant2:ce,determinant3:J,determinant4:pe,getMinor:de,matrixSum3:bt});function He(Ue){if(Array.isArray(Ue))return Ue}function ot(Ue,ze){var Ie=Ue==null?null:typeof Symbol!="undefined"&&Ue[Symbol.iterator]||Ue["@@iterator"];if(Ie!=null){var it=[],Le=!0,tt=!1,dt,_t;try{for(Ie=Ie.call(Ue);!(Le=(dt=Ie.next()).done)&&(it.push(dt.value),!(ze&&it.length===ze));Le=!0);}catch(Me){tt=!0,_t=Me}finally{try{!Le&&Ie.return!=null&&Ie.return()}finally{if(tt)throw _t}}return it}}function gt(Ue,ze){(ze==null||ze>Ue.length)&&(ze=Ue.length);for(var Ie=0,it=new Array(ze);Ie<ze;Ie++)it[Ie]=Ue[Ie];return it}function St(Ue,ze){if(Ue){if(typeof Ue=="string")return gt(Ue,ze);var Ie=Object.prototype.toString.call(Ue).slice(8,-1);if(Ie==="Object"&&Ue.constructor&&(Ie=Ue.constructor.name),Ie==="Map"||Ie==="Set")return Array.from(Ue);if(Ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ie))return gt(Ue,ze)}}function vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ut(Ue,ze){return He(Ue)||ot(Ue,ze)||St(Ue,ze)||vt()}function mt(Ue){if(Array.isArray(Ue))return gt(Ue)}function Pt(Ue){if(typeof Symbol!="undefined"&&Ue[Symbol.iterator]!=null||Ue["@@iterator"]!=null)return Array.from(Ue)}function Ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jt(Ue){return mt(Ue)||Pt(Ue)||St(Ue)||Ot()}function zt(Ue,ze,Ie){return H()?zt=Reflect.construct:zt=function(Le,tt,dt){var _t=[null];_t.push.apply(_t,tt);var Me=Function.bind.apply(Le,_t),qe=new Me;return dt&&E(qe,dt.prototype),qe},zt.apply(null,arguments)}function _n(Ue,ze){var Ie=ut(ze[0],2),it=Ie[0],Le=Ie[1],tt=ut(ze[1],2),dt=tt[0],_t=tt[1],Me=ut(ze[2],2),qe=Me[0],at=Me[1],lt=ut(Ue,2),Rt=lt[0],Xt=lt[1],On=new te.Matrix4;return On.set(it,Le,it*it+Le*Le,1,dt,_t,dt*dt+_t*_t,1,qe,at,qe*qe+at*at,1,Rt,Xt,Rt*Rt+Xt*Xt,1),On.determinant()<=0}function Kn(Ue){var ze=ut(Ue[0],2),Ie=ze[0],it=ze[1],Le=ut(Ue[1],2),tt=Le[0],dt=Le[1],_t=ut(Ue[2],2),Me=_t[0],qe=_t[1];return J(Ie,it,1,tt,dt,1,Me,qe,1)}function Cr(Ue){return Kn(Ue)===0}function zr(Ue){return Kn(Ue)<0}function fr(Ue){var ze=ut(Ue[0],2),Ie=ze[0],it=ze[1],Le=ut(Ue[1],2),tt=Le[0],dt=Le[1],_t=ut(Ue[2],2),Me=_t[0],qe=_t[1];if(Cr(Ue))return null;var at=new te.Matrix4;at.set(1,1,1,1,Ie*Ie+it*it,Ie,it,1,tt*tt+dt*dt,tt,dt,1,Me*Me+qe*qe,Me,qe,1);var lt=de(at,1,1),Rt=de(at,1,3),Xt=de(at,1,2),On=de(at,1,4),Yn=.5*(Xt/lt),vr=.5*(Rt/lt),Gr=Yn*Yn+vr*vr+On/lt;return{x:Math.abs(Yn)===0?0:Yn,y:Math.abs(vr)===0?0:-vr,r:Math.sqrt(Gr)}}function Ir(Ue,ze){var Ie=Array.isArray(ze[0])?ze[0]:ze[0].toArray(),it=ut(Ie,2),Le=it[0],tt=it[1],dt=Array.isArray(ze[1])?ze[1]:ze[1].toArray(),_t=ut(dt,2),Me=_t[0],qe=_t[1],at=Array.isArray(ze[2])?ze[2]:ze[2].toArray(),lt=ut(at,2),Rt=lt[0],Xt=lt[1],On=ut(Ue,2),Yn=On[0],vr=On[1];if(Cr(ze))throw new Error("Collinear points don't form a triangle");var Gr=Le-Yn,Yr=tt-vr,oi=Me-Yn,Kr=qe-vr,Cn=Rt-Yn,Mr=Xt-vr,eo=J(Gr,Yr,Gr*Gr+Yr*Yr,oi,Kr,oi*oi+Kr*Kr,Cn,Mr,Cn*Cn+Mr*Mr);return eo===0?!0:zr(ze)?eo<0:eo>0}var Vi=new te.Vector2,vi=new te.Vector2;function hi(Ue){var ze=Ue.map(function(qe){return Array.isArray(qe)?zt(te.Vector2,Jt(qe)):qe}),Ie=ut(ze,3),it=Ie[0],Le=Ie[1],tt=Ie[2];if(Cr(Ue))return!1;var dt=Vi.subVectors(Le,it),_t=vi.subVectors(tt,it),Me=_t.cross(dt);return Me>0}var os=Object.freeze({__proto__:null,isPointInTriangle:_n,triangleDeterminant:Kn,arePointsCollinear:Cr,isTriangleClockwise:zr,getCircumcircle:fr,isPointInCircumcircle:Ir,doThreePointsMakeARight:hi});function Vn(Ue,ze,Ie){return Math.max(ze,Math.min(Ie,Ue))}function $t(Ue,ze){return Vn(Ue-Math.floor(Ue/ze)*ze,0,ze)}function Fn(Ue,ze){var Ie=$t(ze-Ue,Math.PI*2);return Ie>Math.PI&&(Ie-=Math.PI*2),Ie}function gr(Ue){return Ue/180*Math.PI}function Wr(Ue){return Ue*180/Math.PI}function Li(Ue,ze){for(var Ie=ze.radius,it=Ie===void 0?1:Ie,Le=Ue.length/3,tt=2/Le,dt=Math.PI*(3-2.2360679775),_t=0;_t<Ue.length;_t+=3){var Me=_t*tt-1+tt/2,qe=Math.sqrt(1-Math.pow(Me,2)),at=_t%Le*dt,lt=Math.cos(at)*qe,Rt=Math.sin(at)*qe;Ue[_t]=lt*it,Ue[_t+1]=Me*it,Ue[_t+2]=Rt*it}}function Mn(Ue,ze){var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(Ue.x-ze.x)<Ie&&Math.abs(Ue.y-ze.y)<Ie&&Math.abs(Ue.z-ze.z)<Ie}function Tn(Ue,ze){return Ue.x===ze.x?typeof Ue.z!="undefined"&&Ue.y===ze.y?Ue.z-ze.z:Ue.y-ze.y:Ue.x-ze.x}function Ln(Ue){for(var ze=Ue.sort(Tn),Ie=[ze[0],ze[1]],it=2;it<ze.length;it++)for(Ie.push(ze[it]);Ie.length>2&&hi(Jt(Ie.slice(-3)));)Ie.splice(Ie.length-2,1);for(var Le=[ze[ze.length-1],ze[ze.length-2]],tt=ze.length-3;tt>=0;tt--)for(Le.push(ze[tt]);Le.length>2&&hi(Jt(Le.slice(-3)));)Le.splice(Le.length-2,1);Le.splice(0,1),Le.splice(Le.length-1,1);var dt=[].concat(Ie,Le);return dt}function pr(Ue,ze,Ie){var it=ut(ze,2),Le=it[0],tt=it[1],dt=ut(Ie,2),_t=dt[0],Me=dt[1];return _t+(Ue-Le)*(Me-_t)/(tt-Le)}function ni(Ue){return Ue*Ue*Ue*(Ue*(Ue*6-15)+10)}function Ar(Ue,ze,Ie){return Ue*(1-Ie)+ze*Ie}function ki(Ue,ze,Ie){return(Ie-Ue)/(ze-Ue)}function jo(Ue,ze,Ie){var it=Math.sqrt(Ue*Ue+ze*ze+Ie*Ie);return[Ue/it,ze/it,Ie/it]}function ri(Ue,ze,Ie){var it=Ue*Ue,Le=ze*ze,tt=Ie*Ie,dt=Ue*Math.sqrt(1-(Le+tt)/2+Le*tt/3),_t=ze*Math.sqrt(1-(tt+it)/2+tt*it/3),Me=Ie*Math.sqrt(1-(it+Le)/2+it*Le/3);return[dt,_t,Me]}function ro(Ue,ze){var Ie=new te.Vector3().crossVectors(Ue,ze),it=Ue.dot(ze),Le=new te.Matrix3().identity(),tt=new te.Matrix3().set(0,-Ie.z,Ie.y,Ie.z,0,-Ie.x,-Ie.y,Ie.x,0),dt=new te.Matrix3().multiplyMatrices(tt,tt).multiplyScalar(1/(1+it)),_t=bt(bt(Le,tt),dt);return _t}function Zi(Ue,ze,Ie){var it=Math.asin(ze),Le=Math.atan2(Ue,-Ie);return[it,Le]}function Ja(Ue,ze){var Ie=Math.sin(Ue),it=Math.cos(Ue),Le=Math.sin(ze)*it,tt=-Math.cos(ze)*it;return[Le,Ie,tt]}function As(Ue,ze){var Ie=ut(ze,2),it=Ie[0],Le=Ie[1],tt=ro(Ue.normal,new te.Vector3(0,1,0)),dt=ki(it.clone().applyMatrix3(tt).y,Le.clone().applyMatrix3(tt).y,0);return new te.Vector3().lerpVectors(it,Le,dt)}function js(Ue,ze){var Ie=ze.normal.dot(Ue);return Ie}function Zs(Ue,ze){var Ie=ut(Ue,3),it=Ie[0],Le=Ie[1],tt=Ie[2],dt=ut(ze,2),_t=dt[0],Me=dt[1];return tt*_t*Me+Le*_t+it}function ua(Ue,ze){var Ie=ut(ze,2),it=Ie[0],Le=Ie[1],tt=it*Le,dt=Ue/tt,_t=Ue-tt*dt,Me=_t/it,qe=_t%it;return[qe,Me,dt]}function vs(Ue,ze){return Ue[0]+ze[0]*Ue[1]}function ss(Ue,ze){var Ie=Ue%ze,it=Math.floor(Ue/ze);return[Ie,it]}var Xi=Object.freeze({__proto__:null,clamp:Vn,repeat:$t,deltaAngle:Fn,degToRad:gr,radToDeg:Wr,fibonacciOnSphere:Li,vectorEquals:Mn,lexicographic:Tn,convexHull:Ln,remap:pr,fade:ni,lerp:Ar,inverseLerp:ki,normalize:jo,pointOnCubeToPointOnSphere:ri,rotateVectorOnVector:ro,pointToCoordinate:Zi,coordinateToPoint:Ja,planeSegmentIntersection:As,pointToPlaneDistance:js,getIndexFrom3D:Zs,get3DFromIndex:ua,getIndexFrom2D:vs,get2DFromIndex:ss});function $s(Ue,ze){for(var Ie=0;Ie<ze.length;Ie++){var it=ze[Ie];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Ue,it.key,it)}}function da(Ue,ze,Ie){return ze&&$s(Ue.prototype,ze),Ie&&$s(Ue,Ie),Ue}var Oi=function Ue(ze,Ie,it){var Le=this;s(this,Ue),S(this,"dot2",function(tt,dt){return Le.x*tt+Le.y*dt}),S(this,"dot3",function(tt,dt,_t){return Le.x*tt+Le.y*dt+Le.z*_t}),this.x=ze,this.y=Ie,this.z=it},ao=[new Oi(1,1,0),new Oi(-1,1,0),new Oi(1,-1,0),new Oi(-1,-1,0),new Oi(1,0,1),new Oi(-1,0,1),new Oi(1,0,-1),new Oi(-1,0,-1),new Oi(0,1,1),new Oi(0,-1,1),new Oi(0,1,-1),new Oi(0,-1,-1)],Hs=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],_r=new Array(512),ji=new Array(512),Rl=function(ze){ze>0&&ze<1&&(ze*=65536),ze=Math.floor(ze),ze<256&&(ze|=ze<<8);for(var Ie=0;Ie<256;Ie++){var it;Ie&1?it=Hs[Ie]^ze&255:it=Hs[Ie]^ze>>8&255,_r[Ie]=_r[Ie+256]=it,ji[Ie]=ji[Ie+256]=ao[it%12]}};Rl(0);var as=.5*(Math.sqrt(3)-1),Ws=(3-Math.sqrt(3))/6,$i=1/3,ls=1/6,Ca=function(ze,Ie){var it,Le,tt,dt=(ze+Ie)*as,_t=Math.floor(ze+dt),Me=Math.floor(Ie+dt),qe=(_t+Me)*Ws,at=ze-_t+qe,lt=Ie-Me+qe,Rt,Xt;at>lt?(Rt=1,Xt=0):(Rt=0,Xt=1);var On=at-Rt+Ws,Yn=lt-Xt+Ws,vr=at-1+2*Ws,Gr=lt-1+2*Ws;_t&=255,Me&=255;var Yr=ji[_t+_r[Me]],oi=ji[_t+Rt+_r[Me+Xt]],Kr=ji[_t+1+_r[Me+1]],Cn=.5-at*at-lt*lt;Cn<0?it=0:(Cn*=Cn,it=Cn*Cn*Yr.dot2(at,lt));var Mr=.5-On*On-Yn*Yn;Mr<0?Le=0:(Mr*=Mr,Le=Mr*Mr*oi.dot2(On,Yn));var eo=.5-vr*vr-Gr*Gr;return eo<0?tt=0:(eo*=eo,tt=eo*eo*Kr.dot2(vr,Gr)),70*(it+Le+tt)},lo=function(ze,Ie,it){var Le,tt,dt,_t,Me=(ze+Ie+it)*$i,qe=Math.floor(ze+Me),at=Math.floor(Ie+Me),lt=Math.floor(it+Me),Rt=(qe+at+lt)*ls,Xt=ze-qe+Rt,On=Ie-at+Rt,Yn=it-lt+Rt,vr,Gr,Yr,oi,Kr,Cn;Xt>=On?On>=Yn?(vr=1,Gr=0,Yr=0,oi=1,Kr=1,Cn=0):Xt>=Yn?(vr=1,Gr=0,Yr=0,oi=1,Kr=0,Cn=1):(vr=0,Gr=0,Yr=1,oi=1,Kr=0,Cn=1):On<Yn?(vr=0,Gr=0,Yr=1,oi=0,Kr=1,Cn=1):Xt<Yn?(vr=0,Gr=1,Yr=0,oi=0,Kr=1,Cn=1):(vr=0,Gr=1,Yr=0,oi=1,Kr=1,Cn=0);var Mr=Xt-vr+ls,eo=On-Gr+ls,Po=Yn-Yr+ls,es=Xt-oi+2*ls,wa=On-Kr+2*ls,ha=Yn-Cn+2*ls,Di=Xt-1+3*ls,Ac=On-1+3*ls,vc=Yn-1+3*ls;qe&=255,at&=255,lt&=255;var ci=ji[qe+_r[at+_r[lt]]],io=ji[qe+vr+_r[at+Gr+_r[lt+Yr]]],Bs=ji[qe+oi+_r[at+Kr+_r[lt+Cn]]],So=ji[qe+1+_r[at+1+_r[lt+1]]],fa=.6-Xt*Xt-On*On-Yn*Yn;fa<0?Le=0:(fa*=fa,Le=fa*fa*ci.dot3(Xt,On,Yn));var wo=.6-Mr*Mr-eo*eo-Po*Po;wo<0?tt=0:(wo*=wo,tt=wo*wo*io.dot3(Mr,eo,Po));var ps=.6-es*es-wa*wa-ha*ha;ps<0?dt=0:(ps*=ps,dt=ps*ps*Bs.dot3(es,wa,ha));var Ta=.6-Di*Di-Ac*Ac-vc*vc;return Ta<0?_t=0:(Ta*=Ta,_t=Ta*Ta*So.dot3(Di,Ac,vc)),32*(Le+tt+dt+_t)},Fl=function(ze,Ie){var it=Math.floor(ze),Le=Math.floor(Ie);ze=ze-it,Ie=Ie-Le,it=it&255,Le=Le&255;var tt=ji[it+_r[Le]].dot2(ze,Ie),dt=ji[it+_r[Le+1]].dot2(ze,Ie-1),_t=ji[it+1+_r[Le]].dot2(ze-1,Ie),Me=ji[it+1+_r[Le+1]].dot2(ze-1,Ie-1),qe=ni(ze);return Ar(Ar(tt,_t,qe),Ar(dt,Me,qe),ni(Ie))},Do=function(ze,Ie,it){var Le=Math.floor(ze),tt=Math.floor(Ie),dt=Math.floor(it);ze=ze-Le,Ie=Ie-tt,it=it-dt,Le=Le&255,tt=tt&255,dt=dt&255;var _t=ji[Le+_r[tt+_r[dt]]].dot3(ze,Ie,it),Me=ji[Le+_r[tt+_r[dt+1]]].dot3(ze,Ie,it-1),qe=ji[Le+_r[tt+1+_r[dt]]].dot3(ze,Ie-1,it),at=ji[Le+_r[tt+1+_r[dt+1]]].dot3(ze,Ie-1,it-1),lt=ji[Le+1+_r[tt+_r[dt]]].dot3(ze-1,Ie,it),Rt=ji[Le+1+_r[tt+_r[dt+1]]].dot3(ze-1,Ie,it-1),Xt=ji[Le+1+_r[tt+1+_r[dt]]].dot3(ze-1,Ie-1,it),On=ji[Le+1+_r[tt+1+_r[dt+1]]].dot3(ze-1,Ie-1,it-1),Yn=ni(ze),vr=ni(Ie),Gr=ni(it);return Ar(Ar(Ar(_t,lt,Yn),Ar(Me,Rt,Yn),Gr),Ar(Ar(qe,Xt,Yn),Ar(at,On,Yn),Gr),vr)},_l=Object.freeze({__proto__:null,seed:Rl,simplex2:Ca,simplex3:lo,perlin2:Fl,perlin3:Do}),ea=Math.PI*2,ta=function(){function Ue(ze){s(this,Ue),S(this,"nextBurstTime",0),S(this,"nextFlashEndTime",0),S(this,"flashesDone",0),S(this,"isFlashing",!1),S(this,"currentCount",0),S(this,"flashIntensity",0),S(this,"isDecaying",!1),S(this,"autoBurst",!0),S(this,"decaySpeed",40),S(this,"minInterval",5e3),S(this,"maxInterval",1e4),S(this,"minDuration",50),S(this,"maxDuration",300),S(this,"count",5),Object.assign(this,ze)}return da(Ue,[{key:"scheduleNextBurst",value:function(Ie){var it=Math.random()*(this.maxInterval-this.minInterval)+this.minInterval;this.nextBurstTime=Ie+it/1e3,this.flashesDone=0,this.isFlashing=!1}},{key:"burst",value:function(){this.nextBurstTime=0,this.flashesDone=0,this.isFlashing=!1}},{key:"update",value:function(Ie,it){if(Ie>this.nextBurstTime&&this.currentCount===0&&(this.currentCount=Math.floor(Math.random()*this.count)+1),this.flashesDone<this.currentCount&&Ie>this.nextBurstTime)if(this.isFlashing)this.isFlashing&&Ie>this.nextFlashEndTime&&(this.isFlashing=!1,this.isDecaying=!0,this.flashesDone++,this.flashesDone>=this.currentCount&&(this.currentCount=0,this.autoBurst&&this.scheduleNextBurst(Ie)));else{this.isFlashing=!0,this.flashIntensity=1;var Le=Math.random()*(this.maxDuration-this.minDuration)+this.minDuration;this.nextFlashEndTime=Ie+Le/1e3}return this.isDecaying&&(this.flashIntensity-=it*this.decaySpeed,this.flashIntensity=Math.max(0,Math.min(1,this.flashIntensity)),this.flashIntensity<=0&&(this.isDecaying=!1,this.flashIntensity=0)),this.flashIntensity}}]),Ue}();function Ho(Ue){if(typeof Ue=="number")Ue=Math.abs(Ue);else if(typeof Ue=="string"){var ze=Ue;Ue=0;for(var Ie=0;Ie<ze.length;Ie++)Ue=(Ue+(Ie+1)*(ze.charCodeAt(Ie)%96))%2147483647}return Ue===0&&(Ue=311),Ue}function co(Ue){var ze=Ho(Ue);return function(){var Ie=ze*48271%2147483647;return ze=Ie,Ie/2147483647}}var _s=function Ue(ze){var Ie=this;s(this,Ue),S(this,"seed",0),S(this,"init",function(it){Ie.seed=it,Ie.value=co(it)}),S(this,"value",co(this.seed)),this.init(ze)},Co=new _s(Math.random()),qa={radius:1,center:[0,0,0]};function Ol(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},qa),ze),Le=it.radius,tt=it.center,dt=0;dt<Ue.length;dt+=3){var _t=Ie.value(),Me=Ie.value(),qe=Math.acos(2*Me-1),at=ea*_t;Ue[dt]=Math.sin(qe)*Math.cos(at)*Le+tt[0],Ue[dt+1]=Math.sin(qe)*Math.sin(at)*Le+tt[1],Ue[dt+2]=Math.cos(qe)*Le+tt[2]}return Ue}function Sa(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},qa),ze),Le=it.radius,tt=it.center,dt=0;dt<Ue.length;dt+=3){var _t=Math.pow(Ie.value(),.3333333333333333),Me=Ie.value()*2-1,qe=Ie.value()*2-1,at=Ie.value()*2-1,lt=Math.sqrt(Me*Me+qe*qe+at*at);Me=_t*Me/lt,qe=_t*qe/lt,at=_t*at/lt,Ue[dt]=Me*Le+tt[0],Ue[dt+1]=qe*Le+tt[1],Ue[dt+2]=at*Le+tt[2]}return Ue}var El={radius:1,center:[0,0]};function cs(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},El),ze),Le=it.radius,tt=it.center,dt=0;dt<Ue.length;dt+=2){var _t=Le*Math.sqrt(Ie.value()),Me=Ie.value()*ea;Ue[dt]=Math.sin(Me)*_t+tt[0],Ue[dt+1]=Math.cos(Me)*_t+tt[1]}return Ue}function qc(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},El),ze),Le=it.radius,tt=it.center,dt=0;dt<Ue.length;dt+=2){var _t=Ie.value()*ea;Ue[dt]=Math.sin(_t)*Le+tt[0],Ue[dt+1]=Math.cos(_t)*Le+tt[1]}return Ue}var Zc={sides:1,center:[0,0]};function rt(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},Zc),ze),Le=it.sides,tt=it.center,dt=typeof Le=="number"?Le:Le[0],_t=typeof Le=="number"?Le:Le[1],Me=0;Me<Ue.length;Me+=2)Ue[Me]=(Ie.value()-.5)*dt+tt[0],Ue[Me+1]=(Ie.value()-.5)*_t+tt[1];return Ue}function xt(Ue,ze){return Ue}function sn(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},zn),ze),Le=it.sides,tt=it.center,dt=typeof Le=="number"?Le:Le[0],_t=typeof Le=="number"?Le:Le[1],Me=typeof Le=="number"?Le:Le[2],qe=0;qe<Ue.length;qe+=3)Ue[qe]=(Ie.value()-.5)*dt+tt[0],Ue[qe+1]=(Ie.value()-.5)*_t+tt[1],Ue[qe+2]=(Ie.value()-.5)*Me+tt[2];return Ue}var zn={sides:1,center:[0,0,0]};function In(Ue,ze){for(var Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Co,it=m(m({},zn),ze),Le=it.sides,tt=it.center,dt=typeof Le=="number"?Le:Le[0],_t=typeof Le=="number"?Le:Le[1],Me=typeof Le=="number"?Le:Le[2],qe=0;qe<Ue.length;qe+=3)Ue[qe]=(Ie.value()-.5)*dt+tt[0],Ue[qe+1]=(Ie.value()-.5)*_t+tt[1],Ue[qe+2]=(Ie.value()-.5)*Me+tt[2];return Ue}var ur=Object.freeze({__proto__:null,FlashGen:ta,Generator:_s,onSphere:Ol,inSphere:Sa,inCircle:cs,onCircle:qc,inRect:rt,onRect:xt,inBox:sn,onBox:In,noise:_l})},92703:function(u,n,y){"use strict";var S=y(50414);function d(){}function m(){}m.resetWarningCache=d,u.exports=function(){function s(te,ce,J,pe,de,bt){if(bt!==S){var nt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw nt.name="Invariant Violation",nt}}s.isRequired=s;function E(){return s}var H={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:E,element:s,elementType:s,instanceOf:E,node:s,objectOf:E,oneOf:E,oneOfType:E,shape:E,exact:E,checkPropTypes:m,resetWarningCache:d};return H.PropTypes=H,H}},45697:function(u,n,y){if(!1)var S,d;else u.exports=y(92703)()},50414:function(u){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";u.exports=n},46511:function(u,n){"use strict";var y;/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */n.ConcurrentRoot=1,n.ContinuousEventPriority=4,n.DefaultEventPriority=16,n.DiscreteEventPriority=1,y=536870912,y=0},67287:function(u,n,y){var S=y(25108);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */u.exports=function(m){var s={},E=y(67294),H=y(63840),te=Object.assign;function ce(x){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+x,U=1;U<arguments.length;U++)w+="&args[]="+encodeURIComponent(arguments[U]);return"Minified React error #"+x+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pe=Symbol.for("react.element"),de=Symbol.for("react.portal"),bt=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),ot=Symbol.for("react.provider"),gt=Symbol.for("react.context"),St=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Ot=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Jt=Symbol.iterator;function zt(x){return x===null||typeof x!="object"?null:(x=Jt&&x[Jt]||x["@@iterator"],typeof x=="function"?x:null)}function _n(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case bt:return"Fragment";case de:return"Portal";case He:return"Profiler";case nt:return"StrictMode";case vt:return"Suspense";case ut:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case gt:return(x.displayName||"Context")+".Consumer";case ot:return(x._context.displayName||"Context")+".Provider";case St:var w=x.render;return x=x.displayName,x||(x=w.displayName||w.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case mt:return w=x.displayName||null,w!==null?w:_n(x.type)||"Memo";case Pt:w=x._payload,x=x._init;try{return _n(x(w))}catch(U){}}return null}function Kn(x){var w=x.type;switch(x.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=w.render,x=x.displayName||x.name||"",w.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _n(w);case 8:return w===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function Cr(x){var w=x,U=x;if(x.alternate)for(;w.return;)w=w.return;else{x=w;do w=x,w.flags&4098&&(U=w.return),x=w.return;while(x)}return w.tag===3?U:null}function zr(x){if(Cr(x)!==x)throw Error(ce(188))}function fr(x){var w=x.alternate;if(!w){if(w=Cr(x),w===null)throw Error(ce(188));return w!==x?null:x}for(var U=x,Y=w;;){var re=U.return;if(re===null)break;var he=re.alternate;if(he===null){if(Y=re.return,Y!==null){U=Y;continue}break}if(re.child===he.child){for(he=re.child;he;){if(he===U)return zr(re),x;if(he===Y)return zr(re),w;he=he.sibling}throw Error(ce(188))}if(U.return!==Y.return)U=re,Y=he;else{for(var Je=!1,At=re.child;At;){if(At===U){Je=!0,U=re,Y=he;break}if(At===Y){Je=!0,Y=re,U=he;break}At=At.sibling}if(!Je){for(At=he.child;At;){if(At===U){Je=!0,U=he,Y=re;break}if(At===Y){Je=!0,Y=he,U=re;break}At=At.sibling}if(!Je)throw Error(ce(189))}}if(U.alternate!==Y)throw Error(ce(190))}if(U.tag!==3)throw Error(ce(188));return U.stateNode.current===U?x:w}function Ir(x){return x=fr(x),x!==null?Vi(x):null}function Vi(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var w=Vi(x);if(w!==null)return w;x=x.sibling}return null}function vi(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var w=vi(x);if(w!==null)return w}x=x.sibling}return null}var hi=Array.isArray,os=m.getPublicInstance,Vn=m.getRootHostContext,$t=m.getChildHostContext,Fn=m.prepareForCommit,gr=m.resetAfterCommit,Wr=m.createInstance,Li=m.appendInitialChild,Mn=m.finalizeInitialChildren,Tn=m.prepareUpdate,Ln=m.shouldSetTextContent,pr=m.createTextInstance,ni=m.scheduleTimeout,Ar=m.cancelTimeout,ki=m.noTimeout,jo=m.isPrimaryRenderer,ri=m.supportsMutation,ro=m.supportsPersistence,Zi=m.supportsHydration,Ja=m.getInstanceFromNode,As=m.preparePortalMount,js=m.getCurrentEventPriority,Zs=m.detachDeletedInstance,ua=m.supportsMicrotasks,vs=m.scheduleMicrotask,ss=m.supportsTestSelectors,Xi=m.findFiberRoot,$s=m.getBoundingRect,da=m.getTextContent,Oi=m.isHiddenSubtree,ao=m.matchAccessibilityRole,Hs=m.setFocusIfFocusable,_r=m.setupIntersectionObserver,ji=m.appendChild,Rl=m.appendChildToContainer,as=m.commitTextUpdate,Ws=m.commitMount,$i=m.commitUpdate,ls=m.insertBefore,Ca=m.insertInContainerBefore,lo=m.removeChild,Fl=m.removeChildFromContainer,Do=m.resetTextContent,_l=m.hideInstance,ea=m.hideTextInstance,ta=m.unhideInstance,Ho=m.unhideTextInstance,co=m.clearContainer,_s=m.cloneInstance,Co=m.createContainerChildSet,qa=m.appendChildToContainerChildSet,Ol=m.finalizeContainerChildren,Sa=m.replaceContainerChildren,El=m.cloneHiddenInstance,cs=m.cloneHiddenTextInstance,qc=m.canHydrateInstance,Zc=m.canHydrateTextInstance,rt=m.canHydrateSuspenseInstance,xt=m.isSuspenseInstancePending,sn=m.isSuspenseInstanceFallback,zn=m.registerSuspenseInstanceRetry,In=m.getNextHydratableSibling,ur=m.getFirstHydratableChild,Ue=m.getFirstHydratableChildWithinContainer,ze=m.getFirstHydratableChildWithinSuspenseInstance,Ie=m.hydrateInstance,it=m.hydrateTextInstance,Le=m.hydrateSuspenseInstance,tt=m.getNextHydratableInstanceAfterSuspenseInstance,dt=m.commitHydratedContainer,_t=m.commitHydratedSuspenseInstance,Me=m.clearSuspenseBoundary,qe=m.clearSuspenseBoundaryFromContainer,at=m.shouldDeleteUnhydratedTailInstances,lt=m.didNotMatchHydratedContainerTextInstance,Rt=m.didNotMatchHydratedTextInstance,Xt;function On(x){if(Xt===void 0)try{throw Error()}catch(U){var w=U.stack.trim().match(/\n( *(at )?)/);Xt=w&&w[1]||""}return`
`+Xt+x}var Yn=!1;function vr(x,w){if(!x||Yn)return"";Yn=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Dn){var Y=Dn}Reflect.construct(x,[],w)}else{try{w.call()}catch(Dn){Y=Dn}x.call(w.prototype)}else{try{throw Error()}catch(Dn){Y=Dn}x()}}catch(Dn){if(Dn&&Y&&typeof Dn.stack=="string"){for(var re=Dn.stack.split(`
`),he=Y.stack.split(`
`),Je=re.length-1,At=he.length-1;1<=Je&&0<=At&&re[Je]!==he[At];)At--;for(;1<=Je&&0<=At;Je--,At--)if(re[Je]!==he[At]){if(Je!==1||At!==1)do if(Je--,At--,0>At||re[Je]!==he[At]){var en=`
`+re[Je].replace(" at new "," at ");return x.displayName&&en.includes("<anonymous>")&&(en=en.replace("<anonymous>",x.displayName)),en}while(1<=Je&&0<=At);break}}}finally{Yn=!1,Error.prepareStackTrace=U}return(x=x?x.displayName||x.name:"")?On(x):""}var Gr=Object.prototype.hasOwnProperty,Yr=[],oi=-1;function Kr(x){return{current:x}}function Cn(x){0>oi||(x.current=Yr[oi],Yr[oi]=null,oi--)}function Mr(x,w){oi++,Yr[oi]=x.current,x.current=w}var eo={},Po=Kr(eo),es=Kr(!1),wa=eo;function ha(x,w){var U=x.type.contextTypes;if(!U)return eo;var Y=x.stateNode;if(Y&&Y.__reactInternalMemoizedUnmaskedChildContext===w)return Y.__reactInternalMemoizedMaskedChildContext;var re={},he;for(he in U)re[he]=w[he];return Y&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=w,x.__reactInternalMemoizedMaskedChildContext=re),re}function Di(x){return x=x.childContextTypes,x!=null}function Ac(){Cn(es),Cn(Po)}function vc(x,w,U){if(Po.current!==eo)throw Error(ce(168));Mr(Po,w),Mr(es,U)}function ci(x,w,U){var Y=x.stateNode;if(w=w.childContextTypes,typeof Y.getChildContext!="function")return U;Y=Y.getChildContext();for(var re in Y)if(!(re in w))throw Error(ce(108,Kn(x)||"Unknown",re));return te({},U,Y)}function io(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||eo,wa=Po.current,Mr(Po,x),Mr(es,es.current),!0}function Bs(x,w,U){var Y=x.stateNode;if(!Y)throw Error(ce(169));U?(x=ci(x,w,wa),Y.__reactInternalMemoizedMergedChildContext=x,Cn(es),Cn(Po),Mr(Po,x)):Cn(es),Mr(es,U)}var So=Math.clz32?Math.clz32:ps,fa=Math.log,wo=Math.LN2;function ps(x){return x>>>=0,x===0?32:31-(fa(x)/wo|0)|0}var Ta=64,_c=4194304;function Yl(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function Op(x,w){var U=x.pendingLanes;if(U===0)return 0;var Y=0,re=x.suspendedLanes,he=x.pingedLanes,Je=U&268435455;if(Je!==0){var At=Je&~re;At!==0?Y=Yl(At):(he&=Je,he!==0&&(Y=Yl(he)))}else Je=U&~re,Je!==0?Y=Yl(Je):he!==0&&(Y=Yl(he));if(Y===0)return 0;if(w!==0&&w!==Y&&!(w&re)&&(re=Y&-Y,he=w&-w,re>=he||re===16&&(he&4194240)!==0))return w;if(Y&4&&(Y|=U&16),w=x.entangledLanes,w!==0)for(x=x.entanglements,w&=Y;0<w;)U=31-So(w),re=1<<U,Y|=x[U],w&=~re;return Y}function Kh(x,w){switch(x){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qd(x,w){for(var U=x.suspendedLanes,Y=x.pingedLanes,re=x.expirationTimes,he=x.pendingLanes;0<he;){var Je=31-So(he),At=1<<Je,en=re[Je];en===-1?(!(At&U)||At&Y)&&(re[Je]=Kh(At,w)):en<=w&&(x.expiredLanes|=At),he&=~At}}function fg(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function Jh(x){for(var w=[],U=0;31>U;U++)w.push(x);return w}function rd(x,w,U){x.pendingLanes|=w,w!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,w=31-So(w),x[w]=U}function $c(x,w){var U=x.pendingLanes&~w;x.pendingLanes=w,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=w,x.mutableReadLanes&=w,x.entangledLanes&=w,w=x.entanglements;var Y=x.eventTimes;for(x=x.expirationTimes;0<U;){var re=31-So(U),he=1<<re;w[re]=0,Y[re]=-1,x[re]=-1,U&=~he}}function Kl(x,w){var U=x.entangledLanes|=w;for(x=x.entanglements;U;){var Y=31-So(U),re=1<<Y;re&w|x[Y]&w&&(x[Y]|=w),U&=~re}}var Yi=0;function gg(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var Jl=H.unstable_scheduleCallback,mg=H.unstable_cancelCallback,Dp=H.unstable_shouldYield,To=H.unstable_requestPaint,ho=H.unstable_now,_u=H.unstable_ImmediatePriority,x1=H.unstable_UserBlockingPriority,qh=H.unstable_NormalPriority,Zh=H.unstable_IdlePriority,yg=null,Ec=null;function Tm(x){if(Ec&&typeof Ec.onCommitFiberRoot=="function")try{Ec.onCommitFiberRoot(yg,x,void 0,(x.current.flags&128)===128)}catch(w){}}function M1(x,w){return x===w&&(x!==0||1/x===1/w)||x!==x&&w!==w}var bc=typeof Object.is=="function"?Object.is:M1,ep=null,$h=!1,Ag=!1;function Bm(x){ep===null?ep=[x]:ep.push(x)}function C1(x){$h=!0,Bm(x)}function fo(){if(!Ag&&ep!==null){Ag=!0;var x=0,w=Yi;try{var U=ep;for(Yi=1;x<U.length;x++){var Y=U[x];do Y=Y(!0);while(Y!==null)}ep=null,$h=!1}catch(re){throw ep!==null&&(ep=ep.slice(x+1)),Jl(_u,fo),re}finally{Yi=w,Ag=!1}}return null}var S1=J.ReactCurrentBatchConfig;function ef(x,w){if(bc(x,w))return!0;if(typeof x!="object"||x===null||typeof w!="object"||w===null)return!1;var U=Object.keys(x),Y=Object.keys(w);if(U.length!==Y.length)return!1;for(Y=0;Y<U.length;Y++){var re=U[Y];if(!Gr.call(w,re)||!bc(x[re],w[re]))return!1}return!0}function id(x){switch(x.tag){case 5:return On(x.type);case 16:return On("Lazy");case 13:return On("Suspense");case 19:return On("SuspenseList");case 0:case 2:case 15:return x=vr(x.type,!1),x;case 11:return x=vr(x.type.render,!1),x;case 1:return x=vr(x.type,!0),x;default:return""}}function bl(x,w){if(x&&x.defaultProps){w=te({},w),x=x.defaultProps;for(var U in x)w[U]===void 0&&(w[U]=x[U]);return w}return w}var od=Kr(null),tp=null,np=null,tf=null;function rp(){tf=np=tp=null}function Eu(x,w,U){jo?(Mr(od,w._currentValue),w._currentValue=U):(Mr(od,w._currentValue2),w._currentValue2=U)}function Zd(x){var w=od.current;Cn(od),jo?x._currentValue=w:x._currentValue2=w}function Pp(x,w,U){for(;x!==null;){var Y=x.alternate;if((x.childLanes&w)!==w?(x.childLanes|=w,Y!==null&&(Y.childLanes|=w)):Y!==null&&(Y.childLanes&w)!==w&&(Y.childLanes|=w),x===U)break;x=x.return}}function sd(x,w){tp=x,tf=np=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&w&&(Pa=!0),x.firstContext=null)}function ga(x){var w=jo?x._currentValue:x._currentValue2;if(tf!==x)if(x={context:x,memoizedValue:w,next:null},np===null){if(tp===null)throw Error(ce(308));np=x,tp.dependencies={lanes:0,firstContext:x}}else np=np.next=x;return w}var ql=null,ip=!1;function nf(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rf(x,w){x=x.updateQueue,w.updateQueue===x&&(w.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function Ga(x,w){return{eventTime:x,lane:w,tag:0,payload:null,callback:null,next:null}}function op(x,w){var U=x.updateQueue;U!==null&&(U=U.shared,hs!==null&&x.mode&1&&!(wi&2)?(x=U.interleaved,x===null?(w.next=w,ql===null?ql=[U]:ql.push(U)):(w.next=x.next,x.next=w),U.interleaved=w):(x=U.pending,x===null?w.next=w:(w.next=x.next,x.next=w),U.pending=w))}function $d(x,w,U){if(w=w.updateQueue,w!==null&&(w=w.shared,(U&4194240)!==0)){var Y=w.lanes;Y&=x.pendingLanes,U|=Y,w.lanes=U,Kl(x,U)}}function eh(x,w){var U=x.updateQueue,Y=x.alternate;if(Y!==null&&(Y=Y.updateQueue,U===Y)){var re=null,he=null;if(U=U.firstBaseUpdate,U!==null){do{var Je={eventTime:U.eventTime,lane:U.lane,tag:U.tag,payload:U.payload,callback:U.callback,next:null};he===null?re=he=Je:he=he.next=Je,U=U.next}while(U!==null);he===null?re=he=w:he=he.next=w}else re=he=w;U={baseState:Y.baseState,firstBaseUpdate:re,lastBaseUpdate:he,shared:Y.shared,effects:Y.effects},x.updateQueue=U;return}x=U.lastBaseUpdate,x===null?U.firstBaseUpdate=w:x.next=w,U.lastBaseUpdate=w}function Lp(x,w,U,Y){var re=x.updateQueue;ip=!1;var he=re.firstBaseUpdate,Je=re.lastBaseUpdate,At=re.shared.pending;if(At!==null){re.shared.pending=null;var en=At,Dn=en.next;en.next=null,Je===null?he=Dn:Je.next=Dn,Je=en;var br=x.alternate;br!==null&&(br=br.updateQueue,At=br.lastBaseUpdate,At!==Je&&(At===null?br.firstBaseUpdate=Dn:At.next=Dn,br.lastBaseUpdate=en))}if(he!==null){var gi=re.baseState;Je=0,br=Dn=en=null,At=he;do{var Rr=At.lane,Eo=At.eventTime;if((Y&Rr)===Rr){br!==null&&(br=br.next={eventTime:Eo,lane:0,tag:At.tag,payload:At.payload,callback:At.callback,next:null});e:{var Tr=x,Xs=At;switch(Rr=w,Eo=U,Xs.tag){case 1:if(Tr=Xs.payload,typeof Tr=="function"){gi=Tr.call(Eo,gi,Rr);break e}gi=Tr;break e;case 3:Tr.flags=Tr.flags&-65537|128;case 0:if(Tr=Xs.payload,Rr=typeof Tr=="function"?Tr.call(Eo,gi,Rr):Tr,Rr==null)break e;gi=te({},gi,Rr);break e;case 2:ip=!0}}At.callback!==null&&At.lane!==0&&(x.flags|=64,Rr=re.effects,Rr===null?re.effects=[At]:Rr.push(At))}else Eo={eventTime:Eo,lane:Rr,tag:At.tag,payload:At.payload,callback:At.callback,next:null},br===null?(Dn=br=Eo,en=gi):br=br.next=Eo,Je|=Rr;if(At=At.next,At===null){if(At=re.shared.pending,At===null)break;Rr=At,At=Rr.next,Rr.next=null,re.lastBaseUpdate=Rr,re.shared.pending=null}}while(1);if(br===null&&(en=gi),re.baseState=en,re.firstBaseUpdate=Dn,re.lastBaseUpdate=br,w=re.shared.interleaved,w!==null){re=w;do Je|=re.lane,re=re.next;while(re!==w)}else he===null&&(re.shared.lanes=0);Ul|=Je,x.lanes=Je,x.memoizedState=gi}}function Zl(x,w,U){if(x=w.effects,w.effects=null,x!==null)for(w=0;w<x.length;w++){var Y=x[w],re=Y.callback;if(re!==null){if(Y.callback=null,Y=U,typeof re!="function")throw Error(ce(191,re));re.call(Y)}}}var xc=new E.Component().refs;function Dl(x,w,U,Y){w=x.memoizedState,U=U(Y,w),U=U==null?w:te({},w,U),x.memoizedState=U,x.lanes===0&&(x.updateQueue.baseState=U)}var Is={isMounted:function(x){return(x=x._reactInternals)?Cr(x)===x:!1},enqueueSetState:function(x,w,U){x=x._reactInternals;var Y=uo(),re=jl(x),he=Ga(Y,re);he.payload=w,U!=null&&(he.callback=U),op(x,he),w=wl(x,re,Y),w!==null&&$d(w,x,re)},enqueueReplaceState:function(x,w,U){x=x._reactInternals;var Y=uo(),re=jl(x),he=Ga(Y,re);he.tag=1,he.payload=w,U!=null&&(he.callback=U),op(x,he),w=wl(x,re,Y),w!==null&&$d(w,x,re)},enqueueForceUpdate:function(x,w){x=x._reactInternals;var U=uo(),Y=jl(x),re=Ga(U,Y);re.tag=2,w!=null&&(re.callback=w),op(x,re),w=wl(x,Y,U),w!==null&&$d(w,x,Y)}};function of(x,w,U,Y,re,he,Je){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(Y,he,Je):w.prototype&&w.prototype.isPureReactComponent?!ef(U,Y)||!ef(re,he):!0}function kp(x,w,U){var Y=!1,re=eo,he=w.contextType;return typeof he=="object"&&he!==null?he=ga(he):(re=Di(w)?wa:Po.current,Y=w.contextTypes,he=(Y=Y!=null)?ha(x,re):eo),w=new w(U,he),x.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Is,x.stateNode=w,w._reactInternals=x,Y&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=re,x.__reactInternalMemoizedMaskedChildContext=he),w}function Pl(x,w,U,Y){x=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(U,Y),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(U,Y),w.state!==x&&Is.enqueueReplaceState(w,w.state,null)}function Ba(x,w,U,Y){var re=x.stateNode;re.props=U,re.state=x.memoizedState,re.refs=xc,nf(x);var he=w.contextType;typeof he=="object"&&he!==null?re.context=ga(he):(he=Di(w)?wa:Po.current,re.context=ha(x,he)),re.state=x.memoizedState,he=w.getDerivedStateFromProps,typeof he=="function"&&(Dl(x,w,he,U),re.state=x.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof re.getSnapshotBeforeUpdate=="function"||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(w=re.state,typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount(),w!==re.state&&Is.enqueueReplaceState(re,re.state,null),Lp(x,U,re,Y),re.state=x.memoizedState),typeof re.componentDidMount=="function"&&(x.flags|=4194308)}var go=[],sp=0,sf=null,Za=0,Wo=[],xl=0,$l=null,Mc=1,Cc="";function zp(x,w){go[sp++]=Za,go[sp++]=sf,sf=x,Za=w}function vg(x,w,U){Wo[xl++]=Mc,Wo[xl++]=Cc,Wo[xl++]=$l,$l=x;var Y=Mc;x=Cc;var re=32-So(Y)-1;Y&=~(1<<re),U+=1;var he=32-So(w)+re;if(30<he){var Je=re-re%5;he=(Y&(1<<Je)-1).toString(32),Y>>=Je,re-=Je,Mc=1<<32-So(w)+re|U<<re|Y,Cc=he+x}else Mc=1<<he|U<<re|Y,Cc=x}function ad(x){x.return!==null&&(zp(x,1),vg(x,1,0))}function bu(x){for(;x===sf;)sf=go[--sp],go[sp]=null,Za=go[--sp],go[sp]=null;for(;x===$l;)$l=Wo[--xl],Wo[xl]=null,Cc=Wo[--xl],Wo[xl]=null,Mc=Wo[--xl],Wo[xl]=null}var $a=null,el=null,vo=!1,ld=!1,ma=null;function _g(x,w){var U=hl(5,null,null,0);U.elementType="DELETED",U.stateNode=w,U.return=x,w=x.deletions,w===null?(x.deletions=[U],x.flags|=16):w.push(U)}function Ia(x,w){switch(x.tag){case 5:return w=qc(w,x.type,x.pendingProps),w!==null?(x.stateNode=w,$a=x,el=ur(w),!0):!1;case 6:return w=Zc(w,x.pendingProps),w!==null?(x.stateNode=w,$a=x,el=null,!0):!1;case 13:if(w=rt(w),w!==null){var U=$l!==null?{id:Mc,overflow:Cc}:null;return x.memoizedState={dehydrated:w,treeContext:U,retryLane:1073741824},U=hl(18,null,null,0),U.stateNode=w,U.return=x,x.child=U,$a=x,el=null,!0}return!1;default:return!1}}function fi(x){return(x.mode&1)!==0&&(x.flags&128)===0}function af(x){if(vo){var w=el;if(w){var U=w;if(!Ia(x,w)){if(fi(x))throw Error(ce(418));w=In(U);var Y=$a;w&&Ia(x,w)?_g(Y,U):(x.flags=x.flags&-4097|2,vo=!1,$a=x)}}else{if(fi(x))throw Error(ce(418));x.flags=x.flags&-4097|2,vo=!1,$a=x}}}function yn(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;$a=x}function pi(x){if(!Zi||x!==$a)return!1;if(!vo)return yn(x),vo=!0,!1;if(x.tag!==3&&(x.tag!==5||at(x.type)&&!Ln(x.type,x.memoizedProps))){var w=el;if(w){if(fi(x)){for(x=el;x;)x=In(x);throw Error(ce(418))}for(;w;)_g(x,w),w=In(w)}}if(yn(x),x.tag===13){if(!Zi)throw Error(ce(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(ce(317));el=tt(x)}else el=$a?In(x.stateNode):null;return!0}function Gp(){Zi&&(el=$a=null,ld=vo=!1)}function ap(x){ma===null?ma=[x]:ma.push(x)}function th(x,w,U){if(x=U.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(U._owner){if(U=U._owner,U){if(U.tag!==1)throw Error(ce(309));var Y=U.stateNode}if(!Y)throw Error(ce(147,x));var re=Y,he=""+x;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===he?w.ref:(w=function(Je){var At=re.refs;At===xc&&(At=re.refs={}),Je===null?delete At[he]:At[he]=Je},w._stringRef=he,w)}if(typeof x!="string")throw Error(ce(284));if(!U._owner)throw Error(ce(290,x))}return x}function Ll(x,w){throw x=Object.prototype.toString.call(w),Error(ce(31,x==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":x))}function cd(x){var w=x._init;return w(x._payload)}function Eg(x){function w(Dt,Mt){if(x){var Qt=Dt.deletions;Qt===null?(Dt.deletions=[Mt],Dt.flags|=16):Qt.push(Mt)}}function U(Dt,Mt){if(!x)return null;for(;Mt!==null;)w(Dt,Mt),Mt=Mt.sibling;return null}function Y(Dt,Mt){for(Dt=new Map;Mt!==null;)Mt.key!==null?Dt.set(Mt.key,Mt):Dt.set(Mt.index,Mt),Mt=Mt.sibling;return Dt}function re(Dt,Mt){return Dt=Uc(Dt,Mt),Dt.index=0,Dt.sibling=null,Dt}function he(Dt,Mt,Qt){return Dt.index=Qt,x?(Qt=Dt.alternate,Qt!==null?(Qt=Qt.index,Qt<Mt?(Dt.flags|=2,Mt):Qt):(Dt.flags|=2,Mt)):(Dt.flags|=1048576,Mt)}function Je(Dt){return x&&Dt.alternate===null&&(Dt.flags|=2),Dt}function At(Dt,Mt,Qt,lr){return Mt===null||Mt.tag!==6?(Mt=Nu(Qt,Dt.mode,lr),Mt.return=Dt,Mt):(Mt=re(Mt,Qt),Mt.return=Dt,Mt)}function en(Dt,Mt,Qt,lr){var Dr=Qt.type;return Dr===bt?br(Dt,Mt,Qt.props.children,lr,Qt.key):Mt!==null&&(Mt.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===Pt&&cd(Dr)===Mt.type)?(lr=re(Mt,Qt.props),lr.ref=th(Dt,Mt,Qt),lr.return=Dt,lr):(lr=xd(Qt.type,Qt.key,Qt.props,null,Dt.mode,lr),lr.ref=th(Dt,Mt,Qt),lr.return=Dt,lr)}function Dn(Dt,Mt,Qt,lr){return Mt===null||Mt.tag!==4||Mt.stateNode.containerInfo!==Qt.containerInfo||Mt.stateNode.implementation!==Qt.implementation?(Mt=xf(Qt,Dt.mode,lr),Mt.return=Dt,Mt):(Mt=re(Mt,Qt.children||[]),Mt.return=Dt,Mt)}function br(Dt,Mt,Qt,lr,Dr){return Mt===null||Mt.tag!==7?(Mt=_p(Qt,Dt.mode,lr,Dr),Mt.return=Dt,Mt):(Mt=re(Mt,Qt),Mt.return=Dt,Mt)}function gi(Dt,Mt,Qt){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return Mt=Nu(""+Mt,Dt.mode,Qt),Mt.return=Dt,Mt;if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case pe:return Qt=xd(Mt.type,Mt.key,Mt.props,null,Dt.mode,Qt),Qt.ref=th(Dt,null,Mt),Qt.return=Dt,Qt;case de:return Mt=xf(Mt,Dt.mode,Qt),Mt.return=Dt,Mt;case Pt:var lr=Mt._init;return gi(Dt,lr(Mt._payload),Qt)}if(hi(Mt)||zt(Mt))return Mt=_p(Mt,Dt.mode,Qt,null),Mt.return=Dt,Mt;Ll(Dt,Mt)}return null}function Rr(Dt,Mt,Qt,lr){var Dr=Mt!==null?Mt.key:null;if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return Dr!==null?null:At(Dt,Mt,""+Qt,lr);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case pe:return Qt.key===Dr?en(Dt,Mt,Qt,lr):null;case de:return Qt.key===Dr?Dn(Dt,Mt,Qt,lr):null;case Pt:return Dr=Qt._init,Rr(Dt,Mt,Dr(Qt._payload),lr)}if(hi(Qt)||zt(Qt))return Dr!==null?null:br(Dt,Mt,Qt,lr,null);Ll(Dt,Qt)}return null}function Eo(Dt,Mt,Qt,lr,Dr){if(typeof lr=="string"&&lr!==""||typeof lr=="number")return Dt=Dt.get(Qt)||null,At(Mt,Dt,""+lr,Dr);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case pe:return Dt=Dt.get(lr.key===null?Qt:lr.key)||null,en(Mt,Dt,lr,Dr);case de:return Dt=Dt.get(lr.key===null?Qt:lr.key)||null,Dn(Mt,Dt,lr,Dr);case Pt:var Ti=lr._init;return Eo(Dt,Mt,Qt,Ti(lr._payload),Dr)}if(hi(lr)||zt(lr))return Dt=Dt.get(Qt)||null,br(Mt,Dt,lr,Dr,null);Ll(Mt,lr)}return null}function Tr(Dt,Mt,Qt,lr){for(var Dr=null,Ti=null,_i=Mt,si=Mt=0,sa=null;_i!==null&&si<Qt.length;si++){_i.index>si?(sa=_i,_i=null):sa=_i.sibling;var to=Rr(Dt,_i,Qt[si],lr);if(to===null){_i===null&&(_i=sa);break}x&&_i&&to.alternate===null&&w(Dt,_i),Mt=he(to,Mt,si),Ti===null?Dr=to:Ti.sibling=to,Ti=to,_i=sa}if(si===Qt.length)return U(Dt,_i),vo&&zp(Dt,si),Dr;if(_i===null){for(;si<Qt.length;si++)_i=gi(Dt,Qt[si],lr),_i!==null&&(Mt=he(_i,Mt,si),Ti===null?Dr=_i:Ti.sibling=_i,Ti=_i);return vo&&zp(Dt,si),Dr}for(_i=Y(Dt,_i);si<Qt.length;si++)sa=Eo(_i,Dt,si,Qt[si],lr),sa!==null&&(x&&sa.alternate!==null&&_i.delete(sa.key===null?si:sa.key),Mt=he(sa,Mt,si),Ti===null?Dr=sa:Ti.sibling=sa,Ti=sa);return x&&_i.forEach(function($p){return w(Dt,$p)}),vo&&zp(Dt,si),Dr}function Xs(Dt,Mt,Qt,lr){var Dr=zt(Qt);if(typeof Dr!="function")throw Error(ce(150));if(Qt=Dr.call(Qt),Qt==null)throw Error(ce(151));for(var Ti=Dr=null,_i=Mt,si=Mt=0,sa=null,to=Qt.next();_i!==null&&!to.done;si++,to=Qt.next()){_i.index>si?(sa=_i,_i=null):sa=_i.sibling;var $p=Rr(Dt,_i,to.value,lr);if($p===null){_i===null&&(_i=sa);break}x&&_i&&$p.alternate===null&&w(Dt,_i),Mt=he($p,Mt,si),Ti===null?Dr=$p:Ti.sibling=$p,Ti=$p,_i=sa}if(to.done)return U(Dt,_i),vo&&zp(Dt,si),Dr;if(_i===null){for(;!to.done;si++,to=Qt.next())to=gi(Dt,to.value,lr),to!==null&&(Mt=he(to,Mt,si),Ti===null?Dr=to:Ti.sibling=to,Ti=to);return vo&&zp(Dt,si),Dr}for(_i=Y(Dt,_i);!to.done;si++,to=Qt.next())to=Eo(_i,Dt,si,to.value,lr),to!==null&&(x&&to.alternate!==null&&_i.delete(to.key===null?si:to.key),Mt=he(to,Mt,si),Ti===null?Dr=to:Ti.sibling=to,Ti=to);return x&&_i.forEach(function(D1){return w(Dt,D1)}),vo&&zp(Dt,si),Dr}function Hl(Dt,Mt,Qt,lr){if(typeof Qt=="object"&&Qt!==null&&Qt.type===bt&&Qt.key===null&&(Qt=Qt.props.children),typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case pe:e:{for(var Dr=Qt.key,Ti=Mt;Ti!==null;){if(Ti.key===Dr){if(Dr=Qt.type,Dr===bt){if(Ti.tag===7){U(Dt,Ti.sibling),Mt=re(Ti,Qt.props.children),Mt.return=Dt,Dt=Mt;break e}}else if(Ti.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===Pt&&cd(Dr)===Ti.type){U(Dt,Ti.sibling),Mt=re(Ti,Qt.props),Mt.ref=th(Dt,Ti,Qt),Mt.return=Dt,Dt=Mt;break e}U(Dt,Ti);break}else w(Dt,Ti);Ti=Ti.sibling}Qt.type===bt?(Mt=_p(Qt.props.children,Dt.mode,lr,Qt.key),Mt.return=Dt,Dt=Mt):(lr=xd(Qt.type,Qt.key,Qt.props,null,Dt.mode,lr),lr.ref=th(Dt,Mt,Qt),lr.return=Dt,Dt=lr)}return Je(Dt);case de:e:{for(Ti=Qt.key;Mt!==null;){if(Mt.key===Ti)if(Mt.tag===4&&Mt.stateNode.containerInfo===Qt.containerInfo&&Mt.stateNode.implementation===Qt.implementation){U(Dt,Mt.sibling),Mt=re(Mt,Qt.children||[]),Mt.return=Dt,Dt=Mt;break e}else{U(Dt,Mt);break}else w(Dt,Mt);Mt=Mt.sibling}Mt=xf(Qt,Dt.mode,lr),Mt.return=Dt,Dt=Mt}return Je(Dt);case Pt:return Ti=Qt._init,Hl(Dt,Mt,Ti(Qt._payload),lr)}if(hi(Qt))return Tr(Dt,Mt,Qt,lr);if(zt(Qt))return Xs(Dt,Mt,Qt,lr);Ll(Dt,Qt)}return typeof Qt=="string"&&Qt!==""||typeof Qt=="number"?(Qt=""+Qt,Mt!==null&&Mt.tag===6?(U(Dt,Mt.sibling),Mt=re(Mt,Qt),Mt.return=Dt,Dt=Mt):(U(Dt,Mt),Mt=Nu(Qt,Dt.mode,lr),Mt.return=Dt,Dt=Mt),Je(Dt)):U(Dt,Mt)}return Hl}var xu=Eg(!0),pd=Eg(!1),Sc={},tl=Kr(Sc),ud=Kr(Sc),dd=Kr(Sc);function wc(x){if(x===Sc)throw Error(ce(174));return x}function bg(x,w){Mr(dd,w),Mr(ud,x),Mr(tl,Sc),x=Vn(w),Cn(tl),Mr(tl,x)}function nh(){Cn(tl),Cn(ud),Cn(dd)}function Im(x){var w=wc(dd.current),U=wc(tl.current);w=$t(U,x.type,w),U!==w&&(Mr(ud,x),Mr(tl,w))}function nl(x){ud.current===x&&(Cn(tl),Cn(ud))}var _o=Kr(0);function Up(x){for(var w=x;w!==null;){if(w.tag===13){var U=w.memoizedState;if(U!==null&&(U=U.dehydrated,U===null||xt(U)||sn(U)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var rh=[];function lp(){for(var x=0;x<rh.length;x++){var w=rh[x];jo?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}rh.length=0}var hd=J.ReactCurrentDispatcher,kl=J.ReactCurrentBatchConfig,Bo=0,Qr=null,Rs=null,dr=null,Tc=!1,cp=!1,Bc=0,lf=0;function us(){throw Error(ce(321))}function ya(x,w){if(w===null)return!1;for(var U=0;U<w.length&&U<x.length;U++)if(!bc(x[U],w[U]))return!1;return!0}function Qe(x,w,U,Y,re,he){if(Bo=he,Qr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,hd.current=x===null||x.memoizedState===null?ah:ol,x=U(Y,re),cp){he=0;do{if(cp=!1,Bc=0,25<=he)throw Error(ce(301));he+=1,dr=Rs=null,w.updateQueue=null,hd.current=cf,x=U(Y,re)}while(cp)}if(hd.current=tc,w=Rs!==null&&Rs.next!==null,Bo=0,dr=Rs=Qr=null,Tc=!1,w)throw Error(ce(300));return x}function rl(){var x=Bc!==0;return Bc=0,x}function Vs(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Qr.memoizedState=dr=x:dr=dr.next=x,dr}function Es(){if(Rs===null){var x=Qr.alternate;x=x!==null?x.memoizedState:null}else x=Rs.next;var w=dr===null?Qr.memoizedState:dr.next;if(w!==null)dr=w,Rs=x;else{if(x===null)throw Error(ce(310));Rs=x,x={memoizedState:Rs.memoizedState,baseState:Rs.baseState,baseQueue:Rs.baseQueue,queue:Rs.queue,next:null},dr===null?Qr.memoizedState=dr=x:dr=dr.next=x}return dr}function Qs(x,w){return typeof w=="function"?w(x):w}function Ml(x){var w=Es(),U=w.queue;if(U===null)throw Error(ce(311));U.lastRenderedReducer=x;var Y=Rs,re=Y.baseQueue,he=U.pending;if(he!==null){if(re!==null){var Je=re.next;re.next=he.next,he.next=Je}Y.baseQueue=re=he,U.pending=null}if(re!==null){he=re.next,Y=Y.baseState;var At=Je=null,en=null,Dn=he;do{var br=Dn.lane;if((Bo&br)===br)en!==null&&(en=en.next={lane:0,action:Dn.action,hasEagerState:Dn.hasEagerState,eagerState:Dn.eagerState,next:null}),Y=Dn.hasEagerState?Dn.eagerState:x(Y,Dn.action);else{var gi={lane:br,action:Dn.action,hasEagerState:Dn.hasEagerState,eagerState:Dn.eagerState,next:null};en===null?(At=en=gi,Je=Y):en=en.next=gi,Qr.lanes|=br,Ul|=br}Dn=Dn.next}while(Dn!==null&&Dn!==he);en===null?Je=Y:en.next=At,bc(Y,w.memoizedState)||(Pa=!0),w.memoizedState=Y,w.baseState=Je,w.baseQueue=en,U.lastRenderedState=Y}if(x=U.interleaved,x!==null){re=x;do he=re.lane,Qr.lanes|=he,Ul|=he,re=re.next;while(re!==x)}else re===null&&(U.lanes=0);return[w.memoizedState,U.dispatch]}function pp(x){var w=Es(),U=w.queue;if(U===null)throw Error(ce(311));U.lastRenderedReducer=x;var Y=U.dispatch,re=U.pending,he=w.memoizedState;if(re!==null){U.pending=null;var Je=re=re.next;do he=x(he,Je.action),Je=Je.next;while(Je!==re);bc(he,w.memoizedState)||(Pa=!0),w.memoizedState=he,w.baseQueue===null&&(w.baseState=he),U.lastRenderedState=he}return[he,Y]}function Np(){}function jp(x,w){var U=Qr,Y=Es(),re=w(),he=!bc(Y.memoizedState,re);if(he&&(Y.memoizedState=re,Pa=!0),Y=Y.queue,Fs(Hp.bind(null,U,Y,x),[x]),Y.getSnapshot!==w||he||dr!==null&&dr.memoizedState.tag&1){if(U.flags|=2048,Wp(9,Ic.bind(null,U,Y,re,w),void 0,null),hs===null)throw Error(ce(349));Bo&30||Ra(U,w,re)}return re}function Ra(x,w,U){x.flags|=16384,x={getSnapshot:w,value:U},w=Qr.updateQueue,w===null?(w={lastEffect:null,stores:null},Qr.updateQueue=w,w.stores=[x]):(U=w.stores,U===null?w.stores=[x]:U.push(x))}function Ic(x,w,U,Y){w.value=U,w.getSnapshot=Y,up(w)&&wl(x,1,-1)}function Hp(x,w,U){return U(function(){up(w)&&wl(x,1,-1)})}function up(x){var w=x.getSnapshot;x=x.value;try{var U=w();return!bc(x,U)}catch(Y){return!0}}function dp(x){var w=Vs();return typeof x=="function"&&(x=x()),w.memoizedState=w.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:x},w.queue=x,x=x.dispatch=ii.bind(null,Qr,x),[w.memoizedState,x]}function Wp(x,w,U,Y){return x={tag:x,create:w,destroy:U,deps:Y,next:null},w=Qr.updateQueue,w===null?(w={lastEffect:null,stores:null},Qr.updateQueue=w,w.lastEffect=x.next=x):(U=w.lastEffect,U===null?w.lastEffect=x.next=x:(Y=U.next,U.next=x,x.next=Y,w.lastEffect=x)),x}function Hn(){return Es().memoizedState}function na(x,w,U,Y){var re=Vs();Qr.flags|=x,re.memoizedState=Wp(1|w,U,void 0,Y===void 0?null:Y)}function Hi(x,w,U,Y){var re=Es();Y=Y===void 0?null:Y;var he=void 0;if(Rs!==null){var Je=Rs.memoizedState;if(he=Je.destroy,Y!==null&&ya(Y,Je.deps)){re.memoizedState=Wp(w,U,he,Y);return}}Qr.flags|=x,re.memoizedState=Wp(1|w,U,he,Y)}function ec(x,w){return na(8390656,8,x,w)}function Fs(x,w){return Hi(2048,8,x,w)}function Vp(x,w){return Hi(4,2,x,w)}function Fa(x,w){return Hi(4,4,x,w)}function zl(x,w){if(typeof w=="function")return x=x(),w(x),function(){w(null)};if(w!=null)return x=x(),w.current=x,function(){w.current=null}}function fd(x,w,U){return U=U!=null?U.concat([x]):null,Hi(4,4,zl.bind(null,w,x),U)}function Mu(){}function Oa(x,w){var U=Es();w=w===void 0?null:w;var Y=U.memoizedState;return Y!==null&&w!==null&&ya(w,Y[1])?Y[0]:(U.memoizedState=[x,w],x)}function ih(x,w){var U=Es();w=w===void 0?null:w;var Y=U.memoizedState;return Y!==null&&w!==null&&ya(w,Y[1])?Y[0]:(x=x(),U.memoizedState=[x,w],x)}function gd(x,w){var U=Yi;Yi=U!==0&&4>U?U:4,x(!0);var Y=kl.transition;kl.transition={};try{x(!1),w()}finally{Yi=U,kl.transition=Y}}function oh(){return Es().memoizedState}function Ua(x,w,U){var Y=jl(x);U={lane:Y,action:U,hasEagerState:!1,eagerState:null,next:null},ra(x)?il(w,U):(sh(x,w,U),U=uo(),x=wl(x,Y,U),x!==null&&md(x,w,Y))}function ii(x,w,U){var Y=jl(x),re={lane:Y,action:U,hasEagerState:!1,eagerState:null,next:null};if(ra(x))il(w,re);else{sh(x,w,re);var he=x.alternate;if(x.lanes===0&&(he===null||he.lanes===0)&&(he=w.lastRenderedReducer,he!==null))try{var Je=w.lastRenderedState,At=he(Je,U);if(re.hasEagerState=!0,re.eagerState=At,bc(At,Je))return}catch(en){}finally{}U=uo(),x=wl(x,Y,U),x!==null&&md(x,w,Y)}}function ra(x){var w=x.alternate;return x===Qr||w!==null&&w===Qr}function il(x,w){cp=Tc=!0;var U=x.pending;U===null?w.next=w:(w.next=U.next,U.next=w),x.pending=w}function sh(x,w,U){hs!==null&&x.mode&1&&!(wi&2)?(x=w.interleaved,x===null?(U.next=U,ql===null?ql=[w]:ql.push(w)):(U.next=x.next,x.next=U),w.interleaved=U):(x=w.pending,x===null?U.next=U:(U.next=x.next,x.next=U),w.pending=U)}function md(x,w,U){if(U&4194240){var Y=w.lanes;Y&=x.pendingLanes,U|=Y,w.lanes=U,Kl(x,U)}}var tc={readContext:ga,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},ah={readContext:ga,useCallback:function(x,w){return Vs().memoizedState=[x,w===void 0?null:w],x},useContext:ga,useEffect:ec,useImperativeHandle:function(x,w,U){return U=U!=null?U.concat([x]):null,na(4194308,4,zl.bind(null,w,x),U)},useLayoutEffect:function(x,w){return na(4194308,4,x,w)},useInsertionEffect:function(x,w){return na(4,2,x,w)},useMemo:function(x,w){var U=Vs();return w=w===void 0?null:w,x=x(),U.memoizedState=[x,w],x},useReducer:function(x,w,U){var Y=Vs();return w=U!==void 0?U(w):w,Y.memoizedState=Y.baseState=w,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:w},Y.queue=x,x=x.dispatch=Ua.bind(null,Qr,x),[Y.memoizedState,x]},useRef:function(x){var w=Vs();return x={current:x},w.memoizedState=x},useState:dp,useDebugValue:Mu,useDeferredValue:function(x){var w=dp(x),U=w[0],Y=w[1];return ec(function(){var re=kl.transition;kl.transition={};try{Y(x)}finally{kl.transition=re}},[x]),U},useTransition:function(){var x=dp(!1),w=x[0];return x=gd.bind(null,x[1]),Vs().memoizedState=x,[w,x]},useMutableSource:function(){},useSyncExternalStore:function(x,w,U){var Y=Qr,re=Vs();if(vo){if(U===void 0)throw Error(ce(407));U=U()}else{if(U=w(),hs===null)throw Error(ce(349));Bo&30||Ra(Y,w,U)}re.memoizedState=U;var he={value:U,getSnapshot:w};return re.queue=he,ec(Hp.bind(null,Y,he,x),[x]),Y.flags|=2048,Wp(9,Ic.bind(null,Y,he,U,w),void 0,null),U},useId:function(){var x=Vs(),w=hs.identifierPrefix;if(vo){var U=Cc,Y=Mc;U=(Y&~(1<<32-So(Y)-1)).toString(32)+U,w=":"+w+"R"+U,U=Bc++,0<U&&(w+="H"+U.toString(32)),w+=":"}else U=lf++,w=":"+w+"r"+U.toString(32)+":";return x.memoizedState=w},unstable_isNewReconciler:!1},ol={readContext:ga,useCallback:Oa,useContext:ga,useEffect:Fs,useImperativeHandle:fd,useInsertionEffect:Vp,useLayoutEffect:Fa,useMemo:ih,useReducer:Ml,useRef:Hn,useState:function(){return Ml(Qs)},useDebugValue:Mu,useDeferredValue:function(x){var w=Ml(Qs),U=w[0],Y=w[1];return Fs(function(){var re=kl.transition;kl.transition={};try{Y(x)}finally{kl.transition=re}},[x]),U},useTransition:function(){var x=Ml(Qs)[0],w=Es().memoizedState;return[x,w]},useMutableSource:Np,useSyncExternalStore:jp,useId:oh,unstable_isNewReconciler:!1},cf={readContext:ga,useCallback:Oa,useContext:ga,useEffect:Fs,useImperativeHandle:fd,useInsertionEffect:Vp,useLayoutEffect:Fa,useMemo:ih,useReducer:pp,useRef:Hn,useState:function(){return pp(Qs)},useDebugValue:Mu,useDeferredValue:function(x){var w=pp(Qs),U=w[0],Y=w[1];return Fs(function(){var re=kl.transition;kl.transition={};try{Y(x)}finally{kl.transition=re}},[x]),U},useTransition:function(){var x=pp(Qs)[0],w=Es().memoizedState;return[x,w]},useMutableSource:Np,useSyncExternalStore:jp,useId:oh,unstable_isNewReconciler:!1};function pf(x,w){try{var U="",Y=w;do U+=id(Y),Y=Y.return;while(Y);var re=U}catch(he){re=`
Error generating stack: `+he.message+`
`+he.stack}return{value:x,source:w,stack:re}}function Cu(x,w){try{S.error(w.value)}catch(U){setTimeout(function(){throw U})}}var uf=typeof WeakMap=="function"?WeakMap:Map;function Gl(x,w,U){U=Ga(-1,U),U.tag=3,U.payload={element:null};var Y=w.value;return U.callback=function(){ul||(ul=!0,zc=Y),Cu(x,w)},U}function yd(x,w,U){U=Ga(-1,U),U.tag=3;var Y=x.type.getDerivedStateFromError;if(typeof Y=="function"){var re=w.value;U.payload=function(){return Y(re)},U.callback=function(){Cu(x,w)}}var he=x.stateNode;return he!==null&&typeof he.componentDidCatch=="function"&&(U.callback=function(){Cu(x,w),typeof Y!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var Je=w.stack;this.componentDidCatch(w.value,{componentStack:Je!==null?Je:""})}),U}function Rc(x,w,U){var Y=x.pingCache;if(Y===null){Y=x.pingCache=new uf;var re=new Set;Y.set(w,re)}else re=Y.get(w),re===void 0&&(re=new Set,Y.set(w,re));re.has(U)||(re.add(U),x=bd.bind(null,x,w,U),w.then(x,x))}function Fc(x){do{var w;if((w=x.tag===13)&&(w=x.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return x;x=x.return}while(x!==null);return null}function lh(x,w,U,Y,re){return x.mode&1?(x.flags|=65536,x.lanes=re,x):(x===w?x.flags|=65536:(x.flags|=128,U.flags|=131072,U.flags&=-52805,U.tag===1&&(U.alternate===null?U.tag=17:(w=Ga(-1,1),w.tag=2,op(U,w))),U.lanes|=1),x)}function sl(x){x.flags|=4}function Rm(x,w){if(x!==null&&x.child===w.child)return!0;if(w.flags&16)return!1;for(x=w.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var ch,Ad,ph,uh;if(ri)ch=function(x,w){for(var U=w.child;U!==null;){if(U.tag===5||U.tag===6)Li(x,U.stateNode);else if(U.tag!==4&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===w)break;for(;U.sibling===null;){if(U.return===null||U.return===w)return;U=U.return}U.sibling.return=U.return,U=U.sibling}},Ad=function(){},ph=function(x,w,U,Y,re){if(x=x.memoizedProps,x!==Y){var he=w.stateNode,Je=wc(tl.current);U=Tn(he,U,x,Y,re,Je),(w.updateQueue=U)&&sl(w)}},uh=function(x,w,U,Y){U!==Y&&sl(w)};else if(ro){ch=function(x,w,U,Y){for(var re=w.child;re!==null;){if(re.tag===5){var he=re.stateNode;U&&Y&&(he=El(he,re.type,re.memoizedProps,re)),Li(x,he)}else if(re.tag===6)he=re.stateNode,U&&Y&&(he=cs(he,re.memoizedProps,re)),Li(x,he);else if(re.tag!==4){if(re.tag===22&&re.memoizedState!==null)he=re.child,he!==null&&(he.return=re),ch(x,re,!0,!0);else if(re.child!==null){re.child.return=re,re=re.child;continue}}if(re===w)break;for(;re.sibling===null;){if(re.return===null||re.return===w)return;re=re.return}re.sibling.return=re.return,re=re.sibling}};var Fm=function(x,w,U,Y){for(var re=w.child;re!==null;){if(re.tag===5){var he=re.stateNode;U&&Y&&(he=El(he,re.type,re.memoizedProps,re)),qa(x,he)}else if(re.tag===6)he=re.stateNode,U&&Y&&(he=cs(he,re.memoizedProps,re)),qa(x,he);else if(re.tag!==4){if(re.tag===22&&re.memoizedState!==null)he=re.child,he!==null&&(he.return=re),Fm(x,re,!0,!0);else if(re.child!==null){re.child.return=re,re=re.child;continue}}if(re===w)break;for(;re.sibling===null;){if(re.return===null||re.return===w)return;re=re.return}re.sibling.return=re.return,re=re.sibling}};Ad=function(x,w){var U=w.stateNode;if(!Rm(x,w)){x=U.containerInfo;var Y=Co(x);Fm(Y,w,!1,!1),U.pendingChildren=Y,sl(w),Ol(x,Y)}},ph=function(x,w,U,Y,re){var he=x.stateNode,Je=x.memoizedProps;if((x=Rm(x,w))&&Je===Y)w.stateNode=he;else{var At=w.stateNode,en=wc(tl.current),Dn=null;Je!==Y&&(Dn=Tn(At,U,Je,Y,re,en)),x&&Dn===null?w.stateNode=he:(he=_s(he,Dn,U,Je,Y,w,x,At),Mn(he,U,Y,re,en)&&sl(w),w.stateNode=he,x?sl(w):ch(he,w,!1,!1))}},uh=function(x,w,U,Y){U!==Y?(x=wc(dd.current),U=wc(tl.current),w.stateNode=pr(Y,x,U,w),sl(w)):w.stateNode=x.stateNode}}else Ad=function(){},ph=function(){},uh=function(){};function Su(x,w){if(!vo)switch(x.tailMode){case"hidden":w=x.tail;for(var U=null;w!==null;)w.alternate!==null&&(U=w),w=w.sibling;U===null?x.tail=null:U.sibling=null;break;case"collapsed":U=x.tail;for(var Y=null;U!==null;)U.alternate!==null&&(Y=U),U=U.sibling;Y===null?w||x.tail===null?x.tail=null:x.tail.sibling=null:Y.sibling=null}}function $r(x){var w=x.alternate!==null&&x.alternate.child===x.child,U=0,Y=0;if(w)for(var re=x.child;re!==null;)U|=re.lanes|re.childLanes,Y|=re.subtreeFlags&14680064,Y|=re.flags&14680064,re.return=x,re=re.sibling;else for(re=x.child;re!==null;)U|=re.lanes|re.childLanes,Y|=re.subtreeFlags,Y|=re.flags,re.return=x,re=re.sibling;return x.subtreeFlags|=Y,x.childLanes=U,w}function Da(x,w,U){var Y=w.pendingProps;switch(bu(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(w),null;case 1:return Di(w.type)&&Ac(),$r(w),null;case 3:return Y=w.stateNode,nh(),Cn(es),Cn(Po),lp(),Y.pendingContext&&(Y.context=Y.pendingContext,Y.pendingContext=null),(x===null||x.child===null)&&(pi(w)?sl(w):x===null||x.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,ma!==null&&(Rg(ma),ma=null))),Ad(x,w),$r(w),null;case 5:nl(w),U=wc(dd.current);var re=w.type;if(x!==null&&w.stateNode!=null)ph(x,w,re,Y,U),x.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!Y){if(w.stateNode===null)throw Error(ce(166));return $r(w),null}if(x=wc(tl.current),pi(w)){if(!Zi)throw Error(ce(175));x=Ie(w.stateNode,w.type,w.memoizedProps,U,x,w,!ld),w.updateQueue=x,x!==null&&sl(w)}else{var he=Wr(re,Y,U,x,w);ch(he,w,!1,!1),w.stateNode=he,Mn(he,re,Y,U,x)&&sl(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return $r(w),null;case 6:if(x&&w.stateNode!=null)uh(x,w,x.memoizedProps,Y);else{if(typeof Y!="string"&&w.stateNode===null)throw Error(ce(166));if(x=wc(dd.current),U=wc(tl.current),pi(w)){if(!Zi)throw Error(ce(176));if(x=w.stateNode,Y=w.memoizedProps,(U=it(x,Y,w,!ld))&&(re=$a,re!==null))switch(he=(re.mode&1)!==0,re.tag){case 3:lt(re.stateNode.containerInfo,x,Y,he);break;case 5:Rt(re.type,re.memoizedProps,re.stateNode,x,Y,he)}U&&sl(w)}else w.stateNode=pr(Y,x,U,w)}return $r(w),null;case 13:if(Cn(_o),Y=w.memoizedState,vo&&el!==null&&w.mode&1&&!(w.flags&128)){for(x=el;x;)x=In(x);return Gp(),w.flags|=98560,w}if(Y!==null&&Y.dehydrated!==null){if(Y=pi(w),x===null){if(!Y)throw Error(ce(318));if(!Zi)throw Error(ce(344));if(x=w.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(ce(317));Le(x,w)}else Gp(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return $r(w),null}return ma!==null&&(Rg(ma),ma=null),w.flags&128?(w.lanes=U,w):(Y=Y!==null,U=!1,x===null?pi(w):U=x.memoizedState!==null,Y&&!U&&(w.child.flags|=8192,w.mode&1&&(x===null||_o.current&1?Xo===0&&(Xo=3):Dm())),w.updateQueue!==null&&(w.flags|=4),$r(w),null);case 4:return nh(),Ad(x,w),x===null&&As(w.stateNode.containerInfo),$r(w),null;case 10:return Zd(w.type._context),$r(w),null;case 17:return Di(w.type)&&Ac(),$r(w),null;case 19:if(Cn(_o),re=w.memoizedState,re===null)return $r(w),null;if(Y=(w.flags&128)!==0,he=re.rendering,he===null)if(Y)Su(re,!1);else{if(Xo!==0||x!==null&&x.flags&128)for(x=w.child;x!==null;){if(he=Up(x),he!==null){for(w.flags|=128,Su(re,!1),x=he.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),w.subtreeFlags=0,x=U,Y=w.child;Y!==null;)U=Y,re=x,U.flags&=14680066,he=U.alternate,he===null?(U.childLanes=0,U.lanes=re,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=he.childLanes,U.lanes=he.lanes,U.child=he.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=he.memoizedProps,U.memoizedState=he.memoizedState,U.updateQueue=he.updateQueue,U.type=he.type,re=he.dependencies,U.dependencies=re===null?null:{lanes:re.lanes,firstContext:re.firstContext}),Y=Y.sibling;return Mr(_o,_o.current&1|2),w.child}x=x.sibling}re.tail!==null&&ho()>Bg&&(w.flags|=128,Y=!0,Su(re,!1),w.lanes=4194304)}else{if(!Y)if(x=Up(he),x!==null){if(w.flags|=128,Y=!0,x=x.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),Su(re,!0),re.tail===null&&re.tailMode==="hidden"&&!he.alternate&&!vo)return $r(w),null}else 2*ho()-re.renderingStartTime>Bg&&U!==1073741824&&(w.flags|=128,Y=!0,Su(re,!1),w.lanes=4194304);re.isBackwards?(he.sibling=w.child,w.child=he):(x=re.last,x!==null?x.sibling=he:w.child=he,re.last=he)}return re.tail!==null?(w=re.tail,re.rendering=w,re.tail=w.sibling,re.renderingStartTime=ho(),w.sibling=null,x=_o.current,Mr(_o,Y?x&1|2:x&1),w):($r(w),null);case 22:case 23:return Eh(),Y=w.memoizedState!==null,x!==null&&x.memoizedState!==null!==Y&&(w.flags|=8192),Y&&w.mode&1?Sl&1073741824&&($r(w),ri&&w.subtreeFlags&6&&(w.flags|=8192)):$r(w),null;case 24:return null;case 25:return null}throw Error(ce(156,w.tag))}var Oc=J.ReactCurrentOwner,Pa=!1;function Io(x,w,U,Y){w.child=x===null?pd(w,null,U,Y):xu(w,x.child,U,Y)}function Qp(x,w,U,Y,re){U=U.render;var he=w.ref;return sd(w,re),Y=Qe(x,w,U,Y,he,re),U=rl(),x!==null&&!Pa?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~re,Cl(x,w,re)):(vo&&U&&ad(w),w.flags|=1,Io(x,w,Y,re),w.child)}function nc(x,w,U,Y,re){if(x===null){var he=U.type;return typeof he=="function"&&!vp(he)&&he.defaultProps===void 0&&U.compare===null&&U.defaultProps===void 0?(w.tag=15,w.type=he,xg(x,w,he,Y,re)):(x=xd(U.type,null,Y,w,w.mode,re),x.ref=w.ref,x.return=w,w.child=x)}if(he=x.child,!(x.lanes&re)){var Je=he.memoizedProps;if(U=U.compare,U=U!==null?U:ef,U(Je,Y)&&x.ref===w.ref)return Cl(x,w,re)}return w.flags|=1,x=Uc(he,Y),x.ref=w.ref,x.return=w,w.child=x}function xg(x,w,U,Y,re){if(x!==null&&ef(x.memoizedProps,Y)&&x.ref===w.ref)if(Pa=!1,(x.lanes&re)!==0)x.flags&131072&&(Pa=!0);else return w.lanes=x.lanes,Cl(x,w,re);return Xp(x,w,U,Y,re)}function df(x,w,U){var Y=w.pendingProps,re=Y.children,he=x!==null?x.memoizedState:null;if(Y.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},Mr(Qo,Sl),Sl|=U;else if(U&1073741824)w.memoizedState={baseLanes:0,cachePool:null},Y=he!==null?he.baseLanes:U,Mr(Qo,Sl),Sl|=Y;else return x=he!==null?he.baseLanes|U:U,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:x,cachePool:null},w.updateQueue=null,Mr(Qo,Sl),Sl|=x,null;else he!==null?(Y=he.baseLanes|U,w.memoizedState=null):Y=U,Mr(Qo,Sl),Sl|=Y;return Io(x,w,re,U),w.child}function hf(x,w){var U=w.ref;(x===null&&U!==null||x!==null&&x.ref!==U)&&(w.flags|=512,w.flags|=2097152)}function Xp(x,w,U,Y,re){var he=Di(U)?wa:Po.current;return he=ha(w,he),sd(w,re),U=Qe(x,w,U,Y,he,re),Y=rl(),x!==null&&!Pa?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~re,Cl(x,w,re)):(vo&&Y&&ad(w),w.flags|=1,Io(x,w,U,re),w.child)}function Yp(x,w,U,Y,re){if(Di(U)){var he=!0;io(w)}else he=!1;if(sd(w,re),w.stateNode===null)x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),kp(w,U,Y),Ba(w,U,Y,re),Y=!0;else if(x===null){var Je=w.stateNode,At=w.memoizedProps;Je.props=At;var en=Je.context,Dn=U.contextType;typeof Dn=="object"&&Dn!==null?Dn=ga(Dn):(Dn=Di(U)?wa:Po.current,Dn=ha(w,Dn));var br=U.getDerivedStateFromProps,gi=typeof br=="function"||typeof Je.getSnapshotBeforeUpdate=="function";gi||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(At!==Y||en!==Dn)&&Pl(w,Je,Y,Dn),ip=!1;var Rr=w.memoizedState;Je.state=Rr,Lp(w,Y,Je,re),en=w.memoizedState,At!==Y||Rr!==en||es.current||ip?(typeof br=="function"&&(Dl(w,U,br,Y),en=w.memoizedState),(At=ip||of(w,U,At,Y,Rr,en,Dn))?(gi||typeof Je.UNSAFE_componentWillMount!="function"&&typeof Je.componentWillMount!="function"||(typeof Je.componentWillMount=="function"&&Je.componentWillMount(),typeof Je.UNSAFE_componentWillMount=="function"&&Je.UNSAFE_componentWillMount()),typeof Je.componentDidMount=="function"&&(w.flags|=4194308)):(typeof Je.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=Y,w.memoizedState=en),Je.props=Y,Je.state=en,Je.context=Dn,Y=At):(typeof Je.componentDidMount=="function"&&(w.flags|=4194308),Y=!1)}else{Je=w.stateNode,rf(x,w),At=w.memoizedProps,Dn=w.type===w.elementType?At:bl(w.type,At),Je.props=Dn,gi=w.pendingProps,Rr=Je.context,en=U.contextType,typeof en=="object"&&en!==null?en=ga(en):(en=Di(U)?wa:Po.current,en=ha(w,en));var Eo=U.getDerivedStateFromProps;(br=typeof Eo=="function"||typeof Je.getSnapshotBeforeUpdate=="function")||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(At!==gi||Rr!==en)&&Pl(w,Je,Y,en),ip=!1,Rr=w.memoizedState,Je.state=Rr,Lp(w,Y,Je,re);var Tr=w.memoizedState;At!==gi||Rr!==Tr||es.current||ip?(typeof Eo=="function"&&(Dl(w,U,Eo,Y),Tr=w.memoizedState),(Dn=ip||of(w,U,Dn,Y,Rr,Tr,en)||!1)?(br||typeof Je.UNSAFE_componentWillUpdate!="function"&&typeof Je.componentWillUpdate!="function"||(typeof Je.componentWillUpdate=="function"&&Je.componentWillUpdate(Y,Tr,en),typeof Je.UNSAFE_componentWillUpdate=="function"&&Je.UNSAFE_componentWillUpdate(Y,Tr,en)),typeof Je.componentDidUpdate=="function"&&(w.flags|=4),typeof Je.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof Je.componentDidUpdate!="function"||At===x.memoizedProps&&Rr===x.memoizedState||(w.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||At===x.memoizedProps&&Rr===x.memoizedState||(w.flags|=1024),w.memoizedProps=Y,w.memoizedState=Tr),Je.props=Y,Je.state=Tr,Je.context=en,Y=Dn):(typeof Je.componentDidUpdate!="function"||At===x.memoizedProps&&Rr===x.memoizedState||(w.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||At===x.memoizedProps&&Rr===x.memoizedState||(w.flags|=1024),Y=!1)}return Aa(x,w,U,Y,he,re)}function Aa(x,w,U,Y,re,he){hf(x,w);var Je=(w.flags&128)!==0;if(!Y&&!Je)return re&&Bs(w,U,!1),Cl(x,w,he);Y=w.stateNode,Oc.current=w;var At=Je&&typeof U.getDerivedStateFromError!="function"?null:Y.render();return w.flags|=1,x!==null&&Je?(w.child=xu(w,x.child,null,he),w.child=xu(w,null,At,he)):Io(x,w,At,he),w.memoizedState=Y.state,re&&Bs(w,U,!0),w.child}function Mg(x){var w=x.stateNode;w.pendingContext?vc(x,w.pendingContext,w.pendingContext!==w.context):w.context&&vc(x,w.context,!1),bg(x,w.containerInfo)}function ia(x,w,U,Y,re){return Gp(),ap(re),w.flags|=256,Io(x,w,U,Y),w.child}var Kp={dehydrated:null,treeContext:null,retryLane:0};function al(x){return{baseLanes:x,cachePool:null}}function wu(x,w,U){var Y=w.pendingProps,re=_o.current,he=!1,Je=(w.flags&128)!==0,At;if((At=Je)||(At=x!==null&&x.memoizedState===null?!1:(re&2)!==0),At?(he=!0,w.flags&=-129):(x===null||x.memoizedState!==null)&&(re|=1),Mr(_o,re&1),x===null)return af(w),x=w.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(w.mode&1?sn(x)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(re=Y.children,x=Y.fallback,he?(Y=w.mode,he=w.child,re={mode:"hidden",children:re},!(Y&1)&&he!==null?(he.childLanes=0,he.pendingProps=re):he=ac(re,Y,0,null),x=_p(x,Y,U,null),he.return=w,x.return=w,he.sibling=x,w.child=he,w.child.memoizedState=al(U),w.memoizedState=Kp,x):Dc(w,re));if(re=x.memoizedState,re!==null){if(At=re.dehydrated,At!==null){if(Je)return w.flags&256?(w.flags&=-257,ds(x,w,U,Error(ce(422)))):w.memoizedState!==null?(w.child=x.child,w.flags|=128,null):(he=Y.fallback,re=w.mode,Y=ac({mode:"visible",children:Y.children},re,0,null),he=_p(he,re,U,null),he.flags|=2,Y.return=w,he.return=w,Y.sibling=he,w.child=Y,w.mode&1&&xu(w,x.child,null,U),w.child.memoizedState=al(U),w.memoizedState=Kp,he);if(!(w.mode&1))w=ds(x,w,U,null);else if(sn(At))w=ds(x,w,U,Error(ce(419)));else if(Y=(U&x.childLanes)!==0,Pa||Y){if(Y=hs,Y!==null){switch(U&-U){case 4:he=2;break;case 16:he=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:he=32;break;case 536870912:he=268435456;break;default:he=0}Y=he&(Y.suspendedLanes|U)?0:he,Y!==0&&Y!==re.retryLane&&(re.retryLane=Y,wl(x,Y,-1))}Dm(),w=ds(x,w,U,Error(ce(421)))}else xt(At)?(w.flags|=128,w.child=x.child,w=bh.bind(null,x),zn(At,w),w=null):(U=re.treeContext,Zi&&(el=ze(At),$a=w,vo=!0,ma=null,ld=!1,U!==null&&(Wo[xl++]=Mc,Wo[xl++]=Cc,Wo[xl++]=$l,Mc=U.id,Cc=U.overflow,$l=w)),w=Dc(w,w.pendingProps.children),w.flags|=4096);return w}return he?(Y=Ro(x,w,Y.children,Y.fallback,U),he=w.child,re=x.child.memoizedState,he.memoizedState=re===null?al(U):{baseLanes:re.baseLanes|U,cachePool:null},he.childLanes=x.childLanes&~U,w.memoizedState=Kp,Y):(U=rr(x,w,Y.children,U),w.memoizedState=null,U)}return he?(Y=Ro(x,w,Y.children,Y.fallback,U),he=w.child,re=x.child.memoizedState,he.memoizedState=re===null?al(U):{baseLanes:re.baseLanes|U,cachePool:null},he.childLanes=x.childLanes&~U,w.memoizedState=Kp,Y):(U=rr(x,w,Y.children,U),w.memoizedState=null,U)}function Dc(x,w){return w=ac({mode:"visible",children:w},x.mode,0,null),w.return=x,x.child=w}function rr(x,w,U,Y){var re=x.child;return x=re.sibling,U=Uc(re,{mode:"visible",children:U}),!(w.mode&1)&&(U.lanes=Y),U.return=w,U.sibling=null,x!==null&&(Y=w.deletions,Y===null?(w.deletions=[x],w.flags|=16):Y.push(x)),w.child=U}function Ro(x,w,U,Y,re){var he=w.mode;x=x.child;var Je=x.sibling,At={mode:"hidden",children:U};return!(he&1)&&w.child!==x?(U=w.child,U.childLanes=0,U.pendingProps=At,w.deletions=null):(U=Uc(x,At),U.subtreeFlags=x.subtreeFlags&14680064),Je!==null?Y=Uc(Je,Y):(Y=_p(Y,he,re,null),Y.flags|=2),Y.return=w,U.return=w,U.sibling=Y,w.child=U,Y}function ds(x,w,U,Y){return Y!==null&&ap(Y),xu(w,x.child,null,U),x=Dc(w,w.pendingProps.children),x.flags|=2,w.memoizedState=null,x}function rc(x,w,U){x.lanes|=w;var Y=x.alternate;Y!==null&&(Y.lanes|=w),Pp(x.return,w,U)}function Cg(x,w,U,Y,re){var he=x.memoizedState;he===null?x.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:Y,tail:U,tailMode:re}:(he.isBackwards=w,he.rendering=null,he.renderingStartTime=0,he.last=Y,he.tail=U,he.tailMode=re)}function oa(x,w,U){var Y=w.pendingProps,re=Y.revealOrder,he=Y.tail;if(Io(x,w,Y.children,U),Y=_o.current,Y&2)Y=Y&1|2,w.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=w.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&rc(x,U,w);else if(x.tag===19)rc(x,U,w);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===w)break e;for(;x.sibling===null;){if(x.return===null||x.return===w)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}Y&=1}if(Mr(_o,Y),!(w.mode&1))w.memoizedState=null;else switch(re){case"forwards":for(U=w.child,re=null;U!==null;)x=U.alternate,x!==null&&Up(x)===null&&(re=U),U=U.sibling;U=re,U===null?(re=w.child,w.child=null):(re=U.sibling,U.sibling=null),Cg(w,!1,re,U,he);break;case"backwards":for(U=null,re=w.child,w.child=null;re!==null;){if(x=re.alternate,x!==null&&Up(x)===null){w.child=re;break}x=re.sibling,re.sibling=U,U=re,re=x}Cg(w,!0,U,null,he);break;case"together":Cg(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Cl(x,w,U){if(x!==null&&(w.dependencies=x.dependencies),Ul|=w.lanes,!(U&w.childLanes))return null;if(x!==null&&w.child!==x.child)throw Error(ce(153));if(w.child!==null){for(x=w.child,U=Uc(x,x.pendingProps),w.child=U,U.return=w;x.sibling!==null;)x=x.sibling,U=U.sibling=Uc(x,x.pendingProps),U.return=w;U.sibling=null}return w.child}function w1(x,w,U){switch(w.tag){case 3:Mg(w),Gp();break;case 5:Im(w);break;case 1:Di(w.type)&&io(w);break;case 4:bg(w,w.stateNode.containerInfo);break;case 10:Eu(w,w.type._context,w.memoizedProps.value);break;case 13:var Y=w.memoizedState;if(Y!==null)return Y.dehydrated!==null?(Mr(_o,_o.current&1),w.flags|=128,null):U&w.child.childLanes?wu(x,w,U):(Mr(_o,_o.current&1),x=Cl(x,w,U),x!==null?x.sibling:null);Mr(_o,_o.current&1);break;case 19:if(Y=(U&w.childLanes)!==0,x.flags&128){if(Y)return oa(x,w,U);w.flags|=128}var re=w.memoizedState;if(re!==null&&(re.rendering=null,re.tail=null,re.lastEffect=null),Mr(_o,_o.current),Y)break;return null;case 22:case 23:return w.lanes=0,df(x,w,U)}return Cl(x,w,U)}function Vo(x,w){switch(bu(w),w.tag){case 1:return Di(w.type)&&Ac(),x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 3:return nh(),Cn(es),Cn(Po),lp(),x=w.flags,x&65536&&!(x&128)?(w.flags=x&-65537|128,w):null;case 5:return nl(w),null;case 13:if(Cn(_o),x=w.memoizedState,x!==null&&x.dehydrated!==null){if(w.alternate===null)throw Error(ce(340));Gp()}return x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 19:return Cn(_o),null;case 4:return nh(),null;case 10:return Zd(w.type._context),null;case 22:case 23:return Eh(),null;case 24:return null;default:return null}}var Pc=!1,Qi=!1,ff=typeof WeakSet=="function"?WeakSet:Set,ir=null;function dh(x,w){var U=x.ref;if(U!==null)if(typeof U=="function")try{U(null)}catch(Y){Ko(x,w,Y)}else U.current=null}function Sg(x,w,U){try{U()}catch(Y){Ko(x,w,Y)}}var Tu=!1;function Om(x,w){for(Fn(x.containerInfo),ir=w;ir!==null;)if(x=ir,w=x.child,(x.subtreeFlags&1028)!==0&&w!==null)w.return=x,ir=w;else for(;ir!==null;){x=ir;try{var U=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var Y=U.memoizedProps,re=U.memoizedState,he=x.stateNode,Je=he.getSnapshotBeforeUpdate(x.elementType===x.type?Y:bl(x.type,Y),re);he.__reactInternalSnapshotBeforeUpdate=Je}break;case 3:ri&&co(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(At){Ko(x,x.return,At)}if(w=x.sibling,w!==null){w.return=x.return,ir=w;break}ir=x.return}return U=Tu,Tu=!1,U}function hp(x,w,U){var Y=w.updateQueue;if(Y=Y!==null?Y.lastEffect:null,Y!==null){var re=Y=Y.next;do{if((re.tag&x)===x){var he=re.destroy;re.destroy=void 0,he!==void 0&&Sg(w,U,he)}re=re.next}while(re!==Y)}}function Bu(x,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var U=w=w.next;do{if((U.tag&x)===x){var Y=U.create;U.destroy=Y()}U=U.next}while(U!==w)}}function wr(x){var w=x.ref;if(w!==null){var U=x.stateNode;switch(x.tag){case 5:x=os(U);break;default:x=U}typeof w=="function"?w(x):w.current=x}}function wg(x,w,U){if(Ec&&typeof Ec.onCommitFiberUnmount=="function")try{Ec.onCommitFiberUnmount(yg,w)}catch(Je){}switch(w.tag){case 0:case 11:case 14:case 15:if(x=w.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var Y=x=x.next;do{var re=Y,he=re.destroy;re=re.tag,he!==void 0&&(re&2||re&4)&&Sg(w,U,he),Y=Y.next}while(Y!==x)}break;case 1:if(dh(w,U),x=w.stateNode,typeof x.componentWillUnmount=="function")try{x.props=w.memoizedProps,x.state=w.memoizedState,x.componentWillUnmount()}catch(Je){Ko(w,U,Je)}break;case 5:dh(w,U);break;case 4:ri?ui(x,w,U):ro&&ro&&(w=w.stateNode.containerInfo,U=Co(w),Sa(w,U))}}function gf(x,w,U){for(var Y=w;;)if(wg(x,Y,U),Y.child===null||ri&&Y.tag===4){if(Y===w)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===w)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}else Y.child.return=Y,Y=Y.child}function ll(x){var w=x.alternate;w!==null&&(x.alternate=null,ll(w)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(w=x.stateNode,w!==null&&Zs(w)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function mf(x){return x.tag===5||x.tag===3||x.tag===4}function Iu(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||mf(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function cl(x){if(ri){e:{for(var w=x.return;w!==null;){if(mf(w))break e;w=w.return}throw Error(ce(160))}var U=w;switch(U.tag){case 5:w=U.stateNode,U.flags&32&&(Do(w),U.flags&=-33),U=Iu(x),ts(x,U,w);break;case 3:case 4:w=U.stateNode.containerInfo,U=Iu(x),Ru(x,U,w);break;default:throw Error(ce(161))}}}function Ru(x,w,U){var Y=x.tag;if(Y===5||Y===6)x=x.stateNode,w?Ca(U,x,w):Rl(U,x);else if(Y!==4&&(x=x.child,x!==null))for(Ru(x,w,U),x=x.sibling;x!==null;)Ru(x,w,U),x=x.sibling}function ts(x,w,U){var Y=x.tag;if(Y===5||Y===6)x=x.stateNode,w?ls(U,x,w):ji(U,x);else if(Y!==4&&(x=x.child,x!==null))for(ts(x,w,U),x=x.sibling;x!==null;)ts(x,w,U),x=x.sibling}function ui(x,w,U){for(var Y=w,re=!1,he,Je;;){if(!re){re=Y.return;e:for(;;){if(re===null)throw Error(ce(160));switch(he=re.stateNode,re.tag){case 5:Je=!1;break e;case 3:he=he.containerInfo,Je=!0;break e;case 4:he=he.containerInfo,Je=!0;break e}re=re.return}re=!0}if(Y.tag===5||Y.tag===6)gf(x,Y,U),Je?Fl(he,Y.stateNode):lo(he,Y.stateNode);else if(Y.tag===18)Je?qe(he,Y.stateNode):Me(he,Y.stateNode);else if(Y.tag===4){if(Y.child!==null){he=Y.stateNode.containerInfo,Je=!0,Y.child.return=Y,Y=Y.child;continue}}else if(wg(x,Y,U),Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===w)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===w)return;Y=Y.return,Y.tag===4&&(re=!1)}Y.sibling.return=Y.return,Y=Y.sibling}}function Fu(x,w){if(ri){switch(w.tag){case 0:case 11:case 14:case 15:hp(3,w,w.return),Bu(3,w),hp(5,w,w.return);return;case 1:return;case 5:var U=w.stateNode;if(U!=null){var Y=w.memoizedProps;x=x!==null?x.memoizedProps:Y;var re=w.type,he=w.updateQueue;w.updateQueue=null,he!==null&&$i(U,he,re,x,Y,w)}return;case 6:if(w.stateNode===null)throw Error(ce(162));U=w.memoizedProps,as(w.stateNode,x!==null?x.memoizedProps:U,U);return;case 3:Zi&&x!==null&&x.memoizedState.isDehydrated&&dt(w.stateNode.containerInfo);return;case 12:return;case 13:Lc(w);return;case 19:Lc(w);return;case 17:return}throw Error(ce(163))}switch(w.tag){case 0:case 11:case 14:case 15:hp(3,w,w.return),Bu(3,w),hp(5,w,w.return);return;case 12:return;case 13:Lc(w);return;case 19:Lc(w);return;case 3:Zi&&x!==null&&x.memoizedState.isDehydrated&&dt(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(ro){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,Sa(w.containerInfo,w.pendingChildren);break e}throw Error(ce(163))}}function Lc(x){var w=x.updateQueue;if(w!==null){x.updateQueue=null;var U=x.stateNode;U===null&&(U=x.stateNode=new ff),w.forEach(function(Y){var re=Lm.bind(null,x,Y);U.has(Y)||(U.add(Y),Y.then(re,re))})}}function yf(x,w){for(ir=w;ir!==null;){w=ir;var U=w.deletions;if(U!==null)for(var Y=0;Y<U.length;Y++){var re=U[Y];try{var he=x;ri?ui(he,re,w):gf(he,re,w);var Je=re.alternate;Je!==null&&(Je.return=null),re.return=null}catch(Dr){Ko(re,w,Dr)}}if(U=w.child,w.subtreeFlags&12854&&U!==null)U.return=w,ir=U;else for(;ir!==null;){w=ir;try{var At=w.flags;if(At&32&&ri&&Do(w.stateNode),At&512){var en=w.alternate;if(en!==null){var Dn=en.ref;Dn!==null&&(typeof Dn=="function"?Dn(null):Dn.current=null)}}if(At&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var br=w.alternate;(br===null||br.memoizedState===null)&&(zu=ho())}break;case 22:var gi=w.memoizedState!==null,Rr=w.alternate,Eo=Rr!==null&&Rr.memoizedState!==null;if(U=w,ri){e:if(Y=U,re=gi,he=null,ri)for(var Tr=Y;;){if(Tr.tag===5){if(he===null){he=Tr;var Xs=Tr.stateNode;re?_l(Xs):ta(Tr.stateNode,Tr.memoizedProps)}}else if(Tr.tag===6){if(he===null){var Hl=Tr.stateNode;re?ea(Hl):Ho(Hl,Tr.memoizedProps)}}else if((Tr.tag!==22&&Tr.tag!==23||Tr.memoizedState===null||Tr===Y)&&Tr.child!==null){Tr.child.return=Tr,Tr=Tr.child;continue}if(Tr===Y)break;for(;Tr.sibling===null;){if(Tr.return===null||Tr.return===Y)break e;he===Tr&&(he=null),Tr=Tr.return}he===Tr&&(he=null),Tr.sibling.return=Tr.return,Tr=Tr.sibling}}if(gi&&!Eo&&U.mode&1){ir=U;for(var Dt=U.child;Dt!==null;){for(U=ir=Dt;ir!==null;){Y=ir;var Mt=Y.child;switch(Y.tag){case 0:case 11:case 14:case 15:hp(4,Y,Y.return);break;case 1:dh(Y,Y.return);var Qt=Y.stateNode;if(typeof Qt.componentWillUnmount=="function"){var lr=Y.return;try{Qt.props=Y.memoizedProps,Qt.state=Y.memoizedState,Qt.componentWillUnmount()}catch(Dr){Ko(Y,lr,Dr)}}break;case 5:dh(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Du(U);continue}}Mt!==null?(Mt.return=Y,ir=Mt):Du(U)}Dt=Dt.sibling}}}switch(At&4102){case 2:cl(w),w.flags&=-3;break;case 6:cl(w),w.flags&=-3,Fu(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,Fu(w.alternate,w);break;case 4:Fu(w.alternate,w)}}catch(Dr){Ko(w,w.return,Dr)}if(U=w.sibling,U!==null){U.return=w.return,ir=U;break}ir=w.return}}}function hh(x,w,U){ir=x,ic(x,w,U)}function ic(x,w,U){for(var Y=(x.mode&1)!==0;ir!==null;){var re=ir,he=re.child;if(re.tag===22&&Y){var Je=re.memoizedState!==null||Pc;if(!Je){var At=re.alternate,en=At!==null&&At.memoizedState!==null||Qi;At=Pc;var Dn=Qi;if(Pc=Je,(Qi=en)&&!Dn)for(ir=re;ir!==null;)Je=ir,en=Je.child,Je.tag===22&&Je.memoizedState!==null?Af(re):en!==null?(en.return=Je,ir=en):Af(re);for(;he!==null;)ir=he,ic(he,w,U),he=he.sibling;ir=re,Pc=At,Qi=Dn}Ou(x,w,U)}else re.subtreeFlags&8772&&he!==null?(he.return=re,ir=he):Ou(x,w,U)}}function Ou(x){for(;ir!==null;){var w=ir;if(w.flags&8772){var U=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:Qi||Bu(5,w);break;case 1:var Y=w.stateNode;if(w.flags&4&&!Qi)if(U===null)Y.componentDidMount();else{var re=w.elementType===w.type?U.memoizedProps:bl(w.type,U.memoizedProps);Y.componentDidUpdate(re,U.memoizedState,Y.__reactInternalSnapshotBeforeUpdate)}var he=w.updateQueue;he!==null&&Zl(w,he,Y);break;case 3:var Je=w.updateQueue;if(Je!==null){if(U=null,w.child!==null)switch(w.child.tag){case 5:U=os(w.child.stateNode);break;case 1:U=w.child.stateNode}Zl(w,Je,U)}break;case 5:var At=w.stateNode;U===null&&w.flags&4&&Ws(At,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Zi&&w.memoizedState===null){var en=w.alternate;if(en!==null){var Dn=en.memoizedState;if(Dn!==null){var br=Dn.dehydrated;br!==null&&_t(br)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ce(163))}Qi||w.flags&512&&wr(w)}catch(gi){Ko(w,w.return,gi)}}if(w===x){ir=null;break}if(U=w.sibling,U!==null){U.return=w.return,ir=U;break}ir=w.return}}function Du(x){for(;ir!==null;){var w=ir;if(w===x){ir=null;break}var U=w.sibling;if(U!==null){U.return=w.return,ir=U;break}ir=w.return}}function Af(x){for(;ir!==null;){var w=ir;try{switch(w.tag){case 0:case 11:case 15:var U=w.return;try{Bu(4,w)}catch(en){Ko(w,U,en)}break;case 1:var Y=w.stateNode;if(typeof Y.componentDidMount=="function"){var re=w.return;try{Y.componentDidMount()}catch(en){Ko(w,re,en)}}var he=w.return;try{wr(w)}catch(en){Ko(w,he,en)}break;case 5:var Je=w.return;try{wr(w)}catch(en){Ko(w,Je,en)}}}catch(en){Ko(w,w.return,en)}if(w===x){ir=null;break}var At=w.sibling;if(At!==null){At.return=w.return,ir=At;break}ir=w.return}}var Pu=0,Lu=1,ku=2,oc=3,vd=4;if(typeof Symbol=="function"&&Symbol.for){var Jp=Symbol.for;Pu=Jp("selector.component"),Lu=Jp("selector.has_pseudo_class"),ku=Jp("selector.role"),oc=Jp("selector.test_id"),vd=Jp("selector.text")}function fh(x){var w=Ja(x);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(ce(364));return w}if(x=Xi(x),x===null)throw Error(ce(362));return x.stateNode.current}function gh(x,w){switch(w.$$typeof){case Pu:if(x.type===w.value)return!0;break;case Lu:e:{w=w.value,x=[x,0];for(var U=0;U<x.length;){var Y=x[U++],re=x[U++],he=w[re];if(Y.tag!==5||!Oi(Y)){for(;he!=null&&gh(Y,he);)re++,he=w[re];if(re===w.length){w=!0;break e}else for(Y=Y.child;Y!==null;)x.push(Y,re),Y=Y.sibling}}w=!1}return w;case ku:if(x.tag===5&&ao(x.stateNode,w.value))return!0;break;case vd:if((x.tag===5||x.tag===6)&&(x=da(x),x!==null&&0<=x.indexOf(w.value)))return!0;break;case oc:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(ce(365))}return!1}function mh(x){switch(x.$$typeof){case Pu:return"<"+(_n(x.value)||"Unknown")+">";case Lu:return":has("+(mh(x)||"")+")";case ku:return'[role="'+x.value+'"]';case vd:return'"'+x.value+'"';case oc:return'[data-testname="'+x.value+'"]';default:throw Error(ce(365))}}function bs(x,w){var U=[];x=[x,0];for(var Y=0;Y<x.length;){var re=x[Y++],he=x[Y++],Je=w[he];if(re.tag!==5||!Oi(re)){for(;Je!=null&&gh(re,Je);)he++,Je=w[he];if(he===w.length)U.push(re);else for(re=re.child;re!==null;)x.push(re,he),re=re.sibling}}return U}function Tg(x,w){if(!ss)throw Error(ce(363));x=fh(x),x=bs(x,w),w=[],x=Array.from(x);for(var U=0;U<x.length;){var Y=x[U++];if(Y.tag===5)Oi(Y)||w.push(Y.stateNode);else for(Y=Y.child;Y!==null;)x.push(Y),Y=Y.sibling}return w}var yh=Math.ceil,kc=J.ReactCurrentDispatcher,qp=J.ReactCurrentOwner,zi=J.ReactCurrentBatchConfig,wi=0,hs=null,Os=null,xs=0,Sl=0,Qo=Kr(0),Xo=0,Yo=null,Ul=0,pl=0,fp=0,Nl=null,va=null,zu=0,Bg=1/0;function Zp(){Bg=ho()+500}var ul=!1,zc=null,sc=null,Gu=!1,gp=null,Ah=0,mp=0,vf=null,_f=-1,po=0;function uo(){return wi&6?ho():_f!==-1?_f:_f=ho()}function jl(x){return x.mode&1?wi&2&&xs!==0?xs&-xs:S1.transition!==null?(po===0&&(x=Ta,Ta<<=1,!(Ta&4194240)&&(Ta=64),po=x),po):(x=Yi,x!==0?x:js()):1}function wl(x,w,U){if(50<mp)throw mp=0,vf=null,Error(ce(185));var Y=vh(x,w);return Y===null?null:(rd(Y,w,U),(!(wi&2)||Y!==hs)&&(Y===hs&&(!(wi&2)&&(pl|=w),Xo===4&&Gc(Y,xs)),dl(Y,U),w===1&&wi===0&&!(x.mode&1)&&(Zp(),$h&&fo())),Y)}function vh(x,w){x.lanes|=w;var U=x.alternate;for(U!==null&&(U.lanes|=w),U=x,x=x.return;x!==null;)x.childLanes|=w,U=x.alternate,U!==null&&(U.childLanes|=w),U=x,x=x.return;return U.tag===3?U.stateNode:null}function dl(x,w){var U=x.callbackNode;qd(x,w);var Y=Op(x,x===hs?xs:0);if(Y===0)U!==null&&mg(U),x.callbackNode=null,x.callbackPriority=0;else if(w=Y&-Y,x.callbackPriority!==w){if(U!=null&&mg(U),w===1)x.tag===0?C1(_d.bind(null,x)):Bm(_d.bind(null,x)),ua?vs(function(){wi===0&&fo()}):Jl(_u,fo),U=null;else{switch(gg(Y)){case 1:U=_u;break;case 4:U=x1;break;case 16:U=qh;break;case 536870912:U=Zh;break;default:U=qh}U=bf(U,_h.bind(null,x))}x.callbackPriority=w,x.callbackNode=U}}function _h(x,w){if(_f=-1,po=0,wi&6)throw Error(ce(327));var U=x.callbackNode;if(Ap()&&x.callbackNode!==U)return null;var Y=Op(x,x===hs?xs:0);if(Y===0)return null;if(Y&30||Y&x.expiredLanes||w)w=Ed(x,Y);else{w=Y;var re=wi;wi|=2;var he=B1();(hs!==x||xs!==w)&&(Zp(),yp(x,w));do try{R1();break}catch(At){Ef(x,At)}while(1);rp(),kc.current=he,wi=re,Os!==null?w=0:(hs=null,xs=0,w=Xo)}if(w!==0){if(w===2&&(re=fg(x),re!==0&&(Y=re,w=Ig(x,re))),w===1)throw U=Yo,yp(x,0),Gc(x,Y),dl(x,ho()),U;if(w===6)Gc(x,Y);else{if(re=x.current.alternate,!(Y&30)&&!T1(re)&&(w=Ed(x,Y),w===2&&(he=fg(x),he!==0&&(Y=he,w=Ig(x,he))),w===1))throw U=Yo,yp(x,0),Gc(x,Y),dl(x,ho()),U;switch(x.finishedWork=re,x.finishedLanes=Y,w){case 0:case 1:throw Error(ce(345));case 2:Uu(x,va);break;case 3:if(Gc(x,Y),(Y&130023424)===Y&&(w=zu+500-ho(),10<w)){if(Op(x,0)!==0)break;if(re=x.suspendedLanes,(re&Y)!==Y){uo(),x.pingedLanes|=x.suspendedLanes&re;break}x.timeoutHandle=ni(Uu.bind(null,x,va),w);break}Uu(x,va);break;case 4:if(Gc(x,Y),(Y&4194240)===Y)break;for(w=x.eventTimes,re=-1;0<Y;){var Je=31-So(Y);he=1<<Je,Je=w[Je],Je>re&&(re=Je),Y&=~he}if(Y=re,Y=ho()-Y,Y=(120>Y?120:480>Y?480:1080>Y?1080:1920>Y?1920:3e3>Y?3e3:4320>Y?4320:1960*yh(Y/1960))-Y,10<Y){x.timeoutHandle=ni(Uu.bind(null,x,va),Y);break}Uu(x,va);break;case 5:Uu(x,va);break;default:throw Error(ce(329))}}}return dl(x,ho()),x.callbackNode===U?_h.bind(null,x):null}function Ig(x,w){var U=Nl;return x.current.memoizedState.isDehydrated&&(yp(x,w).flags|=256),x=Ed(x,w),x!==2&&(w=va,va=U,w!==null&&Rg(w)),x}function Rg(x){va===null?va=x:va.push.apply(va,x)}function T1(x){for(var w=x;;){if(w.flags&16384){var U=w.updateQueue;if(U!==null&&(U=U.stores,U!==null))for(var Y=0;Y<U.length;Y++){var re=U[Y],he=re.getSnapshot;re=re.value;try{if(!bc(he(),re))return!1}catch(Je){return!1}}}if(U=w.child,w.subtreeFlags&16384&&U!==null)U.return=w,w=U;else{if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Gc(x,w){for(w&=~fp,w&=~pl,x.suspendedLanes|=w,x.pingedLanes&=~w,x=x.expirationTimes;0<w;){var U=31-So(w),Y=1<<U;x[U]=-1,w&=~Y}}function _d(x){if(wi&6)throw Error(ce(327));Ap();var w=Op(x,0);if(!(w&1))return dl(x,ho()),null;var U=Ed(x,w);if(x.tag!==0&&U===2){var Y=fg(x);Y!==0&&(w=Y,U=Ig(x,Y))}if(U===1)throw U=Yo,yp(x,0),Gc(x,w),dl(x,ho()),U;if(U===6)throw Error(ce(345));return x.finishedWork=x.current.alternate,x.finishedLanes=w,Uu(x,va),dl(x,ho()),null}function Fg(x){gp!==null&&gp.tag===0&&!(wi&6)&&Ap();var w=wi;wi|=1;var U=zi.transition,Y=Yi;try{if(zi.transition=null,Yi=1,x)return x()}finally{Yi=Y,zi.transition=U,wi=w,!(wi&6)&&fo()}}function Eh(){Sl=Qo.current,Cn(Qo)}function yp(x,w){x.finishedWork=null,x.finishedLanes=0;var U=x.timeoutHandle;if(U!==ki&&(x.timeoutHandle=ki,Ar(U)),Os!==null)for(U=Os.return;U!==null;){var Y=U;switch(bu(Y),Y.tag){case 1:Y=Y.type.childContextTypes,Y!=null&&Ac();break;case 3:nh(),Cn(es),Cn(Po),lp();break;case 5:nl(Y);break;case 4:nh();break;case 13:Cn(_o);break;case 19:Cn(_o);break;case 10:Zd(Y.type._context);break;case 22:case 23:Eh()}U=U.return}if(hs=x,Os=x=Uc(x.current,null),xs=Sl=w,Xo=0,Yo=null,fp=pl=Ul=0,va=Nl=null,ql!==null){for(w=0;w<ql.length;w++)if(U=ql[w],Y=U.interleaved,Y!==null){U.interleaved=null;var re=Y.next,he=U.pending;if(he!==null){var Je=he.next;he.next=re,Y.next=Je}U.pending=Y}ql=null}return x}function Ef(x,w){do{var U=Os;try{if(rp(),hd.current=tc,Tc){for(var Y=Qr.memoizedState;Y!==null;){var re=Y.queue;re!==null&&(re.pending=null),Y=Y.next}Tc=!1}if(Bo=0,dr=Rs=Qr=null,cp=!1,Bc=0,qp.current=null,U===null||U.return===null){Xo=1,Yo=w,Os=null;break}e:{var he=x,Je=U.return,At=U,en=w;if(w=xs,At.flags|=32768,en!==null&&typeof en=="object"&&typeof en.then=="function"){var Dn=en,br=At,gi=br.tag;if(!(br.mode&1)&&(gi===0||gi===11||gi===15)){var Rr=br.alternate;Rr?(br.updateQueue=Rr.updateQueue,br.memoizedState=Rr.memoizedState,br.lanes=Rr.lanes):(br.updateQueue=null,br.memoizedState=null)}var Eo=Fc(Je);if(Eo!==null){Eo.flags&=-257,lh(Eo,Je,At,he,w),Eo.mode&1&&Rc(he,Dn,w),w=Eo,en=Dn;var Tr=w.updateQueue;if(Tr===null){var Xs=new Set;Xs.add(en),w.updateQueue=Xs}else Tr.add(en);break e}else{if(!(w&1)){Rc(he,Dn,w),Dm();break e}en=Error(ce(426))}}else if(vo&&At.mode&1){var Hl=Fc(Je);if(Hl!==null){!(Hl.flags&65536)&&(Hl.flags|=256),lh(Hl,Je,At,he,w),ap(en);break e}}he=en,Xo!==4&&(Xo=2),Nl===null?Nl=[he]:Nl.push(he),en=pf(en,At),At=Je;do{switch(At.tag){case 3:At.flags|=65536,w&=-w,At.lanes|=w;var Dt=Gl(At,en,w);eh(At,Dt);break e;case 1:he=en;var Mt=At.type,Qt=At.stateNode;if(!(At.flags&128)&&(typeof Mt.getDerivedStateFromError=="function"||Qt!==null&&typeof Qt.componentDidCatch=="function"&&(sc===null||!sc.has(Qt)))){At.flags|=65536,w&=-w,At.lanes|=w;var lr=yd(At,he,w);eh(At,lr);break e}}At=At.return}while(At!==null)}Dg(U)}catch(Dr){w=Dr,Os===U&&U!==null&&(Os=U=U.return);continue}break}while(1)}function B1(){var x=kc.current;return kc.current=tc,x===null?tc:x}function Dm(){(Xo===0||Xo===3||Xo===2)&&(Xo=4),hs===null||!(Ul&268435455)&&!(pl&268435455)||Gc(hs,xs)}function Ed(x,w){var U=wi;wi|=2;var Y=B1();hs===x&&xs===w||yp(x,w);do try{I1();break}catch(re){Ef(x,re)}while(1);if(rp(),wi=U,kc.current=Y,Os!==null)throw Error(ce(261));return hs=null,xs=0,Xo}function I1(){for(;Os!==null;)Og(Os)}function R1(){for(;Os!==null&&!Dp();)Og(Os)}function Og(x){var w=kg(x.alternate,x,Sl);x.memoizedProps=x.pendingProps,w===null?Dg(x):Os=w,qp.current=null}function Dg(x){var w=x;do{var U=w.alternate;if(x=w.return,w.flags&32768){if(U=Vo(U,w),U!==null){U.flags&=32767,Os=U;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{Xo=6,Os=null;return}}else if(U=Da(U,w,Sl),U!==null){Os=U;return}if(w=w.sibling,w!==null){Os=w;return}Os=w=x}while(w!==null);Xo===0&&(Xo=5)}function Uu(x,w){var U=Yi,Y=zi.transition;try{zi.transition=null,Yi=1,Pm(x,w,U)}finally{zi.transition=Y,Yi=U}return null}function Pm(x,w,U){do Ap();while(gp!==null);if(wi&6)throw Error(ce(327));var Y=x.finishedWork,re=x.finishedLanes;if(Y===null)return null;if(x.finishedWork=null,x.finishedLanes=0,Y===x.current)throw Error(ce(177));x.callbackNode=null,x.callbackPriority=0;var he=Y.lanes|Y.childLanes;if($c(x,he),x===hs&&(Os=hs=null,xs=0),!(Y.subtreeFlags&2064)&&!(Y.flags&2064)||Gu||(Gu=!0,bf(qh,function(){return Ap(),null})),he=(Y.flags&15990)!==0,Y.subtreeFlags&15990||he){he=zi.transition,zi.transition=null;var Je=Yi;Yi=1;var At=wi;wi|=4,qp.current=null,Om(x,Y),yf(x,Y,re),gr(x.containerInfo),x.current=Y,hh(Y,x,re),To(),wi=At,Yi=Je,zi.transition=he}else x.current=Y;if(Gu&&(Gu=!1,gp=x,Ah=re),he=x.pendingLanes,he===0&&(sc=null),Tm(Y.stateNode,U),dl(x,ho()),w!==null)for(U=x.onRecoverableError,Y=0;Y<w.length;Y++)U(w[Y]);if(ul)throw ul=!1,x=zc,zc=null,x;return Ah&1&&x.tag!==0&&Ap(),he=x.pendingLanes,he&1?x===vf?mp++:(mp=0,vf=x):mp=0,fo(),null}function Ap(){if(gp!==null){var x=gg(Ah),w=zi.transition,U=Yi;try{if(zi.transition=null,Yi=16>x?16:x,gp===null)var Y=!1;else{if(x=gp,gp=null,Ah=0,wi&6)throw Error(ce(331));var re=wi;for(wi|=4,ir=x.current;ir!==null;){var he=ir,Je=he.child;if(ir.flags&16){var At=he.deletions;if(At!==null){for(var en=0;en<At.length;en++){var Dn=At[en];for(ir=Dn;ir!==null;){var br=ir;switch(br.tag){case 0:case 11:case 15:hp(8,br,he)}var gi=br.child;if(gi!==null)gi.return=br,ir=gi;else for(;ir!==null;){br=ir;var Rr=br.sibling,Eo=br.return;if(ll(br),br===Dn){ir=null;break}if(Rr!==null){Rr.return=Eo,ir=Rr;break}ir=Eo}}}var Tr=he.alternate;if(Tr!==null){var Xs=Tr.child;if(Xs!==null){Tr.child=null;do{var Hl=Xs.sibling;Xs.sibling=null,Xs=Hl}while(Xs!==null)}}ir=he}}if(he.subtreeFlags&2064&&Je!==null)Je.return=he,ir=Je;else e:for(;ir!==null;){if(he=ir,he.flags&2048)switch(he.tag){case 0:case 11:case 15:hp(9,he,he.return)}var Dt=he.sibling;if(Dt!==null){Dt.return=he.return,ir=Dt;break e}ir=he.return}}var Mt=x.current;for(ir=Mt;ir!==null;){Je=ir;var Qt=Je.child;if(Je.subtreeFlags&2064&&Qt!==null)Qt.return=Je,ir=Qt;else e:for(Je=Mt;ir!==null;){if(At=ir,At.flags&2048)try{switch(At.tag){case 0:case 11:case 15:Bu(9,At)}}catch(Dr){Ko(At,At.return,Dr)}if(At===Je){ir=null;break e}var lr=At.sibling;if(lr!==null){lr.return=At.return,ir=lr;break e}ir=At.return}}if(wi=re,fo(),Ec&&typeof Ec.onPostCommitFiberRoot=="function")try{Ec.onPostCommitFiberRoot(yg,x)}catch(Dr){}Y=!0}return Y}finally{Yi=U,zi.transition=w}}return!1}function Pg(x,w,U){w=pf(U,w),w=Gl(x,w,1),op(x,w),w=uo(),x=vh(x,1),x!==null&&(rd(x,1,w),dl(x,w))}function Ko(x,w,U){if(x.tag===3)Pg(x,x,U);else for(;w!==null;){if(w.tag===3){Pg(w,x,U);break}else if(w.tag===1){var Y=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof Y.componentDidCatch=="function"&&(sc===null||!sc.has(Y))){x=pf(U,x),x=yd(w,x,1),op(w,x),x=uo(),w=vh(w,1),w!==null&&(rd(w,1,x),dl(w,x));break}}w=w.return}}function bd(x,w,U){var Y=x.pingCache;Y!==null&&Y.delete(w),w=uo(),x.pingedLanes|=x.suspendedLanes&U,hs===x&&(xs&U)===U&&(Xo===4||Xo===3&&(xs&130023424)===xs&&500>ho()-zu?yp(x,0):fp|=U),dl(x,w)}function Lg(x,w){w===0&&(x.mode&1?(w=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):w=1);var U=uo();x=vh(x,w),x!==null&&(rd(x,w,U),dl(x,U))}function bh(x){var w=x.memoizedState,U=0;w!==null&&(U=w.retryLane),Lg(x,U)}function Lm(x,w){var U=0;switch(x.tag){case 13:var Y=x.stateNode,re=x.memoizedState;re!==null&&(U=re.retryLane);break;case 19:Y=x.stateNode;break;default:throw Error(ce(314))}Y!==null&&Y.delete(w),Lg(x,U)}var kg;kg=function(x,w,U){if(x!==null)if(x.memoizedProps!==w.pendingProps||es.current)Pa=!0;else{if(!(x.lanes&U)&&!(w.flags&128))return Pa=!1,w1(x,w,U);Pa=!!(x.flags&131072)}else Pa=!1,vo&&w.flags&1048576&&vg(w,Za,w.index);switch(w.lanes=0,w.tag){case 2:var Y=w.type;x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps;var re=ha(w,Po.current);sd(w,U),re=Qe(null,w,Y,x,re,U);var he=rl();return w.flags|=1,typeof re=="object"&&re!==null&&typeof re.render=="function"&&re.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Di(Y)?(he=!0,io(w)):he=!1,w.memoizedState=re.state!==null&&re.state!==void 0?re.state:null,nf(w),re.updater=Is,w.stateNode=re,re._reactInternals=w,Ba(w,Y,x,U),w=Aa(null,w,Y,!0,he,U)):(w.tag=0,vo&&he&&ad(w),Io(null,w,re,U),w=w.child),w;case 16:Y=w.elementType;e:{switch(x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps,re=Y._init,Y=re(Y._payload),w.type=Y,re=w.tag=km(Y),x=bl(Y,x),re){case 0:w=Xp(null,w,Y,x,U);break e;case 1:w=Yp(null,w,Y,x,U);break e;case 11:w=Qp(null,w,Y,x,U);break e;case 14:w=nc(null,w,Y,bl(Y.type,x),U);break e}throw Error(ce(306,Y,""))}return w;case 0:return Y=w.type,re=w.pendingProps,re=w.elementType===Y?re:bl(Y,re),Xp(x,w,Y,re,U);case 1:return Y=w.type,re=w.pendingProps,re=w.elementType===Y?re:bl(Y,re),Yp(x,w,Y,re,U);case 3:e:{if(Mg(w),x===null)throw Error(ce(387));Y=w.pendingProps,he=w.memoizedState,re=he.element,rf(x,w),Lp(w,Y,null,U);var Je=w.memoizedState;if(Y=Je.element,Zi&&he.isDehydrated)if(he={element:Y,isDehydrated:!1,cache:Je.cache,transitions:Je.transitions},w.updateQueue.baseState=he,w.memoizedState=he,w.flags&256){re=Error(ce(423)),w=ia(x,w,Y,U,re);break e}else if(Y!==re){re=Error(ce(424)),w=ia(x,w,Y,U,re);break e}else for(Zi&&(el=Ue(w.stateNode.containerInfo),$a=w,vo=!0,ma=null,ld=!1),U=pd(w,null,Y,U),w.child=U;U;)U.flags=U.flags&-3|4096,U=U.sibling;else{if(Gp(),Y===re){w=Cl(x,w,U);break e}Io(x,w,Y,U)}w=w.child}return w;case 5:return Im(w),x===null&&af(w),Y=w.type,re=w.pendingProps,he=x!==null?x.memoizedProps:null,Je=re.children,Ln(Y,re)?Je=null:he!==null&&Ln(Y,he)&&(w.flags|=32),hf(x,w),Io(x,w,Je,U),w.child;case 6:return x===null&&af(w),null;case 13:return wu(x,w,U);case 4:return bg(w,w.stateNode.containerInfo),Y=w.pendingProps,x===null?w.child=xu(w,null,Y,U):Io(x,w,Y,U),w.child;case 11:return Y=w.type,re=w.pendingProps,re=w.elementType===Y?re:bl(Y,re),Qp(x,w,Y,re,U);case 7:return Io(x,w,w.pendingProps,U),w.child;case 8:return Io(x,w,w.pendingProps.children,U),w.child;case 12:return Io(x,w,w.pendingProps.children,U),w.child;case 10:e:{if(Y=w.type._context,re=w.pendingProps,he=w.memoizedProps,Je=re.value,Eu(w,Y,Je),he!==null)if(bc(he.value,Je)){if(he.children===re.children&&!es.current){w=Cl(x,w,U);break e}}else for(he=w.child,he!==null&&(he.return=w);he!==null;){var At=he.dependencies;if(At!==null){Je=he.child;for(var en=At.firstContext;en!==null;){if(en.context===Y){if(he.tag===1){en=Ga(-1,U&-U),en.tag=2;var Dn=he.updateQueue;if(Dn!==null){Dn=Dn.shared;var br=Dn.pending;br===null?en.next=en:(en.next=br.next,br.next=en),Dn.pending=en}}he.lanes|=U,en=he.alternate,en!==null&&(en.lanes|=U),Pp(he.return,U,w),At.lanes|=U;break}en=en.next}}else if(he.tag===10)Je=he.type===w.type?null:he.child;else if(he.tag===18){if(Je=he.return,Je===null)throw Error(ce(341));Je.lanes|=U,At=Je.alternate,At!==null&&(At.lanes|=U),Pp(Je,U,w),Je=he.sibling}else Je=he.child;if(Je!==null)Je.return=he;else for(Je=he;Je!==null;){if(Je===w){Je=null;break}if(he=Je.sibling,he!==null){he.return=Je.return,Je=he;break}Je=Je.return}he=Je}Io(x,w,re.children,U),w=w.child}return w;case 9:return re=w.type,Y=w.pendingProps.children,sd(w,U),re=ga(re),Y=Y(re),w.flags|=1,Io(x,w,Y,U),w.child;case 14:return Y=w.type,re=bl(Y,w.pendingProps),re=bl(Y.type,re),nc(x,w,Y,re,U);case 15:return xg(x,w,w.type,w.pendingProps,U);case 17:return Y=w.type,re=w.pendingProps,re=w.elementType===Y?re:bl(Y,re),x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,Di(Y)?(x=!0,io(w)):x=!1,sd(w,U),kp(w,Y,re),Ba(w,Y,re,U),Aa(null,w,Y,!0,x,U);case 19:return oa(x,w,U);case 22:return df(x,w,U)}throw Error(ce(156,w.tag))};function bf(x,w){return Jl(x,w)}function F1(x,w,U,Y){this.tag=x,this.key=U,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hl(x,w,U,Y){return new F1(x,w,U,Y)}function vp(x){return x=x.prototype,!(!x||!x.isReactComponent)}function km(x){if(typeof x=="function")return vp(x)?1:0;if(x!=null){if(x=x.$$typeof,x===St)return 11;if(x===mt)return 14}return 2}function Uc(x,w){var U=x.alternate;return U===null?(U=hl(x.tag,w,x.key,x.mode),U.elementType=x.elementType,U.type=x.type,U.stateNode=x.stateNode,U.alternate=x,x.alternate=U):(U.pendingProps=w,U.type=x.type,U.flags=0,U.subtreeFlags=0,U.deletions=null),U.flags=x.flags&14680064,U.childLanes=x.childLanes,U.lanes=x.lanes,U.child=x.child,U.memoizedProps=x.memoizedProps,U.memoizedState=x.memoizedState,U.updateQueue=x.updateQueue,w=x.dependencies,U.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},U.sibling=x.sibling,U.index=x.index,U.ref=x.ref,U}function xd(x,w,U,Y,re,he){var Je=2;if(Y=x,typeof x=="function")vp(x)&&(Je=1);else if(typeof x=="string")Je=5;else e:switch(x){case bt:return _p(U.children,re,he,w);case nt:Je=8,re|=8;break;case He:return x=hl(12,U,w,re|2),x.elementType=He,x.lanes=he,x;case vt:return x=hl(13,U,w,re),x.elementType=vt,x.lanes=he,x;case ut:return x=hl(19,U,w,re),x.elementType=ut,x.lanes=he,x;case Ot:return ac(U,re,he,w);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case ot:Je=10;break e;case gt:Je=9;break e;case St:Je=11;break e;case mt:Je=14;break e;case Pt:Je=16,Y=null;break e}throw Error(ce(130,x==null?x:typeof x,""))}return w=hl(Je,U,w,re),w.elementType=x,w.type=Y,w.lanes=he,w}function _p(x,w,U,Y){return x=hl(7,x,Y,w),x.lanes=U,x}function ac(x,w,U,Y){return x=hl(22,x,Y,w),x.elementType=Ot,x.lanes=U,x.stateNode={},x}function Nu(x,w,U){return x=hl(6,x,null,w),x.lanes=U,x}function xf(x,w,U){return w=hl(4,x.children!==null?x.children:[],x.key,w),w.lanes=U,w.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},w}function zm(x,w,U,Y,re){this.tag=w,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ki,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jh(0),this.expirationTimes=Jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jh(0),this.identifierPrefix=Y,this.onRecoverableError=re,Zi&&(this.mutableSourceEagerHydrationData=null)}function zg(x,w,U,Y,re,he,Je,At,en){return x=new zm(x,w,U,At,en),w===1?(w=1,he===!0&&(w|=8)):w=0,he=hl(3,null,null,w),x.current=he,he.stateNode=x,he.memoizedState={element:Y,isDehydrated:U,cache:null,transitions:null},nf(he),x}function Md(x){if(!x)return eo;x=x._reactInternals;e:{if(Cr(x)!==x||x.tag!==1)throw Error(ce(170));var w=x;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Di(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(ce(171))}if(x.tag===1){var U=x.type;if(Di(U))return ci(x,U,w)}return w}function Gg(x){var w=x._reactInternals;if(w===void 0)throw typeof x.render=="function"?Error(ce(188)):(x=Object.keys(x).join(","),Error(ce(268,x)));return x=Ir(w),x===null?null:x.stateNode}function Cd(x,w){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var U=x.retryLane;x.retryLane=U!==0&&U<w?U:w}}function Ug(x,w){Cd(x,w),(x=x.alternate)&&Cd(x,w)}function Gm(x){return x=Ir(x),x===null?null:x.stateNode}function O1(){return null}return s.attemptContinuousHydration=function(x){if(x.tag===13){var w=uo();wl(x,134217728,w),Ug(x,134217728)}},s.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var w=uo(),U=jl(x);wl(x,U,w),Ug(x,U)}},s.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var w=x.stateNode;if(w.current.memoizedState.isDehydrated){var U=Yl(w.pendingLanes);U!==0&&(Kl(w,U|1),dl(w,ho()),!(wi&6)&&(Zp(),fo()))}break;case 13:var Y=uo();Fg(function(){return wl(x,1,Y)}),Ug(x,1)}},s.batchedUpdates=function(x,w){var U=wi;wi|=1;try{return x(w)}finally{wi=U,wi===0&&(Zp(),$h&&fo())}},s.createComponentSelector=function(x){return{$$typeof:Pu,value:x}},s.createContainer=function(x,w,U,Y,re,he,Je){return zg(x,w,!1,null,U,Y,re,he,Je)},s.createHasPseudoClassSelector=function(x){return{$$typeof:Lu,value:x}},s.createHydrationContainer=function(x,w,U,Y,re,he,Je,At,en){return x=zg(U,Y,!0,x,re,he,Je,At,en),x.context=Md(null),U=x.current,Y=uo(),re=jl(U),he=Ga(Y,re),he.callback=w!=null?w:null,op(U,he),x.current.lanes=re,rd(x,re,Y),dl(x,Y),x},s.createPortal=function(x,w,U){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:Y==null?null:""+Y,children:x,containerInfo:w,implementation:U}},s.createRoleSelector=function(x){return{$$typeof:ku,value:x}},s.createTestNameSelector=function(x){return{$$typeof:oc,value:x}},s.createTextSelector=function(x){return{$$typeof:vd,value:x}},s.deferredUpdates=function(x){var w=Yi,U=zi.transition;try{return zi.transition=null,Yi=16,x()}finally{Yi=w,zi.transition=U}},s.discreteUpdates=function(x,w,U,Y,re){var he=Yi,Je=zi.transition;try{return zi.transition=null,Yi=1,x(w,U,Y,re)}finally{Yi=he,zi.transition=Je,wi===0&&Zp()}},s.findAllNodes=Tg,s.findBoundingRects=function(x,w){if(!ss)throw Error(ce(363));w=Tg(x,w),x=[];for(var U=0;U<w.length;U++)x.push($s(w[U]));for(w=x.length-1;0<w;w--){U=x[w];for(var Y=U.x,re=Y+U.width,he=U.y,Je=he+U.height,At=w-1;0<=At;At--)if(w!==At){var en=x[At],Dn=en.x,br=Dn+en.width,gi=en.y,Rr=gi+en.height;if(Y>=Dn&&he>=gi&&re<=br&&Je<=Rr){x.splice(w,1);break}else if(Y!==Dn||U.width!==en.width||Rr<he||gi>Je){if(!(he!==gi||U.height!==en.height||br<Y||Dn>re)){Dn>Y&&(en.width+=Dn-Y,en.x=Y),br<re&&(en.width=re-Dn),x.splice(w,1);break}}else{gi>he&&(en.height+=gi-he,en.y=he),Rr<Je&&(en.height=Je-gi),x.splice(w,1);break}}}return x},s.findHostInstance=Gg,s.findHostInstanceWithNoPortals=function(x){return x=fr(x),x=x!==null?vi(x):null,x===null?null:x.stateNode},s.findHostInstanceWithWarning=function(x){return Gg(x)},s.flushControlled=function(x){var w=wi;wi|=1;var U=zi.transition,Y=Yi;try{zi.transition=null,Yi=1,x()}finally{Yi=Y,zi.transition=U,wi=w,wi===0&&(Zp(),fo())}},s.flushPassiveEffects=Ap,s.flushSync=Fg,s.focusWithin=function(x,w){if(!ss)throw Error(ce(363));for(x=fh(x),w=bs(x,w),w=Array.from(w),x=0;x<w.length;){var U=w[x++];if(!Oi(U)){if(U.tag===5&&Hs(U.stateNode))return!0;for(U=U.child;U!==null;)w.push(U),U=U.sibling}}return!1},s.getCurrentUpdatePriority=function(){return Yi},s.getFindAllNodesFailureDescription=function(x,w){if(!ss)throw Error(ce(363));var U=0,Y=[];x=[fh(x),0];for(var re=0;re<x.length;){var he=x[re++],Je=x[re++],At=w[Je];if((he.tag!==5||!Oi(he))&&(gh(he,At)&&(Y.push(mh(At)),Je++,Je>U&&(U=Je)),Je<w.length))for(he=he.child;he!==null;)x.push(he,Je),he=he.sibling}if(U<w.length){for(x=[];U<w.length;U++)x.push(mh(w[U]));return`findAllNodes was able to match part of the selector:
  `+(Y.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},s.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return os(x.child.stateNode);default:return x.child.stateNode}},s.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:Gm,findFiberByHostInstance:x.findFiberByHostInstance||O1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")x=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)x=!0;else{try{yg=w.inject(x),Ec=w}catch(U){}x=!!w.checkDCE}}return x},s.isAlreadyRendering=function(){return!1},s.observeVisibleRects=function(x,w,U,Y){if(!ss)throw Error(ce(363));x=Tg(x,w);var re=_r(x,U,Y).disconnect;return{disconnect:function(){re()}}},s.registerMutableSourceForHydration=function(x,w){var U=w._getVersion;U=U(w._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[w,U]:x.mutableSourceEagerHydrationData.push(w,U)},s.runWithPriority=function(x,w){var U=Yi;try{return Yi=x,w()}finally{Yi=U}},s.shouldError=function(){return null},s.shouldSuspend=function(){return!1},s.updateContainer=function(x,w,U,Y){var re=w.current,he=uo(),Je=jl(re);return U=Md(U),w.context===null?w.context=U:w.pendingContext=U,w=Ga(he,Je),w.payload={element:x},Y=Y===void 0?null:Y,Y!==null&&(w.callback=Y),op(re,w),x=wl(re,Je,he),x!==null&&$d(x,re,Je),Je},s}},32576:function(u,n,y){"use strict";u.exports=y(46511)},76525:function(u,n,y){"use strict";u.exports=y(67287)},60053:function(u,n,y){"use strict";var S=y(25108);/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function d(Vn,$t){var Fn=Vn.length;Vn.push($t);e:for(;0<Fn;){var gr=Fn-1>>>1,Wr=Vn[gr];if(0<E(Wr,$t))Vn[gr]=$t,Vn[Fn]=Wr,Fn=gr;else break e}}function m(Vn){return Vn.length===0?null:Vn[0]}function s(Vn){if(Vn.length===0)return null;var $t=Vn[0],Fn=Vn.pop();if(Fn!==$t){Vn[0]=Fn;e:for(var gr=0,Wr=Vn.length,Li=Wr>>>1;gr<Li;){var Mn=2*(gr+1)-1,Tn=Vn[Mn],Ln=Mn+1,pr=Vn[Ln];if(0>E(Tn,Fn))Ln<Wr&&0>E(pr,Tn)?(Vn[gr]=pr,Vn[Ln]=Fn,gr=Ln):(Vn[gr]=Tn,Vn[Mn]=Fn,gr=Mn);else if(Ln<Wr&&0>E(pr,Fn))Vn[gr]=pr,Vn[Ln]=Fn,gr=Ln;else break e}}return $t}function E(Vn,$t){var Fn=Vn.sortIndex-$t.sortIndex;return Fn!==0?Fn:Vn.id-$t.id}if(typeof performance=="object"&&typeof performance.now=="function"){var H=performance;n.unstable_now=function(){return H.now()}}else{var te=Date,ce=te.now();n.unstable_now=function(){return te.now()-ce}}var J=[],pe=[],de=1,bt=null,nt=3,He=!1,ot=!1,gt=!1,St=typeof setTimeout=="function"?setTimeout:null,vt=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mt(Vn){for(var $t=m(pe);$t!==null;){if($t.callback===null)s(pe);else if($t.startTime<=Vn)s(pe),$t.sortIndex=$t.expirationTime,d(J,$t);else break;$t=m(pe)}}function Pt(Vn){if(gt=!1,mt(Vn),!ot)if(m(J)!==null)ot=!0,hi(Ot);else{var $t=m(pe);$t!==null&&os(Pt,$t.startTime-Vn)}}function Ot(Vn,$t){ot=!1,gt&&(gt=!1,vt(_n),_n=-1),He=!0;var Fn=nt;try{for(mt($t),bt=m(J);bt!==null&&(!(bt.expirationTime>$t)||Vn&&!zr());){var gr=bt.callback;if(typeof gr=="function"){bt.callback=null,nt=bt.priorityLevel;var Wr=gr(bt.expirationTime<=$t);$t=n.unstable_now(),typeof Wr=="function"?bt.callback=Wr:bt===m(J)&&s(J),mt($t)}else s(J);bt=m(J)}if(bt!==null)var Li=!0;else{var Mn=m(pe);Mn!==null&&os(Pt,Mn.startTime-$t),Li=!1}return Li}finally{bt=null,nt=Fn,He=!1}}var Jt=!1,zt=null,_n=-1,Kn=5,Cr=-1;function zr(){return!(n.unstable_now()-Cr<Kn)}function fr(){if(zt!==null){var Vn=n.unstable_now();Cr=Vn;var $t=!0;try{$t=zt(!0,Vn)}finally{$t?Ir():(Jt=!1,zt=null)}}else Jt=!1}var Ir;if(typeof ut=="function")Ir=function(){ut(fr)};else if(typeof MessageChannel!="undefined"){var Vi=new MessageChannel,vi=Vi.port2;Vi.port1.onmessage=fr,Ir=function(){vi.postMessage(null)}}else Ir=function(){St(fr,0)};function hi(Vn){zt=Vn,Jt||(Jt=!0,Ir())}function os(Vn,$t){_n=St(function(){Vn(n.unstable_now())},$t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Vn){Vn.callback=null},n.unstable_continueExecution=function(){ot||He||(ot=!0,hi(Ot))},n.unstable_forceFrameRate=function(Vn){0>Vn||125<Vn?S.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Kn=0<Vn?Math.floor(1e3/Vn):5},n.unstable_getCurrentPriorityLevel=function(){return nt},n.unstable_getFirstCallbackNode=function(){return m(J)},n.unstable_next=function(Vn){switch(nt){case 1:case 2:case 3:var $t=3;break;default:$t=nt}var Fn=nt;nt=$t;try{return Vn()}finally{nt=Fn}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Vn,$t){switch(Vn){case 1:case 2:case 3:case 4:case 5:break;default:Vn=3}var Fn=nt;nt=Vn;try{return $t()}finally{nt=Fn}},n.unstable_scheduleCallback=function(Vn,$t,Fn){var gr=n.unstable_now();switch(typeof Fn=="object"&&Fn!==null?(Fn=Fn.delay,Fn=typeof Fn=="number"&&0<Fn?gr+Fn:gr):Fn=gr,Vn){case 1:var Wr=-1;break;case 2:Wr=250;break;case 5:Wr=1073741823;break;case 4:Wr=1e4;break;default:Wr=5e3}return Wr=Fn+Wr,Vn={id:de++,callback:$t,priorityLevel:Vn,startTime:Fn,expirationTime:Wr,sortIndex:-1},Fn>gr?(Vn.sortIndex=Fn,d(pe,Vn),m(J)===null&&Vn===m(pe)&&(gt?(vt(_n),_n=-1):gt=!0,os(Pt,Fn-gr))):(Vn.sortIndex=Wr,d(J,Vn),ot||He||(ot=!0,hi(Ot))),Vn},n.unstable_shouldYield=zr,n.unstable_wrapCallback=function(Vn){var $t=nt;return function(){var Fn=nt;nt=$t;try{return Vn.apply(this,arguments)}finally{nt=Fn}}}},63840:function(u,n,y){"use strict";u.exports=y(60053)},73466:function(u){(function(n,y){u.exports=y()})(this,function(){var n=function(){function y(pe){return m.appendChild(pe.dom),pe}function S(pe){for(var de=0;de<m.children.length;de++)m.children[de].style.display=de===pe?"block":"none";d=pe}var d=0,m=document.createElement("div");m.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",m.addEventListener("click",function(pe){pe.preventDefault(),S(++d%m.children.length)},!1);var s=(performance||Date).now(),E=s,H=0,te=y(new n.Panel("FPS","#0ff","#002")),ce=y(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var J=y(new n.Panel("MB","#f08","#201"));return S(0),{REVISION:16,dom:m,addPanel:y,showPanel:S,begin:function(){s=(performance||Date).now()},end:function(){H++;var pe=(performance||Date).now();if(ce.update(pe-s,200),pe>E+1e3&&(te.update(1e3*H/(pe-E),100),E=pe,H=0,J)){var de=performance.memory;J.update(de.usedJSHeapSize/1048576,de.jsHeapSizeLimit/1048576)}return pe},update:function(){s=this.end()},domElement:m,setMode:S}};return n.Panel=function(y,S,d){var m=1/0,s=0,E=Math.round,H=E(window.devicePixelRatio||1),te=80*H,ce=48*H,J=3*H,pe=2*H,de=3*H,bt=15*H,nt=74*H,He=30*H,ot=document.createElement("canvas");ot.width=te,ot.height=ce,ot.style.cssText="width:80px;height:48px";var gt=ot.getContext("2d");return gt.font="bold "+9*H+"px Helvetica,Arial,sans-serif",gt.textBaseline="top",gt.fillStyle=d,gt.fillRect(0,0,te,ce),gt.fillStyle=S,gt.fillText(y,J,pe),gt.fillRect(de,bt,nt,He),gt.fillStyle=d,gt.globalAlpha=.9,gt.fillRect(de,bt,nt,He),{dom:ot,update:function(St,vt){m=Math.min(m,St),s=Math.max(s,St),gt.fillStyle=d,gt.globalAlpha=1,gt.fillRect(0,0,te,bt),gt.fillStyle=S,gt.fillText(E(St)+" "+y+" ("+E(m)+"-"+E(s)+")",J,pe),gt.drawImage(ot,de+H,bt,nt-H,He,de,bt,nt-H,He),gt.fillRect(de+nt-H,bt,H,He),gt.fillStyle=d,gt.globalAlpha=.9,gt.fillRect(de+nt-H,bt,H,E((1-St/vt)*He))}}},n})},90209:function(u,n,y){"use strict";y.r(n);var S=y(93379),d=y.n(S),m=y(7795),s=y.n(m),E=y(90569),H=y.n(E),te=y(3565),ce=y.n(te),J=y(19216),pe=y.n(J),de=y(44589),bt=y.n(de),nt=y(88208),He={};He.styleTagTransform=bt(),He.setAttributes=ce(),He.insert=H().bind(null,"head"),He.domAPI=s(),He.insertStyleElement=pe();var ot=d()(nt.Z,He);n.default=nt.Z&&nt.Z.locals?nt.Z.locals:void 0},58139:function(u,n,y){"use strict";y.d(n,{MA:function(){return H},Rq:function(){return E},ZH:function(){return ce}});const S=J=>typeof J=="object"&&typeof J.then=="function",d=[];function m(J,pe,de=(bt,nt)=>bt===nt){if(J===pe)return!0;if(!J||!pe)return!1;const bt=J.length;if(pe.length!==bt)return!1;for(let nt=0;nt<bt;nt++)if(!de(J[nt],pe[nt]))return!1;return!0}function s(J,pe=null,de=!1,bt={}){pe===null&&(pe=[J]);for(const He of d)if(m(pe,He.keys,He.equal)){if(de)return;if(Object.prototype.hasOwnProperty.call(He,"error"))throw He.error;if(Object.prototype.hasOwnProperty.call(He,"response"))return bt.lifespan&&bt.lifespan>0&&(He.timeout&&clearTimeout(He.timeout),He.timeout=setTimeout(He.remove,bt.lifespan)),He.response;if(!de)throw He.promise}const nt={keys:pe,equal:bt.equal,remove:()=>{const He=d.indexOf(nt);He!==-1&&d.splice(He,1)},promise:(S(J)?J:J(...pe)).then(He=>{nt.response=He,bt.lifespan&&bt.lifespan>0&&(nt.timeout=setTimeout(nt.remove,bt.lifespan))}).catch(He=>nt.error=He)};if(d.push(nt),!de)throw nt.promise}const E=(J,pe,de)=>s(J,pe,!1,de),H=(J,pe,de)=>void s(J,pe,!0,de),te=J=>{var pe;return(pe=d.find(de=>m(J,de.keys,de.equal)))==null?void 0:pe.response},ce=J=>{if(J===void 0||J.length===0)d.splice(0,d.length);else{const pe=d.find(de=>m(J,de.keys,de.equal));pe&&pe.remove()}}},3958:function(u,n,y){"use strict";y.d(n,{S:function(){return d}});const S=[];for(let E=0;E<256;++E)S.push((E+256).toString(16).slice(1));function d(E,H=0){return S[E[H+0]]+S[E[H+1]]+S[E[H+2]]+S[E[H+3]]+"-"+S[E[H+4]]+S[E[H+5]]+"-"+S[E[H+6]]+S[E[H+7]]+"-"+S[E[H+8]]+S[E[H+9]]+"-"+S[E[H+10]]+S[E[H+11]]+S[E[H+12]]+S[E[H+13]]+S[E[H+14]]+S[E[H+15]]}function m(E,H=0){const te=d(E,H);if(!validate(te))throw TypeError("Stringified UUID is invalid");return te}var s=null},14671:function(u,n,y){"use strict";y.d(n,{Z:function(){return H}});var S=y(67294),d=y(25108);function m(te){let ce;const J=new Set,pe=(gt,St)=>{const vt=typeof gt=="function"?gt(ce):gt;if(vt!==ce){const ut=ce;ce=St?vt:Object.assign({},ce,vt),J.forEach(mt=>mt(ce,ut))}},de=()=>ce,bt=(gt,St=de,vt=Object.is)=>{d.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let ut=St(ce);function mt(){const Pt=St(ce);if(!vt(ut,Pt)){const Ot=ut;gt(ut=Pt,Ot)}}return J.add(mt),()=>J.delete(mt)},ot={setState:pe,getState:de,subscribe:(gt,St,vt)=>St||vt?bt(gt,St,vt):(J.add(gt),()=>J.delete(gt)),destroy:()=>J.clear()};return ce=te(pe,de,ot),ot}const E=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?S.useEffect:S.useLayoutEffect;function H(te){const ce=typeof te=="function"?m(te):te,J=(pe=ce.getState,de=Object.is)=>{const[,bt]=(0,S.useReducer)(Jt=>Jt+1,0),nt=ce.getState(),He=(0,S.useRef)(nt),ot=(0,S.useRef)(pe),gt=(0,S.useRef)(de),St=(0,S.useRef)(!1),vt=(0,S.useRef)();vt.current===void 0&&(vt.current=pe(nt));let ut,mt=!1;(He.current!==nt||ot.current!==pe||gt.current!==de||St.current)&&(ut=pe(nt),mt=!de(vt.current,ut)),E(()=>{mt&&(vt.current=ut),He.current=nt,ot.current=pe,gt.current=de,St.current=!1});const Pt=(0,S.useRef)(nt);E(()=>{const Jt=()=>{try{const _n=ce.getState(),Kn=ot.current(_n);gt.current(vt.current,Kn)||(He.current=_n,vt.current=Kn,bt())}catch(_n){St.current=!0,bt()}},zt=ce.subscribe(Jt);return ce.getState()!==Pt.current&&Jt(),zt},[]);const Ot=mt?ut:vt.current;return(0,S.useDebugValue)(Ot),Ot};return Object.assign(J,ce),J[Symbol.iterator]=function(){d.warn("[useStore, api] = create() is deprecated and will be removed in v4");const pe=[J,ce];return{next(){const de=pe.length<=0;return{value:pe.shift(),done:de}}}},J}},10434:function(u){function n(){return u.exports=n=Object.assign?Object.assign.bind():function(y){for(var S=1;S<arguments.length;S++){var d=arguments[S];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(y[m]=d[m])}return y},u.exports.__esModule=!0,u.exports.default=u.exports,n.apply(this,arguments)}u.exports=n,u.exports.__esModule=!0,u.exports.default=u.exports},10203:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jr:function(){return FaceLandmarker_1},n:function(){return FilesetResolver_1}});var console=__webpack_require__(25108),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vision={},fileset_resolver={};let supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;const WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function isSimdSupported(){return rs(this,null,function*(){if(supportsSimd===void 0)try{yield WebAssembly.instantiate(WASM_SIMD_CHECK),supportsSimd=!0}catch(u){supportsSimd=!1}return supportsSimd})}function createFileset(u,n=""){return rs(this,null,function*(){const y=(yield isSimdSupported())?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${n}/${u}_${y}.js`,wasmBinaryPath:`${n}/${u}_${y}.wasm`}})}class FilesetResolver$1{static isSimdSupported(){return isSimdSupported()}static forAudioTasks(n){return createFileset("audio",n)}static forTextTasks(n){return createFileset("text",n)}static forVisionTasks(n){return createFileset("vision",n)}}fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;const DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(u){return u=u||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:u.color}),u)}function resolve(u,n){return u instanceof Function?u(n):u}class DrawingUtils$1{constructor(n){this.ctx=n}static clamp(n,y,S){const d=Math.min(y,S),m=Math.max(y,S);return Math.max(d,Math.min(m,n))}static lerp(n,y,S,d,m){const s=d*(1-(n-y)/(S-y))+m*(1-(S-n)/(S-y));return DrawingUtils$1.clamp(s,d,m)}drawLandmarks(n,y){if(!n)return;const S=this.ctx,d=addDefaultOptions(y);S.save();const m=S.canvas;let s=0;for(const E of n){S.fillStyle=resolve(d.fillColor,{index:s,from:E}),S.strokeStyle=resolve(d.color,{index:s,from:E}),S.lineWidth=resolve(d.lineWidth,{index:s,from:E});const H=new Path2D;H.arc(E.x*m.width,E.y*m.height,resolve(d.radius,{index:s,from:E}),0,2*Math.PI),S.fill(H),S.stroke(H),++s}S.restore()}drawConnectors(n,y,S){if(!n||!y)return;const d=this.ctx,m=addDefaultOptions(S);d.save();const s=d.canvas;let E=0;for(const H of y){d.beginPath();const te=n[H.start],ce=n[H.end];te&&ce&&(d.strokeStyle=resolve(m.color,{index:E,from:te,to:ce}),d.lineWidth=resolve(m.lineWidth,{index:E,from:te,to:ce}),d.moveTo(te.x*s.width,te.y*s.height),d.lineTo(ce.x*s.width,ce.y*s.height)),++E,d.stroke()}d.restore()}drawBoundingBox(n,y){const S=this.ctx,d=addDefaultOptions(y);S.save(),S.beginPath(),S.lineWidth=resolve(d.lineWidth,{}),S.strokeStyle=resolve(d.color,{}),S.fillStyle=resolve(d.fillColor,{}),S.moveTo(n.originX,n.originY),S.lineTo(n.originX+n.width,n.originY),S.lineTo(n.originX+n.width,n.originY+n.height),S.lineTo(n.originX,n.originY+n.height),S.lineTo(n.originX,n.originY),S.stroke(),S.fill(),S.restore()}}drawing_utils.DrawingUtils=DrawingUtils$1;var image={},image_shader_context={};Object.defineProperty(image_shader_context,"__esModule",{value:!0}),image_shader_context.MPImageShaderContext=image_shader_context.assertNotNull=void 0;const VERTEX_SHADER=`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,FRAGMENT_SHADER=`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
   void main() {
     gl_FragColor = texture2D(inputTexture, vTex);
   }
 `;function assertNotNull(u,n){if(u===null)throw new Error(`Unable to obtain required WebGL resource: ${n}`);return u}image_shader_context.assertNotNull=assertNotNull;class MPImageShaderBuffers{constructor(n,y,S,d){this.gl=n,this.vertexArrayObject=y,this.vertexBuffer=S,this.textureBuffer=d}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}}class MPImageShaderContext{compileShader(n,y){const S=this.gl,d=assertNotNull(S.createShader(y),"Failed to create WebGL shader");if(S.shaderSource(d,n),S.compileShader(d),!S.getShaderParameter(d,S.COMPILE_STATUS)){const m=S.getShaderInfoLog(d);throw new Error(`Could not compile WebGL shader: ${m}`)}return S.attachShader(this.program,d),d}setupShaders(){const n=this.gl;if(this.program=assertNotNull(n.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(VERTEX_SHADER,n.VERTEX_SHADER),this.fragmentShader=this.compileShader(FRAGMENT_SHADER,n.FRAGMENT_SHADER),n.linkProgram(this.program),!n.getProgramParameter(this.program,n.LINK_STATUS)){const y=n.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${y}`)}this.aVertex=n.getAttribLocation(this.program,"aVertex"),this.aTex=n.getAttribLocation(this.program,"aTex")}createBuffers(n){const y=this.gl,S=assertNotNull(y.createVertexArray(),"Failed to create vertex array");y.bindVertexArray(S);const d=assertNotNull(y.createBuffer(),"Failed to create buffer");y.bindBuffer(y.ARRAY_BUFFER,d),y.enableVertexAttribArray(this.aVertex),y.vertexAttribPointer(this.aVertex,2,y.FLOAT,!1,0,0),y.bufferData(y.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),y.STATIC_DRAW);const m=assertNotNull(y.createBuffer(),"Failed to create buffer");y.bindBuffer(y.ARRAY_BUFFER,m),y.enableVertexAttribArray(this.aTex),y.vertexAttribPointer(this.aTex,2,y.FLOAT,!1,0,0);const s=n?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return y.bufferData(y.ARRAY_BUFFER,new Float32Array(s),y.STATIC_DRAW),y.bindBuffer(y.ARRAY_BUFFER,null),y.bindVertexArray(null),new MPImageShaderBuffers(y,S,d,m)}getShaderBuffers(n){return n?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(n){if(this.gl){if(n!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=n}run(n,y,S){this.maybeInitGL(n),this.program||this.setupShaders();const d=this.getShaderBuffers(y);n.useProgram(this.program),d.bind();const m=S();return d.unbind(),m}bindFramebuffer(n,y){this.maybeInitGL(n),this.framebuffer||(this.framebuffer=assertNotNull(n.createFramebuffer(),"Failed to create framebuffe.")),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,y,0)}unbindFramebuffer(){var n;(n=this.gl)===null||n===void 0||n.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){const n=this.gl;n.deleteProgram(this.program),n.deleteShader(this.vertexShader),n.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}}image_shader_context.MPImageShaderContext=MPImageShaderContext,Object.defineProperty(image,"__esModule",{value:!0}),image.MPImage=void 0;const image_shader_context_1$2=image_shader_context,INSTANCE_COUNT_WARNING_THRESHOLD$1=250;var MPImageType;(function(u){u[u.IMAGE_DATA=0]="IMAGE_DATA",u[u.IMAGE_BITMAP=1]="IMAGE_BITMAP",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPImageType||(MPImageType={}));class MPImage$1{constructor(n,y,S,d,m,s,E){this.containers=n,this.ownsImageBitmap=y,this.ownsWebGLTexture=S,this.canvas=d,this.shaderContext=m,this.width=s,this.height=E,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--MPImage$1.instancesBeforeWarning,MPImage$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(MPImageType.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(MPImageType.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(MPImageType.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(n){switch(n){case MPImageType.IMAGE_DATA:return this.containers.find(y=>y instanceof ImageData);case MPImageType.IMAGE_BITMAP:return this.containers.find(y=>typeof ImageBitmap!="undefined"&&y instanceof ImageBitmap);case MPImageType.WEBGL_TEXTURE:return this.containers.find(y=>typeof WebGLTexture!="undefined"&&y instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const y of this.containers){let S;if(y instanceof ImageData)S=new ImageData(y.data,this.width,this.height);else if(y instanceof WebGLTexture){const d=this.getGL(),m=this.getShaderContext();d.activeTexture(d.TEXTURE1),S=(0,image_shader_context_1$2.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,S),this.configureTextureParams(),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,this.width,this.height,0,d.RGBA,d.UNSIGNED_BYTE,null),d.bindTexture(d.TEXTURE_2D,null),m.bindFramebuffer(d,S),m.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),m.unbindFramebuffer(),this.unbindTexture()}else{if(!(y instanceof ImageBitmap))throw new Error(`Type is not supported: ${y}`);this.convertToWebGLTexture(),this.bindTexture(),S=this.copyTextureToBitmap(),this.unbindTexture()}n.push(S)}return new MPImage$1(n,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$2.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$2.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let n=this.getContainer(MPImageType.IMAGE_BITMAP);return n||(this.convertToWebGLTexture(),n=this.convertWebGLTextureToImageBitmap(),this.containers.push(n),this.ownsImageBitmap=!0),n}convertToImageData(){let n=this.getContainer(MPImageType.IMAGE_DATA);if(!n){const y=this.getGL(),S=this.getShaderContext(),d=new Uint8Array(this.width*this.height*4),m=this.convertToWebGLTexture();S.bindFramebuffer(y,m),y.readPixels(0,0,this.width,this.height,y.RGBA,y.UNSIGNED_BYTE,d),S.unbindFramebuffer(),n=new ImageData(new Uint8ClampedArray(d.buffer),this.width,this.height),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPImageType.WEBGL_TEXTURE);if(!n){const y=this.getGL();n=this.bindTexture();const S=this.getContainer(MPImageType.IMAGE_BITMAP)||this.convertToImageData();y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,S),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let y=this.getContainer(MPImageType.WEBGL_TEXTURE);return y?n.bindTexture(n.TEXTURE_2D,y):(y=(0,image_shader_context_1$2.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(y),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,y),this.configureTextureParams()),y}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){const n=this.getGL();return this.getShaderContext().run(n,!0,()=>this.runWithResizedCanvas(()=>(n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))}convertWebGLTextureToImageBitmap(){this.bindTexture();const n=this.copyTextureToBitmap();return this.unbindTexture(),n}runWithResizedCanvas(n){const y=this.canvas;if(y.width===this.width&&y.height===this.height)return n();const S=y.width,d=y.height;y.width=this.width,y.height=this.height;const m=n();return y.width=S,y.height=d,m}close(){this.ownsImageBitmap&&this.getContainer(MPImageType.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPImageType.WEBGL_TEXTURE)),MPImage$1.instancesBeforeWarning=-1}}image.MPImage=MPImage$1,MPImage$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD$1;var mask={},platform_utils={};function isWebKit(u=navigator){const n=u.userAgent;return n.includes("Safari")&&!n.includes("Chrome")}function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isIOS=platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,platform_utils.isIOS=isIOS,Object.defineProperty(mask,"__esModule",{value:!0}),mask.MPMask=void 0;const image_shader_context_1$1=image_shader_context,platform_utils_1$1=platform_utils,INSTANCE_COUNT_WARNING_THRESHOLD=250;var MPMaskType;(function(u){u[u.UINT8_ARRAY=0]="UINT8_ARRAY",u[u.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPMaskType||(MPMaskType={}));class MPMask$1{constructor(n,y,S,d,m,s){this.containers=n,this.ownsWebGLTexture=y,this.canvas=S,this.shaderContext=d,this.width=m,this.height=s,this.ownsWebGLTexture&&(--MPMask$1.instancesBeforeWarning,MPMask$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(MPMaskType.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(MPMaskType.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(MPMaskType.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){const n=this.getGL();if(!MPMask$1.texImage2DFormat)if(n.getExtension("EXT_color_buffer_float")&&n.getExtension("OES_texture_float_linear")&&n.getExtension("EXT_float_blend"))MPMask$1.texImage2DFormat=n.R32F;else{if(!n.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");MPMask$1.texImage2DFormat=n.R16F}return MPMask$1.texImage2DFormat}getContainer(n){switch(n){case MPMaskType.UINT8_ARRAY:return this.containers.find(y=>y instanceof Uint8Array);case MPMaskType.FLOAT32_ARRAY:return this.containers.find(y=>y instanceof Float32Array);case MPMaskType.WEBGL_TEXTURE:return this.containers.find(y=>typeof WebGLTexture!="undefined"&&y instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const y of this.containers){let S;if(y instanceof Uint8Array)S=new Uint8Array(y);else if(y instanceof Float32Array)S=new Float32Array(y);else{if(!(y instanceof WebGLTexture))throw new Error(`Type is not supported: ${y}`);{const d=this.getGL(),m=this.getShaderContext();d.activeTexture(d.TEXTURE1),S=(0,image_shader_context_1$1.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,S),this.configureTextureParams();const s=this.getTexImage2DFormat();d.texImage2D(d.TEXTURE_2D,0,s,this.width,this.height,0,d.RED,d.FLOAT,null),d.bindTexture(d.TEXTURE_2D,null),m.bindFramebuffer(d,S),m.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),m.unbindFramebuffer(),this.unbindTexture()}}n.push(S)}return new MPMask$1(n,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$1.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$1.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let n=this.getContainer(MPMaskType.FLOAT32_ARRAY);if(!n){const y=this.getContainer(MPMaskType.UINT8_ARRAY);if(y)n=new Float32Array(y).map(S=>S/255);else{n=new Float32Array(this.width*this.height);const S=this.getGL(),d=this.getShaderContext(),m=this.convertToWebGLTexture();if(d.bindFramebuffer(S,m),(0,platform_utils_1$1.isIOS)()){const s=new Float32Array(this.width*this.height*4);S.readPixels(0,0,this.width,this.height,S.RGBA,S.FLOAT,s);for(let E=0,H=0;E<n.length;++E,H+=4)n[E]=s[H]}else S.readPixels(0,0,this.width,this.height,S.RED,S.FLOAT,n)}this.containers.push(n)}return n}convertToUint8Array(){let n=this.getContainer(MPMaskType.UINT8_ARRAY);if(!n){const y=this.convertToFloat32Array();n=new Uint8Array(y.map(S=>255*S)),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPMaskType.WEBGL_TEXTURE);if(!n){const y=this.getGL();n=this.bindTexture();const S=this.convertToFloat32Array(),d=this.getTexImage2DFormat();y.texImage2D(y.TEXTURE_2D,0,d,this.width,this.height,0,y.RED,y.FLOAT,S),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let y=this.getContainer(MPMaskType.WEBGL_TEXTURE);return y?n.bindTexture(n.TEXTURE_2D,y):(y=(0,image_shader_context_1$1.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(y),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,y),this.configureTextureParams()),y}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPMaskType.WEBGL_TEXTURE)),MPMask$1.instancesBeforeWarning=-1}}mask.MPMask=MPMask$1,MPMask$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(u,n,y){u instanceof String&&(u=String(u));for(var S=u.length,d=0;d<S;d++){var m=u[d];if(n.call(y,m,d,u))return{i:d,v:m}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(u,n,y){u!=Array.prototype&&u!=Object.prototype&&(u[n]=y.value)},$jscomp.getGlobal=function(u){return typeof window!="undefined"&&window===u?u:commonjsGlobal!==void 0&&commonjsGlobal!=null?commonjsGlobal:u},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(u,n,y,S){if(n){for(y=$jscomp.global,u=u.split("."),S=0;S<u.length-1;S++){var d=u[S];d in y||(y[d]={}),y=y[d]}(n=n(S=y[u=u[u.length-1]]))!=S&&n!=null&&$jscomp.defineProperty(y,u,{configurable:!0,writable:!0,value:n})}},$jscomp.polyfill("Array.prototype.findIndex",function(u){return u||function(n,y){return $jscomp.findInternal(this,n,y).i}},"es6","es3"),$jscomp.checkStringArgs=function(u,n,y){if(u==null)throw new TypeError("The 'this' value for String.prototype."+y+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+y+" must not be a regular expression");return u+""},$jscomp.polyfill("String.prototype.endsWith",function(u){return u||function(n,y){var S=$jscomp.checkStringArgs(this,n,"endsWith");n+="",y===void 0&&(y=S.length),y=Math.max(0,Math.min(0|y,S.length));for(var d=n.length;0<d&&0<y;)if(S[--y]!=n[--d])return!1;return 0>=d}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(u){return u||function(n,y){return $jscomp.findInternal(this,n,y).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(u){return u||function(n,y){var S=$jscomp.checkStringArgs(this,n,"startsWith");n+="";var d=S.length,m=n.length;y=Math.max(0,Math.min(0|y,S.length));for(var s=0;s<m&&y<d;)if(S[y++]!=n[s++])return!1;return s>=m}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(u){return u||function(n){var y=$jscomp.checkStringArgs(this,null,"repeat");if(0>n||1342177279<n)throw new RangeError("Invalid count value");n|=0;for(var S="";n;)1&n&&(S+=y),(n>>>=1)&&(y+=y);return S}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(u,n,y){u=u.split("."),y=y||goog.global,u[0]in y||y.execScript===void 0||y.execScript("var "+u[0]);for(var S;u.length&&(S=u.shift());)u.length||n===void 0?y=y[S]&&y[S]!==Object.prototype[S]?y[S]:y[S]={}:y[S]=n},goog.define=function(u,n){return n},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(u){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(u)},goog.constructNamespace_=function(u,n){goog.exportPath_(u,n)},goog.getScriptNonce=function(u){return u&&u!=goog.global?goog.getScriptNonce_(u.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(u){return(u=u.querySelector&&u.querySelector("script[nonce]"))&&(u=u.nonce||u.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(u)?u:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(u){if(typeof u!="string"||!u||u.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+u+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=u},goog.module.get=function(u){return goog.module.getInternal_(u)},goog.module.getInternal_=function(u){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var u=goog.global.$jscomp;return!!u&&typeof u.getCurrentModulePath=="function"&&!!u.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(u){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=u;else{var n=goog.global.$jscomp;if(!n||typeof n.getCurrentModulePath!="function")throw Error('Module with namespace "'+u+'" has been loaded incorrectly.');n=n.require(n.getCurrentModulePath()),goog.loadedModules_[u]={exports:n,type:goog.ModuleType.ES6,moduleId:u}}},goog.setTestOnly=function(u){if(goog.DISALLOW_TEST_ONLY_CODE)throw u=u||"",Error("Importing test-only code into non-debug environment"+(u?": "+u:"."))},goog.forwardDeclare=function(u){},goog.getObjectByName=function(u,n){u=u.split("."),n=n||goog.global;for(var y=0;y<u.length;y++)if((n=n[u[y]])==null)return null;return n},goog.globalize=function(u,n){for(var y in n=n||goog.global,u)n[y]=u[y]},goog.addDependency=function(u,n,y,S){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(u){goog.global.console&&goog.global.console.error(u)},goog.require=function(u){},goog.requireType=function(u){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(u){u.instance_=void 0,u.getInstance=function(){return u.instance_?u.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=u),u.instance_=new u)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(u){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(u){return"(function(){"+u+`
;})();
`},goog.loadModule=function(u){var n=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(u))var y=u.call(void 0,{});else{if(typeof u!="string")throw Error("Invalid module definition");goog.useSafari10Workaround()&&(u=goog.workaroundSafari10EvalBug(u)),y=goog.loadModuleFromSource_.call(void 0,u)}var S=goog.moduleLoaderState_.moduleName;if(typeof S!="string"||!S)throw Error('Invalid module name "'+S+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(S,y):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof y=="object"&&y!=null&&Object.seal(y),goog.loadedModules_[S]={exports:y,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=n}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(u){u=u.split("/");for(var n=0;n<u.length;)u[n]=="."?u.splice(n,1):n&&u[n]==".."&&u[n-1]&&u[n-1]!=".."?u.splice(--n,2):n++;return u.join("/")},goog.loadFileSync_=function(u){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(u);try{var n=new goog.global.XMLHttpRequest;return n.open("get",u,!1),n.send(),n.status==0||n.status==200?n.responseText:null}catch(y){return null}},goog.transpile_=function(u,n,y){var S=goog.global.$jscomp;S||(goog.global.$jscomp=S={});var d=S.transpile;if(!d){var m=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(m);if(s){if(function(){(0,eval)(s+`
//# sourceURL=`+m)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=(S=goog.global.$jscomp).transpile}}return d||(d=S.transpile=function(E,H){return goog.logToConsole_(H+" requires transpilation but no transpiler was found."),E}),d(u,n,y)},goog.typeOf=function(u){var n=typeof u;if(n=="object"){if(!u)return"null";if(u instanceof Array)return"array";if(u instanceof Object)return n;var y=Object.prototype.toString.call(u);if(y=="[object Window]")return"object";if(y=="[object Array]"||typeof u.length=="number"&&u.splice!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("splice"))return"array";if(y=="[object Function]"||u.call!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("call"))return"function"}else if(n=="function"&&u.call===void 0)return"object";return n},goog.isArray=function(u){return goog.typeOf(u)=="array"},goog.isArrayLike=function(u){var n=goog.typeOf(u);return n=="array"||n=="object"&&typeof u.length=="number"},goog.isDateLike=function(u){return goog.isObject(u)&&typeof u.getFullYear=="function"},goog.isFunction=function(u){return goog.typeOf(u)=="function"},goog.isObject=function(u){var n=typeof u;return n=="object"&&u!=null||n=="function"},goog.getUid=function(u){return Object.prototype.hasOwnProperty.call(u,goog.UID_PROPERTY_)&&u[goog.UID_PROPERTY_]||(u[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(u){return!!u[goog.UID_PROPERTY_]},goog.removeUid=function(u){u!==null&&"removeAttribute"in u&&u.removeAttribute(goog.UID_PROPERTY_);try{delete u[goog.UID_PROPERTY_]}catch(n){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(typeof u.clone=="function")return u.clone();for(var y in n=n=="array"?[]:{},u)n[y]=goog.cloneObject(u[y]);return n}return u},goog.bindNative_=function(u,n,y){return u.call.apply(u.bind,arguments)},goog.bindJs_=function(u,n,y){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,S),u.apply(n,d)}}return function(){return u.apply(n,arguments)}},goog.bind=function(u,n,y){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(u,n){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),u.apply(this,S)}},goog.mixin=function(u,n){for(var y in n)u[y]=n[y]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(u){if(goog.global.execScript)goog.global.execScript(u,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch(S){}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch(S){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(u);else{var n=goog.global.document,y=n.createElement("script");y.type="text/javascript",y.defer=!1,y.appendChild(n.createTextNode(u)),n.head.appendChild(y),n.head.removeChild(y)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(u,n){if(String(u).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+u);var y=function(d){return goog.cssNameMapping_[d]||d},S=function(d){d=d.split("-");for(var m=[],s=0;s<d.length;s++)m.push(y(d[s]));return m.join("-")};return S=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?y:S:function(d){return d},u=n?u+"-"+S(n):S(u),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(u):u},goog.setCssNameMapping=function(u,n){goog.cssNameMapping_=u,goog.cssNameMappingStyle_=n},goog.getMsg=function(u,n,y){return y&&y.html&&(u=u.replace(/</g,"&lt;")),n&&(u=u.replace(/\{\$([^}]+)}/g,function(S,d){return n!=null&&d in n?n[d]:S})),u},goog.getMsgWithFallback=function(u,n){return u},goog.exportSymbol=function(u,n,y){goog.exportPath_(u,n,y)},goog.exportProperty=function(u,n,y){u[n]=y},goog.inherits=function(u,n){function y(){}y.prototype=n.prototype,u.superClass_=n.prototype,u.prototype=new y,u.prototype.constructor=u,u.base=function(S,d,m){for(var s=Array(arguments.length-2),E=2;E<arguments.length;E++)s[E-2]=arguments[E];return n.prototype[d].apply(S,s)}},goog.scope=function(u){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");u.call(goog.global)},goog.defineClass=function(u,n){var y=n.constructor,S=n.statics;return y&&y!=Object.prototype.constructor||(y=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),y=goog.defineClass.createSealingConstructor_(y,u),u&&goog.inherits(y,u),delete n.constructor,delete n.statics,goog.defineClass.applyProperties_(y.prototype,n),S!=null&&(S instanceof Function?S(y):goog.defineClass.applyProperties_(y,S)),y},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(u,n){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return u;var y=!goog.defineClass.isUnsealable_(n),S=function(){var d=u.apply(this,arguments)||this;return d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_],this.constructor===S&&y&&Object.seal instanceof Function&&Object.seal(d),d};return S},goog.defineClass.isUnsealable_=function(u){return u&&u.prototype&&u.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(u,n){for(var y in n)Object.prototype.hasOwnProperty.call(n,y)&&(u[y]=n[y]);for(var S=0;S<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;S++)y=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[S],Object.prototype.hasOwnProperty.call(n,y)&&(u[y]=n[y])},goog.tagUnsealableClass=function(u){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(u){return u},goog.createTrustedTypesPolicy=function(u){var n=null,y=goog.global.trustedTypes||goog.global.TrustedTypes;if(!y||!y.createPolicy)return n;try{n=y.createPolicy(u,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(S){goog.logToConsole_(S.message)}return n},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(u,n){return u===n?u!==0||1/u==1/n:u!=u&&n!=n},goog.object.forEach=function(u,n,y){for(var S in u)n.call(y,u[S],S,u)},goog.object.filter=function(u,n,y){var S,d={};for(S in u)n.call(y,u[S],S,u)&&(d[S]=u[S]);return d},goog.object.map=function(u,n,y){var S,d={};for(S in u)d[S]=n.call(y,u[S],S,u);return d},goog.object.some=function(u,n,y){for(var S in u)if(n.call(y,u[S],S,u))return!0;return!1},goog.object.every=function(u,n,y){for(var S in u)if(!n.call(y,u[S],S,u))return!1;return!0},goog.object.getCount=function(u){var n,y=0;for(n in u)y++;return y},goog.object.getAnyKey=function(u){for(var n in u)return n},goog.object.getAnyValue=function(u){for(var n in u)return u[n]},goog.object.contains=function(u,n){return goog.object.containsValue(u,n)},goog.object.getValues=function(u){var n,y=[],S=0;for(n in u)y[S++]=u[n];return y},goog.object.getKeys=function(u){var n,y=[],S=0;for(n in u)y[S++]=n;return y},goog.object.getValueByKeys=function(u,n){var y=goog.isArrayLike(n),S=y?n:arguments;for(y=y?0:1;y<S.length;y++){if(u==null)return;u=u[S[y]]}return u},goog.object.containsKey=function(u,n){return u!==null&&n in u},goog.object.containsValue=function(u,n){for(var y in u)if(u[y]==n)return!0;return!1},goog.object.findKey=function(u,n,y){for(var S in u)if(n.call(y,u[S],S,u))return S},goog.object.findValue=function(u,n,y){return(n=goog.object.findKey(u,n,y))&&u[n]},goog.object.isEmpty=function(u){for(var n in u)return!1;return!0},goog.object.clear=function(u){for(var n in u)delete u[n]},goog.object.remove=function(u,n){var y;return(y=n in u)&&delete u[n],y},goog.object.add=function(u,n,y){if(u!==null&&n in u)throw Error('The object already contains the key "'+n+'"');goog.object.set(u,n,y)},goog.object.get=function(u,n,y){return u!==null&&n in u?u[n]:y},goog.object.set=function(u,n,y){u[n]=y},goog.object.setIfUndefined=function(u,n,y){return n in u?u[n]:u[n]=y},goog.object.setWithReturnValueIfNotSet=function(u,n,y){return n in u?u[n]:(y=y(),u[n]=y)},goog.object.equals=function(u,n){for(var y in u)if(!(y in n)||u[y]!==n[y])return!1;for(var S in n)if(!(S in u))return!1;return!0},goog.object.clone=function(u){var n,y={};for(n in u)y[n]=u[n];return y},goog.object.unsafeClone=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(goog.isFunction(u.clone))return u.clone();for(var y in n=n=="array"?[]:{},u)n[y]=goog.object.unsafeClone(u[y]);return n}return u},goog.object.transpose=function(u){var n,y={};for(n in u)y[u[n]]=n;return y},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(u,n){for(var y,S,d=1;d<arguments.length;d++){for(y in S=arguments[d])u[y]=S[y];for(var m=0;m<goog.object.PROTOTYPE_FIELDS_.length;m++)y=goog.object.PROTOTYPE_FIELDS_[m],Object.prototype.hasOwnProperty.call(S,y)&&(u[y]=S[y])}},goog.object.create=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(n%2)throw Error("Uneven number of arguments");for(var y={},S=0;S<n;S+=2)y[arguments[S]]=arguments[S+1];return y},goog.object.createSet=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var y={},S=0;S<n;S++)y[arguments[S]]=!0;return y},goog.object.createImmutableView=function(u){var n=u;return Object.isFrozen&&!Object.isFrozen(u)&&(n=Object.create(u),Object.freeze(n)),n},goog.object.isImmutableView=function(u){return!!Object.isFrozen&&Object.isFrozen(u)},goog.object.getAllPropertyNames=function(u,n,y){if(!u)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(u);for(var S={};u&&(u!==Object.prototype||n)&&(u!==Function.prototype||y);){for(var d=Object.getOwnPropertyNames(u),m=0;m<d.length;m++)S[d[m]]=!0;u=Object.getPrototypeOf(u)}return goog.object.getKeys(S)},goog.object.getSuperClass=function(u){return(u=Object.getPrototypeOf(u.prototype))&&u.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(u,n,y,S){var d="Assertion failed";if(y){d+=": "+y;var m=S}else u&&(d+=": "+u,m=n);throw Error(""+d,m||[])},jspb.asserts.assert=function(u,n,y){for(var S=[],d=2;d<arguments.length;++d)S[d-2]=arguments[d];return u||jspb.asserts.doAssertFailure("",null,n,S),u},jspb.asserts.assertString=function(u,n,y){for(var S=[],d=2;d<arguments.length;++d)S[d-2]=arguments[d];return typeof u!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(u),u],n,S),u},jspb.asserts.assertArray=function(u,n,y){for(var S=[],d=2;d<arguments.length;++d)S[d-2]=arguments[d];return Array.isArray(u)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(u),u],n,S),u},jspb.asserts.fail=function(u,n){for(var y=[],S=1;S<arguments.length;++S)y[S-1]=arguments[S];throw Error("Failure"+(u?": "+u:""),y)},jspb.asserts.assertInstanceof=function(u,n,y,S){for(var d=[],m=3;m<arguments.length;++m)d[m-3]=arguments[m];return u instanceof n||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(n),jspb.asserts.getType(u)],y,d),u},jspb.asserts.getType=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(u){var n=jspb.BinaryConstants.FieldType,y=jspb.BinaryConstants.WireType;switch(u){case n.INT32:case n.INT64:case n.UINT32:case n.UINT64:case n.SINT32:case n.SINT64:case n.BOOL:case n.ENUM:case n.VHASH64:return y.VARINT;case n.DOUBLE:case n.FIXED64:case n.SFIXED64:case n.FHASH64:return y.FIXED64;case n.STRING:case n.MESSAGE:case n.BYTES:return y.DELIMITED;case n.FLOAT:case n.FIXED32:case n.SFIXED32:return y.FIXED32;default:return y.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(u){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var n=Error().stack;n&&(this.stack=n)}u&&(this.message=String(u)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(u,n){goog.debug.Error.call(this,goog.asserts.subs_(u,n)),this.messagePattern=u},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(u){throw u},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(u,n){for(var y="",S=(u=u.split("%s")).length-1,d=0;d<S;d++)y+=u[d]+(d<n.length?n[d]:"%s");return y+u[S]},goog.asserts.doAssertFailure_=function(u,n,y,S){var d="Assertion failed";if(y){d+=": "+y;var m=S}else u&&(d+=": "+u,m=n);u=new goog.asserts.AssertionError(""+d,m||[]),goog.asserts.errorHandler_(u)},goog.asserts.setErrorHandler=function(u){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=u)},goog.asserts.assert=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&!u&&goog.asserts.doAssertFailure_("",null,n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertExists=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&u==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.fail=function(u,n){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(u?": "+u:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&typeof u!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertString=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&typeof u!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertFunction=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(u)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObject=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(u)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertArray=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(u)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertBoolean=function(u,n,y){return goog.asserts.ENABLE_ASSERTS&&typeof u!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertElement=function(u,n,y){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(u)&&u.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertInstanceof=function(u,n,y,S){return!goog.asserts.ENABLE_ASSERTS||u instanceof n||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(n),goog.asserts.getType_(u)],y,Array.prototype.slice.call(arguments,3)),u},goog.asserts.assertFinite=function(u,n,y){return!goog.asserts.ENABLE_ASSERTS||typeof u=="number"&&isFinite(u)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var u in Object.prototype)goog.asserts.fail(u+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(u){return u[u.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(u,n,y){return goog.asserts.assert(u.length!=null),Array.prototype.indexOf.call(u,n,y)}:function(u,n,y){if(y=y==null?0:0>y?Math.max(0,u.length+y):y,typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.indexOf(n,y);for(;y<u.length;y++)if(y in u&&u[y]===n)return y;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(u,n,y){return goog.asserts.assert(u.length!=null),Array.prototype.lastIndexOf.call(u,n,y==null?u.length-1:y)}:function(u,n,y){if(0>(y=y==null?u.length-1:y)&&(y=Math.max(0,u.length+y)),typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.lastIndexOf(n,y);for(;0<=y;y--)if(y in u&&u[y]===n)return y;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(u,n,y){goog.asserts.assert(u.length!=null),Array.prototype.forEach.call(u,n,y)}:function(u,n,y){for(var S=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<S;m++)m in d&&n.call(y,d[m],m,u)},goog.array.forEachRight=function(u,n,y){var S=u.length,d=typeof u=="string"?u.split(""):u;for(--S;0<=S;--S)S in d&&n.call(y,d[S],S,u)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(u,n,y){return goog.asserts.assert(u.length!=null),Array.prototype.filter.call(u,n,y)}:function(u,n,y){for(var S=u.length,d=[],m=0,s=typeof u=="string"?u.split(""):u,E=0;E<S;E++)if(E in s){var H=s[E];n.call(y,H,E,u)&&(d[m++]=H)}return d},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(u,n,y){return goog.asserts.assert(u.length!=null),Array.prototype.map.call(u,n,y)}:function(u,n,y){for(var S=u.length,d=Array(S),m=typeof u=="string"?u.split(""):u,s=0;s<S;s++)s in m&&(d[s]=n.call(y,m[s],s,u));return d},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(u,n,y,S){return goog.asserts.assert(u.length!=null),S&&(n=goog.bind(n,S)),Array.prototype.reduce.call(u,n,y)}:function(u,n,y,S){var d=y;return goog.array.forEach(u,function(m,s){d=n.call(S,d,m,s,u)}),d},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(u,n,y,S){return goog.asserts.assert(u.length!=null),goog.asserts.assert(n!=null),S&&(n=goog.bind(n,S)),Array.prototype.reduceRight.call(u,n,y)}:function(u,n,y,S){var d=y;return goog.array.forEachRight(u,function(m,s){d=n.call(S,d,m,s,u)}),d},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(u,n,y){return goog.asserts.assert(u.length!=null),Array.prototype.some.call(u,n,y)}:function(u,n,y){for(var S=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<S;m++)if(m in d&&n.call(y,d[m],m,u))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(u,n,y){return goog.asserts.assert(u.length!=null),Array.prototype.every.call(u,n,y)}:function(u,n,y){for(var S=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<S;m++)if(m in d&&!n.call(y,d[m],m,u))return!1;return!0},goog.array.count=function(u,n,y){var S=0;return goog.array.forEach(u,function(d,m,s){n.call(y,d,m,s)&&++S},y),S},goog.array.find=function(u,n,y){return 0>(n=goog.array.findIndex(u,n,y))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndex=function(u,n,y){for(var S=u.length,d=typeof u=="string"?u.split(""):u,m=0;m<S;m++)if(m in d&&n.call(y,d[m],m,u))return m;return-1},goog.array.findRight=function(u,n,y){return 0>(n=goog.array.findIndexRight(u,n,y))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndexRight=function(u,n,y){var S=u.length,d=typeof u=="string"?u.split(""):u;for(--S;0<=S;S--)if(S in d&&n.call(y,d[S],S,u))return S;return-1},goog.array.contains=function(u,n){return 0<=goog.array.indexOf(u,n)},goog.array.isEmpty=function(u){return u.length==0},goog.array.clear=function(u){if(!Array.isArray(u))for(var n=u.length-1;0<=n;n--)delete u[n];u.length=0},goog.array.insert=function(u,n){goog.array.contains(u,n)||u.push(n)},goog.array.insertAt=function(u,n,y){goog.array.splice(u,y,0,n)},goog.array.insertArrayAt=function(u,n,y){goog.partial(goog.array.splice,u,y,0).apply(null,n)},goog.array.insertBefore=function(u,n,y){var S;arguments.length==2||0>(S=goog.array.indexOf(u,y))?u.push(n):goog.array.insertAt(u,n,S)},goog.array.remove=function(u,n){var y;return(y=0<=(n=goog.array.indexOf(u,n)))&&goog.array.removeAt(u,n),y},goog.array.removeLast=function(u,n){return 0<=(n=goog.array.lastIndexOf(u,n))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAt=function(u,n){return goog.asserts.assert(u.length!=null),Array.prototype.splice.call(u,n,1).length==1},goog.array.removeIf=function(u,n,y){return 0<=(n=goog.array.findIndex(u,n,y))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAllIf=function(u,n,y){var S=0;return goog.array.forEachRight(u,function(d,m){n.call(y,d,m,u)&&goog.array.removeAt(u,m)&&S++}),S},goog.array.concat=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(u){var n=u.length;if(0<n){for(var y=Array(n),S=0;S<n;S++)y[S]=u[S];return y}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(u,n){for(var y=1;y<arguments.length;y++){var S=arguments[y];if(goog.isArrayLike(S)){var d=u.length||0,m=S.length||0;u.length=d+m;for(var s=0;s<m;s++)u[d+s]=S[s]}else u.push(S)}},goog.array.splice=function(u,n,y,S){return goog.asserts.assert(u.length!=null),Array.prototype.splice.apply(u,goog.array.slice(arguments,1))},goog.array.slice=function(u,n,y){return goog.asserts.assert(u.length!=null),2>=arguments.length?Array.prototype.slice.call(u,n):Array.prototype.slice.call(u,n,y)},goog.array.removeDuplicates=function(u,n,y){n=n||u;var S=function(H){return goog.isObject(H)?"o"+goog.getUid(H):(typeof H).charAt(0)+H};y=y||S,S={};for(var d=0,m=0;m<u.length;){var s=u[m++],E=y(s);Object.prototype.hasOwnProperty.call(S,E)||(S[E]=!0,n[d++]=s)}n.length=d},goog.array.binarySearch=function(u,n,y){return goog.array.binarySearch_(u,y||goog.array.defaultCompare,!1,n)},goog.array.binarySelect=function(u,n,y){return goog.array.binarySearch_(u,n,!0,void 0,y)},goog.array.binarySearch_=function(u,n,y,S,d){for(var m,s=0,E=u.length;s<E;){var H=s+(E-s>>>1),te=y?n.call(d,u[H],H,u):n(S,u[H]);0<te?s=H+1:(E=H,m=!te)}return m?s:-s-1},goog.array.sort=function(u,n){u.sort(n||goog.array.defaultCompare)},goog.array.stableSort=function(u,n){for(var y=Array(u.length),S=0;S<u.length;S++)y[S]={index:S,value:u[S]};var d=n||goog.array.defaultCompare;for(goog.array.sort(y,function(m,s){return d(m.value,s.value)||m.index-s.index}),S=0;S<u.length;S++)u[S]=y[S].value},goog.array.sortByKey=function(u,n,y){var S=y||goog.array.defaultCompare;goog.array.sort(u,function(d,m){return S(n(d),n(m))})},goog.array.sortObjectsByKey=function(u,n,y){goog.array.sortByKey(u,function(S){return S[n]},y)},goog.array.isSorted=function(u,n,y){n=n||goog.array.defaultCompare;for(var S=1;S<u.length;S++){var d=n(u[S-1],u[S]);if(0<d||d==0&&y)return!1}return!0},goog.array.equals=function(u,n,y){if(!goog.isArrayLike(u)||!goog.isArrayLike(n)||u.length!=n.length)return!1;var S=u.length;y=y||goog.array.defaultCompareEquality;for(var d=0;d<S;d++)if(!y(u[d],n[d]))return!1;return!0},goog.array.compare3=function(u,n,y){y=y||goog.array.defaultCompare;for(var S=Math.min(u.length,n.length),d=0;d<S;d++){var m=y(u[d],n[d]);if(m!=0)return m}return goog.array.defaultCompare(u.length,n.length)},goog.array.defaultCompare=function(u,n){return u>n?1:u<n?-1:0},goog.array.inverseDefaultCompare=function(u,n){return-goog.array.defaultCompare(u,n)},goog.array.defaultCompareEquality=function(u,n){return u===n},goog.array.binaryInsert=function(u,n,y){return 0>(y=goog.array.binarySearch(u,n,y))&&(goog.array.insertAt(u,n,-(y+1)),!0)},goog.array.binaryRemove=function(u,n,y){return 0<=(n=goog.array.binarySearch(u,n,y))&&goog.array.removeAt(u,n)},goog.array.bucket=function(u,n,y){for(var S={},d=0;d<u.length;d++){var m=u[d],s=n.call(y,m,d,u);s!==void 0&&(S[s]||(S[s]=[])).push(m)}return S},goog.array.toObject=function(u,n,y){var S={};return goog.array.forEach(u,function(d,m){S[n.call(y,d,m,u)]=d}),S},goog.array.range=function(u,n,y){var S=[],d=0,m=u;if(n!==void 0&&(d=u,m=n),0>(y=y||1)*(m-d))return[];if(0<y)for(u=d;u<m;u+=y)S.push(u);else for(u=d;u>m;u+=y)S.push(u);return S},goog.array.repeat=function(u,n){for(var y=[],S=0;S<n;S++)y[S]=u;return y},goog.array.flatten=function(u){for(var n=[],y=0;y<arguments.length;y++){var S=arguments[y];if(Array.isArray(S))for(var d=0;d<S.length;d+=8192){var m=goog.array.slice(S,d,d+8192);m=goog.array.flatten.apply(null,m);for(var s=0;s<m.length;s++)n.push(m[s])}else n.push(S)}return n},goog.array.rotate=function(u,n){return goog.asserts.assert(u.length!=null),u.length&&(0<(n%=u.length)?Array.prototype.unshift.apply(u,u.splice(-n,n)):0>n&&Array.prototype.push.apply(u,u.splice(0,-n))),u},goog.array.moveItem=function(u,n,y){goog.asserts.assert(0<=n&&n<u.length),goog.asserts.assert(0<=y&&y<u.length),n=Array.prototype.splice.call(u,n,1),Array.prototype.splice.call(u,y,0,n[0])},goog.array.zip=function(u){if(!arguments.length)return[];for(var n=[],y=arguments[0].length,S=1;S<arguments.length;S++)arguments[S].length<y&&(y=arguments[S].length);for(S=0;S<y;S++){for(var d=[],m=0;m<arguments.length;m++)d.push(arguments[m][S]);n.push(d)}return n},goog.array.shuffle=function(u,n){n=n||Math.random;for(var y=u.length-1;0<y;y--){var S=Math.floor(n()*(y+1)),d=u[y];u[y]=u[S],u[S]=d}},goog.array.copyByIndex=function(u,n){var y=[];return goog.array.forEach(n,function(S){y.push(u[S])}),y},goog.array.concatMap=function(u,n,y){return goog.array.concat.apply([],goog.array.map(u,n,y))},goog.crypt={},goog.crypt.stringToByteArray=function(u){for(var n=[],y=0,S=0;S<u.length;S++){var d=u.charCodeAt(S);255<d&&(n[y++]=255&d,d>>=8),n[y++]=d}return n},goog.crypt.byteArrayToString=function(u){if(8192>=u.length)return String.fromCharCode.apply(null,u);for(var n="",y=0;y<u.length;y+=8192){var S=goog.array.slice(u,y,y+8192);n+=String.fromCharCode.apply(null,S)}return n},goog.crypt.byteArrayToHex=function(u,n){return goog.array.map(u,function(y){return 1<(y=y.toString(16)).length?y:"0"+y}).join(n||"")},goog.crypt.hexToByteArray=function(u){goog.asserts.assert(u.length%2==0,"Key string length must be multiple of 2");for(var n=[],y=0;y<u.length;y+=2)n.push(parseInt(u.substring(y,y+2),16));return n},goog.crypt.stringToUtf8ByteArray=function(u){for(var n=[],y=0,S=0;S<u.length;S++){var d=u.charCodeAt(S);128>d?n[y++]=d:(2048>d?n[y++]=d>>6|192:((64512&d)==55296&&S+1<u.length&&(64512&u.charCodeAt(S+1))==56320?(d=65536+((1023&d)<<10)+(1023&u.charCodeAt(++S)),n[y++]=d>>18|240,n[y++]=d>>12&63|128):n[y++]=d>>12|224,n[y++]=d>>6&63|128),n[y++]=63&d|128)}return n},goog.crypt.utf8ByteArrayToString=function(u){for(var n=[],y=0,S=0;y<u.length;){var d=u[y++];if(128>d)n[S++]=String.fromCharCode(d);else if(191<d&&224>d){var m=u[y++];n[S++]=String.fromCharCode((31&d)<<6|63&m)}else if(239<d&&365>d){m=u[y++];var s=u[y++];d=((7&d)<<18|(63&m)<<12|(63&s)<<6|63&u[y++])-65536,n[S++]=String.fromCharCode(55296+(d>>10)),n[S++]=String.fromCharCode(56320+(1023&d))}else m=u[y++],s=u[y++],n[S++]=String.fromCharCode((15&d)<<12|(63&m)<<6|63&s)}return n.join("")},goog.crypt.xorByteArray=function(u,n){goog.asserts.assert(u.length==n.length,"XOR array lengths must match");for(var y=[],S=0;S<u.length;S++)y.push(u[S]^n[S]);return y},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(u){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(u);n&&(!u||!(u instanceof n.Location)&&u instanceof n.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(u))}return u},goog.dom.asserts.assertIsElementType_=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var y=goog.dom.asserts.getWindow_(u);y&&y[n]!==void 0&&(u&&(u instanceof y[n]||!(u instanceof y.Location||u instanceof y.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",n,goog.dom.asserts.debugStringForType_(u)))}return u},goog.dom.asserts.assertIsHTMLAnchorElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(u){if(!goog.isObject(u))return u===void 0?"undefined":u===null?"null":typeof u;try{return u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u)}catch(n){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(u){try{var n=u&&u.ownerDocument,y=n&&(n.defaultView||n.parentWindow);if((y=y||goog.global).Element&&y.Location)return y}catch(S){}return null},goog.functions={},goog.functions.constant=function(u){return function(){return u}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(u,n){return u},goog.functions.error=function(u){return function(){throw Error(u)}},goog.functions.fail=function(u){return function(){throw u}},goog.functions.lock=function(u,n){return n=n||0,function(){return u.apply(this,Array.prototype.slice.call(arguments,0,n))}},goog.functions.nth=function(u){return function(){return arguments[u]}},goog.functions.partialRight=function(u,n){var y=Array.prototype.slice.call(arguments,1);return function(){var S=Array.prototype.slice.call(arguments);return S.push.apply(S,y),u.apply(this,S)}},goog.functions.withReturnValue=function(u,n){return goog.functions.sequence(u,goog.functions.constant(n))},goog.functions.equalTo=function(u,n){return function(y){return n?u==y:u===y}},goog.functions.compose=function(u,n){var y=arguments,S=y.length;return function(){var d;S&&(d=y[S-1].apply(this,arguments));for(var m=S-2;0<=m;m--)d=y[m].call(this,d);return d}},goog.functions.sequence=function(u){var n=arguments,y=n.length;return function(){for(var S,d=0;d<y;d++)S=n[d].apply(this,arguments);return S}},goog.functions.and=function(u){var n=arguments,y=n.length;return function(){for(var S=0;S<y;S++)if(!n[S].apply(this,arguments))return!1;return!0}},goog.functions.or=function(u){var n=arguments,y=n.length;return function(){for(var S=0;S<y;S++)if(n[S].apply(this,arguments))return!0;return!1}},goog.functions.not=function(u){return function(){return!u.apply(this,arguments)}},goog.functions.create=function(u,n){var y=function(){};return y.prototype=u.prototype,y=new y,u.apply(y,Array.prototype.slice.call(arguments,1)),y},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(u){var n,y=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(y||(n=u(),y=!0),n):u()}},goog.functions.once=function(u){var n=u;return function(){if(n){var y=n;n=null,y()}}},goog.functions.debounce=function(u,n,y){var S=0;return function(d){goog.global.clearTimeout(S);var m=arguments;S=goog.global.setTimeout(function(){u.apply(y,m)},n)}},goog.functions.throttle=function(u,n,y){var S=0,d=!1,m=[],s=function(){S=0,d&&(d=!1,E())},E=function(){S=goog.global.setTimeout(s,n),u.apply(y,m)};return function(H){m=arguments,S?d=!0:E()}},goog.functions.rateLimit=function(u,n,y){var S=0,d=function(){S=0};return function(m){S||(S=goog.global.setTimeout(d,n),u.apply(y,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(u){this.tagName_=u},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(u){return goog.dom.tags.VOID_TAGS_[u]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(u,n){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=u===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(u){return u instanceof goog.string.Const&&u.constructor===goog.string.Const&&u.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?u.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+u+"'"),"type_error:Const")},goog.string.Const.from=function(u){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeScript.fromConstantAndArgs=function(u,n){for(var y=[],S=1;S<arguments.length;S++)y.push(goog.html.SafeScript.stringify_(arguments[S]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(u)+")("+y.join(", ")+");")},goog.html.SafeScript.fromJson=function(u){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(u))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(u){return goog.html.SafeScript.unwrapTrustedScript(u).toString()},goog.html.SafeScript.unwrapTrustedScript=function(u){return u instanceof goog.html.SafeScript&&u.constructor===goog.html.SafeScript&&u.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(u){return JSON.stringify(u).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(u):u,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(u){return goog.fs.url.getUrlObject_().createObjectURL(u)},goog.fs.url.revokeObjectUrl=function(u){goog.fs.url.getUrlObject_().revokeObjectURL(u)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(u){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(u){},goog.fs.url.getUrlObject_=function(){var u=goog.fs.url.findUrlObject_();if(u!=null)return u;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(u){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(n!==void 0){n=new n;for(var y=0;y<arguments.length;y++)n.append(arguments[y]);return n.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(u,n,y){var S=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(S!==void 0){S=new S;for(var d=0;d<u.length;d++)S.append(u[d],y);return S.getBlob(n)}if(goog.global.Blob!==void 0)return S={},n&&(S.type=n),y&&(S.endings=y),new Blob(u,S);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(u,n){return typeof u=="number"?0<u?goog.i18n.bidi.Dir.LTR:0>u?goog.i18n.bidi.Dir.RTL:n?null:goog.i18n.bidi.Dir.NEUTRAL:u==null?null:u?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0900-\u1FFF\u200E\u2C00-\uD801\uD804-\uD839\uD83C-\uDBFF\uF900-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",goog.i18n.bidi.rtlChars_="\u0591-\u06EF\u06FA-\u08FF\u200F\uD802-\uD803\uD83A-\uD83B\uFB1D-\uFDFF\uFE70-\uFEFC",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(u,n){return n?u.replace(goog.i18n.bidi.htmlSkipReg_,""):u},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(u,n){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(u,n){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(u){return goog.i18n.bidi.rtlRe_.test(u)},goog.i18n.bidi.isLtrChar=function(u){return goog.i18n.bidi.ltrRe_.test(u)},goog.i18n.bidi.isNeutralChar=function(u){return!goog.i18n.bidi.isLtrChar(u)&&!goog.i18n.bidi.isRtlChar(u)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(u,n){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(u,n){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(u,n){return u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n),goog.i18n.bidi.isRequiredLtrRe_.test(u)||!goog.i18n.bidi.hasAnyLtr(u)&&!goog.i18n.bidi.hasAnyRtl(u)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(u,n){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(u,n){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(u){return goog.i18n.bidi.rtlLocalesRe_.test(u)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(u,n){return n=(n===void 0?goog.i18n.bidi.hasAnyRtl(u):n)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,u.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+u+"</span>"},goog.i18n.bidi.enforceRtlInText=function(u){return goog.i18n.bidi.Format.RLE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+u+"</span>"},goog.i18n.bidi.enforceLtrInText=function(u){return goog.i18n.bidi.Format.LRE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(u){return u.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(u){return u.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05F4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05F3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(u,n){var y=0,S=0,d=!1;for(u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n).split(goog.i18n.bidi.wordSeparatorRe_),n=0;n<u.length;n++){var m=u[n];goog.i18n.bidi.startsWithRtl(m)?(y++,S++):goog.i18n.bidi.isRequiredLtrRe_.test(m)?d=!0:goog.i18n.bidi.hasAnyLtr(m)?S++:goog.i18n.bidi.hasNumeralsRe_.test(m)&&(d=!0)}return S==0?d?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:y/S>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(u,n){return goog.i18n.bidi.estimateDirection(u,n)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(u,n){u&&(n=goog.i18n.bidi.toDir(n))&&(u.style.textAlign=n==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,u.dir=n==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(u,n){switch(goog.i18n.bidi.estimateDirection(n)){case goog.i18n.bidi.Dir.LTR:u.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:u.dir="rtl";break;default:u.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(u,n){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=u===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(u,n){var y=goog.html.TrustedResourceUrl.unwrap(this),S=(y=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(y))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(y[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",y[2]||"",u)+goog.html.TrustedResourceUrl.stringifyParams_("#",S,n))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(u){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(u).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(u){return u instanceof goog.html.TrustedResourceUrl&&u.constructor===goog.html.TrustedResourceUrl&&u.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(u,n){var y=goog.string.Const.unwrap(u);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(y))throw Error("Invalid TrustedResourceUrl format: "+y);return u=y.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(S,d){if(!Object.prototype.hasOwnProperty.call(n,d))throw Error('Found marker, "'+d+'", in format string, "'+y+'", but no valid label mapping found in args: '+JSON.stringify(n));return(S=n[d])instanceof goog.string.Const?goog.string.Const.unwrap(S):encodeURIComponent(String(S))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(u,n,y,S){return goog.html.TrustedResourceUrl.format(u,n).cloneWithParams(y,S)},goog.html.TrustedResourceUrl.fromConstant=function(u){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.TrustedResourceUrl.fromConstants=function(u){for(var n="",y=0;y<u.length;y++)n+=goog.string.Const.unwrap(u[y]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.TrustedResourceUrl.fromSafeScript=function(u){return u=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(u)],"text/javascript"),u=goog.fs.url.createObjectUrl(u),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(u){return u=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(u):u,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.TrustedResourceUrl.stringifyParams_=function(u,n,y){if(y==null)return n;if(typeof y=="string")return y?u+encodeURIComponent(y):"";for(var S in y){var d=y[S];d=Array.isArray(d)?d:[d];for(var m=0;m<d.length;m++){var s=d[m];s!=null&&(n||(n=u),n+=(n.length>u.length?"&":"")+encodeURIComponent(S)+"="+encodeURIComponent(String(s)))}}return n},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(u,n){return u.lastIndexOf(n,0)==0},goog.string.internal.endsWith=function(u,n){var y=u.length-n.length;return 0<=y&&u.indexOf(n,y)==y},goog.string.internal.caseInsensitiveStartsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(0,n.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(u.length-n.length,n.length))==0},goog.string.internal.caseInsensitiveEquals=function(u,n){return u.toLowerCase()==n.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(u){return/^[\s\xa0]*$/.test(u)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(u){return u.trim()}:function(u){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(u)[1]},goog.string.internal.caseInsensitiveCompare=function(u,n){return(u=String(u).toLowerCase())<(n=String(n).toLowerCase())?-1:u==n?0:1},goog.string.internal.newLineToBr=function(u,n){return u.replace(/(\r\n|\r|\n)/g,n?"<br />":"<br>")},goog.string.internal.htmlEscape=function(u,n){if(n)u=u.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(u))return u;u.indexOf("&")!=-1&&(u=u.replace(goog.string.internal.AMP_RE_,"&amp;")),u.indexOf("<")!=-1&&(u=u.replace(goog.string.internal.LT_RE_,"&lt;")),u.indexOf(">")!=-1&&(u=u.replace(goog.string.internal.GT_RE_,"&gt;")),u.indexOf('"')!=-1&&(u=u.replace(goog.string.internal.QUOT_RE_,"&quot;")),u.indexOf("'")!=-1&&(u=u.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),u.indexOf("\0")!=-1&&(u=u.replace(goog.string.internal.NULL_RE_,"&#0;"))}return u},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(u,n){return goog.string.internal.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.internal.contains=function(u,n){return u.indexOf(n)!=-1},goog.string.internal.caseInsensitiveContains=function(u,n){return goog.string.internal.contains(u.toLowerCase(),n.toLowerCase())},goog.string.internal.compareVersions=function(u,n){var y=0;u=goog.string.internal.trim(String(u)).split("."),n=goog.string.internal.trim(String(n)).split(".");for(var S=Math.max(u.length,n.length),d=0;y==0&&d<S;d++){var m=u[d]||"",s=n[d]||"";do{if(m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],m[0].length==0&&s[0].length==0)break;y=m[1].length==0?0:parseInt(m[1],10);var E=s[1].length==0?0:parseInt(s[1],10);y=goog.string.internal.compareElements_(y,E)||goog.string.internal.compareElements_(m[2].length==0,s[2].length==0)||goog.string.internal.compareElements_(m[2],s[2]),m=m[3],s=s[3]}while(y==0)}return y},goog.string.internal.compareElements_=function(u,n){return u<n?-1:u>n?1:0},goog.html.SafeUrl=function(u,n){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=u===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(u){return u instanceof goog.html.SafeUrl&&u.constructor===goog.html.SafeUrl&&u.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(u){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(u)},goog.html.SafeUrl.fromBlob=function(u){return u=goog.html.SafeUrl.isSafeMimeType(u.type)?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromMediaSource=function(u){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),u=u instanceof MediaSource?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(u){var n=(u=u.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return n=n&&goog.html.SafeUrl.isSafeMimeType(n[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n?u:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"tel:")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(u){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(u))||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"fb-messenger://share")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromWhatsAppUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"whatsapp://send")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromSmsUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(u){var n=u.indexOf("#");if(0<n&&(u=u.substring(0,n)),!(n=u.match(/[?&]body=/gi)))return!0;if(1<n.length)return!1;if(!(u=u.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(u)}catch(y){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(u)},goog.html.SafeUrl.fromSshUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"ssh://")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(u,n,y){return(u=u.exec(n))?(u=u[1],(y instanceof goog.string.Const?[goog.string.Const.unwrap(y)]:y.map(function(S){return goog.string.Const.unwrap(S)})).indexOf(u)==-1&&(n=goog.html.SafeUrl.INNOCUOUS_STRING)):n=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeUrl.fromTrustedResourceUrl=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(u))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(u){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SAFE_URL_PATTERN_.test(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(u,n){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),n&&/^data:/i.test(u)&&(n=goog.html.SafeUrl.fromDataUrl(u)).getTypedStringValue()==u?n:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(u),"%s does not match the safe URL pattern",u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(u,";"),"Last character of style string is not ';': "+u),goog.asserts.assert(goog.string.internal.contains(u,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+u),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(u){return u instanceof goog.html.SafeStyle&&u.constructor===goog.html.SafeStyle&&u.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=u,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(u){var n,y="";for(n in u){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);var S=u[n];S!=null&&(y+=n+":"+(S=Array.isArray(S)?goog.array.map(S,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(S))+";")}return y?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(y):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(u){if(u instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(u).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(u=u instanceof goog.string.Const?goog.string.Const.unwrap(u):goog.html.SafeStyle.sanitizePropertyValueString_(String(u)),/[{;}]/.test(u))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[u]);return u},goog.html.SafeStyle.sanitizePropertyValueString_=function(u){var n=u.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(n)?goog.html.SafeStyle.COMMENT_RE_.test(u)?(goog.asserts.fail("String value disallows comments, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(u)?goog.html.SafeStyle.hasBalancedSquareBrackets_(u)?goog.html.SafeStyle.sanitizeUrl_(u):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(u){for(var n=!0,y=!0,S=0;S<u.length;S++){var d=u.charAt(S);d=="'"&&y?n=!n:d=='"'&&n&&(y=!y)}return n&&y},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(u){for(var n=!0,y=/^[-_a-zA-Z0-9]$/,S=0;S<u.length;S++){var d=u.charAt(S);if(d=="]"){if(n)return!1;n=!0}else if(d=="["){if(!n)return!1;n=!1}else if(!n&&!y.test(d))return!1}return n},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(u){return u.replace(goog.html.SafeStyle.URL_RE_,function(n,y,S,d){var m="";return S=S.replace(/^(['"])(.*)\1$/,function(s,E,H){return m=E,H}),n=goog.html.SafeUrl.sanitize(S).getTypedStringValue(),y+m+n+m+d})},goog.html.SafeStyle.concat=function(u){var n="",y=function(S){Array.isArray(S)?goog.array.forEach(S,y):n+=goog.html.SafeStyle.unwrap(S)};return goog.array.forEach(arguments,y),n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(u,n){if(goog.string.internal.contains(u,"<"))throw Error("Selector does not allow '<', got: "+u);var y=u.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(y))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+u);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(y))throw Error("() and [] in selector must be balanced, got: "+u);return n instanceof goog.html.SafeStyle||(n=goog.html.SafeStyle.create(n)),u=u+"{"+goog.html.SafeStyle.unwrap(n).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(u){for(var n={"(":")","[":"]"},y=[],S=0;S<u.length;S++){var d=u[S];if(n[d])y.push(n[d]);else if(goog.object.contains(n,d)&&y.pop()!=d)return!1}return y.length==0},goog.html.SafeStyleSheet.concat=function(u){var n="",y=function(S){Array.isArray(S)?goog.array.forEach(S,y):n+=goog.html.SafeStyleSheet.unwrap(S)};return goog.array.forEach(arguments,y),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeStyleSheet.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(u,"<"),"Forbidden '<' character in style sheet string: "+u),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(u){return u instanceof goog.html.SafeStyleSheet&&u.constructor===goog.html.SafeStyleSheet&&u.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=u,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var u=goog.labs.userAgent.util.getNavigator_();return u&&(u=u.userAgent)?u:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(u){goog.labs.userAgent.util.userAgent_=u||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(n,u)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(n,u)},goog.labs.userAgent.util.extractVersionTuples=function(u){for(var n,y=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,S=[];n=y.exec(u);)S.push([n[1],n[2],n[3]||void 0]);return S},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function u(d){return d=goog.array.find(d,S),y[d]||""}var n=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(n);n=goog.labs.userAgent.util.extractVersionTuples(n);var y={};goog.array.forEach(n,function(d){y[d[0]]=d[1]});var S=goog.partial(goog.object.containsKey,y);return goog.labs.userAgent.browser.isOpera()?u(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?u(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?u(["Edg"]):goog.labs.userAgent.browser.isChrome()?u(["Chrome","CriOS","HeadlessChrome"]):(n=n[2])&&n[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(u){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),u)},goog.labs.userAgent.browser.getIEVersion_=function(u){var n=/rv: *([\d\.]*)/.exec(u);if(n&&n[1])return n[1];n="";var y=/MSIE +([\d\.]+)/.exec(u);if(y&&y[1])if(u=/Trident\/(\d.\d)/.exec(u),y[1]=="7.0")if(u&&u[1])switch(u[1]){case"4.0":n="8.0";break;case"5.0":n="9.0";break;case"6.0":n="10.0";break;case"7.0":n="11.0"}else n="7.0";else n=y[1];return n},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(u){return goog.html.SafeHtml.unwrapTrustedHTML(u).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(u){return u instanceof goog.html.SafeHtml&&u.constructor===goog.html.SafeHtml&&u.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(u){if(u instanceof goog.html.SafeHtml)return u;var n=typeof u=="object",y=null;return n&&u.implementsGoogI18nBidiDirectionalString&&(y=u.getDirection()),u=n&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(u),y)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(u){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(u)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(u,n,y){return goog.html.SafeHtml.verifyTagName(String(u)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(u),n,y)},goog.html.SafeHtml.verifyTagName=function(u){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+u+">.":"");if(u.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+u+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(u,n,y,S){u&&goog.html.TrustedResourceUrl.unwrap(u);var d={};return d.src=u||null,d.srcdoc=n&&goog.html.SafeHtml.unwrap(n),u=goog.html.SafeHtml.combineAttributes(d,{sandbox:""},y),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,S)},goog.html.SafeHtml.createSandboxIframe=function(u,n,y,S){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var d={};return d.src=u?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)):null,d.srcdoc=n||null,d.sandbox="",u=goog.html.SafeHtml.combineAttributes(d,{},y),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,S)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(u,n){return goog.html.TrustedResourceUrl.unwrap(u),u=goog.html.SafeHtml.combineAttributes({src:u},{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",u)},goog.html.SafeHtml.createScript=function(u,n){for(var y in n){var S=y.toLowerCase();if(S=="language"||S=="src"||S=="text"||S=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+S+'" attribute':"")}for(y="",u=goog.array.concat(u),S=0;S<u.length;S++)y+=goog.html.SafeScript.unwrap(u[S]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(y,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",n,u)},goog.html.SafeHtml.createStyle=function(u,n){n=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},n);var y="";u=goog.array.concat(u);for(var S=0;S<u.length;S++)y+=goog.html.SafeStyleSheet.unwrap(u[S]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(y,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",n,u)},goog.html.SafeHtml.createMetaRefresh=function(u,n){return u=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(u,";")&&(u="'"+u.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(n||0)+"; url="+u})},goog.html.SafeHtml.getAttrNameAndValue_=function(u,n,y){if(y instanceof goog.string.Const)y=goog.string.Const.unwrap(y);else if(n.toLowerCase()=="style"){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");y=goog.html.SafeHtml.getStyleValue_(y)}else{if(/^on/i.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" requires goog.string.Const value, "'+y+'" given.':"");if(n.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(y instanceof goog.html.TrustedResourceUrl)y=goog.html.TrustedResourceUrl.unwrap(y);else if(y instanceof goog.html.SafeUrl)y=goog.html.SafeUrl.unwrap(y);else{if(typeof y!="string")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" on tag "'+u+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+y+'" given.':"");y=goog.html.SafeUrl.sanitize(y).getTypedStringValue()}}return y.implementsGoogStringTypedString&&(y=y.getTypedStringValue()),goog.asserts.assert(typeof y=="string"||typeof y=="number","String or number value expected, got "+typeof y+" with value: "+y),n+'="'+goog.string.internal.htmlEscape(String(y))+'"'},goog.html.SafeHtml.getStyleValue_=function(u){if(!goog.isObject(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof u+" given: "+u:"");return u instanceof goog.html.SafeStyle||(u=goog.html.SafeStyle.create(u)),goog.html.SafeStyle.unwrap(u)},goog.html.SafeHtml.createWithDir=function(u,n,y,S){return(n=goog.html.SafeHtml.create(n,y,S)).dir_=u,n},goog.html.SafeHtml.join=function(u,n){var y=(u=goog.html.SafeHtml.htmlEscape(u)).getDirection(),S=[],d=function(m){Array.isArray(m)?goog.array.forEach(m,d):(m=goog.html.SafeHtml.htmlEscape(m),S.push(goog.html.SafeHtml.unwrap(m)),m=m.getDirection(),y==goog.i18n.bidi.Dir.NEUTRAL?y=m:m!=goog.i18n.bidi.Dir.NEUTRAL&&y!=m&&(y=null))};return goog.array.forEach(n,d),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(S.join(goog.html.SafeHtml.unwrap(u)),y)},goog.html.SafeHtml.concat=function(u){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(u,n){var y=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return y.dir_=u,y},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(u,n){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(u,n)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u,n){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(u):u,this.dir_=n,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(u,n,y){var S=null,d="<"+u+goog.html.SafeHtml.stringifyAttributes(u,n);return y==null?y=[]:Array.isArray(y)||(y=[y]),goog.dom.tags.isVoidTag(u.toLowerCase())?(goog.asserts.assert(!y.length,"Void tag <"+u+"> does not allow content."),d+=">"):(S=goog.html.SafeHtml.concat(y),d+=">"+goog.html.SafeHtml.unwrap(S)+"</"+u+">",S=S.getDirection()),(u=n&&n.dir)&&(S=/^(ltr|rtl|auto)$/i.test(u)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d,S)},goog.html.SafeHtml.stringifyAttributes=function(u,n){var y="";if(n)for(var S in n){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(S))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+S+'".':"");var d=n[S];d!=null&&(y+=" "+goog.html.SafeHtml.getAttrNameAndValue_(u,S,d))}return y},goog.html.SafeHtml.combineAttributes=function(u,n,y){var S,d={};for(S in u)goog.asserts.assert(S.toLowerCase()==S,"Must be lower case"),d[S]=u[S];for(S in n)goog.asserts.assert(S.toLowerCase()==S,"Must be lower case"),d[S]=n[S];if(y)for(S in y){var m=S.toLowerCase();if(m in u)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+m+'" attribute, got "'+S+'" with value "'+y[S]+'"':"");m in n&&delete d[m],d[S]=y[S]}return d},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(u,n,y){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,y||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(u,n,y){u.insertAdjacentHTML(n,goog.html.SafeHtml.unwrapTrustedHTML(y))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document=="undefined")return!1;var u=document.createElement("div"),n=document.createElement("div");return n.appendChild(document.createElement("div")),u.appendChild(n),!(goog.DEBUG&&!u.firstChild)&&(n=u.firstChild.firstChild,u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!n.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(u,n){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;u.lastChild;)u.removeChild(u.lastChild);u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setInnerHtml=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var y=u.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[y])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+u.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(u,n)},goog.dom.safe.setOuterHtml=function(u,n){u.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setFormElementAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLFormElement(u).action=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setButtonFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLButtonElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setInputFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLInputElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setStyle=function(u,n){u.style.cssText=goog.html.SafeStyle.unwrap(n)},goog.dom.safe.documentWrite=function(u,n){u.write(goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.setAnchorHref=function(u,n){goog.dom.asserts.assertIsHTMLAnchorElement(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setImageSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLImageElement(u),!(n instanceof goog.html.SafeUrl)){var y=/^data:image\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,y)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setAudioSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLAudioElement(u),!(n instanceof goog.html.SafeUrl)){var y=/^data:audio\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,y)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setVideoSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLVideoElement(u),!(n instanceof goog.html.SafeUrl)){var y=/^data:video\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,y)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setEmbedSrc=function(u,n){goog.dom.asserts.assertIsHTMLEmbedElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setFrameSrc=function(u,n){goog.dom.asserts.assertIsHTMLFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrcdoc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setLinkHrefAndRel=function(u,n,y){goog.dom.asserts.assertIsHTMLLinkElement(u),u.rel=y,goog.string.internal.caseInsensitiveContains(y,"stylesheet")?(goog.asserts.assert(n instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),u.href=goog.html.TrustedResourceUrl.unwrap(n)):u.href=n instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(n):n instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(n):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(n))},goog.dom.safe.setObjectData=function(u,n){goog.dom.asserts.assertIsHTMLObjectElement(u),u.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setScriptSrc=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setScriptContent=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.text=goog.html.SafeScript.unwrapTrustedScript(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setLocationHref=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.assignLocation=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.assign(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.replaceLocation=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.replace(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.openInWindow=function(u,n,y,S,d){return u=u instanceof goog.html.SafeUrl?u:goog.html.SafeUrl.sanitizeAssertUnchanged(u),n=n||goog.global,y=y instanceof goog.string.Const?goog.string.Const.unwrap(y):y||"",n.open(goog.html.SafeUrl.unwrap(u),y,S,d)},goog.dom.safe.parseFromStringHtml=function(u,n){return goog.dom.safe.parseFromString(u,n,"text/html")},goog.dom.safe.parseFromString=function(u,n,y){return u.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(n),y)},goog.dom.safe.createImageFromBlob=function(u){if(!/^image\/.*/g.test(u.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var n=goog.global.URL.createObjectURL(u);return(u=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(n)},goog.dom.safe.setImageSrc(u,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),n)),u},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:"\xA0"},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(u,n){for(var y=u.split("%s"),S="",d=Array.prototype.slice.call(arguments,1);d.length&&1<y.length;)S+=y.shift()+d.shift();return S+y.join("%s")},goog.string.collapseWhitespace=function(u){return u.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(u){return u.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(u){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(u))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(u){return!/[^\t\n\r ]/.test(u)},goog.string.isAlpha=function(u){return!/[^a-zA-Z]/.test(u)},goog.string.isNumeric=function(u){return!/[^0-9]/.test(u)},goog.string.isAlphaNumeric=function(u){return!/[^a-zA-Z0-9]/.test(u)},goog.string.isSpace=function(u){return u==" "},goog.string.isUnicodeChar=function(u){return u.length==1&&" "<=u&&"~">=u||"\x80"<=u&&"\uFFFD">=u},goog.string.stripNewlines=function(u){return u.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(u){return u.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(u){return u.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(u){return u.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(u){return u.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(u){return u.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(u){return u.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(u,n,y){if(u==n)return 0;if(!u)return-1;if(!n)return 1;for(var S=u.toLowerCase().match(y),d=n.toLowerCase().match(y),m=Math.min(S.length,d.length),s=0;s<m;s++){y=S[s];var E=d[s];if(y!=E)return u=parseInt(y,10),!isNaN(u)&&(n=parseInt(E,10),!isNaN(n)&&u-n)?u-n:y<E?-1:1}return S.length!=d.length?S.length-d.length:u<n?-1:1},goog.string.intAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\D+/g)},goog.string.floatAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(u){return encodeURIComponent(String(u))},goog.string.urlDecode=function(u){return decodeURIComponent(u.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(u,n){return u=goog.string.internal.htmlEscape(u,n),goog.string.DETECT_DOUBLE_ESCAPING&&(u=u.replace(goog.string.E_RE_,"&#101;")),u},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(u){return goog.string.contains(u,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(u):goog.string.unescapePureXmlEntities_(u):u},goog.string.unescapeEntitiesWithDocument=function(u,n){return goog.string.contains(u,"&")?goog.string.unescapeEntitiesUsingDom_(u,n):u},goog.string.unescapeEntitiesUsingDom_=function(u,n){var y={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},S=n?n.createElement("div"):goog.global.document.createElement("div");return u.replace(goog.string.HTML_ENTITY_PATTERN_,function(d,m){var s=y[d];return s||(m.charAt(0)=="#"&&(m=+("0"+m.substr(1)),isNaN(m)||(s=String.fromCharCode(m))),s||(goog.dom.safe.setInnerHtml(S,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),d+" ")),s=S.firstChild.nodeValue.slice(0,-1)),y[d]=s)})},goog.string.unescapePureXmlEntities_=function(u){return u.replace(/&([^;]+);/g,function(n,y){switch(y){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return y.charAt(0)!="#"||(y=+("0"+y.substr(1)),isNaN(y))?n:String.fromCharCode(y)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(u,n){return goog.string.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.preserveSpaces=function(u){return u.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(u,n){for(var y=n.length,S=0;S<y;S++){var d=y==1?n:n.charAt(S);if(u.charAt(0)==d&&u.charAt(u.length-1)==d)return u.substring(1,u.length-1)}return u},goog.string.truncate=function(u,n,y){return y&&(u=goog.string.unescapeEntities(u)),u.length>n&&(u=u.substring(0,n-3)+"..."),y&&(u=goog.string.htmlEscape(u)),u},goog.string.truncateMiddle=function(u,n,y,S){if(y&&(u=goog.string.unescapeEntities(u)),S&&u.length>n){S>n&&(S=n);var d=u.length-S;u=u.substring(0,n-S)+"..."+u.substring(d)}else u.length>n&&(S=Math.floor(n/2),d=u.length-S,u=u.substring(0,S+n%2)+"..."+u.substring(d));return y&&(u=goog.string.htmlEscape(u)),u},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(u){u=String(u);for(var n=['"'],y=0;y<u.length;y++){var S=u.charAt(y),d=S.charCodeAt(0);n[y+1]=goog.string.specialEscapeChars_[S]||(31<d&&127>d?S:goog.string.escapeChar(S))}return n.push('"'),n.join("")},goog.string.escapeString=function(u){for(var n=[],y=0;y<u.length;y++)n[y]=goog.string.escapeChar(u.charAt(y));return n.join("")},goog.string.escapeChar=function(u){if(u in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[u];if(u in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[u]=goog.string.specialEscapeChars_[u];var n=u.charCodeAt(0);if(31<n&&127>n)var y=u;else 256>n?(y="\\x",(16>n||256<n)&&(y+="0")):(y="\\u",4096>n&&(y+="0")),y+=n.toString(16).toUpperCase();return goog.string.jsEscapeCache_[u]=y},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(u,n){return u&&n?u.split(n).length-1:0},goog.string.removeAt=function(u,n,y){var S=u;return 0<=n&&n<u.length&&0<y&&(S=u.substr(0,n)+u.substr(n+y,u.length-n-y)),S},goog.string.remove=function(u,n){return u.replace(n,"")},goog.string.removeAll=function(u,n){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,"")},goog.string.replaceAll=function(u,n,y){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,y.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(u){return String(u).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(u,n){return u.repeat(n)}:function(u,n){return Array(n+1).join(u)},goog.string.padNumber=function(u,n,y){return(y=(u=y!==void 0?u.toFixed(y):String(u)).indexOf("."))==-1&&(y=u.length),goog.string.repeat("0",Math.max(0,n-y))+u},goog.string.makeSafe=function(u){return u==null?"":String(u)},goog.string.buildString=function(u){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(u){for(var n=0,y=0;y<u.length;++y)n=31*n+u.charCodeAt(y)>>>0;return n},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(u){var n=Number(u);return n==0&&goog.string.isEmptyOrWhitespace(u)?NaN:n},goog.string.isLowerCamelCase=function(u){return/^[a-z]+([A-Z][a-z]*)*$/.test(u)},goog.string.isUpperCamelCase=function(u){return/^([A-Z][a-z]*)+$/.test(u)},goog.string.toCamelCase=function(u){return String(u).replace(/\-([a-z])/g,function(n,y){return y.toUpperCase()})},goog.string.toSelectorCase=function(u){return String(u).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(u,n){return n=typeof n=="string"?goog.string.regExpEscape(n):"\\s",u.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(y,S,d){return S+d.toUpperCase()})},goog.string.capitalize=function(u){return String(u.charAt(0)).toUpperCase()+String(u.substr(1)).toLowerCase()},goog.string.parseInt=function(u){return isFinite(u)&&(u=String(u)),typeof u=="string"?/^\s*-?0x/i.test(u)?parseInt(u,16):parseInt(u,10):NaN},goog.string.splitLimit=function(u,n,y){u=u.split(n);for(var S=[];0<y&&u.length;)S.push(u.shift()),y--;return u.length&&S.push(u.join(n)),S},goog.string.lastComponent=function(u,n){if(!n)return u;typeof n=="string"&&(n=[n]);for(var y=-1,S=0;S<n.length;S++)if(n[S]!=""){var d=u.lastIndexOf(n[S]);d>y&&(y=d)}return y==-1?u:u.slice(y+1)},goog.string.editDistance=function(u,n){var y=[],S=[];if(u==n)return 0;if(!u.length||!n.length)return Math.max(u.length,n.length);for(var d=0;d<n.length+1;d++)y[d]=d;for(d=0;d<u.length;d++){S[0]=d+1;for(var m=0;m<n.length;m++)S[m+1]=Math.min(S[m]+1,y[m+1]+1,y[m]+ +(u[d]!=n[m]));for(m=0;m<y.length;m++)y[m]=S[m]}return S[n.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent();if(u){u=goog.labs.userAgent.util.extractVersionTuples(u);var n,y=goog.labs.userAgent.engine.getEngineTuple_(u);if(y)return y[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(u,"Firefox"):y[1];if((u=u[0])&&(n=u[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(u){if(!goog.labs.userAgent.engine.isEdge())return u[1];for(var n=0;n<u.length;n++){var y=u[n];if(y[0]=="Edge")return y}},goog.labs.userAgent.engine.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),u)},goog.labs.userAgent.engine.getVersionForKey_=function(u,n){return(u=goog.array.find(u,function(y){return n==y[0]}))&&u[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent(),n="";return goog.labs.userAgent.platform.isWindows()?n=(u=(n=/Windows (?:NT|Phone) ([0-9.]+)/).exec(u))?u[1]:"0.0":goog.labs.userAgent.platform.isIos()?n=(u=(n=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(u))&&u[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?n=(u=(n=/Mac OS X ([0-9_.]+)/).exec(u))?u[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?n=(u=(n=/(?:KaiOS)\/(\S+)/i).exec(u))&&u[1]:goog.labs.userAgent.platform.isAndroid()?n=(u=(n=/Android\s+([^\);]+)(\)|;)/).exec(u))&&u[1]:goog.labs.userAgent.platform.isChromeOS()&&(n=(u=(n=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(u))&&u[1]),n||""},goog.labs.userAgent.platform.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),u)},goog.reflect={},goog.reflect.object=function(u,n){return n},goog.reflect.objectProperty=function(u,n){return u},goog.reflect.sinkValue=function(u){return goog.reflect.sinkValue[" "](u),u},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(u,n){try{return goog.reflect.sinkValue(u[n]),!0}catch(y){}return!1},goog.reflect.cache=function(u,n,y,S){return S=S?S(n):n,Object.prototype.hasOwnProperty.call(u,S)?u[S]:u[S]=y(n)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var u=goog.userAgent.getNavigatorTyped();return u&&u.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var u=goog.userAgent.getNavigatorTyped();return!!u&&goog.string.contains(u.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var u="",n=goog.userAgent.getVersionRegexResult_();return n&&(u=n?n[1]:""),goog.userAgent.IE&&(n=goog.userAgent.getDocumentMode_())!=null&&n>parseFloat(u)?String(n):u},goog.userAgent.getVersionRegexResult_=function(){var u=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(u):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(u):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(u):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(u):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(u):void 0},goog.userAgent.getDocumentMode_=function(){var u=goog.global.document;return u?u.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(u,n){return goog.string.compareVersions(u,n)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(u){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,u,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,u)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(u){return Number(goog.userAgent.DOCUMENT_MODE)>=u},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var u=goog.userAgent.getDocumentMode_();return u||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(u){return goog.string.contains(goog.crypt.base64.paddingChars_,u)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(u,n){goog.asserts.assert(goog.isArrayLike(u),"encodeByteArray takes an array as a parameter"),n===void 0&&(n=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),n=goog.crypt.base64.byteToCharMaps_[n];for(var y=[],S=0;S<u.length;S+=3){var d=u[S],m=S+1<u.length,s=m?u[S+1]:0,E=S+2<u.length,H=E?u[S+2]:0,te=d>>2;d=(3&d)<<4|s>>4,s=(15&s)<<2|H>>6,H&=63,E||(H=64,m||(s=64)),y.push(n[te],n[d],n[s]||"",n[H]||"")}return y.join("")},goog.crypt.base64.encodeString=function(u,n){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!n?goog.global.btoa(u):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(u),n)},goog.crypt.base64.decodeString=function(u,n){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!n)return goog.global.atob(u);var y="";return goog.crypt.base64.decodeStringInternal_(u,function(S){y+=String.fromCharCode(S)}),y},goog.crypt.base64.decodeStringToByteArray=function(u,n){var y=[];return goog.crypt.base64.decodeStringInternal_(u,function(S){y.push(S)}),y},goog.crypt.base64.decodeStringToUint8Array=function(u){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var n=u.length,y=3*n/4;y%3?y=Math.floor(y):goog.crypt.base64.isPadding_(u[n-1])&&(y=goog.crypt.base64.isPadding_(u[n-2])?y-2:y-1);var S=new Uint8Array(y),d=0;return goog.crypt.base64.decodeStringInternal_(u,function(m){S[d++]=m}),S.subarray(0,d)},goog.crypt.base64.decodeStringInternal_=function(u,n){function y(H){for(;S<u.length;){var te=u.charAt(S++),ce=goog.crypt.base64.charToByteMap_[te];if(ce!=null)return ce;if(!goog.string.isEmptyOrWhitespace(te))throw Error("Unknown base64 encoding at char: "+te)}return H}goog.crypt.base64.init_();for(var S=0;;){var d=y(-1),m=y(0),s=y(64),E=y(64);if(E===64&&d===-1)break;n(d<<2|m>>4),s!=64&&(n(m<<4&240|s>>2),E!=64&&n(s<<6&192|E))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var u=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),n=["+/=","+/","-_=","-_.","-_"],y=0;5>y;y++){var S=u.concat(n[y].split(""));goog.crypt.base64.byteToCharMaps_[y]=S;for(var d=0;d<S.length;d++){var m=S[d],s=goog.crypt.base64.charToByteMap_[m];s===void 0?goog.crypt.base64.charToByteMap_[m]=d:goog.asserts.assert(s===d)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(u){var n=u>>>0;u=Math.floor((u-n)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=n,jspb.utils.split64High=u},jspb.utils.splitInt64=function(u){var n=0>u,y=(u=Math.abs(u))>>>0;u=Math.floor((u-y)/jspb.BinaryConstants.TWO_TO_32),u>>>=0,n&&(u=~u>>>0,4294967295<(y=1+(~y>>>0))&&(y=0,4294967295<++u&&(u=0))),jspb.utils.split64Low=y,jspb.utils.split64High=u},jspb.utils.splitZigzag64=function(u){var n=0>u;u=2*Math.abs(u),jspb.utils.splitUint64(u),u=jspb.utils.split64Low;var y=jspb.utils.split64High;n&&(u==0?y==0?y=u=4294967295:(y--,u=4294967295):u--),jspb.utils.split64Low=u,jspb.utils.split64High=y},jspb.utils.splitFloat32=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)0<1/u?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(u))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(u>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|2139095040)>>>0;else if(u<jspb.BinaryConstants.FLOAT32_MIN)u=Math.round(u/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|u)>>>0;else{var y=Math.floor(Math.log(u)/Math.LN2);u*=Math.pow(2,-y),16777216<=(u=Math.round(u*jspb.BinaryConstants.TWO_TO_23))&&++y,jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|y+127<<23|8388607&u)>>>0}},jspb.utils.splitFloat64=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)jspb.utils.split64High=0<1/u?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(u))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(u>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(n<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(u<jspb.BinaryConstants.FLOAT64_MIN){var y=u/Math.pow(2,-1074);u=y/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(n<<31|u)>>>0,jspb.utils.split64Low=y>>>0}else{var S=0;if(2<=(y=u))for(;2<=y&&1023>S;)S++,y/=2;else for(;1>y&&-1022<S;)y*=2,S--;u=(y=u*Math.pow(2,-S))*jspb.BinaryConstants.TWO_TO_20&1048575,y=y*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(n<<31|S+1023<<20|u)>>>0,jspb.utils.split64Low=y}},jspb.utils.splitHash64=function(u){var n=u.charCodeAt(0),y=u.charCodeAt(1),S=u.charCodeAt(2),d=u.charCodeAt(3),m=u.charCodeAt(4),s=u.charCodeAt(5),E=u.charCodeAt(6);u=u.charCodeAt(7),jspb.utils.split64Low=n+(y<<8)+(S<<16)+(d<<24)>>>0,jspb.utils.split64High=m+(s<<8)+(E<<16)+(u<<24)>>>0},jspb.utils.joinUint64=function(u,n){return n*jspb.BinaryConstants.TWO_TO_32+(u>>>0)},jspb.utils.joinInt64=function(u,n){var y=2147483648&n;return y&&(n=~n>>>0,(u=1+~u>>>0)==0&&(n=n+1>>>0)),u=jspb.utils.joinUint64(u,n),y?-u:u},jspb.utils.toZigzag64=function(u,n,y){var S=n>>31;return y(u<<1^S,(n<<1|u>>>31)^S)},jspb.utils.joinZigzag64=function(u,n){return jspb.utils.fromZigzag64(u,n,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(u,n,y){var S=-(1&u);return y((u>>>1|n<<31)^S,n>>>1^S)},jspb.utils.joinFloat32=function(u,n){n=2*(u>>31)+1;var y=u>>>23&255;return u&=8388607,y==255?u?NaN:1/0*n:y==0?n*Math.pow(2,-149)*u:n*Math.pow(2,y-150)*(u+Math.pow(2,23))},jspb.utils.joinFloat64=function(u,n){var y=2*(n>>31)+1,S=n>>>20&2047;return u=jspb.BinaryConstants.TWO_TO_32*(1048575&n)+u,S==2047?u?NaN:1/0*y:S==0?y*Math.pow(2,-1074)*u:y*Math.pow(2,S-1075)*(u+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(u,n){return String.fromCharCode(u>>>0&255,u>>>8&255,u>>>16&255,u>>>24&255,n>>>0&255,n>>>8&255,n>>>16&255,n>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(u,n){function y(d,m){return d=d?String(d):"",m?"0000000".slice(d.length)+d:d}if(2097151>=n)return""+jspb.utils.joinUint64(u,n);var S=(u>>>24|n<<8)>>>0&16777215;return u=(16777215&u)+6777216*S+6710656*(n=n>>16&65535),S+=8147497*n,n*=2,1e7<=u&&(S+=Math.floor(u/1e7),u%=1e7),1e7<=S&&(n+=Math.floor(S/1e7),S%=1e7),y(n,0)+y(S,n)+y(u,1)},jspb.utils.joinSignedDecimalString=function(u,n){var y=2147483648&n;return y&&(n=~n+((u=1+~u>>>0)==0?1:0)>>>0),u=jspb.utils.joinUnsignedDecimalString(u,n),y?"-"+u:u},jspb.utils.hash64ToDecimalString=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var y=jspb.utils.split64High;return n?jspb.utils.joinSignedDecimalString(u,y):jspb.utils.joinUnsignedDecimalString(u,y)},jspb.utils.hash64ArrayToDecimalStrings=function(u,n){for(var y=Array(u.length),S=0;S<u.length;S++)y[S]=jspb.utils.hash64ToDecimalString(u[S],n);return y},jspb.utils.decimalStringToHash64=function(u){function n(m,s){for(var E=0;8>E&&(m!==1||0<s);E++)s=m*S[E]+s,S[E]=255&s,s>>>=8}jspb.asserts.assert(0<u.length);var y=!1;u[0]==="-"&&(y=!0,u=u.slice(1));for(var S=[0,0,0,0,0,0,0,0],d=0;d<u.length;d++)n(10,u.charCodeAt(d)-jspb.utils.ZERO_CHAR_CODE_);return y&&(function(){for(var m=0;8>m;m++)S[m]=255&~S[m]}(),n(1,1)),goog.crypt.byteArrayToString(S)},jspb.utils.splitDecimalString=function(u){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u))},jspb.utils.toHexDigit_=function(u){return String.fromCharCode(10>u?jspb.utils.ZERO_CHAR_CODE_+u:jspb.utils.A_CHAR_CODE_-10+u)},jspb.utils.fromHexCharCode_=function(u){return u>=jspb.utils.A_CHAR_CODE_?u-jspb.utils.A_CHAR_CODE_+10:u-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(u){var n=Array(18);n[0]="0",n[1]="x";for(var y=0;8>y;y++){var S=u.charCodeAt(7-y);n[2*y+2]=jspb.utils.toHexDigit_(S>>4),n[2*y+3]=jspb.utils.toHexDigit_(15&S)}return n.join("")},jspb.utils.hexStringToHash64=function(u){u=u.toLowerCase(),jspb.asserts.assert(u.length==18),jspb.asserts.assert(u[0]=="0"),jspb.asserts.assert(u[1]=="x");for(var n="",y=0;8>y;y++){var S=jspb.utils.fromHexCharCode_(u.charCodeAt(2*y+2)),d=jspb.utils.fromHexCharCode_(u.charCodeAt(2*y+3));n=String.fromCharCode(16*S+d)+n}return n},jspb.utils.hash64ToNumber=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var y=jspb.utils.split64High;return n?jspb.utils.joinInt64(u,y):jspb.utils.joinUint64(u,y)},jspb.utils.numberToHash64=function(u){return jspb.utils.splitInt64(u),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(u,n,y){for(var S=0,d=n;d<y;d++)S+=u[d]>>7;return y-n-S},jspb.utils.countVarintFields=function(u,n,y,S){var d=0;if(128>(S=8*S+jspb.BinaryConstants.WireType.VARINT))for(;n<y&&u[n++]==S;)for(d++;;){var m=u[n++];if(!(128&m))break}else for(;n<y;){for(m=S;128<m;){if(u[n]!=(127&m|128))return d;n++,m>>=7}if(u[n++]!=m)break;for(d++;128&(m=u[n++]););}return d},jspb.utils.countFixedFields_=function(u,n,y,S,d){var m=0;if(128>S)for(;n<y&&u[n++]==S;)m++,n+=d;else for(;n<y;){for(var s=S;128<s;){if(u[n++]!=(127&s|128))return m;s>>=7}if(u[n++]!=s)break;m++,n+=d}return m},jspb.utils.countFixed32Fields=function(u,n,y,S){return jspb.utils.countFixedFields_(u,n,y,8*S+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(u,n,y,S){return jspb.utils.countFixedFields_(u,n,y,8*S+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(u,n,y,S){var d=0;for(S=8*S+jspb.BinaryConstants.WireType.DELIMITED;n<y;){for(var m=S;128<m;){if(u[n++]!=(127&m|128))return d;m>>=7}if(u[n++]!=m)break;d++;for(var s=0,E=1;s+=(127&(m=u[n++]))*E,E*=128,(128&m)!=0;);n+=s}return d},jspb.utils.debugBytesToTextFormat=function(u){var n='"';if(u){u=jspb.utils.byteSourceToUint8Array(u);for(var y=0;y<u.length;y++)n+="\\x",16>u[y]&&(n+="0"),n+=u[y].toString(16)}return n+'"'},jspb.utils.debugScalarToTextFormat=function(u){return typeof u=="string"?goog.string.quote(u):u.toString()},jspb.utils.stringToByteArray=function(u){for(var n=new Uint8Array(u.length),y=0;y<u.length;y++){var S=u.charCodeAt(y);if(255<S)throw Error("Conversion error: string contains codepoint outside of byte range");n[y]=S}return n},jspb.utils.byteSourceToUint8Array=function(u){return u.constructor===Uint8Array?u:u.constructor===ArrayBuffer||u.constructor===Array?new Uint8Array(u):u.constructor===String?goog.crypt.base64.decodeStringToUint8Array(u):u instanceof Uint8Array?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(u,n,y){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,u&&this.setBlock(u,n,y)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(u,n,y){if(jspb.BinaryDecoder.instanceCache_.length){var S=jspb.BinaryDecoder.instanceCache_.pop();return u&&S.setBlock(u,n,y),S}return new jspb.BinaryDecoder(u,n,y)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(u,n,y){this.bytes_=jspb.utils.byteSourceToUint8Array(u),this.start_=n!==void 0?n:0,this.end_=y!==void 0?this.start_+y:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(u){this.end_=u},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(u){this.cursor_=u},jspb.BinaryDecoder.prototype.advance=function(u){this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(u){for(var n=128,y=0,S=0,d=0;4>d&&128<=n;d++)y|=(127&(n=this.bytes_[this.cursor_++]))<<7*d;if(128<=n&&(y|=(127&(n=this.bytes_[this.cursor_++]))<<28,S|=(127&n)>>4),128<=n)for(d=0;5>d&&128<=n;d++)S|=(127&(n=this.bytes_[this.cursor_++]))<<7*d+3;if(128>n)return u(y>>>0,S>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(u){return this.readSplitVarint64(function(n,y){return jspb.utils.fromZigzag64(n,y,u)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(u){var n=this.bytes_,y=this.cursor_;this.cursor_+=8;for(var S=0,d=0,m=y+7;m>=y;m--)S=S<<8|n[m],d=d<<8|n[m+4];return u(S,d)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(u){for(;128<u;)this.cursor_--,u>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var u=this.bytes_,n=u[this.cursor_+0],y=127&n;return 128>n?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),y):(y|=(127&(n=u[this.cursor_+1]))<<7,128>n?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),y):(y|=(127&(n=u[this.cursor_+2]))<<14,128>n?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),y):(y|=(127&(n=u[this.cursor_+3]))<<21,128>n?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),y):(y|=(15&(n=u[this.cursor_+4]))<<28,128>n?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),y>>>0):(this.cursor_+=5,128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),y)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var u=this.readUnsignedVarint32();return u>>>1^-(1&u)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u},jspb.BinaryDecoder.prototype.readUint16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],y=this.bytes_[this.cursor_+2],S=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8|y<<16|S<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUint64(u,n)},jspb.BinaryDecoder.prototype.readUint64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUnsignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readInt8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],y=this.bytes_[this.cursor_+2],S=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8|y<<16|S<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinInt64(u,n)},jspb.BinaryDecoder.prototype.readInt64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinSignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readFloat=function(){var u=this.readUint32();return jspb.utils.joinFloat32(u,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinFloat64(u,n)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(u){var n=this.bytes_,y=this.cursor_;u=y+u;for(var S=[],d="";y<u;){var m=n[y++];if(128>m)S.push(m);else{if(192>m)continue;if(224>m){var s=n[y++];S.push((31&m)<<6|63&s)}else if(240>m){s=n[y++];var E=n[y++];S.push((15&m)<<12|(63&s)<<6|63&E)}else 248>m&&(m=(7&m)<<18|(63&(s=n[y++]))<<12|(63&(E=n[y++]))<<6|63&n[y++],m-=65536,S.push(55296+(m>>10&1023),56320+(1023&m)))}8192<=S.length&&(d+=String.fromCharCode.apply(null,S),S.length=0)}return d+=goog.crypt.byteArrayToString(S),this.cursor_=y,d},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var u=this.readUnsignedVarint32();return this.readString(u)},jspb.BinaryDecoder.prototype.readBytes=function(u){if(0>u||this.cursor_+u>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var n=this.bytes_.subarray(this.cursor_,this.cursor_+u);return this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_),n},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var u=this.bytes_,n=this.cursor_,y=u[n+0],S=u[n+1],d=u[n+2],m=u[n+3],s=u[n+4],E=u[n+5],H=u[n+6];return u=u[n+7],this.cursor_+=8,String.fromCharCode(y,S,d,m,s,E,H,u)},jspb.BinaryReader=function(u,n,y){this.decoder_=jspb.BinaryDecoder.alloc(u,n,y),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(u,n,y){if(jspb.BinaryReader.instanceCache_.length){var S=jspb.BinaryReader.instanceCache_.pop();return u&&S.decoder_.setBlock(u,n,y),S}return new jspb.BinaryReader(u,n,y)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(u,n,y){this.decoder_.setBlock(u,n,y),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(u){this.decoder_.advance(u)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var u=this.decoder_.readUnsignedVarint32(),n=u>>>3;return(u&=7)!=jspb.BinaryConstants.WireType.VARINT&&u!=jspb.BinaryConstants.WireType.FIXED32&&u!=jspb.BinaryConstants.WireType.FIXED64&&u!=jspb.BinaryConstants.WireType.DELIMITED&&u!=jspb.BinaryConstants.WireType.START_GROUP&&u!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",u,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=n,this.nextWireType_=u,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var u=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==u;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var u=this.decoder_.readUnsignedVarint32();this.decoder_.advance(u)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var u=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=u&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(u,n){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[u]),this.readCallbacks_[u]=n},jspb.BinaryReader.prototype.runReadCallback=function(u){return jspb.asserts.assert(this.readCallbacks_!==null),u=this.readCallbacks_[u],jspb.asserts.assert(u),u(this)},jspb.BinaryReader.prototype.readAny=function(u){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(u);var n=jspb.BinaryConstants.FieldType;switch(u){case n.DOUBLE:return this.readDouble();case n.FLOAT:return this.readFloat();case n.INT64:return this.readInt64();case n.UINT64:return this.readUint64();case n.INT32:return this.readInt32();case n.FIXED64:return this.readFixed64();case n.FIXED32:return this.readFixed32();case n.BOOL:return this.readBool();case n.STRING:return this.readString();case n.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case n.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case n.BYTES:return this.readBytes();case n.UINT32:return this.readUint32();case n.ENUM:return this.readEnum();case n.SFIXED32:return this.readSfixed32();case n.SFIXED64:return this.readSfixed64();case n.SINT32:return this.readSint32();case n.SINT64:return this.readSint64();case n.FHASH64:return this.readFixedHash64();case n.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(u,n){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var y=this.decoder_.getEnd(),S=this.decoder_.readUnsignedVarint32();S=this.decoder_.getCursor()+S,this.decoder_.setEnd(S),n(u,this),this.decoder_.setCursor(S),this.decoder_.setEnd(y)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(u,n,y){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==u),y(n,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32(),n=this.decoder_.getCursor(),y=n+u;return u=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),n,u),this.decoder_.setCursor(y),u},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(u)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(n,y){return jspb.utils.fromZigzag64(n,y,u)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(u)},jspb.BinaryReader.prototype.readPackedField_=function(u){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n;for(var y=[];this.decoder_.getCursor()<n;)y.push(u.call(this.decoder_));return y},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var u=this.buffer_;return this.buffer_=[],u},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(u,n){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32);0<n||127<u;)this.buffer_.push(127&u|128),u=(u>>>7|n<<25)>>>0,n>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(u,n){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(u),this.writeUint32(n)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(u){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32);127<u;)this.buffer_.push(127&u|128),u>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(u){if(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),0<=u)this.writeUnsignedVarint32(u);else{for(var n=0;9>n;n++)this.buffer_.push(127&u|128),u>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((u<<1^u>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(u){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(u))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(u){var n=this;jspb.utils.splitHash64(u),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(y,S){n.writeSplitVarint64(y>>>0,S>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&256>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&65536>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-128<=u&&128>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-32768<=u&&32768>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(+u>=-jspb.BinaryConstants.TWO_TO_63&&+u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT32_MAX&&u<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(u),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT64_MAX&&u<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(u){jspb.asserts.assert(typeof u=="boolean"||typeof u=="number"),this.buffer_.push(u?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(u)},jspb.BinaryEncoder.prototype.writeBytes=function(u){this.buffer_.push.apply(this.buffer_,u)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(u){jspb.utils.splitHash64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(u){jspb.utils.splitHash64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(u){var n=this.buffer_.length;jspb.asserts.assertString(u);for(var y=0;y<u.length;y++){var S=u.charCodeAt(y);if(128>S)this.buffer_.push(S);else if(2048>S)this.buffer_.push(S>>6|192),this.buffer_.push(63&S|128);else if(65536>S)if(55296<=S&&56319>=S&&y+1<u.length){var d=u.charCodeAt(y+1);56320<=d&&57343>=d&&(S=1024*(S-55296)+d-56320+65536,this.buffer_.push(S>>18|240),this.buffer_.push(S>>12&63|128),this.buffer_.push(S>>6&63|128),this.buffer_.push(63&S|128),y++)}else this.buffer_.push(S>>12|224),this.buffer_.push(S>>6&63|128),this.buffer_.push(63&S|128)}return this.buffer_.length-n},jspb.arith={},jspb.arith.UInt64=function(u,n){this.lo=u,this.hi=n},jspb.arith.UInt64.prototype.cmp=function(u){return this.hi<u.hi||this.hi==u.hi&&this.lo<u.lo?-1:this.hi==u.hi&&this.lo==u.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(u){return new jspb.arith.UInt64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(u){return new jspb.arith.UInt64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(u,n){var y=65535&u,S=65535&n,d=n>>>16;for(n=y*S+65536*(y*d&65535)+65536*((u>>>=16)*S&65535),y=u*d+(y*d>>>16)+(u*S>>>16);4294967296<=n;)n-=4294967296,y+=1;return new jspb.arith.UInt64(n>>>0,y>>>0)},jspb.arith.UInt64.prototype.mul=function(u){var n=jspb.arith.UInt64.mul32x32(this.lo,u);return(u=jspb.arith.UInt64.mul32x32(this.hi,u)).hi=u.lo,u.lo=0,n.add(u)},jspb.arith.UInt64.prototype.div=function(u){if(u==0)return[];var n=new jspb.arith.UInt64(0,0),y=new jspb.arith.UInt64(this.lo,this.hi);u=new jspb.arith.UInt64(u,0);for(var S=new jspb.arith.UInt64(1,0);!u.msb();)u=u.leftShift(),S=S.leftShift();for(;!S.zero();)0>=u.cmp(y)&&(n=n.add(S),y=y.sub(u)),u=u.rightShift(),S=S.rightShift();return[n,y]},jspb.arith.UInt64.prototype.toString=function(){for(var u="",n=this;!n.zero();){var y=(n=n.div(10))[0];u=n[1].lo+u,n=y}return u==""&&(u="0"),u},jspb.arith.UInt64.fromString=function(u){for(var n=new jspb.arith.UInt64(0,0),y=new jspb.arith.UInt64(0,0),S=0;S<u.length;S++){if("0">u[S]||"9"<u[S])return null;var d=parseInt(u[S],10);y.lo=d,n=n.mul(10).add(y)}return n},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(u,n){this.lo=u,this.hi=n},jspb.arith.Int64.prototype.add=function(u){return new jspb.arith.Int64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(u){return new jspb.arith.Int64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var u=(2147483648&this.hi)!=0,n=new jspb.arith.UInt64(this.lo,this.hi);return u&&(n=new jspb.arith.UInt64(0,0).sub(n)),(u?"-":"")+n.toString()},jspb.arith.Int64.fromString=function(u){var n=0<u.length&&u[0]=="-";return n&&(u=u.substring(1)),(u=jspb.arith.UInt64.fromString(u))===null?null:(n&&(u=new jspb.arith.UInt64(0,0).sub(u)),new jspb.arith.Int64(u.lo,u.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(u){var n=this.encoder_.end();this.blocks_.push(n),this.blocks_.push(u),this.totalLength_+=n.length+u.length},jspb.BinaryWriter.prototype.beginDelimited_=function(u){return this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),u=this.encoder_.end(),this.blocks_.push(u),this.totalLength_+=u.length,u.push(this.totalLength_),u},jspb.BinaryWriter.prototype.endDelimited_=function(u){var n=u.pop();for(n=this.totalLength_+this.encoder_.length()-n,jspb.asserts.assert(0<=n);127<n;)u.push(127&n|128),n>>>=7,this.totalLength_++;u.push(n),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(u,n,y){this.appendUint8Array_(u.subarray(n,y))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(u,n,y){u!=null&&n!=null&&y!=null&&this.writeSerializedMessage(u,n,y)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var u=new Uint8Array(this.totalLength_+this.encoder_.length()),n=this.blocks_,y=n.length,S=0,d=0;d<y;d++){var m=n[d];u.set(m,S),S+=m.length}return n=this.encoder_.end(),u.set(n,S),S+=n.length,jspb.asserts.assert(S==u.length),this.blocks_=[u],u},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(u){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),u)},jspb.BinaryWriter.prototype.beginSubMessage=function(u){this.bookmarks_.push(this.beginDelimited_(u))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(u,n){jspb.asserts.assert(1<=u&&u==Math.floor(u)),this.encoder_.writeUnsignedVarint32(8*u+n)},jspb.BinaryWriter.prototype.writeAny=function(u,n,y){var S=jspb.BinaryConstants.FieldType;switch(u){case S.DOUBLE:this.writeDouble(n,y);break;case S.FLOAT:this.writeFloat(n,y);break;case S.INT64:this.writeInt64(n,y);break;case S.UINT64:this.writeUint64(n,y);break;case S.INT32:this.writeInt32(n,y);break;case S.FIXED64:this.writeFixed64(n,y);break;case S.FIXED32:this.writeFixed32(n,y);break;case S.BOOL:this.writeBool(n,y);break;case S.STRING:this.writeString(n,y);break;case S.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case S.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case S.BYTES:this.writeBytes(n,y);break;case S.UINT32:this.writeUint32(n,y);break;case S.ENUM:this.writeEnum(n,y);break;case S.SFIXED32:this.writeSfixed32(n,y);break;case S.SFIXED64:this.writeSfixed64(n,y);break;case S.SINT32:this.writeSint32(n,y);break;case S.SINT64:this.writeSint64(n,y);break;case S.FHASH64:this.writeFixedHash64(n,y);break;case S.VHASH64:this.writeVarintHash64(n,y);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(n))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(n))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(n))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(n))},jspb.BinaryWriter.prototype.writeInt32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeInt64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeUint32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeUint64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSint32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(u,n){n!=null&&this.writeZigzagVarintHash64_(u,n)},jspb.BinaryWriter.prototype.writeSint64String=function(u,n){n!=null&&this.writeZigzagVarint64String_(u,n)},jspb.BinaryWriter.prototype.writeFixed32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeFloat=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(u,n){n!=null&&(jspb.asserts.assert(typeof n=="boolean"||typeof n=="number"),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(u,n){n!=null&&(u=this.beginDelimited_(u),this.encoder_.writeString(n),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(u,n){n!=null&&(n=jspb.utils.byteSourceToUint8Array(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),this.appendUint8Array_(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(u,n,y){n!=null&&(u=this.beginDelimited_(u),y(n,this),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(u,n,y){n!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(u),u=this.beginDelimited_(3),y(n,this),this.endDelimited_(u),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(u,n,y){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),y(n,this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(n))},jspb.BinaryWriter.prototype.writeVarintHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(n))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(u,n,y){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n,y)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(u,n,y){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n,y)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(u,n,y){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT);var S=this.encoder_;jspb.utils.toZigzag64(n,y,function(d,m){S.writeSplitVarint64(d>>>0,m>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeSignedVarint32_(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeInt32String(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeSignedVarint64_(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(u,n,y,S){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitFixed64(u,y(n[d]),S(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(u,n,y,S){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitVarint64(u,y(n[d]),S(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(u,n,y,S){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitZigzagVarint64(u,y(n[d]),S(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeInt64String(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeUnsignedVarint32_(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeUint32String(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeUnsignedVarint64_(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeUint64String(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeZigzagVarint32_(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeZigzagVarint64_(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeZigzagVarint64String_(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeZigzagVarintHash64_(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeFixed32(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeFixed64(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeFixed64String(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeSfixed32(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeSfixed64(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeSfixed64String(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeFloat(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeDouble(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeBool(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeEnum(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeString(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeBytes(u,n[y])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(u,n,y){if(n!=null)for(var S=0;S<n.length;S++){var d=this.beginDelimited_(u);y(n[S],this),this.endDelimited_(d)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(u,n,y){if(n!=null)for(var S=0;S<n.length;S++)this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),y(n[S],this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeFixedHash64(u,n[y])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(u,n){if(n!=null)for(var y=0;y<n.length;y++)this.writeVarintHash64(u,n[y])},jspb.BinaryWriter.prototype.writePackedInt32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeSignedVarint32(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeSignedVarint32(parseInt(n[y],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeSignedVarint64(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(u,n,y,S){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitFixed64(y(n[d]),S(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(u,n,y,S){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitVarint64(y(n[d]),S(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(u,n,y,S){if(n!=null){u=this.beginDelimited_(u);for(var d=this.encoder_,m=0;m<n.length;m++)jspb.utils.toZigzag64(y(n[m]),S(n[m]),function(s,E){d.writeSplitVarint64(s>>>0,E>>>0)});this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++){var S=jspb.arith.Int64.fromString(n[y]);this.encoder_.writeSplitVarint64(S.lo,S.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeUnsignedVarint32(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeUnsignedVarint32(parseInt(n[y],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeUnsignedVarint64(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++){var S=jspb.arith.UInt64.fromString(n[y]);this.encoder_.writeSplitVarint64(S.lo,S.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeZigzagVarint32(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeZigzagVarint64(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(n[y]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeZigzagVarintHash64(n[y]);this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeUint32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeUint64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++){var y=jspb.arith.UInt64.fromString(n[u]);this.encoder_.writeSplitFixed64(y.lo,y.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeInt32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64String(n[u])},jspb.BinaryWriter.prototype.writePackedFloat=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeFloat(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeDouble(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),u=0;u<n.length;u++)this.encoder_.writeBool(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeEnum(n[y]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeFixedHash64(n[u])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var y=0;y<n.length;y++)this.encoder_.writeVarintHash64(n[y]);this.endDelimited_(u)}},jspb.Map=function(u,n){this.arr_=u,this.valueCtor_=n,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var u=0;u<this.arr_.length;u++){var n=this.arr_[u],y=n[0];this.map_[y.toString()]=new jspb.Map.Entry_(y,n[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var u,n=this.map_;for(u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var y=n[u].valueWrapper;y&&y.toArray()}}}else{for(this.arr_.length=0,(n=this.stringKeys_()).sort(),u=0;u<n.length;u++){var S=this.map_[n[u]];(y=S.valueWrapper)&&y.toArray(),this.arr_.push([S.key,S.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(u,n){for(var y=this.toArray(),S=[],d=0;d<y.length;d++){var m=this.map_[y[d][0].toString()];this.wrapEntry_(m);var s=m.valueWrapper;s?(jspb.asserts.assert(n),S.push([m.key,n(u,s)])):S.push([m.key,m.value])}return S},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(u,n,y){n=new jspb.Map([],n);for(var S=0;S<u.length;S++){var d=u[S][0],m=y(u[S][1]);n.set(d,m)}return n},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(u){this.idx_=0,this.arr_=u},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol!="undefined"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(u){u=u.toString();var n=this.map_.hasOwnProperty(u);return delete this.map_[u],this.arrClean=!1,n},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var u=[],n=this.stringKeys_();n.sort();for(var y=0;y<n.length;y++){var S=this.map_[n[y]];u.push([S.key,S.value])}return u},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var u=[],n=this.stringKeys_();n.sort();for(var y=0;y<n.length;y++){var S=this.map_[n[y]];u.push([S.key,this.wrapEntry_(S)])}return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var u=[],n=this.stringKeys_();n.sort();for(var y=0;y<n.length;y++)u.push(this.map_[n[y]].key);return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var u=[],n=this.stringKeys_();n.sort();for(var y=0;y<n.length;y++)u.push(this.wrapEntry_(this.map_[n[y]]));return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(u,n){var y=this.stringKeys_();y.sort();for(var S=0;S<y.length;S++){var d=this.map_[y[S]];u.call(n,this.wrapEntry_(d),d.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(u,n){var y=new jspb.Map.Entry_(u);return this.valueCtor_?(y.valueWrapper=n,y.value=n.toArray()):y.value=n,this.map_[u.toString()]=y,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(u){return this.valueCtor_?(u.valueWrapper||(u.valueWrapper=new this.valueCtor_(u.value)),u.valueWrapper):u.value},jspb.Map.prototype.get=function(u){if(u=this.map_[u.toString()])return this.wrapEntry_(u)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(u){return u.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(u,n,y,S,d){var m=this.stringKeys_();m.sort();for(var s=0;s<m.length;s++){var E=this.map_[m[s]];n.beginSubMessage(u),y.call(n,1,E.key),this.valueCtor_?S.call(n,2,this.wrapEntry_(E),d):S.call(n,2,E.value),n.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(u,n,y,S,d,m,s){for(;n.nextField()&&!n.isEndGroup();){var E=n.getFieldNumber();E==1?m=y.call(n):E==2&&(u.valueCtor_?(jspb.asserts.assert(d),s||(s=new u.valueCtor_),S.call(n,s,d)):s=S.call(n))}jspb.asserts.assert(m!=null),jspb.asserts.assert(s!=null),u.set(m,s)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var u,n=this.map_,y=[];for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&y.push(u);return y},jspb.Map.Entry_=function(u,n){this.key=u,this.value=n,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(u,n,y,S,d){this.fieldIndex=u,this.fieldName=n,this.ctor=y,this.toObjectFn=S,this.isRepeated=d},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(u,n,y,S,d,m){this.fieldInfo=u,this.binaryReaderFn=n,this.binaryWriterFn=y,this.binaryMessageSerializeFn=S,this.binaryMessageDeserializeFn=d,this.isPacked=m},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(u,n){return n+u.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(u,n){return n-u.arrayIndexOffset_},jspb.Message.initialize=function(u,n,y,S,d,m){if(u.wrappers_=null,n||(n=y?[y]:[]),u.messageId_=y?String(y):void 0,u.arrayIndexOffset_=y===0?-1:0,u.array=n,jspb.Message.initPivotAndExtensionObject_(u,S),u.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(u.repeatedFields=d),d)for(n=0;n<d.length;n++)(y=d[n])<u.pivot_?(y=jspb.Message.getIndex_(u,y),u.array[y]=u.array[y]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[y]=u.extensionObject_[y]||jspb.Message.EMPTY_LIST_SENTINEL_);if(m&&m.length)for(n=0;n<m.length;n++)jspb.Message.computeOneofCase(u,m[n])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(u){return jspb.Message.ASSUME_LOCAL_ARRAYS?u instanceof Array:Array.isArray(u)},jspb.Message.isExtensionObject_=function(u){return!(u===null||typeof u!="object"||jspb.Message.isArray_(u)||jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(u,n){var y=u.array.length,S=-1;if(y&&(S=y-1,y=u.array[S],jspb.Message.isExtensionObject_(y)))return u.pivot_=jspb.Message.getFieldNumber_(u,S),void(u.extensionObject_=y);-1<n?(u.pivot_=Math.max(n,jspb.Message.getFieldNumber_(u,S+1)),u.extensionObject_=null):u.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(u){var n=jspb.Message.getIndex_(u,u.pivot_);u.array[n]||(u.extensionObject_=u.array[n]={})},jspb.Message.toObjectList=function(u,n,y){for(var S=[],d=0;d<u.length;d++)S[d]=n.call(u[d],y,u[d]);return S},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(u,n,y,S,d){for(var m in y){var s=y[m],E=S.call(u,s);if(E!=null){for(var H in s.fieldName)if(s.fieldName.hasOwnProperty(H))break;n[H]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(E,s.toObjectFn,d):s.toObjectFn(d,E):E}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(u,n,y,S){for(var d in y){var m=y[d],s=m.fieldInfo;if(!m.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var E=S.call(u,s);if(E!=null)if(s.isMessageType()){if(!m.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");m.binaryWriterFn.call(n,s.fieldIndex,E,m.binaryMessageSerializeFn)}else m.binaryWriterFn.call(n,s.fieldIndex,E)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(u,n,y,S,d){var m=y[n.getFieldNumber()];if(m){if(y=m.fieldInfo,!m.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(y.isMessageType()){var s=new y.ctor;m.binaryReaderFn.call(n,s,m.binaryMessageDeserializeFn)}else s=m.binaryReaderFn.call(n);y.isRepeated&&!m.isPacked?(n=S.call(u,y))?n.push(s):d.call(u,y,[s]):d.call(u,y,s)}else n.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(u,n){if(n<u.pivot_){n=jspb.Message.getIndex_(u,n);var y=u.array[n];return y===jspb.Message.EMPTY_LIST_SENTINEL_?u.array[n]=[]:y}if(u.extensionObject_)return(y=u.extensionObject_[n])===jspb.Message.EMPTY_LIST_SENTINEL_?u.extensionObject_[n]=[]:y},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(u,n){return jspb.Message.getField(u,n)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:+u},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:!!u},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(u,n){var y=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var S=0;S<y.length;S++)y[S]=+y[S];u.convertedPrimitiveFields_[n]=!0}return y},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(u,n){var y=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var S=0;S<y.length;S++)y[S]=!!y[S];u.convertedPrimitiveFields_[n]=!0}return y},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(u){return u==null||typeof u=="string"?u:jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array?goog.crypt.base64.encodeByteArray(u):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(u){return u==null||u instanceof Uint8Array?u:typeof u=="string"?goog.crypt.base64.decodeStringToUint8Array(u):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(u){return jspb.Message.assertConsistentTypes_(u),u.length&&typeof u[0]!="string"?goog.array.map(u,jspb.Message.bytesAsB64):u},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(u){return jspb.Message.assertConsistentTypes_(u),!u.length||u[0]instanceof Uint8Array?u:goog.array.map(u,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(u){if(goog.DEBUG&&u&&1<u.length){var n=goog.typeOf(u[0]);goog.array.forEach(u,function(y){goog.typeOf(y)!=n&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(y)+" expected "+n)})}},jspb.Message.getFieldWithDefault=function(u,n,y){return(u=jspb.Message.getField(u,n))==null?y:u},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(u,n,y){return(u=jspb.Message.getBooleanField(u,n))==null?y:u},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(u,n,y){return(u=jspb.Message.getOptionalFloatingPointField(u,n))==null?y:u},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(u,n,y,S){if(u.wrappers_||(u.wrappers_={}),n in u.wrappers_)return u.wrappers_[n];var d=jspb.Message.getField(u,n);if(!d){if(y)return;d=[],jspb.Message.setField(u,n,d)}return u.wrappers_[n]=new jspb.Map(d,S)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(u,n,y){return jspb.asserts.assertInstanceof(u,jspb.Message),n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=y:(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[n]=y),u},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(u,n,y){return jspb.Message.setFieldIgnoringDefault_(u,n,y,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(u,n,y,S){return jspb.asserts.assertInstanceof(u,jspb.Message),y!==S?jspb.Message.setField(u,n,y):n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(u),delete u.extensionObject_[n]),u},jspb.Message.addToRepeatedField=function(u,n,y,S){return jspb.asserts.assertInstanceof(u,jspb.Message),n=jspb.Message.getRepeatedField(u,n),S!=null?n.splice(S,0,y):n.push(y),u},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(u,n,y,S){return jspb.asserts.assertInstanceof(u,jspb.Message),(y=jspb.Message.computeOneofCase(u,y))&&y!==n&&S!==void 0&&(u.wrappers_&&y in u.wrappers_&&(u.wrappers_[y]=void 0),jspb.Message.setField(u,y,void 0)),jspb.Message.setField(u,n,S)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(u,n){for(var y,S,d=0;d<n.length;d++){var m=n[d],s=jspb.Message.getField(u,m);s!=null&&(y=m,S=s,jspb.Message.setField(u,m,void 0))}return y?(jspb.Message.setField(u,y,S),y):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(u,n,y,S){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[y]){var d=jspb.Message.getField(u,y);(S||d)&&(u.wrappers_[y]=new n(d))}return u.wrappers_[y]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(u,n,y){return jspb.Message.wrapRepeatedField_(u,n,y),(n=u.wrappers_[y])==jspb.Message.EMPTY_LIST_SENTINEL_&&(n=u.wrappers_[y]=[]),n},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(u,n,y){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[y]){for(var S=jspb.Message.getRepeatedField(u,y),d=[],m=0;m<S.length;m++)d[m]=new n(S[m]);u.wrappers_[y]=d}},jspb.Message.setWrapperField=function(u,n,y){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var S=y&&y.toArray();return u.wrappers_[n]=y,jspb.Message.setField(u,n,S)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(u,n,y,S){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var d=S&&S.toArray();return u.wrappers_[n]=S,jspb.Message.setOneofField(u,n,y,d)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(u,n,y){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={}),y=y||[];for(var S=[],d=0;d<y.length;d++)S[d]=y[d].toArray();return u.wrappers_[n]=y,jspb.Message.setField(u,n,S)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(u,n,y,S,d){jspb.Message.wrapRepeatedField_(u,S,n);var m=u.wrappers_[n];return m||(m=u.wrappers_[n]=[]),y=y||new S,u=jspb.Message.getRepeatedField(u,n),d!=null?(m.splice(d,0,y),u.splice(d,0,y.toArray())):(m.push(y),u.push(y.toArray())),y},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(u,n,y,S){for(var d={},m=0;m<u.length;m++)d[n.call(u[m])]=y?y.call(u[m],S,u[m]):u[m];return d},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var u in this.wrappers_){var n=this.wrappers_[u];if(Array.isArray(n))for(var y=0;y<n.length;y++)n[y]&&n[y].toArray();else n&&n.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(u){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var n=u.fieldIndex;if(u.isRepeated){if(u.isMessageType())return this.wrappers_[n]||(this.wrappers_[n]=goog.array.map(this.extensionObject_[n]||[],function(y){return new u.ctor(y)})),this.wrappers_[n]}else if(u.isMessageType())return!this.wrappers_[n]&&this.extensionObject_[n]&&(this.wrappers_[n]=new u.ctor(this.extensionObject_[n])),this.wrappers_[n];return this.extensionObject_[n]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(u,n){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var y=u.fieldIndex;return u.isRepeated?(n=n||[],u.isMessageType()?(this.wrappers_[y]=n,this.extensionObject_[y]=goog.array.map(n,function(S){return S.toArray()})):this.extensionObject_[y]=n):u.isMessageType()?(this.wrappers_[y]=n,this.extensionObject_[y]=n&&n.toArray()):this.extensionObject_[y]=n,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(u,n){if(!(u instanceof n.constructor))throw Error("Messages have different types.");var y=u.toArray();n=n.toArray();var S=[],d=0,m=y.length>n.length?y.length:n.length;for(u.getJsPbMessageId()&&(S[0]=u.getJsPbMessageId(),d=1);d<m;d++)jspb.Message.compareFields(y[d],n[d])||(S[d]=n[d]);return new u.constructor(S)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(u,n){return u==n||!(!u||!n)&&u instanceof n.constructor&&jspb.Message.compareFields(u.toArray(),n.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(u,n){u=u||{},n=n||{};var y,S={};for(y in u)S[y]=0;for(y in n)S[y]=0;for(y in S)if(!jspb.Message.compareFields(u[y],n[y]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(u,n){if(u==n)return!0;if(!goog.isObject(u)||!goog.isObject(n))return!!(typeof u=="number"&&isNaN(u)||typeof n=="number"&&isNaN(n))&&String(u)==String(n);if(u.constructor!=n.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u.constructor===Uint8Array){if(u.length!=n.length)return!1;for(var y=0;y<u.length;y++)if(u[y]!=n[y])return!1;return!0}if(u.constructor===Array){var S=void 0,d=void 0,m=Math.max(u.length,n.length);for(y=0;y<m;y++){var s=u[y],E=n[y];if(s&&s.constructor==Object&&(jspb.asserts.assert(S===void 0),jspb.asserts.assert(y===u.length-1),S=s,s=void 0),E&&E.constructor==Object&&(jspb.asserts.assert(d===void 0),jspb.asserts.assert(y===n.length-1),d=E,E=void 0),!jspb.Message.compareFields(s,E))return!1}return!S&&!d||(S=S||{},d=d||{},jspb.Message.compareExtensions(S,d))}if(u.constructor===Object)return jspb.Message.compareExtensions(u,n);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(u){return jspb.Message.cloneMessage(u)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(u){return new u.constructor(jspb.Message.clone_(u.toArray()))},jspb.Message.copyInto=function(u,n){jspb.asserts.assertInstanceof(u,jspb.Message),jspb.asserts.assertInstanceof(n,jspb.Message),jspb.asserts.assert(u.constructor==n.constructor,"Copy source and target message should have the same type."),u=jspb.Message.clone(u);for(var y=n.toArray(),S=u.toArray(),d=y.length=0;d<S.length;d++)y[d]=S[d];n.wrappers_=u.wrappers_,n.extensionObject_=u.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(u){if(Array.isArray(u)){for(var n=Array(u.length),y=0;y<u.length;y++){var S=u[y];S!=null&&(n[y]=typeof S=="object"?jspb.Message.clone_(jspb.asserts.assert(S)):S)}return n}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)return new Uint8Array(u);for(y in n={},u)(S=u[y])!=null&&(n[y]=typeof S=="object"?jspb.Message.clone_(jspb.asserts.assert(S)):S);return n},jspb.Message.registerMessageType=function(u,n){n.messageId=u},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.CalculatorOptions",null,S),proto.mediapipe.CalculatorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},y.inherits(proto.mediapipe.CalculatorOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(d){return proto.mediapipe.CalculatorOptions.toObject(d,this)},proto.mediapipe.CalculatorOptions.toObject=function(d,m){var s,E={mergeFields:(s=n.Message.getBooleanField(m,1))==null?void 0:s};return n.Message.toObjectExtension(m,E,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,d),d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=m.readBool();d.setMergeFields(s)}else n.Message.readBinaryExtension(d,m,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return d},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(d,m){var s;(s=n.Message.getField(d,1))!=null&&m.writeBool(1,s),n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},y.object.extend(u,proto.mediapipe)})(calculator_options_pb);var any_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.google.protobuf.Any",null,S),proto.google.protobuf.Any=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.google.protobuf.Any,n.Message),y.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),n.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(d){return proto.google.protobuf.Any.toObject(d,this)},proto.google.protobuf.Any.toObject=function(d,m){var s={typeUrl:n.Message.getFieldWithDefault(m,1,""),value:m.getValue_asB64()};return d&&(s.$jspbMessageInstance=m),s}),proto.google.protobuf.Any.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(s,m)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setTypeUrl(s);break;case 2:s=m.readBytes(),d.setValue(s);break;default:m.skipField()}return d},proto.google.protobuf.Any.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getTypeUrl()).length>0&&m.writeString(1,s),(s=d.getValue_asU8()).length>0&&m.writeBytes(2,s)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(d){return n.Message.setProto3StringField(this,1,d)},proto.google.protobuf.Any.prototype.getValue=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return n.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return n.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(d){return n.Message.setProto3BytesField(this,2,d)},y.object.extend(u,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(d,m,s){s||(s="type.googleapis.com/"),s.substr(-1)!="/"?this.setTypeUrl(s+"/"+m):this.setTypeUrl(s+m),this.setValue(d)},proto.google.protobuf.Any.prototype.unpack=function(d,m){return this.getTypeName()==m?d(this.getValue_asU8()):null}})(any_pb);var mediapipe_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.MediaPipeOptions",null,S),proto.mediapipe.MediaPipeOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},y.inherits(proto.mediapipe.MediaPipeOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(d){return proto.mediapipe.MediaPipeOptions.toObject(d,this)},proto.mediapipe.MediaPipeOptions.toObject=function(d,m){var s={};return n.Message.toObjectExtension(m,s,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,d),d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)m.getFieldNumber(),n.Message.readBinaryExtension(d,m,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return d},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(d,m){n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},y.object.extend(u,proto.mediapipe)})(mediapipe_options_pb);var packet_factory_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,S),y.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,S),y.exportSymbol("proto.mediapipe.PacketManagerConfig",null,S),proto.mediapipe.PacketFactoryOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},y.inherits(proto.mediapipe.PacketFactoryOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(d){n.Message.initialize(this,d,0,500,null,null)},y.inherits(proto.mediapipe.PacketFactoryConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},y.inherits(proto.mediapipe.PacketManagerConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryOptions.toObject(d,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(d,m){var s={};return n.Message.toObjectExtension(m,s,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,d),d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)m.getFieldNumber(),n.Message.readBinaryExtension(d,m,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return d},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(d,m){n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryConfig.toObject(d,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(d,m){var s,E={packetFactory:(s=n.Message.getField(m,1))==null?void 0:s,outputSidePacket:(s=n.Message.getField(m,2))==null?void 0:s,externalOutput:(s=n.Message.getField(m,1002))==null?void 0:s,options:(s=m.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(d,s)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setPacketFactory(s);break;case 2:s=m.readString(),d.setOutputSidePacket(s);break;case 1002:s=m.readString(),d.setExternalOutput(s);break;case 3:s=new proto.mediapipe.PacketFactoryOptions,m.readMessage(s,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),d.setOptions(s);break;default:m.skipField()}return d},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=n.Message.getField(d,2))!=null&&m.writeString(2,s),(s=n.Message.getField(d,1002))!=null&&m.writeString(1002,s),(s=d.getOptions())!=null&&m.writeMessage(3,s,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return n.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(d){return n.Message.setField(this,1002,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return n.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return n.Message.getField(this,1002)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(d){return proto.mediapipe.PacketManagerConfig.toObject(d,this)},proto.mediapipe.PacketManagerConfig.toObject=function(d,m){var s={packetList:n.Message.toObjectList(m.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.PacketFactoryConfig;m.readMessage(s,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),d.addPacket(s)}else m.skipField();return d},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(d,m){var s;(s=d.getPacketList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.PacketFactoryConfig,m)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},y.object.extend(u,proto.mediapipe)})(packet_factory_pb);var packet_generator_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,S),y.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,S),proto.mediapipe.PacketGeneratorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},y.inherits(proto.mediapipe.PacketGeneratorOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(d){n.Message.initialize(this,d,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},y.inherits(proto.mediapipe.PacketGeneratorConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorOptions.toObject(d,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(d,m){var s={mergeFields:n.Message.getBooleanFieldWithDefault(m,1,!0)};return n.Message.toObjectExtension(m,s,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,d),d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=m.readBool();d.setMergeFields(s)}else n.Message.readBinaryExtension(d,m,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return d},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(d,m){var s;(s=n.Message.getField(d,1))!=null&&m.writeBool(1,s),n.Message.serializeBinaryExtensions(d,m,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorConfig.toObject(d,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(d,m){var s,E={packetGenerator:(s=n.Message.getField(m,1))==null?void 0:s,inputSidePacketList:(s=n.Message.getRepeatedField(m,2))==null?void 0:s,externalInputList:(s=n.Message.getRepeatedField(m,1002))==null?void 0:s,outputSidePacketList:(s=n.Message.getRepeatedField(m,3))==null?void 0:s,externalOutputList:(s=n.Message.getRepeatedField(m,1003))==null?void 0:s,options:(s=m.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(d,s)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(s,m)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setPacketGenerator(s);break;case 2:s=m.readString(),d.addInputSidePacket(s);break;case 1002:s=m.readString(),d.addExternalInput(s);break;case 3:s=m.readString(),d.addOutputSidePacket(s);break;case 1003:s=m.readString(),d.addExternalOutput(s);break;case 4:s=new proto.mediapipe.PacketGeneratorOptions,m.readMessage(s,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),d.setOptions(s);break;default:m.skipField()}return d},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=d.getInputSidePacketList()).length>0&&m.writeRepeatedString(2,s),(s=d.getExternalInputList()).length>0&&m.writeRepeatedString(1002,s),(s=d.getOutputSidePacketList()).length>0&&m.writeRepeatedString(3,s),(s=d.getExternalOutputList()).length>0&&m.writeRepeatedString(1003,s),(s=d.getOptions())!=null&&m.writeMessage(4,s,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(d){return n.Message.setField(this,2,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(d,m){return n.Message.addToRepeatedField(this,2,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(d){return n.Message.setField(this,1002,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(d,m){return n.Message.addToRepeatedField(this,1002,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return n.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(d){return n.Message.setField(this,1003,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(d,m){return n.Message.addToRepeatedField(this,1003,d,m)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return n.Message.getField(this,4)!=null},y.object.extend(u,proto.mediapipe)})(packet_generator_pb);var status_handler_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,S),proto.mediapipe.StatusHandlerConfig=function(m){n.Message.initialize(this,m,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},y.inherits(proto.mediapipe.StatusHandlerConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.StatusHandlerConfig.toObject(m,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(m,s){var E,H={statusHandler:(E=n.Message.getField(s,1))==null?void 0:E,inputSidePacketList:(E=n.Message.getRepeatedField(s,2))==null?void 0:E,externalInputList:(E=n.Message.getRepeatedField(s,1002))==null?void 0:E,options:(E=s.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(E,s)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setStatusHandler(E);break;case 2:E=s.readString(),m.addInputSidePacket(E);break;case 1002:E=s.readString(),m.addExternalInput(E);break;case 3:E=new d.MediaPipeOptions,s.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:s.skipField()}return m},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=m.getInputSidePacketList()).length>0&&s.writeRepeatedString(2,E),(E=m.getExternalInputList()).length>0&&s.writeRepeatedString(1002,E),(E=m.getOptions())!=null&&s.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(m,s){return n.Message.addToRepeatedField(this,2,m,s)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(m){return n.Message.setField(this,1002,m||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(m,s){return n.Message.addToRepeatedField(this,1002,m,s)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},y.object.extend(u,proto.mediapipe)})(status_handler_pb);var stream_handler_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,S),y.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,S),proto.mediapipe.InputStreamHandlerConfig=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.InputStreamHandlerConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},y.inherits(proto.mediapipe.OutputStreamHandlerConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.InputStreamHandlerConfig.toObject(m,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(m,s){var E,H={inputStreamHandler:n.Message.getFieldWithDefault(s,1,"DefaultInputStreamHandler"),options:(E=s.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(E,s)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setInputStreamHandler(E);break;case 3:E=new d.MediaPipeOptions,s.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:s.skipField()}return m},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=m.getOptions())!=null&&s.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(m){return proto.mediapipe.OutputStreamHandlerConfig.toObject(m,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(m,s){var E,H={outputStreamHandler:n.Message.getFieldWithDefault(s,1,"InOrderOutputStreamHandler"),inputSidePacketList:(E=n.Message.getRepeatedField(s,2))==null?void 0:E,options:(E=s.getOptions())&&d.MediaPipeOptions.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(E,s)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setOutputStreamHandler(E);break;case 2:E=s.readString(),m.addInputSidePacket(E);break;case 3:E=new d.MediaPipeOptions,s.readMessage(E,d.MediaPipeOptions.deserializeBinaryFromReader),m.setOptions(E);break;default:s.skipField()}return m},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=m.getInputSidePacketList()).length>0&&s.writeRepeatedString(2,E),(E=m.getOptions())!=null&&s.writeMessage(3,E,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(m,s){return n.Message.addToRepeatedField(this,2,m,s)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},y.object.extend(u,proto.mediapipe)})(stream_handler_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;y.object.extend(proto,d);var m=any_pb;y.object.extend(proto,m);var s=mediapipe_options_pb;y.object.extend(proto,s);var E=packet_factory_pb;y.object.extend(proto,E);var H=packet_generator_pb;y.object.extend(proto,H);var te=status_handler_pb;y.object.extend(proto,te);var ce=stream_handler_pb;y.object.extend(proto,ce),y.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,S),y.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,S),y.exportSymbol("proto.mediapipe.ExecutorConfig",null,S),y.exportSymbol("proto.mediapipe.InputCollection",null,S),y.exportSymbol("proto.mediapipe.InputCollection.InputType",null,S),y.exportSymbol("proto.mediapipe.InputCollectionSet",null,S),y.exportSymbol("proto.mediapipe.InputStreamInfo",null,S),y.exportSymbol("proto.mediapipe.ProfilerConfig",null,S),proto.mediapipe.ExecutorConfig=function(J){n.Message.initialize(this,J,0,-1,null,null)},y.inherits(proto.mediapipe.ExecutorConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(J){n.Message.initialize(this,J,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},y.inherits(proto.mediapipe.InputCollection,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(J){n.Message.initialize(this,J,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},y.inherits(proto.mediapipe.InputCollectionSet,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(J){n.Message.initialize(this,J,0,-1,null,null)},y.inherits(proto.mediapipe.InputStreamInfo,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(J){n.Message.initialize(this,J,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},y.inherits(proto.mediapipe.ProfilerConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(J){n.Message.initialize(this,J,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},y.inherits(proto.mediapipe.CalculatorGraphConfig,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(J){n.Message.initialize(this,J,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},y.inherits(proto.mediapipe.CalculatorGraphConfig.Node,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(J){return proto.mediapipe.ExecutorConfig.toObject(J,this)},proto.mediapipe.ExecutorConfig.toObject=function(J,pe){var de,bt={name:n.Message.getFieldWithDefault(pe,1,""),type:n.Message.getFieldWithDefault(pe,2,""),options:(de=pe.getOptions())&&s.MediaPipeOptions.toObject(J,de)};return J&&(bt.$jspbMessageInstance=pe),bt}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(de,pe)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var de=pe.readString();J.setName(de);break;case 2:de=pe.readString(),J.setType(de);break;case 3:de=new s.MediaPipeOptions,pe.readMessage(de,s.MediaPipeOptions.deserializeBinaryFromReader),J.setOptions(de);break;default:pe.skipField()}return J},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(J,pe){var de=void 0;(de=J.getName()).length>0&&pe.writeString(1,de),(de=J.getType()).length>0&&pe.writeString(2,de),(de=J.getOptions())!=null&&pe.writeMessage(3,de,s.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(J){return n.Message.setProto3StringField(this,2,J)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,s.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(J){return n.Message.setWrapperField(this,3,J)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(J){return proto.mediapipe.InputCollection.toObject(J,this)},proto.mediapipe.InputCollection.toObject=function(J,pe){var de,bt={name:n.Message.getFieldWithDefault(pe,1,""),sidePacketNameList:(de=n.Message.getRepeatedField(pe,2))==null?void 0:de,externalInputNameList:(de=n.Message.getRepeatedField(pe,1002))==null?void 0:de,inputType:n.Message.getFieldWithDefault(pe,3,0),fileName:n.Message.getFieldWithDefault(pe,4,"")};return J&&(bt.$jspbMessageInstance=pe),bt}),proto.mediapipe.InputCollection.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(de,pe)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var de=pe.readString();J.setName(de);break;case 2:de=pe.readString(),J.addSidePacketName(de);break;case 1002:de=pe.readString(),J.addExternalInputName(de);break;case 3:de=pe.readEnum(),J.setInputType(de);break;case 4:de=pe.readString(),J.setFileName(de);break;default:pe.skipField()}return J},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(J,pe){var de=void 0;(de=J.getName()).length>0&&pe.writeString(1,de),(de=J.getSidePacketNameList()).length>0&&pe.writeRepeatedString(2,de),(de=J.getExternalInputNameList()).length>0&&pe.writeRepeatedString(1002,de),(de=J.getInputType())!==0&&pe.writeEnum(3,de),(de=J.getFileName()).length>0&&pe.writeString(4,de)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(J){return n.Message.setField(this,2,J||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(J,pe){return n.Message.addToRepeatedField(this,2,J,pe)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(J){return n.Message.setField(this,1002,J||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(J,pe){return n.Message.addToRepeatedField(this,1002,J,pe)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(J){return n.Message.setProto3EnumField(this,3,J)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(J){return n.Message.setProto3StringField(this,4,J)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(J){return proto.mediapipe.InputCollectionSet.toObject(J,this)},proto.mediapipe.InputCollectionSet.toObject=function(J,pe){var de={inputCollectionList:n.Message.toObjectList(pe.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,J)};return J&&(de.$jspbMessageInstance=pe),de}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(de,pe)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)if(pe.getFieldNumber()===1){var de=new proto.mediapipe.InputCollection;pe.readMessage(de,proto.mediapipe.InputCollection.deserializeBinaryFromReader),J.addInputCollection(de)}else pe.skipField();return J},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(J,pe){var de;(de=J.getInputCollectionList()).length>0&&pe.writeRepeatedMessage(1,de,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(J){return n.Message.setRepeatedWrapperField(this,1,J)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(J,pe){return n.Message.addToRepeatedWrapperField(this,1,J,proto.mediapipe.InputCollection,pe)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(J){return proto.mediapipe.InputStreamInfo.toObject(J,this)},proto.mediapipe.InputStreamInfo.toObject=function(J,pe){var de={tagIndex:n.Message.getFieldWithDefault(pe,1,""),backEdge:n.Message.getBooleanFieldWithDefault(pe,2,!1)};return J&&(de.$jspbMessageInstance=pe),de}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(de,pe)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var de=pe.readString();J.setTagIndex(de);break;case 2:de=pe.readBool(),J.setBackEdge(de);break;default:pe.skipField()}return J},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(J,pe){var de=void 0;(de=J.getTagIndex()).length>0&&pe.writeString(1,de),(de=J.getBackEdge())&&pe.writeBool(2,de)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(J){return n.Message.setProto3BooleanField(this,2,J)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(J){return proto.mediapipe.ProfilerConfig.toObject(J,this)},proto.mediapipe.ProfilerConfig.toObject=function(J,pe){var de,bt={histogramIntervalSizeUsec:n.Message.getFieldWithDefault(pe,1,0),numHistogramIntervals:n.Message.getFieldWithDefault(pe,2,0),enableInputOutputLatency:n.Message.getBooleanFieldWithDefault(pe,3,!1),enableProfiler:n.Message.getBooleanFieldWithDefault(pe,4,!1),enableStreamLatency:n.Message.getBooleanFieldWithDefault(pe,5,!1),usePacketTimestampForAddedPacket:n.Message.getBooleanFieldWithDefault(pe,6,!1),traceLogCapacity:n.Message.getFieldWithDefault(pe,7,0),traceEventTypesDisabledList:(de=n.Message.getRepeatedField(pe,8))==null?void 0:de,traceLogPath:n.Message.getFieldWithDefault(pe,9,""),traceLogCount:n.Message.getFieldWithDefault(pe,10,0),traceLogIntervalUsec:n.Message.getFieldWithDefault(pe,11,0),traceLogMarginUsec:n.Message.getFieldWithDefault(pe,12,0),traceLogDurationEvents:n.Message.getBooleanFieldWithDefault(pe,13,!1),traceLogIntervalCount:n.Message.getFieldWithDefault(pe,14,0),traceLogDisabled:n.Message.getBooleanFieldWithDefault(pe,15,!1),traceEnabled:n.Message.getBooleanFieldWithDefault(pe,16,!1),traceLogInstantEvents:n.Message.getBooleanFieldWithDefault(pe,17,!1),calculatorFilter:n.Message.getFieldWithDefault(pe,18,"")};return J&&(bt.$jspbMessageInstance=pe),bt}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(de,pe)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var de=pe.readInt64();J.setHistogramIntervalSizeUsec(de);break;case 2:de=pe.readInt64(),J.setNumHistogramIntervals(de);break;case 3:de=pe.readBool(),J.setEnableInputOutputLatency(de);break;case 4:de=pe.readBool(),J.setEnableProfiler(de);break;case 5:de=pe.readBool(),J.setEnableStreamLatency(de);break;case 6:de=pe.readBool(),J.setUsePacketTimestampForAddedPacket(de);break;case 7:de=pe.readInt64(),J.setTraceLogCapacity(de);break;case 8:for(var bt=pe.isDelimited()?pe.readPackedInt32():[pe.readInt32()],nt=0;nt<bt.length;nt++)J.addTraceEventTypesDisabled(bt[nt]);break;case 9:de=pe.readString(),J.setTraceLogPath(de);break;case 10:de=pe.readInt32(),J.setTraceLogCount(de);break;case 11:de=pe.readInt64(),J.setTraceLogIntervalUsec(de);break;case 12:de=pe.readInt64(),J.setTraceLogMarginUsec(de);break;case 13:de=pe.readBool(),J.setTraceLogDurationEvents(de);break;case 14:de=pe.readInt32(),J.setTraceLogIntervalCount(de);break;case 15:de=pe.readBool(),J.setTraceLogDisabled(de);break;case 16:de=pe.readBool(),J.setTraceEnabled(de);break;case 17:de=pe.readBool(),J.setTraceLogInstantEvents(de);break;case 18:de=pe.readString(),J.setCalculatorFilter(de);break;default:pe.skipField()}return J},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(J,pe){var de=void 0;(de=J.getHistogramIntervalSizeUsec())!==0&&pe.writeInt64(1,de),(de=J.getNumHistogramIntervals())!==0&&pe.writeInt64(2,de),(de=J.getEnableInputOutputLatency())&&pe.writeBool(3,de),(de=J.getEnableProfiler())&&pe.writeBool(4,de),(de=J.getEnableStreamLatency())&&pe.writeBool(5,de),(de=J.getUsePacketTimestampForAddedPacket())&&pe.writeBool(6,de),(de=J.getTraceLogCapacity())!==0&&pe.writeInt64(7,de),(de=J.getTraceEventTypesDisabledList()).length>0&&pe.writePackedInt32(8,de),(de=J.getTraceLogPath()).length>0&&pe.writeString(9,de),(de=J.getTraceLogCount())!==0&&pe.writeInt32(10,de),(de=J.getTraceLogIntervalUsec())!==0&&pe.writeInt64(11,de),(de=J.getTraceLogMarginUsec())!==0&&pe.writeInt64(12,de),(de=J.getTraceLogDurationEvents())&&pe.writeBool(13,de),(de=J.getTraceLogIntervalCount())!==0&&pe.writeInt32(14,de),(de=J.getTraceLogDisabled())&&pe.writeBool(15,de),(de=J.getTraceEnabled())&&pe.writeBool(16,de),(de=J.getTraceLogInstantEvents())&&pe.writeBool(17,de),(de=J.getCalculatorFilter()).length>0&&pe.writeString(18,de)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(J){return n.Message.setProto3IntField(this,1,J)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(J){return n.Message.setProto3IntField(this,2,J)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(J){return n.Message.setProto3BooleanField(this,3,J)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(J){return n.Message.setProto3BooleanField(this,4,J)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(J){return n.Message.setProto3BooleanField(this,5,J)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return n.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(J){return n.Message.setProto3BooleanField(this,6,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(J){return n.Message.setProto3IntField(this,7,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return n.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(J){return n.Message.setField(this,8,J||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(J,pe){return n.Message.addToRepeatedField(this,8,J,pe)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return n.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(J){return n.Message.setProto3StringField(this,9,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(J){return n.Message.setProto3IntField(this,10,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(J){return n.Message.setProto3IntField(this,11,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return n.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(J){return n.Message.setProto3IntField(this,12,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return n.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(J){return n.Message.setProto3BooleanField(this,13,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return n.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(J){return n.Message.setProto3IntField(this,14,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return n.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(J){return n.Message.setProto3BooleanField(this,15,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return n.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(J){return n.Message.setProto3BooleanField(this,16,J)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return n.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(J){return n.Message.setProto3BooleanField(this,17,J)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return n.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(J){return n.Message.setProto3StringField(this,18,J)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(J){return proto.mediapipe.CalculatorGraphConfig.toObject(J,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(J,pe){var de,bt={nodeList:n.Message.toObjectList(pe.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,J),packetFactoryList:n.Message.toObjectList(pe.getPacketFactoryList(),E.PacketFactoryConfig.toObject,J),packetGeneratorList:n.Message.toObjectList(pe.getPacketGeneratorList(),H.PacketGeneratorConfig.toObject,J),numThreads:n.Message.getFieldWithDefault(pe,8,0),statusHandlerList:n.Message.toObjectList(pe.getStatusHandlerList(),te.StatusHandlerConfig.toObject,J),inputStreamList:(de=n.Message.getRepeatedField(pe,10))==null?void 0:de,outputStreamList:(de=n.Message.getRepeatedField(pe,15))==null?void 0:de,inputSidePacketList:(de=n.Message.getRepeatedField(pe,16))==null?void 0:de,outputSidePacketList:(de=n.Message.getRepeatedField(pe,17))==null?void 0:de,maxQueueSize:n.Message.getFieldWithDefault(pe,11,0),reportDeadlock:n.Message.getBooleanFieldWithDefault(pe,21,!1),inputStreamHandler:(de=pe.getInputStreamHandler())&&ce.InputStreamHandlerConfig.toObject(J,de),outputStreamHandler:(de=pe.getOutputStreamHandler())&&ce.OutputStreamHandlerConfig.toObject(J,de),executorList:n.Message.toObjectList(pe.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,J),profilerConfig:(de=pe.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(J,de),pb_package:n.Message.getFieldWithDefault(pe,19,""),type:n.Message.getFieldWithDefault(pe,20,""),options:(de=pe.getOptions())&&s.MediaPipeOptions.toObject(J,de),graphOptionsList:n.Message.toObjectList(pe.getGraphOptionsList(),m.Any.toObject,J)};return J&&(bt.$jspbMessageInstance=pe),bt}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(de,pe)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var de=new proto.mediapipe.CalculatorGraphConfig.Node;pe.readMessage(de,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),J.addNode(de);break;case 6:de=new E.PacketFactoryConfig,pe.readMessage(de,E.PacketFactoryConfig.deserializeBinaryFromReader),J.addPacketFactory(de);break;case 7:de=new H.PacketGeneratorConfig,pe.readMessage(de,H.PacketGeneratorConfig.deserializeBinaryFromReader),J.addPacketGenerator(de);break;case 8:de=pe.readInt32(),J.setNumThreads(de);break;case 9:de=new te.StatusHandlerConfig,pe.readMessage(de,te.StatusHandlerConfig.deserializeBinaryFromReader),J.addStatusHandler(de);break;case 10:de=pe.readString(),J.addInputStream(de);break;case 15:de=pe.readString(),J.addOutputStream(de);break;case 16:de=pe.readString(),J.addInputSidePacket(de);break;case 17:de=pe.readString(),J.addOutputSidePacket(de);break;case 11:de=pe.readInt32(),J.setMaxQueueSize(de);break;case 21:de=pe.readBool(),J.setReportDeadlock(de);break;case 12:de=new ce.InputStreamHandlerConfig,pe.readMessage(de,ce.InputStreamHandlerConfig.deserializeBinaryFromReader),J.setInputStreamHandler(de);break;case 13:de=new ce.OutputStreamHandlerConfig,pe.readMessage(de,ce.OutputStreamHandlerConfig.deserializeBinaryFromReader),J.setOutputStreamHandler(de);break;case 14:de=new proto.mediapipe.ExecutorConfig,pe.readMessage(de,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),J.addExecutor(de);break;case 18:de=new proto.mediapipe.ProfilerConfig,pe.readMessage(de,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),J.setProfilerConfig(de);break;case 19:de=pe.readString(),J.setPackage(de);break;case 20:de=pe.readString(),J.setType(de);break;case 1001:de=new s.MediaPipeOptions,pe.readMessage(de,s.MediaPipeOptions.deserializeBinaryFromReader),J.setOptions(de);break;case 1002:de=new m.Any,pe.readMessage(de,m.Any.deserializeBinaryFromReader),J.addGraphOptions(de);break;default:pe.skipField()}return J},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(J,pe){var de=void 0;(de=J.getNodeList()).length>0&&pe.writeRepeatedMessage(1,de,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(de=J.getPacketFactoryList()).length>0&&pe.writeRepeatedMessage(6,de,E.PacketFactoryConfig.serializeBinaryToWriter),(de=J.getPacketGeneratorList()).length>0&&pe.writeRepeatedMessage(7,de,H.PacketGeneratorConfig.serializeBinaryToWriter),(de=J.getNumThreads())!==0&&pe.writeInt32(8,de),(de=J.getStatusHandlerList()).length>0&&pe.writeRepeatedMessage(9,de,te.StatusHandlerConfig.serializeBinaryToWriter),(de=J.getInputStreamList()).length>0&&pe.writeRepeatedString(10,de),(de=J.getOutputStreamList()).length>0&&pe.writeRepeatedString(15,de),(de=J.getInputSidePacketList()).length>0&&pe.writeRepeatedString(16,de),(de=J.getOutputSidePacketList()).length>0&&pe.writeRepeatedString(17,de),(de=J.getMaxQueueSize())!==0&&pe.writeInt32(11,de),(de=J.getReportDeadlock())&&pe.writeBool(21,de),(de=J.getInputStreamHandler())!=null&&pe.writeMessage(12,de,ce.InputStreamHandlerConfig.serializeBinaryToWriter),(de=J.getOutputStreamHandler())!=null&&pe.writeMessage(13,de,ce.OutputStreamHandlerConfig.serializeBinaryToWriter),(de=J.getExecutorList()).length>0&&pe.writeRepeatedMessage(14,de,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),(de=J.getProfilerConfig())!=null&&pe.writeMessage(18,de,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(de=J.getPackage()).length>0&&pe.writeString(19,de),(de=J.getType()).length>0&&pe.writeString(20,de),(de=J.getOptions())!=null&&pe.writeMessage(1001,de,s.MediaPipeOptions.serializeBinaryToWriter),(de=J.getGraphOptionsList()).length>0&&pe.writeRepeatedMessage(1002,de,m.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(J){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(J,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(J,pe){var de,bt={name:n.Message.getFieldWithDefault(pe,1,""),calculator:n.Message.getFieldWithDefault(pe,2,""),inputStreamList:(de=n.Message.getRepeatedField(pe,3))==null?void 0:de,outputStreamList:(de=n.Message.getRepeatedField(pe,4))==null?void 0:de,inputSidePacketList:(de=n.Message.getRepeatedField(pe,5))==null?void 0:de,outputSidePacketList:(de=n.Message.getRepeatedField(pe,6))==null?void 0:de,options:(de=pe.getOptions())&&d.CalculatorOptions.toObject(J,de),nodeOptionsList:n.Message.toObjectList(pe.getNodeOptionsList(),m.Any.toObject,J),sourceLayer:n.Message.getFieldWithDefault(pe,9,0),bufferSizeHint:n.Message.getFieldWithDefault(pe,10,0),inputStreamHandler:(de=pe.getInputStreamHandler())&&ce.InputStreamHandlerConfig.toObject(J,de),outputStreamHandler:(de=pe.getOutputStreamHandler())&&ce.OutputStreamHandlerConfig.toObject(J,de),inputStreamInfoList:n.Message.toObjectList(pe.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,J),executor:n.Message.getFieldWithDefault(pe,14,""),profilerConfig:(de=pe.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(J,de),maxInFlight:n.Message.getFieldWithDefault(pe,16,0),optionValueList:(de=n.Message.getRepeatedField(pe,17))==null?void 0:de,externalInputList:(de=n.Message.getRepeatedField(pe,1005))==null?void 0:de};return J&&(bt.$jspbMessageInstance=pe),bt}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(J){var pe=new n.BinaryReader(J),de=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(de,pe)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(J,pe){for(;pe.nextField()&&!pe.isEndGroup();)switch(pe.getFieldNumber()){case 1:var de=pe.readString();J.setName(de);break;case 2:de=pe.readString(),J.setCalculator(de);break;case 3:de=pe.readString(),J.addInputStream(de);break;case 4:de=pe.readString(),J.addOutputStream(de);break;case 5:de=pe.readString(),J.addInputSidePacket(de);break;case 6:de=pe.readString(),J.addOutputSidePacket(de);break;case 7:de=new d.CalculatorOptions,pe.readMessage(de,d.CalculatorOptions.deserializeBinaryFromReader),J.setOptions(de);break;case 8:de=new m.Any,pe.readMessage(de,m.Any.deserializeBinaryFromReader),J.addNodeOptions(de);break;case 9:de=pe.readInt32(),J.setSourceLayer(de);break;case 10:de=pe.readInt32(),J.setBufferSizeHint(de);break;case 11:de=new ce.InputStreamHandlerConfig,pe.readMessage(de,ce.InputStreamHandlerConfig.deserializeBinaryFromReader),J.setInputStreamHandler(de);break;case 12:de=new ce.OutputStreamHandlerConfig,pe.readMessage(de,ce.OutputStreamHandlerConfig.deserializeBinaryFromReader),J.setOutputStreamHandler(de);break;case 13:de=new proto.mediapipe.InputStreamInfo,pe.readMessage(de,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),J.addInputStreamInfo(de);break;case 14:de=pe.readString(),J.setExecutor(de);break;case 15:de=new proto.mediapipe.ProfilerConfig,pe.readMessage(de,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),J.setProfilerConfig(de);break;case 16:de=pe.readInt32(),J.setMaxInFlight(de);break;case 17:de=pe.readString(),J.addOptionValue(de);break;case 1005:de=pe.readString(),J.addExternalInput(de);break;default:pe.skipField()}return J},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var J=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,J),J.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(J,pe){var de=void 0;(de=J.getName()).length>0&&pe.writeString(1,de),(de=J.getCalculator()).length>0&&pe.writeString(2,de),(de=J.getInputStreamList()).length>0&&pe.writeRepeatedString(3,de),(de=J.getOutputStreamList()).length>0&&pe.writeRepeatedString(4,de),(de=J.getInputSidePacketList()).length>0&&pe.writeRepeatedString(5,de),(de=J.getOutputSidePacketList()).length>0&&pe.writeRepeatedString(6,de),(de=J.getOptions())!=null&&pe.writeMessage(7,de,d.CalculatorOptions.serializeBinaryToWriter),(de=J.getNodeOptionsList()).length>0&&pe.writeRepeatedMessage(8,de,m.Any.serializeBinaryToWriter),(de=J.getSourceLayer())!==0&&pe.writeInt32(9,de),(de=J.getBufferSizeHint())!==0&&pe.writeInt32(10,de),(de=J.getInputStreamHandler())!=null&&pe.writeMessage(11,de,ce.InputStreamHandlerConfig.serializeBinaryToWriter),(de=J.getOutputStreamHandler())!=null&&pe.writeMessage(12,de,ce.OutputStreamHandlerConfig.serializeBinaryToWriter),(de=J.getInputStreamInfoList()).length>0&&pe.writeRepeatedMessage(13,de,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(de=J.getExecutor()).length>0&&pe.writeString(14,de),(de=J.getProfilerConfig())!=null&&pe.writeMessage(15,de,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(de=J.getMaxInFlight())!==0&&pe.writeInt32(16,de),(de=J.getOptionValueList()).length>0&&pe.writeRepeatedString(17,de),(de=J.getExternalInputList()).length>0&&pe.writeRepeatedString(1005,de)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(J){return n.Message.setProto3StringField(this,1,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(J){return n.Message.setProto3StringField(this,2,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(J){return n.Message.setField(this,3,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(J,pe){return n.Message.addToRepeatedField(this,3,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(J){return n.Message.setField(this,4,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(J,pe){return n.Message.addToRepeatedField(this,4,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(J){return n.Message.setField(this,5,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,5,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(J){return n.Message.setField(this,6,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,6,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(J){return n.Message.setWrapperField(this,7,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return n.Message.getRepeatedWrapperField(this,m.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(J){return n.Message.setRepeatedWrapperField(this,8,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(J,pe){return n.Message.addToRepeatedWrapperField(this,8,J,proto.google.protobuf.Any,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return n.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(J){return n.Message.setProto3IntField(this,9,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(J){return n.Message.setProto3IntField(this,10,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,ce.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(J){return n.Message.setWrapperField(this,11,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,ce.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(J){return n.Message.setWrapperField(this,12,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(J){return n.Message.setRepeatedWrapperField(this,13,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(J,pe){return n.Message.addToRepeatedWrapperField(this,13,J,proto.mediapipe.InputStreamInfo,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return n.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(J){return n.Message.setProto3StringField(this,14,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(J){return n.Message.setWrapperField(this,15,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return n.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(J){return n.Message.setProto3IntField(this,16,J)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(J){return n.Message.setField(this,17,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(J,pe){return n.Message.addToRepeatedField(this,17,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(J){return n.Message.setField(this,1005,J||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(J,pe){return n.Message.addToRepeatedField(this,1005,J,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(J){return n.Message.setRepeatedWrapperField(this,1,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(J,pe){return n.Message.addToRepeatedWrapperField(this,1,J,proto.mediapipe.CalculatorGraphConfig.Node,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return n.Message.getRepeatedWrapperField(this,E.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(J){return n.Message.setRepeatedWrapperField(this,6,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(J,pe){return n.Message.addToRepeatedWrapperField(this,6,J,proto.mediapipe.PacketFactoryConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return n.Message.getRepeatedWrapperField(this,H.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(J){return n.Message.setRepeatedWrapperField(this,7,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(J,pe){return n.Message.addToRepeatedWrapperField(this,7,J,proto.mediapipe.PacketGeneratorConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(J){return n.Message.setProto3IntField(this,8,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return n.Message.getRepeatedWrapperField(this,te.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(J){return n.Message.setRepeatedWrapperField(this,9,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(J,pe){return n.Message.addToRepeatedWrapperField(this,9,J,proto.mediapipe.StatusHandlerConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(J){return n.Message.setField(this,10,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(J,pe){return n.Message.addToRepeatedField(this,10,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(J){return n.Message.setField(this,15,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(J,pe){return n.Message.addToRepeatedField(this,15,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(J){return n.Message.setField(this,16,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,16,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(J){return n.Message.setField(this,17,J||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(J,pe){return n.Message.addToRepeatedField(this,17,J,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(J){return n.Message.setProto3IntField(this,11,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return n.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(J){return n.Message.setProto3BooleanField(this,21,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,ce.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(J){return n.Message.setWrapperField(this,12,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,ce.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(J){return n.Message.setWrapperField(this,13,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,13)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(J){return n.Message.setRepeatedWrapperField(this,14,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(J,pe){return n.Message.addToRepeatedWrapperField(this,14,J,proto.mediapipe.ExecutorConfig,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(J){return n.Message.setWrapperField(this,18,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return n.Message.getField(this,18)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return n.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(J){return n.Message.setProto3StringField(this,19,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(J){return n.Message.setProto3StringField(this,20,J)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,s.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(J){return n.Message.setWrapperField(this,1001,J)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return n.Message.getField(this,1001)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return n.Message.getRepeatedWrapperField(this,m.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(J){return n.Message.setRepeatedWrapperField(this,1002,J)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(J,pe){return n.Message.addToRepeatedWrapperField(this,1002,J,proto.google.protobuf.Any,pe)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},y.object.extend(u,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.Rasterization",null,S),y.exportSymbol("proto.mediapipe.Rasterization.Interval",null,S),proto.mediapipe.Rasterization=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},y.inherits(proto.mediapipe.Rasterization,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.Rasterization.Interval,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(d){return proto.mediapipe.Rasterization.toObject(d,this)},proto.mediapipe.Rasterization.toObject=function(d,m){var s={intervalList:n.Message.toObjectList(m.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.Rasterization.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(s,m)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.Rasterization.Interval;m.readMessage(s,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),d.addInterval(s)}else m.skipField();return d},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(d,m){var s;(s=d.getIntervalList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(d){return proto.mediapipe.Rasterization.Interval.toObject(d,this)},proto.mediapipe.Rasterization.Interval.toObject=function(d,m){var s,E={y:(s=n.Message.getField(m,1))==null?void 0:s,leftX:(s=n.Message.getField(m,2))==null?void 0:s,rightX:(s=n.Message.getField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(s,m)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setY(s);break;case 2:s=m.readInt32(),d.setLeftX(s);break;case 3:s=m.readInt32(),d.setRightX(s);break;default:m.skipField()}return d},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.Rasterization.prototype.addInterval=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Rasterization.Interval,m)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},y.object.extend(u,proto.mediapipe)})(rasterization_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=rasterization_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.LocationData",null,S),y.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,S),y.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,S),y.exportSymbol("proto.mediapipe.LocationData.Format",null,S),y.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,S),y.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,S),proto.mediapipe.LocationData=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},y.inherits(proto.mediapipe.LocationData,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.LocationData.BoundingBox,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.LocationData.BinaryMask,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.LocationData.RelativeKeypoint,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(m){return proto.mediapipe.LocationData.toObject(m,this)},proto.mediapipe.LocationData.toObject=function(m,s){var E,H={format:(E=n.Message.getField(s,1))==null?void 0:E,boundingBox:(E=s.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(m,E),relativeBoundingBox:(E=s.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(m,E),mask:(E=s.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(m,E),relativeKeypointsList:n.Message.toObjectList(s.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,m)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readEnum();m.setFormat(E);break;case 2:E=new proto.mediapipe.LocationData.BoundingBox,s.readMessage(E,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),m.setBoundingBox(E);break;case 3:E=new proto.mediapipe.LocationData.RelativeBoundingBox,s.readMessage(E,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),m.setRelativeBoundingBox(E);break;case 4:E=new proto.mediapipe.LocationData.BinaryMask,s.readMessage(E,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),m.setMask(E);break;case 5:E=new proto.mediapipe.LocationData.RelativeKeypoint,s.readMessage(E,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),m.addRelativeKeypoints(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeEnum(1,E),(E=m.getBoundingBox())!=null&&s.writeMessage(2,E,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),(E=m.getRelativeBoundingBox())!=null&&s.writeMessage(3,E,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),(E=m.getMask())!=null&&s.writeMessage(4,E,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(E=m.getRelativeKeypointsList()).length>0&&s.writeRepeatedMessage(5,E,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(m){return proto.mediapipe.LocationData.BoundingBox.toObject(m,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(m,s){var E,H={xmin:(E=n.Message.getField(s,1))==null?void 0:E,ymin:(E=n.Message.getField(s,2))==null?void 0:E,width:(E=n.Message.getField(s,3))==null?void 0:E,height:(E=n.Message.getField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readInt32();m.setXmin(E);break;case 2:E=s.readInt32(),m.setYmin(E);break;case 3:E=s.readInt32(),m.setWidth(E);break;case 4:E=s.readInt32(),m.setHeight(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeInt32(3,E),(E=n.Message.getField(m,4))!=null&&s.writeInt32(4,E)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(m){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(m,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(m,s){var E,H={xmin:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,ymin:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,width:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,height:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readFloat();m.setXmin(E);break;case 2:E=s.readFloat(),m.setYmin(E);break;case 3:E=s.readFloat(),m.setWidth(E);break;case 4:E=s.readFloat(),m.setHeight(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeFloat(1,E),(E=n.Message.getField(m,2))!=null&&s.writeFloat(2,E),(E=n.Message.getField(m,3))!=null&&s.writeFloat(3,E),(E=n.Message.getField(m,4))!=null&&s.writeFloat(4,E)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(m){return proto.mediapipe.LocationData.BinaryMask.toObject(m,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(m,s){var E,H={width:(E=n.Message.getField(s,1))==null?void 0:E,height:(E=n.Message.getField(s,2))==null?void 0:E,rasterization:(E=s.getRasterization())&&d.Rasterization.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readInt32();m.setWidth(E);break;case 2:E=s.readInt32(),m.setHeight(E);break;case 3:E=new d.Rasterization,s.readMessage(E,d.Rasterization.deserializeBinaryFromReader),m.setRasterization(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=m.getRasterization())!=null&&s.writeMessage(3,E,d.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return n.Message.getWrapperField(this,d.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(m){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(m,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(m,s){var E,H={x:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,y:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,keypointLabel:(E=n.Message.getField(s,3))==null?void 0:E,score:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(E,s)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readFloat();m.setX(E);break;case 2:E=s.readFloat(),m.setY(E);break;case 3:E=s.readString(),m.setKeypointLabel(E);break;case 4:E=s.readFloat(),m.setScore(E);break;default:s.skipField()}return m},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeFloat(1,E),(E=n.Message.getField(m,2))!=null&&s.writeFloat(2,E),(E=n.Message.getField(m,3))!=null&&s.writeString(3,E),(E=n.Message.getField(m,4))!=null&&s.writeFloat(4,E)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getFormat=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.prototype.getMask=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(m){return n.Message.setRepeatedWrapperField(this,5,m)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(m,s){return n.Message.addToRepeatedWrapperField(this,5,m,proto.mediapipe.LocationData.RelativeKeypoint,s)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},y.object.extend(u,proto.mediapipe)}(location_data_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=location_data_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.Detection",null,S),y.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,S),y.exportSymbol("proto.mediapipe.DetectionList",null,S),proto.mediapipe.Detection=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},y.inherits(proto.mediapipe.Detection,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.Detection.AssociatedDetection,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},y.inherits(proto.mediapipe.DetectionList,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(m){return proto.mediapipe.Detection.toObject(m,this)},proto.mediapipe.Detection.toObject=function(m,s){var E,H={labelList:(E=n.Message.getRepeatedField(s,1))==null?void 0:E,labelIdList:(E=n.Message.getRepeatedField(s,2))==null?void 0:E,scoreList:(E=n.Message.getRepeatedFloatingPointField(s,3))==null?void 0:E,locationData:(E=s.getLocationData())&&d.LocationData.toObject(m,E),featureTag:(E=n.Message.getField(s,5))==null?void 0:E,trackId:(E=n.Message.getField(s,6))==null?void 0:E,detectionId:(E=n.Message.getField(s,7))==null?void 0:E,associatedDetectionsList:n.Message.toObjectList(s.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,m),displayNameList:(E=n.Message.getRepeatedField(s,9))==null?void 0:E,timestampUsec:(E=n.Message.getField(s,10))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.Detection.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(E,s)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.addLabel(E);break;case 2:for(var H=s.isDelimited()?s.readPackedInt32():[s.readInt32()],te=0;te<H.length;te++)m.addLabelId(H[te]);break;case 3:for(H=s.isDelimited()?s.readPackedFloat():[s.readFloat()],te=0;te<H.length;te++)m.addScore(H[te]);break;case 4:E=new d.LocationData,s.readMessage(E,d.LocationData.deserializeBinaryFromReader),m.setLocationData(E);break;case 5:E=s.readString(),m.setFeatureTag(E);break;case 6:E=s.readString(),m.setTrackId(E);break;case 7:E=s.readInt64(),m.setDetectionId(E);break;case 8:E=new proto.mediapipe.Detection.AssociatedDetection,s.readMessage(E,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),m.addAssociatedDetections(E);break;case 9:E=s.readString(),m.addDisplayName(E);break;case 10:E=s.readInt64(),m.setTimestampUsec(E);break;default:s.skipField()}return m},proto.mediapipe.Detection.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getLabelList()).length>0&&s.writeRepeatedString(1,E),(E=m.getLabelIdList()).length>0&&s.writePackedInt32(2,E),(E=m.getScoreList()).length>0&&s.writePackedFloat(3,E),(E=m.getLocationData())!=null&&s.writeMessage(4,E,d.LocationData.serializeBinaryToWriter),(E=n.Message.getField(m,5))!=null&&s.writeString(5,E),(E=n.Message.getField(m,6))!=null&&s.writeString(6,E),(E=n.Message.getField(m,7))!=null&&s.writeInt64(7,E),(E=m.getAssociatedDetectionsList()).length>0&&s.writeRepeatedMessage(8,E,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(E=m.getDisplayNameList()).length>0&&s.writeRepeatedString(9,E),(E=n.Message.getField(m,10))!=null&&s.writeInt64(10,E)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(m){return proto.mediapipe.Detection.AssociatedDetection.toObject(m,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(m,s){var E,H={id:(E=n.Message.getField(s,1))==null?void 0:E,confidence:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(E,s)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readInt32();m.setId(E);break;case 2:E=s.readFloat(),m.setConfidence(E);break;default:s.skipField()}return m},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeInt32(1,E),(E=n.Message.getField(m,2))!=null&&s.writeFloat(2,E)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Detection.prototype.getLabelList=function(){return n.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(m){return n.Message.setField(this,1,m||[])},proto.mediapipe.Detection.prototype.addLabel=function(m,s){return n.Message.addToRepeatedField(this,1,m,s)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(m){return n.Message.setField(this,2,m||[])},proto.mediapipe.Detection.prototype.addLabelId=function(m,s){return n.Message.addToRepeatedField(this,2,m,s)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(m){return n.Message.setField(this,3,m||[])},proto.mediapipe.Detection.prototype.addScore=function(m,s){return n.Message.addToRepeatedField(this,3,m,s)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return n.Message.getWrapperField(this,d.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Detection.prototype.getTrackId=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.Detection.prototype.getDetectionId=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(m){return n.Message.setRepeatedWrapperField(this,8,m)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(m,s){return n.Message.addToRepeatedWrapperField(this,8,m,proto.mediapipe.Detection.AssociatedDetection,s)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return n.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(m){return n.Message.setField(this,9,m||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(m,s){return n.Message.addToRepeatedField(this,9,m,s)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(m){return n.Message.setField(this,10,m)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return n.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.DetectionList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(m){return proto.mediapipe.DetectionList.toObject(m,this)},proto.mediapipe.DetectionList.toObject=function(m,s){var E={detectionList:n.Message.toObjectList(s.getDetectionList(),proto.mediapipe.Detection.toObject,m)};return m&&(E.$jspbMessageInstance=s),E}),proto.mediapipe.DetectionList.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(E,s)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var E=new proto.mediapipe.Detection;s.readMessage(E,proto.mediapipe.Detection.deserializeBinaryFromReader),m.addDetection(E)}else s.skipField();return m},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(m,s){var E;(E=m.getDetectionList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.DetectionList.prototype.addDetection=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.Detection,s)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},y.object.extend(u,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,S),y.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,S),proto.mediapipe.InferenceCalculatorOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.InferenceCalculatorOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(s){n.Message.initialize(this,s,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},y.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(s,E){var H,te={modelPath:(H=n.Message.getField(E,1))==null?void 0:H,useGpu:n.Message.getBooleanFieldWithDefault(E,2,!1),useNnapi:n.Message.getBooleanFieldWithDefault(E,3,!1),cpuNumThread:n.Message.getFieldWithDefault(E,4,-1),delegate:(H=E.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(s,H)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=E.readString();s.setModelPath(H);break;case 2:H=E.readBool(),s.setUseGpu(H);break;case 3:H=E.readBool(),s.setUseNnapi(H);break;case 4:H=E.readInt32(),s.setCpuNumThread(H);break;case 5:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),s.setDelegate(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(s,E){var H=void 0;(H=n.Message.getField(s,1))!=null&&E.writeString(1,H),(H=n.Message.getField(s,2))!=null&&E.writeBool(2,H),(H=n.Message.getField(s,3))!=null&&E.writeBool(3,H),(H=n.Message.getField(s,4))!=null&&E.writeInt32(4,H),(H=s.getDelegate())!=null&&E.writeMessage(5,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(s,E){var H,te={tflite:(H=E.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(s,H),gpu:(H=E.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(s,H),nnapi:(H=E.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(s,H),xnnpack:(H=E.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(s,H)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),s.setTflite(H);break;case 2:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),s.setGpu(H);break;case 3:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),s.setNnapi(H);break;case 4:H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,E.readMessage(H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),s.setXnnpack(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(s,E){var H=void 0;(H=s.getTflite())!=null&&E.writeMessage(1,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(H=s.getGpu())!=null&&E.writeMessage(2,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(H=s.getNnapi())!=null&&E.writeMessage(3,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),(H=s.getXnnpack())!=null&&E.writeMessage(4,H,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(s,E){var H={};return s&&(H.$jspbMessageInstance=E),H}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)E.getFieldNumber(),E.skipField();return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(s,E){},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(s,E){var H,te={useAdvancedGpuApi:n.Message.getBooleanFieldWithDefault(E,1,!1),api:n.Message.getFieldWithDefault(E,4,0),allowPrecisionLoss:n.Message.getBooleanFieldWithDefault(E,3,!0),cachedKernelPath:(H=n.Message.getField(E,2))==null?void 0:H,serializedModelDir:(H=n.Message.getField(E,7))==null?void 0:H,modelToken:(H=n.Message.getField(E,8))==null?void 0:H,usage:n.Message.getFieldWithDefault(E,5,2)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=E.readBool();s.setUseAdvancedGpuApi(H);break;case 4:H=E.readEnum(),s.setApi(H);break;case 3:H=E.readBool(),s.setAllowPrecisionLoss(H);break;case 2:H=E.readString(),s.setCachedKernelPath(H);break;case 7:H=E.readString(),s.setSerializedModelDir(H);break;case 8:H=E.readString(),s.setModelToken(H);break;case 5:H=E.readEnum(),s.setUsage(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(s,E){var H=void 0;(H=n.Message.getField(s,1))!=null&&E.writeBool(1,H),(H=n.Message.getField(s,4))!=null&&E.writeEnum(4,H),(H=n.Message.getField(s,3))!=null&&E.writeBool(3,H),(H=n.Message.getField(s,2))!=null&&E.writeString(2,H),(H=n.Message.getField(s,7))!=null&&E.writeString(7,H),(H=n.Message.getField(s,8))!=null&&E.writeString(8,H),(H=n.Message.getField(s,5))!=null&&E.writeEnum(5,H)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(s){return n.Message.setField(this,4,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return n.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(s){return n.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return n.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(s){return n.Message.setField(this,7,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(s){return n.Message.setField(this,8,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return n.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(s){return n.Message.setField(this,5,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(s,E){var H,te={cacheDir:(H=n.Message.getField(E,1))==null?void 0:H,modelToken:(H=n.Message.getField(E,2))==null?void 0:H,acceleratorName:(H=n.Message.getField(E,3))==null?void 0:H};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=E.readString();s.setCacheDir(H);break;case 2:H=E.readString(),s.setModelToken(H);break;case 3:H=E.readString(),s.setAcceleratorName(H);break;default:E.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(s,E){var H=void 0;(H=n.Message.getField(s,1))!=null&&E.writeString(1,H),(H=n.Message.getField(s,2))!=null&&E.writeString(2,H),(H=n.Message.getField(s,3))!=null&&E.writeString(3,H)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(s){return n.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(s,E){var H={numThreads:n.Message.getFieldWithDefault(E,1,-1)};return s&&(H.$jspbMessageInstance=E),H}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(H,E)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var H=E.readInt32();s.setNumThreads(H)}else E.skipField();return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(s,E){var H;(H=n.Message.getField(s,1))!=null&&E.writeInt32(1,H)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(s){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(s){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(s){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(s){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(s){return n.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(s){return n.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return n.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(s){return n.Message.setField(this,4,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(s){return n.Message.setWrapperField(this,5,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,y.object.extend(u,proto.mediapipe)})(inference_calculator_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=inference_calculator_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,S),y.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,S),proto.mediapipe.tasks.core.proto.Acceleration=function(m){n.Message.initialize(this,m,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},y.inherits(proto.mediapipe.tasks.core.proto.Acceleration,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(m){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(m,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(m,s){var E,H={xnnpack:(E=s.getXnnpack())&&d.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(m,E),gpu:(E=s.getGpu())&&d.InferenceCalculatorOptions.Delegate.Gpu.toObject(m,E),tflite:(E=s.getTflite())&&d.InferenceCalculatorOptions.Delegate.TfLite.toObject(m,E),nnapi:(E=s.getNnapi())&&d.InferenceCalculatorOptions.Delegate.Nnapi.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(E,s)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new d.InferenceCalculatorOptions.Delegate.Xnnpack;s.readMessage(E,d.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),m.setXnnpack(E);break;case 2:E=new d.InferenceCalculatorOptions.Delegate.Gpu,s.readMessage(E,d.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),m.setGpu(E);break;case 4:E=new d.InferenceCalculatorOptions.Delegate.TfLite,s.readMessage(E,d.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),m.setTflite(E);break;case 5:E=new d.InferenceCalculatorOptions.Delegate.Nnapi,s.readMessage(E,d.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),m.setNnapi(E);break;default:s.skipField()}return m},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getXnnpack())!=null&&s.writeMessage(1,E,d.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),(E=m.getGpu())!=null&&s.writeMessage(2,E,d.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(E=m.getTflite())!=null&&s.writeMessage(4,E,d.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(E=m.getNnapi())!=null&&s.writeMessage(5,E,d.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(m){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(m){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(m){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(m){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],m)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return n.Message.getField(this,5)!=null},y.object.extend(u,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,S),y.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,S),y.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,S),proto.mediapipe.tasks.core.proto.ExternalFile=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(d,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(d,m){var s,E={fileContent:m.getFileContent_asB64(),fileName:(s=n.Message.getField(m,2))==null?void 0:s,fileDescriptorMeta:(s=m.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,s),filePointerMeta:(s=m.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,s)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readBytes();d.setFileContent(s);break;case 2:s=m.readString(),d.setFileName(s);break;case 3:s=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,m.readMessage(s,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),d.setFileDescriptorMeta(s);break;case 4:s=new proto.mediapipe.tasks.core.proto.FilePointerMeta,m.readMessage(s,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),d.setFilePointerMeta(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeBytes(1,s),(s=n.Message.getField(d,2))!=null&&m.writeString(2,s),(s=d.getFileDescriptorMeta())!=null&&m.writeMessage(3,s,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),(s=d.getFilePointerMeta())!=null&&m.writeMessage(4,s,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return n.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return n.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(d,m){var s,E={fd:(s=n.Message.getField(m,1))==null?void 0:s,length:(s=n.Message.getField(m,2))==null?void 0:s,offset:(s=n.Message.getField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setFd(s);break;case 2:s=m.readInt64(),d.setLength(s);break;case 3:s=m.readInt64(),d.setOffset(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt64(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt64(3,s)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(d,m){var s,E={pointer:(s=n.Message.getField(m,1))==null?void 0:s,length:(s=n.Message.getField(m,2))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readUint64();d.setPointer(s);break;case 2:s=m.readInt64(),d.setLength(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeUint64(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt64(2,s)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},y.object.extend(u,proto.mediapipe.tasks.core.proto)})(external_file_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=acceleration_pb;y.object.extend(proto,d);var m=external_file_pb;y.object.extend(proto,m),y.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,S),proto.mediapipe.tasks.core.proto.BaseOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(s,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(s,E){var H,te={modelAsset:(H=E.getModelAsset())&&m.ExternalFile.toObject(s,H),useStreamMode:n.Message.getBooleanFieldWithDefault(E,2,!1),acceleration:(H=E.getAcceleration())&&d.Acceleration.toObject(s,H)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=new m.ExternalFile;E.readMessage(H,m.ExternalFile.deserializeBinaryFromReader),s.setModelAsset(H);break;case 2:H=E.readBool(),s.setUseStreamMode(H);break;case 3:H=new d.Acceleration,E.readMessage(H,d.Acceleration.deserializeBinaryFromReader),s.setAcceleration(H);break;default:E.skipField()}return s},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(s,E){var H=void 0;(H=s.getModelAsset())!=null&&E.writeMessage(1,H,m.ExternalFile.serializeBinaryToWriter),(H=n.Message.getField(s,2))!=null&&E.writeBool(2,H),(H=s.getAcceleration())!=null&&E.writeMessage(3,H,d.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return n.Message.getWrapperField(this,m.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(s){return n.Message.setField(this,2,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return n.Message.getWrapperField(this,d.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(s){return n.Message.setWrapperField(this,3,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return n.Message.getField(this,3)!=null},y.object.extend(u,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,S),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(H,3,.5),numFaces:(te=n.Message.getField(H,4))==null?void 0:te};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te);break;case 2:te=H.readFloat(),E.setMinDetectionConfidence(te);break;case 3:te=H.readFloat(),E.setMinSuppressionThreshold(te);break;case 4:te=H.readInt32(),E.setNumFaces(te);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter),(te=n.Message.getField(E,2))!=null&&H.writeFloat(2,te),(te=n.Message.getField(E,3))!=null&&H.writeFloat(3,te),(te=n.Message.getField(E,4))!=null&&H.writeInt32(4,te)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_detector.proto)})(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;const DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(u){var n,y,S,d,m,s,E,H,te,ce,J,pe,de;const bt=u.getScoreList(),nt=u.getLabelIdList(),He=u.getLabelList(),ot=u.getDisplayNameList(),gt={categories:[],keypoints:[]};for(let vt=0;vt<bt.length;vt++)gt.categories.push({score:bt[vt],index:(n=nt[vt])!==null&&n!==void 0?n:DEFAULT_CATEGORY_INDEX,categoryName:(y=He[vt])!==null&&y!==void 0?y:"",displayName:(S=ot[vt])!==null&&S!==void 0?S:""});const St=(d=u.getLocationData())===null||d===void 0?void 0:d.getBoundingBox();if(St&&(gt.boundingBox={originX:(m=St.getXmin())!==null&&m!==void 0?m:0,originY:(s=St.getYmin())!==null&&s!==void 0?s:0,width:(E=St.getWidth())!==null&&E!==void 0?E:0,height:(H=St.getHeight())!==null&&H!==void 0?H:0}),(te=u.getLocationData())===null||te===void 0?void 0:te.getRelativeKeypointsList().length)for(const vt of u.getLocationData().getRelativeKeypointsList())gt.keypoints.push({x:(ce=vt.getX())!==null&&ce!==void 0?ce:0,y:(J=vt.getY())!==null&&J!==void 0?J:0,score:(pe=vt.getScore())!==null&&pe!==void 0?pe:0,label:(de=vt.getKeypointLabel())!==null&&de!==void 0?de:""});return gt}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.NormalizedRect",null,S),y.exportSymbol("proto.mediapipe.Rect",null,S),proto.mediapipe.Rect=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.Rect,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.NormalizedRect,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(d){return proto.mediapipe.Rect.toObject(d,this)},proto.mediapipe.Rect.toObject=function(d,m){var s,E={xCenter:(s=n.Message.getField(m,1))==null?void 0:s,yCenter:(s=n.Message.getField(m,2))==null?void 0:s,height:(s=n.Message.getField(m,3))==null?void 0:s,width:(s=n.Message.getField(m,4))==null?void 0:s,rotation:n.Message.getFloatingPointFieldWithDefault(m,5,0),rectId:(s=n.Message.getField(m,6))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Rect.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(s,m)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setXCenter(s);break;case 2:s=m.readInt32(),d.setYCenter(s);break;case 3:s=m.readInt32(),d.setHeight(s);break;case 4:s=m.readInt32(),d.setWidth(s);break;case 5:s=m.readFloat(),d.setRotation(s);break;case 6:s=m.readInt64(),d.setRectId(s);break;default:m.skipField()}return d},proto.mediapipe.Rect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s),(s=n.Message.getField(d,4))!=null&&m.writeInt32(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s),(s=n.Message.getField(d,6))!=null&&m.writeInt64(6,s)},proto.mediapipe.Rect.prototype.getXCenter=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rect.prototype.getYCenter=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rect.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rect.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Rect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Rect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Rect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Rect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.Rect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(d){return proto.mediapipe.NormalizedRect.toObject(d,this)},proto.mediapipe.NormalizedRect.toObject=function(d,m){var s,E={xCenter:(s=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:s,yCenter:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,height:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,width:(s=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:s,rotation:n.Message.getFloatingPointFieldWithDefault(m,5,0),rectId:(s=n.Message.getField(m,6))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.NormalizedRect.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readFloat();d.setXCenter(s);break;case 2:s=m.readFloat(),d.setYCenter(s);break;case 3:s=m.readFloat(),d.setHeight(s);break;case 4:s=m.readFloat(),d.setWidth(s);break;case 5:s=m.readFloat(),d.setRotation(s);break;case 6:s=m.readInt64(),d.setRectId(s);break;default:m.skipField()}return d},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeFloat(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeFloat(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s),(s=n.Message.getField(d,6))!=null&&m.writeInt64(6,s)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},y.object.extend(u,proto.mediapipe)})(rect_pb);var task_runner={},graph_runner={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createGraphRunner=u.createMediaPipeLib=u.GraphRunner=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;const n=platform_utils;u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class y{constructor(s,E){this.autoResizeCanvas=!0,this.wasmModule=s,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport=typeof this.wasmModule._addIntToInputStream=="function",E!==void 0?this.wasmModule.canvas=E:typeof OffscreenCanvas=="undefined"||(0,n.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}initializeGraph(s){return rs(this,null,function*(){const E=yield fetch(s),H=yield E.arrayBuffer(),te=!(s.endsWith(".pbtxt")||s.endsWith(".textproto"));this.setGraph(new Uint8Array(H),te)})}setGraphFromString(s){this.setGraph(new TextEncoder().encode(s),!1)}setGraph(s,E){const H=s.length,te=this.wasmModule._malloc(H);this.wasmModule.HEAPU8.set(s,te),E?this.wasmModule._changeBinaryGraph(H,te):this.wasmModule._changeTextGraph(H,te),this.wasmModule._free(te)}configureAudio(s,E,H,te,ce){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),te=te||"input_audio",this.wrapStringPtr(te,J=>{ce=ce||"audio_header",this.wrapStringPtr(ce,pe=>{this.wasmModule._configureAudio(J,pe,s,E,H)})})}setAutoResizeCanvas(s){this.autoResizeCanvas=s}setAutoRenderToScreen(s){this.wasmModule._setAutoRenderToScreen(s)}bindTextureToStream(s,E){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");E?this.wasmModule._bindTextureToStream(E):console.assert(this.wasmModule._bindTextureToCanvas());const H=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!H)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let te,ce;return H.texImage2D(H.TEXTURE_2D,0,H.RGBA,H.RGBA,H.UNSIGNED_BYTE,s),s.videoWidth?(te=s.videoWidth,ce=s.videoHeight):s.naturalWidth?(te=s.naturalWidth,ce=s.naturalHeight):(te=s.width,ce=s.height),!this.autoResizeCanvas||te===this.wasmModule.canvas.width&&ce===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=te,this.wasmModule.canvas.height=ce),[te,ce]}processGl(s,E){const[H,te]=this.bindTextureToStream(s),ce=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[ce/4]=H,this.wasmModule.HEAPU32[ce/4+1]=te,this.wasmModule.HEAPF64[ce/8+1]=E,this.wasmModule._processGl(ce),this.wasmModule._free(ce)}wrapStringPtr(s,E){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const H=this.wasmModule.stringToNewUTF8(s);E(H),this.wasmModule._free(H)}wrapStringPtrPtr(s,E){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const H=new Uint32Array(s.length);for(let ce=0;ce<s.length;ce++)H[ce]=this.wasmModule.stringToNewUTF8(s[ce]);const te=this.wasmModule._malloc(4*H.length);this.wasmModule.HEAPU32.set(H,te>>2),E(te);for(const ce of H)this.wasmModule._free(ce);this.wasmModule._free(te)}getCalculatorGraphConfig(s,E){const H=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(H,te=>{s(te)}),this.wrapStringPtr(H,te=>{this.wasmModule._getGraphConfig(te,E)}),delete this.wasmModule.simpleListeners[H]}setListener(s,E){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[s]=E}setVectorListener(s,E){let H=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[s]=(te,ce,J)=>{ce?(E(H,J),H=[]):H.push(te)}}attachErrorListener(s){this.wasmModule.errorListener=s}attachEmptyPacketListener(s,E){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[s]=E}addAudioToStream(s,E,H){this.addAudioToStreamWithShape(s,0,0,E,H)}addAudioToStreamWithShape(s,E,H,te,ce){const J=4*s.length;this.audioSize!==J&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(J),this.audioSize=J),this.wasmModule.HEAPF32.set(s,this.audioPtr/4),this.wrapStringPtr(te,pe=>{this.wasmModule._addAudioToInputStream(this.audioPtr,E,H,pe,ce)})}addGpuBufferToStream(s,E,H){this.wrapStringPtr(E,te=>{const[ce,J]=this.bindTextureToStream(s,te);this.wasmModule._addBoundTextureToStream(te,ce,J,H)})}addBoolToStream(s,E,H){this.wrapStringPtr(E,te=>{this.wasmModule._addBoolToInputStream(s,te,H)})}addDoubleToStream(s,E,H){this.wrapStringPtr(E,te=>{this.wasmModule._addDoubleToInputStream(s,te,H)})}addFloatToStream(s,E,H){this.wrapStringPtr(E,te=>{this.wasmModule._addFloatToInputStream(s,te,H)})}addIntToStream(s,E,H){this.wrapStringPtr(E,te=>{this.wasmModule._addIntToInputStream(s,te,H)})}addStringToStream(s,E,H){this.wrapStringPtr(E,te=>{this.wrapStringPtr(s,ce=>{this.wasmModule._addStringToInputStream(ce,te,H)})})}addStringRecordToStream(s,E,H){this.wrapStringPtr(E,te=>{this.wrapStringPtrPtr(Object.keys(s),ce=>{this.wrapStringPtrPtr(Object.values(s),J=>{this.wasmModule._addFlatHashMapToInputStream(ce,J,Object.keys(s).length,te,H)})})})}addProtoToStream(s,E,H,te){this.wrapStringPtr(H,ce=>{this.wrapStringPtr(E,J=>{const pe=this.wasmModule._malloc(s.length);this.wasmModule.HEAPU8.set(s,pe),this.wasmModule._addProtoToInputStream(pe,s.length,J,ce,te),this.wasmModule._free(pe)})})}addEmptyPacketToStream(s,E){this.wrapStringPtr(s,H=>{this.wasmModule._addEmptyPacketToInputStream(H,E)})}addBoolToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addBoolToInputSidePacket(s,H)})}addDoubleToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addDoubleToInputSidePacket(s,H)})}addFloatToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addFloatToInputSidePacket(s,H)})}addIntToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wasmModule._addIntToInputSidePacket(s,H)})}addStringToInputSidePacket(s,E){this.wrapStringPtr(E,H=>{this.wrapStringPtr(s,te=>{this.wasmModule._addStringToInputSidePacket(te,H)})})}addProtoToInputSidePacket(s,E,H){this.wrapStringPtr(H,te=>{this.wrapStringPtr(E,ce=>{const J=this.wasmModule._malloc(s.length);this.wasmModule.HEAPU8.set(s,J),this.wasmModule._addProtoToInputSidePacket(J,s.length,ce,te),this.wasmModule._free(J)})})}attachBoolListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachBoolListener(H)})}attachBoolVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachBoolVectorListener(H)})}attachIntListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachIntListener(H)})}attachIntVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachIntVectorListener(H)})}attachDoubleListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachDoubleListener(H)})}attachDoubleVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachDoubleVectorListener(H)})}attachFloatListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachFloatListener(H)})}attachFloatVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachFloatVectorListener(H)})}attachStringListener(s,E){this.setListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachStringListener(H)})}attachStringVectorListener(s,E){this.setVectorListener(s,E),this.wrapStringPtr(s,H=>{this.wasmModule._attachStringVectorListener(H)})}attachProtoListener(s,E,H){this.setListener(s,E),this.wrapStringPtr(s,te=>{this.wasmModule._attachProtoListener(te,H||!1)})}attachProtoVectorListener(s,E,H){this.setVectorListener(s,E),this.wrapStringPtr(s,te=>{this.wasmModule._attachProtoVectorListener(te,H||!1)})}attachAudioListener(s,E,H){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(s,(te,ce)=>{const J=new Float32Array(te.buffer,te.byteOffset,te.length/4);E(J,ce)}),this.wrapStringPtr(s,te=>{this.wasmModule._attachAudioListener(te,H||!1)})}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}function S(m){return rs(this,null,function*(){if(typeof importScripts!="function"){const s=document.createElement("script");return s.setAttribute("src",m),s.setAttribute("crossorigin","anonymous"),new Promise(E=>{s.addEventListener("load",()=>{E()},!1),s.addEventListener("error",()=>{E()},!1),document.body.appendChild(s)})}importScripts(m.toString())})}function d(m,s,E,H,te){return rs(this,null,function*(){const ce=[];if(s&&ce.push(s),E&&ce.push(E),ce.length&&(yield Promise.all(ce.map(S))),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&te){const pe=self.Module;pe.locateFile=te.locateFile,te.mainScriptUrlOrBlob&&(pe.mainScriptUrlOrBlob=te.mainScriptUrlOrBlob)}const J=yield self.ModuleFactory(self.Module||te);return self.ModuleFactory=self.Module=void 0,new m(J,H)})}u.GraphRunner=y,u.createMediaPipeLib=d,u.createGraphRunner=function(m,s,E,H){return rs(this,null,function*(){return d(y,m,s,E,H)})}})(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(u){return class extends u{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;const inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,NO_ASSETS=void 0,FREE_MEMORY_STREAM="free_memory",UNUSED_STREAM_SUFFIX="_unused_out",CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner);class CachedGraphRunner extends CachedGraphRunnerType{}function createTaskRunner(u,n,y,S){return rs(this,null,function*(){const d={locateFile:()=>y.wasmBinaryPath.toString()},m=yield(0,graph_runner_1$1.createMediaPipeLib)(u,y.wasmLoaderPath,NO_ASSETS,n,d);return yield m.setOptions(S),m})}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;class TaskRunner{static createInstance(n,y,S,d){return rs(this,null,function*(){return createTaskRunner(n,y,S,d)})}constructor(n){this.graphRunner=n,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(n){var y,S,d,m,s,E;const H=n.baseOptions||{};if(!((y=n.baseOptions)===null||y===void 0)&&y.modelAssetBuffer&&(!((S=n.baseOptions)===null||S===void 0)&&S.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(!((d=this.baseOptions.getModelAsset())===null||d===void 0)&&d.hasFileContent()||!((m=this.baseOptions.getModelAsset())===null||m===void 0)&&m.hasFileName()||!((s=n.baseOptions)===null||s===void 0)&&s.modelAssetBuffer||!((E=n.baseOptions)===null||E===void 0)&&E.modelAssetPath))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(H),H.modelAssetPath?fetch(H.modelAssetPath.toString()).then(te=>{if(te.ok)return te.arrayBuffer();throw new Error(`Failed to fetch model: ${H.modelAssetPath} (${te.status})`)}).then(te=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch(ce){}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array(te),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()}):(this.setExternalFile(H.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}onGraphRefreshed(){}getCalculatorGraphConfig(){let n;if(this.graphRunner.getCalculatorGraphConfig(y=>{n=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(y)}),!n)throw new Error("Failed to retrieve CalculatorGraphConfig");return n}setGraph(n,y){this.graphRunner.attachErrorListener((S,d)=>{this.processingErrors.push(new Error(d))}),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(n,y),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(n){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,n)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{const n=this.processingErrors.length;if(n===1)throw new Error(this.processingErrors[0].message);if(n>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map(y=>y.message).join(", "))}finally{this.processingErrors=[]}}setExternalFile(n){const y=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;typeof n=="string"?(y.setFileName(n),y.clearFileContent()):n instanceof Uint8Array&&(y.setFileContent(n),y.clearFileName()),this.baseOptions.setModelAsset(y)}setAcceleration(n){let y=this.baseOptions.getAcceleration();y||(y=new acceleration_pb_1.Acceleration,y.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in n&&(n.delegate==="GPU"?y.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):y.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(y)}addKeepaliveNode(n){this.keepaliveNode=new calculator_pb_1.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(FREE_MEMORY_STREAM),this.keepaliveNode.addOutputStream(FREE_MEMORY_STREAM+UNUSED_STREAM_SUFFIX),n.addInputStream(FREE_MEMORY_STREAM),n.addNode(this.keepaliveNode)}keepStreamAlive(n){this.keepaliveNode.addInputStream(n),this.keepaliveNode.addOutputStream(n+UNUSED_STREAM_SUFFIX)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,FREE_MEMORY_STREAM,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}}task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(u){return class extends u{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(n,y,S){this.wrapStringPtr(y,d=>{const[m,s]=this.bindTextureToStream(n,d);this.wasmImageModule._addBoundTextureAsImageToStream(d,m,s,S)})}attachImageListener(n,y){this.setListener(n,y),this.wrapStringPtr(n,S=>{this.wasmImageModule._attachImageListener(S)})}attachImageVectorListener(n,y){this.setVectorListener(n,y),this.wrapStringPtr(n,S=>{this.wasmImageModule._attachImageVectorListener(S)})}}}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;const rect_pb_1=rect_pb,task_runner_1=task_runner,image_1$1=image,image_shader_context_1=image_shader_context,mask_1$1=mask,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner));class VisionGraphRunner extends GraphRunnerVisionType{}function createCanvas(){return typeof OffscreenCanvas!="undefined"&&!(0,platform_utils_1.isWebKit)()?void 0:document.createElement("canvas")}vision_task_runner.VisionGraphRunner=VisionGraphRunner;class VisionTaskRunner extends task_runner_1.TaskRunner{static createVisionInstance(n,y,S){return rs(this,null,function*(){var d;const m=(d=S.canvas)!==null&&d!==void 0?d:createCanvas();return task_runner_1.TaskRunner.createInstance(n,m,y,S)})}constructor(n,y,S,d){super(n),this.graphRunner=n,this.imageStreamName=y,this.normRectStreamName=S,this.roiAllowed=d,this.shaderContext=new image_shader_context_1.MPImageShaderContext}applyOptions(n){if("runningMode"in n){const y=!!n.runningMode&&n.runningMode!=="IMAGE";this.baseOptions.setUseStreamMode(y)}if(n.canvas!==void 0&&this.graphRunner.wasmModule.canvas!==n.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(n)}processImageData(n,y){var S;if(!((S=this.baseOptions)===null||S===void 0)&&S.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(n,y,this.getSynctheticTimestamp())}processVideoData(n,y,S){var d;if(!(!((d=this.baseOptions)===null||d===void 0)&&d.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(n,y,S)}getImageSourceSize(n){return n.videoWidth!==void 0?[n.videoWidth,n.videoHeight]:n.naturalWidth!==void 0?[n.naturalWidth,n.naturalHeight]:[n.width,n.height]}convertToNormalizedRect(n,y){const S=new rect_pb_1.NormalizedRect;if(y!=null&&y.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");const d=y.regionOfInterest;if(d.left>=d.right||d.top>=d.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(d.left<0||d.top<0||d.right>1||d.bottom>1)throw new Error("Expected RectF values to be in [0,1].");S.setXCenter((d.left+d.right)/2),S.setYCenter((d.top+d.bottom)/2),S.setWidth(d.right-d.left),S.setHeight(d.bottom-d.top)}else S.setXCenter(.5),S.setYCenter(.5),S.setWidth(1),S.setHeight(1);if(y!=null&&y.rotationDegrees){if((y==null?void 0:y.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90\xB0.");if(S.setRotation(-Math.PI*y.rotationDegrees/180),(y==null?void 0:y.rotationDegrees)%180!=0){const[d,m]=this.getImageSourceSize(n),s=S.getHeight()*m/d,E=S.getWidth()*d/m;S.setWidth(s),S.setHeight(E)}}return S}process(n,y,S){const d=this.convertToNormalizedRect(n,y);this.graphRunner.addProtoToStream(d.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,S),this.graphRunner.addGpuBufferAsImageToStream(n,this.imageStreamName,S!=null?S:performance.now()),this.finishProcessing()}convertToMPImage(n,y){const{data:S,width:d,height:m}=n,s=d*m;let E;if(S instanceof Uint8Array)if(S.length===3*s){const te=new Uint8ClampedArray(4*s);for(let ce=0;ce<s;++ce)te[4*ce]=S[3*ce],te[4*ce+1]=S[3*ce+1],te[4*ce+2]=S[3*ce+2],te[4*ce+3]=255;E=new ImageData(te,d,m)}else{if(S.length!==4*s)throw new Error("Unsupported channel count: "+S.length/s);E=new ImageData(new Uint8ClampedArray(S.buffer,S.byteOffset,S.length),d,m)}else{if(!(S instanceof WebGLTexture))throw new Error(`Unsupported format: ${S.constructor.name}`);E=S}const H=new image_1$1.MPImage([E],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,m);return y?H.clone():H}convertToMPMask(n,y){const{data:S,width:d,height:m}=n,s=d*m;let E;if(S instanceof Uint8Array||S instanceof Float32Array){if(S.length!==s)throw new Error("Unsupported channel count: "+S.length/s);E=S}else E=S;const H=new mask_1$1.MPMask([E],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,m);return y?H.clone():H}close(){this.shaderContext.close(),super.close()}}vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(bt,nt,He,ot){ot===void 0&&(ot=He);var gt=Object.getOwnPropertyDescriptor(nt,He);gt&&!("get"in gt?!nt.__esModule:gt.writable||gt.configurable)||(gt={enumerable:!0,get:function(){return nt[He]}}),Object.defineProperty(bt,ot,gt)}:function(bt,nt,He,ot){ot===void 0&&(ot=He),bt[ot]=nt[He]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(bt,nt){for(var He in bt)He==="default"||Object.prototype.hasOwnProperty.call(nt,He)||n(nt,bt,He)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceDetector=void 0;const S=calculator_pb,d=calculator_options_pb,m=detection_pb,s=base_options_pb,E=face_detector_graph_options_pb,H=detection_result,te=vision_task_runner,ce="image_in",J="norm_rect_in",pe="detections";y(face_detector_options,u),y(face_detector_result,u);class de extends te.VisionTaskRunner{static createFromOptions(nt,He){return te.VisionTaskRunner.createVisionInstance(de,nt,He)}static createFromModelBuffer(nt,He){return te.VisionTaskRunner.createVisionInstance(de,nt,{baseOptions:{modelAssetBuffer:He}})}static createFromModelPath(nt,He){return rs(this,null,function*(){return te.VisionTaskRunner.createVisionInstance(de,nt,{baseOptions:{modelAssetPath:He}})})}constructor(nt,He){super(new te.VisionGraphRunner(nt,He),ce,J,!1),this.result={detections:[]},this.options=new E.FaceDetectorGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(nt){this.options.setBaseOptions(nt)}setOptions(nt){var He,ot;return"minDetectionConfidence"in nt&&this.options.setMinDetectionConfidence((He=nt.minDetectionConfidence)!==null&&He!==void 0?He:.5),"minSuppressionThreshold"in nt&&this.options.setMinSuppressionThreshold((ot=nt.minSuppressionThreshold)!==null&&ot!==void 0?ot:.3),this.applyOptions(nt)}detect(nt,He){return this.result={detections:[]},this.processImageData(nt,He),this.result}detectForVideo(nt,He,ot){return this.result={detections:[]},this.processVideoData(nt,ot,He),this.result}addJsFaceDetections(nt){for(const He of nt){const ot=m.Detection.deserializeBinary(He);this.result.detections.push((0,H.convertFromDetectionProto)(ot))}}refreshGraph(){const nt=new S.CalculatorGraphConfig;nt.addInputStream(ce),nt.addInputStream(J),nt.addOutputStream(pe);const He=new d.CalculatorOptions;He.setExtension(E.FaceDetectorGraphOptions.ext,this.options);const ot=new S.CalculatorGraphConfig.Node;ot.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),ot.addInputStream("IMAGE:"+ce),ot.addInputStream("NORM_RECT:"+J),ot.addOutputStream("DETECTIONS:"+pe),ot.setOptions(He),nt.addNode(ot),this.graphRunner.attachProtoVectorListener(pe,(St,vt)=>{this.addJsFaceDetections(St),this.setLatestOutputTimestamp(vt)}),this.graphRunner.attachEmptyPacketListener(pe,St=>{this.setLatestOutputTimestamp(St)});const gt=nt.serializeBinary();this.setGraph(new Uint8Array(gt),!0)}}u.FaceDetector=de}(face_detector);var face_landmarker={},classification_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.Classification",null,S),y.exportSymbol("proto.mediapipe.ClassificationList",null,S),y.exportSymbol("proto.mediapipe.ClassificationListCollection",null,S),proto.mediapipe.Classification=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.Classification,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},y.inherits(proto.mediapipe.ClassificationList,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},y.inherits(proto.mediapipe.ClassificationListCollection,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(d){return proto.mediapipe.Classification.toObject(d,this)},proto.mediapipe.Classification.toObject=function(d,m){var s,E={index:(s=n.Message.getField(m,1))==null?void 0:s,score:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,label:(s=n.Message.getField(m,3))==null?void 0:s,displayName:(s=n.Message.getField(m,4))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Classification.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(s,m)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setIndex(s);break;case 2:s=m.readFloat(),d.setScore(s);break;case 3:s=m.readString(),d.setLabel(s);break;case 4:s=m.readString(),d.setDisplayName(s);break;default:m.skipField()}return d},proto.mediapipe.Classification.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeString(3,s),(s=n.Message.getField(d,4))!=null&&m.writeString(4,s)},proto.mediapipe.Classification.prototype.getIndex=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Classification.prototype.clearIndex=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Classification.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Classification.prototype.clearScore=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Classification.prototype.getLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Classification.prototype.clearLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Classification.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.ClassificationList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(d){return proto.mediapipe.ClassificationList.toObject(d,this)},proto.mediapipe.ClassificationList.toObject=function(d,m){var s={classificationList:n.Message.toObjectList(m.getClassificationList(),proto.mediapipe.Classification.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.ClassificationList.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(s,m)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.Classification;m.readMessage(s,proto.mediapipe.Classification.deserializeBinaryFromReader),d.addClassification(s)}else m.skipField();return d},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(d,m){var s;(s=d.getClassificationList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationList.prototype.addClassification=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Classification,m)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(d){return proto.mediapipe.ClassificationListCollection.toObject(d,this)},proto.mediapipe.ClassificationListCollection.toObject=function(d,m){var s={classificationListList:n.Message.toObjectList(m.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(s,m)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.ClassificationList;m.readMessage(s,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),d.addClassificationList(s)}else m.skipField();return d},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(d,m){var s;(s=d.getClassificationListList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.ClassificationList,m)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},y.object.extend(u,proto.mediapipe)})(classification_pb);var landmark_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.Landmark",null,S),y.exportSymbol("proto.mediapipe.LandmarkList",null,S),y.exportSymbol("proto.mediapipe.LandmarkListCollection",null,S),y.exportSymbol("proto.mediapipe.NormalizedLandmark",null,S),y.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,S),y.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,S),proto.mediapipe.Landmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.Landmark,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},y.inherits(proto.mediapipe.LandmarkList,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},y.inherits(proto.mediapipe.LandmarkListCollection,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.NormalizedLandmark,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},y.inherits(proto.mediapipe.NormalizedLandmarkList,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},y.inherits(proto.mediapipe.NormalizedLandmarkListCollection,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(d){return proto.mediapipe.Landmark.toObject(d,this)},proto.mediapipe.Landmark.toObject=function(d,m){var s,E={x:(s=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:s,y:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,z:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,visibility:(s=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:s,presence:(s=n.Message.getOptionalFloatingPointField(m,5))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Landmark.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(s,m)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readFloat();d.setX(s);break;case 2:s=m.readFloat(),d.setY(s);break;case 3:s=m.readFloat(),d.setZ(s);break;case 4:s=m.readFloat(),d.setVisibility(s);break;case 5:s=m.readFloat(),d.setPresence(s);break;default:m.skipField()}return d},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeFloat(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeFloat(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s)},proto.mediapipe.Landmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Landmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Landmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Landmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Landmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Landmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Landmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Landmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.LandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(d){return proto.mediapipe.LandmarkList.toObject(d,this)},proto.mediapipe.LandmarkList.toObject=function(d,m){var s={landmarkList:n.Message.toObjectList(m.getLandmarkList(),proto.mediapipe.Landmark.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.LandmarkList.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(s,m)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.Landmark;m.readMessage(s,proto.mediapipe.Landmark.deserializeBinaryFromReader),d.addLandmark(s)}else m.skipField();return d},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Landmark,m)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.LandmarkListCollection.toObject(d,this)},proto.mediapipe.LandmarkListCollection.toObject=function(d,m){var s={landmarkListList:n.Message.toObjectList(m.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(s,m)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.LandmarkList;m.readMessage(s,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),d.addLandmarkList(s)}else m.skipField();return d},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkListList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.LandmarkList,m)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmark.toObject(d,this)},proto.mediapipe.NormalizedLandmark.toObject=function(d,m){var s,E={x:(s=n.Message.getOptionalFloatingPointField(m,1))==null?void 0:s,y:(s=n.Message.getOptionalFloatingPointField(m,2))==null?void 0:s,z:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,visibility:(s=n.Message.getOptionalFloatingPointField(m,4))==null?void 0:s,presence:(s=n.Message.getOptionalFloatingPointField(m,5))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readFloat();d.setX(s);break;case 2:s=m.readFloat(),d.setY(s);break;case 3:s=m.readFloat(),d.setZ(s);break;case 4:s=m.readFloat(),d.setVisibility(s);break;case 5:s=m.readFloat(),d.setPresence(s);break;default:m.skipField()}return d},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeFloat(1,s),(s=n.Message.getField(d,2))!=null&&m.writeFloat(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeFloat(4,s),(s=n.Message.getField(d,5))!=null&&m.writeFloat(5,s)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkList.toObject(d,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(d,m){var s={landmarkList:n.Message.toObjectList(m.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.NormalizedLandmark;m.readMessage(s,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),d.addLandmark(s)}else m.skipField();return d},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmark,m)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(d,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(d,m){var s={landmarkListList:n.Message.toObjectList(m.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,d)};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(s,m)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=new proto.mediapipe.NormalizedLandmarkList;m.readMessage(s,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),d.addLandmarkList(s)}else m.skipField();return d},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(d,m){var s;(s=d.getLandmarkListList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmarkList,m)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},y.object.extend(u,proto.mediapipe)})(landmark_pb);var face_geometry_pb={},matrix_data_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.MatrixData",null,S),y.exportSymbol("proto.mediapipe.MatrixData.Layout",null,S),proto.mediapipe.MatrixData=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},y.inherits(proto.mediapipe.MatrixData,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(d){return proto.mediapipe.MatrixData.toObject(d,this)},proto.mediapipe.MatrixData.toObject=function(d,m){var s,E={rows:(s=n.Message.getField(m,1))==null?void 0:s,cols:(s=n.Message.getField(m,2))==null?void 0:s,packedDataList:(s=n.Message.getRepeatedFloatingPointField(m,3))==null?void 0:s,layout:n.Message.getFieldWithDefault(m,4,0)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.MatrixData.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(s,m)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setRows(s);break;case 2:s=m.readInt32(),d.setCols(s);break;case 3:for(var E=m.isDelimited()?m.readPackedFloat():[m.readFloat()],H=0;H<E.length;H++)d.addPackedData(E[H]);break;case 4:s=m.readEnum(),d.setLayout(s);break;default:m.skipField()}return d},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=d.getPackedDataList()).length>0&&m.writePackedFloat(3,s),(s=n.Message.getField(d,4))!=null&&m.writeEnum(4,s)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.MatrixData.prototype.getCols=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return n.Message.getField(this,4)!=null},y.object.extend(u,proto.mediapipe)})(matrix_data_pb);var mesh_3d_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,S),y.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,S),y.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,S),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},y.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(d,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(d,m){var s,E={vertexType:(s=n.Message.getField(m,1))==null?void 0:s,primitiveType:(s=n.Message.getField(m,2))==null?void 0:s,vertexBufferList:(s=n.Message.getRepeatedFloatingPointField(m,3))==null?void 0:s,indexBufferList:(s=n.Message.getRepeatedField(m,4))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readEnum();d.setVertexType(s);break;case 2:s=m.readEnum(),d.setPrimitiveType(s);break;case 3:for(var E=m.isDelimited()?m.readPackedFloat():[m.readFloat()],H=0;H<E.length;H++)d.addVertexBuffer(E[H]);break;case 4:for(E=m.isDelimited()?m.readPackedUint32():[m.readUint32()],H=0;H<E.length;H++)d.addIndexBuffer(E[H]);break;default:m.skipField()}return d},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeEnum(1,s),(s=n.Message.getField(d,2))!=null&&m.writeEnum(2,s),(s=d.getVertexBufferList()).length>0&&m.writeRepeatedFloat(3,s),(s=d.getIndexBufferList()).length>0&&m.writeRepeatedUint32(4,s)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(d,m){return n.Message.addToRepeatedField(this,4,d,m)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},y.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)})(mesh_3d_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=matrix_data_pb;y.object.extend(proto,d);var m=mesh_3d_pb;y.object.extend(proto,m),y.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,S),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(s,E){var H,te={mesh:(H=E.getMesh())&&m.Mesh3d.toObject(s,H),poseTransformMatrix:(H=E.getPoseTransformMatrix())&&d.MatrixData.toObject(s,H)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)switch(E.getFieldNumber()){case 1:var H=new m.Mesh3d;E.readMessage(H,m.Mesh3d.deserializeBinaryFromReader),s.setMesh(H);break;case 2:H=new d.MatrixData,E.readMessage(H,d.MatrixData.deserializeBinaryFromReader),s.setPoseTransformMatrix(H);break;default:E.skipField()}return s},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(s,E){var H=void 0;(H=s.getMesh())!=null&&E.writeMessage(1,H,m.Mesh3d.serializeBinaryToWriter),(H=s.getPoseTransformMatrix())!=null&&E.writeMessage(2,H,d.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return n.Message.getWrapperField(this,m.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return n.Message.getWrapperField(this,d.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(s){return n.Message.setWrapperField(this,2,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return n.Message.getField(this,2)!=null},y.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;y.object.extend(proto,d);var m=external_file_pb;y.object.extend(proto,m),y.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,S),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(s,E){var H,te={metadataFile:(H=E.getMetadataFile())&&m.ExternalFile.toObject(s,H)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var H=new m.ExternalFile;E.readMessage(H,m.ExternalFile.deserializeBinaryFromReader),s.setMetadataFile(H)}else E.skipField();return s},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(s,E){var H;(H=s.getMetadataFile())!=null&&E.writeMessage(1,H,m.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return n.Message.getWrapperField(this,m.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_geometry)})(geometry_pipeline_calculator_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;y.object.extend(proto,d);var m=geometry_pipeline_calculator_pb;y.object.extend(proto,m),y.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,S),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(s){n.Message.initialize(this,s,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(s,E){var H,te={geometryPipelineOptions:(H=E.getGeometryPipelineOptions())&&m.FaceGeometryPipelineCalculatorOptions.toObject(s,H)};return s&&(te.$jspbMessageInstance=E),te}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(s){var E=new n.BinaryReader(s),H=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(H,E)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(s,E){for(;E.nextField()&&!E.isEndGroup();)if(E.getFieldNumber()===1){var H=new m.FaceGeometryPipelineCalculatorOptions;E.readMessage(H,m.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),s.setGeometryPipelineOptions(H)}else E.skipField();return s},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var s=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(s,E){var H;(H=s.getGeometryPipelineOptions())!=null&&E.writeMessage(1,H,m.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return n.Message.getWrapperField(this,m.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(s){return n.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,S),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te)};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)if(H.getFieldNumber()===1){var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te)}else H.skipField();return E},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(E,H){var te;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)})(face_blendshapes_graph_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=face_blendshapes_graph_options_pb;y.object.extend(proto,E),y.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,S),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(H,te){var ce,J={baseOptions:(ce=te.getBaseOptions())&&s.BaseOptions.toObject(H,ce),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(te,2,.5),smoothLandmarks:(ce=n.Message.getBooleanField(te,4))==null?void 0:ce,faceBlendshapesGraphOptions:(ce=te.getFaceBlendshapesGraphOptions())&&E.FaceBlendshapesGraphOptions.toObject(H,ce)};return H&&(J.$jspbMessageInstance=te),J}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(H){var te=new n.BinaryReader(H),ce=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(ce,te)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(H,te){for(;te.nextField()&&!te.isEndGroup();)switch(te.getFieldNumber()){case 1:var ce=new s.BaseOptions;te.readMessage(ce,s.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ce);break;case 2:ce=te.readFloat(),H.setMinDetectionConfidence(ce);break;case 4:ce=te.readBool(),H.setSmoothLandmarks(ce);break;case 3:ce=new E.FaceBlendshapesGraphOptions,te.readMessage(ce,E.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),H.setFaceBlendshapesGraphOptions(ce);break;default:te.skipField()}return H},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(H,te){var ce=void 0;(ce=H.getBaseOptions())!=null&&te.writeMessage(1,ce,s.BaseOptions.serializeBinaryToWriter),(ce=n.Message.getField(H,2))!=null&&te.writeFloat(2,ce),(ce=n.Message.getField(H,4))!=null&&te.writeBool(4,ce),(ce=H.getFaceBlendshapesGraphOptions())!=null&&te.writeMessage(3,ce,E.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(H){return n.Message.setField(this,2,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(H){return n.Message.setField(this,4,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(H){return n.Message.setWrapperField(this,3,H)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=face_detector_graph_options_pb;y.object.extend(proto,E);var H=face_geometry_graph_options_pb;y.object.extend(proto,H);var te=face_landmarks_detector_graph_options_pb;y.object.extend(proto,te),y.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,S),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(ce){n.Message.initialize(this,ce,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(ce){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(ce,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(ce,J){var pe,de={baseOptions:(pe=J.getBaseOptions())&&s.BaseOptions.toObject(ce,pe),faceDetectorGraphOptions:(pe=J.getFaceDetectorGraphOptions())&&E.FaceDetectorGraphOptions.toObject(ce,pe),faceLandmarksDetectorGraphOptions:(pe=J.getFaceLandmarksDetectorGraphOptions())&&te.FaceLandmarksDetectorGraphOptions.toObject(ce,pe),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(J,4,.5),faceGeometryGraphOptions:(pe=J.getFaceGeometryGraphOptions())&&H.FaceGeometryGraphOptions.toObject(ce,pe)};return ce&&(de.$jspbMessageInstance=J),de}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(ce){var J=new n.BinaryReader(ce),pe=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(pe,J)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(ce,J){for(;J.nextField()&&!J.isEndGroup();)switch(J.getFieldNumber()){case 1:var pe=new s.BaseOptions;J.readMessage(pe,s.BaseOptions.deserializeBinaryFromReader),ce.setBaseOptions(pe);break;case 2:pe=new E.FaceDetectorGraphOptions,J.readMessage(pe,E.FaceDetectorGraphOptions.deserializeBinaryFromReader),ce.setFaceDetectorGraphOptions(pe);break;case 3:pe=new te.FaceLandmarksDetectorGraphOptions,J.readMessage(pe,te.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),ce.setFaceLandmarksDetectorGraphOptions(pe);break;case 4:pe=J.readFloat(),ce.setMinTrackingConfidence(pe);break;case 5:pe=new H.FaceGeometryGraphOptions,J.readMessage(pe,H.FaceGeometryGraphOptions.deserializeBinaryFromReader),ce.setFaceGeometryGraphOptions(pe);break;default:J.skipField()}return ce},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var ce=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,ce),ce.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(ce,J){var pe=void 0;(pe=ce.getBaseOptions())!=null&&J.writeMessage(1,pe,s.BaseOptions.serializeBinaryToWriter),(pe=ce.getFaceDetectorGraphOptions())!=null&&J.writeMessage(2,pe,E.FaceDetectorGraphOptions.serializeBinaryToWriter),(pe=ce.getFaceLandmarksDetectorGraphOptions())!=null&&J.writeMessage(3,pe,te.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),(pe=n.Message.getField(ce,4))!=null&&J.writeFloat(4,pe),(pe=ce.getFaceGeometryGraphOptions())!=null&&J.writeMessage(5,pe,H.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(ce){return n.Message.setWrapperField(this,1,ce)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(ce){return n.Message.setWrapperField(this,2,ce)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,te.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(ce){return n.Message.setWrapperField(this,3,ce)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(ce){return n.Message.setField(this,4,ce)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return n.Message.getWrapperField(this,H.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(ce){return n.Message.setWrapperField(this,5,ce)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;const DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(u,n=DEFAULT_INDEX$1,y=""){return{categories:u.map(S=>{var d,m,s,E;return{index:(d=S.getIndex())!==null&&d!==void 0?d:DEFAULT_INDEX$1,score:(m=S.getScore())!==null&&m!==void 0?m:DEFAULT_SCORE,categoryName:(s=S.getLabel())!==null&&s!==void 0?s:"",displayName:(E=S.getDisplayName())!==null&&E!==void 0?E:""}}),headIndex:n,headName:y}}function convertFromClassificationsProto(u){var n,y;return convertFromClassifications((y=(n=u.getClassificationList())===null||n===void 0?void 0:n.getClassificationList())!==null&&y!==void 0?y:[],u.getHeadIndex(),u.getHeadName())}function convertFromClassificationResultProto(u){const n={classifications:u.getClassificationsList().map(y=>convertFromClassificationsProto(y))};return u.hasTimestampMs()&&(n.timestampMs=u.getTimestampMs()),n}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var landmark_result={};function convertToLandmarks(u){var n,y,S;const d=[];for(const m of u.getLandmarkList())d.push({x:(n=m.getX())!==null&&n!==void 0?n:0,y:(y=m.getY())!==null&&y!==void 0?y:0,z:(S=m.getZ())!==null&&S!==void 0?S:0});return d}function convertToWorldLandmarks(u){var n,y,S;const d=[];for(const m of u.getLandmarkList())d.push({x:(n=m.getX())!==null&&n!==void 0?n:0,y:(y=m.getY())!==null&&y!==void 0?y:0,z:(S=m.getZ())!==null&&S!==void 0?S:0});return d}Object.defineProperty(landmark_result,"__esModule",{value:!0}),landmark_result.convertToWorldLandmarks=landmark_result.convertToLandmarks=void 0,landmark_result.convertToLandmarks=convertToLandmarks,landmark_result.convertToWorldLandmarks=convertToWorldLandmarks;var face_landmarks_connections={},exports;exports=face_landmarks_connections,Object.defineProperty(exports,"__esModule",{value:!0}),exports.FACE_LANDMARKS_TESSELATION=exports.FACE_LANDMARKS_CONTOURS=exports.FACE_LANDMARKS_FACE_OVAL=exports.FACE_LANDMARKS_RIGHT_IRIS=exports.FACE_LANDMARKS_RIGHT_EYEBROW=exports.FACE_LANDMARKS_RIGHT_EYE=exports.FACE_LANDMARKS_LEFT_IRIS=exports.FACE_LANDMARKS_LEFT_EYEBROW=exports.FACE_LANDMARKS_LEFT_EYE=exports.FACE_LANDMARKS_LIPS=void 0,exports.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],exports.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],exports.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],exports.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],exports.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],exports.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],exports.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],exports.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],exports.FACE_LANDMARKS_CONTOURS=[...exports.FACE_LANDMARKS_LIPS,...exports.FACE_LANDMARKS_LEFT_EYE,...exports.FACE_LANDMARKS_LEFT_EYEBROW,...exports.FACE_LANDMARKS_RIGHT_EYE,...exports.FACE_LANDMARKS_RIGHT_EYEBROW,...exports.FACE_LANDMARKS_FACE_OVAL],exports.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Pt,Ot,Jt,zt){zt===void 0&&(zt=Jt);var _n=Object.getOwnPropertyDescriptor(Ot,Jt);_n&&!("get"in _n?!Ot.__esModule:_n.writable||_n.configurable)||(_n={enumerable:!0,get:function(){return Ot[Jt]}}),Object.defineProperty(Pt,zt,_n)}:function(Pt,Ot,Jt,zt){zt===void 0&&(zt=Jt),Pt[zt]=Ot[Jt]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(Pt,Ot){for(var Jt in Pt)Jt==="default"||Object.prototype.hasOwnProperty.call(Ot,Jt)||n(Ot,Pt,Jt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceLandmarker=void 0;const S=calculator_pb,d=calculator_options_pb,m=classification_pb,s=landmark_pb,E=base_options_pb,H=face_detector_graph_options_pb,te=face_geometry_pb,ce=face_landmarker_graph_options_pb,J=face_landmarks_detector_graph_options_pb,pe=classifier_result,de=landmark_result,bt=vision_task_runner,nt=face_landmarks_connections;y(face_landmarker_options,u),y(face_landmarker_result,u);const He="image_in",ot="norm_rect",gt="face_landmarks",St="blendshapes",vt="face_geometry",ut=.5;class mt extends bt.VisionTaskRunner{static createFromOptions(Ot,Jt){return bt.VisionTaskRunner.createVisionInstance(mt,Ot,Jt)}static createFromModelBuffer(Ot,Jt){return bt.VisionTaskRunner.createVisionInstance(mt,Ot,{baseOptions:{modelAssetBuffer:Jt}})}static createFromModelPath(Ot,Jt){return bt.VisionTaskRunner.createVisionInstance(mt,Ot,{baseOptions:{modelAssetPath:Jt}})}constructor(Ot,Jt){super(new bt.VisionGraphRunner(Ot,Jt),He,ot,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new ce.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.faceLandmarksDetectorGraphOptions=new J.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new H.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Ot){this.options.setBaseOptions(Ot)}setOptions(Ot){var Jt,zt,_n,Kn;return"numFaces"in Ot&&this.faceDetectorGraphOptions.setNumFaces((Jt=Ot.numFaces)!==null&&Jt!==void 0?Jt:1),"minFaceDetectionConfidence"in Ot&&this.faceDetectorGraphOptions.setMinDetectionConfidence((zt=Ot.minFaceDetectionConfidence)!==null&&zt!==void 0?zt:ut),"minTrackingConfidence"in Ot&&this.options.setMinTrackingConfidence((_n=Ot.minTrackingConfidence)!==null&&_n!==void 0?_n:ut),"minFacePresenceConfidence"in Ot&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence((Kn=Ot.minFacePresenceConfidence)!==null&&Kn!==void 0?Kn:ut),"outputFaceBlendshapes"in Ot&&(this.outputFaceBlendshapes=!!Ot.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in Ot&&(this.outputFacialTransformationMatrixes=!!Ot.outputFacialTransformationMatrixes),this.applyOptions(Ot)}detect(Ot,Jt){return this.resetResults(),this.processImageData(Ot,Jt),this.result}detectForVideo(Ot,Jt,zt){return this.resetResults(),this.processVideoData(Ot,zt,Jt),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(ut),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(ut),this.options.setMinTrackingConfidence(ut)}addJsLandmarks(Ot){for(const Jt of Ot){const zt=s.NormalizedLandmarkList.deserializeBinary(Jt);this.result.faceLandmarks.push((0,de.convertToLandmarks)(zt))}}addBlenshape(Ot){var Jt;if(this.outputFaceBlendshapes)for(const zt of Ot){const _n=m.ClassificationList.deserializeBinary(zt);this.result.faceBlendshapes.push((0,pe.convertFromClassifications)((Jt=_n.getClassificationList())!==null&&Jt!==void 0?Jt:[]))}}addFacialTransformationMatrixes(Ot){var Jt,zt,_n;if(this.outputFacialTransformationMatrixes)for(const Kn of Ot){const Cr=te.FaceGeometry.deserializeBinary(Kn).getPoseTransformMatrix();Cr&&this.result.facialTransformationMatrixes.push({rows:(Jt=Cr.getRows())!==null&&Jt!==void 0?Jt:0,columns:(zt=Cr.getCols())!==null&&zt!==void 0?zt:0,data:(_n=Cr.getPackedDataList())!==null&&_n!==void 0?_n:[]})}}refreshGraph(){const Ot=new S.CalculatorGraphConfig;Ot.addInputStream(He),Ot.addInputStream(ot),Ot.addOutputStream(gt);const Jt=new d.CalculatorOptions;Jt.setExtension(ce.FaceLandmarkerGraphOptions.ext,this.options);const zt=new S.CalculatorGraphConfig.Node;zt.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),zt.addInputStream("IMAGE:"+He),zt.addInputStream("NORM_RECT:"+ot),zt.addOutputStream("NORM_LANDMARKS:"+gt),zt.setOptions(Jt),Ot.addNode(zt),this.graphRunner.attachProtoVectorListener(gt,(Kn,Cr)=>{this.addJsLandmarks(Kn),this.setLatestOutputTimestamp(Cr)}),this.graphRunner.attachEmptyPacketListener(gt,Kn=>{this.setLatestOutputTimestamp(Kn)}),this.outputFaceBlendshapes&&(Ot.addOutputStream(St),zt.addOutputStream("BLENDSHAPES:"+St),this.graphRunner.attachProtoVectorListener(St,(Kn,Cr)=>{this.addBlenshape(Kn),this.setLatestOutputTimestamp(Cr)}),this.graphRunner.attachEmptyPacketListener(St,Kn=>{this.setLatestOutputTimestamp(Kn)})),this.outputFacialTransformationMatrixes&&(Ot.addOutputStream(vt),zt.addOutputStream("FACE_GEOMETRY:"+vt),this.graphRunner.attachProtoVectorListener(vt,(Kn,Cr)=>{this.addFacialTransformationMatrixes(Kn),this.setLatestOutputTimestamp(Cr)}),this.graphRunner.attachEmptyPacketListener(vt,Kn=>{this.setLatestOutputTimestamp(Kn)}));const _n=Ot.serializeBinary();this.setGraph(new Uint8Array(_n),!0)}}u.FaceLandmarker=mt,mt.FACE_LANDMARKS_LIPS=nt.FACE_LANDMARKS_LIPS,mt.FACE_LANDMARKS_LEFT_EYE=nt.FACE_LANDMARKS_LEFT_EYE,mt.FACE_LANDMARKS_LEFT_EYEBROW=nt.FACE_LANDMARKS_LEFT_EYEBROW,mt.FACE_LANDMARKS_LEFT_IRIS=nt.FACE_LANDMARKS_LEFT_IRIS,mt.FACE_LANDMARKS_RIGHT_EYE=nt.FACE_LANDMARKS_RIGHT_EYE,mt.FACE_LANDMARKS_RIGHT_EYEBROW=nt.FACE_LANDMARKS_RIGHT_EYEBROW,mt.FACE_LANDMARKS_RIGHT_IRIS=nt.FACE_LANDMARKS_RIGHT_IRIS,mt.FACE_LANDMARKS_FACE_OVAL=nt.FACE_LANDMARKS_FACE_OVAL,mt.FACE_LANDMARKS_CONTOURS=nt.FACE_LANDMARKS_CONTOURS,mt.FACE_LANDMARKS_TESSELATION=nt.FACE_LANDMARKS_TESSELATION}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=face_landmarker_graph_options_pb;y.object.extend(proto,E),y.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,S),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(H,te){var ce,J={baseOptions:(ce=te.getBaseOptions())&&s.BaseOptions.toObject(H,ce),faceLandmarkerGraphOptions:(ce=te.getFaceLandmarkerGraphOptions())&&E.FaceLandmarkerGraphOptions.toObject(H,ce),faceAlignmentSize:n.Message.getFieldWithDefault(te,3,256)};return H&&(J.$jspbMessageInstance=te),J}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(H){var te=new n.BinaryReader(H),ce=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(ce,te)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(H,te){for(;te.nextField()&&!te.isEndGroup();)switch(te.getFieldNumber()){case 1:var ce=new s.BaseOptions;te.readMessage(ce,s.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ce);break;case 2:ce=new E.FaceLandmarkerGraphOptions,te.readMessage(ce,E.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),H.setFaceLandmarkerGraphOptions(ce);break;case 3:ce=te.readInt32(),H.setFaceAlignmentSize(ce);break;default:te.skipField()}return H},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(H,te){var ce=void 0;(ce=H.getBaseOptions())!=null&&te.writeMessage(1,ce,s.BaseOptions.serializeBinaryToWriter),(ce=H.getFaceLandmarkerGraphOptions())!=null&&te.writeMessage(2,ce,E.FaceLandmarkerGraphOptions.serializeBinaryToWriter),(ce=n.Message.getField(H,3))!=null&&te.writeInt32(3,ce)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,E.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return n.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(H){return n.Message.setField(this,3,H)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.face_stylizer.proto)})(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(pe,de,bt,nt){nt===void 0&&(nt=bt);var He=Object.getOwnPropertyDescriptor(de,bt);He&&!("get"in He?!de.__esModule:He.writable||He.configurable)||(He={enumerable:!0,get:function(){return de[bt]}}),Object.defineProperty(pe,nt,He)}:function(pe,de,bt,nt){nt===void 0&&(nt=bt),pe[nt]=de[bt]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(pe,de){for(var bt in pe)bt==="default"||Object.prototype.hasOwnProperty.call(de,bt)||n(de,pe,bt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceStylizer=void 0;const S=calculator_pb,d=calculator_options_pb,m=base_options_pb,s=face_stylizer_graph_options_pb,E=vision_task_runner;y(face_stylizer_options,u);const H="image_in",te="norm_rect",ce="stylized_image";class J extends E.VisionTaskRunner{static createFromOptions(de,bt){return E.VisionTaskRunner.createVisionInstance(J,de,bt)}static createFromModelBuffer(de,bt){return E.VisionTaskRunner.createVisionInstance(J,de,{baseOptions:{modelAssetBuffer:bt}})}static createFromModelPath(de,bt){return E.VisionTaskRunner.createVisionInstance(J,de,{baseOptions:{modelAssetPath:bt}})}constructor(de,bt){super(new E.VisionGraphRunner(de,bt),H,te,!0),this.options=new s.FaceStylizerGraphOptions,this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(de){this.options.setBaseOptions(de)}setOptions(de){return super.applyOptions(de)}stylize(de,bt,nt){const He=typeof bt!="function"?bt:{};if(this.userCallback=typeof bt=="function"?bt:nt,this.processImageData(de,He!=null?He:{}),!this.userCallback)return this.result}stylizeForVideo(de,bt,nt,He){const ot=typeof nt!="function"?nt:{};if(this.userCallback=typeof nt=="function"?nt:He,this.processVideoData(de,ot,bt),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){const de=new S.CalculatorGraphConfig;de.addInputStream(H),de.addInputStream(te),de.addOutputStream(ce);const bt=new d.CalculatorOptions;bt.setExtension(s.FaceStylizerGraphOptions.ext,this.options);const nt=new S.CalculatorGraphConfig.Node;nt.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),nt.addInputStream("IMAGE:"+H),nt.addInputStream("NORM_RECT:"+te),nt.addOutputStream("STYLIZED_IMAGE:"+ce),nt.setOptions(bt),de.addNode(nt),this.graphRunner.attachImageListener(ce,(ot,gt)=>{const St=this.convertToMPImage(ot,!this.userCallback);this.result=St,this.userCallback&&this.userCallback(St),this.setLatestOutputTimestamp(gt)}),this.graphRunner.attachEmptyPacketListener(ce,ot=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(ot)});const He=de.serializeBinary();this.setGraph(new Uint8Array(He),!0)}}u.FaceStylizer=J}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,S),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},y.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(d,m){var s,E={displayNamesLocale:n.Message.getFieldWithDefault(m,1,"en"),maxResults:n.Message.getFieldWithDefault(m,2,-1),scoreThreshold:(s=n.Message.getOptionalFloatingPointField(m,3))==null?void 0:s,categoryAllowlistList:(s=n.Message.getRepeatedField(m,4))==null?void 0:s,categoryDenylistList:(s=n.Message.getRepeatedField(m,5))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setDisplayNamesLocale(s);break;case 2:s=m.readInt32(),d.setMaxResults(s);break;case 3:s=m.readFloat(),d.setScoreThreshold(s);break;case 4:s=m.readString(),d.addCategoryAllowlist(s);break;case 5:s=m.readString(),d.addCategoryDenylist(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeFloat(3,s),(s=d.getCategoryAllowlistList()).length>0&&m.writeRepeatedString(4,s),(s=d.getCategoryDenylistList()).length>0&&m.writeRepeatedString(5,s)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(d,m){return n.Message.addToRepeatedField(this,4,d,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(d){return n.Message.setField(this,5,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(d,m){return n.Message.addToRepeatedField(this,5,d,m)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},y.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(classifier_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=classifier_options_pb;y.object.extend(proto,s);var E=base_options_pb;y.object.extend(proto,E),y.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,S),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(H,te){var ce,J={baseOptions:(ce=te.getBaseOptions())&&E.BaseOptions.toObject(H,ce),classifierOptions:(ce=te.getClassifierOptions())&&s.ClassifierOptions.toObject(H,ce)};return H&&(J.$jspbMessageInstance=te),J}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(H){var te=new n.BinaryReader(H),ce=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(ce,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(H,te){for(;te.nextField()&&!te.isEndGroup();)switch(te.getFieldNumber()){case 1:var ce=new E.BaseOptions;te.readMessage(ce,E.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ce);break;case 2:ce=new s.ClassifierOptions,te.readMessage(ce,s.ClassifierOptions.deserializeBinaryFromReader),H.setClassifierOptions(ce);break;default:te.skipField()}return H},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(H,te){var ce=void 0;(ce=H.getBaseOptions())!=null&&te.writeMessage(1,ce,E.BaseOptions.serializeBinaryToWriter),(ce=H.getClassifierOptions())!=null&&te.writeMessage(2,ce,s.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,s.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,S),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te)};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)if(H.getFieldNumber()===1){var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te)}else H.skipField();return E},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(E,H){var te;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(gesture_embedder_graph_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=gesture_classifier_graph_options_pb;y.object.extend(proto,E);var H=gesture_embedder_graph_options_pb;y.object.extend(proto,H),y.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,S),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(te){n.Message.initialize(this,te,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(te){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(te,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(te,ce){var J,pe={baseOptions:(J=ce.getBaseOptions())&&s.BaseOptions.toObject(te,J),gestureEmbedderGraphOptions:(J=ce.getGestureEmbedderGraphOptions())&&H.GestureEmbedderGraphOptions.toObject(te,J),cannedGestureClassifierGraphOptions:(J=ce.getCannedGestureClassifierGraphOptions())&&E.GestureClassifierGraphOptions.toObject(te,J),customGestureClassifierGraphOptions:(J=ce.getCustomGestureClassifierGraphOptions())&&E.GestureClassifierGraphOptions.toObject(te,J)};return te&&(pe.$jspbMessageInstance=ce),pe}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(te){var ce=new n.BinaryReader(te),J=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(J,ce)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(te,ce){for(;ce.nextField()&&!ce.isEndGroup();)switch(ce.getFieldNumber()){case 1:var J=new s.BaseOptions;ce.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),te.setBaseOptions(J);break;case 2:J=new H.GestureEmbedderGraphOptions,ce.readMessage(J,H.GestureEmbedderGraphOptions.deserializeBinaryFromReader),te.setGestureEmbedderGraphOptions(J);break;case 3:J=new E.GestureClassifierGraphOptions,ce.readMessage(J,E.GestureClassifierGraphOptions.deserializeBinaryFromReader),te.setCannedGestureClassifierGraphOptions(J);break;case 4:J=new E.GestureClassifierGraphOptions,ce.readMessage(J,E.GestureClassifierGraphOptions.deserializeBinaryFromReader),te.setCustomGestureClassifierGraphOptions(J);break;default:ce.skipField()}return te},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var te=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,te),te.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(te,ce){var J=void 0;(J=te.getBaseOptions())!=null&&ce.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=te.getGestureEmbedderGraphOptions())!=null&&ce.writeMessage(2,J,H.GestureEmbedderGraphOptions.serializeBinaryToWriter),(J=te.getCannedGestureClassifierGraphOptions())!=null&&ce.writeMessage(3,J,E.GestureClassifierGraphOptions.serializeBinaryToWriter),(J=te.getCustomGestureClassifierGraphOptions())!=null&&ce.writeMessage(4,J,E.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(te){return n.Message.setWrapperField(this,1,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return n.Message.getWrapperField(this,H.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(te){return n.Message.setWrapperField(this,2,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,E.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(te){return n.Message.setWrapperField(this,3,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,E.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(te){return n.Message.setWrapperField(this,4,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,S),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5),numHands:(te=n.Message.getField(H,3))==null?void 0:te};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te);break;case 2:te=H.readFloat(),E.setMinDetectionConfidence(te);break;case 3:te=H.readInt32(),E.setNumHands(te);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter),(te=n.Message.getField(E,2))!=null&&H.writeFloat(2,te),(te=n.Message.getField(E,3))!=null&&H.writeInt32(3,te)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.hand_detector.proto)})(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,S),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5)};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te);break;case 2:te=H.readFloat(),E.setMinDetectionConfidence(te);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter),(te=n.Message.getField(E,2))!=null&&H.writeFloat(2,te)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(hand_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=hand_detector_graph_options_pb;y.object.extend(proto,E);var H=hand_landmarks_detector_graph_options_pb;y.object.extend(proto,H),y.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,S),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(te){n.Message.initialize(this,te,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(te){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(te,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(te,ce){var J,pe={baseOptions:(J=ce.getBaseOptions())&&s.BaseOptions.toObject(te,J),handDetectorGraphOptions:(J=ce.getHandDetectorGraphOptions())&&E.HandDetectorGraphOptions.toObject(te,J),handLandmarksDetectorGraphOptions:(J=ce.getHandLandmarksDetectorGraphOptions())&&H.HandLandmarksDetectorGraphOptions.toObject(te,J),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(ce,4,.5)};return te&&(pe.$jspbMessageInstance=ce),pe}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(te){var ce=new n.BinaryReader(te),J=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(J,ce)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(te,ce){for(;ce.nextField()&&!ce.isEndGroup();)switch(ce.getFieldNumber()){case 1:var J=new s.BaseOptions;ce.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),te.setBaseOptions(J);break;case 2:J=new E.HandDetectorGraphOptions,ce.readMessage(J,E.HandDetectorGraphOptions.deserializeBinaryFromReader),te.setHandDetectorGraphOptions(J);break;case 3:J=new H.HandLandmarksDetectorGraphOptions,ce.readMessage(J,H.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),te.setHandLandmarksDetectorGraphOptions(J);break;case 4:J=ce.readFloat(),te.setMinTrackingConfidence(J);break;default:ce.skipField()}return te},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var te=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,te),te.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(te,ce){var J=void 0;(J=te.getBaseOptions())!=null&&ce.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=te.getHandDetectorGraphOptions())!=null&&ce.writeMessage(2,J,E.HandDetectorGraphOptions.serializeBinaryToWriter),(J=te.getHandLandmarksDetectorGraphOptions())!=null&&ce.writeMessage(3,J,H.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),(J=n.Message.getField(te,4))!=null&&ce.writeFloat(4,J)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(te){return n.Message.setWrapperField(this,1,te)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(te){return n.Message.setWrapperField(this,2,te)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,H.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(te){return n.Message.setWrapperField(this,3,te)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(te){return n.Message.setField(this,4,te)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=hand_gesture_recognizer_graph_options_pb;y.object.extend(proto,E);var H=hand_landmarker_graph_options_pb;y.object.extend(proto,H),y.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,S),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(te){n.Message.initialize(this,te,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(te){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(te,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(te,ce){var J,pe={baseOptions:(J=ce.getBaseOptions())&&s.BaseOptions.toObject(te,J),handLandmarkerGraphOptions:(J=ce.getHandLandmarkerGraphOptions())&&H.HandLandmarkerGraphOptions.toObject(te,J),handGestureRecognizerGraphOptions:(J=ce.getHandGestureRecognizerGraphOptions())&&E.HandGestureRecognizerGraphOptions.toObject(te,J)};return te&&(pe.$jspbMessageInstance=ce),pe}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(te){var ce=new n.BinaryReader(te),J=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(J,ce)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(te,ce){for(;ce.nextField()&&!ce.isEndGroup();)switch(ce.getFieldNumber()){case 1:var J=new s.BaseOptions;ce.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),te.setBaseOptions(J);break;case 2:J=new H.HandLandmarkerGraphOptions,ce.readMessage(J,H.HandLandmarkerGraphOptions.deserializeBinaryFromReader),te.setHandLandmarkerGraphOptions(J);break;case 3:J=new E.HandGestureRecognizerGraphOptions,ce.readMessage(J,E.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),te.setHandGestureRecognizerGraphOptions(J);break;default:ce.skipField()}return te},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var te=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,te),te.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(te,ce){var J=void 0;(J=te.getBaseOptions())!=null&&ce.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=te.getHandLandmarkerGraphOptions())!=null&&ce.writeMessage(2,J,H.HandLandmarkerGraphOptions.serializeBinaryToWriter),(J=te.getHandGestureRecognizerGraphOptions())!=null&&ce.writeMessage(3,J,E.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(te){return n.Message.setWrapperField(this,1,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,H.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(te){return n.Message.setWrapperField(this,2,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return n.Message.getWrapperField(this,E.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(te){return n.Message.setWrapperField(this,3,te)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;const classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(u,n){const y=n?n.clone():new classifier_options_pb_1.ClassifierOptions;return u.displayNamesLocale!==void 0?y.setDisplayNamesLocale(u.displayNamesLocale):u.displayNamesLocale===void 0&&y.clearDisplayNamesLocale(),u.maxResults!==void 0?y.setMaxResults(u.maxResults):"maxResults"in u&&y.clearMaxResults(),u.scoreThreshold!==void 0?y.setScoreThreshold(u.scoreThreshold):"scoreThreshold"in u&&y.clearScoreThreshold(),u.categoryAllowlist!==void 0?y.setCategoryAllowlistList(u.categoryAllowlist):"categoryAllowlist"in u&&y.clearCategoryAllowlistList(),u.categoryDenylist!==void 0?y.setCategoryDenylistList(u.categoryDenylist):"categoryDenylist"in u&&y.clearCategoryDenylistList(),y}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Jt,zt,_n,Kn){Kn===void 0&&(Kn=_n);var Cr=Object.getOwnPropertyDescriptor(zt,_n);Cr&&!("get"in Cr?!zt.__esModule:Cr.writable||Cr.configurable)||(Cr={enumerable:!0,get:function(){return zt[_n]}}),Object.defineProperty(Jt,Kn,Cr)}:function(Jt,zt,_n,Kn){Kn===void 0&&(Kn=_n),Jt[Kn]=zt[_n]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(Jt,zt){for(var _n in Jt)_n==="default"||Object.prototype.hasOwnProperty.call(zt,_n)||n(zt,Jt,_n)};Object.defineProperty(u,"__esModule",{value:!0}),u.GestureRecognizer=void 0;const S=calculator_pb,d=calculator_options_pb,m=classification_pb,s=landmark_pb,E=base_options_pb,H=gesture_classifier_graph_options_pb,te=gesture_recognizer_graph_options_pb,ce=hand_gesture_recognizer_graph_options_pb,J=hand_detector_graph_options_pb,pe=hand_landmarker_graph_options_pb,de=hand_landmarks_detector_graph_options_pb,bt=classifier_options,nt=vision_task_runner,He=hand_landmarks_connections;y(gesture_recognizer_options,u),y(gesture_recognizer_result,u);const ot="image_in",gt="norm_rect",St="hand_gestures",vt="hand_landmarks",ut="world_hand_landmarks",mt="handedness",Pt=.5;class Ot extends nt.VisionTaskRunner{static createFromOptions(zt,_n){return nt.VisionTaskRunner.createVisionInstance(Ot,zt,_n)}static createFromModelBuffer(zt,_n){return nt.VisionTaskRunner.createVisionInstance(Ot,zt,{baseOptions:{modelAssetBuffer:_n}})}static createFromModelPath(zt,_n){return nt.VisionTaskRunner.createVisionInstance(Ot,zt,{baseOptions:{modelAssetPath:_n}})}constructor(zt,_n){super(new nt.VisionGraphRunner(zt,_n),ot,gt,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new te.GestureRecognizerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.handLandmarkerGraphOptions=new pe.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new de.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new J.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new ce.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(Pt),this.handLandmarkerGraphOptions.setMinTrackingConfidence(Pt),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(Pt)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(zt){this.options.setBaseOptions(zt)}setOptions(zt){var _n,Kn,Cr,zr,fr,Ir,Vi,vi;if(this.handDetectorGraphOptions.setNumHands((_n=zt.numHands)!==null&&_n!==void 0?_n:1),"minHandDetectionConfidence"in zt&&this.handDetectorGraphOptions.setMinDetectionConfidence((Kn=zt.minHandDetectionConfidence)!==null&&Kn!==void 0?Kn:Pt),"minTrackingConfidence"in zt&&this.handLandmarkerGraphOptions.setMinTrackingConfidence((Cr=zt.minTrackingConfidence)!==null&&Cr!==void 0?Cr:Pt),"minHandPresenceConfidence"in zt&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((zr=zt.minHandPresenceConfidence)!==null&&zr!==void 0?zr:Pt),zt.cannedGesturesClassifierOptions){const hi=new H.GestureClassifierGraphOptions;hi.setClassifierOptions((0,bt.convertClassifierOptionsToProto)(zt.cannedGesturesClassifierOptions,(fr=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||fr===void 0?void 0:fr.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(hi)}else zt.cannedGesturesClassifierOptions===void 0&&((Ir=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||Ir===void 0||Ir.clearClassifierOptions());if(zt.customGesturesClassifierOptions){const hi=new H.GestureClassifierGraphOptions;hi.setClassifierOptions((0,bt.convertClassifierOptionsToProto)(zt.customGesturesClassifierOptions,(Vi=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||Vi===void 0?void 0:Vi.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(hi)}else zt.customGesturesClassifierOptions===void 0&&((vi=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||vi===void 0||vi.clearClassifierOptions());return this.applyOptions(zt)}recognize(zt,_n){return this.resetResults(),this.processImageData(zt,_n),this.processResults()}recognizeForVideo(zt,_n,Kn){return this.resetResults(),this.processVideoData(zt,Kn,_n),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return this.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(zt,_n=!0){var Kn,Cr,zr;const fr=[];for(const Ir of zt){const Vi=m.ClassificationList.deserializeBinary(Ir),vi=[];for(const hi of Vi.getClassificationList()){const os=_n&&hi.hasIndex()?hi.getIndex():-1;vi.push({score:(Kn=hi.getScore())!==null&&Kn!==void 0?Kn:0,index:os,categoryName:(Cr=hi.getLabel())!==null&&Cr!==void 0?Cr:"",displayName:(zr=hi.getDisplayName())!==null&&zr!==void 0?zr:""})}fr.push(vi)}return fr}addJsLandmarks(zt){var _n,Kn,Cr;for(const zr of zt){const fr=s.NormalizedLandmarkList.deserializeBinary(zr),Ir=[];for(const Vi of fr.getLandmarkList())Ir.push({x:(_n=Vi.getX())!==null&&_n!==void 0?_n:0,y:(Kn=Vi.getY())!==null&&Kn!==void 0?Kn:0,z:(Cr=Vi.getZ())!==null&&Cr!==void 0?Cr:0});this.landmarks.push(Ir)}}adddJsWorldLandmarks(zt){var _n,Kn,Cr;for(const zr of zt){const fr=s.LandmarkList.deserializeBinary(zr),Ir=[];for(const Vi of fr.getLandmarkList())Ir.push({x:(_n=Vi.getX())!==null&&_n!==void 0?_n:0,y:(Kn=Vi.getY())!==null&&Kn!==void 0?Kn:0,z:(Cr=Vi.getZ())!==null&&Cr!==void 0?Cr:0});this.worldLandmarks.push(Ir)}}refreshGraph(){const zt=new S.CalculatorGraphConfig;zt.addInputStream(ot),zt.addInputStream(gt),zt.addOutputStream(St),zt.addOutputStream(vt),zt.addOutputStream(ut),zt.addOutputStream(mt);const _n=new d.CalculatorOptions;_n.setExtension(te.GestureRecognizerGraphOptions.ext,this.options);const Kn=new S.CalculatorGraphConfig.Node;Kn.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Kn.addInputStream("IMAGE:"+ot),Kn.addInputStream("NORM_RECT:"+gt),Kn.addOutputStream("HAND_GESTURES:"+St),Kn.addOutputStream("LANDMARKS:"+vt),Kn.addOutputStream("WORLD_LANDMARKS:"+ut),Kn.addOutputStream("HANDEDNESS:"+mt),Kn.setOptions(_n),zt.addNode(Kn),this.graphRunner.attachProtoVectorListener(vt,(zr,fr)=>{this.addJsLandmarks(zr),this.setLatestOutputTimestamp(fr)}),this.graphRunner.attachEmptyPacketListener(vt,zr=>{this.setLatestOutputTimestamp(zr)}),this.graphRunner.attachProtoVectorListener(ut,(zr,fr)=>{this.adddJsWorldLandmarks(zr),this.setLatestOutputTimestamp(fr)}),this.graphRunner.attachEmptyPacketListener(ut,zr=>{this.setLatestOutputTimestamp(zr)}),this.graphRunner.attachProtoVectorListener(St,(zr,fr)=>{this.gestures.push(...this.toJsCategories(zr,!1)),this.setLatestOutputTimestamp(fr)}),this.graphRunner.attachEmptyPacketListener(St,zr=>{this.setLatestOutputTimestamp(zr)}),this.graphRunner.attachProtoVectorListener(mt,(zr,fr)=>{this.handednesses.push(...this.toJsCategories(zr)),this.setLatestOutputTimestamp(fr)}),this.graphRunner.attachEmptyPacketListener(mt,zr=>{this.setLatestOutputTimestamp(zr)});const Cr=zt.serializeBinary();this.setGraph(new Uint8Array(Cr),!0)}}u.GestureRecognizer=Ot,Ot.HAND_CONNECTIONS=He.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ut,mt,Pt,Ot){Ot===void 0&&(Ot=Pt);var Jt=Object.getOwnPropertyDescriptor(mt,Pt);Jt&&!("get"in Jt?!mt.__esModule:Jt.writable||Jt.configurable)||(Jt={enumerable:!0,get:function(){return mt[Pt]}}),Object.defineProperty(ut,Ot,Jt)}:function(ut,mt,Pt,Ot){Ot===void 0&&(Ot=Pt),ut[Ot]=mt[Pt]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(ut,mt){for(var Pt in ut)Pt==="default"||Object.prototype.hasOwnProperty.call(mt,Pt)||n(mt,ut,Pt)};Object.defineProperty(u,"__esModule",{value:!0}),u.HandLandmarker=void 0;const S=calculator_pb,d=calculator_options_pb,m=classification_pb,s=landmark_pb,E=base_options_pb,H=hand_detector_graph_options_pb,te=hand_landmarker_graph_options_pb,ce=hand_landmarks_detector_graph_options_pb,J=landmark_result,pe=vision_task_runner,de=hand_landmarks_connections;y(hand_landmarker_options,u),y(hand_landmarker_result,u);const bt="image_in",nt="norm_rect",He="hand_landmarks",ot="world_hand_landmarks",gt="handedness",St=.5;class vt extends pe.VisionTaskRunner{static createFromOptions(mt,Pt){return pe.VisionTaskRunner.createVisionInstance(vt,mt,Pt)}static createFromModelBuffer(mt,Pt){return pe.VisionTaskRunner.createVisionInstance(vt,mt,{baseOptions:{modelAssetBuffer:Pt}})}static createFromModelPath(mt,Pt){return pe.VisionTaskRunner.createVisionInstance(vt,mt,{baseOptions:{modelAssetPath:Pt}})}constructor(mt,Pt){super(new pe.VisionGraphRunner(mt,Pt),bt,nt,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new te.HandLandmarkerGraphOptions,this.options.setBaseOptions(new E.BaseOptions),this.handLandmarksDetectorGraphOptions=new ce.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new H.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(mt){this.options.setBaseOptions(mt)}setOptions(mt){var Pt,Ot,Jt,zt;return"numHands"in mt&&this.handDetectorGraphOptions.setNumHands((Pt=mt.numHands)!==null&&Pt!==void 0?Pt:1),"minHandDetectionConfidence"in mt&&this.handDetectorGraphOptions.setMinDetectionConfidence((Ot=mt.minHandDetectionConfidence)!==null&&Ot!==void 0?Ot:St),"minTrackingConfidence"in mt&&this.options.setMinTrackingConfidence((Jt=mt.minTrackingConfidence)!==null&&Jt!==void 0?Jt:St),"minHandPresenceConfidence"in mt&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((zt=mt.minHandPresenceConfidence)!==null&&zt!==void 0?zt:St),this.applyOptions(mt)}detect(mt,Pt){return this.resetResults(),this.processImageData(mt,Pt),this.processResults()}detectForVideo(mt,Pt,Ot){return this.resetResults(),this.processVideoData(mt,Ot,Pt),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(St),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(St),this.options.setMinTrackingConfidence(St)}toJsCategories(mt){var Pt,Ot,Jt,zt;const _n=[];for(const Kn of mt){const Cr=m.ClassificationList.deserializeBinary(Kn),zr=[];for(const fr of Cr.getClassificationList())zr.push({score:(Pt=fr.getScore())!==null&&Pt!==void 0?Pt:0,index:(Ot=fr.getIndex())!==null&&Ot!==void 0?Ot:-1,categoryName:(Jt=fr.getLabel())!==null&&Jt!==void 0?Jt:"",displayName:(zt=fr.getDisplayName())!==null&&zt!==void 0?zt:""});_n.push(zr)}return _n}addJsLandmarks(mt){for(const Pt of mt){const Ot=s.NormalizedLandmarkList.deserializeBinary(Pt);this.landmarks.push((0,J.convertToLandmarks)(Ot))}}adddJsWorldLandmarks(mt){for(const Pt of mt){const Ot=s.LandmarkList.deserializeBinary(Pt);this.worldLandmarks.push((0,J.convertToWorldLandmarks)(Ot))}}refreshGraph(){const mt=new S.CalculatorGraphConfig;mt.addInputStream(bt),mt.addInputStream(nt),mt.addOutputStream(He),mt.addOutputStream(ot),mt.addOutputStream(gt);const Pt=new d.CalculatorOptions;Pt.setExtension(te.HandLandmarkerGraphOptions.ext,this.options);const Ot=new S.CalculatorGraphConfig.Node;Ot.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Ot.addInputStream("IMAGE:"+bt),Ot.addInputStream("NORM_RECT:"+nt),Ot.addOutputStream("LANDMARKS:"+He),Ot.addOutputStream("WORLD_LANDMARKS:"+ot),Ot.addOutputStream("HANDEDNESS:"+gt),Ot.setOptions(Pt),mt.addNode(Ot),this.graphRunner.attachProtoVectorListener(He,(zt,_n)=>{this.addJsLandmarks(zt),this.setLatestOutputTimestamp(_n)}),this.graphRunner.attachEmptyPacketListener(He,zt=>{this.setLatestOutputTimestamp(zt)}),this.graphRunner.attachProtoVectorListener(ot,(zt,_n)=>{this.adddJsWorldLandmarks(zt),this.setLatestOutputTimestamp(_n)}),this.graphRunner.attachEmptyPacketListener(ot,zt=>{this.setLatestOutputTimestamp(zt)}),this.graphRunner.attachProtoVectorListener(gt,(zt,_n)=>{this.handednesses.push(...this.toJsCategories(zt)),this.setLatestOutputTimestamp(_n)}),this.graphRunner.attachEmptyPacketListener(gt,zt=>{this.setLatestOutputTimestamp(zt)});const Jt=mt.serializeBinary();this.setGraph(new Uint8Array(Jt),!0)}}u.HandLandmarker=vt,vt.HAND_CONNECTIONS=de.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=classification_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,S),y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,S),proto.mediapipe.tasks.components.containers.proto.Classifications=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},y.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(m){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(m,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(m,s){var E,H={classificationList:(E=s.getClassificationList())&&d.ClassificationList.toObject(m,E),headIndex:(E=n.Message.getField(s,2))==null?void 0:E,headName:(E=n.Message.getField(s,3))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(E,s)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 4:var E=new d.ClassificationList;s.readMessage(E,d.ClassificationList.deserializeBinaryFromReader),m.setClassificationList(E);break;case 2:E=s.readInt32(),m.setHeadIndex(E);break;case 3:E=s.readString(),m.setHeadName(E);break;default:s.skipField()}return m},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getClassificationList())!=null&&s.writeMessage(4,E,d.ClassificationList.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeString(3,E)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return n.Message.getWrapperField(this,d.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(m){return n.Message.setWrapperField(this,4,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(m){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(m,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(m,s){var E,H={classificationsList:n.Message.toObjectList(s.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,m),timestampMs:(E=n.Message.getField(s,2))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(E,s)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.tasks.components.containers.proto.Classifications;s.readMessage(E,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),m.addClassifications(E);break;case 2:E=s.readInt64(),m.setTimestampMs(E);break;default:s.skipField()}return m},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getClassificationsList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeInt64(2,E)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.tasks.components.containers.proto.Classifications,s)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},y.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(classifications_pb);var image_classifier_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=classifier_options_pb;y.object.extend(proto,s);var E=base_options_pb;y.object.extend(proto,E),y.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,S),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(H,te){var ce,J={baseOptions:(ce=te.getBaseOptions())&&E.BaseOptions.toObject(H,ce),classifierOptions:(ce=te.getClassifierOptions())&&s.ClassifierOptions.toObject(H,ce)};return H&&(J.$jspbMessageInstance=te),J}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(H){var te=new n.BinaryReader(H),ce=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(ce,te)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(H,te){for(;te.nextField()&&!te.isEndGroup();)switch(te.getFieldNumber()){case 1:var ce=new E.BaseOptions;te.readMessage(ce,E.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ce);break;case 2:ce=new s.ClassifierOptions,te.readMessage(ce,s.ClassifierOptions.deserializeBinaryFromReader),H.setClassifierOptions(ce);break;default:te.skipField()}return H},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(H,te){var ce=void 0;(ce=H.getBaseOptions())!=null&&te.writeMessage(1,ce,E.BaseOptions.serializeBinaryToWriter),(ce=H.getClassifierOptions())!=null&&te.writeMessage(2,ce,s.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,s.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.image_classifier.proto)})(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nt,He,ot,gt){gt===void 0&&(gt=ot);var St=Object.getOwnPropertyDescriptor(He,ot);St&&!("get"in St?!He.__esModule:St.writable||St.configurable)||(St={enumerable:!0,get:function(){return He[ot]}}),Object.defineProperty(nt,gt,St)}:function(nt,He,ot,gt){gt===void 0&&(gt=ot),nt[gt]=He[ot]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(nt,He){for(var ot in nt)ot==="default"||Object.prototype.hasOwnProperty.call(He,ot)||n(He,nt,ot)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageClassifier=void 0;const S=calculator_pb,d=calculator_options_pb,m=classifications_pb,s=base_options_pb,E=image_classifier_graph_options_pb,H=classifier_options,te=classifier_result,ce=vision_task_runner,J="input_image",pe="norm_rect",de="classifications";y(image_classifier_options,u),y(image_classifier_result,u);class bt extends ce.VisionTaskRunner{static createFromOptions(He,ot){return ce.VisionTaskRunner.createVisionInstance(bt,He,ot)}static createFromModelBuffer(He,ot){return ce.VisionTaskRunner.createVisionInstance(bt,He,{baseOptions:{modelAssetBuffer:ot}})}static createFromModelPath(He,ot){return ce.VisionTaskRunner.createVisionInstance(bt,He,{baseOptions:{modelAssetPath:ot}})}constructor(He,ot){super(new ce.VisionGraphRunner(He,ot),J,pe,!0),this.classificationResult={classifications:[]},this.options=new E.ImageClassifierGraphOptions,this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(He){this.options.setBaseOptions(He)}setOptions(He){return this.options.setClassifierOptions((0,H.convertClassifierOptionsToProto)(He,this.options.getClassifierOptions())),this.applyOptions(He)}classify(He,ot){return this.classificationResult={classifications:[]},this.processImageData(He,ot),this.classificationResult}classifyForVideo(He,ot,gt){return this.classificationResult={classifications:[]},this.processVideoData(He,gt,ot),this.classificationResult}refreshGraph(){const He=new S.CalculatorGraphConfig;He.addInputStream(J),He.addInputStream(pe),He.addOutputStream(de);const ot=new d.CalculatorOptions;ot.setExtension(E.ImageClassifierGraphOptions.ext,this.options);const gt=new S.CalculatorGraphConfig.Node;gt.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),gt.addInputStream("IMAGE:"+J),gt.addInputStream("NORM_RECT:"+pe),gt.addOutputStream("CLASSIFICATIONS:"+de),gt.setOptions(ot),He.addNode(gt),this.graphRunner.attachProtoListener(de,(vt,ut)=>{this.classificationResult=(0,te.convertFromClassificationResultProto)(m.ClassificationResult.deserializeBinary(vt)),this.setLatestOutputTimestamp(ut)}),this.graphRunner.attachEmptyPacketListener(de,vt=>{this.setLatestOutputTimestamp(vt)});const St=He.serializeBinary();this.setGraph(new Uint8Array(St),!0)}}u.ImageClassifier=bt}(image_classifier);var image_embedder={},embeddings_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,S),y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,S),y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,S),y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,S),y.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,S),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},y.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(d){n.Message.initialize(this,d,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},y.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},y.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(d,m){var s,E={valuesList:(s=n.Message.getRepeatedFloatingPointField(m,1))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1)for(var s=m.isDelimited()?m.readPackedFloat():[m.readFloat()],E=0;E<s.length;E++)d.addValues(s[E]);else m.skipField();return d},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(d,m){var s;(s=d.getValuesList()).length>0&&m.writePackedFloat(1,s)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return n.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(d){return n.Message.setField(this,1,d||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(d,m){return n.Message.addToRepeatedField(this,1,d,m)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(d,m){var s={values:m.getValues_asB64()};return d&&(s.$jspbMessageInstance=m),s}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=m.readBytes();d.setValues(s)}else m.skipField();return d},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(d,m){var s;(s=n.Message.getField(d,1))!=null&&m.writeBytes(1,s)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return n.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return n.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(d,m){var s,E={floatEmbedding:(s=m.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,s),quantizedEmbedding:(s=m.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,s),headIndex:(s=n.Message.getField(m,3))==null?void 0:s,headName:(s=n.Message.getField(m,4))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;m.readMessage(s,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),d.setFloatEmbedding(s);break;case 2:s=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,m.readMessage(s,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),d.setQuantizedEmbedding(s);break;case 3:s=m.readInt32(),d.setHeadIndex(s);break;case 4:s=m.readString(),d.setHeadName(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getFloatEmbedding())!=null&&m.writeMessage(1,s,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),(s=d.getQuantizedEmbedding())!=null&&m.writeMessage(2,s,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s),(s=n.Message.getField(d,4))!=null&&m.writeString(4,s)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(d){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(d){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(d,m){var s,E={embeddingsList:n.Message.toObjectList(m.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,d),timestampMs:(s=n.Message.getField(m,2))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=new proto.mediapipe.tasks.components.containers.proto.Embedding;m.readMessage(s,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),d.addEmbeddings(s);break;case 2:s=m.readInt64(),d.setTimestampMs(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getEmbeddingsList()).length>0&&m.writeRepeatedMessage(1,s,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),(s=n.Message.getField(d,2))!=null&&m.writeInt64(2,s)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(d,m){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.tasks.components.containers.proto.Embedding,m)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},y.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,S),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(d,m){var s,E={l2Normalize:(s=n.Message.getBooleanField(m,1))==null?void 0:s,quantize:(s=n.Message.getBooleanField(m,2))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readBool();d.setL2Normalize(s);break;case 2:s=m.readBool(),d.setQuantize(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeBool(1,s),(s=n.Message.getField(d,2))!=null&&m.writeBool(2,s)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return n.Message.getField(this,2)!=null},y.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(embedder_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=embedder_options_pb;y.object.extend(proto,s);var E=base_options_pb;y.object.extend(proto,E),y.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,S),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(H,te){var ce,J={baseOptions:(ce=te.getBaseOptions())&&E.BaseOptions.toObject(H,ce),embedderOptions:(ce=te.getEmbedderOptions())&&s.EmbedderOptions.toObject(H,ce)};return H&&(J.$jspbMessageInstance=te),J}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(H){var te=new n.BinaryReader(H),ce=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(ce,te)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(H,te){for(;te.nextField()&&!te.isEndGroup();)switch(te.getFieldNumber()){case 1:var ce=new E.BaseOptions;te.readMessage(ce,E.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ce);break;case 2:ce=new s.EmbedderOptions,te.readMessage(ce,s.EmbedderOptions.deserializeBinaryFromReader),H.setEmbedderOptions(ce);break;default:te.skipField()}return H},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(H,te){var ce=void 0;(ce=H.getBaseOptions())!=null&&te.writeMessage(1,ce,E.BaseOptions.serializeBinaryToWriter),(ce=H.getEmbedderOptions())!=null&&te.writeMessage(2,ce,s.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,E.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return n.Message.getWrapperField(this,s.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(H){return n.Message.setWrapperField(this,2,H)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;const embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(u,n){const y=n?n.clone():new embedder_options_pb_1.EmbedderOptions;return u.l2Normalize!==void 0?y.setL2Normalize(u.l2Normalize):"l2Normalize"in u&&y.clearL2Normalize(),u.quantize!==void 0?y.setQuantize(u.quantize):"quantize"in u&&y.clearQuantize(),y}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;const DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(u){var n,y,S,d;const m={headIndex:(n=u.getHeadIndex())!==null&&n!==void 0?n:DEFAULT_INDEX,headName:(y=u.getHeadName())!==null&&y!==void 0?y:""};if(u.hasFloatEmbedding())m.floatEmbedding=u.getFloatEmbedding().getValuesList();else{const s=(d=(S=u.getQuantizedEmbedding())===null||S===void 0?void 0:S.getValues())!==null&&d!==void 0?d:"";m.quantizedEmbedding=typeof s=="string"?Uint8Array.from(atob(s),E=>E.charCodeAt(0)):s}return m}function convertFromEmbeddingResultProto(u){return{embeddings:u.getEmbeddingsList().map(n=>convertFromEmbeddingsProto(n)),timestampMs:u.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(u,n){if(u.floatEmbedding&&n.floatEmbedding)return compute(u.floatEmbedding,n.floatEmbedding);if(u.quantizedEmbedding&&n.quantizedEmbedding)return compute(convertToBytes(u.quantizedEmbedding),convertToBytes(n.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(u){return Array.from(u,n=>n>127?n-256:n)}function compute(u,n){if(u.length!==n.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${u.length} vs. ${n.length}).`);let y=0,S=0,d=0;for(let m=0;m<u.length;m++)y+=u[m]*n[m],S+=u[m]*u[m],d+=n[m]*n[m];if(S<=0||d<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return y/Math.sqrt(S*d)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(He,ot,gt,St){St===void 0&&(St=gt);var vt=Object.getOwnPropertyDescriptor(ot,gt);vt&&!("get"in vt?!ot.__esModule:vt.writable||vt.configurable)||(vt={enumerable:!0,get:function(){return ot[gt]}}),Object.defineProperty(He,St,vt)}:function(He,ot,gt,St){St===void 0&&(St=gt),He[St]=ot[gt]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(He,ot){for(var gt in He)gt==="default"||Object.prototype.hasOwnProperty.call(ot,gt)||n(ot,He,gt)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageEmbedder=void 0;const S=calculator_pb,d=calculator_options_pb,m=embeddings_pb,s=base_options_pb,E=image_embedder_graph_options_pb,H=embedder_options,te=embedder_result,ce=cosine_similarity,J=vision_task_runner,pe="image_in",de="norm_rect",bt="embeddings_out";y(image_embedder_options,u),y(image_embedder_result,u);class nt extends J.VisionTaskRunner{static createFromOptions(ot,gt){return J.VisionTaskRunner.createVisionInstance(nt,ot,gt)}static createFromModelBuffer(ot,gt){return J.VisionTaskRunner.createVisionInstance(nt,ot,{baseOptions:{modelAssetBuffer:gt}})}static createFromModelPath(ot,gt){return J.VisionTaskRunner.createVisionInstance(nt,ot,{baseOptions:{modelAssetPath:gt}})}constructor(ot,gt){super(new J.VisionGraphRunner(ot,gt),pe,de,!0),this.options=new E.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ot){this.options.setBaseOptions(ot)}setOptions(ot){return this.options.setEmbedderOptions((0,H.convertEmbedderOptionsToProto)(ot,this.options.getEmbedderOptions())),this.applyOptions(ot)}embed(ot,gt){return this.processImageData(ot,gt),this.embeddings}embedForVideo(ot,gt,St){return this.processVideoData(ot,St,gt),this.embeddings}static cosineSimilarity(ot,gt){return(0,ce.computeCosineSimilarity)(ot,gt)}addJsImageEmdedding(ot){const gt=m.EmbeddingResult.deserializeBinary(ot);this.embeddings=(0,te.convertFromEmbeddingResultProto)(gt)}refreshGraph(){const ot=new S.CalculatorGraphConfig;ot.addInputStream(pe),ot.addInputStream(de),ot.addOutputStream(bt);const gt=new d.CalculatorOptions;gt.setExtension(E.ImageEmbedderGraphOptions.ext,this.options);const St=new S.CalculatorGraphConfig.Node;St.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),St.addInputStream("IMAGE:"+pe),St.addInputStream("NORM_RECT:"+de),St.addOutputStream("EMBEDDINGS:"+bt),St.setOptions(gt),ot.addNode(St),this.graphRunner.attachProtoListener(bt,(ut,mt)=>{this.addJsImageEmdedding(ut),this.setLatestOutputTimestamp(mt)}),this.graphRunner.attachEmptyPacketListener(bt,ut=>{this.setLatestOutputTimestamp(ut)});const vt=ot.serializeBinary();this.setGraph(new Uint8Array(vt),!0)}}u.ImageEmbedder=nt}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,S),y.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,S),y.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,S),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(d,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(d,m){var s,E={outputType:(s=n.Message.getField(m,1))==null?void 0:s,activation:n.Message.getFieldWithDefault(m,2,0)};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(s,m)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readEnum();d.setOutputType(s);break;case 2:s=m.readEnum(),d.setActivation(s);break;default:m.skipField()}return d},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeEnum(1,s),(s=n.Message.getField(d,2))!=null&&m.writeEnum(2,s)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return n.Message.getField(this,2)!=null},y.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(segmenter_options_pb);var label_map_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.LabelMapItem",null,S),proto.mediapipe.LabelMapItem=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},y.inherits(proto.mediapipe.LabelMapItem,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(d){return proto.mediapipe.LabelMapItem.toObject(d,this)},proto.mediapipe.LabelMapItem.toObject=function(d,m){var s,E={name:(s=n.Message.getField(m,1))==null?void 0:s,displayName:(s=n.Message.getField(m,2))==null?void 0:s,childNameList:(s=n.Message.getRepeatedField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.LabelMapItem.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(s,m)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readString();d.setName(s);break;case 2:s=m.readString(),d.setDisplayName(s);break;case 3:s=m.readString(),d.addChildName(s);break;default:m.skipField()}return d},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeString(1,s),(s=n.Message.getField(d,2))!=null&&m.writeString(2,s),(s=d.getChildNameList()).length>0&&m.writeRepeatedString(3,s)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(d,m){return n.Message.addToRepeatedField(this,3,d,m)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},y.object.extend(u,proto.mediapipe)})(label_map_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;y.object.extend(proto,d);var m=segmenter_options_pb;y.object.extend(proto,m);var s=label_map_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,S),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(E,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(E,H){var te,ce={segmenterOptions:(te=H.getSegmenterOptions())&&m.SegmenterOptions.toObject(E,te),labelItemsMap:(te=H.getLabelItemsMap())?te.toObject(E,proto.mediapipe.LabelMapItem.toObject):[]};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new m.SegmenterOptions;H.readMessage(te,m.SegmenterOptions.deserializeBinaryFromReader),E.setSegmenterOptions(te);break;case 2:te=E.getLabelItemsMap(),H.readMessage(te,function(ce,J){n.Map.deserializeBinary(ce,J,n.BinaryReader.prototype.readInt64,n.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)});break;default:H.skipField()}return E},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getSegmenterOptions())!=null&&H.writeMessage(1,te,m.SegmenterOptions.serializeBinaryToWriter),(te=E.getLabelItemsMap(!0))&&te.getLength()>0&&te.serializeBinary(2,H,n.BinaryWriter.prototype.writeInt64,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,m.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(E){return n.Message.getMapField(this,2,E,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,y.object.extend(u,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=segmenter_options_pb;y.object.extend(proto,E),y.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,S),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(H){n.Message.initialize(this,H,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(H){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(H,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(H,te){var ce,J={baseOptions:(ce=te.getBaseOptions())&&s.BaseOptions.toObject(H,ce),displayNamesLocale:n.Message.getFieldWithDefault(te,2,"en"),segmenterOptions:(ce=te.getSegmenterOptions())&&E.SegmenterOptions.toObject(H,ce)};return H&&(J.$jspbMessageInstance=te),J}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(H){var te=new n.BinaryReader(H),ce=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(ce,te)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(H,te){for(;te.nextField()&&!te.isEndGroup();)switch(te.getFieldNumber()){case 1:var ce=new s.BaseOptions;te.readMessage(ce,s.BaseOptions.deserializeBinaryFromReader),H.setBaseOptions(ce);break;case 2:ce=te.readString(),H.setDisplayNamesLocale(ce);break;case 3:ce=new E.SegmenterOptions,te.readMessage(ce,E.SegmenterOptions.deserializeBinaryFromReader),H.setSegmenterOptions(ce);break;default:te.skipField()}return H},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var H=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,H),H.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(H,te){var ce=void 0;(ce=H.getBaseOptions())!=null&&te.writeMessage(1,ce,s.BaseOptions.serializeBinaryToWriter),(ce=n.Message.getField(H,2))!=null&&te.writeString(2,ce),(ce=H.getSegmenterOptions())!=null&&te.writeMessage(3,ce,E.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(H){return n.Message.setWrapperField(this,1,H)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(H){return n.Message.setField(this,2,H)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,E.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(H){return n.Message.setWrapperField(this,3,H)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(image_segmenter_graph_options_pb);var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),image_segmenter_result.ImageSegmenterResult=void 0;class ImageSegmenterResult{constructor(n,y,S){this.confidenceMasks=n,this.categoryMask=y,this.qualityScores=S}close(){var n,y;(n=this.confidenceMasks)===null||n===void 0||n.forEach(S=>{S.close()}),(y=this.categoryMask)===null||y===void 0||y.close()}}image_segmenter_result.ImageSegmenterResult=ImageSegmenterResult;var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(gt,St,vt,ut){ut===void 0&&(ut=vt);var mt=Object.getOwnPropertyDescriptor(St,vt);mt&&!("get"in mt?!St.__esModule:mt.writable||mt.configurable)||(mt={enumerable:!0,get:function(){return St[vt]}}),Object.defineProperty(gt,ut,mt)}:function(gt,St,vt,ut){ut===void 0&&(ut=vt),gt[ut]=St[vt]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(gt,St){for(var vt in gt)vt==="default"||Object.prototype.hasOwnProperty.call(St,vt)||n(St,gt,vt)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageSegmenter=void 0;const S=calculator_pb,d=calculator_options_pb,m=base_options_pb,s=tensors_to_segmentation_calculator_pb,E=image_segmenter_graph_options_pb,H=segmenter_options_pb,te=vision_task_runner,ce=image_segmenter_result;y(image_segmenter_options,u),y(image_segmenter_result,u);const J="image_in",pe="norm_rect",de="confidence_masks",bt="category_mask",nt="quality_scores",He="mediapipe.tasks.TensorsToSegmentationCalculator";class ot extends te.VisionTaskRunner{static createFromOptions(St,vt){return te.VisionTaskRunner.createVisionInstance(ot,St,vt)}static createFromModelBuffer(St,vt){return te.VisionTaskRunner.createVisionInstance(ot,St,{baseOptions:{modelAssetBuffer:vt}})}static createFromModelPath(St,vt){return te.VisionTaskRunner.createVisionInstance(ot,St,{baseOptions:{modelAssetPath:vt}})}constructor(St,vt){super(new te.VisionGraphRunner(St,vt),J,pe,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new E.ImageSegmenterGraphOptions,this.segmenterOptions=new H.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(St){this.options.setBaseOptions(St)}setOptions(St){var vt,ut;return St.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(St.displayNamesLocale):"displayNamesLocale"in St&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in St&&(this.outputCategoryMask=(vt=St.outputCategoryMask)!==null&&vt!==void 0&&vt),"outputConfidenceMasks"in St&&(this.outputConfidenceMasks=(ut=St.outputConfidenceMasks)===null||ut===void 0||ut),super.applyOptions(St)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var St,vt,ut;const mt=this.getCalculatorGraphConfig().getNodeList().filter(Pt=>Pt.getName().includes(He));if(this.labels=[],mt.length>1)throw new Error(`The graph has more than one ${He}.`);mt.length===1&&((ut=(vt=(St=mt[0].getOptions())===null||St===void 0?void 0:St.getExtension(s.TensorsToSegmentationCalculatorOptions.ext))===null||vt===void 0?void 0:vt.getLabelItemsMap())!==null&&ut!==void 0?ut:new Map).forEach((Pt,Ot)=>{this.labels[Number(Ot)]=Pt.getName()})}segment(St,vt,ut){const mt=typeof vt!="function"?vt:{};return this.userCallback=typeof vt=="function"?vt:ut,this.reset(),this.processImageData(St,mt),this.processResults()}segmentForVideo(St,vt,ut,mt){const Pt=typeof ut!="function"?ut:{};return this.userCallback=typeof ut=="function"?ut:mt,this.reset(),this.processVideoData(St,Pt,vt),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{const St=new ce.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return St;this.userCallback(St)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const St=new S.CalculatorGraphConfig;St.addInputStream(J),St.addInputStream(pe);const vt=new d.CalculatorOptions;vt.setExtension(E.ImageSegmenterGraphOptions.ext,this.options);const ut=new S.CalculatorGraphConfig.Node;ut.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),ut.addInputStream("IMAGE:"+J),ut.addInputStream("NORM_RECT:"+pe),ut.setOptions(vt),St.addNode(ut),this.addKeepaliveNode(St),this.outputConfidenceMasks&&(St.addOutputStream(de),ut.addOutputStream("CONFIDENCE_MASKS:"+de),this.keepStreamAlive(de),this.graphRunner.attachImageVectorListener(de,(Pt,Ot)=>{this.confidenceMasks=Pt.map(Jt=>this.convertToMPMask(Jt,!this.userCallback)),this.setLatestOutputTimestamp(Ot)}),this.graphRunner.attachEmptyPacketListener(de,Pt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(Pt)})),this.outputCategoryMask&&(St.addOutputStream(bt),ut.addOutputStream("CATEGORY_MASK:"+bt),this.keepStreamAlive(bt),this.graphRunner.attachImageListener(bt,(Pt,Ot)=>{this.categoryMask=this.convertToMPMask(Pt,!this.userCallback),this.setLatestOutputTimestamp(Ot)}),this.graphRunner.attachEmptyPacketListener(bt,Pt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Pt)})),St.addOutputStream(nt),ut.addOutputStream("QUALITY_SCORES:"+nt),this.graphRunner.attachFloatVectorListener(nt,(Pt,Ot)=>{this.qualityScores=Pt,this.setLatestOutputTimestamp(Ot)}),this.graphRunner.attachEmptyPacketListener(nt,Pt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Pt)});const mt=St.serializeBinary();this.setGraph(new Uint8Array(mt),!0)}}u.ImageSegmenter=ot}(image_segmenter);var interactive_segmenter={},color_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();y.exportSymbol("proto.mediapipe.Color",null,S),y.exportSymbol("proto.mediapipe.ColorMap",null,S),proto.mediapipe.Color=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.Color,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(d){n.Message.initialize(this,d,0,-1,null,null)},y.inherits(proto.mediapipe.ColorMap,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(d){return proto.mediapipe.Color.toObject(d,this)},proto.mediapipe.Color.toObject=function(d,m){var s,E={r:(s=n.Message.getField(m,1))==null?void 0:s,g:(s=n.Message.getField(m,2))==null?void 0:s,b:(s=n.Message.getField(m,3))==null?void 0:s};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.Color.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(s,m)},proto.mediapipe.Color.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)switch(m.getFieldNumber()){case 1:var s=m.readInt32();d.setR(s);break;case 2:s=m.readInt32(),d.setG(s);break;case 3:s=m.readInt32(),d.setB(s);break;default:m.skipField()}return d},proto.mediapipe.Color.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(d,m){var s=void 0;(s=n.Message.getField(d,1))!=null&&m.writeInt32(1,s),(s=n.Message.getField(d,2))!=null&&m.writeInt32(2,s),(s=n.Message.getField(d,3))!=null&&m.writeInt32(3,s)},proto.mediapipe.Color.prototype.getR=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Color.prototype.clearR=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Color.prototype.getG=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Color.prototype.clearG=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Color.prototype.getB=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Color.prototype.clearB=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(d){return proto.mediapipe.ColorMap.toObject(d,this)},proto.mediapipe.ColorMap.toObject=function(d,m){var s,E={labelToColorMap:(s=m.getLabelToColorMap())?s.toObject(d,proto.mediapipe.Color.toObject):[]};return d&&(E.$jspbMessageInstance=m),E}),proto.mediapipe.ColorMap.deserializeBinary=function(d){var m=new n.BinaryReader(d),s=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(s,m)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(d,m){for(;m.nextField()&&!m.isEndGroup();)if(m.getFieldNumber()===1){var s=d.getLabelToColorMap();m.readMessage(s,function(E,H){n.Map.deserializeBinary(E,H,n.BinaryReader.prototype.readString,n.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)})}else m.skipField();return d},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(d,m){var s=void 0;(s=d.getLabelToColorMap(!0))&&s.getLength()>0&&s.serializeBinary(1,m,n.BinaryWriter.prototype.writeString,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(d){return n.Message.getMapField(this,1,d,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},y.object.extend(u,proto.mediapipe)})(color_pb);var render_data_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=color_pb;y.object.extend(proto,d),y.exportSymbol("proto.mediapipe.RenderAnnotation",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,S),y.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,S),y.exportSymbol("proto.mediapipe.RenderData",null,S),y.exportSymbol("proto.mediapipe.RenderViewport",null,S),proto.mediapipe.RenderData=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},y.inherits(proto.mediapipe.RenderData,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(m){n.Message.initialize(this,m,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},y.inherits(proto.mediapipe.RenderAnnotation,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.Rectangle,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.Oval,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.FilledOval,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.Point,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.Line,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.GradientLine,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(m){n.Message.initialize(this,m,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},y.inherits(proto.mediapipe.RenderAnnotation.Scribble,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.Arrow,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderAnnotation.Text,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(m){n.Message.initialize(this,m,0,-1,null,null)},y.inherits(proto.mediapipe.RenderViewport,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(m){return proto.mediapipe.RenderData.toObject(m,this)},proto.mediapipe.RenderData.toObject=function(m,s){var E,H={renderAnnotationsList:n.Message.toObjectList(s.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,m),sceneClass:(E=n.Message.getField(s,2))==null?void 0:E,sceneViewport:(E=s.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderData.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation;s.readMessage(E,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),m.addRenderAnnotations(E);break;case 2:E=s.readString(),m.setSceneClass(E);break;case 3:E=new proto.mediapipe.RenderViewport,s.readMessage(E,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),m.setSceneViewport(E);break;default:s.skipField()}return m},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRenderAnnotationsList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeString(2,E),(E=m.getSceneViewport())!=null&&s.writeMessage(3,E,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.RenderAnnotation,s)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(m){return n.Message.setWrapperField(this,3,m)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.toObject(m,this)},proto.mediapipe.RenderAnnotation.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),filledRectangle:(E=s.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(m,E),oval:(E=s.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(m,E),filledOval:(E=s.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(m,E),point:(E=s.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(m,E),line:(E=s.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(m,E),arrow:(E=s.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(m,E),text:(E=s.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(m,E),roundedRectangle:(E=s.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,E),filledRoundedRectangle:(E=s.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(m,E),gradientLine:(E=s.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(m,E),scribble:(E=s.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(m,E),thickness:n.Message.getFloatingPointFieldWithDefault(s,11,1),color:(E=s.getColor())&&d.Color.toObject(m,E),sceneTag:(E=n.Message.getField(s,13))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=new proto.mediapipe.RenderAnnotation.FilledRectangle,s.readMessage(E,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),m.setFilledRectangle(E);break;case 3:E=new proto.mediapipe.RenderAnnotation.Oval,s.readMessage(E,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),m.setOval(E);break;case 4:E=new proto.mediapipe.RenderAnnotation.FilledOval,s.readMessage(E,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),m.setFilledOval(E);break;case 5:E=new proto.mediapipe.RenderAnnotation.Point,s.readMessage(E,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),m.setPoint(E);break;case 6:E=new proto.mediapipe.RenderAnnotation.Line,s.readMessage(E,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),m.setLine(E);break;case 7:E=new proto.mediapipe.RenderAnnotation.Arrow,s.readMessage(E,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),m.setArrow(E);break;case 8:E=new proto.mediapipe.RenderAnnotation.Text,s.readMessage(E,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),m.setText(E);break;case 9:E=new proto.mediapipe.RenderAnnotation.RoundedRectangle,s.readMessage(E,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),m.setRoundedRectangle(E);break;case 10:E=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,s.readMessage(E,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),m.setFilledRoundedRectangle(E);break;case 14:E=new proto.mediapipe.RenderAnnotation.GradientLine,s.readMessage(E,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),m.setGradientLine(E);break;case 15:E=new proto.mediapipe.RenderAnnotation.Scribble,s.readMessage(E,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),m.setScribble(E);break;case 11:E=s.readDouble(),m.setThickness(E);break;case 12:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor(E);break;case 13:E=s.readString(),m.setSceneTag(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=m.getFilledRectangle())!=null&&s.writeMessage(2,E,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),(E=m.getOval())!=null&&s.writeMessage(3,E,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(E=m.getFilledOval())!=null&&s.writeMessage(4,E,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),(E=m.getPoint())!=null&&s.writeMessage(5,E,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),(E=m.getLine())!=null&&s.writeMessage(6,E,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),(E=m.getArrow())!=null&&s.writeMessage(7,E,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),(E=m.getText())!=null&&s.writeMessage(8,E,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),(E=m.getRoundedRectangle())!=null&&s.writeMessage(9,E,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(E=m.getFilledRoundedRectangle())!=null&&s.writeMessage(10,E,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),(E=m.getGradientLine())!=null&&s.writeMessage(14,E,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),(E=m.getScribble())!=null&&s.writeMessage(15,E,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),(E=n.Message.getField(m,11))!=null&&s.writeDouble(11,E),(E=m.getColor())!=null&&s.writeMessage(12,E,d.Color.serializeBinaryToWriter),(E=n.Message.getField(m,13))!=null&&s.writeString(13,E)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(m,s){var E,H={left:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,top:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,right:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,bottom:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),rotation:(E=n.Message.getOptionalFloatingPointField(s,6))==null?void 0:E,topLeftThickness:(E=n.Message.getOptionalFloatingPointField(s,7))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setLeft(E);break;case 2:E=s.readDouble(),m.setTop(E);break;case 3:E=s.readDouble(),m.setRight(E);break;case 4:E=s.readDouble(),m.setBottom(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=s.readDouble(),m.setRotation(E);break;case 7:E=s.readDouble(),m.setTopLeftThickness(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&s.writeDouble(6,E),(E=n.Message.getField(m,7))!=null&&s.writeDouble(7,E)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return n.Message.getField(this,7)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),fillColor:(E=s.getFillColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=m.getFillColor())!=null&&s.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E),cornerRadius:n.Message.getFieldWithDefault(s,2,0),lineType:n.Message.getFieldWithDefault(s,3,4)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E);break;case 2:E=s.readInt32(),m.setCornerRadius(E);break;case 3:E=s.readInt32(),m.setLineType(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeInt32(3,E)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(m,s){var E,H={roundedRectangle:(E=s.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(m,E),fillColor:(E=s.getFillColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.RoundedRectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),m.setRoundedRectangle(E);break;case 2:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getRoundedRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(E=m.getFillColor())!=null&&s.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Oval.toObject(m,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(m,s){var E,H={rectangle:(E=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var E=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(E,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),m.setRectangle(E)}else s.skipField();return m},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(m,s){var E;(E=m.getRectangle())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(m,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(m,s){var E,H={oval:(E=s.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(m,E),fillColor:(E=s.getFillColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=new proto.mediapipe.RenderAnnotation.Oval;s.readMessage(E,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),m.setOval(E);break;case 2:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setFillColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(m,s){var E=void 0;(E=m.getOval())!=null&&s.writeMessage(1,E,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(E=m.getFillColor())!=null&&s.writeMessage(2,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(m){return n.Message.setWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(m){return n.Message.setWrapperField(this,2,m)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Point.toObject(m,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(m,s){var E,H={x:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,y:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,3,!1)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setX(E);break;case 2:E=s.readDouble(),m.setY(E);break;case 3:E=s.readBool(),m.setNormalized(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeBool(3,E)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Line.toObject(m,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(m,s){var E,H={xStart:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),lineType:n.Message.getFieldWithDefault(s,6,1)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setXStart(E);break;case 2:E=s.readDouble(),m.setYStart(E);break;case 3:E=s.readDouble(),m.setXEnd(E);break;case 4:E=s.readDouble(),m.setYEnd(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=s.readEnum(),m.setLineType(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&s.writeEnum(6,E)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(m,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(m,s){var E,H={xStart:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),color1:(E=s.getColor1())&&d.Color.toObject(m,E),color2:(E=s.getColor2())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setXStart(E);break;case 2:E=s.readDouble(),m.setYStart(E);break;case 3:E=s.readDouble(),m.setXEnd(E);break;case 4:E=s.readDouble(),m.setYEnd(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor1(E);break;case 7:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setColor2(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=m.getColor1())!=null&&s.writeMessage(6,E,d.Color.serializeBinaryToWriter),(E=m.getColor2())!=null&&s.writeMessage(7,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return n.Message.getWrapperField(this,d.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(m){return n.Message.setWrapperField(this,6,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return n.Message.getWrapperField(this,d.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(m){return n.Message.setWrapperField(this,7,m)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Scribble.toObject(m,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(m,s){var E={pointList:n.Message.toObjectList(s.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,m)};return m&&(E.$jspbMessageInstance=s),E}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var E=new proto.mediapipe.RenderAnnotation.Point;s.readMessage(E,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),m.addPoint(E)}else s.skipField();return m},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(m,s){var E;(E=m.getPointList()).length>0&&s.writeRepeatedMessage(1,E,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(m){return n.Message.setRepeatedWrapperField(this,1,m)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(m,s){return n.Message.addToRepeatedWrapperField(this,1,m,proto.mediapipe.RenderAnnotation.Point,s)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Arrow.toObject(m,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(m,s){var E,H={xStart:(E=n.Message.getOptionalFloatingPointField(s,1))==null?void 0:E,yStart:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,xEnd:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,yEnd:(E=n.Message.getOptionalFloatingPointField(s,4))==null?void 0:E,normalized:n.Message.getBooleanFieldWithDefault(s,5,!1)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readDouble();m.setXStart(E);break;case 2:E=s.readDouble(),m.setYStart(E);break;case 3:E=s.readDouble(),m.setXEnd(E);break;case 4:E=s.readDouble(),m.setYEnd(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeDouble(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(m){return proto.mediapipe.RenderAnnotation.Text.toObject(m,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(m,s){var E,H={displayText:(E=n.Message.getField(s,1))==null?void 0:E,left:(E=n.Message.getOptionalFloatingPointField(s,2))==null?void 0:E,baseline:(E=n.Message.getOptionalFloatingPointField(s,3))==null?void 0:E,fontHeight:n.Message.getFloatingPointFieldWithDefault(s,4,8),normalized:n.Message.getBooleanFieldWithDefault(s,5,!1),fontFace:n.Message.getFieldWithDefault(s,6,0),centerHorizontally:n.Message.getBooleanFieldWithDefault(s,7,!1),centerVertically:n.Message.getBooleanFieldWithDefault(s,8,!1),outlineThickness:n.Message.getFloatingPointFieldWithDefault(s,11,0),outlineColor:(E=s.getOutlineColor())&&d.Color.toObject(m,E)};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setDisplayText(E);break;case 2:E=s.readDouble(),m.setLeft(E);break;case 3:E=s.readDouble(),m.setBaseline(E);break;case 4:E=s.readDouble(),m.setFontHeight(E);break;case 5:E=s.readBool(),m.setNormalized(E);break;case 6:E=s.readInt32(),m.setFontFace(E);break;case 7:E=s.readBool(),m.setCenterHorizontally(E);break;case 8:E=s.readBool(),m.setCenterVertically(E);break;case 11:E=s.readDouble(),m.setOutlineThickness(E);break;case 12:E=new d.Color,s.readMessage(E,d.Color.deserializeBinaryFromReader),m.setOutlineColor(E);break;default:s.skipField()}return m},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=n.Message.getField(m,2))!=null&&s.writeDouble(2,E),(E=n.Message.getField(m,3))!=null&&s.writeDouble(3,E),(E=n.Message.getField(m,4))!=null&&s.writeDouble(4,E),(E=n.Message.getField(m,5))!=null&&s.writeBool(5,E),(E=n.Message.getField(m,6))!=null&&s.writeInt32(6,E),(E=n.Message.getField(m,7))!=null&&s.writeBool(7,E),(E=n.Message.getField(m,8))!=null&&s.writeBool(8,E),(E=n.Message.getField(m,11))!=null&&s.writeDouble(11,E),(E=m.getOutlineColor())!=null&&s.writeMessage(12,E,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(m){return n.Message.setField(this,5,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(m){return n.Message.setField(this,6,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return n.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(m){return n.Message.setField(this,7,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return n.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(m){return n.Message.setField(this,8,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(m){return n.Message.setField(this,11,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(m){return n.Message.setWrapperField(this,12,m)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(m){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(m){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(m){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(m){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(m){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(m){return n.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(m){return n.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(m){return n.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(m){return n.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,9)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(m){return n.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(m){return n.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return n.Message.getField(this,14)!=null},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(m){return n.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],m)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(m){return n.Message.setField(this,11,m)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(m){return n.Message.setWrapperField(this,12,m)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return n.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(m){return n.Message.setField(this,13,m)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return n.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return n.Message.getField(this,13)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(m){return proto.mediapipe.RenderViewport.toObject(m,this)},proto.mediapipe.RenderViewport.toObject=function(m,s){var E,H={id:(E=n.Message.getField(s,1))==null?void 0:E,widthPx:(E=n.Message.getField(s,2))==null?void 0:E,heightPx:(E=n.Message.getField(s,3))==null?void 0:E,composeOnVideo:(E=n.Message.getBooleanField(s,4))==null?void 0:E};return m&&(H.$jspbMessageInstance=s),H}),proto.mediapipe.RenderViewport.deserializeBinary=function(m){var s=new n.BinaryReader(m),E=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(E,s)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(m,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var E=s.readString();m.setId(E);break;case 2:E=s.readInt32(),m.setWidthPx(E);break;case 3:E=s.readInt32(),m.setHeightPx(E);break;case 4:E=s.readBool(),m.setComposeOnVideo(E);break;default:s.skipField()}return m},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var m=new n.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,m),m.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(m,s){var E=void 0;(E=n.Message.getField(m,1))!=null&&s.writeString(1,E),(E=n.Message.getField(m,2))!=null&&s.writeInt32(2,E),(E=n.Message.getField(m,3))!=null&&s.writeInt32(3,E),(E=n.Message.getField(m,4))!=null&&s.writeBool(4,E)},proto.mediapipe.RenderViewport.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(m){return n.Message.setField(this,1,m)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(m){return n.Message.setField(this,2,m)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(m){return n.Message.setField(this,3,m)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(m){return n.Message.setField(this,4,m)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return n.Message.getField(this,4)!=null},y.object.extend(u,proto.mediapipe)})(render_data_pb);var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),interactive_segmenter_result.InteractiveSegmenterResult=void 0;class InteractiveSegmenterResult{constructor(n,y,S){this.confidenceMasks=n,this.categoryMask=y,this.qualityScores=S}close(){var n,y;(n=this.confidenceMasks)===null||n===void 0||n.forEach(S=>{S.close()}),(y=this.categoryMask)===null||y===void 0||y.close()}}interactive_segmenter_result.InteractiveSegmenterResult=InteractiveSegmenterResult;var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(St,vt,ut,mt){mt===void 0&&(mt=ut);var Pt=Object.getOwnPropertyDescriptor(vt,ut);Pt&&!("get"in Pt?!vt.__esModule:Pt.writable||Pt.configurable)||(Pt={enumerable:!0,get:function(){return vt[ut]}}),Object.defineProperty(St,mt,Pt)}:function(St,vt,ut,mt){mt===void 0&&(mt=ut),St[mt]=vt[ut]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(St,vt){for(var ut in St)ut==="default"||Object.prototype.hasOwnProperty.call(vt,ut)||n(vt,St,ut)};Object.defineProperty(u,"__esModule",{value:!0}),u.InteractiveSegmenter=void 0;const S=calculator_pb,d=calculator_options_pb,m=base_options_pb,s=image_segmenter_graph_options_pb,E=segmenter_options_pb,H=vision_task_runner,te=color_pb,ce=render_data_pb,J=interactive_segmenter_result;y(interactive_segmenter_options,u),y(interactive_segmenter_result,u);const pe="image_in",de="norm_rect_in",bt="roi_in",nt="confidence_masks",He="category_mask",ot="quality_scores";class gt extends H.VisionTaskRunner{static createFromOptions(vt,ut){return H.VisionTaskRunner.createVisionInstance(gt,vt,ut)}static createFromModelBuffer(vt,ut){return H.VisionTaskRunner.createVisionInstance(gt,vt,{baseOptions:{modelAssetBuffer:ut}})}static createFromModelPath(vt,ut){return H.VisionTaskRunner.createVisionInstance(gt,vt,{baseOptions:{modelAssetPath:ut}})}constructor(vt,ut){super(new H.VisionGraphRunner(vt,ut),pe,de,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new s.ImageSegmenterGraphOptions,this.segmenterOptions=new E.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new m.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(vt){this.options.setBaseOptions(vt)}setOptions(vt){var ut,mt;return"outputCategoryMask"in vt&&(this.outputCategoryMask=(ut=vt.outputCategoryMask)!==null&&ut!==void 0&&ut),"outputConfidenceMasks"in vt&&(this.outputConfidenceMasks=(mt=vt.outputConfidenceMasks)===null||mt===void 0||mt),super.applyOptions(vt)}segment(vt,ut,mt,Pt){const Ot=typeof mt!="function"?mt:{};return this.userCallback=typeof mt=="function"?mt:Pt,this.reset(),this.processRenderData(ut,this.getSynctheticTimestamp()),this.processImageData(vt,Ot),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{const vt=new J.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return vt;this.userCallback(vt)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const vt=new S.CalculatorGraphConfig;vt.addInputStream(pe),vt.addInputStream(bt),vt.addInputStream(de);const ut=new d.CalculatorOptions;ut.setExtension(s.ImageSegmenterGraphOptions.ext,this.options);const mt=new S.CalculatorGraphConfig.Node;mt.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),mt.addInputStream("IMAGE:"+pe),mt.addInputStream("ROI:"+bt),mt.addInputStream("NORM_RECT:"+de),mt.setOptions(ut),vt.addNode(mt),this.addKeepaliveNode(vt),this.outputConfidenceMasks&&(vt.addOutputStream(nt),mt.addOutputStream("CONFIDENCE_MASKS:"+nt),this.keepStreamAlive(nt),this.graphRunner.attachImageVectorListener(nt,(Ot,Jt)=>{this.confidenceMasks=Ot.map(zt=>this.convertToMPMask(zt,!this.userCallback)),this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachEmptyPacketListener(nt,Ot=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(Ot)})),this.outputCategoryMask&&(vt.addOutputStream(He),mt.addOutputStream("CATEGORY_MASK:"+He),this.keepStreamAlive(He),this.graphRunner.attachImageListener(He,(Ot,Jt)=>{this.categoryMask=this.convertToMPMask(Ot,!this.userCallback),this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachEmptyPacketListener(He,Ot=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Ot)})),vt.addOutputStream(ot),mt.addOutputStream("QUALITY_SCORES:"+ot),this.graphRunner.attachFloatVectorListener(ot,(Ot,Jt)=>{this.qualityScores=Ot,this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachEmptyPacketListener(ot,Ot=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Ot)});const Pt=vt.serializeBinary();this.setGraph(new Uint8Array(Pt),!0)}processRenderData(vt,ut){const mt=new ce.RenderData,Pt=new ce.RenderAnnotation,Ot=new te.Color;if(Ot.setR(255),Pt.setColor(Ot),vt.keypoint&&vt.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(vt.keypoint){const Jt=new ce.RenderAnnotation.Point;Jt.setNormalized(!0),Jt.setX(vt.keypoint.x),Jt.setY(vt.keypoint.y),Pt.setPoint(Jt)}else{if(!vt.scribble)throw new Error("Must provide either a keypoint or a scribble.");{const Jt=new ce.RenderAnnotation.Scribble;for(const zt of vt.scribble){const _n=new ce.RenderAnnotation.Point;_n.setNormalized(!0),_n.setX(zt.x),_n.setY(zt.y),Jt.addPoint(_n)}Pt.setScribble(Jt)}}mt.addRenderAnnotations(Pt),this.graphRunner.addProtoToStream(mt.serializeBinary(),"mediapipe.RenderData",bt,ut)}}u.InteractiveSegmenter=gt}(interactive_segmenter);var object_detector={},object_detector_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,S),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(E){n.Message.initialize(this,E,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},y.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(E,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te),displayNamesLocale:n.Message.getFieldWithDefault(H,2,"en"),maxResults:n.Message.getFieldWithDefault(H,3,-1),scoreThreshold:(te=n.Message.getOptionalFloatingPointField(H,4))==null?void 0:te,categoryAllowlistList:(te=n.Message.getRepeatedField(H,5))==null?void 0:te,categoryDenylistList:(te=n.Message.getRepeatedField(H,6))==null?void 0:te};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te);break;case 2:te=H.readString(),E.setDisplayNamesLocale(te);break;case 3:te=H.readInt32(),E.setMaxResults(te);break;case 4:te=H.readFloat(),E.setScoreThreshold(te);break;case 5:te=H.readString(),E.addCategoryAllowlist(te);break;case 6:te=H.readString(),E.addCategoryDenylist(te);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter),(te=n.Message.getField(E,2))!=null&&H.writeString(2,te),(te=n.Message.getField(E,3))!=null&&H.writeInt32(3,te),(te=n.Message.getField(E,4))!=null&&H.writeFloat(4,te),(te=E.getCategoryAllowlistList()).length>0&&H.writeRepeatedString(5,te),(te=E.getCategoryDenylistList()).length>0&&H.writeRepeatedString(6,te)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(E){return n.Message.setField(this,5,E||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(E,H){return n.Message.addToRepeatedField(this,5,E,H)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(E){return n.Message.setField(this,6,E||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(E,H){return n.Message.addToRepeatedField(this,6,E,H)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),m.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.object_detector.proto)})(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(bt,nt,He,ot){ot===void 0&&(ot=He);var gt=Object.getOwnPropertyDescriptor(nt,He);gt&&!("get"in gt?!nt.__esModule:gt.writable||gt.configurable)||(gt={enumerable:!0,get:function(){return nt[He]}}),Object.defineProperty(bt,ot,gt)}:function(bt,nt,He,ot){ot===void 0&&(ot=He),bt[ot]=nt[He]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(bt,nt){for(var He in bt)He==="default"||Object.prototype.hasOwnProperty.call(nt,He)||n(nt,bt,He)};Object.defineProperty(u,"__esModule",{value:!0}),u.ObjectDetector=void 0;const S=calculator_pb,d=calculator_options_pb,m=detection_pb,s=base_options_pb,E=object_detector_options_pb,H=detection_result,te=vision_task_runner,ce="input_frame_gpu",J="norm_rect",pe="detections";y(object_detector_options,u),y(object_detector_result,u);class de extends te.VisionTaskRunner{static createFromOptions(nt,He){return te.VisionTaskRunner.createVisionInstance(de,nt,He)}static createFromModelBuffer(nt,He){return te.VisionTaskRunner.createVisionInstance(de,nt,{baseOptions:{modelAssetBuffer:He}})}static createFromModelPath(nt,He){return rs(this,null,function*(){return te.VisionTaskRunner.createVisionInstance(de,nt,{baseOptions:{modelAssetPath:He}})})}constructor(nt,He){super(new te.VisionGraphRunner(nt,He),ce,J,!1),this.result={detections:[]},this.options=new E.ObjectDetectorOptions,this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(nt){this.options.setBaseOptions(nt)}setOptions(nt){return nt.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(nt.displayNamesLocale):"displayNamesLocale"in nt&&this.options.clearDisplayNamesLocale(),nt.maxResults!==void 0?this.options.setMaxResults(nt.maxResults):"maxResults"in nt&&this.options.clearMaxResults(),nt.scoreThreshold!==void 0?this.options.setScoreThreshold(nt.scoreThreshold):"scoreThreshold"in nt&&this.options.clearScoreThreshold(),nt.categoryAllowlist!==void 0?this.options.setCategoryAllowlistList(nt.categoryAllowlist):"categoryAllowlist"in nt&&this.options.clearCategoryAllowlistList(),nt.categoryDenylist!==void 0?this.options.setCategoryDenylistList(nt.categoryDenylist):"categoryDenylist"in nt&&this.options.clearCategoryDenylistList(),this.applyOptions(nt)}detect(nt,He){return this.result={detections:[]},this.processImageData(nt,He),this.result}detectForVideo(nt,He,ot){return this.result={detections:[]},this.processVideoData(nt,ot,He),this.result}addJsObjectDetections(nt){for(const He of nt){const ot=m.Detection.deserializeBinary(He);this.result.detections.push((0,H.convertFromDetectionProto)(ot))}}refreshGraph(){const nt=new S.CalculatorGraphConfig;nt.addInputStream(ce),nt.addInputStream(J),nt.addOutputStream(pe);const He=new d.CalculatorOptions;He.setExtension(E.ObjectDetectorOptions.ext,this.options);const ot=new S.CalculatorGraphConfig.Node;ot.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),ot.addInputStream("IMAGE:"+ce),ot.addInputStream("NORM_RECT:"+J),ot.addOutputStream("DETECTIONS:"+pe),ot.setOptions(He),nt.addNode(ot),this.graphRunner.attachProtoVectorListener(pe,(St,vt)=>{this.addJsObjectDetections(St),this.setLatestOutputTimestamp(vt)}),this.graphRunner.attachEmptyPacketListener(pe,St=>{this.setLatestOutputTimestamp(St)});const gt=nt.serializeBinary();this.setGraph(new Uint8Array(gt),!0)}}u.ObjectDetector=de}(object_detector);var pose_landmarker={},pose_detector_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,S),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(H,3,.5),numPoses:(te=n.Message.getField(H,4))==null?void 0:te};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te);break;case 2:te=H.readFloat(),E.setMinDetectionConfidence(te);break;case 3:te=H.readFloat(),E.setMinSuppressionThreshold(te);break;case 4:te=H.readInt32(),E.setNumPoses(te);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter),(te=n.Message.getField(E,2))!=null&&H.writeFloat(2,te),(te=n.Message.getField(E,3))!=null&&H.writeFloat(3,te),(te=n.Message.getField(E,4))!=null&&H.writeInt32(4,te)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(E){return n.Message.setField(this,3,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(E){return n.Message.setField(this,4,E)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.pose_detector.proto)})(pose_detector_graph_options_pb);var pose_landmarker_graph_options_pb={},pose_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s),y.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,S),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(E){n.Message.initialize(this,E,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(E){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(E,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(E,H){var te,ce={baseOptions:(te=H.getBaseOptions())&&s.BaseOptions.toObject(E,te),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(H,2,.5)};return E&&(ce.$jspbMessageInstance=H),ce}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(E){var H=new n.BinaryReader(E),te=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader(te,H)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(E,H){for(;H.nextField()&&!H.isEndGroup();)switch(H.getFieldNumber()){case 1:var te=new s.BaseOptions;H.readMessage(te,s.BaseOptions.deserializeBinaryFromReader),E.setBaseOptions(te);break;case 2:te=H.readFloat(),E.setMinDetectionConfidence(te);break;default:H.skipField()}return E},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var E=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,E),E.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(E,H){var te=void 0;(te=E.getBaseOptions())!=null&&H.writeMessage(1,te,s.BaseOptions.serializeBinaryToWriter),(te=n.Message.getField(E,2))!=null&&H.writeFloat(2,te)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(E){return n.Message.setWrapperField(this,1,E)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(E){return n.Message.setField(this,2,E)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(pose_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,y=n,S=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||S!==void 0&&S||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;y.object.extend(proto,d);var m=calculator_options_pb;y.object.extend(proto,m);var s=base_options_pb;y.object.extend(proto,s);var E=pose_detector_graph_options_pb;y.object.extend(proto,E);var H=pose_landmarks_detector_graph_options_pb;y.object.extend(proto,H),y.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,S),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function(te){n.Message.initialize(this,te,0,-1,null,null)},y.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,n.Message),y.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function(te){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject(te,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function(te,ce){var J,pe={baseOptions:(J=ce.getBaseOptions())&&s.BaseOptions.toObject(te,J),poseDetectorGraphOptions:(J=ce.getPoseDetectorGraphOptions())&&E.PoseDetectorGraphOptions.toObject(te,J),poseLandmarksDetectorGraphOptions:(J=ce.getPoseLandmarksDetectorGraphOptions())&&H.PoseLandmarksDetectorGraphOptions.toObject(te,J),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(ce,4,.5)};return te&&(pe.$jspbMessageInstance=ce),pe}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function(te){var ce=new n.BinaryReader(te),J=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(J,ce)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function(te,ce){for(;ce.nextField()&&!ce.isEndGroup();)switch(ce.getFieldNumber()){case 1:var J=new s.BaseOptions;ce.readMessage(J,s.BaseOptions.deserializeBinaryFromReader),te.setBaseOptions(J);break;case 2:J=new E.PoseDetectorGraphOptions,ce.readMessage(J,E.PoseDetectorGraphOptions.deserializeBinaryFromReader),te.setPoseDetectorGraphOptions(J);break;case 3:J=new H.PoseLandmarksDetectorGraphOptions,ce.readMessage(J,H.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),te.setPoseLandmarksDetectorGraphOptions(J);break;case 4:J=ce.readFloat(),te.setMinTrackingConfidence(J);break;default:ce.skipField()}return te},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var te=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,te),te.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function(te,ce){var J=void 0;(J=te.getBaseOptions())!=null&&ce.writeMessage(1,J,s.BaseOptions.serializeBinaryToWriter),(J=te.getPoseDetectorGraphOptions())!=null&&ce.writeMessage(2,J,E.PoseDetectorGraphOptions.serializeBinaryToWriter),(J=te.getPoseLandmarksDetectorGraphOptions())!=null&&ce.writeMessage(3,J,H.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),(J=n.Message.getField(te,4))!=null&&ce.writeFloat(4,J)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function(te){return n.Message.setWrapperField(this,1,te)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return n.Message.getWrapperField(this,E.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function(te){return n.Message.setWrapperField(this,2,te)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,H.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function(te){return n.Message.setWrapperField(this,3,te)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(te){return n.Message.setField(this,4,te)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),m.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),m.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,y.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarker_graph_options_pb);var pose_landmarker_result={};Object.defineProperty(pose_landmarker_result,"__esModule",{value:!0}),pose_landmarker_result.PoseLandmarkerResult=void 0;class PoseLandmarkerResult{constructor(n,y,S){this.landmarks=n,this.worldLandmarks=y,this.segmentationMasks=S}close(){var n;(n=this.segmentationMasks)===null||n===void 0||n.forEach(y=>{y.close()})}}pose_landmarker_result.PoseLandmarkerResult=PoseLandmarkerResult;var pose_landmarker_options={};Object.defineProperty(pose_landmarker_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(vt,ut,mt,Pt){Pt===void 0&&(Pt=mt);var Ot=Object.getOwnPropertyDescriptor(ut,mt);Ot&&!("get"in Ot?!ut.__esModule:Ot.writable||Ot.configurable)||(Ot={enumerable:!0,get:function(){return ut[mt]}}),Object.defineProperty(vt,Pt,Ot)}:function(vt,ut,mt,Pt){Pt===void 0&&(Pt=mt),vt[Pt]=ut[mt]}),y=commonjsGlobal&&commonjsGlobal.__exportStar||function(vt,ut){for(var mt in vt)mt==="default"||Object.prototype.hasOwnProperty.call(ut,mt)||n(ut,vt,mt)};Object.defineProperty(u,"__esModule",{value:!0}),u.PoseLandmarker=void 0;const S=calculator_pb,d=calculator_options_pb,m=landmark_pb,s=base_options_pb,E=pose_detector_graph_options_pb,H=pose_landmarker_graph_options_pb,te=pose_landmarks_detector_graph_options_pb,ce=landmark_result,J=vision_task_runner,pe=pose_landmarker_result;y(pose_landmarker_options,u),y(pose_landmarker_result,u);const de="image_in",bt="norm_rect",nt="normalized_landmarks",He="world_landmarks",ot="segmentation_masks",gt=.5;class St extends J.VisionTaskRunner{static createFromOptions(ut,mt){return J.VisionTaskRunner.createVisionInstance(St,ut,mt)}static createFromModelBuffer(ut,mt){return J.VisionTaskRunner.createVisionInstance(St,ut,{baseOptions:{modelAssetBuffer:mt}})}static createFromModelPath(ut,mt){return J.VisionTaskRunner.createVisionInstance(St,ut,{baseOptions:{modelAssetPath:mt}})}constructor(ut,mt){super(new J.VisionGraphRunner(ut,mt),de,bt,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new H.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.poseLandmarksDetectorGraphOptions=new te.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new E.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ut){this.options.setBaseOptions(ut)}setOptions(ut){var mt,Pt,Ot,Jt,zt;return"numPoses"in ut&&this.poseDetectorGraphOptions.setNumPoses((mt=ut.numPoses)!==null&&mt!==void 0?mt:1),"minPoseDetectionConfidence"in ut&&this.poseDetectorGraphOptions.setMinDetectionConfidence((Pt=ut.minPoseDetectionConfidence)!==null&&Pt!==void 0?Pt:gt),"minTrackingConfidence"in ut&&this.options.setMinTrackingConfidence((Ot=ut.minTrackingConfidence)!==null&&Ot!==void 0?Ot:gt),"minPosePresenceConfidence"in ut&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence((Jt=ut.minPosePresenceConfidence)!==null&&Jt!==void 0?Jt:gt),"outputSegmentationMasks"in ut&&(this.outputSegmentationMasks=(zt=ut.outputSegmentationMasks)!==null&&zt!==void 0&&zt),this.applyOptions(ut)}detect(ut,mt,Pt){const Ot=typeof mt!="function"?mt:{};return this.userCallback=typeof mt=="function"?mt:Pt,this.resetResults(),this.processImageData(ut,Ot),this.processResults()}detectForVideo(ut,mt,Pt,Ot){const Jt=typeof Pt!="function"?Pt:{};return this.userCallback=typeof Pt=="function"?Pt:Ot,this.resetResults(),this.processVideoData(ut,Jt,mt),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{const ut=new pe.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return ut;this.userCallback(ut)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(gt),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(gt),this.options.setMinTrackingConfidence(gt)}addJsLandmarks(ut){this.landmarks=[];for(const mt of ut){const Pt=m.NormalizedLandmarkList.deserializeBinary(mt);this.landmarks.push((0,ce.convertToLandmarks)(Pt))}}adddJsWorldLandmarks(ut){this.worldLandmarks=[];for(const mt of ut){const Pt=m.LandmarkList.deserializeBinary(mt);this.worldLandmarks.push((0,ce.convertToWorldLandmarks)(Pt))}}refreshGraph(){const ut=new S.CalculatorGraphConfig;ut.addInputStream(de),ut.addInputStream(bt),ut.addOutputStream(nt),ut.addOutputStream(He),ut.addOutputStream(ot);const mt=new d.CalculatorOptions;mt.setExtension(H.PoseLandmarkerGraphOptions.ext,this.options);const Pt=new S.CalculatorGraphConfig.Node;Pt.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Pt.addInputStream("IMAGE:"+de),Pt.addInputStream("NORM_RECT:"+bt),Pt.addOutputStream("NORM_LANDMARKS:"+nt),Pt.addOutputStream("WORLD_LANDMARKS:"+He),Pt.setOptions(mt),ut.addNode(Pt),this.addKeepaliveNode(ut),this.graphRunner.attachProtoVectorListener(nt,(Jt,zt)=>{this.addJsLandmarks(Jt),this.setLatestOutputTimestamp(zt)}),this.graphRunner.attachEmptyPacketListener(nt,Jt=>{this.landmarks=[],this.setLatestOutputTimestamp(Jt)}),this.graphRunner.attachProtoVectorListener(He,(Jt,zt)=>{this.adddJsWorldLandmarks(Jt),this.setLatestOutputTimestamp(zt)}),this.graphRunner.attachEmptyPacketListener(He,Jt=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(Jt)}),this.outputSegmentationMasks&&(Pt.addOutputStream("SEGMENTATION_MASK:"+ot),this.keepStreamAlive(ot),this.graphRunner.attachImageVectorListener(ot,(Jt,zt)=>{this.segmentationMasks=Jt.map(_n=>this.convertToMPMask(_n,!this.userCallback)),this.setLatestOutputTimestamp(zt)}),this.graphRunner.attachEmptyPacketListener(ot,Jt=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(Jt)}));const Ot=ut.serializeBinary();this.setGraph(new Uint8Array(Ot),!0)}}u.PoseLandmarker=St,St.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]}(pose_landmarker),Object.defineProperty(vision,"__esModule",{value:!0});var PoseLandmarker_1=vision.PoseLandmarker=ObjectDetector_1=vision.ObjectDetector=InteractiveSegmenter_1=vision.InteractiveSegmenter=ImageSegmenter_1=vision.ImageSegmenter=ImageEmbedder_1=vision.ImageEmbedder=ImageClassifier_1=vision.ImageClassifier=HandLandmarker_1=vision.HandLandmarker=GestureRecognizer_1=vision.GestureRecognizer=FaceStylizer_1=vision.FaceStylizer=FaceLandmarker_1=vision.FaceLandmarker=FaceDetector_1=vision.FaceDetector=MPMask_1=vision.MPMask=MPImage_1=vision.MPImage=FilesetResolver_1=vision.FilesetResolver=DrawingUtils_1=vision.DrawingUtils=void 0;const fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,image_1=image,mask_1=mask,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,pose_landmarker_1=pose_landmarker,DrawingUtils=drawing_utils_1.DrawingUtils;var DrawingUtils_1=vision.DrawingUtils=DrawingUtils;const FilesetResolver=fileset_resolver_1.FilesetResolver;var FilesetResolver_1=vision.FilesetResolver=FilesetResolver;const MPImage=image_1.MPImage;var MPImage_1=vision.MPImage=MPImage;const MPMask=mask_1.MPMask;var MPMask_1=vision.MPMask=MPMask;const FaceDetector=face_detector_1.FaceDetector;var FaceDetector_1=vision.FaceDetector=FaceDetector;const FaceLandmarker=face_landmarker_1.FaceLandmarker;var FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker;const FaceStylizer=face_stylizer_1.FaceStylizer;var FaceStylizer_1=vision.FaceStylizer=FaceStylizer;const GestureRecognizer=gesture_recognizer_1.GestureRecognizer;var GestureRecognizer_1=vision.GestureRecognizer=GestureRecognizer;const HandLandmarker=hand_landmarker_1.HandLandmarker;var HandLandmarker_1=vision.HandLandmarker=HandLandmarker;const ImageClassifier=image_classifier_1.ImageClassifier;var ImageClassifier_1=vision.ImageClassifier=ImageClassifier;const ImageEmbedder=image_embedder_1.ImageEmbedder;var ImageEmbedder_1=vision.ImageEmbedder=ImageEmbedder;const ImageSegmenter=image_segmenter_1.ImageSegmenter;var ImageSegmenter_1=vision.ImageSegmenter=ImageSegmenter;const InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter;var InteractiveSegmenter_1=vision.InteractiveSegmenter=InteractiveSegmenter;const ObjectDetector=object_detector_1.ObjectDetector;var ObjectDetector_1=vision.ObjectDetector=ObjectDetector;const PoseLandmarker=pose_landmarker_1.PoseLandmarker;PoseLandmarker_1=vision.PoseLandmarker=PoseLandmarker},99477:function(u,n,y){"use strict";y.r(n),y.d(n,{ACESFilmicToneMapping:function(){return js},AddEquation:function(){return Jt},AddOperation:function(){return ri},AdditiveAnimationBlendMode:function(){return qd},AdditiveBlending:function(){return ut},AlphaFormat:function(){return El},AlwaysCompare:function(){return Zd},AlwaysDepth:function(){return Li},AlwaysStencilFunc:function(){return id},AmbientLight:function(){return Kv},AmbientLightProbe:function(){return Yu},AnimationAction:function(){return by},AnimationClip:function(){return R0},AnimationLoader:function(){return pE},AnimationMixer:function(){return My},AnimationObjectGroup:function(){return l2},AnimationUtils:function(){return aE},ArcCurve:function(){return oy},ArrayCamera:function(){return K1},ArrowHelper:function(){return NE},Audio:function(){return i2},AudioAnalyser:function(){return bE},AudioContext:function(){return Jf},AudioListener:function(){return vE},AudioLoader:function(){return Ey},AxesHelper:function(){return di},BackSide:function(){return He},BasicDepthPacking:function(){return Yi},BasicShadowMap:function(){return J},Bone:function(){return ty},BooleanKeyframeTrack:function(){return Ki},Box2:function(){return FE},Box3:function(){return Es},Box3Helper:function(){return m2},BoxGeometry:function(){return kc},BoxHelper:function(){return Lo},BufferAttribute:function(){return Qi},BufferGeometry:function(){return ui},BufferGeometryLoader:function(){return kh},ByteType:function(){return _l},Cache:function(){return zd},Camera:function(){return Xo},CameraHelper:function(){return GE},CanvasTexture:function(){return Gf},CapsuleGeometry:function(){return Od},CatmullRomCurve3:function(){return _v},CineonToneMapping:function(){return As},CircleGeometry:function(){return h0},ClampToEdgeWrapping:function(){return ao},Clock:function(){return t2},Color:function(){return rr},ColorKeyframeTrack:function(){return cm},ColorManagement:function(){return nl},CompressedArrayTexture:function(){return V3},CompressedCubeTexture:function(){return vv},CompressedTexture:function(){return lu},CompressedTextureLoader:function(){return uE},ConeGeometry:function(){return im},CubeCamera:function(){return fp},CubeReflectionMapping:function(){return vs},CubeRefractionMapping:function(){return ss},CubeTexture:function(){return Nl},CubeTextureLoader:function(){return Wv},CubeUVReflectionMapping:function(){return da},CubicBezierCurve:function(){return nm},CubicBezierCurve3:function(){return bv},CubicInterpolant:function(){return fy},CullFaceBack:function(){return H},CullFaceFront:function(){return te},CullFaceFrontBack:function(){return ce},CullFaceNone:function(){return E},Curve:function(){return cu},CurvePath:function(){return py},CustomBlending:function(){return Ot},CustomToneMapping:function(){return Zs},CylinderGeometry:function(){return Dd},Cylindrical:function(){return wy},Data3DTexture:function(){return Bc},DataArrayTexture:function(){return Tc},DataTexture:function(){return $g},DataTextureLoader:function(){return Vv},DataUtils:function(){return w1},DecrementStencilOp:function(){return Tm},DecrementWrapStencilOp:function(){return bc},DefaultLoadingManager:function(){return Hv},DepthFormat:function(){return rt},DepthStencilFormat:function(){return xt},DepthTexture:function(){return ev},DirectionalLight:function(){return Yv},DirectionalLightHelper:function(){return zE},DiscreteInterpolant:function(){return Uv},DisplayP3ColorSpace:function(){return _u},DodecahedronGeometry:function(){return om},DoubleSide:function(){return ot},DstAlphaFactor:function(){return os},DstColorFactor:function(){return $t},DynamicCopyUsage:function(){return Ga},DynamicDrawUsage:function(){return sd},DynamicReadUsage:function(){return ip},EdgesGeometry:function(){return uy},EllipseCurve:function(){return Fh},EqualCompare:function(){return tp},EqualDepth:function(){return Ln},EqualStencilFunc:function(){return Bm},EquirectangularReflectionMapping:function(){return Xi},EquirectangularRefractionMapping:function(){return $s},Euler:function(){return Cu},EventDispatcher:function(){return Dl},ExtrudeGeometry:function(){return Dh},FileLoader:function(){return uu},Float16BufferAttribute:function(){return Bu},Float32BufferAttribute:function(){return wr},Float64BufferAttribute:function(){return wg},FloatType:function(){return _s},Fog:function(){return Jm},FogExp2:function(){return Km},FramebufferTexture:function(){return W3},FrontSide:function(){return nt},Frustum:function(){return Gu},GLBufferAttribute:function(){return jh},GLSL1:function(){return $d},GLSL3:function(){return eh},GreaterCompare:function(){return tf},GreaterDepth:function(){return ni},GreaterEqualCompare:function(){return Eu},GreaterEqualDepth:function(){return pr},GreaterEqualStencilFunc:function(){return ef},GreaterStencilFunc:function(){return fo},GridHelper:function(){return kE},Group:function(){return Bh},HalfFloatType:function(){return Co},HemisphereLight:function(){return yy},HemisphereLightHelper:function(){return LE},HemisphereLightProbe:function(){return $v},IcosahedronGeometry:function(){return C0},ImageBitmapLoader:function(){return mE},ImageLoader:function(){return dm},ImageUtils:function(){return Up},IncrementStencilOp:function(){return Ec},IncrementWrapStencilOp:function(){return M1},InstancedBufferAttribute:function(){return Pf},InstancedBufferGeometry:function(){return Zv},InstancedInterleavedBuffer:function(){return IE},InstancedMesh:function(){return dv},Int16BufferAttribute:function(){return Sg},Int32BufferAttribute:function(){return Om},Int8BufferAttribute:function(){return ff},IntType:function(){return Ho},InterleavedBuffer:function(){return Kg},InterleavedBufferAttribute:function(){return Ih},Interpolant:function(){return Xf},InterpolateDiscrete:function(){return wo},InterpolateLinear:function(){return ps},InterpolateSmooth:function(){return Ta},InvertStencilOp:function(){return ep},KeepStencilOp:function(){return Zh},KeyframeTrack:function(){return Mp},LOD:function(){return ov},LatheGeometry:function(){return Oh},Layers:function(){return uf},LessCompare:function(){return od},LessDepth:function(){return Mn},LessEqualCompare:function(){return np},LessEqualDepth:function(){return Tn},LessEqualStencilFunc:function(){return C1},LessStencilFunc:function(){return Ag},Light:function(){return Gd},LightProbe:function(){return gm},Line:function(){return su},Line3:function(){return OE},LineBasicMaterial:function(){return Ys},LineCurve:function(){return u0},LineCurve3:function(){return xv},LineDashedMaterial:function(){return uc},LineLoop:function(){return gv},LineSegments:function(){return au},LinearDisplayP3ColorSpace:function(){return x1},LinearEncoding:function(){return $c},LinearFilter:function(){return $i},LinearInterpolant:function(){return gy},LinearMipMapLinearFilter:function(){return Fl},LinearMipMapNearestFilter:function(){return Ca},LinearMipmapLinearFilter:function(){return lo},LinearMipmapNearestFilter:function(){return ls},LinearSRGBColorSpace:function(){return ho},LinearToneMapping:function(){return Zi},Loader:function(){return mo},LoaderUtils:function(){return mm},LoadingManager:function(){return my},LoopOnce:function(){return Bs},LoopPingPong:function(){return fa},LoopRepeat:function(){return So},LuminanceAlphaFormat:function(){return Zc},LuminanceFormat:function(){return qc},MOUSE:function(){return m},Material:function(){return ia},MaterialLoader:function(){return D0},MathUtils:function(){return af},Matrix3:function(){return pi},Matrix4:function(){return ii},MaxEquation:function(){return Cr},Mesh:function(){return bs},MeshBasicMaterial:function(){return ds},MeshDepthMaterial:function(){return Rf},MeshDistanceMaterial:function(){return Ff},MeshLambertMaterial:function(){return B0},MeshMatcapMaterial:function(){return zv},MeshNormalMaterial:function(){return kv},MeshPhongMaterial:function(){return Pv},MeshPhysicalMaterial:function(){return Dv},MeshStandardMaterial:function(){return Xu},MeshToonMaterial:function(){return Lv},MinEquation:function(){return Kn},MirroredRepeatWrapping:function(){return Hs},MixOperation:function(){return jo},MultiplyBlending:function(){return Pt},MultiplyOperation:function(){return ki},NearestFilter:function(){return _r},NearestMipMapLinearFilter:function(){return Ws},NearestMipMapNearestFilter:function(){return Rl},NearestMipmapLinearFilter:function(){return as},NearestMipmapNearestFilter:function(){return ji},NeverCompare:function(){return bl},NeverDepth:function(){return Wr},NeverStencilFunc:function(){return $h},NoBlending:function(){return St},NoColorSpace:function(){return Dp},NoToneMapping:function(){return ro},NormalAnimationBlendMode:function(){return Kh},NormalBlending:function(){return vt},NotEqualCompare:function(){return rp},NotEqualDepth:function(){return Ar},NotEqualStencilFunc:function(){return S1},NumberKeyframeTrack:function(){return pm},Object3D:function(){return $r},ObjectLoader:function(){return ym},ObjectSpaceNormalMap:function(){return mg},OctahedronGeometry:function(){return kd},OneFactor:function(){return fr},OneMinusDstAlphaFactor:function(){return Vn},OneMinusDstColorFactor:function(){return Fn},OneMinusSrcAlphaFactor:function(){return hi},OneMinusSrcColorFactor:function(){return Vi},OrthographicCamera:function(){return Wg},PCFShadowMap:function(){return pe},PCFSoftShadowMap:function(){return de},PMREMGenerator:function(){return G1},Path:function(){return Fd},PerspectiveCamera:function(){return Yo},Plane:function(){return ul},PlaneGeometry:function(){return mp},PlaneHelper:function(){return UE},PointLight:function(){return O0},PointLightHelper:function(){return PE},Points:function(){return yv},PointsMaterial:function(){return i0},PolarGridHelper:function(){return h2},PolyhedronGeometry:function(){return Vu},PositionalAudio:function(){return EE},PropertyBinding:function(){return Gi},PropertyMixer:function(){return s2},QuadraticBezierCurve:function(){return ly},QuadraticBezierCurve3:function(){return cy},Quaternion:function(){return ya},QuaternionKeyframeTrack:function(){return Yf},QuaternionLinearInterpolant:function(){return Nv},RED_GREEN_RGTC2_Format:function(){return ci},RED_RGTC1_Format:function(){return Ac},REVISION:function(){return d},RGBADepthPacking:function(){return gg},RGBAFormat:function(){return cs},RGBAIntegerFormat:function(){return Ue},RGBA_ASTC_10x10_Format:function(){return eo},RGBA_ASTC_10x5_Format:function(){return Kr},RGBA_ASTC_10x6_Format:function(){return Cn},RGBA_ASTC_10x8_Format:function(){return Mr},RGBA_ASTC_12x10_Format:function(){return Po},RGBA_ASTC_12x12_Format:function(){return es},RGBA_ASTC_4x4_Format:function(){return Rt},RGBA_ASTC_5x4_Format:function(){return Xt},RGBA_ASTC_5x5_Format:function(){return On},RGBA_ASTC_6x5_Format:function(){return Yn},RGBA_ASTC_6x6_Format:function(){return vr},RGBA_ASTC_8x5_Format:function(){return Gr},RGBA_ASTC_8x6_Format:function(){return Yr},RGBA_ASTC_8x8_Format:function(){return oi},RGBA_BPTC_Format:function(){return wa},RGBA_ETC2_EAC_Format:function(){return lt},RGBA_PVRTC_2BPPV1_Format:function(){return Me},RGBA_PVRTC_4BPPV1_Format:function(){return _t},RGBA_S3TC_DXT1_Format:function(){return Ie},RGBA_S3TC_DXT3_Format:function(){return it},RGBA_S3TC_DXT5_Format:function(){return Le},RGB_BPTC_SIGNED_Format:function(){return ha},RGB_BPTC_UNSIGNED_Format:function(){return Di},RGB_ETC1_Format:function(){return qe},RGB_ETC2_Format:function(){return at},RGB_PVRTC_2BPPV1_Format:function(){return dt},RGB_PVRTC_4BPPV1_Format:function(){return tt},RGB_S3TC_DXT1_Format:function(){return ze},RGFormat:function(){return In},RGIntegerFormat:function(){return ur},RawShaderMaterial:function(){return Ov},Ray:function(){return Ua},Raycaster:function(){return Ud},RectAreaLight:function(){return Jv},RedFormat:function(){return sn},RedIntegerFormat:function(){return zn},ReinhardToneMapping:function(){return Ja},RenderTarget:function(){return Rs},RepeatWrapping:function(){return Oi},ReplaceStencilOp:function(){return yg},ReverseSubtractEquation:function(){return _n},RingGeometry:function(){return Qf},SIGNED_RED_GREEN_RGTC2_Format:function(){return io},SIGNED_RED_RGTC1_Format:function(){return vc},SRGBColorSpace:function(){return To},Scene:function(){return nv},ShaderChunk:function(){return xi},ShaderLib:function(){return Ep},ShaderMaterial:function(){return Qo},ShadowMaterial:function(){return Fv},Shape:function(){return jf},ShapeGeometry:function(){return S0},ShapePath:function(){return Q0},ShapeUtils:function(){return pu},ShortType:function(){return ea},Skeleton:function(){return t0},SkeletonHelper:function(){return DE},SkinnedMesh:function(){return cv},Source:function(){return lp},Sphere:function(){return Fa},SphereGeometry:function(){return Ph},Spherical:function(){return RE},SphericalHarmonics3:function(){return qv},SplineCurve:function(){return rm},SpotLight:function(){return hm},SpotLightHelper:function(){return H0},Sprite:function(){return qm},SpriteMaterial:function(){return Jg},SrcAlphaFactor:function(){return vi},SrcAlphaSaturateFactor:function(){return gr},SrcColorFactor:function(){return Ir},StaticCopyUsage:function(){return rf},StaticDrawUsage:function(){return Pp},StaticReadUsage:function(){return ql},StereoCamera:function(){return yE},StreamCopyUsage:function(){return op},StreamDrawUsage:function(){return ga},StreamReadUsage:function(){return nf},StringKeyframeTrack:function(){return Lh},SubtractEquation:function(){return zt},SubtractiveBlending:function(){return mt},TOUCH:function(){return s},TangentSpaceNormalMap:function(){return Jl},TetrahedronGeometry:function(){return am},Texture:function(){return Bo},TextureLoader:function(){return dE},TorusGeometry:function(){return w0},TorusKnotGeometry:function(){return lm},Triangle:function(){return Aa},TriangleFanDrawMode:function(){return rd},TriangleStripDrawMode:function(){return Jh},TrianglesDrawMode:function(){return fg},TubeGeometry:function(){return T0},TwoPassDoubleSide:function(){return gt},UVMapping:function(){return ua},Uint16BufferAttribute:function(){return Tu},Uint32BufferAttribute:function(){return hp},Uint8BufferAttribute:function(){return ir},Uint8ClampedBufferAttribute:function(){return dh},Uniform:function(){return du},UniformsGroup:function(){return Cy},UniformsLib:function(){return nr},UniformsUtils:function(){return Os},UnsignedByteType:function(){return Do},UnsignedInt248Type:function(){return Sa},UnsignedIntType:function(){return co},UnsignedShort4444Type:function(){return qa},UnsignedShort5551Type:function(){return Ol},UnsignedShortType:function(){return ta},VSMShadowMap:function(){return bt},Vector2:function(){return yn},Vector3:function(){return Qe},Vector4:function(){return Qr},VectorKeyframeTrack:function(){return um},VideoTexture:function(){return H3},WebGL1Renderer:function(){return Of},WebGL3DRenderTarget:function(){return lf},WebGLArrayRenderTarget:function(){return cp},WebGLCoordinateSystem:function(){return Zl},WebGLCubeRenderTarget:function(){return va},WebGLMultipleRenderTargets:function(){return us},WebGLRenderTarget:function(){return dr},WebGLRenderer:function(){return tv},WebGLUtils:function(){return ZA},WebGPUCoordinateSystem:function(){return xc},WireframeGeometry:function(){return Iv},WrapAroundEnding:function(){return Op},ZeroCurvatureEnding:function(){return _c},ZeroFactor:function(){return zr},ZeroSlopeEnding:function(){return Yl},ZeroStencilOp:function(){return qh},_SRGBAFormat:function(){return Lp},createCanvasElement:function(){return Eg},sRGBEncoding:function(){return Kl}});var S=y(25108);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const d="156",m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},E=0,H=1,te=2,ce=3,J=0,pe=1,de=2,bt=3,nt=0,He=1,ot=2,gt=2,St=0,vt=1,ut=2,mt=3,Pt=4,Ot=5,Jt=100,zt=101,_n=102,Kn=103,Cr=104,zr=200,fr=201,Ir=202,Vi=203,vi=204,hi=205,os=206,Vn=207,$t=208,Fn=209,gr=210,Wr=0,Li=1,Mn=2,Tn=3,Ln=4,pr=5,ni=6,Ar=7,ki=0,jo=1,ri=2,ro=0,Zi=1,Ja=2,As=3,js=4,Zs=5,ua=300,vs=301,ss=302,Xi=303,$s=304,da=306,Oi=1e3,ao=1001,Hs=1002,_r=1003,ji=1004,Rl=1004,as=1005,Ws=1005,$i=1006,ls=1007,Ca=1007,lo=1008,Fl=1008,Do=1009,_l=1010,ea=1011,ta=1012,Ho=1013,co=1014,_s=1015,Co=1016,qa=1017,Ol=1018,Sa=1020,El=1021,cs=1023,qc=1024,Zc=1025,rt=1026,xt=1027,sn=1028,zn=1029,In=1030,ur=1031,Ue=1033,ze=33776,Ie=33777,it=33778,Le=33779,tt=35840,dt=35841,_t=35842,Me=35843,qe=36196,at=37492,lt=37496,Rt=37808,Xt=37809,On=37810,Yn=37811,vr=37812,Gr=37813,Yr=37814,oi=37815,Kr=37816,Cn=37817,Mr=37818,eo=37819,Po=37820,es=37821,wa=36492,ha=36494,Di=36495,Ac=36283,vc=36284,ci=36285,io=36286,Bs=2200,So=2201,fa=2202,wo=2300,ps=2301,Ta=2302,_c=2400,Yl=2401,Op=2402,Kh=2500,qd=2501,fg=0,Jh=1,rd=2,$c=3e3,Kl=3001,Yi=3200,gg=3201,Jl=0,mg=1,Dp="",To="srgb",ho="srgb-linear",_u="display-p3",x1="display-p3-linear",qh=0,Zh=7680,yg=7681,Ec=7682,Tm=7683,M1=34055,bc=34056,ep=5386,$h=512,Ag=513,Bm=514,C1=515,fo=516,S1=517,ef=518,id=519,bl=512,od=513,tp=514,np=515,tf=516,rp=517,Eu=518,Zd=519,Pp=35044,sd=35048,ga=35040,ql=35045,ip=35049,nf=35041,rf=35046,Ga=35050,op=35042,$d="100",eh="300 es",Lp=1035,Zl=2e3,xc=2001;class Dl{addEventListener(e,c){this._listeners===void 0&&(this._listeners={});const g=this._listeners;g[e]===void 0&&(g[e]=[]),g[e].indexOf(c)===-1&&g[e].push(c)}hasEventListener(e,c){if(this._listeners===void 0)return!1;const g=this._listeners;return g[e]!==void 0&&g[e].indexOf(c)!==-1}removeEventListener(e,c){if(this._listeners===void 0)return;const v=this._listeners[e];if(v!==void 0){const M=v.indexOf(c);M!==-1&&v.splice(M,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const g=this._listeners[e.type];if(g!==void 0){e.target=this;const v=g.slice(0);for(let M=0,I=v.length;M<I;M++)v[M].call(this,e);e.target=null}}}const Is=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let of=1234567;const kp=Math.PI/180,Pl=180/Math.PI;function Ba(){const C=Math.random()*4294967295|0,e=Math.random()*4294967295|0,c=Math.random()*4294967295|0,g=Math.random()*4294967295|0;return(Is[C&255]+Is[C>>8&255]+Is[C>>16&255]+Is[C>>24&255]+"-"+Is[e&255]+Is[e>>8&255]+"-"+Is[e>>16&15|64]+Is[e>>24&255]+"-"+Is[c&63|128]+Is[c>>8&255]+"-"+Is[c>>16&255]+Is[c>>24&255]+Is[g&255]+Is[g>>8&255]+Is[g>>16&255]+Is[g>>24&255]).toLowerCase()}function go(C,e,c){return Math.max(e,Math.min(c,C))}function sp(C,e){return(C%e+e)%e}function sf(C,e,c,g,v){return g+(C-e)*(v-g)/(c-e)}function Za(C,e,c){return C!==e?(c-C)/(e-C):0}function Wo(C,e,c){return(1-c)*C+c*e}function xl(C,e,c,g){return Wo(C,e,1-Math.exp(-c*g))}function $l(C,e=1){return e-Math.abs(sp(C,e*2)-e)}function Mc(C,e,c){return C<=e?0:C>=c?1:(C=(C-e)/(c-e),C*C*(3-2*C))}function Cc(C,e,c){return C<=e?0:C>=c?1:(C=(C-e)/(c-e),C*C*C*(C*(C*6-15)+10))}function zp(C,e){return C+Math.floor(Math.random()*(e-C+1))}function vg(C,e){return C+Math.random()*(e-C)}function ad(C){return C*(.5-Math.random())}function bu(C){C!==void 0&&(of=C);let e=of+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function $a(C){return C*kp}function el(C){return C*Pl}function vo(C){return(C&C-1)===0&&C!==0}function ld(C){return Math.pow(2,Math.ceil(Math.log(C)/Math.LN2))}function ma(C){return Math.pow(2,Math.floor(Math.log(C)/Math.LN2))}function _g(C,e,c,g,v){const M=Math.cos,I=Math.sin,R=M(c/2),z=I(c/2),j=M((e+g)/2),W=I((e+g)/2),q=M((e-g)/2),Z=I((e-g)/2),ne=M((g-e)/2),se=I((g-e)/2);switch(v){case"XYX":C.set(R*W,z*q,z*Z,R*j);break;case"YZY":C.set(z*Z,R*W,z*q,R*j);break;case"ZXZ":C.set(z*q,z*Z,R*W,R*j);break;case"XZX":C.set(R*W,z*se,z*ne,R*j);break;case"YXY":C.set(z*ne,R*W,z*se,R*j);break;case"ZYZ":C.set(z*se,z*ne,R*W,R*j);break;default:S.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+v)}}function Ia(C,e){switch(e.constructor){case Float32Array:return C;case Uint32Array:return C/4294967295;case Uint16Array:return C/65535;case Uint8Array:return C/255;case Int32Array:return Math.max(C/2147483647,-1);case Int16Array:return Math.max(C/32767,-1);case Int8Array:return Math.max(C/127,-1);default:throw new Error("Invalid component type.")}}function fi(C,e){switch(e.constructor){case Float32Array:return C;case Uint32Array:return Math.round(C*4294967295);case Uint16Array:return Math.round(C*65535);case Uint8Array:return Math.round(C*255);case Int32Array:return Math.round(C*2147483647);case Int16Array:return Math.round(C*32767);case Int8Array:return Math.round(C*127);default:throw new Error("Invalid component type.")}}const af={DEG2RAD:kp,RAD2DEG:Pl,generateUUID:Ba,clamp:go,euclideanModulo:sp,mapLinear:sf,inverseLerp:Za,lerp:Wo,damp:xl,pingpong:$l,smoothstep:Mc,smootherstep:Cc,randInt:zp,randFloat:vg,randFloatSpread:ad,seededRandom:bu,degToRad:$a,radToDeg:el,isPowerOfTwo:vo,ceilPowerOfTwo:ld,floorPowerOfTwo:ma,setQuaternionFromProperEuler:_g,normalize:fi,denormalize:Ia};class yn{constructor(e=0,c=0){yn.prototype.isVector2=!0,this.x=e,this.y=c}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,c){return this.x=e,this.y=c,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,c){switch(e){case 0:this.x=c;break;case 1:this.y=c;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,c){return this.x=e.x+c.x,this.y=e.y+c.y,this}addScaledVector(e,c){return this.x+=e.x*c,this.y+=e.y*c,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,c){return this.x=e.x-c.x,this.y=e.y-c.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const c=this.x,g=this.y,v=e.elements;return this.x=v[0]*c+v[3]*g+v[6],this.y=v[1]*c+v[4]*g+v[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,c){return this.x=Math.max(e.x,Math.min(c.x,this.x)),this.y=Math.max(e.y,Math.min(c.y,this.y)),this}clampScalar(e,c){return this.x=Math.max(e,Math.min(c,this.x)),this.y=Math.max(e,Math.min(c,this.y)),this}clampLength(e,c){const g=this.length();return this.divideScalar(g||1).multiplyScalar(Math.max(e,Math.min(c,g)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const c=Math.sqrt(this.lengthSq()*e.lengthSq());if(c===0)return Math.PI/2;const g=this.dot(e)/c;return Math.acos(go(g,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const c=this.x-e.x,g=this.y-e.y;return c*c+g*g}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,c){return this.x+=(e.x-this.x)*c,this.y+=(e.y-this.y)*c,this}lerpVectors(e,c,g){return this.x=e.x+(c.x-e.x)*g,this.y=e.y+(c.y-e.y)*g,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,c=0){return this.x=e[c],this.y=e[c+1],this}toArray(e=[],c=0){return e[c]=this.x,e[c+1]=this.y,e}fromBufferAttribute(e,c){return this.x=e.getX(c),this.y=e.getY(c),this}rotateAround(e,c){const g=Math.cos(c),v=Math.sin(c),M=this.x-e.x,I=this.y-e.y;return this.x=M*g-I*v+e.x,this.y=M*v+I*g+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pi{constructor(e,c,g,v,M,I,R,z,j){pi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,c,g,v,M,I,R,z,j)}set(e,c,g,v,M,I,R,z,j){const W=this.elements;return W[0]=e,W[1]=v,W[2]=R,W[3]=c,W[4]=M,W[5]=z,W[6]=g,W[7]=I,W[8]=j,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const c=this.elements,g=e.elements;return c[0]=g[0],c[1]=g[1],c[2]=g[2],c[3]=g[3],c[4]=g[4],c[5]=g[5],c[6]=g[6],c[7]=g[7],c[8]=g[8],this}extractBasis(e,c,g){return e.setFromMatrix3Column(this,0),c.setFromMatrix3Column(this,1),g.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const c=e.elements;return this.set(c[0],c[4],c[8],c[1],c[5],c[9],c[2],c[6],c[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,c){const g=e.elements,v=c.elements,M=this.elements,I=g[0],R=g[3],z=g[6],j=g[1],W=g[4],q=g[7],Z=g[2],ne=g[5],se=g[8],fe=v[0],$=v[3],ee=v[6],ve=v[1],ue=v[4],Ce=v[7],Oe=v[2],We=v[5],Ze=v[8];return M[0]=I*fe+R*ve+z*Oe,M[3]=I*$+R*ue+z*We,M[6]=I*ee+R*Ce+z*Ze,M[1]=j*fe+W*ve+q*Oe,M[4]=j*$+W*ue+q*We,M[7]=j*ee+W*Ce+q*Ze,M[2]=Z*fe+ne*ve+se*Oe,M[5]=Z*$+ne*ue+se*We,M[8]=Z*ee+ne*Ce+se*Ze,this}multiplyScalar(e){const c=this.elements;return c[0]*=e,c[3]*=e,c[6]*=e,c[1]*=e,c[4]*=e,c[7]*=e,c[2]*=e,c[5]*=e,c[8]*=e,this}determinant(){const e=this.elements,c=e[0],g=e[1],v=e[2],M=e[3],I=e[4],R=e[5],z=e[6],j=e[7],W=e[8];return c*I*W-c*R*j-g*M*W+g*R*z+v*M*j-v*I*z}invert(){const e=this.elements,c=e[0],g=e[1],v=e[2],M=e[3],I=e[4],R=e[5],z=e[6],j=e[7],W=e[8],q=W*I-R*j,Z=R*z-W*M,ne=j*M-I*z,se=c*q+g*Z+v*ne;if(se===0)return this.set(0,0,0,0,0,0,0,0,0);const fe=1/se;return e[0]=q*fe,e[1]=(v*j-W*g)*fe,e[2]=(R*g-v*I)*fe,e[3]=Z*fe,e[4]=(W*c-v*z)*fe,e[5]=(v*M-R*c)*fe,e[6]=ne*fe,e[7]=(g*z-j*c)*fe,e[8]=(I*c-g*M)*fe,this}transpose(){let e;const c=this.elements;return e=c[1],c[1]=c[3],c[3]=e,e=c[2],c[2]=c[6],c[6]=e,e=c[5],c[5]=c[7],c[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const c=this.elements;return e[0]=c[0],e[1]=c[3],e[2]=c[6],e[3]=c[1],e[4]=c[4],e[5]=c[7],e[6]=c[2],e[7]=c[5],e[8]=c[8],this}setUvTransform(e,c,g,v,M,I,R){const z=Math.cos(M),j=Math.sin(M);return this.set(g*z,g*j,-g*(z*I+j*R)+I+e,-v*j,v*z,-v*(-j*I+z*R)+R+c,0,0,1),this}scale(e,c){return this.premultiply(Gp.makeScale(e,c)),this}rotate(e){return this.premultiply(Gp.makeRotation(-e)),this}translate(e,c){return this.premultiply(Gp.makeTranslation(e,c)),this}makeTranslation(e,c){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,c,0,0,1),this}makeRotation(e){const c=Math.cos(e),g=Math.sin(e);return this.set(c,-g,0,g,c,0,0,0,1),this}makeScale(e,c){return this.set(e,0,0,0,c,0,0,0,1),this}equals(e){const c=this.elements,g=e.elements;for(let v=0;v<9;v++)if(c[v]!==g[v])return!1;return!0}fromArray(e,c=0){for(let g=0;g<9;g++)this.elements[g]=e[g+c];return this}toArray(e=[],c=0){const g=this.elements;return e[c]=g[0],e[c+1]=g[1],e[c+2]=g[2],e[c+3]=g[3],e[c+4]=g[4],e[c+5]=g[5],e[c+6]=g[6],e[c+7]=g[7],e[c+8]=g[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Gp=new pi;function ap(C){for(let e=C.length-1;e>=0;--e)if(C[e]>=65535)return!0;return!1}const th={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ll(C,e){return new th[C](e)}function cd(C){return document.createElementNS("http://www.w3.org/1999/xhtml",C)}function Eg(){const C=cd("canvas");return C.style.display="block",C}const xu={};function pd(C){C in xu||(xu[C]=!0,S.warn(C))}function Sc(C){return C<.04045?C*.0773993808:Math.pow(C*.9478672986+.0521327014,2.4)}function tl(C){return C<.0031308?C*12.92:1.055*Math.pow(C,.41666)-.055}const ud=new pi().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),dd=new pi().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function wc(C){return C.convertSRGBToLinear().applyMatrix3(dd)}function bg(C){return C.applyMatrix3(ud).convertLinearToSRGB()}const nh={[ho]:C=>C,[To]:C=>C.convertSRGBToLinear(),[_u]:wc},Im={[ho]:C=>C,[To]:C=>C.convertLinearToSRGB(),[_u]:bg},nl={enabled:!0,get legacyMode(){return S.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(C){S.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!C},get workingColorSpace(){return ho},set workingColorSpace(C){S.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(C,e,c){if(this.enabled===!1||e===c||!e||!c)return C;const g=nh[e],v=Im[c];if(g===void 0||v===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${c}".`);return v(g(C))},fromWorkingColorSpace:function(C,e){return this.convert(C,this.workingColorSpace,e)},toWorkingColorSpace:function(C,e){return this.convert(C,e,this.workingColorSpace)}};let _o;class Up{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let c;if(e instanceof HTMLCanvasElement)c=e;else{_o===void 0&&(_o=cd("canvas")),_o.width=e.width,_o.height=e.height;const g=_o.getContext("2d");e instanceof ImageData?g.putImageData(e,0,0):g.drawImage(e,0,0,e.width,e.height),c=_o}return c.width>2048||c.height>2048?(S.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),c.toDataURL("image/jpeg",.6)):c.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const c=cd("canvas");c.width=e.width,c.height=e.height;const g=c.getContext("2d");g.drawImage(e,0,0,e.width,e.height);const v=g.getImageData(0,0,e.width,e.height),M=v.data;for(let I=0;I<M.length;I++)M[I]=Sc(M[I]/255)*255;return g.putImageData(v,0,0),c}else if(e.data){const c=e.data.slice(0);for(let g=0;g<c.length;g++)c instanceof Uint8Array||c instanceof Uint8ClampedArray?c[g]=Math.floor(Sc(c[g]/255)*255):c[g]=Sc(c[g]);return{data:c,width:e.width,height:e.height}}else return S.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let rh=0;class lp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rh++}),this.uuid=Ba(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const c=e===void 0||typeof e=="string";if(!c&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const g={uuid:this.uuid,url:""},v=this.data;if(v!==null){let M;if(Array.isArray(v)){M=[];for(let I=0,R=v.length;I<R;I++)v[I].isDataTexture?M.push(hd(v[I].image)):M.push(hd(v[I]))}else M=hd(v);g.url=M}return c||(e.images[this.uuid]=g),g}}function hd(C){return typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&C instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&C instanceof ImageBitmap?Up.getDataURL(C):C.data?{data:Array.from(C.data),width:C.width,height:C.height,type:C.data.constructor.name}:(S.warn("THREE.Texture: Unable to serialize Texture."),{})}let kl=0;class Bo extends Dl{constructor(e=Bo.DEFAULT_IMAGE,c=Bo.DEFAULT_MAPPING,g=ao,v=ao,M=$i,I=lo,R=cs,z=Do,j=Bo.DEFAULT_ANISOTROPY,W=Dp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kl++}),this.uuid=Ba(),this.name="",this.source=new lp(e),this.mipmaps=[],this.mapping=c,this.channel=0,this.wrapS=g,this.wrapT=v,this.magFilter=M,this.minFilter=I,this.anisotropy=j,this.format=R,this.internalFormat=null,this.type=z,this.offset=new yn(0,0),this.repeat=new yn(1,1),this.center=new yn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof W=="string"?this.colorSpace=W:(pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=W===Kl?To:Dp),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const c=e===void 0||typeof e=="string";if(!c&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const g={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(g.userData=this.userData),c||(e.textures[this.uuid]=g),g}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ua)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Oi:e.x=e.x-Math.floor(e.x);break;case ao:e.x=e.x<0?0:1;break;case Hs:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Oi:e.y=e.y-Math.floor(e.y);break;case ao:e.y=e.y<0?0:1;break;case Hs:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===To?Kl:$c}set encoding(e){pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Kl?To:Dp}}Bo.DEFAULT_IMAGE=null,Bo.DEFAULT_MAPPING=ua,Bo.DEFAULT_ANISOTROPY=1;class Qr{constructor(e=0,c=0,g=0,v=1){Qr.prototype.isVector4=!0,this.x=e,this.y=c,this.z=g,this.w=v}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,c,g,v){return this.x=e,this.y=c,this.z=g,this.w=v,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,c){switch(e){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;case 3:this.w=c;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,c){return this.x=e.x+c.x,this.y=e.y+c.y,this.z=e.z+c.z,this.w=e.w+c.w,this}addScaledVector(e,c){return this.x+=e.x*c,this.y+=e.y*c,this.z+=e.z*c,this.w+=e.w*c,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,c){return this.x=e.x-c.x,this.y=e.y-c.y,this.z=e.z-c.z,this.w=e.w-c.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const c=this.x,g=this.y,v=this.z,M=this.w,I=e.elements;return this.x=I[0]*c+I[4]*g+I[8]*v+I[12]*M,this.y=I[1]*c+I[5]*g+I[9]*v+I[13]*M,this.z=I[2]*c+I[6]*g+I[10]*v+I[14]*M,this.w=I[3]*c+I[7]*g+I[11]*v+I[15]*M,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const c=Math.sqrt(1-e.w*e.w);return c<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/c,this.y=e.y/c,this.z=e.z/c),this}setAxisAngleFromRotationMatrix(e){let c,g,v,M;const z=e.elements,j=z[0],W=z[4],q=z[8],Z=z[1],ne=z[5],se=z[9],fe=z[2],$=z[6],ee=z[10];if(Math.abs(W-Z)<.01&&Math.abs(q-fe)<.01&&Math.abs(se-$)<.01){if(Math.abs(W+Z)<.1&&Math.abs(q+fe)<.1&&Math.abs(se+$)<.1&&Math.abs(j+ne+ee-3)<.1)return this.set(1,0,0,0),this;c=Math.PI;const ue=(j+1)/2,Ce=(ne+1)/2,Oe=(ee+1)/2,We=(W+Z)/4,Ze=(q+fe)/4,ht=(se+$)/4;return ue>Ce&&ue>Oe?ue<.01?(g=0,v=.707106781,M=.707106781):(g=Math.sqrt(ue),v=We/g,M=Ze/g):Ce>Oe?Ce<.01?(g=.707106781,v=0,M=.707106781):(v=Math.sqrt(Ce),g=We/v,M=ht/v):Oe<.01?(g=.707106781,v=.707106781,M=0):(M=Math.sqrt(Oe),g=Ze/M,v=ht/M),this.set(g,v,M,c),this}let ve=Math.sqrt(($-se)*($-se)+(q-fe)*(q-fe)+(Z-W)*(Z-W));return Math.abs(ve)<.001&&(ve=1),this.x=($-se)/ve,this.y=(q-fe)/ve,this.z=(Z-W)/ve,this.w=Math.acos((j+ne+ee-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,c){return this.x=Math.max(e.x,Math.min(c.x,this.x)),this.y=Math.max(e.y,Math.min(c.y,this.y)),this.z=Math.max(e.z,Math.min(c.z,this.z)),this.w=Math.max(e.w,Math.min(c.w,this.w)),this}clampScalar(e,c){return this.x=Math.max(e,Math.min(c,this.x)),this.y=Math.max(e,Math.min(c,this.y)),this.z=Math.max(e,Math.min(c,this.z)),this.w=Math.max(e,Math.min(c,this.w)),this}clampLength(e,c){const g=this.length();return this.divideScalar(g||1).multiplyScalar(Math.max(e,Math.min(c,g)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,c){return this.x+=(e.x-this.x)*c,this.y+=(e.y-this.y)*c,this.z+=(e.z-this.z)*c,this.w+=(e.w-this.w)*c,this}lerpVectors(e,c,g){return this.x=e.x+(c.x-e.x)*g,this.y=e.y+(c.y-e.y)*g,this.z=e.z+(c.z-e.z)*g,this.w=e.w+(c.w-e.w)*g,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,c=0){return this.x=e[c],this.y=e[c+1],this.z=e[c+2],this.w=e[c+3],this}toArray(e=[],c=0){return e[c]=this.x,e[c+1]=this.y,e[c+2]=this.z,e[c+3]=this.w,e}fromBufferAttribute(e,c){return this.x=e.getX(c),this.y=e.getY(c),this.z=e.getZ(c),this.w=e.getW(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rs extends Dl{constructor(e=1,c=1,g={}){super(),this.isRenderTarget=!0,this.width=e,this.height=c,this.depth=1,this.scissor=new Qr(0,0,e,c),this.scissorTest=!1,this.viewport=new Qr(0,0,e,c);const v={width:e,height:c,depth:1};g.encoding!==void 0&&(pd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),g.colorSpace=g.encoding===Kl?To:Dp),this.texture=new Bo(v,g.mapping,g.wrapS,g.wrapT,g.magFilter,g.minFilter,g.format,g.type,g.anisotropy,g.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=g.generateMipmaps!==void 0?g.generateMipmaps:!1,this.texture.internalFormat=g.internalFormat!==void 0?g.internalFormat:null,this.texture.minFilter=g.minFilter!==void 0?g.minFilter:$i,this.depthBuffer=g.depthBuffer!==void 0?g.depthBuffer:!0,this.stencilBuffer=g.stencilBuffer!==void 0?g.stencilBuffer:!1,this.depthTexture=g.depthTexture!==void 0?g.depthTexture:null,this.samples=g.samples!==void 0?g.samples:0}setSize(e,c,g=1){(this.width!==e||this.height!==c||this.depth!==g)&&(this.width=e,this.height=c,this.depth=g,this.texture.image.width=e,this.texture.image.height=c,this.texture.image.depth=g,this.dispose()),this.viewport.set(0,0,e,c),this.scissor.set(0,0,e,c)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const c=Object.assign({},e.texture.image);return this.texture.source=new lp(c),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dr extends Rs{constructor(e=1,c=1,g={}){super(e,c,g),this.isWebGLRenderTarget=!0}}class Tc extends Bo{constructor(e=null,c=1,g=1,v=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:c,height:g,depth:v},this.magFilter=_r,this.minFilter=_r,this.wrapR=ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cp extends dr{constructor(e=1,c=1,g=1){super(e,c),this.isWebGLArrayRenderTarget=!0,this.depth=g,this.texture=new Tc(null,e,c,g),this.texture.isRenderTargetTexture=!0}}class Bc extends Bo{constructor(e=null,c=1,g=1,v=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:c,height:g,depth:v},this.magFilter=_r,this.minFilter=_r,this.wrapR=ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lf extends dr{constructor(e=1,c=1,g=1){super(e,c),this.isWebGL3DRenderTarget=!0,this.depth=g,this.texture=new Bc(null,e,c,g),this.texture.isRenderTargetTexture=!0}}class us extends dr{constructor(e=1,c=1,g=1,v={}){super(e,c,v),this.isWebGLMultipleRenderTargets=!0;const M=this.texture;this.texture=[];for(let I=0;I<g;I++)this.texture[I]=M.clone(),this.texture[I].isRenderTargetTexture=!0}setSize(e,c,g=1){if(this.width!==e||this.height!==c||this.depth!==g){this.width=e,this.height=c,this.depth=g;for(let v=0,M=this.texture.length;v<M;v++)this.texture[v].image.width=e,this.texture[v].image.height=c,this.texture[v].image.depth=g;this.dispose()}this.viewport.set(0,0,e,c),this.scissor.set(0,0,e,c)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let c=0,g=e.texture.length;c<g;c++)this.texture[c]=e.texture[c].clone(),this.texture[c].isRenderTargetTexture=!0;return this}}class ya{constructor(e=0,c=0,g=0,v=1){this.isQuaternion=!0,this._x=e,this._y=c,this._z=g,this._w=v}static slerpFlat(e,c,g,v,M,I,R){let z=g[v+0],j=g[v+1],W=g[v+2],q=g[v+3];const Z=M[I+0],ne=M[I+1],se=M[I+2],fe=M[I+3];if(R===0){e[c+0]=z,e[c+1]=j,e[c+2]=W,e[c+3]=q;return}if(R===1){e[c+0]=Z,e[c+1]=ne,e[c+2]=se,e[c+3]=fe;return}if(q!==fe||z!==Z||j!==ne||W!==se){let $=1-R;const ee=z*Z+j*ne+W*se+q*fe,ve=ee>=0?1:-1,ue=1-ee*ee;if(ue>Number.EPSILON){const Oe=Math.sqrt(ue),We=Math.atan2(Oe,ee*ve);$=Math.sin($*We)/Oe,R=Math.sin(R*We)/Oe}const Ce=R*ve;if(z=z*$+Z*Ce,j=j*$+ne*Ce,W=W*$+se*Ce,q=q*$+fe*Ce,$===1-R){const Oe=1/Math.sqrt(z*z+j*j+W*W+q*q);z*=Oe,j*=Oe,W*=Oe,q*=Oe}}e[c]=z,e[c+1]=j,e[c+2]=W,e[c+3]=q}static multiplyQuaternionsFlat(e,c,g,v,M,I){const R=g[v],z=g[v+1],j=g[v+2],W=g[v+3],q=M[I],Z=M[I+1],ne=M[I+2],se=M[I+3];return e[c]=R*se+W*q+z*ne-j*Z,e[c+1]=z*se+W*Z+j*q-R*ne,e[c+2]=j*se+W*ne+R*Z-z*q,e[c+3]=W*se-R*q-z*Z-j*ne,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,c,g,v){return this._x=e,this._y=c,this._z=g,this._w=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,c){const g=e._x,v=e._y,M=e._z,I=e._order,R=Math.cos,z=Math.sin,j=R(g/2),W=R(v/2),q=R(M/2),Z=z(g/2),ne=z(v/2),se=z(M/2);switch(I){case"XYZ":this._x=Z*W*q+j*ne*se,this._y=j*ne*q-Z*W*se,this._z=j*W*se+Z*ne*q,this._w=j*W*q-Z*ne*se;break;case"YXZ":this._x=Z*W*q+j*ne*se,this._y=j*ne*q-Z*W*se,this._z=j*W*se-Z*ne*q,this._w=j*W*q+Z*ne*se;break;case"ZXY":this._x=Z*W*q-j*ne*se,this._y=j*ne*q+Z*W*se,this._z=j*W*se+Z*ne*q,this._w=j*W*q-Z*ne*se;break;case"ZYX":this._x=Z*W*q-j*ne*se,this._y=j*ne*q+Z*W*se,this._z=j*W*se-Z*ne*q,this._w=j*W*q+Z*ne*se;break;case"YZX":this._x=Z*W*q+j*ne*se,this._y=j*ne*q+Z*W*se,this._z=j*W*se-Z*ne*q,this._w=j*W*q-Z*ne*se;break;case"XZY":this._x=Z*W*q-j*ne*se,this._y=j*ne*q-Z*W*se,this._z=j*W*se+Z*ne*q,this._w=j*W*q+Z*ne*se;break;default:S.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+I)}return c!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,c){const g=c/2,v=Math.sin(g);return this._x=e.x*v,this._y=e.y*v,this._z=e.z*v,this._w=Math.cos(g),this._onChangeCallback(),this}setFromRotationMatrix(e){const c=e.elements,g=c[0],v=c[4],M=c[8],I=c[1],R=c[5],z=c[9],j=c[2],W=c[6],q=c[10],Z=g+R+q;if(Z>0){const ne=.5/Math.sqrt(Z+1);this._w=.25/ne,this._x=(W-z)*ne,this._y=(M-j)*ne,this._z=(I-v)*ne}else if(g>R&&g>q){const ne=2*Math.sqrt(1+g-R-q);this._w=(W-z)/ne,this._x=.25*ne,this._y=(v+I)/ne,this._z=(M+j)/ne}else if(R>q){const ne=2*Math.sqrt(1+R-g-q);this._w=(M-j)/ne,this._x=(v+I)/ne,this._y=.25*ne,this._z=(z+W)/ne}else{const ne=2*Math.sqrt(1+q-g-R);this._w=(I-v)/ne,this._x=(M+j)/ne,this._y=(z+W)/ne,this._z=.25*ne}return this._onChangeCallback(),this}setFromUnitVectors(e,c){let g=e.dot(c)+1;return g<Number.EPSILON?(g=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=g):(this._x=0,this._y=-e.z,this._z=e.y,this._w=g)):(this._x=e.y*c.z-e.z*c.y,this._y=e.z*c.x-e.x*c.z,this._z=e.x*c.y-e.y*c.x,this._w=g),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(go(this.dot(e),-1,1)))}rotateTowards(e,c){const g=this.angleTo(e);if(g===0)return this;const v=Math.min(1,c/g);return this.slerp(e,v),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,c){const g=e._x,v=e._y,M=e._z,I=e._w,R=c._x,z=c._y,j=c._z,W=c._w;return this._x=g*W+I*R+v*j-M*z,this._y=v*W+I*z+M*R-g*j,this._z=M*W+I*j+g*z-v*R,this._w=I*W-g*R-v*z-M*j,this._onChangeCallback(),this}slerp(e,c){if(c===0)return this;if(c===1)return this.copy(e);const g=this._x,v=this._y,M=this._z,I=this._w;let R=I*e._w+g*e._x+v*e._y+M*e._z;if(R<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,R=-R):this.copy(e),R>=1)return this._w=I,this._x=g,this._y=v,this._z=M,this;const z=1-R*R;if(z<=Number.EPSILON){const ne=1-c;return this._w=ne*I+c*this._w,this._x=ne*g+c*this._x,this._y=ne*v+c*this._y,this._z=ne*M+c*this._z,this.normalize(),this._onChangeCallback(),this}const j=Math.sqrt(z),W=Math.atan2(j,R),q=Math.sin((1-c)*W)/j,Z=Math.sin(c*W)/j;return this._w=I*q+this._w*Z,this._x=g*q+this._x*Z,this._y=v*q+this._y*Z,this._z=M*q+this._z*Z,this._onChangeCallback(),this}slerpQuaternions(e,c,g){return this.copy(e).slerp(c,g)}random(){const e=Math.random(),c=Math.sqrt(1-e),g=Math.sqrt(e),v=2*Math.PI*Math.random(),M=2*Math.PI*Math.random();return this.set(c*Math.cos(v),g*Math.sin(M),g*Math.cos(M),c*Math.sin(v))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,c=0){return this._x=e[c],this._y=e[c+1],this._z=e[c+2],this._w=e[c+3],this._onChangeCallback(),this}toArray(e=[],c=0){return e[c]=this._x,e[c+1]=this._y,e[c+2]=this._z,e[c+3]=this._w,e}fromBufferAttribute(e,c){return this._x=e.getX(c),this._y=e.getY(c),this._z=e.getZ(c),this._w=e.getW(c),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Qe{constructor(e=0,c=0,g=0){Qe.prototype.isVector3=!0,this.x=e,this.y=c,this.z=g}set(e,c,g){return g===void 0&&(g=this.z),this.x=e,this.y=c,this.z=g,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,c){switch(e){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,c){return this.x=e.x+c.x,this.y=e.y+c.y,this.z=e.z+c.z,this}addScaledVector(e,c){return this.x+=e.x*c,this.y+=e.y*c,this.z+=e.z*c,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,c){return this.x=e.x-c.x,this.y=e.y-c.y,this.z=e.z-c.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,c){return this.x=e.x*c.x,this.y=e.y*c.y,this.z=e.z*c.z,this}applyEuler(e){return this.applyQuaternion(Vs.setFromEuler(e))}applyAxisAngle(e,c){return this.applyQuaternion(Vs.setFromAxisAngle(e,c))}applyMatrix3(e){const c=this.x,g=this.y,v=this.z,M=e.elements;return this.x=M[0]*c+M[3]*g+M[6]*v,this.y=M[1]*c+M[4]*g+M[7]*v,this.z=M[2]*c+M[5]*g+M[8]*v,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const c=this.x,g=this.y,v=this.z,M=e.elements,I=1/(M[3]*c+M[7]*g+M[11]*v+M[15]);return this.x=(M[0]*c+M[4]*g+M[8]*v+M[12])*I,this.y=(M[1]*c+M[5]*g+M[9]*v+M[13])*I,this.z=(M[2]*c+M[6]*g+M[10]*v+M[14])*I,this}applyQuaternion(e){const c=this.x,g=this.y,v=this.z,M=e.x,I=e.y,R=e.z,z=e.w,j=z*c+I*v-R*g,W=z*g+R*c-M*v,q=z*v+M*g-I*c,Z=-M*c-I*g-R*v;return this.x=j*z+Z*-M+W*-R-q*-I,this.y=W*z+Z*-I+q*-M-j*-R,this.z=q*z+Z*-R+j*-I-W*-M,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const c=this.x,g=this.y,v=this.z,M=e.elements;return this.x=M[0]*c+M[4]*g+M[8]*v,this.y=M[1]*c+M[5]*g+M[9]*v,this.z=M[2]*c+M[6]*g+M[10]*v,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,c){return this.x=Math.max(e.x,Math.min(c.x,this.x)),this.y=Math.max(e.y,Math.min(c.y,this.y)),this.z=Math.max(e.z,Math.min(c.z,this.z)),this}clampScalar(e,c){return this.x=Math.max(e,Math.min(c,this.x)),this.y=Math.max(e,Math.min(c,this.y)),this.z=Math.max(e,Math.min(c,this.z)),this}clampLength(e,c){const g=this.length();return this.divideScalar(g||1).multiplyScalar(Math.max(e,Math.min(c,g)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,c){return this.x+=(e.x-this.x)*c,this.y+=(e.y-this.y)*c,this.z+=(e.z-this.z)*c,this}lerpVectors(e,c,g){return this.x=e.x+(c.x-e.x)*g,this.y=e.y+(c.y-e.y)*g,this.z=e.z+(c.z-e.z)*g,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,c){const g=e.x,v=e.y,M=e.z,I=c.x,R=c.y,z=c.z;return this.x=v*z-M*R,this.y=M*I-g*z,this.z=g*R-v*I,this}projectOnVector(e){const c=e.lengthSq();if(c===0)return this.set(0,0,0);const g=e.dot(this)/c;return this.copy(e).multiplyScalar(g)}projectOnPlane(e){return rl.copy(this).projectOnVector(e),this.sub(rl)}reflect(e){return this.sub(rl.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const c=Math.sqrt(this.lengthSq()*e.lengthSq());if(c===0)return Math.PI/2;const g=this.dot(e)/c;return Math.acos(go(g,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const c=this.x-e.x,g=this.y-e.y,v=this.z-e.z;return c*c+g*g+v*v}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,c,g){const v=Math.sin(c)*e;return this.x=v*Math.sin(g),this.y=Math.cos(c)*e,this.z=v*Math.cos(g),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,c,g){return this.x=e*Math.sin(c),this.y=g,this.z=e*Math.cos(c),this}setFromMatrixPosition(e){const c=e.elements;return this.x=c[12],this.y=c[13],this.z=c[14],this}setFromMatrixScale(e){const c=this.setFromMatrixColumn(e,0).length(),g=this.setFromMatrixColumn(e,1).length(),v=this.setFromMatrixColumn(e,2).length();return this.x=c,this.y=g,this.z=v,this}setFromMatrixColumn(e,c){return this.fromArray(e.elements,c*4)}setFromMatrix3Column(e,c){return this.fromArray(e.elements,c*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,c=0){return this.x=e[c],this.y=e[c+1],this.z=e[c+2],this}toArray(e=[],c=0){return e[c]=this.x,e[c+1]=this.y,e[c+2]=this.z,e}fromBufferAttribute(e,c){return this.x=e.getX(c),this.y=e.getY(c),this.z=e.getZ(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,c=Math.random()*Math.PI*2,g=Math.sqrt(1-wm(e,2));return this.x=g*Math.cos(c),this.y=g*Math.sin(c),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const rl=new Qe,Vs=new ya;class Es{constructor(e=new Qe(1/0,1/0,1/0),c=new Qe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=c}set(e,c){return this.min.copy(e),this.max.copy(c),this}setFromArray(e){this.makeEmpty();for(let c=0,g=e.length;c<g;c+=3)this.expandByPoint(Ml.fromArray(e,c));return this}setFromBufferAttribute(e){this.makeEmpty();for(let c=0,g=e.count;c<g;c++)this.expandByPoint(Ml.fromBufferAttribute(e,c));return this}setFromPoints(e){this.makeEmpty();for(let c=0,g=e.length;c<g;c++)this.expandByPoint(e[c]);return this}setFromCenterAndSize(e,c){const g=Ml.copy(c).multiplyScalar(.5);return this.min.copy(e).sub(g),this.max.copy(e).add(g),this}setFromObject(e,c=!1){return this.makeEmpty(),this.expandByObject(e,c)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,c=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),pp.copy(e.boundingBox),pp.applyMatrix4(e.matrixWorld),this.union(pp);else{const v=e.geometry;if(v!==void 0)if(c&&v.attributes!==void 0&&v.attributes.position!==void 0){const M=v.attributes.position;for(let I=0,R=M.count;I<R;I++)Ml.fromBufferAttribute(M,I).applyMatrix4(e.matrixWorld),this.expandByPoint(Ml)}else v.boundingBox===null&&v.computeBoundingBox(),pp.copy(v.boundingBox),pp.applyMatrix4(e.matrixWorld),this.union(pp)}const g=e.children;for(let v=0,M=g.length;v<M;v++)this.expandByObject(g[v],c);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,c){return c.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ml),Ml.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let c,g;return e.normal.x>0?(c=e.normal.x*this.min.x,g=e.normal.x*this.max.x):(c=e.normal.x*this.max.x,g=e.normal.x*this.min.x),e.normal.y>0?(c+=e.normal.y*this.min.y,g+=e.normal.y*this.max.y):(c+=e.normal.y*this.max.y,g+=e.normal.y*this.min.y),e.normal.z>0?(c+=e.normal.z*this.min.z,g+=e.normal.z*this.max.z):(c+=e.normal.z*this.max.z,g+=e.normal.z*this.min.z),c<=-e.constant&&g>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dp),Wp.subVectors(this.max,dp),Np.subVectors(e.a,dp),jp.subVectors(e.b,dp),Ra.subVectors(e.c,dp),Ic.subVectors(jp,Np),Hp.subVectors(Ra,jp),up.subVectors(Np,Ra);let c=[0,-Ic.z,Ic.y,0,-Hp.z,Hp.y,0,-up.z,up.y,Ic.z,0,-Ic.x,Hp.z,0,-Hp.x,up.z,0,-up.x,-Ic.y,Ic.x,0,-Hp.y,Hp.x,0,-up.y,up.x,0];return!Hi(c,Np,jp,Ra,Wp)||(c=[1,0,0,0,1,0,0,0,1],!Hi(c,Np,jp,Ra,Wp))?!1:(Hn.crossVectors(Ic,Hp),c=[Hn.x,Hn.y,Hn.z],Hi(c,Np,jp,Ra,Wp))}clampPoint(e,c){return c.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ml).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ml).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Qs=[new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe,new Qe],Ml=new Qe,pp=new Es,Np=new Qe,jp=new Qe,Ra=new Qe,Ic=new Qe,Hp=new Qe,up=new Qe,dp=new Qe,Wp=new Qe,Hn=new Qe,na=new Qe;function Hi(C,e,c,g,v){for(let M=0,I=C.length-3;M<=I;M+=3){na.fromArray(C,M);const R=v.x*Math.abs(na.x)+v.y*Math.abs(na.y)+v.z*Math.abs(na.z),z=e.dot(na),j=c.dot(na),W=g.dot(na);if(Math.max(-Math.max(z,j,W),Math.min(z,j,W))>R)return!1}return!0}const ec=new Es,Fs=new Qe,Vp=new Qe;class Fa{constructor(e=new Qe,c=-1){this.center=e,this.radius=c}set(e,c){return this.center.copy(e),this.radius=c,this}setFromPoints(e,c){const g=this.center;c!==void 0?g.copy(c):ec.setFromPoints(e).getCenter(g);let v=0;for(let M=0,I=e.length;M<I;M++)v=Math.max(v,g.distanceToSquared(e[M]));return this.radius=Math.sqrt(v),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const c=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=c*c}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,c){const g=this.center.distanceToSquared(e);return c.copy(e),g>this.radius*this.radius&&(c.sub(this.center).normalize(),c.multiplyScalar(this.radius).add(this.center)),c}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fs.subVectors(e,this.center);const c=Fs.lengthSq();if(c>this.radius*this.radius){const g=Math.sqrt(c),v=(g-this.radius)*.5;this.center.addScaledVector(Fs,v/g),this.radius+=v}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Vp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fs.copy(e.center).add(Vp)),this.expandByPoint(Fs.copy(e.center).sub(Vp))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const zl=new Qe,fd=new Qe,Mu=new Qe,Oa=new Qe,ih=new Qe,gd=new Qe,oh=new Qe;class Ua{constructor(e=new Qe,c=new Qe(0,0,-1)){this.origin=e,this.direction=c}set(e,c){return this.origin.copy(e),this.direction.copy(c),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,c){return c.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zl)),this}closestPointToPoint(e,c){c.subVectors(e,this.origin);const g=c.dot(this.direction);return g<0?c.copy(this.origin):c.copy(this.origin).addScaledVector(this.direction,g)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const c=zl.subVectors(e,this.origin).dot(this.direction);return c<0?this.origin.distanceToSquared(e):(zl.copy(this.origin).addScaledVector(this.direction,c),zl.distanceToSquared(e))}distanceSqToSegment(e,c,g,v){fd.copy(e).add(c).multiplyScalar(.5),Mu.copy(c).sub(e).normalize(),Oa.copy(this.origin).sub(fd);const M=e.distanceTo(c)*.5,I=-this.direction.dot(Mu),R=Oa.dot(this.direction),z=-Oa.dot(Mu),j=Oa.lengthSq(),W=Math.abs(1-I*I);let q,Z,ne,se;if(W>0)if(q=I*z-R,Z=I*R-z,se=M*W,q>=0)if(Z>=-se)if(Z<=se){const fe=1/W;q*=fe,Z*=fe,ne=q*(q+I*Z+2*R)+Z*(I*q+Z+2*z)+j}else Z=M,q=Math.max(0,-(I*Z+R)),ne=-q*q+Z*(Z+2*z)+j;else Z=-M,q=Math.max(0,-(I*Z+R)),ne=-q*q+Z*(Z+2*z)+j;else Z<=-se?(q=Math.max(0,-(-I*M+R)),Z=q>0?-M:Math.min(Math.max(-M,-z),M),ne=-q*q+Z*(Z+2*z)+j):Z<=se?(q=0,Z=Math.min(Math.max(-M,-z),M),ne=Z*(Z+2*z)+j):(q=Math.max(0,-(I*M+R)),Z=q>0?M:Math.min(Math.max(-M,-z),M),ne=-q*q+Z*(Z+2*z)+j);else Z=I>0?-M:M,q=Math.max(0,-(I*Z+R)),ne=-q*q+Z*(Z+2*z)+j;return g&&g.copy(this.origin).addScaledVector(this.direction,q),v&&v.copy(fd).addScaledVector(Mu,Z),ne}intersectSphere(e,c){zl.subVectors(e.center,this.origin);const g=zl.dot(this.direction),v=zl.dot(zl)-g*g,M=e.radius*e.radius;if(v>M)return null;const I=Math.sqrt(M-v),R=g-I,z=g+I;return z<0?null:R<0?this.at(z,c):this.at(R,c)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const c=e.normal.dot(this.direction);if(c===0)return e.distanceToPoint(this.origin)===0?0:null;const g=-(this.origin.dot(e.normal)+e.constant)/c;return g>=0?g:null}intersectPlane(e,c){const g=this.distanceToPlane(e);return g===null?null:this.at(g,c)}intersectsPlane(e){const c=e.distanceToPoint(this.origin);return c===0||e.normal.dot(this.direction)*c<0}intersectBox(e,c){let g,v,M,I,R,z;const j=1/this.direction.x,W=1/this.direction.y,q=1/this.direction.z,Z=this.origin;return j>=0?(g=(e.min.x-Z.x)*j,v=(e.max.x-Z.x)*j):(g=(e.max.x-Z.x)*j,v=(e.min.x-Z.x)*j),W>=0?(M=(e.min.y-Z.y)*W,I=(e.max.y-Z.y)*W):(M=(e.max.y-Z.y)*W,I=(e.min.y-Z.y)*W),g>I||M>v||((M>g||isNaN(g))&&(g=M),(I<v||isNaN(v))&&(v=I),q>=0?(R=(e.min.z-Z.z)*q,z=(e.max.z-Z.z)*q):(R=(e.max.z-Z.z)*q,z=(e.min.z-Z.z)*q),g>z||R>v)||((R>g||g!==g)&&(g=R),(z<v||v!==v)&&(v=z),v<0)?null:this.at(g>=0?g:v,c)}intersectsBox(e){return this.intersectBox(e,zl)!==null}intersectTriangle(e,c,g,v,M){ih.subVectors(c,e),gd.subVectors(g,e),oh.crossVectors(ih,gd);let I=this.direction.dot(oh),R;if(I>0){if(v)return null;R=1}else if(I<0)R=-1,I=-I;else return null;Oa.subVectors(this.origin,e);const z=R*this.direction.dot(gd.crossVectors(Oa,gd));if(z<0)return null;const j=R*this.direction.dot(ih.cross(Oa));if(j<0||z+j>I)return null;const W=-R*Oa.dot(oh);return W<0?null:this.at(W/I,M)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ii{constructor(e,c,g,v,M,I,R,z,j,W,q,Z,ne,se,fe,$){ii.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,c,g,v,M,I,R,z,j,W,q,Z,ne,se,fe,$)}set(e,c,g,v,M,I,R,z,j,W,q,Z,ne,se,fe,$){const ee=this.elements;return ee[0]=e,ee[4]=c,ee[8]=g,ee[12]=v,ee[1]=M,ee[5]=I,ee[9]=R,ee[13]=z,ee[2]=j,ee[6]=W,ee[10]=q,ee[14]=Z,ee[3]=ne,ee[7]=se,ee[11]=fe,ee[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ii().fromArray(this.elements)}copy(e){const c=this.elements,g=e.elements;return c[0]=g[0],c[1]=g[1],c[2]=g[2],c[3]=g[3],c[4]=g[4],c[5]=g[5],c[6]=g[6],c[7]=g[7],c[8]=g[8],c[9]=g[9],c[10]=g[10],c[11]=g[11],c[12]=g[12],c[13]=g[13],c[14]=g[14],c[15]=g[15],this}copyPosition(e){const c=this.elements,g=e.elements;return c[12]=g[12],c[13]=g[13],c[14]=g[14],this}setFromMatrix3(e){const c=e.elements;return this.set(c[0],c[3],c[6],0,c[1],c[4],c[7],0,c[2],c[5],c[8],0,0,0,0,1),this}extractBasis(e,c,g){return e.setFromMatrixColumn(this,0),c.setFromMatrixColumn(this,1),g.setFromMatrixColumn(this,2),this}makeBasis(e,c,g){return this.set(e.x,c.x,g.x,0,e.y,c.y,g.y,0,e.z,c.z,g.z,0,0,0,0,1),this}extractRotation(e){const c=this.elements,g=e.elements,v=1/ra.setFromMatrixColumn(e,0).length(),M=1/ra.setFromMatrixColumn(e,1).length(),I=1/ra.setFromMatrixColumn(e,2).length();return c[0]=g[0]*v,c[1]=g[1]*v,c[2]=g[2]*v,c[3]=0,c[4]=g[4]*M,c[5]=g[5]*M,c[6]=g[6]*M,c[7]=0,c[8]=g[8]*I,c[9]=g[9]*I,c[10]=g[10]*I,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromEuler(e){const c=this.elements,g=e.x,v=e.y,M=e.z,I=Math.cos(g),R=Math.sin(g),z=Math.cos(v),j=Math.sin(v),W=Math.cos(M),q=Math.sin(M);if(e.order==="XYZ"){const Z=I*W,ne=I*q,se=R*W,fe=R*q;c[0]=z*W,c[4]=-z*q,c[8]=j,c[1]=ne+se*j,c[5]=Z-fe*j,c[9]=-R*z,c[2]=fe-Z*j,c[6]=se+ne*j,c[10]=I*z}else if(e.order==="YXZ"){const Z=z*W,ne=z*q,se=j*W,fe=j*q;c[0]=Z+fe*R,c[4]=se*R-ne,c[8]=I*j,c[1]=I*q,c[5]=I*W,c[9]=-R,c[2]=ne*R-se,c[6]=fe+Z*R,c[10]=I*z}else if(e.order==="ZXY"){const Z=z*W,ne=z*q,se=j*W,fe=j*q;c[0]=Z-fe*R,c[4]=-I*q,c[8]=se+ne*R,c[1]=ne+se*R,c[5]=I*W,c[9]=fe-Z*R,c[2]=-I*j,c[6]=R,c[10]=I*z}else if(e.order==="ZYX"){const Z=I*W,ne=I*q,se=R*W,fe=R*q;c[0]=z*W,c[4]=se*j-ne,c[8]=Z*j+fe,c[1]=z*q,c[5]=fe*j+Z,c[9]=ne*j-se,c[2]=-j,c[6]=R*z,c[10]=I*z}else if(e.order==="YZX"){const Z=I*z,ne=I*j,se=R*z,fe=R*j;c[0]=z*W,c[4]=fe-Z*q,c[8]=se*q+ne,c[1]=q,c[5]=I*W,c[9]=-R*W,c[2]=-j*W,c[6]=ne*q+se,c[10]=Z-fe*q}else if(e.order==="XZY"){const Z=I*z,ne=I*j,se=R*z,fe=R*j;c[0]=z*W,c[4]=-q,c[8]=j*W,c[1]=Z*q+fe,c[5]=I*W,c[9]=ne*q-se,c[2]=se*q-ne,c[6]=R*W,c[10]=fe*q+Z}return c[3]=0,c[7]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sh,e,md)}lookAt(e,c,g){const v=this.elements;return ol.subVectors(e,c),ol.lengthSq()===0&&(ol.z=1),ol.normalize(),tc.crossVectors(g,ol),tc.lengthSq()===0&&(Math.abs(g.z)===1?ol.x+=1e-4:ol.z+=1e-4,ol.normalize(),tc.crossVectors(g,ol)),tc.normalize(),ah.crossVectors(ol,tc),v[0]=tc.x,v[4]=ah.x,v[8]=ol.x,v[1]=tc.y,v[5]=ah.y,v[9]=ol.y,v[2]=tc.z,v[6]=ah.z,v[10]=ol.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,c){const g=e.elements,v=c.elements,M=this.elements,I=g[0],R=g[4],z=g[8],j=g[12],W=g[1],q=g[5],Z=g[9],ne=g[13],se=g[2],fe=g[6],$=g[10],ee=g[14],ve=g[3],ue=g[7],Ce=g[11],Oe=g[15],We=v[0],Ze=v[4],ht=v[8],Te=v[12],Ve=v[1],qt=v[5],vn=v[9],jt=v[13],Wt=v[2],$e=v[6],En=v[10],ln=v[14],gn=v[3],xn=v[7],Sn=v[11],Ut=v[15];return M[0]=I*We+R*Ve+z*Wt+j*gn,M[4]=I*Ze+R*qt+z*$e+j*xn,M[8]=I*ht+R*vn+z*En+j*Sn,M[12]=I*Te+R*jt+z*ln+j*Ut,M[1]=W*We+q*Ve+Z*Wt+ne*gn,M[5]=W*Ze+q*qt+Z*$e+ne*xn,M[9]=W*ht+q*vn+Z*En+ne*Sn,M[13]=W*Te+q*jt+Z*ln+ne*Ut,M[2]=se*We+fe*Ve+$*Wt+ee*gn,M[6]=se*Ze+fe*qt+$*$e+ee*xn,M[10]=se*ht+fe*vn+$*En+ee*Sn,M[14]=se*Te+fe*jt+$*ln+ee*Ut,M[3]=ve*We+ue*Ve+Ce*Wt+Oe*gn,M[7]=ve*Ze+ue*qt+Ce*$e+Oe*xn,M[11]=ve*ht+ue*vn+Ce*En+Oe*Sn,M[15]=ve*Te+ue*jt+Ce*ln+Oe*Ut,this}multiplyScalar(e){const c=this.elements;return c[0]*=e,c[4]*=e,c[8]*=e,c[12]*=e,c[1]*=e,c[5]*=e,c[9]*=e,c[13]*=e,c[2]*=e,c[6]*=e,c[10]*=e,c[14]*=e,c[3]*=e,c[7]*=e,c[11]*=e,c[15]*=e,this}determinant(){const e=this.elements,c=e[0],g=e[4],v=e[8],M=e[12],I=e[1],R=e[5],z=e[9],j=e[13],W=e[2],q=e[6],Z=e[10],ne=e[14],se=e[3],fe=e[7],$=e[11],ee=e[15];return se*(+M*z*q-v*j*q-M*R*Z+g*j*Z+v*R*ne-g*z*ne)+fe*(+c*z*ne-c*j*Z+M*I*Z-v*I*ne+v*j*W-M*z*W)+$*(+c*j*q-c*R*ne-M*I*q+g*I*ne+M*R*W-g*j*W)+ee*(-v*R*W-c*z*q+c*R*Z+v*I*q-g*I*Z+g*z*W)}transpose(){const e=this.elements;let c;return c=e[1],e[1]=e[4],e[4]=c,c=e[2],e[2]=e[8],e[8]=c,c=e[6],e[6]=e[9],e[9]=c,c=e[3],e[3]=e[12],e[12]=c,c=e[7],e[7]=e[13],e[13]=c,c=e[11],e[11]=e[14],e[14]=c,this}setPosition(e,c,g){const v=this.elements;return e.isVector3?(v[12]=e.x,v[13]=e.y,v[14]=e.z):(v[12]=e,v[13]=c,v[14]=g),this}invert(){const e=this.elements,c=e[0],g=e[1],v=e[2],M=e[3],I=e[4],R=e[5],z=e[6],j=e[7],W=e[8],q=e[9],Z=e[10],ne=e[11],se=e[12],fe=e[13],$=e[14],ee=e[15],ve=q*$*j-fe*Z*j+fe*z*ne-R*$*ne-q*z*ee+R*Z*ee,ue=se*Z*j-W*$*j-se*z*ne+I*$*ne+W*z*ee-I*Z*ee,Ce=W*fe*j-se*q*j+se*R*ne-I*fe*ne-W*R*ee+I*q*ee,Oe=se*q*z-W*fe*z-se*R*Z+I*fe*Z+W*R*$-I*q*$,We=c*ve+g*ue+v*Ce+M*Oe;if(We===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ze=1/We;return e[0]=ve*Ze,e[1]=(fe*Z*M-q*$*M-fe*v*ne+g*$*ne+q*v*ee-g*Z*ee)*Ze,e[2]=(R*$*M-fe*z*M+fe*v*j-g*$*j-R*v*ee+g*z*ee)*Ze,e[3]=(q*z*M-R*Z*M-q*v*j+g*Z*j+R*v*ne-g*z*ne)*Ze,e[4]=ue*Ze,e[5]=(W*$*M-se*Z*M+se*v*ne-c*$*ne-W*v*ee+c*Z*ee)*Ze,e[6]=(se*z*M-I*$*M-se*v*j+c*$*j+I*v*ee-c*z*ee)*Ze,e[7]=(I*Z*M-W*z*M+W*v*j-c*Z*j-I*v*ne+c*z*ne)*Ze,e[8]=Ce*Ze,e[9]=(se*q*M-W*fe*M-se*g*ne+c*fe*ne+W*g*ee-c*q*ee)*Ze,e[10]=(I*fe*M-se*R*M+se*g*j-c*fe*j-I*g*ee+c*R*ee)*Ze,e[11]=(W*R*M-I*q*M-W*g*j+c*q*j+I*g*ne-c*R*ne)*Ze,e[12]=Oe*Ze,e[13]=(W*fe*v-se*q*v+se*g*Z-c*fe*Z-W*g*$+c*q*$)*Ze,e[14]=(se*R*v-I*fe*v-se*g*z+c*fe*z+I*g*$-c*R*$)*Ze,e[15]=(I*q*v-W*R*v+W*g*z-c*q*z-I*g*Z+c*R*Z)*Ze,this}scale(e){const c=this.elements,g=e.x,v=e.y,M=e.z;return c[0]*=g,c[4]*=v,c[8]*=M,c[1]*=g,c[5]*=v,c[9]*=M,c[2]*=g,c[6]*=v,c[10]*=M,c[3]*=g,c[7]*=v,c[11]*=M,this}getMaxScaleOnAxis(){const e=this.elements,c=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],g=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],v=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(c,g,v))}makeTranslation(e,c,g){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,c,0,0,1,g,0,0,0,1),this}makeRotationX(e){const c=Math.cos(e),g=Math.sin(e);return this.set(1,0,0,0,0,c,-g,0,0,g,c,0,0,0,0,1),this}makeRotationY(e){const c=Math.cos(e),g=Math.sin(e);return this.set(c,0,g,0,0,1,0,0,-g,0,c,0,0,0,0,1),this}makeRotationZ(e){const c=Math.cos(e),g=Math.sin(e);return this.set(c,-g,0,0,g,c,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,c){const g=Math.cos(c),v=Math.sin(c),M=1-g,I=e.x,R=e.y,z=e.z,j=M*I,W=M*R;return this.set(j*I+g,j*R-v*z,j*z+v*R,0,j*R+v*z,W*R+g,W*z-v*I,0,j*z-v*R,W*z+v*I,M*z*z+g,0,0,0,0,1),this}makeScale(e,c,g){return this.set(e,0,0,0,0,c,0,0,0,0,g,0,0,0,0,1),this}makeShear(e,c,g,v,M,I){return this.set(1,g,M,0,e,1,I,0,c,v,1,0,0,0,0,1),this}compose(e,c,g){const v=this.elements,M=c._x,I=c._y,R=c._z,z=c._w,j=M+M,W=I+I,q=R+R,Z=M*j,ne=M*W,se=M*q,fe=I*W,$=I*q,ee=R*q,ve=z*j,ue=z*W,Ce=z*q,Oe=g.x,We=g.y,Ze=g.z;return v[0]=(1-(fe+ee))*Oe,v[1]=(ne+Ce)*Oe,v[2]=(se-ue)*Oe,v[3]=0,v[4]=(ne-Ce)*We,v[5]=(1-(Z+ee))*We,v[6]=($+ve)*We,v[7]=0,v[8]=(se+ue)*Ze,v[9]=($-ve)*Ze,v[10]=(1-(Z+fe))*Ze,v[11]=0,v[12]=e.x,v[13]=e.y,v[14]=e.z,v[15]=1,this}decompose(e,c,g){const v=this.elements;let M=ra.set(v[0],v[1],v[2]).length();const I=ra.set(v[4],v[5],v[6]).length(),R=ra.set(v[8],v[9],v[10]).length();this.determinant()<0&&(M=-M),e.x=v[12],e.y=v[13],e.z=v[14],il.copy(this);const j=1/M,W=1/I,q=1/R;return il.elements[0]*=j,il.elements[1]*=j,il.elements[2]*=j,il.elements[4]*=W,il.elements[5]*=W,il.elements[6]*=W,il.elements[8]*=q,il.elements[9]*=q,il.elements[10]*=q,c.setFromRotationMatrix(il),g.x=M,g.y=I,g.z=R,this}makePerspective(e,c,g,v,M,I,R=Zl){const z=this.elements,j=2*M/(c-e),W=2*M/(g-v),q=(c+e)/(c-e),Z=(g+v)/(g-v);let ne,se;if(R===Zl)ne=-(I+M)/(I-M),se=-2*I*M/(I-M);else if(R===xc)ne=-I/(I-M),se=-I*M/(I-M);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+R);return z[0]=j,z[4]=0,z[8]=q,z[12]=0,z[1]=0,z[5]=W,z[9]=Z,z[13]=0,z[2]=0,z[6]=0,z[10]=ne,z[14]=se,z[3]=0,z[7]=0,z[11]=-1,z[15]=0,this}makeOrthographic(e,c,g,v,M,I,R=Zl){const z=this.elements,j=1/(c-e),W=1/(g-v),q=1/(I-M),Z=(c+e)*j,ne=(g+v)*W;let se,fe;if(R===Zl)se=(I+M)*q,fe=-2*q;else if(R===xc)se=M*q,fe=-1*q;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+R);return z[0]=2*j,z[4]=0,z[8]=0,z[12]=-Z,z[1]=0,z[5]=2*W,z[9]=0,z[13]=-ne,z[2]=0,z[6]=0,z[10]=fe,z[14]=-se,z[3]=0,z[7]=0,z[11]=0,z[15]=1,this}equals(e){const c=this.elements,g=e.elements;for(let v=0;v<16;v++)if(c[v]!==g[v])return!1;return!0}fromArray(e,c=0){for(let g=0;g<16;g++)this.elements[g]=e[g+c];return this}toArray(e=[],c=0){const g=this.elements;return e[c]=g[0],e[c+1]=g[1],e[c+2]=g[2],e[c+3]=g[3],e[c+4]=g[4],e[c+5]=g[5],e[c+6]=g[6],e[c+7]=g[7],e[c+8]=g[8],e[c+9]=g[9],e[c+10]=g[10],e[c+11]=g[11],e[c+12]=g[12],e[c+13]=g[13],e[c+14]=g[14],e[c+15]=g[15],e}}const ra=new Qe,il=new ii,sh=new Qe(0,0,0),md=new Qe(1,1,1),tc=new Qe,ah=new Qe,ol=new Qe,cf=new ii,pf=new ya;class Cu{constructor(e=0,c=0,g=0,v=Cu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=c,this._z=g,this._order=v}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,c,g,v=this._order){return this._x=e,this._y=c,this._z=g,this._order=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,c=this._order,g=!0){const v=e.elements,M=v[0],I=v[4],R=v[8],z=v[1],j=v[5],W=v[9],q=v[2],Z=v[6],ne=v[10];switch(c){case"XYZ":this._y=Math.asin(go(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(-W,ne),this._z=Math.atan2(-I,M)):(this._x=Math.atan2(Z,j),this._z=0);break;case"YXZ":this._x=Math.asin(-go(W,-1,1)),Math.abs(W)<.9999999?(this._y=Math.atan2(R,ne),this._z=Math.atan2(z,j)):(this._y=Math.atan2(-q,M),this._z=0);break;case"ZXY":this._x=Math.asin(go(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-q,ne),this._z=Math.atan2(-I,j)):(this._y=0,this._z=Math.atan2(z,M));break;case"ZYX":this._y=Math.asin(-go(q,-1,1)),Math.abs(q)<.9999999?(this._x=Math.atan2(Z,ne),this._z=Math.atan2(z,M)):(this._x=0,this._z=Math.atan2(-I,j));break;case"YZX":this._z=Math.asin(go(z,-1,1)),Math.abs(z)<.9999999?(this._x=Math.atan2(-W,j),this._y=Math.atan2(-q,M)):(this._x=0,this._y=Math.atan2(R,ne));break;case"XZY":this._z=Math.asin(-go(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(Z,j),this._y=Math.atan2(R,M)):(this._x=Math.atan2(-W,ne),this._y=0);break;default:S.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+c)}return this._order=c,g===!0&&this._onChangeCallback(),this}setFromQuaternion(e,c,g){return cf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cf,c,g)}setFromVector3(e,c=this._order){return this.set(e.x,e.y,e.z,c)}reorder(e){return pf.setFromEuler(this),this.setFromQuaternion(pf,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],c=0){return e[c]=this._x,e[c+1]=this._y,e[c+2]=this._z,e[c+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cu.DEFAULT_ORDER="XYZ";class uf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Gl=0;const yd=new Qe,Rc=new ya,Fc=new ii,lh=new Qe,sl=new Qe,Rm=new Qe,ch=new ya,Ad=new Qe(1,0,0),ph=new Qe(0,1,0),uh=new Qe(0,0,1),Fm={type:"added"},Su={type:"removed"};class $r extends Dl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gl++}),this.uuid=Ba(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$r.DEFAULT_UP.clone();const e=new Qe,c=new Cu,g=new ya,v=new Qe(1,1,1);function M(){g.setFromEuler(c,!1)}function I(){c.setFromQuaternion(g,void 0,!1)}c._onChange(M),g._onChange(I),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:c},quaternion:{configurable:!0,enumerable:!0,value:g},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new ii},normalMatrix:{value:new pi}}),this.matrix=new ii,this.matrixWorld=new ii,this.matrixAutoUpdate=$r.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=$r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new uf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,c){this.quaternion.setFromAxisAngle(e,c)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,c){return Rc.setFromAxisAngle(e,c),this.quaternion.multiply(Rc),this}rotateOnWorldAxis(e,c){return Rc.setFromAxisAngle(e,c),this.quaternion.premultiply(Rc),this}rotateX(e){return this.rotateOnAxis(Ad,e)}rotateY(e){return this.rotateOnAxis(ph,e)}rotateZ(e){return this.rotateOnAxis(uh,e)}translateOnAxis(e,c){return yd.copy(e).applyQuaternion(this.quaternion),this.position.add(yd.multiplyScalar(c)),this}translateX(e){return this.translateOnAxis(Ad,e)}translateY(e){return this.translateOnAxis(ph,e)}translateZ(e){return this.translateOnAxis(uh,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fc.copy(this.matrixWorld).invert())}lookAt(e,c,g){e.isVector3?lh.copy(e):lh.set(e,c,g);const v=this.parent;this.updateWorldMatrix(!0,!1),sl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fc.lookAt(sl,lh,this.up):Fc.lookAt(lh,sl,this.up),this.quaternion.setFromRotationMatrix(Fc),v&&(Fc.extractRotation(v.matrixWorld),Rc.setFromRotationMatrix(Fc),this.quaternion.premultiply(Rc.invert()))}add(e){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.add(arguments[c]);return this}return e===this?(S.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Fm)):S.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let g=0;g<arguments.length;g++)this.remove(arguments[g]);return this}const c=this.children.indexOf(e);return c!==-1&&(e.parent=null,this.children.splice(c,1),e.dispatchEvent(Su)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,c){if(this[e]===c)return this;for(let g=0,v=this.children.length;g<v;g++){const I=this.children[g].getObjectByProperty(e,c);if(I!==void 0)return I}}getObjectsByProperty(e,c){let g=[];this[e]===c&&g.push(this);for(let v=0,M=this.children.length;v<M;v++){const I=this.children[v].getObjectsByProperty(e,c);I.length>0&&(g=g.concat(I))}return g}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sl,e,Rm),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sl,ch,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return e.set(c[8],c[9],c[10]).normalize()}raycast(){}traverse(e){e(this);const c=this.children;for(let g=0,v=c.length;g<v;g++)c[g].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const c=this.children;for(let g=0,v=c.length;g<v;g++)c[g].traverseVisible(e)}traverseAncestors(e){const c=this.parent;c!==null&&(e(c),c.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const c=this.children;for(let g=0,v=c.length;g<v;g++){const M=c[g];(M.matrixWorldAutoUpdate===!0||e===!0)&&M.updateMatrixWorld(e)}}updateWorldMatrix(e,c){const g=this.parent;if(e===!0&&g!==null&&g.matrixWorldAutoUpdate===!0&&g.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),c===!0){const v=this.children;for(let M=0,I=v.length;M<I;M++){const R=v[M];R.matrixWorldAutoUpdate===!0&&R.updateWorldMatrix(!1,!0)}}}toJSON(e){const c=e===void 0||typeof e=="string",g={};c&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},g.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const v={};v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),this.castShadow===!0&&(v.castShadow=!0),this.receiveShadow===!0&&(v.receiveShadow=!0),this.visible===!1&&(v.visible=!1),this.frustumCulled===!1&&(v.frustumCulled=!1),this.renderOrder!==0&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),v.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(v.instanceColor=this.instanceColor.toJSON()));function M(R,z){return R[z.uuid]===void 0&&(R[z.uuid]=z.toJSON(e)),z.uuid}if(this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(v.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=M(e.geometries,this.geometry);const R=this.geometry.parameters;if(R!==void 0&&R.shapes!==void 0){const z=R.shapes;if(Array.isArray(z))for(let j=0,W=z.length;j<W;j++){const q=z[j];M(e.shapes,q)}else M(e.shapes,z)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(M(e.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const R=[];for(let z=0,j=this.material.length;z<j;z++)R.push(M(e.materials,this.material[z]));v.material=R}else v.material=M(e.materials,this.material);if(this.children.length>0){v.children=[];for(let R=0;R<this.children.length;R++)v.children.push(this.children[R].toJSON(e).object)}if(this.animations.length>0){v.animations=[];for(let R=0;R<this.animations.length;R++){const z=this.animations[R];v.animations.push(M(e.animations,z))}}if(c){const R=I(e.geometries),z=I(e.materials),j=I(e.textures),W=I(e.images),q=I(e.shapes),Z=I(e.skeletons),ne=I(e.animations),se=I(e.nodes);R.length>0&&(g.geometries=R),z.length>0&&(g.materials=z),j.length>0&&(g.textures=j),W.length>0&&(g.images=W),q.length>0&&(g.shapes=q),Z.length>0&&(g.skeletons=Z),ne.length>0&&(g.animations=ne),se.length>0&&(g.nodes=se)}return g.object=v,g;function I(R){const z=[];for(const j in R){const W=R[j];delete W.metadata,z.push(W)}return z}}clone(e){return new this.constructor().copy(this,e)}copy(e,c=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),c===!0)for(let g=0;g<e.children.length;g++){const v=e.children[g];this.add(v.clone())}return this}}$r.DEFAULT_UP=new Qe(0,1,0),$r.DEFAULT_MATRIX_AUTO_UPDATE=!0,$r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Da=new Qe,Oc=new Qe,Pa=new Qe,Io=new Qe,Qp=new Qe,nc=new Qe,xg=new Qe,df=new Qe,hf=new Qe,Xp=new Qe;let Yp=!1;class Aa{constructor(e=new Qe,c=new Qe,g=new Qe){this.a=e,this.b=c,this.c=g}static getNormal(e,c,g,v){v.subVectors(g,c),Da.subVectors(e,c),v.cross(Da);const M=v.lengthSq();return M>0?v.multiplyScalar(1/Math.sqrt(M)):v.set(0,0,0)}static getBarycoord(e,c,g,v,M){Da.subVectors(v,c),Oc.subVectors(g,c),Pa.subVectors(e,c);const I=Da.dot(Da),R=Da.dot(Oc),z=Da.dot(Pa),j=Oc.dot(Oc),W=Oc.dot(Pa),q=I*j-R*R;if(q===0)return M.set(-2,-1,-1);const Z=1/q,ne=(j*z-R*W)*Z,se=(I*W-R*z)*Z;return M.set(1-ne-se,se,ne)}static containsPoint(e,c,g,v){return this.getBarycoord(e,c,g,v,Io),Io.x>=0&&Io.y>=0&&Io.x+Io.y<=1}static getUV(e,c,g,v,M,I,R,z){return Yp===!1&&(S.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yp=!0),this.getInterpolation(e,c,g,v,M,I,R,z)}static getInterpolation(e,c,g,v,M,I,R,z){return this.getBarycoord(e,c,g,v,Io),z.setScalar(0),z.addScaledVector(M,Io.x),z.addScaledVector(I,Io.y),z.addScaledVector(R,Io.z),z}static isFrontFacing(e,c,g,v){return Da.subVectors(g,c),Oc.subVectors(e,c),Da.cross(Oc).dot(v)<0}set(e,c,g){return this.a.copy(e),this.b.copy(c),this.c.copy(g),this}setFromPointsAndIndices(e,c,g,v){return this.a.copy(e[c]),this.b.copy(e[g]),this.c.copy(e[v]),this}setFromAttributeAndIndices(e,c,g,v){return this.a.fromBufferAttribute(e,c),this.b.fromBufferAttribute(e,g),this.c.fromBufferAttribute(e,v),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Da.subVectors(this.c,this.b),Oc.subVectors(this.a,this.b),Da.cross(Oc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Aa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,c){return Aa.getBarycoord(e,this.a,this.b,this.c,c)}getUV(e,c,g,v,M){return Yp===!1&&(S.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yp=!0),Aa.getInterpolation(e,this.a,this.b,this.c,c,g,v,M)}getInterpolation(e,c,g,v,M){return Aa.getInterpolation(e,this.a,this.b,this.c,c,g,v,M)}containsPoint(e){return Aa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Aa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,c){const g=this.a,v=this.b,M=this.c;let I,R;Qp.subVectors(v,g),nc.subVectors(M,g),df.subVectors(e,g);const z=Qp.dot(df),j=nc.dot(df);if(z<=0&&j<=0)return c.copy(g);hf.subVectors(e,v);const W=Qp.dot(hf),q=nc.dot(hf);if(W>=0&&q<=W)return c.copy(v);const Z=z*q-W*j;if(Z<=0&&z>=0&&W<=0)return I=z/(z-W),c.copy(g).addScaledVector(Qp,I);Xp.subVectors(e,M);const ne=Qp.dot(Xp),se=nc.dot(Xp);if(se>=0&&ne<=se)return c.copy(M);const fe=ne*j-z*se;if(fe<=0&&j>=0&&se<=0)return R=j/(j-se),c.copy(g).addScaledVector(nc,R);const $=W*se-ne*q;if($<=0&&q-W>=0&&ne-se>=0)return xg.subVectors(M,v),R=(q-W)/(q-W+(ne-se)),c.copy(v).addScaledVector(xg,R);const ee=1/($+fe+Z);return I=fe*ee,R=Z*ee,c.copy(g).addScaledVector(Qp,I).addScaledVector(nc,R)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Mg=0;class ia extends Dl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mg++}),this.uuid=Ba(),this.name="",this.type="Material",this.blending=vt,this.side=nt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=vi,this.blendDst=hi,this.blendEquation=Jt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Tn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=id,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zh,this.stencilZFail=Zh,this.stencilZPass=Zh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const c in e){const g=e[c];if(g===void 0){S.warn(`THREE.Material: parameter '${c}' has value of undefined.`);continue}const v=this[c];if(v===void 0){S.warn(`THREE.Material: '${c}' is not a property of THREE.${this.type}.`);continue}v&&v.isColor?v.set(g):v&&v.isVector3&&g&&g.isVector3?v.copy(g):this[c]=g}}toJSON(e){const c=e===void 0||typeof e=="string";c&&(e={textures:{},images:{}});const g={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};g.uuid=this.uuid,g.type=this.type,this.name!==""&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),this.roughness!==void 0&&(g.roughness=this.roughness),this.metalness!==void 0&&(g.metalness=this.metalness),this.sheen!==void 0&&(g.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(g.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(g.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(g.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(g.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(g.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(g.shininess=this.shininess),this.clearcoat!==void 0&&(g.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(g.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(g.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(g.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(g.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,g.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(g.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(g.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(g.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(g.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(g.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(g.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(g.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(g.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(g.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(e).uuid,g.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(g.aoMap=this.aoMap.toJSON(e).uuid,g.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(e).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(e).uuid,g.normalMapType=this.normalMapType,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(e).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(g.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(g.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(g.combine=this.combine)),this.envMapIntensity!==void 0&&(g.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(g.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(g.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(g.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(g.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(g.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(g.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(g.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(g.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(g.size=this.size),this.shadowSide!==null&&(g.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==vt&&(g.blending=this.blending),this.side!==nt&&(g.side=this.side),this.vertexColors&&(g.vertexColors=!0),this.opacity<1&&(g.opacity=this.opacity),this.transparent===!0&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,g.colorWrite=this.colorWrite,g.stencilWrite=this.stencilWrite,g.stencilWriteMask=this.stencilWriteMask,g.stencilFunc=this.stencilFunc,g.stencilRef=this.stencilRef,g.stencilFuncMask=this.stencilFuncMask,g.stencilFail=this.stencilFail,g.stencilZFail=this.stencilZFail,g.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(g.rotation=this.rotation),this.polygonOffset===!0&&(g.polygonOffset=!0),this.polygonOffsetFactor!==0&&(g.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(g.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(g.linewidth=this.linewidth),this.dashSize!==void 0&&(g.dashSize=this.dashSize),this.gapSize!==void 0&&(g.gapSize=this.gapSize),this.scale!==void 0&&(g.scale=this.scale),this.dithering===!0&&(g.dithering=!0),this.alphaTest>0&&(g.alphaTest=this.alphaTest),this.alphaHash===!0&&(g.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(g.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(g.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(g.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(g.wireframe=this.wireframe),this.wireframeLinewidth>1&&(g.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(g.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(g.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(g.flatShading=this.flatShading),this.visible===!1&&(g.visible=!1),this.toneMapped===!1&&(g.toneMapped=!1),this.fog===!1&&(g.fog=!1),Object.keys(this.userData).length>0&&(g.userData=this.userData);function v(M){const I=[];for(const R in M){const z=M[R];delete z.metadata,I.push(z)}return I}if(c){const M=v(e.textures),I=v(e.images);M.length>0&&(g.textures=M),I.length>0&&(g.images=I)}return g}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const c=e.clippingPlanes;let g=null;if(c!==null){const v=c.length;g=new Array(v);for(let M=0;M!==v;++M)g[M]=c[M].clone()}return this.clippingPlanes=g,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Kp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},al={h:0,s:0,l:0},wu={h:0,s:0,l:0};function Dc(C,e,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?C+(e-C)*6*c:c<1/2?e:c<2/3?C+(e-C)*6*(2/3-c):C}class rr{constructor(e,c,g){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,c,g)}set(e,c,g){if(c===void 0&&g===void 0){const v=e;v&&v.isColor?this.copy(v):typeof v=="number"?this.setHex(v):typeof v=="string"&&this.setStyle(v)}else this.setRGB(e,c,g);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,c=To){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,nl.toWorkingColorSpace(this,c),this}setRGB(e,c,g,v=nl.workingColorSpace){return this.r=e,this.g=c,this.b=g,nl.toWorkingColorSpace(this,v),this}setHSL(e,c,g,v=nl.workingColorSpace){if(e=sp(e,1),c=go(c,0,1),g=go(g,0,1),c===0)this.r=this.g=this.b=g;else{const M=g<=.5?g*(1+c):g+c-g*c,I=2*g-M;this.r=Dc(I,M,e+1/3),this.g=Dc(I,M,e),this.b=Dc(I,M,e-1/3)}return nl.toWorkingColorSpace(this,v),this}setStyle(e,c=To){function g(M){M!==void 0&&parseFloat(M)<1&&S.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let v;if(v=/^(\w+)\(([^\)]*)\)/.exec(e)){let M;const I=v[1],R=v[2];switch(I){case"rgb":case"rgba":if(M=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return g(M[4]),this.setRGB(Math.min(255,parseInt(M[1],10))/255,Math.min(255,parseInt(M[2],10))/255,Math.min(255,parseInt(M[3],10))/255,c);if(M=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return g(M[4]),this.setRGB(Math.min(100,parseInt(M[1],10))/100,Math.min(100,parseInt(M[2],10))/100,Math.min(100,parseInt(M[3],10))/100,c);break;case"hsl":case"hsla":if(M=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return g(M[4]),this.setHSL(parseFloat(M[1])/360,parseFloat(M[2])/100,parseFloat(M[3])/100,c);break;default:S.warn("THREE.Color: Unknown color model "+e)}}else if(v=/^\#([A-Fa-f\d]+)$/.exec(e)){const M=v[1],I=M.length;if(I===3)return this.setRGB(parseInt(M.charAt(0),16)/15,parseInt(M.charAt(1),16)/15,parseInt(M.charAt(2),16)/15,c);if(I===6)return this.setHex(parseInt(M,16),c);S.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,c);return this}setColorName(e,c=To){const g=Kp[e.toLowerCase()];return g!==void 0?this.setHex(g,c):S.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sc(e.r),this.g=Sc(e.g),this.b=Sc(e.b),this}copyLinearToSRGB(e){return this.r=tl(e.r),this.g=tl(e.g),this.b=tl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=To){return nl.fromWorkingColorSpace(Ro.copy(this),e),Math.round(go(Ro.r*255,0,255))*65536+Math.round(go(Ro.g*255,0,255))*256+Math.round(go(Ro.b*255,0,255))}getHexString(e=To){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,c=nl.workingColorSpace){nl.fromWorkingColorSpace(Ro.copy(this),c);const g=Ro.r,v=Ro.g,M=Ro.b,I=Math.max(g,v,M),R=Math.min(g,v,M);let z,j;const W=(R+I)/2;if(R===I)z=0,j=0;else{const q=I-R;switch(j=W<=.5?q/(I+R):q/(2-I-R),I){case g:z=(v-M)/q+(v<M?6:0);break;case v:z=(M-g)/q+2;break;case M:z=(g-v)/q+4;break}z/=6}return e.h=z,e.s=j,e.l=W,e}getRGB(e,c=nl.workingColorSpace){return nl.fromWorkingColorSpace(Ro.copy(this),c),e.r=Ro.r,e.g=Ro.g,e.b=Ro.b,e}getStyle(e=To){nl.fromWorkingColorSpace(Ro.copy(this),e);const c=Ro.r,g=Ro.g,v=Ro.b;return e!==To?`color(${e} ${c.toFixed(3)} ${g.toFixed(3)} ${v.toFixed(3)})`:`rgb(${Math.round(c*255)},${Math.round(g*255)},${Math.round(v*255)})`}offsetHSL(e,c,g){return this.getHSL(al),al.h+=e,al.s+=c,al.l+=g,this.setHSL(al.h,al.s,al.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,c){return this.r=e.r+c.r,this.g=e.g+c.g,this.b=e.b+c.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,c){return this.r+=(e.r-this.r)*c,this.g+=(e.g-this.g)*c,this.b+=(e.b-this.b)*c,this}lerpColors(e,c,g){return this.r=e.r+(c.r-e.r)*g,this.g=e.g+(c.g-e.g)*g,this.b=e.b+(c.b-e.b)*g,this}lerpHSL(e,c){this.getHSL(al),e.getHSL(wu);const g=Wo(al.h,wu.h,c),v=Wo(al.s,wu.s,c),M=Wo(al.l,wu.l,c);return this.setHSL(g,v,M),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const c=this.r,g=this.g,v=this.b,M=e.elements;return this.r=M[0]*c+M[3]*g+M[6]*v,this.g=M[1]*c+M[4]*g+M[7]*v,this.b=M[2]*c+M[5]*g+M[8]*v,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,c=0){return this.r=e[c],this.g=e[c+1],this.b=e[c+2],this}toArray(e=[],c=0){return e[c]=this.r,e[c+1]=this.g,e[c+2]=this.b,e}fromBufferAttribute(e,c){return this.r=e.getX(c),this.g=e.getY(c),this.b=e.getZ(c),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ro=new rr;rr.NAMES=Kp;class ds extends ia{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ki,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rc=Cg();function Cg(){const C=new ArrayBuffer(4),e=new Float32Array(C),c=new Uint32Array(C),g=new Uint32Array(512),v=new Uint32Array(512);for(let z=0;z<256;++z){const j=z-127;j<-27?(g[z]=0,g[z|256]=32768,v[z]=24,v[z|256]=24):j<-14?(g[z]=1024>>-j-14,g[z|256]=1024>>-j-14|32768,v[z]=-j-1,v[z|256]=-j-1):j<=15?(g[z]=j+15<<10,g[z|256]=j+15<<10|32768,v[z]=13,v[z|256]=13):j<128?(g[z]=31744,g[z|256]=64512,v[z]=24,v[z|256]=24):(g[z]=31744,g[z|256]=64512,v[z]=13,v[z|256]=13)}const M=new Uint32Array(2048),I=new Uint32Array(64),R=new Uint32Array(64);for(let z=1;z<1024;++z){let j=z<<13,W=0;for(;!(j&8388608);)j<<=1,W-=8388608;j&=-8388609,W+=947912704,M[z]=j|W}for(let z=1024;z<2048;++z)M[z]=939524096+(z-1024<<13);for(let z=1;z<31;++z)I[z]=z<<23;I[31]=1199570944,I[32]=2147483648;for(let z=33;z<63;++z)I[z]=2147483648+(z-32<<23);I[63]=3347054592;for(let z=1;z<64;++z)z!==32&&(R[z]=1024);return{floatView:e,uint32View:c,baseTable:g,shiftTable:v,mantissaTable:M,exponentTable:I,offsetTable:R}}function oa(C){Math.abs(C)>65504&&S.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),C=go(C,-65504,65504),rc.floatView[0]=C;const e=rc.uint32View[0],c=e>>23&511;return rc.baseTable[c]+((e&8388607)>>rc.shiftTable[c])}function Cl(C){const e=C>>10;return rc.uint32View[0]=rc.mantissaTable[rc.offsetTable[e]+(C&1023)]+rc.exponentTable[e],rc.floatView[0]}const w1={toHalfFloat:oa,fromHalfFloat:Cl},Vo=new Qe,Pc=new yn;class Qi{constructor(e,c,g=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=c,this.count=e!==void 0?e.length/c:0,this.normalized=g,this.usage=Pp,this.updateRange={offset:0,count:-1},this.gpuType=_s,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,c,g){e*=this.itemSize,g*=c.itemSize;for(let v=0,M=this.itemSize;v<M;v++)this.array[e+v]=c.array[g+v];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let c=0,g=this.count;c<g;c++)Pc.fromBufferAttribute(this,c),Pc.applyMatrix3(e),this.setXY(c,Pc.x,Pc.y);else if(this.itemSize===3)for(let c=0,g=this.count;c<g;c++)Vo.fromBufferAttribute(this,c),Vo.applyMatrix3(e),this.setXYZ(c,Vo.x,Vo.y,Vo.z);return this}applyMatrix4(e){for(let c=0,g=this.count;c<g;c++)Vo.fromBufferAttribute(this,c),Vo.applyMatrix4(e),this.setXYZ(c,Vo.x,Vo.y,Vo.z);return this}applyNormalMatrix(e){for(let c=0,g=this.count;c<g;c++)Vo.fromBufferAttribute(this,c),Vo.applyNormalMatrix(e),this.setXYZ(c,Vo.x,Vo.y,Vo.z);return this}transformDirection(e){for(let c=0,g=this.count;c<g;c++)Vo.fromBufferAttribute(this,c),Vo.transformDirection(e),this.setXYZ(c,Vo.x,Vo.y,Vo.z);return this}set(e,c=0){return this.array.set(e,c),this}getComponent(e,c){let g=this.array[e*this.itemSize+c];return this.normalized&&(g=Ia(g,this.array)),g}setComponent(e,c,g){return this.normalized&&(g=fi(g,this.array)),this.array[e*this.itemSize+c]=g,this}getX(e){let c=this.array[e*this.itemSize];return this.normalized&&(c=Ia(c,this.array)),c}setX(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize]=c,this}getY(e){let c=this.array[e*this.itemSize+1];return this.normalized&&(c=Ia(c,this.array)),c}setY(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize+1]=c,this}getZ(e){let c=this.array[e*this.itemSize+2];return this.normalized&&(c=Ia(c,this.array)),c}setZ(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize+2]=c,this}getW(e){let c=this.array[e*this.itemSize+3];return this.normalized&&(c=Ia(c,this.array)),c}setW(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize+3]=c,this}setXY(e,c,g){return e*=this.itemSize,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array)),this.array[e+0]=c,this.array[e+1]=g,this}setXYZ(e,c,g,v){return e*=this.itemSize,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array),v=fi(v,this.array)),this.array[e+0]=c,this.array[e+1]=g,this.array[e+2]=v,this}setXYZW(e,c,g,v,M){return e*=this.itemSize,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array),v=fi(v,this.array),M=fi(M,this.array)),this.array[e+0]=c,this.array[e+1]=g,this.array[e+2]=v,this.array[e+3]=M,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Pp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class ff extends Qi{constructor(e,c,g){super(new Int8Array(e),c,g)}}class ir extends Qi{constructor(e,c,g){super(new Uint8Array(e),c,g)}}class dh extends Qi{constructor(e,c,g){super(new Uint8ClampedArray(e),c,g)}}class Sg extends Qi{constructor(e,c,g){super(new Int16Array(e),c,g)}}class Tu extends Qi{constructor(e,c,g){super(new Uint16Array(e),c,g)}}class Om extends Qi{constructor(e,c,g){super(new Int32Array(e),c,g)}}class hp extends Qi{constructor(e,c,g){super(new Uint32Array(e),c,g)}}class Bu extends Qi{constructor(e,c,g){super(new Uint16Array(e),c,g),this.isFloat16BufferAttribute=!0}getX(e){let c=Cl(this.array[e*this.itemSize]);return this.normalized&&(c=Ia(c,this.array)),c}setX(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize]=oa(c),this}getY(e){let c=Cl(this.array[e*this.itemSize+1]);return this.normalized&&(c=Ia(c,this.array)),c}setY(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize+1]=oa(c),this}getZ(e){let c=Cl(this.array[e*this.itemSize+2]);return this.normalized&&(c=Ia(c,this.array)),c}setZ(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize+2]=oa(c),this}getW(e){let c=Cl(this.array[e*this.itemSize+3]);return this.normalized&&(c=Ia(c,this.array)),c}setW(e,c){return this.normalized&&(c=fi(c,this.array)),this.array[e*this.itemSize+3]=oa(c),this}setXY(e,c,g){return e*=this.itemSize,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array)),this.array[e+0]=oa(c),this.array[e+1]=oa(g),this}setXYZ(e,c,g,v){return e*=this.itemSize,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array),v=fi(v,this.array)),this.array[e+0]=oa(c),this.array[e+1]=oa(g),this.array[e+2]=oa(v),this}setXYZW(e,c,g,v,M){return e*=this.itemSize,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array),v=fi(v,this.array),M=fi(M,this.array)),this.array[e+0]=oa(c),this.array[e+1]=oa(g),this.array[e+2]=oa(v),this.array[e+3]=oa(M),this}}class wr extends Qi{constructor(e,c,g){super(new Float32Array(e),c,g)}}class wg extends Qi{constructor(e,c,g){super(new Float64Array(e),c,g)}}let gf=0;const ll=new ii,mf=new $r,Iu=new Qe,cl=new Es,Ru=new Es,ts=new Qe;class ui extends Dl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:gf++}),this.uuid=Ba(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ap(e)?hp:Tu)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,c){return this.attributes[e]=c,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,c,g=0){this.groups.push({start:e,count:c,materialIndex:g})}clearGroups(){this.groups=[]}setDrawRange(e,c){this.drawRange.start=e,this.drawRange.count=c}applyMatrix4(e){const c=this.attributes.position;c!==void 0&&(c.applyMatrix4(e),c.needsUpdate=!0);const g=this.attributes.normal;if(g!==void 0){const M=new pi().getNormalMatrix(e);g.applyNormalMatrix(M),g.needsUpdate=!0}const v=this.attributes.tangent;return v!==void 0&&(v.transformDirection(e),v.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ll.makeRotationFromQuaternion(e),this.applyMatrix4(ll),this}rotateX(e){return ll.makeRotationX(e),this.applyMatrix4(ll),this}rotateY(e){return ll.makeRotationY(e),this.applyMatrix4(ll),this}rotateZ(e){return ll.makeRotationZ(e),this.applyMatrix4(ll),this}translate(e,c,g){return ll.makeTranslation(e,c,g),this.applyMatrix4(ll),this}scale(e,c,g){return ll.makeScale(e,c,g),this.applyMatrix4(ll),this}lookAt(e){return mf.lookAt(e),mf.updateMatrix(),this.applyMatrix4(mf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Iu).negate(),this.translate(Iu.x,Iu.y,Iu.z),this}setFromPoints(e){const c=[];for(let g=0,v=e.length;g<v;g++){const M=e[g];c.push(M.x,M.y,M.z||0)}return this.setAttribute("position",new wr(c,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Es);const e=this.attributes.position,c=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){S.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Qe(-1/0,-1/0,-1/0),new Qe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),c)for(let g=0,v=c.length;g<v;g++){const M=c[g];cl.setFromBufferAttribute(M),this.morphTargetsRelative?(ts.addVectors(this.boundingBox.min,cl.min),this.boundingBox.expandByPoint(ts),ts.addVectors(this.boundingBox.max,cl.max),this.boundingBox.expandByPoint(ts)):(this.boundingBox.expandByPoint(cl.min),this.boundingBox.expandByPoint(cl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&S.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fa);const e=this.attributes.position,c=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){S.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Qe,1/0);return}if(e){const g=this.boundingSphere.center;if(cl.setFromBufferAttribute(e),c)for(let M=0,I=c.length;M<I;M++){const R=c[M];Ru.setFromBufferAttribute(R),this.morphTargetsRelative?(ts.addVectors(cl.min,Ru.min),cl.expandByPoint(ts),ts.addVectors(cl.max,Ru.max),cl.expandByPoint(ts)):(cl.expandByPoint(Ru.min),cl.expandByPoint(Ru.max))}cl.getCenter(g);let v=0;for(let M=0,I=e.count;M<I;M++)ts.fromBufferAttribute(e,M),v=Math.max(v,g.distanceToSquared(ts));if(c)for(let M=0,I=c.length;M<I;M++){const R=c[M],z=this.morphTargetsRelative;for(let j=0,W=R.count;j<W;j++)ts.fromBufferAttribute(R,j),z&&(Iu.fromBufferAttribute(e,j),ts.add(Iu)),v=Math.max(v,g.distanceToSquared(ts))}this.boundingSphere.radius=Math.sqrt(v),isNaN(this.boundingSphere.radius)&&S.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,c=this.attributes;if(e===null||c.position===void 0||c.normal===void 0||c.uv===void 0){S.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const g=e.array,v=c.position.array,M=c.normal.array,I=c.uv.array,R=v.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qi(new Float32Array(4*R),4));const z=this.getAttribute("tangent").array,j=[],W=[];for(let Ve=0;Ve<R;Ve++)j[Ve]=new Qe,W[Ve]=new Qe;const q=new Qe,Z=new Qe,ne=new Qe,se=new yn,fe=new yn,$=new yn,ee=new Qe,ve=new Qe;function ue(Ve,qt,vn){q.fromArray(v,Ve*3),Z.fromArray(v,qt*3),ne.fromArray(v,vn*3),se.fromArray(I,Ve*2),fe.fromArray(I,qt*2),$.fromArray(I,vn*2),Z.sub(q),ne.sub(q),fe.sub(se),$.sub(se);const jt=1/(fe.x*$.y-$.x*fe.y);isFinite(jt)&&(ee.copy(Z).multiplyScalar($.y).addScaledVector(ne,-fe.y).multiplyScalar(jt),ve.copy(ne).multiplyScalar(fe.x).addScaledVector(Z,-$.x).multiplyScalar(jt),j[Ve].add(ee),j[qt].add(ee),j[vn].add(ee),W[Ve].add(ve),W[qt].add(ve),W[vn].add(ve))}let Ce=this.groups;Ce.length===0&&(Ce=[{start:0,count:g.length}]);for(let Ve=0,qt=Ce.length;Ve<qt;++Ve){const vn=Ce[Ve],jt=vn.start,Wt=vn.count;for(let $e=jt,En=jt+Wt;$e<En;$e+=3)ue(g[$e+0],g[$e+1],g[$e+2])}const Oe=new Qe,We=new Qe,Ze=new Qe,ht=new Qe;function Te(Ve){Ze.fromArray(M,Ve*3),ht.copy(Ze);const qt=j[Ve];Oe.copy(qt),Oe.sub(Ze.multiplyScalar(Ze.dot(qt))).normalize(),We.crossVectors(ht,qt);const jt=We.dot(W[Ve])<0?-1:1;z[Ve*4]=Oe.x,z[Ve*4+1]=Oe.y,z[Ve*4+2]=Oe.z,z[Ve*4+3]=jt}for(let Ve=0,qt=Ce.length;Ve<qt;++Ve){const vn=Ce[Ve],jt=vn.start,Wt=vn.count;for(let $e=jt,En=jt+Wt;$e<En;$e+=3)Te(g[$e+0]),Te(g[$e+1]),Te(g[$e+2])}}computeVertexNormals(){const e=this.index,c=this.getAttribute("position");if(c!==void 0){let g=this.getAttribute("normal");if(g===void 0)g=new Qi(new Float32Array(c.count*3),3),this.setAttribute("normal",g);else for(let Z=0,ne=g.count;Z<ne;Z++)g.setXYZ(Z,0,0,0);const v=new Qe,M=new Qe,I=new Qe,R=new Qe,z=new Qe,j=new Qe,W=new Qe,q=new Qe;if(e)for(let Z=0,ne=e.count;Z<ne;Z+=3){const se=e.getX(Z+0),fe=e.getX(Z+1),$=e.getX(Z+2);v.fromBufferAttribute(c,se),M.fromBufferAttribute(c,fe),I.fromBufferAttribute(c,$),W.subVectors(I,M),q.subVectors(v,M),W.cross(q),R.fromBufferAttribute(g,se),z.fromBufferAttribute(g,fe),j.fromBufferAttribute(g,$),R.add(W),z.add(W),j.add(W),g.setXYZ(se,R.x,R.y,R.z),g.setXYZ(fe,z.x,z.y,z.z),g.setXYZ($,j.x,j.y,j.z)}else for(let Z=0,ne=c.count;Z<ne;Z+=3)v.fromBufferAttribute(c,Z+0),M.fromBufferAttribute(c,Z+1),I.fromBufferAttribute(c,Z+2),W.subVectors(I,M),q.subVectors(v,M),W.cross(q),g.setXYZ(Z+0,W.x,W.y,W.z),g.setXYZ(Z+1,W.x,W.y,W.z),g.setXYZ(Z+2,W.x,W.y,W.z);this.normalizeNormals(),g.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let c=0,g=e.count;c<g;c++)ts.fromBufferAttribute(e,c),ts.normalize(),e.setXYZ(c,ts.x,ts.y,ts.z)}toNonIndexed(){function e(R,z){const j=R.array,W=R.itemSize,q=R.normalized,Z=new j.constructor(z.length*W);let ne=0,se=0;for(let fe=0,$=z.length;fe<$;fe++){R.isInterleavedBufferAttribute?ne=z[fe]*R.data.stride+R.offset:ne=z[fe]*W;for(let ee=0;ee<W;ee++)Z[se++]=j[ne++]}return new Qi(Z,W,q)}if(this.index===null)return S.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const c=new ui,g=this.index.array,v=this.attributes;for(const R in v){const z=v[R],j=e(z,g);c.setAttribute(R,j)}const M=this.morphAttributes;for(const R in M){const z=[],j=M[R];for(let W=0,q=j.length;W<q;W++){const Z=j[W],ne=e(Z,g);z.push(ne)}c.morphAttributes[R]=z}c.morphTargetsRelative=this.morphTargetsRelative;const I=this.groups;for(let R=0,z=I.length;R<z;R++){const j=I[R];c.addGroup(j.start,j.count,j.materialIndex)}return c}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const z=this.parameters;for(const j in z)z[j]!==void 0&&(e[j]=z[j]);return e}e.data={attributes:{}};const c=this.index;c!==null&&(e.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});const g=this.attributes;for(const z in g){const j=g[z];e.data.attributes[z]=j.toJSON(e.data)}const v={};let M=!1;for(const z in this.morphAttributes){const j=this.morphAttributes[z],W=[];for(let q=0,Z=j.length;q<Z;q++){const ne=j[q];W.push(ne.toJSON(e.data))}W.length>0&&(v[z]=W,M=!0)}M&&(e.data.morphAttributes=v,e.data.morphTargetsRelative=this.morphTargetsRelative);const I=this.groups;I.length>0&&(e.data.groups=JSON.parse(JSON.stringify(I)));const R=this.boundingSphere;return R!==null&&(e.data.boundingSphere={center:R.center.toArray(),radius:R.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const c={};this.name=e.name;const g=e.index;g!==null&&this.setIndex(g.clone(c));const v=e.attributes;for(const j in v){const W=v[j];this.setAttribute(j,W.clone(c))}const M=e.morphAttributes;for(const j in M){const W=[],q=M[j];for(let Z=0,ne=q.length;Z<ne;Z++)W.push(q[Z].clone(c));this.morphAttributes[j]=W}this.morphTargetsRelative=e.morphTargetsRelative;const I=e.groups;for(let j=0,W=I.length;j<W;j++){const q=I[j];this.addGroup(q.start,q.count,q.materialIndex)}const R=e.boundingBox;R!==null&&(this.boundingBox=R.clone());const z=e.boundingSphere;return z!==null&&(this.boundingSphere=z.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Fu=new ii,Lc=new Ua,yf=new Fa,hh=new Qe,ic=new Qe,Ou=new Qe,Du=new Qe,Af=new Qe,Pu=new Qe,Lu=new yn,ku=new yn,oc=new yn,vd=new Qe,Jp=new Qe,fh=new Qe,gh=new Qe,mh=new Qe;class bs extends $r{constructor(e=new ui,c=new ds){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=c,this.updateMorphTargets()}copy(e,c){return super.copy(e,c),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const c=this.geometry.morphAttributes,g=Object.keys(c);if(g.length>0){const v=c[g[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,I=v.length;M<I;M++){const R=v[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=M}}}}getVertexPosition(e,c){const g=this.geometry,v=g.attributes.position,M=g.morphAttributes.position,I=g.morphTargetsRelative;c.fromBufferAttribute(v,e);const R=this.morphTargetInfluences;if(M&&R){Pu.set(0,0,0);for(let z=0,j=M.length;z<j;z++){const W=R[z],q=M[z];W!==0&&(Af.fromBufferAttribute(q,e),I?Pu.addScaledVector(Af,W):Pu.addScaledVector(Af.sub(c),W))}c.add(Pu)}return c}raycast(e,c){const g=this.geometry,v=this.material,M=this.matrixWorld;v!==void 0&&(g.boundingSphere===null&&g.computeBoundingSphere(),yf.copy(g.boundingSphere),yf.applyMatrix4(M),Lc.copy(e.ray).recast(e.near),!(yf.containsPoint(Lc.origin)===!1&&(Lc.intersectSphere(yf,hh)===null||Lc.origin.distanceToSquared(hh)>wm(e.far-e.near,2)))&&(Fu.copy(M).invert(),Lc.copy(e.ray).applyMatrix4(Fu),!(g.boundingBox!==null&&Lc.intersectsBox(g.boundingBox)===!1)&&this._computeIntersections(e,c,Lc)))}_computeIntersections(e,c,g){let v;const M=this.geometry,I=this.material,R=M.index,z=M.attributes.position,j=M.attributes.uv,W=M.attributes.uv1,q=M.attributes.normal,Z=M.groups,ne=M.drawRange;if(R!==null)if(Array.isArray(I))for(let se=0,fe=Z.length;se<fe;se++){const $=Z[se],ee=I[$.materialIndex],ve=Math.max($.start,ne.start),ue=Math.min(R.count,Math.min($.start+$.count,ne.start+ne.count));for(let Ce=ve,Oe=ue;Ce<Oe;Ce+=3){const We=R.getX(Ce),Ze=R.getX(Ce+1),ht=R.getX(Ce+2);v=yh(this,ee,e,g,j,W,q,We,Ze,ht),v&&(v.faceIndex=Math.floor(Ce/3),v.face.materialIndex=$.materialIndex,c.push(v))}}else{const se=Math.max(0,ne.start),fe=Math.min(R.count,ne.start+ne.count);for(let $=se,ee=fe;$<ee;$+=3){const ve=R.getX($),ue=R.getX($+1),Ce=R.getX($+2);v=yh(this,I,e,g,j,W,q,ve,ue,Ce),v&&(v.faceIndex=Math.floor($/3),c.push(v))}}else if(z!==void 0)if(Array.isArray(I))for(let se=0,fe=Z.length;se<fe;se++){const $=Z[se],ee=I[$.materialIndex],ve=Math.max($.start,ne.start),ue=Math.min(z.count,Math.min($.start+$.count,ne.start+ne.count));for(let Ce=ve,Oe=ue;Ce<Oe;Ce+=3){const We=Ce,Ze=Ce+1,ht=Ce+2;v=yh(this,ee,e,g,j,W,q,We,Ze,ht),v&&(v.faceIndex=Math.floor(Ce/3),v.face.materialIndex=$.materialIndex,c.push(v))}}else{const se=Math.max(0,ne.start),fe=Math.min(z.count,ne.start+ne.count);for(let $=se,ee=fe;$<ee;$+=3){const ve=$,ue=$+1,Ce=$+2;v=yh(this,I,e,g,j,W,q,ve,ue,Ce),v&&(v.faceIndex=Math.floor($/3),c.push(v))}}}}function Tg(C,e,c,g,v,M,I,R){let z;if(e.side===He?z=g.intersectTriangle(I,M,v,!0,R):z=g.intersectTriangle(v,M,I,e.side===nt,R),z===null)return null;mh.copy(R),mh.applyMatrix4(C.matrixWorld);const j=c.ray.origin.distanceTo(mh);return j<c.near||j>c.far?null:{distance:j,point:mh.clone(),object:C}}function yh(C,e,c,g,v,M,I,R,z,j){C.getVertexPosition(R,ic),C.getVertexPosition(z,Ou),C.getVertexPosition(j,Du);const W=Tg(C,e,c,g,ic,Ou,Du,gh);if(W){v&&(Lu.fromBufferAttribute(v,R),ku.fromBufferAttribute(v,z),oc.fromBufferAttribute(v,j),W.uv=Aa.getInterpolation(gh,ic,Ou,Du,Lu,ku,oc,new yn)),M&&(Lu.fromBufferAttribute(M,R),ku.fromBufferAttribute(M,z),oc.fromBufferAttribute(M,j),W.uv1=Aa.getInterpolation(gh,ic,Ou,Du,Lu,ku,oc,new yn),W.uv2=W.uv1),I&&(vd.fromBufferAttribute(I,R),Jp.fromBufferAttribute(I,z),fh.fromBufferAttribute(I,j),W.normal=Aa.getInterpolation(gh,ic,Ou,Du,vd,Jp,fh,new Qe),W.normal.dot(g.direction)>0&&W.normal.multiplyScalar(-1));const q={a:R,b:z,c:j,normal:new Qe,materialIndex:0};Aa.getNormal(ic,Ou,Du,q.normal),W.face=q}return W}class kc extends ui{constructor(e=1,c=1,g=1,v=1,M=1,I=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:c,depth:g,widthSegments:v,heightSegments:M,depthSegments:I};const R=this;v=Math.floor(v),M=Math.floor(M),I=Math.floor(I);const z=[],j=[],W=[],q=[];let Z=0,ne=0;se("z","y","x",-1,-1,g,c,e,I,M,0),se("z","y","x",1,-1,g,c,-e,I,M,1),se("x","z","y",1,1,e,g,c,v,I,2),se("x","z","y",1,-1,e,g,-c,v,I,3),se("x","y","z",1,-1,e,c,g,v,M,4),se("x","y","z",-1,-1,e,c,-g,v,M,5),this.setIndex(z),this.setAttribute("position",new wr(j,3)),this.setAttribute("normal",new wr(W,3)),this.setAttribute("uv",new wr(q,2));function se(fe,$,ee,ve,ue,Ce,Oe,We,Ze,ht,Te){const Ve=Ce/Ze,qt=Oe/ht,vn=Ce/2,jt=Oe/2,Wt=We/2,$e=Ze+1,En=ht+1;let ln=0,gn=0;const xn=new Qe;for(let Sn=0;Sn<En;Sn++){const Ut=Sn*qt-jt;for(let dn=0;dn<$e;dn++){const Pn=dn*Ve-vn;xn[fe]=Pn*ve,xn[$]=Ut*ue,xn[ee]=Wt,j.push(xn.x,xn.y,xn.z),xn[fe]=0,xn[$]=0,xn[ee]=We>0?1:-1,W.push(xn.x,xn.y,xn.z),q.push(dn/Ze),q.push(1-Sn/ht),ln+=1}}for(let Sn=0;Sn<ht;Sn++)for(let Ut=0;Ut<Ze;Ut++){const dn=Z+Ut+$e*Sn,Pn=Z+Ut+$e*(Sn+1),cr=Z+(Ut+1)+$e*(Sn+1),Er=Z+(Ut+1)+$e*Sn;z.push(dn,Pn,Er),z.push(Pn,cr,Er),gn+=6}R.addGroup(ne,gn,Te),ne+=gn,Z+=ln}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qp(C){const e={};for(const c in C){e[c]={};for(const g in C[c]){const v=C[c][g];v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture||v.isQuaternion)?v.isRenderTargetTexture?(S.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[c][g]=null):e[c][g]=v.clone():Array.isArray(v)?e[c][g]=v.slice():e[c][g]=v}}return e}function zi(C){const e={};for(let c=0;c<C.length;c++){const g=qp(C[c]);for(const v in g)e[v]=g[v]}return e}function wi(C){const e=[];for(let c=0;c<C.length;c++)e.push(C[c].clone());return e}function hs(C){return C.getRenderTarget()===null?C.outputColorSpace:ho}const Os={clone:qp,merge:zi};var xs=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Sl=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qo extends ia{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=xs,this.fragmentShader=Sl,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qp(e.uniforms),this.uniformsGroups=wi(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const c=super.toJSON(e);c.glslVersion=this.glslVersion,c.uniforms={};for(const v in this.uniforms){const I=this.uniforms[v].value;I&&I.isTexture?c.uniforms[v]={type:"t",value:I.toJSON(e).uuid}:I&&I.isColor?c.uniforms[v]={type:"c",value:I.getHex()}:I&&I.isVector2?c.uniforms[v]={type:"v2",value:I.toArray()}:I&&I.isVector3?c.uniforms[v]={type:"v3",value:I.toArray()}:I&&I.isVector4?c.uniforms[v]={type:"v4",value:I.toArray()}:I&&I.isMatrix3?c.uniforms[v]={type:"m3",value:I.toArray()}:I&&I.isMatrix4?c.uniforms[v]={type:"m4",value:I.toArray()}:c.uniforms[v]={value:I}}Object.keys(this.defines).length>0&&(c.defines=this.defines),c.vertexShader=this.vertexShader,c.fragmentShader=this.fragmentShader,c.lights=this.lights,c.clipping=this.clipping;const g={};for(const v in this.extensions)this.extensions[v]===!0&&(g[v]=!0);return Object.keys(g).length>0&&(c.extensions=g),c}}class Xo extends $r{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ii,this.projectionMatrix=new ii,this.projectionMatrixInverse=new ii,this.coordinateSystem=Zl}copy(e,c){return super.copy(e,c),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return e.set(-c[8],-c[9],-c[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,c){super.updateWorldMatrix(e,c),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Yo extends Xo{constructor(e=50,c=1,g=.1,v=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=g,this.far=v,this.focus=10,this.aspect=c,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,c){return super.copy(e,c),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const c=.5*this.getFilmHeight()/e;this.fov=Pl*2*Math.atan(c),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Pl*2*Math.atan(Math.tan(kp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,c,g,v,M,I){this.aspect=e/c,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=c,this.view.offsetX=g,this.view.offsetY=v,this.view.width=M,this.view.height=I,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let c=e*Math.tan(kp*.5*this.fov)/this.zoom,g=2*c,v=this.aspect*g,M=-.5*v;const I=this.view;if(this.view!==null&&this.view.enabled){const z=I.fullWidth,j=I.fullHeight;M+=I.offsetX*v/z,c-=I.offsetY*g/j,v*=I.width/z,g*=I.height/j}const R=this.filmOffset;R!==0&&(M+=e*R/this.getFilmWidth()),this.projectionMatrix.makePerspective(M,M+v,c,c-g,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const c=super.toJSON(e);return c.object.fov=this.fov,c.object.zoom=this.zoom,c.object.near=this.near,c.object.far=this.far,c.object.focus=this.focus,c.object.aspect=this.aspect,this.view!==null&&(c.object.view=Object.assign({},this.view)),c.object.filmGauge=this.filmGauge,c.object.filmOffset=this.filmOffset,c}}const Ul=-90,pl=1;class fp extends $r{constructor(e,c,g){super(),this.type="CubeCamera",this.renderTarget=g,this.coordinateSystem=null;const v=new Yo(Ul,pl,e,c);v.layers=this.layers,this.add(v);const M=new Yo(Ul,pl,e,c);M.layers=this.layers,this.add(M);const I=new Yo(Ul,pl,e,c);I.layers=this.layers,this.add(I);const R=new Yo(Ul,pl,e,c);R.layers=this.layers,this.add(R);const z=new Yo(Ul,pl,e,c);z.layers=this.layers,this.add(z);const j=new Yo(Ul,pl,e,c);j.layers=this.layers,this.add(j)}updateCoordinateSystem(){const e=this.coordinateSystem,c=this.children.concat(),[g,v,M,I,R,z]=c;for(const j of c)this.remove(j);if(e===Zl)g.up.set(0,1,0),g.lookAt(1,0,0),v.up.set(0,1,0),v.lookAt(-1,0,0),M.up.set(0,0,-1),M.lookAt(0,1,0),I.up.set(0,0,1),I.lookAt(0,-1,0),R.up.set(0,1,0),R.lookAt(0,0,1),z.up.set(0,1,0),z.lookAt(0,0,-1);else if(e===xc)g.up.set(0,-1,0),g.lookAt(-1,0,0),v.up.set(0,-1,0),v.lookAt(1,0,0),M.up.set(0,0,1),M.lookAt(0,1,0),I.up.set(0,0,-1),I.lookAt(0,-1,0),R.up.set(0,-1,0),R.lookAt(0,0,1),z.up.set(0,-1,0),z.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const j of c)this.add(j),j.updateMatrixWorld()}update(e,c){this.parent===null&&this.updateMatrixWorld();const g=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[v,M,I,R,z,j]=this.children,W=e.getRenderTarget(),q=e.xr.enabled;e.xr.enabled=!1;const Z=g.texture.generateMipmaps;g.texture.generateMipmaps=!1,e.setRenderTarget(g,0),e.render(c,v),e.setRenderTarget(g,1),e.render(c,M),e.setRenderTarget(g,2),e.render(c,I),e.setRenderTarget(g,3),e.render(c,R),e.setRenderTarget(g,4),e.render(c,z),g.texture.generateMipmaps=Z,e.setRenderTarget(g,5),e.render(c,j),e.setRenderTarget(W),e.xr.enabled=q,g.texture.needsPMREMUpdate=!0}}class Nl extends Bo{constructor(e,c,g,v,M,I,R,z,j,W){e=e!==void 0?e:[],c=c!==void 0?c:vs,super(e,c,g,v,M,I,R,z,j,W),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class va extends dr{constructor(e=1,c={}){super(e,e,c),this.isWebGLCubeRenderTarget=!0;const g={width:e,height:e,depth:1},v=[g,g,g,g,g,g];c.encoding!==void 0&&(pd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),c.colorSpace=c.encoding===Kl?To:Dp),this.texture=new Nl(v,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=c.generateMipmaps!==void 0?c.generateMipmaps:!1,this.texture.minFilter=c.minFilter!==void 0?c.minFilter:$i}fromEquirectangularTexture(e,c){this.texture.type=c.type,this.texture.colorSpace=c.colorSpace,this.texture.generateMipmaps=c.generateMipmaps,this.texture.minFilter=c.minFilter,this.texture.magFilter=c.magFilter;const g={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},v=new kc(5,5,5),M=new Qo({name:"CubemapFromEquirect",uniforms:qp(g.uniforms),vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,side:He,blending:St});M.uniforms.tEquirect.value=c;const I=new bs(v,M),R=c.minFilter;return c.minFilter===lo&&(c.minFilter=$i),new fp(1,10,this).update(e,I),c.minFilter=R,I.geometry.dispose(),I.material.dispose(),this}clear(e,c,g,v){const M=e.getRenderTarget();for(let I=0;I<6;I++)e.setRenderTarget(this,I),e.clear(c,g,v);e.setRenderTarget(M)}}const zu=new Qe,Bg=new Qe,Zp=new pi;class ul{constructor(e=new Qe(1,0,0),c=0){this.isPlane=!0,this.normal=e,this.constant=c}set(e,c){return this.normal.copy(e),this.constant=c,this}setComponents(e,c,g,v){return this.normal.set(e,c,g),this.constant=v,this}setFromNormalAndCoplanarPoint(e,c){return this.normal.copy(e),this.constant=-c.dot(this.normal),this}setFromCoplanarPoints(e,c,g){const v=zu.subVectors(g,c).cross(Bg.subVectors(e,c)).normalize();return this.setFromNormalAndCoplanarPoint(v,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,c){return c.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,c){const g=e.delta(zu),v=this.normal.dot(g);if(v===0)return this.distanceToPoint(e.start)===0?c.copy(e.start):null;const M=-(e.start.dot(this.normal)+this.constant)/v;return M<0||M>1?null:c.copy(e.start).addScaledVector(g,M)}intersectsLine(e){const c=this.distanceToPoint(e.start),g=this.distanceToPoint(e.end);return c<0&&g>0||g<0&&c>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,c){const g=c||Zp.getNormalMatrix(e),v=this.coplanarPoint(zu).applyMatrix4(e),M=this.normal.applyMatrix3(g).normalize();return this.constant=-v.dot(M),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const zc=new Fa,sc=new Qe;class Gu{constructor(e=new ul,c=new ul,g=new ul,v=new ul,M=new ul,I=new ul){this.planes=[e,c,g,v,M,I]}set(e,c,g,v,M,I){const R=this.planes;return R[0].copy(e),R[1].copy(c),R[2].copy(g),R[3].copy(v),R[4].copy(M),R[5].copy(I),this}copy(e){const c=this.planes;for(let g=0;g<6;g++)c[g].copy(e.planes[g]);return this}setFromProjectionMatrix(e,c=Zl){const g=this.planes,v=e.elements,M=v[0],I=v[1],R=v[2],z=v[3],j=v[4],W=v[5],q=v[6],Z=v[7],ne=v[8],se=v[9],fe=v[10],$=v[11],ee=v[12],ve=v[13],ue=v[14],Ce=v[15];if(g[0].setComponents(z-M,Z-j,$-ne,Ce-ee).normalize(),g[1].setComponents(z+M,Z+j,$+ne,Ce+ee).normalize(),g[2].setComponents(z+I,Z+W,$+se,Ce+ve).normalize(),g[3].setComponents(z-I,Z-W,$-se,Ce-ve).normalize(),g[4].setComponents(z-R,Z-q,$-fe,Ce-ue).normalize(),c===Zl)g[5].setComponents(z+R,Z+q,$+fe,Ce+ue).normalize();else if(c===xc)g[5].setComponents(R,q,fe,ue).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+c);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),zc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const c=e.geometry;c.boundingSphere===null&&c.computeBoundingSphere(),zc.copy(c.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(zc)}intersectsSprite(e){return zc.center.set(0,0,0),zc.radius=.7071067811865476,zc.applyMatrix4(e.matrixWorld),this.intersectsSphere(zc)}intersectsSphere(e){const c=this.planes,g=e.center,v=-e.radius;for(let M=0;M<6;M++)if(c[M].distanceToPoint(g)<v)return!1;return!0}intersectsBox(e){const c=this.planes;for(let g=0;g<6;g++){const v=c[g];if(sc.x=v.normal.x>0?e.max.x:e.min.x,sc.y=v.normal.y>0?e.max.y:e.min.y,sc.z=v.normal.z>0?e.max.z:e.min.z,v.distanceToPoint(sc)<0)return!1}return!0}containsPoint(e){const c=this.planes;for(let g=0;g<6;g++)if(c[g].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function gp(){let C=null,e=!1,c=null,g=null;function v(M,I){c(M,I),g=C.requestAnimationFrame(v)}return{start:function(){e!==!0&&c!==null&&(g=C.requestAnimationFrame(v),e=!0)},stop:function(){C.cancelAnimationFrame(g),e=!1},setAnimationLoop:function(M){c=M},setContext:function(M){C=M}}}function Ah(C,e){const c=e.isWebGL2,g=new WeakMap;function v(j,W){const q=j.array,Z=j.usage,ne=C.createBuffer();C.bindBuffer(W,ne),C.bufferData(W,q,Z),j.onUploadCallback();let se;if(q instanceof Float32Array)se=C.FLOAT;else if(q instanceof Uint16Array)if(j.isFloat16BufferAttribute)if(c)se=C.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else se=C.UNSIGNED_SHORT;else if(q instanceof Int16Array)se=C.SHORT;else if(q instanceof Uint32Array)se=C.UNSIGNED_INT;else if(q instanceof Int32Array)se=C.INT;else if(q instanceof Int8Array)se=C.BYTE;else if(q instanceof Uint8Array)se=C.UNSIGNED_BYTE;else if(q instanceof Uint8ClampedArray)se=C.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+q);return{buffer:ne,type:se,bytesPerElement:q.BYTES_PER_ELEMENT,version:j.version}}function M(j,W,q){const Z=W.array,ne=W.updateRange;C.bindBuffer(q,j),ne.count===-1?C.bufferSubData(q,0,Z):(c?C.bufferSubData(q,ne.offset*Z.BYTES_PER_ELEMENT,Z,ne.offset,ne.count):C.bufferSubData(q,ne.offset*Z.BYTES_PER_ELEMENT,Z.subarray(ne.offset,ne.offset+ne.count)),ne.count=-1),W.onUploadCallback()}function I(j){return j.isInterleavedBufferAttribute&&(j=j.data),g.get(j)}function R(j){j.isInterleavedBufferAttribute&&(j=j.data);const W=g.get(j);W&&(C.deleteBuffer(W.buffer),g.delete(j))}function z(j,W){if(j.isGLBufferAttribute){const Z=g.get(j);(!Z||Z.version<j.version)&&g.set(j,{buffer:j.buffer,type:j.type,bytesPerElement:j.elementSize,version:j.version});return}j.isInterleavedBufferAttribute&&(j=j.data);const q=g.get(j);q===void 0?g.set(j,v(j,W)):q.version<j.version&&(M(q.buffer,j,W),q.version=j.version)}return{get:I,remove:R,update:z}}class mp extends ui{constructor(e=1,c=1,g=1,v=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:c,widthSegments:g,heightSegments:v};const M=e/2,I=c/2,R=Math.floor(g),z=Math.floor(v),j=R+1,W=z+1,q=e/R,Z=c/z,ne=[],se=[],fe=[],$=[];for(let ee=0;ee<W;ee++){const ve=ee*Z-I;for(let ue=0;ue<j;ue++){const Ce=ue*q-M;se.push(Ce,-ve,0),fe.push(0,0,1),$.push(ue/R),$.push(1-ee/z)}}for(let ee=0;ee<z;ee++)for(let ve=0;ve<R;ve++){const ue=ve+j*ee,Ce=ve+j*(ee+1),Oe=ve+1+j*(ee+1),We=ve+1+j*ee;ne.push(ue,Ce,We),ne.push(Ce,Oe,We)}this.setIndex(ne),this.setAttribute("position",new wr(se,3)),this.setAttribute("normal",new wr(fe,3)),this.setAttribute("uv",new wr($,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mp(e.width,e.height,e.widthSegments,e.heightSegments)}}var vf=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,_f=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,po=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,uo=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jl=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,wl=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vh=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,dl=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_h=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ig=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Rg=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,T1=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Gc=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_d=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Fg=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Eh=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,yp=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ef=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,B1=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Dm=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Ed=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,I1=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,R1=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Og=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Dg=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Uu=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Pm=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Ap=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Pg="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ko=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,bd=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Lg=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bh=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Lm=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kg=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,bf=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,F1=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,hl=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vp=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,km=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Uc=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,xd=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_p=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ac=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Nu=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xf=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,zm=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zg=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Md=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Gg=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Cd=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,Ug=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Gm=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,O1=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,x=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,w=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,U=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Y=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,re=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,he=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Je=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,At=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,en=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dn=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,br=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,gi=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Rr=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Eo=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Tr=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Xs=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Hl=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Dt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Qt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,lr=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Dr=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Ti=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,_i=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,si=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sa=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,to=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,$p=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,D1=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,xx=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,I_=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Mx=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,R_=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,F_=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,O_=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Cx=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,D_=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Sx=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,P_=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,wx=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,L_=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Tx=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,P1=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,k_=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,yA=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,L1=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Bx=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ix=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Rx=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,z_=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Fx=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xi={alphahash_fragment:vf,alphahash_pars_fragment:_f,alphamap_fragment:po,alphamap_pars_fragment:uo,alphatest_fragment:jl,alphatest_pars_fragment:wl,aomap_fragment:vh,aomap_pars_fragment:dl,begin_vertex:_h,beginnormal_vertex:Ig,bsdfs:Rg,iridescence_fragment:T1,bumpmap_pars_fragment:Gc,clipping_planes_fragment:_d,clipping_planes_pars_fragment:Fg,clipping_planes_pars_vertex:Eh,clipping_planes_vertex:yp,color_fragment:Ef,color_pars_fragment:B1,color_pars_vertex:Dm,color_vertex:Ed,common:I1,cube_uv_reflection_fragment:R1,defaultnormal_vertex:Og,displacementmap_pars_vertex:Dg,displacementmap_vertex:Uu,emissivemap_fragment:Pm,emissivemap_pars_fragment:Ap,colorspace_fragment:Pg,colorspace_pars_fragment:Ko,envmap_fragment:bd,envmap_common_pars_fragment:Lg,envmap_pars_fragment:bh,envmap_pars_vertex:Lm,envmap_physical_pars_fragment:xf,envmap_vertex:kg,fog_vertex:bf,fog_pars_vertex:F1,fog_fragment:hl,fog_pars_fragment:vp,gradientmap_pars_fragment:km,lightmap_fragment:Uc,lightmap_pars_fragment:xd,lights_lambert_fragment:_p,lights_lambert_pars_fragment:ac,lights_pars_begin:Nu,lights_toon_fragment:zm,lights_toon_pars_fragment:zg,lights_phong_fragment:Md,lights_phong_pars_fragment:Gg,lights_physical_fragment:Cd,lights_physical_pars_fragment:Ug,lights_fragment_begin:Gm,lights_fragment_maps:O1,lights_fragment_end:x,logdepthbuf_fragment:w,logdepthbuf_pars_fragment:U,logdepthbuf_pars_vertex:Y,logdepthbuf_vertex:re,map_fragment:he,map_pars_fragment:Je,map_particle_fragment:At,map_particle_pars_fragment:en,metalnessmap_fragment:Dn,metalnessmap_pars_fragment:br,morphcolor_vertex:gi,morphnormal_vertex:Rr,morphtarget_pars_vertex:Eo,morphtarget_vertex:Tr,normal_fragment_begin:Xs,normal_fragment_maps:Hl,normal_pars_fragment:Dt,normal_pars_vertex:Mt,normal_vertex:Qt,normalmap_pars_fragment:lr,clearcoat_normal_fragment_begin:Dr,clearcoat_normal_fragment_maps:Ti,clearcoat_pars_fragment:_i,iridescence_pars_fragment:si,opaque_fragment:sa,packing:to,premultiplied_alpha_fragment:$p,project_vertex:D1,dithering_fragment:xx,dithering_pars_fragment:I_,roughnessmap_fragment:Mx,roughnessmap_pars_fragment:R_,shadowmap_pars_fragment:F_,shadowmap_pars_vertex:O_,shadowmap_vertex:Cx,shadowmask_pars_fragment:D_,skinbase_vertex:Sx,skinning_pars_vertex:P_,skinning_vertex:wx,skinnormal_vertex:L_,specularmap_fragment:Tx,specularmap_pars_fragment:P1,tonemapping_fragment:k_,tonemapping_pars_fragment:yA,transmission_fragment:L1,transmission_pars_fragment:Bx,uv_pars_fragment:Ix,uv_pars_vertex:Rx,uv_vertex:z_,worldpos_vertex:Fx,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},nr={common:{diffuse:{value:new rr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pi},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pi}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pi},normalScale:{value:new yn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0},uvTransform:{value:new pi}},sprite:{diffuse:{value:new rr(16777215)},opacity:{value:1},center:{value:new yn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pi},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0}}},Ep={basic:{uniforms:zi([nr.common,nr.specularmap,nr.envmap,nr.aomap,nr.lightmap,nr.fog]),vertexShader:xi.meshbasic_vert,fragmentShader:xi.meshbasic_frag},lambert:{uniforms:zi([nr.common,nr.specularmap,nr.envmap,nr.aomap,nr.lightmap,nr.emissivemap,nr.bumpmap,nr.normalmap,nr.displacementmap,nr.fog,nr.lights,{emissive:{value:new rr(0)}}]),vertexShader:xi.meshlambert_vert,fragmentShader:xi.meshlambert_frag},phong:{uniforms:zi([nr.common,nr.specularmap,nr.envmap,nr.aomap,nr.lightmap,nr.emissivemap,nr.bumpmap,nr.normalmap,nr.displacementmap,nr.fog,nr.lights,{emissive:{value:new rr(0)},specular:{value:new rr(1118481)},shininess:{value:30}}]),vertexShader:xi.meshphong_vert,fragmentShader:xi.meshphong_frag},standard:{uniforms:zi([nr.common,nr.envmap,nr.aomap,nr.lightmap,nr.emissivemap,nr.bumpmap,nr.normalmap,nr.displacementmap,nr.roughnessmap,nr.metalnessmap,nr.fog,nr.lights,{emissive:{value:new rr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xi.meshphysical_vert,fragmentShader:xi.meshphysical_frag},toon:{uniforms:zi([nr.common,nr.aomap,nr.lightmap,nr.emissivemap,nr.bumpmap,nr.normalmap,nr.displacementmap,nr.gradientmap,nr.fog,nr.lights,{emissive:{value:new rr(0)}}]),vertexShader:xi.meshtoon_vert,fragmentShader:xi.meshtoon_frag},matcap:{uniforms:zi([nr.common,nr.bumpmap,nr.normalmap,nr.displacementmap,nr.fog,{matcap:{value:null}}]),vertexShader:xi.meshmatcap_vert,fragmentShader:xi.meshmatcap_frag},points:{uniforms:zi([nr.points,nr.fog]),vertexShader:xi.points_vert,fragmentShader:xi.points_frag},dashed:{uniforms:zi([nr.common,nr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xi.linedashed_vert,fragmentShader:xi.linedashed_frag},depth:{uniforms:zi([nr.common,nr.displacementmap]),vertexShader:xi.depth_vert,fragmentShader:xi.depth_frag},normal:{uniforms:zi([nr.common,nr.bumpmap,nr.normalmap,nr.displacementmap,{opacity:{value:1}}]),vertexShader:xi.meshnormal_vert,fragmentShader:xi.meshnormal_frag},sprite:{uniforms:zi([nr.sprite,nr.fog]),vertexShader:xi.sprite_vert,fragmentShader:xi.sprite_frag},background:{uniforms:{uvTransform:{value:new pi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xi.background_vert,fragmentShader:xi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xi.backgroundCube_vert,fragmentShader:xi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xi.cube_vert,fragmentShader:xi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xi.equirect_vert,fragmentShader:xi.equirect_frag},distanceRGBA:{uniforms:zi([nr.common,nr.displacementmap,{referencePosition:{value:new Qe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xi.distanceRGBA_vert,fragmentShader:xi.distanceRGBA_frag},shadow:{uniforms:zi([nr.lights,nr.fog,{color:{value:new rr(0)},opacity:{value:1}}]),vertexShader:xi.shadow_vert,fragmentShader:xi.shadow_frag}};Ep.physical={uniforms:zi([Ep.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pi},clearcoatNormalScale:{value:new yn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pi},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pi},sheen:{value:0},sheenColor:{value:new rr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pi},transmissionSamplerSize:{value:new yn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pi},attenuationDistance:{value:0},attenuationColor:{value:new rr(0)},specularColor:{value:new rr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pi},anisotropyVector:{value:new yn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pi}}]),vertexShader:xi.meshphysical_vert,fragmentShader:xi.meshphysical_frag};const jg={r:0,b:0,g:0};function J_(C,e,c,g,v,M,I){const R=new rr(0);let z=M===!0?0:1,j,W,q=null,Z=0,ne=null;function se($,ee){let ve=!1,ue=ee.isScene===!0?ee.background:null;ue&&ue.isTexture&&(ue=(ee.backgroundBlurriness>0?c:e).get(ue)),ue===null?fe(R,z):ue&&ue.isColor&&(fe(ue,1),ve=!0);const Ce=C.xr.getEnvironmentBlendMode();Ce==="additive"?g.buffers.color.setClear(0,0,0,1,I):Ce==="alpha-blend"&&g.buffers.color.setClear(0,0,0,0,I),(C.autoClear||ve)&&C.clear(C.autoClearColor,C.autoClearDepth,C.autoClearStencil),ue&&(ue.isCubeTexture||ue.mapping===da)?(W===void 0&&(W=new bs(new kc(1,1,1),new Qo({name:"BackgroundCubeMaterial",uniforms:qp(Ep.backgroundCube.uniforms),vertexShader:Ep.backgroundCube.vertexShader,fragmentShader:Ep.backgroundCube.fragmentShader,side:He,depthTest:!1,depthWrite:!1,fog:!1})),W.geometry.deleteAttribute("normal"),W.geometry.deleteAttribute("uv"),W.onBeforeRender=function(Oe,We,Ze){this.matrixWorld.copyPosition(Ze.matrixWorld)},Object.defineProperty(W.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),v.update(W)),W.material.uniforms.envMap.value=ue,W.material.uniforms.flipEnvMap.value=ue.isCubeTexture&&ue.isRenderTargetTexture===!1?-1:1,W.material.uniforms.backgroundBlurriness.value=ee.backgroundBlurriness,W.material.uniforms.backgroundIntensity.value=ee.backgroundIntensity,W.material.toneMapped=ue.colorSpace!==To,(q!==ue||Z!==ue.version||ne!==C.toneMapping)&&(W.material.needsUpdate=!0,q=ue,Z=ue.version,ne=C.toneMapping),W.layers.enableAll(),$.unshift(W,W.geometry,W.material,0,0,null)):ue&&ue.isTexture&&(j===void 0&&(j=new bs(new mp(2,2),new Qo({name:"BackgroundMaterial",uniforms:qp(Ep.background.uniforms),vertexShader:Ep.background.vertexShader,fragmentShader:Ep.background.fragmentShader,side:nt,depthTest:!1,depthWrite:!1,fog:!1})),j.geometry.deleteAttribute("normal"),Object.defineProperty(j.material,"map",{get:function(){return this.uniforms.t2D.value}}),v.update(j)),j.material.uniforms.t2D.value=ue,j.material.uniforms.backgroundIntensity.value=ee.backgroundIntensity,j.material.toneMapped=ue.colorSpace!==To,ue.matrixAutoUpdate===!0&&ue.updateMatrix(),j.material.uniforms.uvTransform.value.copy(ue.matrix),(q!==ue||Z!==ue.version||ne!==C.toneMapping)&&(j.material.needsUpdate=!0,q=ue,Z=ue.version,ne=C.toneMapping),j.layers.enableAll(),$.unshift(j,j.geometry,j.material,0,0,null))}function fe($,ee){$.getRGB(jg,hs(C)),g.buffers.color.setClear(jg.r,jg.g,jg.b,ee,I)}return{getClearColor:function(){return R},setClearColor:function($,ee=1){R.set($),z=ee,fe(R,z)},getClearAlpha:function(){return z},setClearAlpha:function($){z=$,fe(R,z)},render:se}}function _A(C,e,c,g){const v=C.getParameter(C.MAX_VERTEX_ATTRIBS),M=g.isWebGL2?null:e.get("OES_vertex_array_object"),I=g.isWebGL2||M!==null,R={},z=$(null);let j=z,W=!1;function q(Wt,$e,En,ln,gn){let xn=!1;if(I){const Sn=fe(ln,En,$e);j!==Sn&&(j=Sn,ne(j.object)),xn=ee(Wt,ln,En,gn),xn&&ve(Wt,ln,En,gn)}else{const Sn=$e.wireframe===!0;(j.geometry!==ln.id||j.program!==En.id||j.wireframe!==Sn)&&(j.geometry=ln.id,j.program=En.id,j.wireframe=Sn,xn=!0)}gn!==null&&c.update(gn,C.ELEMENT_ARRAY_BUFFER),(xn||W)&&(W=!1,ht(Wt,$e,En,ln),gn!==null&&C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,c.get(gn).buffer))}function Z(){return g.isWebGL2?C.createVertexArray():M.createVertexArrayOES()}function ne(Wt){return g.isWebGL2?C.bindVertexArray(Wt):M.bindVertexArrayOES(Wt)}function se(Wt){return g.isWebGL2?C.deleteVertexArray(Wt):M.deleteVertexArrayOES(Wt)}function fe(Wt,$e,En){const ln=En.wireframe===!0;let gn=R[Wt.id];gn===void 0&&(gn={},R[Wt.id]=gn);let xn=gn[$e.id];xn===void 0&&(xn={},gn[$e.id]=xn);let Sn=xn[ln];return Sn===void 0&&(Sn=$(Z()),xn[ln]=Sn),Sn}function $(Wt){const $e=[],En=[],ln=[];for(let gn=0;gn<v;gn++)$e[gn]=0,En[gn]=0,ln[gn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$e,enabledAttributes:En,attributeDivisors:ln,object:Wt,attributes:{},index:null}}function ee(Wt,$e,En,ln){const gn=j.attributes,xn=$e.attributes;let Sn=0;const Ut=En.getAttributes();for(const dn in Ut)if(Ut[dn].location>=0){const cr=gn[dn];let Er=xn[dn];if(Er===void 0&&(dn==="instanceMatrix"&&Wt.instanceMatrix&&(Er=Wt.instanceMatrix),dn==="instanceColor"&&Wt.instanceColor&&(Er=Wt.instanceColor)),cr===void 0||cr.attribute!==Er||Er&&cr.data!==Er.data)return!0;Sn++}return j.attributesNum!==Sn||j.index!==ln}function ve(Wt,$e,En,ln){const gn={},xn=$e.attributes;let Sn=0;const Ut=En.getAttributes();for(const dn in Ut)if(Ut[dn].location>=0){let cr=xn[dn];cr===void 0&&(dn==="instanceMatrix"&&Wt.instanceMatrix&&(cr=Wt.instanceMatrix),dn==="instanceColor"&&Wt.instanceColor&&(cr=Wt.instanceColor));const Er={};Er.attribute=cr,cr&&cr.data&&(Er.data=cr.data),gn[dn]=Er,Sn++}j.attributes=gn,j.attributesNum=Sn,j.index=ln}function ue(){const Wt=j.newAttributes;for(let $e=0,En=Wt.length;$e<En;$e++)Wt[$e]=0}function Ce(Wt){Oe(Wt,0)}function Oe(Wt,$e){const En=j.newAttributes,ln=j.enabledAttributes,gn=j.attributeDivisors;En[Wt]=1,ln[Wt]===0&&(C.enableVertexAttribArray(Wt),ln[Wt]=1),gn[Wt]!==$e&&((g.isWebGL2?C:e.get("ANGLE_instanced_arrays"))[g.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Wt,$e),gn[Wt]=$e)}function We(){const Wt=j.newAttributes,$e=j.enabledAttributes;for(let En=0,ln=$e.length;En<ln;En++)$e[En]!==Wt[En]&&(C.disableVertexAttribArray(En),$e[En]=0)}function Ze(Wt,$e,En,ln,gn,xn,Sn){Sn===!0?C.vertexAttribIPointer(Wt,$e,En,gn,xn):C.vertexAttribPointer(Wt,$e,En,ln,gn,xn)}function ht(Wt,$e,En,ln){if(g.isWebGL2===!1&&(Wt.isInstancedMesh||ln.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;ue();const gn=ln.attributes,xn=En.getAttributes(),Sn=$e.defaultAttributeValues;for(const Ut in xn){const dn=xn[Ut];if(dn.location>=0){let Pn=gn[Ut];if(Pn===void 0&&(Ut==="instanceMatrix"&&Wt.instanceMatrix&&(Pn=Wt.instanceMatrix),Ut==="instanceColor"&&Wt.instanceColor&&(Pn=Wt.instanceColor)),Pn!==void 0){const cr=Pn.normalized,Er=Pn.itemSize,ei=c.get(Pn);if(ei===void 0)continue;const Jr=ei.buffer,qr=ei.type,oo=ei.bytesPerElement,gs=g.isWebGL2===!0&&(qr===C.INT||qr===C.UNSIGNED_INT||Pn.gpuType===Ho);if(Pn.isInterleavedBufferAttribute){const ai=Pn.data,st=ai.stride,Jn=Pn.offset;if(ai.isInstancedInterleavedBuffer){for(let Lt=0;Lt<dn.locationSize;Lt++)Oe(dn.location+Lt,ai.meshPerAttribute);Wt.isInstancedMesh!==!0&&ln._maxInstanceCount===void 0&&(ln._maxInstanceCount=ai.meshPerAttribute*ai.count)}else for(let Lt=0;Lt<dn.locationSize;Lt++)Ce(dn.location+Lt);C.bindBuffer(C.ARRAY_BUFFER,Jr);for(let Lt=0;Lt<dn.locationSize;Lt++)Ze(dn.location+Lt,Er/dn.locationSize,qr,cr,st*oo,(Jn+Er/dn.locationSize*Lt)*oo,gs)}else{if(Pn.isInstancedBufferAttribute){for(let ai=0;ai<dn.locationSize;ai++)Oe(dn.location+ai,Pn.meshPerAttribute);Wt.isInstancedMesh!==!0&&ln._maxInstanceCount===void 0&&(ln._maxInstanceCount=Pn.meshPerAttribute*Pn.count)}else for(let ai=0;ai<dn.locationSize;ai++)Ce(dn.location+ai);C.bindBuffer(C.ARRAY_BUFFER,Jr);for(let ai=0;ai<dn.locationSize;ai++)Ze(dn.location+ai,Er/dn.locationSize,qr,cr,Er*oo,Er/dn.locationSize*ai*oo,gs)}}else if(Sn!==void 0){const cr=Sn[Ut];if(cr!==void 0)switch(cr.length){case 2:C.vertexAttrib2fv(dn.location,cr);break;case 3:C.vertexAttrib3fv(dn.location,cr);break;case 4:C.vertexAttrib4fv(dn.location,cr);break;default:C.vertexAttrib1fv(dn.location,cr)}}}}We()}function Te(){vn();for(const Wt in R){const $e=R[Wt];for(const En in $e){const ln=$e[En];for(const gn in ln)se(ln[gn].object),delete ln[gn];delete $e[En]}delete R[Wt]}}function Ve(Wt){if(R[Wt.id]===void 0)return;const $e=R[Wt.id];for(const En in $e){const ln=$e[En];for(const gn in ln)se(ln[gn].object),delete ln[gn];delete $e[En]}delete R[Wt.id]}function qt(Wt){for(const $e in R){const En=R[$e];if(En[Wt.id]===void 0)continue;const ln=En[Wt.id];for(const gn in ln)se(ln[gn].object),delete ln[gn];delete En[Wt.id]}}function vn(){jt(),W=!0,j!==z&&(j=z,ne(j.object))}function jt(){z.geometry=null,z.program=null,z.wireframe=!1}return{setup:q,reset:vn,resetDefaultState:jt,dispose:Te,releaseStatesOfGeometry:Ve,releaseStatesOfProgram:qt,initAttributes:ue,enableAttribute:Ce,disableUnusedAttributes:We}}function q_(C,e,c,g){const v=g.isWebGL2;let M;function I(j){M=j}function R(j,W){C.drawArrays(M,j,W),c.update(W,M,1)}function z(j,W,q){if(q===0)return;let Z,ne;if(v)Z=C,ne="drawArraysInstanced";else if(Z=e.get("ANGLE_instanced_arrays"),ne="drawArraysInstancedANGLE",Z===null){S.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Z[ne](M,j,W,q),c.update(W,M,q)}this.setMode=I,this.render=R,this.renderInstances=z}function Hg(C,e,c){let g;function v(){if(g!==void 0)return g;if(e.has("EXT_texture_filter_anisotropic")===!0){const Ze=e.get("EXT_texture_filter_anisotropic");g=C.getParameter(Ze.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else g=0;return g}function M(Ze){if(Ze==="highp"){if(C.getShaderPrecisionFormat(C.VERTEX_SHADER,C.HIGH_FLOAT).precision>0&&C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.HIGH_FLOAT).precision>0)return"highp";Ze="mediump"}return Ze==="mediump"&&C.getShaderPrecisionFormat(C.VERTEX_SHADER,C.MEDIUM_FLOAT).precision>0&&C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const I=typeof WebGL2RenderingContext!="undefined"&&C.constructor.name==="WebGL2RenderingContext";let R=c.precision!==void 0?c.precision:"highp";const z=M(R);z!==R&&(S.warn("THREE.WebGLRenderer:",R,"not supported, using",z,"instead."),R=z);const j=I||e.has("WEBGL_draw_buffers"),W=c.logarithmicDepthBuffer===!0,q=C.getParameter(C.MAX_TEXTURE_IMAGE_UNITS),Z=C.getParameter(C.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ne=C.getParameter(C.MAX_TEXTURE_SIZE),se=C.getParameter(C.MAX_CUBE_MAP_TEXTURE_SIZE),fe=C.getParameter(C.MAX_VERTEX_ATTRIBS),$=C.getParameter(C.MAX_VERTEX_UNIFORM_VECTORS),ee=C.getParameter(C.MAX_VARYING_VECTORS),ve=C.getParameter(C.MAX_FRAGMENT_UNIFORM_VECTORS),ue=Z>0,Ce=I||e.has("OES_texture_float"),Oe=ue&&Ce,We=I?C.getParameter(C.MAX_SAMPLES):0;return{isWebGL2:I,drawBuffers:j,getMaxAnisotropy:v,getMaxPrecision:M,precision:R,logarithmicDepthBuffer:W,maxTextures:q,maxVertexTextures:Z,maxTextureSize:ne,maxCubemapSize:se,maxAttributes:fe,maxVertexUniforms:$,maxVaryings:ee,maxFragmentUniforms:ve,vertexTextures:ue,floatFragmentTextures:Ce,floatVertexTextures:Oe,maxSamples:We}}function Z_(C){const e=this;let c=null,g=0,v=!1,M=!1;const I=new ul,R=new pi,z={value:null,needsUpdate:!1};this.uniform=z,this.numPlanes=0,this.numIntersection=0,this.init=function(q,Z){const ne=q.length!==0||Z||g!==0||v;return v=Z,g=q.length,ne},this.beginShadows=function(){M=!0,W(null)},this.endShadows=function(){M=!1},this.setGlobalState=function(q,Z){c=W(q,Z,0)},this.setState=function(q,Z,ne){const se=q.clippingPlanes,fe=q.clipIntersection,$=q.clipShadows,ee=C.get(q);if(!v||se===null||se.length===0||M&&!$)M?W(null):j();else{const ve=M?0:g,ue=ve*4;let Ce=ee.clippingState||null;z.value=Ce,Ce=W(se,Z,ue,ne);for(let Oe=0;Oe!==ue;++Oe)Ce[Oe]=c[Oe];ee.clippingState=Ce,this.numIntersection=fe?this.numPlanes:0,this.numPlanes+=ve}};function j(){z.value!==c&&(z.value=c,z.needsUpdate=g>0),e.numPlanes=g,e.numIntersection=0}function W(q,Z,ne,se){const fe=q!==null?q.length:0;let $=null;if(fe!==0){if($=z.value,se!==!0||$===null){const ee=ne+fe*4,ve=Z.matrixWorldInverse;R.getNormalMatrix(ve),($===null||$.length<ee)&&($=new Float32Array(ee));for(let ue=0,Ce=ne;ue!==fe;++ue,Ce+=4)I.copy(q[ue]).applyMatrix4(ve,R),I.normal.toArray($,Ce),$[Ce+3]=I.constant}z.value=$,z.needsUpdate=!0}return e.numPlanes=fe,e.numIntersection=0,$}}function EA(C){let e=new WeakMap;function c(I,R){return R===Xi?I.mapping=vs:R===$s&&(I.mapping=ss),I}function g(I){if(I&&I.isTexture&&I.isRenderTargetTexture===!1){const R=I.mapping;if(R===Xi||R===$s)if(e.has(I)){const z=e.get(I).texture;return c(z,I.mapping)}else{const z=I.image;if(z&&z.height>0){const j=new va(z.height/2);return j.fromEquirectangularTexture(C,I),e.set(I,j),I.addEventListener("dispose",v),c(j.texture,I.mapping)}else return null}}return I}function v(I){const R=I.target;R.removeEventListener("dispose",v);const z=e.get(R);z!==void 0&&(e.delete(R),z.dispose())}function M(){e=new WeakMap}return{get:g,dispose:M}}class Wg extends Xo{constructor(e=-1,c=1,g=1,v=-1,M=.1,I=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=c,this.top=g,this.bottom=v,this.near=M,this.far=I,this.updateProjectionMatrix()}copy(e,c){return super.copy(e,c),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,c,g,v,M,I){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=c,this.view.offsetX=g,this.view.offsetY=v,this.view.width=M,this.view.height=I,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),g=(this.right+this.left)/2,v=(this.top+this.bottom)/2;let M=g-e,I=g+e,R=v+c,z=v-c;if(this.view!==null&&this.view.enabled){const j=(this.right-this.left)/this.view.fullWidth/this.zoom,W=(this.top-this.bottom)/this.view.fullHeight/this.zoom;M+=j*this.view.offsetX,I=M+j*this.view.width,R-=W*this.view.offsetY,z=R-W*this.view.height}this.projectionMatrix.makeOrthographic(M,I,R,z,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const c=super.toJSON(e);return c.object.zoom=this.zoom,c.object.left=this.left,c.object.right=this.right,c.object.top=this.top,c.object.bottom=this.bottom,c.object.near=this.near,c.object.far=this.far,this.view!==null&&(c.object.view=Object.assign({},this.view)),c}}const Mf=4,Sd=[.125,.215,.35,.446,.526,.582],wd=20,z1=new Wg,bA=new rr;let xh=null;const Mh=(1+Math.sqrt(5))/2,Ch=1/Mh,xA=[new Qe(1,1,1),new Qe(-1,1,1),new Qe(1,1,-1),new Qe(-1,1,-1),new Qe(0,Mh,Ch),new Qe(0,Mh,-Ch),new Qe(Ch,0,Mh),new Qe(-Ch,0,Mh),new Qe(Mh,Ch,0),new Qe(-Mh,Ch,0)];class G1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,c=0,g=.1,v=100){xh=this._renderer.getRenderTarget(),this._setSize(256);const M=this._allocateTargets();return M.depthBuffer=!0,this._sceneToCubeUV(e,g,v,M),c>0&&this._blur(M,0,0,c),this._applyPMREM(M),this._cleanup(M),M}fromEquirectangular(e,c=null){return this._fromTexture(e,c)}fromCubemap(e,c=null){return this._fromTexture(e,c)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=CA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=MA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xh),e.scissorTest=!1,Um(e,0,0,e.width,e.height)}_fromTexture(e,c){e.mapping===vs||e.mapping===ss?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),xh=this._renderer.getRenderTarget();const g=c||this._allocateTargets();return this._textureToCubeUV(e,g),this._applyPMREM(g),this._cleanup(g),g}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),c=4*this._cubeSize,g={magFilter:$i,minFilter:$i,generateMipmaps:!1,type:Co,format:cs,colorSpace:ho,depthBuffer:!1},v=lc(e,c,g);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==c){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=lc(e,c,g);const{_lodMax:M}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$_(M)),this._blurMaterial=e3(M,e,c)}return v}_compileMaterial(e){const c=new bs(this._lodPlanes[0],e);this._renderer.compile(c,z1)}_sceneToCubeUV(e,c,g,v){const R=new Yo(90,1,c,g),z=[1,-1,1,1,1,1],j=[1,1,1,-1,-1,-1],W=this._renderer,q=W.autoClear,Z=W.toneMapping;W.getClearColor(bA),W.toneMapping=ro,W.autoClear=!1;const ne=new ds({name:"PMREM.Background",side:He,depthWrite:!1,depthTest:!1}),se=new bs(new kc,ne);let fe=!1;const $=e.background;$?$.isColor&&(ne.color.copy($),e.background=null,fe=!0):(ne.color.copy(bA),fe=!0);for(let ee=0;ee<6;ee++){const ve=ee%3;ve===0?(R.up.set(0,z[ee],0),R.lookAt(j[ee],0,0)):ve===1?(R.up.set(0,0,z[ee]),R.lookAt(0,j[ee],0)):(R.up.set(0,z[ee],0),R.lookAt(0,0,j[ee]));const ue=this._cubeSize;Um(v,ve*ue,ee>2?ue:0,ue,ue),W.setRenderTarget(v),fe&&W.render(se,R),W.render(e,R)}se.geometry.dispose(),se.material.dispose(),W.toneMapping=Z,W.autoClear=q,e.background=$}_textureToCubeUV(e,c){const g=this._renderer,v=e.mapping===vs||e.mapping===ss;v?(this._cubemapMaterial===null&&(this._cubemapMaterial=CA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=MA());const M=v?this._cubemapMaterial:this._equirectMaterial,I=new bs(this._lodPlanes[0],M),R=M.uniforms;R.envMap.value=e;const z=this._cubeSize;Um(c,0,0,3*z,2*z),g.setRenderTarget(c),g.render(I,z1)}_applyPMREM(e){const c=this._renderer,g=c.autoClear;c.autoClear=!1;for(let v=1;v<this._lodPlanes.length;v++){const M=Math.sqrt(this._sigmas[v]*this._sigmas[v]-this._sigmas[v-1]*this._sigmas[v-1]),I=xA[(v-1)%xA.length];this._blur(e,v-1,v,M,I)}c.autoClear=g}_blur(e,c,g,v,M){const I=this._pingPongRenderTarget;this._halfBlur(e,I,c,g,v,"latitudinal",M),this._halfBlur(I,e,g,g,v,"longitudinal",M)}_halfBlur(e,c,g,v,M,I,R){const z=this._renderer,j=this._blurMaterial;I!=="latitudinal"&&I!=="longitudinal"&&S.error("blur direction must be either latitudinal or longitudinal!");const W=3,q=new bs(this._lodPlanes[v],j),Z=j.uniforms,ne=this._sizeLods[g]-1,se=isFinite(M)?Math.PI/(2*ne):2*Math.PI/(2*wd-1),fe=M/se,$=isFinite(M)?1+Math.floor(W*fe):wd;$>wd&&S.warn(`sigmaRadians, ${M}, is too large and will clip, as it requested ${$} samples when the maximum is set to ${wd}`);const ee=[];let ve=0;for(let Ze=0;Ze<wd;++Ze){const ht=Ze/fe,Te=Math.exp(-ht*ht/2);ee.push(Te),Ze===0?ve+=Te:Ze<$&&(ve+=2*Te)}for(let Ze=0;Ze<ee.length;Ze++)ee[Ze]=ee[Ze]/ve;Z.envMap.value=e.texture,Z.samples.value=$,Z.weights.value=ee,Z.latitudinal.value=I==="latitudinal",R&&(Z.poleAxis.value=R);const{_lodMax:ue}=this;Z.dTheta.value=se,Z.mipInt.value=ue-g;const Ce=this._sizeLods[v],Oe=3*Ce*(v>ue-Mf?v-ue+Mf:0),We=4*(this._cubeSize-Ce);Um(c,Oe,We,3*Ce,2*Ce),z.setRenderTarget(c),z.render(q,z1)}}function $_(C){const e=[],c=[],g=[];let v=C;const M=C-Mf+1+Sd.length;for(let I=0;I<M;I++){const R=Math.pow(2,v);c.push(R);let z=1/R;I>C-Mf?z=Sd[I-C+Mf-1]:I===0&&(z=0),g.push(z);const j=1/(R-2),W=-j,q=1+j,Z=[W,W,q,W,q,q,W,W,q,q,W,q],ne=6,se=6,fe=3,$=2,ee=1,ve=new Float32Array(fe*se*ne),ue=new Float32Array($*se*ne),Ce=new Float32Array(ee*se*ne);for(let We=0;We<ne;We++){const Ze=We%3*2/3-1,ht=We>2?0:-1,Te=[Ze,ht,0,Ze+2/3,ht,0,Ze+2/3,ht+1,0,Ze,ht,0,Ze+2/3,ht+1,0,Ze,ht+1,0];ve.set(Te,fe*se*We),ue.set(Z,$*se*We);const Ve=[We,We,We,We,We,We];Ce.set(Ve,ee*se*We)}const Oe=new ui;Oe.setAttribute("position",new Qi(ve,fe)),Oe.setAttribute("uv",new Qi(ue,$)),Oe.setAttribute("faceIndex",new Qi(Ce,ee)),e.push(Oe),v>Mf&&v--}return{lodPlanes:e,sizeLods:c,sigmas:g}}function lc(C,e,c){const g=new dr(C,e,c);return g.texture.mapping=da,g.texture.name="PMREM.cubeUv",g.scissorTest=!0,g}function Um(C,e,c,g,v){C.viewport.set(e,c,g,v),C.scissor.set(e,c,g,v)}function e3(C,e,c){const g=new Float32Array(wd),v=new Qe(0,1,0);return new Qo({name:"SphericalGaussianBlur",defines:{n:wd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/c,CUBEUV_MAX_MIP:`${C}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:g},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:v}},vertexShader:U1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:St,depthTest:!1,depthWrite:!1})}function MA(){return new Qo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:U1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:St,depthTest:!1,depthWrite:!1})}function CA(){return new Qo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:U1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:St,depthTest:!1,depthWrite:!1})}function U1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function t3(C){let e=new WeakMap,c=null;function g(R){if(R&&R.isTexture){const z=R.mapping,j=z===Xi||z===$s,W=z===vs||z===ss;if(j||W)if(R.isRenderTargetTexture&&R.needsPMREMUpdate===!0){R.needsPMREMUpdate=!1;let q=e.get(R);return c===null&&(c=new G1(C)),q=j?c.fromEquirectangular(R,q):c.fromCubemap(R,q),e.set(R,q),q.texture}else{if(e.has(R))return e.get(R).texture;{const q=R.image;if(j&&q&&q.height>0||W&&q&&v(q)){c===null&&(c=new G1(C));const Z=j?c.fromEquirectangular(R):c.fromCubemap(R);return e.set(R,Z),R.addEventListener("dispose",M),Z.texture}else return null}}}return R}function v(R){let z=0;const j=6;for(let W=0;W<j;W++)R[W]!==void 0&&z++;return z===j}function M(R){const z=R.target;z.removeEventListener("dispose",M);const j=e.get(z);j!==void 0&&(e.delete(z),j.dispose())}function I(){e=new WeakMap,c!==null&&(c.dispose(),c=null)}return{get:g,dispose:I}}function SA(C){const e={};function c(g){if(e[g]!==void 0)return e[g];let v;switch(g){case"WEBGL_depth_texture":v=C.getExtension("WEBGL_depth_texture")||C.getExtension("MOZ_WEBGL_depth_texture")||C.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":v=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=C.getExtension("WEBGL_compressed_texture_s3tc")||C.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=C.getExtension("WEBGL_compressed_texture_pvrtc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:v=C.getExtension(g)}return e[g]=v,v}return{has:function(g){return c(g)!==null},init:function(g){g.isWebGL2?c("EXT_color_buffer_float"):(c("WEBGL_depth_texture"),c("OES_texture_float"),c("OES_texture_half_float"),c("OES_texture_half_float_linear"),c("OES_standard_derivatives"),c("OES_element_index_uint"),c("OES_vertex_array_object"),c("ANGLE_instanced_arrays")),c("OES_texture_float_linear"),c("EXT_color_buffer_half_float"),c("WEBGL_multisampled_render_to_texture")},get:function(g){const v=c(g);return v===null&&S.warn("THREE.WebGLRenderer: "+g+" extension not supported."),v}}}function n3(C,e,c,g){const v={},M=new WeakMap;function I(q){const Z=q.target;Z.index!==null&&e.remove(Z.index);for(const se in Z.attributes)e.remove(Z.attributes[se]);for(const se in Z.morphAttributes){const fe=Z.morphAttributes[se];for(let $=0,ee=fe.length;$<ee;$++)e.remove(fe[$])}Z.removeEventListener("dispose",I),delete v[Z.id];const ne=M.get(Z);ne&&(e.remove(ne),M.delete(Z)),g.releaseStatesOfGeometry(Z),Z.isInstancedBufferGeometry===!0&&delete Z._maxInstanceCount,c.memory.geometries--}function R(q,Z){return v[Z.id]===!0||(Z.addEventListener("dispose",I),v[Z.id]=!0,c.memory.geometries++),Z}function z(q){const Z=q.attributes;for(const se in Z)e.update(Z[se],C.ARRAY_BUFFER);const ne=q.morphAttributes;for(const se in ne){const fe=ne[se];for(let $=0,ee=fe.length;$<ee;$++)e.update(fe[$],C.ARRAY_BUFFER)}}function j(q){const Z=[],ne=q.index,se=q.attributes.position;let fe=0;if(ne!==null){const ve=ne.array;fe=ne.version;for(let ue=0,Ce=ve.length;ue<Ce;ue+=3){const Oe=ve[ue+0],We=ve[ue+1],Ze=ve[ue+2];Z.push(Oe,We,We,Ze,Ze,Oe)}}else if(se!==void 0){const ve=se.array;fe=se.version;for(let ue=0,Ce=ve.length/3-1;ue<Ce;ue+=3){const Oe=ue+0,We=ue+1,Ze=ue+2;Z.push(Oe,We,We,Ze,Ze,Oe)}}else return;const $=new(ap(Z)?hp:Tu)(Z,1);$.version=fe;const ee=M.get(q);ee&&e.remove(ee),M.set(q,$)}function W(q){const Z=M.get(q);if(Z){const ne=q.index;ne!==null&&Z.version<ne.version&&j(q)}else j(q);return M.get(q)}return{get:R,update:z,getWireframeAttribute:W}}function wA(C,e,c,g){const v=g.isWebGL2;let M;function I(Z){M=Z}let R,z;function j(Z){R=Z.type,z=Z.bytesPerElement}function W(Z,ne){C.drawElements(M,ne,R,Z*z),c.update(ne,M,1)}function q(Z,ne,se){if(se===0)return;let fe,$;if(v)fe=C,$="drawElementsInstanced";else if(fe=e.get("ANGLE_instanced_arrays"),$="drawElementsInstancedANGLE",fe===null){S.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}fe[$](M,ne,R,Z*z,se),c.update(ne,M,se)}this.setMode=I,this.setIndex=j,this.render=W,this.renderInstances=q}function r3(C){const e={geometries:0,textures:0},c={frame:0,calls:0,triangles:0,points:0,lines:0};function g(M,I,R){switch(c.calls++,I){case C.TRIANGLES:c.triangles+=R*(M/3);break;case C.LINES:c.lines+=R*(M/2);break;case C.LINE_STRIP:c.lines+=R*(M-1);break;case C.LINE_LOOP:c.lines+=R*M;break;case C.POINTS:c.points+=R*M;break;default:S.error("THREE.WebGLInfo: Unknown draw mode:",I);break}}function v(){c.calls=0,c.triangles=0,c.points=0,c.lines=0}return{memory:e,render:c,programs:null,autoReset:!0,reset:v,update:g}}function i3(C,e){return C[0]-e[0]}function o3(C,e){return Math.abs(e[1])-Math.abs(C[1])}function s3(C,e,c){const g={},v=new Float32Array(8),M=new WeakMap,I=new Qr,R=[];for(let j=0;j<8;j++)R[j]=[j,0];function z(j,W,q){const Z=j.morphTargetInfluences;if(e.isWebGL2===!0){const ne=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,se=ne!==void 0?ne.length:0;let fe=M.get(W);if(fe===void 0||fe.count!==se){let Wt=function(){vn.dispose(),M.delete(W),W.removeEventListener("dispose",Wt)};fe!==void 0&&fe.texture.dispose();const ve=W.morphAttributes.position!==void 0,ue=W.morphAttributes.normal!==void 0,Ce=W.morphAttributes.color!==void 0,Oe=W.morphAttributes.position||[],We=W.morphAttributes.normal||[],Ze=W.morphAttributes.color||[];let ht=0;ve===!0&&(ht=1),ue===!0&&(ht=2),Ce===!0&&(ht=3);let Te=W.attributes.position.count*ht,Ve=1;Te>e.maxTextureSize&&(Ve=Math.ceil(Te/e.maxTextureSize),Te=e.maxTextureSize);const qt=new Float32Array(Te*Ve*4*se),vn=new Tc(qt,Te,Ve,se);vn.type=_s,vn.needsUpdate=!0;const jt=ht*4;for(let $e=0;$e<se;$e++){const En=Oe[$e],ln=We[$e],gn=Ze[$e],xn=Te*Ve*4*$e;for(let Sn=0;Sn<En.count;Sn++){const Ut=Sn*jt;ve===!0&&(I.fromBufferAttribute(En,Sn),qt[xn+Ut+0]=I.x,qt[xn+Ut+1]=I.y,qt[xn+Ut+2]=I.z,qt[xn+Ut+3]=0),ue===!0&&(I.fromBufferAttribute(ln,Sn),qt[xn+Ut+4]=I.x,qt[xn+Ut+5]=I.y,qt[xn+Ut+6]=I.z,qt[xn+Ut+7]=0),Ce===!0&&(I.fromBufferAttribute(gn,Sn),qt[xn+Ut+8]=I.x,qt[xn+Ut+9]=I.y,qt[xn+Ut+10]=I.z,qt[xn+Ut+11]=gn.itemSize===4?I.w:1)}}fe={count:se,texture:vn,size:new yn(Te,Ve)},M.set(W,fe),W.addEventListener("dispose",Wt)}let $=0;for(let ve=0;ve<Z.length;ve++)$+=Z[ve];const ee=W.morphTargetsRelative?1:1-$;q.getUniforms().setValue(C,"morphTargetBaseInfluence",ee),q.getUniforms().setValue(C,"morphTargetInfluences",Z),q.getUniforms().setValue(C,"morphTargetsTexture",fe.texture,c),q.getUniforms().setValue(C,"morphTargetsTextureSize",fe.size)}else{const ne=Z===void 0?0:Z.length;let se=g[W.id];if(se===void 0||se.length!==ne){se=[];for(let ue=0;ue<ne;ue++)se[ue]=[ue,0];g[W.id]=se}for(let ue=0;ue<ne;ue++){const Ce=se[ue];Ce[0]=ue,Ce[1]=Z[ue]}se.sort(o3);for(let ue=0;ue<8;ue++)ue<ne&&se[ue][1]?(R[ue][0]=se[ue][0],R[ue][1]=se[ue][1]):(R[ue][0]=Number.MAX_SAFE_INTEGER,R[ue][1]=0);R.sort(i3);const fe=W.morphAttributes.position,$=W.morphAttributes.normal;let ee=0;for(let ue=0;ue<8;ue++){const Ce=R[ue],Oe=Ce[0],We=Ce[1];Oe!==Number.MAX_SAFE_INTEGER&&We?(fe&&W.getAttribute("morphTarget"+ue)!==fe[Oe]&&W.setAttribute("morphTarget"+ue,fe[Oe]),$&&W.getAttribute("morphNormal"+ue)!==$[Oe]&&W.setAttribute("morphNormal"+ue,$[Oe]),v[ue]=We,ee+=We):(fe&&W.hasAttribute("morphTarget"+ue)===!0&&W.deleteAttribute("morphTarget"+ue),$&&W.hasAttribute("morphNormal"+ue)===!0&&W.deleteAttribute("morphNormal"+ue),v[ue]=0)}const ve=W.morphTargetsRelative?1:1-ee;q.getUniforms().setValue(C,"morphTargetBaseInfluence",ve),q.getUniforms().setValue(C,"morphTargetInfluences",v)}}return{update:z}}function a3(C,e,c,g){let v=new WeakMap;function M(z){const j=g.render.frame,W=z.geometry,q=e.get(z,W);if(v.get(q)!==j&&(e.update(q),v.set(q,j)),z.isInstancedMesh&&(z.hasEventListener("dispose",R)===!1&&z.addEventListener("dispose",R),v.get(z)!==j&&(c.update(z.instanceMatrix,C.ARRAY_BUFFER),z.instanceColor!==null&&c.update(z.instanceColor,C.ARRAY_BUFFER),v.set(z,j))),z.isSkinnedMesh){const Z=z.skeleton;v.get(Z)!==j&&(Z.update(),v.set(Z,j))}return q}function I(){v=new WeakMap}function R(z){const j=z.target;j.removeEventListener("dispose",R),c.remove(j.instanceMatrix),j.instanceColor!==null&&c.remove(j.instanceColor)}return{update:M,dispose:I}}const TA=new Bo,BA=new Tc,IA=new Bc,RA=new Nl,FA=[],OA=[],DA=new Float32Array(16),Nm=new Float32Array(9),jm=new Float32Array(4);function Cf(C,e,c){const g=C[0];if(g<=0||g>0)return C;const v=e*c;let M=FA[v];if(M===void 0&&(M=new Float32Array(v),FA[v]=M),e!==0){g.toArray(M,0);for(let I=1,R=0;I!==e;++I)R+=c,C[I].toArray(M,R)}return M}function Ea(C,e){if(C.length!==e.length)return!1;for(let c=0,g=C.length;c<g;c++)if(C[c]!==e[c])return!1;return!0}function ba(C,e){for(let c=0,g=e.length;c<g;c++)C[c]=e[c]}function Hm(C,e){let c=OA[e];c===void 0&&(c=new Int32Array(e),OA[e]=c);for(let g=0;g!==e;++g)c[g]=C.allocateTextureUnit();return c}function l3(C,e){const c=this.cache;c[0]!==e&&(C.uniform1f(this.addr,e),c[0]=e)}function c3(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y)&&(C.uniform2f(this.addr,e.x,e.y),c[0]=e.x,c[1]=e.y);else{if(Ea(c,e))return;C.uniform2fv(this.addr,e),ba(c,e)}}function p3(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y||c[2]!==e.z)&&(C.uniform3f(this.addr,e.x,e.y,e.z),c[0]=e.x,c[1]=e.y,c[2]=e.z);else if(e.r!==void 0)(c[0]!==e.r||c[1]!==e.g||c[2]!==e.b)&&(C.uniform3f(this.addr,e.r,e.g,e.b),c[0]=e.r,c[1]=e.g,c[2]=e.b);else{if(Ea(c,e))return;C.uniform3fv(this.addr,e),ba(c,e)}}function u3(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y||c[2]!==e.z||c[3]!==e.w)&&(C.uniform4f(this.addr,e.x,e.y,e.z,e.w),c[0]=e.x,c[1]=e.y,c[2]=e.z,c[3]=e.w);else{if(Ea(c,e))return;C.uniform4fv(this.addr,e),ba(c,e)}}function d3(C,e){const c=this.cache,g=e.elements;if(g===void 0){if(Ea(c,e))return;C.uniformMatrix2fv(this.addr,!1,e),ba(c,e)}else{if(Ea(c,g))return;jm.set(g),C.uniformMatrix2fv(this.addr,!1,jm),ba(c,g)}}function h3(C,e){const c=this.cache,g=e.elements;if(g===void 0){if(Ea(c,e))return;C.uniformMatrix3fv(this.addr,!1,e),ba(c,e)}else{if(Ea(c,g))return;Nm.set(g),C.uniformMatrix3fv(this.addr,!1,Nm),ba(c,g)}}function f3(C,e){const c=this.cache,g=e.elements;if(g===void 0){if(Ea(c,e))return;C.uniformMatrix4fv(this.addr,!1,e),ba(c,e)}else{if(Ea(c,g))return;DA.set(g),C.uniformMatrix4fv(this.addr,!1,DA),ba(c,g)}}function Wm(C,e){const c=this.cache;c[0]!==e&&(C.uniform1i(this.addr,e),c[0]=e)}function g3(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y)&&(C.uniform2i(this.addr,e.x,e.y),c[0]=e.x,c[1]=e.y);else{if(Ea(c,e))return;C.uniform2iv(this.addr,e),ba(c,e)}}function PA(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y||c[2]!==e.z)&&(C.uniform3i(this.addr,e.x,e.y,e.z),c[0]=e.x,c[1]=e.y,c[2]=e.z);else{if(Ea(c,e))return;C.uniform3iv(this.addr,e),ba(c,e)}}function m3(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y||c[2]!==e.z||c[3]!==e.w)&&(C.uniform4i(this.addr,e.x,e.y,e.z,e.w),c[0]=e.x,c[1]=e.y,c[2]=e.z,c[3]=e.w);else{if(Ea(c,e))return;C.uniform4iv(this.addr,e),ba(c,e)}}function y3(C,e){const c=this.cache;c[0]!==e&&(C.uniform1ui(this.addr,e),c[0]=e)}function Sf(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y)&&(C.uniform2ui(this.addr,e.x,e.y),c[0]=e.x,c[1]=e.y);else{if(Ea(c,e))return;C.uniform2uiv(this.addr,e),ba(c,e)}}function A3(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y||c[2]!==e.z)&&(C.uniform3ui(this.addr,e.x,e.y,e.z),c[0]=e.x,c[1]=e.y,c[2]=e.z);else{if(Ea(c,e))return;C.uniform3uiv(this.addr,e),ba(c,e)}}function LA(C,e){const c=this.cache;if(e.x!==void 0)(c[0]!==e.x||c[1]!==e.y||c[2]!==e.z||c[3]!==e.w)&&(C.uniform4ui(this.addr,e.x,e.y,e.z,e.w),c[0]=e.x,c[1]=e.y,c[2]=e.z,c[3]=e.w);else{if(Ea(c,e))return;C.uniform4uiv(this.addr,e),ba(c,e)}}function v3(C,e,c){const g=this.cache,v=c.allocateTextureUnit();g[0]!==v&&(C.uniform1i(this.addr,v),g[0]=v),c.setTexture2D(e||TA,v)}function _3(C,e,c){const g=this.cache,v=c.allocateTextureUnit();g[0]!==v&&(C.uniform1i(this.addr,v),g[0]=v),c.setTexture3D(e||IA,v)}function wf(C,e,c){const g=this.cache,v=c.allocateTextureUnit();g[0]!==v&&(C.uniform1i(this.addr,v),g[0]=v),c.setTextureCube(e||RA,v)}function E3(C,e,c){const g=this.cache,v=c.allocateTextureUnit();g[0]!==v&&(C.uniform1i(this.addr,v),g[0]=v),c.setTexture2DArray(e||BA,v)}function Sh(C){switch(C){case 5126:return l3;case 35664:return c3;case 35665:return p3;case 35666:return u3;case 35674:return d3;case 35675:return h3;case 35676:return f3;case 5124:case 35670:return Wm;case 35667:case 35671:return g3;case 35668:case 35672:return PA;case 35669:case 35673:return m3;case 5125:return y3;case 36294:return Sf;case 36295:return A3;case 36296:return LA;case 35678:case 36198:case 36298:case 36306:case 35682:return v3;case 35679:case 36299:case 36307:return _3;case 35680:case 36300:case 36308:case 36293:return wf;case 36289:case 36303:case 36311:case 36292:return E3}}function Kx(C,e){C.uniform1fv(this.addr,e)}function Jx(C,e){const c=Cf(e,this.size,2);C.uniform2fv(this.addr,c)}function qx(C,e){const c=Cf(e,this.size,3);C.uniform3fv(this.addr,c)}function Zx(C,e){const c=Cf(e,this.size,4);C.uniform4fv(this.addr,c)}function $x(C,e){const c=Cf(e,this.size,4);C.uniformMatrix2fv(this.addr,!1,c)}function eM(C,e){const c=Cf(e,this.size,9);C.uniformMatrix3fv(this.addr,!1,c)}function b3(C,e){const c=Cf(e,this.size,16);C.uniformMatrix4fv(this.addr,!1,c)}function x3(C,e){C.uniform1iv(this.addr,e)}function M3(C,e){C.uniform2iv(this.addr,e)}function Wl(C,e){C.uniform3iv(this.addr,e)}function C3(C,e){C.uniform4iv(this.addr,e)}function kA(C,e){C.uniform1uiv(this.addr,e)}function S3(C,e){C.uniform2uiv(this.addr,e)}function w3(C,e){C.uniform3uiv(this.addr,e)}function zA(C,e){C.uniform4uiv(this.addr,e)}function T3(C,e,c){const g=this.cache,v=e.length,M=Hm(c,v);Ea(g,M)||(C.uniform1iv(this.addr,M),ba(g,M));for(let I=0;I!==v;++I)c.setTexture2D(e[I]||TA,M[I])}function tM(C,e,c){const g=this.cache,v=e.length,M=Hm(c,v);Ea(g,M)||(C.uniform1iv(this.addr,M),ba(g,M));for(let I=0;I!==v;++I)c.setTexture3D(e[I]||IA,M[I])}function nM(C,e,c){const g=this.cache,v=e.length,M=Hm(c,v);Ea(g,M)||(C.uniform1iv(this.addr,M),ba(g,M));for(let I=0;I!==v;++I)c.setTextureCube(e[I]||RA,M[I])}function N1(C,e,c){const g=this.cache,v=e.length,M=Hm(c,v);Ea(g,M)||(C.uniform1iv(this.addr,M),ba(g,M));for(let I=0;I!==v;++I)c.setTexture2DArray(e[I]||BA,M[I])}function B3(C){switch(C){case 5126:return Kx;case 35664:return Jx;case 35665:return qx;case 35666:return Zx;case 35674:return $x;case 35675:return eM;case 35676:return b3;case 5124:case 35670:return x3;case 35667:case 35671:return M3;case 35668:case 35672:return Wl;case 35669:case 35673:return C3;case 5125:return kA;case 36294:return S3;case 36295:return w3;case 36296:return zA;case 35678:case 36198:case 36298:case 36306:case 35682:return T3;case 35679:case 36299:case 36307:return tM;case 35680:case 36300:case 36308:case 36293:return nM;case 36289:case 36303:case 36311:case 36292:return N1}}class rM{constructor(e,c,g){this.id=e,this.addr=g,this.cache=[],this.setValue=Sh(c.type)}}class I3{constructor(e,c,g){this.id=e,this.addr=g,this.cache=[],this.size=c.size,this.setValue=B3(c.type)}}class GA{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,c,g){const v=this.seq;for(let M=0,I=v.length;M!==I;++M){const R=v[M];R.setValue(e,c[R.id],g)}}}const j1=/(\w+)(\])?(\[|\.)?/g;function UA(C,e){C.seq.push(e),C.map[e.id]=e}function NA(C,e,c){const g=C.name,v=g.length;for(j1.lastIndex=0;;){const M=j1.exec(g),I=j1.lastIndex;let R=M[1];const z=M[2]==="]",j=M[3];if(z&&(R=R|0),j===void 0||j==="["&&I+2===v){UA(c,j===void 0?new rM(R,C,e):new I3(R,C,e));break}else{let q=c.map[R];q===void 0&&(q=new GA(R),UA(c,q)),c=q}}}class ju{constructor(e,c){this.seq=[],this.map={};const g=e.getProgramParameter(c,e.ACTIVE_UNIFORMS);for(let v=0;v<g;++v){const M=e.getActiveUniform(c,v),I=e.getUniformLocation(c,M.name);NA(M,I,this)}}setValue(e,c,g,v){const M=this.map[c];M!==void 0&&M.setValue(e,g,v)}setOptional(e,c,g){const v=c[g];v!==void 0&&this.setValue(e,g,v)}static upload(e,c,g,v){for(let M=0,I=c.length;M!==I;++M){const R=c[M],z=g[R.id];z.needsUpdate!==!1&&R.setValue(e,z.value,v)}}static seqWithValue(e,c){const g=[];for(let v=0,M=e.length;v!==M;++v){const I=e[v];I.id in c&&g.push(I)}return g}}function Vg(C,e,c){const g=C.createShader(e);return C.shaderSource(g,c),C.compileShader(g),g}let iM=0;function jA(C,e){const c=C.split(`
`),g=[],v=Math.max(e-6,0),M=Math.min(e+6,c.length);for(let I=v;I<M;I++){const R=I+1;g.push(`${R===e?">":" "} ${R}: ${c[I]}`)}return g.join(`
`)}function R3(C){switch(C){case ho:return["Linear","( value )"];case To:return["sRGB","( value )"];default:return S.warn("THREE.WebGLProgram: Unsupported color space:",C),["Linear","( value )"]}}function HA(C,e,c){const g=C.getShaderParameter(e,C.COMPILE_STATUS),v=C.getShaderInfoLog(e).trim();if(g&&v==="")return"";const M=/ERROR: 0:(\d+)/.exec(v);if(M){const I=parseInt(M[1]);return c.toUpperCase()+`

`+v+`

`+jA(C.getShaderSource(e),I)}else return v}function F3(C,e){const c=R3(e);return"vec4 "+C+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"}function H1(C,e){let c;switch(e){case Zi:c="Linear";break;case Ja:c="Reinhard";break;case As:c="OptimizedCineon";break;case js:c="ACESFilmic";break;case Zs:c="Custom";break;default:S.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),c="Linear"}return"vec3 "+C+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function W1(C){return[C.extensionDerivatives||C.envMapCubeUVHeight||C.bumpMap||C.normalMapTangentSpace||C.clearcoatNormalMap||C.flatShading||C.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(C.extensionFragDepth||C.logarithmicDepthBuffer)&&C.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",C.extensionDrawBuffers&&C.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(C.extensionShaderTextureLOD||C.envMap||C.transmission)&&C.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cc).join(`
`)}function Tf(C){const e=[];for(const c in C){const g=C[c];g!==!1&&e.push("#define "+c+" "+g)}return e.join(`
`)}function bp(C,e){const c={},g=C.getProgramParameter(e,C.ACTIVE_ATTRIBUTES);for(let v=0;v<g;v++){const M=C.getActiveAttrib(e,v),I=M.name;let R=1;M.type===C.FLOAT_MAT2&&(R=2),M.type===C.FLOAT_MAT3&&(R=3),M.type===C.FLOAT_MAT4&&(R=4),c[I]={type:M.type,location:C.getAttribLocation(e,I),locationSize:R}}return c}function cc(C){return C!==""}function xp(C,e){const c=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return C.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,c).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function eu(C,e){return C.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Hu=/^[ \t]*#include +<([\w\d./]+)>/gm;function wh(C){return C.replace(Hu,Xg)}const Qg=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Xg(C,e){let c=xi[e];if(c===void 0){const g=Qg.get(e);if(g!==void 0)c=xi[g],S.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,g);else throw new Error("Can not resolve #include <"+e+">")}return wh(c)}const Vm=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Bf(C){return C.replace(Vm,Yg)}function Yg(C,e,c,g){let v="";for(let M=parseInt(e);M<parseInt(c);M++)v+=g.replace(/\[\s*i\s*\]/g,"[ "+M+" ]").replace(/UNROLLED_LOOP_INDEX/g,M);return v}function If(C){let e="precision "+C.precision+` float;
precision `+C.precision+" int;";return C.precision==="highp"?e+=`
#define HIGH_PRECISION`:C.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:C.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function O3(C){let e="SHADOWMAP_TYPE_BASIC";return C.shadowMapType===pe?e="SHADOWMAP_TYPE_PCF":C.shadowMapType===de?e="SHADOWMAP_TYPE_PCF_SOFT":C.shadowMapType===bt&&(e="SHADOWMAP_TYPE_VSM"),e}function D3(C){let e="ENVMAP_TYPE_CUBE";if(C.envMap)switch(C.envMapMode){case vs:case ss:e="ENVMAP_TYPE_CUBE";break;case da:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WA(C){let e="ENVMAP_MODE_REFLECTION";if(C.envMap)switch(C.envMapMode){case ss:e="ENVMAP_MODE_REFRACTION";break}return e}function P3(C){let e="ENVMAP_BLENDING_NONE";if(C.envMap)switch(C.combine){case ki:e="ENVMAP_BLENDING_MULTIPLY";break;case jo:e="ENVMAP_BLENDING_MIX";break;case ri:e="ENVMAP_BLENDING_ADD";break}return e}function L3(C){const e=C.envMapCubeUVHeight;if(e===null)return null;const c=Math.log2(e)-2,g=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,c),7*16)),texelHeight:g,maxMip:c}}function k3(C,e,c,g){const v=C.getContext(),M=c.defines;let I=c.vertexShader,R=c.fragmentShader;const z=O3(c),j=D3(c),W=WA(c),q=P3(c),Z=L3(c),ne=c.isWebGL2?"":W1(c),se=Tf(M),fe=v.createProgram();let $,ee,ve=c.glslVersion?"#version "+c.glslVersion+`
`:"";c.isRawShaderMaterial?($=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,se].filter(cc).join(`
`),$.length>0&&($+=`
`),ee=[ne,"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,se].filter(cc).join(`
`),ee.length>0&&(ee+=`
`)):($=[If(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,se,c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+W:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.displacementMap?"#define USE_DISPLACEMENTMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.mapUv?"#define MAP_UV "+c.mapUv:"",c.alphaMapUv?"#define ALPHAMAP_UV "+c.alphaMapUv:"",c.lightMapUv?"#define LIGHTMAP_UV "+c.lightMapUv:"",c.aoMapUv?"#define AOMAP_UV "+c.aoMapUv:"",c.emissiveMapUv?"#define EMISSIVEMAP_UV "+c.emissiveMapUv:"",c.bumpMapUv?"#define BUMPMAP_UV "+c.bumpMapUv:"",c.normalMapUv?"#define NORMALMAP_UV "+c.normalMapUv:"",c.displacementMapUv?"#define DISPLACEMENTMAP_UV "+c.displacementMapUv:"",c.metalnessMapUv?"#define METALNESSMAP_UV "+c.metalnessMapUv:"",c.roughnessMapUv?"#define ROUGHNESSMAP_UV "+c.roughnessMapUv:"",c.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+c.anisotropyMapUv:"",c.clearcoatMapUv?"#define CLEARCOATMAP_UV "+c.clearcoatMapUv:"",c.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+c.clearcoatNormalMapUv:"",c.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+c.clearcoatRoughnessMapUv:"",c.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+c.iridescenceMapUv:"",c.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+c.iridescenceThicknessMapUv:"",c.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+c.sheenColorMapUv:"",c.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+c.sheenRoughnessMapUv:"",c.specularMapUv?"#define SPECULARMAP_UV "+c.specularMapUv:"",c.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+c.specularColorMapUv:"",c.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+c.specularIntensityMapUv:"",c.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+c.transmissionMapUv:"",c.thicknessMapUv?"#define THICKNESSMAP_UV "+c.thicknessMapUv:"",c.vertexTangents&&c.flatShading===!1?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&c.flatShading===!1?"#define USE_MORPHNORMALS":"",c.morphColors&&c.isWebGL2?"#define USE_MORPHCOLORS":"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+c.morphTextureStride:"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+z:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.useLegacyLights?"#define LEGACY_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cc).join(`
`),ee=[ne,If(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,se,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+j:"",c.envMap?"#define "+W:"",c.envMap?"#define "+q:"",Z?"#define CUBEUV_TEXEL_WIDTH "+Z.texelWidth:"",Z?"#define CUBEUV_TEXEL_HEIGHT "+Z.texelHeight:"",Z?"#define CUBEUV_MAX_MIP "+Z.maxMip+".0":"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescence?"#define USE_IRIDESCENCE":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.vertexTangents&&c.flatShading===!1?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+z:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.useLegacyLights?"#define LEGACY_LIGHTS":"",c.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",c.toneMapping!==ro?"#define TONE_MAPPING":"",c.toneMapping!==ro?xi.tonemapping_pars_fragment:"",c.toneMapping!==ro?H1("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",c.opaque?"#define OPAQUE":"",xi.colorspace_pars_fragment,F3("linearToOutputTexel",c.outputColorSpace),c.useDepthPacking?"#define DEPTH_PACKING "+c.depthPacking:"",`
`].filter(cc).join(`
`)),I=wh(I),I=xp(I,c),I=eu(I,c),R=wh(R),R=xp(R,c),R=eu(R,c),I=Bf(I),R=Bf(R),c.isWebGL2&&c.isRawShaderMaterial!==!0&&(ve=`#version 300 es
`,$=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+$,ee=["#define varying in",c.glslVersion===eh?"":"layout(location = 0) out highp vec4 pc_fragColor;",c.glslVersion===eh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ee);const ue=ve+$+I,Ce=ve+ee+R,Oe=Vg(v,v.VERTEX_SHADER,ue),We=Vg(v,v.FRAGMENT_SHADER,Ce);if(v.attachShader(fe,Oe),v.attachShader(fe,We),c.index0AttributeName!==void 0?v.bindAttribLocation(fe,0,c.index0AttributeName):c.morphTargets===!0&&v.bindAttribLocation(fe,0,"position"),v.linkProgram(fe),C.debug.checkShaderErrors){const Te=v.getProgramInfoLog(fe).trim(),Ve=v.getShaderInfoLog(Oe).trim(),qt=v.getShaderInfoLog(We).trim();let vn=!0,jt=!0;if(v.getProgramParameter(fe,v.LINK_STATUS)===!1)if(vn=!1,typeof C.debug.onShaderError=="function")C.debug.onShaderError(v,fe,Oe,We);else{const Wt=HA(v,Oe,"vertex"),$e=HA(v,We,"fragment");S.error("THREE.WebGLProgram: Shader Error "+v.getError()+" - VALIDATE_STATUS "+v.getProgramParameter(fe,v.VALIDATE_STATUS)+`

Program Info Log: `+Te+`
`+Wt+`
`+$e)}else Te!==""?S.warn("THREE.WebGLProgram: Program Info Log:",Te):(Ve===""||qt==="")&&(jt=!1);jt&&(this.diagnostics={runnable:vn,programLog:Te,vertexShader:{log:Ve,prefix:$},fragmentShader:{log:qt,prefix:ee}})}v.deleteShader(Oe),v.deleteShader(We);let Ze;this.getUniforms=function(){return Ze===void 0&&(Ze=new ju(v,fe)),Ze};let ht;return this.getAttributes=function(){return ht===void 0&&(ht=bp(v,fe)),ht},this.destroy=function(){g.releaseStatesOfProgram(this),v.deleteProgram(fe),this.program=void 0},this.type=c.shaderType,this.name=c.shaderName,this.id=iM++,this.cacheKey=e,this.usedTimes=1,this.program=fe,this.vertexShader=Oe,this.fragmentShader=We,this}let z3=0;class VA{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const c=e.vertexShader,g=e.fragmentShader,v=this._getShaderStage(c),M=this._getShaderStage(g),I=this._getShaderCacheForMaterial(e);return I.has(v)===!1&&(I.add(v),v.usedTimes++),I.has(M)===!1&&(I.add(M),M.usedTimes++),this}remove(e){const c=this.materialCache.get(e);for(const g of c)g.usedTimes--,g.usedTimes===0&&this.shaderCache.delete(g.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const c=this.materialCache;let g=c.get(e);return g===void 0&&(g=new Set,c.set(e,g)),g}_getShaderStage(e){const c=this.shaderCache;let g=c.get(e);return g===void 0&&(g=new QA(e),c.set(e,g)),g}}class QA{constructor(e){this.id=z3++,this.code=e,this.usedTimes=0}}function Qm(C,e,c,g,v,M,I){const R=new uf,z=new VA,j=[],W=v.isWebGL2,q=v.logarithmicDepthBuffer,Z=v.vertexTextures;let ne=v.precision;const se={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function fe(Te){return Te===0?"uv":`uv${Te}`}function $(Te,Ve,qt,vn,jt){const Wt=vn.fog,$e=jt.geometry,En=Te.isMeshStandardMaterial?vn.environment:null,ln=(Te.isMeshStandardMaterial?c:e).get(Te.envMap||En),gn=ln&&ln.mapping===da?ln.image.height:null,xn=se[Te.type];Te.precision!==null&&(ne=v.getMaxPrecision(Te.precision),ne!==Te.precision&&S.warn("THREE.WebGLProgram.getParameters:",Te.precision,"not supported, using",ne,"instead."));const Sn=$e.morphAttributes.position||$e.morphAttributes.normal||$e.morphAttributes.color,Ut=Sn!==void 0?Sn.length:0;let dn=0;$e.morphAttributes.position!==void 0&&(dn=1),$e.morphAttributes.normal!==void 0&&(dn=2),$e.morphAttributes.color!==void 0&&(dn=3);let Pn,cr,Er,ei;if(xn){const Ui=Ep[xn];Pn=Ui.vertexShader,cr=Ui.fragmentShader}else Pn=Te.vertexShader,cr=Te.fragmentShader,z.update(Te),Er=z.getVertexShaderID(Te),ei=z.getFragmentShaderID(Te);const Jr=C.getRenderTarget(),qr=jt.isInstancedMesh===!0,oo=!!Te.map,gs=!!Te.matcap,ai=!!ln,st=!!Te.aoMap,Jn=!!Te.lightMap,Lt=!!Te.bumpMap,Wn=!!Te.normalMap,bn=!!Te.displacementMap,Vr=!!Te.emissiveMap,hr=!!Te.metalnessMap,An=!!Te.roughnessMap,It=Te.anisotropy>0,Ii=Te.clearcoat>0,Fo=Te.iridescence>0,et=Te.sheen>0,Re=Te.transmission>0,Vt=It&&!!Te.anisotropyMap,Gn=Ii&&!!Te.clearcoatMap,wn=Ii&&!!Te.clearcoatNormalMap,Rn=Ii&&!!Te.clearcoatRoughnessMap,qn=Fo&&!!Te.iridescenceMap,hn=Fo&&!!Te.iridescenceThicknessMap,Kt=et&&!!Te.sheenColorMap,Ur=et&&!!Te.sheenRoughnessMap,Pr=!!Te.specularMap,Nr=!!Te.specularColorMap,Fr=!!Te.specularIntensityMap,Br=Re&&!!Te.transmissionMap,Pi=Re&&!!Te.thicknessMap,Jo=!!Te.gradientMap,yt=!!Te.alphaMap,or=Te.alphaTest>0,Zt=!!Te.alphaHash,Zn=!!Te.extensions,mr=!!$e.attributes.uv1,$n=!!$e.attributes.uv2,ms=!!$e.attributes.uv3;let Ms=ro;return Te.toneMapped&&(Jr===null||Jr.isXRRenderTarget===!0)&&(Ms=C.toneMapping),{isWebGL2:W,shaderID:xn,shaderType:Te.type,shaderName:Te.name,vertexShader:Pn,fragmentShader:cr,defines:Te.defines,customVertexShaderID:Er,customFragmentShaderID:ei,isRawShaderMaterial:Te.isRawShaderMaterial===!0,glslVersion:Te.glslVersion,precision:ne,instancing:qr,instancingColor:qr&&jt.instanceColor!==null,supportsVertexTextures:Z,outputColorSpace:Jr===null?C.outputColorSpace:Jr.isXRRenderTarget===!0?Jr.texture.colorSpace:ho,map:oo,matcap:gs,envMap:ai,envMapMode:ai&&ln.mapping,envMapCubeUVHeight:gn,aoMap:st,lightMap:Jn,bumpMap:Lt,normalMap:Wn,displacementMap:Z&&bn,emissiveMap:Vr,normalMapObjectSpace:Wn&&Te.normalMapType===mg,normalMapTangentSpace:Wn&&Te.normalMapType===Jl,metalnessMap:hr,roughnessMap:An,anisotropy:It,anisotropyMap:Vt,clearcoat:Ii,clearcoatMap:Gn,clearcoatNormalMap:wn,clearcoatRoughnessMap:Rn,iridescence:Fo,iridescenceMap:qn,iridescenceThicknessMap:hn,sheen:et,sheenColorMap:Kt,sheenRoughnessMap:Ur,specularMap:Pr,specularColorMap:Nr,specularIntensityMap:Fr,transmission:Re,transmissionMap:Br,thicknessMap:Pi,gradientMap:Jo,opaque:Te.transparent===!1&&Te.blending===vt,alphaMap:yt,alphaTest:or,alphaHash:Zt,combine:Te.combine,mapUv:oo&&fe(Te.map.channel),aoMapUv:st&&fe(Te.aoMap.channel),lightMapUv:Jn&&fe(Te.lightMap.channel),bumpMapUv:Lt&&fe(Te.bumpMap.channel),normalMapUv:Wn&&fe(Te.normalMap.channel),displacementMapUv:bn&&fe(Te.displacementMap.channel),emissiveMapUv:Vr&&fe(Te.emissiveMap.channel),metalnessMapUv:hr&&fe(Te.metalnessMap.channel),roughnessMapUv:An&&fe(Te.roughnessMap.channel),anisotropyMapUv:Vt&&fe(Te.anisotropyMap.channel),clearcoatMapUv:Gn&&fe(Te.clearcoatMap.channel),clearcoatNormalMapUv:wn&&fe(Te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Rn&&fe(Te.clearcoatRoughnessMap.channel),iridescenceMapUv:qn&&fe(Te.iridescenceMap.channel),iridescenceThicknessMapUv:hn&&fe(Te.iridescenceThicknessMap.channel),sheenColorMapUv:Kt&&fe(Te.sheenColorMap.channel),sheenRoughnessMapUv:Ur&&fe(Te.sheenRoughnessMap.channel),specularMapUv:Pr&&fe(Te.specularMap.channel),specularColorMapUv:Nr&&fe(Te.specularColorMap.channel),specularIntensityMapUv:Fr&&fe(Te.specularIntensityMap.channel),transmissionMapUv:Br&&fe(Te.transmissionMap.channel),thicknessMapUv:Pi&&fe(Te.thicknessMap.channel),alphaMapUv:yt&&fe(Te.alphaMap.channel),vertexTangents:!!$e.attributes.tangent&&(Wn||It),vertexColors:Te.vertexColors,vertexAlphas:Te.vertexColors===!0&&!!$e.attributes.color&&$e.attributes.color.itemSize===4,vertexUv1s:mr,vertexUv2s:$n,vertexUv3s:ms,pointsUvs:jt.isPoints===!0&&!!$e.attributes.uv&&(oo||yt),fog:!!Wt,useFog:Te.fog===!0,fogExp2:Wt&&Wt.isFogExp2,flatShading:Te.flatShading===!0,sizeAttenuation:Te.sizeAttenuation===!0,logarithmicDepthBuffer:q,skinning:jt.isSkinnedMesh===!0,morphTargets:$e.morphAttributes.position!==void 0,morphNormals:$e.morphAttributes.normal!==void 0,morphColors:$e.morphAttributes.color!==void 0,morphTargetsCount:Ut,morphTextureStride:dn,numDirLights:Ve.directional.length,numPointLights:Ve.point.length,numSpotLights:Ve.spot.length,numSpotLightMaps:Ve.spotLightMap.length,numRectAreaLights:Ve.rectArea.length,numHemiLights:Ve.hemi.length,numDirLightShadows:Ve.directionalShadowMap.length,numPointLightShadows:Ve.pointShadowMap.length,numSpotLightShadows:Ve.spotShadowMap.length,numSpotLightShadowsWithMaps:Ve.numSpotLightShadowsWithMaps,numClippingPlanes:I.numPlanes,numClipIntersection:I.numIntersection,dithering:Te.dithering,shadowMapEnabled:C.shadowMap.enabled&&qt.length>0,shadowMapType:C.shadowMap.type,toneMapping:Ms,useLegacyLights:C._useLegacyLights,decodeVideoTexture:oo&&Te.map.isVideoTexture===!0&&Te.map.colorSpace===To,premultipliedAlpha:Te.premultipliedAlpha,doubleSided:Te.side===ot,flipSided:Te.side===He,useDepthPacking:Te.depthPacking>=0,depthPacking:Te.depthPacking||0,index0AttributeName:Te.index0AttributeName,extensionDerivatives:Zn&&Te.extensions.derivatives===!0,extensionFragDepth:Zn&&Te.extensions.fragDepth===!0,extensionDrawBuffers:Zn&&Te.extensions.drawBuffers===!0,extensionShaderTextureLOD:Zn&&Te.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:W||g.has("EXT_frag_depth"),rendererExtensionDrawBuffers:W||g.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:W||g.has("EXT_shader_texture_lod"),customProgramCacheKey:Te.customProgramCacheKey()}}function ee(Te){const Ve=[];if(Te.shaderID?Ve.push(Te.shaderID):(Ve.push(Te.customVertexShaderID),Ve.push(Te.customFragmentShaderID)),Te.defines!==void 0)for(const qt in Te.defines)Ve.push(qt),Ve.push(Te.defines[qt]);return Te.isRawShaderMaterial===!1&&(ve(Ve,Te),ue(Ve,Te),Ve.push(C.outputColorSpace)),Ve.push(Te.customProgramCacheKey),Ve.join()}function ve(Te,Ve){Te.push(Ve.precision),Te.push(Ve.outputColorSpace),Te.push(Ve.envMapMode),Te.push(Ve.envMapCubeUVHeight),Te.push(Ve.mapUv),Te.push(Ve.alphaMapUv),Te.push(Ve.lightMapUv),Te.push(Ve.aoMapUv),Te.push(Ve.bumpMapUv),Te.push(Ve.normalMapUv),Te.push(Ve.displacementMapUv),Te.push(Ve.emissiveMapUv),Te.push(Ve.metalnessMapUv),Te.push(Ve.roughnessMapUv),Te.push(Ve.anisotropyMapUv),Te.push(Ve.clearcoatMapUv),Te.push(Ve.clearcoatNormalMapUv),Te.push(Ve.clearcoatRoughnessMapUv),Te.push(Ve.iridescenceMapUv),Te.push(Ve.iridescenceThicknessMapUv),Te.push(Ve.sheenColorMapUv),Te.push(Ve.sheenRoughnessMapUv),Te.push(Ve.specularMapUv),Te.push(Ve.specularColorMapUv),Te.push(Ve.specularIntensityMapUv),Te.push(Ve.transmissionMapUv),Te.push(Ve.thicknessMapUv),Te.push(Ve.combine),Te.push(Ve.fogExp2),Te.push(Ve.sizeAttenuation),Te.push(Ve.morphTargetsCount),Te.push(Ve.morphAttributeCount),Te.push(Ve.numDirLights),Te.push(Ve.numPointLights),Te.push(Ve.numSpotLights),Te.push(Ve.numSpotLightMaps),Te.push(Ve.numHemiLights),Te.push(Ve.numRectAreaLights),Te.push(Ve.numDirLightShadows),Te.push(Ve.numPointLightShadows),Te.push(Ve.numSpotLightShadows),Te.push(Ve.numSpotLightShadowsWithMaps),Te.push(Ve.shadowMapType),Te.push(Ve.toneMapping),Te.push(Ve.numClippingPlanes),Te.push(Ve.numClipIntersection),Te.push(Ve.depthPacking)}function ue(Te,Ve){R.disableAll(),Ve.isWebGL2&&R.enable(0),Ve.supportsVertexTextures&&R.enable(1),Ve.instancing&&R.enable(2),Ve.instancingColor&&R.enable(3),Ve.matcap&&R.enable(4),Ve.envMap&&R.enable(5),Ve.normalMapObjectSpace&&R.enable(6),Ve.normalMapTangentSpace&&R.enable(7),Ve.clearcoat&&R.enable(8),Ve.iridescence&&R.enable(9),Ve.alphaTest&&R.enable(10),Ve.vertexColors&&R.enable(11),Ve.vertexAlphas&&R.enable(12),Ve.vertexUv1s&&R.enable(13),Ve.vertexUv2s&&R.enable(14),Ve.vertexUv3s&&R.enable(15),Ve.vertexTangents&&R.enable(16),Ve.anisotropy&&R.enable(17),Te.push(R.mask),R.disableAll(),Ve.fog&&R.enable(0),Ve.useFog&&R.enable(1),Ve.flatShading&&R.enable(2),Ve.logarithmicDepthBuffer&&R.enable(3),Ve.skinning&&R.enable(4),Ve.morphTargets&&R.enable(5),Ve.morphNormals&&R.enable(6),Ve.morphColors&&R.enable(7),Ve.premultipliedAlpha&&R.enable(8),Ve.shadowMapEnabled&&R.enable(9),Ve.useLegacyLights&&R.enable(10),Ve.doubleSided&&R.enable(11),Ve.flipSided&&R.enable(12),Ve.useDepthPacking&&R.enable(13),Ve.dithering&&R.enable(14),Ve.transmission&&R.enable(15),Ve.sheen&&R.enable(16),Ve.opaque&&R.enable(17),Ve.pointsUvs&&R.enable(18),Ve.decodeVideoTexture&&R.enable(19),Te.push(R.mask)}function Ce(Te){const Ve=se[Te.type];let qt;if(Ve){const vn=Ep[Ve];qt=Os.clone(vn.uniforms)}else qt=Te.uniforms;return qt}function Oe(Te,Ve){let qt;for(let vn=0,jt=j.length;vn<jt;vn++){const Wt=j[vn];if(Wt.cacheKey===Ve){qt=Wt,++qt.usedTimes;break}}return qt===void 0&&(qt=new k3(C,Ve,Te,M),j.push(qt)),qt}function We(Te){if(--Te.usedTimes===0){const Ve=j.indexOf(Te);j[Ve]=j[j.length-1],j.pop(),Te.destroy()}}function Ze(Te){z.remove(Te)}function ht(){z.dispose()}return{getParameters:$,getProgramCacheKey:ee,getUniforms:Ce,acquireProgram:Oe,releaseProgram:We,releaseShaderCache:Ze,programs:j,dispose:ht}}function Xm(){let C=new WeakMap;function e(M){let I=C.get(M);return I===void 0&&(I={},C.set(M,I)),I}function c(M){C.delete(M)}function g(M,I,R){C.get(M)[I]=R}function v(){C=new WeakMap}return{get:e,remove:c,update:g,dispose:v}}function Ym(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.material.id!==e.material.id?C.material.id-e.material.id:C.z!==e.z?C.z-e.z:C.id-e.id}function XA(C,e){return C.groupOrder!==e.groupOrder?C.groupOrder-e.groupOrder:C.renderOrder!==e.renderOrder?C.renderOrder-e.renderOrder:C.z!==e.z?e.z-C.z:C.id-e.id}function V1(){const C=[];let e=0;const c=[],g=[],v=[];function M(){e=0,c.length=0,g.length=0,v.length=0}function I(q,Z,ne,se,fe,$){let ee=C[e];return ee===void 0?(ee={id:q.id,object:q,geometry:Z,material:ne,groupOrder:se,renderOrder:q.renderOrder,z:fe,group:$},C[e]=ee):(ee.id=q.id,ee.object=q,ee.geometry=Z,ee.material=ne,ee.groupOrder=se,ee.renderOrder=q.renderOrder,ee.z=fe,ee.group=$),e++,ee}function R(q,Z,ne,se,fe,$){const ee=I(q,Z,ne,se,fe,$);ne.transmission>0?g.push(ee):ne.transparent===!0?v.push(ee):c.push(ee)}function z(q,Z,ne,se,fe,$){const ee=I(q,Z,ne,se,fe,$);ne.transmission>0?g.unshift(ee):ne.transparent===!0?v.unshift(ee):c.unshift(ee)}function j(q,Z){c.length>1&&c.sort(q||Ym),g.length>1&&g.sort(Z||XA),v.length>1&&v.sort(Z||XA)}function W(){for(let q=e,Z=C.length;q<Z;q++){const ne=C[q];if(ne.id===null)break;ne.id=null,ne.object=null,ne.geometry=null,ne.material=null,ne.group=null}}return{opaque:c,transmissive:g,transparent:v,init:M,push:R,unshift:z,finish:W,sort:j}}function YA(){let C=new WeakMap;function e(g,v){const M=C.get(g);let I;return M===void 0?(I=new V1,C.set(g,[I])):v>=M.length?(I=new V1,M.push(I)):I=M[v],I}function c(){C=new WeakMap}return{get:e,dispose:c}}function Na(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let c;switch(e.type){case"DirectionalLight":c={direction:new Qe,color:new rr};break;case"SpotLight":c={position:new Qe,direction:new Qe,color:new rr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":c={position:new Qe,color:new rr,distance:0,decay:0};break;case"HemisphereLight":c={direction:new Qe,skyColor:new rr,groundColor:new rr};break;case"RectAreaLight":c={color:new rr,position:new Qe,halfWidth:new Qe,halfHeight:new Qe};break}return C[e.id]=c,c}}}function ja(){const C={};return{get:function(e){if(C[e.id]!==void 0)return C[e.id];let c;switch(e.type){case"DirectionalLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn};break;case"SpotLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn};break;case"PointLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn,shadowCameraNear:1,shadowCameraFar:1e3};break}return C[e.id]=c,c}}}let tu=0;function Q1(C,e){return(e.castShadow?2:0)-(C.castShadow?2:0)+(e.map?1:0)-(C.map?1:0)}function X1(C,e){const c=new Na,g=ja(),v={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let W=0;W<9;W++)v.probe.push(new Qe);const M=new Qe,I=new ii,R=new ii;function z(W,q){let Z=0,ne=0,se=0;for(let qt=0;qt<9;qt++)v.probe[qt].set(0,0,0);let fe=0,$=0,ee=0,ve=0,ue=0,Ce=0,Oe=0,We=0,Ze=0,ht=0;W.sort(Q1);const Te=q===!0?Math.PI:1;for(let qt=0,vn=W.length;qt<vn;qt++){const jt=W[qt],Wt=jt.color,$e=jt.intensity,En=jt.distance,ln=jt.shadow&&jt.shadow.map?jt.shadow.map.texture:null;if(jt.isAmbientLight)Z+=Wt.r*$e*Te,ne+=Wt.g*$e*Te,se+=Wt.b*$e*Te;else if(jt.isLightProbe)for(let gn=0;gn<9;gn++)v.probe[gn].addScaledVector(jt.sh.coefficients[gn],$e);else if(jt.isDirectionalLight){const gn=c.get(jt);if(gn.color.copy(jt.color).multiplyScalar(jt.intensity*Te),jt.castShadow){const xn=jt.shadow,Sn=g.get(jt);Sn.shadowBias=xn.bias,Sn.shadowNormalBias=xn.normalBias,Sn.shadowRadius=xn.radius,Sn.shadowMapSize=xn.mapSize,v.directionalShadow[fe]=Sn,v.directionalShadowMap[fe]=ln,v.directionalShadowMatrix[fe]=jt.shadow.matrix,Ce++}v.directional[fe]=gn,fe++}else if(jt.isSpotLight){const gn=c.get(jt);gn.position.setFromMatrixPosition(jt.matrixWorld),gn.color.copy(Wt).multiplyScalar($e*Te),gn.distance=En,gn.coneCos=Math.cos(jt.angle),gn.penumbraCos=Math.cos(jt.angle*(1-jt.penumbra)),gn.decay=jt.decay,v.spot[ee]=gn;const xn=jt.shadow;if(jt.map&&(v.spotLightMap[Ze]=jt.map,Ze++,xn.updateMatrices(jt),jt.castShadow&&ht++),v.spotLightMatrix[ee]=xn.matrix,jt.castShadow){const Sn=g.get(jt);Sn.shadowBias=xn.bias,Sn.shadowNormalBias=xn.normalBias,Sn.shadowRadius=xn.radius,Sn.shadowMapSize=xn.mapSize,v.spotShadow[ee]=Sn,v.spotShadowMap[ee]=ln,We++}ee++}else if(jt.isRectAreaLight){const gn=c.get(jt);gn.color.copy(Wt).multiplyScalar($e),gn.halfWidth.set(jt.width*.5,0,0),gn.halfHeight.set(0,jt.height*.5,0),v.rectArea[ve]=gn,ve++}else if(jt.isPointLight){const gn=c.get(jt);if(gn.color.copy(jt.color).multiplyScalar(jt.intensity*Te),gn.distance=jt.distance,gn.decay=jt.decay,jt.castShadow){const xn=jt.shadow,Sn=g.get(jt);Sn.shadowBias=xn.bias,Sn.shadowNormalBias=xn.normalBias,Sn.shadowRadius=xn.radius,Sn.shadowMapSize=xn.mapSize,Sn.shadowCameraNear=xn.camera.near,Sn.shadowCameraFar=xn.camera.far,v.pointShadow[$]=Sn,v.pointShadowMap[$]=ln,v.pointShadowMatrix[$]=jt.shadow.matrix,Oe++}v.point[$]=gn,$++}else if(jt.isHemisphereLight){const gn=c.get(jt);gn.skyColor.copy(jt.color).multiplyScalar($e*Te),gn.groundColor.copy(jt.groundColor).multiplyScalar($e*Te),v.hemi[ue]=gn,ue++}}ve>0&&(e.isWebGL2||C.has("OES_texture_float_linear")===!0?(v.rectAreaLTC1=nr.LTC_FLOAT_1,v.rectAreaLTC2=nr.LTC_FLOAT_2):C.has("OES_texture_half_float_linear")===!0?(v.rectAreaLTC1=nr.LTC_HALF_1,v.rectAreaLTC2=nr.LTC_HALF_2):S.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),v.ambient[0]=Z,v.ambient[1]=ne,v.ambient[2]=se;const Ve=v.hash;(Ve.directionalLength!==fe||Ve.pointLength!==$||Ve.spotLength!==ee||Ve.rectAreaLength!==ve||Ve.hemiLength!==ue||Ve.numDirectionalShadows!==Ce||Ve.numPointShadows!==Oe||Ve.numSpotShadows!==We||Ve.numSpotMaps!==Ze)&&(v.directional.length=fe,v.spot.length=ee,v.rectArea.length=ve,v.point.length=$,v.hemi.length=ue,v.directionalShadow.length=Ce,v.directionalShadowMap.length=Ce,v.pointShadow.length=Oe,v.pointShadowMap.length=Oe,v.spotShadow.length=We,v.spotShadowMap.length=We,v.directionalShadowMatrix.length=Ce,v.pointShadowMatrix.length=Oe,v.spotLightMatrix.length=We+Ze-ht,v.spotLightMap.length=Ze,v.numSpotLightShadowsWithMaps=ht,Ve.directionalLength=fe,Ve.pointLength=$,Ve.spotLength=ee,Ve.rectAreaLength=ve,Ve.hemiLength=ue,Ve.numDirectionalShadows=Ce,Ve.numPointShadows=Oe,Ve.numSpotShadows=We,Ve.numSpotMaps=Ze,v.version=tu++)}function j(W,q){let Z=0,ne=0,se=0,fe=0,$=0;const ee=q.matrixWorldInverse;for(let ve=0,ue=W.length;ve<ue;ve++){const Ce=W[ve];if(Ce.isDirectionalLight){const Oe=v.directional[Z];Oe.direction.setFromMatrixPosition(Ce.matrixWorld),M.setFromMatrixPosition(Ce.target.matrixWorld),Oe.direction.sub(M),Oe.direction.transformDirection(ee),Z++}else if(Ce.isSpotLight){const Oe=v.spot[se];Oe.position.setFromMatrixPosition(Ce.matrixWorld),Oe.position.applyMatrix4(ee),Oe.direction.setFromMatrixPosition(Ce.matrixWorld),M.setFromMatrixPosition(Ce.target.matrixWorld),Oe.direction.sub(M),Oe.direction.transformDirection(ee),se++}else if(Ce.isRectAreaLight){const Oe=v.rectArea[fe];Oe.position.setFromMatrixPosition(Ce.matrixWorld),Oe.position.applyMatrix4(ee),R.identity(),I.copy(Ce.matrixWorld),I.premultiply(ee),R.extractRotation(I),Oe.halfWidth.set(Ce.width*.5,0,0),Oe.halfHeight.set(0,Ce.height*.5,0),Oe.halfWidth.applyMatrix4(R),Oe.halfHeight.applyMatrix4(R),fe++}else if(Ce.isPointLight){const Oe=v.point[ne];Oe.position.setFromMatrixPosition(Ce.matrixWorld),Oe.position.applyMatrix4(ee),ne++}else if(Ce.isHemisphereLight){const Oe=v.hemi[$];Oe.direction.setFromMatrixPosition(Ce.matrixWorld),Oe.direction.transformDirection(ee),$++}}}return{setup:z,setupView:j,state:v}}function Ha(C,e){const c=new X1(C,e),g=[],v=[];function M(){g.length=0,v.length=0}function I(q){g.push(q)}function R(q){v.push(q)}function z(q){c.setup(g,q)}function j(q){c.setupView(g,q)}return{init:M,state:{lightsArray:g,shadowsArray:v,lights:c},setupLights:z,setupLightsView:j,pushLight:I,pushShadow:R}}function KA(C,e){let c=new WeakMap;function g(M,I=0){const R=c.get(M);let z;return R===void 0?(z=new Ha(C,e),c.set(M,[z])):I>=R.length?(z=new Ha(C,e),R.push(z)):z=R[I],z}function v(){c=new WeakMap}return{get:g,dispose:v}}class Rf extends ia{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Yi,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ff extends ia{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const nu=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ru=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Y1(C,e,c){let g=new Gu;const v=new yn,M=new yn,I=new Qr,R=new Rf({depthPacking:gg}),z=new Ff,j={},W=c.maxTextureSize,q={[nt]:He,[He]:nt,[ot]:ot},Z=new Qo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yn},radius:{value:4}},vertexShader:nu,fragmentShader:ru}),ne=Z.clone();ne.defines.HORIZONTAL_PASS=1;const se=new ui;se.setAttribute("position",new Qi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const fe=new bs(se,Z),$=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pe;let ee=this.type;this.render=function(Oe,We,Ze){if($.enabled===!1||$.autoUpdate===!1&&$.needsUpdate===!1||Oe.length===0)return;const ht=C.getRenderTarget(),Te=C.getActiveCubeFace(),Ve=C.getActiveMipmapLevel(),qt=C.state;qt.setBlending(St),qt.buffers.color.setClear(1,1,1,1),qt.buffers.depth.setTest(!0),qt.setScissorTest(!1);const vn=ee!==bt&&this.type===bt,jt=ee===bt&&this.type!==bt;for(let Wt=0,$e=Oe.length;Wt<$e;Wt++){const En=Oe[Wt],ln=En.shadow;if(ln===void 0){S.warn("THREE.WebGLShadowMap:",En,"has no shadow.");continue}if(ln.autoUpdate===!1&&ln.needsUpdate===!1)continue;v.copy(ln.mapSize);const gn=ln.getFrameExtents();if(v.multiply(gn),M.copy(ln.mapSize),(v.x>W||v.y>W)&&(v.x>W&&(M.x=Math.floor(W/gn.x),v.x=M.x*gn.x,ln.mapSize.x=M.x),v.y>W&&(M.y=Math.floor(W/gn.y),v.y=M.y*gn.y,ln.mapSize.y=M.y)),ln.map===null||vn===!0||jt===!0){const Sn=this.type!==bt?{minFilter:_r,magFilter:_r}:{};ln.map!==null&&ln.map.dispose(),ln.map=new dr(v.x,v.y,Sn),ln.map.texture.name=En.name+".shadowMap",ln.camera.updateProjectionMatrix()}C.setRenderTarget(ln.map),C.clear();const xn=ln.getViewportCount();for(let Sn=0;Sn<xn;Sn++){const Ut=ln.getViewport(Sn);I.set(M.x*Ut.x,M.y*Ut.y,M.x*Ut.z,M.y*Ut.w),qt.viewport(I),ln.updateMatrices(En,Sn),g=ln.getFrustum(),Ce(We,Ze,ln.camera,En,this.type)}ln.isPointLightShadow!==!0&&this.type===bt&&ve(ln,Ze),ln.needsUpdate=!1}ee=this.type,$.needsUpdate=!1,C.setRenderTarget(ht,Te,Ve)};function ve(Oe,We){const Ze=e.update(fe);Z.defines.VSM_SAMPLES!==Oe.blurSamples&&(Z.defines.VSM_SAMPLES=Oe.blurSamples,ne.defines.VSM_SAMPLES=Oe.blurSamples,Z.needsUpdate=!0,ne.needsUpdate=!0),Oe.mapPass===null&&(Oe.mapPass=new dr(v.x,v.y)),Z.uniforms.shadow_pass.value=Oe.map.texture,Z.uniforms.resolution.value=Oe.mapSize,Z.uniforms.radius.value=Oe.radius,C.setRenderTarget(Oe.mapPass),C.clear(),C.renderBufferDirect(We,null,Ze,Z,fe,null),ne.uniforms.shadow_pass.value=Oe.mapPass.texture,ne.uniforms.resolution.value=Oe.mapSize,ne.uniforms.radius.value=Oe.radius,C.setRenderTarget(Oe.map),C.clear(),C.renderBufferDirect(We,null,Ze,ne,fe,null)}function ue(Oe,We,Ze,ht){let Te=null;const Ve=Ze.isPointLight===!0?Oe.customDistanceMaterial:Oe.customDepthMaterial;if(Ve!==void 0)Te=Ve;else if(Te=Ze.isPointLight===!0?z:R,C.localClippingEnabled&&We.clipShadows===!0&&Array.isArray(We.clippingPlanes)&&We.clippingPlanes.length!==0||We.displacementMap&&We.displacementScale!==0||We.alphaMap&&We.alphaTest>0||We.map&&We.alphaTest>0){const qt=Te.uuid,vn=We.uuid;let jt=j[qt];jt===void 0&&(jt={},j[qt]=jt);let Wt=jt[vn];Wt===void 0&&(Wt=Te.clone(),jt[vn]=Wt),Te=Wt}if(Te.visible=We.visible,Te.wireframe=We.wireframe,ht===bt?Te.side=We.shadowSide!==null?We.shadowSide:We.side:Te.side=We.shadowSide!==null?We.shadowSide:q[We.side],Te.alphaMap=We.alphaMap,Te.alphaTest=We.alphaTest,Te.map=We.map,Te.clipShadows=We.clipShadows,Te.clippingPlanes=We.clippingPlanes,Te.clipIntersection=We.clipIntersection,Te.displacementMap=We.displacementMap,Te.displacementScale=We.displacementScale,Te.displacementBias=We.displacementBias,Te.wireframeLinewidth=We.wireframeLinewidth,Te.linewidth=We.linewidth,Ze.isPointLight===!0&&Te.isMeshDistanceMaterial===!0){const qt=C.properties.get(Te);qt.light=Ze}return Te}function Ce(Oe,We,Ze,ht,Te){if(Oe.visible===!1)return;if(Oe.layers.test(We.layers)&&(Oe.isMesh||Oe.isLine||Oe.isPoints)&&(Oe.castShadow||Oe.receiveShadow&&Te===bt)&&(!Oe.frustumCulled||g.intersectsObject(Oe))){Oe.modelViewMatrix.multiplyMatrices(Ze.matrixWorldInverse,Oe.matrixWorld);const vn=e.update(Oe),jt=Oe.material;if(Array.isArray(jt)){const Wt=vn.groups;for(let $e=0,En=Wt.length;$e<En;$e++){const ln=Wt[$e],gn=jt[ln.materialIndex];if(gn&&gn.visible){const xn=ue(Oe,gn,ht,Te);C.renderBufferDirect(Ze,null,vn,xn,Oe,ln)}}}else if(jt.visible){const Wt=ue(Oe,jt,ht,Te);C.renderBufferDirect(Ze,null,vn,Wt,Oe,null)}}const qt=Oe.children;for(let vn=0,jt=qt.length;vn<jt;vn++)Ce(qt[vn],We,Ze,ht,Te)}}function JA(C,e,c){const g=c.isWebGL2;function v(){let yt=!1;const or=new Qr;let Zt=null;const Zn=new Qr(0,0,0,0);return{setMask:function(mr){Zt!==mr&&!yt&&(C.colorMask(mr,mr,mr,mr),Zt=mr)},setLocked:function(mr){yt=mr},setClear:function(mr,$n,ms,Ms,hu){hu===!0&&(mr*=Ms,$n*=Ms,ms*=Ms),or.set(mr,$n,ms,Ms),Zn.equals(or)===!1&&(C.clearColor(mr,$n,ms,Ms),Zn.copy(or))},reset:function(){yt=!1,Zt=null,Zn.set(-1,0,0,0)}}}function M(){let yt=!1,or=null,Zt=null,Zn=null;return{setTest:function(mr){mr?Jr(C.DEPTH_TEST):qr(C.DEPTH_TEST)},setMask:function(mr){or!==mr&&!yt&&(C.depthMask(mr),or=mr)},setFunc:function(mr){if(Zt!==mr){switch(mr){case Wr:C.depthFunc(C.NEVER);break;case Li:C.depthFunc(C.ALWAYS);break;case Mn:C.depthFunc(C.LESS);break;case Tn:C.depthFunc(C.LEQUAL);break;case Ln:C.depthFunc(C.EQUAL);break;case pr:C.depthFunc(C.GEQUAL);break;case ni:C.depthFunc(C.GREATER);break;case Ar:C.depthFunc(C.NOTEQUAL);break;default:C.depthFunc(C.LEQUAL)}Zt=mr}},setLocked:function(mr){yt=mr},setClear:function(mr){Zn!==mr&&(C.clearDepth(mr),Zn=mr)},reset:function(){yt=!1,or=null,Zt=null,Zn=null}}}function I(){let yt=!1,or=null,Zt=null,Zn=null,mr=null,$n=null,ms=null,Ms=null,hu=null;return{setTest:function(Ui){yt||(Ui?Jr(C.STENCIL_TEST):qr(C.STENCIL_TEST))},setMask:function(Ui){or!==Ui&&!yt&&(C.stencilMask(Ui),or=Ui)},setFunc:function(Ui,ti,mi){(Zt!==Ui||Zn!==ti||mr!==mi)&&(C.stencilFunc(Ui,ti,mi),Zt=Ui,Zn=ti,mr=mi)},setOp:function(Ui,ti,mi){($n!==Ui||ms!==ti||Ms!==mi)&&(C.stencilOp(Ui,ti,mi),$n=Ui,ms=ti,Ms=mi)},setLocked:function(Ui){yt=Ui},setClear:function(Ui){hu!==Ui&&(C.clearStencil(Ui),hu=Ui)},reset:function(){yt=!1,or=null,Zt=null,Zn=null,mr=null,$n=null,ms=null,Ms=null,hu=null}}}const R=new v,z=new M,j=new I,W=new WeakMap,q=new WeakMap;let Z={},ne={},se=new WeakMap,fe=[],$=null,ee=!1,ve=null,ue=null,Ce=null,Oe=null,We=null,Ze=null,ht=null,Te=!1,Ve=null,qt=null,vn=null,jt=null,Wt=null;const $e=C.getParameter(C.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let En=!1,ln=0;const gn=C.getParameter(C.VERSION);gn.indexOf("WebGL")!==-1?(ln=parseFloat(/^WebGL (\d)/.exec(gn)[1]),En=ln>=1):gn.indexOf("OpenGL ES")!==-1&&(ln=parseFloat(/^OpenGL ES (\d)/.exec(gn)[1]),En=ln>=2);let xn=null,Sn={};const Ut=C.getParameter(C.SCISSOR_BOX),dn=C.getParameter(C.VIEWPORT),Pn=new Qr().fromArray(Ut),cr=new Qr().fromArray(dn);function Er(yt,or,Zt,Zn){const mr=new Uint8Array(4),$n=C.createTexture();C.bindTexture(yt,$n),C.texParameteri(yt,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(yt,C.TEXTURE_MAG_FILTER,C.NEAREST);for(let ms=0;ms<Zt;ms++)g&&(yt===C.TEXTURE_3D||yt===C.TEXTURE_2D_ARRAY)?C.texImage3D(or,0,C.RGBA,1,1,Zn,0,C.RGBA,C.UNSIGNED_BYTE,mr):C.texImage2D(or+ms,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,mr);return $n}const ei={};ei[C.TEXTURE_2D]=Er(C.TEXTURE_2D,C.TEXTURE_2D,1),ei[C.TEXTURE_CUBE_MAP]=Er(C.TEXTURE_CUBE_MAP,C.TEXTURE_CUBE_MAP_POSITIVE_X,6),g&&(ei[C.TEXTURE_2D_ARRAY]=Er(C.TEXTURE_2D_ARRAY,C.TEXTURE_2D_ARRAY,1,1),ei[C.TEXTURE_3D]=Er(C.TEXTURE_3D,C.TEXTURE_3D,1,1)),R.setClear(0,0,0,1),z.setClear(1),j.setClear(0),Jr(C.DEPTH_TEST),z.setFunc(Tn),bn(!1),Vr(H),Jr(C.CULL_FACE),Lt(St);function Jr(yt){Z[yt]!==!0&&(C.enable(yt),Z[yt]=!0)}function qr(yt){Z[yt]!==!1&&(C.disable(yt),Z[yt]=!1)}function oo(yt,or){return ne[yt]!==or?(C.bindFramebuffer(yt,or),ne[yt]=or,g&&(yt===C.DRAW_FRAMEBUFFER&&(ne[C.FRAMEBUFFER]=or),yt===C.FRAMEBUFFER&&(ne[C.DRAW_FRAMEBUFFER]=or)),!0):!1}function gs(yt,or){let Zt=fe,Zn=!1;if(yt)if(Zt=se.get(or),Zt===void 0&&(Zt=[],se.set(or,Zt)),yt.isWebGLMultipleRenderTargets){const mr=yt.texture;if(Zt.length!==mr.length||Zt[0]!==C.COLOR_ATTACHMENT0){for(let $n=0,ms=mr.length;$n<ms;$n++)Zt[$n]=C.COLOR_ATTACHMENT0+$n;Zt.length=mr.length,Zn=!0}}else Zt[0]!==C.COLOR_ATTACHMENT0&&(Zt[0]=C.COLOR_ATTACHMENT0,Zn=!0);else Zt[0]!==C.BACK&&(Zt[0]=C.BACK,Zn=!0);Zn&&(c.isWebGL2?C.drawBuffers(Zt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Zt))}function ai(yt){return $!==yt?(C.useProgram(yt),$=yt,!0):!1}const st={[Jt]:C.FUNC_ADD,[zt]:C.FUNC_SUBTRACT,[_n]:C.FUNC_REVERSE_SUBTRACT};if(g)st[Kn]=C.MIN,st[Cr]=C.MAX;else{const yt=e.get("EXT_blend_minmax");yt!==null&&(st[Kn]=yt.MIN_EXT,st[Cr]=yt.MAX_EXT)}const Jn={[zr]:C.ZERO,[fr]:C.ONE,[Ir]:C.SRC_COLOR,[vi]:C.SRC_ALPHA,[gr]:C.SRC_ALPHA_SATURATE,[$t]:C.DST_COLOR,[os]:C.DST_ALPHA,[Vi]:C.ONE_MINUS_SRC_COLOR,[hi]:C.ONE_MINUS_SRC_ALPHA,[Fn]:C.ONE_MINUS_DST_COLOR,[Vn]:C.ONE_MINUS_DST_ALPHA};function Lt(yt,or,Zt,Zn,mr,$n,ms,Ms){if(yt===St){ee===!0&&(qr(C.BLEND),ee=!1);return}if(ee===!1&&(Jr(C.BLEND),ee=!0),yt!==Ot){if(yt!==ve||Ms!==Te){if((ue!==Jt||We!==Jt)&&(C.blendEquation(C.FUNC_ADD),ue=Jt,We=Jt),Ms)switch(yt){case vt:C.blendFuncSeparate(C.ONE,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA);break;case ut:C.blendFunc(C.ONE,C.ONE);break;case mt:C.blendFuncSeparate(C.ZERO,C.ONE_MINUS_SRC_COLOR,C.ZERO,C.ONE);break;case Pt:C.blendFuncSeparate(C.ZERO,C.SRC_COLOR,C.ZERO,C.SRC_ALPHA);break;default:S.error("THREE.WebGLState: Invalid blending: ",yt);break}else switch(yt){case vt:C.blendFuncSeparate(C.SRC_ALPHA,C.ONE_MINUS_SRC_ALPHA,C.ONE,C.ONE_MINUS_SRC_ALPHA);break;case ut:C.blendFunc(C.SRC_ALPHA,C.ONE);break;case mt:C.blendFuncSeparate(C.ZERO,C.ONE_MINUS_SRC_COLOR,C.ZERO,C.ONE);break;case Pt:C.blendFunc(C.ZERO,C.SRC_COLOR);break;default:S.error("THREE.WebGLState: Invalid blending: ",yt);break}Ce=null,Oe=null,Ze=null,ht=null,ve=yt,Te=Ms}return}mr=mr||or,$n=$n||Zt,ms=ms||Zn,(or!==ue||mr!==We)&&(C.blendEquationSeparate(st[or],st[mr]),ue=or,We=mr),(Zt!==Ce||Zn!==Oe||$n!==Ze||ms!==ht)&&(C.blendFuncSeparate(Jn[Zt],Jn[Zn],Jn[$n],Jn[ms]),Ce=Zt,Oe=Zn,Ze=$n,ht=ms),ve=yt,Te=!1}function Wn(yt,or){yt.side===ot?qr(C.CULL_FACE):Jr(C.CULL_FACE);let Zt=yt.side===He;or&&(Zt=!Zt),bn(Zt),yt.blending===vt&&yt.transparent===!1?Lt(St):Lt(yt.blending,yt.blendEquation,yt.blendSrc,yt.blendDst,yt.blendEquationAlpha,yt.blendSrcAlpha,yt.blendDstAlpha,yt.premultipliedAlpha),z.setFunc(yt.depthFunc),z.setTest(yt.depthTest),z.setMask(yt.depthWrite),R.setMask(yt.colorWrite);const Zn=yt.stencilWrite;j.setTest(Zn),Zn&&(j.setMask(yt.stencilWriteMask),j.setFunc(yt.stencilFunc,yt.stencilRef,yt.stencilFuncMask),j.setOp(yt.stencilFail,yt.stencilZFail,yt.stencilZPass)),An(yt.polygonOffset,yt.polygonOffsetFactor,yt.polygonOffsetUnits),yt.alphaToCoverage===!0?Jr(C.SAMPLE_ALPHA_TO_COVERAGE):qr(C.SAMPLE_ALPHA_TO_COVERAGE)}function bn(yt){Ve!==yt&&(yt?C.frontFace(C.CW):C.frontFace(C.CCW),Ve=yt)}function Vr(yt){yt!==E?(Jr(C.CULL_FACE),yt!==qt&&(yt===H?C.cullFace(C.BACK):yt===te?C.cullFace(C.FRONT):C.cullFace(C.FRONT_AND_BACK))):qr(C.CULL_FACE),qt=yt}function hr(yt){yt!==vn&&(En&&C.lineWidth(yt),vn=yt)}function An(yt,or,Zt){yt?(Jr(C.POLYGON_OFFSET_FILL),(jt!==or||Wt!==Zt)&&(C.polygonOffset(or,Zt),jt=or,Wt=Zt)):qr(C.POLYGON_OFFSET_FILL)}function It(yt){yt?Jr(C.SCISSOR_TEST):qr(C.SCISSOR_TEST)}function Ii(yt){yt===void 0&&(yt=C.TEXTURE0+$e-1),xn!==yt&&(C.activeTexture(yt),xn=yt)}function Fo(yt,or,Zt){Zt===void 0&&(xn===null?Zt=C.TEXTURE0+$e-1:Zt=xn);let Zn=Sn[Zt];Zn===void 0&&(Zn={type:void 0,texture:void 0},Sn[Zt]=Zn),(Zn.type!==yt||Zn.texture!==or)&&(xn!==Zt&&(C.activeTexture(Zt),xn=Zt),C.bindTexture(yt,or||ei[yt]),Zn.type=yt,Zn.texture=or)}function et(){const yt=Sn[xn];yt!==void 0&&yt.type!==void 0&&(C.bindTexture(yt.type,null),yt.type=void 0,yt.texture=void 0)}function Re(){try{C.compressedTexImage2D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Vt(){try{C.compressedTexImage3D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Gn(){try{C.texSubImage2D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function wn(){try{C.texSubImage3D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Rn(){try{C.compressedTexSubImage2D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function qn(){try{C.compressedTexSubImage3D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function hn(){try{C.texStorage2D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Kt(){try{C.texStorage3D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Ur(){try{C.texImage2D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Pr(){try{C.texImage3D.apply(C,arguments)}catch(yt){S.error("THREE.WebGLState:",yt)}}function Nr(yt){Pn.equals(yt)===!1&&(C.scissor(yt.x,yt.y,yt.z,yt.w),Pn.copy(yt))}function Fr(yt){cr.equals(yt)===!1&&(C.viewport(yt.x,yt.y,yt.z,yt.w),cr.copy(yt))}function Br(yt,or){let Zt=q.get(or);Zt===void 0&&(Zt=new WeakMap,q.set(or,Zt));let Zn=Zt.get(yt);Zn===void 0&&(Zn=C.getUniformBlockIndex(or,yt.name),Zt.set(yt,Zn))}function Pi(yt,or){const Zn=q.get(or).get(yt);W.get(or)!==Zn&&(C.uniformBlockBinding(or,Zn,yt.__bindingPointIndex),W.set(or,Zn))}function Jo(){C.disable(C.BLEND),C.disable(C.CULL_FACE),C.disable(C.DEPTH_TEST),C.disable(C.POLYGON_OFFSET_FILL),C.disable(C.SCISSOR_TEST),C.disable(C.STENCIL_TEST),C.disable(C.SAMPLE_ALPHA_TO_COVERAGE),C.blendEquation(C.FUNC_ADD),C.blendFunc(C.ONE,C.ZERO),C.blendFuncSeparate(C.ONE,C.ZERO,C.ONE,C.ZERO),C.colorMask(!0,!0,!0,!0),C.clearColor(0,0,0,0),C.depthMask(!0),C.depthFunc(C.LESS),C.clearDepth(1),C.stencilMask(4294967295),C.stencilFunc(C.ALWAYS,0,4294967295),C.stencilOp(C.KEEP,C.KEEP,C.KEEP),C.clearStencil(0),C.cullFace(C.BACK),C.frontFace(C.CCW),C.polygonOffset(0,0),C.activeTexture(C.TEXTURE0),C.bindFramebuffer(C.FRAMEBUFFER,null),g===!0&&(C.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),C.bindFramebuffer(C.READ_FRAMEBUFFER,null)),C.useProgram(null),C.lineWidth(1),C.scissor(0,0,C.canvas.width,C.canvas.height),C.viewport(0,0,C.canvas.width,C.canvas.height),Z={},xn=null,Sn={},ne={},se=new WeakMap,fe=[],$=null,ee=!1,ve=null,ue=null,Ce=null,Oe=null,We=null,Ze=null,ht=null,Te=!1,Ve=null,qt=null,vn=null,jt=null,Wt=null,Pn.set(0,0,C.canvas.width,C.canvas.height),cr.set(0,0,C.canvas.width,C.canvas.height),R.reset(),z.reset(),j.reset()}return{buffers:{color:R,depth:z,stencil:j},enable:Jr,disable:qr,bindFramebuffer:oo,drawBuffers:gs,useProgram:ai,setBlending:Lt,setMaterial:Wn,setFlipSided:bn,setCullFace:Vr,setLineWidth:hr,setPolygonOffset:An,setScissorTest:It,activeTexture:Ii,bindTexture:Fo,unbindTexture:et,compressedTexImage2D:Re,compressedTexImage3D:Vt,texImage2D:Ur,texImage3D:Pr,updateUBOMapping:Br,uniformBlockBinding:Pi,texStorage2D:hn,texStorage3D:Kt,texSubImage2D:Gn,texSubImage3D:wn,compressedTexSubImage2D:Rn,compressedTexSubImage3D:qn,scissor:Nr,viewport:Fr,reset:Jo}}function Th(C,e,c,g,v,M,I){const R=v.isWebGL2,z=v.maxTextures,j=v.maxCubemapSize,W=v.maxTextureSize,q=v.maxSamples,Z=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,ne=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),se=new WeakMap;let fe;const $=new WeakMap;let ee=!1;try{ee=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(et){}function ve(et,Re){return ee?new OffscreenCanvas(et,Re):cd("canvas")}function ue(et,Re,Vt,Gn){let wn=1;if((et.width>Gn||et.height>Gn)&&(wn=Gn/Math.max(et.width,et.height)),wn<1||Re===!0)if(typeof HTMLImageElement!="undefined"&&et instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&et instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&et instanceof ImageBitmap){const Rn=Re?ma:Math.floor,qn=Rn(wn*et.width),hn=Rn(wn*et.height);fe===void 0&&(fe=ve(qn,hn));const Kt=Vt?ve(qn,hn):fe;return Kt.width=qn,Kt.height=hn,Kt.getContext("2d").drawImage(et,0,0,qn,hn),S.warn("THREE.WebGLRenderer: Texture has been resized from ("+et.width+"x"+et.height+") to ("+qn+"x"+hn+")."),Kt}else return"data"in et&&S.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+et.width+"x"+et.height+")."),et;return et}function Ce(et){return vo(et.width)&&vo(et.height)}function Oe(et){return R?!1:et.wrapS!==ao||et.wrapT!==ao||et.minFilter!==_r&&et.minFilter!==$i}function We(et,Re){return et.generateMipmaps&&Re&&et.minFilter!==_r&&et.minFilter!==$i}function Ze(et){C.generateMipmap(et)}function ht(et,Re,Vt,Gn,wn=!1){if(R===!1)return Re;if(et!==null){if(C[et]!==void 0)return C[et];S.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+et+"'")}let Rn=Re;return Re===C.RED&&(Vt===C.FLOAT&&(Rn=C.R32F),Vt===C.HALF_FLOAT&&(Rn=C.R16F),Vt===C.UNSIGNED_BYTE&&(Rn=C.R8)),Re===C.RED_INTEGER&&(Vt===C.UNSIGNED_BYTE&&(Rn=C.R8UI),Vt===C.UNSIGNED_SHORT&&(Rn=C.R16UI),Vt===C.UNSIGNED_INT&&(Rn=C.R32UI),Vt===C.BYTE&&(Rn=C.R8I),Vt===C.SHORT&&(Rn=C.R16I),Vt===C.INT&&(Rn=C.R32I)),Re===C.RG&&(Vt===C.FLOAT&&(Rn=C.RG32F),Vt===C.HALF_FLOAT&&(Rn=C.RG16F),Vt===C.UNSIGNED_BYTE&&(Rn=C.RG8)),Re===C.RGBA&&(Vt===C.FLOAT&&(Rn=C.RGBA32F),Vt===C.HALF_FLOAT&&(Rn=C.RGBA16F),Vt===C.UNSIGNED_BYTE&&(Rn=Gn===To&&wn===!1?C.SRGB8_ALPHA8:C.RGBA8),Vt===C.UNSIGNED_SHORT_4_4_4_4&&(Rn=C.RGBA4),Vt===C.UNSIGNED_SHORT_5_5_5_1&&(Rn=C.RGB5_A1)),(Rn===C.R16F||Rn===C.R32F||Rn===C.RG16F||Rn===C.RG32F||Rn===C.RGBA16F||Rn===C.RGBA32F)&&e.get("EXT_color_buffer_float"),Rn}function Te(et,Re,Vt){return We(et,Vt)===!0||et.isFramebufferTexture&&et.minFilter!==_r&&et.minFilter!==$i?Math.log2(Math.max(Re.width,Re.height))+1:et.mipmaps!==void 0&&et.mipmaps.length>0?et.mipmaps.length:et.isCompressedTexture&&Array.isArray(et.image)?Re.mipmaps.length:1}function Ve(et){return et===_r||et===ji||et===as?C.NEAREST:C.LINEAR}function qt(et){const Re=et.target;Re.removeEventListener("dispose",qt),jt(Re),Re.isVideoTexture&&se.delete(Re)}function vn(et){const Re=et.target;Re.removeEventListener("dispose",vn),$e(Re)}function jt(et){const Re=g.get(et);if(Re.__webglInit===void 0)return;const Vt=et.source,Gn=$.get(Vt);if(Gn){const wn=Gn[Re.__cacheKey];wn.usedTimes--,wn.usedTimes===0&&Wt(et),Object.keys(Gn).length===0&&$.delete(Vt)}g.remove(et)}function Wt(et){const Re=g.get(et);C.deleteTexture(Re.__webglTexture);const Vt=et.source,Gn=$.get(Vt);delete Gn[Re.__cacheKey],I.memory.textures--}function $e(et){const Re=et.texture,Vt=g.get(et),Gn=g.get(Re);if(Gn.__webglTexture!==void 0&&(C.deleteTexture(Gn.__webglTexture),I.memory.textures--),et.depthTexture&&et.depthTexture.dispose(),et.isWebGLCubeRenderTarget)for(let wn=0;wn<6;wn++){if(Array.isArray(Vt.__webglFramebuffer[wn]))for(let Rn=0;Rn<Vt.__webglFramebuffer[wn].length;Rn++)C.deleteFramebuffer(Vt.__webglFramebuffer[wn][Rn]);else C.deleteFramebuffer(Vt.__webglFramebuffer[wn]);Vt.__webglDepthbuffer&&C.deleteRenderbuffer(Vt.__webglDepthbuffer[wn])}else{if(Array.isArray(Vt.__webglFramebuffer))for(let wn=0;wn<Vt.__webglFramebuffer.length;wn++)C.deleteFramebuffer(Vt.__webglFramebuffer[wn]);else C.deleteFramebuffer(Vt.__webglFramebuffer);if(Vt.__webglDepthbuffer&&C.deleteRenderbuffer(Vt.__webglDepthbuffer),Vt.__webglMultisampledFramebuffer&&C.deleteFramebuffer(Vt.__webglMultisampledFramebuffer),Vt.__webglColorRenderbuffer)for(let wn=0;wn<Vt.__webglColorRenderbuffer.length;wn++)Vt.__webglColorRenderbuffer[wn]&&C.deleteRenderbuffer(Vt.__webglColorRenderbuffer[wn]);Vt.__webglDepthRenderbuffer&&C.deleteRenderbuffer(Vt.__webglDepthRenderbuffer)}if(et.isWebGLMultipleRenderTargets)for(let wn=0,Rn=Re.length;wn<Rn;wn++){const qn=g.get(Re[wn]);qn.__webglTexture&&(C.deleteTexture(qn.__webglTexture),I.memory.textures--),g.remove(Re[wn])}g.remove(Re),g.remove(et)}let En=0;function ln(){En=0}function gn(){const et=En;return et>=z&&S.warn("THREE.WebGLTextures: Trying to use "+et+" texture units while this GPU supports only "+z),En+=1,et}function xn(et){const Re=[];return Re.push(et.wrapS),Re.push(et.wrapT),Re.push(et.wrapR||0),Re.push(et.magFilter),Re.push(et.minFilter),Re.push(et.anisotropy),Re.push(et.internalFormat),Re.push(et.format),Re.push(et.type),Re.push(et.generateMipmaps),Re.push(et.premultiplyAlpha),Re.push(et.flipY),Re.push(et.unpackAlignment),Re.push(et.colorSpace),Re.join()}function Sn(et,Re){const Vt=g.get(et);if(et.isVideoTexture&&Ii(et),et.isRenderTargetTexture===!1&&et.version>0&&Vt.__version!==et.version){const Gn=et.image;if(Gn===null)S.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Gn.complete===!1)S.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oo(Vt,et,Re);return}}c.bindTexture(C.TEXTURE_2D,Vt.__webglTexture,C.TEXTURE0+Re)}function Ut(et,Re){const Vt=g.get(et);if(et.version>0&&Vt.__version!==et.version){oo(Vt,et,Re);return}c.bindTexture(C.TEXTURE_2D_ARRAY,Vt.__webglTexture,C.TEXTURE0+Re)}function dn(et,Re){const Vt=g.get(et);if(et.version>0&&Vt.__version!==et.version){oo(Vt,et,Re);return}c.bindTexture(C.TEXTURE_3D,Vt.__webglTexture,C.TEXTURE0+Re)}function Pn(et,Re){const Vt=g.get(et);if(et.version>0&&Vt.__version!==et.version){gs(Vt,et,Re);return}c.bindTexture(C.TEXTURE_CUBE_MAP,Vt.__webglTexture,C.TEXTURE0+Re)}const cr={[Oi]:C.REPEAT,[ao]:C.CLAMP_TO_EDGE,[Hs]:C.MIRRORED_REPEAT},Er={[_r]:C.NEAREST,[ji]:C.NEAREST_MIPMAP_NEAREST,[as]:C.NEAREST_MIPMAP_LINEAR,[$i]:C.LINEAR,[ls]:C.LINEAR_MIPMAP_NEAREST,[lo]:C.LINEAR_MIPMAP_LINEAR},ei={[bl]:C.NEVER,[Zd]:C.ALWAYS,[od]:C.LESS,[np]:C.LEQUAL,[tp]:C.EQUAL,[Eu]:C.GEQUAL,[tf]:C.GREATER,[rp]:C.NOTEQUAL};function Jr(et,Re,Vt){if(Vt?(C.texParameteri(et,C.TEXTURE_WRAP_S,cr[Re.wrapS]),C.texParameteri(et,C.TEXTURE_WRAP_T,cr[Re.wrapT]),(et===C.TEXTURE_3D||et===C.TEXTURE_2D_ARRAY)&&C.texParameteri(et,C.TEXTURE_WRAP_R,cr[Re.wrapR]),C.texParameteri(et,C.TEXTURE_MAG_FILTER,Er[Re.magFilter]),C.texParameteri(et,C.TEXTURE_MIN_FILTER,Er[Re.minFilter])):(C.texParameteri(et,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(et,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),(et===C.TEXTURE_3D||et===C.TEXTURE_2D_ARRAY)&&C.texParameteri(et,C.TEXTURE_WRAP_R,C.CLAMP_TO_EDGE),(Re.wrapS!==ao||Re.wrapT!==ao)&&S.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),C.texParameteri(et,C.TEXTURE_MAG_FILTER,Ve(Re.magFilter)),C.texParameteri(et,C.TEXTURE_MIN_FILTER,Ve(Re.minFilter)),Re.minFilter!==_r&&Re.minFilter!==$i&&S.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Re.compareFunction&&(C.texParameteri(et,C.TEXTURE_COMPARE_MODE,C.COMPARE_REF_TO_TEXTURE),C.texParameteri(et,C.TEXTURE_COMPARE_FUNC,ei[Re.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Gn=e.get("EXT_texture_filter_anisotropic");if(Re.magFilter===_r||Re.minFilter!==as&&Re.minFilter!==lo||Re.type===_s&&e.has("OES_texture_float_linear")===!1||R===!1&&Re.type===Co&&e.has("OES_texture_half_float_linear")===!1)return;(Re.anisotropy>1||g.get(Re).__currentAnisotropy)&&(C.texParameterf(et,Gn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Re.anisotropy,v.getMaxAnisotropy())),g.get(Re).__currentAnisotropy=Re.anisotropy)}}function qr(et,Re){let Vt=!1;et.__webglInit===void 0&&(et.__webglInit=!0,Re.addEventListener("dispose",qt));const Gn=Re.source;let wn=$.get(Gn);wn===void 0&&(wn={},$.set(Gn,wn));const Rn=xn(Re);if(Rn!==et.__cacheKey){wn[Rn]===void 0&&(wn[Rn]={texture:C.createTexture(),usedTimes:0},I.memory.textures++,Vt=!0),wn[Rn].usedTimes++;const qn=wn[et.__cacheKey];qn!==void 0&&(wn[et.__cacheKey].usedTimes--,qn.usedTimes===0&&Wt(Re)),et.__cacheKey=Rn,et.__webglTexture=wn[Rn].texture}return Vt}function oo(et,Re,Vt){let Gn=C.TEXTURE_2D;(Re.isDataArrayTexture||Re.isCompressedArrayTexture)&&(Gn=C.TEXTURE_2D_ARRAY),Re.isData3DTexture&&(Gn=C.TEXTURE_3D);const wn=qr(et,Re),Rn=Re.source;c.bindTexture(Gn,et.__webglTexture,C.TEXTURE0+Vt);const qn=g.get(Rn);if(Rn.version!==qn.__version||wn===!0){c.activeTexture(C.TEXTURE0+Vt),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,Re.flipY),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),C.pixelStorei(C.UNPACK_ALIGNMENT,Re.unpackAlignment),C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE);const hn=Oe(Re)&&Ce(Re.image)===!1;let Kt=ue(Re.image,hn,!1,W);Kt=Fo(Re,Kt);const Ur=Ce(Kt)||R,Pr=M.convert(Re.format,Re.colorSpace);let Nr=M.convert(Re.type),Fr=ht(Re.internalFormat,Pr,Nr,Re.colorSpace,Re.isVideoTexture);Jr(Gn,Re,Ur);let Br;const Pi=Re.mipmaps,Jo=R&&Re.isVideoTexture!==!0,yt=qn.__version===void 0||wn===!0,or=Te(Re,Kt,Ur);if(Re.isDepthTexture)Fr=C.DEPTH_COMPONENT,R?Re.type===_s?Fr=C.DEPTH_COMPONENT32F:Re.type===co?Fr=C.DEPTH_COMPONENT24:Re.type===Sa?Fr=C.DEPTH24_STENCIL8:Fr=C.DEPTH_COMPONENT16:Re.type===_s&&S.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Re.format===rt&&Fr===C.DEPTH_COMPONENT&&Re.type!==ta&&Re.type!==co&&(S.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Re.type=co,Nr=M.convert(Re.type)),Re.format===xt&&Fr===C.DEPTH_COMPONENT&&(Fr=C.DEPTH_STENCIL,Re.type!==Sa&&(S.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Re.type=Sa,Nr=M.convert(Re.type))),yt&&(Jo?c.texStorage2D(C.TEXTURE_2D,1,Fr,Kt.width,Kt.height):c.texImage2D(C.TEXTURE_2D,0,Fr,Kt.width,Kt.height,0,Pr,Nr,null));else if(Re.isDataTexture)if(Pi.length>0&&Ur){Jo&&yt&&c.texStorage2D(C.TEXTURE_2D,or,Fr,Pi[0].width,Pi[0].height);for(let Zt=0,Zn=Pi.length;Zt<Zn;Zt++)Br=Pi[Zt],Jo?c.texSubImage2D(C.TEXTURE_2D,Zt,0,0,Br.width,Br.height,Pr,Nr,Br.data):c.texImage2D(C.TEXTURE_2D,Zt,Fr,Br.width,Br.height,0,Pr,Nr,Br.data);Re.generateMipmaps=!1}else Jo?(yt&&c.texStorage2D(C.TEXTURE_2D,or,Fr,Kt.width,Kt.height),c.texSubImage2D(C.TEXTURE_2D,0,0,0,Kt.width,Kt.height,Pr,Nr,Kt.data)):c.texImage2D(C.TEXTURE_2D,0,Fr,Kt.width,Kt.height,0,Pr,Nr,Kt.data);else if(Re.isCompressedTexture)if(Re.isCompressedArrayTexture){Jo&&yt&&c.texStorage3D(C.TEXTURE_2D_ARRAY,or,Fr,Pi[0].width,Pi[0].height,Kt.depth);for(let Zt=0,Zn=Pi.length;Zt<Zn;Zt++)Br=Pi[Zt],Re.format!==cs?Pr!==null?Jo?c.compressedTexSubImage3D(C.TEXTURE_2D_ARRAY,Zt,0,0,0,Br.width,Br.height,Kt.depth,Pr,Br.data,0,0):c.compressedTexImage3D(C.TEXTURE_2D_ARRAY,Zt,Fr,Br.width,Br.height,Kt.depth,0,Br.data,0,0):S.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Jo?c.texSubImage3D(C.TEXTURE_2D_ARRAY,Zt,0,0,0,Br.width,Br.height,Kt.depth,Pr,Nr,Br.data):c.texImage3D(C.TEXTURE_2D_ARRAY,Zt,Fr,Br.width,Br.height,Kt.depth,0,Pr,Nr,Br.data)}else{Jo&&yt&&c.texStorage2D(C.TEXTURE_2D,or,Fr,Pi[0].width,Pi[0].height);for(let Zt=0,Zn=Pi.length;Zt<Zn;Zt++)Br=Pi[Zt],Re.format!==cs?Pr!==null?Jo?c.compressedTexSubImage2D(C.TEXTURE_2D,Zt,0,0,Br.width,Br.height,Pr,Br.data):c.compressedTexImage2D(C.TEXTURE_2D,Zt,Fr,Br.width,Br.height,0,Br.data):S.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Jo?c.texSubImage2D(C.TEXTURE_2D,Zt,0,0,Br.width,Br.height,Pr,Nr,Br.data):c.texImage2D(C.TEXTURE_2D,Zt,Fr,Br.width,Br.height,0,Pr,Nr,Br.data)}else if(Re.isDataArrayTexture)Jo?(yt&&c.texStorage3D(C.TEXTURE_2D_ARRAY,or,Fr,Kt.width,Kt.height,Kt.depth),c.texSubImage3D(C.TEXTURE_2D_ARRAY,0,0,0,0,Kt.width,Kt.height,Kt.depth,Pr,Nr,Kt.data)):c.texImage3D(C.TEXTURE_2D_ARRAY,0,Fr,Kt.width,Kt.height,Kt.depth,0,Pr,Nr,Kt.data);else if(Re.isData3DTexture)Jo?(yt&&c.texStorage3D(C.TEXTURE_3D,or,Fr,Kt.width,Kt.height,Kt.depth),c.texSubImage3D(C.TEXTURE_3D,0,0,0,0,Kt.width,Kt.height,Kt.depth,Pr,Nr,Kt.data)):c.texImage3D(C.TEXTURE_3D,0,Fr,Kt.width,Kt.height,Kt.depth,0,Pr,Nr,Kt.data);else if(Re.isFramebufferTexture){if(yt)if(Jo)c.texStorage2D(C.TEXTURE_2D,or,Fr,Kt.width,Kt.height);else{let Zt=Kt.width,Zn=Kt.height;for(let mr=0;mr<or;mr++)c.texImage2D(C.TEXTURE_2D,mr,Fr,Zt,Zn,0,Pr,Nr,null),Zt>>=1,Zn>>=1}}else if(Pi.length>0&&Ur){Jo&&yt&&c.texStorage2D(C.TEXTURE_2D,or,Fr,Pi[0].width,Pi[0].height);for(let Zt=0,Zn=Pi.length;Zt<Zn;Zt++)Br=Pi[Zt],Jo?c.texSubImage2D(C.TEXTURE_2D,Zt,0,0,Pr,Nr,Br):c.texImage2D(C.TEXTURE_2D,Zt,Fr,Pr,Nr,Br);Re.generateMipmaps=!1}else Jo?(yt&&c.texStorage2D(C.TEXTURE_2D,or,Fr,Kt.width,Kt.height),c.texSubImage2D(C.TEXTURE_2D,0,0,0,Pr,Nr,Kt)):c.texImage2D(C.TEXTURE_2D,0,Fr,Pr,Nr,Kt);We(Re,Ur)&&Ze(Gn),qn.__version=Rn.version,Re.onUpdate&&Re.onUpdate(Re)}et.__version=Re.version}function gs(et,Re,Vt){if(Re.image.length!==6)return;const Gn=qr(et,Re),wn=Re.source;c.bindTexture(C.TEXTURE_CUBE_MAP,et.__webglTexture,C.TEXTURE0+Vt);const Rn=g.get(wn);if(wn.version!==Rn.__version||Gn===!0){c.activeTexture(C.TEXTURE0+Vt),C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,Re.flipY),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),C.pixelStorei(C.UNPACK_ALIGNMENT,Re.unpackAlignment),C.pixelStorei(C.UNPACK_COLORSPACE_CONVERSION_WEBGL,C.NONE);const qn=Re.isCompressedTexture||Re.image[0].isCompressedTexture,hn=Re.image[0]&&Re.image[0].isDataTexture,Kt=[];for(let Zt=0;Zt<6;Zt++)!qn&&!hn?Kt[Zt]=ue(Re.image[Zt],!1,!0,j):Kt[Zt]=hn?Re.image[Zt].image:Re.image[Zt],Kt[Zt]=Fo(Re,Kt[Zt]);const Ur=Kt[0],Pr=Ce(Ur)||R,Nr=M.convert(Re.format,Re.colorSpace),Fr=M.convert(Re.type),Br=ht(Re.internalFormat,Nr,Fr,Re.colorSpace),Pi=R&&Re.isVideoTexture!==!0,Jo=Rn.__version===void 0||Gn===!0;let yt=Te(Re,Ur,Pr);Jr(C.TEXTURE_CUBE_MAP,Re,Pr);let or;if(qn){Pi&&Jo&&c.texStorage2D(C.TEXTURE_CUBE_MAP,yt,Br,Ur.width,Ur.height);for(let Zt=0;Zt<6;Zt++){or=Kt[Zt].mipmaps;for(let Zn=0;Zn<or.length;Zn++){const mr=or[Zn];Re.format!==cs?Nr!==null?Pi?c.compressedTexSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn,0,0,mr.width,mr.height,Nr,mr.data):c.compressedTexImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn,Br,mr.width,mr.height,0,mr.data):S.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pi?c.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn,0,0,mr.width,mr.height,Nr,Fr,mr.data):c.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn,Br,mr.width,mr.height,0,Nr,Fr,mr.data)}}}else{or=Re.mipmaps,Pi&&Jo&&(or.length>0&&yt++,c.texStorage2D(C.TEXTURE_CUBE_MAP,yt,Br,Kt[0].width,Kt[0].height));for(let Zt=0;Zt<6;Zt++)if(hn){Pi?c.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,0,0,0,Kt[Zt].width,Kt[Zt].height,Nr,Fr,Kt[Zt].data):c.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,0,Br,Kt[Zt].width,Kt[Zt].height,0,Nr,Fr,Kt[Zt].data);for(let Zn=0;Zn<or.length;Zn++){const $n=or[Zn].image[Zt].image;Pi?c.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn+1,0,0,$n.width,$n.height,Nr,Fr,$n.data):c.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn+1,Br,$n.width,$n.height,0,Nr,Fr,$n.data)}}else{Pi?c.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,0,0,0,Nr,Fr,Kt[Zt]):c.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,0,Br,Nr,Fr,Kt[Zt]);for(let Zn=0;Zn<or.length;Zn++){const mr=or[Zn];Pi?c.texSubImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn+1,0,0,Nr,Fr,mr.image[Zt]):c.texImage2D(C.TEXTURE_CUBE_MAP_POSITIVE_X+Zt,Zn+1,Br,Nr,Fr,mr.image[Zt])}}}We(Re,Pr)&&Ze(C.TEXTURE_CUBE_MAP),Rn.__version=wn.version,Re.onUpdate&&Re.onUpdate(Re)}et.__version=Re.version}function ai(et,Re,Vt,Gn,wn,Rn){const qn=M.convert(Vt.format,Vt.colorSpace),hn=M.convert(Vt.type),Kt=ht(Vt.internalFormat,qn,hn,Vt.colorSpace);if(!g.get(Re).__hasExternalTextures){const Pr=Math.max(1,Re.width>>Rn),Nr=Math.max(1,Re.height>>Rn);wn===C.TEXTURE_3D||wn===C.TEXTURE_2D_ARRAY?c.texImage3D(wn,Rn,Kt,Pr,Nr,Re.depth,0,qn,hn,null):c.texImage2D(wn,Rn,Kt,Pr,Nr,0,qn,hn,null)}c.bindFramebuffer(C.FRAMEBUFFER,et),It(Re)?Z.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,Gn,wn,g.get(Vt).__webglTexture,0,An(Re)):(wn===C.TEXTURE_2D||wn>=C.TEXTURE_CUBE_MAP_POSITIVE_X&&wn<=C.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&C.framebufferTexture2D(C.FRAMEBUFFER,Gn,wn,g.get(Vt).__webglTexture,Rn),c.bindFramebuffer(C.FRAMEBUFFER,null)}function st(et,Re,Vt){if(C.bindRenderbuffer(C.RENDERBUFFER,et),Re.depthBuffer&&!Re.stencilBuffer){let Gn=C.DEPTH_COMPONENT16;if(Vt||It(Re)){const wn=Re.depthTexture;wn&&wn.isDepthTexture&&(wn.type===_s?Gn=C.DEPTH_COMPONENT32F:wn.type===co&&(Gn=C.DEPTH_COMPONENT24));const Rn=An(Re);It(Re)?Z.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,Rn,Gn,Re.width,Re.height):C.renderbufferStorageMultisample(C.RENDERBUFFER,Rn,Gn,Re.width,Re.height)}else C.renderbufferStorage(C.RENDERBUFFER,Gn,Re.width,Re.height);C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,et)}else if(Re.depthBuffer&&Re.stencilBuffer){const Gn=An(Re);Vt&&It(Re)===!1?C.renderbufferStorageMultisample(C.RENDERBUFFER,Gn,C.DEPTH24_STENCIL8,Re.width,Re.height):It(Re)?Z.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,Gn,C.DEPTH24_STENCIL8,Re.width,Re.height):C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_STENCIL,Re.width,Re.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.RENDERBUFFER,et)}else{const Gn=Re.isWebGLMultipleRenderTargets===!0?Re.texture:[Re.texture];for(let wn=0;wn<Gn.length;wn++){const Rn=Gn[wn],qn=M.convert(Rn.format,Rn.colorSpace),hn=M.convert(Rn.type),Kt=ht(Rn.internalFormat,qn,hn,Rn.colorSpace),Ur=An(Re);Vt&&It(Re)===!1?C.renderbufferStorageMultisample(C.RENDERBUFFER,Ur,Kt,Re.width,Re.height):It(Re)?Z.renderbufferStorageMultisampleEXT(C.RENDERBUFFER,Ur,Kt,Re.width,Re.height):C.renderbufferStorage(C.RENDERBUFFER,Kt,Re.width,Re.height)}}C.bindRenderbuffer(C.RENDERBUFFER,null)}function Jn(et,Re){if(Re&&Re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(c.bindFramebuffer(C.FRAMEBUFFER,et),!(Re.depthTexture&&Re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!g.get(Re.depthTexture).__webglTexture||Re.depthTexture.image.width!==Re.width||Re.depthTexture.image.height!==Re.height)&&(Re.depthTexture.image.width=Re.width,Re.depthTexture.image.height=Re.height,Re.depthTexture.needsUpdate=!0),Sn(Re.depthTexture,0);const Gn=g.get(Re.depthTexture).__webglTexture,wn=An(Re);if(Re.depthTexture.format===rt)It(Re)?Z.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,Gn,0,wn):C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,Gn,0);else if(Re.depthTexture.format===xt)It(Re)?Z.framebufferTexture2DMultisampleEXT(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,Gn,0,wn):C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,Gn,0);else throw new Error("Unknown depthTexture format")}function Lt(et){const Re=g.get(et),Vt=et.isWebGLCubeRenderTarget===!0;if(et.depthTexture&&!Re.__autoAllocateDepthBuffer){if(Vt)throw new Error("target.depthTexture not supported in Cube render targets");Jn(Re.__webglFramebuffer,et)}else if(Vt){Re.__webglDepthbuffer=[];for(let Gn=0;Gn<6;Gn++)c.bindFramebuffer(C.FRAMEBUFFER,Re.__webglFramebuffer[Gn]),Re.__webglDepthbuffer[Gn]=C.createRenderbuffer(),st(Re.__webglDepthbuffer[Gn],et,!1)}else c.bindFramebuffer(C.FRAMEBUFFER,Re.__webglFramebuffer),Re.__webglDepthbuffer=C.createRenderbuffer(),st(Re.__webglDepthbuffer,et,!1);c.bindFramebuffer(C.FRAMEBUFFER,null)}function Wn(et,Re,Vt){const Gn=g.get(et);Re!==void 0&&ai(Gn.__webglFramebuffer,et,et.texture,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,0),Vt!==void 0&&Lt(et)}function bn(et){const Re=et.texture,Vt=g.get(et),Gn=g.get(Re);et.addEventListener("dispose",vn),et.isWebGLMultipleRenderTargets!==!0&&(Gn.__webglTexture===void 0&&(Gn.__webglTexture=C.createTexture()),Gn.__version=Re.version,I.memory.textures++);const wn=et.isWebGLCubeRenderTarget===!0,Rn=et.isWebGLMultipleRenderTargets===!0,qn=Ce(et)||R;if(wn){Vt.__webglFramebuffer=[];for(let hn=0;hn<6;hn++)if(R&&Re.mipmaps&&Re.mipmaps.length>0){Vt.__webglFramebuffer[hn]=[];for(let Kt=0;Kt<Re.mipmaps.length;Kt++)Vt.__webglFramebuffer[hn][Kt]=C.createFramebuffer()}else Vt.__webglFramebuffer[hn]=C.createFramebuffer()}else{if(R&&Re.mipmaps&&Re.mipmaps.length>0){Vt.__webglFramebuffer=[];for(let hn=0;hn<Re.mipmaps.length;hn++)Vt.__webglFramebuffer[hn]=C.createFramebuffer()}else Vt.__webglFramebuffer=C.createFramebuffer();if(Rn)if(v.drawBuffers){const hn=et.texture;for(let Kt=0,Ur=hn.length;Kt<Ur;Kt++){const Pr=g.get(hn[Kt]);Pr.__webglTexture===void 0&&(Pr.__webglTexture=C.createTexture(),I.memory.textures++)}}else S.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(R&&et.samples>0&&It(et)===!1){const hn=Rn?Re:[Re];Vt.__webglMultisampledFramebuffer=C.createFramebuffer(),Vt.__webglColorRenderbuffer=[],c.bindFramebuffer(C.FRAMEBUFFER,Vt.__webglMultisampledFramebuffer);for(let Kt=0;Kt<hn.length;Kt++){const Ur=hn[Kt];Vt.__webglColorRenderbuffer[Kt]=C.createRenderbuffer(),C.bindRenderbuffer(C.RENDERBUFFER,Vt.__webglColorRenderbuffer[Kt]);const Pr=M.convert(Ur.format,Ur.colorSpace),Nr=M.convert(Ur.type),Fr=ht(Ur.internalFormat,Pr,Nr,Ur.colorSpace,et.isXRRenderTarget===!0),Br=An(et);C.renderbufferStorageMultisample(C.RENDERBUFFER,Br,Fr,et.width,et.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+Kt,C.RENDERBUFFER,Vt.__webglColorRenderbuffer[Kt])}C.bindRenderbuffer(C.RENDERBUFFER,null),et.depthBuffer&&(Vt.__webglDepthRenderbuffer=C.createRenderbuffer(),st(Vt.__webglDepthRenderbuffer,et,!0)),c.bindFramebuffer(C.FRAMEBUFFER,null)}}if(wn){c.bindTexture(C.TEXTURE_CUBE_MAP,Gn.__webglTexture),Jr(C.TEXTURE_CUBE_MAP,Re,qn);for(let hn=0;hn<6;hn++)if(R&&Re.mipmaps&&Re.mipmaps.length>0)for(let Kt=0;Kt<Re.mipmaps.length;Kt++)ai(Vt.__webglFramebuffer[hn][Kt],et,Re,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+hn,Kt);else ai(Vt.__webglFramebuffer[hn],et,Re,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+hn,0);We(Re,qn)&&Ze(C.TEXTURE_CUBE_MAP),c.unbindTexture()}else if(Rn){const hn=et.texture;for(let Kt=0,Ur=hn.length;Kt<Ur;Kt++){const Pr=hn[Kt],Nr=g.get(Pr);c.bindTexture(C.TEXTURE_2D,Nr.__webglTexture),Jr(C.TEXTURE_2D,Pr,qn),ai(Vt.__webglFramebuffer,et,Pr,C.COLOR_ATTACHMENT0+Kt,C.TEXTURE_2D,0),We(Pr,qn)&&Ze(C.TEXTURE_2D)}c.unbindTexture()}else{let hn=C.TEXTURE_2D;if((et.isWebGL3DRenderTarget||et.isWebGLArrayRenderTarget)&&(R?hn=et.isWebGL3DRenderTarget?C.TEXTURE_3D:C.TEXTURE_2D_ARRAY:S.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),c.bindTexture(hn,Gn.__webglTexture),Jr(hn,Re,qn),R&&Re.mipmaps&&Re.mipmaps.length>0)for(let Kt=0;Kt<Re.mipmaps.length;Kt++)ai(Vt.__webglFramebuffer[Kt],et,Re,C.COLOR_ATTACHMENT0,hn,Kt);else ai(Vt.__webglFramebuffer,et,Re,C.COLOR_ATTACHMENT0,hn,0);We(Re,qn)&&Ze(hn),c.unbindTexture()}et.depthBuffer&&Lt(et)}function Vr(et){const Re=Ce(et)||R,Vt=et.isWebGLMultipleRenderTargets===!0?et.texture:[et.texture];for(let Gn=0,wn=Vt.length;Gn<wn;Gn++){const Rn=Vt[Gn];if(We(Rn,Re)){const qn=et.isWebGLCubeRenderTarget?C.TEXTURE_CUBE_MAP:C.TEXTURE_2D,hn=g.get(Rn).__webglTexture;c.bindTexture(qn,hn),Ze(qn),c.unbindTexture()}}}function hr(et){if(R&&et.samples>0&&It(et)===!1){const Re=et.isWebGLMultipleRenderTargets?et.texture:[et.texture],Vt=et.width,Gn=et.height;let wn=C.COLOR_BUFFER_BIT;const Rn=[],qn=et.stencilBuffer?C.DEPTH_STENCIL_ATTACHMENT:C.DEPTH_ATTACHMENT,hn=g.get(et),Kt=et.isWebGLMultipleRenderTargets===!0;if(Kt)for(let Ur=0;Ur<Re.length;Ur++)c.bindFramebuffer(C.FRAMEBUFFER,hn.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+Ur,C.RENDERBUFFER,null),c.bindFramebuffer(C.FRAMEBUFFER,hn.__webglFramebuffer),C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0+Ur,C.TEXTURE_2D,null,0);c.bindFramebuffer(C.READ_FRAMEBUFFER,hn.__webglMultisampledFramebuffer),c.bindFramebuffer(C.DRAW_FRAMEBUFFER,hn.__webglFramebuffer);for(let Ur=0;Ur<Re.length;Ur++){Rn.push(C.COLOR_ATTACHMENT0+Ur),et.depthBuffer&&Rn.push(qn);const Pr=hn.__ignoreDepthValues!==void 0?hn.__ignoreDepthValues:!1;if(Pr===!1&&(et.depthBuffer&&(wn|=C.DEPTH_BUFFER_BIT),et.stencilBuffer&&(wn|=C.STENCIL_BUFFER_BIT)),Kt&&C.framebufferRenderbuffer(C.READ_FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,hn.__webglColorRenderbuffer[Ur]),Pr===!0&&(C.invalidateFramebuffer(C.READ_FRAMEBUFFER,[qn]),C.invalidateFramebuffer(C.DRAW_FRAMEBUFFER,[qn])),Kt){const Nr=g.get(Re[Ur]).__webglTexture;C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,Nr,0)}C.blitFramebuffer(0,0,Vt,Gn,0,0,Vt,Gn,wn,C.NEAREST),ne&&C.invalidateFramebuffer(C.READ_FRAMEBUFFER,Rn)}if(c.bindFramebuffer(C.READ_FRAMEBUFFER,null),c.bindFramebuffer(C.DRAW_FRAMEBUFFER,null),Kt)for(let Ur=0;Ur<Re.length;Ur++){c.bindFramebuffer(C.FRAMEBUFFER,hn.__webglMultisampledFramebuffer),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+Ur,C.RENDERBUFFER,hn.__webglColorRenderbuffer[Ur]);const Pr=g.get(Re[Ur]).__webglTexture;c.bindFramebuffer(C.FRAMEBUFFER,hn.__webglFramebuffer),C.framebufferTexture2D(C.DRAW_FRAMEBUFFER,C.COLOR_ATTACHMENT0+Ur,C.TEXTURE_2D,Pr,0)}c.bindFramebuffer(C.DRAW_FRAMEBUFFER,hn.__webglMultisampledFramebuffer)}}function An(et){return Math.min(q,et.samples)}function It(et){const Re=g.get(et);return R&&et.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Re.__useRenderToTexture!==!1}function Ii(et){const Re=I.render.frame;se.get(et)!==Re&&(se.set(et,Re),et.update())}function Fo(et,Re){const Vt=et.colorSpace,Gn=et.format,wn=et.type;return et.isCompressedTexture===!0||et.isVideoTexture===!0||et.format===Lp||Vt!==ho&&Vt!==Dp&&(Vt===To||Vt===_u?R===!1?e.has("EXT_sRGB")===!0&&Gn===cs?(et.format=Lp,et.minFilter=$i,et.generateMipmaps=!1):Re=Up.sRGBToLinear(Re):(Gn!==cs||wn!==Do)&&S.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):S.error("THREE.WebGLTextures: Unsupported texture color space:",Vt)),Re}this.allocateTextureUnit=gn,this.resetTextureUnits=ln,this.setTexture2D=Sn,this.setTexture2DArray=Ut,this.setTexture3D=dn,this.setTextureCube=Pn,this.rebindTextures=Wn,this.setupRenderTarget=bn,this.updateRenderTargetMipmap=Vr,this.updateMultisampleRenderTarget=hr,this.setupDepthRenderbuffer=Lt,this.setupFrameBufferTexture=ai,this.useMultisampledRTT=It}const qA=0,xa=1;function ZA(C,e,c){const g=c.isWebGL2;function v(M,I=Dp){let R;const z=I===To||I===_u?xa:qA;if(M===Do)return C.UNSIGNED_BYTE;if(M===qa)return C.UNSIGNED_SHORT_4_4_4_4;if(M===Ol)return C.UNSIGNED_SHORT_5_5_5_1;if(M===_l)return C.BYTE;if(M===ea)return C.SHORT;if(M===ta)return C.UNSIGNED_SHORT;if(M===Ho)return C.INT;if(M===co)return C.UNSIGNED_INT;if(M===_s)return C.FLOAT;if(M===Co)return g?C.HALF_FLOAT:(R=e.get("OES_texture_half_float"),R!==null?R.HALF_FLOAT_OES:null);if(M===El)return C.ALPHA;if(M===cs)return C.RGBA;if(M===qc)return C.LUMINANCE;if(M===Zc)return C.LUMINANCE_ALPHA;if(M===rt)return C.DEPTH_COMPONENT;if(M===xt)return C.DEPTH_STENCIL;if(M===Lp)return R=e.get("EXT_sRGB"),R!==null?R.SRGB_ALPHA_EXT:null;if(M===sn)return C.RED;if(M===zn)return C.RED_INTEGER;if(M===In)return C.RG;if(M===ur)return C.RG_INTEGER;if(M===Ue)return C.RGBA_INTEGER;if(M===ze||M===Ie||M===it||M===Le)if(z===xa)if(R=e.get("WEBGL_compressed_texture_s3tc_srgb"),R!==null){if(M===ze)return R.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(M===Ie)return R.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(M===it)return R.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(M===Le)return R.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(R=e.get("WEBGL_compressed_texture_s3tc"),R!==null){if(M===ze)return R.COMPRESSED_RGB_S3TC_DXT1_EXT;if(M===Ie)return R.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(M===it)return R.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(M===Le)return R.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(M===tt||M===dt||M===_t||M===Me)if(R=e.get("WEBGL_compressed_texture_pvrtc"),R!==null){if(M===tt)return R.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(M===dt)return R.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(M===_t)return R.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(M===Me)return R.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(M===qe)return R=e.get("WEBGL_compressed_texture_etc1"),R!==null?R.COMPRESSED_RGB_ETC1_WEBGL:null;if(M===at||M===lt)if(R=e.get("WEBGL_compressed_texture_etc"),R!==null){if(M===at)return z===xa?R.COMPRESSED_SRGB8_ETC2:R.COMPRESSED_RGB8_ETC2;if(M===lt)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:R.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(M===Rt||M===Xt||M===On||M===Yn||M===vr||M===Gr||M===Yr||M===oi||M===Kr||M===Cn||M===Mr||M===eo||M===Po||M===es)if(R=e.get("WEBGL_compressed_texture_astc"),R!==null){if(M===Rt)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:R.COMPRESSED_RGBA_ASTC_4x4_KHR;if(M===Xt)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:R.COMPRESSED_RGBA_ASTC_5x4_KHR;if(M===On)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:R.COMPRESSED_RGBA_ASTC_5x5_KHR;if(M===Yn)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:R.COMPRESSED_RGBA_ASTC_6x5_KHR;if(M===vr)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:R.COMPRESSED_RGBA_ASTC_6x6_KHR;if(M===Gr)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:R.COMPRESSED_RGBA_ASTC_8x5_KHR;if(M===Yr)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:R.COMPRESSED_RGBA_ASTC_8x6_KHR;if(M===oi)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:R.COMPRESSED_RGBA_ASTC_8x8_KHR;if(M===Kr)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:R.COMPRESSED_RGBA_ASTC_10x5_KHR;if(M===Cn)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:R.COMPRESSED_RGBA_ASTC_10x6_KHR;if(M===Mr)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:R.COMPRESSED_RGBA_ASTC_10x8_KHR;if(M===eo)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:R.COMPRESSED_RGBA_ASTC_10x10_KHR;if(M===Po)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:R.COMPRESSED_RGBA_ASTC_12x10_KHR;if(M===es)return z===xa?R.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:R.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(M===wa||M===ha||M===Di)if(R=e.get("EXT_texture_compression_bptc"),R!==null){if(M===wa)return z===xa?R.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:R.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(M===ha)return R.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(M===Di)return R.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(M===Ac||M===vc||M===ci||M===io)if(R=e.get("EXT_texture_compression_rgtc"),R!==null){if(M===wa)return R.COMPRESSED_RED_RGTC1_EXT;if(M===vc)return R.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(M===ci)return R.COMPRESSED_RED_GREEN_RGTC2_EXT;if(M===io)return R.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return M===Sa?g?C.UNSIGNED_INT_24_8:(R=e.get("WEBGL_depth_texture"),R!==null?R.UNSIGNED_INT_24_8_WEBGL:null):C[M]!==void 0?C[M]:null}return{convert:v}}class K1 extends Yo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Bh extends $r{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $A={type:"move"};class Nc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Qe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Qe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Qe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Qe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const c=this._hand;if(c)for(const g of e.hand.values())this._getHandJoint(c,g)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,c,g){let v=null,M=null,I=null;const R=this._targetRay,z=this._grip,j=this._hand;if(e&&c.session.visibilityState!=="visible-blurred"){if(j&&e.hand){I=!0;for(const fe of e.hand.values()){const $=c.getJointPose(fe,g),ee=this._getHandJoint(j,fe);$!==null&&(ee.matrix.fromArray($.transform.matrix),ee.matrix.decompose(ee.position,ee.rotation,ee.scale),ee.matrixWorldNeedsUpdate=!0,ee.jointRadius=$.radius),ee.visible=$!==null}const W=j.joints["index-finger-tip"],q=j.joints["thumb-tip"],Z=W.position.distanceTo(q.position),ne=.02,se=.005;j.inputState.pinching&&Z>ne+se?(j.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!j.inputState.pinching&&Z<=ne-se&&(j.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else z!==null&&e.gripSpace&&(M=c.getPose(e.gripSpace,g),M!==null&&(z.matrix.fromArray(M.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale),z.matrixWorldNeedsUpdate=!0,M.linearVelocity?(z.hasLinearVelocity=!0,z.linearVelocity.copy(M.linearVelocity)):z.hasLinearVelocity=!1,M.angularVelocity?(z.hasAngularVelocity=!0,z.angularVelocity.copy(M.angularVelocity)):z.hasAngularVelocity=!1));R!==null&&(v=c.getPose(e.targetRaySpace,g),v===null&&M!==null&&(v=M),v!==null&&(R.matrix.fromArray(v.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,v.linearVelocity?(R.hasLinearVelocity=!0,R.linearVelocity.copy(v.linearVelocity)):R.hasLinearVelocity=!1,v.angularVelocity?(R.hasAngularVelocity=!0,R.angularVelocity.copy(v.angularVelocity)):R.hasAngularVelocity=!1,this.dispatchEvent($A)))}return R!==null&&(R.visible=v!==null),z!==null&&(z.visible=M!==null),j!==null&&(j.visible=I!==null),this}_getHandJoint(e,c){if(e.joints[c.jointName]===void 0){const g=new Bh;g.matrixAutoUpdate=!1,g.visible=!1,e.joints[c.jointName]=g,e.add(g)}return e.joints[c.jointName]}}class ev extends Bo{constructor(e,c,g,v,M,I,R,z,j,W){if(W=W!==void 0?W:rt,W!==rt&&W!==xt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");g===void 0&&W===rt&&(g=co),g===void 0&&W===xt&&(g=Sa),super(null,v,M,I,R,z,W,g,j),this.isDepthTexture=!0,this.image={width:e,height:c},this.magFilter=R!==void 0?R:_r,this.minFilter=z!==void 0?z:_r,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const c=super.toJSON(e);return this.compareFunction!==null&&(c.compareFunction=this.compareFunction),c}}class G3 extends Dl{constructor(e,c){super();const g=this;let v=null,M=1,I=null,R="local-floor",z=1,j=null,W=null,q=null,Z=null,ne=null,se=null;const fe=c.getContextAttributes();let $=null,ee=null;const ve=[],ue=[],Ce=new Yo;Ce.layers.enable(1),Ce.viewport=new Qr;const Oe=new Yo;Oe.layers.enable(2),Oe.viewport=new Qr;const We=[Ce,Oe],Ze=new K1;Ze.layers.enable(1),Ze.layers.enable(2);let ht=null,Te=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ut){let dn=ve[Ut];return dn===void 0&&(dn=new Nc,ve[Ut]=dn),dn.getTargetRaySpace()},this.getControllerGrip=function(Ut){let dn=ve[Ut];return dn===void 0&&(dn=new Nc,ve[Ut]=dn),dn.getGripSpace()},this.getHand=function(Ut){let dn=ve[Ut];return dn===void 0&&(dn=new Nc,ve[Ut]=dn),dn.getHandSpace()};function Ve(Ut){const dn=ue.indexOf(Ut.inputSource);if(dn===-1)return;const Pn=ve[dn];Pn!==void 0&&(Pn.update(Ut.inputSource,Ut.frame,j||I),Pn.dispatchEvent({type:Ut.type,data:Ut.inputSource}))}function qt(){v.removeEventListener("select",Ve),v.removeEventListener("selectstart",Ve),v.removeEventListener("selectend",Ve),v.removeEventListener("squeeze",Ve),v.removeEventListener("squeezestart",Ve),v.removeEventListener("squeezeend",Ve),v.removeEventListener("end",qt),v.removeEventListener("inputsourceschange",vn);for(let Ut=0;Ut<ve.length;Ut++){const dn=ue[Ut];dn!==null&&(ue[Ut]=null,ve[Ut].disconnect(dn))}ht=null,Te=null,e.setRenderTarget($),ne=null,Z=null,q=null,v=null,ee=null,Sn.stop(),g.isPresenting=!1,g.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ut){M=Ut,g.isPresenting===!0&&S.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ut){R=Ut,g.isPresenting===!0&&S.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return j||I},this.setReferenceSpace=function(Ut){j=Ut},this.getBaseLayer=function(){return Z!==null?Z:ne},this.getBinding=function(){return q},this.getFrame=function(){return se},this.getSession=function(){return v},this.setSession=function(Ut){return rs(this,null,function*(){if(v=Ut,v!==null){if($=e.getRenderTarget(),v.addEventListener("select",Ve),v.addEventListener("selectstart",Ve),v.addEventListener("selectend",Ve),v.addEventListener("squeeze",Ve),v.addEventListener("squeezestart",Ve),v.addEventListener("squeezeend",Ve),v.addEventListener("end",qt),v.addEventListener("inputsourceschange",vn),fe.xrCompatible!==!0&&(yield c.makeXRCompatible()),v.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const dn={antialias:v.renderState.layers===void 0?fe.antialias:!0,alpha:!0,depth:fe.depth,stencil:fe.stencil,framebufferScaleFactor:M};ne=new XRWebGLLayer(v,c,dn),v.updateRenderState({baseLayer:ne}),ee=new dr(ne.framebufferWidth,ne.framebufferHeight,{format:cs,type:Do,colorSpace:e.outputColorSpace,stencilBuffer:fe.stencil})}else{let dn=null,Pn=null,cr=null;fe.depth&&(cr=fe.stencil?c.DEPTH24_STENCIL8:c.DEPTH_COMPONENT24,dn=fe.stencil?xt:rt,Pn=fe.stencil?Sa:co);const Er={colorFormat:c.RGBA8,depthFormat:cr,scaleFactor:M};q=new XRWebGLBinding(v,c),Z=q.createProjectionLayer(Er),v.updateRenderState({layers:[Z]}),ee=new dr(Z.textureWidth,Z.textureHeight,{format:cs,type:Do,depthTexture:new ev(Z.textureWidth,Z.textureHeight,Pn,void 0,void 0,void 0,void 0,void 0,void 0,dn),stencilBuffer:fe.stencil,colorSpace:e.outputColorSpace,samples:fe.antialias?4:0});const ei=e.properties.get(ee);ei.__ignoreDepthValues=Z.ignoreDepthValues}ee.isXRRenderTarget=!0,this.setFoveation(z),j=null,I=yield v.requestReferenceSpace(R),Sn.setContext(v),Sn.start(),g.isPresenting=!0,g.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(v!==null)return v.environmentBlendMode};function vn(Ut){for(let dn=0;dn<Ut.removed.length;dn++){const Pn=Ut.removed[dn],cr=ue.indexOf(Pn);cr>=0&&(ue[cr]=null,ve[cr].disconnect(Pn))}for(let dn=0;dn<Ut.added.length;dn++){const Pn=Ut.added[dn];let cr=ue.indexOf(Pn);if(cr===-1){for(let ei=0;ei<ve.length;ei++)if(ei>=ue.length){ue.push(Pn),cr=ei;break}else if(ue[ei]===null){ue[ei]=Pn,cr=ei;break}if(cr===-1)break}const Er=ve[cr];Er&&Er.connect(Pn)}}const jt=new Qe,Wt=new Qe;function $e(Ut,dn,Pn){jt.setFromMatrixPosition(dn.matrixWorld),Wt.setFromMatrixPosition(Pn.matrixWorld);const cr=jt.distanceTo(Wt),Er=dn.projectionMatrix.elements,ei=Pn.projectionMatrix.elements,Jr=Er[14]/(Er[10]-1),qr=Er[14]/(Er[10]+1),oo=(Er[9]+1)/Er[5],gs=(Er[9]-1)/Er[5],ai=(Er[8]-1)/Er[0],st=(ei[8]+1)/ei[0],Jn=Jr*ai,Lt=Jr*st,Wn=cr/(-ai+st),bn=Wn*-ai;dn.matrixWorld.decompose(Ut.position,Ut.quaternion,Ut.scale),Ut.translateX(bn),Ut.translateZ(Wn),Ut.matrixWorld.compose(Ut.position,Ut.quaternion,Ut.scale),Ut.matrixWorldInverse.copy(Ut.matrixWorld).invert();const Vr=Jr+Wn,hr=qr+Wn,An=Jn-bn,It=Lt+(cr-bn),Ii=oo*qr/hr*Vr,Fo=gs*qr/hr*Vr;Ut.projectionMatrix.makePerspective(An,It,Ii,Fo,Vr,hr),Ut.projectionMatrixInverse.copy(Ut.projectionMatrix).invert()}function En(Ut,dn){dn===null?Ut.matrixWorld.copy(Ut.matrix):Ut.matrixWorld.multiplyMatrices(dn.matrixWorld,Ut.matrix),Ut.matrixWorldInverse.copy(Ut.matrixWorld).invert()}this.updateCamera=function(Ut){if(v===null)return;Ze.near=Oe.near=Ce.near=Ut.near,Ze.far=Oe.far=Ce.far=Ut.far,(ht!==Ze.near||Te!==Ze.far)&&(v.updateRenderState({depthNear:Ze.near,depthFar:Ze.far}),ht=Ze.near,Te=Ze.far);const dn=Ut.parent,Pn=Ze.cameras;En(Ze,dn);for(let cr=0;cr<Pn.length;cr++)En(Pn[cr],dn);Pn.length===2?$e(Ze,Ce,Oe):Ze.projectionMatrix.copy(Ce.projectionMatrix),ln(Ut,Ze,dn)};function ln(Ut,dn,Pn){Pn===null?Ut.matrix.copy(dn.matrixWorld):(Ut.matrix.copy(Pn.matrixWorld),Ut.matrix.invert(),Ut.matrix.multiply(dn.matrixWorld)),Ut.matrix.decompose(Ut.position,Ut.quaternion,Ut.scale),Ut.updateMatrixWorld(!0),Ut.projectionMatrix.copy(dn.projectionMatrix),Ut.projectionMatrixInverse.copy(dn.projectionMatrixInverse),Ut.isPerspectiveCamera&&(Ut.fov=Pl*2*Math.atan(1/Ut.projectionMatrix.elements[5]),Ut.zoom=1)}this.getCamera=function(){return Ze},this.getFoveation=function(){if(!(Z===null&&ne===null))return z},this.setFoveation=function(Ut){z=Ut,Z!==null&&(Z.fixedFoveation=Ut),ne!==null&&ne.fixedFoveation!==void 0&&(ne.fixedFoveation=Ut)};let gn=null;function xn(Ut,dn){if(W=dn.getViewerPose(j||I),se=dn,W!==null){const Pn=W.views;ne!==null&&(e.setRenderTargetFramebuffer(ee,ne.framebuffer),e.setRenderTarget(ee));let cr=!1;Pn.length!==Ze.cameras.length&&(Ze.cameras.length=0,cr=!0);for(let Er=0;Er<Pn.length;Er++){const ei=Pn[Er];let Jr=null;if(ne!==null)Jr=ne.getViewport(ei);else{const oo=q.getViewSubImage(Z,ei);Jr=oo.viewport,Er===0&&(e.setRenderTargetTextures(ee,oo.colorTexture,Z.ignoreDepthValues?void 0:oo.depthStencilTexture),e.setRenderTarget(ee))}let qr=We[Er];qr===void 0&&(qr=new Yo,qr.layers.enable(Er),qr.viewport=new Qr,We[Er]=qr),qr.matrix.fromArray(ei.transform.matrix),qr.matrix.decompose(qr.position,qr.quaternion,qr.scale),qr.projectionMatrix.fromArray(ei.projectionMatrix),qr.projectionMatrixInverse.copy(qr.projectionMatrix).invert(),qr.viewport.set(Jr.x,Jr.y,Jr.width,Jr.height),Er===0&&(Ze.matrix.copy(qr.matrix),Ze.matrix.decompose(Ze.position,Ze.quaternion,Ze.scale)),cr===!0&&Ze.cameras.push(qr)}}for(let Pn=0;Pn<ve.length;Pn++){const cr=ue[Pn],Er=ve[Pn];cr!==null&&Er!==void 0&&Er.update(cr,dn,j||I)}gn&&gn(Ut,dn),dn.detectedPlanes&&g.dispatchEvent({type:"planesdetected",data:dn}),se=null}const Sn=new gp;Sn.setAnimationLoop(xn),this.setAnimationLoop=function(Ut){gn=Ut},this.dispose=function(){}}}function U3(C,e){function c($,ee){$.matrixAutoUpdate===!0&&$.updateMatrix(),ee.value.copy($.matrix)}function g($,ee){ee.color.getRGB($.fogColor.value,hs(C)),ee.isFog?($.fogNear.value=ee.near,$.fogFar.value=ee.far):ee.isFogExp2&&($.fogDensity.value=ee.density)}function v($,ee,ve,ue,Ce){ee.isMeshBasicMaterial||ee.isMeshLambertMaterial?M($,ee):ee.isMeshToonMaterial?(M($,ee),q($,ee)):ee.isMeshPhongMaterial?(M($,ee),W($,ee)):ee.isMeshStandardMaterial?(M($,ee),Z($,ee),ee.isMeshPhysicalMaterial&&ne($,ee,Ce)):ee.isMeshMatcapMaterial?(M($,ee),se($,ee)):ee.isMeshDepthMaterial?M($,ee):ee.isMeshDistanceMaterial?(M($,ee),fe($,ee)):ee.isMeshNormalMaterial?M($,ee):ee.isLineBasicMaterial?(I($,ee),ee.isLineDashedMaterial&&R($,ee)):ee.isPointsMaterial?z($,ee,ve,ue):ee.isSpriteMaterial?j($,ee):ee.isShadowMaterial?($.color.value.copy(ee.color),$.opacity.value=ee.opacity):ee.isShaderMaterial&&(ee.uniformsNeedUpdate=!1)}function M($,ee){$.opacity.value=ee.opacity,ee.color&&$.diffuse.value.copy(ee.color),ee.emissive&&$.emissive.value.copy(ee.emissive).multiplyScalar(ee.emissiveIntensity),ee.map&&($.map.value=ee.map,c(ee.map,$.mapTransform)),ee.alphaMap&&($.alphaMap.value=ee.alphaMap,c(ee.alphaMap,$.alphaMapTransform)),ee.bumpMap&&($.bumpMap.value=ee.bumpMap,c(ee.bumpMap,$.bumpMapTransform),$.bumpScale.value=ee.bumpScale,ee.side===He&&($.bumpScale.value*=-1)),ee.normalMap&&($.normalMap.value=ee.normalMap,c(ee.normalMap,$.normalMapTransform),$.normalScale.value.copy(ee.normalScale),ee.side===He&&$.normalScale.value.negate()),ee.displacementMap&&($.displacementMap.value=ee.displacementMap,c(ee.displacementMap,$.displacementMapTransform),$.displacementScale.value=ee.displacementScale,$.displacementBias.value=ee.displacementBias),ee.emissiveMap&&($.emissiveMap.value=ee.emissiveMap,c(ee.emissiveMap,$.emissiveMapTransform)),ee.specularMap&&($.specularMap.value=ee.specularMap,c(ee.specularMap,$.specularMapTransform)),ee.alphaTest>0&&($.alphaTest.value=ee.alphaTest);const ve=e.get(ee).envMap;if(ve&&($.envMap.value=ve,$.flipEnvMap.value=ve.isCubeTexture&&ve.isRenderTargetTexture===!1?-1:1,$.reflectivity.value=ee.reflectivity,$.ior.value=ee.ior,$.refractionRatio.value=ee.refractionRatio),ee.lightMap){$.lightMap.value=ee.lightMap;const ue=C._useLegacyLights===!0?Math.PI:1;$.lightMapIntensity.value=ee.lightMapIntensity*ue,c(ee.lightMap,$.lightMapTransform)}ee.aoMap&&($.aoMap.value=ee.aoMap,$.aoMapIntensity.value=ee.aoMapIntensity,c(ee.aoMap,$.aoMapTransform))}function I($,ee){$.diffuse.value.copy(ee.color),$.opacity.value=ee.opacity,ee.map&&($.map.value=ee.map,c(ee.map,$.mapTransform))}function R($,ee){$.dashSize.value=ee.dashSize,$.totalSize.value=ee.dashSize+ee.gapSize,$.scale.value=ee.scale}function z($,ee,ve,ue){$.diffuse.value.copy(ee.color),$.opacity.value=ee.opacity,$.size.value=ee.size*ve,$.scale.value=ue*.5,ee.map&&($.map.value=ee.map,c(ee.map,$.uvTransform)),ee.alphaMap&&($.alphaMap.value=ee.alphaMap,c(ee.alphaMap,$.alphaMapTransform)),ee.alphaTest>0&&($.alphaTest.value=ee.alphaTest)}function j($,ee){$.diffuse.value.copy(ee.color),$.opacity.value=ee.opacity,$.rotation.value=ee.rotation,ee.map&&($.map.value=ee.map,c(ee.map,$.mapTransform)),ee.alphaMap&&($.alphaMap.value=ee.alphaMap,c(ee.alphaMap,$.alphaMapTransform)),ee.alphaTest>0&&($.alphaTest.value=ee.alphaTest)}function W($,ee){$.specular.value.copy(ee.specular),$.shininess.value=Math.max(ee.shininess,1e-4)}function q($,ee){ee.gradientMap&&($.gradientMap.value=ee.gradientMap)}function Z($,ee){$.metalness.value=ee.metalness,ee.metalnessMap&&($.metalnessMap.value=ee.metalnessMap,c(ee.metalnessMap,$.metalnessMapTransform)),$.roughness.value=ee.roughness,ee.roughnessMap&&($.roughnessMap.value=ee.roughnessMap,c(ee.roughnessMap,$.roughnessMapTransform)),e.get(ee).envMap&&($.envMapIntensity.value=ee.envMapIntensity)}function ne($,ee,ve){$.ior.value=ee.ior,ee.sheen>0&&($.sheenColor.value.copy(ee.sheenColor).multiplyScalar(ee.sheen),$.sheenRoughness.value=ee.sheenRoughness,ee.sheenColorMap&&($.sheenColorMap.value=ee.sheenColorMap,c(ee.sheenColorMap,$.sheenColorMapTransform)),ee.sheenRoughnessMap&&($.sheenRoughnessMap.value=ee.sheenRoughnessMap,c(ee.sheenRoughnessMap,$.sheenRoughnessMapTransform))),ee.clearcoat>0&&($.clearcoat.value=ee.clearcoat,$.clearcoatRoughness.value=ee.clearcoatRoughness,ee.clearcoatMap&&($.clearcoatMap.value=ee.clearcoatMap,c(ee.clearcoatMap,$.clearcoatMapTransform)),ee.clearcoatRoughnessMap&&($.clearcoatRoughnessMap.value=ee.clearcoatRoughnessMap,c(ee.clearcoatRoughnessMap,$.clearcoatRoughnessMapTransform)),ee.clearcoatNormalMap&&($.clearcoatNormalMap.value=ee.clearcoatNormalMap,c(ee.clearcoatNormalMap,$.clearcoatNormalMapTransform),$.clearcoatNormalScale.value.copy(ee.clearcoatNormalScale),ee.side===He&&$.clearcoatNormalScale.value.negate())),ee.iridescence>0&&($.iridescence.value=ee.iridescence,$.iridescenceIOR.value=ee.iridescenceIOR,$.iridescenceThicknessMinimum.value=ee.iridescenceThicknessRange[0],$.iridescenceThicknessMaximum.value=ee.iridescenceThicknessRange[1],ee.iridescenceMap&&($.iridescenceMap.value=ee.iridescenceMap,c(ee.iridescenceMap,$.iridescenceMapTransform)),ee.iridescenceThicknessMap&&($.iridescenceThicknessMap.value=ee.iridescenceThicknessMap,c(ee.iridescenceThicknessMap,$.iridescenceThicknessMapTransform))),ee.transmission>0&&($.transmission.value=ee.transmission,$.transmissionSamplerMap.value=ve.texture,$.transmissionSamplerSize.value.set(ve.width,ve.height),ee.transmissionMap&&($.transmissionMap.value=ee.transmissionMap,c(ee.transmissionMap,$.transmissionMapTransform)),$.thickness.value=ee.thickness,ee.thicknessMap&&($.thicknessMap.value=ee.thicknessMap,c(ee.thicknessMap,$.thicknessMapTransform)),$.attenuationDistance.value=ee.attenuationDistance,$.attenuationColor.value.copy(ee.attenuationColor)),ee.anisotropy>0&&($.anisotropyVector.value.set(ee.anisotropy*Math.cos(ee.anisotropyRotation),ee.anisotropy*Math.sin(ee.anisotropyRotation)),ee.anisotropyMap&&($.anisotropyMap.value=ee.anisotropyMap,c(ee.anisotropyMap,$.anisotropyMapTransform))),$.specularIntensity.value=ee.specularIntensity,$.specularColor.value.copy(ee.specularColor),ee.specularColorMap&&($.specularColorMap.value=ee.specularColorMap,c(ee.specularColorMap,$.specularColorMapTransform)),ee.specularIntensityMap&&($.specularIntensityMap.value=ee.specularIntensityMap,c(ee.specularIntensityMap,$.specularIntensityMapTransform))}function se($,ee){ee.matcap&&($.matcap.value=ee.matcap)}function fe($,ee){const ve=e.get(ee).light;$.referencePosition.value.setFromMatrixPosition(ve.matrixWorld),$.nearDistance.value=ve.shadow.camera.near,$.farDistance.value=ve.shadow.camera.far}return{refreshFogUniforms:g,refreshMaterialUniforms:v}}function N3(C,e,c,g){let v={},M={},I=[];const R=c.isWebGL2?C.getParameter(C.MAX_UNIFORM_BUFFER_BINDINGS):0;function z(ve,ue){const Ce=ue.program;g.uniformBlockBinding(ve,Ce)}function j(ve,ue){let Ce=v[ve.id];Ce===void 0&&(se(ve),Ce=W(ve),v[ve.id]=Ce,ve.addEventListener("dispose",$));const Oe=ue.program;g.updateUBOMapping(ve,Oe);const We=e.render.frame;M[ve.id]!==We&&(Z(ve),M[ve.id]=We)}function W(ve){const ue=q();ve.__bindingPointIndex=ue;const Ce=C.createBuffer(),Oe=ve.__size,We=ve.usage;return C.bindBuffer(C.UNIFORM_BUFFER,Ce),C.bufferData(C.UNIFORM_BUFFER,Oe,We),C.bindBuffer(C.UNIFORM_BUFFER,null),C.bindBufferBase(C.UNIFORM_BUFFER,ue,Ce),Ce}function q(){for(let ve=0;ve<R;ve++)if(I.indexOf(ve)===-1)return I.push(ve),ve;return S.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Z(ve){const ue=v[ve.id],Ce=ve.uniforms,Oe=ve.__cache;C.bindBuffer(C.UNIFORM_BUFFER,ue);for(let We=0,Ze=Ce.length;We<Ze;We++){const ht=Ce[We];if(ne(ht,We,Oe)===!0){const Te=ht.__offset,Ve=Array.isArray(ht.value)?ht.value:[ht.value];let qt=0;for(let vn=0;vn<Ve.length;vn++){const jt=Ve[vn],Wt=fe(jt);typeof jt=="number"?(ht.__data[0]=jt,C.bufferSubData(C.UNIFORM_BUFFER,Te+qt,ht.__data)):jt.isMatrix3?(ht.__data[0]=jt.elements[0],ht.__data[1]=jt.elements[1],ht.__data[2]=jt.elements[2],ht.__data[3]=jt.elements[0],ht.__data[4]=jt.elements[3],ht.__data[5]=jt.elements[4],ht.__data[6]=jt.elements[5],ht.__data[7]=jt.elements[0],ht.__data[8]=jt.elements[6],ht.__data[9]=jt.elements[7],ht.__data[10]=jt.elements[8],ht.__data[11]=jt.elements[0]):(jt.toArray(ht.__data,qt),qt+=Wt.storage/Float32Array.BYTES_PER_ELEMENT)}C.bufferSubData(C.UNIFORM_BUFFER,Te,ht.__data)}}C.bindBuffer(C.UNIFORM_BUFFER,null)}function ne(ve,ue,Ce){const Oe=ve.value;if(Ce[ue]===void 0){if(typeof Oe=="number")Ce[ue]=Oe;else{const We=Array.isArray(Oe)?Oe:[Oe],Ze=[];for(let ht=0;ht<We.length;ht++)Ze.push(We[ht].clone());Ce[ue]=Ze}return!0}else if(typeof Oe=="number"){if(Ce[ue]!==Oe)return Ce[ue]=Oe,!0}else{const We=Array.isArray(Ce[ue])?Ce[ue]:[Ce[ue]],Ze=Array.isArray(Oe)?Oe:[Oe];for(let ht=0;ht<We.length;ht++){const Te=We[ht];if(Te.equals(Ze[ht])===!1)return Te.copy(Ze[ht]),!0}}return!1}function se(ve){const ue=ve.uniforms;let Ce=0;const Oe=16;let We=0;for(let Ze=0,ht=ue.length;Ze<ht;Ze++){const Te=ue[Ze],Ve={boundary:0,storage:0},qt=Array.isArray(Te.value)?Te.value:[Te.value];for(let vn=0,jt=qt.length;vn<jt;vn++){const Wt=qt[vn],$e=fe(Wt);Ve.boundary+=$e.boundary,Ve.storage+=$e.storage}if(Te.__data=new Float32Array(Ve.storage/Float32Array.BYTES_PER_ELEMENT),Te.__offset=Ce,Ze>0){We=Ce%Oe;const vn=Oe-We;We!==0&&vn-Ve.boundary<0&&(Ce+=Oe-We,Te.__offset=Ce)}Ce+=Ve.storage}return We=Ce%Oe,We>0&&(Ce+=Oe-We),ve.__size=Ce,ve.__cache={},this}function fe(ve){const ue={boundary:0,storage:0};return typeof ve=="number"?(ue.boundary=4,ue.storage=4):ve.isVector2?(ue.boundary=8,ue.storage=8):ve.isVector3||ve.isColor?(ue.boundary=16,ue.storage=12):ve.isVector4?(ue.boundary=16,ue.storage=16):ve.isMatrix3?(ue.boundary=48,ue.storage=48):ve.isMatrix4?(ue.boundary=64,ue.storage=64):ve.isTexture?S.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):S.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ve),ue}function $(ve){const ue=ve.target;ue.removeEventListener("dispose",$);const Ce=I.indexOf(ue.__bindingPointIndex);I.splice(Ce,1),C.deleteBuffer(v[ue.id]),delete v[ue.id],delete M[ue.id]}function ee(){for(const ve in v)C.deleteBuffer(v[ve]);I=[],v={},M={}}return{bind:z,update:j,dispose:ee}}class tv{constructor(e={}){const{canvas:c=Eg(),context:g=null,depth:v=!0,stencil:M=!0,alpha:I=!1,antialias:R=!1,premultipliedAlpha:z=!0,preserveDrawingBuffer:j=!1,powerPreference:W="default",failIfMajorPerformanceCaveat:q=!1}=e;this.isWebGLRenderer=!0;let Z;g!==null?Z=g.getContextAttributes().alpha:Z=I;const ne=new Uint32Array(4),se=new Int32Array(4);let fe=null,$=null;const ee=[],ve=[];this.domElement=c,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=To,this._useLegacyLights=!1,this.toneMapping=ro,this.toneMappingExposure=1;const ue=this;let Ce=!1,Oe=0,We=0,Ze=null,ht=-1,Te=null;const Ve=new Qr,qt=new Qr;let vn=null;const jt=new rr(0);let Wt=0,$e=c.width,En=c.height,ln=1,gn=null,xn=null;const Sn=new Qr(0,0,$e,En),Ut=new Qr(0,0,$e,En);let dn=!1;const Pn=new Gu;let cr=!1,Er=!1,ei=null;const Jr=new ii,qr=new yn,oo=new Qe,gs={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ai(){return Ze===null?ln:1}let st=g;function Jn(Xe,kt){for(let on=0;on<Xe.length;on++){const Nt=Xe[on],rn=c.getContext(Nt,kt);if(rn!==null)return rn}return null}try{const Xe={alpha:!0,depth:v,stencil:M,antialias:R,premultipliedAlpha:z,preserveDrawingBuffer:j,powerPreference:W,failIfMajorPerformanceCaveat:q};if("setAttribute"in c&&c.setAttribute("data-engine",`three.js r${d}`),c.addEventListener("webglcontextlost",or,!1),c.addEventListener("webglcontextrestored",Zt,!1),c.addEventListener("webglcontextcreationerror",Zn,!1),st===null){const kt=["webgl2","webgl","experimental-webgl"];if(ue.isWebGL1Renderer===!0&&kt.shift(),st=Jn(kt,Xe),st===null)throw Jn(kt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext!="undefined"&&st instanceof WebGLRenderingContext&&S.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),st.getShaderPrecisionFormat===void 0&&(st.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Xe){throw S.error("THREE.WebGLRenderer: "+Xe.message),Xe}let Lt,Wn,bn,Vr,hr,An,It,Ii,Fo,et,Re,Vt,Gn,wn,Rn,qn,hn,Kt,Ur,Pr,Nr,Fr,Br,Pi;function Jo(){Lt=new SA(st),Wn=new Hg(st,Lt,e),Lt.init(Wn),Fr=new ZA(st,Lt,Wn),bn=new JA(st,Lt,Wn),Vr=new r3(st),hr=new Xm,An=new Th(st,Lt,bn,hr,Wn,Fr,Vr),It=new EA(ue),Ii=new t3(ue),Fo=new Ah(st,Wn),Br=new _A(st,Lt,Fo,Wn),et=new n3(st,Fo,Vr,Br),Re=new a3(st,et,Fo,Vr),Ur=new s3(st,Wn,An),qn=new Z_(hr),Vt=new Qm(ue,It,Ii,Lt,Wn,Br,qn),Gn=new U3(ue,hr),wn=new YA,Rn=new KA(Lt,Wn),Kt=new J_(ue,It,Ii,bn,Re,Z,z),hn=new Y1(ue,Re,Wn),Pi=new N3(st,Vr,Wn,bn),Pr=new q_(st,Lt,Vr,Wn),Nr=new wA(st,Lt,Vr,Wn),Vr.programs=Vt.programs,ue.capabilities=Wn,ue.extensions=Lt,ue.properties=hr,ue.renderLists=wn,ue.shadowMap=hn,ue.state=bn,ue.info=Vr}Jo();const yt=new G3(ue,st);this.xr=yt,this.getContext=function(){return st},this.getContextAttributes=function(){return st.getContextAttributes()},this.forceContextLoss=function(){const Xe=Lt.get("WEBGL_lose_context");Xe&&Xe.loseContext()},this.forceContextRestore=function(){const Xe=Lt.get("WEBGL_lose_context");Xe&&Xe.restoreContext()},this.getPixelRatio=function(){return ln},this.setPixelRatio=function(Xe){Xe!==void 0&&(ln=Xe,this.setSize($e,En,!1))},this.getSize=function(Xe){return Xe.set($e,En)},this.setSize=function(Xe,kt,on=!0){if(yt.isPresenting){S.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$e=Xe,En=kt,c.width=Math.floor(Xe*ln),c.height=Math.floor(kt*ln),on===!0&&(c.style.width=Xe+"px",c.style.height=kt+"px"),this.setViewport(0,0,Xe,kt)},this.getDrawingBufferSize=function(Xe){return Xe.set($e*ln,En*ln).floor()},this.setDrawingBufferSize=function(Xe,kt,on){$e=Xe,En=kt,ln=on,c.width=Math.floor(Xe*on),c.height=Math.floor(kt*on),this.setViewport(0,0,Xe,kt)},this.getCurrentViewport=function(Xe){return Xe.copy(Ve)},this.getViewport=function(Xe){return Xe.copy(Sn)},this.setViewport=function(Xe,kt,on,Nt){Xe.isVector4?Sn.set(Xe.x,Xe.y,Xe.z,Xe.w):Sn.set(Xe,kt,on,Nt),bn.viewport(Ve.copy(Sn).multiplyScalar(ln).floor())},this.getScissor=function(Xe){return Xe.copy(Ut)},this.setScissor=function(Xe,kt,on,Nt){Xe.isVector4?Ut.set(Xe.x,Xe.y,Xe.z,Xe.w):Ut.set(Xe,kt,on,Nt),bn.scissor(qt.copy(Ut).multiplyScalar(ln).floor())},this.getScissorTest=function(){return dn},this.setScissorTest=function(Xe){bn.setScissorTest(dn=Xe)},this.setOpaqueSort=function(Xe){gn=Xe},this.setTransparentSort=function(Xe){xn=Xe},this.getClearColor=function(Xe){return Xe.copy(Kt.getClearColor())},this.setClearColor=function(){Kt.setClearColor.apply(Kt,arguments)},this.getClearAlpha=function(){return Kt.getClearAlpha()},this.setClearAlpha=function(){Kt.setClearAlpha.apply(Kt,arguments)},this.clear=function(Xe=!0,kt=!0,on=!0){let Nt=0;if(Xe){let rn=!1;if(Ze!==null){const Sr=Ze.texture.format;rn=Sr===Ue||Sr===ur||Sr===zn}if(rn){const Sr=Ze.texture.type,jr=Sr===Do||Sr===co||Sr===ta||Sr===Sa||Sr===qa||Sr===Ol,Ei=Kt.getClearColor(),yi=Kt.getClearAlpha(),Ni=Ei.r,Ai=Ei.g,Ri=Ei.b;jr?(ne[0]=Ni,ne[1]=Ai,ne[2]=Ri,ne[3]=yi,st.clearBufferuiv(st.COLOR,0,ne)):(se[0]=Ni,se[1]=Ai,se[2]=Ri,se[3]=yi,st.clearBufferiv(st.COLOR,0,se))}else Nt|=st.COLOR_BUFFER_BIT}kt&&(Nt|=st.DEPTH_BUFFER_BIT),on&&(Nt|=st.STENCIL_BUFFER_BIT),st.clear(Nt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){c.removeEventListener("webglcontextlost",or,!1),c.removeEventListener("webglcontextrestored",Zt,!1),c.removeEventListener("webglcontextcreationerror",Zn,!1),wn.dispose(),Rn.dispose(),hr.dispose(),It.dispose(),Ii.dispose(),Re.dispose(),Br.dispose(),Pi.dispose(),Vt.dispose(),yt.dispose(),yt.removeEventListener("sessionstart",Ui),yt.removeEventListener("sessionend",ti),ei&&(ei.dispose(),ei=null),mi.stop()};function or(Xe){Xe.preventDefault(),S.log("THREE.WebGLRenderer: Context Lost."),Ce=!0}function Zt(){S.log("THREE.WebGLRenderer: Context Restored."),Ce=!1;const Xe=Vr.autoReset,kt=hn.enabled,on=hn.autoUpdate,Nt=hn.needsUpdate,rn=hn.type;Jo(),Vr.autoReset=Xe,hn.enabled=kt,hn.autoUpdate=on,hn.needsUpdate=Nt,hn.type=rn}function Zn(Xe){S.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Xe.statusMessage)}function mr(Xe){const kt=Xe.target;kt.removeEventListener("dispose",mr),$n(kt)}function $n(Xe){ms(Xe),hr.remove(Xe)}function ms(Xe){const kt=hr.get(Xe).programs;kt!==void 0&&(kt.forEach(function(on){Vt.releaseProgram(on)}),Xe.isShaderMaterial&&Vt.releaseShaderCache(Xe))}this.renderBufferDirect=function(Xe,kt,on,Nt,rn,Sr){kt===null&&(kt=gs);const jr=rn.isMesh&&rn.matrixWorld.determinant()<0,Ei=Vc(Xe,kt,on,Nt,rn);bn.setMaterial(Nt,jr);let yi=on.index,Ni=1;if(Nt.wireframe===!0){if(yi=et.getWireframeAttribute(on),yi===void 0)return;Ni=2}const Ai=on.drawRange,Ri=on.attributes.position;let ks=Ai.start*Ni,zs=(Ai.start+Ai.count)*Ni;Sr!==null&&(ks=Math.max(ks,Sr.start*Ni),zs=Math.min(zs,(Sr.start+Sr.count)*Ni)),yi!==null?(ks=Math.max(ks,0),zs=Math.min(zs,yi.count)):Ri!=null&&(ks=Math.max(ks,0),zs=Math.min(zs,Ri.count));const Va=zs-ks;if(Va<0||Va===1/0)return;Br.setup(rn,Nt,Ei,on,yi);let Cp,Cs=Pr;if(yi!==null&&(Cp=Fo.get(yi),Cs=Nr,Cs.setIndex(Cp)),rn.isMesh)Nt.wireframe===!0?(bn.setLineWidth(Nt.wireframeLinewidth*ai()),Cs.setMode(st.LINES)):Cs.setMode(st.TRIANGLES);else if(rn.isLine){let Wi=Nt.linewidth;Wi===void 0&&(Wi=1),bn.setLineWidth(Wi*ai()),rn.isLineSegments?Cs.setMode(st.LINES):rn.isLineLoop?Cs.setMode(st.LINE_LOOP):Cs.setMode(st.LINE_STRIP)}else rn.isPoints?Cs.setMode(st.POINTS):rn.isSprite&&Cs.setMode(st.TRIANGLES);if(rn.isInstancedMesh)Cs.renderInstances(ks,Va,rn.count);else if(on.isInstancedBufferGeometry){const Wi=on._maxInstanceCount!==void 0?on._maxInstanceCount:1/0,X0=Math.min(on.instanceCount,Wi);Cs.renderInstances(ks,Va,X0)}else Cs.render(ks,Va)},this.compile=function(Xe,kt){function on(Nt,rn,Sr){Nt.transparent===!0&&Nt.side===ot&&Nt.forceSinglePass===!1?(Nt.side=He,Nt.needsUpdate=!0,_m(Nt,rn,Sr),Nt.side=nt,Nt.needsUpdate=!0,_m(Nt,rn,Sr),Nt.side=ot):_m(Nt,rn,Sr)}$=Rn.get(Xe),$.init(),ve.push($),Xe.traverseVisible(function(Nt){Nt.isLight&&Nt.layers.test(kt.layers)&&($.pushLight(Nt),Nt.castShadow&&$.pushShadow(Nt))}),$.setupLights(ue._useLegacyLights),Xe.traverse(function(Nt){const rn=Nt.material;if(rn)if(Array.isArray(rn))for(let Sr=0;Sr<rn.length;Sr++){const jr=rn[Sr];on(jr,Xe,Nt)}else on(rn,Xe,Nt)}),ve.pop(),$=null};let Ms=null;function hu(Xe){Ms&&Ms(Xe)}function Ui(){mi.stop()}function ti(){mi.start()}const mi=new gp;mi.setAnimationLoop(hu),typeof self!="undefined"&&mi.setContext(self),this.setAnimationLoop=function(Xe){Ms=Xe,yt.setAnimationLoop(Xe),Xe===null?mi.stop():mi.start()},yt.addEventListener("sessionstart",Ui),yt.addEventListener("sessionend",ti),this.render=function(Xe,kt){if(kt!==void 0&&kt.isCamera!==!0){S.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Ce===!0)return;Xe.matrixWorldAutoUpdate===!0&&Xe.updateMatrixWorld(),kt.parent===null&&kt.matrixWorldAutoUpdate===!0&&kt.updateMatrixWorld(),yt.enabled===!0&&yt.isPresenting===!0&&(yt.cameraAutoUpdate===!0&&yt.updateCamera(kt),kt=yt.getCamera()),Xe.isScene===!0&&Xe.onBeforeRender(ue,Xe,kt,Ze),$=Rn.get(Xe,ve.length),$.init(),ve.push($),Jr.multiplyMatrices(kt.projectionMatrix,kt.matrixWorldInverse),Pn.setFromProjectionMatrix(Jr),Er=this.localClippingEnabled,cr=qn.init(this.clippingPlanes,Er),fe=wn.get(Xe,ee.length),fe.init(),ee.push(fe),Wh(Xe,kt,0,ue.sortObjects),fe.finish(),ue.sortObjects===!0&&fe.sort(gn,xn),this.info.render.frame++,cr===!0&&qn.beginShadows();const on=$.state.shadowsArray;if(hn.render(on,Xe,kt),cr===!0&&qn.endShadows(),this.info.autoReset===!0&&this.info.reset(),Kt.render(fe,Xe),$.setupLights(ue._useLegacyLights),kt.isArrayCamera){const Nt=kt.cameras;for(let rn=0,Sr=Nt.length;rn<Sr;rn++){const jr=Nt[rn];qf(fe,Xe,jr,jr.viewport)}}else qf(fe,Xe,kt);Ze!==null&&(An.updateMultisampleRenderTarget(Ze),An.updateRenderTargetMipmap(Ze)),Xe.isScene===!0&&Xe.onAfterRender(ue,Xe,kt),Br.resetDefaultState(),ht=-1,Te=null,ve.pop(),ve.length>0?$=ve[ve.length-1]:$=null,ee.pop(),ee.length>0?fe=ee[ee.length-1]:fe=null};function Wh(Xe,kt,on,Nt){if(Xe.visible===!1)return;if(Xe.layers.test(kt.layers)){if(Xe.isGroup)on=Xe.renderOrder;else if(Xe.isLOD)Xe.autoUpdate===!0&&Xe.update(kt);else if(Xe.isLight)$.pushLight(Xe),Xe.castShadow&&$.pushShadow(Xe);else if(Xe.isSprite){if(!Xe.frustumCulled||Pn.intersectsSprite(Xe)){Nt&&oo.setFromMatrixPosition(Xe.matrixWorld).applyMatrix4(Jr);const jr=Re.update(Xe),Ei=Xe.material;Ei.visible&&fe.push(Xe,jr,Ei,on,oo.z,null)}}else if((Xe.isMesh||Xe.isLine||Xe.isPoints)&&(!Xe.frustumCulled||Pn.intersectsObject(Xe))){const jr=Re.update(Xe),Ei=Xe.material;if(Nt&&(Xe.boundingSphere!==void 0?(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),oo.copy(Xe.boundingSphere.center)):(jr.boundingSphere===null&&jr.computeBoundingSphere(),oo.copy(jr.boundingSphere.center)),oo.applyMatrix4(Xe.matrixWorld).applyMatrix4(Jr)),Array.isArray(Ei)){const yi=jr.groups;for(let Ni=0,Ai=yi.length;Ni<Ai;Ni++){const Ri=yi[Ni],ks=Ei[Ri.materialIndex];ks&&ks.visible&&fe.push(Xe,jr,ks,on,oo.z,Ri)}}else Ei.visible&&fe.push(Xe,jr,Ei,on,oo.z,null)}}const Sr=Xe.children;for(let jr=0,Ei=Sr.length;jr<Ei;jr++)Wh(Sr[jr],kt,on,Nt)}function qf(Xe,kt,on,Nt){const rn=Xe.opaque,Sr=Xe.transmissive,jr=Xe.transparent;$.setupLightsView(on),cr===!0&&qn.setGlobalState(ue.clippingPlanes,on),Sr.length>0&&fu(rn,Sr,kt,on),Nt&&bn.viewport(Ve.copy(Nt)),rn.length>0&&hc(rn,kt,on),Sr.length>0&&hc(Sr,kt,on),jr.length>0&&hc(jr,kt,on),bn.buffers.depth.setTest(!0),bn.buffers.depth.setMask(!0),bn.buffers.color.setMask(!0),bn.setPolygonOffset(!1)}function fu(Xe,kt,on,Nt){const rn=Wn.isWebGL2;ei===null&&(ei=new dr(1,1,{generateMipmaps:!0,type:Lt.has("EXT_color_buffer_half_float")?Co:Do,minFilter:lo,samples:rn?4:0})),ue.getDrawingBufferSize(qr),rn?ei.setSize(qr.x,qr.y):ei.setSize(ma(qr.x),ma(qr.y));const Sr=ue.getRenderTarget();ue.setRenderTarget(ei),ue.getClearColor(jt),Wt=ue.getClearAlpha(),Wt<1&&ue.setClearColor(16777215,.5),ue.clear();const jr=ue.toneMapping;ue.toneMapping=ro,hc(Xe,on,Nt),An.updateMultisampleRenderTarget(ei),An.updateRenderTargetMipmap(ei);let Ei=!1;for(let yi=0,Ni=kt.length;yi<Ni;yi++){const Ai=kt[yi],Ri=Ai.object,ks=Ai.geometry,zs=Ai.material,Va=Ai.group;if(zs.side===ot&&Ri.layers.test(Nt.layers)){const Cp=zs.side;zs.side=He,zs.needsUpdate=!0,jd(Ri,on,Nt,ks,zs,Va),zs.side=Cp,zs.needsUpdate=!0,Ei=!0}}Ei===!0&&(An.updateMultisampleRenderTarget(ei),An.updateRenderTargetMipmap(ei)),ue.setRenderTarget(Sr),ue.setClearColor(jt,Wt),ue.toneMapping=jr}function hc(Xe,kt,on){const Nt=kt.isScene===!0?kt.overrideMaterial:null;for(let rn=0,Sr=Xe.length;rn<Sr;rn++){const jr=Xe[rn],Ei=jr.object,yi=jr.geometry,Ni=Nt===null?jr.material:Nt,Ai=jr.group;Ei.layers.test(on.layers)&&jd(Ei,kt,on,yi,Ni,Ai)}}function jd(Xe,kt,on,Nt,rn,Sr){Xe.onBeforeRender(ue,kt,on,Nt,rn,Sr),Xe.modelViewMatrix.multiplyMatrices(on.matrixWorldInverse,Xe.matrixWorld),Xe.normalMatrix.getNormalMatrix(Xe.modelViewMatrix),rn.onBeforeRender(ue,kt,on,Nt,Xe,Sr),rn.transparent===!0&&rn.side===ot&&rn.forceSinglePass===!1?(rn.side=He,rn.needsUpdate=!0,ue.renderBufferDirect(on,kt,Nt,rn,Xe,Sr),rn.side=nt,rn.needsUpdate=!0,ue.renderBufferDirect(on,kt,Nt,rn,Xe,Sr),rn.side=ot):ue.renderBufferDirect(on,kt,Nt,rn,Xe,Sr),Xe.onAfterRender(ue,kt,on,Nt,rn,Sr)}function _m(Xe,kt,on){kt.isScene!==!0&&(kt=gs);const Nt=hr.get(Xe),rn=$.state.lights,Sr=$.state.shadowsArray,jr=rn.state.version,Ei=Vt.getParameters(Xe,rn.state,Sr,kt,on),yi=Vt.getProgramCacheKey(Ei);let Ni=Nt.programs;Nt.environment=Xe.isMeshStandardMaterial?kt.environment:null,Nt.fog=kt.fog,Nt.envMap=(Xe.isMeshStandardMaterial?Ii:It).get(Xe.envMap||Nt.environment),Ni===void 0&&(Xe.addEventListener("dispose",mr),Ni=new Map,Nt.programs=Ni);let Ai=Ni.get(yi);if(Ai!==void 0){if(Nt.currentProgram===Ai&&Nt.lightsStateVersion===jr)return Ry(Xe,Ei),Ai}else Ei.uniforms=Vt.getUniforms(Xe),Xe.onBuild(on,Ei,ue),Xe.onBeforeCompile(Ei,ue),Ai=Vt.acquireProgram(Ei,yi),Ni.set(yi,Ai),Nt.uniforms=Ei.uniforms;const Ri=Nt.uniforms;(!Xe.isShaderMaterial&&!Xe.isRawShaderMaterial||Xe.clipping===!0)&&(Ri.clippingPlanes=qn.uniform),Ry(Xe,Ei),Nt.needsLights=Zf(Xe),Nt.lightsStateVersion=jr,Nt.needsLights&&(Ri.ambientLightColor.value=rn.state.ambient,Ri.lightProbe.value=rn.state.probe,Ri.directionalLights.value=rn.state.directional,Ri.directionalLightShadows.value=rn.state.directionalShadow,Ri.spotLights.value=rn.state.spot,Ri.spotLightShadows.value=rn.state.spotShadow,Ri.rectAreaLights.value=rn.state.rectArea,Ri.ltc_1.value=rn.state.rectAreaLTC1,Ri.ltc_2.value=rn.state.rectAreaLTC2,Ri.pointLights.value=rn.state.point,Ri.pointLightShadows.value=rn.state.pointShadow,Ri.hemisphereLights.value=rn.state.hemi,Ri.directionalShadowMap.value=rn.state.directionalShadowMap,Ri.directionalShadowMatrix.value=rn.state.directionalShadowMatrix,Ri.spotShadowMap.value=rn.state.spotShadowMap,Ri.spotLightMatrix.value=rn.state.spotLightMatrix,Ri.spotLightMap.value=rn.state.spotLightMap,Ri.pointShadowMap.value=rn.state.pointShadowMap,Ri.pointShadowMatrix.value=rn.state.pointShadowMatrix);const ks=Ai.getUniforms(),zs=ju.seqWithValue(ks.seq,Ri);return Nt.currentProgram=Ai,Nt.uniformsList=zs,Ai}function Ry(Xe,kt){const on=hr.get(Xe);on.outputColorSpace=kt.outputColorSpace,on.instancing=kt.instancing,on.instancingColor=kt.instancingColor,on.skinning=kt.skinning,on.morphTargets=kt.morphTargets,on.morphNormals=kt.morphNormals,on.morphColors=kt.morphColors,on.morphTargetsCount=kt.morphTargetsCount,on.numClippingPlanes=kt.numClippingPlanes,on.numIntersection=kt.numClipIntersection,on.vertexAlphas=kt.vertexAlphas,on.vertexTangents=kt.vertexTangents,on.toneMapping=kt.toneMapping}function Vc(Xe,kt,on,Nt,rn){kt.isScene!==!0&&(kt=gs),An.resetTextureUnits();const Sr=kt.fog,jr=Nt.isMeshStandardMaterial?kt.environment:null,Ei=Ze===null?ue.outputColorSpace:Ze.isXRRenderTarget===!0?Ze.texture.colorSpace:ho,yi=(Nt.isMeshStandardMaterial?Ii:It).get(Nt.envMap||jr),Ni=Nt.vertexColors===!0&&!!on.attributes.color&&on.attributes.color.itemSize===4,Ai=!!on.attributes.tangent&&(!!Nt.normalMap||Nt.anisotropy>0),Ri=!!on.morphAttributes.position,ks=!!on.morphAttributes.normal,zs=!!on.morphAttributes.color;let Va=ro;Nt.toneMapped&&(Ze===null||Ze.isXRRenderTarget===!0)&&(Va=ue.toneMapping);const Cp=on.morphAttributes.position||on.morphAttributes.normal||on.morphAttributes.color,Cs=Cp!==void 0?Cp.length:0,Wi=hr.get(Nt),X0=$.state.lights;if(cr===!0&&(Er===!0||Xe!==Te)){const fc=Xe===Te&&Nt.id===ht;qn.setState(Nt,Xe,fc)}let Gs=!1;Nt.version===Wi.__version?(Wi.needsLights&&Wi.lightsStateVersion!==X0.state.version||Wi.outputColorSpace!==Ei||rn.isInstancedMesh&&Wi.instancing===!1||!rn.isInstancedMesh&&Wi.instancing===!0||rn.isSkinnedMesh&&Wi.skinning===!1||!rn.isSkinnedMesh&&Wi.skinning===!0||rn.isInstancedMesh&&Wi.instancingColor===!0&&rn.instanceColor===null||rn.isInstancedMesh&&Wi.instancingColor===!1&&rn.instanceColor!==null||Wi.envMap!==yi||Nt.fog===!0&&Wi.fog!==Sr||Wi.numClippingPlanes!==void 0&&(Wi.numClippingPlanes!==qn.numPlanes||Wi.numIntersection!==qn.numIntersection)||Wi.vertexAlphas!==Ni||Wi.vertexTangents!==Ai||Wi.morphTargets!==Ri||Wi.morphNormals!==ks||Wi.morphColors!==zs||Wi.toneMapping!==Va||Wn.isWebGL2===!0&&Wi.morphTargetsCount!==Cs)&&(Gs=!0):(Gs=!0,Wi.__version=Nt.version);let Vh=Wi.currentProgram;Gs===!0&&(Vh=_m(Nt,kt,rn));let Fy=!1,$f=!1,Hd=!1;const ml=Vh.getUniforms(),Qh=Wi.uniforms;if(bn.useProgram(Vh.program)&&(Fy=!0,$f=!0,Hd=!0),Nt.id!==ht&&(ht=Nt.id,$f=!0),Fy||Te!==Xe){ml.setValue(st,"projectionMatrix",Xe.projectionMatrix),ml.setValue(st,"viewMatrix",Xe.matrixWorldInverse);const fc=ml.map.cameraPosition;fc!==void 0&&fc.setValue(st,oo.setFromMatrixPosition(Xe.matrixWorld)),Wn.logarithmicDepthBuffer&&ml.setValue(st,"logDepthBufFC",2/(Math.log(Xe.far+1)/Math.LN2)),(Nt.isMeshPhongMaterial||Nt.isMeshToonMaterial||Nt.isMeshLambertMaterial||Nt.isMeshBasicMaterial||Nt.isMeshStandardMaterial||Nt.isShaderMaterial)&&ml.setValue(st,"isOrthographic",Xe.isOrthographicCamera===!0),Te!==Xe&&(Te=Xe,$f=!0,Hd=!0)}if(rn.isSkinnedMesh){ml.setOptional(st,rn,"bindMatrix"),ml.setOptional(st,rn,"bindMatrixInverse");const fc=rn.skeleton;fc&&(Wn.floatVertexTextures?(fc.boneTexture===null&&fc.computeBoneTexture(),ml.setValue(st,"boneTexture",fc.boneTexture,An),ml.setValue(st,"boneTextureSize",fc.boneTextureSize)):S.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const bm=on.morphAttributes;if((bm.position!==void 0||bm.normal!==void 0||bm.color!==void 0&&Wn.isWebGL2===!0)&&Ur.update(rn,on,Vh),($f||Wi.receiveShadow!==rn.receiveShadow)&&(Wi.receiveShadow=rn.receiveShadow,ml.setValue(st,"receiveShadow",rn.receiveShadow)),Nt.isMeshGouraudMaterial&&Nt.envMap!==null&&(Qh.envMap.value=yi,Qh.flipEnvMap.value=yi.isCubeTexture&&yi.isRenderTargetTexture===!1?-1:1),$f&&(ml.setValue(st,"toneMappingExposure",ue.toneMappingExposure),Wi.needsLights&&Em(Qh,Hd),Sr&&Nt.fog===!0&&Gn.refreshFogUniforms(Qh,Sr),Gn.refreshMaterialUniforms(Qh,Nt,ln,En,ei),ju.upload(st,Wi.uniformsList,Qh,An)),Nt.isShaderMaterial&&Nt.uniformsNeedUpdate===!0&&(ju.upload(st,Wi.uniformsList,Qh,An),Nt.uniformsNeedUpdate=!1),Nt.isSpriteMaterial&&ml.setValue(st,"center",rn.center),ml.setValue(st,"modelViewMatrix",rn.modelViewMatrix),ml.setValue(st,"normalMatrix",rn.normalMatrix),ml.setValue(st,"modelMatrix",rn.matrixWorld),Nt.isShaderMaterial||Nt.isRawShaderMaterial){const fc=Nt.uniformsGroups;for(let Oy=0,jE=fc.length;Oy<jE;Oy++)if(Wn.isWebGL2){const A2=fc[Oy];Pi.update(A2,Vh),Pi.bind(A2,Vh)}else S.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vh}function Em(Xe,kt){Xe.ambientLightColor.needsUpdate=kt,Xe.lightProbe.needsUpdate=kt,Xe.directionalLights.needsUpdate=kt,Xe.directionalLightShadows.needsUpdate=kt,Xe.pointLights.needsUpdate=kt,Xe.pointLightShadows.needsUpdate=kt,Xe.spotLights.needsUpdate=kt,Xe.spotLightShadows.needsUpdate=kt,Xe.rectAreaLights.needsUpdate=kt,Xe.hemisphereLights.needsUpdate=kt}function Zf(Xe){return Xe.isMeshLambertMaterial||Xe.isMeshToonMaterial||Xe.isMeshPhongMaterial||Xe.isMeshStandardMaterial||Xe.isShadowMaterial||Xe.isShaderMaterial&&Xe.lights===!0}this.getActiveCubeFace=function(){return Oe},this.getActiveMipmapLevel=function(){return We},this.getRenderTarget=function(){return Ze},this.setRenderTargetTextures=function(Xe,kt,on){hr.get(Xe.texture).__webglTexture=kt,hr.get(Xe.depthTexture).__webglTexture=on;const Nt=hr.get(Xe);Nt.__hasExternalTextures=!0,Nt.__hasExternalTextures&&(Nt.__autoAllocateDepthBuffer=on===void 0,Nt.__autoAllocateDepthBuffer||Lt.has("WEBGL_multisampled_render_to_texture")===!0&&(S.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Nt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Xe,kt){const on=hr.get(Xe);on.__webglFramebuffer=kt,on.__useDefaultFramebuffer=kt===void 0},this.setRenderTarget=function(Xe,kt=0,on=0){Ze=Xe,Oe=kt,We=on;let Nt=!0,rn=null,Sr=!1,jr=!1;if(Xe){const yi=hr.get(Xe);yi.__useDefaultFramebuffer!==void 0?(bn.bindFramebuffer(st.FRAMEBUFFER,null),Nt=!1):yi.__webglFramebuffer===void 0?An.setupRenderTarget(Xe):yi.__hasExternalTextures&&An.rebindTextures(Xe,hr.get(Xe.texture).__webglTexture,hr.get(Xe.depthTexture).__webglTexture);const Ni=Xe.texture;(Ni.isData3DTexture||Ni.isDataArrayTexture||Ni.isCompressedArrayTexture)&&(jr=!0);const Ai=hr.get(Xe).__webglFramebuffer;Xe.isWebGLCubeRenderTarget?(Array.isArray(Ai[kt])?rn=Ai[kt][on]:rn=Ai[kt],Sr=!0):Wn.isWebGL2&&Xe.samples>0&&An.useMultisampledRTT(Xe)===!1?rn=hr.get(Xe).__webglMultisampledFramebuffer:Array.isArray(Ai)?rn=Ai[on]:rn=Ai,Ve.copy(Xe.viewport),qt.copy(Xe.scissor),vn=Xe.scissorTest}else Ve.copy(Sn).multiplyScalar(ln).floor(),qt.copy(Ut).multiplyScalar(ln).floor(),vn=dn;if(bn.bindFramebuffer(st.FRAMEBUFFER,rn)&&Wn.drawBuffers&&Nt&&bn.drawBuffers(Xe,rn),bn.viewport(Ve),bn.scissor(qt),bn.setScissorTest(vn),Sr){const yi=hr.get(Xe.texture);st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_CUBE_MAP_POSITIVE_X+kt,yi.__webglTexture,on)}else if(jr){const yi=hr.get(Xe.texture),Ni=kt||0;st.framebufferTextureLayer(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,yi.__webglTexture,on||0,Ni)}ht=-1},this.readRenderTargetPixels=function(Xe,kt,on,Nt,rn,Sr,jr){if(!(Xe&&Xe.isWebGLRenderTarget)){S.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ei=hr.get(Xe).__webglFramebuffer;if(Xe.isWebGLCubeRenderTarget&&jr!==void 0&&(Ei=Ei[jr]),Ei){bn.bindFramebuffer(st.FRAMEBUFFER,Ei);try{const yi=Xe.texture,Ni=yi.format,Ai=yi.type;if(Ni!==cs&&Fr.convert(Ni)!==st.getParameter(st.IMPLEMENTATION_COLOR_READ_FORMAT)){S.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ri=Ai===Co&&(Lt.has("EXT_color_buffer_half_float")||Wn.isWebGL2&&Lt.has("EXT_color_buffer_float"));if(Ai!==Do&&Fr.convert(Ai)!==st.getParameter(st.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ai===_s&&(Wn.isWebGL2||Lt.has("OES_texture_float")||Lt.has("WEBGL_color_buffer_float")))&&!Ri){S.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}kt>=0&&kt<=Xe.width-Nt&&on>=0&&on<=Xe.height-rn&&st.readPixels(kt,on,Nt,rn,Fr.convert(Ni),Fr.convert(Ai),Sr)}finally{const yi=Ze!==null?hr.get(Ze).__webglFramebuffer:null;bn.bindFramebuffer(st.FRAMEBUFFER,yi)}}},this.copyFramebufferToTexture=function(Xe,kt,on=0){const Nt=Math.pow(2,-on),rn=Math.floor(kt.image.width*Nt),Sr=Math.floor(kt.image.height*Nt);An.setTexture2D(kt,0),st.copyTexSubImage2D(st.TEXTURE_2D,on,0,0,Xe.x,Xe.y,rn,Sr),bn.unbindTexture()},this.copyTextureToTexture=function(Xe,kt,on,Nt=0){const rn=kt.image.width,Sr=kt.image.height,jr=Fr.convert(on.format),Ei=Fr.convert(on.type);An.setTexture2D(on,0),st.pixelStorei(st.UNPACK_FLIP_Y_WEBGL,on.flipY),st.pixelStorei(st.UNPACK_PREMULTIPLY_ALPHA_WEBGL,on.premultiplyAlpha),st.pixelStorei(st.UNPACK_ALIGNMENT,on.unpackAlignment),kt.isDataTexture?st.texSubImage2D(st.TEXTURE_2D,Nt,Xe.x,Xe.y,rn,Sr,jr,Ei,kt.image.data):kt.isCompressedTexture?st.compressedTexSubImage2D(st.TEXTURE_2D,Nt,Xe.x,Xe.y,kt.mipmaps[0].width,kt.mipmaps[0].height,jr,kt.mipmaps[0].data):st.texSubImage2D(st.TEXTURE_2D,Nt,Xe.x,Xe.y,jr,Ei,kt.image),Nt===0&&on.generateMipmaps&&st.generateMipmap(st.TEXTURE_2D),bn.unbindTexture()},this.copyTextureToTexture3D=function(Xe,kt,on,Nt,rn=0){if(ue.isWebGL1Renderer){S.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Sr=Xe.max.x-Xe.min.x+1,jr=Xe.max.y-Xe.min.y+1,Ei=Xe.max.z-Xe.min.z+1,yi=Fr.convert(Nt.format),Ni=Fr.convert(Nt.type);let Ai;if(Nt.isData3DTexture)An.setTexture3D(Nt,0),Ai=st.TEXTURE_3D;else if(Nt.isDataArrayTexture)An.setTexture2DArray(Nt,0),Ai=st.TEXTURE_2D_ARRAY;else{S.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}st.pixelStorei(st.UNPACK_FLIP_Y_WEBGL,Nt.flipY),st.pixelStorei(st.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Nt.premultiplyAlpha),st.pixelStorei(st.UNPACK_ALIGNMENT,Nt.unpackAlignment);const Ri=st.getParameter(st.UNPACK_ROW_LENGTH),ks=st.getParameter(st.UNPACK_IMAGE_HEIGHT),zs=st.getParameter(st.UNPACK_SKIP_PIXELS),Va=st.getParameter(st.UNPACK_SKIP_ROWS),Cp=st.getParameter(st.UNPACK_SKIP_IMAGES),Cs=on.isCompressedTexture?on.mipmaps[0]:on.image;st.pixelStorei(st.UNPACK_ROW_LENGTH,Cs.width),st.pixelStorei(st.UNPACK_IMAGE_HEIGHT,Cs.height),st.pixelStorei(st.UNPACK_SKIP_PIXELS,Xe.min.x),st.pixelStorei(st.UNPACK_SKIP_ROWS,Xe.min.y),st.pixelStorei(st.UNPACK_SKIP_IMAGES,Xe.min.z),on.isDataTexture||on.isData3DTexture?st.texSubImage3D(Ai,rn,kt.x,kt.y,kt.z,Sr,jr,Ei,yi,Ni,Cs.data):on.isCompressedArrayTexture?(S.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),st.compressedTexSubImage3D(Ai,rn,kt.x,kt.y,kt.z,Sr,jr,Ei,yi,Cs.data)):st.texSubImage3D(Ai,rn,kt.x,kt.y,kt.z,Sr,jr,Ei,yi,Ni,Cs),st.pixelStorei(st.UNPACK_ROW_LENGTH,Ri),st.pixelStorei(st.UNPACK_IMAGE_HEIGHT,ks),st.pixelStorei(st.UNPACK_SKIP_PIXELS,zs),st.pixelStorei(st.UNPACK_SKIP_ROWS,Va),st.pixelStorei(st.UNPACK_SKIP_IMAGES,Cp),rn===0&&Nt.generateMipmaps&&st.generateMipmap(Ai),bn.unbindTexture()},this.initTexture=function(Xe){Xe.isCubeTexture?An.setTextureCube(Xe,0):Xe.isData3DTexture?An.setTexture3D(Xe,0):Xe.isDataArrayTexture||Xe.isCompressedArrayTexture?An.setTexture2DArray(Xe,0):An.setTexture2D(Xe,0),bn.unbindTexture()},this.resetState=function(){Oe=0,We=0,Ze=null,bn.reset(),Br.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zl}get physicallyCorrectLights(){return S.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){S.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return S.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===To?Kl:$c}set outputEncoding(e){S.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Kl?To:ho}get useLegacyLights(){return S.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){S.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Of extends tv{}Of.prototype.isWebGL1Renderer=!0;class Km{constructor(e,c=25e-5){this.isFogExp2=!0,this.name="",this.color=new rr(e),this.density=c}clone(){return new Km(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Jm{constructor(e,c=1,g=1e3){this.isFog=!0,this.name="",this.color=new rr(e),this.near=c,this.far=g}clone(){return new Jm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class nv extends $r{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,c){return super.copy(e,c),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const c=super.toJSON(e);return this.fog!==null&&(c.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(c.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(c.object.backgroundIntensity=this.backgroundIntensity),c}}class Kg{constructor(e,c){this.isInterleavedBuffer=!0,this.array=e,this.stride=c,this.count=e!==void 0?e.length/c:0,this.usage=Pp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ba()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,c,g){e*=this.stride,g*=c.stride;for(let v=0,M=this.stride;v<M;v++)this.array[e+v]=c.array[g+v];return this}set(e,c=0){return this.array.set(e,c),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const c=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),g=new this.constructor(c,this.stride);return g.setUsage(this.usage),g}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Tl=new Qe;class Ih{constructor(e,c,g,v=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=c,this.offset=g,this.normalized=v}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let c=0,g=this.data.count;c<g;c++)Tl.fromBufferAttribute(this,c),Tl.applyMatrix4(e),this.setXYZ(c,Tl.x,Tl.y,Tl.z);return this}applyNormalMatrix(e){for(let c=0,g=this.count;c<g;c++)Tl.fromBufferAttribute(this,c),Tl.applyNormalMatrix(e),this.setXYZ(c,Tl.x,Tl.y,Tl.z);return this}transformDirection(e){for(let c=0,g=this.count;c<g;c++)Tl.fromBufferAttribute(this,c),Tl.transformDirection(e),this.setXYZ(c,Tl.x,Tl.y,Tl.z);return this}setX(e,c){return this.normalized&&(c=fi(c,this.array)),this.data.array[e*this.data.stride+this.offset]=c,this}setY(e,c){return this.normalized&&(c=fi(c,this.array)),this.data.array[e*this.data.stride+this.offset+1]=c,this}setZ(e,c){return this.normalized&&(c=fi(c,this.array)),this.data.array[e*this.data.stride+this.offset+2]=c,this}setW(e,c){return this.normalized&&(c=fi(c,this.array)),this.data.array[e*this.data.stride+this.offset+3]=c,this}getX(e){let c=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(c=Ia(c,this.array)),c}getY(e){let c=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(c=Ia(c,this.array)),c}getZ(e){let c=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(c=Ia(c,this.array)),c}getW(e){let c=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(c=Ia(c,this.array)),c}setXY(e,c,g){return e=e*this.data.stride+this.offset,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array)),this.data.array[e+0]=c,this.data.array[e+1]=g,this}setXYZ(e,c,g,v){return e=e*this.data.stride+this.offset,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array),v=fi(v,this.array)),this.data.array[e+0]=c,this.data.array[e+1]=g,this.data.array[e+2]=v,this}setXYZW(e,c,g,v,M){return e=e*this.data.stride+this.offset,this.normalized&&(c=fi(c,this.array),g=fi(g,this.array),v=fi(v,this.array),M=fi(M,this.array)),this.data.array[e+0]=c,this.data.array[e+1]=g,this.data.array[e+2]=v,this.data.array[e+3]=M,this}clone(e){if(e===void 0){S.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const c=[];for(let g=0;g<this.count;g++){const v=g*this.data.stride+this.offset;for(let M=0;M<this.itemSize;M++)c.push(this.data.array[v+M])}return new Qi(new this.array.constructor(c),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ih(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){S.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const c=[];for(let g=0;g<this.count;g++){const v=g*this.data.stride+this.offset;for(let M=0;M<this.itemSize;M++)c.push(this.data.array[v+M])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:c,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Jg extends ia{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let iu;const Wu=new Qe,Td=new Qe,ou=new Qe,Df=new yn,Bd=new yn,rv=new ii,qg=new Qe,Id=new Qe,Zg=new Qe,iv=new yn,J1=new yn,q1=new yn;class qm extends $r{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",iu===void 0){iu=new ui;const c=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),g=new Kg(c,5);iu.setIndex([0,1,2,0,2,3]),iu.setAttribute("position",new Ih(g,3,0,!1)),iu.setAttribute("uv",new Ih(g,2,3,!1))}this.geometry=iu,this.material=e!==void 0?e:new Jg,this.center=new yn(.5,.5)}raycast(e,c){e.camera===null&&S.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Td.setFromMatrixScale(this.matrixWorld),rv.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ou.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Td.multiplyScalar(-ou.z);const g=this.material.rotation;let v,M;g!==0&&(M=Math.cos(g),v=Math.sin(g));const I=this.center;aa(qg.set(-.5,-.5,0),ou,I,Td,v,M),aa(Id.set(.5,-.5,0),ou,I,Td,v,M),aa(Zg.set(.5,.5,0),ou,I,Td,v,M),iv.set(0,0),J1.set(1,0),q1.set(1,1);let R=e.ray.intersectTriangle(qg,Id,Zg,!1,Wu);if(R===null&&(aa(Id.set(-.5,.5,0),ou,I,Td,v,M),J1.set(0,1),R=e.ray.intersectTriangle(qg,Zg,Id,!1,Wu),R===null))return;const z=e.ray.origin.distanceTo(Wu);z<e.near||z>e.far||c.push({distance:z,point:Wu.clone(),uv:Aa.getInterpolation(Wu,qg,Id,Zg,iv,J1,q1,new yn),face:null,object:this})}copy(e,c){return super.copy(e,c),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function aa(C,e,c,g,v,M){Df.subVectors(C,c).addScalar(.5).multiply(g),v!==void 0?(Bd.x=M*Df.x-v*Df.y,Bd.y=v*Df.x+M*Df.y):Bd.copy(Df),C.copy(e),C.x+=Bd.x,C.y+=Bd.y,C.applyMatrix4(rv)}const Zm=new Qe,Rd=new Qe;class ov extends $r{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const c=e.levels;for(let g=0,v=c.length;g<v;g++){const M=c[g];this.addLevel(M.object.clone(),M.distance,M.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,c=0,g=0){c=Math.abs(c);const v=this.levels;let M;for(M=0;M<v.length&&!(c<v[M].distance);M++);return v.splice(M,0,{distance:c,hysteresis:g,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const c=this.levels;if(c.length>0){let g,v;for(g=1,v=c.length;g<v;g++){let M=c[g].distance;if(c[g].object.visible&&(M-=M*c[g].hysteresis),e<M)break}return c[g-1].object}return null}raycast(e,c){if(this.levels.length>0){Zm.setFromMatrixPosition(this.matrixWorld);const v=e.ray.origin.distanceTo(Zm);this.getObjectForDistance(v).raycast(e,c)}}update(e){const c=this.levels;if(c.length>1){Zm.setFromMatrixPosition(e.matrixWorld),Rd.setFromMatrixPosition(this.matrixWorld);const g=Zm.distanceTo(Rd)/e.zoom;c[0].object.visible=!0;let v,M;for(v=1,M=c.length;v<M;v++){let I=c[v].distance;if(c[v].object.visible&&(I-=I*c[v].hysteresis),g>=I)c[v-1].object.visible=!1,c[v].object.visible=!0;else break}for(this._currentLevel=v-1;v<M;v++)c[v].object.visible=!1}}toJSON(e){const c=super.toJSON(e);this.autoUpdate===!1&&(c.object.autoUpdate=!1),c.object.levels=[];const g=this.levels;for(let v=0,M=g.length;v<M;v++){const I=g[v];c.object.levels.push({object:I.object.uuid,distance:I.distance,hysteresis:I.hysteresis})}return c}}const Z1=new Qe,$1=new Qr,sv=new Qr,$m=new Qe,av=new ii,Rh=new Qe,ey=new Fa,lv=new ii,e0=new Ua;class cv extends bs{constructor(e,c){super(e,c),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ii,this.bindMatrixInverse=new ii,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Es),this.boundingBox.makeEmpty();const c=e.getAttribute("position");for(let g=0;g<c.count;g++)Rh.fromBufferAttribute(c,g),this.applyBoneTransform(g,Rh),this.boundingBox.expandByPoint(Rh)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fa),this.boundingSphere.makeEmpty();const c=e.getAttribute("position");for(let g=0;g<c.count;g++)Rh.fromBufferAttribute(c,g),this.applyBoneTransform(g,Rh),this.boundingSphere.expandByPoint(Rh)}copy(e,c){return super.copy(e,c),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,c){const g=this.material,v=this.matrixWorld;g!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ey.copy(this.boundingSphere),ey.applyMatrix4(v),e.ray.intersectsSphere(ey)!==!1&&(lv.copy(v).invert(),e0.copy(e.ray).applyMatrix4(lv),!(this.boundingBox!==null&&e0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,c,e0)))}getVertexPosition(e,c){return super.getVertexPosition(e,c),this.applyBoneTransform(e,c),c}bind(e,c){this.skeleton=e,c===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),c=this.matrixWorld),this.bindMatrix.copy(c),this.bindMatrixInverse.copy(c).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qr,c=this.geometry.attributes.skinWeight;for(let g=0,v=c.count;g<v;g++){e.fromBufferAttribute(c,g);const M=1/e.manhattanLength();M!==1/0?e.multiplyScalar(M):e.set(1,0,0,0),c.setXYZW(g,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():S.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,c){const g=this.skeleton,v=this.geometry;$1.fromBufferAttribute(v.attributes.skinIndex,e),sv.fromBufferAttribute(v.attributes.skinWeight,e),Z1.copy(c).applyMatrix4(this.bindMatrix),c.set(0,0,0);for(let M=0;M<4;M++){const I=sv.getComponent(M);if(I!==0){const R=$1.getComponent(M);av.multiplyMatrices(g.bones[R].matrixWorld,g.boneInverses[R]),c.addScaledVector($m.copy(Z1).applyMatrix4(av),I)}}return c.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,c){return S.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,c)}}class ty extends $r{constructor(){super(),this.isBone=!0,this.type="Bone"}}class $g extends Bo{constructor(e=null,c=1,g=1,v,M,I,R,z,j=_r,W=_r,q,Z){super(null,I,R,z,j,W,v,M,q,Z),this.isDataTexture=!0,this.image={data:e,width:c,height:g},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const j3=new ii,oM=new ii;class t0{constructor(e=[],c=[]){this.uuid=Ba(),this.bones=e.slice(0),this.boneInverses=c,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,c=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),c.length===0)this.calculateInverses();else if(e.length!==c.length){S.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let g=0,v=this.bones.length;g<v;g++)this.boneInverses.push(new ii)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,c=this.bones.length;e<c;e++){const g=new ii;this.bones[e]&&g.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(g)}}pose(){for(let e=0,c=this.bones.length;e<c;e++){const g=this.bones[e];g&&g.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,c=this.bones.length;e<c;e++){const g=this.bones[e];g&&(g.parent&&g.parent.isBone?(g.matrix.copy(g.parent.matrixWorld).invert(),g.matrix.multiply(g.matrixWorld)):g.matrix.copy(g.matrixWorld),g.matrix.decompose(g.position,g.quaternion,g.scale))}}update(){const e=this.bones,c=this.boneInverses,g=this.boneMatrices,v=this.boneTexture;for(let M=0,I=e.length;M<I;M++){const R=e[M]?e[M].matrixWorld:oM;j3.multiplyMatrices(R,c[M]),j3.toArray(g,M*16)}v!==null&&(v.needsUpdate=!0)}clone(){return new t0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ld(e),e=Math.max(e,4);const c=new Float32Array(e*e*4);c.set(this.boneMatrices);const g=new $g(c,e,e,cs,_s);return g.needsUpdate=!0,this.boneMatrices=c,this.boneTexture=g,this.boneTextureSize=e,this}getBoneByName(e){for(let c=0,g=this.bones.length;c<g;c++){const v=this.bones[c];if(v.name===e)return v}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,c){this.uuid=e.uuid;for(let g=0,v=e.bones.length;g<v;g++){const M=e.bones[g];let I=c[M];I===void 0&&(S.warn("THREE.Skeleton: No bone found with UUID:",M),I=new ty),this.bones.push(I),this.boneInverses.push(new ii().fromArray(e.boneInverses[g]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const c=this.bones,g=this.boneInverses;for(let v=0,M=c.length;v<M;v++){const I=c[v];e.bones.push(I.uuid);const R=g[v];e.boneInverses.push(R.toArray())}return e}}class Pf extends Qi{constructor(e,c,g,v=1){super(e,c,g),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=v}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Lf=new ii,pv=new ii,n0=[],ny=new Es,uv=new ii,kf=new bs,la=new Fa;class dv extends bs{constructor(e,c,g){super(e,c),this.isInstancedMesh=!0,this.instanceMatrix=new Pf(new Float32Array(g*16),16),this.instanceColor=null,this.count=g,this.boundingBox=null,this.boundingSphere=null;for(let v=0;v<g;v++)this.setMatrixAt(v,uv)}computeBoundingBox(){const e=this.geometry,c=this.count;this.boundingBox===null&&(this.boundingBox=new Es),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let g=0;g<c;g++)this.getMatrixAt(g,Lf),ny.copy(e.boundingBox).applyMatrix4(Lf),this.boundingBox.union(ny)}computeBoundingSphere(){const e=this.geometry,c=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let g=0;g<c;g++)this.getMatrixAt(g,Lf),la.copy(e.boundingSphere).applyMatrix4(Lf),this.boundingSphere.union(la)}copy(e,c){return super.copy(e,c),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,c){c.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,c){c.fromArray(this.instanceMatrix.array,e*16)}raycast(e,c){const g=this.matrixWorld,v=this.count;if(kf.geometry=this.geometry,kf.material=this.material,kf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),la.copy(this.boundingSphere),la.applyMatrix4(g),e.ray.intersectsSphere(la)!==!1))for(let M=0;M<v;M++){this.getMatrixAt(M,Lf),pv.multiplyMatrices(g,Lf),kf.matrixWorld=pv,kf.raycast(e,n0);for(let I=0,R=n0.length;I<R;I++){const z=n0[I];z.instanceId=M,z.object=this,c.push(z)}n0.length=0}}setColorAt(e,c){this.instanceColor===null&&(this.instanceColor=new Pf(new Float32Array(this.instanceMatrix.count*3),3)),c.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,c){c.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ys extends ia{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const em=new Qe,ry=new Qe,hv=new ii,zf=new Ua,r0=new Fa;class su extends $r{constructor(e=new ui,c=new Ys){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=c,this.updateMorphTargets()}copy(e,c){return super.copy(e,c),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const c=e.attributes.position,g=[0];for(let v=1,M=c.count;v<M;v++)em.fromBufferAttribute(c,v-1),ry.fromBufferAttribute(c,v),g[v]=g[v-1],g[v]+=em.distanceTo(ry);e.setAttribute("lineDistance",new wr(g,1))}else S.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,c){const g=this.geometry,v=this.matrixWorld,M=e.params.Line.threshold,I=g.drawRange;if(g.boundingSphere===null&&g.computeBoundingSphere(),r0.copy(g.boundingSphere),r0.applyMatrix4(v),r0.radius+=M,e.ray.intersectsSphere(r0)===!1)return;hv.copy(v).invert(),zf.copy(e.ray).applyMatrix4(hv);const R=M/((this.scale.x+this.scale.y+this.scale.z)/3),z=R*R,j=new Qe,W=new Qe,q=new Qe,Z=new Qe,ne=this.isLineSegments?2:1,se=g.index,$=g.attributes.position;if(se!==null){const ee=Math.max(0,I.start),ve=Math.min(se.count,I.start+I.count);for(let ue=ee,Ce=ve-1;ue<Ce;ue+=ne){const Oe=se.getX(ue),We=se.getX(ue+1);if(j.fromBufferAttribute($,Oe),W.fromBufferAttribute($,We),zf.distanceSqToSegment(j,W,Z,q)>z)continue;Z.applyMatrix4(this.matrixWorld);const ht=e.ray.origin.distanceTo(Z);ht<e.near||ht>e.far||c.push({distance:ht,point:q.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this})}}else{const ee=Math.max(0,I.start),ve=Math.min($.count,I.start+I.count);for(let ue=ee,Ce=ve-1;ue<Ce;ue+=ne){if(j.fromBufferAttribute($,ue),W.fromBufferAttribute($,ue+1),zf.distanceSqToSegment(j,W,Z,q)>z)continue;Z.applyMatrix4(this.matrixWorld);const We=e.ray.origin.distanceTo(Z);We<e.near||We>e.far||c.push({distance:We,point:q.clone().applyMatrix4(this.matrixWorld),index:ue,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const c=this.geometry.morphAttributes,g=Object.keys(c);if(g.length>0){const v=c[g[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,I=v.length;M<I;M++){const R=v[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=M}}}}}const iy=new Qe,fv=new Qe;class au extends su{constructor(e,c){super(e,c),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const c=e.attributes.position,g=[];for(let v=0,M=c.count;v<M;v+=2)iy.fromBufferAttribute(c,v),fv.fromBufferAttribute(c,v+1),g[v]=v===0?0:g[v-1],g[v+1]=g[v]+iy.distanceTo(fv);e.setAttribute("lineDistance",new wr(g,1))}else S.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gv extends su{constructor(e,c){super(e,c),this.isLineLoop=!0,this.type="LineLoop"}}class i0 extends ia{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const mv=new ii,o0=new Ua,s0=new Fa,a0=new Qe;class yv extends $r{constructor(e=new ui,c=new i0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=c,this.updateMorphTargets()}copy(e,c){return super.copy(e,c),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,c){const g=this.geometry,v=this.matrixWorld,M=e.params.Points.threshold,I=g.drawRange;if(g.boundingSphere===null&&g.computeBoundingSphere(),s0.copy(g.boundingSphere),s0.applyMatrix4(v),s0.radius+=M,e.ray.intersectsSphere(s0)===!1)return;mv.copy(v).invert(),o0.copy(e.ray).applyMatrix4(mv);const R=M/((this.scale.x+this.scale.y+this.scale.z)/3),z=R*R,j=g.index,q=g.attributes.position;if(j!==null){const Z=Math.max(0,I.start),ne=Math.min(j.count,I.start+I.count);for(let se=Z,fe=ne;se<fe;se++){const $=j.getX(se);a0.fromBufferAttribute(q,$),Av(a0,$,z,v,e,c,this)}}else{const Z=Math.max(0,I.start),ne=Math.min(q.count,I.start+I.count);for(let se=Z,fe=ne;se<fe;se++)a0.fromBufferAttribute(q,se),Av(a0,se,z,v,e,c,this)}}updateMorphTargets(){const c=this.geometry.morphAttributes,g=Object.keys(c);if(g.length>0){const v=c[g[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let M=0,I=v.length;M<I;M++){const R=v[M].name||String(M);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=M}}}}}function Av(C,e,c,g,v,M,I){const R=o0.distanceSqToPoint(C);if(R<c){const z=new Qe;o0.closestPointToPoint(C,z),z.applyMatrix4(g);const j=v.ray.origin.distanceTo(z);if(j<v.near||j>v.far)return;M.push({distance:j,distanceToRay:Math.sqrt(R),point:z,index:e,face:null,object:I})}}class H3 extends Bo{constructor(e,c,g,v,M,I,R,z,j){super(e,c,g,v,M,I,R,z,j),this.isVideoTexture=!0,this.minFilter=I!==void 0?I:$i,this.magFilter=M!==void 0?M:$i,this.generateMipmaps=!1;const W=this;function q(){W.needsUpdate=!0,e.requestVideoFrameCallback(q)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(q)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class W3 extends Bo{constructor(e,c){super({width:e,height:c}),this.isFramebufferTexture=!0,this.magFilter=_r,this.minFilter=_r,this.generateMipmaps=!1,this.needsUpdate=!0}}class lu extends Bo{constructor(e,c,g,v,M,I,R,z,j,W,q,Z){super(null,I,R,z,j,W,v,M,q,Z),this.isCompressedTexture=!0,this.image={width:c,height:g},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class V3 extends lu{constructor(e,c,g,v,M,I){super(e,c,g,M,I),this.isCompressedArrayTexture=!0,this.image.depth=v,this.wrapR=ao}}class vv extends lu{constructor(e,c,g){super(void 0,e[0].width,e[0].height,c,g,vs),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Gf extends Bo{constructor(e,c,g,v,M,I,R,z,j){super(e,c,g,v,M,I,R,z,j),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return S.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,c){const g=this.getUtoTmapping(e);return this.getPoint(g,c)}getPoints(e=5){const c=[];for(let g=0;g<=e;g++)c.push(this.getPoint(g/e));return c}getSpacedPoints(e=5){const c=[];for(let g=0;g<=e;g++)c.push(this.getPointAt(g/e));return c}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const c=[];let g,v=this.getPoint(0),M=0;c.push(0);for(let I=1;I<=e;I++)g=this.getPoint(I/e),M+=g.distanceTo(v),c.push(M),v=g;return this.cacheArcLengths=c,c}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,c){const g=this.getLengths();let v=0;const M=g.length;let I;c?I=c:I=e*g[M-1];let R=0,z=M-1,j;for(;R<=z;)if(v=Math.floor(R+(z-R)/2),j=g[v]-I,j<0)R=v+1;else if(j>0)z=v-1;else{z=v;break}if(v=z,g[v]===I)return v/(M-1);const W=g[v],Z=g[v+1]-W,ne=(I-W)/Z;return(v+ne)/(M-1)}getTangent(e,c){let v=e-1e-4,M=e+1e-4;v<0&&(v=0),M>1&&(M=1);const I=this.getPoint(v),R=this.getPoint(M),z=c||(I.isVector2?new yn:new Qe);return z.copy(R).sub(I).normalize(),z}getTangentAt(e,c){const g=this.getUtoTmapping(e);return this.getTangent(g,c)}computeFrenetFrames(e,c){const g=new Qe,v=[],M=[],I=[],R=new Qe,z=new ii;for(let ne=0;ne<=e;ne++){const se=ne/e;v[ne]=this.getTangentAt(se,new Qe)}M[0]=new Qe,I[0]=new Qe;let j=Number.MAX_VALUE;const W=Math.abs(v[0].x),q=Math.abs(v[0].y),Z=Math.abs(v[0].z);W<=j&&(j=W,g.set(1,0,0)),q<=j&&(j=q,g.set(0,1,0)),Z<=j&&g.set(0,0,1),R.crossVectors(v[0],g).normalize(),M[0].crossVectors(v[0],R),I[0].crossVectors(v[0],M[0]);for(let ne=1;ne<=e;ne++){if(M[ne]=M[ne-1].clone(),I[ne]=I[ne-1].clone(),R.crossVectors(v[ne-1],v[ne]),R.length()>Number.EPSILON){R.normalize();const se=Math.acos(go(v[ne-1].dot(v[ne]),-1,1));M[ne].applyMatrix4(z.makeRotationAxis(R,se))}I[ne].crossVectors(v[ne],M[ne])}if(c===!0){let ne=Math.acos(go(M[0].dot(M[e]),-1,1));ne/=e,v[0].dot(R.crossVectors(M[0],M[e]))>0&&(ne=-ne);for(let se=1;se<=e;se++)M[se].applyMatrix4(z.makeRotationAxis(v[se],ne*se)),I[se].crossVectors(v[se],M[se])}return{tangents:v,normals:M,binormals:I}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Fh extends cu{constructor(e=0,c=0,g=1,v=1,M=0,I=Math.PI*2,R=!1,z=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=c,this.xRadius=g,this.yRadius=v,this.aStartAngle=M,this.aEndAngle=I,this.aClockwise=R,this.aRotation=z}getPoint(e,c){const g=c||new yn,v=Math.PI*2;let M=this.aEndAngle-this.aStartAngle;const I=Math.abs(M)<Number.EPSILON;for(;M<0;)M+=v;for(;M>v;)M-=v;M<Number.EPSILON&&(I?M=0:M=v),this.aClockwise===!0&&!I&&(M===v?M=-v:M=M-v);const R=this.aStartAngle+e*M;let z=this.aX+this.xRadius*Math.cos(R),j=this.aY+this.yRadius*Math.sin(R);if(this.aRotation!==0){const W=Math.cos(this.aRotation),q=Math.sin(this.aRotation),Z=z-this.aX,ne=j-this.aY;z=Z*W-ne*q+this.aX,j=Z*q+ne*W+this.aY}return g.set(z,j)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class oy extends Fh{constructor(e,c,g,v,M,I){super(e,c,g,g,v,M,I),this.isArcCurve=!0,this.type="ArcCurve"}}function l0(){let C=0,e=0,c=0,g=0;function v(M,I,R,z){C=M,e=R,c=-3*M+3*I-2*R-z,g=2*M-2*I+R+z}return{initCatmullRom:function(M,I,R,z,j){v(I,R,j*(R-M),j*(z-I))},initNonuniformCatmullRom:function(M,I,R,z,j,W,q){let Z=(I-M)/j-(R-M)/(j+W)+(R-I)/W,ne=(R-I)/W-(z-I)/(W+q)+(z-R)/q;Z*=W,ne*=W,v(I,R,Z,ne)},calc:function(M){const I=M*M,R=I*M;return C+e*M+c*I+g*R}}}const c0=new Qe,sy=new l0,p0=new l0,Uf=new l0;class _v extends cu{constructor(e=[],c=!1,g="centripetal",v=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=c,this.curveType=g,this.tension=v}getPoint(e,c=new Qe){const g=c,v=this.points,M=v.length,I=(M-(this.closed?0:1))*e;let R=Math.floor(I),z=I-R;this.closed?R+=R>0?0:(Math.floor(Math.abs(R)/M)+1)*M:z===0&&R===M-1&&(R=M-2,z=1);let j,W;this.closed||R>0?j=v[(R-1)%M]:(c0.subVectors(v[0],v[1]).add(v[0]),j=c0);const q=v[R%M],Z=v[(R+1)%M];if(this.closed||R+2<M?W=v[(R+2)%M]:(c0.subVectors(v[M-1],v[M-2]).add(v[M-1]),W=c0),this.curveType==="centripetal"||this.curveType==="chordal"){const ne=this.curveType==="chordal"?.5:.25;let se=Math.pow(j.distanceToSquared(q),ne),fe=Math.pow(q.distanceToSquared(Z),ne),$=Math.pow(Z.distanceToSquared(W),ne);fe<1e-4&&(fe=1),se<1e-4&&(se=fe),$<1e-4&&($=fe),sy.initNonuniformCatmullRom(j.x,q.x,Z.x,W.x,se,fe,$),p0.initNonuniformCatmullRom(j.y,q.y,Z.y,W.y,se,fe,$),Uf.initNonuniformCatmullRom(j.z,q.z,Z.z,W.z,se,fe,$)}else this.curveType==="catmullrom"&&(sy.initCatmullRom(j.x,q.x,Z.x,W.x,this.tension),p0.initCatmullRom(j.y,q.y,Z.y,W.y,this.tension),Uf.initCatmullRom(j.z,q.z,Z.z,W.z,this.tension));return g.set(sy.calc(z),p0.calc(z),Uf.calc(z)),g}copy(e){super.copy(e),this.points=[];for(let c=0,g=e.points.length;c<g;c++){const v=e.points[c];this.points.push(v.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let c=0,g=this.points.length;c<g;c++){const v=this.points[c];e.points.push(v.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let c=0,g=e.points.length;c<g;c++){const v=e.points[c];this.points.push(new Qe().fromArray(v))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ay(C,e,c,g,v){const M=(g-e)*.5,I=(v-c)*.5,R=C*C,z=C*R;return(2*c-2*g+M+I)*z+(-3*c+3*g-2*M-I)*R+M*C+c}function sM(C,e){const c=1-C;return c*c*e}function Q3(C,e){return 2*(1-C)*C*e}function aM(C,e){return C*C*e}function Nf(C,e,c,g){return sM(C,e)+Q3(C,c)+aM(C,g)}function X3(C,e){const c=1-C;return c*c*c*e}function Y3(C,e){const c=1-C;return 3*c*c*C*e}function Ev(C,e){return 3*(1-C)*C*C*e}function K3(C,e){return C*C*C*e}function tm(C,e,c,g,v){return X3(C,e)+Y3(C,c)+Ev(C,g)+K3(C,v)}class nm extends cu{constructor(e=new yn,c=new yn,g=new yn,v=new yn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=c,this.v2=g,this.v3=v}getPoint(e,c=new yn){const g=c,v=this.v0,M=this.v1,I=this.v2,R=this.v3;return g.set(tm(e,v.x,M.x,I.x,R.x),tm(e,v.y,M.y,I.y,R.y)),g}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bv extends cu{constructor(e=new Qe,c=new Qe,g=new Qe,v=new Qe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=c,this.v2=g,this.v3=v}getPoint(e,c=new Qe){const g=c,v=this.v0,M=this.v1,I=this.v2,R=this.v3;return g.set(tm(e,v.x,M.x,I.x,R.x),tm(e,v.y,M.y,I.y,R.y),tm(e,v.z,M.z,I.z,R.z)),g}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class u0 extends cu{constructor(e=new yn,c=new yn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=c}getPoint(e,c=new yn){const g=c;return e===1?g.copy(this.v2):(g.copy(this.v2).sub(this.v1),g.multiplyScalar(e).add(this.v1)),g}getPointAt(e,c){return this.getPoint(e,c)}getTangent(e,c=new yn){return c.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,c){return this.getTangent(e,c)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xv extends cu{constructor(e=new Qe,c=new Qe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=c}getPoint(e,c=new Qe){const g=c;return e===1?g.copy(this.v2):(g.copy(this.v2).sub(this.v1),g.multiplyScalar(e).add(this.v1)),g}getPointAt(e,c){return this.getPoint(e,c)}getTangent(e,c=new Qe){return c.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,c){return this.getTangent(e,c)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ly extends cu{constructor(e=new yn,c=new yn,g=new yn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=c,this.v2=g}getPoint(e,c=new yn){const g=c,v=this.v0,M=this.v1,I=this.v2;return g.set(Nf(e,v.x,M.x,I.x),Nf(e,v.y,M.y,I.y)),g}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cy extends cu{constructor(e=new Qe,c=new Qe,g=new Qe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=c,this.v2=g}getPoint(e,c=new Qe){const g=c,v=this.v0,M=this.v1,I=this.v2;return g.set(Nf(e,v.x,M.x,I.x),Nf(e,v.y,M.y,I.y),Nf(e,v.z,M.z,I.z)),g}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rm extends cu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,c=new yn){const g=c,v=this.points,M=(v.length-1)*e,I=Math.floor(M),R=M-I,z=v[I===0?I:I-1],j=v[I],W=v[I>v.length-2?v.length-1:I+1],q=v[I>v.length-3?v.length-1:I+2];return g.set(ay(R,z.x,j.x,W.x,q.x),ay(R,z.y,j.y,W.y,q.y)),g}copy(e){super.copy(e),this.points=[];for(let c=0,g=e.points.length;c<g;c++){const v=e.points[c];this.points.push(v.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let c=0,g=this.points.length;c<g;c++){const v=this.points[c];e.points.push(v.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let c=0,g=e.points.length;c<g;c++){const v=e.points[c];this.points.push(new yn().fromArray(v))}return this}}var d0=Object.freeze({__proto__:null,ArcCurve:oy,CatmullRomCurve3:_v,CubicBezierCurve:nm,CubicBezierCurve3:bv,EllipseCurve:Fh,LineCurve:u0,LineCurve3:xv,QuadraticBezierCurve:ly,QuadraticBezierCurve3:cy,SplineCurve:rm});class py extends cu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);e.equals(c)||this.curves.push(new u0(c,e))}getPoint(e,c){const g=e*this.getLength(),v=this.getCurveLengths();let M=0;for(;M<v.length;){if(v[M]>=g){const I=v[M]-g,R=this.curves[M],z=R.getLength(),j=z===0?0:1-I/z;return R.getPointAt(j,c)}M++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let c=0;for(let g=0,v=this.curves.length;g<v;g++)c+=this.curves[g].getLength(),e.push(c);return this.cacheLengths=e,e}getSpacedPoints(e=40){const c=[];for(let g=0;g<=e;g++)c.push(this.getPoint(g/e));return this.autoClose&&c.push(c[0]),c}getPoints(e=12){const c=[];let g;for(let v=0,M=this.curves;v<M.length;v++){const I=M[v],R=I.isEllipseCurve?e*2:I.isLineCurve||I.isLineCurve3?1:I.isSplineCurve?e*I.points.length:e,z=I.getPoints(R);for(let j=0;j<z.length;j++){const W=z[j];g&&g.equals(W)||(c.push(W),g=W)}}return this.autoClose&&c.length>1&&!c[c.length-1].equals(c[0])&&c.push(c[0]),c}copy(e){super.copy(e),this.curves=[];for(let c=0,g=e.curves.length;c<g;c++){const v=e.curves[c];this.curves.push(v.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let c=0,g=this.curves.length;c<g;c++){const v=this.curves[c];e.curves.push(v.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let c=0,g=e.curves.length;c<g;c++){const v=e.curves[c];this.curves.push(new d0[v.type]().fromJSON(v))}return this}}class Fd extends py{constructor(e){super(),this.type="Path",this.currentPoint=new yn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let c=1,g=e.length;c<g;c++)this.lineTo(e[c].x,e[c].y);return this}moveTo(e,c){return this.currentPoint.set(e,c),this}lineTo(e,c){const g=new u0(this.currentPoint.clone(),new yn(e,c));return this.curves.push(g),this.currentPoint.set(e,c),this}quadraticCurveTo(e,c,g,v){const M=new ly(this.currentPoint.clone(),new yn(e,c),new yn(g,v));return this.curves.push(M),this.currentPoint.set(g,v),this}bezierCurveTo(e,c,g,v,M,I){const R=new nm(this.currentPoint.clone(),new yn(e,c),new yn(g,v),new yn(M,I));return this.curves.push(R),this.currentPoint.set(M,I),this}splineThru(e){const c=[this.currentPoint.clone()].concat(e),g=new rm(c);return this.curves.push(g),this.currentPoint.copy(e[e.length-1]),this}arc(e,c,g,v,M,I){const R=this.currentPoint.x,z=this.currentPoint.y;return this.absarc(e+R,c+z,g,v,M,I),this}absarc(e,c,g,v,M,I){return this.absellipse(e,c,g,g,v,M,I),this}ellipse(e,c,g,v,M,I,R,z){const j=this.currentPoint.x,W=this.currentPoint.y;return this.absellipse(e+j,c+W,g,v,M,I,R,z),this}absellipse(e,c,g,v,M,I,R,z){const j=new Fh(e,c,g,v,M,I,R,z);if(this.curves.length>0){const q=j.getPoint(0);q.equals(this.currentPoint)||this.lineTo(q.x,q.y)}this.curves.push(j);const W=j.getPoint(1);return this.currentPoint.copy(W),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Oh extends ui{constructor(e=[new yn(0,-.5),new yn(.5,0),new yn(0,.5)],c=12,g=0,v=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:c,phiStart:g,phiLength:v},c=Math.floor(c),v=go(v,0,Math.PI*2);const M=[],I=[],R=[],z=[],j=[],W=1/c,q=new Qe,Z=new yn,ne=new Qe,se=new Qe,fe=new Qe;let $=0,ee=0;for(let ve=0;ve<=e.length-1;ve++)switch(ve){case 0:$=e[ve+1].x-e[ve].x,ee=e[ve+1].y-e[ve].y,ne.x=ee*1,ne.y=-$,ne.z=ee*0,fe.copy(ne),ne.normalize(),z.push(ne.x,ne.y,ne.z);break;case e.length-1:z.push(fe.x,fe.y,fe.z);break;default:$=e[ve+1].x-e[ve].x,ee=e[ve+1].y-e[ve].y,ne.x=ee*1,ne.y=-$,ne.z=ee*0,se.copy(ne),ne.x+=fe.x,ne.y+=fe.y,ne.z+=fe.z,ne.normalize(),z.push(ne.x,ne.y,ne.z),fe.copy(se)}for(let ve=0;ve<=c;ve++){const ue=g+ve*W*v,Ce=Math.sin(ue),Oe=Math.cos(ue);for(let We=0;We<=e.length-1;We++){q.x=e[We].x*Ce,q.y=e[We].y,q.z=e[We].x*Oe,I.push(q.x,q.y,q.z),Z.x=ve/c,Z.y=We/(e.length-1),R.push(Z.x,Z.y);const Ze=z[3*We+0]*Ce,ht=z[3*We+1],Te=z[3*We+0]*Oe;j.push(Ze,ht,Te)}}for(let ve=0;ve<c;ve++)for(let ue=0;ue<e.length-1;ue++){const Ce=ue+ve*e.length,Oe=Ce,We=Ce+e.length,Ze=Ce+e.length+1,ht=Ce+1;M.push(Oe,We,ht),M.push(Ze,ht,We)}this.setIndex(M),this.setAttribute("position",new wr(I,3)),this.setAttribute("uv",new wr(R,2)),this.setAttribute("normal",new wr(j,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.points,e.segments,e.phiStart,e.phiLength)}}class Od extends Oh{constructor(e=1,c=1,g=4,v=8){const M=new Fd;M.absarc(0,-c/2,e,Math.PI*1.5,0),M.absarc(0,c/2,e,0,Math.PI*.5),super(M.getPoints(g),v),this.type="CapsuleGeometry",this.parameters={radius:e,length:c,capSegments:g,radialSegments:v}}static fromJSON(e){return new Od(e.radius,e.length,e.capSegments,e.radialSegments)}}class h0 extends ui{constructor(e=1,c=32,g=0,v=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:c,thetaStart:g,thetaLength:v},c=Math.max(3,c);const M=[],I=[],R=[],z=[],j=new Qe,W=new yn;I.push(0,0,0),R.push(0,0,1),z.push(.5,.5);for(let q=0,Z=3;q<=c;q++,Z+=3){const ne=g+q/c*v;j.x=e*Math.cos(ne),j.y=e*Math.sin(ne),I.push(j.x,j.y,j.z),R.push(0,0,1),W.x=(I[Z]/e+1)/2,W.y=(I[Z+1]/e+1)/2,z.push(W.x,W.y)}for(let q=1;q<=c;q++)M.push(q,q+1,0);this.setIndex(M),this.setAttribute("position",new wr(I,3)),this.setAttribute("normal",new wr(R,3)),this.setAttribute("uv",new wr(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Dd extends ui{constructor(e=1,c=1,g=1,v=32,M=1,I=!1,R=0,z=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:c,height:g,radialSegments:v,heightSegments:M,openEnded:I,thetaStart:R,thetaLength:z};const j=this;v=Math.floor(v),M=Math.floor(M);const W=[],q=[],Z=[],ne=[];let se=0;const fe=[],$=g/2;let ee=0;ve(),I===!1&&(e>0&&ue(!0),c>0&&ue(!1)),this.setIndex(W),this.setAttribute("position",new wr(q,3)),this.setAttribute("normal",new wr(Z,3)),this.setAttribute("uv",new wr(ne,2));function ve(){const Ce=new Qe,Oe=new Qe;let We=0;const Ze=(c-e)/g;for(let ht=0;ht<=M;ht++){const Te=[],Ve=ht/M,qt=Ve*(c-e)+e;for(let vn=0;vn<=v;vn++){const jt=vn/v,Wt=jt*z+R,$e=Math.sin(Wt),En=Math.cos(Wt);Oe.x=qt*$e,Oe.y=-Ve*g+$,Oe.z=qt*En,q.push(Oe.x,Oe.y,Oe.z),Ce.set($e,Ze,En).normalize(),Z.push(Ce.x,Ce.y,Ce.z),ne.push(jt,1-Ve),Te.push(se++)}fe.push(Te)}for(let ht=0;ht<v;ht++)for(let Te=0;Te<M;Te++){const Ve=fe[Te][ht],qt=fe[Te+1][ht],vn=fe[Te+1][ht+1],jt=fe[Te][ht+1];W.push(Ve,qt,jt),W.push(qt,vn,jt),We+=6}j.addGroup(ee,We,0),ee+=We}function ue(Ce){const Oe=se,We=new yn,Ze=new Qe;let ht=0;const Te=Ce===!0?e:c,Ve=Ce===!0?1:-1;for(let vn=1;vn<=v;vn++)q.push(0,$*Ve,0),Z.push(0,Ve,0),ne.push(.5,.5),se++;const qt=se;for(let vn=0;vn<=v;vn++){const Wt=vn/v*z+R,$e=Math.cos(Wt),En=Math.sin(Wt);Ze.x=Te*En,Ze.y=$*Ve,Ze.z=Te*$e,q.push(Ze.x,Ze.y,Ze.z),Z.push(0,Ve,0),We.x=$e*.5+.5,We.y=En*.5*Ve+.5,ne.push(We.x,We.y),se++}for(let vn=0;vn<v;vn++){const jt=Oe+vn,Wt=qt+vn;Ce===!0?W.push(Wt,Wt+1,jt):W.push(Wt+1,Wt,jt),ht+=3}j.addGroup(ee,ht,Ce===!0?1:2),ee+=ht}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class im extends Dd{constructor(e=1,c=1,g=32,v=1,M=!1,I=0,R=Math.PI*2){super(0,e,c,g,v,M,I,R),this.type="ConeGeometry",this.parameters={radius:e,height:c,radialSegments:g,heightSegments:v,openEnded:M,thetaStart:I,thetaLength:R}}static fromJSON(e){return new im(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vu extends ui{constructor(e=[],c=[],g=1,v=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:c,radius:g,detail:v};const M=[],I=[];R(v),j(g),W(),this.setAttribute("position",new wr(M,3)),this.setAttribute("normal",new wr(M.slice(),3)),this.setAttribute("uv",new wr(I,2)),v===0?this.computeVertexNormals():this.normalizeNormals();function R(ve){const ue=new Qe,Ce=new Qe,Oe=new Qe;for(let We=0;We<c.length;We+=3)ne(c[We+0],ue),ne(c[We+1],Ce),ne(c[We+2],Oe),z(ue,Ce,Oe,ve)}function z(ve,ue,Ce,Oe){const We=Oe+1,Ze=[];for(let ht=0;ht<=We;ht++){Ze[ht]=[];const Te=ve.clone().lerp(Ce,ht/We),Ve=ue.clone().lerp(Ce,ht/We),qt=We-ht;for(let vn=0;vn<=qt;vn++)vn===0&&ht===We?Ze[ht][vn]=Te:Ze[ht][vn]=Te.clone().lerp(Ve,vn/qt)}for(let ht=0;ht<We;ht++)for(let Te=0;Te<2*(We-ht)-1;Te++){const Ve=Math.floor(Te/2);Te%2===0?(Z(Ze[ht][Ve+1]),Z(Ze[ht+1][Ve]),Z(Ze[ht][Ve])):(Z(Ze[ht][Ve+1]),Z(Ze[ht+1][Ve+1]),Z(Ze[ht+1][Ve]))}}function j(ve){const ue=new Qe;for(let Ce=0;Ce<M.length;Ce+=3)ue.x=M[Ce+0],ue.y=M[Ce+1],ue.z=M[Ce+2],ue.normalize().multiplyScalar(ve),M[Ce+0]=ue.x,M[Ce+1]=ue.y,M[Ce+2]=ue.z}function W(){const ve=new Qe;for(let ue=0;ue<M.length;ue+=3){ve.x=M[ue+0],ve.y=M[ue+1],ve.z=M[ue+2];const Ce=$(ve)/2/Math.PI+.5,Oe=ee(ve)/Math.PI+.5;I.push(Ce,1-Oe)}se(),q()}function q(){for(let ve=0;ve<I.length;ve+=6){const ue=I[ve+0],Ce=I[ve+2],Oe=I[ve+4],We=Math.max(ue,Ce,Oe),Ze=Math.min(ue,Ce,Oe);We>.9&&Ze<.1&&(ue<.2&&(I[ve+0]+=1),Ce<.2&&(I[ve+2]+=1),Oe<.2&&(I[ve+4]+=1))}}function Z(ve){M.push(ve.x,ve.y,ve.z)}function ne(ve,ue){const Ce=ve*3;ue.x=e[Ce+0],ue.y=e[Ce+1],ue.z=e[Ce+2]}function se(){const ve=new Qe,ue=new Qe,Ce=new Qe,Oe=new Qe,We=new yn,Ze=new yn,ht=new yn;for(let Te=0,Ve=0;Te<M.length;Te+=9,Ve+=6){ve.set(M[Te+0],M[Te+1],M[Te+2]),ue.set(M[Te+3],M[Te+4],M[Te+5]),Ce.set(M[Te+6],M[Te+7],M[Te+8]),We.set(I[Ve+0],I[Ve+1]),Ze.set(I[Ve+2],I[Ve+3]),ht.set(I[Ve+4],I[Ve+5]),Oe.copy(ve).add(ue).add(Ce).divideScalar(3);const qt=$(Oe);fe(We,Ve+0,ve,qt),fe(Ze,Ve+2,ue,qt),fe(ht,Ve+4,Ce,qt)}}function fe(ve,ue,Ce,Oe){Oe<0&&ve.x===1&&(I[ue]=ve.x-1),Ce.x===0&&Ce.z===0&&(I[ue]=Oe/2/Math.PI+.5)}function $(ve){return Math.atan2(ve.z,-ve.x)}function ee(ve){return Math.atan2(-ve.y,Math.sqrt(ve.x*ve.x+ve.z*ve.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vu(e.vertices,e.indices,e.radius,e.details)}}class om extends Vu{constructor(e=1,c=0){const g=(1+Math.sqrt(5))/2,v=1/g,M=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-v,-g,0,-v,g,0,v,-g,0,v,g,-v,-g,0,-v,g,0,v,-g,0,v,g,0,-g,0,-v,g,0,-v,-g,0,v,g,0,v],I=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(M,I,e,c),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:c}}static fromJSON(e){return new om(e.radius,e.detail)}}const f0=new Qe,g0=new Qe,m0=new Qe,y0=new Aa;class uy extends ui{constructor(e=null,c=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:c},e!==null){const v=Math.pow(10,4),M=Math.cos(kp*c),I=e.getIndex(),R=e.getAttribute("position"),z=I?I.count:R.count,j=[0,0,0],W=["a","b","c"],q=new Array(3),Z={},ne=[];for(let se=0;se<z;se+=3){I?(j[0]=I.getX(se),j[1]=I.getX(se+1),j[2]=I.getX(se+2)):(j[0]=se,j[1]=se+1,j[2]=se+2);const{a:fe,b:$,c:ee}=y0;if(fe.fromBufferAttribute(R,j[0]),$.fromBufferAttribute(R,j[1]),ee.fromBufferAttribute(R,j[2]),y0.getNormal(m0),q[0]=`${Math.round(fe.x*v)},${Math.round(fe.y*v)},${Math.round(fe.z*v)}`,q[1]=`${Math.round($.x*v)},${Math.round($.y*v)},${Math.round($.z*v)}`,q[2]=`${Math.round(ee.x*v)},${Math.round(ee.y*v)},${Math.round(ee.z*v)}`,!(q[0]===q[1]||q[1]===q[2]||q[2]===q[0]))for(let ve=0;ve<3;ve++){const ue=(ve+1)%3,Ce=q[ve],Oe=q[ue],We=y0[W[ve]],Ze=y0[W[ue]],ht=`${Ce}_${Oe}`,Te=`${Oe}_${Ce}`;Te in Z&&Z[Te]?(m0.dot(Z[Te].normal)<=M&&(ne.push(We.x,We.y,We.z),ne.push(Ze.x,Ze.y,Ze.z)),Z[Te]=null):ht in Z||(Z[ht]={index0:j[ve],index1:j[ue],normal:m0.clone()})}}for(const se in Z)if(Z[se]){const{index0:fe,index1:$}=Z[se];f0.fromBufferAttribute(R,fe),g0.fromBufferAttribute(R,$),ne.push(f0.x,f0.y,f0.z),ne.push(g0.x,g0.y,g0.z)}this.setAttribute("position",new wr(ne,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class jf extends Fd{constructor(e){super(e),this.uuid=Ba(),this.type="Shape",this.holes=[]}getPointsHoles(e){const c=[];for(let g=0,v=this.holes.length;g<v;g++)c[g]=this.holes[g].getPoints(e);return c}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let c=0,g=e.holes.length;c<g;c++){const v=e.holes[c];this.holes.push(v.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let c=0,g=this.holes.length;c<g;c++){const v=this.holes[c];e.holes.push(v.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let c=0,g=e.holes.length;c<g;c++){const v=e.holes[c];this.holes.push(new Fd().fromJSON(v))}return this}}const Mv={triangulate:function(C,e,c=2){const g=e&&e.length,v=g?e[0]*c:C.length;let M=J3(C,0,v,c,!0);const I=[];if(!M||M.next===M.prev)return I;let R,z,j,W,q,Z,ne;if(g&&(M=lM(C,e,M,c)),C.length>80*c){R=j=C[0],z=W=C[1];for(let se=c;se<v;se+=c)q=C[se],Z=C[se+1],q<R&&(R=q),Z<z&&(z=Z),q>j&&(j=q),Z>W&&(W=Z);ne=Math.max(j-R,W-z),ne=ne!==0?32767/ne:0}return sm(M,I,c,R,z,ne,0),I}};function J3(C,e,c,g,v){let M,I;if(v===nE(C,e,c,g)>0)for(M=e;M<c;M+=g)I=Tv(M,C[M],C[M+1],I);else for(M=c-g;M>=e;M-=g)I=Tv(M,C[M],C[M+1],I);return I&&v0(I,I.next)&&(Vf(I),I=I.next),I}function Pd(C,e){if(!C)return C;e||(e=C);let c=C,g;do if(g=!1,!c.steiner&&(v0(c,c.next)||ns(c.prev,c,c.next)===0)){if(Vf(c),c=e=c.prev,c===c.next)break;g=!0}else c=c.next;while(g||c!==e);return e}function sm(C,e,c,g,v,M,I){if(!C)return;!I&&M&&Sv(C,g,v,M);let R=C,z,j;for(;C.prev!==C.next;){if(z=C.prev,j=C.next,M?q3(C,g,v,M):jc(C)){e.push(z.i/c|0),e.push(C.i/c|0),e.push(j.i/c|0),Vf(C),C=j.next,R=j.next;continue}if(C=j,C===R){I?I===1?(C=Z3(Pd(C),e,c),sm(C,e,c,g,v,M,2)):I===2&&Wa(C,e,c,g,v,M):sm(Pd(C),e,c,g,v,M,1);break}}}function jc(C){const e=C.prev,c=C,g=C.next;if(ns(e,c,g)>=0)return!1;const v=e.x,M=c.x,I=g.x,R=e.y,z=c.y,j=g.y,W=v<M?v<I?v:I:M<I?M:I,q=R<z?R<j?R:j:z<j?z:j,Z=v>M?v>I?v:I:M>I?M:I,ne=R>z?R>j?R:j:z>j?z:j;let se=g.next;for(;se!==e;){if(se.x>=W&&se.x<=Z&&se.y>=q&&se.y<=ne&&Hf(v,R,M,z,I,j,se.x,se.y)&&ns(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function q3(C,e,c,g){const v=C.prev,M=C,I=C.next;if(ns(v,M,I)>=0)return!1;const R=v.x,z=M.x,j=I.x,W=v.y,q=M.y,Z=I.y,ne=R<z?R<j?R:j:z<j?z:j,se=W<q?W<Z?W:Z:q<Z?q:Z,fe=R>z?R>j?R:j:z>j?z:j,$=W>q?W>Z?W:Z:q>Z?q:Z,ee=A0(ne,se,e,c,g),ve=A0(fe,$,e,c,g);let ue=C.prevZ,Ce=C.nextZ;for(;ue&&ue.z>=ee&&Ce&&Ce.z<=ve;){if(ue.x>=ne&&ue.x<=fe&&ue.y>=se&&ue.y<=$&&ue!==v&&ue!==I&&Hf(R,W,z,q,j,Z,ue.x,ue.y)&&ns(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,Ce.x>=ne&&Ce.x<=fe&&Ce.y>=se&&Ce.y<=$&&Ce!==v&&Ce!==I&&Hf(R,W,z,q,j,Z,Ce.x,Ce.y)&&ns(Ce.prev,Ce,Ce.next)>=0))return!1;Ce=Ce.nextZ}for(;ue&&ue.z>=ee;){if(ue.x>=ne&&ue.x<=fe&&ue.y>=se&&ue.y<=$&&ue!==v&&ue!==I&&Hf(R,W,z,q,j,Z,ue.x,ue.y)&&ns(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;Ce&&Ce.z<=ve;){if(Ce.x>=ne&&Ce.x<=fe&&Ce.y>=se&&Ce.y<=$&&Ce!==v&&Ce!==I&&Hf(R,W,z,q,j,Z,Ce.x,Ce.y)&&ns(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.nextZ}return!0}function Z3(C,e,c){let g=C;do{const v=g.prev,M=g.next.next;!v0(v,M)&&_0(v,g,g.next,M)&&Wf(v,M)&&Wf(M,v)&&(e.push(v.i/c|0),e.push(g.i/c|0),e.push(M.i/c|0),Vf(g),Vf(g.next),g=C=M),g=g.next}while(g!==C);return Pd(g)}function Wa(C,e,c,g,v,M){let I=C;do{let R=I.next.next;for(;R!==I.prev;){if(I.i!==R.i&&tE(I,R)){let z=wv(I,R);I=Pd(I,I.next),z=Pd(z,z.next),sm(I,e,c,g,v,M,0),sm(z,e,c,g,v,M,0);return}R=R.next}I=I.next}while(I!==C)}function lM(C,e,c,g){const v=[];let M,I,R,z,j;for(M=0,I=e.length;M<I;M++)R=e[M]*g,z=M<I-1?e[M+1]*g:C.length,j=J3(C,R,z,g,!1),j===j.next&&(j.steiner=!0),v.push(eE(j));for(v.sort(Cv),M=0;M<v.length;M++)c=cM(v[M],c);return c}function Cv(C,e){return C.x-e.x}function cM(C,e){const c=pM(C,e);if(!c)return e;const g=wv(c,C);return Pd(g,g.next),Pd(c,c.next)}function pM(C,e){let c=e,g=-1/0,v;const M=C.x,I=C.y;do{if(I<=c.y&&I>=c.next.y&&c.next.y!==c.y){const Z=c.x+(I-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(Z<=M&&Z>g&&(g=Z,v=c.x<c.next.x?c:c.next,Z===M))return v}c=c.next}while(c!==e);if(!v)return null;const R=v,z=v.x,j=v.y;let W=1/0,q;c=v;do M>=c.x&&c.x>=z&&M!==c.x&&Hf(I<j?M:g,I,z,j,I<j?g:M,I,c.x,c.y)&&(q=Math.abs(I-c.y)/(M-c.x),Wf(c,C)&&(q<W||q===W&&(c.x>v.x||c.x===v.x&&$3(v,c)))&&(v=c,W=q)),c=c.next;while(c!==R);return v}function $3(C,e){return ns(C.prev,C,e.prev)<0&&ns(e.next,C,C.next)<0}function Sv(C,e,c,g){let v=C;do v.z===0&&(v.z=A0(v.x,v.y,e,c,g)),v.prevZ=v.prev,v.nextZ=v.next,v=v.next;while(v!==C);v.prevZ.nextZ=null,v.prevZ=null,uM(v)}function uM(C){let e,c,g,v,M,I,R,z,j=1;do{for(c=C,C=null,M=null,I=0;c;){for(I++,g=c,R=0,e=0;e<j&&(R++,g=g.nextZ,!!g);e++);for(z=j;R>0||z>0&&g;)R!==0&&(z===0||!g||c.z<=g.z)?(v=c,c=c.nextZ,R--):(v=g,g=g.nextZ,z--),M?M.nextZ=v:C=v,v.prevZ=M,M=v;c=g}M.nextZ=null,j*=2}while(I>1);return C}function A0(C,e,c,g,v){return C=(C-c)*v|0,e=(e-g)*v|0,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,C|e<<1}function eE(C){let e=C,c=C;do(e.x<c.x||e.x===c.x&&e.y<c.y)&&(c=e),e=e.next;while(e!==C);return c}function Hf(C,e,c,g,v,M,I,R){return(v-I)*(e-R)>=(C-I)*(M-R)&&(C-I)*(g-R)>=(c-I)*(e-R)&&(c-I)*(M-R)>=(v-I)*(g-R)}function tE(C,e){return C.next.i!==e.i&&C.prev.i!==e.i&&!dy(C,e)&&(Wf(C,e)&&Wf(e,C)&&x0(C,e)&&(ns(C.prev,C,e.prev)||ns(C,e.prev,e))||v0(C,e)&&ns(C.prev,C,C.next)>0&&ns(e.prev,e,e.next)>0)}function ns(C,e,c){return(e.y-C.y)*(c.x-e.x)-(e.x-C.x)*(c.y-e.y)}function v0(C,e){return C.x===e.x&&C.y===e.y}function _0(C,e,c,g){const v=b0(ns(C,e,c)),M=b0(ns(C,e,g)),I=b0(ns(c,g,C)),R=b0(ns(c,g,e));return!!(v!==M&&I!==R||v===0&&E0(C,c,e)||M===0&&E0(C,g,e)||I===0&&E0(c,C,g)||R===0&&E0(c,e,g))}function E0(C,e,c){return e.x<=Math.max(C.x,c.x)&&e.x>=Math.min(C.x,c.x)&&e.y<=Math.max(C.y,c.y)&&e.y>=Math.min(C.y,c.y)}function b0(C){return C>0?1:C<0?-1:0}function dy(C,e){let c=C;do{if(c.i!==C.i&&c.next.i!==C.i&&c.i!==e.i&&c.next.i!==e.i&&_0(c,c.next,C,e))return!0;c=c.next}while(c!==C);return!1}function Wf(C,e){return ns(C.prev,C,C.next)<0?ns(C,e,C.next)>=0&&ns(C,C.prev,e)>=0:ns(C,e,C.prev)<0||ns(C,C.next,e)<0}function x0(C,e){let c=C,g=!1;const v=(C.x+e.x)/2,M=(C.y+e.y)/2;do c.y>M!=c.next.y>M&&c.next.y!==c.y&&v<(c.next.x-c.x)*(M-c.y)/(c.next.y-c.y)+c.x&&(g=!g),c=c.next;while(c!==C);return g}function wv(C,e){const c=new M0(C.i,C.x,C.y),g=new M0(e.i,e.x,e.y),v=C.next,M=e.prev;return C.next=e,e.prev=C,c.next=v,v.prev=c,g.next=c,c.prev=g,M.next=g,g.prev=M,g}function Tv(C,e,c,g){const v=new M0(C,e,c);return g?(v.next=g.next,v.prev=g,g.next.prev=v,g.next=v):(v.prev=v,v.next=v),v}function Vf(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function M0(C,e,c){this.i=C,this.x=e,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nE(C,e,c,g){let v=0;for(let M=e,I=c-g;M<c;M+=g)v+=(C[I]-C[M])*(C[M+1]+C[I+1]),I=M;return v}class pu{static area(e){const c=e.length;let g=0;for(let v=c-1,M=0;M<c;v=M++)g+=e[v].x*e[M].y-e[M].x*e[v].y;return g*.5}static isClockWise(e){return pu.area(e)<0}static triangulateShape(e,c){const g=[],v=[],M=[];Bv(e),Ld(g,e);let I=e.length;c.forEach(Bv);for(let z=0;z<c.length;z++)v.push(I),I+=c[z].length,Ld(g,c[z]);const R=Mv.triangulate(g,v);for(let z=0;z<R.length;z+=3)M.push(R.slice(z,z+3));return M}}function Bv(C){const e=C.length;e>2&&C[e-1].equals(C[0])&&C.pop()}function Ld(C,e){for(let c=0;c<e.length;c++)C.push(e[c].x),C.push(e[c].y)}class Dh extends ui{constructor(e=new jf([new yn(.5,.5),new yn(-.5,.5),new yn(-.5,-.5),new yn(.5,-.5)]),c={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:c},e=Array.isArray(e)?e:[e];const g=this,v=[],M=[];for(let R=0,z=e.length;R<z;R++){const j=e[R];I(j)}this.setAttribute("position",new wr(v,3)),this.setAttribute("uv",new wr(M,2)),this.computeVertexNormals();function I(R){const z=[],j=c.curveSegments!==void 0?c.curveSegments:12,W=c.steps!==void 0?c.steps:1,q=c.depth!==void 0?c.depth:1;let Z=c.bevelEnabled!==void 0?c.bevelEnabled:!0,ne=c.bevelThickness!==void 0?c.bevelThickness:.2,se=c.bevelSize!==void 0?c.bevelSize:ne-.1,fe=c.bevelOffset!==void 0?c.bevelOffset:0,$=c.bevelSegments!==void 0?c.bevelSegments:3;const ee=c.extrudePath,ve=c.UVGenerator!==void 0?c.UVGenerator:Qu;let ue,Ce=!1,Oe,We,Ze,ht;ee&&(ue=ee.getSpacedPoints(W),Ce=!0,Z=!1,Oe=ee.computeFrenetFrames(W,!1),We=new Qe,Ze=new Qe,ht=new Qe),Z||($=0,ne=0,se=0,fe=0);const Te=R.extractPoints(j);let Ve=Te.shape;const qt=Te.holes;if(!pu.isClockWise(Ve)){Ve=Ve.reverse();for(let st=0,Jn=qt.length;st<Jn;st++){const Lt=qt[st];pu.isClockWise(Lt)&&(qt[st]=Lt.reverse())}}const jt=pu.triangulateShape(Ve,qt),Wt=Ve;for(let st=0,Jn=qt.length;st<Jn;st++){const Lt=qt[st];Ve=Ve.concat(Lt)}function $e(st,Jn,Lt){return Jn||S.error("THREE.ExtrudeGeometry: vec does not exist"),st.clone().addScaledVector(Jn,Lt)}const En=Ve.length,ln=jt.length;function gn(st,Jn,Lt){let Wn,bn,Vr;const hr=st.x-Jn.x,An=st.y-Jn.y,It=Lt.x-st.x,Ii=Lt.y-st.y,Fo=hr*hr+An*An,et=hr*Ii-An*It;if(Math.abs(et)>Number.EPSILON){const Re=Math.sqrt(Fo),Vt=Math.sqrt(It*It+Ii*Ii),Gn=Jn.x-An/Re,wn=Jn.y+hr/Re,Rn=Lt.x-Ii/Vt,qn=Lt.y+It/Vt,hn=((Rn-Gn)*Ii-(qn-wn)*It)/(hr*Ii-An*It);Wn=Gn+hr*hn-st.x,bn=wn+An*hn-st.y;const Kt=Wn*Wn+bn*bn;if(Kt<=2)return new yn(Wn,bn);Vr=Math.sqrt(Kt/2)}else{let Re=!1;hr>Number.EPSILON?It>Number.EPSILON&&(Re=!0):hr<-Number.EPSILON?It<-Number.EPSILON&&(Re=!0):Math.sign(An)===Math.sign(Ii)&&(Re=!0),Re?(Wn=-An,bn=hr,Vr=Math.sqrt(Fo)):(Wn=hr,bn=An,Vr=Math.sqrt(Fo/2))}return new yn(Wn/Vr,bn/Vr)}const xn=[];for(let st=0,Jn=Wt.length,Lt=Jn-1,Wn=st+1;st<Jn;st++,Lt++,Wn++)Lt===Jn&&(Lt=0),Wn===Jn&&(Wn=0),xn[st]=gn(Wt[st],Wt[Lt],Wt[Wn]);const Sn=[];let Ut,dn=xn.concat();for(let st=0,Jn=qt.length;st<Jn;st++){const Lt=qt[st];Ut=[];for(let Wn=0,bn=Lt.length,Vr=bn-1,hr=Wn+1;Wn<bn;Wn++,Vr++,hr++)Vr===bn&&(Vr=0),hr===bn&&(hr=0),Ut[Wn]=gn(Lt[Wn],Lt[Vr],Lt[hr]);Sn.push(Ut),dn=dn.concat(Ut)}for(let st=0;st<$;st++){const Jn=st/$,Lt=ne*Math.cos(Jn*Math.PI/2),Wn=se*Math.sin(Jn*Math.PI/2)+fe;for(let bn=0,Vr=Wt.length;bn<Vr;bn++){const hr=$e(Wt[bn],xn[bn],Wn);Jr(hr.x,hr.y,-Lt)}for(let bn=0,Vr=qt.length;bn<Vr;bn++){const hr=qt[bn];Ut=Sn[bn];for(let An=0,It=hr.length;An<It;An++){const Ii=$e(hr[An],Ut[An],Wn);Jr(Ii.x,Ii.y,-Lt)}}}const Pn=se+fe;for(let st=0;st<En;st++){const Jn=Z?$e(Ve[st],dn[st],Pn):Ve[st];Ce?(Ze.copy(Oe.normals[0]).multiplyScalar(Jn.x),We.copy(Oe.binormals[0]).multiplyScalar(Jn.y),ht.copy(ue[0]).add(Ze).add(We),Jr(ht.x,ht.y,ht.z)):Jr(Jn.x,Jn.y,0)}for(let st=1;st<=W;st++)for(let Jn=0;Jn<En;Jn++){const Lt=Z?$e(Ve[Jn],dn[Jn],Pn):Ve[Jn];Ce?(Ze.copy(Oe.normals[st]).multiplyScalar(Lt.x),We.copy(Oe.binormals[st]).multiplyScalar(Lt.y),ht.copy(ue[st]).add(Ze).add(We),Jr(ht.x,ht.y,ht.z)):Jr(Lt.x,Lt.y,q/W*st)}for(let st=$-1;st>=0;st--){const Jn=st/$,Lt=ne*Math.cos(Jn*Math.PI/2),Wn=se*Math.sin(Jn*Math.PI/2)+fe;for(let bn=0,Vr=Wt.length;bn<Vr;bn++){const hr=$e(Wt[bn],xn[bn],Wn);Jr(hr.x,hr.y,q+Lt)}for(let bn=0,Vr=qt.length;bn<Vr;bn++){const hr=qt[bn];Ut=Sn[bn];for(let An=0,It=hr.length;An<It;An++){const Ii=$e(hr[An],Ut[An],Wn);Ce?Jr(Ii.x,Ii.y+ue[W-1].y,ue[W-1].x+Lt):Jr(Ii.x,Ii.y,q+Lt)}}}cr(),Er();function cr(){const st=v.length/3;if(Z){let Jn=0,Lt=En*Jn;for(let Wn=0;Wn<ln;Wn++){const bn=jt[Wn];qr(bn[2]+Lt,bn[1]+Lt,bn[0]+Lt)}Jn=W+$*2,Lt=En*Jn;for(let Wn=0;Wn<ln;Wn++){const bn=jt[Wn];qr(bn[0]+Lt,bn[1]+Lt,bn[2]+Lt)}}else{for(let Jn=0;Jn<ln;Jn++){const Lt=jt[Jn];qr(Lt[2],Lt[1],Lt[0])}for(let Jn=0;Jn<ln;Jn++){const Lt=jt[Jn];qr(Lt[0]+En*W,Lt[1]+En*W,Lt[2]+En*W)}}g.addGroup(st,v.length/3-st,0)}function Er(){const st=v.length/3;let Jn=0;ei(Wt,Jn),Jn+=Wt.length;for(let Lt=0,Wn=qt.length;Lt<Wn;Lt++){const bn=qt[Lt];ei(bn,Jn),Jn+=bn.length}g.addGroup(st,v.length/3-st,1)}function ei(st,Jn){let Lt=st.length;for(;--Lt>=0;){const Wn=Lt;let bn=Lt-1;bn<0&&(bn=st.length-1);for(let Vr=0,hr=W+$*2;Vr<hr;Vr++){const An=En*Vr,It=En*(Vr+1),Ii=Jn+Wn+An,Fo=Jn+bn+An,et=Jn+bn+It,Re=Jn+Wn+It;oo(Ii,Fo,et,Re)}}}function Jr(st,Jn,Lt){z.push(st),z.push(Jn),z.push(Lt)}function qr(st,Jn,Lt){gs(st),gs(Jn),gs(Lt);const Wn=v.length/3,bn=ve.generateTopUV(g,v,Wn-3,Wn-2,Wn-1);ai(bn[0]),ai(bn[1]),ai(bn[2])}function oo(st,Jn,Lt,Wn){gs(st),gs(Jn),gs(Wn),gs(Jn),gs(Lt),gs(Wn);const bn=v.length/3,Vr=ve.generateSideWallUV(g,v,bn-6,bn-3,bn-2,bn-1);ai(Vr[0]),ai(Vr[1]),ai(Vr[3]),ai(Vr[1]),ai(Vr[2]),ai(Vr[3])}function gs(st){v.push(z[st*3+0]),v.push(z[st*3+1]),v.push(z[st*3+2])}function ai(st){M.push(st.x),M.push(st.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),c=this.parameters.shapes,g=this.parameters.options;return rE(c,g,e)}static fromJSON(e,c){const g=[];for(let M=0,I=e.shapes.length;M<I;M++){const R=c[e.shapes[M]];g.push(R)}const v=e.options.extrudePath;return v!==void 0&&(e.options.extrudePath=new d0[v.type]().fromJSON(v)),new Dh(g,e.options)}}const Qu={generateTopUV:function(C,e,c,g,v){const M=e[c*3],I=e[c*3+1],R=e[g*3],z=e[g*3+1],j=e[v*3],W=e[v*3+1];return[new yn(M,I),new yn(R,z),new yn(j,W)]},generateSideWallUV:function(C,e,c,g,v,M){const I=e[c*3],R=e[c*3+1],z=e[c*3+2],j=e[g*3],W=e[g*3+1],q=e[g*3+2],Z=e[v*3],ne=e[v*3+1],se=e[v*3+2],fe=e[M*3],$=e[M*3+1],ee=e[M*3+2];return Math.abs(R-W)<Math.abs(I-j)?[new yn(I,1-z),new yn(j,1-q),new yn(Z,1-se),new yn(fe,1-ee)]:[new yn(R,1-z),new yn(W,1-q),new yn(ne,1-se),new yn($,1-ee)]}};function rE(C,e,c){if(c.shapes=[],Array.isArray(C))for(let g=0,v=C.length;g<v;g++){const M=C[g];c.shapes.push(M.uuid)}else c.shapes.push(C.uuid);return c.options=Object.assign({},e),e.extrudePath!==void 0&&(c.options.extrudePath=e.extrudePath.toJSON()),c}class C0 extends Vu{constructor(e=1,c=0){const g=(1+Math.sqrt(5))/2,v=[-1,g,0,1,g,0,-1,-g,0,1,-g,0,0,-1,g,0,1,g,0,-1,-g,0,1,-g,g,0,-1,g,0,1,-g,0,-1,-g,0,1],M=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(v,M,e,c),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:c}}static fromJSON(e){return new C0(e.radius,e.detail)}}class kd extends Vu{constructor(e=1,c=0){const g=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],v=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(g,v,e,c),this.type="OctahedronGeometry",this.parameters={radius:e,detail:c}}static fromJSON(e){return new kd(e.radius,e.detail)}}class Qf extends ui{constructor(e=.5,c=1,g=32,v=1,M=0,I=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:c,thetaSegments:g,phiSegments:v,thetaStart:M,thetaLength:I},g=Math.max(3,g),v=Math.max(1,v);const R=[],z=[],j=[],W=[];let q=e;const Z=(c-e)/v,ne=new Qe,se=new yn;for(let fe=0;fe<=v;fe++){for(let $=0;$<=g;$++){const ee=M+$/g*I;ne.x=q*Math.cos(ee),ne.y=q*Math.sin(ee),z.push(ne.x,ne.y,ne.z),j.push(0,0,1),se.x=(ne.x/c+1)/2,se.y=(ne.y/c+1)/2,W.push(se.x,se.y)}q+=Z}for(let fe=0;fe<v;fe++){const $=fe*(g+1);for(let ee=0;ee<g;ee++){const ve=ee+$,ue=ve,Ce=ve+g+1,Oe=ve+g+2,We=ve+1;R.push(ue,Ce,We),R.push(Ce,Oe,We)}}this.setIndex(R),this.setAttribute("position",new wr(z,3)),this.setAttribute("normal",new wr(j,3)),this.setAttribute("uv",new wr(W,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class S0 extends ui{constructor(e=new jf([new yn(0,.5),new yn(-.5,-.5),new yn(.5,-.5)]),c=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:c};const g=[],v=[],M=[],I=[];let R=0,z=0;if(Array.isArray(e)===!1)j(e);else for(let W=0;W<e.length;W++)j(e[W]),this.addGroup(R,z,W),R+=z,z=0;this.setIndex(g),this.setAttribute("position",new wr(v,3)),this.setAttribute("normal",new wr(M,3)),this.setAttribute("uv",new wr(I,2));function j(W){const q=v.length/3,Z=W.extractPoints(c);let ne=Z.shape;const se=Z.holes;pu.isClockWise(ne)===!1&&(ne=ne.reverse());for(let $=0,ee=se.length;$<ee;$++){const ve=se[$];pu.isClockWise(ve)===!0&&(se[$]=ve.reverse())}const fe=pu.triangulateShape(ne,se);for(let $=0,ee=se.length;$<ee;$++){const ve=se[$];ne=ne.concat(ve)}for(let $=0,ee=ne.length;$<ee;$++){const ve=ne[$];v.push(ve.x,ve.y,0),M.push(0,0,1),I.push(ve.x,ve.y)}for(let $=0,ee=fe.length;$<ee;$++){const ve=fe[$],ue=ve[0]+q,Ce=ve[1]+q,Oe=ve[2]+q;g.push(ue,Ce,Oe),z+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),c=this.parameters.shapes;return iE(c,e)}static fromJSON(e,c){const g=[];for(let v=0,M=e.shapes.length;v<M;v++){const I=c[e.shapes[v]];g.push(I)}return new S0(g,e.curveSegments)}}function iE(C,e){if(e.shapes=[],Array.isArray(C))for(let c=0,g=C.length;c<g;c++){const v=C[c];e.shapes.push(v.uuid)}else e.shapes.push(C.uuid);return e}class Ph extends ui{constructor(e=1,c=32,g=16,v=0,M=Math.PI*2,I=0,R=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:c,heightSegments:g,phiStart:v,phiLength:M,thetaStart:I,thetaLength:R},c=Math.max(3,Math.floor(c)),g=Math.max(2,Math.floor(g));const z=Math.min(I+R,Math.PI);let j=0;const W=[],q=new Qe,Z=new Qe,ne=[],se=[],fe=[],$=[];for(let ee=0;ee<=g;ee++){const ve=[],ue=ee/g;let Ce=0;ee===0&&I===0?Ce=.5/c:ee===g&&z===Math.PI&&(Ce=-.5/c);for(let Oe=0;Oe<=c;Oe++){const We=Oe/c;q.x=-e*Math.cos(v+We*M)*Math.sin(I+ue*R),q.y=e*Math.cos(I+ue*R),q.z=e*Math.sin(v+We*M)*Math.sin(I+ue*R),se.push(q.x,q.y,q.z),Z.copy(q).normalize(),fe.push(Z.x,Z.y,Z.z),$.push(We+Ce,1-ue),ve.push(j++)}W.push(ve)}for(let ee=0;ee<g;ee++)for(let ve=0;ve<c;ve++){const ue=W[ee][ve+1],Ce=W[ee][ve],Oe=W[ee+1][ve],We=W[ee+1][ve+1];(ee!==0||I>0)&&ne.push(ue,Ce,We),(ee!==g-1||z<Math.PI)&&ne.push(Ce,Oe,We)}this.setIndex(ne),this.setAttribute("position",new wr(se,3)),this.setAttribute("normal",new wr(fe,3)),this.setAttribute("uv",new wr($,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ph(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class am extends Vu{constructor(e=1,c=0){const g=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],v=[2,1,0,0,3,2,1,3,0,2,3,1];super(g,v,e,c),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:c}}static fromJSON(e){return new am(e.radius,e.detail)}}class w0 extends ui{constructor(e=1,c=.4,g=12,v=48,M=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:c,radialSegments:g,tubularSegments:v,arc:M},g=Math.floor(g),v=Math.floor(v);const I=[],R=[],z=[],j=[],W=new Qe,q=new Qe,Z=new Qe;for(let ne=0;ne<=g;ne++)for(let se=0;se<=v;se++){const fe=se/v*M,$=ne/g*Math.PI*2;q.x=(e+c*Math.cos($))*Math.cos(fe),q.y=(e+c*Math.cos($))*Math.sin(fe),q.z=c*Math.sin($),R.push(q.x,q.y,q.z),W.x=e*Math.cos(fe),W.y=e*Math.sin(fe),Z.subVectors(q,W).normalize(),z.push(Z.x,Z.y,Z.z),j.push(se/v),j.push(ne/g)}for(let ne=1;ne<=g;ne++)for(let se=1;se<=v;se++){const fe=(v+1)*ne+se-1,$=(v+1)*(ne-1)+se-1,ee=(v+1)*(ne-1)+se,ve=(v+1)*ne+se;I.push(fe,$,ve),I.push($,ee,ve)}this.setIndex(I),this.setAttribute("position",new wr(R,3)),this.setAttribute("normal",new wr(z,3)),this.setAttribute("uv",new wr(j,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new w0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class lm extends ui{constructor(e=1,c=.4,g=64,v=8,M=2,I=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:c,tubularSegments:g,radialSegments:v,p:M,q:I},g=Math.floor(g),v=Math.floor(v);const R=[],z=[],j=[],W=[],q=new Qe,Z=new Qe,ne=new Qe,se=new Qe,fe=new Qe,$=new Qe,ee=new Qe;for(let ue=0;ue<=g;++ue){const Ce=ue/g*M*Math.PI*2;ve(Ce,M,I,e,ne),ve(Ce+.01,M,I,e,se),$.subVectors(se,ne),ee.addVectors(se,ne),fe.crossVectors($,ee),ee.crossVectors(fe,$),fe.normalize(),ee.normalize();for(let Oe=0;Oe<=v;++Oe){const We=Oe/v*Math.PI*2,Ze=-c*Math.cos(We),ht=c*Math.sin(We);q.x=ne.x+(Ze*ee.x+ht*fe.x),q.y=ne.y+(Ze*ee.y+ht*fe.y),q.z=ne.z+(Ze*ee.z+ht*fe.z),z.push(q.x,q.y,q.z),Z.subVectors(q,ne).normalize(),j.push(Z.x,Z.y,Z.z),W.push(ue/g),W.push(Oe/v)}}for(let ue=1;ue<=g;ue++)for(let Ce=1;Ce<=v;Ce++){const Oe=(v+1)*(ue-1)+(Ce-1),We=(v+1)*ue+(Ce-1),Ze=(v+1)*ue+Ce,ht=(v+1)*(ue-1)+Ce;R.push(Oe,We,ht),R.push(We,Ze,ht)}this.setIndex(R),this.setAttribute("position",new wr(z,3)),this.setAttribute("normal",new wr(j,3)),this.setAttribute("uv",new wr(W,2));function ve(ue,Ce,Oe,We,Ze){const ht=Math.cos(ue),Te=Math.sin(ue),Ve=Oe/Ce*ue,qt=Math.cos(Ve);Ze.x=We*(2+qt)*.5*ht,Ze.y=We*(2+qt)*Te*.5,Ze.z=We*Math.sin(Ve)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class T0 extends ui{constructor(e=new cy(new Qe(-1,-1,0),new Qe(-1,1,0),new Qe(1,1,0)),c=64,g=1,v=8,M=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:c,radius:g,radialSegments:v,closed:M};const I=e.computeFrenetFrames(c,M);this.tangents=I.tangents,this.normals=I.normals,this.binormals=I.binormals;const R=new Qe,z=new Qe,j=new yn;let W=new Qe;const q=[],Z=[],ne=[],se=[];fe(),this.setIndex(se),this.setAttribute("position",new wr(q,3)),this.setAttribute("normal",new wr(Z,3)),this.setAttribute("uv",new wr(ne,2));function fe(){for(let ue=0;ue<c;ue++)$(ue);$(M===!1?c:0),ve(),ee()}function $(ue){W=e.getPointAt(ue/c,W);const Ce=I.normals[ue],Oe=I.binormals[ue];for(let We=0;We<=v;We++){const Ze=We/v*Math.PI*2,ht=Math.sin(Ze),Te=-Math.cos(Ze);z.x=Te*Ce.x+ht*Oe.x,z.y=Te*Ce.y+ht*Oe.y,z.z=Te*Ce.z+ht*Oe.z,z.normalize(),Z.push(z.x,z.y,z.z),R.x=W.x+g*z.x,R.y=W.y+g*z.y,R.z=W.z+g*z.z,q.push(R.x,R.y,R.z)}}function ee(){for(let ue=1;ue<=c;ue++)for(let Ce=1;Ce<=v;Ce++){const Oe=(v+1)*(ue-1)+(Ce-1),We=(v+1)*ue+(Ce-1),Ze=(v+1)*ue+Ce,ht=(v+1)*(ue-1)+Ce;se.push(Oe,We,ht),se.push(We,Ze,ht)}}function ve(){for(let ue=0;ue<=c;ue++)for(let Ce=0;Ce<=v;Ce++)j.x=ue/c,j.y=Ce/v,ne.push(j.x,j.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new T0(new d0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Iv extends ui{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const c=[],g=new Set,v=new Qe,M=new Qe;if(e.index!==null){const I=e.attributes.position,R=e.index;let z=e.groups;z.length===0&&(z=[{start:0,count:R.count,materialIndex:0}]);for(let j=0,W=z.length;j<W;++j){const q=z[j],Z=q.start,ne=q.count;for(let se=Z,fe=Z+ne;se<fe;se+=3)for(let $=0;$<3;$++){const ee=R.getX(se+$),ve=R.getX(se+($+1)%3);v.fromBufferAttribute(I,ee),M.fromBufferAttribute(I,ve),pc(v,M,g)===!0&&(c.push(v.x,v.y,v.z),c.push(M.x,M.y,M.z))}}}else{const I=e.attributes.position;for(let R=0,z=I.count/3;R<z;R++)for(let j=0;j<3;j++){const W=3*R+j,q=3*R+(j+1)%3;v.fromBufferAttribute(I,W),M.fromBufferAttribute(I,q),pc(v,M,g)===!0&&(c.push(v.x,v.y,v.z),c.push(M.x,M.y,M.z))}}this.setAttribute("position",new wr(c,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function pc(C,e,c){const g=`${C.x},${C.y},${C.z}-${e.x},${e.y},${e.z}`,v=`${e.x},${e.y},${e.z}-${C.x},${C.y},${C.z}`;return c.has(g)===!0||c.has(v)===!0?!1:(c.add(g),c.add(v),!0)}var Rv=Object.freeze({__proto__:null,BoxGeometry:kc,CapsuleGeometry:Od,CircleGeometry:h0,ConeGeometry:im,CylinderGeometry:Dd,DodecahedronGeometry:om,EdgesGeometry:uy,ExtrudeGeometry:Dh,IcosahedronGeometry:C0,LatheGeometry:Oh,OctahedronGeometry:kd,PlaneGeometry:mp,PolyhedronGeometry:Vu,RingGeometry:Qf,ShapeGeometry:S0,SphereGeometry:Ph,TetrahedronGeometry:am,TorusGeometry:w0,TorusKnotGeometry:lm,TubeGeometry:T0,WireframeGeometry:Iv});class Fv extends ia{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rr(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ov extends Qo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Xu extends ia{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jl,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Dv extends Xu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new yn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return go(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(c){this.ior=(1+.4*c)/(1-.4*c)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Pv extends ia{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rr(16777215),this.specular=new rr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jl,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ki,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lv extends ia{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jl,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kv extends ia{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jl,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class B0 extends ia{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jl,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ki,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zv extends ia{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jl,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uc extends Ys{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function fl(C,e,c){return Gv(C)?new C.constructor(C.subarray(e,c!==void 0?c:C.length)):C.slice(e,c)}function dc(C,e,c){return!C||!c&&C.constructor===e?C:typeof e.BYTES_PER_ELEMENT=="number"?new e(C):Array.prototype.slice.call(C)}function Gv(C){return ArrayBuffer.isView(C)&&!(C instanceof DataView)}function gl(C){function e(v,M){return C[v]-C[M]}const c=C.length,g=new Array(c);for(let v=0;v!==c;++v)g[v]=v;return g.sort(e),g}function hy(C,e,c){const g=C.length,v=new C.constructor(g);for(let M=0,I=0;I!==g;++M){const R=c[M]*e;for(let z=0;z!==e;++z)v[I++]=C[R+z]}return v}function I0(C,e,c,g){let v=1,M=C[0];for(;M!==void 0&&M[g]===void 0;)M=C[v++];if(M===void 0)return;let I=M[g];if(I!==void 0)if(Array.isArray(I))do I=M[g],I!==void 0&&(e.push(M.time),c.push.apply(c,I)),M=C[v++];while(M!==void 0);else if(I.toArray!==void 0)do I=M[g],I!==void 0&&(e.push(M.time),I.toArray(c,c.length)),M=C[v++];while(M!==void 0);else do I=M[g],I!==void 0&&(e.push(M.time),c.push(I)),M=C[v++];while(M!==void 0)}function oE(C,e,c,g,v=30){const M=C.clone();M.name=e;const I=[];for(let z=0;z<M.tracks.length;++z){const j=M.tracks[z],W=j.getValueSize(),q=[],Z=[];for(let ne=0;ne<j.times.length;++ne){const se=j.times[ne]*v;if(!(se<c||se>=g)){q.push(j.times[ne]);for(let fe=0;fe<W;++fe)Z.push(j.values[ne*W+fe])}}q.length!==0&&(j.times=dc(q,j.times.constructor),j.values=dc(Z,j.values.constructor),I.push(j))}M.tracks=I;let R=1/0;for(let z=0;z<M.tracks.length;++z)R>M.tracks[z].times[0]&&(R=M.tracks[z].times[0]);for(let z=0;z<M.tracks.length;++z)M.tracks[z].shift(-1*R);return M.resetDuration(),M}function sE(C,e=0,c=C,g=30){g<=0&&(g=30);const v=c.tracks.length,M=e/g;for(let I=0;I<v;++I){const R=c.tracks[I],z=R.ValueTypeName;if(z==="bool"||z==="string")continue;const j=C.tracks.find(function(ee){return ee.name===R.name&&ee.ValueTypeName===z});if(j===void 0)continue;let W=0;const q=R.getValueSize();R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(W=q/3);let Z=0;const ne=j.getValueSize();j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=ne/3);const se=R.times.length-1;let fe;if(M<=R.times[0]){const ee=W,ve=q-W;fe=fl(R.values,ee,ve)}else if(M>=R.times[se]){const ee=se*q+W,ve=ee+q-W;fe=fl(R.values,ee,ve)}else{const ee=R.createInterpolant(),ve=W,ue=q-W;ee.evaluate(M),fe=fl(ee.resultBuffer,ve,ue)}z==="quaternion"&&new ya().fromArray(fe).normalize().conjugate().toArray(fe);const $=j.times.length;for(let ee=0;ee<$;++ee){const ve=ee*ne+Z;if(z==="quaternion")ya.multiplyQuaternionsFlat(j.values,ve,fe,0,j.values,ve);else{const ue=ne-Z*2;for(let Ce=0;Ce<ue;++Ce)j.values[ve+Ce]-=fe[Ce]}}}return C.blendMode=qd,C}const aE={arraySlice:fl,convertArray:dc,isTypedArray:Gv,getKeyframeOrder:gl,sortedArray:hy,flattenJSON:I0,subclip:oE,makeClipAdditive:sE};class Xf{constructor(e,c,g,v){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=v!==void 0?v:new c.constructor(g),this.sampleValues=c,this.valueSize=g,this.settings=null,this.DefaultSettings_={}}evaluate(e){const c=this.parameterPositions;let g=this._cachedIndex,v=c[g],M=c[g-1];e:{t:{let I;n:{r:if(!(e<v)){for(let R=g+2;;){if(v===void 0){if(e<M)break r;return g=c.length,this._cachedIndex=g,this.copySampleValue_(g-1)}if(g===R)break;if(M=v,v=c[++g],e<v)break t}I=c.length;break n}if(!(e>=M)){const R=c[1];e<R&&(g=2,M=R);for(let z=g-2;;){if(M===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(g===z)break;if(v=M,M=c[--g-1],e>=M)break t}I=g,g=0;break n}break e}for(;g<I;){const R=g+I>>>1;e<c[R]?I=R:g=R+1}if(v=c[g],M=c[g-1],M===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(v===void 0)return g=c.length,this._cachedIndex=g,this.copySampleValue_(g-1)}this._cachedIndex=g,this.intervalChanged_(g,M,v)}return this.interpolate_(g,M,e,v)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const c=this.resultBuffer,g=this.sampleValues,v=this.valueSize,M=e*v;for(let I=0;I!==v;++I)c[I]=g[M+I];return c}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fy extends Xf{constructor(e,c,g,v){super(e,c,g,v),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_c,endingEnd:_c}}intervalChanged_(e,c,g){const v=this.parameterPositions;let M=e-2,I=e+1,R=v[M],z=v[I];if(R===void 0)switch(this.getSettings_().endingStart){case Yl:M=e,R=2*c-g;break;case Op:M=v.length-2,R=c+v[M]-v[M+1];break;default:M=e,R=g}if(z===void 0)switch(this.getSettings_().endingEnd){case Yl:I=e,z=2*g-c;break;case Op:I=1,z=g+v[1]-v[0];break;default:I=e-1,z=c}const j=(g-c)*.5,W=this.valueSize;this._weightPrev=j/(c-R),this._weightNext=j/(z-g),this._offsetPrev=M*W,this._offsetNext=I*W}interpolate_(e,c,g,v){const M=this.resultBuffer,I=this.sampleValues,R=this.valueSize,z=e*R,j=z-R,W=this._offsetPrev,q=this._offsetNext,Z=this._weightPrev,ne=this._weightNext,se=(g-c)/(v-c),fe=se*se,$=fe*se,ee=-Z*$+2*Z*fe-Z*se,ve=(1+Z)*$+(-1.5-2*Z)*fe+(-.5+Z)*se+1,ue=(-1-ne)*$+(1.5+ne)*fe+.5*se,Ce=ne*$-ne*fe;for(let Oe=0;Oe!==R;++Oe)M[Oe]=ee*I[W+Oe]+ve*I[j+Oe]+ue*I[z+Oe]+Ce*I[q+Oe];return M}}class gy extends Xf{constructor(e,c,g,v){super(e,c,g,v)}interpolate_(e,c,g,v){const M=this.resultBuffer,I=this.sampleValues,R=this.valueSize,z=e*R,j=z-R,W=(g-c)/(v-c),q=1-W;for(let Z=0;Z!==R;++Z)M[Z]=I[j+Z]*q+I[z+Z]*W;return M}}class Uv extends Xf{constructor(e,c,g,v){super(e,c,g,v)}interpolate_(e){return this.copySampleValue_(e-1)}}class Mp{constructor(e,c,g,v){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(c===void 0||c.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dc(c,this.TimeBufferType),this.values=dc(g,this.ValueBufferType),this.setInterpolation(v||this.DefaultInterpolation)}static toJSON(e){const c=e.constructor;let g;if(c.toJSON!==this.toJSON)g=c.toJSON(e);else{g={name:e.name,times:dc(e.times,Array),values:dc(e.values,Array)};const v=e.getInterpolation();v!==e.DefaultInterpolation&&(g.interpolation=v)}return g.type=e.ValueTypeName,g}InterpolantFactoryMethodDiscrete(e){return new Uv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let c;switch(e){case wo:c=this.InterpolantFactoryMethodDiscrete;break;case ps:c=this.InterpolantFactoryMethodLinear;break;case Ta:c=this.InterpolantFactoryMethodSmooth;break}if(c===void 0){const g="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(g);return S.warn("THREE.KeyframeTrack:",g),this}return this.createInterpolant=c,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wo;case this.InterpolantFactoryMethodLinear:return ps;case this.InterpolantFactoryMethodSmooth:return Ta}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const c=this.times;for(let g=0,v=c.length;g!==v;++g)c[g]+=e}return this}scale(e){if(e!==1){const c=this.times;for(let g=0,v=c.length;g!==v;++g)c[g]*=e}return this}trim(e,c){const g=this.times,v=g.length;let M=0,I=v-1;for(;M!==v&&g[M]<e;)++M;for(;I!==-1&&g[I]>c;)--I;if(++I,M!==0||I!==v){M>=I&&(I=Math.max(I,1),M=I-1);const R=this.getValueSize();this.times=fl(g,M,I),this.values=fl(this.values,M*R,I*R)}return this}validate(){let e=!0;const c=this.getValueSize();c-Math.floor(c)!==0&&(S.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const g=this.times,v=this.values,M=g.length;M===0&&(S.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let I=null;for(let R=0;R!==M;R++){const z=g[R];if(typeof z=="number"&&isNaN(z)){S.error("THREE.KeyframeTrack: Time is not a valid number.",this,R,z),e=!1;break}if(I!==null&&I>z){S.error("THREE.KeyframeTrack: Out of order keys.",this,R,z,I),e=!1;break}I=z}if(v!==void 0&&Gv(v))for(let R=0,z=v.length;R!==z;++R){const j=v[R];if(isNaN(j)){S.error("THREE.KeyframeTrack: Value is not a valid number.",this,R,j),e=!1;break}}return e}optimize(){const e=fl(this.times),c=fl(this.values),g=this.getValueSize(),v=this.getInterpolation()===Ta,M=e.length-1;let I=1;for(let R=1;R<M;++R){let z=!1;const j=e[R],W=e[R+1];if(j!==W&&(R!==1||j!==e[0]))if(v)z=!0;else{const q=R*g,Z=q-g,ne=q+g;for(let se=0;se!==g;++se){const fe=c[q+se];if(fe!==c[Z+se]||fe!==c[ne+se]){z=!0;break}}}if(z){if(R!==I){e[I]=e[R];const q=R*g,Z=I*g;for(let ne=0;ne!==g;++ne)c[Z+ne]=c[q+ne]}++I}}if(M>0){e[I]=e[M];for(let R=M*g,z=I*g,j=0;j!==g;++j)c[z+j]=c[R+j];++I}return I!==e.length?(this.times=fl(e,0,I),this.values=fl(c,0,I*g)):(this.times=e,this.values=c),this}clone(){const e=fl(this.times,0),c=fl(this.values,0),g=this.constructor,v=new g(this.name,e,c);return v.createInterpolant=this.createInterpolant,v}}Mp.prototype.TimeBufferType=Float32Array,Mp.prototype.ValueBufferType=Float32Array,Mp.prototype.DefaultInterpolation=ps;class Ki extends Mp{}Ki.prototype.ValueTypeName="bool",Ki.prototype.ValueBufferType=Array,Ki.prototype.DefaultInterpolation=wo,Ki.prototype.InterpolantFactoryMethodLinear=void 0,Ki.prototype.InterpolantFactoryMethodSmooth=void 0;class cm extends Mp{}cm.prototype.ValueTypeName="color";class pm extends Mp{}pm.prototype.ValueTypeName="number";class Nv extends Xf{constructor(e,c,g,v){super(e,c,g,v)}interpolate_(e,c,g,v){const M=this.resultBuffer,I=this.sampleValues,R=this.valueSize,z=(g-c)/(v-c);let j=e*R;for(let W=j+R;j!==W;j+=4)ya.slerpFlat(M,0,I,j-R,I,j,z);return M}}class Yf extends Mp{InterpolantFactoryMethodLinear(e){return new Nv(this.times,this.values,this.getValueSize(),e)}}Yf.prototype.ValueTypeName="quaternion",Yf.prototype.DefaultInterpolation=ps,Yf.prototype.InterpolantFactoryMethodSmooth=void 0;class Lh extends Mp{}Lh.prototype.ValueTypeName="string",Lh.prototype.ValueBufferType=Array,Lh.prototype.DefaultInterpolation=wo,Lh.prototype.InterpolantFactoryMethodLinear=void 0,Lh.prototype.InterpolantFactoryMethodSmooth=void 0;class um extends Mp{}um.prototype.ValueTypeName="vector";class R0{constructor(e,c=-1,g,v=Kh){this.name=e,this.tracks=g,this.duration=c,this.blendMode=v,this.uuid=Ba(),this.duration<0&&this.resetDuration()}static parse(e){const c=[],g=e.tracks,v=1/(e.fps||1);for(let I=0,R=g.length;I!==R;++I)c.push(lE(g[I]).scale(v));const M=new this(e.name,e.duration,c,e.blendMode);return M.uuid=e.uuid,M}static toJSON(e){const c=[],g=e.tracks,v={name:e.name,duration:e.duration,tracks:c,uuid:e.uuid,blendMode:e.blendMode};for(let M=0,I=g.length;M!==I;++M)c.push(Mp.toJSON(g[M]));return v}static CreateFromMorphTargetSequence(e,c,g,v){const M=c.length,I=[];for(let R=0;R<M;R++){let z=[],j=[];z.push((R+M-1)%M,R,(R+1)%M),j.push(0,1,0);const W=gl(z);z=hy(z,1,W),j=hy(j,1,W),!v&&z[0]===0&&(z.push(M),j.push(j[0])),I.push(new pm(".morphTargetInfluences["+c[R].name+"]",z,j).scale(1/g))}return new this(e,-1,I)}static findByName(e,c){let g=e;if(!Array.isArray(e)){const v=e;g=v.geometry&&v.geometry.animations||v.animations}for(let v=0;v<g.length;v++)if(g[v].name===c)return g[v];return null}static CreateClipsFromMorphTargetSequences(e,c,g){const v={},M=/^([\w-]*?)([\d]+)$/;for(let R=0,z=e.length;R<z;R++){const j=e[R],W=j.name.match(M);if(W&&W.length>1){const q=W[1];let Z=v[q];Z||(v[q]=Z=[]),Z.push(j)}}const I=[];for(const R in v)I.push(this.CreateFromMorphTargetSequence(R,v[R],c,g));return I}static parseAnimation(e,c){if(!e)return S.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const g=function(q,Z,ne,se,fe){if(ne.length!==0){const $=[],ee=[];I0(ne,$,ee,se),$.length!==0&&fe.push(new q(Z,$,ee))}},v=[],M=e.name||"default",I=e.fps||30,R=e.blendMode;let z=e.length||-1;const j=e.hierarchy||[];for(let q=0;q<j.length;q++){const Z=j[q].keys;if(!(!Z||Z.length===0))if(Z[0].morphTargets){const ne={};let se;for(se=0;se<Z.length;se++)if(Z[se].morphTargets)for(let fe=0;fe<Z[se].morphTargets.length;fe++)ne[Z[se].morphTargets[fe]]=-1;for(const fe in ne){const $=[],ee=[];for(let ve=0;ve!==Z[se].morphTargets.length;++ve){const ue=Z[se];$.push(ue.time),ee.push(ue.morphTarget===fe?1:0)}v.push(new pm(".morphTargetInfluence["+fe+"]",$,ee))}z=ne.length*I}else{const ne=".bones["+c[q].name+"]";g(um,ne+".position",Z,"pos",v),g(Yf,ne+".quaternion",Z,"rot",v),g(um,ne+".scale",Z,"scl",v)}}return v.length===0?null:new this(M,z,v,R)}resetDuration(){const e=this.tracks;let c=0;for(let g=0,v=e.length;g!==v;++g){const M=this.tracks[g];c=Math.max(c,M.times[M.times.length-1])}return this.duration=c,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let c=0;c<this.tracks.length;c++)e=e&&this.tracks[c].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let c=0;c<this.tracks.length;c++)e.push(this.tracks[c].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jv(C){switch(C.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pm;case"vector":case"vector2":case"vector3":case"vector4":return um;case"color":return cm;case"quaternion":return Yf;case"bool":case"boolean":return Ki;case"string":return Lh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+C)}function lE(C){if(C.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jv(C.type);if(C.times===void 0){const c=[],g=[];I0(C.keys,c,g,"value"),C.times=c,C.values=g}return e.parse!==void 0?e.parse(C):new e(C.name,C.times,C.values,C.interpolation)}const zd={enabled:!1,files:{},add:function(C,e){this.enabled!==!1&&(this.files[C]=e)},get:function(C){if(this.enabled!==!1)return this.files[C]},remove:function(C){delete this.files[C]},clear:function(){this.files={}}};class my{constructor(e,c,g){const v=this;let M=!1,I=0,R=0,z;const j=[];this.onStart=void 0,this.onLoad=e,this.onProgress=c,this.onError=g,this.itemStart=function(W){R++,M===!1&&v.onStart!==void 0&&v.onStart(W,I,R),M=!0},this.itemEnd=function(W){I++,v.onProgress!==void 0&&v.onProgress(W,I,R),I===R&&(M=!1,v.onLoad!==void 0&&v.onLoad())},this.itemError=function(W){v.onError!==void 0&&v.onError(W)},this.resolveURL=function(W){return z?z(W):W},this.setURLModifier=function(W){return z=W,this},this.addHandler=function(W,q){return j.push(W,q),this},this.removeHandler=function(W){const q=j.indexOf(W);return q!==-1&&j.splice(q,2),this},this.getHandler=function(W){for(let q=0,Z=j.length;q<Z;q+=2){const ne=j[q],se=j[q+1];if(ne.global&&(ne.lastIndex=0),ne.test(W))return se}return null}}}const Hv=new my;class mo{constructor(e){this.manager=e!==void 0?e:Hv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,c){const g=this;return new Promise(function(v,M){g.load(e,v,c,M)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}mo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hc={};class cE extends Error{constructor(e,c){super(e),this.response=c}}class uu extends mo{constructor(e){super(e)}load(e,c,g,v){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=zd.get(e);if(M!==void 0)return this.manager.itemStart(e),setTimeout(()=>{c&&c(M),this.manager.itemEnd(e)},0),M;if(Hc[e]!==void 0){Hc[e].push({onLoad:c,onProgress:g,onError:v});return}Hc[e]=[],Hc[e].push({onLoad:c,onProgress:g,onError:v});const I=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),R=this.mimeType,z=this.responseType;fetch(I).then(j=>{if(j.status===200||j.status===0){if(j.status===0&&S.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||j.body===void 0||j.body.getReader===void 0)return j;const W=Hc[e],q=j.body.getReader(),Z=j.headers.get("Content-Length")||j.headers.get("X-File-Size"),ne=Z?parseInt(Z):0,se=ne!==0;let fe=0;const $=new ReadableStream({start(ee){ve();function ve(){q.read().then(({done:ue,value:Ce})=>{if(ue)ee.close();else{fe+=Ce.byteLength;const Oe=new ProgressEvent("progress",{lengthComputable:se,loaded:fe,total:ne});for(let We=0,Ze=W.length;We<Ze;We++){const ht=W[We];ht.onProgress&&ht.onProgress(Oe)}ee.enqueue(Ce),ve()}})}}});return new Response($)}else throw new cE(`fetch for "${j.url}" responded with ${j.status}: ${j.statusText}`,j)}).then(j=>{switch(z){case"arraybuffer":return j.arrayBuffer();case"blob":return j.blob();case"document":return j.text().then(W=>new DOMParser().parseFromString(W,R));case"json":return j.json();default:if(R===void 0)return j.text();{const q=/charset="?([^;"\s]*)"?/i.exec(R),Z=q&&q[1]?q[1].toLowerCase():void 0,ne=new TextDecoder(Z);return j.arrayBuffer().then(se=>ne.decode(se))}}}).then(j=>{zd.add(e,j);const W=Hc[e];delete Hc[e];for(let q=0,Z=W.length;q<Z;q++){const ne=W[q];ne.onLoad&&ne.onLoad(j)}}).catch(j=>{const W=Hc[e];if(W===void 0)throw this.manager.itemError(e),j;delete Hc[e];for(let q=0,Z=W.length;q<Z;q++){const ne=W[q];ne.onError&&ne.onError(j)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pE extends mo{constructor(e){super(e)}load(e,c,g,v){const M=this,I=new uu(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(e,function(R){try{c(M.parse(JSON.parse(R)))}catch(z){v?v(z):S.error(z),M.manager.itemError(e)}},g,v)}parse(e){const c=[];for(let g=0;g<e.length;g++){const v=R0.parse(e[g]);c.push(v)}return c}}class uE extends mo{constructor(e){super(e)}load(e,c,g,v){const M=this,I=[],R=new lu,z=new uu(this.manager);z.setPath(this.path),z.setResponseType("arraybuffer"),z.setRequestHeader(this.requestHeader),z.setWithCredentials(M.withCredentials);let j=0;function W(q){z.load(e[q],function(Z){const ne=M.parse(Z,!0);I[q]={width:ne.width,height:ne.height,format:ne.format,mipmaps:ne.mipmaps},j+=1,j===6&&(ne.mipmapCount===1&&(R.minFilter=$i),R.image=I,R.format=ne.format,R.needsUpdate=!0,c&&c(R))},g,v)}if(Array.isArray(e))for(let q=0,Z=e.length;q<Z;++q)W(q);else z.load(e,function(q){const Z=M.parse(q,!0);if(Z.isCubemap){const ne=Z.mipmaps.length/Z.mipmapCount;for(let se=0;se<ne;se++){I[se]={mipmaps:[]};for(let fe=0;fe<Z.mipmapCount;fe++)I[se].mipmaps.push(Z.mipmaps[se*Z.mipmapCount+fe]),I[se].format=Z.format,I[se].width=Z.width,I[se].height=Z.height}R.image=I}else R.image.width=Z.width,R.image.height=Z.height,R.mipmaps=Z.mipmaps;Z.mipmapCount===1&&(R.minFilter=$i),R.format=Z.format,R.needsUpdate=!0,c&&c(R)},g,v);return R}}class dm extends mo{constructor(e){super(e)}load(e,c,g,v){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=this,I=zd.get(e);if(I!==void 0)return M.manager.itemStart(e),setTimeout(function(){c&&c(I),M.manager.itemEnd(e)},0),I;const R=cd("img");function z(){W(),zd.add(e,this),c&&c(this),M.manager.itemEnd(e)}function j(q){W(),v&&v(q),M.manager.itemError(e),M.manager.itemEnd(e)}function W(){R.removeEventListener("load",z,!1),R.removeEventListener("error",j,!1)}return R.addEventListener("load",z,!1),R.addEventListener("error",j,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(R.crossOrigin=this.crossOrigin),M.manager.itemStart(e),R.src=e,R}}class Wv extends mo{constructor(e){super(e)}load(e,c,g,v){const M=new Nl;M.colorSpace=To;const I=new dm(this.manager);I.setCrossOrigin(this.crossOrigin),I.setPath(this.path);let R=0;function z(j){I.load(e[j],function(W){M.images[j]=W,R++,R===6&&(M.needsUpdate=!0,c&&c(M))},void 0,v)}for(let j=0;j<e.length;++j)z(j);return M}}class Vv extends mo{constructor(e){super(e)}load(e,c,g,v){const M=this,I=new $g,R=new uu(this.manager);return R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(M.withCredentials),R.load(e,function(z){let j;try{j=M.parse(z)}catch(W){if(v!==void 0)v(W);else{S.error(W);return}}j.image!==void 0?I.image=j.image:j.data!==void 0&&(I.image.width=j.width,I.image.height=j.height,I.image.data=j.data),I.wrapS=j.wrapS!==void 0?j.wrapS:ao,I.wrapT=j.wrapT!==void 0?j.wrapT:ao,I.magFilter=j.magFilter!==void 0?j.magFilter:$i,I.minFilter=j.minFilter!==void 0?j.minFilter:$i,I.anisotropy=j.anisotropy!==void 0?j.anisotropy:1,j.colorSpace!==void 0?I.colorSpace=j.colorSpace:j.encoding!==void 0&&(I.encoding=j.encoding),j.flipY!==void 0&&(I.flipY=j.flipY),j.format!==void 0&&(I.format=j.format),j.type!==void 0&&(I.type=j.type),j.mipmaps!==void 0&&(I.mipmaps=j.mipmaps,I.minFilter=lo),j.mipmapCount===1&&(I.minFilter=$i),j.generateMipmaps!==void 0&&(I.generateMipmaps=j.generateMipmaps),I.needsUpdate=!0,c&&c(I,j)},g,v),I}}class dE extends mo{constructor(e){super(e)}load(e,c,g,v){const M=new Bo,I=new dm(this.manager);return I.setCrossOrigin(this.crossOrigin),I.setPath(this.path),I.load(e,function(R){M.image=R,M.needsUpdate=!0,c!==void 0&&c(M)},g,v),M}}class Gd extends $r{constructor(e,c=1){super(),this.isLight=!0,this.type="Light",this.color=new rr(e),this.intensity=c}dispose(){}copy(e,c){return super.copy(e,c),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const c=super.toJSON(e);return c.object.color=this.color.getHex(),c.object.intensity=this.intensity,this.groundColor!==void 0&&(c.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(c.object.distance=this.distance),this.angle!==void 0&&(c.object.angle=this.angle),this.decay!==void 0&&(c.object.decay=this.decay),this.penumbra!==void 0&&(c.object.penumbra=this.penumbra),this.shadow!==void 0&&(c.object.shadow=this.shadow.toJSON()),c}}class yy extends Gd{constructor(e,c,g){super(e,g),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy($r.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rr(c)}copy(e,c){return super.copy(e,c),this.groundColor.copy(e.groundColor),this}}const Kf=new ii,Qv=new Qe,Ay=new Qe;class vy{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yn(512,512),this.map=null,this.mapPass=null,this.matrix=new ii,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gu,this._frameExtents=new yn(1,1),this._viewportCount=1,this._viewports=[new Qr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const c=this.camera,g=this.matrix;Qv.setFromMatrixPosition(e.matrixWorld),c.position.copy(Qv),Ay.setFromMatrixPosition(e.target.matrixWorld),c.lookAt(Ay),c.updateMatrixWorld(),Kf.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kf),g.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g.multiply(Kf)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hE extends vy{constructor(){super(new Yo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const c=this.camera,g=Pl*2*e.angle*this.focus,v=this.mapSize.width/this.mapSize.height,M=e.distance||c.far;(g!==c.fov||v!==c.aspect||M!==c.far)&&(c.fov=g,c.aspect=v,c.far=M,c.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class hm extends Gd{constructor(e,c,g=0,v=Math.PI/3,M=0,I=2){super(e,c),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($r.DEFAULT_UP),this.updateMatrix(),this.target=new $r,this.distance=g,this.angle=v,this.penumbra=M,this.decay=I,this.map=null,this.shadow=new hE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,c){return super.copy(e,c),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Xv=new ii,fm=new Qe,_y=new Qe;class F0 extends vy{constructor(){super(new Yo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new yn(4,2),this._viewportCount=6,this._viewports=[new Qr(2,1,1,1),new Qr(0,1,1,1),new Qr(3,1,1,1),new Qr(1,1,1,1),new Qr(3,0,1,1),new Qr(1,0,1,1)],this._cubeDirections=[new Qe(1,0,0),new Qe(-1,0,0),new Qe(0,0,1),new Qe(0,0,-1),new Qe(0,1,0),new Qe(0,-1,0)],this._cubeUps=[new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,1,0),new Qe(0,0,1),new Qe(0,0,-1)]}updateMatrices(e,c=0){const g=this.camera,v=this.matrix,M=e.distance||g.far;M!==g.far&&(g.far=M,g.updateProjectionMatrix()),fm.setFromMatrixPosition(e.matrixWorld),g.position.copy(fm),_y.copy(g.position),_y.add(this._cubeDirections[c]),g.up.copy(this._cubeUps[c]),g.lookAt(_y),g.updateMatrixWorld(),v.makeTranslation(-fm.x,-fm.y,-fm.z),Xv.multiplyMatrices(g.projectionMatrix,g.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xv)}}class O0 extends Gd{constructor(e,c,g=0,v=2){super(e,c),this.isPointLight=!0,this.type="PointLight",this.distance=g,this.decay=v,this.shadow=new F0}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,c){return super.copy(e,c),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class fE extends vy{constructor(){super(new Wg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Yv extends Gd{constructor(e,c){super(e,c),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($r.DEFAULT_UP),this.updateMatrix(),this.target=new $r,this.shadow=new fE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Kv extends Gd{constructor(e,c){super(e,c),this.isAmbientLight=!0,this.type="AmbientLight"}}class Jv extends Gd{constructor(e,c,g=10,v=10){super(e,c),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=g,this.height=v}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const c=super.toJSON(e);return c.object.width=this.width,c.object.height=this.height,c}}class qv{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Qe)}set(e){for(let c=0;c<9;c++)this.coefficients[c].copy(e[c]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,c){const g=e.x,v=e.y,M=e.z,I=this.coefficients;return c.copy(I[0]).multiplyScalar(.282095),c.addScaledVector(I[1],.488603*v),c.addScaledVector(I[2],.488603*M),c.addScaledVector(I[3],.488603*g),c.addScaledVector(I[4],1.092548*(g*v)),c.addScaledVector(I[5],1.092548*(v*M)),c.addScaledVector(I[6],.315392*(3*M*M-1)),c.addScaledVector(I[7],1.092548*(g*M)),c.addScaledVector(I[8],.546274*(g*g-v*v)),c}getIrradianceAt(e,c){const g=e.x,v=e.y,M=e.z,I=this.coefficients;return c.copy(I[0]).multiplyScalar(.886227),c.addScaledVector(I[1],2*.511664*v),c.addScaledVector(I[2],2*.511664*M),c.addScaledVector(I[3],2*.511664*g),c.addScaledVector(I[4],2*.429043*g*v),c.addScaledVector(I[5],2*.429043*v*M),c.addScaledVector(I[6],.743125*M*M-.247708),c.addScaledVector(I[7],2*.429043*g*M),c.addScaledVector(I[8],.429043*(g*g-v*v)),c}add(e){for(let c=0;c<9;c++)this.coefficients[c].add(e.coefficients[c]);return this}addScaledSH(e,c){for(let g=0;g<9;g++)this.coefficients[g].addScaledVector(e.coefficients[g],c);return this}scale(e){for(let c=0;c<9;c++)this.coefficients[c].multiplyScalar(e);return this}lerp(e,c){for(let g=0;g<9;g++)this.coefficients[g].lerp(e.coefficients[g],c);return this}equals(e){for(let c=0;c<9;c++)if(!this.coefficients[c].equals(e.coefficients[c]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,c=0){const g=this.coefficients;for(let v=0;v<9;v++)g[v].fromArray(e,c+v*3);return this}toArray(e=[],c=0){const g=this.coefficients;for(let v=0;v<9;v++)g[v].toArray(e,c+v*3);return e}static getBasisAt(e,c){const g=e.x,v=e.y,M=e.z;c[0]=.282095,c[1]=.488603*v,c[2]=.488603*M,c[3]=.488603*g,c[4]=1.092548*g*v,c[5]=1.092548*v*M,c[6]=.315392*(3*M*M-1),c[7]=1.092548*g*M,c[8]=.546274*(g*g-v*v)}}class gm extends Gd{constructor(e=new qv,c=1){super(void 0,c),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const c=super.toJSON(e);return c.object.sh=this.sh.toArray(),c}}class D0 extends mo{constructor(e){super(e),this.textures={}}load(e,c,g,v){const M=this,I=new uu(M.manager);I.setPath(M.path),I.setRequestHeader(M.requestHeader),I.setWithCredentials(M.withCredentials),I.load(e,function(R){try{c(M.parse(JSON.parse(R)))}catch(z){v?v(z):S.error(z),M.manager.itemError(e)}},g,v)}parse(e){const c=this.textures;function g(M){return c[M]===void 0&&S.warn("THREE.MaterialLoader: Undefined texture",M),c[M]}const v=D0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(v.uuid=e.uuid),e.name!==void 0&&(v.name=e.name),e.color!==void 0&&v.color!==void 0&&v.color.setHex(e.color),e.roughness!==void 0&&(v.roughness=e.roughness),e.metalness!==void 0&&(v.metalness=e.metalness),e.sheen!==void 0&&(v.sheen=e.sheen),e.sheenColor!==void 0&&(v.sheenColor=new rr().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(v.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&v.emissive!==void 0&&v.emissive.setHex(e.emissive),e.specular!==void 0&&v.specular!==void 0&&v.specular.setHex(e.specular),e.specularIntensity!==void 0&&(v.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&v.specularColor!==void 0&&v.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(v.shininess=e.shininess),e.clearcoat!==void 0&&(v.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(v.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(v.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(v.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(v.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(v.transmission=e.transmission),e.thickness!==void 0&&(v.thickness=e.thickness),e.attenuationDistance!==void 0&&(v.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&v.attenuationColor!==void 0&&v.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(v.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(v.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(v.fog=e.fog),e.flatShading!==void 0&&(v.flatShading=e.flatShading),e.blending!==void 0&&(v.blending=e.blending),e.combine!==void 0&&(v.combine=e.combine),e.side!==void 0&&(v.side=e.side),e.shadowSide!==void 0&&(v.shadowSide=e.shadowSide),e.opacity!==void 0&&(v.opacity=e.opacity),e.transparent!==void 0&&(v.transparent=e.transparent),e.alphaTest!==void 0&&(v.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(v.alphaHash=e.alphaHash),e.depthTest!==void 0&&(v.depthTest=e.depthTest),e.depthWrite!==void 0&&(v.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(v.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(v.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(v.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(v.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(v.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(v.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(v.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(v.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(v.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(v.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(v.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(v.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(v.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(v.rotation=e.rotation),e.linewidth!==1&&(v.linewidth=e.linewidth),e.dashSize!==void 0&&(v.dashSize=e.dashSize),e.gapSize!==void 0&&(v.gapSize=e.gapSize),e.scale!==void 0&&(v.scale=e.scale),e.polygonOffset!==void 0&&(v.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(v.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(v.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(v.dithering=e.dithering),e.alphaToCoverage!==void 0&&(v.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(v.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(v.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(v.visible=e.visible),e.toneMapped!==void 0&&(v.toneMapped=e.toneMapped),e.userData!==void 0&&(v.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?v.vertexColors=e.vertexColors>0:v.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const M in e.uniforms){const I=e.uniforms[M];switch(v.uniforms[M]={},I.type){case"t":v.uniforms[M].value=g(I.value);break;case"c":v.uniforms[M].value=new rr().setHex(I.value);break;case"v2":v.uniforms[M].value=new yn().fromArray(I.value);break;case"v3":v.uniforms[M].value=new Qe().fromArray(I.value);break;case"v4":v.uniforms[M].value=new Qr().fromArray(I.value);break;case"m3":v.uniforms[M].value=new pi().fromArray(I.value);break;case"m4":v.uniforms[M].value=new ii().fromArray(I.value);break;default:v.uniforms[M].value=I.value}}if(e.defines!==void 0&&(v.defines=e.defines),e.vertexShader!==void 0&&(v.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(v.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(v.glslVersion=e.glslVersion),e.extensions!==void 0)for(const M in e.extensions)v.extensions[M]=e.extensions[M];if(e.lights!==void 0&&(v.lights=e.lights),e.clipping!==void 0&&(v.clipping=e.clipping),e.size!==void 0&&(v.size=e.size),e.sizeAttenuation!==void 0&&(v.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(v.map=g(e.map)),e.matcap!==void 0&&(v.matcap=g(e.matcap)),e.alphaMap!==void 0&&(v.alphaMap=g(e.alphaMap)),e.bumpMap!==void 0&&(v.bumpMap=g(e.bumpMap)),e.bumpScale!==void 0&&(v.bumpScale=e.bumpScale),e.normalMap!==void 0&&(v.normalMap=g(e.normalMap)),e.normalMapType!==void 0&&(v.normalMapType=e.normalMapType),e.normalScale!==void 0){let M=e.normalScale;Array.isArray(M)===!1&&(M=[M,M]),v.normalScale=new yn().fromArray(M)}return e.displacementMap!==void 0&&(v.displacementMap=g(e.displacementMap)),e.displacementScale!==void 0&&(v.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(v.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(v.roughnessMap=g(e.roughnessMap)),e.metalnessMap!==void 0&&(v.metalnessMap=g(e.metalnessMap)),e.emissiveMap!==void 0&&(v.emissiveMap=g(e.emissiveMap)),e.emissiveIntensity!==void 0&&(v.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(v.specularMap=g(e.specularMap)),e.specularIntensityMap!==void 0&&(v.specularIntensityMap=g(e.specularIntensityMap)),e.specularColorMap!==void 0&&(v.specularColorMap=g(e.specularColorMap)),e.envMap!==void 0&&(v.envMap=g(e.envMap)),e.envMapIntensity!==void 0&&(v.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(v.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(v.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(v.lightMap=g(e.lightMap)),e.lightMapIntensity!==void 0&&(v.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(v.aoMap=g(e.aoMap)),e.aoMapIntensity!==void 0&&(v.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(v.gradientMap=g(e.gradientMap)),e.clearcoatMap!==void 0&&(v.clearcoatMap=g(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(v.clearcoatRoughnessMap=g(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(v.clearcoatNormalMap=g(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(v.clearcoatNormalScale=new yn().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(v.iridescenceMap=g(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(v.iridescenceThicknessMap=g(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(v.transmissionMap=g(e.transmissionMap)),e.thicknessMap!==void 0&&(v.thicknessMap=g(e.thicknessMap)),e.anisotropyMap!==void 0&&(v.anisotropyMap=g(e.anisotropyMap)),e.sheenColorMap!==void 0&&(v.sheenColorMap=g(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(v.sheenRoughnessMap=g(e.sheenRoughnessMap)),v}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const c={ShadowMaterial:Fv,SpriteMaterial:Jg,RawShaderMaterial:Ov,ShaderMaterial:Qo,PointsMaterial:i0,MeshPhysicalMaterial:Dv,MeshStandardMaterial:Xu,MeshPhongMaterial:Pv,MeshToonMaterial:Lv,MeshNormalMaterial:kv,MeshLambertMaterial:B0,MeshDepthMaterial:Rf,MeshDistanceMaterial:Ff,MeshBasicMaterial:ds,MeshMatcapMaterial:zv,LineDashedMaterial:uc,LineBasicMaterial:Ys,Material:ia};return new c[e]}}class mm{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let c="";for(let g=0,v=e.length;g<v;g++)c+=String.fromCharCode(e[g]);try{return decodeURIComponent(escape(c))}catch(g){return c}}static extractUrlBase(e){const c=e.lastIndexOf("/");return c===-1?"./":e.slice(0,c+1)}static resolveURL(e,c){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(c)&&/^\//.test(e)&&(c=c.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:c+e)}}class Zv extends ui{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class kh extends mo{constructor(e){super(e)}load(e,c,g,v){const M=this,I=new uu(M.manager);I.setPath(M.path),I.setRequestHeader(M.requestHeader),I.setWithCredentials(M.withCredentials),I.load(e,function(R){try{c(M.parse(JSON.parse(R)))}catch(z){v?v(z):S.error(z),M.manager.itemError(e)}},g,v)}parse(e){const c={},g={};function v(ne,se){if(c[se]!==void 0)return c[se];const $=ne.interleavedBuffers[se],ee=M(ne,$.buffer),ve=Ll($.type,ee),ue=new Kg(ve,$.stride);return ue.uuid=$.uuid,c[se]=ue,ue}function M(ne,se){if(g[se]!==void 0)return g[se];const $=ne.arrayBuffers[se],ee=new Uint32Array($).buffer;return g[se]=ee,ee}const I=e.isInstancedBufferGeometry?new Zv:new ui,R=e.data.index;if(R!==void 0){const ne=Ll(R.type,R.array);I.setIndex(new Qi(ne,1))}const z=e.data.attributes;for(const ne in z){const se=z[ne];let fe;if(se.isInterleavedBufferAttribute){const $=v(e.data,se.data);fe=new Ih($,se.itemSize,se.offset,se.normalized)}else{const $=Ll(se.type,se.array),ee=se.isInstancedBufferAttribute?Pf:Qi;fe=new ee($,se.itemSize,se.normalized)}se.name!==void 0&&(fe.name=se.name),se.usage!==void 0&&fe.setUsage(se.usage),se.updateRange!==void 0&&(fe.updateRange.offset=se.updateRange.offset,fe.updateRange.count=se.updateRange.count),I.setAttribute(ne,fe)}const j=e.data.morphAttributes;if(j)for(const ne in j){const se=j[ne],fe=[];for(let $=0,ee=se.length;$<ee;$++){const ve=se[$];let ue;if(ve.isInterleavedBufferAttribute){const Ce=v(e.data,ve.data);ue=new Ih(Ce,ve.itemSize,ve.offset,ve.normalized)}else{const Ce=Ll(ve.type,ve.array);ue=new Qi(Ce,ve.itemSize,ve.normalized)}ve.name!==void 0&&(ue.name=ve.name),fe.push(ue)}I.morphAttributes[ne]=fe}e.data.morphTargetsRelative&&(I.morphTargetsRelative=!0);const q=e.data.groups||e.data.drawcalls||e.data.offsets;if(q!==void 0)for(let ne=0,se=q.length;ne!==se;++ne){const fe=q[ne];I.addGroup(fe.start,fe.count,fe.materialIndex)}const Z=e.data.boundingSphere;if(Z!==void 0){const ne=new Qe;Z.center!==void 0&&ne.fromArray(Z.center),I.boundingSphere=new Fa(ne,Z.radius)}return e.name&&(I.name=e.name),e.userData&&(I.userData=e.userData),I}}class ym extends mo{constructor(e){super(e)}load(e,c,g,v){const M=this,I=this.path===""?mm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||I;const R=new uu(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(e,function(z){let j=null;try{j=JSON.parse(z)}catch(q){v!==void 0&&v(q),S.error("THREE:ObjectLoader: Can't parse "+e+".",q.message);return}const W=j.metadata;if(W===void 0||W.type===void 0||W.type.toLowerCase()==="geometry"){v!==void 0&&v(new Error("THREE.ObjectLoader: Can't load "+e)),S.error("THREE.ObjectLoader: Can't load "+e);return}M.parse(j,c)},g,v)}loadAsync(e,c){return rs(this,null,function*(){const g=this,v=this.path===""?mm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||v;const M=new uu(this.manager);M.setPath(this.path),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials);const I=yield M.loadAsync(e,c),R=JSON.parse(I),z=R.metadata;if(z===void 0||z.type===void 0||z.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield g.parseAsync(R)})}parse(e,c){const g=this.parseAnimations(e.animations),v=this.parseShapes(e.shapes),M=this.parseGeometries(e.geometries,v),I=this.parseImages(e.images,function(){c!==void 0&&c(j)}),R=this.parseTextures(e.textures,I),z=this.parseMaterials(e.materials,R),j=this.parseObject(e.object,M,z,R,g),W=this.parseSkeletons(e.skeletons,j);if(this.bindSkeletons(j,W),c!==void 0){let q=!1;for(const Z in I)if(I[Z].data instanceof HTMLImageElement){q=!0;break}q===!1&&c(j)}return j}parseAsync(e){return rs(this,null,function*(){const c=this.parseAnimations(e.animations),g=this.parseShapes(e.shapes),v=this.parseGeometries(e.geometries,g),M=yield this.parseImagesAsync(e.images),I=this.parseTextures(e.textures,M),R=this.parseMaterials(e.materials,I),z=this.parseObject(e.object,v,R,I,c),j=this.parseSkeletons(e.skeletons,z);return this.bindSkeletons(z,j),z})}parseShapes(e){const c={};if(e!==void 0)for(let g=0,v=e.length;g<v;g++){const M=new jf().fromJSON(e[g]);c[M.uuid]=M}return c}parseSkeletons(e,c){const g={},v={};if(c.traverse(function(M){M.isBone&&(v[M.uuid]=M)}),e!==void 0)for(let M=0,I=e.length;M<I;M++){const R=new t0().fromJSON(e[M],v);g[R.uuid]=R}return g}parseGeometries(e,c){const g={};if(e!==void 0){const v=new kh;for(let M=0,I=e.length;M<I;M++){let R;const z=e[M];switch(z.type){case"BufferGeometry":case"InstancedBufferGeometry":R=v.parse(z);break;default:z.type in Rv?R=Rv[z.type].fromJSON(z,c):S.warn(`THREE.ObjectLoader: Unsupported geometry type "${z.type}"`)}R.uuid=z.uuid,z.name!==void 0&&(R.name=z.name),z.userData!==void 0&&(R.userData=z.userData),g[z.uuid]=R}}return g}parseMaterials(e,c){const g={},v={};if(e!==void 0){const M=new D0;M.setTextures(c);for(let I=0,R=e.length;I<R;I++){const z=e[I];g[z.uuid]===void 0&&(g[z.uuid]=M.parse(z)),v[z.uuid]=g[z.uuid]}}return v}parseAnimations(e){const c={};if(e!==void 0)for(let g=0;g<e.length;g++){const v=e[g],M=R0.parse(v);c[M.uuid]=M}return c}parseImages(e,c){const g=this,v={};let M;function I(z){return g.manager.itemStart(z),M.load(z,function(){g.manager.itemEnd(z)},void 0,function(){g.manager.itemError(z),g.manager.itemEnd(z)})}function R(z){if(typeof z=="string"){const j=z,W=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(j)?j:g.resourcePath+j;return I(W)}else return z.data?{data:Ll(z.type,z.data),width:z.width,height:z.height}:null}if(e!==void 0&&e.length>0){const z=new my(c);M=new dm(z),M.setCrossOrigin(this.crossOrigin);for(let j=0,W=e.length;j<W;j++){const q=e[j],Z=q.url;if(Array.isArray(Z)){const ne=[];for(let se=0,fe=Z.length;se<fe;se++){const $=Z[se],ee=R($);ee!==null&&(ee instanceof HTMLImageElement?ne.push(ee):ne.push(new $g(ee.data,ee.width,ee.height)))}v[q.uuid]=new lp(ne)}else{const ne=R(q.url);v[q.uuid]=new lp(ne)}}}return v}parseImagesAsync(e){return rs(this,null,function*(){const c=this,g={};let v;function M(I){return rs(this,null,function*(){if(typeof I=="string"){const R=I,z=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(R)?R:c.resourcePath+R;return yield v.loadAsync(z)}else return I.data?{data:Ll(I.type,I.data),width:I.width,height:I.height}:null})}if(e!==void 0&&e.length>0){v=new dm(this.manager),v.setCrossOrigin(this.crossOrigin);for(let I=0,R=e.length;I<R;I++){const z=e[I],j=z.url;if(Array.isArray(j)){const W=[];for(let q=0,Z=j.length;q<Z;q++){const ne=j[q],se=yield M(ne);se!==null&&(se instanceof HTMLImageElement?W.push(se):W.push(new $g(se.data,se.width,se.height)))}g[z.uuid]=new lp(W)}else{const W=yield M(z.url);g[z.uuid]=new lp(W)}}}return g})}parseTextures(e,c){function g(M,I){return typeof M=="number"?M:(S.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",M),I[M])}const v={};if(e!==void 0)for(let M=0,I=e.length;M<I;M++){const R=e[M];R.image===void 0&&S.warn('THREE.ObjectLoader: No "image" specified for',R.uuid),c[R.image]===void 0&&S.warn("THREE.ObjectLoader: Undefined image",R.image);const z=c[R.image],j=z.data;let W;Array.isArray(j)?(W=new Nl,j.length===6&&(W.needsUpdate=!0)):(j&&j.data?W=new $g:W=new Bo,j&&(W.needsUpdate=!0)),W.source=z,W.uuid=R.uuid,R.name!==void 0&&(W.name=R.name),R.mapping!==void 0&&(W.mapping=g(R.mapping,gE)),R.channel!==void 0&&(W.channel=R.channel),R.offset!==void 0&&W.offset.fromArray(R.offset),R.repeat!==void 0&&W.repeat.fromArray(R.repeat),R.center!==void 0&&W.center.fromArray(R.center),R.rotation!==void 0&&(W.rotation=R.rotation),R.wrap!==void 0&&(W.wrapS=g(R.wrap[0],P0),W.wrapT=g(R.wrap[1],P0)),R.format!==void 0&&(W.format=R.format),R.internalFormat!==void 0&&(W.internalFormat=R.internalFormat),R.type!==void 0&&(W.type=R.type),R.colorSpace!==void 0&&(W.colorSpace=R.colorSpace),R.encoding!==void 0&&(W.encoding=R.encoding),R.minFilter!==void 0&&(W.minFilter=g(R.minFilter,L0)),R.magFilter!==void 0&&(W.magFilter=g(R.magFilter,L0)),R.anisotropy!==void 0&&(W.anisotropy=R.anisotropy),R.flipY!==void 0&&(W.flipY=R.flipY),R.generateMipmaps!==void 0&&(W.generateMipmaps=R.generateMipmaps),R.premultiplyAlpha!==void 0&&(W.premultiplyAlpha=R.premultiplyAlpha),R.unpackAlignment!==void 0&&(W.unpackAlignment=R.unpackAlignment),R.compareFunction!==void 0&&(W.compareFunction=R.compareFunction),R.userData!==void 0&&(W.userData=R.userData),v[R.uuid]=W}return v}parseObject(e,c,g,v,M){let I;function R(Z){return c[Z]===void 0&&S.warn("THREE.ObjectLoader: Undefined geometry",Z),c[Z]}function z(Z){if(Z!==void 0){if(Array.isArray(Z)){const ne=[];for(let se=0,fe=Z.length;se<fe;se++){const $=Z[se];g[$]===void 0&&S.warn("THREE.ObjectLoader: Undefined material",$),ne.push(g[$])}return ne}return g[Z]===void 0&&S.warn("THREE.ObjectLoader: Undefined material",Z),g[Z]}}function j(Z){return v[Z]===void 0&&S.warn("THREE.ObjectLoader: Undefined texture",Z),v[Z]}let W,q;switch(e.type){case"Scene":I=new nv,e.background!==void 0&&(Number.isInteger(e.background)?I.background=new rr(e.background):I.background=j(e.background)),e.environment!==void 0&&(I.environment=j(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?I.fog=new Jm(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(I.fog=new Km(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(I.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(I.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":I=new Yo(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(I.focus=e.focus),e.zoom!==void 0&&(I.zoom=e.zoom),e.filmGauge!==void 0&&(I.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(I.filmOffset=e.filmOffset),e.view!==void 0&&(I.view=Object.assign({},e.view));break;case"OrthographicCamera":I=new Wg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(I.zoom=e.zoom),e.view!==void 0&&(I.view=Object.assign({},e.view));break;case"AmbientLight":I=new Kv(e.color,e.intensity);break;case"DirectionalLight":I=new Yv(e.color,e.intensity);break;case"PointLight":I=new O0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":I=new Jv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":I=new hm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":I=new yy(e.color,e.groundColor,e.intensity);break;case"LightProbe":I=new gm().fromJSON(e);break;case"SkinnedMesh":W=R(e.geometry),q=z(e.material),I=new cv(W,q),e.bindMode!==void 0&&(I.bindMode=e.bindMode),e.bindMatrix!==void 0&&I.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(I.skeleton=e.skeleton);break;case"Mesh":W=R(e.geometry),q=z(e.material),I=new bs(W,q);break;case"InstancedMesh":W=R(e.geometry),q=z(e.material);const Z=e.count,ne=e.instanceMatrix,se=e.instanceColor;I=new dv(W,q,Z),I.instanceMatrix=new Pf(new Float32Array(ne.array),16),se!==void 0&&(I.instanceColor=new Pf(new Float32Array(se.array),se.itemSize));break;case"LOD":I=new ov;break;case"Line":I=new su(R(e.geometry),z(e.material));break;case"LineLoop":I=new gv(R(e.geometry),z(e.material));break;case"LineSegments":I=new au(R(e.geometry),z(e.material));break;case"PointCloud":case"Points":I=new yv(R(e.geometry),z(e.material));break;case"Sprite":I=new qm(z(e.material));break;case"Group":I=new Bh;break;case"Bone":I=new ty;break;default:I=new $r}if(I.uuid=e.uuid,e.name!==void 0&&(I.name=e.name),e.matrix!==void 0?(I.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(I.matrixAutoUpdate=e.matrixAutoUpdate),I.matrixAutoUpdate&&I.matrix.decompose(I.position,I.quaternion,I.scale)):(e.position!==void 0&&I.position.fromArray(e.position),e.rotation!==void 0&&I.rotation.fromArray(e.rotation),e.quaternion!==void 0&&I.quaternion.fromArray(e.quaternion),e.scale!==void 0&&I.scale.fromArray(e.scale)),e.up!==void 0&&I.up.fromArray(e.up),e.castShadow!==void 0&&(I.castShadow=e.castShadow),e.receiveShadow!==void 0&&(I.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(I.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(I.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(I.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&I.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(I.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(I.visible=e.visible),e.frustumCulled!==void 0&&(I.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(I.renderOrder=e.renderOrder),e.userData!==void 0&&(I.userData=e.userData),e.layers!==void 0&&(I.layers.mask=e.layers),e.children!==void 0){const Z=e.children;for(let ne=0;ne<Z.length;ne++)I.add(this.parseObject(Z[ne],c,g,v,M))}if(e.animations!==void 0){const Z=e.animations;for(let ne=0;ne<Z.length;ne++){const se=Z[ne];I.animations.push(M[se])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(I.autoUpdate=e.autoUpdate);const Z=e.levels;for(let ne=0;ne<Z.length;ne++){const se=Z[ne],fe=I.getObjectByProperty("uuid",se.object);fe!==void 0&&I.addLevel(fe,se.distance,se.hysteresis)}}return I}bindSkeletons(e,c){Object.keys(c).length!==0&&e.traverse(function(g){if(g.isSkinnedMesh===!0&&g.skeleton!==void 0){const v=c[g.skeleton];v===void 0?S.warn("THREE.ObjectLoader: No skeleton found with UUID:",g.skeleton):g.bind(v,g.bindMatrix)}})}}const gE={UVMapping:ua,CubeReflectionMapping:vs,CubeRefractionMapping:ss,EquirectangularReflectionMapping:Xi,EquirectangularRefractionMapping:$s,CubeUVReflectionMapping:da},P0={RepeatWrapping:Oi,ClampToEdgeWrapping:ao,MirroredRepeatWrapping:Hs},L0={NearestFilter:_r,NearestMipmapNearestFilter:ji,NearestMipmapLinearFilter:as,LinearFilter:$i,LinearMipmapNearestFilter:ls,LinearMipmapLinearFilter:lo};class mE extends mo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&S.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&S.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,c,g,v){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const M=this,I=zd.get(e);if(I!==void 0)return M.manager.itemStart(e),setTimeout(function(){c&&c(I),M.manager.itemEnd(e)},0),I;const R={};R.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",R.headers=this.requestHeader,fetch(e,R).then(function(z){return z.blob()}).then(function(z){return createImageBitmap(z,Object.assign(M.options,{colorSpaceConversion:"none"}))}).then(function(z){zd.add(e,z),c&&c(z),M.manager.itemEnd(e)}).catch(function(z){v&&v(z),M.manager.itemError(e),M.manager.itemEnd(e)}),M.manager.itemStart(e)}}let k0;class Jf{static getContext(){return k0===void 0&&(k0=new(window.AudioContext||window.webkitAudioContext)),k0}static setContext(e){k0=e}}class Ey extends mo{constructor(e){super(e)}load(e,c,g,v){const M=this,I=new uu(this.manager);I.setResponseType("arraybuffer"),I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(e,function(z){try{const j=z.slice(0);Jf.getContext().decodeAudioData(j,function(q){c(q)},R)}catch(j){R(j)}},g,v);function R(z){v?v(z):S.error(z),M.manager.itemError(e)}}}class $v extends gm{constructor(e,c,g=1){super(void 0,g),this.isHemisphereLightProbe=!0;const v=new rr().set(e),M=new rr().set(c),I=new Qe(v.r,v.g,v.b),R=new Qe(M.r,M.g,M.b),z=Math.sqrt(Math.PI),j=z*Math.sqrt(.75);this.sh.coefficients[0].copy(I).add(R).multiplyScalar(z),this.sh.coefficients[1].copy(I).sub(R).multiplyScalar(j)}}class Yu extends gm{constructor(e,c=1){super(void 0,c),this.isAmbientLightProbe=!0;const g=new rr().set(e);this.sh.coefficients[0].set(g.r,g.g,g.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const z0=new ii,e2=new ii,Bi=new ii;class yE{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const c=this._cache;if(c.focus!==e.focus||c.fov!==e.fov||c.aspect!==e.aspect*this.aspect||c.near!==e.near||c.far!==e.far||c.zoom!==e.zoom||c.eyeSep!==this.eyeSep){c.focus=e.focus,c.fov=e.fov,c.aspect=e.aspect*this.aspect,c.near=e.near,c.far=e.far,c.zoom=e.zoom,c.eyeSep=this.eyeSep,Bi.copy(e.projectionMatrix);const v=c.eyeSep/2,M=v*c.near/c.focus,I=c.near*Math.tan(kp*c.fov*.5)/c.zoom;let R,z;e2.elements[12]=-v,z0.elements[12]=v,R=-I*c.aspect+M,z=I*c.aspect+M,Bi.elements[0]=2*c.near/(z-R),Bi.elements[8]=(z+R)/(z-R),this.cameraL.projectionMatrix.copy(Bi),R=-I*c.aspect-M,z=I*c.aspect-M,Bi.elements[0]=2*c.near/(z-R),Bi.elements[8]=(z+R)/(z-R),this.cameraR.projectionMatrix.copy(Bi)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(e2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(z0)}}class t2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=n2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const c=n2();e=(c-this.oldTime)/1e3,this.oldTime=c,this.elapsedTime+=e}return e}}function n2(){return(typeof performance=="undefined"?Date:performance).now()}const zh=new Qe,r2=new ya,AE=new Qe,Gh=new Qe;class vE extends $r{constructor(){super(),this.type="AudioListener",this.context=Jf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new t2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const c=this.context.listener,g=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(zh,r2,AE),Gh.set(0,0,-1).applyQuaternion(r2),c.positionX){const v=this.context.currentTime+this.timeDelta;c.positionX.linearRampToValueAtTime(zh.x,v),c.positionY.linearRampToValueAtTime(zh.y,v),c.positionZ.linearRampToValueAtTime(zh.z,v),c.forwardX.linearRampToValueAtTime(Gh.x,v),c.forwardY.linearRampToValueAtTime(Gh.y,v),c.forwardZ.linearRampToValueAtTime(Gh.z,v),c.upX.linearRampToValueAtTime(g.x,v),c.upY.linearRampToValueAtTime(g.y,v),c.upZ.linearRampToValueAtTime(g.z,v)}else c.setPosition(zh.x,zh.y,zh.z),c.setOrientation(Gh.x,Gh.y,Gh.z,g.x,g.y,g.z)}}class i2 extends $r{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){S.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){S.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const c=this.context.createBufferSource();return c.buffer=this.buffer,c.loop=this.loop,c.loopStart=this.loopStart,c.loopEnd=this.loopEnd,c.onended=this.onEnded.bind(this),c.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=c,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){S.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){S.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,c=this.filters.length;e<c;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,c=this.filters.length;e<c;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){S.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(S.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){S.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Uh=new Qe,o2=new ya,_E=new Qe,Nh=new Qe;class EE extends i2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,c,g){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=c,this.panner.coneOuterGain=g,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Uh,o2,_E),Nh.set(0,0,1).applyQuaternion(o2);const c=this.panner;if(c.positionX){const g=this.context.currentTime+this.listener.timeDelta;c.positionX.linearRampToValueAtTime(Uh.x,g),c.positionY.linearRampToValueAtTime(Uh.y,g),c.positionZ.linearRampToValueAtTime(Uh.z,g),c.orientationX.linearRampToValueAtTime(Nh.x,g),c.orientationY.linearRampToValueAtTime(Nh.y,g),c.orientationZ.linearRampToValueAtTime(Nh.z,g)}else c.setPosition(Uh.x,Uh.y,Uh.z),c.setOrientation(Nh.x,Nh.y,Nh.z)}}class bE{constructor(e,c=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=c,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const c=this.getFrequencyData();for(let g=0;g<c.length;g++)e+=c[g];return e/c.length}}class s2{constructor(e,c,g){this.binding=e,this.valueSize=g;let v,M,I;switch(c){case"quaternion":v=this._slerp,M=this._slerpAdditive,I=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(g*6),this._workIndex=5;break;case"string":case"bool":v=this._select,M=this._select,I=this._setAdditiveIdentityOther,this.buffer=new Array(g*5);break;default:v=this._lerp,M=this._lerpAdditive,I=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(g*5)}this._mixBufferRegion=v,this._mixBufferRegionAdditive=M,this._setIdentity=I,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,c){const g=this.buffer,v=this.valueSize,M=e*v+v;let I=this.cumulativeWeight;if(I===0){for(let R=0;R!==v;++R)g[M+R]=g[R];I=c}else{I+=c;const R=c/I;this._mixBufferRegion(g,M,0,R,v)}this.cumulativeWeight=I}accumulateAdditive(e){const c=this.buffer,g=this.valueSize,v=g*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(c,v,0,e,g),this.cumulativeWeightAdditive+=e}apply(e){const c=this.valueSize,g=this.buffer,v=e*c+c,M=this.cumulativeWeight,I=this.cumulativeWeightAdditive,R=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,M<1){const z=c*this._origIndex;this._mixBufferRegion(g,v,z,1-M,c)}I>0&&this._mixBufferRegionAdditive(g,v,this._addIndex*c,1,c);for(let z=c,j=c+c;z!==j;++z)if(g[z]!==g[z+c]){R.setValue(g,v);break}}saveOriginalState(){const e=this.binding,c=this.buffer,g=this.valueSize,v=g*this._origIndex;e.getValue(c,v);for(let M=g,I=v;M!==I;++M)c[M]=c[v+M%g];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,c=e+this.valueSize;for(let g=e;g<c;g++)this.buffer[g]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,c=this._addIndex*this.valueSize;for(let g=0;g<this.valueSize;g++)this.buffer[c+g]=this.buffer[e+g]}_select(e,c,g,v,M){if(v>=.5)for(let I=0;I!==M;++I)e[c+I]=e[g+I]}_slerp(e,c,g,v){ya.slerpFlat(e,c,e,c,e,g,v)}_slerpAdditive(e,c,g,v,M){const I=this._workIndex*M;ya.multiplyQuaternionsFlat(e,I,e,c,e,g),ya.slerpFlat(e,c,e,c,e,I,v)}_lerp(e,c,g,v,M){const I=1-v;for(let R=0;R!==M;++R){const z=c+R;e[z]=e[z]*I+e[g+R]*v}}_lerpAdditive(e,c,g,v,M){for(let I=0;I!==M;++I){const R=c+I;e[R]=e[R]+e[g+I]*v}}}const G0="\\[\\]\\.:\\/",Am=new RegExp("["+G0+"]","g"),U0="[^"+G0+"]",xE="[^"+G0.replace("\\.","")+"]",ME=/((?:WC+[\/:])*)/.source.replace("WC",U0),CE=/(WCOD+)?/.source.replace("WCOD",xE),SE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",U0),a2=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",U0),wE=new RegExp("^"+ME+CE+SE+a2+"$"),TE=["material","materials","bones","map"];class Wc{constructor(e,c,g){const v=g||Gi.parseTrackName(c);this._targetGroup=e,this._bindings=e.subscribe_(c,v)}getValue(e,c){this.bind();const g=this._targetGroup.nCachedObjects_,v=this._bindings[g];v!==void 0&&v.getValue(e,c)}setValue(e,c){const g=this._bindings;for(let v=this._targetGroup.nCachedObjects_,M=g.length;v!==M;++v)g[v].setValue(e,c)}bind(){const e=this._bindings;for(let c=this._targetGroup.nCachedObjects_,g=e.length;c!==g;++c)e[c].bind()}unbind(){const e=this._bindings;for(let c=this._targetGroup.nCachedObjects_,g=e.length;c!==g;++c)e[c].unbind()}}class Gi{constructor(e,c,g){this.path=c,this.parsedPath=g||Gi.parseTrackName(c),this.node=Gi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,c,g){return e&&e.isAnimationObjectGroup?new Gi.Composite(e,c,g):new Gi(e,c,g)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Am,"")}static parseTrackName(e){const c=wE.exec(e);if(c===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const g={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},v=g.nodeName&&g.nodeName.lastIndexOf(".");if(v!==void 0&&v!==-1){const M=g.nodeName.substring(v+1);TE.indexOf(M)!==-1&&(g.nodeName=g.nodeName.substring(0,v),g.objectName=M)}if(g.propertyName===null||g.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return g}static findNode(e,c){if(c===void 0||c===""||c==="."||c===-1||c===e.name||c===e.uuid)return e;if(e.skeleton){const g=e.skeleton.getBoneByName(c);if(g!==void 0)return g}if(e.children){const g=function(M){for(let I=0;I<M.length;I++){const R=M[I];if(R.name===c||R.uuid===c)return R;const z=g(R.children);if(z)return z}return null},v=g(e.children);if(v)return v}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,c){e[c]=this.targetObject[this.propertyName]}_getValue_array(e,c){const g=this.resolvedProperty;for(let v=0,M=g.length;v!==M;++v)e[c++]=g[v]}_getValue_arrayElement(e,c){e[c]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,c){this.resolvedProperty.toArray(e,c)}_setValue_direct(e,c){this.targetObject[this.propertyName]=e[c]}_setValue_direct_setNeedsUpdate(e,c){this.targetObject[this.propertyName]=e[c],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,c){this.targetObject[this.propertyName]=e[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,c){const g=this.resolvedProperty;for(let v=0,M=g.length;v!==M;++v)g[v]=e[c++]}_setValue_array_setNeedsUpdate(e,c){const g=this.resolvedProperty;for(let v=0,M=g.length;v!==M;++v)g[v]=e[c++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,c){const g=this.resolvedProperty;for(let v=0,M=g.length;v!==M;++v)g[v]=e[c++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,c){this.resolvedProperty[this.propertyIndex]=e[c]}_setValue_arrayElement_setNeedsUpdate(e,c){this.resolvedProperty[this.propertyIndex]=e[c],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,c){this.resolvedProperty[this.propertyIndex]=e[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,c){this.resolvedProperty.fromArray(e,c)}_setValue_fromArray_setNeedsUpdate(e,c){this.resolvedProperty.fromArray(e,c),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,c){this.resolvedProperty.fromArray(e,c),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,c){this.bind(),this.getValue(e,c)}_setValue_unbound(e,c){this.bind(),this.setValue(e,c)}bind(){let e=this.node;const c=this.parsedPath,g=c.objectName,v=c.propertyName;let M=c.propertyIndex;if(e||(e=Gi.findNode(this.rootNode,c.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){S.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(g){let j=c.objectIndex;switch(g){case"materials":if(!e.material){S.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){S.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){S.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let W=0;W<e.length;W++)if(e[W].name===j){j=W;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){S.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){S.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[g]===void 0){S.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[g]}if(j!==void 0){if(e[j]===void 0){S.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[j]}}const I=e[v];if(I===void 0){const j=c.nodeName;S.error("THREE.PropertyBinding: Trying to update property for track: "+j+"."+v+" but it wasn't found.",e);return}let R=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?R=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(R=this.Versioning.MatrixWorldNeedsUpdate);let z=this.BindingType.Direct;if(M!==void 0){if(v==="morphTargetInfluences"){if(!e.geometry){S.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){S.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[M]!==void 0&&(M=e.morphTargetDictionary[M])}z=this.BindingType.ArrayElement,this.resolvedProperty=I,this.propertyIndex=M}else I.fromArray!==void 0&&I.toArray!==void 0?(z=this.BindingType.HasFromToArray,this.resolvedProperty=I):Array.isArray(I)?(z=this.BindingType.EntireArray,this.resolvedProperty=I):this.propertyName=v;this.getValue=this.GetterByBindingType[z],this.setValue=this.SetterByBindingTypeAndVersioning[z][R]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gi.Composite=Wc,Gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gi.prototype.GetterByBindingType=[Gi.prototype._getValue_direct,Gi.prototype._getValue_array,Gi.prototype._getValue_arrayElement,Gi.prototype._getValue_toArray],Gi.prototype.SetterByBindingTypeAndVersioning=[[Gi.prototype._setValue_direct,Gi.prototype._setValue_direct_setNeedsUpdate,Gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_array,Gi.prototype._setValue_array_setNeedsUpdate,Gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_arrayElement,Gi.prototype._setValue_arrayElement_setNeedsUpdate,Gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_fromArray,Gi.prototype._setValue_fromArray_setNeedsUpdate,Gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class l2{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ba(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let g=0,v=arguments.length;g!==v;++g)e[arguments[g].uuid]=g;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const c=this;this.stats={objects:{get total(){return c._objects.length},get inUse(){return this.total-c.nCachedObjects_}},get bindingsPerObject(){return c._bindings.length}}}add(){const e=this._objects,c=this._indicesByUUID,g=this._paths,v=this._parsedPaths,M=this._bindings,I=M.length;let R,z=e.length,j=this.nCachedObjects_;for(let W=0,q=arguments.length;W!==q;++W){const Z=arguments[W],ne=Z.uuid;let se=c[ne];if(se===void 0){se=z++,c[ne]=se,e.push(Z);for(let fe=0,$=I;fe!==$;++fe)M[fe].push(new Gi(Z,g[fe],v[fe]))}else if(se<j){R=e[se];const fe=--j,$=e[fe];c[$.uuid]=se,e[se]=$,c[ne]=fe,e[fe]=Z;for(let ee=0,ve=I;ee!==ve;++ee){const ue=M[ee],Ce=ue[fe];let Oe=ue[se];ue[se]=Ce,Oe===void 0&&(Oe=new Gi(Z,g[ee],v[ee])),ue[fe]=Oe}}else e[se]!==R&&S.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=j}remove(){const e=this._objects,c=this._indicesByUUID,g=this._bindings,v=g.length;let M=this.nCachedObjects_;for(let I=0,R=arguments.length;I!==R;++I){const z=arguments[I],j=z.uuid,W=c[j];if(W!==void 0&&W>=M){const q=M++,Z=e[q];c[Z.uuid]=W,e[W]=Z,c[j]=q,e[q]=z;for(let ne=0,se=v;ne!==se;++ne){const fe=g[ne],$=fe[q],ee=fe[W];fe[W]=$,fe[q]=ee}}}this.nCachedObjects_=M}uncache(){const e=this._objects,c=this._indicesByUUID,g=this._bindings,v=g.length;let M=this.nCachedObjects_,I=e.length;for(let R=0,z=arguments.length;R!==z;++R){const j=arguments[R],W=j.uuid,q=c[W];if(q!==void 0)if(delete c[W],q<M){const Z=--M,ne=e[Z],se=--I,fe=e[se];c[ne.uuid]=q,e[q]=ne,c[fe.uuid]=Z,e[Z]=fe,e.pop();for(let $=0,ee=v;$!==ee;++$){const ve=g[$],ue=ve[Z],Ce=ve[se];ve[q]=ue,ve[Z]=Ce,ve.pop()}}else{const Z=--I,ne=e[Z];Z>0&&(c[ne.uuid]=q),e[q]=ne,e.pop();for(let se=0,fe=v;se!==fe;++se){const $=g[se];$[q]=$[Z],$.pop()}}}this.nCachedObjects_=M}subscribe_(e,c){const g=this._bindingsIndicesByPath;let v=g[e];const M=this._bindings;if(v!==void 0)return M[v];const I=this._paths,R=this._parsedPaths,z=this._objects,j=z.length,W=this.nCachedObjects_,q=new Array(j);v=M.length,g[e]=v,I.push(e),R.push(c),M.push(q);for(let Z=W,ne=z.length;Z!==ne;++Z){const se=z[Z];q[Z]=new Gi(se,e,c)}return q}unsubscribe_(e){const c=this._bindingsIndicesByPath,g=c[e];if(g!==void 0){const v=this._paths,M=this._parsedPaths,I=this._bindings,R=I.length-1,z=I[R],j=e[R];c[j]=g,I[g]=z,I.pop(),M[g]=M[R],M.pop(),v[g]=v[R],v.pop()}}}class by{constructor(e,c,g=null,v=c.blendMode){this._mixer=e,this._clip=c,this._localRoot=g,this.blendMode=v;const M=c.tracks,I=M.length,R=new Array(I),z={endingStart:_c,endingEnd:_c};for(let j=0;j!==I;++j){const W=M[j].createInterpolant(null);R[j]=W,W.settings=z}this._interpolantSettings=z,this._interpolants=R,this._propertyBindings=new Array(I),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=So,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,c){return this.loop=e,this.repetitions=c,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,c,g){if(e.fadeOut(c),this.fadeIn(c),g){const v=this._clip.duration,M=e._clip.duration,I=M/v,R=v/M;e.warp(1,I,c),this.warp(R,1,c)}return this}crossFadeTo(e,c,g){return e.crossFadeFrom(this,c,g)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,c,g){const v=this._mixer,M=v.time,I=this.timeScale;let R=this._timeScaleInterpolant;R===null&&(R=v._lendControlInterpolant(),this._timeScaleInterpolant=R);const z=R.parameterPositions,j=R.sampleValues;return z[0]=M,z[1]=M+g,j[0]=e/I,j[1]=c/I,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,c,g,v){if(!this.enabled){this._updateWeight(e);return}const M=this._startTime;if(M!==null){const z=(e-M)*g;z<0||g===0?c=0:(this._startTime=null,c=g*z)}c*=this._updateTimeScale(e);const I=this._updateTime(c),R=this._updateWeight(e);if(R>0){const z=this._interpolants,j=this._propertyBindings;switch(this.blendMode){case qd:for(let W=0,q=z.length;W!==q;++W)z[W].evaluate(I),j[W].accumulateAdditive(R);break;case Kh:default:for(let W=0,q=z.length;W!==q;++W)z[W].evaluate(I),j[W].accumulate(v,R)}}}_updateWeight(e){let c=0;if(this.enabled){c=this.weight;const g=this._weightInterpolant;if(g!==null){const v=g.evaluate(e)[0];c*=v,e>g.parameterPositions[1]&&(this.stopFading(),v===0&&(this.enabled=!1))}}return this._effectiveWeight=c,c}_updateTimeScale(e){let c=0;if(!this.paused){c=this.timeScale;const g=this._timeScaleInterpolant;if(g!==null){const v=g.evaluate(e)[0];c*=v,e>g.parameterPositions[1]&&(this.stopWarping(),c===0?this.paused=!0:this.timeScale=c)}}return this._effectiveTimeScale=c,c}_updateTime(e){const c=this._clip.duration,g=this.loop;let v=this.time+e,M=this._loopCount;const I=g===fa;if(e===0)return M===-1?v:I&&(M&1)===1?c-v:v;if(g===Bs){M===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(v>=c)v=c;else if(v<0)v=0;else{this.time=v;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(M===-1&&(e>=0?(M=0,this._setEndings(!0,this.repetitions===0,I)):this._setEndings(this.repetitions===0,!0,I)),v>=c||v<0){const R=Math.floor(v/c);v-=c*R,M+=Math.abs(R);const z=this.repetitions-M;if(z<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,v=e>0?c:0,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(z===1){const j=e<0;this._setEndings(j,!j,I)}else this._setEndings(!1,!1,I);this._loopCount=M,this.time=v,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:R})}}else this.time=v;if(I&&(M&1)===1)return c-v}return v}_setEndings(e,c,g){const v=this._interpolantSettings;g?(v.endingStart=Yl,v.endingEnd=Yl):(e?v.endingStart=this.zeroSlopeAtStart?Yl:_c:v.endingStart=Op,c?v.endingEnd=this.zeroSlopeAtEnd?Yl:_c:v.endingEnd=Op)}_scheduleFading(e,c,g){const v=this._mixer,M=v.time;let I=this._weightInterpolant;I===null&&(I=v._lendControlInterpolant(),this._weightInterpolant=I);const R=I.parameterPositions,z=I.sampleValues;return R[0]=M,z[0]=c,R[1]=M+e,z[1]=g,this}}const xy=new Float32Array(1);class My extends Dl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,c){const g=e._localRoot||this._root,v=e._clip.tracks,M=v.length,I=e._propertyBindings,R=e._interpolants,z=g.uuid,j=this._bindingsByRootAndName;let W=j[z];W===void 0&&(W={},j[z]=W);for(let q=0;q!==M;++q){const Z=v[q],ne=Z.name;let se=W[ne];if(se!==void 0)++se.referenceCount,I[q]=se;else{if(se=I[q],se!==void 0){se._cacheIndex===null&&(++se.referenceCount,this._addInactiveBinding(se,z,ne));continue}const fe=c&&c._propertyBindings[q].binding.parsedPath;se=new s2(Gi.create(g,ne,fe),Z.ValueTypeName,Z.getValueSize()),++se.referenceCount,this._addInactiveBinding(se,z,ne),I[q]=se}R[q].resultBuffer=se.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const g=(e._localRoot||this._root).uuid,v=e._clip.uuid,M=this._actionsByClip[v];this._bindAction(e,M&&M.knownActions[0]),this._addInactiveAction(e,v,g)}const c=e._propertyBindings;for(let g=0,v=c.length;g!==v;++g){const M=c[g];M.useCount++===0&&(this._lendBinding(M),M.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const c=e._propertyBindings;for(let g=0,v=c.length;g!==v;++g){const M=c[g];--M.useCount===0&&(M.restoreOriginalState(),this._takeBackBinding(M))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const c=e._cacheIndex;return c!==null&&c<this._nActiveActions}_addInactiveAction(e,c,g){const v=this._actions,M=this._actionsByClip;let I=M[c];if(I===void 0)I={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,M[c]=I;else{const R=I.knownActions;e._byClipCacheIndex=R.length,R.push(e)}e._cacheIndex=v.length,v.push(e),I.actionByRoot[g]=e}_removeInactiveAction(e){const c=this._actions,g=c[c.length-1],v=e._cacheIndex;g._cacheIndex=v,c[v]=g,c.pop(),e._cacheIndex=null;const M=e._clip.uuid,I=this._actionsByClip,R=I[M],z=R.knownActions,j=z[z.length-1],W=e._byClipCacheIndex;j._byClipCacheIndex=W,z[W]=j,z.pop(),e._byClipCacheIndex=null;const q=R.actionByRoot,Z=(e._localRoot||this._root).uuid;delete q[Z],z.length===0&&delete I[M],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const c=e._propertyBindings;for(let g=0,v=c.length;g!==v;++g){const M=c[g];--M.referenceCount===0&&this._removeInactiveBinding(M)}}_lendAction(e){const c=this._actions,g=e._cacheIndex,v=this._nActiveActions++,M=c[v];e._cacheIndex=v,c[v]=e,M._cacheIndex=g,c[g]=M}_takeBackAction(e){const c=this._actions,g=e._cacheIndex,v=--this._nActiveActions,M=c[v];e._cacheIndex=v,c[v]=e,M._cacheIndex=g,c[g]=M}_addInactiveBinding(e,c,g){const v=this._bindingsByRootAndName,M=this._bindings;let I=v[c];I===void 0&&(I={},v[c]=I),I[g]=e,e._cacheIndex=M.length,M.push(e)}_removeInactiveBinding(e){const c=this._bindings,g=e.binding,v=g.rootNode.uuid,M=g.path,I=this._bindingsByRootAndName,R=I[v],z=c[c.length-1],j=e._cacheIndex;z._cacheIndex=j,c[j]=z,c.pop(),delete R[M],Object.keys(R).length===0&&delete I[v]}_lendBinding(e){const c=this._bindings,g=e._cacheIndex,v=this._nActiveBindings++,M=c[v];e._cacheIndex=v,c[v]=e,M._cacheIndex=g,c[g]=M}_takeBackBinding(e){const c=this._bindings,g=e._cacheIndex,v=--this._nActiveBindings,M=c[v];e._cacheIndex=v,c[v]=e,M._cacheIndex=g,c[g]=M}_lendControlInterpolant(){const e=this._controlInterpolants,c=this._nActiveControlInterpolants++;let g=e[c];return g===void 0&&(g=new gy(new Float32Array(2),new Float32Array(2),1,xy),g.__cacheIndex=c,e[c]=g),g}_takeBackControlInterpolant(e){const c=this._controlInterpolants,g=e.__cacheIndex,v=--this._nActiveControlInterpolants,M=c[v];e.__cacheIndex=v,c[v]=e,M.__cacheIndex=g,c[g]=M}clipAction(e,c,g){const v=c||this._root,M=v.uuid;let I=typeof e=="string"?R0.findByName(v,e):e;const R=I!==null?I.uuid:e,z=this._actionsByClip[R];let j=null;if(g===void 0&&(I!==null?g=I.blendMode:g=Kh),z!==void 0){const q=z.actionByRoot[M];if(q!==void 0&&q.blendMode===g)return q;j=z.knownActions[0],I===null&&(I=j._clip)}if(I===null)return null;const W=new by(this,I,c,g);return this._bindAction(W,j),this._addInactiveAction(W,R,M),W}existingAction(e,c){const g=c||this._root,v=g.uuid,M=typeof e=="string"?R0.findByName(g,e):e,I=M?M.uuid:e,R=this._actionsByClip[I];return R!==void 0&&R.actionByRoot[v]||null}stopAllAction(){const e=this._actions,c=this._nActiveActions;for(let g=c-1;g>=0;--g)e[g].stop();return this}update(e){e*=this.timeScale;const c=this._actions,g=this._nActiveActions,v=this.time+=e,M=Math.sign(e),I=this._accuIndex^=1;for(let j=0;j!==g;++j)c[j]._update(v,e,M,I);const R=this._bindings,z=this._nActiveBindings;for(let j=0;j!==z;++j)R[j].apply(I);return this}setTime(e){this.time=0;for(let c=0;c<this._actions.length;c++)this._actions[c].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const c=this._actions,g=e.uuid,v=this._actionsByClip,M=v[g];if(M!==void 0){const I=M.knownActions;for(let R=0,z=I.length;R!==z;++R){const j=I[R];this._deactivateAction(j);const W=j._cacheIndex,q=c[c.length-1];j._cacheIndex=null,j._byClipCacheIndex=null,q._cacheIndex=W,c[W]=q,c.pop(),this._removeInactiveBindingsForAction(j)}delete v[g]}}uncacheRoot(e){const c=e.uuid,g=this._actionsByClip;for(const I in g){const R=g[I].actionByRoot,z=R[c];z!==void 0&&(this._deactivateAction(z),this._removeInactiveAction(z))}const v=this._bindingsByRootAndName,M=v[c];if(M!==void 0)for(const I in M){const R=M[I];R.restoreOriginalState(),this._removeInactiveBinding(R)}}uncacheAction(e,c){const g=this.existingAction(e,c);g!==null&&(this._deactivateAction(g),this._removeInactiveAction(g))}}class du{constructor(e){this.value=e}clone(){return new du(this.value.clone===void 0?this.value:this.value.clone())}}let BE=0;class Cy extends Dl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:BE++}),this.name="",this.usage=Pp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const c=this.uniforms.indexOf(e);return c!==-1&&this.uniforms.splice(c,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const c=e.uniforms;this.uniforms.length=0;for(let g=0,v=c.length;g<v;g++)this.uniforms.push(c[g].clone());return this}clone(){return new this.constructor().copy(this)}}class IE extends Kg{constructor(e,c,g=1){super(e,c),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=g}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const c=super.clone(e);return c.meshPerAttribute=this.meshPerAttribute,c}toJSON(e){const c=super.toJSON(e);return c.isInstancedInterleavedBuffer=!0,c.meshPerAttribute=this.meshPerAttribute,c}}class jh{constructor(e,c,g,v,M){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=c,this.itemSize=g,this.elementSize=v,this.count=M,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,c){return this.type=e,this.elementSize=c,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Ud{constructor(e,c,g=0,v=1/0){this.ray=new Ua(e,c),this.near=g,this.far=v,this.camera=null,this.layers=new uf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,c){this.ray.set(e,c)}setFromCamera(e,c){c.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(c).sub(this.ray.origin).normalize(),this.camera=c):c.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld),this.camera=c):S.error("THREE.Raycaster: Unsupported camera type: "+c.type)}intersectObject(e,c=!0,g=[]){return Sy(e,this,g,c),g.sort(c2),g}intersectObjects(e,c=!0,g=[]){for(let v=0,M=e.length;v<M;v++)Sy(e[v],this,g,c);return g.sort(c2),g}}function c2(C,e){return C.distance-e.distance}function Sy(C,e,c,g){if(C.layers.test(e.layers)&&C.raycast(e,c),g===!0){const v=C.children;for(let M=0,I=v.length;M<I;M++)Sy(v[M],e,c,!0)}}class RE{constructor(e=1,c=0,g=0){return this.radius=e,this.phi=c,this.theta=g,this}set(e,c,g){return this.radius=e,this.phi=c,this.theta=g,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,c,g){return this.radius=Math.sqrt(e*e+c*c+g*g),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,g),this.phi=Math.acos(go(c/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wy{constructor(e=1,c=0,g=0){return this.radius=e,this.theta=c,this.y=g,this}set(e,c,g){return this.radius=e,this.theta=c,this.y=g,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,c,g){return this.radius=Math.sqrt(e*e+g*g),this.theta=Math.atan2(e,g),this.y=c,this}clone(){return new this.constructor().copy(this)}}const N0=new yn;class FE{constructor(e=new yn(1/0,1/0),c=new yn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=c}set(e,c){return this.min.copy(e),this.max.copy(c),this}setFromPoints(e){this.makeEmpty();for(let c=0,g=e.length;c<g;c++)this.expandByPoint(e[c]);return this}setFromCenterAndSize(e,c){const g=N0.copy(c).multiplyScalar(.5);return this.min.copy(e).sub(g),this.max.copy(e).add(g),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,c){return c.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,c){return c.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,N0).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const p2=new Qe,j0=new Qe;class OE{constructor(e=new Qe,c=new Qe){this.start=e,this.end=c}set(e,c){return this.start.copy(e),this.end.copy(c),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,c){return this.delta(c).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,c){p2.subVectors(e,this.start),j0.subVectors(this.end,this.start);const g=j0.dot(j0);let M=j0.dot(p2)/g;return c&&(M=go(M,0,1)),M}closestPointToPoint(e,c,g){const v=this.closestPointToPointParameter(e,c);return this.delta(g).multiplyScalar(v).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Ty=new Qe;class H0 extends $r{constructor(e,c){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=c,this.type="SpotLightHelper";const g=new ui,v=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let I=0,R=1,z=32;I<z;I++,R++){const j=I/z*Math.PI*2,W=R/z*Math.PI*2;v.push(Math.cos(j),Math.sin(j),1,Math.cos(W),Math.sin(W),1)}g.setAttribute("position",new wr(v,3));const M=new Ys({fog:!1,toneMapped:!1});this.cone=new au(g,M),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,c=e*Math.tan(this.light.angle);this.cone.scale.set(c,c,e),Ty.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ty),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ku=new Qe,vm=new ii,Hh=new ii;class DE extends au{constructor(e){const c=u2(e),g=new ui,v=[],M=[],I=new rr(0,0,1),R=new rr(0,1,0);for(let j=0;j<c.length;j++){const W=c[j];W.parent&&W.parent.isBone&&(v.push(0,0,0),v.push(0,0,0),M.push(I.r,I.g,I.b),M.push(R.r,R.g,R.b))}g.setAttribute("position",new wr(v,3)),g.setAttribute("color",new wr(M,3));const z=new Ys({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(g,z),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=c,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const c=this.bones,g=this.geometry,v=g.getAttribute("position");Hh.copy(this.root.matrixWorld).invert();for(let M=0,I=0;M<c.length;M++){const R=c[M];R.parent&&R.parent.isBone&&(vm.multiplyMatrices(Hh,R.matrixWorld),Ku.setFromMatrixPosition(vm),v.setXYZ(I,Ku.x,Ku.y,Ku.z),vm.multiplyMatrices(Hh,R.parent.matrixWorld),Ku.setFromMatrixPosition(vm),v.setXYZ(I+1,Ku.x,Ku.y,Ku.z),I+=2)}g.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function u2(C){const e=[];C.isBone===!0&&e.push(C);for(let c=0;c<C.children.length;c++)e.push.apply(e,u2(C.children[c]));return e}class PE extends bs{constructor(e,c,g){const v=new Ph(c,4,2),M=new ds({wireframe:!0,fog:!1,toneMapped:!1});super(v,M),this.light=e,this.color=g,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Vl=new Qe,d2=new rr,By=new rr;class LE extends $r{constructor(e,c,g){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=g,this.type="HemisphereLightHelper";const v=new kd(c);v.rotateY(Math.PI*.5),this.material=new ds({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const M=v.getAttribute("position"),I=new Float32Array(M.count*3);v.setAttribute("color",new Qi(I,3)),this.add(new bs(v,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const c=e.geometry.getAttribute("color");d2.copy(this.light.color),By.copy(this.light.groundColor);for(let g=0,v=c.count;g<v;g++){const M=g<v/2?d2:By;c.setXYZ(g,M.r,M.g,M.b)}c.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Vl.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kE extends au{constructor(e=10,c=10,g=4473924,v=8947848){g=new rr(g),v=new rr(v);const M=c/2,I=e/c,R=e/2,z=[],j=[];for(let Z=0,ne=0,se=-R;Z<=c;Z++,se+=I){z.push(-R,0,se,R,0,se),z.push(se,0,-R,se,0,R);const fe=Z===M?g:v;fe.toArray(j,ne),ne+=3,fe.toArray(j,ne),ne+=3,fe.toArray(j,ne),ne+=3,fe.toArray(j,ne),ne+=3}const W=new ui;W.setAttribute("position",new wr(z,3)),W.setAttribute("color",new wr(j,3));const q=new Ys({vertexColors:!0,toneMapped:!1});super(W,q),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class h2 extends au{constructor(e=10,c=16,g=8,v=64,M=4473924,I=8947848){M=new rr(M),I=new rr(I);const R=[],z=[];if(c>1)for(let q=0;q<c;q++){const Z=q/c*(Math.PI*2),ne=Math.sin(Z)*e,se=Math.cos(Z)*e;R.push(0,0,0),R.push(ne,0,se);const fe=q&1?M:I;z.push(fe.r,fe.g,fe.b),z.push(fe.r,fe.g,fe.b)}for(let q=0;q<g;q++){const Z=q&1?M:I,ne=e-e/g*q;for(let se=0;se<v;se++){let fe=se/v*(Math.PI*2),$=Math.sin(fe)*ne,ee=Math.cos(fe)*ne;R.push($,0,ee),z.push(Z.r,Z.g,Z.b),fe=(se+1)/v*(Math.PI*2),$=Math.sin(fe)*ne,ee=Math.cos(fe)*ne,R.push($,0,ee),z.push(Z.r,Z.g,Z.b)}}const j=new ui;j.setAttribute("position",new wr(R,3)),j.setAttribute("color",new wr(z,3));const W=new Ys({vertexColors:!0,toneMapped:!1});super(j,W),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const f2=new Qe,W0=new Qe,g2=new Qe;class zE extends $r{constructor(e,c,g){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=g,this.type="DirectionalLightHelper",c===void 0&&(c=1);let v=new ui;v.setAttribute("position",new wr([-c,c,0,c,c,0,c,-c,0,-c,-c,0,-c,c,0],3));const M=new Ys({fog:!1,toneMapped:!1});this.lightPlane=new su(v,M),this.add(this.lightPlane),v=new ui,v.setAttribute("position",new wr([0,0,0,0,0,1],3)),this.targetLine=new su(v,M),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),f2.setFromMatrixPosition(this.light.matrixWorld),W0.setFromMatrixPosition(this.light.target.matrixWorld),g2.subVectors(W0,f2),this.lightPlane.lookAt(W0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(W0),this.targetLine.scale.z=g2.length()}}const Ps=new Qe,Ls=new Xo;class GE extends au{constructor(e){const c=new ui,g=new Ys({color:16777215,vertexColors:!0,toneMapped:!1}),v=[],M=[],I={};R("n1","n2"),R("n2","n4"),R("n4","n3"),R("n3","n1"),R("f1","f2"),R("f2","f4"),R("f4","f3"),R("f3","f1"),R("n1","f1"),R("n2","f2"),R("n3","f3"),R("n4","f4"),R("p","n1"),R("p","n2"),R("p","n3"),R("p","n4"),R("u1","u2"),R("u2","u3"),R("u3","u1"),R("c","t"),R("p","c"),R("cn1","cn2"),R("cn3","cn4"),R("cf1","cf2"),R("cf3","cf4");function R(se,fe){z(se),z(fe)}function z(se){v.push(0,0,0),M.push(0,0,0),I[se]===void 0&&(I[se]=[]),I[se].push(v.length/3-1)}c.setAttribute("position",new wr(v,3)),c.setAttribute("color",new wr(M,3)),super(c,g),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=I,this.update();const j=new rr(16755200),W=new rr(16711680),q=new rr(43775),Z=new rr(16777215),ne=new rr(3355443);this.setColors(j,W,q,Z,ne)}setColors(e,c,g,v,M){const R=this.geometry.getAttribute("color");R.setXYZ(0,e.r,e.g,e.b),R.setXYZ(1,e.r,e.g,e.b),R.setXYZ(2,e.r,e.g,e.b),R.setXYZ(3,e.r,e.g,e.b),R.setXYZ(4,e.r,e.g,e.b),R.setXYZ(5,e.r,e.g,e.b),R.setXYZ(6,e.r,e.g,e.b),R.setXYZ(7,e.r,e.g,e.b),R.setXYZ(8,e.r,e.g,e.b),R.setXYZ(9,e.r,e.g,e.b),R.setXYZ(10,e.r,e.g,e.b),R.setXYZ(11,e.r,e.g,e.b),R.setXYZ(12,e.r,e.g,e.b),R.setXYZ(13,e.r,e.g,e.b),R.setXYZ(14,e.r,e.g,e.b),R.setXYZ(15,e.r,e.g,e.b),R.setXYZ(16,e.r,e.g,e.b),R.setXYZ(17,e.r,e.g,e.b),R.setXYZ(18,e.r,e.g,e.b),R.setXYZ(19,e.r,e.g,e.b),R.setXYZ(20,e.r,e.g,e.b),R.setXYZ(21,e.r,e.g,e.b),R.setXYZ(22,e.r,e.g,e.b),R.setXYZ(23,e.r,e.g,e.b),R.setXYZ(24,c.r,c.g,c.b),R.setXYZ(25,c.r,c.g,c.b),R.setXYZ(26,c.r,c.g,c.b),R.setXYZ(27,c.r,c.g,c.b),R.setXYZ(28,c.r,c.g,c.b),R.setXYZ(29,c.r,c.g,c.b),R.setXYZ(30,c.r,c.g,c.b),R.setXYZ(31,c.r,c.g,c.b),R.setXYZ(32,g.r,g.g,g.b),R.setXYZ(33,g.r,g.g,g.b),R.setXYZ(34,g.r,g.g,g.b),R.setXYZ(35,g.r,g.g,g.b),R.setXYZ(36,g.r,g.g,g.b),R.setXYZ(37,g.r,g.g,g.b),R.setXYZ(38,v.r,v.g,v.b),R.setXYZ(39,v.r,v.g,v.b),R.setXYZ(40,M.r,M.g,M.b),R.setXYZ(41,M.r,M.g,M.b),R.setXYZ(42,M.r,M.g,M.b),R.setXYZ(43,M.r,M.g,M.b),R.setXYZ(44,M.r,M.g,M.b),R.setXYZ(45,M.r,M.g,M.b),R.setXYZ(46,M.r,M.g,M.b),R.setXYZ(47,M.r,M.g,M.b),R.setXYZ(48,M.r,M.g,M.b),R.setXYZ(49,M.r,M.g,M.b),R.needsUpdate=!0}update(){const e=this.geometry,c=this.pointMap,g=1,v=1;Ls.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ks("c",c,e,Ls,0,0,-1),Ks("t",c,e,Ls,0,0,1),Ks("n1",c,e,Ls,-g,-v,-1),Ks("n2",c,e,Ls,g,-v,-1),Ks("n3",c,e,Ls,-g,v,-1),Ks("n4",c,e,Ls,g,v,-1),Ks("f1",c,e,Ls,-g,-v,1),Ks("f2",c,e,Ls,g,-v,1),Ks("f3",c,e,Ls,-g,v,1),Ks("f4",c,e,Ls,g,v,1),Ks("u1",c,e,Ls,g*.7,v*1.1,-1),Ks("u2",c,e,Ls,-g*.7,v*1.1,-1),Ks("u3",c,e,Ls,0,v*2,-1),Ks("cf1",c,e,Ls,-g,0,1),Ks("cf2",c,e,Ls,g,0,1),Ks("cf3",c,e,Ls,0,-v,1),Ks("cf4",c,e,Ls,0,v,1),Ks("cn1",c,e,Ls,-g,0,-1),Ks("cn2",c,e,Ls,g,0,-1),Ks("cn3",c,e,Ls,0,-v,-1),Ks("cn4",c,e,Ls,0,v,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ks(C,e,c,g,v,M,I){Ps.set(v,M,I).unproject(g);const R=e[C];if(R!==void 0){const z=c.getAttribute("position");for(let j=0,W=R.length;j<W;j++)z.setXYZ(R[j],Ps.x,Ps.y,Ps.z)}}const V0=new Es;class Lo extends au{constructor(e,c=16776960){const g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=new Float32Array(8*3),M=new ui;M.setIndex(new Qi(g,1)),M.setAttribute("position",new Qi(v,3)),super(M,new Ys({color:c,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&S.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&V0.setFromObject(this.object),V0.isEmpty())return;const c=V0.min,g=V0.max,v=this.geometry.attributes.position,M=v.array;M[0]=g.x,M[1]=g.y,M[2]=g.z,M[3]=c.x,M[4]=g.y,M[5]=g.z,M[6]=c.x,M[7]=c.y,M[8]=g.z,M[9]=g.x,M[10]=c.y,M[11]=g.z,M[12]=g.x,M[13]=g.y,M[14]=c.z,M[15]=c.x,M[16]=g.y,M[17]=c.z,M[18]=c.x,M[19]=c.y,M[20]=c.z,M[21]=g.x,M[22]=c.y,M[23]=c.z,v.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,c){return super.copy(e,c),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class m2 extends au{constructor(e,c=16776960){const g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],M=new ui;M.setIndex(new Qi(g,1)),M.setAttribute("position",new wr(v,3)),super(M,new Ys({color:c,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const c=this.box;c.isEmpty()||(c.getCenter(this.position),c.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class UE extends su{constructor(e,c=1,g=16776960){const v=g,M=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],I=new ui;I.setAttribute("position",new wr(M,3)),I.computeBoundingSphere(),super(I,new Ys({color:v,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=c;const R=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],z=new ui;z.setAttribute("position",new wr(R,3)),z.computeBoundingSphere(),this.add(new bs(z,new ds({color:v,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const y2=new Qe;let Nd,Iy;class NE extends $r{constructor(e=new Qe(0,0,1),c=new Qe(0,0,0),g=1,v=16776960,M=g*.2,I=M*.2){super(),this.type="ArrowHelper",Nd===void 0&&(Nd=new ui,Nd.setAttribute("position",new wr([0,0,0,0,1,0],3)),Iy=new Dd(0,.5,1,5,1),Iy.translate(0,-.5,0)),this.position.copy(c),this.line=new su(Nd,new Ys({color:v,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bs(Iy,new ds({color:v,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(g,M,I)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{y2.set(e.z,0,-e.x).normalize();const c=Math.acos(e.y);this.quaternion.setFromAxisAngle(y2,c)}}setLength(e,c=e*.2,g=c*.2){this.line.scale.set(1,Math.max(1e-4,e-c),1),this.line.updateMatrix(),this.cone.scale.set(g,c,g),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class di extends au{constructor(e=1){const c=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],g=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],v=new ui;v.setAttribute("position",new wr(c,3)),v.setAttribute("color",new wr(g,3));const M=new Ys({vertexColors:!0,toneMapped:!1});super(v,M),this.type="AxesHelper"}setColors(e,c,g){const v=new rr,M=this.geometry.attributes.color.array;return v.set(e),v.toArray(M,0),v.toArray(M,3),v.set(c),v.toArray(M,6),v.toArray(M,9),v.set(g),v.toArray(M,12),v.toArray(M,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Q0{constructor(){this.type="ShapePath",this.color=new rr,this.subPaths=[],this.currentPath=null}moveTo(e,c){return this.currentPath=new Fd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,c),this}lineTo(e,c){return this.currentPath.lineTo(e,c),this}quadraticCurveTo(e,c,g,v){return this.currentPath.quadraticCurveTo(e,c,g,v),this}bezierCurveTo(e,c,g,v,M,I){return this.currentPath.bezierCurveTo(e,c,g,v,M,I),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function c(ee){const ve=[];for(let ue=0,Ce=ee.length;ue<Ce;ue++){const Oe=ee[ue],We=new jf;We.curves=Oe.curves,ve.push(We)}return ve}function g(ee,ve){const ue=ve.length;let Ce=!1;for(let Oe=ue-1,We=0;We<ue;Oe=We++){let Ze=ve[Oe],ht=ve[We],Te=ht.x-Ze.x,Ve=ht.y-Ze.y;if(Math.abs(Ve)>Number.EPSILON){if(Ve<0&&(Ze=ve[We],Te=-Te,ht=ve[Oe],Ve=-Ve),ee.y<Ze.y||ee.y>ht.y)continue;if(ee.y===Ze.y){if(ee.x===Ze.x)return!0}else{const qt=Ve*(ee.x-Ze.x)-Te*(ee.y-Ze.y);if(qt===0)return!0;if(qt<0)continue;Ce=!Ce}}else{if(ee.y!==Ze.y)continue;if(ht.x<=ee.x&&ee.x<=Ze.x||Ze.x<=ee.x&&ee.x<=ht.x)return!0}}return Ce}const v=pu.isClockWise,M=this.subPaths;if(M.length===0)return[];let I,R,z;const j=[];if(M.length===1)return R=M[0],z=new jf,z.curves=R.curves,j.push(z),j;let W=!v(M[0].getPoints());W=e?!W:W;const q=[],Z=[];let ne=[],se=0,fe;Z[se]=void 0,ne[se]=[];for(let ee=0,ve=M.length;ee<ve;ee++)R=M[ee],fe=R.getPoints(),I=v(fe),I=e?!I:I,I?(!W&&Z[se]&&se++,Z[se]={s:new jf,p:fe},Z[se].s.curves=R.curves,W&&se++,ne[se]=[]):ne[se].push({h:R,p:fe[0]});if(!Z[0])return c(M);if(Z.length>1){let ee=!1,ve=0;for(let ue=0,Ce=Z.length;ue<Ce;ue++)q[ue]=[];for(let ue=0,Ce=Z.length;ue<Ce;ue++){const Oe=ne[ue];for(let We=0;We<Oe.length;We++){const Ze=Oe[We];let ht=!0;for(let Te=0;Te<Z.length;Te++)g(Ze.p,Z[Te].p)&&(ue!==Te&&ve++,ht?(ht=!1,q[Te].push(Ze)):ee=!0);ht&&q[ue].push(Ze)}}ve>0&&ee===!1&&(ne=q)}let $;for(let ee=0,ve=Z.length;ee<ve;ee++){z=Z[ee].s,j.push(z),$=ne[ee];for(let ue=0,Ce=$.length;ue<Ce;ue++)z.holes.push($[ue].h)}return j}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window!="undefined"&&(window.__THREE__?S.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d)}}]);

//# sourceMappingURL=5889.b82ba4bf6c78e8f367da.js.map